import { MessageBuilder } from '../builders/MessageBuilder.ts';
import { RoomBuilder } from '../builders/RoomBuilder.ts';
import { AppObjectRegistry } from '../../../AppObjectRegistry.ts';
import { require } from '../../../lib/require.ts';
const { UIHelper } = require('@rocket.chat/apps-engine/server/misc/UIHelper.js');
const { RoomType } = require('@rocket.chat/apps-engine/definition/rooms/RoomType.js');
const { RocketChatAssociationModel } = require('@rocket.chat/apps-engine/definition/metadata/RocketChatAssociations.js');
export class ModifyUpdater {
  senderFn;
  constructor(senderFn){
    this.senderFn = senderFn;
  }
  getLivechatUpdater() {
    return new Proxy({
      __kind: 'getLivechatUpdater'
    }, {
      get: (_target, prop)=>(...params)=>prop === 'toJSON' ? {} : this.senderFn({
            method: `accessor:getModifier:getUpdater:getLivechatUpdater:${prop}`,
            params
          }).then((response)=>response.result).catch((err)=>{
            throw new Error(err.error);
          })
    });
  }
  getUserUpdater() {
    return new Proxy({
      __kind: 'getUserUpdater'
    }, {
      get: (_target, prop)=>(...params)=>prop === 'toJSON' ? {} : this.senderFn({
            method: `accessor:getModifier:getUpdater:getUserUpdater:${prop}`,
            params
          }).then((response)=>response.result).catch((err)=>{
            throw new Error(err.error);
          })
    });
  }
  async message(messageId, _updater) {
    const response = await this.senderFn({
      method: 'bridges:getMessageBridge:doGetById',
      params: [
        messageId,
        AppObjectRegistry.get('id')
      ]
    });
    return new MessageBuilder(response.result);
  }
  async room(roomId, _updater) {
    const response = await this.senderFn({
      method: 'bridges:getRoomBridge:doGetById',
      params: [
        roomId,
        AppObjectRegistry.get('id')
      ]
    });
    return new RoomBuilder(response.result);
  }
  finish(builder) {
    switch(builder.kind){
      case RocketChatAssociationModel.MESSAGE:
        return this._finishMessage(builder);
      case RocketChatAssociationModel.ROOM:
        return this._finishRoom(builder);
      default:
        throw new Error('Invalid builder passed to the ModifyUpdater.finish function.');
    }
  }
  async _finishMessage(builder) {
    const result = builder.getMessage();
    if (!result.id) {
      throw new Error("Invalid message, can't update a message without an id.");
    }
    if (!result.sender?.id) {
      throw new Error('Invalid sender assigned to the message.');
    }
    if (result.blocks?.length) {
      result.blocks = UIHelper.assignIds(result.blocks, AppObjectRegistry.get('id') || '');
    }
    await this.senderFn({
      method: 'bridges:getMessageBridge:doUpdate',
      params: [
        result,
        AppObjectRegistry.get('id')
      ]
    });
  }
  async _finishRoom(builder) {
    const result = builder.getRoom();
    if (!result.id) {
      throw new Error("Invalid room, can't update a room without an id.");
    }
    if (!result.type) {
      throw new Error('Invalid type assigned to the room.');
    }
    if (result.type !== RoomType.LIVE_CHAT) {
      if (!result.creator || !result.creator.id) {
        throw new Error('Invalid creator assigned to the room.');
      }
      if (!result.slugifiedName || !result.slugifiedName.trim()) {
        throw new Error('Invalid slugifiedName assigned to the room.');
      }
    }
    if (!result.displayName || !result.displayName.trim()) {
      throw new Error('Invalid displayName assigned to the room.');
    }
    await this.senderFn({
      method: 'bridges:getRoomBridge:doUpdate',
      params: [
        result,
        builder.getMembersToBeAddedUsernames(),
        AppObjectRegistry.get('id')
      ]
    });
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvZ3VpbGhlcm1lZ2F6em8vZGV2L1JvY2tldC5DaGF0L3BhY2thZ2VzL2FwcHMtZW5naW5lL2Rlbm8tcnVudGltZS9saWIvYWNjZXNzb3JzL21vZGlmeS9Nb2RpZnlVcGRhdGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgSU1vZGlmeVVwZGF0ZXIgfSBmcm9tICdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi9hY2Nlc3NvcnMvSU1vZGlmeVVwZGF0ZXIudHMnO1xuaW1wb3J0IHR5cGUgeyBJTGl2ZWNoYXRVcGRhdGVyIH0gZnJvbSAnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vYWNjZXNzb3JzL0lMaXZlY2hhdFVwZGF0ZXIudHMnO1xuaW1wb3J0IHR5cGUgeyBJVXNlclVwZGF0ZXIgfSBmcm9tICdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi9hY2Nlc3NvcnMvSVVzZXJVcGRhdGVyLnRzJztcbmltcG9ydCB0eXBlIHsgSU1lc3NhZ2VCdWlsZGVyIH0gZnJvbSAnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vYWNjZXNzb3JzL0lNZXNzYWdlQnVpbGRlci50cyc7XG5pbXBvcnQgdHlwZSB7IElSb29tQnVpbGRlciB9IGZyb20gJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9kZWZpbml0aW9uL2FjY2Vzc29ycy9JUm9vbUJ1aWxkZXIudHMnO1xuaW1wb3J0IHR5cGUgeyBJVXNlciB9IGZyb20gJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9kZWZpbml0aW9uL3VzZXJzL0lVc2VyLnRzJztcbmltcG9ydCB0eXBlIHsgSU1lc3NhZ2UgfSBmcm9tICdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi9tZXNzYWdlcy9JTWVzc2FnZS50cyc7XG5pbXBvcnQgdHlwZSB7IElSb29tIH0gZnJvbSAnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vcm9vbXMvSVJvb20udHMnO1xuXG5pbXBvcnQgdHlwZSB7IFVJSGVscGVyIGFzIF9VSUhlbHBlciB9IGZyb20gJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9zZXJ2ZXIvbWlzYy9VSUhlbHBlci50cyc7XG5pbXBvcnQgdHlwZSB7IFJvb21UeXBlIGFzIF9Sb29tVHlwZSB9IGZyb20gJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9kZWZpbml0aW9uL3Jvb21zL1Jvb21UeXBlLnRzJztcbmltcG9ydCB0eXBlIHsgUm9ja2V0Q2hhdEFzc29jaWF0aW9uTW9kZWwgYXMgX1JvY2tldENoYXRBc3NvY2lhdGlvbk1vZGVsIH0gZnJvbSAnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vbWV0YWRhdGEvUm9ja2V0Q2hhdEFzc29jaWF0aW9ucy50cyc7XG5cbmltcG9ydCAqIGFzIE1lc3NlbmdlciBmcm9tICcuLi8uLi9tZXNzZW5nZXIudHMnO1xuXG5pbXBvcnQgeyBNZXNzYWdlQnVpbGRlciB9IGZyb20gJy4uL2J1aWxkZXJzL01lc3NhZ2VCdWlsZGVyLnRzJztcbmltcG9ydCB7IFJvb21CdWlsZGVyIH0gZnJvbSAnLi4vYnVpbGRlcnMvUm9vbUJ1aWxkZXIudHMnO1xuaW1wb3J0IHsgQXBwT2JqZWN0UmVnaXN0cnkgfSBmcm9tICcuLi8uLi8uLi9BcHBPYmplY3RSZWdpc3RyeS50cyc7XG5cbmltcG9ydCB7IHJlcXVpcmUgfSBmcm9tICcuLi8uLi8uLi9saWIvcmVxdWlyZS50cyc7XG5cbmNvbnN0IHsgVUlIZWxwZXIgfSA9IHJlcXVpcmUoJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9zZXJ2ZXIvbWlzYy9VSUhlbHBlci5qcycpIGFzIHsgVUlIZWxwZXI6IHR5cGVvZiBfVUlIZWxwZXIgfTtcbmNvbnN0IHsgUm9vbVR5cGUgfSA9IHJlcXVpcmUoJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9kZWZpbml0aW9uL3Jvb21zL1Jvb21UeXBlLmpzJykgYXMgeyBSb29tVHlwZTogdHlwZW9mIF9Sb29tVHlwZSB9O1xuY29uc3QgeyBSb2NrZXRDaGF0QXNzb2NpYXRpb25Nb2RlbCB9ID0gcmVxdWlyZSgnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vbWV0YWRhdGEvUm9ja2V0Q2hhdEFzc29jaWF0aW9ucy5qcycpIGFzIHtcbiAgICBSb2NrZXRDaGF0QXNzb2NpYXRpb25Nb2RlbDogdHlwZW9mIF9Sb2NrZXRDaGF0QXNzb2NpYXRpb25Nb2RlbDtcbn07XG5cbmV4cG9ydCBjbGFzcyBNb2RpZnlVcGRhdGVyIGltcGxlbWVudHMgSU1vZGlmeVVwZGF0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgc2VuZGVyRm46IHR5cGVvZiBNZXNzZW5nZXIuc2VuZFJlcXVlc3QpIHsgfVxuXG4gICAgcHVibGljIGdldExpdmVjaGF0VXBkYXRlcigpOiBJTGl2ZWNoYXRVcGRhdGVyIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eShcbiAgICAgICAgICAgIHsgX19raW5kOiAnZ2V0TGl2ZWNoYXRVcGRhdGVyJyB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGdldDpcbiAgICAgICAgICAgICAgICAgICAgKF90YXJnZXQ6IHVua25vd24sIHByb3A6IHN0cmluZykgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICguLi5wYXJhbXM6IHVua25vd25bXSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wID09PSAndG9KU09OJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5zZW5kZXJGbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGBhY2Nlc3NvcjpnZXRNb2RpZmllcjpnZXRVcGRhdGVyOmdldExpdmVjaGF0VXBkYXRlcjoke3Byb3B9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UucmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyLmVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgKSBhcyBJTGl2ZWNoYXRVcGRhdGVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRVc2VyVXBkYXRlcigpOiBJVXNlclVwZGF0ZXIge1xuICAgICAgICByZXR1cm4gbmV3IFByb3h5KFxuICAgICAgICAgICAgeyBfX2tpbmQ6ICdnZXRVc2VyVXBkYXRlcicgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBnZXQ6XG4gICAgICAgICAgICAgICAgICAgIChfdGFyZ2V0OiB1bmtub3duLCBwcm9wOiBzdHJpbmcpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAoLi4ucGFyYW1zOiB1bmtub3duW10pID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcCA9PT0gJ3RvSlNPTidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuc2VuZGVyRm4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBgYWNjZXNzb3I6Z2V0TW9kaWZpZXI6Z2V0VXBkYXRlcjpnZXRVc2VyVXBkYXRlcjoke3Byb3B9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UucmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyLmVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgKSBhcyBJVXNlclVwZGF0ZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIG1lc3NhZ2UobWVzc2FnZUlkOiBzdHJpbmcsIF91cGRhdGVyOiBJVXNlcik6IFByb21pc2U8SU1lc3NhZ2VCdWlsZGVyPiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kZXJGbih7XG4gICAgICAgICAgICBtZXRob2Q6ICdicmlkZ2VzOmdldE1lc3NhZ2VCcmlkZ2U6ZG9HZXRCeUlkJyxcbiAgICAgICAgICAgIHBhcmFtczogW21lc3NhZ2VJZCwgQXBwT2JqZWN0UmVnaXN0cnkuZ2V0KCdpZCcpXSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBNZXNzYWdlQnVpbGRlcihyZXNwb25zZS5yZXN1bHQgYXMgSU1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyByb29tKHJvb21JZDogc3RyaW5nLCBfdXBkYXRlcjogSVVzZXIpOiBQcm9taXNlPElSb29tQnVpbGRlcj4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZGVyRm4oe1xuICAgICAgICAgICAgbWV0aG9kOiAnYnJpZGdlczpnZXRSb29tQnJpZGdlOmRvR2V0QnlJZCcsXG4gICAgICAgICAgICBwYXJhbXM6IFtyb29tSWQsIEFwcE9iamVjdFJlZ2lzdHJ5LmdldCgnaWQnKV0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBuZXcgUm9vbUJ1aWxkZXIocmVzcG9uc2UucmVzdWx0IGFzIElSb29tKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZmluaXNoKGJ1aWxkZXI6IElNZXNzYWdlQnVpbGRlciB8IElSb29tQnVpbGRlcik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBzd2l0Y2ggKGJ1aWxkZXIua2luZCkge1xuICAgICAgICAgICAgY2FzZSBSb2NrZXRDaGF0QXNzb2NpYXRpb25Nb2RlbC5NRVNTQUdFOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9maW5pc2hNZXNzYWdlKGJ1aWxkZXIgYXMgSU1lc3NhZ2VCdWlsZGVyKTtcbiAgICAgICAgICAgIGNhc2UgUm9ja2V0Q2hhdEFzc29jaWF0aW9uTW9kZWwuUk9PTTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZmluaXNoUm9vbShidWlsZGVyIGFzIElSb29tQnVpbGRlcik7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBidWlsZGVyIHBhc3NlZCB0byB0aGUgTW9kaWZ5VXBkYXRlci5maW5pc2ggZnVuY3Rpb24uJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9maW5pc2hNZXNzYWdlKGJ1aWxkZXI6IElNZXNzYWdlQnVpbGRlcik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBidWlsZGVyLmdldE1lc3NhZ2UoKTtcblxuICAgICAgICBpZiAoIXJlc3VsdC5pZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBtZXNzYWdlLCBjYW4ndCB1cGRhdGUgYSBtZXNzYWdlIHdpdGhvdXQgYW4gaWQuXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFyZXN1bHQuc2VuZGVyPy5pZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHNlbmRlciBhc3NpZ25lZCB0byB0aGUgbWVzc2FnZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXN1bHQuYmxvY2tzPy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJlc3VsdC5ibG9ja3MgPSBVSUhlbHBlci5hc3NpZ25JZHMocmVzdWx0LmJsb2NrcywgQXBwT2JqZWN0UmVnaXN0cnkuZ2V0KCdpZCcpIHx8ICcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZGVyRm4oe1xuICAgICAgICAgICAgbWV0aG9kOiAnYnJpZGdlczpnZXRNZXNzYWdlQnJpZGdlOmRvVXBkYXRlJyxcbiAgICAgICAgICAgIHBhcmFtczogW3Jlc3VsdCwgQXBwT2JqZWN0UmVnaXN0cnkuZ2V0KCdpZCcpXSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfZmluaXNoUm9vbShidWlsZGVyOiBJUm9vbUJ1aWxkZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYnVpbGRlci5nZXRSb29tKCk7XG5cbiAgICAgICAgaWYgKCFyZXN1bHQuaWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcm9vbSwgY2FuJ3QgdXBkYXRlIGEgcm9vbSB3aXRob3V0IGFuIGlkLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcmVzdWx0LnR5cGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB0eXBlIGFzc2lnbmVkIHRvIHRoZSByb29tLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3VsdC50eXBlICE9PSBSb29tVHlwZS5MSVZFX0NIQVQpIHtcbiAgICAgICAgICAgIGlmICghcmVzdWx0LmNyZWF0b3IgfHwgIXJlc3VsdC5jcmVhdG9yLmlkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNyZWF0b3IgYXNzaWduZWQgdG8gdGhlIHJvb20uJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghcmVzdWx0LnNsdWdpZmllZE5hbWUgfHwgIXJlc3VsdC5zbHVnaWZpZWROYW1lLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzbHVnaWZpZWROYW1lIGFzc2lnbmVkIHRvIHRoZSByb29tLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFyZXN1bHQuZGlzcGxheU5hbWUgfHwgIXJlc3VsdC5kaXNwbGF5TmFtZS50cmltKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBkaXNwbGF5TmFtZSBhc3NpZ25lZCB0byB0aGUgcm9vbS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZGVyRm4oe1xuICAgICAgICAgICAgbWV0aG9kOiAnYnJpZGdlczpnZXRSb29tQnJpZGdlOmRvVXBkYXRlJyxcbiAgICAgICAgICAgIHBhcmFtczogW3Jlc3VsdCwgYnVpbGRlci5nZXRNZW1iZXJzVG9CZUFkZGVkVXNlcm5hbWVzKCksIEFwcE9iamVjdFJlZ2lzdHJ5LmdldCgnaWQnKV0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFlQSxTQUFTLGNBQWMsUUFBUSxnQ0FBZ0M7QUFDL0QsU0FBUyxXQUFXLFFBQVEsNkJBQTZCO0FBQ3pELFNBQVMsaUJBQWlCLFFBQVEsZ0NBQWdDO0FBRWxFLFNBQVMsT0FBTyxRQUFRLDBCQUEwQjtBQUVsRCxNQUFNLEVBQUUsUUFBUSxFQUFFLEdBQUcsUUFBUTtBQUM3QixNQUFNLEVBQUUsUUFBUSxFQUFFLEdBQUcsUUFBUTtBQUM3QixNQUFNLEVBQUUsMEJBQTBCLEVBQUUsR0FBRyxRQUFRO0FBSS9DLE9BQU8sTUFBTTs7RUFDVCxZQUFZLEFBQWlCLFFBQXNDLENBQUU7U0FBeEMsV0FB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