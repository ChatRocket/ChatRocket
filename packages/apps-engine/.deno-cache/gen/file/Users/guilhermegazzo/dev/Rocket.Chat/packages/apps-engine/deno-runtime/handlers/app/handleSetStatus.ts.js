import { AppObjectRegistry } from '../../AppObjectRegistry.ts';
import { require } from '../../lib/require.ts';
const { AppStatus } = require('@rocket.chat/apps-engine/definition/AppStatus.js');
export default async function handleSetStatus(params) {
  if (!Array.isArray(params) || !Object.values(AppStatus).includes(params[0])) {
    throw new Error('Invalid params', {
      cause: 'invalid_param_type'
    });
  }
  const [status] = params;
  const app = AppObjectRegistry.get('app');
  if (!app || typeof app['setStatus'] !== 'function') {
    throw new Error('App must contain a setStatus function', {
      cause: 'invalid_app'
    });
  }
  await app['setStatus'](status);
  return null;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvZ3VpbGhlcm1lZ2F6em8vZGV2L1JvY2tldC5DaGF0L3BhY2thZ2VzL2FwcHMtZW5naW5lL2Rlbm8tcnVudGltZS9oYW5kbGVycy9hcHAvaGFuZGxlU2V0U3RhdHVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQXBwIH0gZnJvbSAnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vQXBwLnRzJztcbmltcG9ydCB0eXBlIHsgQXBwU3RhdHVzIGFzIF9BcHBTdGF0dXMgfSBmcm9tICdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi9BcHBTdGF0dXMudHMnO1xuXG5pbXBvcnQgeyBBcHBPYmplY3RSZWdpc3RyeSB9IGZyb20gJy4uLy4uL0FwcE9iamVjdFJlZ2lzdHJ5LnRzJztcbmltcG9ydCB7IHJlcXVpcmUgfSBmcm9tICcuLi8uLi9saWIvcmVxdWlyZS50cyc7XG5cbmNvbnN0IHsgQXBwU3RhdHVzIH0gPSByZXF1aXJlKCdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi9BcHBTdGF0dXMuanMnKSBhcyB7XG4gICAgQXBwU3RhdHVzOiB0eXBlb2YgX0FwcFN0YXR1cztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVNldFN0YXR1cyhwYXJhbXM6IHVua25vd24pOiBQcm9taXNlPG51bGw+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocGFyYW1zKSB8fCAhT2JqZWN0LnZhbHVlcyhBcHBTdGF0dXMpLmluY2x1ZGVzKHBhcmFtc1swXSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHBhcmFtcycsIHsgY2F1c2U6ICdpbnZhbGlkX3BhcmFtX3R5cGUnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IFtzdGF0dXNdID0gcGFyYW1zIGFzIFt0eXBlb2YgQXBwU3RhdHVzXTtcblxuICAgIGNvbnN0IGFwcCA9IEFwcE9iamVjdFJlZ2lzdHJ5LmdldDxBcHA+KCdhcHAnKTtcblxuICAgIGlmICghYXBwIHx8IHR5cGVvZiBhcHBbJ3NldFN0YXR1cyddICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQXBwIG11c3QgY29udGFpbiBhIHNldFN0YXR1cyBmdW5jdGlvbicsIHtcbiAgICAgICAgICAgIGNhdXNlOiAnaW52YWxpZF9hcHAnLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhd2FpdCBhcHBbJ3NldFN0YXR1cyddKHN0YXR1cyk7XG5cbiAgICByZXR1cm4gbnVsbDtcbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxTQUFTLGlCQUFpQixRQUFRLDZCQUE2QjtBQUMvRCxTQUFTLE9BQU8sUUFBUSx1QkFBdUI7QUFFL0MsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLFFBQVE7QUFJOUIsZUFBZSxlQUFlLGdCQUFnQixNQUFlO0VBQ3pELElBQUksQ0FBQyxNQUFNLE9BQU8sQ0FBQyxXQUFXLENBQUMsT0FBTyxNQUFNLENBQUMsV0FBVyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsR0FBRztJQUN6RSxNQUFNLElBQUksTUFBTSxrQkFBa0I7TUFBRSxPQUFPO0lBQXFCO0VBQ3BFO0VBRUEsTUFBTSxDQUFDLE9BQU8sR0FBRztFQUVqQixNQUFNLE1BQU0sa0JBQWtCLEdBQUcsQ0FBTTtFQUV2QyxJQUFJLENBQUMsT0FBTyxPQUFPLEdBQUcsQ0FBQyxZQUFZLEtBQUssWUFBWTtJQUNoRCxNQUFNLElBQUksTUFBTSx5Q0FBeUM7TUFDckQsT0FBTztJQUNYO0VBQ0o7RUFFQSxNQUFNLEdBQUcsQ0FBQyxZQUFZLENBQUM7RUFFdkIsT0FBTztBQUNYIn0=