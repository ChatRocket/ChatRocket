import { JsonRpcError } from 'jsonrpc-lite';
import { AppObjectRegistry } from '../AppObjectRegistry.ts';
import { AppAccessorsInstance } from '../lib/accessors/mod.ts';
import { require } from '../lib/require.ts';
import createRoom from '../lib/roomFactory.ts';
// For some reason Deno couldn't understand the typecast to the original interfaces and said it wasn't a constructor type
const { SlashCommandContext } = require('@rocket.chat/apps-engine/definition/slashcommands/SlashCommandContext.js');
export default async function slashCommandHandler(call, params) {
  const [, commandName, method] = call.split(':');
  const command = AppObjectRegistry.get(`slashcommand:${commandName}`);
  if (!command) {
    return new JsonRpcError(`Slashcommand ${commandName} not found`, -32000);
  }
  let result;
  // If the command is registered, we're pretty safe to assume the app is not undefined
  const app = AppObjectRegistry.get('app');
  app.getLogger().debug(`${commandName}'s ${method} is being executed...`, params);
  try {
    if (method === 'executor' || method === 'previewer') {
      result = await handleExecutor({
        AppAccessorsInstance
      }, command, method, params);
    } else if (method === 'executePreviewItem') {
      result = await handlePreviewItem({
        AppAccessorsInstance
      }, command, params);
    } else {
      return new JsonRpcError(`Method ${method} not found on slashcommand ${commandName}`, -32000);
    }
    app.getLogger().debug(`${commandName}'s ${method} was successfully executed.`);
  } catch (error) {
    app.getLogger().debug(`${commandName}'s ${method} was unsuccessful.`);
    return new JsonRpcError(error.message, -32000);
  }
  return result;
}
/**
 * @param deps Dependencies that need to be injected into the slashcommand
 * @param command The slashcommand that is being executed
 * @param method The method that is being executed
 * @param params The parameters that are being passed to the method
 */ export function handleExecutor(deps, command, method, params) {
  const executor = command[method];
  if (typeof executor !== 'function') {
    throw new Error(`Method ${method} not found on slashcommand ${command.command}`);
  }
  if (!Array.isArray(params) || typeof params[0] !== 'object' || !params[0]) {
    throw new Error(`First parameter must be an object`);
  }
  const { sender, room, params: args, threadId, triggerId } = params[0];
  const context = new SlashCommandContext(sender, createRoom(room, deps.AppAccessorsInstance.getSenderFn()), args, threadId, triggerId);
  return executor.apply(command, [
    context,
    deps.AppAccessorsInstance.getReader(),
    deps.AppAccessorsInstance.getModifier(),
    deps.AppAccessorsInstance.getHttp(),
    deps.AppAccessorsInstance.getPersistence()
  ]);
}
/**
 * @param deps Dependencies that need to be injected into the slashcommand
 * @param command The slashcommand that is being executed
 * @param params The parameters that are being passed to the method
 */ export function handlePreviewItem(deps, command, params) {
  if (typeof command.executePreviewItem !== 'function') {
    throw new Error(`Method  not found on slashcommand ${command.command}`);
  }
  if (!Array.isArray(params) || typeof params[0] !== 'object' || !params[0]) {
    throw new Error(`First parameter must be an object`);
  }
  const [previewItem, { sender, room, params: args, threadId, triggerId }] = params;
  const context = new SlashCommandContext(sender, createRoom(room, deps.AppAccessorsInstance.getSenderFn()), args, threadId, triggerId);
  return command.executePreviewItem(previewItem, context, deps.AppAccessorsInstance.getReader(), deps.AppAccessorsInstance.getModifier(), deps.AppAccessorsInstance.getHttp(), deps.AppAccessorsInstance.getPersistence());
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvZ3VpbGhlcm1lZ2F6em8vZGV2L1JvY2tldC5DaGF0L3BhY2thZ2VzL2FwcHMtZW5naW5lL2Rlbm8tcnVudGltZS9oYW5kbGVycy9zbGFzaGNvbW1hbmQtaGFuZGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEZWZpbmVkLCBKc29uUnBjRXJyb3IgfSBmcm9tICdqc29ucnBjLWxpdGUnO1xuXG5pbXBvcnQgdHlwZSB7IEFwcCB9IGZyb20gXCJAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi9BcHAudHNcIjtcbmltcG9ydCB0eXBlIHsgSVJvb20gfSBmcm9tICdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi9yb29tcy9JUm9vbS50cyc7XG5pbXBvcnQgdHlwZSB7IElTbGFzaENvbW1hbmQgfSBmcm9tICdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi9zbGFzaGNvbW1hbmRzL0lTbGFzaENvbW1hbmQudHMnO1xuaW1wb3J0IHR5cGUgeyBTbGFzaENvbW1hbmRDb250ZXh0IGFzIF9TbGFzaENvbW1hbmRDb250ZXh0IH0gZnJvbSAnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vc2xhc2hjb21tYW5kcy9TbGFzaENvbW1hbmRDb250ZXh0LnRzJztcbmltcG9ydCB0eXBlIHsgUm9vbSBhcyBfUm9vbSB9IGZyb20gJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9zZXJ2ZXIvcm9vbXMvUm9vbS50cyc7XG5cbmltcG9ydCB7IEFwcE9iamVjdFJlZ2lzdHJ5IH0gZnJvbSAnLi4vQXBwT2JqZWN0UmVnaXN0cnkudHMnO1xuaW1wb3J0IHsgQXBwQWNjZXNzb3JzLCBBcHBBY2Nlc3NvcnNJbnN0YW5jZSB9IGZyb20gJy4uL2xpYi9hY2Nlc3NvcnMvbW9kLnRzJztcbmltcG9ydCB7IHJlcXVpcmUgfSBmcm9tICcuLi9saWIvcmVxdWlyZS50cyc7XG5pbXBvcnQgY3JlYXRlUm9vbSBmcm9tICcuLi9saWIvcm9vbUZhY3RvcnkudHMnO1xuXG4vLyBGb3Igc29tZSByZWFzb24gRGVubyBjb3VsZG4ndCB1bmRlcnN0YW5kIHRoZSB0eXBlY2FzdCB0byB0aGUgb3JpZ2luYWwgaW50ZXJmYWNlcyBhbmQgc2FpZCBpdCB3YXNuJ3QgYSBjb25zdHJ1Y3RvciB0eXBlXG5jb25zdCB7IFNsYXNoQ29tbWFuZENvbnRleHQgfSA9IHJlcXVpcmUoJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9kZWZpbml0aW9uL3NsYXNoY29tbWFuZHMvU2xhc2hDb21tYW5kQ29udGV4dC5qcycpIGFzIHtcbiAgICBTbGFzaENvbW1hbmRDb250ZXh0OiB0eXBlb2YgX1NsYXNoQ29tbWFuZENvbnRleHQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBzbGFzaENvbW1hbmRIYW5kbGVyKGNhbGw6IHN0cmluZywgcGFyYW1zOiB1bmtub3duKTogUHJvbWlzZTxKc29uUnBjRXJyb3IgfCBEZWZpbmVkPiB7XG4gICAgY29uc3QgWywgY29tbWFuZE5hbWUsIG1ldGhvZF0gPSBjYWxsLnNwbGl0KCc6Jyk7XG5cbiAgICBjb25zdCBjb21tYW5kID0gQXBwT2JqZWN0UmVnaXN0cnkuZ2V0PElTbGFzaENvbW1hbmQ+KGBzbGFzaGNvbW1hbmQ6JHtjb21tYW5kTmFtZX1gKTtcblxuICAgIGlmICghY29tbWFuZCkge1xuICAgICAgICByZXR1cm4gbmV3IEpzb25ScGNFcnJvcihgU2xhc2hjb21tYW5kICR7Y29tbWFuZE5hbWV9IG5vdCBmb3VuZGAsIC0zMjAwMCk7XG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdDogQXdhaXRlZDxSZXR1cm5UeXBlPHR5cGVvZiBoYW5kbGVFeGVjdXRvcj4+IHwgQXdhaXRlZDxSZXR1cm5UeXBlPHR5cGVvZiBoYW5kbGVQcmV2aWV3SXRlbT4+O1xuXG4gICAgLy8gSWYgdGhlIGNvbW1hbmQgaXMgcmVnaXN0ZXJlZCwgd2UncmUgcHJldHR5IHNhZmUgdG8gYXNzdW1lIHRoZSBhcHAgaXMgbm90IHVuZGVmaW5lZFxuICAgIGNvbnN0IGFwcCA9IEFwcE9iamVjdFJlZ2lzdHJ5LmdldDxBcHA+KCdhcHAnKSE7XG5cbiAgICBhcHAuZ2V0TG9nZ2VyKCkuZGVidWcoYCR7Y29tbWFuZE5hbWV9J3MgJHttZXRob2R9IGlzIGJlaW5nIGV4ZWN1dGVkLi4uYCwgcGFyYW1zKTtcblxuICAgIHRyeSB7XG4gICAgICAgIGlmIChtZXRob2QgPT09ICdleGVjdXRvcicgfHwgbWV0aG9kID09PSAncHJldmlld2VyJykge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgaGFuZGxlRXhlY3V0b3IoeyBBcHBBY2Nlc3NvcnNJbnN0YW5jZSB9LCBjb21tYW5kLCBtZXRob2QsIHBhcmFtcyk7XG4gICAgICAgIH0gZWxzZSBpZiAobWV0aG9kID09PSAnZXhlY3V0ZVByZXZpZXdJdGVtJykge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgaGFuZGxlUHJldmlld0l0ZW0oeyBBcHBBY2Nlc3NvcnNJbnN0YW5jZSB9LCBjb21tYW5kLCBwYXJhbXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBKc29uUnBjRXJyb3IoYE1ldGhvZCAke21ldGhvZH0gbm90IGZvdW5kIG9uIHNsYXNoY29tbWFuZCAke2NvbW1hbmROYW1lfWAsIC0zMjAwMCk7XG4gICAgICAgIH1cblxuICAgICAgICBhcHAuZ2V0TG9nZ2VyKCkuZGVidWcoYCR7Y29tbWFuZE5hbWV9J3MgJHttZXRob2R9IHdhcyBzdWNjZXNzZnVsbHkgZXhlY3V0ZWQuYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgYXBwLmdldExvZ2dlcigpLmRlYnVnKGAke2NvbW1hbmROYW1lfSdzICR7bWV0aG9kfSB3YXMgdW5zdWNjZXNzZnVsLmApO1xuXG4gICAgICAgIHJldHVybiBuZXcgSnNvblJwY0Vycm9yKGVycm9yLm1lc3NhZ2UsIC0zMjAwMCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBAcGFyYW0gZGVwcyBEZXBlbmRlbmNpZXMgdGhhdCBuZWVkIHRvIGJlIGluamVjdGVkIGludG8gdGhlIHNsYXNoY29tbWFuZFxuICogQHBhcmFtIGNvbW1hbmQgVGhlIHNsYXNoY29tbWFuZCB0aGF0IGlzIGJlaW5nIGV4ZWN1dGVkXG4gKiBAcGFyYW0gbWV0aG9kIFRoZSBtZXRob2QgdGhhdCBpcyBiZWluZyBleGVjdXRlZFxuICogQHBhcmFtIHBhcmFtcyBUaGUgcGFyYW1ldGVycyB0aGF0IGFyZSBiZWluZyBwYXNzZWQgdG8gdGhlIG1ldGhvZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlRXhlY3V0b3IoZGVwczogeyBBcHBBY2Nlc3NvcnNJbnN0YW5jZTogQXBwQWNjZXNzb3JzIH0sIGNvbW1hbmQ6IElTbGFzaENvbW1hbmQsIG1ldGhvZDogJ2V4ZWN1dG9yJyB8ICdwcmV2aWV3ZXInLCBwYXJhbXM6IHVua25vd24pIHtcbiAgICBjb25zdCBleGVjdXRvciA9IGNvbW1hbmRbbWV0aG9kXTtcblxuICAgIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNZXRob2QgJHttZXRob2R9IG5vdCBmb3VuZCBvbiBzbGFzaGNvbW1hbmQgJHtjb21tYW5kLmNvbW1hbmR9YCk7XG4gICAgfVxuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHBhcmFtcykgfHwgdHlwZW9mIHBhcmFtc1swXSAhPT0gJ29iamVjdCcgfHwgIXBhcmFtc1swXSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZpcnN0IHBhcmFtZXRlciBtdXN0IGJlIGFuIG9iamVjdGApO1xuICAgIH1cblxuICAgIGNvbnN0IHsgc2VuZGVyLCByb29tLCBwYXJhbXM6IGFyZ3MsIHRocmVhZElkLCB0cmlnZ2VySWQgfSA9IHBhcmFtc1swXSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcblxuICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgU2xhc2hDb21tYW5kQ29udGV4dChcbiAgICAgICAgc2VuZGVyIGFzIF9TbGFzaENvbW1hbmRDb250ZXh0WydzZW5kZXInXSxcbiAgICAgICAgY3JlYXRlUm9vbShyb29tIGFzIElSb29tLCBkZXBzLkFwcEFjY2Vzc29yc0luc3RhbmNlLmdldFNlbmRlckZuKCkpLFxuICAgICAgICBhcmdzIGFzIF9TbGFzaENvbW1hbmRDb250ZXh0WydwYXJhbXMnXSxcbiAgICAgICAgdGhyZWFkSWQgYXMgX1NsYXNoQ29tbWFuZENvbnRleHRbJ3RocmVhZElkJ10sXG4gICAgICAgIHRyaWdnZXJJZCBhcyBfU2xhc2hDb21tYW5kQ29udGV4dFsndHJpZ2dlcklkJ10sXG4gICAgKTtcblxuICAgIHJldHVybiBleGVjdXRvci5hcHBseShjb21tYW5kLCBbXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIGRlcHMuQXBwQWNjZXNzb3JzSW5zdGFuY2UuZ2V0UmVhZGVyKCksXG4gICAgICAgIGRlcHMuQXBwQWNjZXNzb3JzSW5zdGFuY2UuZ2V0TW9kaWZpZXIoKSxcbiAgICAgICAgZGVwcy5BcHBBY2Nlc3NvcnNJbnN0YW5jZS5nZXRIdHRwKCksXG4gICAgICAgIGRlcHMuQXBwQWNjZXNzb3JzSW5zdGFuY2UuZ2V0UGVyc2lzdGVuY2UoKSxcbiAgICBdKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gZGVwcyBEZXBlbmRlbmNpZXMgdGhhdCBuZWVkIHRvIGJlIGluamVjdGVkIGludG8gdGhlIHNsYXNoY29tbWFuZFxuICogQHBhcmFtIGNvbW1hbmQgVGhlIHNsYXNoY29tbWFuZCB0aGF0IGlzIGJlaW5nIGV4ZWN1dGVkXG4gKiBAcGFyYW0gcGFyYW1zIFRoZSBwYXJhbWV0ZXJzIHRoYXQgYXJlIGJlaW5nIHBhc3NlZCB0byB0aGUgbWV0aG9kXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVQcmV2aWV3SXRlbShkZXBzOiB7IEFwcEFjY2Vzc29yc0luc3RhbmNlOiBBcHBBY2Nlc3NvcnMgfSwgY29tbWFuZDogSVNsYXNoQ29tbWFuZCwgcGFyYW1zOiB1bmtub3duKSB7XG4gICAgaWYgKHR5cGVvZiBjb21tYW5kLmV4ZWN1dGVQcmV2aWV3SXRlbSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1ldGhvZCAgbm90IGZvdW5kIG9uIHNsYXNoY29tbWFuZCAke2NvbW1hbmQuY29tbWFuZH1gKTtcbiAgICB9XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocGFyYW1zKSB8fCB0eXBlb2YgcGFyYW1zWzBdICE9PSAnb2JqZWN0JyB8fCAhcGFyYW1zWzBdKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmlyc3QgcGFyYW1ldGVyIG11c3QgYmUgYW4gb2JqZWN0YCk7XG4gICAgfVxuXG4gICAgY29uc3QgW3ByZXZpZXdJdGVtLCB7IHNlbmRlciwgcm9vbSwgcGFyYW1zOiBhcmdzLCB0aHJlYWRJZCwgdHJpZ2dlcklkIH1dID0gcGFyYW1zIGFzIFtSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiwgUmVjb3JkPHN0cmluZywgdW5rbm93bj5dO1xuXG4gICAgY29uc3QgY29udGV4dCA9IG5ldyBTbGFzaENvbW1hbmRDb250ZXh0KFxuICAgICAgICBzZW5kZXIgYXMgX1NsYXNoQ29tbWFuZENvbnRleHRbJ3NlbmRlciddLFxuICAgICAgICBjcmVhdGVSb29tKHJvb20gYXMgSVJvb20sIGRlcHMuQXBwQWNjZXNzb3JzSW5zdGFuY2UuZ2V0U2VuZGVyRm4oKSksXG4gICAgICAgIGFyZ3MgYXMgX1NsYXNoQ29tbWFuZENvbnRleHRbJ3BhcmFtcyddLFxuICAgICAgICB0aHJlYWRJZCBhcyBfU2xhc2hDb21tYW5kQ29udGV4dFsndGhyZWFkSWQnXSxcbiAgICAgICAgdHJpZ2dlcklkIGFzIF9TbGFzaENvbW1hbmRDb250ZXh0Wyd0cmlnZ2VySWQnXSxcbiAgICApO1xuXG4gICAgcmV0dXJuIGNvbW1hbmQuZXhlY3V0ZVByZXZpZXdJdGVtKFxuICAgICAgICBwcmV2aWV3SXRlbSxcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgZGVwcy5BcHBBY2Nlc3NvcnNJbnN0YW5jZS5nZXRSZWFkZXIoKSxcbiAgICAgICAgZGVwcy5BcHBBY2Nlc3NvcnNJbnN0YW5jZS5nZXRNb2RpZmllcigpLFxuICAgICAgICBkZXBzLkFwcEFjY2Vzc29yc0luc3RhbmNlLmdldEh0dHAoKSxcbiAgICAgICAgZGVwcy5BcHBBY2Nlc3NvcnNJbnN0YW5jZS5nZXRQZXJzaXN0ZW5jZSgpLFxuICAgICk7XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsU0FBa0IsWUFBWSxRQUFRLGVBQWU7QUFRckQsU0FBUyxpQkFBaUIsUUFBUSwwQkFBMEI7QUFDNUQsU0FBdUIsb0JBQW9CLFFBQVEsMEJBQTBCO0FBQzdFLFNBQVMsT0FBTyxRQUFRLG9CQUFvQjtBQUM1QyxPQUFPLGdCQUFnQix3QkFBd0I7QUFFL0MseUhBQXlIO0FBQ3pILE1BQU0sRUFBRSxtQkFBbUIsRUFBRSxHQUFHLFFBQVE7QUFJeEMsZUFBZSxlQUFlLG9CQUFvQixJQUFZLEVBQUUsTUFBZTtFQUMzRSxNQUFNLEdBQUcsYUFBYSxPQUFPLEdBQUcsS0FBSyxLQUFLLENBQUM7RUFFM0MsTUFBTSxVQUFVLGtCQUFrQixHQUFHLENBQWdCLENBQUMsYUFBYSxFQUFFLFlBQVksQ0FBQztFQUVsRixJQUFJLENBQUMsU0FBUztJQUNWLE9BQU8sSUFBSSxhQUFhLENBQUMsYUFBYSxFQUFFLFlBQVksVUFBVSxDQUFDLEVBQUUsQ0FBQztFQUN0RTtFQUVBLElBQUk7RUFFSixxRkFBcUY7RUFDckYsTUFBTSxNQUFNLGtCQUFrQixHQUFHLENBQU07RUFFdkMsSUFBSSxTQUFTLEdBQUcsS0FBSyxDQUFDLENBQUMsRUFBRSxZQUFZLEdBQUcsRUFBRSxPQUFPLHFCQUFxQixDQUFDLEVBQUU7RUFFekUsSUFBSTtJQUNBLElBQUksV0FBVyxjQUFjLFdBQVcsYUFBYTtNQUNqRCxTQUFTLE1BQU0sZUFBZTtRQUFFO01BQXFCLEdBQUcsU0FBUyxRQUFRO0lBQzdFLE9BQU8sSUFBSSxXQUFXLHNC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