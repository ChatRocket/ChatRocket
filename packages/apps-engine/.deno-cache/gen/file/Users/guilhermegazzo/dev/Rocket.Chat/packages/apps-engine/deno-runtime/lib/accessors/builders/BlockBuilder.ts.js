import { v1 as uuid } from 'uuid';
import { AppObjectRegistry } from '../../../AppObjectRegistry.ts';
import { require } from '../../../lib/require.ts';
const { BlockType } = require('@rocket.chat/apps-engine/definition/uikit/blocks/Blocks.js');
const { BlockElementType } = require('@rocket.chat/apps-engine/definition/uikit/blocks/Elements.js');
const { TextObjectType } = require('@rocket.chat/apps-engine/definition/uikit/blocks/Objects.js');
/**
 * @deprecated please prefer the rocket.chat/ui-kit components
 */ export class BlockBuilder {
  blocks;
  appId;
  constructor(){
    this.blocks = [];
    this.appId = String(AppObjectRegistry.get('id'));
  }
  addSectionBlock(block) {
    this.addBlock({
      type: BlockType.SECTION,
      ...block
    });
    return this;
  }
  addImageBlock(block) {
    this.addBlock({
      type: BlockType.IMAGE,
      ...block
    });
    return this;
  }
  addDividerBlock() {
    this.addBlock({
      type: BlockType.DIVIDER
    });
    return this;
  }
  addActionsBlock(block) {
    this.addBlock({
      type: BlockType.ACTIONS,
      ...block
    });
    return this;
  }
  addContextBlock(block) {
    this.addBlock({
      type: BlockType.CONTEXT,
      ...block
    });
    return this;
  }
  addInputBlock(block) {
    this.addBlock({
      type: BlockType.INPUT,
      ...block
    });
    return this;
  }
  addConditionalBlock(innerBlocks, condition) {
    const render = innerBlocks instanceof BlockBuilder ? innerBlocks.getBlocks() : innerBlocks;
    this.addBlock({
      type: BlockType.CONDITIONAL,
      render,
      when: condition
    });
    return this;
  }
  getBlocks() {
    return this.blocks;
  }
  newPlainTextObject(text, emoji = false) {
    return {
      type: TextObjectType.PLAINTEXT,
      text,
      emoji
    };
  }
  newMarkdownTextObject(text) {
    return {
      type: TextObjectType.MARKDOWN,
      text
    };
  }
  newButtonElement(info) {
    return this.newInteractiveElement({
      type: BlockElementType.BUTTON,
      ...info
    });
  }
  newImageElement(info) {
    return {
      type: BlockElementType.IMAGE,
      ...info
    };
  }
  newOverflowMenuElement(info) {
    return this.newInteractiveElement({
      type: BlockElementType.OVERFLOW_MENU,
      ...info
    });
  }
  newPlainTextInputElement(info) {
    return this.newInputElement({
      type: BlockElementType.PLAIN_TEXT_INPUT,
      ...info
    });
  }
  newStaticSelectElement(info) {
    return this.newSelectElement({
      type: BlockElementType.STATIC_SELECT,
      ...info
    });
  }
  newMultiStaticElement(info) {
    return this.newSelectElement({
      type: BlockElementType.MULTI_STATIC_SELECT,
      ...info
    });
  }
  newInteractiveElement(element) {
    if (!element.actionId) {
      element.actionId = this.generateActionId();
    }
    return element;
  }
  newInputElement(element) {
    if (!element.actionId) {
      element.actionId = this.generateActionId();
    }
    return element;
  }
  newSelectElement(element) {
    if (!element.actionId) {
      element.actionId = this.generateActionId();
    }
    return element;
  }
  addBlock(block) {
    if (!block.blockId) {
      block.blockId = this.generateBlockId();
    }
    block.appId = this.appId;
    this.blocks.push(block);
  }
  generateBlockId() {
    return uuid();
  }
  generateActionId() {
    return uuid();
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vVXNlcnMvZ3VpbGhlcm1lZ2F6em8vZGV2L1JvY2tldC5DaGF0L3BhY2thZ2VzL2FwcHMtZW5naW5lL2Rlbm8tcnVudGltZS9saWIvYWNjZXNzb3JzL2J1aWxkZXJzL0Jsb2NrQnVpbGRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2MSBhcyB1dWlkIH0gZnJvbSAndXVpZCc7XG5cbmltcG9ydCB0eXBlIHtcbiAgICBCbG9ja1R5cGUgYXMgX0Jsb2NrVHlwZSxcbiAgICBJQWN0aW9uc0Jsb2NrLFxuICAgIElCbG9jayxcbiAgICBJQ29uZGl0aW9uYWxCbG9jayxcbiAgICBJQ29uZGl0aW9uYWxCbG9ja0ZpbHRlcnMsXG4gICAgSUNvbnRleHRCbG9jayxcbiAgICBJSW1hZ2VCbG9jayxcbiAgICBJSW5wdXRCbG9jayxcbiAgICBJU2VjdGlvbkJsb2NrLFxufSBmcm9tICdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi91aWtpdC9ibG9ja3MvQmxvY2tzLnRzJztcbmltcG9ydCB0eXBlIHtcbiAgICBCbG9ja0VsZW1lbnRUeXBlIGFzIF9CbG9ja0VsZW1lbnRUeXBlLFxuICAgIElCbG9ja0VsZW1lbnQsXG4gICAgSUJ1dHRvbkVsZW1lbnQsXG4gICAgSUltYWdlRWxlbWVudCxcbiAgICBJSW5wdXRFbGVtZW50LFxuICAgIElJbnRlcmFjdGl2ZUVsZW1lbnQsXG4gICAgSU11bHRpU3RhdGljU2VsZWN0RWxlbWVudCxcbiAgICBJT3ZlcmZsb3dNZW51RWxlbWVudCxcbiAgICBJUGxhaW5UZXh0SW5wdXRFbGVtZW50LFxuICAgIElTZWxlY3RFbGVtZW50LFxuICAgIElTdGF0aWNTZWxlY3RFbGVtZW50LFxufSBmcm9tICdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi91aWtpdC9ibG9ja3MvRWxlbWVudHMudHMnO1xuaW1wb3J0IHR5cGUgeyBJVGV4dE9iamVjdCwgVGV4dE9iamVjdFR5cGUgYXMgX1RleHRPYmplY3RUeXBlIH0gZnJvbSAnQHJvY2tldC5jaGF0L2FwcHMtZW5naW5lL2RlZmluaXRpb24vdWlraXQvYmxvY2tzL09iamVjdHMudHMnO1xuXG5pbXBvcnQgeyBBcHBPYmplY3RSZWdpc3RyeSB9IGZyb20gJy4uLy4uLy4uL0FwcE9iamVjdFJlZ2lzdHJ5LnRzJztcbmltcG9ydCB7IHJlcXVpcmUgfSBmcm9tICcuLi8uLi8uLi9saWIvcmVxdWlyZS50cyc7XG5cbmNvbnN0IHsgQmxvY2tUeXBlIH0gPSByZXF1aXJlKCdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi91aWtpdC9ibG9ja3MvQmxvY2tzLmpzJykgYXMgeyBCbG9ja1R5cGU6IHR5cGVvZiBfQmxvY2tUeXBlIH07XG5jb25zdCB7IEJsb2NrRWxlbWVudFR5cGUgfSA9IHJlcXVpcmUoJ0Byb2NrZXQuY2hhdC9hcHBzLWVuZ2luZS9kZWZpbml0aW9uL3Vpa2l0L2Jsb2Nrcy9FbGVtZW50cy5qcycpIGFzIHsgQmxvY2tFbGVtZW50VHlwZTogdHlwZW9mIF9CbG9ja0VsZW1lbnRUeXBlIH07XG5jb25zdCB7IFRleHRPYmplY3RUeXBlIH0gPSByZXF1aXJlKCdAcm9ja2V0LmNoYXQvYXBwcy1lbmdpbmUvZGVmaW5pdGlvbi91aWtpdC9ibG9ja3MvT2JqZWN0cy5qcycpIGFzIHsgVGV4dE9iamVjdFR5cGU6IHR5cGVvZiBfVGV4dE9iamVjdFR5cGUgfTtcblxudHlwZSBCbG9ja0Z1bmN0aW9uUGFyYW1ldGVyPFQgZXh0ZW5kcyBJQmxvY2s+ID0gT21pdDxULCAndHlwZSc+O1xudHlwZSBFbGVtZW50RnVuY3Rpb25QYXJhbWV0ZXI8VCBleHRlbmRzIElCbG9ja0VsZW1lbnQ+ID0gVCBleHRlbmRzIElJbnRlcmFjdGl2ZUVsZW1lbnRcbiAgICA/IE9taXQ8VCwgJ3R5cGUnIHwgJ2FjdGlvbklkJz4gfCBQYXJ0aWFsPFBpY2s8VCwgJ2FjdGlvbklkJz4+XG4gICAgOiBPbWl0PFQsICd0eXBlJz47XG5cbnR5cGUgU2VjdGlvbkJsb2NrUGFyYW0gPSBCbG9ja0Z1bmN0aW9uUGFyYW1ldGVyPElTZWN0aW9uQmxvY2s+O1xudHlwZSBJbWFnZUJsb2NrUGFyYW0gPSBCbG9ja0Z1bmN0aW9uUGFyYW1ldGVyPElJbWFnZUJsb2NrPjtcbnR5cGUgQWN0aW9uc0Jsb2NrUGFyYW0gPSBCbG9ja0Z1bmN0aW9uUGFyYW1ldGVyPElBY3Rpb25zQmxvY2s+O1xudHlwZSBDb250ZXh0QmxvY2tQYXJhbSA9IEJsb2NrRnVuY3Rpb25QYXJhbWV0ZXI8SUNvbnRleHRCbG9jaz47XG50eXBlIElucHV0QmxvY2tQYXJhbSA9IEJsb2NrRnVuY3Rpb25QYXJhbWV0ZXI8SUlucHV0QmxvY2s+O1xuXG50eXBlIEJ1dHRvbkVsZW1lbnRQYXJhbSA9IEVsZW1lbnRGdW5jdGlvblBhcmFtZXRlcjxJQnV0dG9uRWxlbWVudD47XG50eXBlIEltYWdlRWxlbWVudFBhcmFtID0gRWxlbWVudEZ1bmN0aW9uUGFyYW1ldGVyPElJbWFnZUVsZW1lbnQ+O1xudHlwZSBPdmVyZmxvd01lbnVFbGVtZW50UGFyYW0gPSBFbGVtZW50RnVuY3Rpb25QYXJhbWV0ZXI8SU92ZXJmbG93TWVudUVsZW1lbnQ+O1xudHlwZSBQbGFpblRleHRJbnB1dEVsZW1lbnRQYXJhbSA9IEVsZW1lbnRGdW5jdGlvblBhcmFtZXRlcjxJUGxhaW5UZXh0SW5wdXRFbGVtZW50PjtcbnR5cGUgU3RhdGljU2VsZWN0RWxlbWVudFBhcmFtID0gRWxlbWVudEZ1bmN0aW9uUGFyYW1ldGVyPElTdGF0aWNTZWxlY3RFbGVtZW50PjtcbnR5cGUgTXVsdGlTdGF0aWNTZWxlY3RFbGVtZW50UGFyYW0gPSBFbGVtZW50RnVuY3Rpb25QYXJhbWV0ZXI8SU11bHRpU3RhdGljU2VsZWN0RWxlbWVudD47XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgcGxlYXNlIHByZWZlciB0aGUgcm9ja2V0LmNoYXQvdWkta2l0IGNvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIEJsb2NrQnVpbGRlciB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBibG9ja3M6IEFycmF5PElCbG9jaz47XG4gICAgcHJpdmF0ZSByZWFkb25seSBhcHBJZDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYmxvY2tzID0gW107XG4gICAgICAgIHRoaXMuYXBwSWQgPSBTdHJpbmcoQXBwT2JqZWN0UmVnaXN0cnkuZ2V0KCdpZCcpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkU2VjdGlvbkJsb2NrKGJsb2NrOiBTZWN0aW9uQmxvY2tQYXJhbSk6IEJsb2NrQnVpbGRlciB7XG4gICAgICAgIHRoaXMuYWRkQmxvY2soeyB0eXBlOiBCbG9ja1R5cGUuU0VDVElPTiwgLi4uYmxvY2sgfSBhcyBJU2VjdGlvbkJsb2NrKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkSW1hZ2VCbG9jayhibG9jazogSW1hZ2VCbG9ja1BhcmFtKTogQmxvY2tCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5hZGRCbG9jayh7IHR5cGU6IEJsb2NrVHlwZS5JTUFHRSwgLi4uYmxvY2sgfSBhcyBJSW1hZ2VCbG9jayk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZERpdmlkZXJCbG9jaygpOiBCbG9ja0J1aWxkZXIge1xuICAgICAgICB0aGlzLmFkZEJsb2NrKHsgdHlwZTogQmxvY2tUeXBlLkRJVklERVIgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZEFjdGlvbnNCbG9jayhibG9jazogQWN0aW9uc0Jsb2NrUGFyYW0pOiBCbG9ja0J1aWxkZXIge1xuICAgICAgICB0aGlzLmFkZEJsb2NrKHsgdHlwZTogQmxvY2tUeXBlLkFDVElPTlMsIC4uLmJsb2NrIH0gYXMgSUFjdGlvbnNCbG9jayk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZENvbnRleHRCbG9jayhibG9jazogQ29udGV4dEJsb2NrUGFyYW0pOiBCbG9ja0J1aWxkZXIge1xuICAgICAgICB0aGlzLmFkZEJsb2NrKHsgdHlwZTogQmxvY2tUeXBlLkNPTlRFWFQsIC4uLmJsb2NrIH0gYXMgSUNvbnRleHRCbG9jayk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZElucHV0QmxvY2soYmxvY2s6IElucHV0QmxvY2tQYXJhbSk6IEJsb2NrQnVpbGRlciB7XG4gICAgICAgIHRoaXMuYWRkQmxvY2soeyB0eXBlOiBCbG9ja1R5cGUuSU5QVVQsIC4uLmJsb2NrIH0gYXMgSUlucHV0QmxvY2spO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRDb25kaXRpb25hbEJsb2NrKGlubmVyQmxvY2tzOiBCbG9ja0J1aWxkZXIgfCBBcnJheTxJQmxvY2s+LCBjb25kaXRpb24/OiBJQ29uZGl0aW9uYWxCbG9ja0ZpbHRlcnMpOiBCbG9ja0J1aWxkZXIge1xuICAgICAgICBjb25zdCByZW5kZXIgPSBpbm5lckJsb2NrcyBpbnN0YW5jZW9mIEJsb2NrQnVpbGRlciA/IGlubmVyQmxvY2tzLmdldEJsb2NrcygpIDogaW5uZXJCbG9ja3M7XG5cbiAgICAgICAgdGhpcy5hZGRCbG9jayh7XG4gICAgICAgICAgICB0eXBlOiBCbG9ja1R5cGUuQ09ORElUSU9OQUwsXG4gICAgICAgICAgICByZW5kZXIsXG4gICAgICAgICAgICB3aGVuOiBjb25kaXRpb24sXG4gICAgICAgIH0gYXMgSUNvbmRpdGlvbmFsQmxvY2spO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRCbG9ja3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJsb2NrcztcbiAgICB9XG5cbiAgICBwdWJsaWMgbmV3UGxhaW5UZXh0T2JqZWN0KHRleHQ6IHN0cmluZywgZW1vamkgPSBmYWxzZSk6IElUZXh0T2JqZWN0IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFRleHRPYmplY3RUeXBlLlBMQUlOVEVYVCxcbiAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICBlbW9qaSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbmV3TWFya2Rvd25UZXh0T2JqZWN0KHRleHQ6IHN0cmluZyk6IElUZXh0T2JqZWN0IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFRleHRPYmplY3RUeXBlLk1BUktET1dOLFxuICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbmV3QnV0dG9uRWxlbWVudChpbmZvOiBCdXR0b25FbGVtZW50UGFyYW0pOiBJQnV0dG9uRWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLm5ld0ludGVyYWN0aXZlRWxlbWVudCh7XG4gICAgICAgICAgICB0eXBlOiBCbG9ja0VsZW1lbnRUeXBlLkJVVFRPTixcbiAgICAgICAgICAgIC4uLmluZm8sXG4gICAgICAgIH0gYXMgSUJ1dHRvbkVsZW1lbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBuZXdJbWFnZUVsZW1lbnQoaW5mbzogSW1hZ2VFbGVtZW50UGFyYW0pOiBJSW1hZ2VFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IEJsb2NrRWxlbWVudFR5cGUuSU1BR0UsXG4gICAgICAgICAgICAuLi5pbmZvLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBuZXdPdmVyZmxvd01lbnVFbGVtZW50KGluZm86IE92ZXJmbG93TWVudUVsZW1lbnRQYXJhbSk6IElPdmVyZmxvd01lbnVFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV3SW50ZXJhY3RpdmVFbGVtZW50KHtcbiAgICAgICAgICAgIHR5cGU6IEJsb2NrRWxlbWVudFR5cGUuT1ZFUkZMT1dfTUVOVSxcbiAgICAgICAgICAgIC4uLmluZm8sXG4gICAgICAgIH0gYXMgSU92ZXJmbG93TWVudUVsZW1lbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBuZXdQbGFpblRleHRJbnB1dEVsZW1lbnQoaW5mbzogUGxhaW5UZXh0SW5wdXRFbGVtZW50UGFyYW0pOiBJUGxhaW5UZXh0SW5wdXRFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV3SW5wdXRFbGVtZW50KHtcbiAgICAgICAgICAgIHR5cGU6IEJsb2NrRWxlbWVudFR5cGUuUExBSU5fVEVYVF9JTlBVVCxcbiAgICAgICAgICAgIC4uLmluZm8sXG4gICAgICAgIH0gYXMgSVBsYWluVGV4dElucHV0RWxlbWVudCk7XG4gICAgfVxuXG4gICAgcHVibGljIG5ld1N0YXRpY1NlbGVjdEVsZW1lbnQoaW5mbzogU3RhdGljU2VsZWN0RWxlbWVudFBhcmFtKTogSVN0YXRpY1NlbGVjdEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXdTZWxlY3RFbGVtZW50KHtcbiAgICAgICAgICAgIHR5cGU6IEJsb2NrRWxlbWVudFR5cGUuU1RBVElDX1NFTEVDVCxcbiAgICAgICAgICAgIC4uLmluZm8sXG4gICAgICAgIH0gYXMgSVN0YXRpY1NlbGVjdEVsZW1lbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBuZXdNdWx0aVN0YXRpY0VsZW1lbnQoaW5mbzogTXVsdGlTdGF0aWNTZWxlY3RFbGVtZW50UGFyYW0pOiBJTXVsdGlTdGF0aWNTZWxlY3RFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV3U2VsZWN0RWxlbWVudCh7XG4gICAgICAgICAgICB0eXBlOiBCbG9ja0VsZW1lbnRUeXBlLk1VTFRJX1NUQVRJQ19TRUxFQ1QsXG4gICAgICAgICAgICAuLi5pbmZvLFxuICAgICAgICB9IGFzIElNdWx0aVN0YXRpY1NlbGVjdEVsZW1lbnQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbmV3SW50ZXJhY3RpdmVFbGVtZW50PFQgZXh0ZW5kcyBJSW50ZXJhY3RpdmVFbGVtZW50PihlbGVtZW50OiBUKTogVCB7XG4gICAgICAgIGlmICghZWxlbWVudC5hY3Rpb25JZCkge1xuICAgICAgICAgICAgZWxlbWVudC5hY3Rpb25JZCA9IHRoaXMuZ2VuZXJhdGVBY3Rpb25JZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBuZXdJbnB1dEVsZW1lbnQ8VCBleHRlbmRzIElJbnB1dEVsZW1lbnQ+KGVsZW1lbnQ6IFQpOiBUIHtcbiAgICAgICAgaWYgKCFlbGVtZW50LmFjdGlvbklkKSB7XG4gICAgICAgICAgICBlbGVtZW50LmFjdGlvbklkID0gdGhpcy5nZW5lcmF0ZUFjdGlvbklkKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBwcml2YXRlIG5ld1NlbGVjdEVsZW1lbnQ8VCBleHRlbmRzIElTZWxlY3RFbGVtZW50PihlbGVtZW50OiBUKTogVCB7XG4gICAgICAgIGlmICghZWxlbWVudC5hY3Rpb25JZCkge1xuICAgICAgICAgICAgZWxlbWVudC5hY3Rpb25JZCA9IHRoaXMuZ2VuZXJhdGVBY3Rpb25JZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRCbG9jayhibG9jazogSUJsb2NrKTogdm9pZCB7XG4gICAgICAgIGlmICghYmxvY2suYmxvY2tJZCkge1xuICAgICAgICAgICAgYmxvY2suYmxvY2tJZCA9IHRoaXMuZ2VuZXJhdGVCbG9ja0lkKCk7XG4gICAgICAgIH1cblxuICAgICAgICBibG9jay5hcHBJZCA9IHRoaXMuYXBwSWQ7XG5cbiAgICAgICAgdGhpcy5ibG9ja3MucHVzaChibG9jayk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUJsb2NrSWQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHV1aWQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdlbmVyYXRlQWN0aW9uSWQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHV1aWQoKTtcbiAg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