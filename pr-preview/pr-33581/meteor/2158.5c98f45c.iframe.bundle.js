/*! For license information please see 2158.5c98f45c.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_rocket_chat_meteor=self.webpackChunk_rocket_chat_meteor||[]).push([[2158],{"./client/components/RawText.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),RawText=function RawText(_ref){var children=_ref.children;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{dangerouslySetInnerHTML:{__html:children}})};__webpack_exports__.A=RawText,RawText.__docgenInfo={description:"@deprecated",methods:[],displayName:"RawText",props:{children:{required:!0,tsType:{name:"string"},description:""}}}},"./client/views/room/contextualBar/Info/EditRoomInfo/index.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:function(){return EditRoomInfo_EditRoomInfoWithData}});var react=__webpack_require__("./node_modules/react/index.js"),RoomContext=__webpack_require__("./client/views/room/contexts/RoomContext.ts"),RoomToolboxContext=__webpack_require__("./client/views/room/contexts/RoomToolboxContext.ts"),dist=__webpack_require__("../../packages/core-typings/dist/index.js"),fuselage=__webpack_require__("./node_modules/@rocket.chat/fuselage/index.js"),index_module=__webpack_require__("./node_modules/@rocket.chat/fuselage-hooks/dist/index.module.js"),ui_client_dist=__webpack_require__("../../packages/ui-client/dist/index.js"),ui_contexts_dist=__webpack_require__("../../packages/ui-contexts/dist/index.js"),lib=__webpack_require__("../../node_modules/@tanstack/react-query/build/lib/index.js"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),meteor=__webpack_require__("./.storybook/mocks/meteor.js"),MessageTypes=__webpack_require__("./app/ui-utils/lib/MessageTypes.ts");meteor.fj.startup((function(){MessageTypes.l.registerType({id:"r",system:!0,message:"Room_name_changed_to",data:function data(message){return{room_name:message.msg}}}),MessageTypes.l.registerType({id:"au",system:!0,message:"User_added_to",data:function data(message){return{user_added:message.msg}}}),MessageTypes.l.registerType({id:"added-user-to-team",system:!0,message:"Added__username__to_this_team",data:function data(message){return{user_added:message.msg}}}),MessageTypes.l.registerType({id:"ru",system:!0,message:"User_has_been_removed",data:function data(message){return{user_removed:message.msg}}}),MessageTypes.l.registerType({id:"removed-user-from-team",system:!0,message:"Removed__username__from_the_team",data:function data(message){return{user_removed:message.msg}}}),MessageTypes.l.registerType({id:"ul",system:!0,message:"User_left_this_channel"}),MessageTypes.l.registerType({id:"ult",system:!0,message:"User_left_this_team"}),MessageTypes.l.registerType({id:"user-converted-to-team",system:!0,message:"Converted__roomName__to_a_team",data:function data(message){return{roomName:message.msg}}}),MessageTypes.l.registerType({id:"user-converted-to-channel",system:!0,message:"Converted__roomName__to_a_channel",data:function data(message){return{roomName:message.msg}}}),MessageTypes.l.registerType({id:"user-removed-room-from-team",system:!0,message:"Removed__roomName__from_the_team",data:function data(message){return{roomName:message.msg}}}),MessageTypes.l.registerType({id:"user-deleted-room-from-team",system:!0,message:"Deleted__roomName__room",data:function data(message){return{roomName:message.msg}}}),MessageTypes.l.registerType({id:"user-added-room-to-team",system:!0,message:"added__roomName__to_this_team",data:function data(message){return{roomName:message.msg}}}),MessageTypes.l.registerType({id:"uj",system:!0,message:"User_joined_the_channel",data:function data(message){return{user:message.u.username}}}),MessageTypes.l.registerType({id:"ujt",system:!0,message:"User_joined_the_team",data:function data(message){return{user:message.u.username}}}),MessageTypes.l.registerType({id:"ut",system:!0,message:"User_joined_the_conversation",data:function data(message){return{user:message.u.username}}}),MessageTypes.l.registerType({id:"wm",system:!0,message:"Welcome",data:function data(message){return{user:message.u.username}}}),MessageTypes.l.registerType({id:"rm",system:!0,message:"Message_is_removed"}),MessageTypes.l.registerType({id:"user-muted",system:!0,message:"User_has_been_muted",data:function data(message){return{user_muted:message.msg}}}),MessageTypes.l.registerType({id:"user-unmuted",system:!0,message:"User_has_been_unmuted",data:function data(message){return{user_unmuted:message.msg}}}),MessageTypes.l.registerType({id:"subscription-role-added",system:!0,message:"set__username__as__role_",data:function data(message){return{username:message.msg,role:message.role||""}}}),MessageTypes.l.registerType({id:"subscription-role-removed",system:!0,message:"removed__username__as__role_",data:function data(message){return{username:message.msg,role:message.role||""}}}),MessageTypes.l.registerType({id:"room-archived",system:!0,message:"This_room_has_been_archived"}),MessageTypes.l.registerType({id:"room-unarchived",system:!0,message:"This_room_has_been_unarchived"}),MessageTypes.l.registerType({id:"room-removed-read-only",system:!0,message:"room_removed_read_only_permission"}),MessageTypes.l.registerType({id:"room-set-read-only",system:!0,message:"room_set_read_only_permission"}),MessageTypes.l.registerType({id:"room-allowed-reacting",system:!0,message:"room_allowed_reactions"}),MessageTypes.l.registerType({id:"room-disallowed-reacting",system:!0,message:"room_disallowed_reactions"}),MessageTypes.l.registerType({id:"room_e2e_enabled",system:!0,message:"Enabled_E2E_Encryption_for_this_room",data:function data(message){return{username:message.u.username}}}),MessageTypes.l.registerType({id:"room_e2e_disabled",system:!0,message:"Disabled_E2E_Encryption_for_this_room",data:function data(message){return{username:message.u.username}}}),MessageTypes.l.registerType({id:"videoconf",system:!1,message:"Video_Conference"})}));var _templateObject,MessageTypesValues=[{key:"uj",i18nLabel:"Message_HideType_uj"},{key:"ujt",i18nLabel:"Message_HideType_ujt"},{key:"ul",i18nLabel:"Message_HideType_ul"},{key:"ult",i18nLabel:"Message_HideType_ult"},{key:"ru",i18nLabel:"Message_HideType_ru"},{key:"removed-user-from-team",i18nLabel:"Message_HideType_removed_user_from_team"},{key:"au",i18nLabel:"Message_HideType_au"},{key:"added-user-to-team",i18nLabel:"Message_HideType_added_user_to_team"},{key:"mute_unmute",i18nLabel:"Message_HideType_mute_unmute"},{key:"r",i18nLabel:"Message_HideType_r"},{key:"ut",i18nLabel:"Message_HideType_ut"},{key:"wm",i18nLabel:"Message_HideType_wm"},{key:"rm",i18nLabel:"Message_HideType_rm"},{key:"subscription-role-added",i18nLabel:"Message_HideType_subscription_role_added"},{key:"subscription-role-removed",i18nLabel:"Message_HideType_subscription_role_removed"},{key:"room-archived",i18nLabel:"Message_HideType_room_archived"},{key:"room-unarchived",i18nLabel:"Message_HideType_room_unarchived"},{key:"room_changed_privacy",i18nLabel:"Message_HideType_room_changed_privacy"},{key:"room_changed_avatar",i18nLabel:"Message_HideType_room_changed_avatar"},{key:"room_changed_topic",i18nLabel:"Message_HideType_room_changed_topic"},{key:"room_e2e_enabled",i18nLabel:"Message_HideType_room_enabled_encryption"},{key:"room_e2e_disabled",i18nLabel:"Message_HideType_room_disabled_encryption"},{key:"room-removed-read-only",i18nLabel:"Message_HideType_room_removed_read_only"},{key:"room-set-read-only",i18nLabel:"Message_HideType_room_set_read_only"},{key:"room-disallowed-reacting",i18nLabel:"Message_HideType_room_disallowed_reacting"},{key:"room-allowed-reacting",i18nLabel:"Message_HideType_room_allowed_reacting"},{key:"user-added-room-to-team",i18nLabel:"Message_HideType_user_added_room_to_team"},{key:"user-converted-to-channel",i18nLabel:"Message_HideType_user_converted_to_channel"},{key:"user-converted-to-team",i18nLabel:"Message_HideType_user_converted_to_team"},{key:"user-deleted-room-from-team",i18nLabel:"Message_HideType_user_deleted_room_from_team"},{key:"user-removed-room-from-team",i18nLabel:"Message_HideType_user_removed_room_from_team"},{key:"room_changed_announcement",i18nLabel:"Message_HideType_changed_announcement"},{key:"room_changed_description",i18nLabel:"Message_HideType_changed_description"}],Contextualbar=__webpack_require__("./client/components/Contextualbar/index.ts"),RawText=__webpack_require__("./client/components/RawText.tsx"),dist_index_module=__webpack_require__("./node_modules/@rocket.chat/css-in-js/dist/index.module.js"),ui_avatar_dist=__webpack_require__("../../packages/ui-avatar/dist/index.js"),getAvatarURL=__webpack_require__("./app/utils/client/getAvatarURL.ts"),isValidImageFormat=function isValidImageFormat(dataURL){var img=new Image;return new Promise((function(resolve){img.onload=function(){return resolve(!0)},img.onerror=function(){return resolve(!1)},img.src=dataURL}))};function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}var RoomAvatarEditor=function RoomAvatarEditor(_ref){var _ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,room=_ref.room,roomAvatar=_ref.roomAvatar,onChangeAvatar=_ref.onChangeAvatar,t=(0,ui_contexts_dist.useTranslation)(),dispatchToastMessage=(0,ui_contexts_dist.useToastMessageDispatch)(),handleChangeAvatar=(0,index_module.useMutableCallback)(function(){var _ref2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(file){var reader;return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:(reader=new FileReader).readAsDataURL(file),reader.onloadend=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var result;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(result=reader.result,_context.t0="string"==typeof result,!_context.t0){_context.next=6;break}return _context.next=5,isValidImageFormat(result);case 5:_context.t0=_context.sent;case 6:if(!_context.t0){_context.next=9;break}return onChangeAvatar(result),_context.abrupt("return");case 9:dispatchToastMessage({type:"error",message:t("Avatar_format_invalid")});case 10:case"end":return _context.stop()}}),_callee)})));case 3:case"end":return _context2.stop()}}),_callee2)})));return function(_x){return _ref2.apply(this,arguments)}}()),_useSingleFileInput=function useSingleFileInput(onSetFile){var fileType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/*",fileField=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image",ref=(0,react.useRef)();return(0,react.useEffect)((function(){var fileInput=document.createElement("input");return fileInput.setAttribute("type","file"),fileInput.setAttribute("style","display: none"),document.body.appendChild(fileInput),ref.current=fileInput,function(){ref.current=void 0,fileInput.remove()}}),[]),(0,react.useEffect)((function(){var fileInput=ref.current;fileInput&&fileInput.setAttribute("accept",fileType)}),[fileType]),(0,react.useEffect)((function(){var fileInput=ref.current;if(fileInput){var handleFiles=function handleFiles(){var _fileInput$files;if(null!=fileInput&&null!==(_fileInput$files=fileInput.files)&&void 0!==_fileInput$files&&_fileInput$files.length){var formData=new FormData;formData.append(fileField,fileInput.files[0]),onSetFile(fileInput.files[0],formData)}};return fileInput.addEventListener("change",handleFiles,!1),function(){fileInput.removeEventListener("change",handleFiles,!1)}}}),[fileField,fileType,onSetFile]),[(0,index_module.useMutableCallback)((function(){var _ref$current;return null==ref||null===(_ref$current=ref.current)||void 0===_ref$current?void 0:_ref$current.click()})),(0,index_module.useMutableCallback)((function(){ref.current&&(ref.current.value="")}))]}(handleChangeAvatar),_useSingleFileInput2=_slicedToArray(_useSingleFileInput,2),clickUpload=_useSingleFileInput2[0],reset=_useSingleFileInput2[1],clickReset=(0,index_module.useMutableCallback)((function(){reset(),onChangeAvatar(null)}));(0,react.useEffect)((function(){!roomAvatar&&reset()}),[roomAvatar,reset]);var defaultUrl=room.prid?(0,getAvatarURL.$)({roomId:room.prid}):(0,getAvatarURL.$)({username:"@".concat(room.name)});return react.createElement(fuselage.Box,{borderRadius:"x2",maxWidth:"x332",w:"full",position:"relative"},react.createElement(ui_avatar_dist.dD,_extends({},void 0!==roomAvatar&&{url:null===roomAvatar?defaultUrl:roomAvatar},{room:room,size:"x332"})),react.createElement(fuselage.Box,{className:[(0,dist_index_module.css)(_templateObject||(_templateObject=_taggedTemplateLiteral(["\n\t\t\t\t\t\tbottom: 0;\n\t\t\t\t\t\tright: 0;\n\t\t\t\t\t"])))],position:"absolute",m:12},react.createElement(fuselage.ButtonGroup,null,react.createElement(fuselage.Button,{icon:"upload",disabled:(0,dist.isRoomFederated)(room)||disabled,small:!0,title:t("Upload_user_avatar"),onClick:clickUpload},t("Upload")),react.createElement(fuselage.Button,{small:!0,danger:!0,icon:"trash",title:t("Accounts_SetDefaultAvatar"),disabled:!roomAvatar||(0,dist.isRoomFederated)(room)||disabled,onClick:clickReset}))))},avatar_RoomAvatarEditor=RoomAvatarEditor;RoomAvatarEditor.__docgenInfo={description:"",methods:[],displayName:"RoomAvatarEditor",props:{room:{required:!0,tsType:{name:"Pick",elements:[{name:"IRoom"},{name:"RoomAdminFieldsType"}],raw:"Pick<IRoom, RoomAdminFieldsType>"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},roomAvatar:{required:!1,tsType:{name:"string"},description:""},onChangeAvatar:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string | null) => void",signature:{arguments:[{type:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},name:"url"}],return:{name:"void"}}},description:""}}};var convertTimeUnit=__webpack_require__("./client/lib/convertTimeUnit.ts");function getDirtyFields_typeof(o){return getDirtyFields_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},getDirtyFields_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=getDirtyFields_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=getDirtyFields_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==getDirtyFields_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var getDirtyFields=function getDirtyFields(allFields,dirtyFields){return Object.keys(dirtyFields).reduce((function(acc,currentField){return(Array.isArray(dirtyFields[currentField])?dirtyFields[currentField].some((function(value){return!0===value})):!0===dirtyFields[currentField])?_objectSpread(_objectSpread({},acc),{},_defineProperty({},currentField,allFields[currentField])):acc}),{})};function useArchiveRoom_typeof(o){return useArchiveRoom_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},useArchiveRoom_typeof(o)}function useArchiveRoom_regeneratorRuntime(){useArchiveRoom_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==useArchiveRoom_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(useArchiveRoom_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function useArchiveRoom_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function useArchiveRoom_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){useArchiveRoom_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){useArchiveRoom_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}var useRetentionPolicy=__webpack_require__("./client/views/room/hooks/useRetentionPolicy.ts"),roomCoordinator=__webpack_require__("./client/lib/rooms/roomCoordinator.tsx");function useEditRoomInitialValues_typeof(o){return useEditRoomInitialValues_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},useEditRoomInitialValues_typeof(o)}function useEditRoomInitialValues_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function useEditRoomInitialValues_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?useEditRoomInitialValues_ownKeys(Object(t),!0).forEach((function(r){useEditRoomInitialValues_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):useEditRoomInitialValues_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function useEditRoomInitialValues_defineProperty(e,r,t){return(r=function useEditRoomInitialValues_toPropertyKey(t){var i=function useEditRoomInitialValues_toPrimitive(t,r){if("object"!=useEditRoomInitialValues_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=useEditRoomInitialValues_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==useEditRoomInitialValues_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var E2EEState=__webpack_require__("./app/e2e/client/E2EEState.ts"),IRoomTypeConfig=__webpack_require__("./definition/IRoomTypeConfig.ts"),useE2EEState=__webpack_require__("./client/views/room/hooks/useE2EEState.ts");function useEditRoomPermissions_slicedToArray(r,e){return function useEditRoomPermissions_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function useEditRoomPermissions_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function useEditRoomPermissions_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return useEditRoomPermissions_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?useEditRoomPermissions_arrayLikeToArray(r,a):void 0}}(r,e)||function useEditRoomPermissions_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useEditRoomPermissions_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function EditRoomInfo_typeof(o){return EditRoomInfo_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},EditRoomInfo_typeof(o)}var _excluded=["hideSysMes","joinCodeRequired","retentionEnabled","retentionOverrideGlobal","retentionMaxAge","retentionExcludePinned","retentionFilesOnly","retentionIgnoreThreads"],_excluded2=["value"],_excluded3=["value"],_excluded4=["value"],_excluded5=["value"],_excluded6=["value"],_excluded7=["value"],_excluded8=["value"],_excluded9=["value"],_excluded10=["value"],_excluded11=["value"],_excluded12=["onChange"],_excluded13=["value"],_excluded14=["value"],_excluded15=["value"];function EditRoomInfo_extends(){return EditRoomInfo_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},EditRoomInfo_extends.apply(null,arguments)}function EditRoomInfo_regeneratorRuntime(){EditRoomInfo_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==EditRoomInfo_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(EditRoomInfo_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function EditRoomInfo_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function EditRoomInfo_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?EditRoomInfo_ownKeys(Object(t),!0).forEach((function(r){EditRoomInfo_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):EditRoomInfo_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function EditRoomInfo_defineProperty(e,r,t){return(r=function EditRoomInfo_toPropertyKey(t){var i=function EditRoomInfo_toPrimitive(t,r){if("object"!=EditRoomInfo_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=EditRoomInfo_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==EditRoomInfo_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],t.includes(o)||{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function EditRoomInfo_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function EditRoomInfo_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){EditRoomInfo_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){EditRoomInfo_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}var title={team:"Edit_team",channel:"Edit_channel",discussion:"Edit_discussion"},EditRoomInfo=function EditRoomInfo(_ref){var _msToTimeUnit,room=_ref.room,onClickClose=_ref.onClickClose,onClickBack=_ref.onClickBack,query=(0,lib.useQueryClient)(),t=(0,ui_contexts_dist.useTranslation)(),dispatchToastMessage=(0,ui_contexts_dist.useToastMessageDispatch)(),isFederated=(0,react.useMemo)((function(){return(0,dist.isRoomFederated)(room)}),[room]),roomType="prid"in room?"discussion":room.teamMain?"team":"channel",retentionPolicy=(0,useRetentionPolicy._)(room),retentionMaxAgeDefault=null!==(_msToTimeUnit=(0,convertTimeUnit.ru)(convertTimeUnit.k2.days,Number((0,ui_contexts_dist.useSetting)(function getRetentionSetting(roomType){switch(roomType){case"d":return"RetentionPolicy_TTL_DMs";case"p":return"RetentionPolicy_TTL_Groups";default:return"RetentionPolicy_TTL_Channels"}}(room.t)))))&&void 0!==_msToTimeUnit?_msToTimeUnit:30,defaultValues=function useEditRoomInitialValues(room){var retentionPolicy=(0,useRetentionPolicy._)(room),canEditRoomRetentionPolicy=(0,ui_contexts_dist.usePermission)("edit-room-retention-policy",room._id),t=room.t,ro=room.ro,archived=room.archived,topic=room.topic,description=room.description,announcement=room.announcement,joinCodeRequired=room.joinCodeRequired,sysMes=room.sysMes,encrypted=room.encrypted,retention=room.retention,reactWhenReadOnly=room.reactWhenReadOnly,sidepanel=room.sidepanel;return(0,react.useMemo)((function(){var _retention$enabled,_retention$maxAge,_retention$excludePin,_retention$filesOnly,_retention$ignoreThre;return useEditRoomInitialValues_objectSpread(useEditRoomInitialValues_objectSpread({roomName:"d"===t&&room.usernames?room.usernames.join(" x "):roomCoordinator.roomCoordinator.getRoomName(t,room),roomType:t,readOnly:!!ro,reactWhenReadOnly:reactWhenReadOnly,archived:!!archived,roomTopic:null!=topic?topic:"",roomDescription:null!=description?description:"",roomAnnouncement:null!=announcement?announcement:"",roomAvatar:void 0,joinCode:"",joinCodeRequired:!!joinCodeRequired,systemMessages:Array.isArray(sysMes)?sysMes:[],hideSysMes:Array.isArray(sysMes)?!(null==sysMes||!sysMes.length):!!sysMes,encrypted:encrypted},canEditRoomRetentionPolicy&&(null==retentionPolicy?void 0:retentionPolicy.enabled)&&{retentionEnabled:null!==(_retention$enabled=null==retention?void 0:retention.enabled)&&void 0!==_retention$enabled?_retention$enabled:retentionPolicy.isActive,retentionOverrideGlobal:!(null==retention||!retention.overrideGlobal),retentionMaxAge:null!==(_retention$maxAge=null==retention?void 0:retention.maxAge)&&void 0!==_retention$maxAge?_retention$maxAge:(0,convertTimeUnit.ru)(convertTimeUnit.k2.days,retentionPolicy.maxAge),retentionExcludePinned:null!==(_retention$excludePin=null==retention?void 0:retention.excludePinned)&&void 0!==_retention$excludePin?_retention$excludePin:retentionPolicy.excludePinned,retentionFilesOnly:null!==(_retention$filesOnly=null==retention?void 0:retention.filesOnly)&&void 0!==_retention$filesOnly?_retention$filesOnly:retentionPolicy.filesOnly,retentionIgnoreThreads:null!==(_retention$ignoreThre=null==retention?void 0:retention.ignoreThreads)&&void 0!==_retention$ignoreThre?_retention$ignoreThre:retentionPolicy.ignoreThreads}),{},{showDiscussions:null==sidepanel?void 0:sidepanel.items.includes("discussions"),showChannels:null==sidepanel?void 0:sidepanel.items.includes("channels")})}),[announcement,archived,description,joinCodeRequired,retention,retentionPolicy,ro,room,sysMes,t,topic,encrypted,reactWhenReadOnly,canEditRoomRetentionPolicy,sidepanel])}(room),namesValidation=(0,ui_contexts_dist.useSetting)("UTF8_Channel_Names_Validation"),allowSpecialNames=(0,ui_contexts_dist.useSetting)("UI_Allow_room_names_with_special_chars"),checkTeamNameExists=(0,ui_contexts_dist.useEndpoint)("GET","/v1/rooms.nameExists"),teamNameRegex=(0,react.useMemo)((function(){return allowSpecialNames?null:new RegExp("^".concat(namesValidation,"$"))}),[allowSpecialNames,namesValidation]),_useForm=(0,index_esm.mN)({mode:"onBlur",defaultValues:defaultValues}),watch=_useForm.watch,reset=_useForm.reset,control=_useForm.control,handleSubmit=_useForm.handleSubmit,getFieldState=_useForm.getFieldState,_useForm$formState=_useForm.formState,isDirty=_useForm$formState.isDirty,dirtyFields=_useForm$formState.dirtyFields,errors=_useForm$formState.errors,isSubmitting=_useForm$formState.isSubmitting,sysMesOptions=(0,react.useMemo)((function(){return MessageTypesValues.map((function(_ref2){var key=_ref2.key,i18nLabel=_ref2.i18nLabel;return[key,t(i18nLabel)]}))}),[t]),isRoomNameDirty=getFieldState("roomName").isDirty,_watch=watch(),readOnly=_watch.readOnly,archived=_watch.archived,joinCodeRequired=_watch.joinCodeRequired,hideSysMes=_watch.hideSysMes,retentionEnabled=_watch.retentionEnabled,retentionOverrideGlobal=_watch.retentionOverrideGlobal,roomTypeP=_watch.roomType,reactWhenReadOnly=_watch.reactWhenReadOnly,showChannels=_watch.showChannels,showDiscussions=_watch.showDiscussions,_useEditRoomPermissio=function useEditRoomPermissions(room){var isAdmin=(0,ui_contexts_dist.useRole)("admin"),canCreateChannel=(0,ui_contexts_dist.usePermission)("create-c"),canCreateGroup=(0,ui_contexts_dist.usePermission)("create-p"),e2eeState=(0,useE2EEState.W)(),isE2EEReady=e2eeState===E2EEState.l.READY||e2eeState===E2EEState.l.SAVE_PASSWORD,canChangeType=function getCanChangeType(room,canCreateChannel,canCreateGroup,isAdmin){return(!room.default||isAdmin)&&("p"===room.t&&canCreateChannel||"c"===room.t&&canCreateGroup)}(room,canCreateChannel,canCreateGroup,isAdmin),canSetReadOnly=(0,ui_contexts_dist.usePermission)("set-readonly",room._id),canSetReactWhenReadOnly=(0,ui_contexts_dist.usePermission)("set-react-when-readonly",room._id),canEditRoomRetentionPolicy=(0,ui_contexts_dist.usePermission)("edit-room-retention-policy",room._id),canArchiveOrUnarchive=(0,ui_contexts_dist.useAtLeastOnePermission)((0,react.useMemo)((function(){return["archive-room","unarchive-room"]}),[]),room._id),canToggleEncryption=(0,ui_contexts_dist.usePermission)("toggle-room-e2e-encryption",room._id)&&(room.encrypted||isE2EEReady),_useMemo2=useEditRoomPermissions_slicedToArray((0,react.useMemo)((function(){var _roomCoordinator$getR,isAllowed=(null===(_roomCoordinator$getR=roomCoordinator.roomCoordinator.getRoomDirectives(room.t))||void 0===_roomCoordinator$getR?void 0:_roomCoordinator$getR.allowRoomSettingChange)||function(){};return[isAllowed(room,IRoomTypeConfig.Iq.NAME),isAllowed(room,IRoomTypeConfig.Iq.TOPIC),isAllowed(room,IRoomTypeConfig.Iq.ANNOUNCEMENT),isAllowed(room,IRoomTypeConfig.Iq.ARCHIVE_OR_UNARCHIVE),isAllowed(room,IRoomTypeConfig.Iq.DESCRIPTION),isAllowed(room,IRoomTypeConfig.Iq.TYPE),isAllowed(room,IRoomTypeConfig.Iq.READ_ONLY),isAllowed(room,IRoomTypeConfig.Iq.SYSTEM_MESSAGES),isAllowed(room,IRoomTypeConfig.Iq.JOIN_CODE),isAllowed(room,IRoomTypeConfig.Iq.REACT_WHEN_READ_ONLY),isAllowed(room,IRoomTypeConfig.Iq.E2E)]}),[room]),11);return{canChangeType:canChangeType,canSetReadOnly:canSetReadOnly,canSetReactWhenReadOnly:canSetReactWhenReadOnly,canEditRoomRetentionPolicy:canEditRoomRetentionPolicy,canArchiveOrUnarchive:canArchiveOrUnarchive,canToggleEncryption:canToggleEncryption,canViewName:_useMemo2[0],canViewTopic:_useMemo2[1],canViewAnnouncement:_useMemo2[2],canViewArchived:_useMemo2[3],canViewDescription:_useMemo2[4],canViewType:_useMemo2[5],canViewReadOnly:_useMemo2[6],canViewHideSysMes:_useMemo2[7],canViewJoinCode:_useMemo2[8],canViewReactWhenReadOnly:_useMemo2[9],canViewEncrypted:_useMemo2[10]}}(room),canChangeType=_useEditRoomPermissio.canChangeType,canSetReadOnly=_useEditRoomPermissio.canSetReadOnly,canSetReactWhenReadOnly=_useEditRoomPermissio.canSetReactWhenReadOnly,canEditRoomRetentionPolicy=_useEditRoomPermissio.canEditRoomRetentionPolicy,canArchiveOrUnarchive=_useEditRoomPermissio.canArchiveOrUnarchive,canToggleEncryption=_useEditRoomPermissio.canToggleEncryption,canViewName=_useEditRoomPermissio.canViewName,canViewTopic=_useEditRoomPermissio.canViewTopic,canViewAnnouncement=_useEditRoomPermissio.canViewAnnouncement,canViewArchived=_useEditRoomPermissio.canViewArchived,canViewDescription=_useEditRoomPermissio.canViewDescription,canViewType=_useEditRoomPermissio.canViewType,canViewReadOnly=_useEditRoomPermissio.canViewReadOnly,canViewHideSysMes=_useEditRoomPermissio.canViewHideSysMes,canViewJoinCode=_useEditRoomPermissio.canViewJoinCode,canViewEncrypted=_useEditRoomPermissio.canViewEncrypted,changeArchiving=archived!==!!room.archived,saveAction=(0,ui_contexts_dist.useEndpoint)("POST","/v1/rooms.saveRoomSettings"),handleArchive=function useArchiveRoom(room){var t=(0,ui_contexts_dist.useTranslation)(),dispatchToastMessage=(0,ui_contexts_dist.useToastMessageDispatch)(),archiveAction=(0,ui_contexts_dist.useEndpoint)("POST","/v1/rooms.changeArchivationState");return(0,index_module.useMutableCallback)(useArchiveRoom_asyncToGenerator(useArchiveRoom_regeneratorRuntime().mark((function _callee(){return useArchiveRoom_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,archiveAction({rid:room._id,action:room.archived?"unarchive":"archive"});case 3:dispatchToastMessage({type:"success",message:room.archived?t("Room_has_been_unarchived"):t("Room_has_been_archived")}),_context.next=9;break;case 6:_context.prev=6,_context.t0=_context.catch(0),dispatchToastMessage({type:"error",message:_context.t0});case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])}))))}(room),handleUpdateRoomData=(0,index_module.useEffectEvent)(function(){var _ref4=EditRoomInfo_asyncToGenerator(EditRoomInfo_regeneratorRuntime().mark((function _callee(_ref3){var hideSysMes,joinCodeRequired,retentionEnabled,retentionOverrideGlobal,retentionMaxAge,retentionExcludePinned,retentionFilesOnly,retentionIgnoreThreads,formData,data,sidepanelItems,sidepanel;return EditRoomInfo_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return hideSysMes=_ref3.hideSysMes,joinCodeRequired=_ref3.joinCodeRequired,retentionEnabled=_ref3.retentionEnabled,retentionOverrideGlobal=_ref3.retentionOverrideGlobal,retentionMaxAge=_ref3.retentionMaxAge,retentionExcludePinned=_ref3.retentionExcludePinned,retentionFilesOnly=_ref3.retentionFilesOnly,retentionIgnoreThreads=_ref3.retentionIgnoreThreads,formData=_objectWithoutProperties(_ref3,_excluded),delete(data=getDirtyFields(formData,dirtyFields)).archived,delete data.showChannels,delete data.showDiscussions,sidepanelItems=[showChannels&&"channels",showDiscussions&&"discussions"].filter(Boolean),sidepanel=sidepanelItems.length>0?{items:sidepanelItems}:null,_context.prev=7,_context.next=10,saveAction(EditRoomInfo_objectSpread(EditRoomInfo_objectSpread(EditRoomInfo_objectSpread(EditRoomInfo_objectSpread(EditRoomInfo_objectSpread({rid:room._id},data),"team"===roomType?{sidepanel:sidepanel}:null),(data.joinCode||"joinCodeRequired"in data)&&{joinCode:joinCodeRequired?data.joinCode:""}),(data.systemMessages||!hideSysMes)&&{systemMessages:hideSysMes&&data.systemMessages}),{},{retentionEnabled:retentionEnabled,retentionOverrideGlobal:retentionOverrideGlobal},retentionEnabled&&retentionOverrideGlobal&&{retentionMaxAge:retentionMaxAge,retentionExcludePinned:retentionExcludePinned,retentionFilesOnly:retentionFilesOnly,retentionIgnoreThreads:retentionIgnoreThreads}));case 10:return _context.next=12,query.invalidateQueries(["/v1/rooms.info",room._id]);case 12:dispatchToastMessage({type:"success",message:t("Room_updated_successfully")}),onClickClose(),_context.next=19;break;case 16:_context.prev=16,_context.t0=_context.catch(7),dispatchToastMessage({type:"error",message:_context.t0});case 19:case"end":return _context.stop()}}),_callee,null,[[7,16]])})));return function(_x){return _ref4.apply(this,arguments)}}()),handleSave=(0,index_module.useEffectEvent)((function(data){return Promise.all([isDirty&&handleUpdateRoomData(data),changeArchiving&&handleArchive()].filter(Boolean))})),validateName=function(){var _ref5=EditRoomInfo_asyncToGenerator(EditRoomInfo_regeneratorRuntime().mark((function _callee2(name){var _yield$checkTeamNameE;return EditRoomInfo_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(name&&isRoomNameDirty){_context2.next=2;break}return _context2.abrupt("return");case 2:if("discussion"!==roomType){_context2.next=4;break}return _context2.abrupt("return");case 4:if(!teamNameRegex||null!=teamNameRegex&&teamNameRegex.test(name)){_context2.next=6;break}return _context2.abrupt("return",t("Name_cannot_have_special_characters"));case 6:return _context2.next=8,checkTeamNameExists({roomName:name});case 8:if(_yield$checkTeamNameE=_context2.sent,!_yield$checkTeamNameE.exists){_context2.next=12;break}return _context2.abrupt("return",t("Teams_Errors_Already_exists",{name:name}));case 12:case"end":return _context2.stop()}}),_callee2)})));return function validateName(_x2){return _ref5.apply(this,arguments)}}(),formId=(0,index_module.useUniqueId)(),roomNameField=(0,index_module.useUniqueId)(),roomDescriptionField=(0,index_module.useUniqueId)(),roomAnnouncementField=(0,index_module.useUniqueId)(),roomTopicField=(0,index_module.useUniqueId)(),roomTypeField=(0,index_module.useUniqueId)(),readOnlyField=(0,index_module.useUniqueId)(),reactWhenReadOnlyField=(0,index_module.useUniqueId)(),archivedField=(0,index_module.useUniqueId)(),joinCodeRequiredField=(0,index_module.useUniqueId)(),hideSysMesField=(0,index_module.useUniqueId)(),encryptedField=(0,index_module.useUniqueId)(),retentionEnabledField=(0,index_module.useUniqueId)(),retentionOverrideGlobalField=(0,index_module.useUniqueId)(),retentionMaxAgeField=(0,index_module.useUniqueId)(),retentionExcludePinnedField=(0,index_module.useUniqueId)(),retentionFilesOnlyField=(0,index_module.useUniqueId)(),retentionIgnoreThreads=(0,index_module.useUniqueId)(),showDiscussionsField=(0,index_module.useUniqueId)(),showChannelsField=(0,index_module.useUniqueId)(),showAdvancedSettings=canViewEncrypted||canViewReadOnly||readOnly||canViewArchived||canViewJoinCode||canViewHideSysMes,showRetentionPolicy=canEditRoomRetentionPolicy&&(null==retentionPolicy?void 0:retentionPolicy.enabled),showAccordion=showAdvancedSettings||showRetentionPolicy;return react.createElement(react.Fragment,null,react.createElement(Contextualbar.mH,null,onClickBack&&react.createElement(Contextualbar.m6,{onClick:onClickBack}),react.createElement(Contextualbar.jY,null,t("".concat(title[roomType]))),onClickClose&&react.createElement(Contextualbar.pi,{onClick:onClickClose})),react.createElement(Contextualbar.xN,{p:24},react.createElement("form",{id:formId,onSubmit:handleSubmit(handleSave)},react.createElement(fuselage.Box,{display:"flex",justifyContent:"center"},react.createElement(index_esm.xI,{control:control,name:"roomAvatar",render:function render(_ref6){var _ref6$field=_ref6.field,onChange=_ref6$field.onChange,value=_ref6$field.value;return react.createElement(avatar_RoomAvatarEditor,{room:room,roomAvatar:value,onChangeAvatar:onChange})}})),react.createElement(fuselage.FieldGroup,null,react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldLabel,{htmlFor:roomNameField,required:!0},t("Name")),react.createElement(fuselage.FieldRow,null,react.createElement(index_esm.xI,{name:"roomName",control:control,rules:{required:t("Required_field",{field:t("Name")}),validate:function validate(value){return validateName(value)}},render:function render(_ref7){var field=_ref7.field;return react.createElement(fuselage.TextInput,EditRoomInfo_extends({id:roomNameField},field,{disabled:!canViewName,"aria-invalid":errors.roomName?"true":"false","aria-describedby":"".concat(roomNameField,"-error"),"aria-required":"true"}))}})),errors.roomName&&react.createElement(fuselage.FieldError,{id:"".concat(roomNameField,"-error")},errors.roomName.message)),canViewTopic&&react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldLabel,{htmlFor:roomTopicField},t("Topic")),react.createElement(fuselage.FieldRow,null,react.createElement(index_esm.xI,{name:"roomTopic",control:control,render:function render(_ref8){var field=_ref8.field;return react.createElement(fuselage.TextInput,EditRoomInfo_extends({id:roomTopicField,"aria-describedby":"".concat(roomTopicField,"-hint")},field))}})),react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldHint,{id:"".concat(roomTopicField,"-hint")},t("Displayed_next_to_name")))),canViewAnnouncement&&react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldLabel,{htmlFor:roomAnnouncementField},t("Announcement")),react.createElement(fuselage.FieldRow,null,react.createElement(index_esm.xI,{name:"roomAnnouncement",control:control,render:function render(_ref9){var field=_ref9.field;return react.createElement(fuselage.TextInput,EditRoomInfo_extends({id:roomAnnouncementField,"aria-describedby":"".concat(roomAnnouncementField,"-hint")},field,{disabled:isFederated}))}})),react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldHint,{id:"".concat(roomAnnouncementField,"-hint")},t("Information_to_keep_top_of_mind")))),canViewDescription&&react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldLabel,{htmlFor:roomDescriptionField},t("Description")),react.createElement(fuselage.FieldRow,null,react.createElement(index_esm.xI,{name:"roomDescription",control:control,render:function render(_ref10){var field=_ref10.field;return react.createElement(fuselage.TextAreaInput,EditRoomInfo_extends({id:roomDescriptionField},field,{disabled:isFederated,rows:4}))}}))),canViewType&&react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:roomTypeField},t("Private")),react.createElement(index_esm.xI,{control:control,name:"roomType",render:function render(_ref11){var _ref11$field=_ref11.field,name=_ref11$field.name,onBlur=_ref11$field.onBlur,_onChange=_ref11$field.onChange,value=_ref11$field.value,ref=_ref11$field.ref;return react.createElement(fuselage.ToggleSwitch,{id:roomTypeField,ref:ref,name:name,onBlur:onBlur,disabled:!canChangeType||isFederated,checked:"p"===value,onChange:function onChange(){return _onChange("p"===value?"c":"p")},"aria-describedby":"".concat(roomTypeField,"-hint")})}})),react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldHint,{id:"".concat(roomTypeField,"-hint")},t("p"===roomTypeP?"Only_invited_people":"Anyone_can_access"))))),showAccordion&&react.createElement(fuselage.Accordion,null,showAdvancedSettings&&react.createElement(fuselage.AccordionItem,{title:t("Advanced_settings")},"team"===roomType&&react.createElement(ui_client_dist.TW,{feature:"sidepanelNavigation"},react.createElement(ui_client_dist.sl,null,null),react.createElement(ui_client_dist.Uq,null,react.createElement(fuselage.FieldGroup,null,react.createElement(fuselage.Box,{is:"h5",fontScale:"h5",color:"titles-labels"},t("Navigation")),react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:showChannelsField},t("Channels")),react.createElement(index_esm.xI,{control:control,name:"showChannels",render:function render(_ref12){var _ref12$field=_ref12.field,value=_ref12$field.value,field=_objectWithoutProperties(_ref12$field,_excluded2);return react.createElement(fuselage.ToggleSwitch,EditRoomInfo_extends({id:showChannelsField,checked:value},field))}})),react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldHint,{id:"".concat(showChannelsField,"-hint")},t("Show_channels_description")))),react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:showDiscussionsField},t("Discussions")),react.createElement(index_esm.xI,{control:control,name:"showDiscussions",render:function render(_ref13){var _ref13$field=_ref13.field,value=_ref13$field.value,field=_objectWithoutProperties(_ref13$field,_excluded3);return react.createElement(fuselage.ToggleSwitch,EditRoomInfo_extends({id:showDiscussionsField,checked:value},field))}})),react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldHint,{id:"".concat(showDiscussionsField,"-hint")},t("Show_discussions_description"))))),react.createElement(fuselage.Divider,{mb:24}))),react.createElement(fuselage.FieldGroup,null,react.createElement(fuselage.Box,{is:"h5",fontScale:"h5",color:"titles-labels"},t("Security_and_permissions")),canViewEncrypted&&react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:encryptedField},t("Encrypted")),react.createElement(index_esm.xI,{control:control,name:"encrypted",render:function render(_ref14){var _ref14$field=_ref14.field,value=_ref14$field.value,field=_objectWithoutProperties(_ref14$field,_excluded4);return react.createElement(fuselage.ToggleSwitch,EditRoomInfo_extends({id:encryptedField,"aria-describedby":"".concat(encryptedField,"-hint")},field,{disabled:!canToggleEncryption||isFederated,checked:value}))}})),react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldHint,{id:"".concat(encryptedField,"-hint")},t("Encrypted_field_hint")))),canViewReadOnly&&react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:readOnlyField},t("Read_only")),react.createElement(index_esm.xI,{control:control,name:"readOnly",render:function render(_ref15){var _ref15$field=_ref15.field,value=_ref15$field.value,field=_objectWithoutProperties(_ref15$field,_excluded5);return react.createElement(fuselage.ToggleSwitch,EditRoomInfo_extends({id:readOnlyField},field,{checked:value,disabled:!canSetReadOnly||isFederated,"aria-describedby":"".concat(readOnlyField,"-hint")}))}})),react.createElement(fuselage.FieldHint,{id:"".concat(readOnlyField,"-hint")},readOnly?t("Read_only_field_hint_enabled",{roomType:roomType}):t("Read_only_field_hint_disabled"))),readOnly&&react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:reactWhenReadOnlyField},t("React_when_read_only")),react.createElement(index_esm.xI,{control:control,name:"reactWhenReadOnly",render:function render(_ref16){var _ref16$field=_ref16.field,value=_ref16$field.value,field=_objectWithoutProperties(_ref16$field,_excluded6);return react.createElement(fuselage.ToggleSwitch,EditRoomInfo_extends({id:reactWhenReadOnlyField},field,{disabled:!canSetReactWhenReadOnly,checked:value,"aria-describedby":"".concat(reactWhenReadOnlyField,"-hint")}))}})),react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldHint,{id:"".concat(reactWhenReadOnlyField,"-hint")},t(reactWhenReadOnly?"Anyone_can_react_to_messages":"Only_authorized_users_can_react_to_messages")))),canViewArchived&&react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:archivedField},t("Room_archivation_state_true")),react.createElement(index_esm.xI,{control:control,name:"archived",render:function render(_ref17){var _ref17$field=_ref17.field,value=_ref17$field.value,field=_objectWithoutProperties(_ref17$field,_excluded7);return react.createElement(fuselage.ToggleSwitch,EditRoomInfo_extends({id:archivedField,"aria-describedby":"".concat(archivedField,"-hint")},field,{disabled:!canArchiveOrUnarchive,checked:value}))}})),archived&&react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldHint,{id:"".concat(archivedField,"-hint")},t("New_messages_cannot_be_sent")))),canViewJoinCode&&react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:joinCodeRequiredField},t("Password_to_access")),react.createElement(index_esm.xI,{control:control,name:"joinCodeRequired",render:function render(_ref18){var _ref18$field=_ref18.field,value=_ref18$field.value,field=_objectWithoutProperties(_ref18$field,_excluded8);return react.createElement(fuselage.ToggleSwitch,EditRoomInfo_extends({id:joinCodeRequiredField},field,{disabled:isFederated,checked:value}))}})),joinCodeRequired&&react.createElement(fuselage.FieldRow,null,react.createElement(index_esm.xI,{name:"joinCode",control:control,render:function render(_ref19){var field=_ref19.field;return react.createElement(fuselage.PasswordInput,EditRoomInfo_extends({},field,{placeholder:t("Reset_password"),disabled:!joinCodeRequired}))}}))),canViewHideSysMes&&react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:hideSysMesField},t("Hide_System_Messages")),react.createElement(index_esm.xI,{control:control,name:"hideSysMes",render:function render(_ref20){var _ref20$field=_ref20.field,value=_ref20$field.value,field=_objectWithoutProperties(_ref20$field,_excluded9);return react.createElement(fuselage.ToggleSwitch,EditRoomInfo_extends({id:hideSysMesField},field,{checked:value,disabled:isFederated}))}})),react.createElement(fuselage.FieldRow,null,react.createElement(index_esm.xI,{control:control,name:"systemMessages",render:function render(_ref21){var field=_ref21.field;return react.createElement(fuselage.MultiSelect,EditRoomInfo_extends({},field,{options:sysMesOptions,disabled:!hideSysMes||isFederated,placeholder:t("Select_messages_to_hide")}))}}))))),showRetentionPolicy&&react.createElement(fuselage.AccordionItem,{title:t("Prune")},react.createElement(fuselage.FieldGroup,null,react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:retentionEnabledField},t("RetentionPolicyRoom_Enabled")),react.createElement(index_esm.xI,{control:control,name:"retentionEnabled",render:function render(_ref22){var _ref22$field=_ref22.field,value=_ref22$field.value,field=_objectWithoutProperties(_ref22$field,_excluded10);return react.createElement(fuselage.ToggleSwitch,EditRoomInfo_extends({id:retentionEnabledField},field,{checked:value}))}}))),react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:retentionOverrideGlobalField},t("RetentionPolicyRoom_OverrideGlobal")),react.createElement(index_esm.xI,{control:control,name:"retentionOverrideGlobal",render:function render(_ref23){var _ref23$field=_ref23.field,value=_ref23$field.value,field=_objectWithoutProperties(_ref23$field,_excluded11);return react.createElement(fuselage.ToggleSwitch,EditRoomInfo_extends({id:retentionOverrideGlobalField},field,{disabled:!retentionEnabled,checked:value}))}}))),retentionOverrideGlobal&&react.createElement(react.Fragment,null,react.createElement(fuselage.Callout,{type:"danger"},react.createElement(RawText.A,null,t("RetentionPolicyRoom_ReadTheDocs"))),react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldLabel,{htmlFor:retentionMaxAgeField},t("RetentionPolicyRoom_MaxAge",{max:retentionMaxAgeDefault})),react.createElement(fuselage.FieldRow,null,react.createElement(index_esm.xI,{control:control,name:"retentionMaxAge",render:function render(_ref24){var _ref24$field=_ref24.field,_onChange2=_ref24$field.onChange,field=_objectWithoutProperties(_ref24$field,_excluded12);return react.createElement(fuselage.NumberInput,EditRoomInfo_extends({id:retentionMaxAgeField},field,{onChange:function onChange(e){return _onChange2(Number(e.currentTarget.value))}}))}}))),react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:retentionExcludePinnedField},t("RetentionPolicyRoom_ExcludePinned")),react.createElement(index_esm.xI,{control:control,name:"retentionExcludePinned",render:function render(_ref25){var _ref25$field=_ref25.field,value=_ref25$field.value,field=_objectWithoutProperties(_ref25$field,_excluded13);return react.createElement(fuselage.ToggleSwitch,EditRoomInfo_extends({id:retentionExcludePinnedField},field,{checked:value}))}}))),react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:retentionFilesOnlyField},t("RetentionPolicyRoom_FilesOnly")),react.createElement(index_esm.xI,{control:control,name:"retentionFilesOnly",render:function render(_ref26){var _ref26$field=_ref26.field,value=_ref26$field.value,field=_objectWithoutProperties(_ref26$field,_excluded14);return react.createElement(fuselage.ToggleSwitch,EditRoomInfo_extends({id:retentionFilesOnlyField},field,{checked:value}))}}))),react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.FieldLabel,{htmlFor:retentionIgnoreThreads},t("RetentionPolicy_DoNotPruneThreads")),react.createElement(index_esm.xI,{control:control,name:"retentionIgnoreThreads",render:function render(_ref27){var _ref27$field=_ref27.field,value=_ref27$field.value,field=_objectWithoutProperties(_ref27$field,_excluded15);return react.createElement(fuselage.ToggleSwitch,EditRoomInfo_extends({id:retentionIgnoreThreads},field,{checked:value}))}}))))))))),react.createElement(Contextualbar.kV,null,react.createElement(fuselage.ButtonGroup,{stretch:!0},react.createElement(fuselage.Button,{type:"reset",disabled:!isDirty||isSubmitting,onClick:function onClick(){return reset(defaultValues)}},t("Reset")),react.createElement(fuselage.Button,{form:formId,type:"submit",primary:!0,loading:isSubmitting,disabled:!isDirty},t("Save")))))},EditRoomInfo_EditRoomInfo=EditRoomInfo;EditRoomInfo.__docgenInfo={description:"",methods:[],displayName:"EditRoomInfo",props:{room:{required:!0,tsType:{name:"IRoomWithRetentionPolicy"},description:""},onClickClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onClickBack:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var EditRoomInfoWithData=function EditRoomInfoWithData(_ref){var onClickBack=_ref.onClickBack,room=(0,RoomContext.nq)(),closeTab=(0,RoomToolboxContext.W)().closeTab;return react.createElement(EditRoomInfo_EditRoomInfo,{onClickClose:closeTab,onClickBack:onClickBack,room:room})},EditRoomInfo_EditRoomInfoWithData=EditRoomInfoWithData;EditRoomInfoWithData.__docgenInfo={description:"",methods:[],displayName:"EditRoomInfoWithData",props:{onClickBack:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}}}}]);