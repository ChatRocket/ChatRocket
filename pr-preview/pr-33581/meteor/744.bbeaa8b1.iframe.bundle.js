/*! For license information please see 744.bbeaa8b1.iframe.bundle.js.LICENSE.txt */
(self.webpackChunk_rocket_chat_meteor=self.webpackChunk_rocket_chat_meteor||[]).push([[744],{"./client/components/LoadingIndicator.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),LoadingIndicator=function LoadingIndicator(_ref){var variation=_ref.variation;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"loading__animation"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:["loading__animation__bounce",variation&&"loading__animation__bounce--".concat(variation)].filter(Boolean).join(" ")}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:["loading__animation__bounce",variation&&"loading__animation__bounce--".concat(variation)].filter(Boolean).join(" ")}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:["loading__animation__bounce",variation&&"loading__animation__bounce--".concat(variation)].filter(Boolean).join(" ")}))};__webpack_exports__.A=LoadingIndicator,LoadingIndicator.__docgenInfo={description:"",methods:[],displayName:"LoadingIndicator",props:{variation:{required:!1,tsType:{name:"union",raw:"'medium' | 'large'",elements:[{name:"literal",value:"'medium'"},{name:"literal",value:"'large'"}]},description:""}}}},"./client/hooks/useReactiveValue.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{S:function(){return useReactiveValue}});var react=__webpack_require__("./node_modules/react/index.js"),shim=__webpack_require__("./node_modules/use-sync-external-store/shim/index.js"),meteor=__webpack_require__("./.storybook/mocks/meteor.js"),queueMicrotask=__webpack_require__("./client/lib/utils/queueMicrotask.ts");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var useReactiveValue=function useReactiveValue(computeCurrentValue){var _useMemo=(0,react.useMemo)((function(){return function createReactiveSubscriptionFactory(computeCurrentValueWith){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var computation,callbacks=new Set,currentValue=computeCurrentValueWith.apply(void 0,args),reactiveFn=function reactiveFn(){currentValue=computeCurrentValueWith.apply(void 0,args),(0,queueMicrotask.b)((function(){callbacks.forEach((function(callback){callback()}))}))};return(0,queueMicrotask.b)((function(){computation=meteor.JD.autorun(reactiveFn)})),[function(callback){return callbacks.add(callback),function(){callbacks.delete(callback),0===callbacks.size&&(0,queueMicrotask.b)((function(){var _computation;return null===(_computation=computation)||void 0===_computation?void 0:_computation.stop()}))}},function(){return currentValue}]}}(computeCurrentValue)()}),[computeCurrentValue]),_useMemo2=_slicedToArray(_useMemo,2),subscribe=_useMemo2[0],getSnapshot=_useMemo2[1];return(0,shim.useSyncExternalStore)(subscribe,getSnapshot)}},"./client/hooks/useUserInfoQuery.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{H:function(){return useUserInfoQuery}});var _rocket_chat_ui_contexts__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../packages/ui-contexts/dist/index.js"),_tanstack_react_query__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/@tanstack/react-query/build/lib/index.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var useUserInfoQuery=function useUserInfoQuery(params){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keepPreviousData:!0},getUserInfo=(0,_rocket_chat_ui_contexts__WEBPACK_IMPORTED_MODULE_0__.useEndpoint)("GET","/v1/users.info");return(0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_1__.useQuery)(["users.info",params],(function(){return getUserInfo(function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},params))}),options)}},"./client/views/root/MainLayout/MainLayout.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return MainLayout_MainLayout}});var react=__webpack_require__("./node_modules/react/index.js"),dist=__webpack_require__("../../packages/ui-contexts/dist/index.js"),web_ui_registration_dist=__webpack_require__("../../packages/web-ui-registration/dist/index.js"),fuselage=__webpack_require__("./node_modules/@rocket.chat/fuselage/index.js"),LoggedOutBanner=function LoggedOutBanner(){var t=(0,dist.useTranslation)();return react.createElement(fuselage.Banner,{variant:"warning",icon:react.createElement(fuselage.Icon,{name:"warning",size:"x24"})},react.createElement(fuselage.Box,{textAlign:"left"},t("Logged_Out_Banner_Text")))},deviceManagement_LoggedOutBanner=LoggedOutBanner;LoggedOutBanner.__docgenInfo={description:"",methods:[],displayName:"LoggedOutBanner"};var IframeLogin=__webpack_require__("./app/ui-utils/client/lib/IframeLogin.ts"),useReactiveValue=__webpack_require__("./client/hooks/useReactiveValue.ts"),pollIframeLoginUrl=function pollIframeLoginUrl(){if(IframeLogin.q.reactiveEnabled.get())return IframeLogin.q.reactiveIframeUrl.get()},LoginPage=function LoginPage(_ref){var defaultRoute=_ref.defaultRoute,children=_ref.children,t=(0,dist.useTranslation)(),showForcedLogoutBanner=(0,dist.useSession)("force_logout"),iframeLoginUrl=function useIframeLogin(){return(0,useReactiveValue.S)(pollIframeLoginUrl)}();return iframeLoginUrl?react.createElement("iframe",{title:t("Login"),src:iframeLoginUrl,style:{height:"100%",width:"100%"}}):react.createElement(react.Fragment,null,showForcedLogoutBanner&&react.createElement(deviceManagement_LoggedOutBanner,null),react.createElement(web_ui_registration_dist.default,{defaultRoute:defaultRoute,children:children}))},MainLayout_LoginPage=LoginPage;LoginPage.__docgenInfo={description:"",methods:[],displayName:"LoginPage",props:{defaultRoute:{required:!1,tsType:{name:"LoginRoutes"},description:""},children:{required:!1,tsType:{name:"ReactNode"},description:""}}};var _templateObject,useUserInfoQuery=__webpack_require__("./client/hooks/useUserInfoQuery.ts"),ui_client_dist=__webpack_require__("../../packages/ui-client/dist/index.js"),client=__webpack_require__("./app/models/client/index.ts"),SidebarRegion=__webpack_require__("./client/sidebar/SidebarRegion.tsx"),index_module=__webpack_require__("./node_modules/@rocket.chat/css-in-js/dist/index.module.js");var AccessibilityShortcut=function AccessibilityShortcut(){var t=(0,dist.useTranslation)(),currentRoutePath=(0,dist.useRouter)().getLocationPathname(),customButtonClass=(0,index_module.css)(_templateObject||(_templateObject=function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n\t\tposition: absolute;\n\t\ttop: 2px;\n\t\tleft: 2px;\n\t\tz-index: 99;\n\t\t&:not(:focus) {\n\t\t\twidth: 1px;\n\t\t\theight: 1px;\n\t\t\tpadding: 0;\n\t\t\toverflow: hidden;\n\t\t\tclip: rect(1px, 1px, 1px, 1px);\n\t\t\tborder: 0;\n\t\t}\n\t"])));return react.createElement(fuselage.Button,{className:customButtonClass,is:"a",href:"".concat(currentRoutePath,"#main-content"),primary:!0},t("Skip_to_main_content"))},MainLayout_AccessibilityShortcut=AccessibilityShortcut;AccessibilityShortcut.__docgenInfo={description:"",methods:[],displayName:"AccessibilityShortcut"};var ui_theming_dist=__webpack_require__("../../ee/packages/ui-theming/dist/index.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var MainLayoutStyleTags=function MainLayoutStyleTags(){var theme=_slicedToArray((0,ui_theming_dist.e)(),3)[2];return react.createElement(react.Fragment,null,react.createElement(fuselage.PaletteStyleTag,{theme:theme,selector:".rcx-content--main, .rcx-tile",tagId:"main-palette-".concat(theme)}),react.createElement(fuselage.PaletteStyleTag,{theme:"dark",selector:".rcx-sidebar--main, .rcx-navbar",tagId:"sidebar-palette"}),"dark"===theme&&react.createElement(fuselage.PaletteStyleTag,{selector:".rcx-content--main",palette:"pre code.hljs {\n\tdisplay: block;\n\toverflow-x: auto;\n\tpadding: 1em;\n}\ncode.hljs {\n\tpadding: 3px 5px;\n}\n.hljs {\n\tbackground: #1d1f21;\n\tcolor: #c5c8c6;\n}\n.hljs span::selection,\n.hljs::selection {\n\tbackground: #373b41;\n}\n.hljs span::-moz-selection,\n.hljs::-moz-selection {\n\tbackground: #373b41;\n}\n.hljs-name,\n.hljs-title {\n\tcolor: #f0c674;\n}\n.hljs-comment,\n.hljs-meta,\n.hljs-meta .hljs-keyword {\n\tcolor: #707880;\n}\n.hljs-deletion,\n.hljs-link,\n.hljs-literal,\n.hljs-number,\n.hljs-symbol {\n\tcolor: #c66;\n}\n.hljs-addition,\n.hljs-doctag,\n.hljs-regexp,\n.hljs-selector-attr,\n.hljs-selector-pseudo,\n.hljs-string {\n\tcolor: #b5bd68;\n}\n.hljs-attribute,\n.hljs-code,\n.hljs-selector-id {\n\tcolor: #b294bb;\n}\n.hljs-bullet,\n.hljs-keyword,\n.hljs-selector-tag,\n.hljs-tag {\n\tcolor: #81a2be;\n}\n.hljs-subst,\n.hljs-template-tag,\n.hljs-template-variable,\n.hljs-variable {\n\tcolor: #8abeb7;\n}\n.hljs-built_in,\n.hljs-quote,\n.hljs-section,\n.hljs-selector-class,\n.hljs-type {\n\tcolor: #de935f;\n}\n.hljs-emphasis {\n\tfont-style: italic;\n}\n.hljs-strong {\n\tfont-weight: 700;\n}",tagId:"codeBlock-palette"}))};MainLayoutStyleTags.__docgenInfo={description:"",methods:[],displayName:"MainLayoutStyleTags"};var LayoutWithSidebar=function LayoutWithSidebar(_ref){var children=_ref.children,embeddedLayout=(0,dist.useLayout)().isEmbedded,modal=(0,dist.useCurrentModal)(),currentRoutePath=(0,dist.useCurrentRoutePath)(),channelRoute=(0,dist.useRoute)("channel"),removeSidenav=embeddedLayout&&!(null!=currentRoutePath&&currentRoutePath.startsWith("/admin")),readReceiptsEnabled=(0,dist.useSetting)("Message_Read_Receipt_Store_Users"),firstChannelAfterLogin=(0,dist.useSetting)("First_Channel_After_Login"),redirected=(0,react.useRef)(!1);return(0,react.useEffect)((function(){currentRoutePath&&["/","/home"].includes(currentRoutePath)&&firstChannelAfterLogin&&"string"==typeof firstChannelAfterLogin&&(redirected.current||(redirected.current=!0,channelRoute.push({name:firstChannelAfterLogin})))}),[channelRoute,currentRoutePath,firstChannelAfterLogin]),react.createElement(fuselage.Box,{bg:"surface-light",id:"rocket-chat",className:[embeddedLayout?"embedded-view":void 0,"menu-nav"].filter(Boolean).join(" "),"aria-hidden":Boolean(modal)},react.createElement(MainLayout_AccessibilityShortcut,null),react.createElement(MainLayoutStyleTags,null),!removeSidenav&&react.createElement(SidebarRegion.A,null),react.createElement("main",{id:"main-content",className:["rc-old","main-content",readReceiptsEnabled?"read-receipts-enabled":void 0].filter(Boolean).join(" ")},children))},MainLayout_LayoutWithSidebar=LayoutWithSidebar;LayoutWithSidebar.__docgenInfo={description:"",methods:[],displayName:"LayoutWithSidebar",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};var dist_import=__webpack_require__("./node_modules/@react-aria/toolbar/dist/import.mjs"),ui_voip_dist=__webpack_require__("../../packages/ui-voip/dist/index.js"),CallContext=__webpack_require__("./client/contexts/CallContext.ts"),useOmnichannelEnabled=__webpack_require__("./client/hooks/omnichannel/useOmnichannelEnabled.ts"),useOmnichannelShowQueueLink=__webpack_require__("./client/hooks/omnichannel/useOmnichannelShowQueueLink.ts"),useHasLicenseModule=__webpack_require__("./client/hooks/useHasLicenseModule.ts"),useDialModal=__webpack_require__("./client/hooks/useDialModal.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var NavBarItemOmniChannelCallDialPad=function NavBarItemOmniChannelCallDialPad(props){var t=(0,dist.useTranslation)(),openDialModal=(0,useDialModal.F)().openDialModal,_useVoipOutboundState=(0,CallContext.cT)(),outBoundCallsAllowed=_useVoipOutboundState.outBoundCallsAllowed,outBoundCallsEnabledForUser=_useVoipOutboundState.outBoundCallsEnabledForUser;return react.createElement(fuselage.NavBarItem,_extends({icon:"dialpad",onClick:function onClick(){return openDialModal()},disabled:!outBoundCallsEnabledForUser,"aria-label":t("Open_Dialpad"),"data-tooltip":t(outBoundCallsAllowed?"New_Call":"New_Call_Premium_Only")},props))},NavBarOmnichannelToolbar_NavBarItemOmniChannelCallDialPad=NavBarItemOmniChannelCallDialPad;function NavBarItemOmnichannelCallToggleError_extends(){return NavBarItemOmnichannelCallToggleError_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NavBarItemOmnichannelCallToggleError_extends.apply(null,arguments)}NavBarItemOmniChannelCallDialPad.__docgenInfo={description:"",methods:[],displayName:"NavBarItemOmniChannelCallDialPad"};var NavBarItemOmnichannelCallToggleError=function NavBarItemOmnichannelCallToggleError(props){var t=(0,dist.useTranslation)();return react.createElement(fuselage.NavBarItem,NavBarItemOmnichannelCallToggleError_extends({icon:"phone",danger:!0,"data-tooltip":t("Error"),disabled:!0},props))},NavBarOmnichannelToolbar_NavBarItemOmnichannelCallToggleError=NavBarItemOmnichannelCallToggleError;function NavBarItemOmnichannelCallToggleLoading_extends(){return NavBarItemOmnichannelCallToggleLoading_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NavBarItemOmnichannelCallToggleLoading_extends.apply(null,arguments)}NavBarItemOmnichannelCallToggleError.__docgenInfo={description:"",methods:[],displayName:"NavBarItemOmnichannelCallToggleError"};var NavBarItemOmnichannelCallToggleLoading=function NavBarItemOmnichannelCallToggleLoading(props){var t=(0,dist.useTranslation)();return react.createElement(fuselage.NavBarItem,NavBarItemOmnichannelCallToggleLoading_extends({icon:"phone","data-tooltip":t("Loading"),"aria-label":t("VoIP_Toggle"),disabled:!0},props))},NavBarOmnichannelToolbar_NavBarItemOmnichannelCallToggleLoading=NavBarItemOmnichannelCallToggleLoading;function NavBarItemOmnichannelCallToggleReady_extends(){return NavBarItemOmnichannelCallToggleReady_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NavBarItemOmnichannelCallToggleReady_extends.apply(null,arguments)}NavBarItemOmnichannelCallToggleLoading.__docgenInfo={description:"",methods:[],displayName:"NavBarItemOmnichannelCallToggleLoading"};var NavBarItemOmnichannelCallToggleReady=function NavBarItemOmnichannelCallToggleReady(props){var t=(0,dist.useTranslation)(),caller=(0,CallContext.L)(),unregister=(0,CallContext.X$)(),register=(0,CallContext.ku)(),networkStatus=(0,CallContext.I_)(),registered=!["ERROR","INITIAL","UNREGISTERED"].includes(caller.state),inCall=["IN_CALL"].includes(caller.state),onClickVoipButton=(0,react.useCallback)((function(){registered?unregister():register()}),[registered,register,unregister]);return react.createElement(fuselage.NavBarItem,NavBarItemOmnichannelCallToggleReady_extends({icon:function getIcon(){return"offline"===networkStatus?"phone-issue":registered?"phone":"phone-disabled"}(),disabled:inCall,"aria-checked":registered,"aria-label":t("VoIP_Toggle"),"data-tooltip":function getTitle(){return t("offline"===networkStatus?"Waiting_for_server_connection":inCall?"Cannot_disable_while_on_call":registered?"Turn_off_answer_calls":"Turn_on_answer_calls")}()},props,{success:registered,warning:"offline"===networkStatus,onClick:onClickVoipButton}))},NavBarOmnichannelToolbar_NavBarItemOmnichannelCallToggleReady=NavBarItemOmnichannelCallToggleReady;NavBarItemOmnichannelCallToggleReady.__docgenInfo={description:"",methods:[],displayName:"NavBarItemOmnichannelCallToggleReady"};var NavBarItemOmnichannelCallToggle=function NavBarItemOmnichannelCallToggle(props){var isCallReady=(0,CallContext.JD)();return(0,CallContext.cc)()?react.createElement(NavBarOmnichannelToolbar_NavBarItemOmnichannelCallToggleError,props):isCallReady?react.createElement(NavBarOmnichannelToolbar_NavBarItemOmnichannelCallToggleReady,props):react.createElement(NavBarOmnichannelToolbar_NavBarItemOmnichannelCallToggleLoading,props)},NavBarOmnichannelToolbar_NavBarItemOmnichannelCallToggle=NavBarItemOmnichannelCallToggle;function NavBarItemOmnichannelContact_extends(){return NavBarItemOmnichannelContact_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NavBarItemOmnichannelContact_extends.apply(null,arguments)}NavBarItemOmnichannelCallToggle.__docgenInfo={description:"",methods:[],displayName:"NavBarItemOmnichannelCallToggle"};var NavBarItemOmnichannelContact=function NavBarItemOmnichannelContact(props){var router=(0,dist.useRouter)(),currentRoute=(0,dist.useCurrentRoutePath)();return react.createElement(fuselage.NavBarItem,NavBarItemOmnichannelContact_extends({},props,{icon:"address-book",onClick:function onClick(){return router.navigate("/omnichannel-directory")},pressed:null==currentRoute?void 0:currentRoute.includes("/omnichannel-directory")}))},NavBarOmnichannelToolbar_NavBarItemOmnichannelContact=NavBarItemOmnichannelContact;NavBarItemOmnichannelContact.__docgenInfo={description:"",methods:[],displayName:"NavBarItemOmnichannelContact"};var dist_index_module=__webpack_require__("./node_modules/@rocket.chat/fuselage-hooks/dist/index.module.js"),useOmnichannelAgentAvailable=__webpack_require__("./client/hooks/omnichannel/useOmnichannelAgentAvailable.ts");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function NavBarItemOmnichannelLivechatToggle_extends(){return NavBarItemOmnichannelLivechatToggle_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NavBarItemOmnichannelLivechatToggle_extends.apply(null,arguments)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}var NavBarItemOmnichannelLivechatToggle=function NavBarItemOmnichannelLivechatToggle(props){var t=(0,dist.useTranslation)(),agentAvailable=(0,useOmnichannelAgentAvailable.U)(),changeAgentStatus=(0,dist.useEndpoint)("POST","/v1/livechat/agent.status"),dispatchToastMessage=(0,dist.useToastMessageDispatch)(),handleAvailableStatusChange=(0,dist_index_module.useEffectEvent)(_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,changeAgentStatus({});case 3:_context.next=8;break;case 5:_context.prev=5,_context.t0=_context.catch(0),dispatchToastMessage({type:"error",message:_context.t0});case 8:case"end":return _context.stop()}}),_callee,null,[[0,5]])}))));return react.createElement(fuselage.Sidebar.TopBar.Action,NavBarItemOmnichannelLivechatToggle_extends({},props,{id:"omnichannel-status-toggle",title:t(agentAvailable?"Turn_off_answer_chats":"Turn_on_answer_chats"),success:agentAvailable,icon:agentAvailable?"message":"message-disabled",onClick:handleAvailableStatusChange}))},NavBarOmnichannelToolbar_NavBarItemOmnichannelLivechatToggle=NavBarItemOmnichannelLivechatToggle;function NavBarItemOmnichannelQueue_extends(){return NavBarItemOmnichannelQueue_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NavBarItemOmnichannelQueue_extends.apply(null,arguments)}NavBarItemOmnichannelLivechatToggle.__docgenInfo={description:"",methods:[],displayName:"NavBarItemOmnichannelLivechatToggle"};var NavBarItemOmnichannelQueue=function NavBarItemOmnichannelQueue(props){var router=(0,dist.useRouter)(),currentRoute=(0,dist.useCurrentRoutePath)();return react.createElement(fuselage.NavBarItem,NavBarItemOmnichannelQueue_extends({},props,{icon:"queue",onClick:function onClick(){return router.navigate("/livechat-queue")},pressed:null==currentRoute?void 0:currentRoute.includes("/livechat-queue")}))},NavBarOmnichannelToolbar_NavBarItemOmnichannelQueue=NavBarItemOmnichannelQueue;NavBarItemOmnichannelQueue.__docgenInfo={description:"",methods:[],displayName:"NavBarItemOmnichannelQueue"};function NavBarItemAuditMenu_extends(){return NavBarItemAuditMenu_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NavBarItemAuditMenu_extends.apply(null,arguments)}var NavBarItemAuditMenu=function NavBarItemAuditMenu(props){var t=(0,dist.useTranslation)(),sections=function useAuditMenu(){var router=(0,dist.useRouter)(),t=(0,dist.useTranslation)(),hasAuditLicense=!0===(0,useHasLicenseModule.b)("auditing"),hasAuditPermission=(0,dist.usePermission)("can-audit")&&hasAuditLicense,hasAuditLogPermission=(0,dist.usePermission)("can-audit-log")&&hasAuditLicense;if(!hasAuditPermission&&!hasAuditLogPermission)return[];var auditMessageItem={id:"messages",icon:"document-eye",content:t("Messages"),onClick:function onClick(){return router.navigate("/audit")}},auditLogItem={id:"auditLog",icon:"document-eye",content:t("Logs"),onClick:function onClick(){return router.navigate("/audit-log")}};return[{title:t("Audit"),items:[hasAuditPermission&&auditMessageItem,hasAuditLogPermission&&auditLogItem].filter(Boolean)}]}(),currentRoute=(0,dist.useCurrentRoutePath)();return react.createElement(ui_client_dist.h4,NavBarItemAuditMenu_extends({sections:sections,title:t("Audit"),is:fuselage.NavBarItem,placement:"bottom-start",icon:"document-eye",pressed:null==currentRoute?void 0:currentRoute.includes("/audit")},props))},NavBarPagesToolbar_NavBarItemAuditMenu=NavBarItemAuditMenu;function NavBarItemHomePage_extends(){return NavBarItemHomePage_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NavBarItemHomePage_extends.apply(null,arguments)}NavBarItemAuditMenu.__docgenInfo={description:"",methods:[],displayName:"NavBarItemAuditMenu"};var NavBarItemHomePage=function NavBarItemHomePage(props){var router=(0,dist.useRouter)(),sidebar=(0,dist.useLayout)().sidebar,showHome=(0,dist.useSetting)("Layout_Show_Home_Button"),handleHome=(0,dist_index_module.useEffectEvent)((function(){sidebar.toggle(),router.navigate("/home")})),currentRoute=(0,dist.useCurrentRoutePath)();return showHome?react.createElement(fuselage.NavBarItem,NavBarItemHomePage_extends({},props,{icon:"home",onClick:handleHome,pressed:null==currentRoute?void 0:currentRoute.includes("/home")})):null},NavBarPagesToolbar_NavBarItemHomePage=NavBarItemHomePage;NavBarItemHomePage.__docgenInfo={description:"",methods:[],displayName:"NavBarItemHomePage"};var useAppActionButtons=__webpack_require__("./client/hooks/useAppActionButtons.ts"),useAppRequestStats=__webpack_require__("./client/views/marketplace/hooks/useAppRequestStats.ts");function _toConsumableArray(r){return function _arrayWithoutHoles(r){if(Array.isArray(r))return useMarketPlaceMenu_arrayLikeToArray(r)}(r)||function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function useMarketPlaceMenu_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return useMarketPlaceMenu_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?useMarketPlaceMenu_arrayLikeToArray(r,a):void 0}}(r)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useMarketPlaceMenu_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function NavBarItemMarketPlaceMenu_extends(){return NavBarItemMarketPlaceMenu_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NavBarItemMarketPlaceMenu_extends.apply(null,arguments)}var NavBarItemMarketPlaceMenu=function NavBarItemMarketPlaceMenu(props){var t=(0,dist.useTranslation)(),sections=function useMarketPlaceMenu(){var t=(0,dist.useTranslation)(),appBoxItems=(0,useAppActionButtons.Ny)(),hasManageAppsPermission=(0,dist.usePermission)("manage-apps"),showMarketplace=(0,dist.usePermission)("access-marketplace")||hasManageAppsPermission,router=(0,dist.useRouter)(),appRequestStats=(0,useAppRequestStats.$)(),marketPlaceItems=[{id:"explore",icon:"compass",content:t("Explore"),onClick:function onClick(){return router.navigate("/marketplace/explore/list")}},{id:"installed",icon:"circle-arrow-down",content:t("Installed"),onClick:function onClick(){return router.navigate("/marketplace/installed/list")}}],appsManagementItem={id:"requested-apps",icon:"cube",content:t("Requested"),onClick:function onClick(){router.navigate("/marketplace/requested/list")},addon:react.createElement(react.Fragment,null,appRequestStats.isLoading&&react.createElement(fuselage.Skeleton,{variant:"circle",height:16,width:16}),appRequestStats.isSuccess&&appRequestStats.data.totalUnseen>0&&react.createElement(fuselage.Badge,{variant:"primary"},appRequestStats.data.totalUnseen))};return[{title:t("Marketplace"),items:[].concat(_toConsumableArray(showMarketplace?marketPlaceItems:[]),_toConsumableArray(hasManageAppsPermission?[appsManagementItem]:[]),_toConsumableArray(appBoxItems.isSuccess?appBoxItems.data:[]))}]}(),currentRoute=(0,dist.useCurrentRoutePath)();return react.createElement(ui_client_dist.h4,NavBarItemMarketPlaceMenu_extends({sections:sections,title:t("Marketplace"),is:fuselage.NavBarItem,placement:"bottom-start",icon:"store",pressed:null==currentRoute?void 0:currentRoute.includes("/marketplace")},props))},NavBarPagesToolbar_NavBarItemMarketPlaceMenu=NavBarItemMarketPlaceMenu;function NavBarItemDirectoryPage_extends(){return NavBarItemDirectoryPage_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NavBarItemDirectoryPage_extends.apply(null,arguments)}NavBarItemMarketPlaceMenu.__docgenInfo={description:"",methods:[],displayName:"NavBarItemMarketPlaceMenu"};var NavBarItemDirectoryPage=function NavBarItemDirectoryPage(props){var router=(0,dist.useRouter)(),handleDirectory=(0,dist_index_module.useEffectEvent)((function(){router.navigate("/directory")})),currentRoute=(0,dist.useCurrentRoutePath)();return react.createElement(fuselage.NavBarItem,NavBarItemDirectoryPage_extends({},props,{icon:"notebook-hashtag",onClick:handleDirectory,pressed:null==currentRoute?void 0:currentRoute.includes("/directory")}))},NavBarPagesToolbar_NavBarItemDirectoryPage=NavBarItemDirectoryPage;NavBarItemDirectoryPage.__docgenInfo={description:"",methods:[],displayName:"NavBarItemDirectoryPage"};var ADMIN_PERMISSIONS=["view-statistics","run-import","view-user-administration","view-room-administration","create-invite-links","manage-cloud","view-logs","manage-sounds","view-federation-data","manage-email-inbox","manage-emoji","manage-outgoing-integrations","manage-own-outgoing-integrations","manage-incoming-integrations","manage-own-incoming-integrations","manage-oauth-apps","access-mailer","manage-user-status","access-permissions","access-setting-permissions","view-privileged-setting","edit-privileged-setting","manage-selected-settings","view-engagement-dashboard","view-moderation-console"];function NavBarItemAdministrationMenu_extends(){return NavBarItemAdministrationMenu_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NavBarItemAdministrationMenu_extends.apply(null,arguments)}var NavBarItemAdministrationMenu=function NavBarItemAdministrationMenu(props){var t=(0,dist.useTranslation)(),currentRoute=(0,dist.useCurrentRoutePath)(),sections=function useAdministrationMenu(){var router=(0,dist.useRouter)(),t=(0,dist.useTranslation)(),isAdmin=(0,dist.useAtLeastOnePermission)(ADMIN_PERMISSIONS),isOmnichannel=(0,dist.usePermission)("view-livechat-manager"),workspace={id:"workspace",content:t("Workspace"),onClick:function onClick(){return router.navigate("/admin")}},omnichannel={id:"omnichannel",content:t("Omnichannel"),onClick:function onClick(){return router.navigate("/omnichannel/current")}};return[{title:t("Manage"),items:[isAdmin&&workspace,isOmnichannel&&omnichannel].filter(Boolean)}]}();return sections[0].items.length?react.createElement(ui_client_dist.h4,NavBarItemAdministrationMenu_extends({sections:sections,title:t("Manage"),is:fuselage.NavBarItem,icon:"cog",pressed:(null==currentRoute?void 0:currentRoute.includes("/omnichannel/"))||(null==currentRoute?void 0:currentRoute.includes("/admin")),placement:"bottom-end"},props)):null},NavBarSettingsToolbar_NavBarItemAdministrationMenu=NavBarItemAdministrationMenu;function NavBarItemLoginPage_extends(){return NavBarItemLoginPage_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NavBarItemLoginPage_extends.apply(null,arguments)}NavBarItemAdministrationMenu.__docgenInfo={description:"",methods:[],displayName:"NavBarItemAdministrationMenu"};var NavBarItemLoginPage=function NavBarItemLoginPage(props){var setForceLogin=(0,dist.useSessionDispatch)("forceLogin"),t=(0,dist.useTranslation)();return react.createElement(fuselage.Button,NavBarItemLoginPage_extends({primary:!0,small:!0,icon:"login",onClick:function onClick(){return setForceLogin(!0)}},props),t("Login"))},NavBarSettingsToolbar_NavBarItemLoginPage=NavBarItemLoginPage;NavBarItemLoginPage.__docgenInfo={description:"",methods:[],displayName:"NavBarItemLoginPage"};var UserMenuButton_templateObject,ui_avatar_dist=__webpack_require__("../../packages/ui-avatar/dist/index.js"),UserStatus=__webpack_require__("./client/components/UserStatus/index.ts");function UserMenuButton_extends(){return UserMenuButton_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},UserMenuButton_extends.apply(null,arguments)}var anon={_id:"",username:"Anonymous",status:"online",avatarETag:void 0},UserMenuButton=(0,react.forwardRef)((function UserMenuButton(props,ref){var e,t,user=(0,dist.useUser)(),_ref=user||anon,_ref$status=_ref.status,status=void 0===_ref$status?user?"offline":"online":_ref$status,username=_ref.username,avatarETag=_ref.avatarETag,presenceDisabled=(0,dist.useSetting)("Presence_broadcast_disabled");return react.createElement(fuselage.IconButton,UserMenuButton_extends({},props,{ref:ref,position:"relative",display:"flex",flexDirection:"column",overflow:"visible",icon:username?react.createElement(ui_avatar_dist.H8,{size:"x28",username:username,etag:avatarETag}):"user"}),react.createElement(fuselage.Box,{position:"absolute",role:"status",className:(0,index_module.css)(UserMenuButton_templateObject||(e=["\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t\ttransform: translate(30%, 30%);\n\t\t\t\t"],t||(t=e.slice(0)),UserMenuButton_templateObject=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})))),display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",size:"x12",borderWidth:"default",bg:"surface-tint",borderColor:"extra-light",borderRadius:"full"},react.createElement(UserStatus._O,{small:!0,status:presenceDisabled?"disabled":status})))})),UserMenu_UserMenuButton=UserMenuButton;UserMenuButton.__docgenInfo={description:"",methods:[],displayName:"UserMenuButton"};var MarkdownText=__webpack_require__("./client/components/MarkdownText.tsx"),useUserDisplayName=__webpack_require__("./client/hooks/useUserDisplayName.ts"),UserMenuHeader=function UserMenuHeader(_ref){var _user$status,user=_ref.user,t=(0,dist.useTranslation)(),presenceDisabled=(0,dist.useSetting)("Presence_broadcast_disabled"),displayName=(0,useUserDisplayName.y)(user);return react.createElement(fuselage.Box,{display:"flex",flexDirection:"row",alignItems:"center",minWidth:"x208",mbe:"neg-x4",mbs:"neg-x8"},react.createElement(fuselage.Box,{mie:4},react.createElement(ui_avatar_dist.H8,{size:"x36",username:(null==user?void 0:user.username)||"",etag:null==user?void 0:user.avatarETag})),react.createElement(fuselage.Box,{mis:4,display:"flex",overflow:"hidden",flexDirection:"column",fontScale:"p2",mb:"neg-x4",flexGrow:1,flexShrink:1},react.createElement(fuselage.Box,{withTruncatedText:!0,w:"full",display:"flex",alignItems:"center",flexDirection:"row"},react.createElement(fuselage.Margins,{inline:4},react.createElement(UserStatus._O,{status:presenceDisabled?"disabled":user.status}),react.createElement(fuselage.Box,{is:"span",withTruncatedText:!0,display:"inline-block",fontWeight:"700"},displayName))),react.createElement(fuselage.Box,{color:"hint"},react.createElement(MarkdownText.A,{withTruncatedText:!0,parseEmoji:!0,content:(null==user?void 0:user.statusText)||t(null!==(_user$status=null==user?void 0:user.status)&&void 0!==_user$status?_user$status:"offline"),variant:"inlineWithoutBreaks"}))))},UserMenu_UserMenuHeader=UserMenuHeader;function useAccountItems_typeof(o){return useAccountItems_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},useAccountItems_typeof(o)}function useAccountItems_toConsumableArray(r){return function useAccountItems_arrayWithoutHoles(r){if(Array.isArray(r))return useAccountItems_arrayLikeToArray(r)}(r)||function useAccountItems_iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function useAccountItems_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return useAccountItems_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?useAccountItems_arrayLikeToArray(r,a):void 0}}(r)||function useAccountItems_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useAccountItems_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=useAccountItems_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=useAccountItems_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==useAccountItems_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}UserMenuHeader.__docgenInfo={description:"",methods:[],displayName:"UserMenuHeader",props:{user:{required:!0,tsType:{name:"IUser"},description:""}}};var useAccountItems=function useAccountItems(){var t=(0,dist.useTranslation)(),router=(0,dist.useRouter)(),_usePreferenceFeature=(0,ui_client_dist.XG)(),unseenFeatures=_usePreferenceFeature.unseenFeatures,featurePreviewEnabled=_usePreferenceFeature.featurePreviewEnabled,handleMyAccount=(0,dist_index_module.useEffectEvent)((function(){router.navigate("/account")})),handlePreferences=(0,dist_index_module.useEffectEvent)((function(){router.navigate("/account/preferences")})),handleFeaturePreview=(0,dist_index_module.useEffectEvent)((function(){router.navigate("/account/feature-preview")})),handleAccessibility=(0,dist_index_module.useEffectEvent)((function(){router.navigate("/account/accessibility-and-appearance")})),featurePreviewItem=function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({id:"feature-preview",icon:"flask",content:t("Feature_preview"),onClick:handleFeaturePreview},unseenFeatures>0&&{addon:react.createElement(fuselage.Badge,{variant:"primary","aria-label":t("Unseen_features")},unseenFeatures)});return[{id:"profile",icon:"user",content:t("Profile"),onClick:handleMyAccount},{id:"preferences",icon:"customize",content:t("Preferences"),onClick:handlePreferences},{id:"accessibility",icon:"person-arms-spread",content:t("Accessibility_and_Appearance"),onClick:handleAccessibility}].concat(useAccountItems_toConsumableArray(featurePreviewEnabled&&ui_client_dist.f2.length>0?[featurePreviewItem]:[]))},lib=__webpack_require__("../../node_modules/@tanstack/react-query/build/lib/index.js"),es=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),callbacks=__webpack_require__("./lib/callbacks.ts"),userStatuses=__webpack_require__("./client/lib/userStatuses.ts"),useStatusDisabledModal=__webpack_require__("./client/views/admin/customUserStatus/hooks/useStatusDisabledModal.tsx"),UserStatusMenu=__webpack_require__("./client/components/UserStatusMenu.tsx"),constants=__webpack_require__("./client/lib/constants.ts");function EditStatusModal_typeof(o){return EditStatusModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},EditStatusModal_typeof(o)}function EditStatusModal_extends(){return EditStatusModal_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},EditStatusModal_extends.apply(null,arguments)}function EditStatusModal_regeneratorRuntime(){EditStatusModal_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==EditStatusModal_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(EditStatusModal_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function EditStatusModal_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function EditStatusModal_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){EditStatusModal_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){EditStatusModal_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}function EditStatusModal_slicedToArray(r,e){return function EditStatusModal_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function EditStatusModal_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function EditStatusModal_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return EditStatusModal_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?EditStatusModal_arrayLikeToArray(r,a):void 0}}(r,e)||function EditStatusModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EditStatusModal_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var EditStatusModal=function EditStatusModal(_ref){var onClose=_ref.onClose,userStatus=_ref.userStatus,userStatusText=_ref.userStatusText,allowUserStatusMessageChange=(0,dist.useSetting)("Accounts_AllowUserStatusMessageChange"),dispatchToastMessage=(0,dist.useToastMessageDispatch)(),_useLocalStorage2=EditStatusModal_slicedToArray((0,dist_index_module.useLocalStorage)("Local_Custom_Status",""),2),customStatus=_useLocalStorage2[0],setCustomStatus=_useLocalStorage2[1],initialStatusText=customStatus||userStatusText,t=(0,dist.useTranslation)(),_useState2=EditStatusModal_slicedToArray((0,react.useState)(initialStatusText),2),statusText=_useState2[0],setStatusText=_useState2[1],_useState4=EditStatusModal_slicedToArray((0,react.useState)(userStatus),2),statusType=_useState4[0],setStatusType=_useState4[1],_useState6=EditStatusModal_slicedToArray((0,react.useState)(),2),statusTextError=_useState6[0],setStatusTextError=_useState6[1],setUserStatus=(0,dist.useEndpoint)("POST","/v1/users.setStatus"),handleStatusText=(0,dist_index_module.useEffectEvent)((function(e){return setStatusText(e.currentTarget.value),statusText&&statusText.length>constants.HJ?setStatusTextError(t("Max_length_is",constants.HJ)):setStatusTextError(void 0)})),handleSaveStatus=(0,react.useCallback)(EditStatusModal_asyncToGenerator(EditStatusModal_regeneratorRuntime().mark((function _callee(){return EditStatusModal_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,setUserStatus({message:statusText,status:statusType});case 3:setCustomStatus(statusText),dispatchToastMessage({type:"success",message:t("StatusMessage_Changed_Successfully")}),_context.next=10;break;case 7:_context.prev=7,_context.t0=_context.catch(0),dispatchToastMessage({type:"error",message:_context.t0});case 10:onClose();case 11:case"end":return _context.stop()}}),_callee,null,[[0,7]])}))),[dispatchToastMessage,setUserStatus,statusText,statusType,onClose,t]);return react.createElement(fuselage.Modal,{wrapperFunction:function wrapperFunction(props){return react.createElement(fuselage.Box,EditStatusModal_extends({is:"form",onSubmit:function onSubmit(e){e.preventDefault(),handleSaveStatus()}},props))}},react.createElement(fuselage.Modal.Header,null,react.createElement(fuselage.Modal.Icon,{name:"info"}),react.createElement(fuselage.Modal.Title,null,t("Edit_Status")),react.createElement(fuselage.Modal.Close,{onClick:onClose})),react.createElement(fuselage.Modal.Content,{fontScale:"p2"},react.createElement(fuselage.FieldGroup,null,react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldLabel,null,t("StatusMessage")),react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.TextInput,{error:statusTextError,disabled:!allowUserStatusMessageChange,flexGrow:1,value:statusText,onChange:handleStatusText,placeholder:t("StatusMessage_Placeholder"),addon:react.createElement(UserStatusMenu.A,{margin:"neg-x2",onChange:function handleStatusType(type){return setStatusType(type)},initialStatus:statusType})})),!allowUserStatusMessageChange&&react.createElement(fuselage.FieldHint,null,t("StatusMessage_Change_Disabled")),react.createElement(fuselage.FieldError,null,statusTextError)))),react.createElement(fuselage.Modal.Footer,null,react.createElement(fuselage.Modal.FooterControllers,null,react.createElement(fuselage.Button,{secondary:!0,onClick:onClose},t("Cancel")),react.createElement(fuselage.Button,{primary:!0,type:"submit",disabled:!!statusTextError},t("Save")))))},UserMenu_EditStatusModal=EditStatusModal;EditStatusModal.__docgenInfo={description:"",methods:[],displayName:"EditStatusModal",props:{onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},userStatus:{required:!0,tsType:{name:"IUser['status']",raw:"IUser['status']"},description:""},userStatusText:{required:!0,tsType:{name:"IUser['statusText']",raw:"IUser['statusText']"},description:""}}};function useStatusItems_typeof(o){return useStatusItems_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},useStatusItems_typeof(o)}function useStatusItems_toConsumableArray(r){return function useStatusItems_arrayWithoutHoles(r){if(Array.isArray(r))return useStatusItems_arrayLikeToArray(r)}(r)||function useStatusItems_iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function useStatusItems_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return useStatusItems_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?useStatusItems_arrayLikeToArray(r,a):void 0}}(r)||function useStatusItems_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useStatusItems_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function useStatusItems_regeneratorRuntime(){useStatusItems_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==useStatusItems_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(useStatusItems_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function useStatusItems_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function useStatusItems_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){useStatusItems_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){useStatusItems_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}var useStatusItems=function useStatusItems(){userStatuses.W.invisibleAllowed=(0,dist.useSetting)("Accounts_AllowInvisibleStatusOption",!0);var queryClient=(0,lib.useQueryClient)();(0,react.useEffect)((function(){return userStatuses.W.watch((function(){queryClient.setQueryData(["user-statuses"],Array.from(userStatuses.W))}))}),[queryClient]);var _mutationFn,_queryFn,t=(0,es.Bd)().t,setStatus=(0,dist.useEndpoint)("POST","/v1/users.setStatus"),setStatusMutation=(0,lib.useMutation)({mutationFn:(_mutationFn=useStatusItems_asyncToGenerator(useStatusItems_regeneratorRuntime().mark((function _callee(status){return useStatusItems_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:setStatus({status:status.statusType,message:userStatuses.W.isValidType(status.id)?"":status.name}),callbacks.l.run("userStatusManuallySet",status);case 2:case"end":return _context.stop()}}),_callee)}))),function mutationFn(_x){return _mutationFn.apply(this,arguments)})}),presenceDisabled=(0,dist.useSetting)("Presence_broadcast_disabled",!1),_useQuery=(0,lib.useQuery)({queryKey:["user-statuses"],queryFn:(_queryFn=useStatusItems_asyncToGenerator(useStatusItems_regeneratorRuntime().mark((function _callee2(){return useStatusItems_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,userStatuses.W.sync();case 2:return _context2.abrupt("return",Array.from(userStatuses.W));case 3:case"end":return _context2.stop()}}),_callee2)}))),function queryFn(){return _queryFn.apply(this,arguments)}),staleTime:1/0,select:function select(statuses){return statuses.map((function(status){var content=status.localizeName?t(status.name):status.name;return{id:status.id,status:react.createElement(UserStatus._O,{status:status.statusType}),content:react.createElement(MarkdownText.A,{content:content,parseEmoji:!0,variant:"inline"}),disabled:presenceDisabled,onClick:function onClick(){return setStatusMutation.mutate(status)}}}))}}),statuses=_useQuery.data,handleStatusDisabledModal=(0,useStatusDisabledModal.Z)(),handleCustomStatus=function useCustomStatusModalHandler(){var user=(0,dist.useUser)(),setModal=(0,dist.useSetModal)();return function(){setModal(react.createElement(UserMenu_EditStatusModal,{userStatus:null==user?void 0:user.status,userStatusText:null==user?void 0:user.statusText,onClose:function handleModalClose(){return setModal(null)}}))}}();return[].concat(useStatusItems_toConsumableArray(presenceDisabled?[{id:"presence-disabled",content:react.createElement(fuselage.Box,{fontScale:"p2"},react.createElement(fuselage.Box,{mbe:4,wordBreak:"break-word",style:{whiteSpace:"normal"}},t("User_status_disabled")),react.createElement(fuselage.Box,{is:"a",color:"info",onClick:handleStatusDisabledModal},t("Learn_more")))}]:[]),useStatusItems_toConsumableArray(null!=statuses?statuses:[]),[{id:"custom-status",icon:"emoji",content:t("Custom_Status"),onClick:handleCustomStatus,disabled:presenceDisabled}])};function useVoipItemsSection_typeof(o){return useVoipItemsSection_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},useVoipItemsSection_typeof(o)}function useVoipItemsSection_regeneratorRuntime(){useVoipItemsSection_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==useVoipItemsSection_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(useVoipItemsSection_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function useVoipItemsSection_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}var useVoipItemsSection=function useVoipItemsSection(){var _mutationFn,t=(0,es.Bd)().t,dispatchToastMessage=(0,dist.useToastMessageDispatch)(),_useVoipState=(0,ui_voip_dist.Xg)(),clientError=_useVoipState.clientError,isEnabled=_useVoipState.isEnabled,isReady=_useVoipState.isReady,isRegistered=_useVoipState.isRegistered,_useVoipAPI=(0,ui_voip_dist.qR)(),register=_useVoipAPI.register,unregister=_useVoipAPI.unregister,toggleVoip=(0,lib.useMutation)({mutationFn:(_mutationFn=function useVoipItemsSection_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){useVoipItemsSection_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){useVoipItemsSection_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}(useVoipItemsSection_regeneratorRuntime().mark((function _callee(){return useVoipItemsSection_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(isRegistered){_context.next=4;break}return _context.next=3,register();case 3:return _context.abrupt("return",!0);case 4:return _context.next=6,unregister();case 6:return _context.abrupt("return",!1);case 7:case"end":return _context.stop()}}),_callee)}))),function mutationFn(){return _mutationFn.apply(this,arguments)}),onSuccess:function onSuccess(isEnabled){dispatchToastMessage({type:"success",message:t(isEnabled?"Voice_calling_enabled":"Voice_calling_disabled")})}}),tooltip=(0,react.useMemo)((function(){return clientError?t(clientError.message):!isReady||toggleVoip.isLoading?t("Loading"):""}),[clientError,isReady,toggleVoip.isLoading,t]);return(0,react.useMemo)((function(){if(isEnabled)return{items:[{id:"toggle-voip",icon:isRegistered?"phone-disabled":"phone",disabled:!isReady||toggleVoip.isLoading,onClick:function onClick(){return toggleVoip.mutate()},content:react.createElement(fuselage.Box,{is:"span",title:tooltip},t(isRegistered?"Disable_voice_calling":"Enable_voice_calling"))}]}}),[isEnabled,isRegistered,isReady,tooltip,t,toggleVoip])},_excluded=["user"];function UserMenu_extends(){return UserMenu_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},UserMenu_extends.apply(null,arguments)}function UserMenu_toConsumableArray(r){return function UserMenu_arrayWithoutHoles(r){if(Array.isArray(r))return UserMenu_arrayLikeToArray(r)}(r)||function UserMenu_iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||UserMenu_unsupportedIterableToArray(r)||function UserMenu_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UserMenu_slicedToArray(r,e){return function UserMenu_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function UserMenu_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||UserMenu_unsupportedIterableToArray(r,e)||function UserMenu_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UserMenu_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return UserMenu_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?UserMenu_arrayLikeToArray(r,a):void 0}}function UserMenu_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var UserMenu=function UserMenu(_ref){var user=_ref.user,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],t.includes(o)||{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded),t=(0,dist.useTranslation)(),_useState2=UserMenu_slicedToArray((0,react.useState)(!1),2),isOpen=_useState2[0],setIsOpen=_useState2[1],sections=function useUserMenu(user){var t=(0,dist.useTranslation)(),statusItems=useStatusItems(),accountItems=useAccountItems(),voipSection=useVoipItemsSection(),logout=(0,dist.useLogout)(),handleLogout=(0,dist_index_module.useEffectEvent)((function(){logout()})),logoutItem={id:"logout",icon:"sign-out",content:t("Logout"),onClick:handleLogout};return[{title:react.createElement(UserMenu_UserMenuHeader,{user:user}),items:[]},{title:t("Status"),items:statusItems},voipSection,{title:t("Account"),items:accountItems},{items:[logoutItem]}].filter((function(section){return void 0!==section}))}(user),items=sections.reduce((function(acc,_ref2){var items=_ref2.items;return[].concat(UserMenu_toConsumableArray(acc),UserMenu_toConsumableArray(items))}),[]),handleAction=(0,ui_client_dist.dR)(items,(function(){return setIsOpen(!1)}));return react.createElement(ui_client_dist.h4,UserMenu_extends({},props,{is:UserMenu_UserMenuButton,placement:"bottom-end",selectionMode:"multiple",sections:sections,title:t("User_menu"),onAction:handleAction,isOpen:isOpen,onOpenChange:setIsOpen,"aria-label":t("User_menu")}))},UserMenu_UserMenu=(0,react.memo)(UserMenu);function NavBarItemVoipDialer_extends(){return NavBarItemVoipDialer_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NavBarItemVoipDialer_extends.apply(null,arguments)}UserMenu.__docgenInfo={description:"",methods:[],displayName:"UserMenu",props:{user:{required:!0,tsType:{name:"IUser"},description:""}}};var NavBarItemVoipDialer=function NavBarItemVoipDialer(props){var t=(0,es.Bd)().t,sidebar=(0,dist.useLayout)().sidebar,_useVoipState=(0,ui_voip_dist.Xg)(),clientError=_useVoipState.clientError,isEnabled=_useVoipState.isEnabled,isReady=_useVoipState.isReady,isRegistered=_useVoipState.isRegistered,_useVoipDialer=(0,ui_voip_dist.DQ)(),isDialerOpen=_useVoipDialer.open,openDialer=_useVoipDialer.openDialer,closeDialer=_useVoipDialer.closeDialer,handleToggleDialer=(0,dist_index_module.useEffectEvent)((function(){sidebar.toggle(),isDialerOpen?closeDialer():openDialer()})),title=(0,react.useMemo)((function(){return t(isReady||clientError?!isRegistered||clientError?"Voice_calling_disabled":"New_Call":"Loading")}),[clientError,isReady,isRegistered,t]);return isEnabled?react.createElement(fuselage.NavBarItem,NavBarItemVoipDialer_extends({},props,{title:title,icon:"phone",onClick:handleToggleDialer,pressed:isDialerOpen,disabled:!isReady||!isRegistered})):null},NavBarVoipToolbar_NavBarItemVoipDialer=NavBarItemVoipDialer;function NavBar_extends(){return NavBar_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},NavBar_extends.apply(null,arguments)}NavBarItemVoipDialer.__docgenInfo={description:"",methods:[],displayName:"NavBarItemVoipDialer",props:{primary:{required:!1,tsType:{name:"boolean"},description:""}}};var NavBar=function NavBar(){var t=(0,dist.useTranslation)(),user=(0,dist.useUser)(),hasAuditLicense=!0===(0,useHasLicenseModule.b)("auditing"),showOmnichannel=(0,useOmnichannelEnabled.r)(),hasManageAppsPermission=(0,dist.usePermission)("manage-apps"),showMarketplace=(0,dist.usePermission)("access-marketplace")||hasManageAppsPermission,showOmnichannelQueueLink=(0,useOmnichannelShowQueueLink.o)(),isCallEnabled=(0,CallContext.FC)(),isCallReady=(0,CallContext.JD)(),showVoip=(0,ui_voip_dist.Xg)().isEnabled,pagesToolbarRef=(0,react.useRef)(null),pagesToolbarProps=(0,dist_import.t)({"aria-label":t("Pages")},pagesToolbarRef).toolbarProps,omnichannelToolbarRef=(0,react.useRef)(null),omnichannelToolbarProps=(0,dist_import.t)({"aria-label":t("Omnichannel")},omnichannelToolbarRef).toolbarProps,voipToolbarRef=(0,react.useRef)(null),voipToolbarProps=(0,dist_import.t)({"aria-label":t("Voice_Call")},voipToolbarRef).toolbarProps;return react.createElement(fuselage.NavBar,{"aria-label":"header"},react.createElement(fuselage.NavBarSection,null,react.createElement(fuselage.NavBarGroup,NavBar_extends({role:"toolbar",ref:pagesToolbarRef},pagesToolbarProps),react.createElement(NavBarPagesToolbar_NavBarItemHomePage,{title:t("Home")}),react.createElement(NavBarPagesToolbar_NavBarItemDirectoryPage,{title:t("Directory")}),showMarketplace&&react.createElement(NavBarPagesToolbar_NavBarItemMarketPlaceMenu,null),hasAuditLicense&&react.createElement(NavBarPagesToolbar_NavBarItemAuditMenu,null)),showOmnichannel&&react.createElement(react.Fragment,null,react.createElement(fuselage.NavBarDivider,null),react.createElement(fuselage.NavBarGroup,NavBar_extends({role:"toolbar",ref:omnichannelToolbarRef},omnichannelToolbarProps),showOmnichannelQueueLink&&react.createElement(NavBarOmnichannelToolbar_NavBarItemOmnichannelQueue,{title:t("Queue")}),isCallReady&&react.createElement(NavBarOmnichannelToolbar_NavBarItemOmniChannelCallDialPad,null),react.createElement(NavBarOmnichannelToolbar_NavBarItemOmnichannelContact,{title:t("Contacts")}),isCallEnabled&&react.createElement(NavBarOmnichannelToolbar_NavBarItemOmnichannelCallToggle,null),react.createElement(NavBarOmnichannelToolbar_NavBarItemOmnichannelLivechatToggle,null))),showVoip&&react.createElement(react.Fragment,null,react.createElement(fuselage.NavBarDivider,null),react.createElement(fuselage.NavBarGroup,NavBar_extends({role:"toolbar",ref:voipToolbarRef},voipToolbarProps),react.createElement(NavBarVoipToolbar_NavBarItemVoipDialer,{primary:isCallEnabled})))),react.createElement(fuselage.NavBarSection,null,react.createElement(fuselage.NavBarGroup,{"aria-label":t("Workspace_and_user_settings")},react.createElement(NavBarSettingsToolbar_NavBarItemAdministrationMenu,null),user?react.createElement(UserMenu_UserMenu,{user:user}):react.createElement(NavBarSettingsToolbar_NavBarItemLoginPage,null))))},NavBarV2_NavBar=NavBar;NavBar.__docgenInfo={description:"",methods:[],displayName:"NavBar"};var sidebarv2_SidebarRegion=__webpack_require__("./client/sidebarv2/SidebarRegion.tsx"),LayoutWithSidebarV2=function LayoutWithSidebarV2(_ref){var children=_ref.children,embeddedLayout=(0,dist.useLayout)().isEmbedded,modal=(0,dist.useCurrentModal)(),currentRoutePath=(0,dist.useCurrentRoutePath)(),router=(0,dist.useRouter)(),removeSidenav=embeddedLayout&&!(null!=currentRoutePath&&currentRoutePath.startsWith("/admin")),readReceiptsEnabled=(0,dist.useSetting)("Message_Read_Receipt_Store_Users"),firstChannelAfterLogin=(0,dist.useSetting)("First_Channel_After_Login"),redirected=(0,react.useRef)(!1);return(0,react.useEffect)((function(){currentRoutePath&&["/","/home"].includes(currentRoutePath)&&firstChannelAfterLogin&&"string"==typeof firstChannelAfterLogin&&(redirected.current||(redirected.current=!0,router.navigate({name:"/channel/".concat(firstChannelAfterLogin)})))}),[router,currentRoutePath,firstChannelAfterLogin]),react.createElement(react.Fragment,null,react.createElement(MainLayout_AccessibilityShortcut,null),react.createElement(NavBarV2_NavBar,null),react.createElement(fuselage.Box,{bg:"surface-light",id:"rocket-chat",className:[embeddedLayout?"embedded-view":void 0,"menu-nav"].filter(Boolean).join(" "),"aria-hidden":Boolean(modal)},react.createElement(MainLayoutStyleTags,null),!removeSidenav&&react.createElement(sidebarv2_SidebarRegion.A,null),react.createElement("main",{id:"main-content",className:["rc-old","main-content",readReceiptsEnabled?"read-receipts-enabled":void 0].filter(Boolean).join(" ")},children)))},MainLayout_LayoutWithSidebarV2=LayoutWithSidebarV2;LayoutWithSidebarV2.__docgenInfo={description:"",methods:[],displayName:"LayoutWithSidebarV2",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};var AccountSecurityPage=(0,react.lazy)((function(){return Promise.all([__webpack_require__.e(8020),__webpack_require__.e(5741),__webpack_require__.e(3609),__webpack_require__.e(4736),__webpack_require__.e(5110)]).then(__webpack_require__.bind(__webpack_require__,"./client/views/account/security/AccountSecurityPage.tsx"))})),TwoFactorAuthSetupCheck=function TwoFactorAuthSetupCheck(_ref){var children=_ref.children,embeddedLayout=(0,dist.useLayout)().isEmbedded,user=(0,dist.useUser)(),tfaEnabled=(0,dist.useSetting)("Accounts_TwoFactorAuthentication_Enabled");return(0,useReactiveValue.S)((0,react.useCallback)((function(){var _user$services,_user$services2,_user$roles;return!(!user||null!=user&&null!==(_user$services=user.services)&&void 0!==_user$services&&null!==(_user$services=_user$services.totp)&&void 0!==_user$services&&_user$services.enabled||null!=user&&null!==(_user$services2=user.services)&&void 0!==_user$services2&&null!==(_user$services2=_user$services2.email2fa)&&void 0!==_user$services2&&_user$services2.enabled)&&(void 0!==client.Roles.findOne({_id:{$in:null!==(_user$roles=user.roles)&&void 0!==_user$roles?_user$roles:[]},mandatory2fa:!0})&&tfaEnabled)}),[tfaEnabled,user]))?react.createElement("main",{id:"rocket-chat",className:embeddedLayout?"embedded-view":void 0},react.createElement("div",{className:"rc-old main-content content-background-color"},react.createElement(AccountSecurityPage,null))):react.createElement(ui_client_dist.TW,{feature:"newNavigation"},react.createElement(ui_client_dist.sl,null,react.createElement(MainLayout_LayoutWithSidebar,null,children)),react.createElement(ui_client_dist.Uq,null,react.createElement(MainLayout_LayoutWithSidebarV2,null,children)))},MainLayout_TwoFactorAuthSetupCheck=TwoFactorAuthSetupCheck;TwoFactorAuthSetupCheck.__docgenInfo={description:"",methods:[],displayName:"TwoFactorAuthSetupCheck",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};var ResetPasswordPage=(0,react.lazy)((function(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../../packages/web-ui-registration/dist/index.js")).then((function(_ref){return{default:_ref.ResetPasswordPage}}))})),PasswordChangeCheck=function PasswordChangeCheck(_ref2){var _useUser,children=_ref2.children;return!0===(null===(_useUser=(0,dist.useUser)())||void 0===_useUser?void 0:_useUser.requirePasswordChange)?react.createElement(ResetPasswordPage,null):react.createElement(MainLayout_TwoFactorAuthSetupCheck,null,children)},MainLayout_PasswordChangeCheck=PasswordChangeCheck;PasswordChangeCheck.__docgenInfo={description:"",methods:[],displayName:"PasswordChangeCheck",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};var esm=__webpack_require__("./node_modules/@rocket.chat/layout/dist/esm/index.js"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),queryClient=__webpack_require__("./client/lib/queryClient.ts");function RegisterUsername_typeof(o){return RegisterUsername_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},RegisterUsername_typeof(o)}var RegisterUsername_excluded=["username"];function RegisterUsername_extends(){return RegisterUsername_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},RegisterUsername_extends.apply(null,arguments)}function RegisterUsername_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function RegisterUsername_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?RegisterUsername_ownKeys(Object(t),!0).forEach((function(r){RegisterUsername_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):RegisterUsername_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function RegisterUsername_defineProperty(e,r,t){return(r=function RegisterUsername_toPropertyKey(t){var i=function RegisterUsername_toPrimitive(t,r){if("object"!=RegisterUsername_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=RegisterUsername_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==RegisterUsername_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function RegisterUsername_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function RegisterUsername_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],t.includes(o)||{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function RegisterUsername_regeneratorRuntime(){RegisterUsername_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==RegisterUsername_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,i,a)}),(function(t){invoke("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return invoke("throw",t,i,a)}))}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,n,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(RegisterUsername_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,(function(){return this})),define(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},catch:function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function RegisterUsername_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function RegisterUsername_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){RegisterUsername_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){RegisterUsername_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}var RegisterUsername=function RegisterUsername(){var t=(0,dist.useTranslation)(),uid=(0,dist.useUserId)(),logout=(0,dist.useLogout)(),formLabelId=(0,dist_index_module.useUniqueId)(),hideLogo=(0,dist.useSetting)("Layout_Login_Hide_Logo"),customLogo=(0,dist.useAssetWithDarkModePath)("logo"),customBackground=(0,dist.useAssetWithDarkModePath)("background"),dispatchToastMessage=(0,dist.useToastMessageDispatch)(),customFields=(0,dist.useAccountsCustomFields)();if(!uid)throw new Error("Invalid user");var setUsername=(0,dist.useMethod)("setUsername"),saveCustomFields=(0,dist.useMethod)("saveCustomFields"),usernameSuggestion=(0,dist.useEndpoint)("GET","/v1/users.getUsernameSuggestion"),_useQuery=(0,lib.useQuery)(["suggestion"],RegisterUsername_asyncToGenerator(RegisterUsername_regeneratorRuntime().mark((function _callee(){return RegisterUsername_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",usernameSuggestion());case 1:case"end":return _context.stop()}}),_callee)})))),data=_useQuery.data,isLoading=_useQuery.isLoading,_useForm=(0,index_esm.mN)({mode:"onBlur"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,getValues=_useForm.getValues,setError=_useForm.setError,control=_useForm.control,errors=_useForm.formState.errors;(0,react.useEffect)((function(){null!=data&&data.result&&""===getValues("username")&&setValue("username",data.result)}));var _mutationFn,registerUsernameMutation=(0,lib.useMutation)({mutationFn:(_mutationFn=RegisterUsername_asyncToGenerator(RegisterUsername_regeneratorRuntime().mark((function _callee2(data){var username,customFields;return RegisterUsername_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return username=data.username,customFields=RegisterUsername_objectWithoutProperties(data,RegisterUsername_excluded),_context2.abrupt("return",Promise.all([setUsername(username),saveCustomFields(RegisterUsername_objectSpread({},customFields))]));case 2:case"end":return _context2.stop()}}),_callee2)}))),function mutationFn(_x){return _mutationFn.apply(this,arguments)}),onSuccess:function onSuccess(){dispatchToastMessage({type:"success",message:t("Username_has_been_updated")}),queryClient.q.invalidateQueries(["users.info"])},onError:function onError(error,_ref2){var username=_ref2.username;return[error.error,error.errorType].includes("error-blocked-username")?setError("username",{type:"error-blocked-username",message:t("error-blocked-username",{field:username})}):[error.errorType].includes("error-field-unavailable")?setError("username",{type:"error-field-unavailable",message:t("error-field-unavailable",{field:username})}):[error.errorType].includes("")?setError("username",{type:"username-invalid",message:t("Username_invalid")}):void dispatchToastMessage({type:"error",message:error})}});return react.createElement(esm.a5,{background:customBackground,logo:!hideLogo&&customLogo?react.createElement(fuselage.Box,{is:"img",maxHeight:"x40",mi:"neg-x8",src:customLogo,alt:"Logo"}):react.createElement(react.Fragment,null)},react.createElement(esm.lV,{"aria-labelledby":formLabelId,onSubmit:handleSubmit((function(data){return registerUsernameMutation.mutate(data)}))},react.createElement(esm.lV.Header,null,react.createElement(esm.lV.Title,{id:formLabelId},t("Username_title")),react.createElement(esm.lV.Subtitle,null,t("Username_description"))),react.createElement(esm.lV.Container,null,!isLoading&&react.createElement(fuselage.FieldGroup,null,react.createElement(fuselage.Field,null,react.createElement(fuselage.FieldLabel,{id:"username-label"},t("Username")),react.createElement(fuselage.FieldRow,null,react.createElement(fuselage.TextInput,RegisterUsername_extends({"aria-labelledby":"username-label"},register("username",{required:t("Required_field",{field:t("Username")})})))),errors.username&&react.createElement(fuselage.FieldError,null,react.createElement(MarkdownText.A,{content:errors.username.message})))),isLoading&&t("Loading_suggestion"),react.createElement(ui_client_dist.V6,{formName:"customFields",formControl:control,metadata:customFields})),react.createElement(esm.lV.Footer,null,react.createElement(fuselage.ButtonGroup,{stretch:!0,vertical:!0},react.createElement(fuselage.Button,{disabled:isLoading,type:"submit",primary:!0},t("Use_this_username")),react.createElement(fuselage.Button,{onClick:logout},t("Logout"))))))},MainLayout_RegisterUsername=RegisterUsername;RegisterUsername.__docgenInfo={description:"",methods:[],displayName:"RegisterUsername"};var UsernameCheck=function UsernameCheck(_ref){var _useSetting,children=_ref.children,userId=(0,dist.useUserId)(),_useUserInfoQuery=(0,useUserInfoQuery.H)({userId:userId||""}),userData=_useUserInfoQuery.data,isLoading=_useUserInfoQuery.isLoading,allowAnonymousRead=null!==(_useSetting=(0,dist.useSetting)("Accounts_AllowAnonymousRead"))&&void 0!==_useSetting&&_useSetting,shouldRegisterUsername=(0,useReactiveValue.S)((0,react.useCallback)((function(){var _userData$user,hasUserInCollection=!(null==userData||!userData.user),hasUsername=!(null==userData||null===(_userData$user=userData.user)||void 0===_userData$user||!_userData$user.username);return userId?!hasUserInCollection||!hasUsername:!allowAnonymousRead}),[null==userData?void 0:userData.user,userId,allowAnonymousRead]));return!isLoading&&shouldRegisterUsername?react.createElement(MainLayout_RegisterUsername,null):react.createElement(MainLayout_PasswordChangeCheck,null,children)},MainLayout_UsernameCheck=UsernameCheck;UsernameCheck.__docgenInfo={description:"",methods:[],displayName:"UsernameCheck",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};var AuthenticationCheck=function AuthenticationCheck(_ref){var children=_ref.children,guest=_ref.guest,uid=(0,dist.useUserId)(),allowAnonymousRead=(0,dist.useSetting)("Accounts_AllowAnonymousRead"),forceLogin=(0,dist.useSession)("forceLogin");return uid?react.createElement(MainLayout_UsernameCheck,null,children):!forceLogin&&guest?react.createElement(web_ui_registration_dist.default,{defaultRoute:"guest",children:children}):!forceLogin&&allowAnonymousRead?react.createElement(MainLayout_UsernameCheck,null,children):react.createElement(MainLayout_LoginPage,null)},MainLayout_AuthenticationCheck=AuthenticationCheck;AuthenticationCheck.__docgenInfo={description:"",methods:[],displayName:"AuthenticationCheck",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},guest:{required:!1,tsType:{name:"boolean"},description:""}}};var settings_client=__webpack_require__("./app/settings/client/index.ts"),ui_cached_collection_client=__webpack_require__("./app/ui-cached-collection/client/index.ts"),ui_utils_client=__webpack_require__("./app/ui-utils/client/index.ts"),useReactiveVar=function useReactiveVar(variable){return(0,useReactiveValue.S)((0,react.useCallback)((function(){return variable.get()}),[variable]))},meteor=__webpack_require__("./.storybook/mocks/meteor.js");__webpack_require__("./app/utils/client/lib/SDKClient.ts");var isSyncReady=new meteor.Hw(!1),LoadingIndicator=__webpack_require__("./client/components/LoadingIndicator.tsx"),PageLoading=function PageLoading(){return react.createElement("div",{className:"page-loading",role:"alert","aria-busy":"true","aria-live":"polite","aria-label":"loading"},react.createElement(LoadingIndicator.A,null))},root_PageLoading=PageLoading;PageLoading.__docgenInfo={description:"",methods:[],displayName:"PageLoading"};var Preload=function Preload(_ref){var children=_ref.children,uid=(0,dist.useUserId)(),subscriptionsReady=useReactiveVar(client.CachedChatSubscription.ready),settingsReady=useReactiveVar(settings_client.W.cachedCollection.ready),userDataReady=useReactiveVar(isSyncReady),ready=!uid||userDataReady&&subscriptionsReady&&settingsReady;return(0,react.useEffect)((function(){ui_cached_collection_client.I.syncEnabled=ready,ui_utils_client.mainReady.set(ready)}),[ready]),ready?react.createElement(react.Fragment,null,children):react.createElement(root_PageLoading,null)},MainLayout_Preload=Preload;Preload.__docgenInfo={description:"",methods:[],displayName:"Preload",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};var fireGlobalEvent=__webpack_require__("./client/lib/utils/fireGlobalEvent.ts"),MainLayout=function MainLayout(_ref){var _ref$children=_ref.children,children=void 0===_ref$children?null:_ref$children;return function useCustomScript(){var uid=(0,dist.useUserId)();(0,react.useEffect)((function(){uid?(0,fireGlobalEvent.fireGlobalEvent)("Custom_Script_Logged_In"):(0,fireGlobalEvent.fireGlobalEvent)("Custom_Script_Logged_Out")}),[uid])}(),react.createElement(MainLayout_Preload,null,react.createElement(MainLayout_AuthenticationCheck,null,react.createElement(react.Suspense,{fallback:null},children)))},MainLayout_MainLayout=MainLayout;MainLayout.__docgenInfo={description:"",methods:[],displayName:"MainLayout",props:{children:{required:!1,tsType:{name:"ReactNode"},description:"",defaultValue:{value:"null",computed:!1}}}}},"../../packages/tools/dist/converter.js":function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertFromDaysToMilliseconds=void 0;exports.convertFromDaysToMilliseconds=days=>{if("number"!=typeof days||!Number.isInteger(days))throw new Error("days must be a number");return 24*days*60*60*1e3}},"../../packages/tools/dist/getLoginExpiration.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLoginExpirationInMs=exports.getLoginExpirationInDays=void 0;const converter_1=__webpack_require__("../../packages/tools/dist/converter.js");exports.getLoginExpirationInDays=expiry=>expiry&&"number"==typeof expiry&&!Number.isNaN(expiry)&&expiry>0?expiry:90;exports.getLoginExpirationInMs=expiry=>(0,converter_1.convertFromDaysToMilliseconds)((0,exports.getLoginExpirationInDays)(expiry))},"../../packages/tools/dist/getObjectKeys.js":function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getObjectKeys=void 0;exports.getObjectKeys=object=>Object.keys(object)},"../../packages/tools/dist/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("../../packages/tools/dist/getObjectKeys.js"),exports),__exportStar(__webpack_require__("../../packages/tools/dist/normalizeLanguage.js"),exports),__exportStar(__webpack_require__("../../packages/tools/dist/pick.js"),exports),__exportStar(__webpack_require__("../../packages/tools/dist/stream.js"),exports),__exportStar(__webpack_require__("../../packages/tools/dist/timezone.js"),exports),__exportStar(__webpack_require__("../../packages/tools/dist/wrapExceptions.js"),exports),__exportStar(__webpack_require__("../../packages/tools/dist/getLoginExpiration.js"),exports),__exportStar(__webpack_require__("../../packages/tools/dist/converter.js"),exports)},"../../packages/tools/dist/normalizeLanguage.js":function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeLanguage=void 0;exports.normalizeLanguage=language=>{const matches=/([a-z]{2,3})-([a-z]{2,4})/.exec(language);return matches?`${matches[1]}-${matches[2].toUpperCase()}`:language}},"../../packages/tools/dist/pick.js":function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pick=function pick(object,...attributes){return{...attributes.reduce(((data,key)=>({...data,...key in object?{[key]:object[key]}:{}})),{})}}},"../../packages/tools/dist/stream.js":function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.streamToBuffer=void 0;exports.streamToBuffer=stream=>new Promise(((resolve,reject)=>{const chunks=[];stream.on("data",(data=>chunks.push(data))).on("end",(()=>resolve(Buffer.concat(chunks)))).on("error",(error=>reject(error))).resume()}))},"../../packages/tools/dist/timezone.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.guessTimezone=exports.guessTimezoneFromOffset=void 0;const moment_timezone_1=__importDefault(__webpack_require__("../../node_modules/moment-timezone/index.js"));exports.guessTimezoneFromOffset=offset=>moment_timezone_1.default.tz.names().find((tz=>(offset=>{const numberOffset=Number(offset),absOffset=Math.abs(numberOffset);return`${numberOffset!==absOffset?"-":"+"}${absOffset<10?`0${absOffset}`:absOffset}:00`})(offset)===moment_timezone_1.default.tz(tz).format("Z").toString()))||moment_timezone_1.default.tz.guess();exports.guessTimezone=()=>moment_timezone_1.default.tz.guess()},"../../packages/tools/dist/wrapExceptions.js":function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapExceptions=function wrapExceptions(getter){return{catch:errorWrapper=>{try{const value=getter();return isPromise(value)?value.catch(errorWrapper):value}catch(error){return errorWrapper(error)}},suppress:errorWrapper=>{try{const value=getter();return isPromise(value)?value.catch((error=>errorWrapper?.(error))):value}catch(error){errorWrapper?.(error)}}}};const isPromise=value=>!!value&&value instanceof Promise},"../../packages/web-ui-registration/dist/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CMSPage:function(){return dist_CMSPage},ResetPasswordPage:function(){return ResetPassword_ResetPasswordPage},default:function(){return web_ui_registration_dist}});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),fuselage=__webpack_require__("../../node_modules/@rocket.chat/fuselage/index.js"),esm=__webpack_require__("../../node_modules/@rocket.chat/layout/dist/esm/index.js"),dist=__webpack_require__("../../packages/ui-contexts/dist/index.js"),es=__webpack_require__("../../node_modules/react-i18next/dist/es/index.js");const LoginPoweredBy=()=>(0,dist.useSetting)("Layout_Login_Hide_Powered_By")?null:(0,jsx_runtime.jsx)(fuselage.Box,{mbe:18,children:(0,jsx_runtime.jsxs)(es.x6,{i18nKey:"registration.page.poweredBy",children:["Powered by ",(0,jsx_runtime.jsx)(esm.N_,{href:"https://rocket.chat/",target:"_blank",rel:"noopener noreferrer",children:"Rocket.Chat"})]})});var components_LoginPoweredBy=LoginPoweredBy;var dist_CMSPage=({page:page})=>{const t=(0,dist.useTranslation)(),pageContent=(0,dist.useSetting)(page),customLogo=(0,dist.useAssetWithDarkModePath)("logo"),customBackground=(0,dist.useAssetWithDarkModePath)("background");return(0,jsx_runtime.jsxs)(esm.a5,{background:customBackground,logo:customLogo?(0,jsx_runtime.jsx)(fuselage.Box,{is:"img",maxHeight:"x40",mi:"neg-x8",src:customLogo,alt:"Logo"}):void 0,children:[(0,jsx_runtime.jsx)(esm.I$,{children:t(page)}),(0,jsx_runtime.jsx)(esm.Uv,{children:(0,jsx_runtime.jsxs)(fuselage.Box,{p:32,children:[(0,jsx_runtime.jsx)(fuselage.IconButton,{title:t("Back"),icon:"arrow-back",onClick:()=>window.history.back(),style:{float:"right"}}),(0,jsx_runtime.jsx)(fuselage.Box,{withRichContent:!0,dangerouslySetInnerHTML:{__html:pageContent}})]})}),(0,jsx_runtime.jsx)(esm.zX,{children:(0,jsx_runtime.jsx)(LoginPoweredBy,{})})]})},ui_client_dist=__webpack_require__("../../packages/ui-client/dist/index.js");var dist_GuestForm=({setLoginRoute:setLoginRoute})=>{const{t:t}=(0,es.Bd)();return(0,ui_client_dist.rN)(t("registration.component.login"),!1),(0,jsx_runtime.jsxs)(esm.lV,{children:[(0,jsx_runtime.jsx)(esm.lV.Header,{children:(0,jsx_runtime.jsx)(esm.lV.Title,{children:t("registration.page.guest.chooseHowToJoin")})}),(0,jsx_runtime.jsx)(esm.lV.Container,{children:(0,jsx_runtime.jsxs)(fuselage.ButtonGroup,{large:!0,stretch:!0,vertical:!0,children:[(0,jsx_runtime.jsx)(fuselage.Button,{primary:!0,onClick:()=>setLoginRoute("login"),children:t("registration.page.guest.loginWithRocketChat")}),(0,jsx_runtime.jsx)(fuselage.Button,{onClick:()=>setLoginRoute("anonymous"),children:t("registration.page.guest.continueAsGuest")})]})})]})},index_module=__webpack_require__("../../node_modules/@rocket.chat/fuselage-hooks/dist/index.module.js"),lib=__webpack_require__("../../node_modules/@tanstack/react-query/build/lib/index.js"),react=__webpack_require__("./node_modules/react/index.js"),index_esm=__webpack_require__("../../node_modules/react-hook-form/dist/index.esm.mjs");var dist_EmailConfirmationForm=({email:email,onBackToLogin:onBackToLogin})=>{var _a;const{t:t}=(0,es.Bd)(),isEmail=/^[^@]+@[^@]+$/.test(email||""),{register:register,handleSubmit:handleSubmit,formState:{errors:errors}}=(0,index_esm.mN)({defaultValues:{email:isEmail?email:""}}),sendEmail=(0,lib.useMutation)({mutationFn:(0,dist.useMethod)("sendConfirmationEmail")});return(0,jsx_runtime.jsxs)(esm.lV,{onSubmit:handleSubmit((data=>{sendEmail.isLoading||sendEmail.mutate(data.email)})),children:[(0,jsx_runtime.jsxs)(esm.lV.Header,{children:[(0,jsx_runtime.jsx)(esm.lV.Title,{children:t("registration.component.form.confirmation")}),(0,jsx_runtime.jsx)(esm.lV.Subtitle,{children:t("registration.page.emailVerification.subTitle")})]}),(0,jsx_runtime.jsxs)(esm.lV.Container,{children:[(0,jsx_runtime.jsx)(fuselage.FieldGroup,{disabled:sendEmail.isLoading||sendEmail.isSuccess,children:(0,jsx_runtime.jsxs)(fuselage.Field,{children:[(0,jsx_runtime.jsxs)(fuselage.FieldLabel,{htmlFor:"email",children:[t("registration.component.form.email"),"*"]}),(0,jsx_runtime.jsx)(fuselage.FieldRow,{children:(0,jsx_runtime.jsx)(fuselage.TextInput,Object.assign({},register("email",{required:!0}),{error:errors.email&&t("registration.component.form.requiredField"),"aria-invalid":"required"===(null===(_a=null==errors?void 0:errors.email)||void 0===_a?void 0:_a.type),placeholder:t("registration.component.form.emailPlaceholder"),id:"email"}))}),errors.email&&(0,jsx_runtime.jsx)(fuselage.FieldError,{children:t("registration.component.form.requiredField")})]})}),sendEmail.isSuccess&&(0,jsx_runtime.jsx)(fuselage.FieldGroup,{children:(0,jsx_runtime.jsx)(fuselage.Callout,{type:"success",children:t("registration.page.emailVerification.sent")})})]}),(0,jsx_runtime.jsxs)(esm.lV.Footer,{children:[(0,jsx_runtime.jsx)(fuselage.ButtonGroup,{children:(0,jsx_runtime.jsx)(fuselage.Button,{loading:sendEmail.isLoading,type:"submit",primary:!0,children:t("registration.component.form.sendConfirmationEmail")})}),(0,jsx_runtime.jsx)(esm.t5,{onClick:()=>{onBackToLogin()},children:t("registration.page.register.back")})]})]})},__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};var dist_LoginServicesButton=_a=>{var{buttonLabelText:buttonLabelText,icon:icon,title:title,service:service,className:className,disabled:disabled,setError:setError}=_a,props=__rest(_a,["buttonLabelText","icon","title","service","className","disabled","setError"]);const t=(0,dist.useTranslation)(),handler=(0,dist.useLoginWithService)(Object.assign({service:service,buttonLabelText:buttonLabelText},props)),handleOnClick=(0,react.useCallback)((()=>{handler().catch((e=>{e.error&&"string"==typeof e.error&&(null==setError||setError([e.error,e.reason]))}))}),[handler,setError]);return(0,jsx_runtime.jsx)(fuselage.Button,{icon:icon,className:className,onClick:handleOnClick,title:buttonLabelText&&buttonLabelText!==title?title:void 0,disabled:disabled,alignItems:"center",display:"flex",justifyContent:"center",children:buttonLabelText||t("Sign_in_with__provider__",{provider:title})})};var dist_LoginServices=({disabled:disabled,setError:setError})=>{const{t:t}=(0,es.Bd)(),services=(0,dist.useLoginServices)(),showFormLogin=(0,dist.useSetting)("Accounts_ShowFormLogin");return 0===services.length?null:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[showFormLogin&&(0,jsx_runtime.jsx)(fuselage.Divider,{mb:24,p:0,children:t("registration.component.form.divider")}),(0,jsx_runtime.jsx)(fuselage.ButtonGroup,{vertical:!0,stretch:!0,small:!0,children:services.map((service=>(0,jsx_runtime.jsx)(dist_LoginServicesButton,Object.assign({disabled:disabled},service,{setError:setError}),service.service)))})]})},__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const LOGIN_SUBMIT_ERRORS={"error-user-is-not-activated":{type:"warning",i18n:"registration.page.registration.waitActivationWarning"},"error-app-user-is-not-allowed-to-login":{type:"danger",i18n:"registration.page.login.errors.AppUserNotAllowedToLogin"},"user-not-found":{type:"danger",i18n:"registration.page.login.errors.wrongCredentials"},"error-login-blocked-for-ip":{type:"danger",i18n:"registration.page.login.errors.loginBlockedForIp"},"error-login-blocked-for-user":{type:"danger",i18n:"registration.page.login.errors.loginBlockedForUser"},"error-license-user-limit-reached":{type:"warning",i18n:"registration.page.login.errors.licenseUserLimitReached"},"error-invalid-email":{type:"danger",i18n:"registration.page.login.errors.invalidEmail"}},LoginForm=({setLoginRoute:setLoginRoute})=>{var _a,_b,_c;const{register:register,handleSubmit:handleSubmit,setError:setError,clearErrors:clearErrors,getValues:getValues,formState:{errors:errors}}=(0,index_esm.mN)({mode:"onBlur"}),{t:t}=(0,es.Bd)(),formLabelId=(0,index_module.useUniqueId)(),[errorOnSubmit,setErrorOnSubmit]=(0,react.useState)(void 0),isResetPasswordAllowed=(0,dist.useSetting)("Accounts_PasswordReset"),login=(0,dist.useLoginWithPassword)(),showFormLogin=(0,dist.useSetting)("Accounts_ShowFormLogin"),usernameOrEmailPlaceholder=String((0,dist.useSetting)("Accounts_EmailOrUsernamePlaceholder")),passwordPlaceholder=String((0,dist.useSetting)("Accounts_PasswordPlaceholder"));(0,ui_client_dist.rN)(t("registration.component.login"),!1);const loginMutation=(0,lib.useMutation)({mutationFn:formData=>login(formData.usernameOrEmail,formData.password),onError:error=>{[error.error,error.errorType].includes("error-invalid-email")&&setError("usernameOrEmail",{type:"invalid-email",message:t("registration.page.login.errors.invalidEmail")}),"error"in error&&403!==error.error?setErrorOnSubmit([error.error,error.reason]):setErrorOnSubmit(["user-not-found"])}}),usernameId=(0,index_module.useUniqueId)(),passwordId=(0,index_module.useUniqueId)(),loginFormRef=(0,react.useRef)(null);(0,react.useEffect)((()=>{loginFormRef.current&&loginFormRef.current.focus()}),[errorOnSubmit]);return"invalid-email"===(null===(_a=errors.usernameOrEmail)||void 0===_a?void 0:_a.type)?(0,jsx_runtime.jsx)(dist_EmailConfirmationForm,{onBackToLogin:()=>clearErrors("usernameOrEmail"),email:getValues("usernameOrEmail")}):(0,jsx_runtime.jsxs)(esm.lV,{tabIndex:-1,ref:loginFormRef,"aria-labelledby":formLabelId,"aria-describedby":"welcomeTitle",onSubmit:handleSubmit((data=>__awaiter(void 0,void 0,void 0,(function*(){return loginMutation.mutate(data)})))),children:[(0,jsx_runtime.jsx)(esm.lV.Header,{children:(0,jsx_runtime.jsx)(esm.lV.Title,{id:formLabelId,children:t("registration.component.login")})}),showFormLogin&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(esm.lV.Container,{children:[(0,jsx_runtime.jsxs)(fuselage.FieldGroup,{disabled:loginMutation.isLoading,children:[(0,jsx_runtime.jsxs)(fuselage.Field,{children:[(0,jsx_runtime.jsx)(fuselage.FieldLabel,{required:!0,htmlFor:usernameId,children:t("registration.component.form.emailOrUsername")}),(0,jsx_runtime.jsx)(fuselage.FieldRow,{children:(0,jsx_runtime.jsx)(fuselage.TextInput,Object.assign({},register("usernameOrEmail",{required:t("Required_field",{field:t("registration.component.form.emailOrUsername")})}),{placeholder:usernameOrEmailPlaceholder||t("registration.component.form.emailPlaceholder"),error:null===(_b=errors.usernameOrEmail)||void 0===_b?void 0:_b.message,"aria-invalid":errors.usernameOrEmail||errorOnSubmit?"true":"false","aria-describedby":`${usernameId}-error`,id:usernameId}))}),errors.usernameOrEmail&&(0,jsx_runtime.jsx)(fuselage.FieldError,{"aria-live":"assertive",id:`${usernameId}-error`,children:errors.usernameOrEmail.message})]}),(0,jsx_runtime.jsxs)(fuselage.Field,{children:[(0,jsx_runtime.jsx)(fuselage.FieldLabel,{required:!0,htmlFor:passwordId,children:t("registration.component.form.password")}),(0,jsx_runtime.jsx)(fuselage.FieldRow,{children:(0,jsx_runtime.jsx)(fuselage.PasswordInput,Object.assign({},register("password",{required:t("Required_field",{field:t("registration.component.form.password")})}),{placeholder:passwordPlaceholder,error:null===(_c=errors.password)||void 0===_c?void 0:_c.message,"aria-invalid":errors.password||errorOnSubmit?"true":"false","aria-describedby":`${passwordId}-error`,id:passwordId}))}),errors.password&&(0,jsx_runtime.jsx)(fuselage.FieldError,{"aria-live":"assertive",id:`${passwordId}-error`,children:errors.password.message}),isResetPasswordAllowed&&(0,jsx_runtime.jsx)(fuselage.FieldRow,{justifyContent:"end",children:(0,jsx_runtime.jsx)(fuselage.FieldLink,{href:"#",onClick:e=>{e.preventDefault(),setLoginRoute("reset-password")},children:(0,jsx_runtime.jsx)(es.x6,{i18nKey:"registration.page.login.forgot",children:"Forgot your password?"})})})]})]}),errorOnSubmit&&(0,jsx_runtime.jsx)(fuselage.FieldGroup,{disabled:loginMutation.isLoading,children:(([error,message])=>{if(error in LOGIN_SUBMIT_ERRORS){const{type:type,i18n:i18n}=LOGIN_SUBMIT_ERRORS[error];return(0,jsx_runtime.jsx)(fuselage.Callout,{id:`${usernameId}-error`,"aria-live":"assertive",type:type,children:t(i18n)})}return"totp-canceled"===error?null:message?(0,jsx_runtime.jsx)(fuselage.Callout,{id:`${usernameId}-error`,"aria-live":"assertive",type:"danger",children:message}):null})(errorOnSubmit)})]}),(0,jsx_runtime.jsxs)(esm.lV.Footer,{children:[(0,jsx_runtime.jsx)(fuselage.ButtonGroup,{children:(0,jsx_runtime.jsx)(fuselage.Button,{loading:loginMutation.isLoading,type:"submit",primary:!0,children:t("registration.component.login")})}),(0,jsx_runtime.jsx)("p",{children:(0,jsx_runtime.jsxs)(es.x6,{i18nKey:"registration.page.login.register",children:["New here? ",(0,jsx_runtime.jsx)(esm.t5,{onClick:()=>setLoginRoute("register"),children:"Create an account"})]})})]})]}),(0,jsx_runtime.jsx)(dist_LoginServices,{disabled:loginMutation.isLoading,setError:setErrorOnSubmit})]})};var useRegisterMethod_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},useRegisterMethod_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};var RegisterForm_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},RegisterForm_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};var dist_RegisterForm=({setLoginRoute:setLoginRoute})=>{var _a,_b,_c,_d,_e,_f,_g;const{t:t}=(0,es.Bd)(),requireNameForRegister=Boolean((0,dist.useSetting)("Accounts_RequireNameForSignUp")),requiresPasswordConfirmation=(0,dist.useSetting)("Accounts_RequirePasswordConfirmation"),manuallyApproveNewUsersRequired=(0,dist.useSetting)("Accounts_ManuallyApproveNewUsers"),usernameOrEmailPlaceholder=String((0,dist.useSetting)("Accounts_EmailOrUsernamePlaceholder")),passwordPlaceholder=String((0,dist.useSetting)("Accounts_PasswordPlaceholder")),passwordConfirmationPlaceholder=String((0,dist.useSetting)("Accounts_ConfirmPasswordPlaceholder")),formLabelId=(0,index_module.useUniqueId)(),passwordVerifierId=(0,index_module.useUniqueId)(),nameId=(0,index_module.useUniqueId)(),emailId=(0,index_module.useUniqueId)(),usernameId=(0,index_module.useUniqueId)(),passwordId=(0,index_module.useUniqueId)(),passwordConfirmationId=(0,index_module.useUniqueId)(),reasonId=(0,index_module.useUniqueId)(),registerUser=(()=>{const register=(0,dist.useEndpoint)("POST","/v1/users.register"),secret=(0,dist.useRouteParameter)("hash"),login=(0,dist.useLoginWithPassword)();return(0,lib.useMutation)({mutationFn:_a=>useRegisterMethod_awaiter(void 0,void 0,void 0,(function*(){var props=useRegisterMethod_rest(_a,[]);const result=yield register(Object.assign(Object.assign({},props),{secret:secret}));return yield login(props.username,props.pass),result}))})})(),customFields=(0,dist.useAccountsCustomFields)(),[serverError,setServerError]=(0,react.useState)(void 0),dispatchToastMessage=(0,dist.useToastMessageDispatch)(),{register:register,handleSubmit:handleSubmit,setError:setError,watch:watch,getValues:getValues,clearErrors:clearErrors,control:control,formState:{errors:errors}}=(0,index_esm.mN)({mode:"onBlur"}),{password:password}=watch(),passwordIsValid=(0,ui_client_dist.RR)(password),registerFormRef=(0,react.useRef)(null);(0,react.useEffect)((()=>{registerFormRef.current&&registerFormRef.current.focus()}),[]);return"invalid-email"===(null===(_a=errors.email)||void 0===_a?void 0:_a.type)?(0,jsx_runtime.jsx)(dist_EmailConfirmationForm,{onBackToLogin:()=>clearErrors("email"),email:getValues("email")}):(0,jsx_runtime.jsxs)(esm.lV,{tabIndex:-1,ref:registerFormRef,"aria-labelledby":formLabelId,"aria-describedby":"welcomeTitle",onSubmit:handleSubmit((_a=>RegisterForm_awaiter(void 0,void 0,void 0,(function*(){var{password:password,passwordConfirmation:_}=_a,formData=RegisterForm_rest(_a,["password","passwordConfirmation"]);registerUser.mutate(Object.assign({pass:password},formData),{onError:error=>{[error.error,error.errorType].includes("error-invalid-email")&&setError("email",{type:"invalid-email",message:t("registration.component.form.invalidEmail")}),"error-user-already-exists"===error.errorType&&setError("username",{type:"user-already-exists",message:t("registration.component.form.usernameAlreadyExists")}),/Email already exists/.test(error.error)&&setError("email",{type:"email-already-exists",message:t("registration.component.form.emailAlreadyExists")}),/Username is already in use/.test(error.error)&&setError("username",{type:"username-already-exists",message:t("registration.component.form.userAlreadyExist")}),/The username provided is not valid/.test(error.error)&&setError("username",{type:"username-contains-invalid-chars",message:t("registration.component.form.usernameContainsInvalidChars")}),/Name contains invalid characters/.test(error.error)&&setError("name",{type:"name-contains-invalid-chars",message:t("registration.component.form.nameContainsInvalidChars")}),/error-too-many-requests/.test(error.error)&&dispatchToastMessage({type:"error",message:error.error}),/error-user-is-not-activated/.test(error.error)&&(dispatchToastMessage({type:"info",message:t("registration.page.registration.waitActivationWarning")}),setLoginRoute("login")),"error-user-registration-custom-field"===error.error&&setServerError(error.message)}})})))),children:[(0,jsx_runtime.jsx)(esm.lV.Header,{children:(0,jsx_runtime.jsx)(esm.lV.Title,{id:formLabelId,children:t("registration.component.form.createAnAccount")})}),(0,jsx_runtime.jsx)(esm.lV.Container,{children:(0,jsx_runtime.jsxs)(fuselage.FieldGroup,{children:[(0,jsx_runtime.jsxs)(fuselage.Field,{children:[(0,jsx_runtime.jsx)(fuselage.FieldLabel,{required:requireNameForRegister,htmlFor:nameId,children:t("registration.component.form.name")}),(0,jsx_runtime.jsx)(fuselage.FieldRow,{children:(0,jsx_runtime.jsx)(fuselage.TextInput,Object.assign({},register("name",{required:!!requireNameForRegister&&t("Required_field",{field:t("registration.component.form.name")})}),{error:null===(_b=null==errors?void 0:errors.name)||void 0===_b?void 0:_b.message,"aria-required":requireNameForRegister,"aria-invalid":errors.name?"true":"false",placeholder:t("onboarding.form.adminInfoForm.fields.fullName.placeholder"),"aria-describedby":`${nameId}-error`,id:nameId}))}),errors.name&&(0,jsx_runtime.jsx)(fuselage.FieldError,{"aria-live":"assertive",id:`${nameId}-error`,children:errors.name.message})]}),(0,jsx_runtime.jsxs)(fuselage.Field,{children:[(0,jsx_runtime.jsx)(fuselage.FieldLabel,{required:!0,htmlFor:emailId,children:t("registration.component.form.email")}),(0,jsx_runtime.jsx)(fuselage.FieldRow,{children:(0,jsx_runtime.jsx)(fuselage.TextInput,Object.assign({},register("email",{required:t("Required_field",{field:t("registration.component.form.email")}),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:t("registration.component.form.invalidEmail")}}),{placeholder:usernameOrEmailPlaceholder||t("registration.component.form.emailPlaceholder"),error:null===(_c=null==errors?void 0:errors.email)||void 0===_c?void 0:_c.message,"aria-required":"true","aria-invalid":errors.email?"true":"false","aria-describedby":`${emailId}-error`,id:emailId}))}),errors.email&&(0,jsx_runtime.jsx)(fuselage.FieldError,{"aria-live":"assertive",id:`${emailId}-error`,children:errors.email.message})]}),(0,jsx_runtime.jsxs)(fuselage.Field,{children:[(0,jsx_runtime.jsx)(fuselage.FieldLabel,{required:!0,htmlFor:usernameId,children:t("registration.component.form.username")}),(0,jsx_runtime.jsx)(fuselage.FieldRow,{children:(0,jsx_runtime.jsx)(fuselage.TextInput,Object.assign({},register("username",{required:t("Required_field",{field:t("registration.component.form.username")})}),{error:null===(_d=null==errors?void 0:errors.username)||void 0===_d?void 0:_d.message,"aria-required":"true","aria-invalid":errors.username?"true":"false","aria-describedby":`${usernameId}-error`,id:usernameId,placeholder:"jon.doe"}))}),errors.username&&(0,jsx_runtime.jsx)(fuselage.FieldError,{"aria-live":"assertive",id:`${usernameId}-error`,children:errors.username.message})]}),(0,jsx_runtime.jsxs)(fuselage.Field,{children:[(0,jsx_runtime.jsx)(fuselage.FieldLabel,{required:!0,htmlFor:passwordId,children:t("registration.component.form.password")}),(0,jsx_runtime.jsx)(fuselage.FieldRow,{children:(0,jsx_runtime.jsx)(fuselage.PasswordInput,Object.assign({},register("password",{required:t("Required_field",{field:t("registration.component.form.password")}),validate:()=>!!passwordIsValid||t("Password_must_meet_the_complexity_requirements")}),{error:null===(_e=errors.password)||void 0===_e?void 0:_e.message,"aria-required":"true","aria-invalid":errors.password?"true":void 0,id:passwordId,placeholder:passwordPlaceholder||t("Create_a_password"),"aria-describedby":`${passwordVerifierId} ${passwordId}-error`}))}),(null==errors?void 0:errors.password)&&(0,jsx_runtime.jsx)(fuselage.FieldError,{"aria-live":"assertive",id:`${passwordId}-error`,children:errors.password.message}),(0,jsx_runtime.jsx)(ui_client_dist.yN,{password:password,id:passwordVerifierId})]}),requiresPasswordConfirmation&&(0,jsx_runtime.jsxs)(fuselage.Field,{children:[(0,jsx_runtime.jsx)(fuselage.FieldLabel,{required:!0,htmlFor:passwordConfirmationId,children:t("registration.component.form.confirmPassword")}),(0,jsx_runtime.jsx)(fuselage.FieldRow,{children:(0,jsx_runtime.jsx)(fuselage.PasswordInput,Object.assign({},register("passwordConfirmation",{required:t("Required_field",{field:t("registration.component.form.confirmPassword")}),deps:["password"],validate:val=>watch("password")===val||t("registration.component.form.invalidConfirmPass")}),{error:null===(_f=errors.passwordConfirmation)||void 0===_f?void 0:_f.message,"aria-required":"true","aria-invalid":errors.passwordConfirmation?"true":"false",id:passwordConfirmationId,"aria-describedby":`${passwordConfirmationId}-error`,placeholder:passwordConfirmationPlaceholder||t("Confirm_password"),disabled:!passwordIsValid}))}),errors.passwordConfirmation&&(0,jsx_runtime.jsx)(fuselage.FieldError,{"aria-live":"assertive",id:`${passwordConfirmationId}-error`,children:errors.passwordConfirmation.message})]}),manuallyApproveNewUsersRequired&&(0,jsx_runtime.jsxs)(fuselage.Field,{children:[(0,jsx_runtime.jsx)(fuselage.FieldLabel,{required:!0,htmlFor:reasonId,children:t("registration.component.form.reasonToJoin")}),(0,jsx_runtime.jsx)(fuselage.FieldRow,{children:(0,jsx_runtime.jsx)(fuselage.TextAreaInput,Object.assign({},register("reason",{required:t("Required_field",{field:t("registration.component.form.reasonToJoin")})}),{error:null===(_g=null==errors?void 0:errors.reason)||void 0===_g?void 0:_g.message,"aria-required":"true","aria-invalid":errors.reason?"true":"false","aria-describedby":`${reasonId}-error`,id:reasonId}))}),errors.reason&&(0,jsx_runtime.jsx)(fuselage.FieldError,{"aria-live":"assertive",id:`${reasonId}-error`,children:errors.reason.message})]}),(0,jsx_runtime.jsx)(ui_client_dist.V6,{formName:"customFields",formControl:control,metadata:customFields}),serverError&&(0,jsx_runtime.jsx)(fuselage.Callout,{type:"danger",children:serverError})]})}),(0,jsx_runtime.jsxs)(esm.lV.Footer,{children:[(0,jsx_runtime.jsx)(fuselage.ButtonGroup,{children:(0,jsx_runtime.jsx)(fuselage.Button,{type:"submit",loading:registerUser.isLoading,primary:!0,children:t("registration.component.form.joinYourTeam")})}),(0,jsx_runtime.jsx)(esm.t5,{onClick:()=>{setLoginRoute("login")},children:(0,jsx_runtime.jsx)(es.x6,{i18nKey:"registration.page.register.back",children:"Back to Login"})})]})]})};var dist_RegisterFormDisabled=({setLoginRoute:setLoginRoute})=>{const linkReplacementText=String((0,dist.useSetting)("Accounts_RegistrationForm_LinkReplacementText")),{t:t}=(0,es.Bd)();return(0,jsx_runtime.jsxs)(esm.lV,{children:[(0,jsx_runtime.jsx)(esm.lV.Header,{children:(0,jsx_runtime.jsx)(esm.lV.Title,{children:t("registration.component.form.register")})}),(0,jsx_runtime.jsx)(esm.lV.Container,{children:(0,jsx_runtime.jsx)(fuselage.Callout,{role:"status",type:"warning",children:linkReplacementText})}),(0,jsx_runtime.jsx)(esm.lV.Footer,{children:(0,jsx_runtime.jsx)(esm.t5,{onClick:()=>{setLoginRoute("login")},children:(0,jsx_runtime.jsx)(es.x6,{i18nKey:"registration.page.register.back",children:"Back to Login"})})})]})},tools_dist=__webpack_require__("../../packages/tools/dist/index.js"),LoginSwitchLanguageFooter_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};var components_LoginSwitchLanguageFooter=_a=>{var _b,{browserLanguage:browserLanguage=(0,tools_dist.normalizeLanguage)(null!==(_b=window.navigator.language)&&void 0!==_b?_b:"en")}=_a;const loadLanguage=(0,dist.useLoadLanguage)(),{suggestions:suggestions}=(_a=>{var _b,{browserLanguage:browserLanguage=(0,tools_dist.normalizeLanguage)(null!==(_b=window.navigator.language)&&void 0!==_b?_b:"en")}=_a;const availableLanguages=(0,dist.useLanguages)(),currentLanguage=(0,dist.useLanguage)(),serverLanguage=(0,tools_dist.normalizeLanguage)((0,dist.useSetting)("Language")||"en"),suggestions=(0,react.useMemo)((()=>{const potentialLanguages=new Set([serverLanguage,browserLanguage,"en"].map(tools_dist.normalizeLanguage));return Array.from(potentialLanguages).map((potentialLanguageKey=>availableLanguages.find((language=>language.key===potentialLanguageKey)))).filter((language=>!!language&&language.key!==currentLanguage))}),[serverLanguage,browserLanguage,availableLanguages,currentLanguage]),{i18n:i18n}=(0,es.Bd)();return(0,react.useEffect)((()=>{i18n.loadLanguages(suggestions.map((suggestion=>suggestion.key)))}),[i18n,suggestions]),{suggestions:suggestions}})({browserLanguage:browserLanguage}),[,setPreferedLanguage]=(0,index_module.useLocalStorage)("preferedLanguage","");return suggestions.length?(0,jsx_runtime.jsx)(esm.a9,{children:suggestions.map((suggestion=>{return(0,jsx_runtime.jsx)(fuselage.Button,{secondary:!0,small:!0,mie:8,onClick:(language=suggestion,event=>LoginSwitchLanguageFooter_awaiter(void 0,void 0,void 0,(function*(){event.preventDefault(),yield loadLanguage(language.key),setPreferedLanguage(language.key)}))),children:(0,jsx_runtime.jsxs)(es.x6,{i18nKey:"registration.component.switchLanguage",tOptions:{lng:suggestion.key},children:["Change to"," ",(0,jsx_runtime.jsx)("strong",{children:(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:{name:suggestion.ogName}})})]})},suggestion.key);var language}))}):null};var components_LoginTerms=()=>{const{t:t}=(0,es.Bd)(),loginTerms=(0,dist.useSetting)("Layout_Login_Terms");return(0,jsx_runtime.jsx)(esm.a9,{children:(0,jsx_runtime.jsx)(fuselage.Box,{withRichContent:!0,dangerouslySetInnerHTML:{__html:""!==loginTerms?loginTerms:t("Layout_Login_Terms_Content")}})})};const RegisterTitle=()=>{const siteName=(0,dist.useSetting)("Site_Name");return(0,dist.useSetting)("Layout_Login_Hide_Title")?null:(0,jsx_runtime.jsx)("span",{id:"welcomeTitle",children:(0,jsx_runtime.jsxs)(es.x6,{i18nKey:"registration.component.welcome",children:["Welcome to ",siteName," workspace"]})})};var template_HorizontalTemplate=({children:children})=>{const hideLogo=(0,dist.useSetting)("Layout_Login_Hide_Logo"),customLogo=(0,dist.useAssetWithDarkModePath)("logo"),customBackground=(0,dist.useAssetWithDarkModePath)("background");return(0,jsx_runtime.jsxs)(esm.OO,{background:customBackground,logo:!hideLogo&&customLogo?(0,jsx_runtime.jsx)(fuselage.Box,{is:"img",maxHeight:"x40",mi:"neg-x8",src:customLogo,alt:"Logo"}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),children:[(0,jsx_runtime.jsxs)(esm.w3,{children:[(0,jsx_runtime.jsx)(esm.Kj,{children:(0,jsx_runtime.jsx)(RegisterTitle,{})}),(0,jsx_runtime.jsx)(components_LoginPoweredBy,{})]}),(0,jsx_runtime.jsxs)(esm.XP,{children:[children,(0,jsx_runtime.jsxs)(esm.zC,{children:[(0,jsx_runtime.jsx)(components_LoginTerms,{}),(0,jsx_runtime.jsx)(components_LoginSwitchLanguageFooter,{})]})]})]})};var template_VerticalTemplate=({children:children})=>{const hideLogo=(0,dist.useSetting)("Layout_Login_Hide_Logo"),customLogo=(0,dist.useAssetWithDarkModePath)("logo"),customBackground=(0,dist.useAssetWithDarkModePath)("background");return(0,jsx_runtime.jsxs)(esm.a5,{background:customBackground,logo:!hideLogo&&customLogo?(0,jsx_runtime.jsx)(fuselage.Box,{is:"img",maxHeight:"x40",mi:"neg-x8",src:customLogo,alt:"Logo"}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),children:[(0,jsx_runtime.jsx)(esm.I$,{children:(0,jsx_runtime.jsx)(RegisterTitle,{})}),(0,jsx_runtime.jsx)(components_LoginPoweredBy,{}),children,(0,jsx_runtime.jsxs)(esm.zX,{children:[(0,jsx_runtime.jsx)(components_LoginTerms,{}),(0,jsx_runtime.jsx)(components_LoginSwitchLanguageFooter,{})]})]})},RegisterTemplate_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};var dist_RegisterTemplate=_a=>{var{children:children}=_a,props=RegisterTemplate_rest(_a,["children"]);const template=(0,dist.useSetting)("Layout_Login_Template");return(0,jsx_runtime.jsxs)("main",{children:["vertical-template"===template&&(0,jsx_runtime.jsx)(template_VerticalTemplate,Object.assign({},props,{children:children})),"horizontal-template"===template&&(0,jsx_runtime.jsx)(template_HorizontalTemplate,Object.assign({},props,{children:children}))]})};var dist_SecretRegisterInvalidForm=()=>{const t=(0,dist.useTranslation)();return(0,jsx_runtime.jsx)(template_VerticalTemplate,{children:(0,jsx_runtime.jsx)("h2",{children:t("Invalid_secret_URL_message")})})},useCheckRegistrationSecret_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};var template_FormSkeleton=()=>(0,jsx_runtime.jsxs)(esm.lV,{"aria-busy":!0,children:[(0,jsx_runtime.jsx)(esm.lV.Header,{children:(0,jsx_runtime.jsx)(esm.lV.Title,{children:(0,jsx_runtime.jsx)(fuselage.Skeleton,{})})}),(0,jsx_runtime.jsx)(esm.lV.Container,{}),(0,jsx_runtime.jsxs)(fuselage.Field,{children:[(0,jsx_runtime.jsx)(fuselage.FieldLabel,{children:(0,jsx_runtime.jsx)(fuselage.Skeleton,{})}),(0,jsx_runtime.jsx)(fuselage.FieldDescription,{children:(0,jsx_runtime.jsx)(fuselage.Skeleton,{})}),(0,jsx_runtime.jsx)(fuselage.FieldRow,{children:(0,jsx_runtime.jsx)(fuselage.InputBox.Skeleton,{})}),(0,jsx_runtime.jsx)(fuselage.FieldHint,{children:(0,jsx_runtime.jsx)(fuselage.Skeleton,{})})]}),(0,jsx_runtime.jsx)(esm.lV.Footer,{children:(0,jsx_runtime.jsx)(fuselage.Skeleton,{})})]});var dist_SecretRegisterForm=({setLoginRoute:setLoginRoute})=>{const hash=(0,dist.useRouteParameter)("hash"),{data:valid,isSuccess:isSuccess}=(hash=>{const checkRegistrationSecretURL=(0,dist.useMethod)("checkRegistrationSecretURL");return(0,lib.useQuery)(["secretURL",hash],(()=>useCheckRegistrationSecret_awaiter(void 0,void 0,void 0,(function*(){return!!hash&&checkRegistrationSecretURL(hash)}))))})(hash);return isSuccess&&!valid?(0,jsx_runtime.jsx)(dist_SecretRegisterInvalidForm,{}):isSuccess&&valid?(0,jsx_runtime.jsx)(template_HorizontalTemplate,{children:(0,jsx_runtime.jsx)(dist_RegisterForm,{setLoginRoute:setLoginRoute})}):(0,jsx_runtime.jsx)(template_HorizontalTemplate,{children:(0,jsx_runtime.jsx)(template_FormSkeleton,{})})};var dist_RegisterSecretPageRouter=({setLoginRoute:setLoginRoute,origin:origin})=>{const{t:t}=(0,es.Bd)(),registrationMode=(0,dist.useSetting)("Accounts_RegistrationForm"),isPublicRegistration="Public"===registrationMode,isRegistrationAllowedForSecret="Secret URL"===registrationMode,isRegistrationDisabled="Disabled"===registrationMode||"register"===origin&&isRegistrationAllowedForSecret;return(0,ui_client_dist.rN)(t("registration.component.form.createAnAccount"),!1),"secret-register"!==origin||isRegistrationAllowedForSecret?isPublicRegistration||"invite-register"===origin&&isRegistrationAllowedForSecret?(0,jsx_runtime.jsx)(dist_RegisterTemplate,{children:(0,jsx_runtime.jsx)(dist_RegisterForm,{setLoginRoute:setLoginRoute})}):isRegistrationDisabled?(0,jsx_runtime.jsx)(dist_RegisterTemplate,{children:(0,jsx_runtime.jsx)(dist_RegisterFormDisabled,{setLoginRoute:setLoginRoute})}):isRegistrationAllowedForSecret?(0,jsx_runtime.jsx)(dist_SecretRegisterForm,{setLoginRoute:setLoginRoute}):(0,jsx_runtime.jsx)(dist_RegisterTemplate,{children:(0,jsx_runtime.jsx)(template_FormSkeleton,{})}):(0,jsx_runtime.jsx)(dist_SecretRegisterInvalidForm,{})};var dist_ResetPasswordForm=({setLoginRoute:setLoginRoute})=>{var _a;const{t:t}=(0,es.Bd)(),emailId=(0,index_module.useUniqueId)(),formLabelId=(0,index_module.useUniqueId)(),forgotPasswordFormRef=(0,react.useRef)(null);(0,ui_client_dist.rN)(t("registration.component.resetPassword"),!1);const{register:register,handleSubmit:handleSubmit,formState:{errors:errors,isSubmitting:isSubmitting}}=(0,index_esm.mN)({mode:"onBlur"});(0,react.useEffect)((()=>{forgotPasswordFormRef.current&&forgotPasswordFormRef.current.focus()}),[]);const{mutateAsync:mutateAsync,isSuccess:isSuccess}=(()=>{const sendForgotPassword=(0,dist.useEndpoint)("POST","/v1/users.forgotPassword");return(0,lib.useMutation)({mutationFn:sendForgotPassword})})();return(0,jsx_runtime.jsxs)(esm.lV,{ref:forgotPasswordFormRef,tabIndex:-1,"aria-labelledby":formLabelId,"aria-describedby":"welcomeTitle",onSubmit:handleSubmit((data=>{mutateAsync({email:data.email})})),children:[(0,jsx_runtime.jsx)(esm.lV.Header,{children:(0,jsx_runtime.jsx)(esm.lV.Title,{id:formLabelId,children:t("registration.component.resetPassword")})}),(0,jsx_runtime.jsxs)(esm.lV.Container,{children:[(0,jsx_runtime.jsx)(fuselage.FieldGroup,{children:(0,jsx_runtime.jsxs)(fuselage.Field,{children:[(0,jsx_runtime.jsx)(fuselage.FieldLabel,{required:!0,htmlFor:emailId,children:t("registration.component.form.email")}),(0,jsx_runtime.jsx)(fuselage.FieldRow,{children:(0,jsx_runtime.jsx)(fuselage.TextInput,Object.assign({},register("email",{required:t("Required_field",{field:t("registration.component.form.email")}),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:t("registration.page.resetPassword.errors.invalidEmail")}}),{error:null===(_a=errors.email)||void 0===_a?void 0:_a.message,"aria-invalid":Boolean(errors.email),"aria-required":"true","aria-describedby":`${emailId}-error`,placeholder:t("registration.component.form.emailPlaceholder"),id:emailId}))}),errors.email&&(0,jsx_runtime.jsx)(fuselage.FieldError,{"aria-live":"assertive",id:`${emailId}-error`,children:errors.email.message})]})}),isSuccess&&(0,jsx_runtime.jsx)(fuselage.FieldGroup,{children:(0,jsx_runtime.jsx)(fuselage.Callout,{"aria-live":"assertive",role:"status",mbs:24,icon:"mail",children:t("registration.page.resetPassword.sent")})})]}),(0,jsx_runtime.jsxs)(esm.lV.Footer,{children:[(0,jsx_runtime.jsx)(fuselage.ButtonGroup,{children:(0,jsx_runtime.jsx)(fuselage.Button,{type:"submit",loading:isSubmitting,primary:!0,children:t("registration.page.resetPassword.sendInstructions")})}),(0,jsx_runtime.jsx)(esm.t5,{onClick:()=>{setLoginRoute("login")},children:t("registration.page.register.back")})]})]})};var ResetPasswordPage_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};var ResetPassword_ResetPasswordPage=()=>{var _a,_b,_c;const user=(0,dist.useUser)(),t=(0,dist.useTranslation)(),setUserPassword=(0,dist.useMethod)("setUserPassword"),resetPassword=(0,dist.useMethod)("resetPassword"),token=(0,dist.useRouteParameter)("token"),resetPasswordFormRef=(0,react.useRef)(null),passwordId=(0,index_module.useUniqueId)(),passwordConfirmationId=(0,index_module.useUniqueId)(),passwordVerifierId=(0,index_module.useUniqueId)(),formLabelId=(0,index_module.useUniqueId)(),requiresPasswordConfirmation=(0,dist.useSetting)("Accounts_RequirePasswordConfirmation"),passwordPlaceholder=String((0,dist.useSetting)("Accounts_PasswordPlaceholder")),passwordConfirmationPlaceholder=String((0,dist.useSetting)("Accounts_ConfirmPasswordPlaceholder")),router=(0,dist.useRouter)(),changePasswordReason=(({requirePasswordChange:requirePasswordChange,requirePasswordChangeReason:requirePasswordChangeReason=(requirePasswordChange?"You_need_to_change_your_password":"Please_enter_your_new_password_below")}={})=>requirePasswordChangeReason)(user||{}),loginWithToken=(0,dist.useLoginWithToken)(),{register:register,handleSubmit:handleSubmit,setError:setError,formState:{errors:errors,isSubmitting:isSubmitting},watch:watch}=(0,index_esm.mN)({mode:"onBlur"}),password=watch("password"),passwordIsValid=(0,ui_client_dist.RR)(password);(0,react.useEffect)((()=>{resetPasswordFormRef.current&&resetPasswordFormRef.current.focus()}),[]);return(0,jsx_runtime.jsx)(template_HorizontalTemplate,{children:(0,jsx_runtime.jsxs)(esm.lV,{tabIndex:-1,ref:resetPasswordFormRef,"aria-labelledby":formLabelId,"aria-describedby":"welcomeTitle",onSubmit:handleSubmit((_a=>ResetPasswordPage_awaiter(void 0,[_a],void 0,(function*({password:password}){try{if(token){const result=yield resetPassword(token,password);yield loginWithToken(result.token),router.navigate("/home")}else yield setUserPassword(password)}catch({error:error,reason:reason}){setError("password",{message:String(null!=reason?reason:error)})}})))),children:[(0,jsx_runtime.jsxs)(esm.lV.Header,{children:[(0,jsx_runtime.jsx)(esm.lV.Title,{id:formLabelId,children:t("Reset_password")}),(0,jsx_runtime.jsx)(esm.lV.Subtitle,{children:t(changePasswordReason)})]}),(0,jsx_runtime.jsx)(esm.lV.Container,{children:(0,jsx_runtime.jsxs)(fuselage.FieldGroup,{children:[(0,jsx_runtime.jsxs)(fuselage.Field,{children:[(0,jsx_runtime.jsx)(fuselage.FieldLabel,{required:!0,htmlFor:passwordId,children:t("registration.component.form.password")}),(0,jsx_runtime.jsx)(fuselage.FieldRow,{children:(0,jsx_runtime.jsx)(fuselage.PasswordInput,Object.assign({},register("password",{required:t("registration.component.form.requiredField"),validate:()=>!!passwordIsValid||t("Password_must_meet_the_complexity_requirements")}),{error:null===(_a=null==errors?void 0:errors.password)||void 0===_a?void 0:_a.message,"aria-invalid":errors.password?"true":"false","aria-required":"true",id:passwordId,placeholder:passwordPlaceholder||t("Create_a_password"),"aria-describedby":`${passwordVerifierId} ${passwordId}-error`}))}),(null==errors?void 0:errors.password)&&(0,jsx_runtime.jsx)(fuselage.FieldError,{"aria-live":"assertive",id:`${passwordId}-error`,children:errors.password.message}),(0,jsx_runtime.jsx)(ui_client_dist.yN,{password:password,id:passwordVerifierId})]}),requiresPasswordConfirmation&&(0,jsx_runtime.jsxs)(fuselage.Field,{children:[(0,jsx_runtime.jsx)(fuselage.FieldLabel,{required:!0,htmlFor:passwordConfirmationId,children:t("registration.component.form.confirmPassword")}),(0,jsx_runtime.jsx)(fuselage.FieldRow,{children:(0,jsx_runtime.jsx)(fuselage.PasswordInput,Object.assign({},register("passwordConfirmation",{required:t("registration.component.form.requiredField"),deps:["password"],validate:val=>password===val||t("registration.component.form.invalidConfirmPass")}),{error:null===(_b=null==errors?void 0:errors.passwordConfirmation)||void 0===_b?void 0:_b.message,"aria-required":"true","aria-invalid":errors.passwordConfirmation?"true":"false","aria-describedby":`${passwordConfirmationId}-error`,id:passwordConfirmationId,placeholder:passwordConfirmationPlaceholder||t("Confirm_password"),disabled:!passwordIsValid}))}),errors.passwordConfirmation&&(0,jsx_runtime.jsx)(fuselage.FieldError,{"aria-live":"assertive",id:`${passwordConfirmationId}-error`,children:null===(_c=errors.passwordConfirmation)||void 0===_c?void 0:_c.message})]})]})}),(0,jsx_runtime.jsx)(esm.lV.Footer,{children:(0,jsx_runtime.jsx)(fuselage.ButtonGroup,{children:(0,jsx_runtime.jsx)(fuselage.Button,{primary:!0,loading:isSubmitting,type:"submit",children:t("Reset")})})})]})})},web_ui_registration_dist=({defaultRoute:defaultRoute="login",children:children})=>{const defaultRouteSession=(0,dist.useSession)("loginDefaultState"),[route,setLoginRoute]=(route=>(0,react.useState)(route))(defaultRouteSession||defaultRoute);return"guest"===route?(0,jsx_runtime.jsx)(dist_RegisterTemplate,{children:(0,jsx_runtime.jsx)(dist_GuestForm,{setLoginRoute:setLoginRoute})}):"login"===route?(0,jsx_runtime.jsx)(dist_RegisterTemplate,{children:(0,jsx_runtime.jsx)(LoginForm,{setLoginRoute:setLoginRoute})}):"reset-password"===route?(0,jsx_runtime.jsx)(dist_RegisterTemplate,{children:(0,jsx_runtime.jsx)(dist_ResetPasswordForm,{setLoginRoute:setLoginRoute})}):"secret-register"===route||"register"===route||"invite-register"===route?(0,jsx_runtime.jsx)(dist_RegisterSecretPageRouter,{origin:route,setLoginRoute:setLoginRoute}):"anonymous"===route?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:children}):null}},"./node_modules/react-dom/server.browser.js":function(){},"../../node_modules/moment/locale sync recursive ^\\.\\/.*$":function(module,__unused_webpack_exports,__webpack_require__){var map={"./af":"../../node_modules/moment/locale/af.js","./af.js":"../../node_modules/moment/locale/af.js","./ar":"../../node_modules/moment/locale/ar.js","./ar-dz":"../../node_modules/moment/locale/ar-dz.js","./ar-dz.js":"../../node_modules/moment/locale/ar-dz.js","./ar-kw":"../../node_modules/moment/locale/ar-kw.js","./ar-kw.js":"../../node_modules/moment/locale/ar-kw.js","./ar-ly":"../../node_modules/moment/locale/ar-ly.js","./ar-ly.js":"../../node_modules/moment/locale/ar-ly.js","./ar-ma":"../../node_modules/moment/locale/ar-ma.js","./ar-ma.js":"../../node_modules/moment/locale/ar-ma.js","./ar-sa":"../../node_modules/moment/locale/ar-sa.js","./ar-sa.js":"../../node_modules/moment/locale/ar-sa.js","./ar-tn":"../../node_modules/moment/locale/ar-tn.js","./ar-tn.js":"../../node_modules/moment/locale/ar-tn.js","./ar.js":"../../node_modules/moment/locale/ar.js","./az":"../../node_modules/moment/locale/az.js","./az.js":"../../node_modules/moment/locale/az.js","./be":"../../node_modules/moment/locale/be.js","./be.js":"../../node_modules/moment/locale/be.js","./bg":"../../node_modules/moment/locale/bg.js","./bg.js":"../../node_modules/moment/locale/bg.js","./bm":"../../node_modules/moment/locale/bm.js","./bm.js":"../../node_modules/moment/locale/bm.js","./bn":"../../node_modules/moment/locale/bn.js","./bn-bd":"../../node_modules/moment/locale/bn-bd.js","./bn-bd.js":"../../node_modules/moment/locale/bn-bd.js","./bn.js":"../../node_modules/moment/locale/bn.js","./bo":"../../node_modules/moment/locale/bo.js","./bo.js":"../../node_modules/moment/locale/bo.js","./br":"../../node_modules/moment/locale/br.js","./br.js":"../../node_modules/moment/locale/br.js","./bs":"../../node_modules/moment/locale/bs.js","./bs.js":"../../node_modules/moment/locale/bs.js","./ca":"../../node_modules/moment/locale/ca.js","./ca.js":"../../node_modules/moment/locale/ca.js","./cs":"../../node_modules/moment/locale/cs.js","./cs.js":"../../node_modules/moment/locale/cs.js","./cv":"../../node_modules/moment/locale/cv.js","./cv.js":"../../node_modules/moment/locale/cv.js","./cy":"../../node_modules/moment/locale/cy.js","./cy.js":"../../node_modules/moment/locale/cy.js","./da":"../../node_modules/moment/locale/da.js","./da.js":"../../node_modules/moment/locale/da.js","./de":"../../node_modules/moment/locale/de.js","./de-at":"../../node_modules/moment/locale/de-at.js","./de-at.js":"../../node_modules/moment/locale/de-at.js","./de-ch":"../../node_modules/moment/locale/de-ch.js","./de-ch.js":"../../node_modules/moment/locale/de-ch.js","./de.js":"../../node_modules/moment/locale/de.js","./dv":"../../node_modules/moment/locale/dv.js","./dv.js":"../../node_modules/moment/locale/dv.js","./el":"../../node_modules/moment/locale/el.js","./el.js":"../../node_modules/moment/locale/el.js","./en-au":"../../node_modules/moment/locale/en-au.js","./en-au.js":"../../node_modules/moment/locale/en-au.js","./en-ca":"../../node_modules/moment/locale/en-ca.js","./en-ca.js":"../../node_modules/moment/locale/en-ca.js","./en-gb":"../../node_modules/moment/locale/en-gb.js","./en-gb.js":"../../node_modules/moment/locale/en-gb.js","./en-ie":"../../node_modules/moment/locale/en-ie.js","./en-ie.js":"../../node_modules/moment/locale/en-ie.js","./en-il":"../../node_modules/moment/locale/en-il.js","./en-il.js":"../../node_modules/moment/locale/en-il.js","./en-in":"../../node_modules/moment/locale/en-in.js","./en-in.js":"../../node_modules/moment/locale/en-in.js","./en-nz":"../../node_modules/moment/locale/en-nz.js","./en-nz.js":"../../node_modules/moment/locale/en-nz.js","./en-sg":"../../node_modules/moment/locale/en-sg.js","./en-sg.js":"../../node_modules/moment/locale/en-sg.js","./eo":"../../node_modules/moment/locale/eo.js","./eo.js":"../../node_modules/moment/locale/eo.js","./es":"../../node_modules/moment/locale/es.js","./es-do":"../../node_modules/moment/locale/es-do.js","./es-do.js":"../../node_modules/moment/locale/es-do.js","./es-mx":"../../node_modules/moment/locale/es-mx.js","./es-mx.js":"../../node_modules/moment/locale/es-mx.js","./es-us":"../../node_modules/moment/locale/es-us.js","./es-us.js":"../../node_modules/moment/locale/es-us.js","./es.js":"../../node_modules/moment/locale/es.js","./et":"../../node_modules/moment/locale/et.js","./et.js":"../../node_modules/moment/locale/et.js","./eu":"../../node_modules/moment/locale/eu.js","./eu.js":"../../node_modules/moment/locale/eu.js","./fa":"../../node_modules/moment/locale/fa.js","./fa.js":"../../node_modules/moment/locale/fa.js","./fi":"../../node_modules/moment/locale/fi.js","./fi.js":"../../node_modules/moment/locale/fi.js","./fil":"../../node_modules/moment/locale/fil.js","./fil.js":"../../node_modules/moment/locale/fil.js","./fo":"../../node_modules/moment/locale/fo.js","./fo.js":"../../node_modules/moment/locale/fo.js","./fr":"../../node_modules/moment/locale/fr.js","./fr-ca":"../../node_modules/moment/locale/fr-ca.js","./fr-ca.js":"../../node_modules/moment/locale/fr-ca.js","./fr-ch":"../../node_modules/moment/locale/fr-ch.js","./fr-ch.js":"../../node_modules/moment/locale/fr-ch.js","./fr.js":"../../node_modules/moment/locale/fr.js","./fy":"../../node_modules/moment/locale/fy.js","./fy.js":"../../node_modules/moment/locale/fy.js","./ga":"../../node_modules/moment/locale/ga.js","./ga.js":"../../node_modules/moment/locale/ga.js","./gd":"../../node_modules/moment/locale/gd.js","./gd.js":"../../node_modules/moment/locale/gd.js","./gl":"../../node_modules/moment/locale/gl.js","./gl.js":"../../node_modules/moment/locale/gl.js","./gom-deva":"../../node_modules/moment/locale/gom-deva.js","./gom-deva.js":"../../node_modules/moment/locale/gom-deva.js","./gom-latn":"../../node_modules/moment/locale/gom-latn.js","./gom-latn.js":"../../node_modules/moment/locale/gom-latn.js","./gu":"../../node_modules/moment/locale/gu.js","./gu.js":"../../node_modules/moment/locale/gu.js","./he":"../../node_modules/moment/locale/he.js","./he.js":"../../node_modules/moment/locale/he.js","./hi":"../../node_modules/moment/locale/hi.js","./hi.js":"../../node_modules/moment/locale/hi.js","./hr":"../../node_modules/moment/locale/hr.js","./hr.js":"../../node_modules/moment/locale/hr.js","./hu":"../../node_modules/moment/locale/hu.js","./hu.js":"../../node_modules/moment/locale/hu.js","./hy-am":"../../node_modules/moment/locale/hy-am.js","./hy-am.js":"../../node_modules/moment/locale/hy-am.js","./id":"../../node_modules/moment/locale/id.js","./id.js":"../../node_modules/moment/locale/id.js","./is":"../../node_modules/moment/locale/is.js","./is.js":"../../node_modules/moment/locale/is.js","./it":"../../node_modules/moment/locale/it.js","./it-ch":"../../node_modules/moment/locale/it-ch.js","./it-ch.js":"../../node_modules/moment/locale/it-ch.js","./it.js":"../../node_modules/moment/locale/it.js","./ja":"../../node_modules/moment/locale/ja.js","./ja.js":"../../node_modules/moment/locale/ja.js","./jv":"../../node_modules/moment/locale/jv.js","./jv.js":"../../node_modules/moment/locale/jv.js","./ka":"../../node_modules/moment/locale/ka.js","./ka.js":"../../node_modules/moment/locale/ka.js","./kk":"../../node_modules/moment/locale/kk.js","./kk.js":"../../node_modules/moment/locale/kk.js","./km":"../../node_modules/moment/locale/km.js","./km.js":"../../node_modules/moment/locale/km.js","./kn":"../../node_modules/moment/locale/kn.js","./kn.js":"../../node_modules/moment/locale/kn.js","./ko":"../../node_modules/moment/locale/ko.js","./ko.js":"../../node_modules/moment/locale/ko.js","./ku":"../../node_modules/moment/locale/ku.js","./ku.js":"../../node_modules/moment/locale/ku.js","./ky":"../../node_modules/moment/locale/ky.js","./ky.js":"../../node_modules/moment/locale/ky.js","./lb":"../../node_modules/moment/locale/lb.js","./lb.js":"../../node_modules/moment/locale/lb.js","./lo":"../../node_modules/moment/locale/lo.js","./lo.js":"../../node_modules/moment/locale/lo.js","./lt":"../../node_modules/moment/locale/lt.js","./lt.js":"../../node_modules/moment/locale/lt.js","./lv":"../../node_modules/moment/locale/lv.js","./lv.js":"../../node_modules/moment/locale/lv.js","./me":"../../node_modules/moment/locale/me.js","./me.js":"../../node_modules/moment/locale/me.js","./mi":"../../node_modules/moment/locale/mi.js","./mi.js":"../../node_modules/moment/locale/mi.js","./mk":"../../node_modules/moment/locale/mk.js","./mk.js":"../../node_modules/moment/locale/mk.js","./ml":"../../node_modules/moment/locale/ml.js","./ml.js":"../../node_modules/moment/locale/ml.js","./mn":"../../node_modules/moment/locale/mn.js","./mn.js":"../../node_modules/moment/locale/mn.js","./mr":"../../node_modules/moment/locale/mr.js","./mr.js":"../../node_modules/moment/locale/mr.js","./ms":"../../node_modules/moment/locale/ms.js","./ms-my":"../../node_modules/moment/locale/ms-my.js","./ms-my.js":"../../node_modules/moment/locale/ms-my.js","./ms.js":"../../node_modules/moment/locale/ms.js","./mt":"../../node_modules/moment/locale/mt.js","./mt.js":"../../node_modules/moment/locale/mt.js","./my":"../../node_modules/moment/locale/my.js","./my.js":"../../node_modules/moment/locale/my.js","./nb":"../../node_modules/moment/locale/nb.js","./nb.js":"../../node_modules/moment/locale/nb.js","./ne":"../../node_modules/moment/locale/ne.js","./ne.js":"../../node_modules/moment/locale/ne.js","./nl":"../../node_modules/moment/locale/nl.js","./nl-be":"../../node_modules/moment/locale/nl-be.js","./nl-be.js":"../../node_modules/moment/locale/nl-be.js","./nl.js":"../../node_modules/moment/locale/nl.js","./nn":"../../node_modules/moment/locale/nn.js","./nn.js":"../../node_modules/moment/locale/nn.js","./oc-lnc":"../../node_modules/moment/locale/oc-lnc.js","./oc-lnc.js":"../../node_modules/moment/locale/oc-lnc.js","./pa-in":"../../node_modules/moment/locale/pa-in.js","./pa-in.js":"../../node_modules/moment/locale/pa-in.js","./pl":"../../node_modules/moment/locale/pl.js","./pl.js":"../../node_modules/moment/locale/pl.js","./pt":"../../node_modules/moment/locale/pt.js","./pt-br":"../../node_modules/moment/locale/pt-br.js","./pt-br.js":"../../node_modules/moment/locale/pt-br.js","./pt.js":"../../node_modules/moment/locale/pt.js","./ro":"../../node_modules/moment/locale/ro.js","./ro.js":"../../node_modules/moment/locale/ro.js","./ru":"../../node_modules/moment/locale/ru.js","./ru.js":"../../node_modules/moment/locale/ru.js","./sd":"../../node_modules/moment/locale/sd.js","./sd.js":"../../node_modules/moment/locale/sd.js","./se":"../../node_modules/moment/locale/se.js","./se.js":"../../node_modules/moment/locale/se.js","./si":"../../node_modules/moment/locale/si.js","./si.js":"../../node_modules/moment/locale/si.js","./sk":"../../node_modules/moment/locale/sk.js","./sk.js":"../../node_modules/moment/locale/sk.js","./sl":"../../node_modules/moment/locale/sl.js","./sl.js":"../../node_modules/moment/locale/sl.js","./sq":"../../node_modules/moment/locale/sq.js","./sq.js":"../../node_modules/moment/locale/sq.js","./sr":"../../node_modules/moment/locale/sr.js","./sr-cyrl":"../../node_modules/moment/locale/sr-cyrl.js","./sr-cyrl.js":"../../node_modules/moment/locale/sr-cyrl.js","./sr.js":"../../node_modules/moment/locale/sr.js","./ss":"../../node_modules/moment/locale/ss.js","./ss.js":"../../node_modules/moment/locale/ss.js","./sv":"../../node_modules/moment/locale/sv.js","./sv.js":"../../node_modules/moment/locale/sv.js","./sw":"../../node_modules/moment/locale/sw.js","./sw.js":"../../node_modules/moment/locale/sw.js","./ta":"../../node_modules/moment/locale/ta.js","./ta.js":"../../node_modules/moment/locale/ta.js","./te":"../../node_modules/moment/locale/te.js","./te.js":"../../node_modules/moment/locale/te.js","./tet":"../../node_modules/moment/locale/tet.js","./tet.js":"../../node_modules/moment/locale/tet.js","./tg":"../../node_modules/moment/locale/tg.js","./tg.js":"../../node_modules/moment/locale/tg.js","./th":"../../node_modules/moment/locale/th.js","./th.js":"../../node_modules/moment/locale/th.js","./tk":"../../node_modules/moment/locale/tk.js","./tk.js":"../../node_modules/moment/locale/tk.js","./tl-ph":"../../node_modules/moment/locale/tl-ph.js","./tl-ph.js":"../../node_modules/moment/locale/tl-ph.js","./tlh":"../../node_modules/moment/locale/tlh.js","./tlh.js":"../../node_modules/moment/locale/tlh.js","./tr":"../../node_modules/moment/locale/tr.js","./tr.js":"../../node_modules/moment/locale/tr.js","./tzl":"../../node_modules/moment/locale/tzl.js","./tzl.js":"../../node_modules/moment/locale/tzl.js","./tzm":"../../node_modules/moment/locale/tzm.js","./tzm-latn":"../../node_modules/moment/locale/tzm-latn.js","./tzm-latn.js":"../../node_modules/moment/locale/tzm-latn.js","./tzm.js":"../../node_modules/moment/locale/tzm.js","./ug-cn":"../../node_modules/moment/locale/ug-cn.js","./ug-cn.js":"../../node_modules/moment/locale/ug-cn.js","./uk":"../../node_modules/moment/locale/uk.js","./uk.js":"../../node_modules/moment/locale/uk.js","./ur":"../../node_modules/moment/locale/ur.js","./ur.js":"../../node_modules/moment/locale/ur.js","./uz":"../../node_modules/moment/locale/uz.js","./uz-latn":"../../node_modules/moment/locale/uz-latn.js","./uz-latn.js":"../../node_modules/moment/locale/uz-latn.js","./uz.js":"../../node_modules/moment/locale/uz.js","./vi":"../../node_modules/moment/locale/vi.js","./vi.js":"../../node_modules/moment/locale/vi.js","./x-pseudo":"../../node_modules/moment/locale/x-pseudo.js","./x-pseudo.js":"../../node_modules/moment/locale/x-pseudo.js","./yo":"../../node_modules/moment/locale/yo.js","./yo.js":"../../node_modules/moment/locale/yo.js","./zh-cn":"../../node_modules/moment/locale/zh-cn.js","./zh-cn.js":"../../node_modules/moment/locale/zh-cn.js","./zh-hk":"../../node_modules/moment/locale/zh-hk.js","./zh-hk.js":"../../node_modules/moment/locale/zh-hk.js","./zh-mo":"../../node_modules/moment/locale/zh-mo.js","./zh-mo.js":"../../node_modules/moment/locale/zh-mo.js","./zh-tw":"../../node_modules/moment/locale/zh-tw.js","./zh-tw.js":"../../node_modules/moment/locale/zh-tw.js"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="../../node_modules/moment/locale sync recursive ^\\.\\/.*$"}}]);