"use strict";(self.webpackChunk_rocket_chat_meteor=self.webpackChunk_rocket_chat_meteor||[]).push([[6812],{"./client/contexts/EmojiPickerContext.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A1:function(){return useEmojiPickerData},Wq:function(){return useEmojiPicker},kO:function(){return usePreviewEmoji}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),EmojiPickerContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(void 0),useEmojiPickerContext=function useEmojiPickerContext(){var context=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(EmojiPickerContext);if(!context)throw new Error("Must be running in EmojiPicker Context");return context},useEmojiPicker=function useEmojiPicker(){return{open:useEmojiPickerContext().open,isOpen:useEmojiPickerContext().isOpen,close:useEmojiPickerContext().close}},usePreviewEmoji=function usePreviewEmoji(){return{emojiToPreview:useEmojiPickerContext().emojiToPreview,handlePreview:useEmojiPickerContext().handlePreview,handleRemovePreview:useEmojiPickerContext().handleRemovePreview}},useEmojiPickerData=function useEmojiPickerData(){var _useEmojiPickerContex=useEmojiPickerContext(),actualTone=_useEmojiPickerContex.actualTone,addRecentEmoji=_useEmojiPickerContex.addRecentEmoji,currentCategory=_useEmojiPickerContex.currentCategory,customItemsLimit=_useEmojiPickerContex.customItemsLimit,getEmojiListsByCategory=_useEmojiPickerContex.getEmojiListsByCategory,quickReactions=_useEmojiPickerContex.quickReactions,recentEmojis=_useEmojiPickerContex.recentEmojis,setActualTone=_useEmojiPickerContex.setActualTone,setCurrentCategory=_useEmojiPickerContex.setCurrentCategory,setCustomItemsLimit=_useEmojiPickerContex.setCustomItemsLimit;return{addRecentEmoji:addRecentEmoji,getEmojiListsByCategory:getEmojiListsByCategory,recentEmojis:recentEmojis,setRecentEmojis:_useEmojiPickerContex.setRecentEmojis,actualTone:actualTone,currentCategory:currentCategory,setCurrentCategory:setCurrentCategory,customItemsLimit:customItemsLimit,setCustomItemsLimit:setCustomItemsLimit,setActualTone:setActualTone,quickReactions:quickReactions}}},"./client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:function(){return CannedResponsesComposer_CannedResponsesComposer}});var fuselage=__webpack_require__("./node_modules/@rocket.chat/fuselage/index.js"),dist=__webpack_require__("../../packages/ui-composer/dist/index.js"),ui_contexts_dist=__webpack_require__("../../packages/ui-contexts/dist/index.js"),react=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var Backdrop=function Backdrop(props){return react.createElement(fuselage.Modal.Backdrop,_extends({bg:"transparent"},props))};Backdrop.__docgenInfo={description:"",methods:[],displayName:"Backdrop"};var _templateObject,EmojiPickerContext=__webpack_require__("./client/contexts/EmojiPickerContext.ts"),index_module=__webpack_require__("./node_modules/@rocket.chat/css-in-js/dist/index.module.js");var InsertPlaceholderDropdown=function InsertPlaceholderDropdown(_ref){var onChange=_ref.onChange,textAreaRef=_ref.textAreaRef,setVisible=_ref.setVisible,t=(0,ui_contexts_dist.useTranslation)(),clickable=(0,index_module.css)(_templateObject||(_templateObject=function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n\t\tcursor: pointer;\n\t"]))),setPlaceholder=function setPlaceholder(name){if(null!=textAreaRef&&textAreaRef.current){var text=textAreaRef.current.value,startPos=textAreaRef.current.selectionStart,placeholder="{{".concat(name,"}}");textAreaRef.current.value=text.slice(0,startPos)+placeholder+text.slice(startPos),textAreaRef.current.focus(),textAreaRef.current.setSelectionRange(startPos+placeholder.length,startPos+placeholder.length),setVisible(!1),onChange(textAreaRef.current.value)}};return react.createElement(fuselage.Box,null,react.createElement(fuselage.Box,{textTransform:"uppercase",fontScale:"c1",fontSize:"10px"},t("Contact")),react.createElement(fuselage.Box,{is:"ul"},react.createElement(fuselage.Box,{className:clickable,is:"li",onClick:function onClick(){return setPlaceholder("contact.name")}},react.createElement(fuselage.Box,{mb:"4px",style:{width:"100%"},fontScale:"p2"},t("Name"))),react.createElement(fuselage.Box,{className:clickable,is:"li",onClick:function onClick(){return setPlaceholder("contact.email")}},react.createElement(fuselage.Box,{mb:"4px",style:{width:"100%"},fontScale:"p2"},t("Email"))),react.createElement(fuselage.Box,{className:clickable,is:"li",onClick:function onClick(){return setPlaceholder("contact.phone")}},react.createElement(fuselage.Box,{mb:"4px",style:{width:"100%"},fontScale:"p2"},t("Phone")))),react.createElement(fuselage.Divider,null),react.createElement(fuselage.Box,{textTransform:"uppercase",fontScale:"c1",fontSize:"10px"},t("Agent")),react.createElement(fuselage.Box,{is:"ul"},react.createElement(fuselage.Box,{className:clickable,is:"li",onClick:function onClick(){return setPlaceholder("agent.name")}},react.createElement(fuselage.Box,{mb:"4px",style:{width:"100%"},fontScale:"p2"},t("Name"))),react.createElement(fuselage.Box,{className:clickable,is:"li",onClick:function onClick(){return setPlaceholder("agent.email")}},react.createElement(fuselage.Box,{mb:"4px",style:{width:"100%"},fontScale:"p2"},t("Email")))))},CannedResponsesComposer_InsertPlaceholderDropdown=(0,react.memo)(InsertPlaceholderDropdown);InsertPlaceholderDropdown.__docgenInfo={description:"",methods:[],displayName:"InsertPlaceholderDropdown",props:{onChange:{required:!0,tsType:{name:"any"},description:""},textAreaRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLTextAreaElement"}],raw:"RefObject<HTMLTextAreaElement>"},description:""},setVisible:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"boolean"}],raw:"SetStateAction<boolean>"}],raw:"Dispatch<SetStateAction<boolean>>"},description:""}}};var _excluded=["onChange"];function CannedResponsesComposer_extends(){return CannedResponsesComposer_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},CannedResponsesComposer_extends.apply(null,arguments)}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var CannedResponsesComposer=function CannedResponsesComposer(_ref){var onChange=_ref.onChange,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],t.includes(o)||{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded),t=(0,ui_contexts_dist.useTranslation)(),useEmojisPreference=(0,ui_contexts_dist.useUserPreference)("useEmojis"),textAreaRef=(0,react.useRef)(null),ref=(0,react.useRef)(null),_useState2=_slicedToArray((0,react.useState)(!1),2),visible=_useState2[0],setVisible=_useState2[1],openEmojiPicker=(0,EmojiPickerContext.Wq)().open,useMarkdownSyntax=function useMarkdownSyntax(char){return(0,react.useCallback)((function(){if(null!=textAreaRef&&textAreaRef.current){var text=textAreaRef.current.value,startPos=textAreaRef.current.selectionStart,endPos=textAreaRef.current.selectionEnd;"[]()"===char?startPos!==endPos&&(textAreaRef.current.value="".concat(text.slice(0,startPos),"[").concat(text.slice(startPos,endPos),"]()").concat(text.slice(endPos))):textAreaRef.current.value="".concat(text.slice(0,startPos)).concat(char).concat(text.slice(startPos,endPos)).concat(char).concat(text.slice(endPos)),textAreaRef.current.focus(),"[]()"===char?startPos===endPos?textAreaRef.current.setSelectionRange(startPos,endPos):textAreaRef.current.setSelectionRange(endPos+3,endPos+3):textAreaRef.current.setSelectionRange(startPos+1,endPos+1),null==onChange||onChange(textAreaRef.current.value)}}),[char])};return react.createElement(dist.oc,null,react.createElement(dist.ul,CannedResponsesComposer_extends({ref:textAreaRef,rows:10,onChange:onChange},props)),react.createElement(dist.FS,null,react.createElement(dist.kp,{"aria-label":t("Message_composer_toolbox_primary_actions")},react.createElement(dist.i_,{icon:"emoji",disabled:!useEmojisPreference,onClick:function handleOpenEmojiPicker(){if(useEmojisPreference){if(null==textAreaRef||!textAreaRef.current)throw new Error("Missing textAreaRef");openEmojiPicker(textAreaRef.current,(function(emoji){return function onClickEmoji(emoji){if(null!=textAreaRef&&textAreaRef.current){var text=textAreaRef.current.value,startPos=textAreaRef.current.selectionStart,emojiValue=":".concat(emoji,": ");textAreaRef.current.value=text.slice(0,startPos)+emojiValue+text.slice(startPos),textAreaRef.current.focus(),textAreaRef.current.setSelectionRange(startPos+emojiValue.length,startPos+emojiValue.length),null==onChange||onChange(textAreaRef.current.value)}}(emoji)}))}},title:t("Emoji")}),react.createElement(dist.Y,null),react.createElement(dist.i_,{icon:"bold",onClick:useMarkdownSyntax("*"),title:t("Bold")}),react.createElement(dist.i_,{icon:"italic",onClick:useMarkdownSyntax("_"),title:t("Italic")}),react.createElement(dist.i_,{icon:"strike",onClick:useMarkdownSyntax("~"),title:t("Strike")}),react.createElement(dist.i_,{icon:"link",onClick:useMarkdownSyntax("[]()"),title:t("Link")}),react.createElement(dist.Y,null),react.createElement(fuselage.Button,{ref:ref,small:!0,onClick:function openPlaceholderSelect(){(null==textAreaRef?void 0:textAreaRef.current)&&textAreaRef.current.focus(),setVisible(!visible)}},t("Insert_Placeholder")),react.createElement(Backdrop,{display:visible?"block":"none",onClick:function onClick(){(null==textAreaRef?void 0:textAreaRef.current)&&textAreaRef.current.focus(),setVisible(!1)}}),react.createElement(fuselage.PositionAnimated,{visible:visible?"visible":"hidden",anchor:ref},react.createElement(fuselage.Tile,{elevation:"1",w:"224px"},react.createElement(CannedResponsesComposer_InsertPlaceholderDropdown,{onChange:onChange,textAreaRef:textAreaRef,setVisible:setVisible}))))))},CannedResponsesComposer_CannedResponsesComposer=(0,react.memo)(CannedResponsesComposer);CannedResponsesComposer.__docgenInfo={description:"",methods:[],displayName:"CannedResponsesComposer"}},"../../packages/ui-composer/dist/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{oc:function(){return MessageComposer_MessageComposer},i_:function(){return MessageComposer_MessageComposerAction},Y:function(){return MessageComposer_MessageComposerActionsDivider},WF:function(){return MessageComposer_MessageComposerButton},XO:function(){return MessageComposer_MessageComposerHint},ul:function(){return MessageComposer_MessageComposerInput},LZ:function(){return MessageComposer_MessageComposerSkeleton},FS:function(){return MessageComposer_MessageComposerToolbar},kp:function(){return MessageComposer_MessageComposerToolbarActions},fZ:function(){return MessageComposer_MessageComposerToolbarSubmit},r7:function(){return MessageFooterCallout_MessageFooterCallout},fU:function(){return MessageFooterCallout_MessageFooterCalloutAction},yF:function(){return MessageFooterCallout_MessageFooterCalloutContent}});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),fuselage=__webpack_require__("../../node_modules/@rocket.chat/fuselage/index.js"),react=__webpack_require__("./node_modules/react/index.js"),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};var MessageComposer_MessageComposer=(0,react.forwardRef)((function MessageComposer(_a,ref){var{variant:variant}=_a,props=__rest(_a,["variant"]);return(0,jsx_runtime.jsx)(fuselage.Box,Object.assign({"rcx-input-box__wrapper":!0,mbs:2,bg:"editing"===variant?"status-background-warning-2":void 0,ref:ref,role:"group",display:"flex",flexDirection:"column",overflow:"hidden",p:0},props))}));var MessageComposer_MessageComposerAction=props=>(0,jsx_runtime.jsx)(fuselage.IconButton,Object.assign({small:!0},props)),MessageComposerActionsDivider_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};var MessageComposer_MessageComposerActionsDivider=_a=>{var{height:height="x20"}=_a,props=MessageComposerActionsDivider_rest(_a,["height"]);return(0,jsx_runtime.jsx)(fuselage.Divider,Object.assign({vertical:!0,mi:4,borderColor:"light",mb:0,backgroundColor:"selected",height:height},props))};var MessageComposer_MessageComposerButton=props=>(0,jsx_runtime.jsx)(fuselage.Button,Object.assign({small:!0},props));var MessageComposer_MessageComposerHint=({icon:icon,children:children,helperText:helperText})=>(0,jsx_runtime.jsxs)(fuselage.Box,{pbs:0,pbe:4,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[(0,jsx_runtime.jsx)(fuselage.Tag,{icon:icon?(0,jsx_runtime.jsx)(fuselage.Icon,{mie:4,name:icon,size:"x12"}):void 0,children:children}),helperText&&(0,jsx_runtime.jsx)(fuselage.Box,{fontScale:"c1",color:"font-hint",children:helperText})]});const messageComposerInputStyle=__webpack_require__("../../node_modules/@rocket.chat/css-in-js/dist/index.module.js").css`
	resize: none;

	&::placeholder {
		color: ${fuselage.Palette.text["font-annotation"]};
	}
`;var MessageComposer_MessageComposerInput=(0,react.forwardRef)((function MessageComposerInput(props,ref){return(0,jsx_runtime.jsx)(fuselage.Box,{is:"label",width:"full",fontSize:0,children:(0,jsx_runtime.jsx)(fuselage.Box,Object.assign({className:[messageComposerInputStyle,"rc-message-box__textarea js-input-message"],color:"default",width:"full",minHeight:"20px",maxHeight:"155px",rows:1,fontScale:"p2",ref:ref,pi:12,mb:16,borderWidth:0,is:"textarea"},props))})}));var MessageComposer_MessageComposerSkeleton=()=>(0,jsx_runtime.jsxs)(MessageComposer_MessageComposer,{children:[(0,jsx_runtime.jsx)(fuselage.Box,{width:"100%",display:"flex",alignItems:"center",height:"x52",pi:12,children:(0,jsx_runtime.jsx)(fuselage.Skeleton,{width:"100%",height:36})}),(0,jsx_runtime.jsx)(MessageComposer_MessageComposerToolbar,{height:36})]});var MessageComposer_MessageComposerToolbar=props=>(0,jsx_runtime.jsx)(fuselage.Box,Object.assign({backgroundColor:"surface-neutral",p:4,display:"flex",justifyContent:"space-between",w:"full"},props)),dist_import=__webpack_require__("../../node_modules/@react-aria/toolbar/dist/import.mjs");var MessageComposer_MessageComposerToolbarActions=props=>{const ref=(0,react.useRef)(null),{toolbarProps:toolbarProps}=(0,dist_import.t)(props,ref);return(0,jsx_runtime.jsx)(fuselage.ButtonGroup,Object.assign({role:"toolbar",small:!0,ref:ref},toolbarProps,{children:props.children}))};var MessageComposer_MessageComposerToolbarSubmit=props=>(0,jsx_runtime.jsx)(fuselage.ButtonGroup,Object.assign({small:!0},props)),MessageFooterCallout_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};var MessageFooterCallout_MessageFooterCallout=(0,react.forwardRef)((function MessageFooterCallout(_a,ref){var{dashed:dashed}=_a,props=MessageFooterCallout_rest(_a,["dashed"]);return(0,jsx_runtime.jsx)(fuselage.Box,Object.assign({ref:ref},dashed&&{borderStyle:"dashed"},{display:"flex",borderWidth:2,borderColor:"light",borderRadius:"x4",p:8,mbe:24,backgroundColor:"surface-tint",alignItems:"center",minHeight:"x48",justifyContent:"center"},props))}));var MessageFooterCallout_MessageFooterCalloutAction=(0,react.forwardRef)((function MessageFooterCalloutAction(props,ref){return(0,jsx_runtime.jsx)(fuselage.Button,Object.assign({mi:4,ref:ref,primary:!0,small:!0,flexShrink:0},props))}));var MessageFooterCallout_MessageFooterCalloutContent=(0,react.forwardRef)((function MessageFooterCalloutContent(props,ref){return(0,jsx_runtime.jsx)(fuselage.Box,Object.assign({mi:4,ref:ref,flexWrap:"wrap",textAlign:"center",color:"default",flexGrow:1,flexShrink:1},props))}));(0,react.forwardRef)((function MessageFooterCalloutDivider(props,ref){return(0,jsx_runtime.jsx)(fuselage.Box,Object.assign({is:"hr",ref:ref,borderInlineStart:"1px solid",mi:4,flexShrink:0},props))}))},"./client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},__namedExportsOrder:function(){return __namedExportsOrder}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_CannedResponsesComposer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx");__webpack_exports__.default={title:"Enterprise/Omnichannel/CannedResponsesComposer",component:_CannedResponsesComposer__WEBPACK_IMPORTED_MODULE_1__.A};const Default=args=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_CannedResponsesComposer__WEBPACK_IMPORTED_MODULE_1__.A,args);Default.storyName="CannedResponsesComposer";const __namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => <CannedResponsesComposer {...args} />",...Default.parameters?.docs?.source}}}}}]);
//# sourceMappingURL=omnichannel-cannedResponses-components-CannedResponsesComposer-CannedResponsesComposer-stories.65a621fb.iframe.bundle.js.map