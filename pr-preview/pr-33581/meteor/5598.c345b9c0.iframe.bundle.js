"use strict";(self.webpackChunk_rocket_chat_meteor=self.webpackChunk_rocket_chat_meteor||[]).push([[5598],{"./client/views/modal/ModalRegion.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return modal_ModalRegion}});var index_module=__webpack_require__("./node_modules/@rocket.chat/fuselage-hooks/dist/index.module.js"),dist=__webpack_require__("../../packages/ui-contexts/dist/index.js"),react=__webpack_require__("./node_modules/react/index.js"),fuselage=__webpack_require__("./node_modules/@rocket.chat/fuselage/index.js"),isAtBackdropChildren=function isAtBackdropChildren(e,ref){var _ref2,backdrop=ref.current,parentElement=e.target.parentElement;return null!==(_ref2=Boolean(parentElement)&&(null==backdrop?void 0:backdrop.contains(parentElement)))&&void 0!==_ref2&&_ref2},ModalBackdrop=function ModalBackdrop(_ref3){var children=_ref3.children,onDismiss=_ref3.onDismiss,ref=(0,react.useRef)(null);!function useEscapeKey(onDismiss){(0,react.useEffect)((function(){var closeOnEsc=function closeOnEsc(e){"Escape"===e.key&&(e.stopPropagation(),null==onDismiss||onDismiss())};return window.addEventListener("keydown",closeOnEsc),function(){window.removeEventListener("keydown",closeOnEsc)}}),[onDismiss])}(onDismiss);var _useOutsideClick=function useOutsideClick(ref,onDismiss){var hasClicked=(0,react.useRef)(!1);return{onMouseDown:(0,react.useCallback)((function(e){isAtBackdropChildren(e,ref)?hasClicked.current=!1:hasClicked.current=!0}),[ref]),onMouseUp:(0,react.useCallback)((function(e){isAtBackdropChildren(e,ref)?hasClicked.current=!1:hasClicked.current&&(hasClicked.current=!1,e.stopPropagation(),null==onDismiss||onDismiss())}),[onDismiss,ref])}}(ref,onDismiss),onMouseDown=_useOutsideClick.onMouseDown,onMouseUp=_useOutsideClick.onMouseUp;return react.createElement(fuselage.Box,{ref:ref,children:children,className:"rcx-modal__backdrop",position:"fixed",zIndex:9999,inset:0,display:"flex",flexDirection:"column",onMouseDown:onMouseDown,onMouseUp:onMouseUp})},components_ModalBackdrop=ModalBackdrop;ModalBackdrop.__docgenInfo={description:"",methods:[],displayName:"ModalBackdrop",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},onDismiss:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};var react_dom=__webpack_require__("./node_modules/react-dom/index.js"),modalRoot=null,ModalPortal=function ModalPortal(_ref){var children=_ref.children;return modalRoot||(modalRoot=function createModalRoot(){var id="modal-root",existing=document.getElementById(id);if(existing)return existing;var newOne=document.createElement("div");return newOne.id=id,document.body.append(newOne),newOne}()),(0,react_dom.createPortal)(children,modalRoot)},portals_ModalPortal=(0,react.memo)(ModalPortal),FocusScope=(0,react.lazy)((function(){return __webpack_require__.e(24).then(__webpack_require__.bind(__webpack_require__,"./node_modules/react-aria/dist/import.mjs")).then((function(module){return{default:module.FocusScope}}))})),ModalRegion=function ModalRegion(){var currentModal=(0,dist.useCurrentModal)(),setModal=(0,dist.useModal)().setModal,handleDismiss=(0,index_module.useEffectEvent)((function(){setModal(null)}));return currentModal?react.createElement(portals_ModalPortal,null,react.createElement(components_ModalBackdrop,{onDismiss:handleDismiss},react.createElement(FocusScope,{contain:!0,restoreFocus:!0,autoFocus:!0},currentModal))):null},modal_ModalRegion=ModalRegion;ModalRegion.__docgenInfo={description:"",methods:[],displayName:"ModalRegion"}}}]);