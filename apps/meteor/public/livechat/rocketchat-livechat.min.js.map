{"version":3,"file":"rocketchat-livechat.min.js","mappings":"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","sources":["webpack://@rocket.chat/livechat/../../node_modules/@rocket.chat/emitter/dist/index.module.js","webpack://@rocket.chat/livechat/./src/widget.ts","webpack://@rocket.chat/livechat/./src/helpers/isDefined.ts"],"sourcesContent":["var t,e,n=Symbol(\"once\"),o=Symbol(\"evts\"),r=function(){function r(){this[t]=new Map,this[e]=new WeakMap}return r.prototype.events=function(){return Array.from(this[o].keys())},r.prototype.has=function(t){return this[o].has(t)},r.prototype.on=function(t,e){var n,r=this,i=null!==(n=this[o].get(t))&&void 0!==n?n:[];return i.push(e),this[o].set(t,i),function(){return r.off(t,e)}},r.prototype.once=function(t,e){var o=this[n].get(e)||0;return this[n].set(e,o+1),this.on(t,e)},r.prototype.off=function(t,e){var r,i=this[o].get(t);if(i){var s=null!==(r=this[n].get(e))&&void 0!==r?r:0;s>1?this[n].set(e,s-1):this[n].delete(e),i.splice(i.findIndex((function(t){return t===e}))>>>0,1),0===i.length&&this[o].delete(t)}},r.prototype.emit=function(t){for(var e,r=this,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];var f=i[0];(function(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))})([],null!==(e=this[o].get(t))&&void 0!==e?e:[],!0).forEach((function(e){e(f),r[n].get(e)&&r.off(t,e)}))},r}();t=o,e=n;export{r as Emitter};\n//# sourceMappingURL=index.module.js.map\n","import type { UserStatus } from '@rocket.chat/core-typings';\nimport type { LivechatRoomEvents } from '@rocket.chat/ddp-client';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { isDefined } from './helpers/isDefined';\nimport type { HooksWidgetAPI } from './lib/hooks';\nimport type { StoreState } from './store';\n\ntype InternalWidgetAPI = {\n\tpopup: Window | null;\n\tready: () => void;\n\tminimizeWindow: () => void;\n\trestoreWindow: () => void;\n\topenPopout: () => void;\n\topenWidget: () => void;\n\tresizeWidget: (height: number) => void;\n\tremoveWidget: () => void;\n\tcallback: (eventName: string, data?: unknown) => void;\n\tshowWidget: () => void;\n\thideWidget: () => void;\n\tresetDocumentStyle: () => void;\n\tsetFullScreenDocumentMobile: () => void;\n\tsetWidgetPosition: (position: 'left' | 'right') => void;\n};\n\nexport type LivechatMessageEventData<ApiType extends Record<string, any>> = {\n\tsrc?: string;\n\tfn: keyof ApiType;\n\targs: Parameters<ApiType[keyof ApiType]>;\n};\n\ntype InitializeParams = {\n\tcustomField: [key: string, value: string, overwrite?: boolean];\n\tsetCustomFields: [key: string, value: string, overwrite?: boolean][];\n\ttheme: StoreState['iframe']['theme'];\n\tdepartment: string;\n\tbusinessUnit: string;\n\tguestToken: string;\n\tguestName: string;\n\tguestEmail: string;\n\tregisterGuest: StoreState['guest'];\n\tlanguage: string;\n\tagent: StoreState['defaultAgent'];\n\tparentUrl: string;\n\tsetGuestMetadata: StoreState['iframe']['guestMetadata'];\n\thiddenSystemMessages: StoreState['iframe']['hiddenSystemMessages'];\n};\n\nconst WIDGET_OPEN_WIDTH = 365;\nconst WIDGET_OPEN_HEIGHT = 525;\nconst WIDGET_MINIMIZED_WIDTH = 54;\nconst WIDGET_MINIMIZED_HEIGHT = 54;\nconst WIDGET_MARGIN = 16;\n\nwindow.RocketChat = window.RocketChat || { _: [] };\nconst config: { url?: string } = {};\nlet widget: HTMLDivElement | null;\nlet iframe: HTMLIFrameElement | null;\nlet hookQueue: [keyof HooksWidgetAPI, Parameters<HooksWidgetAPI[keyof HooksWidgetAPI]>][] = [];\nlet ready = false;\nlet smallScreen = false;\nlet scrollPosition: number;\nlet widgetHeight: number;\n\nexport const VALID_CALLBACKS = [\n\t'chat-maximized',\n\t'chat-minimized',\n\t'chat-started',\n\t'chat-ended',\n\t'pre-chat-form-submit',\n\t'offline-form-submit',\n\t'show-widget',\n\t'hide-widget',\n\t'assign-agent',\n\t'agent-status-change',\n\t'queue-position-change',\n\t'no-agent-online',\n];\n\nconst VALID_SYSTEM_MESSAGES = ['uj', 'ul', 'livechat-close', 'livechat-started', 'livechat_transfer_history'];\n\nconst callbacks = new Emitter();\n\nfunction registerCallback(eventName: string, fn: () => unknown) {\n\tif (VALID_CALLBACKS.indexOf(eventName) === -1) {\n\t\treturn false;\n\t}\n\n\treturn callbacks.on(eventName, fn);\n}\n\nfunction emitCallback(eventName: string, data?: unknown) {\n\tif (typeof data !== 'undefined') {\n\t\tcallbacks.emit(eventName, data);\n\t} else {\n\t\tcallbacks.emit(eventName);\n\t}\n}\n\nfunction clearAllCallbacks() {\n\tcallbacks.events().forEach((callback) => {\n\t\tcallbacks.off(callback, () => undefined);\n\t});\n}\n\n// hooks\nfunction callHook(action: keyof HooksWidgetAPI, ...params: Parameters<HooksWidgetAPI[keyof HooksWidgetAPI]>) {\n\tif (!ready) {\n\t\treturn hookQueue.push([action, params]);\n\t}\n\n\tif (!iframe?.contentWindow) {\n\t\tthrow new Error('Widget is not initialized');\n\t}\n\n\tconst data = {\n\t\tsrc: 'rocketchat',\n\t\tfn: action,\n\t\targs: params,\n\t};\n\n\tiframe.contentWindow?.postMessage(data, '*');\n}\n\nfunction processHookQueue() {\n\tif (!hookQueue.length) {\n\t\treturn;\n\t}\n\n\thookQueue.forEach(([action, params = []]) => {\n\t\tcallHook(action, ...params);\n\t});\n\n\thookQueue = [];\n}\n\nconst updateWidgetStyle = (isOpened: boolean) => {\n\tif (!iframe || !widget) {\n\t\tthrow new Error('Widget is not initialized');\n\t}\n\n\tconst isFullscreen = smallScreen && widget.dataset.state !== 'triggered';\n\n\tif (smallScreen && isOpened) {\n\t\tscrollPosition = document.documentElement.scrollTop;\n\t\tdocument.body.classList.add('rc-livechat-mobile-full-screen');\n\t} else {\n\t\tdocument.body.classList.remove('rc-livechat-mobile-full-screen');\n\t\tif (smallScreen) {\n\t\t\tdocument.documentElement.scrollTop = scrollPosition;\n\t\t}\n\t}\n\n\tif (isOpened) {\n\t\twidget.style.left = isFullscreen ? '0' : 'auto';\n\n\t\t/**\n\t\t * If we use widget.style.height = smallScreen ? '100vh' : ...\n\t\t * In above case some browser's viewport height is not rendered correctly\n\t\t * so, as 100vh will resolve to 100% of the current viewport height,\n\t\t * so fixed it to 100% avoiding problem for some browsers. Similar resolution\n\t\t * for widget.style.width\n\t\t */\n\n\t\twidget.style.height = isFullscreen ? '100%' : `${WIDGET_MARGIN + widgetHeight + WIDGET_MARGIN + WIDGET_MINIMIZED_HEIGHT}px`;\n\t\twidget.style.width = isFullscreen ? '100%' : `${WIDGET_MARGIN + WIDGET_OPEN_WIDTH + WIDGET_MARGIN}px`;\n\t} else {\n\t\twidget.style.left = 'auto';\n\t\twidget.style.width = `${WIDGET_MARGIN + WIDGET_MINIMIZED_WIDTH + WIDGET_MARGIN}px`;\n\t\twidget.style.height = `${WIDGET_MARGIN + WIDGET_MINIMIZED_HEIGHT + WIDGET_MARGIN}px`;\n\t}\n};\n\nconst createWidget = (url: string) => {\n\twidget = document.createElement('div');\n\twidget.className = 'rocketchat-widget';\n\twidget.style.position = 'fixed';\n\twidget.style.width = `${WIDGET_MARGIN + WIDGET_MINIMIZED_WIDTH + WIDGET_MARGIN}px`;\n\twidget.style.height = `${WIDGET_MARGIN + WIDGET_MINIMIZED_HEIGHT + WIDGET_MARGIN}px`;\n\twidget.style.maxHeight = '100vh';\n\twidget.style.bottom = '0';\n\twidget.style.left = '0';\n\twidget.style.zIndex = '12345';\n\twidget.dataset.state = 'closed';\n\n\tconst container = document.createElement('div');\n\tcontainer.className = 'rocketchat-container';\n\tcontainer.style.width = '100%';\n\tcontainer.style.height = '100%';\n\n\tiframe = document.createElement('iframe');\n\tiframe.id = 'rocketchat-iframe';\n\tiframe.src = url;\n\tiframe.style.width = '100%';\n\tiframe.style.height = '100%';\n\tiframe.style.border = 'none';\n\tiframe.style.backgroundColor = 'transparent';\n\n\tcontainer.appendChild(iframe);\n\twidget.appendChild(container);\n\tdocument.body.appendChild(widget);\n\n\tconst handleMediaQueryTest = ({ matches }: { matches: boolean }) => {\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\n\t\tsmallScreen = matches;\n\t\tupdateWidgetStyle(widget.dataset.state === 'opened');\n\t\tcallHook('setExpanded', smallScreen);\n\t\tcallHook('setParentUrl', window.location.href);\n\t};\n\n\tconst mediaQueryList = window.matchMedia('screen and (max-device-width: 480px)');\n\tmediaQueryList.addListener(handleMediaQueryTest);\n\thandleMediaQueryTest(mediaQueryList);\n};\n\nconst openWidget = () => {\n\tif (!iframe || !widget) {\n\t\tthrow new Error('Widget is not initialized');\n\t}\n\n\tif (widget.dataset.state === 'opened') {\n\t\treturn;\n\t}\n\n\twidgetHeight = WIDGET_OPEN_HEIGHT;\n\twidget.dataset.state = 'opened';\n\tupdateWidgetStyle(true);\n\tiframe.focus();\n\temitCallback('chat-maximized');\n};\n\nconst setWidgetPosition = (position: 'left' | 'right' = 'right') => {\n\tif (!widget) {\n\t\tthrow new Error('Widget is not initialized');\n\t}\n\n\twidget.style.left = position === 'left' ? '0' : 'auto';\n\twidget.style.right = position !== 'left' ? '0' : 'auto';\n};\n\nconst resizeWidget = (height: number) => {\n\tif (!widget) {\n\t\tthrow new Error('Widget is not initialized');\n\t}\n\twidgetHeight = height;\n\twidget.dataset.state = 'triggered';\n\tupdateWidgetStyle(true);\n};\n\nfunction closeWidget() {\n\tif (!iframe || !widget) {\n\t\tthrow new Error('Widget is not initialized');\n\t}\n\n\tif (widget.dataset.state === 'closed') {\n\t\treturn;\n\t}\n\n\twidget.dataset.state = 'closed';\n\tupdateWidgetStyle(false);\n\temitCallback('chat-minimized');\n}\n\nfunction pageVisited(change: string) {\n\tcallHook('pageVisited', {\n\t\tchange,\n\t\tlocation: JSON.parse(JSON.stringify(document.location)),\n\t\ttitle: document.title,\n\t});\n}\n\nfunction setCustomField(key: string, value = '', overwrite = true) {\n\tif (typeof overwrite === 'undefined') {\n\t\toverwrite = true;\n\t}\n\tif (!key) {\n\t\treturn;\n\t}\n\n\tcallHook('setCustomField', key, value, overwrite);\n}\n\nfunction setCustomFields(fields: [key: string, value: string, overwrite?: boolean][]) {\n\tif (!Array.isArray(fields)) {\n\t\tconsole.log('Error: Invalid parameters. Value must be an array of objects');\n\t\treturn;\n\t}\n\n\tfields.forEach(([key, value, overwrite = true]) => {\n\t\tsetCustomField(key, value, overwrite);\n\t});\n}\n\nfunction setTheme(theme: StoreState['iframe']['theme']) {\n\tif (theme?.position !== 'left' && theme?.position !== 'right') {\n\t\tif (theme?.position) {\n\t\t\tconsole.warn(`Error: Position \"${theme?.position}\" is invalid. It must be \"left\" or \"right\"`);\n\t\t}\n\n\t\tdelete theme.position;\n\t}\n\n\tcallHook('setTheme', theme);\n}\n\nfunction setDepartment(department: string) {\n\tcallHook('setDepartment', department);\n}\n\nfunction setBusinessUnit(businessUnit: string) {\n\tcallHook('setBusinessUnit', businessUnit);\n}\n\nfunction clearBusinessUnit() {\n\tcallHook('clearBusinessUnit');\n}\n\nfunction setGuestToken(token: string) {\n\tcallHook('setGuestToken', token);\n}\n\nfunction setGuestName(name: string) {\n\tcallHook('setGuestName', name);\n}\n\nfunction setGuestEmail(email: string) {\n\tcallHook('setGuestEmail', email);\n}\n\nfunction registerGuest(guest: StoreState['guest']) {\n\tcallHook('registerGuest', guest);\n}\n\nfunction clearDepartment() {\n\tcallHook('clearDepartment');\n}\n\nfunction setAgent(agent: StoreState['defaultAgent']) {\n\tcallHook('setAgent', agent);\n}\n\nfunction setLanguage(lang: string) {\n\tcallHook('setLanguage', lang);\n}\n\nfunction showWidget() {\n\tcallHook('showWidget');\n\temitCallback('show-widget');\n}\n\nfunction hideWidget() {\n\tcallHook('hideWidget');\n\temitCallback('hide-widget');\n}\n\nfunction maximizeWidget() {\n\tcallHook('maximizeWidget');\n\temitCallback('chat-maximized');\n}\n\nfunction minimizeWidget() {\n\tcallHook('minimizeWidget');\n\temitCallback('chat-minimized');\n}\n\nfunction setParentUrl(url: string) {\n\tcallHook('setParentUrl', url);\n}\n\nfunction transferChat(department: string) {\n\tcallHook('transferChat', department);\n}\n\nfunction setGuestMetadata(metadata: StoreState['iframe']['guestMetadata']) {\n\tif (typeof metadata !== 'object') {\n\t\tthrow new Error('Invalid metadata');\n\t}\n\n\tcallHook('setGuestMetadata', metadata);\n}\n\nfunction setHiddenSystemMessages(hidden: StoreState['iframe']['hiddenSystemMessages']) {\n\tif (!Array.isArray(hidden)) {\n\t\tthrow new Error('Error: Invalid parameters. Value must be an array of strings');\n\t}\n\n\tconst hiddenSystemMessages = hidden.filter((h) => {\n\t\tif (VALID_SYSTEM_MESSAGES.includes(h)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconsole.warn(`Error: Invalid system message \"${h}\"`);\n\t\treturn false;\n\t});\n\n\tcallHook('setHiddenSystemMessages', hiddenSystemMessages);\n}\n\nfunction initialize(initParams: Partial<InitializeParams>) {\n\tfor (const initKey in initParams) {\n\t\tif (!initParams.hasOwnProperty(initKey)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst params = initParams[initKey as keyof InitializeParams];\n\n\t\tif (!isDefined(params)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tswitch (initKey) {\n\t\t\tcase 'customField':\n\t\t\t\tsetCustomField(...(params as InitializeParams['customField']));\n\t\t\t\tcontinue;\n\t\t\tcase 'setCustomFields':\n\t\t\t\tsetCustomFields(params as InitializeParams['setCustomFields']);\n\t\t\t\tcontinue;\n\t\t\tcase 'theme':\n\t\t\t\tsetTheme(params as InitializeParams['theme']);\n\t\t\t\tcontinue;\n\t\t\tcase 'department':\n\t\t\t\tsetDepartment(params as InitializeParams['department']);\n\t\t\t\tcontinue;\n\t\t\tcase 'businessUnit':\n\t\t\t\tsetBusinessUnit(params as InitializeParams['businessUnit']);\n\t\t\t\tcontinue;\n\t\t\tcase 'guestToken':\n\t\t\t\tsetGuestToken(params as InitializeParams['guestToken']);\n\t\t\t\tcontinue;\n\t\t\tcase 'guestName':\n\t\t\t\tsetGuestName(params as InitializeParams['guestName']);\n\t\t\t\tcontinue;\n\t\t\tcase 'guestEmail':\n\t\t\t\tsetGuestEmail(params as InitializeParams['guestEmail']);\n\t\t\t\tcontinue;\n\t\t\tcase 'registerGuest':\n\t\t\t\tregisterGuest(params as InitializeParams['registerGuest']);\n\t\t\t\tcontinue;\n\t\t\tcase 'language':\n\t\t\t\tsetLanguage(params as InitializeParams['language']);\n\t\t\t\tcontinue;\n\t\t\tcase 'agent':\n\t\t\t\tsetAgent(params as InitializeParams['agent']);\n\t\t\t\tcontinue;\n\t\t\tcase 'parentUrl':\n\t\t\t\tsetParentUrl(params as InitializeParams['parentUrl']);\n\t\t\t\tcontinue;\n\t\t\tcase 'setGuestMetadata':\n\t\t\t\tsetGuestMetadata(params as InitializeParams['setGuestMetadata']);\n\t\t\t\tcontinue;\n\t\t\tcase 'hiddenSystemMessages':\n\t\t\t\tsetHiddenSystemMessages(params as InitializeParams['hiddenSystemMessages']);\n\t\t\t\tcontinue;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t}\n}\n\nconst api: InternalWidgetAPI = {\n\tpopup: null,\n\n\topenWidget,\n\n\tresizeWidget,\n\n\tready() {\n\t\tready = true;\n\t\tprocessHookQueue();\n\t},\n\n\tminimizeWindow() {\n\t\tcloseWidget();\n\t},\n\n\trestoreWindow() {\n\t\tif (api.popup && api.popup.closed !== true) {\n\t\t\tapi.popup.close();\n\t\t\tapi.popup = null;\n\t\t}\n\t\topenWidget();\n\t},\n\n\topenPopout() {\n\t\tcloseWidget();\n\t\tif (!config.url) {\n\t\t\tthrow new Error('Config.url is not set!');\n\t\t}\n\t\tapi.popup = window.open(\n\t\t\t`${config.url}${config.url.lastIndexOf('?') > -1 ? '&' : '?'}mode=popout`,\n\t\t\t'livechat-popout',\n\t\t\t`width=${WIDGET_OPEN_WIDTH}, height=${widgetHeight}, toolbars=no`,\n\t\t);\n\t\tapi.popup?.focus();\n\t},\n\n\tremoveWidget() {\n\t\tdocument.body.removeChild(widget as Node);\n\t},\n\n\tcallback(eventName, data) {\n\t\temitCallback(eventName, data);\n\t},\n\n\tshowWidget() {\n\t\tif (!iframe) {\n\t\t\tthrow new Error('Widget is not initialized');\n\t\t}\n\t\tiframe.style.display = 'initial';\n\t\temitCallback('show-widget');\n\t},\n\n\thideWidget() {\n\t\tif (!iframe) {\n\t\t\tthrow new Error('Widget is not initialized');\n\t\t}\n\t\tiframe.style.display = 'none';\n\t\temitCallback('hide-widget');\n\t},\n\n\tresetDocumentStyle() {\n\t\tdocument.body.classList.remove('rc-livechat-mobile-full-screen');\n\t},\n\n\tsetFullScreenDocumentMobile() {\n\t\tsmallScreen && document.body.classList.add('rc-livechat-mobile-full-screen');\n\t},\n\n\tsetWidgetPosition,\n};\n\nconst livechatWidgetAPI = {\n\t// initParams\n\tinitialize,\n\tpageVisited,\n\tsetCustomField,\n\tsetTheme,\n\tsetDepartment,\n\tclearDepartment,\n\tsetGuestToken,\n\tsetGuestName,\n\tsetGuestEmail,\n\tsetAgent,\n\tregisterGuest,\n\tsetLanguage,\n\tshowWidget,\n\thideWidget,\n\tmaximizeWidget,\n\tminimizeWidget,\n\tsetBusinessUnit,\n\tclearBusinessUnit,\n\tsetParentUrl,\n\tsetGuestMetadata,\n\tclearAllCallbacks,\n\tsetHiddenSystemMessages,\n\ttransferChat,\n\n\t// callbacks\n\tonChatMaximized(fn: () => void) {\n\t\tregisterCallback('chat-maximized', fn);\n\t},\n\tonChatMinimized(fn: () => void) {\n\t\tregisterCallback('chat-minimized', fn);\n\t},\n\tonChatStarted(fn: () => void) {\n\t\tregisterCallback('chat-started', fn);\n\t},\n\tonChatEnded(fn: () => void) {\n\t\tregisterCallback('chat-ended', fn);\n\t},\n\tonPrechatFormSubmit(\n\t\tfn: () => {\n\t\t\tname: string;\n\t\t\temail: string;\n\t\t\tdepartment?: string;\n\t\t},\n\t) {\n\t\tregisterCallback('pre-chat-form-submit', fn);\n\t},\n\tonOfflineFormSubmit(\n\t\tfn: () => {\n\t\t\tname: string;\n\t\t\temail: string;\n\t\t\tdepartment?: string;\n\t\t\tmessage: string;\n\t\t},\n\t) {\n\t\tregisterCallback('offline-form-submit', fn);\n\t},\n\tonWidgetShown(fn: () => void) {\n\t\tregisterCallback('show-widget', fn);\n\t},\n\tonWidgetHidden(fn: () => void) {\n\t\tregisterCallback('hide-widget', fn);\n\t},\n\tonAssignAgent(\n\t\tfn: () => {\n\t\t\tname: string | undefined;\n\t\t\tusername: string | undefined;\n\t\t\tstatus: UserStatus | undefined;\n\t\t},\n\t) {\n\t\tregisterCallback('assign-agent', fn);\n\t},\n\tonAgentStatusChange(\n\t\tfn: () => {\n\t\t\tname: string | undefined;\n\t\t\tusername: string | undefined;\n\t\t\tstatus: UserStatus | undefined;\n\t\t},\n\t) {\n\t\tregisterCallback('agent-status-change', fn);\n\t},\n\tonQueuePositionChange(fn: () => LivechatRoomEvents<'queueData' | 'agentData'>) {\n\t\tregisterCallback('queue-position-change', fn);\n\t},\n\tonServiceOffline(fn: () => void) {\n\t\tregisterCallback('no-agent-online', fn);\n\t},\n};\n\nconst currentPage: { href: string | null; title: string | null } = {\n\thref: null,\n\ttitle: null,\n};\n\nfunction onNewMessage(event: MessageEvent<LivechatMessageEventData<Omit<InternalWidgetAPI, 'popup'>>>) {\n\tif (event.source === event.target) {\n\t\treturn;\n\t}\n\n\tif (!event.data || typeof event.data !== 'object') {\n\t\treturn;\n\t}\n\n\tif (!event.data.src || event.data.src !== 'rocketchat') {\n\t\treturn;\n\t}\n\n\tconst { fn, args } = event.data;\n\n\tif (!api.hasOwnProperty(fn)) {\n\t\treturn;\n\t}\n\n\t// There is an existing issue with overload resolution with type union arguments please see https://github.com/microsoft/TypeScript/issues/14107\n\t// @ts-expect-error: A spread argument must either have a tuple type or be passed to a rest parameter\n\tapi[fn](...args);\n}\n\nconst attachMessageListener = () => {\n\twindow.addEventListener('message', onNewMessage, false);\n};\n\nconst trackNavigation = () => {\n\tsetInterval(() => {\n\t\tif (document.location.href !== currentPage.href) {\n\t\t\tpageVisited('url');\n\t\t\tcurrentPage.href = document.location.href;\n\t\t}\n\n\t\tif (document.title !== currentPage.title) {\n\t\t\tpageVisited('title');\n\t\t\tcurrentPage.title = document.title;\n\t\t}\n\t}, 800);\n};\n\nconst init = (url: string) => {\n\tconst trimmedUrl = url.trim();\n\tif (!trimmedUrl) {\n\t\treturn;\n\t}\n\n\tconfig.url = trimmedUrl;\n\n\tcreateWidget(trimmedUrl);\n\tattachMessageListener();\n\ttrackNavigation();\n};\n\nif (typeof window.initRocket !== 'undefined') {\n\tconsole.warn('initRocket is now deprecated. Please update the livechat code.');\n\tinit(window.initRocket[0]);\n}\n\nif (typeof window.RocketChat.url !== 'undefined') {\n\tinit(window.RocketChat.url);\n}\n\nconst queue = window.RocketChat._;\n\nwindow.RocketChat._.push = function (c: () => void) {\n\tc.call(window.RocketChat.livechat);\n};\n\nwindow.RocketChat = window.RocketChat._.push;\n\n// exports\nwindow.RocketChat.livechat = livechatWidgetAPI;\n\n// proccess queue\nqueue.forEach((c: () => void) => {\n\tc.call(window.RocketChat.livechat);\n});\n","export function isDefined<T>(val: T | undefined | null): val is T {\n\treturn val !== undefined && val !== null;\n}\n"],"names":["t","e","n","Symbol","o","r","this","Map","WeakMap","prototype","events","Array","from","keys","has","on","i","get","push","set","off","once","s","delete","splice","findIndex","length","emit","arguments","f","slice","call","concat","forEach","window","RocketChat","_","widget","iframe","scrollPosition","widgetHeight","config","hookQueue","ready","smallScreen","VALID_CALLBACKS","VALID_SYSTEM_MESSAGES","callbacks","Emitter","registerCallback","eventName","fn","indexOf","emitCallback","data","callHook","action","_iframe","_iframe$contentWindow","_len","params","_key","contentWindow","Error","src","args","postMessage","updateWidgetStyle","isOpened","isFullscreen","dataset","state","document","documentElement","scrollTop","body","classList","add","remove","style","left","height","width","WIDGET_MARGIN","openWidget","focus","closeWidget","pageVisited","change","location","JSON","parse","stringify","title","setCustomField","key","value","overwrite","setTheme","theme","position","console","warn","setDepartment","department","setBusinessUnit","businessUnit","setGuestToken","token","setGuestName","name","setGuestEmail","email","registerGuest","guest","setAgent","agent","setLanguage","lang","setParentUrl","url","setGuestMetadata","metadata","setHiddenSystemMessages","hidden","isArray","filter","h","includes","api","popup","resizeWidget","_ref","_ref$","apply","minimizeWindow","restoreWindow","closed","close","openPopout","_api$popup","open","lastIndexOf","removeWidget","removeChild","callback","showWidget","display","hideWidget","resetDocumentStyle","setFullScreenDocumentMobile","setWidgetPosition","right","livechatWidgetAPI","initialize","initParams","initKey","hasOwnProperty","val","fields","_ref3","_ref3$","log","clearDepartment","maximizeWidget","minimizeWidget","clearBusinessUnit","clearAllCallbacks","transferChat","onChatMaximized","onChatMinimized","onChatStarted","onChatEnded","onPrechatFormSubmit","onOfflineFormSubmit","onWidgetShown","onWidgetHidden","onAssignAgent","onAgentStatusChange","onQueuePositionChange","onServiceOffline","currentPage","href","onNewMessage","event","source","target","_event$data","init","trimmedUrl","trim","createElement","className","maxHeight","bottom","zIndex","container","id","border","backgroundColor","appendChild","handleMediaQueryTest","_ref2","matches","mediaQueryList","matchMedia","addListener","createWidget","addEventListener","setInterval","initRocket","queue","c","livechat"],"sourceRoot":""}