{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/AutoCompleteAgentWithoutExtension.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/components/AutoCompleteAgentWithoutExtension.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/AutoCompleteAgentWithoutExtension.tsx","inputSourceMap":{"version":3,"file":"client/components/AutoCompleteAgentWithoutExtension.tsx","sourceRoot":"","sources":["client/components/AutoCompleteAgentWithoutExtension.tsx"],"names":[],"mappings":"AACA,OAAO,EAAE,uBAAuB,EAAE,MAAM,uBAAuB,CAAC;AAChE,OAAO,EAAE,iBAAiB,EAAE,MAAM,6BAA6B,CAAC;AAChE,OAAO,KAAK,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAEvD,OAAO,EAAE,aAAa,EAAE,MAAM,8BAA8B,CAAC;AAC7D,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AACpD,OAAO,EAAE,sBAAsB,EAAE,MAAM,4CAA4C,CAAC;AASpF,MAAM,iCAAiC,GAAG,CAAC,KAA6B,EAAE,EAAE;IAC3E,MAAM,EAAE,KAAK,EAAE,gBAAgB,EAAE,QAAQ,GAAG,GAAS,EAAE,CAAC,SAAS,EAAE,OAAO,GAAG,KAAK,EAAE,GAAG,KAAK,CAAC;IAC7F,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,QAAQ,CAA8B,EAAE,CAAC,CAAC;IAElF,MAAM,qBAAqB,GAAG,iBAAiB,CAAC,YAAsB,EAAE,GAAG,CAAC,CAAC;IAE7E,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,aAAa,EAAE,cAAc,EAAE,GAAG,sBAAsB,CACtF,OAAO,CACN,GAAG,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,qBAAqB,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,OAAO,EAAE,CAAC,EACpF,CAAC,gBAAgB,EAAE,qBAAqB,EAAE,OAAO,CAAC,CAClD,CACD,CAAC;IACF,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,WAAW,EAAE,GAAG,aAAa,CAAC,UAAU,CAAC,CAAC;IACrG,MAAM,YAAY,GAAG,WAAW;SAC9B,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;QACd,IAAI,KAAK,KAAK,KAAK,EAAE,CAAC;YACrB,OAAO,CAAC,CAAC,CAAC;QACX,CAAC;QAED,IAAI,CAAC,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC,EAAE,QAAQ,IAAI,EAAE,CAAC,EAAE,CAAC;YACnD,OAAO,CAAC,CAAC;QACV,CAAC;QACD,IAAI,CAAC,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC,EAAE,QAAQ,IAAI,EAAE,CAAC,EAAE,CAAC;YACnD,OAAO,CAAC,CAAC,CAAC;QACX,CAAC;QAED,OAAO,CAAC,CAAC;IACV,CAAC,CAAC;SACD,GAAG,CAAC,CAAC,KAAK,EAAqD,EAAE,CAAC,CAAC;QACnE,GAAG,KAAK;QACR,KAAK,EAAE,KAAK,EAAE,QAAQ,IAAI,EAAE;QAC5B,KAAK,EAAE,KAAK,EAAE,QAAQ,IAAI,EAAE;KAC5B,CAAC,CAAC,CAAC;IAEL,OAAO,CACN,CAAC,uBAAuB,CACvB,KAAK,CAAC,CAAC,KAAK,CAAC,CACb,QAAQ,CAAC,CAAC,QAAQ,CAAC,CACnB,UAAU,CAAC,CAAC,CAAC,CAAC,CACd,MAAM,CAAC,CAAC,YAAkC,CAAC,CAC3C,SAAS,CAAC,CAAC,eAAe,CAAC,CAC3B,OAAO,CAAC,CAAC,YAAY,CAAC,CACtB,UAAU,CAAC,CACV,WAAW,KAAK,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,GAAS,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,EAAQ,EAAE,CAAC,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,WAAW,CAAC,CACnI,CAAC,EACA,CACF,CAAC;AACH,CAAC,CAAC;AAEF,eAAe,IAAI,CAAC,iCAAiC,CAAC,CAAC","sourcesContent":["import type { ILivechatAgent } from '@rocket.chat/core-typings';\nimport { PaginatedSelectFiltered } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport { useRecordList } from '../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../lib/asyncState';\nimport { useAvailableAgentsList } from './Omnichannel/hooks/useAvailableAgentsList';\n\ntype AutoCompleteAgentProps = {\n\tonChange: (value: string) => void;\n\thaveAll?: boolean;\n\tvalue?: string;\n\tcurrentExtension?: string;\n};\n\nconst AutoCompleteAgentWithoutExtension = (props: AutoCompleteAgentProps) => {\n\tconst { value, currentExtension, onChange = (): void => undefined, haveAll = false } = props;\n\tconst [agentsFilter, setAgentsFilter] = useState<string | number | undefined>('');\n\n\tconst debouncedAgentsFilter = useDebouncedValue(agentsFilter as string, 500);\n\n\tconst { itemsList: AgentsList, loadMoreItems: loadMoreAgents } = useAvailableAgentsList(\n\t\tuseMemo(\n\t\t\t() => ({ text: debouncedAgentsFilter, includeExtension: currentExtension, haveAll }),\n\t\t\t[currentExtension, debouncedAgentsFilter, haveAll],\n\t\t),\n\t);\n\tconst { phase: agentsPhase, items: agentsItems, itemCount: agentsTotal } = useRecordList(AgentsList);\n\tconst sortedByName = agentsItems\n\t\t.sort((a, b) => {\n\t\t\tif (value === 'all') {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tif (a?.username?.localeCompare(b?.username || '')) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (b?.username?.localeCompare(b?.username || '')) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t})\n\t\t.map((agent): ILivechatAgent & { label: string; value: string } => ({\n\t\t\t...agent,\n\t\t\tlabel: agent?.username || '',\n\t\t\tvalue: agent?.username || '',\n\t\t}));\n\n\treturn (\n\t\t<PaginatedSelectFiltered\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tflexShrink={0}\n\t\t\tfilter={agentsFilter as string | undefined}\n\t\t\tsetFilter={setAgentsFilter}\n\t\t\toptions={sortedByName}\n\t\t\tendReached={\n\t\t\t\tagentsPhase === AsyncStatePhase.LOADING ? (): void => undefined : (start): void => loadMoreAgents(start, Math.min(50, agentsTotal))\n\t\t\t}\n\t\t/>\n\t);\n};\n\nexport default memo(AutoCompleteAgentWithoutExtension);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/AutoCompleteAgentWithoutExtension.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/components/AutoCompleteAgentWithoutExtension.tsx","inputSourceMap":{"version":3,"file":"client/components/AutoCompleteAgentWithoutExtension.tsx","sourceRoot":"","sources":["client/components/AutoCompleteAgentWithoutExtension.tsx"],"names":[],"mappings":"AACA,OAAO,EAAE,uBAAuB,EAAE,MAAM,uBAAuB,CAAC;AAChE,OAAO,EAAE,iBAAiB,EAAE,MAAM,6BAA6B,CAAC;AAChE,OAAO,KAAK,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAEvD,OAAO,EAAE,aAAa,EAAE,MAAM,8BAA8B,CAAC;AAC7D,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AACpD,OAAO,EAAE,sBAAsB,EAAE,MAAM,4CAA4C,CAAC;AASpF,MAAM,iCAAiC,GAAG,CAAC,KAA6B,EAAE,EAAE;IAC3E,MAAM,EAAE,KAAK,EAAE,gBAAgB,EAAE,QAAQ,GAAG,GAAS,EAAE,CAAC,SAAS,EAAE,OAAO,GAAG,KAAK,EAAE,GAAG,KAAK,CAAC;IAC7F,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,QAAQ,CAA8B,EAAE,CAAC,CAAC;IAElF,MAAM,qBAAqB,GAAG,iBAAiB,CAAC,YAAsB,EAAE,GAAG,CAAC,CAAC;IAE7E,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,aAAa,EAAE,cAAc,EAAE,GAAG,sBAAsB,CACtF,OAAO,CACN,GAAG,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,qBAAqB,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,OAAO,EAAE,CAAC,EACpF,CAAC,gBAAgB,EAAE,qBAAqB,EAAE,OAAO,CAAC,CAClD,CACD,CAAC;IACF,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,WAAW,EAAE,GAAG,aAAa,CAAC,UAAU,CAAC,CAAC;IACrG,MAAM,YAAY,GAAG,WAAW;SAC9B,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;QACd,IAAI,KAAK,KAAK,KAAK,EAAE,CAAC;YACrB,OAAO,CAAC,CAAC,CAAC;QACX,CAAC;QAED,IAAI,CAAC,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC,EAAE,QAAQ,IAAI,EAAE,CAAC,EAAE,CAAC;YACnD,OAAO,CAAC,CAAC;QACV,CAAC;QACD,IAAI,CAAC,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC,EAAE,QAAQ,IAAI,EAAE,CAAC,EAAE,CAAC;YACnD,OAAO,CAAC,CAAC,CAAC;QACX,CAAC;QAED,OAAO,CAAC,CAAC;IACV,CAAC,CAAC;SACD,GAAG,CAAC,CAAC,KAAK,EAAqD,EAAE,CAAC,CAAC;QACnE,GAAG,KAAK;QACR,KAAK,EAAE,KAAK,EAAE,QAAQ,IAAI,EAAE;QAC5B,KAAK,EAAE,KAAK,EAAE,QAAQ,IAAI,EAAE;KAC5B,CAAC,CAAC,CAAC;IAEL,OAAO,CACN,CAAC,uBAAuB,CACvB,KAAK,CAAC,CAAC,KAAK,CAAC,CACb,QAAQ,CAAC,CAAC,QAAQ,CAAC,CACnB,UAAU,CAAC,CAAC,CAAC,CAAC,CACd,MAAM,CAAC,CAAC,YAAkC,CAAC,CAC3C,SAAS,CAAC,CAAC,eAAe,CAAC,CAC3B,OAAO,CAAC,CAAC,YAAY,CAAC,CACtB,UAAU,CAAC,CACV,WAAW,KAAK,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,GAAS,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,EAAQ,EAAE,CAAC,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,WAAW,CAAC,CACnI,CAAC,EACA,CACF,CAAC;AACH,CAAC,CAAC;AAEF,eAAe,IAAI,CAAC,iCAAiC,CAAC,CAAC","sourcesContent":["import type { ILivechatAgent } from '@rocket.chat/core-typings';\nimport { PaginatedSelectFiltered } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport { useRecordList } from '../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../lib/asyncState';\nimport { useAvailableAgentsList } from './Omnichannel/hooks/useAvailableAgentsList';\n\ntype AutoCompleteAgentProps = {\n\tonChange: (value: string) => void;\n\thaveAll?: boolean;\n\tvalue?: string;\n\tcurrentExtension?: string;\n};\n\nconst AutoCompleteAgentWithoutExtension = (props: AutoCompleteAgentProps) => {\n\tconst { value, currentExtension, onChange = (): void => undefined, haveAll = false } = props;\n\tconst [agentsFilter, setAgentsFilter] = useState<string | number | undefined>('');\n\n\tconst debouncedAgentsFilter = useDebouncedValue(agentsFilter as string, 500);\n\n\tconst { itemsList: AgentsList, loadMoreItems: loadMoreAgents } = useAvailableAgentsList(\n\t\tuseMemo(\n\t\t\t() => ({ text: debouncedAgentsFilter, includeExtension: currentExtension, haveAll }),\n\t\t\t[currentExtension, debouncedAgentsFilter, haveAll],\n\t\t),\n\t);\n\tconst { phase: agentsPhase, items: agentsItems, itemCount: agentsTotal } = useRecordList(AgentsList);\n\tconst sortedByName = agentsItems\n\t\t.sort((a, b) => {\n\t\t\tif (value === 'all') {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tif (a?.username?.localeCompare(b?.username || '')) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (b?.username?.localeCompare(b?.username || '')) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t})\n\t\t.map((agent): ILivechatAgent & { label: string; value: string } => ({\n\t\t\t...agent,\n\t\t\tlabel: agent?.username || '',\n\t\t\tvalue: agent?.username || '',\n\t\t}));\n\n\treturn (\n\t\t<PaginatedSelectFiltered\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tflexShrink={0}\n\t\t\tfilter={agentsFilter as string | undefined}\n\t\t\tsetFilter={setAgentsFilter}\n\t\t\toptions={sortedByName}\n\t\t\tendReached={\n\t\t\t\tagentsPhase === AsyncStatePhase.LOADING ? (): void => undefined : (start): void => loadMoreAgents(start, Math.min(50, agentsTotal))\n\t\t\t}\n\t\t/>\n\t);\n};\n\nexport default memo(AutoCompleteAgentWithoutExtension);\n"]}}},"code":"let _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 0);\nlet PaginatedSelectFiltered;\nmodule.link(\"@rocket.chat/fuselage\", {\n  PaginatedSelectFiltered(v) {\n    PaginatedSelectFiltered = v;\n  }\n}, 0);\nlet useDebouncedValue;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useDebouncedValue(v) {\n    useDebouncedValue = v;\n  }\n}, 1);\nlet React, memo, useMemo, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  memo(v) {\n    memo = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  },\n  useState(v) {\n    useState = v;\n  }\n}, 2);\nlet useRecordList;\nmodule.link(\"../hooks/lists/useRecordList\", {\n  useRecordList(v) {\n    useRecordList = v;\n  }\n}, 3);\nlet AsyncStatePhase;\nmodule.link(\"../lib/asyncState\", {\n  AsyncStatePhase(v) {\n    AsyncStatePhase = v;\n  }\n}, 4);\nlet useAvailableAgentsList;\nmodule.link(\"./Omnichannel/hooks/useAvailableAgentsList\", {\n  useAvailableAgentsList(v) {\n    useAvailableAgentsList = v;\n  }\n}, 5);\nconst AutoCompleteAgentWithoutExtension = props => {\n  const {\n    value,\n    currentExtension,\n    onChange = () => undefined,\n    haveAll = false\n  } = props;\n  const [agentsFilter, setAgentsFilter] = useState('');\n  const debouncedAgentsFilter = useDebouncedValue(agentsFilter, 500);\n  const {\n    itemsList: AgentsList,\n    loadMoreItems: loadMoreAgents\n  } = useAvailableAgentsList(useMemo(() => ({\n    text: debouncedAgentsFilter,\n    includeExtension: currentExtension,\n    haveAll\n  }), [currentExtension, debouncedAgentsFilter, haveAll]));\n  const {\n    phase: agentsPhase,\n    items: agentsItems,\n    itemCount: agentsTotal\n  } = useRecordList(AgentsList);\n  const sortedByName = agentsItems.sort((a, b) => {\n    var _a$username, _b$username;\n    if (value === 'all') {\n      return -1;\n    }\n    if (a !== null && a !== void 0 && (_a$username = a.username) !== null && _a$username !== void 0 && _a$username.localeCompare((b === null || b === void 0 ? void 0 : b.username) || '')) {\n      return 1;\n    }\n    if (b !== null && b !== void 0 && (_b$username = b.username) !== null && _b$username !== void 0 && _b$username.localeCompare((b === null || b === void 0 ? void 0 : b.username) || '')) {\n      return -1;\n    }\n    return 0;\n  }).map(agent => _objectSpread(_objectSpread({}, agent), {}, {\n    label: (agent === null || agent === void 0 ? void 0 : agent.username) || '',\n    value: (agent === null || agent === void 0 ? void 0 : agent.username) || ''\n  }));\n  return /*#__PURE__*/React.createElement(PaginatedSelectFiltered, {\n    value: value,\n    onChange: onChange,\n    flexShrink: 0,\n    filter: agentsFilter,\n    setFilter: setAgentsFilter,\n    options: sortedByName,\n    endReached: agentsPhase === AsyncStatePhase.LOADING ? () => undefined : start => loadMoreAgents(start, Math.min(50, agentsTotal))\n  });\n};\nmodule.exportDefault( /*#__PURE__*/memo(AutoCompleteAgentWithoutExtension));","map":{"version":3,"names":["_objectSpread","module","link","default","v","PaginatedSelectFiltered","useDebouncedValue","React","memo","useMemo","useState","useRecordList","AsyncStatePhase","useAvailableAgentsList","AutoCompleteAgentWithoutExtension","props","value","currentExtension","onChange","undefined","haveAll","agentsFilter","setAgentsFilter","debouncedAgentsFilter","itemsList","AgentsList","loadMoreItems","loadMoreAgents","text","includeExtension","phase","agentsPhase","items","agentsItems","itemCount","agentsTotal","sortedByName","sort","a","b","_a$username","_b$username","username","localeCompare","map","agent","label","createElement","flexShrink","filter","setFilter","options","endReached","LOADING","start","Math","min","exportDefault"],"sources":["client/components/AutoCompleteAgentWithoutExtension.tsx"],"sourcesContent":["import type { ILivechatAgent } from '@rocket.chat/core-typings';\nimport { PaginatedSelectFiltered } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport { useRecordList } from '../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../lib/asyncState';\nimport { useAvailableAgentsList } from './Omnichannel/hooks/useAvailableAgentsList';\n\ntype AutoCompleteAgentProps = {\n\tonChange: (value: string) => void;\n\thaveAll?: boolean;\n\tvalue?: string;\n\tcurrentExtension?: string;\n};\n\nconst AutoCompleteAgentWithoutExtension = (props: AutoCompleteAgentProps) => {\n\tconst { value, currentExtension, onChange = (): void => undefined, haveAll = false } = props;\n\tconst [agentsFilter, setAgentsFilter] = useState<string | number | undefined>('');\n\n\tconst debouncedAgentsFilter = useDebouncedValue(agentsFilter as string, 500);\n\n\tconst { itemsList: AgentsList, loadMoreItems: loadMoreAgents } = useAvailableAgentsList(\n\t\tuseMemo(\n\t\t\t() => ({ text: debouncedAgentsFilter, includeExtension: currentExtension, haveAll }),\n\t\t\t[currentExtension, debouncedAgentsFilter, haveAll],\n\t\t),\n\t);\n\tconst { phase: agentsPhase, items: agentsItems, itemCount: agentsTotal } = useRecordList(AgentsList);\n\tconst sortedByName = agentsItems\n\t\t.sort((a, b) => {\n\t\t\tif (value === 'all') {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tif (a?.username?.localeCompare(b?.username || '')) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (b?.username?.localeCompare(b?.username || '')) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t})\n\t\t.map((agent): ILivechatAgent & { label: string; value: string } => ({\n\t\t\t...agent,\n\t\t\tlabel: agent?.username || '',\n\t\t\tvalue: agent?.username || '',\n\t\t}));\n\n\treturn (\n\t\t<PaginatedSelectFiltered\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tflexShrink={0}\n\t\t\tfilter={agentsFilter as string | undefined}\n\t\t\tsetFilter={setAgentsFilter}\n\t\t\toptions={sortedByName}\n\t\t\tendReached={\n\t\t\t\tagentsPhase === AsyncStatePhase.LOADING ? (): void => undefined : (start): void => loadMoreAgents(start, Math.min(50, agentsTotal))\n\t\t\t}\n\t\t/>\n\t);\n};\n\nexport default memo(AutoCompleteAgentWithoutExtension);\n"],"mappings":"AACA,IAAAA,aAAS;AAAAC,MAAA,CAAAC,IAAA,uCAAuD;EAAAC,QAAAC,CAAA;IAAAJ,aAAA,GAAAI,CAAA;EAAA;AAAA;AAAhE,IAAAC,uBAAS;AAAAJ,MAAyB,CAAAC,IAAA,CAAM,uBAAuB,EAAC;EAAAG,wBAAAD,CAAA;IAAAC,uBAAA,GAAAD,CAAA;EAAA;AAAA;AAAA,IAAAE,iBAAA;AAAAL,MAAA,CAAAC,IAAA;EAAAI,kBAAAF,CAAA;IAAAE,iBAAA,GAAAF,CAAA;EAAA;AAAA;AAAA,IAAAG,KAAA,EAAAC,IAAA,EAAAC,OAAA,EAAAC,QAAA;AAAAT,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAAG,KAAA,GAAAH,CAAA;EAAA;EAAAI,KAAAJ,CAAA;IAAAI,IAAA,GAAAJ,CAAA;EAAA;EAAAK,QAAAL,CAAA;IAAAK,OAAA,GAAAL,CAAA;EAAA;EAAAM,SAAAN,CAAA;IAAAM,QAAA,GAAAN,CAAA;EAAA;AAAA;AAAA,IAAAO,aAAA;AAAAV,MAAA,CAAAC,IAAA;EAAAS,cAAAP,CAAA;IAAAO,aAAA,GAAAP,CAAA;EAAA;AAAA;AAAA,IAAAQ,eAAA;AAAAX,MAAA,CAAAC,IAAA;EAAAU,gBAAAR,CAAA;IAAAQ,eAAA,GAAAR,CAAA;EAAA;AAAA;AAAA,IAAAS,sBAAA;AAAAZ,MAAA,CAAAC,IAAA;EAAAW,uBAAAT,CAAA;IAAAS,sBAAA,GAAAT,CAAA;EAAA;AAAA;AAehE,MAAMU,iCAAiC,GAAIC,KAA6B,IAAI;EAC3E,MAAM;IAAEC,KAAK;IAAEC,gBAAgB;IAAEC,QAAQ,GAAGA,CAAA,KAAYC,SAAS;IAAEC,OAAO,GAAG;EAAK,CAAE,GAAGL,KAAK;EAC5F,MAAM,CAACM,YAAY,EAAEC,eAAe,CAAC,GAAGZ,QAAQ,CAA8B,EAAE,CAAC;EAEjF,MAAMa,qBAAqB,GAAGjB,iBAAiB,CAACe,YAAsB,EAAE,GAAG,CAAC;EAE5E,MAAM;IAAEG,SAAS,EAAEC,UAAU;IAAEC,aAAa,EAAEC;EAAc,CAAE,GAAGd,sBAAsB,CACtFJ,OAAO,CACN,OAAO;IAAEmB,IAAI,EAAEL,qBAAqB;IAAEM,gBAAgB,EAAEZ,gBAAgB;IAAEG;EAAO,CAAE,CAAC,EACpF,CAACH,gBAAgB,EAAEM,qBAAqB,EAAEH,OAAO,CAAC,CAClD,CACD;EACD,MAAM;IAAEU,KAAK,EAAEC,WAAW;IAAEC,KAAK,EAAEC,WAAW;IAAEC,SAAS,EAAEC;EAAW,CAAE,GAAGxB,aAAa,CAACc,UAAU,CAAC;EACpG,MAAMW,YAAY,GAAGH,WAAW,CAC9BI,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAI;IAAA,IAAAC,WAAA,EAAAC,WAAA;IACd,IAAIzB,KAAK,KAAK,KAAK,EAAE;MACpB,OAAO,CAAC,CAAC;IACV;IAEA,IAAIsB,CAAC,aAADA,CAAC,gBAAAE,WAAA,GAADF,CAAC,CAAEI,QAAQ,cAAAF,WAAA,eAAXA,WAAA,CAAaG,aAAa,CAAC,CAAAJ,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEG,QAAQ,KAAI,EAAE,CAAC,EAAE;MAClD,OAAO,CAAC;IACT;IACA,IAAIH,CAAC,aAADA,CAAC,gBAAAE,WAAA,GAADF,CAAC,CAAEG,QAAQ,cAAAD,WAAA,eAAXA,WAAA,CAAaE,aAAa,CAAC,CAAAJ,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEG,QAAQ,KAAI,EAAE,CAAC,EAAE;MAClD,OAAO,CAAC,CAAC;IACV;IAEA,OAAO,CAAC;EACT,CAAC,CAAC,CACDE,GAAG,CAAEC,KAAK,IAAA7C,aAAA,CAAAA,aAAA,KACP6C,KAAK;IACRC,KAAK,EAAE,CAAAD,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEH,QAAQ,KAAI,EAAE;IAC5B1B,KAAK,EAAE,CAAA6B,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEH,QAAQ,KAAI;EAAE,EAC3B,CAAC;EAEJ,oBACCnC,KAAA,CAAAwC,aAAA,CAAC1C,uBAAuB;IACvBW,KAAK,EAAEA,KAAM;IACbE,QAAQ,EAAEA,QAAS;IACnB8B,UAAU,EAAE,CAAE;IACdC,MAAM,EAAE5B,YAAmC;IAC3C6B,SAAS,EAAE5B,eAAgB;IAC3B6B,OAAO,EAAEf,YAAa;IACtBgB,UAAU,EACTrB,WAAW,KAAKnB,eAAe,CAACyC,OAAO,GAAG,MAAYlC,SAAS,GAAImC,KAAK,IAAW3B,cAAc,CAAC2B,KAAK,EAAEC,IAAI,CAACC,GAAG,CAAC,EAAE,EAAErB,WAAW,CAAC;EAClI,EACA;AAEJ,CAAC;AA9DDlC,MAAA,CAAOwD,aAAE,eAgEMjD,IAAI,CAACM,iCAAiC,CAhE5C","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"05183fd51d7df3d4a19163b1494c6d3fdde8eb2d"}
