{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/TooltipProvider.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/providers/TooltipProvider.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/TooltipProvider.tsx","inputSourceMap":{"version":3,"file":"client/providers/TooltipProvider.tsx","sourceRoot":"","sources":["client/providers/TooltipProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useDebouncedState, useMediaQuery } from '@rocket.chat/fuselage-hooks';\nimport { TooltipComponent } from '@rocket.chat/ui-client';\nimport { TooltipContext } from '@rocket.chat/ui-contexts';\nimport type { ReactNode } from 'react';\nimport React, { useEffect, useMemo, useRef, memo, useCallback, useState } from 'react';\n\nimport TooltipPortal from '../portals/TooltipPortal';\n\ntype TooltipProviderProps = {\n\tchildren?: ReactNode;\n};\n\nconst TooltipProvider = ({ children }: TooltipProviderProps) => {\n\tconst lastAnchor = useRef<HTMLElement>();\n\tconst hasHover = !useMediaQuery('(hover: none)');\n\n\tconst [tooltip, setTooltip] = useDebouncedState<ReactNode>(null, 300);\n\n\tconst restoreTitle = useCallback((previousAnchor: HTMLElement | undefined): void => {\n\t\tsetTimeout(() => {\n\t\t\tif (previousAnchor && !previousAnchor.getAttribute('title')) {\n\t\t\t\tpreviousAnchor.setAttribute('title', previousAnchor.getAttribute('data-title') ?? '');\n\t\t\t\tpreviousAnchor.removeAttribute('data-title');\n\t\t\t}\n\t\t}, 0);\n\t}, []);\n\n\tconst contextValue = useMemo(\n\t\t() => ({\n\t\t\topen: (tooltip: ReactNode, anchor: HTMLElement): void => {\n\t\t\t\tconst previousAnchor = lastAnchor.current;\n\t\t\t\tsetTooltip(<TooltipComponent key={new Date().toISOString()} title={tooltip} anchor={anchor} />);\n\t\t\t\tlastAnchor.current = anchor;\n\t\t\t\tpreviousAnchor && restoreTitle(previousAnchor);\n\t\t\t},\n\t\t\tclose: (): void => {\n\t\t\t\tconst previousAnchor = lastAnchor.current;\n\t\t\t\tsetTooltip(null);\n\t\t\t\tsetTooltip.flush();\n\t\t\t\tlastAnchor.current = undefined;\n\t\t\t\tpreviousAnchor && restoreTitle(previousAnchor);\n\t\t\t},\n\t\t\tdismiss: (): void => {\n\t\t\t\tsetTooltip(null);\n\t\t\t\tsetTooltip.flush();\n\t\t\t},\n\t\t}),\n\t\t[setTooltip, restoreTitle],\n\t);\n\n\tuseEffect(() => {\n\t\tif (!hasHover) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst handleMouseOver = (e: MouseEvent): void => {\n\t\t\tconst target = e.target as HTMLElement;\n\t\t\tif (lastAnchor.current === target) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst anchor = target.closest('[title], [data-tooltip]') as HTMLElement;\n\n\t\t\tif (lastAnchor.current === anchor) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!anchor) {\n\t\t\t\tcontextValue.close();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst title = anchor.getAttribute('title') ?? anchor.getAttribute('data-tooltip') ?? '';\n\t\t\tif (!title) {\n\t\t\t\tcontextValue.close();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// eslint-disable-next-line react/no-multi-comp\n\t\t\tconst Handler = () => {\n\t\t\t\tconst [state, setState] = useState(title);\n\t\t\t\tuseEffect(() => {\n\t\t\t\t\tconst close = (): void => contextValue.close();\n\t\t\t\t\t// store the title in a data attribute\n\t\t\t\t\tanchor.setAttribute('data-title', title);\n\t\t\t\t\t// Removes the title attribute to prevent the browser's tooltip from showing\n\t\t\t\t\tanchor.setAttribute('title', '');\n\n\t\t\t\t\tanchor.addEventListener('mouseleave', close);\n\n\t\t\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\t\t\tconst title = anchor.getAttribute('title') ?? anchor.getAttribute('data-tooltip') ?? '';\n\n\t\t\t\t\t\tif (title === '') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// store the title in a data attribute\n\t\t\t\t\t\tanchor.setAttribute('data-title', title);\n\t\t\t\t\t\t// Removes the title attribute to prevent the browser's tooltip from showing\n\t\t\t\t\t\tanchor.setAttribute('title', '');\n\n\t\t\t\t\t\tsetState(title);\n\t\t\t\t\t});\n\n\t\t\t\t\tobserver.observe(anchor, {\n\t\t\t\t\t\tattributes: true,\n\t\t\t\t\t\tattributeFilter: ['title', 'data-tooltip'],\n\t\t\t\t\t});\n\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tanchor.removeEventListener('mouseleave', close);\n\t\t\t\t\t\tobserver.disconnect();\n\t\t\t\t\t};\n\t\t\t\t}, []);\n\t\t\t\treturn <>{state}</>;\n\t\t\t};\n\t\t\tcontextValue.open(<Handler />, anchor);\n\t\t};\n\n\t\tconst dismissOnClick = (): void => {\n\t\t\tcontextValue.dismiss();\n\t\t};\n\n\t\tdocument.body.addEventListener('mouseover', handleMouseOver, {\n\t\t\tpassive: true,\n\t\t});\n\t\tdocument.body.addEventListener('click', dismissOnClick, { capture: true });\n\n\t\treturn (): void => {\n\t\t\tcontextValue.close();\n\t\t\tdocument.body.removeEventListener('mouseover', handleMouseOver);\n\t\t\tdocument.body.removeEventListener('click', dismissOnClick);\n\t\t};\n\t}, [contextValue, setTooltip, hasHover]);\n\n\treturn (\n\t\t<TooltipContext.Provider value={contextValue}>\n\t\t\t{children}\n\t\t\t{tooltip && <TooltipPortal>{tooltip}</TooltipPortal>}\n\t\t</TooltipContext.Provider>\n\t);\n};\n\nexport default memo<typeof TooltipProvider>(TooltipProvider);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/TooltipProvider.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/providers/TooltipProvider.tsx","inputSourceMap":{"version":3,"file":"client/providers/TooltipProvider.tsx","sourceRoot":"","sources":["client/providers/TooltipProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useDebouncedState, useMediaQuery } from '@rocket.chat/fuselage-hooks';\nimport { TooltipComponent } from '@rocket.chat/ui-client';\nimport { TooltipContext } from '@rocket.chat/ui-contexts';\nimport type { ReactNode } from 'react';\nimport React, { useEffect, useMemo, useRef, memo, useCallback, useState } from 'react';\n\nimport TooltipPortal from '../portals/TooltipPortal';\n\ntype TooltipProviderProps = {\n\tchildren?: ReactNode;\n};\n\nconst TooltipProvider = ({ children }: TooltipProviderProps) => {\n\tconst lastAnchor = useRef<HTMLElement>();\n\tconst hasHover = !useMediaQuery('(hover: none)');\n\n\tconst [tooltip, setTooltip] = useDebouncedState<ReactNode>(null, 300);\n\n\tconst restoreTitle = useCallback((previousAnchor: HTMLElement | undefined): void => {\n\t\tsetTimeout(() => {\n\t\t\tif (previousAnchor && !previousAnchor.getAttribute('title')) {\n\t\t\t\tpreviousAnchor.setAttribute('title', previousAnchor.getAttribute('data-title') ?? '');\n\t\t\t\tpreviousAnchor.removeAttribute('data-title');\n\t\t\t}\n\t\t}, 0);\n\t}, []);\n\n\tconst contextValue = useMemo(\n\t\t() => ({\n\t\t\topen: (tooltip: ReactNode, anchor: HTMLElement): void => {\n\t\t\t\tconst previousAnchor = lastAnchor.current;\n\t\t\t\tsetTooltip(<TooltipComponent key={new Date().toISOString()} title={tooltip} anchor={anchor} />);\n\t\t\t\tlastAnchor.current = anchor;\n\t\t\t\tpreviousAnchor && restoreTitle(previousAnchor);\n\t\t\t},\n\t\t\tclose: (): void => {\n\t\t\t\tconst previousAnchor = lastAnchor.current;\n\t\t\t\tsetTooltip(null);\n\t\t\t\tsetTooltip.flush();\n\t\t\t\tlastAnchor.current = undefined;\n\t\t\t\tpreviousAnchor && restoreTitle(previousAnchor);\n\t\t\t},\n\t\t\tdismiss: (): void => {\n\t\t\t\tsetTooltip(null);\n\t\t\t\tsetTooltip.flush();\n\t\t\t},\n\t\t}),\n\t\t[setTooltip, restoreTitle],\n\t);\n\n\tuseEffect(() => {\n\t\tif (!hasHover) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst handleMouseOver = (e: MouseEvent): void => {\n\t\t\tconst target = e.target as HTMLElement;\n\t\t\tif (lastAnchor.current === target) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst anchor = target.closest('[title], [data-tooltip]') as HTMLElement;\n\n\t\t\tif (lastAnchor.current === anchor) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!anchor) {\n\t\t\t\tcontextValue.close();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst title = anchor.getAttribute('title') ?? anchor.getAttribute('data-tooltip') ?? '';\n\t\t\tif (!title) {\n\t\t\t\tcontextValue.close();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// eslint-disable-next-line react/no-multi-comp\n\t\t\tconst Handler = () => {\n\t\t\t\tconst [state, setState] = useState(title);\n\t\t\t\tuseEffect(() => {\n\t\t\t\t\tconst close = (): void => contextValue.close();\n\t\t\t\t\t// store the title in a data attribute\n\t\t\t\t\tanchor.setAttribute('data-title', title);\n\t\t\t\t\t// Removes the title attribute to prevent the browser's tooltip from showing\n\t\t\t\t\tanchor.setAttribute('title', '');\n\n\t\t\t\t\tanchor.addEventListener('mouseleave', close);\n\n\t\t\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\t\t\tconst title = anchor.getAttribute('title') ?? anchor.getAttribute('data-tooltip') ?? '';\n\n\t\t\t\t\t\tif (title === '') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// store the title in a data attribute\n\t\t\t\t\t\tanchor.setAttribute('data-title', title);\n\t\t\t\t\t\t// Removes the title attribute to prevent the browser's tooltip from showing\n\t\t\t\t\t\tanchor.setAttribute('title', '');\n\n\t\t\t\t\t\tsetState(title);\n\t\t\t\t\t});\n\n\t\t\t\t\tobserver.observe(anchor, {\n\t\t\t\t\t\tattributes: true,\n\t\t\t\t\t\tattributeFilter: ['title', 'data-tooltip'],\n\t\t\t\t\t});\n\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tanchor.removeEventListener('mouseleave', close);\n\t\t\t\t\t\tobserver.disconnect();\n\t\t\t\t\t};\n\t\t\t\t}, []);\n\t\t\t\treturn <>{state}</>;\n\t\t\t};\n\t\t\tcontextValue.open(<Handler />, anchor);\n\t\t};\n\n\t\tconst dismissOnClick = (): void => {\n\t\t\tcontextValue.dismiss();\n\t\t};\n\n\t\tdocument.body.addEventListener('mouseover', handleMouseOver, {\n\t\t\tpassive: true,\n\t\t});\n\t\tdocument.body.addEventListener('click', dismissOnClick, { capture: true });\n\n\t\treturn (): void => {\n\t\t\tcontextValue.close();\n\t\t\tdocument.body.removeEventListener('mouseover', handleMouseOver);\n\t\t\tdocument.body.removeEventListener('click', dismissOnClick);\n\t\t};\n\t}, [contextValue, setTooltip, hasHover]);\n\n\treturn (\n\t\t<TooltipContext.Provider value={contextValue}>\n\t\t\t{children}\n\t\t\t{tooltip && <TooltipPortal>{tooltip}</TooltipPortal>}\n\t\t</TooltipContext.Provider>\n\t);\n};\n\nexport default memo<typeof TooltipProvider>(TooltipProvider);\n"]}}},"code":"let useDebouncedState, useMediaQuery;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useDebouncedState(v) {\n    useDebouncedState = v;\n  },\n  useMediaQuery(v) {\n    useMediaQuery = v;\n  }\n}, 0);\nlet TooltipComponent;\nmodule.link(\"@rocket.chat/ui-client\", {\n  TooltipComponent(v) {\n    TooltipComponent = v;\n  }\n}, 1);\nlet TooltipContext;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  TooltipContext(v) {\n    TooltipContext = v;\n  }\n}, 2);\nlet React, useEffect, useMemo, useRef, memo, useCallback, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  },\n  useRef(v) {\n    useRef = v;\n  },\n  memo(v) {\n    memo = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  },\n  useState(v) {\n    useState = v;\n  }\n}, 3);\nlet TooltipPortal;\nmodule.link(\"../portals/TooltipPortal\", {\n  default(v) {\n    TooltipPortal = v;\n  }\n}, 4);\nconst TooltipProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const lastAnchor = useRef();\n  const hasHover = !useMediaQuery('(hover: none)');\n  const [tooltip, setTooltip] = useDebouncedState(null, 300);\n  const restoreTitle = useCallback(previousAnchor => {\n    setTimeout(() => {\n      if (previousAnchor && !previousAnchor.getAttribute('title')) {\n        var _previousAnchor$getAt;\n        previousAnchor.setAttribute('title', (_previousAnchor$getAt = previousAnchor.getAttribute('data-title')) !== null && _previousAnchor$getAt !== void 0 ? _previousAnchor$getAt : '');\n        previousAnchor.removeAttribute('data-title');\n      }\n    }, 0);\n  }, []);\n  const contextValue = useMemo(() => ({\n    open: (tooltip, anchor) => {\n      const previousAnchor = lastAnchor.current;\n      setTooltip( /*#__PURE__*/React.createElement(TooltipComponent, {\n        key: new Date().toISOString(),\n        title: tooltip,\n        anchor: anchor\n      }));\n      lastAnchor.current = anchor;\n      previousAnchor && restoreTitle(previousAnchor);\n    },\n    close: () => {\n      const previousAnchor = lastAnchor.current;\n      setTooltip(null);\n      setTooltip.flush();\n      lastAnchor.current = undefined;\n      previousAnchor && restoreTitle(previousAnchor);\n    },\n    dismiss: () => {\n      setTooltip(null);\n      setTooltip.flush();\n    }\n  }), [setTooltip, restoreTitle]);\n  useEffect(() => {\n    if (!hasHover) {\n      return;\n    }\n    const handleMouseOver = e => {\n      var _ref2, _anchor$getAttribute;\n      const target = e.target;\n      if (lastAnchor.current === target) {\n        return;\n      }\n      const anchor = target.closest('[title], [data-tooltip]');\n      if (lastAnchor.current === anchor) {\n        return;\n      }\n      if (!anchor) {\n        contextValue.close();\n        return;\n      }\n      const title = (_ref2 = (_anchor$getAttribute = anchor.getAttribute('title')) !== null && _anchor$getAttribute !== void 0 ? _anchor$getAttribute : anchor.getAttribute('data-tooltip')) !== null && _ref2 !== void 0 ? _ref2 : '';\n      if (!title) {\n        contextValue.close();\n        return;\n      }\n      // eslint-disable-next-line react/no-multi-comp\n      const Handler = () => {\n        const [state, setState] = useState(title);\n        useEffect(() => {\n          const close = () => contextValue.close();\n          // store the title in a data attribute\n          anchor.setAttribute('data-title', title);\n          // Removes the title attribute to prevent the browser's tooltip from showing\n          anchor.setAttribute('title', '');\n          anchor.addEventListener('mouseleave', close);\n          const observer = new MutationObserver(() => {\n            var _ref3, _anchor$getAttribute2;\n            const title = (_ref3 = (_anchor$getAttribute2 = anchor.getAttribute('title')) !== null && _anchor$getAttribute2 !== void 0 ? _anchor$getAttribute2 : anchor.getAttribute('data-tooltip')) !== null && _ref3 !== void 0 ? _ref3 : '';\n            if (title === '') {\n              return;\n            }\n            // store the title in a data attribute\n            anchor.setAttribute('data-title', title);\n            // Removes the title attribute to prevent the browser's tooltip from showing\n            anchor.setAttribute('title', '');\n            setState(title);\n          });\n          observer.observe(anchor, {\n            attributes: true,\n            attributeFilter: ['title', 'data-tooltip']\n          });\n          return () => {\n            anchor.removeEventListener('mouseleave', close);\n            observer.disconnect();\n          };\n        }, []);\n        return /*#__PURE__*/React.createElement(React.Fragment, null, state);\n      };\n      contextValue.open( /*#__PURE__*/React.createElement(Handler, null), anchor);\n    };\n    const dismissOnClick = () => {\n      contextValue.dismiss();\n    };\n    document.body.addEventListener('mouseover', handleMouseOver, {\n      passive: true\n    });\n    document.body.addEventListener('click', dismissOnClick, {\n      capture: true\n    });\n    return () => {\n      contextValue.close();\n      document.body.removeEventListener('mouseover', handleMouseOver);\n      document.body.removeEventListener('click', dismissOnClick);\n    };\n  }, [contextValue, setTooltip, hasHover]);\n  return /*#__PURE__*/React.createElement(TooltipContext.Provider, {\n    value: contextValue\n  }, children, tooltip && /*#__PURE__*/React.createElement(TooltipPortal, null, tooltip));\n};\nmodule.exportDefault( /*#__PURE__*/memo(TooltipProvider));","map":{"version":3,"names":["useDebouncedState","useMediaQuery","module","link","v","TooltipComponent","TooltipContext","React","useEffect","useMemo","useRef","memo","useCallback","useState","default","TooltipPortal","TooltipProvider","_ref","children","lastAnchor","hasHover","tooltip","setTooltip","restoreTitle","previousAnchor","setTimeout","getAttribute","_previousAnchor$getAt","setAttribute","removeAttribute","contextValue","open","anchor","current","createElement","key","Date","toISOString","title","close","flush","undefined","dismiss","handleMouseOver","e","_ref2","_anchor$getAttribute","target","closest","Handler","state","setState","addEventListener","observer","MutationObserver","_ref3","_anchor$getAttribute2","observe","attributes","attributeFilter","removeEventListener","disconnect","Fragment","dismissOnClick","document","body","passive","capture","Provider","value","exportDefault"],"sources":["client/providers/TooltipProvider.tsx"],"sourcesContent":["import { useDebouncedState, useMediaQuery } from '@rocket.chat/fuselage-hooks';\nimport { TooltipComponent } from '@rocket.chat/ui-client';\nimport { TooltipContext } from '@rocket.chat/ui-contexts';\nimport type { ReactNode } from 'react';\nimport React, { useEffect, useMemo, useRef, memo, useCallback, useState } from 'react';\n\nimport TooltipPortal from '../portals/TooltipPortal';\n\ntype TooltipProviderProps = {\n\tchildren?: ReactNode;\n};\n\nconst TooltipProvider = ({ children }: TooltipProviderProps) => {\n\tconst lastAnchor = useRef<HTMLElement>();\n\tconst hasHover = !useMediaQuery('(hover: none)');\n\n\tconst [tooltip, setTooltip] = useDebouncedState<ReactNode>(null, 300);\n\n\tconst restoreTitle = useCallback((previousAnchor: HTMLElement | undefined): void => {\n\t\tsetTimeout(() => {\n\t\t\tif (previousAnchor && !previousAnchor.getAttribute('title')) {\n\t\t\t\tpreviousAnchor.setAttribute('title', previousAnchor.getAttribute('data-title') ?? '');\n\t\t\t\tpreviousAnchor.removeAttribute('data-title');\n\t\t\t}\n\t\t}, 0);\n\t}, []);\n\n\tconst contextValue = useMemo(\n\t\t() => ({\n\t\t\topen: (tooltip: ReactNode, anchor: HTMLElement): void => {\n\t\t\t\tconst previousAnchor = lastAnchor.current;\n\t\t\t\tsetTooltip(<TooltipComponent key={new Date().toISOString()} title={tooltip} anchor={anchor} />);\n\t\t\t\tlastAnchor.current = anchor;\n\t\t\t\tpreviousAnchor && restoreTitle(previousAnchor);\n\t\t\t},\n\t\t\tclose: (): void => {\n\t\t\t\tconst previousAnchor = lastAnchor.current;\n\t\t\t\tsetTooltip(null);\n\t\t\t\tsetTooltip.flush();\n\t\t\t\tlastAnchor.current = undefined;\n\t\t\t\tpreviousAnchor && restoreTitle(previousAnchor);\n\t\t\t},\n\t\t\tdismiss: (): void => {\n\t\t\t\tsetTooltip(null);\n\t\t\t\tsetTooltip.flush();\n\t\t\t},\n\t\t}),\n\t\t[setTooltip, restoreTitle],\n\t);\n\n\tuseEffect(() => {\n\t\tif (!hasHover) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst handleMouseOver = (e: MouseEvent): void => {\n\t\t\tconst target = e.target as HTMLElement;\n\t\t\tif (lastAnchor.current === target) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst anchor = target.closest('[title], [data-tooltip]') as HTMLElement;\n\n\t\t\tif (lastAnchor.current === anchor) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!anchor) {\n\t\t\t\tcontextValue.close();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst title = anchor.getAttribute('title') ?? anchor.getAttribute('data-tooltip') ?? '';\n\t\t\tif (!title) {\n\t\t\t\tcontextValue.close();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// eslint-disable-next-line react/no-multi-comp\n\t\t\tconst Handler = () => {\n\t\t\t\tconst [state, setState] = useState(title);\n\t\t\t\tuseEffect(() => {\n\t\t\t\t\tconst close = (): void => contextValue.close();\n\t\t\t\t\t// store the title in a data attribute\n\t\t\t\t\tanchor.setAttribute('data-title', title);\n\t\t\t\t\t// Removes the title attribute to prevent the browser's tooltip from showing\n\t\t\t\t\tanchor.setAttribute('title', '');\n\n\t\t\t\t\tanchor.addEventListener('mouseleave', close);\n\n\t\t\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\t\t\tconst title = anchor.getAttribute('title') ?? anchor.getAttribute('data-tooltip') ?? '';\n\n\t\t\t\t\t\tif (title === '') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// store the title in a data attribute\n\t\t\t\t\t\tanchor.setAttribute('data-title', title);\n\t\t\t\t\t\t// Removes the title attribute to prevent the browser's tooltip from showing\n\t\t\t\t\t\tanchor.setAttribute('title', '');\n\n\t\t\t\t\t\tsetState(title);\n\t\t\t\t\t});\n\n\t\t\t\t\tobserver.observe(anchor, {\n\t\t\t\t\t\tattributes: true,\n\t\t\t\t\t\tattributeFilter: ['title', 'data-tooltip'],\n\t\t\t\t\t});\n\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tanchor.removeEventListener('mouseleave', close);\n\t\t\t\t\t\tobserver.disconnect();\n\t\t\t\t\t};\n\t\t\t\t}, []);\n\t\t\t\treturn <>{state}</>;\n\t\t\t};\n\t\t\tcontextValue.open(<Handler />, anchor);\n\t\t};\n\n\t\tconst dismissOnClick = (): void => {\n\t\t\tcontextValue.dismiss();\n\t\t};\n\n\t\tdocument.body.addEventListener('mouseover', handleMouseOver, {\n\t\t\tpassive: true,\n\t\t});\n\t\tdocument.body.addEventListener('click', dismissOnClick, { capture: true });\n\n\t\treturn (): void => {\n\t\t\tcontextValue.close();\n\t\t\tdocument.body.removeEventListener('mouseover', handleMouseOver);\n\t\t\tdocument.body.removeEventListener('click', dismissOnClick);\n\t\t};\n\t}, [contextValue, setTooltip, hasHover]);\n\n\treturn (\n\t\t<TooltipContext.Provider value={contextValue}>\n\t\t\t{children}\n\t\t\t{tooltip && <TooltipPortal>{tooltip}</TooltipPortal>}\n\t\t</TooltipContext.Provider>\n\t);\n};\n\nexport default memo<typeof TooltipProvider>(TooltipProvider);\n"],"mappings":"AAAA,IAAAA,iBAAS,EAAAC,aAAmB;AAAAC,MAAa,CAAEC,IAAA,8BAAM,EAA6B;EAACH,kBAAAI,CAAA;IAAAJ,iBAAA,GAAAI,CAAA;EAAA;EAAAH,cAAAG,CAAA;IAAAH,aAAA,GAAAG,CAAA;EAAA;AAAA;AAAA,IAAAC,gBAAA;AAAAH,MAAA,CAAAC,IAAA;EAAAE,iBAAAD,CAAA;IAAAC,gBAAA,GAAAD,CAAA;EAAA;AAAA;AAAA,IAAAE,cAAA;AAAAJ,MAAA,CAAAC,IAAA;EAAAG,eAAAF,CAAA;IAAAE,cAAA,GAAAF,CAAA;EAAA;AAAA;AAAA,IAAAG,KAAA,EAAAC,SAAA,EAAAC,OAAA,EAAAC,MAAA,EAAAC,IAAA,EAAAC,WAAA,EAAAC,QAAA;AAAAX,MAAA,CAAAC,IAAA;EAAAW,QAAAV,CAAA;IAAAG,KAAA,GAAAH,CAAA;EAAA;EAAAI,UAAAJ,CAAA;IAAAI,SAAA,GAAAJ,CAAA;EAAA;EAAAK,QAAAL,CAAA;IAAAK,OAAA,GAAAL,CAAA;EAAA;EAAAM,OAAAN,CAAA;IAAAM,MAAA,GAAAN,CAAA;EAAA;EAAAO,KAAAP,CAAA;IAAAO,IAAA,GAAAP,CAAA;EAAA;EAAAQ,YAAAR,CAAA;IAAAQ,WAAA,GAAAR,CAAA;EAAA;EAAAS,SAAAT,CAAA;IAAAS,QAAA,GAAAT,CAAA;EAAA;AAAA;AAAA,IAAAW,aAAA;AAAAb,MAAA,CAAAC,IAAA;EAAAW,QAAAV,CAAA;IAAAW,aAAA,GAAAX,CAAA;EAAA;AAAA;AAY/E,MAAMY,eAAe,GAAGC,IAAA,IAAuC;EAAA,IAAtC;IAAEC;EAAQ,CAAwB,GAAAD,IAAA;EAC1D,MAAME,UAAU,GAAGT,MAAM,EAAe;EACxC,MAAMU,QAAQ,GAAG,CAACnB,aAAa,CAAC,eAAe,CAAC;EAEhD,MAAM,CAACoB,OAAO,EAAEC,UAAU,CAAC,GAAGtB,iBAAiB,CAAY,IAAI,EAAE,GAAG,CAAC;EAErE,MAAMuB,YAAY,GAAGX,WAAW,CAAEY,cAAuC,IAAU;IAClFC,UAAU,CAAC,MAAK;MACf,IAAID,cAAc,IAAI,CAACA,cAAc,CAACE,YAAY,CAAC,OAAO,CAAC,EAAE;QAAA,IAAAC,qBAAA;QAC5DH,cAAc,CAACI,YAAY,CAAC,OAAO,GAAAD,qBAAA,GAAEH,cAAc,CAACE,YAAY,CAAC,YAAY,CAAC,cAAAC,qBAAA,cAAAA,qBAAA,GAAI,EAAE,CAAC;QACrFH,cAAc,CAACK,eAAe,CAAC,YAAY,CAAC;MAC7C;IACD,CAAC,EAAE,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,YAAY,GAAGrB,OAAO,CAC3B,OAAO;IACNsB,IAAI,EAAEA,CAACV,OAAkB,EAAEW,MAAmB,KAAU;MACvD,MAAMR,cAAc,GAAGL,UAAU,CAACc,OAAO;MACzCX,UAAU,eAACf,KAAA,CAAA2B,aAAA,CAAC7B,gBAAgB;QAAC8B,GAAG,EAAE,IAAIC,IAAI,EAAE,CAACC,WAAW,EAAG;QAACC,KAAK,EAAEjB,OAAQ;QAACW,MAAM,EAAEA;MAAO,EAAG,CAAC;MAC/Fb,UAAU,CAACc,OAAO,GAAGD,MAAM;MAC3BR,cAAc,IAAID,YAAY,CAACC,cAAc,CAAC;IAC/C,CAAC;IACDe,KAAK,EAAEA,CAAA,KAAW;MACjB,MAAMf,cAAc,GAAGL,UAAU,CAACc,OAAO;MACzCX,UAAU,CAAC,IAAI,CAAC;MAChBA,UAAU,CAACkB,KAAK,EAAE;MAClBrB,UAAU,CAACc,OAAO,GAAGQ,SAAS;MAC9BjB,cAAc,IAAID,YAAY,CAACC,cAAc,CAAC;IAC/C,CAAC;IACDkB,OAAO,EAAEA,CAAA,KAAW;MACnBpB,UAAU,CAAC,IAAI,CAAC;MAChBA,UAAU,CAACkB,KAAK,EAAE;IACnB;GACA,CAAC,EACF,CAAClB,UAAU,EAAEC,YAAY,CAAC,CAC1B;EAEDf,SAAS,CAAC,MAAK;IACd,IAAI,CAACY,QAAQ,EAAE;MACd;IACD;IAEA,MAAMuB,eAAe,GAAIC,CAAa,IAAU;MAAA,IAAAC,KAAA,EAAAC,oBAAA;MAC/C,MAAMC,MAAM,GAAGH,CAAC,CAACG,MAAqB;MACtC,IAAI5B,UAAU,CAACc,OAAO,KAAKc,MAAM,EAAE;QAClC;MACD;MAEA,MAAMf,MAAM,GAAGe,MAAM,CAACC,OAAO,CAAC,yBAAyB,CAAgB;MAEvE,IAAI7B,UAAU,CAACc,OAAO,KAAKD,MAAM,EAAE;QAClC;MACD;MAEA,IAAI,CAACA,MAAM,EAAE;QACZF,YAAY,CAACS,KAAK,EAAE;QACpB;MACD;MAEA,MAAMD,KAAK,IAAAO,KAAA,IAAAC,oBAAA,GAAGd,MAAM,CAACN,YAAY,CAAC,OAAO,CAAC,cAAAoB,oBAAA,cAAAA,oBAAA,GAAId,MAAM,CAACN,YAAY,CAAC,cAAc,CAAC,cAAAmB,KAAA,cAAAA,KAAA,GAAI,EAAE;MACvF,IAAI,CAACP,KAAK,EAAE;QACXR,YAAY,CAACS,KAAK,EAAE;QACpB;MACD;MAEA;MACA,MAAMU,OAAO,GAAGA,CAAA,KAAK;QACpB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGtC,QAAQ,CAACyB,KAAK,CAAC;QACzC9B,SAAS,CAAC,MAAK;UACd,MAAM+B,KAAK,GAAGA,CAAA,KAAYT,YAAY,CAACS,KAAK,EAAE;UAC9C;UACAP,MAAM,CAACJ,YAAY,CAAC,YAAY,EAAEU,KAAK,CAAC;UACxC;UACAN,MAAM,CAACJ,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC;UAEhCI,MAAM,CAACoB,gBAAgB,CAAC,YAAY,EAAEb,KAAK,CAAC;UAE5C,MAAMc,QAAQ,GAAG,IAAIC,gBAAgB,CAAC,MAAK;YAAA,IAAAC,KAAA,EAAAC,qBAAA;YAC1C,MAAMlB,KAAK,IAAAiB,KAAA,IAAAC,qBAAA,GAAGxB,MAAM,CAACN,YAAY,CAAC,OAAO,CAAC,cAAA8B,qBAAA,cAAAA,qBAAA,GAAIxB,MAAM,CAACN,YAAY,CAAC,cAAc,CAAC,cAAA6B,KAAA,cAAAA,KAAA,GAAI,EAAE;YAEvF,IAAIjB,KAAK,KAAK,EAAE,EAAE;cACjB;YACD;YAEA;YACAN,MAAM,CAACJ,YAAY,CAAC,YAAY,EAAEU,KAAK,CAAC;YACxC;YACAN,MAAM,CAACJ,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC;YAEhCuB,QAAQ,CAACb,KAAK,CAAC;UAChB,CAAC,CAAC;UAEFe,QAAQ,CAACI,OAAO,CAACzB,MAAM,EAAE;YACxB0B,UAAU,EAAE,IAAI;YAChBC,eAAe,EAAE,CAAC,OAAO,EAAE,cAAc;WACzC,CAAC;UAEF,OAAO,MAAK;YACX3B,MAAM,CAAC4B,mBAAmB,CAAC,YAAY,EAAErB,KAAK,CAAC;YAC/Cc,QAAQ,CAACQ,UAAU,EAAE;UACtB,CAAC;QACF,CAAC,EAAE,EAAE,CAAC;QACN,oBAAOtD,KAAA,CAAA2B,aAAA,CAAA3B,KAAA,CAAAuD,QAAA,QAAGZ,KAAM,CAAG;MACpB,CAAC;MACDpB,YAAY,CAACC,IAAI,eAACxB,KAAA,CAAA2B,aAAA,CAACe,OAAO,OAAG,EAAEjB,MAAM,CAAC;IACvC,CAAC;IAED,MAAM+B,cAAc,GAAGA,CAAA,KAAW;MACjCjC,YAAY,CAACY,OAAO,EAAE;IACvB,CAAC;IAEDsB,QAAQ,CAACC,IAAI,CAACb,gBAAgB,CAAC,WAAW,EAAET,eAAe,EAAE;MAC5DuB,OAAO,EAAE;KACT,CAAC;IACFF,QAAQ,CAACC,IAAI,CAACb,gBAAgB,CAAC,OAAO,EAAEW,cAAc,EAAE;MAAEI,OAAO,EAAE;IAAI,CAAE,CAAC;IAE1E,OAAO,MAAW;MACjBrC,YAAY,CAACS,KAAK,EAAE;MACpByB,QAAQ,CAACC,IAAI,CAACL,mBAAmB,CAAC,WAAW,EAAEjB,eAAe,CAAC;MAC/DqB,QAAQ,CAACC,IAAI,CAACL,mBAAmB,CAAC,OAAO,EAAEG,cAAc,CAAC;IAC3D,CAAC;EACF,CAAC,EAAE,CAACjC,YAAY,EAAER,UAAU,EAAEF,QAAQ,CAAC,CAAC;EAExC,oBACCb,KAAA,CAAA2B,aAAA,CAAC5B,cAAc,CAAC8D,QAAQ;IAACC,KAAK,EAAEvC;EAAa,GAC3CZ,QAAQ,EACRG,OAAO,iBAAId,KAAA,CAAA2B,aAAA,CAACnB,aAAa,QAAEM,OAAuB,CAC3B,CAAC;AAE5B,CAAC;AA9IDnB,MAAA,CAAOoE,aAAE,eAgJM3D,IAAI,CAAyBK,eAAe,CAhJlD","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"aecc1733542db4f1b30f08f92fcb15da2402df29"}
