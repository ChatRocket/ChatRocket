{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/contextualBar/uikit/UiKitContextualBar.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/contextualBar/uikit/UiKitContextualBar.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/contextualBar/uikit/UiKitContextualBar.tsx","inputSourceMap":{"version":3,"file":"client/views/room/contextualBar/uikit/UiKitContextualBar.tsx","sourceRoot":"","sources":["client/views/room/contextualBar/uikit/UiKitContextualBar.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Avatar, Box, Button, ButtonGroup, ContextualbarFooter, ContextualbarHeader, ContextualbarTitle } from '@rocket.chat/fuselage';\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\nimport {\n\tUiKitComponent,\n\tUiKitContextualBar as UiKitContextualBarSurfaceRender,\n\tcontextualBarParser,\n\tUiKitContext,\n} from '@rocket.chat/fuselage-ui-kit';\nimport type * as UiKit from '@rocket.chat/ui-kit';\nimport { BlockContext } from '@rocket.chat/ui-kit';\nimport type { FormEvent, UIEvent } from 'react';\nimport React, { memo } from 'react';\n\nimport { getURL } from '../../../../../app/utils/client';\nimport { ContextualbarClose, ContextualbarScrollableContent } from '../../../../components/Contextualbar';\nimport { preventSyntheticEvent } from '../../../../lib/utils/preventSyntheticEvent';\nimport { useContextualBarContextValue } from '../../../../uikit/hooks/useContextualBarContextValue';\nimport { useUiKitActionManager } from '../../../../uikit/hooks/useUiKitActionManager';\nimport { useUiKitView } from '../../../../uikit/hooks/useUiKitView';\nimport { getButtonStyle } from '../../../modal/uikit/getButtonStyle';\nimport { useRoomToolbox } from '../../contexts/RoomToolboxContext';\n\ntype UiKitContextualBarProps = {\n\tkey: UiKit.ContextualBarView['id']; // force re-mount when viewId changes\n\tinitialView: UiKit.ContextualBarView;\n};\n\nconst UiKitContextualBar = ({ initialView }: UiKitContextualBarProps): JSX.Element => {\n\tconst actionManager = useUiKitActionManager();\n\tconst { view, values, updateValues, state } = useUiKitView(initialView);\n\tconst contextValue = useContextualBarContextValue({ view, values, updateValues });\n\n\tconst { closeTab } = useRoomToolbox();\n\n\tconst handleSubmit = useEffectEvent((e: FormEvent) => {\n\t\tpreventSyntheticEvent(e);\n\t\tcloseTab();\n\t\tvoid actionManager.emitInteraction(view.appId, {\n\t\t\ttype: 'viewSubmit',\n\t\t\tpayload: {\n\t\t\t\tview: {\n\t\t\t\t\t...view,\n\t\t\t\t\tstate,\n\t\t\t\t},\n\t\t\t},\n\t\t\tviewId: view.id,\n\t\t});\n\t});\n\n\tconst handleCancel = useEffectEvent((e: UIEvent) => {\n\t\tpreventSyntheticEvent(e);\n\t\tcloseTab();\n\t\tvoid actionManager.emitInteraction(view.appId, {\n\t\t\ttype: 'viewClosed',\n\t\t\tpayload: {\n\t\t\t\tviewId: view.id,\n\t\t\t\tview: {\n\t\t\t\t\t...view,\n\t\t\t\t\tstate,\n\t\t\t\t},\n\t\t\t\tisCleared: false,\n\t\t\t},\n\t\t});\n\t});\n\n\tconst handleClose = useEffectEvent((e: UIEvent) => {\n\t\tpreventSyntheticEvent(e);\n\t\tcloseTab();\n\t\tvoid actionManager.emitInteraction(view.appId, {\n\t\t\ttype: 'viewClosed',\n\t\t\tpayload: {\n\t\t\t\tviewId: view.id,\n\t\t\t\tview: {\n\t\t\t\t\t...view,\n\t\t\t\t\tstate,\n\t\t\t\t},\n\t\t\t\tisCleared: true,\n\t\t\t},\n\t\t});\n\t});\n\n\treturn (\n\t\t<UiKitContext.Provider value={contextValue}>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<Avatar url={getURL(`/api/apps/${view.appId}/icon`)} />\n\t\t\t\t<ContextualbarTitle>{contextualBarParser.text(view.title, BlockContext.NONE, 0)}</ContextualbarTitle>\n\t\t\t\t{handleClose && <ContextualbarClose onClick={handleClose} />}\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<Box is='form' method='post' action='#' onSubmit={handleSubmit}>\n\t\t\t\t\t<UiKitComponent render={UiKitContextualBarSurfaceRender} blocks={view.blocks} />\n\t\t\t\t</Box>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t{view.close && (\n\t\t\t\t\t\t<Button danger={view.close.style === 'danger'} onClick={handleCancel}>\n\t\t\t\t\t\t\t{contextualBarParser.text(view.close.text, BlockContext.NONE, 0)}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{view.submit && (\n\t\t\t\t\t\t<Button {...getButtonStyle(view.submit)} onClick={handleSubmit}>\n\t\t\t\t\t\t\t{contextualBarParser.text(view.submit.text, BlockContext.NONE, 1)}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</UiKitContext.Provider>\n\t);\n};\n\nexport default memo(UiKitContextualBar);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/contextualBar/uikit/UiKitContextualBar.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/contextualBar/uikit/UiKitContextualBar.tsx","inputSourceMap":{"version":3,"file":"client/views/room/contextualBar/uikit/UiKitContextualBar.tsx","sourceRoot":"","sources":["client/views/room/contextualBar/uikit/UiKitContextualBar.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Avatar, Box, Button, ButtonGroup, ContextualbarFooter, ContextualbarHeader, ContextualbarTitle } from '@rocket.chat/fuselage';\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\nimport {\n\tUiKitComponent,\n\tUiKitContextualBar as UiKitContextualBarSurfaceRender,\n\tcontextualBarParser,\n\tUiKitContext,\n} from '@rocket.chat/fuselage-ui-kit';\nimport type * as UiKit from '@rocket.chat/ui-kit';\nimport { BlockContext } from '@rocket.chat/ui-kit';\nimport type { FormEvent, UIEvent } from 'react';\nimport React, { memo } from 'react';\n\nimport { getURL } from '../../../../../app/utils/client';\nimport { ContextualbarClose, ContextualbarScrollableContent } from '../../../../components/Contextualbar';\nimport { preventSyntheticEvent } from '../../../../lib/utils/preventSyntheticEvent';\nimport { useContextualBarContextValue } from '../../../../uikit/hooks/useContextualBarContextValue';\nimport { useUiKitActionManager } from '../../../../uikit/hooks/useUiKitActionManager';\nimport { useUiKitView } from '../../../../uikit/hooks/useUiKitView';\nimport { getButtonStyle } from '../../../modal/uikit/getButtonStyle';\nimport { useRoomToolbox } from '../../contexts/RoomToolboxContext';\n\ntype UiKitContextualBarProps = {\n\tkey: UiKit.ContextualBarView['id']; // force re-mount when viewId changes\n\tinitialView: UiKit.ContextualBarView;\n};\n\nconst UiKitContextualBar = ({ initialView }: UiKitContextualBarProps): JSX.Element => {\n\tconst actionManager = useUiKitActionManager();\n\tconst { view, values, updateValues, state } = useUiKitView(initialView);\n\tconst contextValue = useContextualBarContextValue({ view, values, updateValues });\n\n\tconst { closeTab } = useRoomToolbox();\n\n\tconst handleSubmit = useEffectEvent((e: FormEvent) => {\n\t\tpreventSyntheticEvent(e);\n\t\tcloseTab();\n\t\tvoid actionManager.emitInteraction(view.appId, {\n\t\t\ttype: 'viewSubmit',\n\t\t\tpayload: {\n\t\t\t\tview: {\n\t\t\t\t\t...view,\n\t\t\t\t\tstate,\n\t\t\t\t},\n\t\t\t},\n\t\t\tviewId: view.id,\n\t\t});\n\t});\n\n\tconst handleCancel = useEffectEvent((e: UIEvent) => {\n\t\tpreventSyntheticEvent(e);\n\t\tcloseTab();\n\t\tvoid actionManager.emitInteraction(view.appId, {\n\t\t\ttype: 'viewClosed',\n\t\t\tpayload: {\n\t\t\t\tviewId: view.id,\n\t\t\t\tview: {\n\t\t\t\t\t...view,\n\t\t\t\t\tstate,\n\t\t\t\t},\n\t\t\t\tisCleared: false,\n\t\t\t},\n\t\t});\n\t});\n\n\tconst handleClose = useEffectEvent((e: UIEvent) => {\n\t\tpreventSyntheticEvent(e);\n\t\tcloseTab();\n\t\tvoid actionManager.emitInteraction(view.appId, {\n\t\t\ttype: 'viewClosed',\n\t\t\tpayload: {\n\t\t\t\tviewId: view.id,\n\t\t\t\tview: {\n\t\t\t\t\t...view,\n\t\t\t\t\tstate,\n\t\t\t\t},\n\t\t\t\tisCleared: true,\n\t\t\t},\n\t\t});\n\t});\n\n\treturn (\n\t\t<UiKitContext.Provider value={contextValue}>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<Avatar url={getURL(`/api/apps/${view.appId}/icon`)} />\n\t\t\t\t<ContextualbarTitle>{contextualBarParser.text(view.title, BlockContext.NONE, 0)}</ContextualbarTitle>\n\t\t\t\t{handleClose && <ContextualbarClose onClick={handleClose} />}\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<Box is='form' method='post' action='#' onSubmit={handleSubmit}>\n\t\t\t\t\t<UiKitComponent render={UiKitContextualBarSurfaceRender} blocks={view.blocks} />\n\t\t\t\t</Box>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t{view.close && (\n\t\t\t\t\t\t<Button danger={view.close.style === 'danger'} onClick={handleCancel}>\n\t\t\t\t\t\t\t{contextualBarParser.text(view.close.text, BlockContext.NONE, 0)}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{view.submit && (\n\t\t\t\t\t\t<Button {...getButtonStyle(view.submit)} onClick={handleSubmit}>\n\t\t\t\t\t\t\t{contextualBarParser.text(view.submit.text, BlockContext.NONE, 1)}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</UiKitContext.Provider>\n\t);\n};\n\nexport default memo(UiKitContextualBar);\n"]}}},"code":"var _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 0);\nvar _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 1);\nvar Avatar, Box, Button, ButtonGroup, ContextualbarFooter, ContextualbarHeader, ContextualbarTitle;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Avatar: function (v) {\n    Avatar = v;\n  },\n  Box: function (v) {\n    Box = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  ButtonGroup: function (v) {\n    ButtonGroup = v;\n  },\n  ContextualbarFooter: function (v) {\n    ContextualbarFooter = v;\n  },\n  ContextualbarHeader: function (v) {\n    ContextualbarHeader = v;\n  },\n  ContextualbarTitle: function (v) {\n    ContextualbarTitle = v;\n  }\n}, 0);\nvar useEffectEvent;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useEffectEvent: function (v) {\n    useEffectEvent = v;\n  }\n}, 1);\nvar UiKitComponent, UiKitContextualBarSurfaceRender, contextualBarParser, UiKitContext;\nmodule.link(\"@rocket.chat/fuselage-ui-kit\", {\n  UiKitComponent: function (v) {\n    UiKitComponent = v;\n  },\n  UiKitContextualBar: function (v) {\n    UiKitContextualBarSurfaceRender = v;\n  },\n  contextualBarParser: function (v) {\n    contextualBarParser = v;\n  },\n  UiKitContext: function (v) {\n    UiKitContext = v;\n  }\n}, 2);\nvar BlockContext;\nmodule.link(\"@rocket.chat/ui-kit\", {\n  BlockContext: function (v) {\n    BlockContext = v;\n  }\n}, 3);\nvar React, memo;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  memo: function (v) {\n    memo = v;\n  }\n}, 4);\nvar getURL;\nmodule.link(\"../../../../../app/utils/client\", {\n  getURL: function (v) {\n    getURL = v;\n  }\n}, 5);\nvar ContextualbarClose, ContextualbarScrollableContent;\nmodule.link(\"../../../../components/Contextualbar\", {\n  ContextualbarClose: function (v) {\n    ContextualbarClose = v;\n  },\n  ContextualbarScrollableContent: function (v) {\n    ContextualbarScrollableContent = v;\n  }\n}, 6);\nvar preventSyntheticEvent;\nmodule.link(\"../../../../lib/utils/preventSyntheticEvent\", {\n  preventSyntheticEvent: function (v) {\n    preventSyntheticEvent = v;\n  }\n}, 7);\nvar useContextualBarContextValue;\nmodule.link(\"../../../../uikit/hooks/useContextualBarContextValue\", {\n  useContextualBarContextValue: function (v) {\n    useContextualBarContextValue = v;\n  }\n}, 8);\nvar useUiKitActionManager;\nmodule.link(\"../../../../uikit/hooks/useUiKitActionManager\", {\n  useUiKitActionManager: function (v) {\n    useUiKitActionManager = v;\n  }\n}, 9);\nvar useUiKitView;\nmodule.link(\"../../../../uikit/hooks/useUiKitView\", {\n  useUiKitView: function (v) {\n    useUiKitView = v;\n  }\n}, 10);\nvar getButtonStyle;\nmodule.link(\"../../../modal/uikit/getButtonStyle\", {\n  getButtonStyle: function (v) {\n    getButtonStyle = v;\n  }\n}, 11);\nvar useRoomToolbox;\nmodule.link(\"../../contexts/RoomToolboxContext\", {\n  useRoomToolbox: function (v) {\n    useRoomToolbox = v;\n  }\n}, 12);\nvar UiKitContextualBar = function (_ref) {\n  var initialView = _ref.initialView;\n  var actionManager = useUiKitActionManager();\n  var _useUiKitView = useUiKitView(initialView),\n    view = _useUiKitView.view,\n    values = _useUiKitView.values,\n    updateValues = _useUiKitView.updateValues,\n    state = _useUiKitView.state;\n  var contextValue = useContextualBarContextValue({\n    view: view,\n    values: values,\n    updateValues: updateValues\n  });\n  var _useRoomToolbox = useRoomToolbox(),\n    closeTab = _useRoomToolbox.closeTab;\n  var handleSubmit = useEffectEvent(function (e) {\n    preventSyntheticEvent(e);\n    closeTab();\n    void actionManager.emitInteraction(view.appId, {\n      type: 'viewSubmit',\n      payload: {\n        view: _objectSpread(_objectSpread({}, view), {}, {\n          state: state\n        })\n      },\n      viewId: view.id\n    });\n  });\n  var handleCancel = useEffectEvent(function (e) {\n    preventSyntheticEvent(e);\n    closeTab();\n    void actionManager.emitInteraction(view.appId, {\n      type: 'viewClosed',\n      payload: {\n        viewId: view.id,\n        view: _objectSpread(_objectSpread({}, view), {}, {\n          state: state\n        }),\n        isCleared: false\n      }\n    });\n  });\n  var handleClose = useEffectEvent(function (e) {\n    preventSyntheticEvent(e);\n    closeTab();\n    void actionManager.emitInteraction(view.appId, {\n      type: 'viewClosed',\n      payload: {\n        viewId: view.id,\n        view: _objectSpread(_objectSpread({}, view), {}, {\n          state: state\n        }),\n        isCleared: true\n      }\n    });\n  });\n  return /*#__PURE__*/React.createElement(UiKitContext.Provider, {\n    value: contextValue\n  }, /*#__PURE__*/React.createElement(ContextualbarHeader, null, /*#__PURE__*/React.createElement(Avatar, {\n    url: getURL(\"/api/apps/\" + view.appId + \"/icon\")\n  }), /*#__PURE__*/React.createElement(ContextualbarTitle, null, contextualBarParser.text(view.title, BlockContext.NONE, 0)), handleClose && /*#__PURE__*/React.createElement(ContextualbarClose, {\n    onClick: handleClose\n  })), /*#__PURE__*/React.createElement(ContextualbarScrollableContent, null, /*#__PURE__*/React.createElement(Box, {\n    is: \"form\",\n    method: \"post\",\n    action: \"#\",\n    onSubmit: handleSubmit\n  }, /*#__PURE__*/React.createElement(UiKitComponent, {\n    render: UiKitContextualBarSurfaceRender,\n    blocks: view.blocks\n  }))), /*#__PURE__*/React.createElement(ContextualbarFooter, null, /*#__PURE__*/React.createElement(ButtonGroup, {\n    stretch: true\n  }, view.close && /*#__PURE__*/React.createElement(Button, {\n    danger: view.close.style === 'danger',\n    onClick: handleCancel\n  }, contextualBarParser.text(view.close.text, BlockContext.NONE, 0)), view.submit && /*#__PURE__*/React.createElement(Button, _extends({}, getButtonStyle(view.submit), {\n    onClick: handleSubmit\n  }), contextualBarParser.text(view.submit.text, BlockContext.NONE, 1)))));\n};\nmodule.exportDefault( /*#__PURE__*/memo(UiKitContextualBar));","map":{"version":3,"names":["_extends","module","link","default","v","_objectSpread","Avatar","Box","Button","ButtonGroup","ContextualbarFooter","ContextualbarHeader","ContextualbarTitle","useEffectEvent","UiKitComponent","UiKitContextualBarSurfaceRender","contextualBarParser","UiKitContext","UiKitContextualBar","BlockContext","React","memo","getURL","ContextualbarClose","ContextualbarScrollableContent","preventSyntheticEvent","useContextualBarContextValue","useUiKitActionManager","useUiKitView","getButtonStyle","useRoomToolbox","_ref","initialView","actionManager","_useUiKitView","view","values","updateValues","state","contextValue","_useRoomToolbox","closeTab","handleSubmit","e","emitInteraction","appId","type","payload","viewId","id","handleCancel","isCleared","handleClose","createElement","Provider","value","url","text","title","NONE","onClick","is","method","action","onSubmit","render","blocks","stretch","close","danger","style","submit","exportDefault"],"sources":["client/views/room/contextualBar/uikit/UiKitContextualBar.tsx"],"sourcesContent":["import { Avatar, Box, Button, ButtonGroup, ContextualbarFooter, ContextualbarHeader, ContextualbarTitle } from '@rocket.chat/fuselage';\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\nimport {\n\tUiKitComponent,\n\tUiKitContextualBar as UiKitContextualBarSurfaceRender,\n\tcontextualBarParser,\n\tUiKitContext,\n} from '@rocket.chat/fuselage-ui-kit';\nimport type * as UiKit from '@rocket.chat/ui-kit';\nimport { BlockContext } from '@rocket.chat/ui-kit';\nimport type { FormEvent, UIEvent } from 'react';\nimport React, { memo } from 'react';\n\nimport { getURL } from '../../../../../app/utils/client';\nimport { ContextualbarClose, ContextualbarScrollableContent } from '../../../../components/Contextualbar';\nimport { preventSyntheticEvent } from '../../../../lib/utils/preventSyntheticEvent';\nimport { useContextualBarContextValue } from '../../../../uikit/hooks/useContextualBarContextValue';\nimport { useUiKitActionManager } from '../../../../uikit/hooks/useUiKitActionManager';\nimport { useUiKitView } from '../../../../uikit/hooks/useUiKitView';\nimport { getButtonStyle } from '../../../modal/uikit/getButtonStyle';\nimport { useRoomToolbox } from '../../contexts/RoomToolboxContext';\n\ntype UiKitContextualBarProps = {\n\tkey: UiKit.ContextualBarView['id']; // force re-mount when viewId changes\n\tinitialView: UiKit.ContextualBarView;\n};\n\nconst UiKitContextualBar = ({ initialView }: UiKitContextualBarProps): JSX.Element => {\n\tconst actionManager = useUiKitActionManager();\n\tconst { view, values, updateValues, state } = useUiKitView(initialView);\n\tconst contextValue = useContextualBarContextValue({ view, values, updateValues });\n\n\tconst { closeTab } = useRoomToolbox();\n\n\tconst handleSubmit = useEffectEvent((e: FormEvent) => {\n\t\tpreventSyntheticEvent(e);\n\t\tcloseTab();\n\t\tvoid actionManager.emitInteraction(view.appId, {\n\t\t\ttype: 'viewSubmit',\n\t\t\tpayload: {\n\t\t\t\tview: {\n\t\t\t\t\t...view,\n\t\t\t\t\tstate,\n\t\t\t\t},\n\t\t\t},\n\t\t\tviewId: view.id,\n\t\t});\n\t});\n\n\tconst handleCancel = useEffectEvent((e: UIEvent) => {\n\t\tpreventSyntheticEvent(e);\n\t\tcloseTab();\n\t\tvoid actionManager.emitInteraction(view.appId, {\n\t\t\ttype: 'viewClosed',\n\t\t\tpayload: {\n\t\t\t\tviewId: view.id,\n\t\t\t\tview: {\n\t\t\t\t\t...view,\n\t\t\t\t\tstate,\n\t\t\t\t},\n\t\t\t\tisCleared: false,\n\t\t\t},\n\t\t});\n\t});\n\n\tconst handleClose = useEffectEvent((e: UIEvent) => {\n\t\tpreventSyntheticEvent(e);\n\t\tcloseTab();\n\t\tvoid actionManager.emitInteraction(view.appId, {\n\t\t\ttype: 'viewClosed',\n\t\t\tpayload: {\n\t\t\t\tviewId: view.id,\n\t\t\t\tview: {\n\t\t\t\t\t...view,\n\t\t\t\t\tstate,\n\t\t\t\t},\n\t\t\t\tisCleared: true,\n\t\t\t},\n\t\t});\n\t});\n\n\treturn (\n\t\t<UiKitContext.Provider value={contextValue}>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<Avatar url={getURL(`/api/apps/${view.appId}/icon`)} />\n\t\t\t\t<ContextualbarTitle>{contextualBarParser.text(view.title, BlockContext.NONE, 0)}</ContextualbarTitle>\n\t\t\t\t{handleClose && <ContextualbarClose onClick={handleClose} />}\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<Box is='form' method='post' action='#' onSubmit={handleSubmit}>\n\t\t\t\t\t<UiKitComponent render={UiKitContextualBarSurfaceRender} blocks={view.blocks} />\n\t\t\t\t</Box>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t{view.close && (\n\t\t\t\t\t\t<Button danger={view.close.style === 'danger'} onClick={handleCancel}>\n\t\t\t\t\t\t\t{contextualBarParser.text(view.close.text, BlockContext.NONE, 0)}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{view.submit && (\n\t\t\t\t\t\t<Button {...getButtonStyle(view.submit)} onClick={handleSubmit}>\n\t\t\t\t\t\t\t{contextualBarParser.text(view.submit.text, BlockContext.NONE, 1)}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</UiKitContext.Provider>\n\t);\n};\n\nexport default memo(UiKitContextualBar);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"43ecdbcf8f98b80f1137eabbde0a78cacb9b4c16"}
