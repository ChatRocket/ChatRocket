{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/AppDetailsPage/tabs/AppStatus/AppStatus.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/marketplace/AppDetailsPage/tabs/AppStatus/AppStatus.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/AppDetailsPage/tabs/AppStatus/AppStatus.tsx","inputSourceMap":{"version":3,"file":"client/views/marketplace/AppDetailsPage/tabs/AppStatus/AppStatus.tsx","sourceRoot":"","sources":["client/views/marketplace/AppDetailsPage/tabs/AppStatus/AppStatus.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { App } from '@rocket.chat/core-typings';\nimport { Box, Button, Tag, Margins } from '@rocket.chat/fuselage';\nimport { useSafely } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useRouteParameter, usePermission, useSetModal } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useState, memo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport semver from 'semver';\n\nimport { useHasLicenseModule } from '../../../../../hooks/useHasLicenseModule';\nimport { useIsEnterprise } from '../../../../../hooks/useIsEnterprise';\nimport AddonRequiredModal from '../../../AppsList/AddonRequiredModal';\nimport type { appStatusSpanResponseProps } from '../../../helpers';\nimport { appButtonProps, appMultiStatusProps } from '../../../helpers';\nimport type { AppInstallationHandlerParams } from '../../../hooks/useAppInstallationHandler';\nimport { useAppInstallationHandler } from '../../../hooks/useAppInstallationHandler';\nimport { useMarketplaceActions } from '../../../hooks/useMarketplaceActions';\nimport AppStatusPriceDisplay from './AppStatusPriceDisplay';\n\ntype AppStatusProps = {\n\tapp: App;\n\tshowStatus?: boolean;\n\tisAppDetailsPage: boolean;\n\tinstalled?: boolean;\n};\n\nconst AppStatus = ({ app, showStatus = true, isAppDetailsPage, installed, ...props }: AppStatusProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst [endUserRequested, setEndUserRequested] = useState(false);\n\tconst [loading, setLoading] = useSafely(useState(false));\n\tconst [isAppPurchased, setPurchased] = useSafely(useState(!!app?.isPurchased));\n\tconst setModal = useSetModal();\n\tconst isAdminUser = usePermission('manage-apps');\n\tconst context = useRouteParameter('context');\n\n\tconst { price, purchaseType, pricingPlans } = app;\n\n\tconst button = appButtonProps({ ...app, isAdminUser, endUserRequested });\n\tconst isAppRequestsPage = context === 'requested';\n\tconst shouldShowPriceDisplay = isAppDetailsPage && button && !app.isEnterpriseOnly;\n\tconst canUpdate = installed && app?.version && app?.marketplaceVersion && semver.lt(app?.version, app?.marketplaceVersion);\n\n\tconst { data } = useIsEnterprise();\n\tconst isEnterprise = data?.isEnterprise ?? false;\n\n\tconst appAddon = app.addon;\n\tconst workspaceHasAddon = useHasLicenseModule(appAddon);\n\n\tconst statuses = appMultiStatusProps(app, isAppDetailsPage, context || '', isEnterprise);\n\n\tconst totalSeenRequests = app?.appRequestStats?.totalSeen;\n\tconst totalUnseenRequests = app?.appRequestStats?.totalUnseen;\n\n\tconst action = button?.action;\n\n\tconst marketplaceActions = useMarketplaceActions();\n\n\tconst confirmAction = useCallback<AppInstallationHandlerParams['onSuccess']>(\n\t\tasync (action, permissionsGranted) => {\n\t\t\tif (action) {\n\t\t\t\tif (action !== 'request') {\n\t\t\t\t\tawait marketplaceActions[action]({ ...app, permissionsGranted });\n\t\t\t\t} else {\n\t\t\t\t\tsetEndUserRequested(true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetLoading(false);\n\t\t},\n\t\t[app, marketplaceActions, setLoading],\n\t);\n\n\tconst cancelAction = useCallback(() => {\n\t\tsetLoading(false);\n\t\tsetModal(null);\n\t}, [setLoading, setModal]);\n\n\tconst appInstallationHandler = useAppInstallationHandler({\n\t\tapp,\n\t\taction: action || 'purchase',\n\t\tisAppPurchased,\n\t\tonDismiss: cancelAction,\n\t\tonSuccess: confirmAction,\n\t\tsetIsPurchased: setPurchased,\n\t});\n\n\tconst handleAcquireApp = useCallback(() => {\n\t\tsetLoading(true);\n\n\t\tif (isAdminUser && appAddon && !workspaceHasAddon) {\n\t\t\tconst actionType = button?.action === 'update' ? 'update' : 'install';\n\t\t\treturn setModal(<AddonRequiredModal actionType={actionType} onDismiss={cancelAction} onInstallAnyway={appInstallationHandler} />);\n\t\t}\n\n\t\tappInstallationHandler();\n\t}, [button?.action, appAddon, appInstallationHandler, cancelAction, isAdminUser, setLoading, setModal, workspaceHasAddon]);\n\n\t// @TODO we should refactor this to not use the label to determine the variant\n\tconst getStatusVariant = (status: appStatusSpanResponseProps) => {\n\t\tif (isAppRequestsPage && totalUnseenRequests && (status.label === 'request' || status.label === 'requests')) {\n\t\t\treturn 'primary';\n\t\t}\n\n\t\tif (isAppRequestsPage && status.label === 'Requested') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// includes() here because the label can be 'Disabled' or 'Disabled*'\n\t\tif (status.label.includes('Disabled')) {\n\t\t\treturn 'secondary-danger';\n\t\t}\n\n\t\treturn undefined;\n\t};\n\n\tconst handleAppRequestsNumber = (status: appStatusSpanResponseProps) => {\n\t\tif ((status.label === 'request' || status.label === 'requests') && !installed && isAppRequestsPage) {\n\t\t\tlet numberOfRequests = 0;\n\n\t\t\tif (totalUnseenRequests >= 0) {\n\t\t\t\tnumberOfRequests += totalUnseenRequests;\n\t\t\t}\n\n\t\t\tif (totalSeenRequests >= 0) {\n\t\t\t\tnumberOfRequests += totalSeenRequests;\n\t\t\t}\n\n\t\t\treturn numberOfRequests;\n\t\t}\n\n\t\treturn null;\n\t};\n\n\treturn (\n\t\t<Box {...props} display='flex' alignItems='center' mie={8}>\n\t\t\t{button && isAppDetailsPage && (!installed || canUpdate) && (\n\t\t\t\t<Box\n\t\t\t\t\tdisplay='flex'\n\t\t\t\t\tflexDirection='row'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\tborderRadius='x4'\n\t\t\t\t\tinvisible={!showStatus && !loading}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={button.icon}\n\t\t\t\t\t\tprimary\n\t\t\t\t\t\tsmall\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\tdisabled={action === 'request' && (app?.requestedEndUser || endUserRequested)}\n\t\t\t\t\t\tonClick={handleAcquireApp}\n\t\t\t\t\t\tmie={8}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t(button.label.replace(' ', '_') as TranslationKey)}\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t{shouldShowPriceDisplay && !installed && (\n\t\t\t\t\t\t<AppStatusPriceDisplay purchaseType={purchaseType} pricingPlans={pricingPlans} price={price} showType={false} />\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t)}\n\n\t\t\t{statuses?.map((status, index) => (\n\t\t\t\t<Margins inlineEnd={index !== statuses.length - 1 ? 8 : undefined} key={index}>\n\t\t\t\t\t<Tag data-qa-type='app-status-tag' variant={getStatusVariant(status)} title={status.tooltipText ? status.tooltipText : ''}>\n\t\t\t\t\t\t{handleAppRequestsNumber(status)} {t(status.label)}\n\t\t\t\t\t</Tag>\n\t\t\t\t</Margins>\n\t\t\t))}\n\t\t</Box>\n\t);\n};\n\nexport default memo(AppStatus);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/AppDetailsPage/tabs/AppStatus/AppStatus.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/marketplace/AppDetailsPage/tabs/AppStatus/AppStatus.tsx","inputSourceMap":{"version":3,"file":"client/views/marketplace/AppDetailsPage/tabs/AppStatus/AppStatus.tsx","sourceRoot":"","sources":["client/views/marketplace/AppDetailsPage/tabs/AppStatus/AppStatus.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { App } from '@rocket.chat/core-typings';\nimport { Box, Button, Tag, Margins } from '@rocket.chat/fuselage';\nimport { useSafely } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useRouteParameter, usePermission, useSetModal } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useState, memo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport semver from 'semver';\n\nimport { useHasLicenseModule } from '../../../../../hooks/useHasLicenseModule';\nimport { useIsEnterprise } from '../../../../../hooks/useIsEnterprise';\nimport AddonRequiredModal from '../../../AppsList/AddonRequiredModal';\nimport type { appStatusSpanResponseProps } from '../../../helpers';\nimport { appButtonProps, appMultiStatusProps } from '../../../helpers';\nimport type { AppInstallationHandlerParams } from '../../../hooks/useAppInstallationHandler';\nimport { useAppInstallationHandler } from '../../../hooks/useAppInstallationHandler';\nimport { useMarketplaceActions } from '../../../hooks/useMarketplaceActions';\nimport AppStatusPriceDisplay from './AppStatusPriceDisplay';\n\ntype AppStatusProps = {\n\tapp: App;\n\tshowStatus?: boolean;\n\tisAppDetailsPage: boolean;\n\tinstalled?: boolean;\n};\n\nconst AppStatus = ({ app, showStatus = true, isAppDetailsPage, installed, ...props }: AppStatusProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst [endUserRequested, setEndUserRequested] = useState(false);\n\tconst [loading, setLoading] = useSafely(useState(false));\n\tconst [isAppPurchased, setPurchased] = useSafely(useState(!!app?.isPurchased));\n\tconst setModal = useSetModal();\n\tconst isAdminUser = usePermission('manage-apps');\n\tconst context = useRouteParameter('context');\n\n\tconst { price, purchaseType, pricingPlans } = app;\n\n\tconst button = appButtonProps({ ...app, isAdminUser, endUserRequested });\n\tconst isAppRequestsPage = context === 'requested';\n\tconst shouldShowPriceDisplay = isAppDetailsPage && button && !app.isEnterpriseOnly;\n\tconst canUpdate = installed && app?.version && app?.marketplaceVersion && semver.lt(app?.version, app?.marketplaceVersion);\n\n\tconst { data } = useIsEnterprise();\n\tconst isEnterprise = data?.isEnterprise ?? false;\n\n\tconst appAddon = app.addon;\n\tconst workspaceHasAddon = useHasLicenseModule(appAddon);\n\n\tconst statuses = appMultiStatusProps(app, isAppDetailsPage, context || '', isEnterprise);\n\n\tconst totalSeenRequests = app?.appRequestStats?.totalSeen;\n\tconst totalUnseenRequests = app?.appRequestStats?.totalUnseen;\n\n\tconst action = button?.action;\n\n\tconst marketplaceActions = useMarketplaceActions();\n\n\tconst confirmAction = useCallback<AppInstallationHandlerParams['onSuccess']>(\n\t\tasync (action, permissionsGranted) => {\n\t\t\tif (action) {\n\t\t\t\tif (action !== 'request') {\n\t\t\t\t\tawait marketplaceActions[action]({ ...app, permissionsGranted });\n\t\t\t\t} else {\n\t\t\t\t\tsetEndUserRequested(true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetLoading(false);\n\t\t},\n\t\t[app, marketplaceActions, setLoading],\n\t);\n\n\tconst cancelAction = useCallback(() => {\n\t\tsetLoading(false);\n\t\tsetModal(null);\n\t}, [setLoading, setModal]);\n\n\tconst appInstallationHandler = useAppInstallationHandler({\n\t\tapp,\n\t\taction: action || 'purchase',\n\t\tisAppPurchased,\n\t\tonDismiss: cancelAction,\n\t\tonSuccess: confirmAction,\n\t\tsetIsPurchased: setPurchased,\n\t});\n\n\tconst handleAcquireApp = useCallback(() => {\n\t\tsetLoading(true);\n\n\t\tif (isAdminUser && appAddon && !workspaceHasAddon) {\n\t\t\tconst actionType = button?.action === 'update' ? 'update' : 'install';\n\t\t\treturn setModal(<AddonRequiredModal actionType={actionType} onDismiss={cancelAction} onInstallAnyway={appInstallationHandler} />);\n\t\t}\n\n\t\tappInstallationHandler();\n\t}, [button?.action, appAddon, appInstallationHandler, cancelAction, isAdminUser, setLoading, setModal, workspaceHasAddon]);\n\n\t// @TODO we should refactor this to not use the label to determine the variant\n\tconst getStatusVariant = (status: appStatusSpanResponseProps) => {\n\t\tif (isAppRequestsPage && totalUnseenRequests && (status.label === 'request' || status.label === 'requests')) {\n\t\t\treturn 'primary';\n\t\t}\n\n\t\tif (isAppRequestsPage && status.label === 'Requested') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// includes() here because the label can be 'Disabled' or 'Disabled*'\n\t\tif (status.label.includes('Disabled')) {\n\t\t\treturn 'secondary-danger';\n\t\t}\n\n\t\treturn undefined;\n\t};\n\n\tconst handleAppRequestsNumber = (status: appStatusSpanResponseProps) => {\n\t\tif ((status.label === 'request' || status.label === 'requests') && !installed && isAppRequestsPage) {\n\t\t\tlet numberOfRequests = 0;\n\n\t\t\tif (totalUnseenRequests >= 0) {\n\t\t\t\tnumberOfRequests += totalUnseenRequests;\n\t\t\t}\n\n\t\t\tif (totalSeenRequests >= 0) {\n\t\t\t\tnumberOfRequests += totalSeenRequests;\n\t\t\t}\n\n\t\t\treturn numberOfRequests;\n\t\t}\n\n\t\treturn null;\n\t};\n\n\treturn (\n\t\t<Box {...props} display='flex' alignItems='center' mie={8}>\n\t\t\t{button && isAppDetailsPage && (!installed || canUpdate) && (\n\t\t\t\t<Box\n\t\t\t\t\tdisplay='flex'\n\t\t\t\t\tflexDirection='row'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\tborderRadius='x4'\n\t\t\t\t\tinvisible={!showStatus && !loading}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={button.icon}\n\t\t\t\t\t\tprimary\n\t\t\t\t\t\tsmall\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\tdisabled={action === 'request' && (app?.requestedEndUser || endUserRequested)}\n\t\t\t\t\t\tonClick={handleAcquireApp}\n\t\t\t\t\t\tmie={8}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t(button.label.replace(' ', '_') as TranslationKey)}\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t{shouldShowPriceDisplay && !installed && (\n\t\t\t\t\t\t<AppStatusPriceDisplay purchaseType={purchaseType} pricingPlans={pricingPlans} price={price} showType={false} />\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t)}\n\n\t\t\t{statuses?.map((status, index) => (\n\t\t\t\t<Margins inlineEnd={index !== statuses.length - 1 ? 8 : undefined} key={index}>\n\t\t\t\t\t<Tag data-qa-type='app-status-tag' variant={getStatusVariant(status)} title={status.tooltipText ? status.tooltipText : ''}>\n\t\t\t\t\t\t{handleAppRequestsNumber(status)} {t(status.label)}\n\t\t\t\t\t</Tag>\n\t\t\t\t</Margins>\n\t\t\t))}\n\t\t</Box>\n\t);\n};\n\nexport default memo(AppStatus);\n"]}}},"code":"const _excluded = [\"app\", \"showStatus\", \"isAppDetailsPage\", \"installed\"];\nlet _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 1);\nlet _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n}, 2);\nlet Box, Button, Tag, Margins;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box(v) {\n    Box = v;\n  },\n  Button(v) {\n    Button = v;\n  },\n  Tag(v) {\n    Tag = v;\n  },\n  Margins(v) {\n    Margins = v;\n  }\n}, 0);\nlet useSafely;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useSafely(v) {\n    useSafely = v;\n  }\n}, 1);\nlet useRouteParameter, usePermission, useSetModal;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useRouteParameter(v) {\n    useRouteParameter = v;\n  },\n  usePermission(v) {\n    usePermission = v;\n  },\n  useSetModal(v) {\n    useSetModal = v;\n  }\n}, 2);\nlet React, useCallback, useState, memo;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  },\n  useState(v) {\n    useState = v;\n  },\n  memo(v) {\n    memo = v;\n  }\n}, 3);\nlet useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 4);\nlet semver;\nmodule.link(\"semver\", {\n  default(v) {\n    semver = v;\n  }\n}, 5);\nlet useHasLicenseModule;\nmodule.link(\"../../../../../hooks/useHasLicenseModule\", {\n  useHasLicenseModule(v) {\n    useHasLicenseModule = v;\n  }\n}, 6);\nlet useIsEnterprise;\nmodule.link(\"../../../../../hooks/useIsEnterprise\", {\n  useIsEnterprise(v) {\n    useIsEnterprise = v;\n  }\n}, 7);\nlet AddonRequiredModal;\nmodule.link(\"../../../AppsList/AddonRequiredModal\", {\n  default(v) {\n    AddonRequiredModal = v;\n  }\n}, 8);\nlet appButtonProps, appMultiStatusProps;\nmodule.link(\"../../../helpers\", {\n  appButtonProps(v) {\n    appButtonProps = v;\n  },\n  appMultiStatusProps(v) {\n    appMultiStatusProps = v;\n  }\n}, 9);\nlet useAppInstallationHandler;\nmodule.link(\"../../../hooks/useAppInstallationHandler\", {\n  useAppInstallationHandler(v) {\n    useAppInstallationHandler = v;\n  }\n}, 10);\nlet useMarketplaceActions;\nmodule.link(\"../../../hooks/useMarketplaceActions\", {\n  useMarketplaceActions(v) {\n    useMarketplaceActions = v;\n  }\n}, 11);\nlet AppStatusPriceDisplay;\nmodule.link(\"./AppStatusPriceDisplay\", {\n  default(v) {\n    AppStatusPriceDisplay = v;\n  }\n}, 12);\nconst AppStatus = _ref => {\n  var _data$isEnterprise, _app$appRequestStats, _app$appRequestStats2;\n  let {\n      app,\n      showStatus = true,\n      isAppDetailsPage,\n      installed\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  const {\n    t\n  } = useTranslation();\n  const [endUserRequested, setEndUserRequested] = useState(false);\n  const [loading, setLoading] = useSafely(useState(false));\n  const [isAppPurchased, setPurchased] = useSafely(useState(!!(app !== null && app !== void 0 && app.isPurchased)));\n  const setModal = useSetModal();\n  const isAdminUser = usePermission('manage-apps');\n  const context = useRouteParameter('context');\n  const {\n    price,\n    purchaseType,\n    pricingPlans\n  } = app;\n  const button = appButtonProps(_objectSpread(_objectSpread({}, app), {}, {\n    isAdminUser,\n    endUserRequested\n  }));\n  const isAppRequestsPage = context === 'requested';\n  const shouldShowPriceDisplay = isAppDetailsPage && button && !app.isEnterpriseOnly;\n  const canUpdate = installed && (app === null || app === void 0 ? void 0 : app.version) && (app === null || app === void 0 ? void 0 : app.marketplaceVersion) && semver.lt(app === null || app === void 0 ? void 0 : app.version, app === null || app === void 0 ? void 0 : app.marketplaceVersion);\n  const {\n    data\n  } = useIsEnterprise();\n  const isEnterprise = (_data$isEnterprise = data === null || data === void 0 ? void 0 : data.isEnterprise) !== null && _data$isEnterprise !== void 0 ? _data$isEnterprise : false;\n  const appAddon = app.addon;\n  const workspaceHasAddon = useHasLicenseModule(appAddon);\n  const statuses = appMultiStatusProps(app, isAppDetailsPage, context || '', isEnterprise);\n  const totalSeenRequests = app === null || app === void 0 ? void 0 : (_app$appRequestStats = app.appRequestStats) === null || _app$appRequestStats === void 0 ? void 0 : _app$appRequestStats.totalSeen;\n  const totalUnseenRequests = app === null || app === void 0 ? void 0 : (_app$appRequestStats2 = app.appRequestStats) === null || _app$appRequestStats2 === void 0 ? void 0 : _app$appRequestStats2.totalUnseen;\n  const action = button === null || button === void 0 ? void 0 : button.action;\n  const marketplaceActions = useMarketplaceActions();\n  const confirmAction = useCallback(async (action, permissionsGranted) => {\n    if (action) {\n      if (action !== 'request') {\n        await marketplaceActions[action](_objectSpread(_objectSpread({}, app), {}, {\n          permissionsGranted\n        }));\n      } else {\n        setEndUserRequested(true);\n      }\n    }\n    setLoading(false);\n  }, [app, marketplaceActions, setLoading]);\n  const cancelAction = useCallback(() => {\n    setLoading(false);\n    setModal(null);\n  }, [setLoading, setModal]);\n  const appInstallationHandler = useAppInstallationHandler({\n    app,\n    action: action || 'purchase',\n    isAppPurchased,\n    onDismiss: cancelAction,\n    onSuccess: confirmAction,\n    setIsPurchased: setPurchased\n  });\n  const handleAcquireApp = useCallback(() => {\n    setLoading(true);\n    if (isAdminUser && appAddon && !workspaceHasAddon) {\n      const actionType = (button === null || button === void 0 ? void 0 : button.action) === 'update' ? 'update' : 'install';\n      return setModal( /*#__PURE__*/React.createElement(AddonRequiredModal, {\n        actionType: actionType,\n        onDismiss: cancelAction,\n        onInstallAnyway: appInstallationHandler\n      }));\n    }\n    appInstallationHandler();\n  }, [button === null || button === void 0 ? void 0 : button.action, appAddon, appInstallationHandler, cancelAction, isAdminUser, setLoading, setModal, workspaceHasAddon]);\n  // @TODO we should refactor this to not use the label to determine the variant\n  const getStatusVariant = status => {\n    if (isAppRequestsPage && totalUnseenRequests && (status.label === 'request' || status.label === 'requests')) {\n      return 'primary';\n    }\n    if (isAppRequestsPage && status.label === 'Requested') {\n      return undefined;\n    }\n    // includes() here because the label can be 'Disabled' or 'Disabled*'\n    if (status.label.includes('Disabled')) {\n      return 'secondary-danger';\n    }\n    return undefined;\n  };\n  const handleAppRequestsNumber = status => {\n    if ((status.label === 'request' || status.label === 'requests') && !installed && isAppRequestsPage) {\n      let numberOfRequests = 0;\n      if (totalUnseenRequests >= 0) {\n        numberOfRequests += totalUnseenRequests;\n      }\n      if (totalSeenRequests >= 0) {\n        numberOfRequests += totalSeenRequests;\n      }\n      return numberOfRequests;\n    }\n    return null;\n  };\n  return /*#__PURE__*/React.createElement(Box, _extends({}, props, {\n    display: \"flex\",\n    alignItems: \"center\",\n    mie: 8\n  }), button && isAppDetailsPage && (!installed || canUpdate) && /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    borderRadius: \"x4\",\n    invisible: !showStatus && !loading\n  }, /*#__PURE__*/React.createElement(Button, {\n    icon: button.icon,\n    primary: true,\n    small: true,\n    loading: loading,\n    disabled: action === 'request' && ((app === null || app === void 0 ? void 0 : app.requestedEndUser) || endUserRequested),\n    onClick: handleAcquireApp,\n    mie: 8\n  }, t(button.label.replace(' ', '_'))), shouldShowPriceDisplay && !installed && /*#__PURE__*/React.createElement(AppStatusPriceDisplay, {\n    purchaseType: purchaseType,\n    pricingPlans: pricingPlans,\n    price: price,\n    showType: false\n  })), statuses === null || statuses === void 0 ? void 0 : statuses.map((status, index) => /*#__PURE__*/React.createElement(Margins, {\n    inlineEnd: index !== statuses.length - 1 ? 8 : undefined,\n    key: index\n  }, /*#__PURE__*/React.createElement(Tag, {\n    \"data-qa-type\": \"app-status-tag\",\n    variant: getStatusVariant(status),\n    title: status.tooltipText ? status.tooltipText : ''\n  }, handleAppRequestsNumber(status), \" \", t(status.label)))));\n};\nmodule.exportDefault( /*#__PURE__*/memo(AppStatus));","map":{"version":3,"names":["_extends","module","link","default","v","_objectSpread","_objectWithoutProperties","Box","Button","Tag","Margins","useSafely","useRouteParameter","usePermission","useSetModal","React","useCallback","useState","memo","useTranslation","semver","useHasLicenseModule","useIsEnterprise","AddonRequiredModal","appButtonProps","appMultiStatusProps","useAppInstallationHandler","useMarketplaceActions","AppStatusPriceDisplay","AppStatus","_ref","_data$isEnterprise","_app$appRequestStats","_app$appRequestStats2","app","showStatus","isAppDetailsPage","installed","props","_excluded","t","endUserRequested","setEndUserRequested","loading","setLoading","isAppPurchased","setPurchased","isPurchased","setModal","isAdminUser","context","price","purchaseType","pricingPlans","button","isAppRequestsPage","shouldShowPriceDisplay","isEnterpriseOnly","canUpdate","version","marketplaceVersion","lt","data","isEnterprise","appAddon","addon","workspaceHasAddon","statuses","totalSeenRequests","appRequestStats","totalSeen","totalUnseenRequests","totalUnseen","action","marketplaceActions","confirmAction","permissionsGranted","cancelAction","appInstallationHandler","onDismiss","onSuccess","setIsPurchased","handleAcquireApp","actionType","createElement","onInstallAnyway","getStatusVariant","status","label","undefined","includes","handleAppRequestsNumber","numberOfRequests","display","alignItems","mie","flexDirection","justifyContent","borderRadius","invisible","icon","primary","small","disabled","requestedEndUser","onClick","replace","showType","map","index","inlineEnd","length","key","variant","title","tooltipText","exportDefault"],"sources":["client/views/marketplace/AppDetailsPage/tabs/AppStatus/AppStatus.tsx"],"sourcesContent":["import type { App } from '@rocket.chat/core-typings';\nimport { Box, Button, Tag, Margins } from '@rocket.chat/fuselage';\nimport { useSafely } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useRouteParameter, usePermission, useSetModal } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useState, memo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport semver from 'semver';\n\nimport { useHasLicenseModule } from '../../../../../hooks/useHasLicenseModule';\nimport { useIsEnterprise } from '../../../../../hooks/useIsEnterprise';\nimport AddonRequiredModal from '../../../AppsList/AddonRequiredModal';\nimport type { appStatusSpanResponseProps } from '../../../helpers';\nimport { appButtonProps, appMultiStatusProps } from '../../../helpers';\nimport type { AppInstallationHandlerParams } from '../../../hooks/useAppInstallationHandler';\nimport { useAppInstallationHandler } from '../../../hooks/useAppInstallationHandler';\nimport { useMarketplaceActions } from '../../../hooks/useMarketplaceActions';\nimport AppStatusPriceDisplay from './AppStatusPriceDisplay';\n\ntype AppStatusProps = {\n\tapp: App;\n\tshowStatus?: boolean;\n\tisAppDetailsPage: boolean;\n\tinstalled?: boolean;\n};\n\nconst AppStatus = ({ app, showStatus = true, isAppDetailsPage, installed, ...props }: AppStatusProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst [endUserRequested, setEndUserRequested] = useState(false);\n\tconst [loading, setLoading] = useSafely(useState(false));\n\tconst [isAppPurchased, setPurchased] = useSafely(useState(!!app?.isPurchased));\n\tconst setModal = useSetModal();\n\tconst isAdminUser = usePermission('manage-apps');\n\tconst context = useRouteParameter('context');\n\n\tconst { price, purchaseType, pricingPlans } = app;\n\n\tconst button = appButtonProps({ ...app, isAdminUser, endUserRequested });\n\tconst isAppRequestsPage = context === 'requested';\n\tconst shouldShowPriceDisplay = isAppDetailsPage && button && !app.isEnterpriseOnly;\n\tconst canUpdate = installed && app?.version && app?.marketplaceVersion && semver.lt(app?.version, app?.marketplaceVersion);\n\n\tconst { data } = useIsEnterprise();\n\tconst isEnterprise = data?.isEnterprise ?? false;\n\n\tconst appAddon = app.addon;\n\tconst workspaceHasAddon = useHasLicenseModule(appAddon);\n\n\tconst statuses = appMultiStatusProps(app, isAppDetailsPage, context || '', isEnterprise);\n\n\tconst totalSeenRequests = app?.appRequestStats?.totalSeen;\n\tconst totalUnseenRequests = app?.appRequestStats?.totalUnseen;\n\n\tconst action = button?.action;\n\n\tconst marketplaceActions = useMarketplaceActions();\n\n\tconst confirmAction = useCallback<AppInstallationHandlerParams['onSuccess']>(\n\t\tasync (action, permissionsGranted) => {\n\t\t\tif (action) {\n\t\t\t\tif (action !== 'request') {\n\t\t\t\t\tawait marketplaceActions[action]({ ...app, permissionsGranted });\n\t\t\t\t} else {\n\t\t\t\t\tsetEndUserRequested(true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetLoading(false);\n\t\t},\n\t\t[app, marketplaceActions, setLoading],\n\t);\n\n\tconst cancelAction = useCallback(() => {\n\t\tsetLoading(false);\n\t\tsetModal(null);\n\t}, [setLoading, setModal]);\n\n\tconst appInstallationHandler = useAppInstallationHandler({\n\t\tapp,\n\t\taction: action || 'purchase',\n\t\tisAppPurchased,\n\t\tonDismiss: cancelAction,\n\t\tonSuccess: confirmAction,\n\t\tsetIsPurchased: setPurchased,\n\t});\n\n\tconst handleAcquireApp = useCallback(() => {\n\t\tsetLoading(true);\n\n\t\tif (isAdminUser && appAddon && !workspaceHasAddon) {\n\t\t\tconst actionType = button?.action === 'update' ? 'update' : 'install';\n\t\t\treturn setModal(<AddonRequiredModal actionType={actionType} onDismiss={cancelAction} onInstallAnyway={appInstallationHandler} />);\n\t\t}\n\n\t\tappInstallationHandler();\n\t}, [button?.action, appAddon, appInstallationHandler, cancelAction, isAdminUser, setLoading, setModal, workspaceHasAddon]);\n\n\t// @TODO we should refactor this to not use the label to determine the variant\n\tconst getStatusVariant = (status: appStatusSpanResponseProps) => {\n\t\tif (isAppRequestsPage && totalUnseenRequests && (status.label === 'request' || status.label === 'requests')) {\n\t\t\treturn 'primary';\n\t\t}\n\n\t\tif (isAppRequestsPage && status.label === 'Requested') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// includes() here because the label can be 'Disabled' or 'Disabled*'\n\t\tif (status.label.includes('Disabled')) {\n\t\t\treturn 'secondary-danger';\n\t\t}\n\n\t\treturn undefined;\n\t};\n\n\tconst handleAppRequestsNumber = (status: appStatusSpanResponseProps) => {\n\t\tif ((status.label === 'request' || status.label === 'requests') && !installed && isAppRequestsPage) {\n\t\t\tlet numberOfRequests = 0;\n\n\t\t\tif (totalUnseenRequests >= 0) {\n\t\t\t\tnumberOfRequests += totalUnseenRequests;\n\t\t\t}\n\n\t\t\tif (totalSeenRequests >= 0) {\n\t\t\t\tnumberOfRequests += totalSeenRequests;\n\t\t\t}\n\n\t\t\treturn numberOfRequests;\n\t\t}\n\n\t\treturn null;\n\t};\n\n\treturn (\n\t\t<Box {...props} display='flex' alignItems='center' mie={8}>\n\t\t\t{button && isAppDetailsPage && (!installed || canUpdate) && (\n\t\t\t\t<Box\n\t\t\t\t\tdisplay='flex'\n\t\t\t\t\tflexDirection='row'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\tborderRadius='x4'\n\t\t\t\t\tinvisible={!showStatus && !loading}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={button.icon}\n\t\t\t\t\t\tprimary\n\t\t\t\t\t\tsmall\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\tdisabled={action === 'request' && (app?.requestedEndUser || endUserRequested)}\n\t\t\t\t\t\tonClick={handleAcquireApp}\n\t\t\t\t\t\tmie={8}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t(button.label.replace(' ', '_') as TranslationKey)}\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t{shouldShowPriceDisplay && !installed && (\n\t\t\t\t\t\t<AppStatusPriceDisplay purchaseType={purchaseType} pricingPlans={pricingPlans} price={price} showType={false} />\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t)}\n\n\t\t\t{statuses?.map((status, index) => (\n\t\t\t\t<Margins inlineEnd={index !== statuses.length - 1 ? 8 : undefined} key={index}>\n\t\t\t\t\t<Tag data-qa-type='app-status-tag' variant={getStatusVariant(status)} title={status.tooltipText ? status.tooltipText : ''}>\n\t\t\t\t\t\t{handleAppRequestsNumber(status)} {t(status.label)}\n\t\t\t\t\t</Tag>\n\t\t\t\t</Margins>\n\t\t\t))}\n\t\t</Box>\n\t);\n};\n\nexport default memo(AppStatus);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"dade9a9c31cabdd09c6107c5e402caae8e94fab5"}
