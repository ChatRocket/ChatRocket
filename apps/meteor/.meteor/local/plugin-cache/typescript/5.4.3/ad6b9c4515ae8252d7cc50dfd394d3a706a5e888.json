{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/voip/modals/DeviceSettingsModal.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/voip/modals/DeviceSettingsModal.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/voip/modals/DeviceSettingsModal.tsx","inputSourceMap":{"version":3,"file":"client/voip/modals/DeviceSettingsModal.tsx","sourceRoot":"","sources":["client/voip/modals/DeviceSettingsModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { SelectOption } from '@rocket.chat/fuselage';\nimport { Modal, Field, FieldLabel, FieldRow, Select, Button, Box } from '@rocket.chat/fuselage';\nimport {\n\tuseTranslation,\n\tuseAvailableDevices,\n\tuseToastMessageDispatch,\n\tuseSetModal,\n\tuseSelectedDevices,\n\tuseIsDeviceManagementEnabled,\n} from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useState } from 'react';\nimport type { SubmitHandler } from 'react-hook-form';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport { useChangeAudioInputDevice, useChangeAudioOutputDevice } from '../../contexts/CallContext';\nimport { isSetSinkIdAvailable } from '../../providers/DeviceProvider/lib/isSetSinkIdAvailable';\n\ntype FieldValues = {\n\tinputDevice: string;\n\toutputDevice: string;\n};\n\nconst DeviceSettingsModal = (): ReactElement => {\n\tconst setModal = useSetModal();\n\tconst onCancel = (): void => setModal();\n\tconst isDeviceManagementEnabled = useIsDeviceManagementEnabled();\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst selectedAudioDevices = useSelectedDevices();\n\n\tconst { handleSubmit, control } = useForm<FieldValues>({\n\t\tdefaultValues: {\n\t\t\tinputDevice: selectedAudioDevices?.audioInput?.id || '',\n\t\t\toutputDevice: selectedAudioDevices?.audioOutput?.id || '',\n\t\t},\n\t});\n\tconst [setSinkIdAvailable] = useState(() => isSetSinkIdAvailable());\n\tconst availableDevices = useAvailableDevices();\n\tconst changeAudioInputDevice = useChangeAudioInputDevice();\n\tconst changeAudioOutputDevice = useChangeAudioOutputDevice();\n\n\tconst availableInputDevices: SelectOption[] = availableDevices?.audioInput?.map((device) => [device.id, device.label]) || [];\n\tconst availableOutputDevices: SelectOption[] = availableDevices?.audioOutput?.map((device) => [device.id, device.label]) || [];\n\n\tconst onSubmit: SubmitHandler<FieldValues> = async (data) => {\n\t\tconst selectedInputDevice = data.inputDevice && availableDevices?.audioInput?.find((device) => device.id === data.inputDevice);\n\t\tconst selectedOutputDevice = data.outputDevice && availableDevices?.audioOutput?.find((device) => device.id === data.outputDevice);\n\t\ttry {\n\t\t\tselectedInputDevice && changeAudioInputDevice(selectedInputDevice);\n\t\t\tselectedOutputDevice && changeAudioOutputDevice(selectedOutputDevice);\n\t\t\tsetModal();\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Devices_Set') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\treturn (\n\t\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(onSubmit)} {...props} />}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Title>{t('Device_settings')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onCancel} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t{!setSinkIdAvailable && (\n\t\t\t\t\t<Box color='status-font-on-danger' display='flex' flexDirection='column'>\n\t\t\t\t\t\t{t('Device_Changes_Not_Available')}\n\t\t\t\t\t\t<Box is='a' href='https://rocket.chat/download' target='_blank' rel='noopener noreferrer'>\n\t\t\t\t\t\t\t{t('Download_Destkop_App')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t\t{!isDeviceManagementEnabled && (\n\t\t\t\t\t<Box color='status-font-on-danger' display='flex' flexDirection='column'>\n\t\t\t\t\t\t{t('Device_Changes_Not_Available_Insecure_Context')}\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel>{t('Microphone')}</FieldLabel>\n\t\t\t\t\t<FieldRow w='full' display='flex' flexDirection='column' alignItems='stretch'>\n\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\tname='inputDevice'\n\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\trender={({ field }): ReactElement => (\n\t\t\t\t\t\t\t\t<Select disabled={!setSinkIdAvailable} {...field} options={availableInputDevices || []} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel>{t('Speakers')}</FieldLabel>\n\t\t\t\t\t<FieldRow w='full' display='flex' flexDirection='column' alignItems='stretch'>\n\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\tname='outputDevice'\n\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\trender={({ field }): ReactElement => (\n\t\t\t\t\t\t\t\t<Select disabled={!setSinkIdAvailable} {...field} options={availableOutputDevices || []} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={(): void => setModal()}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button disabled={!setSinkIdAvailable} primary onClick={handleSubmit(onSubmit)}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default DeviceSettingsModal;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/voip/modals/DeviceSettingsModal.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/voip/modals/DeviceSettingsModal.tsx","inputSourceMap":{"version":3,"file":"client/voip/modals/DeviceSettingsModal.tsx","sourceRoot":"","sources":["client/voip/modals/DeviceSettingsModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { SelectOption } from '@rocket.chat/fuselage';\nimport { Modal, Field, FieldLabel, FieldRow, Select, Button, Box } from '@rocket.chat/fuselage';\nimport {\n\tuseTranslation,\n\tuseAvailableDevices,\n\tuseToastMessageDispatch,\n\tuseSetModal,\n\tuseSelectedDevices,\n\tuseIsDeviceManagementEnabled,\n} from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useState } from 'react';\nimport type { SubmitHandler } from 'react-hook-form';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport { useChangeAudioInputDevice, useChangeAudioOutputDevice } from '../../contexts/CallContext';\nimport { isSetSinkIdAvailable } from '../../providers/DeviceProvider/lib/isSetSinkIdAvailable';\n\ntype FieldValues = {\n\tinputDevice: string;\n\toutputDevice: string;\n};\n\nconst DeviceSettingsModal = (): ReactElement => {\n\tconst setModal = useSetModal();\n\tconst onCancel = (): void => setModal();\n\tconst isDeviceManagementEnabled = useIsDeviceManagementEnabled();\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst selectedAudioDevices = useSelectedDevices();\n\n\tconst { handleSubmit, control } = useForm<FieldValues>({\n\t\tdefaultValues: {\n\t\t\tinputDevice: selectedAudioDevices?.audioInput?.id || '',\n\t\t\toutputDevice: selectedAudioDevices?.audioOutput?.id || '',\n\t\t},\n\t});\n\tconst [setSinkIdAvailable] = useState(() => isSetSinkIdAvailable());\n\tconst availableDevices = useAvailableDevices();\n\tconst changeAudioInputDevice = useChangeAudioInputDevice();\n\tconst changeAudioOutputDevice = useChangeAudioOutputDevice();\n\n\tconst availableInputDevices: SelectOption[] = availableDevices?.audioInput?.map((device) => [device.id, device.label]) || [];\n\tconst availableOutputDevices: SelectOption[] = availableDevices?.audioOutput?.map((device) => [device.id, device.label]) || [];\n\n\tconst onSubmit: SubmitHandler<FieldValues> = async (data) => {\n\t\tconst selectedInputDevice = data.inputDevice && availableDevices?.audioInput?.find((device) => device.id === data.inputDevice);\n\t\tconst selectedOutputDevice = data.outputDevice && availableDevices?.audioOutput?.find((device) => device.id === data.outputDevice);\n\t\ttry {\n\t\t\tselectedInputDevice && changeAudioInputDevice(selectedInputDevice);\n\t\t\tselectedOutputDevice && changeAudioOutputDevice(selectedOutputDevice);\n\t\t\tsetModal();\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Devices_Set') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\treturn (\n\t\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(onSubmit)} {...props} />}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Title>{t('Device_settings')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onCancel} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t{!setSinkIdAvailable && (\n\t\t\t\t\t<Box color='status-font-on-danger' display='flex' flexDirection='column'>\n\t\t\t\t\t\t{t('Device_Changes_Not_Available')}\n\t\t\t\t\t\t<Box is='a' href='https://rocket.chat/download' target='_blank' rel='noopener noreferrer'>\n\t\t\t\t\t\t\t{t('Download_Destkop_App')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t\t{!isDeviceManagementEnabled && (\n\t\t\t\t\t<Box color='status-font-on-danger' display='flex' flexDirection='column'>\n\t\t\t\t\t\t{t('Device_Changes_Not_Available_Insecure_Context')}\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel>{t('Microphone')}</FieldLabel>\n\t\t\t\t\t<FieldRow w='full' display='flex' flexDirection='column' alignItems='stretch'>\n\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\tname='inputDevice'\n\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\trender={({ field }): ReactElement => (\n\t\t\t\t\t\t\t\t<Select disabled={!setSinkIdAvailable} {...field} options={availableInputDevices || []} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel>{t('Speakers')}</FieldLabel>\n\t\t\t\t\t<FieldRow w='full' display='flex' flexDirection='column' alignItems='stretch'>\n\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\tname='outputDevice'\n\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\trender={({ field }): ReactElement => (\n\t\t\t\t\t\t\t\t<Select disabled={!setSinkIdAvailable} {...field} options={availableOutputDevices || []} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={(): void => setModal()}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button disabled={!setSinkIdAvailable} primary onClick={handleSubmit(onSubmit)}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default DeviceSettingsModal;\n"]}}},"code":"var _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\nvar _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 1);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 2);\nvar Modal, Field, FieldLabel, FieldRow, Select, Button, Box;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Modal: function (v) {\n    Modal = v;\n  },\n  Field: function (v) {\n    Field = v;\n  },\n  FieldLabel: function (v) {\n    FieldLabel = v;\n  },\n  FieldRow: function (v) {\n    FieldRow = v;\n  },\n  Select: function (v) {\n    Select = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  Box: function (v) {\n    Box = v;\n  }\n}, 0);\nvar useTranslation, useAvailableDevices, useToastMessageDispatch, useSetModal, useSelectedDevices, useIsDeviceManagementEnabled;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  },\n  useAvailableDevices: function (v) {\n    useAvailableDevices = v;\n  },\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  },\n  useSetModal: function (v) {\n    useSetModal = v;\n  },\n  useSelectedDevices: function (v) {\n    useSelectedDevices = v;\n  },\n  useIsDeviceManagementEnabled: function (v) {\n    useIsDeviceManagementEnabled = v;\n  }\n}, 1);\nvar React, useState;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 2);\nvar useForm, Controller;\nmodule.link(\"react-hook-form\", {\n  useForm: function (v) {\n    useForm = v;\n  },\n  Controller: function (v) {\n    Controller = v;\n  }\n}, 3);\nvar useChangeAudioInputDevice, useChangeAudioOutputDevice;\nmodule.link(\"../../contexts/CallContext\", {\n  useChangeAudioInputDevice: function (v) {\n    useChangeAudioInputDevice = v;\n  },\n  useChangeAudioOutputDevice: function (v) {\n    useChangeAudioOutputDevice = v;\n  }\n}, 4);\nvar isSetSinkIdAvailable;\nmodule.link(\"../../providers/DeviceProvider/lib/isSetSinkIdAvailable\", {\n  isSetSinkIdAvailable: function (v) {\n    isSetSinkIdAvailable = v;\n  }\n}, 5);\nvar DeviceSettingsModal = function () {\n  var _selectedAudioDevices, _selectedAudioDevices2, _availableDevices$aud, _availableDevices$aud2;\n  var setModal = useSetModal();\n  var onCancel = function () {\n    return setModal();\n  };\n  var isDeviceManagementEnabled = useIsDeviceManagementEnabled();\n  var t = useTranslation();\n  var dispatchToastMessage = useToastMessageDispatch();\n  var selectedAudioDevices = useSelectedDevices();\n  var _useForm = useForm({\n      defaultValues: {\n        inputDevice: (selectedAudioDevices === null || selectedAudioDevices === void 0 ? void 0 : (_selectedAudioDevices = selectedAudioDevices.audioInput) === null || _selectedAudioDevices === void 0 ? void 0 : _selectedAudioDevices.id) || '',\n        outputDevice: (selectedAudioDevices === null || selectedAudioDevices === void 0 ? void 0 : (_selectedAudioDevices2 = selectedAudioDevices.audioOutput) === null || _selectedAudioDevices2 === void 0 ? void 0 : _selectedAudioDevices2.id) || ''\n      }\n    }),\n    handleSubmit = _useForm.handleSubmit,\n    control = _useForm.control;\n  var _useState = useState(function () {\n      return isSetSinkIdAvailable();\n    }),\n    _useState2 = _slicedToArray(_useState, 1),\n    setSinkIdAvailable = _useState2[0];\n  var availableDevices = useAvailableDevices();\n  var changeAudioInputDevice = useChangeAudioInputDevice();\n  var changeAudioOutputDevice = useChangeAudioOutputDevice();\n  var availableInputDevices = (availableDevices === null || availableDevices === void 0 ? void 0 : (_availableDevices$aud = availableDevices.audioInput) === null || _availableDevices$aud === void 0 ? void 0 : _availableDevices$aud.map(function (device) {\n    return [device.id, device.label];\n  })) || [];\n  var availableOutputDevices = (availableDevices === null || availableDevices === void 0 ? void 0 : (_availableDevices$aud2 = availableDevices.audioOutput) === null || _availableDevices$aud2 === void 0 ? void 0 : _availableDevices$aud2.map(function (device) {\n    return [device.id, device.label];\n  })) || [];\n  var onSubmit = function () {\n    function _callee(data) {\n      var _availableDevices$aud3, _availableDevices$aud4;\n      var selectedInputDevice, selectedOutputDevice;\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              selectedInputDevice = data.inputDevice && (availableDevices === null || availableDevices === void 0 ? void 0 : (_availableDevices$aud3 = availableDevices.audioInput) === null || _availableDevices$aud3 === void 0 ? void 0 : _availableDevices$aud3.find(function (device) {\n                return device.id === data.inputDevice;\n              }));\n              selectedOutputDevice = data.outputDevice && (availableDevices === null || availableDevices === void 0 ? void 0 : (_availableDevices$aud4 = availableDevices.audioOutput) === null || _availableDevices$aud4 === void 0 ? void 0 : _availableDevices$aud4.find(function (device) {\n                return device.id === data.outputDevice;\n              }));\n              try {\n                selectedInputDevice && changeAudioInputDevice(selectedInputDevice);\n                selectedOutputDevice && changeAudioOutputDevice(selectedOutputDevice);\n                setModal();\n                dispatchToastMessage({\n                  type: 'success',\n                  message: t('Devices_Set')\n                });\n              } catch (error) {\n                dispatchToastMessage({\n                  type: 'error',\n                  message: error\n                });\n              }\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n        return _callee$;\n      }(), null, null, null, Promise);\n    }\n    return _callee;\n  }();\n  return /*#__PURE__*/React.createElement(Modal, {\n    wrapperFunction: function (props) {\n      return /*#__PURE__*/React.createElement(Box, _extends({\n        is: \"form\",\n        onSubmit: handleSubmit(onSubmit)\n      }, props));\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, null, /*#__PURE__*/React.createElement(Modal.Title, null, t('Device_settings')), /*#__PURE__*/React.createElement(Modal.Close, {\n    onClick: onCancel\n  })), /*#__PURE__*/React.createElement(Modal.Content, {\n    fontScale: \"p2\"\n  }, !setSinkIdAvailable && /*#__PURE__*/React.createElement(Box, {\n    color: \"status-font-on-danger\",\n    display: \"flex\",\n    flexDirection: \"column\"\n  }, t('Device_Changes_Not_Available'), /*#__PURE__*/React.createElement(Box, {\n    is: \"a\",\n    href: \"https://rocket.chat/download\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, t('Download_Destkop_App'))), !isDeviceManagementEnabled && /*#__PURE__*/React.createElement(Box, {\n    color: \"status-font-on-danger\",\n    display: \"flex\",\n    flexDirection: \"column\"\n  }, t('Device_Changes_Not_Available_Insecure_Context')), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, null, t('Microphone')), /*#__PURE__*/React.createElement(FieldRow, {\n    w: \"full\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"stretch\"\n  }, /*#__PURE__*/React.createElement(Controller, {\n    name: \"inputDevice\",\n    control: control,\n    render: function (_ref) {\n      var field = _ref.field;\n      return /*#__PURE__*/React.createElement(Select, _extends({\n        disabled: !setSinkIdAvailable\n      }, field, {\n        options: availableInputDevices || []\n      }));\n    }\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, null, t('Speakers')), /*#__PURE__*/React.createElement(FieldRow, {\n    w: \"full\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"stretch\"\n  }, /*#__PURE__*/React.createElement(Controller, {\n    name: \"outputDevice\",\n    control: control,\n    render: function (_ref2) {\n      var field = _ref2.field;\n      return /*#__PURE__*/React.createElement(Select, _extends({\n        disabled: !setSinkIdAvailable\n      }, field, {\n        options: availableOutputDevices || []\n      }));\n    }\n  })))), /*#__PURE__*/React.createElement(Modal.Footer, null, /*#__PURE__*/React.createElement(Modal.FooterControllers, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: function () {\n      return setModal();\n    }\n  }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    disabled: !setSinkIdAvailable,\n    primary: true,\n    onClick: handleSubmit(onSubmit)\n  }, t('Save')))));\n};\nmodule.exportDefault(DeviceSettingsModal);","map":{"version":3,"names":["_regeneratorRuntime","module","link","default","v","_extends","_slicedToArray","Modal","Field","FieldLabel","FieldRow","Select","Button","Box","useTranslation","useAvailableDevices","useToastMessageDispatch","useSetModal","useSelectedDevices","useIsDeviceManagementEnabled","React","useState","useForm","Controller","useChangeAudioInputDevice","useChangeAudioOutputDevice","isSetSinkIdAvailable","DeviceSettingsModal","_selectedAudioDevices","_selectedAudioDevices2","_availableDevices$aud","_availableDevices$aud2","setModal","onCancel","isDeviceManagementEnabled","t","dispatchToastMessage","selectedAudioDevices","_useForm","defaultValues","inputDevice","audioInput","id","outputDevice","audioOutput","handleSubmit","control","_useState","_useState2","setSinkIdAvailable","availableDevices","changeAudioInputDevice","changeAudioOutputDevice","availableInputDevices","map","device","label","availableOutputDevices","onSubmit","_callee","data","_availableDevices$aud3","_availableDevices$aud4","selectedInputDevice","selectedOutputDevice","async","_callee$","_context","prev","next","find","type","message","error","stop","Promise","createElement","wrapperFunction","props","is","Header","Title","Close","onClick","Content","fontScale","color","display","flexDirection","href","target","rel","w","alignItems","name","render","_ref","field","disabled","options","_ref2","Footer","FooterControllers","primary","exportDefault"],"sources":["client/voip/modals/DeviceSettingsModal.tsx"],"sourcesContent":["import type { SelectOption } from '@rocket.chat/fuselage';\nimport { Modal, Field, FieldLabel, FieldRow, Select, Button, Box } from '@rocket.chat/fuselage';\nimport {\n\tuseTranslation,\n\tuseAvailableDevices,\n\tuseToastMessageDispatch,\n\tuseSetModal,\n\tuseSelectedDevices,\n\tuseIsDeviceManagementEnabled,\n} from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useState } from 'react';\nimport type { SubmitHandler } from 'react-hook-form';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport { useChangeAudioInputDevice, useChangeAudioOutputDevice } from '../../contexts/CallContext';\nimport { isSetSinkIdAvailable } from '../../providers/DeviceProvider/lib/isSetSinkIdAvailable';\n\ntype FieldValues = {\n\tinputDevice: string;\n\toutputDevice: string;\n};\n\nconst DeviceSettingsModal = (): ReactElement => {\n\tconst setModal = useSetModal();\n\tconst onCancel = (): void => setModal();\n\tconst isDeviceManagementEnabled = useIsDeviceManagementEnabled();\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst selectedAudioDevices = useSelectedDevices();\n\n\tconst { handleSubmit, control } = useForm<FieldValues>({\n\t\tdefaultValues: {\n\t\t\tinputDevice: selectedAudioDevices?.audioInput?.id || '',\n\t\t\toutputDevice: selectedAudioDevices?.audioOutput?.id || '',\n\t\t},\n\t});\n\tconst [setSinkIdAvailable] = useState(() => isSetSinkIdAvailable());\n\tconst availableDevices = useAvailableDevices();\n\tconst changeAudioInputDevice = useChangeAudioInputDevice();\n\tconst changeAudioOutputDevice = useChangeAudioOutputDevice();\n\n\tconst availableInputDevices: SelectOption[] = availableDevices?.audioInput?.map((device) => [device.id, device.label]) || [];\n\tconst availableOutputDevices: SelectOption[] = availableDevices?.audioOutput?.map((device) => [device.id, device.label]) || [];\n\n\tconst onSubmit: SubmitHandler<FieldValues> = async (data) => {\n\t\tconst selectedInputDevice = data.inputDevice && availableDevices?.audioInput?.find((device) => device.id === data.inputDevice);\n\t\tconst selectedOutputDevice = data.outputDevice && availableDevices?.audioOutput?.find((device) => device.id === data.outputDevice);\n\t\ttry {\n\t\t\tselectedInputDevice && changeAudioInputDevice(selectedInputDevice);\n\t\t\tselectedOutputDevice && changeAudioOutputDevice(selectedOutputDevice);\n\t\t\tsetModal();\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Devices_Set') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\treturn (\n\t\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(onSubmit)} {...props} />}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Title>{t('Device_settings')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onCancel} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t{!setSinkIdAvailable && (\n\t\t\t\t\t<Box color='status-font-on-danger' display='flex' flexDirection='column'>\n\t\t\t\t\t\t{t('Device_Changes_Not_Available')}\n\t\t\t\t\t\t<Box is='a' href='https://rocket.chat/download' target='_blank' rel='noopener noreferrer'>\n\t\t\t\t\t\t\t{t('Download_Destkop_App')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t\t{!isDeviceManagementEnabled && (\n\t\t\t\t\t<Box color='status-font-on-danger' display='flex' flexDirection='column'>\n\t\t\t\t\t\t{t('Device_Changes_Not_Available_Insecure_Context')}\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel>{t('Microphone')}</FieldLabel>\n\t\t\t\t\t<FieldRow w='full' display='flex' flexDirection='column' alignItems='stretch'>\n\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\tname='inputDevice'\n\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\trender={({ field }): ReactElement => (\n\t\t\t\t\t\t\t\t<Select disabled={!setSinkIdAvailable} {...field} options={availableInputDevices || []} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t\t<Field>\n\t\t\t\t\t<FieldLabel>{t('Speakers')}</FieldLabel>\n\t\t\t\t\t<FieldRow w='full' display='flex' flexDirection='column' alignItems='stretch'>\n\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\tname='outputDevice'\n\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\trender={({ field }): ReactElement => (\n\t\t\t\t\t\t\t\t<Select disabled={!setSinkIdAvailable} {...field} options={availableOutputDevices || []} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FieldRow>\n\t\t\t\t</Field>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={(): void => setModal()}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button disabled={!setSinkIdAvailable} primary onClick={handleSubmit(onSubmit)}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default DeviceSettingsModal;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"ad6b9c4515ae8252d7cc50dfd394d3a706a5e888"}
