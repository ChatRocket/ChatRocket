{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/hooks/useApplyButtonFilters.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/hooks/useApplyButtonFilters.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/hooks/useApplyButtonFilters.ts","inputSourceMap":{"version":3,"file":"client/hooks/useApplyButtonFilters.ts","sourceRoot":"","sources":["client/hooks/useApplyButtonFilters.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IUIActionButton } from '@rocket.chat/apps-engine/definition/ui';\nimport { RoomTypeFilter } from '@rocket.chat/apps-engine/definition/ui';\nimport type { IRoom } from '@rocket.chat/core-typings';\nimport {\n\tisDirectMessageRoom,\n\tisMultipleDirectMessageRoom,\n\tisOmnichannelRoom,\n\tisPrivateDiscussion,\n\tisPrivateTeamRoom,\n\tisPublicDiscussion,\n\tisPublicTeamRoom,\n} from '@rocket.chat/core-typings';\nimport { AuthorizationContext, useUserId } from '@rocket.chat/ui-contexts';\nimport { useCallback, useContext } from 'react';\n\nimport { useRoom } from '../views/room/contexts/RoomContext';\n\nconst enumToFilter: { [k in RoomTypeFilter]: (room: IRoom) => boolean } = {\n\t[RoomTypeFilter.PUBLIC_CHANNEL]: (room) => room.t === 'c',\n\t[RoomTypeFilter.PRIVATE_CHANNEL]: (room) => room.t === 'p',\n\t[RoomTypeFilter.PUBLIC_TEAM]: isPublicTeamRoom,\n\t[RoomTypeFilter.PRIVATE_TEAM]: isPrivateTeamRoom,\n\t[RoomTypeFilter.PUBLIC_DISCUSSION]: isPublicDiscussion,\n\t[RoomTypeFilter.PRIVATE_DISCUSSION]: isPrivateDiscussion,\n\t[RoomTypeFilter.DIRECT]: isDirectMessageRoom,\n\t[RoomTypeFilter.DIRECT_MULTIPLE]: isMultipleDirectMessageRoom,\n\t[RoomTypeFilter.LIVE_CHAT]: isOmnichannelRoom,\n};\n\nconst applyRoomFilter = (button: IUIActionButton, room: IRoom): boolean => {\n\tconst { roomTypes } = button.when || {};\n\treturn !roomTypes || roomTypes.some((filter): boolean => enumToFilter[filter]?.(room));\n};\n\nconst applyCategoryFilter = (button: IUIActionButton, category: string): boolean => {\n\tconst { category: buttonCategory } = button;\n\n\tif (category === 'default') {\n\t\treturn !buttonCategory || buttonCategory === 'default';\n\t}\n\n\treturn buttonCategory === category;\n};\n\nexport const useApplyButtonFilters = (category = 'default'): ((button: IUIActionButton) => boolean) => {\n\tconst room = useRoom();\n\tif (!room) {\n\t\tthrow new Error('useApplyButtonFilters must be used inside a room context');\n\t}\n\tconst applyAuthFilter = useApplyButtonAuthFilter();\n\treturn useCallback(\n\t\t(button: IUIActionButton) =>\n\t\t\tapplyAuthFilter(button) && (!room || applyRoomFilter(button, room)) && applyCategoryFilter(button, category),\n\t\t[applyAuthFilter, category, room],\n\t);\n};\n\nexport const useApplyButtonAuthFilter = (): ((button: IUIActionButton) => boolean) => {\n\tconst uid = useUserId();\n\n\tconst { queryAllPermissions, queryAtLeastOnePermission, queryRole } = useContext(AuthorizationContext);\n\n\treturn useCallback(\n\t\t(button: IUIActionButton, room?: IRoom) => {\n\t\t\tconst { hasAllPermissions, hasOnePermission, hasAllRoles, hasOneRole } = button.when || {};\n\n\t\t\tconst hasAllPermissionsResult = hasAllPermissions ? queryAllPermissions(hasAllPermissions)[1]() : true;\n\t\t\tconst hasOnePermissionResult = hasOnePermission ? queryAtLeastOnePermission(hasOnePermission)[1]() : true;\n\t\t\tconst hasAllRolesResult = hasAllRoles ? !!uid && hasAllRoles.every((role) => queryRole(role, room?._id)) : true;\n\t\t\tconst hasOneRoleResult = hasOneRole ? !!uid && hasOneRole.some((role) => queryRole(role, room?._id)[1]()) : true;\n\n\t\t\treturn hasAllPermissionsResult && hasOnePermissionResult && hasAllRolesResult && hasOneRoleResult;\n\t\t},\n\t\t[queryAllPermissions, queryAtLeastOnePermission, queryRole, uid],\n\t);\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/hooks/useApplyButtonFilters.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/hooks/useApplyButtonFilters.ts","inputSourceMap":{"version":3,"file":"client/hooks/useApplyButtonFilters.ts","sourceRoot":"","sources":["client/hooks/useApplyButtonFilters.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IUIActionButton } from '@rocket.chat/apps-engine/definition/ui';\nimport { RoomTypeFilter } from '@rocket.chat/apps-engine/definition/ui';\nimport type { IRoom } from '@rocket.chat/core-typings';\nimport {\n\tisDirectMessageRoom,\n\tisMultipleDirectMessageRoom,\n\tisOmnichannelRoom,\n\tisPrivateDiscussion,\n\tisPrivateTeamRoom,\n\tisPublicDiscussion,\n\tisPublicTeamRoom,\n} from '@rocket.chat/core-typings';\nimport { AuthorizationContext, useUserId } from '@rocket.chat/ui-contexts';\nimport { useCallback, useContext } from 'react';\n\nimport { useRoom } from '../views/room/contexts/RoomContext';\n\nconst enumToFilter: { [k in RoomTypeFilter]: (room: IRoom) => boolean } = {\n\t[RoomTypeFilter.PUBLIC_CHANNEL]: (room) => room.t === 'c',\n\t[RoomTypeFilter.PRIVATE_CHANNEL]: (room) => room.t === 'p',\n\t[RoomTypeFilter.PUBLIC_TEAM]: isPublicTeamRoom,\n\t[RoomTypeFilter.PRIVATE_TEAM]: isPrivateTeamRoom,\n\t[RoomTypeFilter.PUBLIC_DISCUSSION]: isPublicDiscussion,\n\t[RoomTypeFilter.PRIVATE_DISCUSSION]: isPrivateDiscussion,\n\t[RoomTypeFilter.DIRECT]: isDirectMessageRoom,\n\t[RoomTypeFilter.DIRECT_MULTIPLE]: isMultipleDirectMessageRoom,\n\t[RoomTypeFilter.LIVE_CHAT]: isOmnichannelRoom,\n};\n\nconst applyRoomFilter = (button: IUIActionButton, room: IRoom): boolean => {\n\tconst { roomTypes } = button.when || {};\n\treturn !roomTypes || roomTypes.some((filter): boolean => enumToFilter[filter]?.(room));\n};\n\nconst applyCategoryFilter = (button: IUIActionButton, category: string): boolean => {\n\tconst { category: buttonCategory } = button;\n\n\tif (category === 'default') {\n\t\treturn !buttonCategory || buttonCategory === 'default';\n\t}\n\n\treturn buttonCategory === category;\n};\n\nexport const useApplyButtonFilters = (category = 'default'): ((button: IUIActionButton) => boolean) => {\n\tconst room = useRoom();\n\tif (!room) {\n\t\tthrow new Error('useApplyButtonFilters must be used inside a room context');\n\t}\n\tconst applyAuthFilter = useApplyButtonAuthFilter();\n\treturn useCallback(\n\t\t(button: IUIActionButton) =>\n\t\t\tapplyAuthFilter(button) && (!room || applyRoomFilter(button, room)) && applyCategoryFilter(button, category),\n\t\t[applyAuthFilter, category, room],\n\t);\n};\n\nexport const useApplyButtonAuthFilter = (): ((button: IUIActionButton) => boolean) => {\n\tconst uid = useUserId();\n\n\tconst { queryAllPermissions, queryAtLeastOnePermission, queryRole } = useContext(AuthorizationContext);\n\n\treturn useCallback(\n\t\t(button: IUIActionButton, room?: IRoom) => {\n\t\t\tconst { hasAllPermissions, hasOnePermission, hasAllRoles, hasOneRole } = button.when || {};\n\n\t\t\tconst hasAllPermissionsResult = hasAllPermissions ? queryAllPermissions(hasAllPermissions)[1]() : true;\n\t\t\tconst hasOnePermissionResult = hasOnePermission ? queryAtLeastOnePermission(hasOnePermission)[1]() : true;\n\t\t\tconst hasAllRolesResult = hasAllRoles ? !!uid && hasAllRoles.every((role) => queryRole(role, room?._id)) : true;\n\t\t\tconst hasOneRoleResult = hasOneRole ? !!uid && hasOneRole.some((role) => queryRole(role, room?._id)[1]()) : true;\n\n\t\t\treturn hasAllPermissionsResult && hasOnePermissionResult && hasAllRolesResult && hasOneRoleResult;\n\t\t},\n\t\t[queryAllPermissions, queryAtLeastOnePermission, queryRole, uid],\n\t);\n};\n"]}}},"code":"var _enumToFilter;\nmodule.export({\n  useApplyButtonFilters: function () {\n    return useApplyButtonFilters;\n  },\n  useApplyButtonAuthFilter: function () {\n    return useApplyButtonAuthFilter;\n  }\n});\nvar RoomTypeFilter;\nmodule.link(\"@rocket.chat/apps-engine/definition/ui\", {\n  RoomTypeFilter: function (v) {\n    RoomTypeFilter = v;\n  }\n}, 0);\nvar isDirectMessageRoom, isMultipleDirectMessageRoom, isOmnichannelRoom, isPrivateDiscussion, isPrivateTeamRoom, isPublicDiscussion, isPublicTeamRoom;\nmodule.link(\"@rocket.chat/core-typings\", {\n  isDirectMessageRoom: function (v) {\n    isDirectMessageRoom = v;\n  },\n  isMultipleDirectMessageRoom: function (v) {\n    isMultipleDirectMessageRoom = v;\n  },\n  isOmnichannelRoom: function (v) {\n    isOmnichannelRoom = v;\n  },\n  isPrivateDiscussion: function (v) {\n    isPrivateDiscussion = v;\n  },\n  isPrivateTeamRoom: function (v) {\n    isPrivateTeamRoom = v;\n  },\n  isPublicDiscussion: function (v) {\n    isPublicDiscussion = v;\n  },\n  isPublicTeamRoom: function (v) {\n    isPublicTeamRoom = v;\n  }\n}, 1);\nvar AuthorizationContext, useUserId;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  AuthorizationContext: function (v) {\n    AuthorizationContext = v;\n  },\n  useUserId: function (v) {\n    useUserId = v;\n  }\n}, 2);\nvar useCallback, useContext;\nmodule.link(\"react\", {\n  useCallback: function (v) {\n    useCallback = v;\n  },\n  useContext: function (v) {\n    useContext = v;\n  }\n}, 3);\nvar useRoom;\nmodule.link(\"../views/room/contexts/RoomContext\", {\n  useRoom: function (v) {\n    useRoom = v;\n  }\n}, 4);\nvar enumToFilter = (_enumToFilter = {}, _enumToFilter[RoomTypeFilter.PUBLIC_CHANNEL] = function (room) {\n  return room.t === 'c';\n}, _enumToFilter[RoomTypeFilter.PRIVATE_CHANNEL] = function (room) {\n  return room.t === 'p';\n}, _enumToFilter[RoomTypeFilter.PUBLIC_TEAM] = isPublicTeamRoom, _enumToFilter[RoomTypeFilter.PRIVATE_TEAM] = isPrivateTeamRoom, _enumToFilter[RoomTypeFilter.PUBLIC_DISCUSSION] = isPublicDiscussion, _enumToFilter[RoomTypeFilter.PRIVATE_DISCUSSION] = isPrivateDiscussion, _enumToFilter[RoomTypeFilter.DIRECT] = isDirectMessageRoom, _enumToFilter[RoomTypeFilter.DIRECT_MULTIPLE] = isMultipleDirectMessageRoom, _enumToFilter[RoomTypeFilter.LIVE_CHAT] = isOmnichannelRoom, _enumToFilter);\nvar applyRoomFilter = function (button, room) {\n  var _ref = button.when || {},\n    roomTypes = _ref.roomTypes;\n  return !roomTypes || roomTypes.some(function (filter) {\n    var _enumToFilter$filter;\n    return (_enumToFilter$filter = enumToFilter[filter]) === null || _enumToFilter$filter === void 0 ? void 0 : _enumToFilter$filter.call(enumToFilter, room);\n  });\n};\nvar applyCategoryFilter = function (button, category) {\n  var buttonCategory = button.category;\n  if (category === 'default') {\n    return !buttonCategory || buttonCategory === 'default';\n  }\n  return buttonCategory === category;\n};\nvar useApplyButtonFilters = function () {\n  var category = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'default';\n  var room = useRoom();\n  if (!room) {\n    throw new Error('useApplyButtonFilters must be used inside a room context');\n  }\n  var applyAuthFilter = useApplyButtonAuthFilter();\n  return useCallback(function (button) {\n    return applyAuthFilter(button) && (!room || applyRoomFilter(button, room)) && applyCategoryFilter(button, category);\n  }, [applyAuthFilter, category, room]);\n};\nvar useApplyButtonAuthFilter = function () {\n  var uid = useUserId();\n  var _useContext = useContext(AuthorizationContext),\n    queryAllPermissions = _useContext.queryAllPermissions,\n    queryAtLeastOnePermission = _useContext.queryAtLeastOnePermission,\n    queryRole = _useContext.queryRole;\n  return useCallback(function (button, room) {\n    var _ref2 = button.when || {},\n      hasAllPermissions = _ref2.hasAllPermissions,\n      hasOnePermission = _ref2.hasOnePermission,\n      hasAllRoles = _ref2.hasAllRoles,\n      hasOneRole = _ref2.hasOneRole;\n    var hasAllPermissionsResult = hasAllPermissions ? queryAllPermissions(hasAllPermissions)[1]() : true;\n    var hasOnePermissionResult = hasOnePermission ? queryAtLeastOnePermission(hasOnePermission)[1]() : true;\n    var hasAllRolesResult = hasAllRoles ? !!uid && hasAllRoles.every(function (role) {\n      return queryRole(role, room === null || room === void 0 ? void 0 : room._id);\n    }) : true;\n    var hasOneRoleResult = hasOneRole ? !!uid && hasOneRole.some(function (role) {\n      return queryRole(role, room === null || room === void 0 ? void 0 : room._id)[1]();\n    }) : true;\n    return hasAllPermissionsResult && hasOnePermissionResult && hasAllRolesResult && hasOneRoleResult;\n  }, [queryAllPermissions, queryAtLeastOnePermission, queryRole, uid]);\n};","map":{"version":3,"names":["module","export","useApplyButtonFilters","useApplyButtonAuthFilter","RoomTypeFilter","link","v","isDirectMessageRoom","isMultipleDirectMessageRoom","isOmnichannelRoom","isPrivateDiscussion","isPrivateTeamRoom","isPublicDiscussion","isPublicTeamRoom","AuthorizationContext","useUserId","useCallback","useContext","useRoom","enumToFilter","_enumToFilter","PUBLIC_CHANNEL","room","t","PRIVATE_CHANNEL","PUBLIC_TEAM","PRIVATE_TEAM","PUBLIC_DISCUSSION","PRIVATE_DISCUSSION","DIRECT","DIRECT_MULTIPLE","LIVE_CHAT","applyRoomFilter","button","_ref","when","roomTypes","some","filter","_enumToFilter$filter","call","applyCategoryFilter","category","buttonCategory","arguments","length","undefined","Error","applyAuthFilter","uid","_useContext","queryAllPermissions","queryAtLeastOnePermission","queryRole","_ref2","hasAllPermissions","hasOnePermission","hasAllRoles","hasOneRole","hasAllPermissionsResult","hasOnePermissionResult","hasAllRolesResult","every","role","_id","hasOneRoleResult"],"sources":["client/hooks/useApplyButtonFilters.ts"],"sourcesContent":["import type { IUIActionButton } from '@rocket.chat/apps-engine/definition/ui';\nimport { RoomTypeFilter } from '@rocket.chat/apps-engine/definition/ui';\nimport type { IRoom } from '@rocket.chat/core-typings';\nimport {\n\tisDirectMessageRoom,\n\tisMultipleDirectMessageRoom,\n\tisOmnichannelRoom,\n\tisPrivateDiscussion,\n\tisPrivateTeamRoom,\n\tisPublicDiscussion,\n\tisPublicTeamRoom,\n} from '@rocket.chat/core-typings';\nimport { AuthorizationContext, useUserId } from '@rocket.chat/ui-contexts';\nimport { useCallback, useContext } from 'react';\n\nimport { useRoom } from '../views/room/contexts/RoomContext';\n\nconst enumToFilter: { [k in RoomTypeFilter]: (room: IRoom) => boolean } = {\n\t[RoomTypeFilter.PUBLIC_CHANNEL]: (room) => room.t === 'c',\n\t[RoomTypeFilter.PRIVATE_CHANNEL]: (room) => room.t === 'p',\n\t[RoomTypeFilter.PUBLIC_TEAM]: isPublicTeamRoom,\n\t[RoomTypeFilter.PRIVATE_TEAM]: isPrivateTeamRoom,\n\t[RoomTypeFilter.PUBLIC_DISCUSSION]: isPublicDiscussion,\n\t[RoomTypeFilter.PRIVATE_DISCUSSION]: isPrivateDiscussion,\n\t[RoomTypeFilter.DIRECT]: isDirectMessageRoom,\n\t[RoomTypeFilter.DIRECT_MULTIPLE]: isMultipleDirectMessageRoom,\n\t[RoomTypeFilter.LIVE_CHAT]: isOmnichannelRoom,\n};\n\nconst applyRoomFilter = (button: IUIActionButton, room: IRoom): boolean => {\n\tconst { roomTypes } = button.when || {};\n\treturn !roomTypes || roomTypes.some((filter): boolean => enumToFilter[filter]?.(room));\n};\n\nconst applyCategoryFilter = (button: IUIActionButton, category: string): boolean => {\n\tconst { category: buttonCategory } = button;\n\n\tif (category === 'default') {\n\t\treturn !buttonCategory || buttonCategory === 'default';\n\t}\n\n\treturn buttonCategory === category;\n};\n\nexport const useApplyButtonFilters = (category = 'default'): ((button: IUIActionButton) => boolean) => {\n\tconst room = useRoom();\n\tif (!room) {\n\t\tthrow new Error('useApplyButtonFilters must be used inside a room context');\n\t}\n\tconst applyAuthFilter = useApplyButtonAuthFilter();\n\treturn useCallback(\n\t\t(button: IUIActionButton) =>\n\t\t\tapplyAuthFilter(button) && (!room || applyRoomFilter(button, room)) && applyCategoryFilter(button, category),\n\t\t[applyAuthFilter, category, room],\n\t);\n};\n\nexport const useApplyButtonAuthFilter = (): ((button: IUIActionButton) => boolean) => {\n\tconst uid = useUserId();\n\n\tconst { queryAllPermissions, queryAtLeastOnePermission, queryRole } = useContext(AuthorizationContext);\n\n\treturn useCallback(\n\t\t(button: IUIActionButton, room?: IRoom) => {\n\t\t\tconst { hasAllPermissions, hasOnePermission, hasAllRoles, hasOneRole } = button.when || {};\n\n\t\t\tconst hasAllPermissionsResult = hasAllPermissions ? queryAllPermissions(hasAllPermissions)[1]() : true;\n\t\t\tconst hasOnePermissionResult = hasOnePermission ? queryAtLeastOnePermission(hasOnePermission)[1]() : true;\n\t\t\tconst hasAllRolesResult = hasAllRoles ? !!uid && hasAllRoles.every((role) => queryRole(role, room?._id)) : true;\n\t\t\tconst hasOneRoleResult = hasOneRole ? !!uid && hasOneRole.some((role) => queryRole(role, room?._id)[1]()) : true;\n\n\t\t\treturn hasAllPermissionsResult && hasOnePermissionResult && hasAllRolesResult && hasOneRoleResult;\n\t\t},\n\t\t[queryAllPermissions, queryAtLeastOnePermission, queryRole, uid],\n\t);\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"6c56961b0127f8f89bbd430fd3119633cf05ba27"}
