{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/account/security/EndToEnd.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/account/security/EndToEnd.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/account/security/EndToEnd.tsx","inputSourceMap":{"version":3,"file":"client/views/account/security/EndToEnd.tsx","sourceRoot":"","sources":["client/views/account/security/EndToEnd.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, Margins, PasswordInput, Field, FieldGroup, FieldLabel, FieldRow, FieldError, FieldHint, Button } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useMethod, useTranslation, useLogout } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React, { useCallback, useEffect } from 'react';\nimport { Controller, useForm } from 'react-hook-form';\n\nimport { e2e } from '../../../../app/e2e/client/rocketchat.e2e';\n\nconst EndToEnd = (props: ComponentProps<typeof Box>): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst logout = useLogout();\n\n\tconst publicKey = localStorage.getItem('public_key');\n\tconst privateKey = localStorage.getItem('private_key');\n\n\tconst resetE2eKey = useMethod('e2e.resetOwnE2EKey');\n\n\tconst {\n\t\thandleSubmit,\n\t\twatch,\n\t\tresetField,\n\t\tformState: { errors, isValid },\n\t\tcontrol,\n\t} = useForm({\n\t\tdefaultValues: {\n\t\t\tpassword: '',\n\t\t\tpasswordConfirm: '',\n\t\t},\n\t\tmode: 'all',\n\t});\n\n\tconst { password } = watch();\n\n\tconst keysExist = Boolean(publicKey && privateKey);\n\n\tconst hasTypedPassword = Boolean(password?.trim().length);\n\n\tconst saveNewPassword = async (data: { password: string; passwordConfirm: string }) => {\n\t\ttry {\n\t\t\tawait e2e.changePassword(data.password);\n\t\t\tresetField('password');\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Encryption_key_saved_successfully') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\tconst handleResetE2eKey = useCallback(async () => {\n\t\ttry {\n\t\t\tconst result = await resetE2eKey();\n\t\t\tif (result) {\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_e2e_key_was_reset') });\n\t\t\t\tlogout();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [dispatchToastMessage, resetE2eKey, logout, t]);\n\n\tuseEffect(() => {\n\t\tif (password?.trim() === '') {\n\t\t\tresetField('passwordConfirm');\n\t\t}\n\t}, [password, resetField]);\n\n\tconst passwordId = useUniqueId();\n\tconst e2ePasswordExplanationId = useUniqueId();\n\tconst passwordConfirmId = useUniqueId();\n\n\treturn (\n\t\t<Box display='flex' flexDirection='column' alignItems='flex-start' mbs={16} {...props}>\n\t\t\t<Margins blockEnd={8}>\n\t\t\t\t<Box fontScale='h4'>{t('E2E_Encryption_Password_Change')}</Box>\n\t\t\t\t<Box id={e2ePasswordExplanationId} dangerouslySetInnerHTML={{ __html: t('E2E_Encryption_Password_Explanation') }} />\n\t\t\t\t<FieldGroup w='full'>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel htmlFor={passwordId}>{t('New_encryption_password')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\tname='password'\n\t\t\t\t\t\t\t\trules={{ required: t('Required_field', { field: t('New_encryption_password') }) }}\n\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t<PasswordInput\n\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\tid={passwordId}\n\t\t\t\t\t\t\t\t\t\terror={errors.password?.message}\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('New_Password_Placeholder')}\n\t\t\t\t\t\t\t\t\t\tdisabled={!keysExist}\n\t\t\t\t\t\t\t\t\t\taria-describedby={`${e2ePasswordExplanationId} ${passwordId}-hint ${passwordId}-error`}\n\t\t\t\t\t\t\t\t\t\taria-invalid={errors.password ? 'true' : 'false'}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t{!keysExist && <FieldHint id={`${passwordId}-hint`}>{t('EncryptionKey_Change_Disabled')}</FieldHint>}\n\t\t\t\t\t\t{errors?.password && (\n\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${passwordId}-error`}>\n\t\t\t\t\t\t\t\t{errors.password.message}\n\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Field>\n\t\t\t\t\t{hasTypedPassword && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={passwordConfirmId}>{t('Confirm_new_encryption_password')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\tname='passwordConfirm'\n\t\t\t\t\t\t\t\t\trules={{\n\t\t\t\t\t\t\t\t\t\trequired: t('Required_field', { field: t('Confirm_new_encryption_password') }),\n\t\t\t\t\t\t\t\t\t\tvalidate: (value: string) => (password !== value ? 'Your passwords do no match' : true),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t<PasswordInput\n\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\tid={passwordConfirmId}\n\t\t\t\t\t\t\t\t\t\t\terror={errors.passwordConfirm?.message}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Confirm_New_Password_Placeholder')}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${passwordConfirmId}-error`}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={errors.password ? 'true' : 'false'}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors.passwordConfirm && (\n\t\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${passwordConfirmId}-error`}>\n\t\t\t\t\t\t\t\t\t{errors.passwordConfirm.message}\n\t\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t</FieldGroup>\n\t\t\t\t<Button\n\t\t\t\t\tprimary\n\t\t\t\t\tdisabled={!(keysExist && isValid)}\n\t\t\t\t\tonClick={handleSubmit(saveNewPassword)}\n\t\t\t\t\tdata-qa-type='e2e-encryption-save-password-button'\n\t\t\t\t>\n\t\t\t\t\t{t('Save_changes')}\n\t\t\t\t</Button>\n\t\t\t\t<Box fontScale='h4' mbs={16}>\n\t\t\t\t\t{t('Reset_E2E_Key')}\n\t\t\t\t</Box>\n\t\t\t\t<Box dangerouslySetInnerHTML={{ __html: t('E2E_Reset_Key_Explanation') }} />\n\t\t\t\t<Button onClick={handleResetE2eKey} data-qa-type='e2e-encryption-reset-key-button'>\n\t\t\t\t\t{t('Reset_E2E_Key')}\n\t\t\t\t</Button>\n\t\t\t</Margins>\n\t\t</Box>\n\t);\n};\n\nexport default EndToEnd;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/account/security/EndToEnd.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/account/security/EndToEnd.tsx","inputSourceMap":{"version":3,"file":"client/views/account/security/EndToEnd.tsx","sourceRoot":"","sources":["client/views/account/security/EndToEnd.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,GAAG,EAAE,OAAO,EAAE,aAAa,EAAE,KAAK,EAAE,UAAU,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,uBAAuB,CAAC;AAC5I,OAAO,EAAE,WAAW,EAAE,MAAM,6BAA6B,CAAC;AAC1D,OAAO,EAAE,uBAAuB,EAAE,SAAS,EAAE,cAAc,EAAE,SAAS,EAAE,MAAM,0BAA0B,CAAC;AAEzG,OAAO,KAAK,EAAE,EAAE,WAAW,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AACtD,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,iBAAiB,CAAC;AAEtD,OAAO,EAAE,GAAG,EAAE,MAAM,2CAA2C,CAAC;AAEhE,MAAM,QAAQ,GAAG,CAAC,KAAiC,EAAgB,EAAE;IACpE,MAAM,CAAC,GAAG,cAAc,EAAE,CAAC;IAC3B,MAAM,oBAAoB,GAAG,uBAAuB,EAAE,CAAC;IACvD,MAAM,MAAM,GAAG,SAAS,EAAE,CAAC;IAE3B,MAAM,SAAS,GAAG,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;IACrD,MAAM,UAAU,GAAG,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;IAEvD,MAAM,WAAW,GAAG,SAAS,CAAC,oBAAoB,CAAC,CAAC;IAEpD,MAAM,EACL,YAAY,EACZ,KAAK,EACL,UAAU,EACV,SAAS,EAAE,EAAE,MAAM,EAAE,OAAO,EAAE,EAC9B,OAAO,GACP,GAAG,OAAO,CAAC;QACX,aAAa,EAAE;YACd,QAAQ,EAAE,EAAE;YACZ,eAAe,EAAE,EAAE;SACnB;QACD,IAAI,EAAE,KAAK;KACX,CAAC,CAAC;IAEH,MAAM,EAAE,QAAQ,EAAE,GAAG,KAAK,EAAE,CAAC;IAE7B,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,IAAI,UAAU,CAAC,CAAC;IAEnD,MAAM,gBAAgB,GAAG,OAAO,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC,MAAM,CAAC,CAAC;IAE1D,MAAM,eAAe,GAAG,KAAK,EAAE,IAAmD,EAAE,EAAE;QACrF,IAAI,CAAC;YACJ,MAAM,GAAG,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACxC,UAAU,CAAC,UAAU,CAAC,CAAC;YACvB,oBAAoB,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,CAAC,mCAAmC,CAAC,EAAE,CAAC,CAAC;QAC5F,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YAChB,oBAAoB,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QACzD,CAAC;IACF,CAAC,CAAC;IAEF,MAAM,iBAAiB,GAAG,WAAW,CAAC,KAAK,IAAI,EAAE;QAChD,IAAI,CAAC;YACJ,MAAM,MAAM,GAAG,MAAM,WAAW,EAAE,CAAC;YACnC,IAAI,MAAM,EAAE,CAAC;gBACZ,oBAAoB,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,CAAC,wBAAwB,CAAC,EAAE,CAAC,CAAC;gBAChF,MAAM,EAAE,CAAC;YACV,CAAC;QACF,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YAChB,oBAAoB,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QACzD,CAAC;IACF,CAAC,EAAE,CAAC,oBAAoB,EAAE,WAAW,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;IAEnD,SAAS,CAAC,GAAG,EAAE;QACd,IAAI,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC;YAC7B,UAAU,CAAC,iBAAiB,CAAC,CAAC;QAC/B,CAAC;IACF,CAAC,EAAE,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC,CAAC;IAE3B,MAAM,UAAU,GAAG,WAAW,EAAE,CAAC;IACjC,MAAM,wBAAwB,GAAG,WAAW,EAAE,CAAC;IAC/C,MAAM,iBAAiB,GAAG,WAAW,EAAE,CAAC;IAExC,OAAO,CACN,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,UAAU,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,KAAK,CAAC,CACrF;GAAA,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CACpB;IAAA,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,gCAAgC,CAAC,CAAC,EAAE,GAAG,CAC9D;IAAA,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,wBAAwB,CAAC,CAAC,uBAAuB,CAAC,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC,qCAAqC,CAAC,EAAE,CAAC,EACjH;IAAA,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CACnB;KAAA,CAAC,KAAK,CACL;MAAA,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,yBAAyB,CAAC,CAAC,EAAE,UAAU,CAC3E;MAAA,CAAC,QAAQ,CACR;OAAA,CAAC,UAAU,CACV,OAAO,CAAC,CAAC,OAAO,CAAC,CACjB,IAAI,CAAC,UAAU,CACf,KAAK,CAAC,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC,gBAAgB,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC,yBAAyB,CAAC,EAAE,CAAC,EAAE,CAAC,CAClF,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,CACtB,CAAC,aAAa,CACb,IAAI,KAAK,CAAC,CACV,EAAE,CAAC,CAAC,UAAU,CAAC,CACf,KAAK,CAAC,CAAC,MAAM,CAAC,QAAQ,EAAE,OAAO,CAAC,CAChC,WAAW,CAAC,CAAC,CAAC,CAAC,0BAA0B,CAAC,CAAC,CAC3C,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,CACrB,gBAAgB,CAAC,CAAC,GAAG,wBAAwB,IAAI,UAAU,SAAS,UAAU,QAAQ,CAAC,CACvF,YAAY,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,EAChD,CACF,CAAC,EAEJ;MAAA,EAAE,QAAQ,CACV;MAAA,CAAC,CAAC,SAAS,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,GAAG,UAAU,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,+BAA+B,CAAC,CAAC,EAAE,SAAS,CAAC,CACpG;MAAA,CAAC,MAAM,EAAE,QAAQ,IAAI,CACpB,CAAC,UAAU,CAAC,SAAS,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,GAAG,UAAU,QAAQ,CAAC,CAC3D;QAAA,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO,CACzB;OAAA,EAAE,UAAU,CAAC,CACb,CACF;KAAA,EAAE,KAAK,CACP;KAAA,CAAC,gBAAgB,IAAI,CACpB,CAAC,KAAK,CACL;OAAA,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC,iCAAiC,CAAC,CAAC,EAAE,UAAU,CAC1F;OAAA,CAAC,QAAQ,CACR;QAAA,CAAC,UAAU,CACV,OAAO,CAAC,CAAC,OAAO,CAAC,CACjB,IAAI,CAAC,iBAAiB,CACtB,KAAK,CAAC,CAAC;gBACN,QAAQ,EAAE,CAAC,CAAC,gBAAgB,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC,iCAAiC,CAAC,EAAE,CAAC;gBAC9E,QAAQ,EAAE,CAAC,KAAa,EAAE,EAAE,CAAC,CAAC,QAAQ,KAAK,KAAK,CAAC,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC,IAAI,CAAC;aACvF,CAAC,CACF,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,CACtB,CAAC,aAAa,CACb,IAAI,KAAK,CAAC,CACV,EAAE,CAAC,CAAC,iBAAiB,CAAC,CACtB,KAAK,CAAC,CAAC,MAAM,CAAC,eAAe,EAAE,OAAO,CAAC,CACvC,WAAW,CAAC,CAAC,CAAC,CAAC,kCAAkC,CAAC,CAAC,CACnD,gBAAgB,CAAC,CAAC,GAAG,iBAAiB,QAAQ,CAAC,CAC/C,YAAY,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,EAChD,CACF,CAAC,EAEJ;OAAA,EAAE,QAAQ,CACV;OAAA,CAAC,MAAM,CAAC,eAAe,IAAI,CAC1B,CAAC,UAAU,CAAC,SAAS,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,GAAG,iBAAiB,QAAQ,CAAC,CAClE;SAAA,CAAC,MAAM,CAAC,eAAe,CAAC,OAAO,CAChC;QAAA,EAAE,UAAU,CAAC,CACb,CACF;MAAA,EAAE,KAAK,CAAC,CACR,CACF;IAAA,EAAE,UAAU,CACZ;IAAA,CAAC,MAAM,CACN,OAAO,CACP,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,IAAI,OAAO,CAAC,CAAC,CAClC,OAAO,CAAC,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC,CACvC,YAAY,CAAC,qCAAqC,CAElD;KAAA,CAAC,CAAC,CAAC,cAAc,CAAC,CACnB;IAAA,EAAE,MAAM,CACR;IAAA,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAC3B;KAAA,CAAC,CAAC,CAAC,eAAe,CAAC,CACpB;IAAA,EAAE,GAAG,CACL;IAAA,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC,2BAA2B,CAAC,EAAE,CAAC,EACzE;IAAA,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,iBAAiB,CAAC,CAAC,YAAY,CAAC,iCAAiC,CACjF;KAAA,CAAC,CAAC,CAAC,eAAe,CAAC,CACpB;IAAA,EAAE,MAAM,CACT;GAAA,EAAE,OAAO,CACV;EAAA,EAAE,GAAG,CAAC,CACN,CAAC;AACH,CAAC,CAAC;AAEF,eAAe,QAAQ,CAAC","sourcesContent":["import { Box, Margins, PasswordInput, Field, FieldGroup, FieldLabel, FieldRow, FieldError, FieldHint, Button } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useMethod, useTranslation, useLogout } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React, { useCallback, useEffect } from 'react';\nimport { Controller, useForm } from 'react-hook-form';\n\nimport { e2e } from '../../../../app/e2e/client/rocketchat.e2e';\n\nconst EndToEnd = (props: ComponentProps<typeof Box>): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst logout = useLogout();\n\n\tconst publicKey = localStorage.getItem('public_key');\n\tconst privateKey = localStorage.getItem('private_key');\n\n\tconst resetE2eKey = useMethod('e2e.resetOwnE2EKey');\n\n\tconst {\n\t\thandleSubmit,\n\t\twatch,\n\t\tresetField,\n\t\tformState: { errors, isValid },\n\t\tcontrol,\n\t} = useForm({\n\t\tdefaultValues: {\n\t\t\tpassword: '',\n\t\t\tpasswordConfirm: '',\n\t\t},\n\t\tmode: 'all',\n\t});\n\n\tconst { password } = watch();\n\n\tconst keysExist = Boolean(publicKey && privateKey);\n\n\tconst hasTypedPassword = Boolean(password?.trim().length);\n\n\tconst saveNewPassword = async (data: { password: string; passwordConfirm: string }) => {\n\t\ttry {\n\t\t\tawait e2e.changePassword(data.password);\n\t\t\tresetField('password');\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Encryption_key_saved_successfully') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\tconst handleResetE2eKey = useCallback(async () => {\n\t\ttry {\n\t\t\tconst result = await resetE2eKey();\n\t\t\tif (result) {\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_e2e_key_was_reset') });\n\t\t\t\tlogout();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [dispatchToastMessage, resetE2eKey, logout, t]);\n\n\tuseEffect(() => {\n\t\tif (password?.trim() === '') {\n\t\t\tresetField('passwordConfirm');\n\t\t}\n\t}, [password, resetField]);\n\n\tconst passwordId = useUniqueId();\n\tconst e2ePasswordExplanationId = useUniqueId();\n\tconst passwordConfirmId = useUniqueId();\n\n\treturn (\n\t\t<Box display='flex' flexDirection='column' alignItems='flex-start' mbs={16} {...props}>\n\t\t\t<Margins blockEnd={8}>\n\t\t\t\t<Box fontScale='h4'>{t('E2E_Encryption_Password_Change')}</Box>\n\t\t\t\t<Box id={e2ePasswordExplanationId} dangerouslySetInnerHTML={{ __html: t('E2E_Encryption_Password_Explanation') }} />\n\t\t\t\t<FieldGroup w='full'>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel htmlFor={passwordId}>{t('New_encryption_password')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\tname='password'\n\t\t\t\t\t\t\t\trules={{ required: t('Required_field', { field: t('New_encryption_password') }) }}\n\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t<PasswordInput\n\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\tid={passwordId}\n\t\t\t\t\t\t\t\t\t\terror={errors.password?.message}\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('New_Password_Placeholder')}\n\t\t\t\t\t\t\t\t\t\tdisabled={!keysExist}\n\t\t\t\t\t\t\t\t\t\taria-describedby={`${e2ePasswordExplanationId} ${passwordId}-hint ${passwordId}-error`}\n\t\t\t\t\t\t\t\t\t\taria-invalid={errors.password ? 'true' : 'false'}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t{!keysExist && <FieldHint id={`${passwordId}-hint`}>{t('EncryptionKey_Change_Disabled')}</FieldHint>}\n\t\t\t\t\t\t{errors?.password && (\n\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${passwordId}-error`}>\n\t\t\t\t\t\t\t\t{errors.password.message}\n\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Field>\n\t\t\t\t\t{hasTypedPassword && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={passwordConfirmId}>{t('Confirm_new_encryption_password')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\tname='passwordConfirm'\n\t\t\t\t\t\t\t\t\trules={{\n\t\t\t\t\t\t\t\t\t\trequired: t('Required_field', { field: t('Confirm_new_encryption_password') }),\n\t\t\t\t\t\t\t\t\t\tvalidate: (value: string) => (password !== value ? 'Your passwords do no match' : true),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t<PasswordInput\n\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\tid={passwordConfirmId}\n\t\t\t\t\t\t\t\t\t\t\terror={errors.passwordConfirm?.message}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Confirm_New_Password_Placeholder')}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${passwordConfirmId}-error`}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={errors.password ? 'true' : 'false'}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors.passwordConfirm && (\n\t\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${passwordConfirmId}-error`}>\n\t\t\t\t\t\t\t\t\t{errors.passwordConfirm.message}\n\t\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t</FieldGroup>\n\t\t\t\t<Button\n\t\t\t\t\tprimary\n\t\t\t\t\tdisabled={!(keysExist && isValid)}\n\t\t\t\t\tonClick={handleSubmit(saveNewPassword)}\n\t\t\t\t\tdata-qa-type='e2e-encryption-save-password-button'\n\t\t\t\t>\n\t\t\t\t\t{t('Save_changes')}\n\t\t\t\t</Button>\n\t\t\t\t<Box fontScale='h4' mbs={16}>\n\t\t\t\t\t{t('Reset_E2E_Key')}\n\t\t\t\t</Box>\n\t\t\t\t<Box dangerouslySetInnerHTML={{ __html: t('E2E_Reset_Key_Explanation') }} />\n\t\t\t\t<Button onClick={handleResetE2eKey} data-qa-type='e2e-encryption-reset-key-button'>\n\t\t\t\t\t{t('Reset_E2E_Key')}\n\t\t\t\t</Button>\n\t\t\t</Margins>\n\t\t</Box>\n\t);\n};\n\nexport default EndToEnd;\n"]}}},"code":"let _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet Box, Margins, PasswordInput, Field, FieldGroup, FieldLabel, FieldRow, FieldError, FieldHint, Button;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box(v) {\n    Box = v;\n  },\n  Margins(v) {\n    Margins = v;\n  },\n  PasswordInput(v) {\n    PasswordInput = v;\n  },\n  Field(v) {\n    Field = v;\n  },\n  FieldGroup(v) {\n    FieldGroup = v;\n  },\n  FieldLabel(v) {\n    FieldLabel = v;\n  },\n  FieldRow(v) {\n    FieldRow = v;\n  },\n  FieldError(v) {\n    FieldError = v;\n  },\n  FieldHint(v) {\n    FieldHint = v;\n  },\n  Button(v) {\n    Button = v;\n  }\n}, 0);\nlet useUniqueId;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useUniqueId(v) {\n    useUniqueId = v;\n  }\n}, 1);\nlet useToastMessageDispatch, useMethod, useTranslation, useLogout;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useToastMessageDispatch(v) {\n    useToastMessageDispatch = v;\n  },\n  useMethod(v) {\n    useMethod = v;\n  },\n  useTranslation(v) {\n    useTranslation = v;\n  },\n  useLogout(v) {\n    useLogout = v;\n  }\n}, 2);\nlet React, useCallback, useEffect;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  }\n}, 3);\nlet Controller, useForm;\nmodule.link(\"react-hook-form\", {\n  Controller(v) {\n    Controller = v;\n  },\n  useForm(v) {\n    useForm = v;\n  }\n}, 4);\nlet e2e;\nmodule.link(\"../../../../app/e2e/client/rocketchat.e2e\", {\n  e2e(v) {\n    e2e = v;\n  }\n}, 5);\nconst EndToEnd = props => {\n  const t = useTranslation();\n  const dispatchToastMessage = useToastMessageDispatch();\n  const logout = useLogout();\n  const publicKey = localStorage.getItem('public_key');\n  const privateKey = localStorage.getItem('private_key');\n  const resetE2eKey = useMethod('e2e.resetOwnE2EKey');\n  const {\n    handleSubmit,\n    watch,\n    resetField,\n    formState: {\n      errors,\n      isValid\n    },\n    control\n  } = useForm({\n    defaultValues: {\n      password: '',\n      passwordConfirm: ''\n    },\n    mode: 'all'\n  });\n  const {\n    password\n  } = watch();\n  const keysExist = Boolean(publicKey && privateKey);\n  const hasTypedPassword = Boolean(password === null || password === void 0 ? void 0 : password.trim().length);\n  const saveNewPassword = async data => {\n    try {\n      await e2e.changePassword(data.password);\n      resetField('password');\n      dispatchToastMessage({\n        type: 'success',\n        message: t('Encryption_key_saved_successfully')\n      });\n    } catch (error) {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    }\n  };\n  const handleResetE2eKey = useCallback(async () => {\n    try {\n      const result = await resetE2eKey();\n      if (result) {\n        dispatchToastMessage({\n          type: 'success',\n          message: t('User_e2e_key_was_reset')\n        });\n        logout();\n      }\n    } catch (error) {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    }\n  }, [dispatchToastMessage, resetE2eKey, logout, t]);\n  useEffect(() => {\n    if ((password === null || password === void 0 ? void 0 : password.trim()) === '') {\n      resetField('passwordConfirm');\n    }\n  }, [password, resetField]);\n  const passwordId = useUniqueId();\n  const e2ePasswordExplanationId = useUniqueId();\n  const passwordConfirmId = useUniqueId();\n  return /*#__PURE__*/React.createElement(Box, _extends({\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"flex-start\",\n    mbs: 16\n  }, props), /*#__PURE__*/React.createElement(Margins, {\n    blockEnd: 8\n  }, /*#__PURE__*/React.createElement(Box, {\n    fontScale: \"h4\"\n  }, t('E2E_Encryption_Password_Change')), /*#__PURE__*/React.createElement(Box, {\n    id: e2ePasswordExplanationId,\n    dangerouslySetInnerHTML: {\n      __html: t('E2E_Encryption_Password_Explanation')\n    }\n  }), /*#__PURE__*/React.createElement(FieldGroup, {\n    w: \"full\"\n  }, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, {\n    htmlFor: passwordId\n  }, t('New_encryption_password')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(Controller, {\n    control: control,\n    name: \"password\",\n    rules: {\n      required: t('Required_field', {\n        field: t('New_encryption_password')\n      })\n    },\n    render: _ref => {\n      var _errors$password;\n      let {\n        field\n      } = _ref;\n      return /*#__PURE__*/React.createElement(PasswordInput, _extends({}, field, {\n        id: passwordId,\n        error: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message,\n        placeholder: t('New_Password_Placeholder'),\n        disabled: !keysExist,\n        \"aria-describedby\": \"\".concat(e2ePasswordExplanationId, \" \").concat(passwordId, \"-hint \").concat(passwordId, \"-error\"),\n        \"aria-invalid\": errors.password ? 'true' : 'false'\n      }));\n    }\n  })), !keysExist && /*#__PURE__*/React.createElement(FieldHint, {\n    id: \"\".concat(passwordId, \"-hint\")\n  }, t('EncryptionKey_Change_Disabled')), (errors === null || errors === void 0 ? void 0 : errors.password) && /*#__PURE__*/React.createElement(FieldError, {\n    \"aria-live\": \"assertive\",\n    id: \"\".concat(passwordId, \"-error\")\n  }, errors.password.message)), hasTypedPassword && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, {\n    htmlFor: passwordConfirmId\n  }, t('Confirm_new_encryption_password')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(Controller, {\n    control: control,\n    name: \"passwordConfirm\",\n    rules: {\n      required: t('Required_field', {\n        field: t('Confirm_new_encryption_password')\n      }),\n      validate: value => password !== value ? 'Your passwords do no match' : true\n    },\n    render: _ref2 => {\n      var _errors$passwordConfi;\n      let {\n        field\n      } = _ref2;\n      return /*#__PURE__*/React.createElement(PasswordInput, _extends({}, field, {\n        id: passwordConfirmId,\n        error: (_errors$passwordConfi = errors.passwordConfirm) === null || _errors$passwordConfi === void 0 ? void 0 : _errors$passwordConfi.message,\n        placeholder: t('Confirm_New_Password_Placeholder'),\n        \"aria-describedby\": \"\".concat(passwordConfirmId, \"-error\"),\n        \"aria-invalid\": errors.password ? 'true' : 'false'\n      }));\n    }\n  })), errors.passwordConfirm && /*#__PURE__*/React.createElement(FieldError, {\n    \"aria-live\": \"assertive\",\n    id: \"\".concat(passwordConfirmId, \"-error\")\n  }, errors.passwordConfirm.message))), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    disabled: !(keysExist && isValid),\n    onClick: handleSubmit(saveNewPassword),\n    \"data-qa-type\": \"e2e-encryption-save-password-button\"\n  }, t('Save_changes')), /*#__PURE__*/React.createElement(Box, {\n    fontScale: \"h4\",\n    mbs: 16\n  }, t('Reset_E2E_Key')), /*#__PURE__*/React.createElement(Box, {\n    dangerouslySetInnerHTML: {\n      __html: t('E2E_Reset_Key_Explanation')\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleResetE2eKey,\n    \"data-qa-type\": \"e2e-encryption-reset-key-button\"\n  }, t('Reset_E2E_Key'))));\n};\nmodule.exportDefault(EndToEnd);","map":{"version":3,"names":["_extends","module","link","default","v","Box","Margins","PasswordInput","Field","FieldGroup","FieldLabel","FieldRow","FieldError","FieldHint","Button","useUniqueId","useToastMessageDispatch","useMethod","useTranslation","useLogout","React","useCallback","useEffect","Controller","useForm","e2e","EndToEnd","props","t","dispatchToastMessage","logout","publicKey","localStorage","getItem","privateKey","resetE2eKey","handleSubmit","watch","resetField","formState","errors","isValid","control","defaultValues","password","passwordConfirm","mode","keysExist","Boolean","hasTypedPassword","trim","length","saveNewPassword","data","changePassword","type","message","error","handleResetE2eKey","result","passwordId","e2ePasswordExplanationId","passwordConfirmId","createElement","display","flexDirection","alignItems","mbs","blockEnd","fontScale","id","dangerouslySetInnerHTML","__html","w","htmlFor","name","rules","required","field","render","_ref","_errors$password","placeholder","disabled","concat","validate","value","_ref2","_errors$passwordConfi","primary","onClick","exportDefault"],"sources":["client/views/account/security/EndToEnd.tsx"],"sourcesContent":["import { Box, Margins, PasswordInput, Field, FieldGroup, FieldLabel, FieldRow, FieldError, FieldHint, Button } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useMethod, useTranslation, useLogout } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React, { useCallback, useEffect } from 'react';\nimport { Controller, useForm } from 'react-hook-form';\n\nimport { e2e } from '../../../../app/e2e/client/rocketchat.e2e';\n\nconst EndToEnd = (props: ComponentProps<typeof Box>): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst logout = useLogout();\n\n\tconst publicKey = localStorage.getItem('public_key');\n\tconst privateKey = localStorage.getItem('private_key');\n\n\tconst resetE2eKey = useMethod('e2e.resetOwnE2EKey');\n\n\tconst {\n\t\thandleSubmit,\n\t\twatch,\n\t\tresetField,\n\t\tformState: { errors, isValid },\n\t\tcontrol,\n\t} = useForm({\n\t\tdefaultValues: {\n\t\t\tpassword: '',\n\t\t\tpasswordConfirm: '',\n\t\t},\n\t\tmode: 'all',\n\t});\n\n\tconst { password } = watch();\n\n\tconst keysExist = Boolean(publicKey && privateKey);\n\n\tconst hasTypedPassword = Boolean(password?.trim().length);\n\n\tconst saveNewPassword = async (data: { password: string; passwordConfirm: string }) => {\n\t\ttry {\n\t\t\tawait e2e.changePassword(data.password);\n\t\t\tresetField('password');\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Encryption_key_saved_successfully') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\tconst handleResetE2eKey = useCallback(async () => {\n\t\ttry {\n\t\t\tconst result = await resetE2eKey();\n\t\t\tif (result) {\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_e2e_key_was_reset') });\n\t\t\t\tlogout();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [dispatchToastMessage, resetE2eKey, logout, t]);\n\n\tuseEffect(() => {\n\t\tif (password?.trim() === '') {\n\t\t\tresetField('passwordConfirm');\n\t\t}\n\t}, [password, resetField]);\n\n\tconst passwordId = useUniqueId();\n\tconst e2ePasswordExplanationId = useUniqueId();\n\tconst passwordConfirmId = useUniqueId();\n\n\treturn (\n\t\t<Box display='flex' flexDirection='column' alignItems='flex-start' mbs={16} {...props}>\n\t\t\t<Margins blockEnd={8}>\n\t\t\t\t<Box fontScale='h4'>{t('E2E_Encryption_Password_Change')}</Box>\n\t\t\t\t<Box id={e2ePasswordExplanationId} dangerouslySetInnerHTML={{ __html: t('E2E_Encryption_Password_Explanation') }} />\n\t\t\t\t<FieldGroup w='full'>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel htmlFor={passwordId}>{t('New_encryption_password')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\tname='password'\n\t\t\t\t\t\t\t\trules={{ required: t('Required_field', { field: t('New_encryption_password') }) }}\n\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t<PasswordInput\n\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\tid={passwordId}\n\t\t\t\t\t\t\t\t\t\terror={errors.password?.message}\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('New_Password_Placeholder')}\n\t\t\t\t\t\t\t\t\t\tdisabled={!keysExist}\n\t\t\t\t\t\t\t\t\t\taria-describedby={`${e2ePasswordExplanationId} ${passwordId}-hint ${passwordId}-error`}\n\t\t\t\t\t\t\t\t\t\taria-invalid={errors.password ? 'true' : 'false'}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t{!keysExist && <FieldHint id={`${passwordId}-hint`}>{t('EncryptionKey_Change_Disabled')}</FieldHint>}\n\t\t\t\t\t\t{errors?.password && (\n\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${passwordId}-error`}>\n\t\t\t\t\t\t\t\t{errors.password.message}\n\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Field>\n\t\t\t\t\t{hasTypedPassword && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={passwordConfirmId}>{t('Confirm_new_encryption_password')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\tname='passwordConfirm'\n\t\t\t\t\t\t\t\t\trules={{\n\t\t\t\t\t\t\t\t\t\trequired: t('Required_field', { field: t('Confirm_new_encryption_password') }),\n\t\t\t\t\t\t\t\t\t\tvalidate: (value: string) => (password !== value ? 'Your passwords do no match' : true),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t<PasswordInput\n\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\tid={passwordConfirmId}\n\t\t\t\t\t\t\t\t\t\t\terror={errors.passwordConfirm?.message}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Confirm_New_Password_Placeholder')}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${passwordConfirmId}-error`}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={errors.password ? 'true' : 'false'}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors.passwordConfirm && (\n\t\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${passwordConfirmId}-error`}>\n\t\t\t\t\t\t\t\t\t{errors.passwordConfirm.message}\n\t\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t</FieldGroup>\n\t\t\t\t<Button\n\t\t\t\t\tprimary\n\t\t\t\t\tdisabled={!(keysExist && isValid)}\n\t\t\t\t\tonClick={handleSubmit(saveNewPassword)}\n\t\t\t\t\tdata-qa-type='e2e-encryption-save-password-button'\n\t\t\t\t>\n\t\t\t\t\t{t('Save_changes')}\n\t\t\t\t</Button>\n\t\t\t\t<Box fontScale='h4' mbs={16}>\n\t\t\t\t\t{t('Reset_E2E_Key')}\n\t\t\t\t</Box>\n\t\t\t\t<Box dangerouslySetInnerHTML={{ __html: t('E2E_Reset_Key_Explanation') }} />\n\t\t\t\t<Button onClick={handleResetE2eKey} data-qa-type='e2e-encryption-reset-key-button'>\n\t\t\t\t\t{t('Reset_E2E_Key')}\n\t\t\t\t</Button>\n\t\t\t</Margins>\n\t\t</Box>\n\t);\n};\n\nexport default EndToEnd;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"3189b4124d4ff05ef492405ea077af296b5071d3"}
