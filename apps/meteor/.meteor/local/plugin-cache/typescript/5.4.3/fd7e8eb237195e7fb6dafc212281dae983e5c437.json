{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/lib/minimongo/bson.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/lib/minimongo/bson.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/lib/minimongo/bson.ts","inputSourceMap":{"version":3,"file":"client/lib/minimongo/bson.ts","sourceRoot":"","sources":["client/lib/minimongo/bson.ts"],"names":[],"mappings":"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","sourcesContent":["import { BSONType } from './types';\n\nexport const getBSONType = <T>(v: T): BSONType => {\n\tif (typeof v === 'number') {\n\t\treturn BSONType.Double;\n\t}\n\n\tif (typeof v === 'string') {\n\t\treturn BSONType.String;\n\t}\n\n\tif (typeof v === 'boolean') {\n\t\treturn BSONType.Boolean;\n\t}\n\n\tif (Array.isArray(v)) {\n\t\treturn BSONType.Array;\n\t}\n\n\tif (v === null) {\n\t\treturn BSONType.Null;\n\t}\n\n\tif (v instanceof RegExp) {\n\t\treturn BSONType.Regex;\n\t}\n\n\tif (typeof v === 'function') {\n\t\treturn BSONType.JavaScript;\n\t}\n\n\tif (v instanceof Date) {\n\t\treturn BSONType.Date;\n\t}\n\n\tif (v instanceof Uint8Array) {\n\t\treturn BSONType.BinData;\n\t}\n\n\treturn BSONType.Object;\n};\n\nconst getBSONTypeOrder = (type: BSONType): number => {\n\tswitch (type) {\n\t\tcase BSONType.Null:\n\t\t\treturn 0;\n\n\t\tcase BSONType.Double:\n\t\tcase BSONType.Int:\n\t\tcase BSONType.Long:\n\t\t\treturn 1;\n\n\t\tcase BSONType.String:\n\t\tcase BSONType.Symbol:\n\t\t\treturn 2;\n\n\t\tcase BSONType.Object:\n\t\t\treturn 3;\n\n\t\tcase BSONType.Array:\n\t\t\treturn 4;\n\n\t\tcase BSONType.BinData:\n\t\t\treturn 5;\n\n\t\tcase BSONType.ObjectId:\n\t\t\treturn 6;\n\n\t\tcase BSONType.Boolean:\n\t\t\treturn 7;\n\n\t\tcase BSONType.Date:\n\t\tcase BSONType.Timestamp:\n\t\t\treturn 8;\n\n\t\tcase BSONType.Regex:\n\t\t\treturn 9;\n\n\t\tcase BSONType.JavaScript:\n\t\tcase BSONType.JavaScriptWithScope:\n\t\t\treturn 100;\n\n\t\tdefault:\n\t\t\treturn -1;\n\t}\n};\n\ntype ObjectID = {\n\ttoHexString(): string;\n\tequals(otherID: ObjectID): boolean;\n};\n\nexport const compareBSONValues = (a: unknown, b: unknown): number => {\n\tif (a === undefined) {\n\t\treturn b === undefined ? 0 : -1;\n\t}\n\n\tif (b === undefined) {\n\t\treturn 1;\n\t}\n\n\tconst ta = getBSONType(a);\n\tconst oa = getBSONTypeOrder(ta);\n\n\tconst tb = getBSONType(b);\n\tconst ob = getBSONTypeOrder(tb);\n\n\tif (oa !== ob) {\n\t\treturn oa < ob ? -1 : 1;\n\t}\n\n\tif (ta !== tb) {\n\t\tthrow Error('Missing type coercion logic in compareBSONValues');\n\t}\n\n\tswitch (ta) {\n\t\tcase BSONType.Double:\n\t\t\treturn (a as number) - (b as number);\n\n\t\tcase BSONType.String:\n\t\t\treturn (a as string).localeCompare(b as string);\n\n\t\tcase BSONType.Object:\n\t\t\treturn compareBSONValues(\n\t\t\t\tArray.prototype.concat.call([], ...Object.entries(a as Record<string, unknown>)),\n\t\t\t\tArray.prototype.concat.call([], ...Object.entries(b as Record<string, unknown>)),\n\t\t\t);\n\n\t\tcase BSONType.Array: {\n\t\t\tfor (let i = 0; ; i++) {\n\t\t\t\tif (i === (a as unknown[]).length) {\n\t\t\t\t\treturn i === (b as unknown[]).length ? 0 : -1;\n\t\t\t\t}\n\n\t\t\t\tif (i === (b as unknown[]).length) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\tconst s = compareBSONValues((a as unknown[])[i], (b as unknown[])[i]);\n\t\t\t\tif (s !== 0) {\n\t\t\t\t\treturn s;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcase BSONType.BinData: {\n\t\t\tif ((a as Uint8Array).length !== (b as Uint8Array).length) {\n\t\t\t\treturn (a as Uint8Array).length - (b as Uint8Array).length;\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < (a as Uint8Array).length; i++) {\n\t\t\t\tif ((a as Uint8Array)[i] === (b as Uint8Array)[i]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\treturn (a as Uint8Array)[i] < (b as Uint8Array)[i] ? -1 : 1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\tcase BSONType.Null:\n\t\tcase BSONType.Undefined:\n\t\t\treturn 0;\n\n\t\tcase BSONType.ObjectId:\n\t\t\treturn (a as ObjectID).toHexString().localeCompare((b as ObjectID).toHexString());\n\n\t\tcase BSONType.Boolean:\n\t\t\treturn Number(a) - Number(b);\n\n\t\tcase BSONType.Date:\n\t\t\treturn (a as Date).getTime() - (b as Date).getTime();\n\n\t\tcase BSONType.Regex:\n\t\t\tthrow Error('Sorting not supported on regular expression');\n\n\t\tcase BSONType.JavaScript:\n\t\tcase BSONType.JavaScriptWithScope:\n\t\t\tthrow Error('Sorting not supported on Javascript code');\n\t}\n\n\tthrow Error('Unknown type to sort');\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/lib/minimongo/bson.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/lib/minimongo/bson.ts","inputSourceMap":{"version":3,"file":"client/lib/minimongo/bson.ts","sourceRoot":"","sources":["client/lib/minimongo/bson.ts"],"names":[],"mappings":"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","sourcesContent":["import { BSONType } from './types';\n\nexport const getBSONType = <T>(v: T): BSONType => {\n\tif (typeof v === 'number') {\n\t\treturn BSONType.Double;\n\t}\n\n\tif (typeof v === 'string') {\n\t\treturn BSONType.String;\n\t}\n\n\tif (typeof v === 'boolean') {\n\t\treturn BSONType.Boolean;\n\t}\n\n\tif (Array.isArray(v)) {\n\t\treturn BSONType.Array;\n\t}\n\n\tif (v === null) {\n\t\treturn BSONType.Null;\n\t}\n\n\tif (v instanceof RegExp) {\n\t\treturn BSONType.Regex;\n\t}\n\n\tif (typeof v === 'function') {\n\t\treturn BSONType.JavaScript;\n\t}\n\n\tif (v instanceof Date) {\n\t\treturn BSONType.Date;\n\t}\n\n\tif (v instanceof Uint8Array) {\n\t\treturn BSONType.BinData;\n\t}\n\n\treturn BSONType.Object;\n};\n\nconst getBSONTypeOrder = (type: BSONType): number => {\n\tswitch (type) {\n\t\tcase BSONType.Null:\n\t\t\treturn 0;\n\n\t\tcase BSONType.Double:\n\t\tcase BSONType.Int:\n\t\tcase BSONType.Long:\n\t\t\treturn 1;\n\n\t\tcase BSONType.String:\n\t\tcase BSONType.Symbol:\n\t\t\treturn 2;\n\n\t\tcase BSONType.Object:\n\t\t\treturn 3;\n\n\t\tcase BSONType.Array:\n\t\t\treturn 4;\n\n\t\tcase BSONType.BinData:\n\t\t\treturn 5;\n\n\t\tcase BSONType.ObjectId:\n\t\t\treturn 6;\n\n\t\tcase BSONType.Boolean:\n\t\t\treturn 7;\n\n\t\tcase BSONType.Date:\n\t\tcase BSONType.Timestamp:\n\t\t\treturn 8;\n\n\t\tcase BSONType.Regex:\n\t\t\treturn 9;\n\n\t\tcase BSONType.JavaScript:\n\t\tcase BSONType.JavaScriptWithScope:\n\t\t\treturn 100;\n\n\t\tdefault:\n\t\t\treturn -1;\n\t}\n};\n\ntype ObjectID = {\n\ttoHexString(): string;\n\tequals(otherID: ObjectID): boolean;\n};\n\nexport const compareBSONValues = (a: unknown, b: unknown): number => {\n\tif (a === undefined) {\n\t\treturn b === undefined ? 0 : -1;\n\t}\n\n\tif (b === undefined) {\n\t\treturn 1;\n\t}\n\n\tconst ta = getBSONType(a);\n\tconst oa = getBSONTypeOrder(ta);\n\n\tconst tb = getBSONType(b);\n\tconst ob = getBSONTypeOrder(tb);\n\n\tif (oa !== ob) {\n\t\treturn oa < ob ? -1 : 1;\n\t}\n\n\tif (ta !== tb) {\n\t\tthrow Error('Missing type coercion logic in compareBSONValues');\n\t}\n\n\tswitch (ta) {\n\t\tcase BSONType.Double:\n\t\t\treturn (a as number) - (b as number);\n\n\t\tcase BSONType.String:\n\t\t\treturn (a as string).localeCompare(b as string);\n\n\t\tcase BSONType.Object:\n\t\t\treturn compareBSONValues(\n\t\t\t\tArray.prototype.concat.call([], ...Object.entries(a as Record<string, unknown>)),\n\t\t\t\tArray.prototype.concat.call([], ...Object.entries(b as Record<string, unknown>)),\n\t\t\t);\n\n\t\tcase BSONType.Array: {\n\t\t\tfor (let i = 0; ; i++) {\n\t\t\t\tif (i === (a as unknown[]).length) {\n\t\t\t\t\treturn i === (b as unknown[]).length ? 0 : -1;\n\t\t\t\t}\n\n\t\t\t\tif (i === (b as unknown[]).length) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\tconst s = compareBSONValues((a as unknown[])[i], (b as unknown[])[i]);\n\t\t\t\tif (s !== 0) {\n\t\t\t\t\treturn s;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcase BSONType.BinData: {\n\t\t\tif ((a as Uint8Array).length !== (b as Uint8Array).length) {\n\t\t\t\treturn (a as Uint8Array).length - (b as Uint8Array).length;\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < (a as Uint8Array).length; i++) {\n\t\t\t\tif ((a as Uint8Array)[i] === (b as Uint8Array)[i]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\treturn (a as Uint8Array)[i] < (b as Uint8Array)[i] ? -1 : 1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\tcase BSONType.Null:\n\t\tcase BSONType.Undefined:\n\t\t\treturn 0;\n\n\t\tcase BSONType.ObjectId:\n\t\t\treturn (a as ObjectID).toHexString().localeCompare((b as ObjectID).toHexString());\n\n\t\tcase BSONType.Boolean:\n\t\t\treturn Number(a) - Number(b);\n\n\t\tcase BSONType.Date:\n\t\t\treturn (a as Date).getTime() - (b as Date).getTime();\n\n\t\tcase BSONType.Regex:\n\t\t\tthrow Error('Sorting not supported on regular expression');\n\n\t\tcase BSONType.JavaScript:\n\t\tcase BSONType.JavaScriptWithScope:\n\t\t\tthrow Error('Sorting not supported on Javascript code');\n\t}\n\n\tthrow Error('Unknown type to sort');\n};\n"]}}},"code":"module.export({\n  getBSONType: () => getBSONType,\n  compareBSONValues: () => compareBSONValues\n});\nlet BSONType;\nmodule.link(\"./types\", {\n  BSONType(v) {\n    BSONType = v;\n  }\n}, 0);\nconst getBSONType = v => {\n  if (typeof v === 'number') {\n    return BSONType.Double;\n  }\n  if (typeof v === 'string') {\n    return BSONType.String;\n  }\n  if (typeof v === 'boolean') {\n    return BSONType.Boolean;\n  }\n  if (Array.isArray(v)) {\n    return BSONType.Array;\n  }\n  if (v === null) {\n    return BSONType.Null;\n  }\n  if (v instanceof RegExp) {\n    return BSONType.Regex;\n  }\n  if (typeof v === 'function') {\n    return BSONType.JavaScript;\n  }\n  if (v instanceof Date) {\n    return BSONType.Date;\n  }\n  if (v instanceof Uint8Array) {\n    return BSONType.BinData;\n  }\n  return BSONType.Object;\n};\nconst getBSONTypeOrder = type => {\n  switch (type) {\n    case BSONType.Null:\n      return 0;\n    case BSONType.Double:\n    case BSONType.Int:\n    case BSONType.Long:\n      return 1;\n    case BSONType.String:\n    case BSONType.Symbol:\n      return 2;\n    case BSONType.Object:\n      return 3;\n    case BSONType.Array:\n      return 4;\n    case BSONType.BinData:\n      return 5;\n    case BSONType.ObjectId:\n      return 6;\n    case BSONType.Boolean:\n      return 7;\n    case BSONType.Date:\n    case BSONType.Timestamp:\n      return 8;\n    case BSONType.Regex:\n      return 9;\n    case BSONType.JavaScript:\n    case BSONType.JavaScriptWithScope:\n      return 100;\n    default:\n      return -1;\n  }\n};\nconst compareBSONValues = (a, b) => {\n  if (a === undefined) {\n    return b === undefined ? 0 : -1;\n  }\n  if (b === undefined) {\n    return 1;\n  }\n  const ta = getBSONType(a);\n  const oa = getBSONTypeOrder(ta);\n  const tb = getBSONType(b);\n  const ob = getBSONTypeOrder(tb);\n  if (oa !== ob) {\n    return oa < ob ? -1 : 1;\n  }\n  if (ta !== tb) {\n    throw Error('Missing type coercion logic in compareBSONValues');\n  }\n  switch (ta) {\n    case BSONType.Double:\n      return a - b;\n    case BSONType.String:\n      return a.localeCompare(b);\n    case BSONType.Object:\n      return compareBSONValues(Array.prototype.concat.call([], ...Object.entries(a)), Array.prototype.concat.call([], ...Object.entries(b)));\n    case BSONType.Array:\n      {\n        for (let i = 0;; i++) {\n          if (i === a.length) {\n            return i === b.length ? 0 : -1;\n          }\n          if (i === b.length) {\n            return 1;\n          }\n          const s = compareBSONValues(a[i], b[i]);\n          if (s !== 0) {\n            return s;\n          }\n        }\n      }\n    case BSONType.BinData:\n      {\n        if (a.length !== b.length) {\n          return a.length - b.length;\n        }\n        for (let i = 0; i < a.length; i++) {\n          if (a[i] === b[i]) {\n            continue;\n          }\n          return a[i] < b[i] ? -1 : 1;\n        }\n        return 0;\n      }\n    case BSONType.Null:\n    case BSONType.Undefined:\n      return 0;\n    case BSONType.ObjectId:\n      return a.toHexString().localeCompare(b.toHexString());\n    case BSONType.Boolean:\n      return Number(a) - Number(b);\n    case BSONType.Date:\n      return a.getTime() - b.getTime();\n    case BSONType.Regex:\n      throw Error('Sorting not supported on regular expression');\n    case BSONType.JavaScript:\n    case BSONType.JavaScriptWithScope:\n      throw Error('Sorting not supported on Javascript code');\n  }\n  throw Error('Unknown type to sort');\n};","map":{"version":3,"names":["module","export","getBSONType","compareBSONValues","BSONType","link","v","Double","String","Boolean","Array","isArray","Null","RegExp","Regex","JavaScript","Date","Uint8Array","BinData","Object","getBSONTypeOrder","type","Int","Long","Symbol","ObjectId","Timestamp","JavaScriptWithScope","a","b","undefined","ta","oa","tb","ob","Error","localeCompare","prototype","concat","call","entries","i","length","s","Undefined","toHexString","Number","getTime"],"sources":["client/lib/minimongo/bson.ts"],"sourcesContent":["import { BSONType } from './types';\n\nexport const getBSONType = <T>(v: T): BSONType => {\n\tif (typeof v === 'number') {\n\t\treturn BSONType.Double;\n\t}\n\n\tif (typeof v === 'string') {\n\t\treturn BSONType.String;\n\t}\n\n\tif (typeof v === 'boolean') {\n\t\treturn BSONType.Boolean;\n\t}\n\n\tif (Array.isArray(v)) {\n\t\treturn BSONType.Array;\n\t}\n\n\tif (v === null) {\n\t\treturn BSONType.Null;\n\t}\n\n\tif (v instanceof RegExp) {\n\t\treturn BSONType.Regex;\n\t}\n\n\tif (typeof v === 'function') {\n\t\treturn BSONType.JavaScript;\n\t}\n\n\tif (v instanceof Date) {\n\t\treturn BSONType.Date;\n\t}\n\n\tif (v instanceof Uint8Array) {\n\t\treturn BSONType.BinData;\n\t}\n\n\treturn BSONType.Object;\n};\n\nconst getBSONTypeOrder = (type: BSONType): number => {\n\tswitch (type) {\n\t\tcase BSONType.Null:\n\t\t\treturn 0;\n\n\t\tcase BSONType.Double:\n\t\tcase BSONType.Int:\n\t\tcase BSONType.Long:\n\t\t\treturn 1;\n\n\t\tcase BSONType.String:\n\t\tcase BSONType.Symbol:\n\t\t\treturn 2;\n\n\t\tcase BSONType.Object:\n\t\t\treturn 3;\n\n\t\tcase BSONType.Array:\n\t\t\treturn 4;\n\n\t\tcase BSONType.BinData:\n\t\t\treturn 5;\n\n\t\tcase BSONType.ObjectId:\n\t\t\treturn 6;\n\n\t\tcase BSONType.Boolean:\n\t\t\treturn 7;\n\n\t\tcase BSONType.Date:\n\t\tcase BSONType.Timestamp:\n\t\t\treturn 8;\n\n\t\tcase BSONType.Regex:\n\t\t\treturn 9;\n\n\t\tcase BSONType.JavaScript:\n\t\tcase BSONType.JavaScriptWithScope:\n\t\t\treturn 100;\n\n\t\tdefault:\n\t\t\treturn -1;\n\t}\n};\n\ntype ObjectID = {\n\ttoHexString(): string;\n\tequals(otherID: ObjectID): boolean;\n};\n\nexport const compareBSONValues = (a: unknown, b: unknown): number => {\n\tif (a === undefined) {\n\t\treturn b === undefined ? 0 : -1;\n\t}\n\n\tif (b === undefined) {\n\t\treturn 1;\n\t}\n\n\tconst ta = getBSONType(a);\n\tconst oa = getBSONTypeOrder(ta);\n\n\tconst tb = getBSONType(b);\n\tconst ob = getBSONTypeOrder(tb);\n\n\tif (oa !== ob) {\n\t\treturn oa < ob ? -1 : 1;\n\t}\n\n\tif (ta !== tb) {\n\t\tthrow Error('Missing type coercion logic in compareBSONValues');\n\t}\n\n\tswitch (ta) {\n\t\tcase BSONType.Double:\n\t\t\treturn (a as number) - (b as number);\n\n\t\tcase BSONType.String:\n\t\t\treturn (a as string).localeCompare(b as string);\n\n\t\tcase BSONType.Object:\n\t\t\treturn compareBSONValues(\n\t\t\t\tArray.prototype.concat.call([], ...Object.entries(a as Record<string, unknown>)),\n\t\t\t\tArray.prototype.concat.call([], ...Object.entries(b as Record<string, unknown>)),\n\t\t\t);\n\n\t\tcase BSONType.Array: {\n\t\t\tfor (let i = 0; ; i++) {\n\t\t\t\tif (i === (a as unknown[]).length) {\n\t\t\t\t\treturn i === (b as unknown[]).length ? 0 : -1;\n\t\t\t\t}\n\n\t\t\t\tif (i === (b as unknown[]).length) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\tconst s = compareBSONValues((a as unknown[])[i], (b as unknown[])[i]);\n\t\t\t\tif (s !== 0) {\n\t\t\t\t\treturn s;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcase BSONType.BinData: {\n\t\t\tif ((a as Uint8Array).length !== (b as Uint8Array).length) {\n\t\t\t\treturn (a as Uint8Array).length - (b as Uint8Array).length;\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < (a as Uint8Array).length; i++) {\n\t\t\t\tif ((a as Uint8Array)[i] === (b as Uint8Array)[i]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\treturn (a as Uint8Array)[i] < (b as Uint8Array)[i] ? -1 : 1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t}\n\n\t\tcase BSONType.Null:\n\t\tcase BSONType.Undefined:\n\t\t\treturn 0;\n\n\t\tcase BSONType.ObjectId:\n\t\t\treturn (a as ObjectID).toHexString().localeCompare((b as ObjectID).toHexString());\n\n\t\tcase BSONType.Boolean:\n\t\t\treturn Number(a) - Number(b);\n\n\t\tcase BSONType.Date:\n\t\t\treturn (a as Date).getTime() - (b as Date).getTime();\n\n\t\tcase BSONType.Regex:\n\t\t\tthrow Error('Sorting not supported on regular expression');\n\n\t\tcase BSONType.JavaScript:\n\t\tcase BSONType.JavaScriptWithScope:\n\t\t\tthrow Error('Sorting not supported on Javascript code');\n\t}\n\n\tthrow Error('Unknown type to sort');\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"fd7e8eb237195e7fb6dafc212281dae983e5c437"}
