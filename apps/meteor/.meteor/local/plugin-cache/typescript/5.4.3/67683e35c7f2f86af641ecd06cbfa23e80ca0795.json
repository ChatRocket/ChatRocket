{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/settings/groups/OAuthGroupPage/OAuthGroupPage.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/admin/settings/groups/OAuthGroupPage/OAuthGroupPage.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/settings/groups/OAuthGroupPage/OAuthGroupPage.tsx","inputSourceMap":{"version":3,"file":"client/views/admin/settings/groups/OAuthGroupPage/OAuthGroupPage.tsx","sourceRoot":"","sources":["client/views/admin/settings/groups/OAuthGroupPage/OAuthGroupPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { ISetting } from '@rocket.chat/core-typings';\nimport { Button } from '@rocket.chat/fuselage';\nimport { capitalize } from '@rocket.chat/string-helpers';\nimport { useToastMessageDispatch, useAbsoluteUrl, useMethod, useTranslation, useSetModal } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { memo, useEffect, useState } from 'react';\n\nimport CreateOAuthModal from './CreateOAuthModal';\nimport { strRight } from '../../../../../../lib/utils/stringUtils';\nimport GenericModal from '../../../../../components/GenericModal';\nimport { useEditableSettingsGroupSections } from '../../../EditableSettingsContext';\nimport SettingsGroupPage from '../../SettingsGroupPage';\nimport SettingsSection from '../../SettingsSection';\n\ntype OAuthGroupPageProps = ISetting & {\n\tonClickBack?: () => void;\n};\n\nfunction OAuthGroupPage({ _id, onClickBack, ...group }: OAuthGroupPageProps): ReactElement {\n\tconst sections = useEditableSettingsGroupSections(_id);\n\tconst solo = sections.length === 1;\n\tconst t = useTranslation();\n\n\tconst [settingSections, setSettingSections] = useState(sections);\n\n\tconst sectionIsCustomOAuth = (sectionName: string): string | boolean => sectionName && /^Custom OAuth:\\s.+/.test(sectionName);\n\n\tconst getAbsoluteUrl = useAbsoluteUrl();\n\n\tconst callbackURL = (sectionName: string): string => {\n\t\tconst id = strRight(sectionName, 'Custom OAuth: ').toLowerCase();\n\t\treturn getAbsoluteUrl(`_oauth/${id}`);\n\t};\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst refreshOAuthService = useMethod('refreshOAuthService');\n\tconst addOAuthService = useMethod('addOAuthService');\n\tconst removeOAuthService = useMethod('removeOAuthService');\n\tconst setModal = useSetModal();\n\n\tconst handleRefreshOAuthServicesButtonClick = async (): Promise<void> => {\n\t\tdispatchToastMessage({ type: 'info', message: t('Refreshing') });\n\t\ttry {\n\t\t\tawait refreshOAuthService();\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Done') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\tconst handleAddCustomOAuthButtonClick = (): void => {\n\t\tconst onConfirm = async (text: string): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tawait addOAuthService(text);\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Custom_OAuth_has_been_added') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tsetModal(null);\n\t\t\t}\n\t\t};\n\t\tsetModal(<CreateOAuthModal onConfirm={onConfirm} onClose={(): void => setModal(null)} />);\n\t};\n\n\tuseEffect(() => {\n\t\tsetSettingSections(sections);\n\t}, [sections]);\n\n\tconst removeCustomOauthFactory =\n\t\t(id: string): (() => void) =>\n\t\t(): void => {\n\t\t\tconst handleConfirm = async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tawait removeOAuthService(id);\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Custom_OAuth_has_been_removed') });\n\t\t\t\t\tsetSettingSections(settingSections.filter((section) => section !== `Custom OAuth: ${capitalize(id)}`));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t} finally {\n\t\t\t\t\tsetModal(null);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tsetModal(\n\t\t\t\t<GenericModal\n\t\t\t\t\tonClose={() => setModal(null)}\n\t\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\t\ttitle={t('Are_you_sure')}\n\t\t\t\t\tvariant='danger'\n\t\t\t\t\tconfirmText={t('Yes_delete_it')}\n\t\t\t\t\tonConfirm={handleConfirm}\n\t\t\t\t/>,\n\t\t\t);\n\t\t};\n\n\treturn (\n\t\t<SettingsGroupPage\n\t\t\t_id={_id}\n\t\t\t{...group}\n\t\t\tonClickBack={onClickBack}\n\t\t\theaderButtons={\n\t\t\t\t<>\n\t\t\t\t\t<Button onClick={handleRefreshOAuthServicesButtonClick}>{t('Refresh_oauth_services')}</Button>\n\t\t\t\t\t<Button onClick={handleAddCustomOAuthButtonClick}>{t('Add_custom_oauth')}</Button>\n\t\t\t\t</>\n\t\t\t}\n\t\t>\n\t\t\t{settingSections.map((sectionName) => {\n\t\t\t\tif (sectionIsCustomOAuth(sectionName)) {\n\t\t\t\t\tconst id = strRight(sectionName, 'Custom OAuth: ').toLowerCase();\n\n\t\t\t\t\tconst handleRemoveCustomOAuthButtonClick = removeCustomOauthFactory(id);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<SettingsSection\n\t\t\t\t\t\t\tkey={sectionName}\n\t\t\t\t\t\t\tgroupId={_id}\n\t\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t\t\t__html: t('Custom_oauth_helper', callbackURL(sectionName)),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsectionName={sectionName}\n\t\t\t\t\t\t\tsolo={solo}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className='submit'>\n\t\t\t\t\t\t\t\t<Button secondary danger onClick={handleRemoveCustomOAuthButtonClick}>\n\t\t\t\t\t\t\t\t\t{t('Remove_custom_oauth')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</SettingsSection>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn <SettingsSection key={sectionName} groupId={_id} sectionName={sectionName} solo={solo} />;\n\t\t\t})}\n\t\t</SettingsGroupPage>\n\t);\n}\n\nexport default memo(OAuthGroupPage);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/settings/groups/OAuthGroupPage/OAuthGroupPage.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/admin/settings/groups/OAuthGroupPage/OAuthGroupPage.tsx","inputSourceMap":{"version":3,"file":"client/views/admin/settings/groups/OAuthGroupPage/OAuthGroupPage.tsx","sourceRoot":"","sources":["client/views/admin/settings/groups/OAuthGroupPage/OAuthGroupPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { ISetting } from '@rocket.chat/core-typings';\nimport { Button } from '@rocket.chat/fuselage';\nimport { capitalize } from '@rocket.chat/string-helpers';\nimport { useToastMessageDispatch, useAbsoluteUrl, useMethod, useTranslation, useSetModal } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { memo, useEffect, useState } from 'react';\n\nimport CreateOAuthModal from './CreateOAuthModal';\nimport { strRight } from '../../../../../../lib/utils/stringUtils';\nimport GenericModal from '../../../../../components/GenericModal';\nimport { useEditableSettingsGroupSections } from '../../../EditableSettingsContext';\nimport SettingsGroupPage from '../../SettingsGroupPage';\nimport SettingsSection from '../../SettingsSection';\n\ntype OAuthGroupPageProps = ISetting & {\n\tonClickBack?: () => void;\n};\n\nfunction OAuthGroupPage({ _id, onClickBack, ...group }: OAuthGroupPageProps): ReactElement {\n\tconst sections = useEditableSettingsGroupSections(_id);\n\tconst solo = sections.length === 1;\n\tconst t = useTranslation();\n\n\tconst [settingSections, setSettingSections] = useState(sections);\n\n\tconst sectionIsCustomOAuth = (sectionName: string): string | boolean => sectionName && /^Custom OAuth:\\s.+/.test(sectionName);\n\n\tconst getAbsoluteUrl = useAbsoluteUrl();\n\n\tconst callbackURL = (sectionName: string): string => {\n\t\tconst id = strRight(sectionName, 'Custom OAuth: ').toLowerCase();\n\t\treturn getAbsoluteUrl(`_oauth/${id}`);\n\t};\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst refreshOAuthService = useMethod('refreshOAuthService');\n\tconst addOAuthService = useMethod('addOAuthService');\n\tconst removeOAuthService = useMethod('removeOAuthService');\n\tconst setModal = useSetModal();\n\n\tconst handleRefreshOAuthServicesButtonClick = async (): Promise<void> => {\n\t\tdispatchToastMessage({ type: 'info', message: t('Refreshing') });\n\t\ttry {\n\t\t\tawait refreshOAuthService();\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Done') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\tconst handleAddCustomOAuthButtonClick = (): void => {\n\t\tconst onConfirm = async (text: string): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tawait addOAuthService(text);\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Custom_OAuth_has_been_added') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tsetModal(null);\n\t\t\t}\n\t\t};\n\t\tsetModal(<CreateOAuthModal onConfirm={onConfirm} onClose={(): void => setModal(null)} />);\n\t};\n\n\tuseEffect(() => {\n\t\tsetSettingSections(sections);\n\t}, [sections]);\n\n\tconst removeCustomOauthFactory =\n\t\t(id: string): (() => void) =>\n\t\t(): void => {\n\t\t\tconst handleConfirm = async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tawait removeOAuthService(id);\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Custom_OAuth_has_been_removed') });\n\t\t\t\t\tsetSettingSections(settingSections.filter((section) => section !== `Custom OAuth: ${capitalize(id)}`));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t} finally {\n\t\t\t\t\tsetModal(null);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tsetModal(\n\t\t\t\t<GenericModal\n\t\t\t\t\tonClose={() => setModal(null)}\n\t\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\t\ttitle={t('Are_you_sure')}\n\t\t\t\t\tvariant='danger'\n\t\t\t\t\tconfirmText={t('Yes_delete_it')}\n\t\t\t\t\tonConfirm={handleConfirm}\n\t\t\t\t/>,\n\t\t\t);\n\t\t};\n\n\treturn (\n\t\t<SettingsGroupPage\n\t\t\t_id={_id}\n\t\t\t{...group}\n\t\t\tonClickBack={onClickBack}\n\t\t\theaderButtons={\n\t\t\t\t<>\n\t\t\t\t\t<Button onClick={handleRefreshOAuthServicesButtonClick}>{t('Refresh_oauth_services')}</Button>\n\t\t\t\t\t<Button onClick={handleAddCustomOAuthButtonClick}>{t('Add_custom_oauth')}</Button>\n\t\t\t\t</>\n\t\t\t}\n\t\t>\n\t\t\t{settingSections.map((sectionName) => {\n\t\t\t\tif (sectionIsCustomOAuth(sectionName)) {\n\t\t\t\t\tconst id = strRight(sectionName, 'Custom OAuth: ').toLowerCase();\n\n\t\t\t\t\tconst handleRemoveCustomOAuthButtonClick = removeCustomOauthFactory(id);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<SettingsSection\n\t\t\t\t\t\t\tkey={sectionName}\n\t\t\t\t\t\t\tgroupId={_id}\n\t\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t\t\t__html: t('Custom_oauth_helper', callbackURL(sectionName)),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsectionName={sectionName}\n\t\t\t\t\t\t\tsolo={solo}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className='submit'>\n\t\t\t\t\t\t\t\t<Button secondary danger onClick={handleRemoveCustomOAuthButtonClick}>\n\t\t\t\t\t\t\t\t\t{t('Remove_custom_oauth')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</SettingsSection>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn <SettingsSection key={sectionName} groupId={_id} sectionName={sectionName} solo={solo} />;\n\t\t\t})}\n\t\t</SettingsGroupPage>\n\t);\n}\n\nexport default memo(OAuthGroupPage);\n"]}}},"code":"const _excluded = [\"_id\", \"onClickBack\"];\nlet _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n}, 1);\nlet Button;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Button(v) {\n    Button = v;\n  }\n}, 0);\nlet capitalize;\nmodule.link(\"@rocket.chat/string-helpers\", {\n  capitalize(v) {\n    capitalize = v;\n  }\n}, 1);\nlet useToastMessageDispatch, useAbsoluteUrl, useMethod, useTranslation, useSetModal;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useToastMessageDispatch(v) {\n    useToastMessageDispatch = v;\n  },\n  useAbsoluteUrl(v) {\n    useAbsoluteUrl = v;\n  },\n  useMethod(v) {\n    useMethod = v;\n  },\n  useTranslation(v) {\n    useTranslation = v;\n  },\n  useSetModal(v) {\n    useSetModal = v;\n  }\n}, 2);\nlet React, memo, useEffect, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  memo(v) {\n    memo = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  },\n  useState(v) {\n    useState = v;\n  }\n}, 3);\nlet CreateOAuthModal;\nmodule.link(\"./CreateOAuthModal\", {\n  default(v) {\n    CreateOAuthModal = v;\n  }\n}, 4);\nlet strRight;\nmodule.link(\"../../../../../../lib/utils/stringUtils\", {\n  strRight(v) {\n    strRight = v;\n  }\n}, 5);\nlet GenericModal;\nmodule.link(\"../../../../../components/GenericModal\", {\n  default(v) {\n    GenericModal = v;\n  }\n}, 6);\nlet useEditableSettingsGroupSections;\nmodule.link(\"../../../EditableSettingsContext\", {\n  useEditableSettingsGroupSections(v) {\n    useEditableSettingsGroupSections = v;\n  }\n}, 7);\nlet SettingsGroupPage;\nmodule.link(\"../../SettingsGroupPage\", {\n  default(v) {\n    SettingsGroupPage = v;\n  }\n}, 8);\nlet SettingsSection;\nmodule.link(\"../../SettingsSection\", {\n  default(v) {\n    SettingsSection = v;\n  }\n}, 9);\nfunction OAuthGroupPage(_ref) {\n  let {\n      _id,\n      onClickBack\n    } = _ref,\n    group = _objectWithoutProperties(_ref, _excluded);\n  const sections = useEditableSettingsGroupSections(_id);\n  const solo = sections.length === 1;\n  const t = useTranslation();\n  const [settingSections, setSettingSections] = useState(sections);\n  const sectionIsCustomOAuth = sectionName => sectionName && /^Custom OAuth:\\s.+/.test(sectionName);\n  const getAbsoluteUrl = useAbsoluteUrl();\n  const callbackURL = sectionName => {\n    const id = strRight(sectionName, 'Custom OAuth: ').toLowerCase();\n    return getAbsoluteUrl(\"_oauth/\".concat(id));\n  };\n  const dispatchToastMessage = useToastMessageDispatch();\n  const refreshOAuthService = useMethod('refreshOAuthService');\n  const addOAuthService = useMethod('addOAuthService');\n  const removeOAuthService = useMethod('removeOAuthService');\n  const setModal = useSetModal();\n  const handleRefreshOAuthServicesButtonClick = async () => {\n    dispatchToastMessage({\n      type: 'info',\n      message: t('Refreshing')\n    });\n    try {\n      await refreshOAuthService();\n      dispatchToastMessage({\n        type: 'success',\n        message: t('Done')\n      });\n    } catch (error) {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    }\n  };\n  const handleAddCustomOAuthButtonClick = () => {\n    const onConfirm = async text => {\n      try {\n        await addOAuthService(text);\n        dispatchToastMessage({\n          type: 'success',\n          message: t('Custom_OAuth_has_been_added')\n        });\n      } catch (error) {\n        dispatchToastMessage({\n          type: 'error',\n          message: error\n        });\n      } finally {\n        setModal(null);\n      }\n    };\n    setModal( /*#__PURE__*/React.createElement(CreateOAuthModal, {\n      onConfirm: onConfirm,\n      onClose: () => setModal(null)\n    }));\n  };\n  useEffect(() => {\n    setSettingSections(sections);\n  }, [sections]);\n  const removeCustomOauthFactory = id => () => {\n    const handleConfirm = async () => {\n      try {\n        await removeOAuthService(id);\n        dispatchToastMessage({\n          type: 'success',\n          message: t('Custom_OAuth_has_been_removed')\n        });\n        setSettingSections(settingSections.filter(section => section !== \"Custom OAuth: \".concat(capitalize(id))));\n      } catch (error) {\n        dispatchToastMessage({\n          type: 'error',\n          message: error\n        });\n      } finally {\n        setModal(null);\n      }\n    };\n    setModal( /*#__PURE__*/React.createElement(GenericModal, {\n      onClose: () => setModal(null),\n      onCancel: () => setModal(null),\n      title: t('Are_you_sure'),\n      variant: \"danger\",\n      confirmText: t('Yes_delete_it'),\n      onConfirm: handleConfirm\n    }));\n  };\n  return /*#__PURE__*/React.createElement(SettingsGroupPage, _extends({\n    _id: _id\n  }, group, {\n    onClickBack: onClickBack,\n    headerButtons: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n      onClick: handleRefreshOAuthServicesButtonClick\n    }, t('Refresh_oauth_services')), /*#__PURE__*/React.createElement(Button, {\n      onClick: handleAddCustomOAuthButtonClick\n    }, t('Add_custom_oauth')))\n  }), settingSections.map(sectionName => {\n    if (sectionIsCustomOAuth(sectionName)) {\n      const id = strRight(sectionName, 'Custom OAuth: ').toLowerCase();\n      const handleRemoveCustomOAuthButtonClick = removeCustomOauthFactory(id);\n      return /*#__PURE__*/React.createElement(SettingsSection, {\n        key: sectionName,\n        groupId: _id,\n        help: /*#__PURE__*/React.createElement(\"span\", {\n          dangerouslySetInnerHTML: {\n            __html: t('Custom_oauth_helper', callbackURL(sectionName))\n          }\n        }),\n        sectionName: sectionName,\n        solo: solo\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"submit\"\n      }, /*#__PURE__*/React.createElement(Button, {\n        secondary: true,\n        danger: true,\n        onClick: handleRemoveCustomOAuthButtonClick\n      }, t('Remove_custom_oauth'))));\n    }\n    return /*#__PURE__*/React.createElement(SettingsSection, {\n      key: sectionName,\n      groupId: _id,\n      sectionName: sectionName,\n      solo: solo\n    });\n  }));\n}\nmodule.exportDefault( /*#__PURE__*/memo(OAuthGroupPage));","map":{"version":3,"names":["_extends","module","link","default","v","_objectWithoutProperties","Button","capitalize","useToastMessageDispatch","useAbsoluteUrl","useMethod","useTranslation","useSetModal","React","memo","useEffect","useState","CreateOAuthModal","strRight","GenericModal","useEditableSettingsGroupSections","SettingsGroupPage","SettingsSection","OAuthGroupPage","_ref","_id","onClickBack","group","_excluded","sections","solo","length","t","settingSections","setSettingSections","sectionIsCustomOAuth","sectionName","test","getAbsoluteUrl","callbackURL","id","toLowerCase","concat","dispatchToastMessage","refreshOAuthService","addOAuthService","removeOAuthService","setModal","handleRefreshOAuthServicesButtonClick","type","message","error","handleAddCustomOAuthButtonClick","onConfirm","text","createElement","onClose","removeCustomOauthFactory","handleConfirm","filter","section","onCancel","title","variant","confirmText","headerButtons","Fragment","onClick","map","handleRemoveCustomOAuthButtonClick","key","groupId","help","dangerouslySetInnerHTML","__html","className","secondary","danger","exportDefault"],"sources":["client/views/admin/settings/groups/OAuthGroupPage/OAuthGroupPage.tsx"],"sourcesContent":["import type { ISetting } from '@rocket.chat/core-typings';\nimport { Button } from '@rocket.chat/fuselage';\nimport { capitalize } from '@rocket.chat/string-helpers';\nimport { useToastMessageDispatch, useAbsoluteUrl, useMethod, useTranslation, useSetModal } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { memo, useEffect, useState } from 'react';\n\nimport CreateOAuthModal from './CreateOAuthModal';\nimport { strRight } from '../../../../../../lib/utils/stringUtils';\nimport GenericModal from '../../../../../components/GenericModal';\nimport { useEditableSettingsGroupSections } from '../../../EditableSettingsContext';\nimport SettingsGroupPage from '../../SettingsGroupPage';\nimport SettingsSection from '../../SettingsSection';\n\ntype OAuthGroupPageProps = ISetting & {\n\tonClickBack?: () => void;\n};\n\nfunction OAuthGroupPage({ _id, onClickBack, ...group }: OAuthGroupPageProps): ReactElement {\n\tconst sections = useEditableSettingsGroupSections(_id);\n\tconst solo = sections.length === 1;\n\tconst t = useTranslation();\n\n\tconst [settingSections, setSettingSections] = useState(sections);\n\n\tconst sectionIsCustomOAuth = (sectionName: string): string | boolean => sectionName && /^Custom OAuth:\\s.+/.test(sectionName);\n\n\tconst getAbsoluteUrl = useAbsoluteUrl();\n\n\tconst callbackURL = (sectionName: string): string => {\n\t\tconst id = strRight(sectionName, 'Custom OAuth: ').toLowerCase();\n\t\treturn getAbsoluteUrl(`_oauth/${id}`);\n\t};\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst refreshOAuthService = useMethod('refreshOAuthService');\n\tconst addOAuthService = useMethod('addOAuthService');\n\tconst removeOAuthService = useMethod('removeOAuthService');\n\tconst setModal = useSetModal();\n\n\tconst handleRefreshOAuthServicesButtonClick = async (): Promise<void> => {\n\t\tdispatchToastMessage({ type: 'info', message: t('Refreshing') });\n\t\ttry {\n\t\t\tawait refreshOAuthService();\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Done') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t};\n\n\tconst handleAddCustomOAuthButtonClick = (): void => {\n\t\tconst onConfirm = async (text: string): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tawait addOAuthService(text);\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Custom_OAuth_has_been_added') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tsetModal(null);\n\t\t\t}\n\t\t};\n\t\tsetModal(<CreateOAuthModal onConfirm={onConfirm} onClose={(): void => setModal(null)} />);\n\t};\n\n\tuseEffect(() => {\n\t\tsetSettingSections(sections);\n\t}, [sections]);\n\n\tconst removeCustomOauthFactory =\n\t\t(id: string): (() => void) =>\n\t\t(): void => {\n\t\t\tconst handleConfirm = async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tawait removeOAuthService(id);\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Custom_OAuth_has_been_removed') });\n\t\t\t\t\tsetSettingSections(settingSections.filter((section) => section !== `Custom OAuth: ${capitalize(id)}`));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t} finally {\n\t\t\t\t\tsetModal(null);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tsetModal(\n\t\t\t\t<GenericModal\n\t\t\t\t\tonClose={() => setModal(null)}\n\t\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\t\ttitle={t('Are_you_sure')}\n\t\t\t\t\tvariant='danger'\n\t\t\t\t\tconfirmText={t('Yes_delete_it')}\n\t\t\t\t\tonConfirm={handleConfirm}\n\t\t\t\t/>,\n\t\t\t);\n\t\t};\n\n\treturn (\n\t\t<SettingsGroupPage\n\t\t\t_id={_id}\n\t\t\t{...group}\n\t\t\tonClickBack={onClickBack}\n\t\t\theaderButtons={\n\t\t\t\t<>\n\t\t\t\t\t<Button onClick={handleRefreshOAuthServicesButtonClick}>{t('Refresh_oauth_services')}</Button>\n\t\t\t\t\t<Button onClick={handleAddCustomOAuthButtonClick}>{t('Add_custom_oauth')}</Button>\n\t\t\t\t</>\n\t\t\t}\n\t\t>\n\t\t\t{settingSections.map((sectionName) => {\n\t\t\t\tif (sectionIsCustomOAuth(sectionName)) {\n\t\t\t\t\tconst id = strRight(sectionName, 'Custom OAuth: ').toLowerCase();\n\n\t\t\t\t\tconst handleRemoveCustomOAuthButtonClick = removeCustomOauthFactory(id);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<SettingsSection\n\t\t\t\t\t\t\tkey={sectionName}\n\t\t\t\t\t\t\tgroupId={_id}\n\t\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t\t\t__html: t('Custom_oauth_helper', callbackURL(sectionName)),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsectionName={sectionName}\n\t\t\t\t\t\t\tsolo={solo}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className='submit'>\n\t\t\t\t\t\t\t\t<Button secondary danger onClick={handleRemoveCustomOAuthButtonClick}>\n\t\t\t\t\t\t\t\t\t{t('Remove_custom_oauth')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</SettingsSection>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn <SettingsSection key={sectionName} groupId={_id} sectionName={sectionName} solo={solo} />;\n\t\t\t})}\n\t\t</SettingsGroupPage>\n\t);\n}\n\nexport default memo(OAuthGroupPage);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"67683e35c7f2f86af641ecd06cbfa23e80ca0795"}
