{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/Omnichannel/modals/ForwardChatModal.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/components/Omnichannel/modals/ForwardChatModal.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/Omnichannel/modals/ForwardChatModal.tsx","inputSourceMap":{"version":3,"file":"client/components/Omnichannel/modals/ForwardChatModal.tsx","sourceRoot":"","sources":["client/components/Omnichannel/modals/ForwardChatModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IOmnichannelRoom } from '@rocket.chat/core-typings';\nimport {\n\tField,\n\tFieldGroup,\n\tButton,\n\tTextAreaInput,\n\tModal,\n\tBox,\n\tPaginatedSelectFiltered,\n\tDivider,\n\tFieldLabel,\n\tFieldRow,\n\tOption,\n} from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint, useSetting } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\n\nimport { useRecordList } from '../../../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../hooks/useAsyncState';\nimport AutoCompleteAgent from '../../AutoCompleteAgent';\nimport { useDepartmentsList } from '../hooks/useDepartmentsList';\n\nconst ForwardChatModal = ({\n\tonForward,\n\tonCancel,\n\troom,\n\t...props\n}: {\n\tonForward: (departmentId?: string, userId?: string, comment?: string) => Promise<void>;\n\tonCancel: () => void;\n\troom: IOmnichannelRoom;\n}): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst getUserData = useEndpoint('GET', '/v1/users.info');\n\tconst idleAgentsAllowedForForwarding = useSetting('Livechat_enabled_when_agent_idle') as boolean;\n\n\tconst {\n\t\tgetValues,\n\t\thandleSubmit,\n\t\tregister,\n\t\tsetFocus,\n\t\tsetValue,\n\t\twatch,\n\t\tformState: { isSubmitting },\n\t} = useForm();\n\n\tuseEffect(() => {\n\t\tsetFocus('comment');\n\t}, [setFocus]);\n\n\tconst department = watch('department');\n\tconst username = watch('username');\n\n\tconst [departmentsFilter, setDepartmentsFilter] = useState<string | number | undefined>('');\n\tconst debouncedDepartmentsFilter = useDebouncedValue(departmentsFilter, 500);\n\n\tconst { itemsList: departmentsList, loadMoreItems: loadMoreDepartments } = useDepartmentsList(\n\t\tuseMemo(() => ({ filter: debouncedDepartmentsFilter as string, enabled: true }), [debouncedDepartmentsFilter]),\n\t);\n\tconst { phase: departmentsPhase, items: departments, itemCount: departmentsTotal } = useRecordList(departmentsList);\n\n\tconst endReached = useCallback(\n\t\t(start) => {\n\t\t\tif (departmentsPhase !== AsyncStatePhase.LOADING) {\n\t\t\t\tloadMoreDepartments(start, Math.min(50, departmentsTotal));\n\t\t\t}\n\t\t},\n\t\t[departmentsPhase, departmentsTotal, loadMoreDepartments],\n\t);\n\n\tconst onSubmit = useCallback(\n\t\tasync ({ department: departmentId, username, comment }) => {\n\t\t\tlet uid;\n\n\t\t\tif (username) {\n\t\t\t\tconst { user } = await getUserData({ username });\n\t\t\t\tuid = user?._id;\n\t\t\t}\n\n\t\t\tawait onForward(departmentId, uid, comment);\n\t\t},\n\t\t[getUserData, onForward],\n\t);\n\n\tuseEffect(() => {\n\t\tregister('department');\n\t\tregister('username');\n\t}, [register]);\n\n\treturn (\n\t\t<Modal\n\t\t\twrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(onSubmit)} {...props} />}\n\t\t\t{...props}\n\t\t\tdata-qa-id='forward-chat-modal'\n\t\t>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Icon name='baloon-arrow-top-right' />\n\t\t\t\t<Modal.Title>{t('Forward_chat')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onCancel} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Forward_to_department')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<PaginatedSelectFiltered\n\t\t\t\t\t\t\t\twithTitle={false}\n\t\t\t\t\t\t\t\tfilter={departmentsFilter as string}\n\t\t\t\t\t\t\t\tsetFilter={setDepartmentsFilter}\n\t\t\t\t\t\t\t\toptions={departments}\n\t\t\t\t\t\t\t\tmaxWidth='100%'\n\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\tdata-qa-id='forward-to-department'\n\t\t\t\t\t\t\t\tonChange={(value: string): void => {\n\t\t\t\t\t\t\t\t\tsetValue('department', value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\tendReached={endReached}\n\t\t\t\t\t\t\t\trenderItem={({ label, ...props }) => <Option {...props} label={<span style={{ whiteSpace: 'normal' }}>{label}</span>} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Divider p={0} children={t('or')} />\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Forward_to_user')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<AutoCompleteAgent\n\t\t\t\t\t\t\t\twithTitle\n\t\t\t\t\t\t\t\tonlyAvailable\n\t\t\t\t\t\t\t\tvalue={getValues().username}\n\t\t\t\t\t\t\t\texcludeId={room.servedBy?._id}\n\t\t\t\t\t\t\t\tshowIdleAgents={idleAgentsAllowedForForwarding}\n\t\t\t\t\t\t\t\tplaceholder={t('Username_name_email')}\n\t\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\t\tsetValue('username', value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field marginBlock={15}>\n\t\t\t\t\t\t<FieldLabel>\n\t\t\t\t\t\t\t{t('Leave_a_comment')}{' '}\n\t\t\t\t\t\t\t<Box is='span' color='annotation'>\n\t\t\t\t\t\t\t\t({t('Optional')})\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<TextAreaInput data-qa-id='ForwardChatModalTextAreaInputComment' {...register('comment')} rows={8} flexGrow={1} />\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button type='submit' disabled={!username && !department} primary loading={isSubmitting}>\n\t\t\t\t\t\t{t('Forward')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default ForwardChatModal;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/Omnichannel/modals/ForwardChatModal.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/components/Omnichannel/modals/ForwardChatModal.tsx","inputSourceMap":{"version":3,"file":"client/components/Omnichannel/modals/ForwardChatModal.tsx","sourceRoot":"","sources":["client/components/Omnichannel/modals/ForwardChatModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IOmnichannelRoom } from '@rocket.chat/core-typings';\nimport {\n\tField,\n\tFieldGroup,\n\tButton,\n\tTextAreaInput,\n\tModal,\n\tBox,\n\tPaginatedSelectFiltered,\n\tDivider,\n\tFieldLabel,\n\tFieldRow,\n\tOption,\n} from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint, useSetting } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\n\nimport { useRecordList } from '../../../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../hooks/useAsyncState';\nimport AutoCompleteAgent from '../../AutoCompleteAgent';\nimport { useDepartmentsList } from '../hooks/useDepartmentsList';\n\nconst ForwardChatModal = ({\n\tonForward,\n\tonCancel,\n\troom,\n\t...props\n}: {\n\tonForward: (departmentId?: string, userId?: string, comment?: string) => Promise<void>;\n\tonCancel: () => void;\n\troom: IOmnichannelRoom;\n}): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst getUserData = useEndpoint('GET', '/v1/users.info');\n\tconst idleAgentsAllowedForForwarding = useSetting('Livechat_enabled_when_agent_idle') as boolean;\n\n\tconst {\n\t\tgetValues,\n\t\thandleSubmit,\n\t\tregister,\n\t\tsetFocus,\n\t\tsetValue,\n\t\twatch,\n\t\tformState: { isSubmitting },\n\t} = useForm();\n\n\tuseEffect(() => {\n\t\tsetFocus('comment');\n\t}, [setFocus]);\n\n\tconst department = watch('department');\n\tconst username = watch('username');\n\n\tconst [departmentsFilter, setDepartmentsFilter] = useState<string | number | undefined>('');\n\tconst debouncedDepartmentsFilter = useDebouncedValue(departmentsFilter, 500);\n\n\tconst { itemsList: departmentsList, loadMoreItems: loadMoreDepartments } = useDepartmentsList(\n\t\tuseMemo(() => ({ filter: debouncedDepartmentsFilter as string, enabled: true }), [debouncedDepartmentsFilter]),\n\t);\n\tconst { phase: departmentsPhase, items: departments, itemCount: departmentsTotal } = useRecordList(departmentsList);\n\n\tconst endReached = useCallback(\n\t\t(start) => {\n\t\t\tif (departmentsPhase !== AsyncStatePhase.LOADING) {\n\t\t\t\tloadMoreDepartments(start, Math.min(50, departmentsTotal));\n\t\t\t}\n\t\t},\n\t\t[departmentsPhase, departmentsTotal, loadMoreDepartments],\n\t);\n\n\tconst onSubmit = useCallback(\n\t\tasync ({ department: departmentId, username, comment }) => {\n\t\t\tlet uid;\n\n\t\t\tif (username) {\n\t\t\t\tconst { user } = await getUserData({ username });\n\t\t\t\tuid = user?._id;\n\t\t\t}\n\n\t\t\tawait onForward(departmentId, uid, comment);\n\t\t},\n\t\t[getUserData, onForward],\n\t);\n\n\tuseEffect(() => {\n\t\tregister('department');\n\t\tregister('username');\n\t}, [register]);\n\n\treturn (\n\t\t<Modal\n\t\t\twrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(onSubmit)} {...props} />}\n\t\t\t{...props}\n\t\t\tdata-qa-id='forward-chat-modal'\n\t\t>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Icon name='baloon-arrow-top-right' />\n\t\t\t\t<Modal.Title>{t('Forward_chat')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onCancel} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Forward_to_department')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<PaginatedSelectFiltered\n\t\t\t\t\t\t\t\twithTitle={false}\n\t\t\t\t\t\t\t\tfilter={departmentsFilter as string}\n\t\t\t\t\t\t\t\tsetFilter={setDepartmentsFilter}\n\t\t\t\t\t\t\t\toptions={departments}\n\t\t\t\t\t\t\t\tmaxWidth='100%'\n\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\tdata-qa-id='forward-to-department'\n\t\t\t\t\t\t\t\tonChange={(value: string): void => {\n\t\t\t\t\t\t\t\t\tsetValue('department', value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\tendReached={endReached}\n\t\t\t\t\t\t\t\trenderItem={({ label, ...props }) => <Option {...props} label={<span style={{ whiteSpace: 'normal' }}>{label}</span>} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Divider p={0} children={t('or')} />\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Forward_to_user')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<AutoCompleteAgent\n\t\t\t\t\t\t\t\twithTitle\n\t\t\t\t\t\t\t\tonlyAvailable\n\t\t\t\t\t\t\t\tvalue={getValues().username}\n\t\t\t\t\t\t\t\texcludeId={room.servedBy?._id}\n\t\t\t\t\t\t\t\tshowIdleAgents={idleAgentsAllowedForForwarding}\n\t\t\t\t\t\t\t\tplaceholder={t('Username_name_email')}\n\t\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\t\tsetValue('username', value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field marginBlock={15}>\n\t\t\t\t\t\t<FieldLabel>\n\t\t\t\t\t\t\t{t('Leave_a_comment')}{' '}\n\t\t\t\t\t\t\t<Box is='span' color='annotation'>\n\t\t\t\t\t\t\t\t({t('Optional')})\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<TextAreaInput data-qa-id='ForwardChatModalTextAreaInputComment' {...register('comment')} rows={8} flexGrow={1} />\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button type='submit' disabled={!username && !department} primary loading={isSubmitting}>\n\t\t\t\t\t\t{t('Forward')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default ForwardChatModal;\n"]}}},"code":"const _excluded = [\"onForward\", \"onCancel\", \"room\"],\n  _excluded2 = [\"label\"];\nlet _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n}, 1);\nlet Field, FieldGroup, Button, TextAreaInput, Modal, Box, PaginatedSelectFiltered, Divider, FieldLabel, FieldRow, Option;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Field(v) {\n    Field = v;\n  },\n  FieldGroup(v) {\n    FieldGroup = v;\n  },\n  Button(v) {\n    Button = v;\n  },\n  TextAreaInput(v) {\n    TextAreaInput = v;\n  },\n  Modal(v) {\n    Modal = v;\n  },\n  Box(v) {\n    Box = v;\n  },\n  PaginatedSelectFiltered(v) {\n    PaginatedSelectFiltered = v;\n  },\n  Divider(v) {\n    Divider = v;\n  },\n  FieldLabel(v) {\n    FieldLabel = v;\n  },\n  FieldRow(v) {\n    FieldRow = v;\n  },\n  Option(v) {\n    Option = v;\n  }\n}, 0);\nlet useDebouncedValue;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useDebouncedValue(v) {\n    useDebouncedValue = v;\n  }\n}, 1);\nlet useEndpoint, useSetting;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useEndpoint(v) {\n    useEndpoint = v;\n  },\n  useSetting(v) {\n    useSetting = v;\n  }\n}, 2);\nlet React, useCallback, useEffect, useMemo, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  },\n  useState(v) {\n    useState = v;\n  }\n}, 3);\nlet useForm;\nmodule.link(\"react-hook-form\", {\n  useForm(v) {\n    useForm = v;\n  }\n}, 4);\nlet useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 5);\nlet useRecordList;\nmodule.link(\"../../../hooks/lists/useRecordList\", {\n  useRecordList(v) {\n    useRecordList = v;\n  }\n}, 6);\nlet AsyncStatePhase;\nmodule.link(\"../../../hooks/useAsyncState\", {\n  AsyncStatePhase(v) {\n    AsyncStatePhase = v;\n  }\n}, 7);\nlet AutoCompleteAgent;\nmodule.link(\"../../AutoCompleteAgent\", {\n  default(v) {\n    AutoCompleteAgent = v;\n  }\n}, 8);\nlet useDepartmentsList;\nmodule.link(\"../hooks/useDepartmentsList\", {\n  useDepartmentsList(v) {\n    useDepartmentsList = v;\n  }\n}, 9);\nconst ForwardChatModal = _ref => {\n  var _room$servedBy;\n  let {\n      onForward,\n      onCancel,\n      room\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  const {\n    t\n  } = useTranslation();\n  const getUserData = useEndpoint('GET', '/v1/users.info');\n  const idleAgentsAllowedForForwarding = useSetting('Livechat_enabled_when_agent_idle');\n  const {\n    getValues,\n    handleSubmit,\n    register,\n    setFocus,\n    setValue,\n    watch,\n    formState: {\n      isSubmitting\n    }\n  } = useForm();\n  useEffect(() => {\n    setFocus('comment');\n  }, [setFocus]);\n  const department = watch('department');\n  const username = watch('username');\n  const [departmentsFilter, setDepartmentsFilter] = useState('');\n  const debouncedDepartmentsFilter = useDebouncedValue(departmentsFilter, 500);\n  const {\n    itemsList: departmentsList,\n    loadMoreItems: loadMoreDepartments\n  } = useDepartmentsList(useMemo(() => ({\n    filter: debouncedDepartmentsFilter,\n    enabled: true\n  }), [debouncedDepartmentsFilter]));\n  const {\n    phase: departmentsPhase,\n    items: departments,\n    itemCount: departmentsTotal\n  } = useRecordList(departmentsList);\n  const endReached = useCallback(start => {\n    if (departmentsPhase !== AsyncStatePhase.LOADING) {\n      loadMoreDepartments(start, Math.min(50, departmentsTotal));\n    }\n  }, [departmentsPhase, departmentsTotal, loadMoreDepartments]);\n  const onSubmit = useCallback(async _ref2 => {\n    let {\n      department: departmentId,\n      username,\n      comment\n    } = _ref2;\n    let uid;\n    if (username) {\n      const {\n        user\n      } = await getUserData({\n        username\n      });\n      uid = user === null || user === void 0 ? void 0 : user._id;\n    }\n    await onForward(departmentId, uid, comment);\n  }, [getUserData, onForward]);\n  useEffect(() => {\n    register('department');\n    register('username');\n  }, [register]);\n  return /*#__PURE__*/React.createElement(Modal, _extends({\n    wrapperFunction: props => /*#__PURE__*/React.createElement(Box, _extends({\n      is: \"form\",\n      onSubmit: handleSubmit(onSubmit)\n    }, props))\n  }, props, {\n    \"data-qa-id\": \"forward-chat-modal\"\n  }), /*#__PURE__*/React.createElement(Modal.Header, null, /*#__PURE__*/React.createElement(Modal.Icon, {\n    name: \"baloon-arrow-top-right\"\n  }), /*#__PURE__*/React.createElement(Modal.Title, null, t('Forward_chat')), /*#__PURE__*/React.createElement(Modal.Close, {\n    onClick: onCancel\n  })), /*#__PURE__*/React.createElement(Modal.Content, {\n    fontScale: \"p2\"\n  }, /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, null, t('Forward_to_department')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(PaginatedSelectFiltered, {\n    withTitle: false,\n    filter: departmentsFilter,\n    setFilter: setDepartmentsFilter,\n    options: departments,\n    maxWidth: \"100%\",\n    placeholder: t('Select_an_option'),\n    \"data-qa-id\": \"forward-to-department\",\n    onChange: value => {\n      setValue('department', value);\n    },\n    flexGrow: 1,\n    endReached: endReached,\n    renderItem: _ref3 => {\n      let {\n          label\n        } = _ref3,\n        props = _objectWithoutProperties(_ref3, _excluded2);\n      return /*#__PURE__*/React.createElement(Option, _extends({}, props, {\n        label: /*#__PURE__*/React.createElement(\"span\", {\n          style: {\n            whiteSpace: 'normal'\n          }\n        }, label)\n      }));\n    }\n  }))), /*#__PURE__*/React.createElement(Divider, {\n    p: 0,\n    children: t('or')\n  }), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, null, t('Forward_to_user')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(AutoCompleteAgent, {\n    withTitle: true,\n    onlyAvailable: true,\n    value: getValues().username,\n    excludeId: (_room$servedBy = room.servedBy) === null || _room$servedBy === void 0 ? void 0 : _room$servedBy._id,\n    showIdleAgents: idleAgentsAllowedForForwarding,\n    placeholder: t('Username_name_email'),\n    onChange: value => {\n      setValue('username', value);\n    }\n  }))), /*#__PURE__*/React.createElement(Field, {\n    marginBlock: 15\n  }, /*#__PURE__*/React.createElement(FieldLabel, null, t('Leave_a_comment'), ' ', /*#__PURE__*/React.createElement(Box, {\n    is: \"span\",\n    color: \"annotation\"\n  }, \"(\", t('Optional'), \")\")), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(TextAreaInput, _extends({\n    \"data-qa-id\": \"ForwardChatModalTextAreaInputComment\"\n  }, register('comment'), {\n    rows: 8,\n    flexGrow: 1\n  })))))), /*#__PURE__*/React.createElement(Modal.Footer, null, /*#__PURE__*/React.createElement(Modal.FooterControllers, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onCancel\n  }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    disabled: !username && !department,\n    primary: true,\n    loading: isSubmitting\n  }, t('Forward')))));\n};\nmodule.exportDefault(ForwardChatModal);","map":{"version":3,"names":["_extends","module","link","default","v","_objectWithoutProperties","Field","FieldGroup","Button","TextAreaInput","Modal","Box","PaginatedSelectFiltered","Divider","FieldLabel","FieldRow","Option","useDebouncedValue","useEndpoint","useSetting","React","useCallback","useEffect","useMemo","useState","useForm","useTranslation","useRecordList","AsyncStatePhase","AutoCompleteAgent","useDepartmentsList","ForwardChatModal","_ref","_room$servedBy","onForward","onCancel","room","props","_excluded","t","getUserData","idleAgentsAllowedForForwarding","getValues","handleSubmit","register","setFocus","setValue","watch","formState","isSubmitting","department","username","departmentsFilter","setDepartmentsFilter","debouncedDepartmentsFilter","itemsList","departmentsList","loadMoreItems","loadMoreDepartments","filter","enabled","phase","departmentsPhase","items","departments","itemCount","departmentsTotal","endReached","start","LOADING","Math","min","onSubmit","_ref2","departmentId","comment","uid","user","_id","createElement","wrapperFunction","is","Header","Icon","name","Title","Close","onClick","Content","fontScale","withTitle","setFilter","options","maxWidth","placeholder","onChange","value","flexGrow","renderItem","_ref3","label","_excluded2","style","whiteSpace","p","children","onlyAvailable","excludeId","servedBy","showIdleAgents","marginBlock","color","rows","Footer","FooterControllers","type","disabled","primary","loading","exportDefault"],"sources":["client/components/Omnichannel/modals/ForwardChatModal.tsx"],"sourcesContent":["import type { IOmnichannelRoom } from '@rocket.chat/core-typings';\nimport {\n\tField,\n\tFieldGroup,\n\tButton,\n\tTextAreaInput,\n\tModal,\n\tBox,\n\tPaginatedSelectFiltered,\n\tDivider,\n\tFieldLabel,\n\tFieldRow,\n\tOption,\n} from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint, useSetting } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\n\nimport { useRecordList } from '../../../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../hooks/useAsyncState';\nimport AutoCompleteAgent from '../../AutoCompleteAgent';\nimport { useDepartmentsList } from '../hooks/useDepartmentsList';\n\nconst ForwardChatModal = ({\n\tonForward,\n\tonCancel,\n\troom,\n\t...props\n}: {\n\tonForward: (departmentId?: string, userId?: string, comment?: string) => Promise<void>;\n\tonCancel: () => void;\n\troom: IOmnichannelRoom;\n}): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst getUserData = useEndpoint('GET', '/v1/users.info');\n\tconst idleAgentsAllowedForForwarding = useSetting('Livechat_enabled_when_agent_idle') as boolean;\n\n\tconst {\n\t\tgetValues,\n\t\thandleSubmit,\n\t\tregister,\n\t\tsetFocus,\n\t\tsetValue,\n\t\twatch,\n\t\tformState: { isSubmitting },\n\t} = useForm();\n\n\tuseEffect(() => {\n\t\tsetFocus('comment');\n\t}, [setFocus]);\n\n\tconst department = watch('department');\n\tconst username = watch('username');\n\n\tconst [departmentsFilter, setDepartmentsFilter] = useState<string | number | undefined>('');\n\tconst debouncedDepartmentsFilter = useDebouncedValue(departmentsFilter, 500);\n\n\tconst { itemsList: departmentsList, loadMoreItems: loadMoreDepartments } = useDepartmentsList(\n\t\tuseMemo(() => ({ filter: debouncedDepartmentsFilter as string, enabled: true }), [debouncedDepartmentsFilter]),\n\t);\n\tconst { phase: departmentsPhase, items: departments, itemCount: departmentsTotal } = useRecordList(departmentsList);\n\n\tconst endReached = useCallback(\n\t\t(start) => {\n\t\t\tif (departmentsPhase !== AsyncStatePhase.LOADING) {\n\t\t\t\tloadMoreDepartments(start, Math.min(50, departmentsTotal));\n\t\t\t}\n\t\t},\n\t\t[departmentsPhase, departmentsTotal, loadMoreDepartments],\n\t);\n\n\tconst onSubmit = useCallback(\n\t\tasync ({ department: departmentId, username, comment }) => {\n\t\t\tlet uid;\n\n\t\t\tif (username) {\n\t\t\t\tconst { user } = await getUserData({ username });\n\t\t\t\tuid = user?._id;\n\t\t\t}\n\n\t\t\tawait onForward(departmentId, uid, comment);\n\t\t},\n\t\t[getUserData, onForward],\n\t);\n\n\tuseEffect(() => {\n\t\tregister('department');\n\t\tregister('username');\n\t}, [register]);\n\n\treturn (\n\t\t<Modal\n\t\t\twrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(onSubmit)} {...props} />}\n\t\t\t{...props}\n\t\t\tdata-qa-id='forward-chat-modal'\n\t\t>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Icon name='baloon-arrow-top-right' />\n\t\t\t\t<Modal.Title>{t('Forward_chat')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onCancel} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Forward_to_department')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<PaginatedSelectFiltered\n\t\t\t\t\t\t\t\twithTitle={false}\n\t\t\t\t\t\t\t\tfilter={departmentsFilter as string}\n\t\t\t\t\t\t\t\tsetFilter={setDepartmentsFilter}\n\t\t\t\t\t\t\t\toptions={departments}\n\t\t\t\t\t\t\t\tmaxWidth='100%'\n\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\tdata-qa-id='forward-to-department'\n\t\t\t\t\t\t\t\tonChange={(value: string): void => {\n\t\t\t\t\t\t\t\t\tsetValue('department', value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\tendReached={endReached}\n\t\t\t\t\t\t\t\trenderItem={({ label, ...props }) => <Option {...props} label={<span style={{ whiteSpace: 'normal' }}>{label}</span>} />}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Divider p={0} children={t('or')} />\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Forward_to_user')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<AutoCompleteAgent\n\t\t\t\t\t\t\t\twithTitle\n\t\t\t\t\t\t\t\tonlyAvailable\n\t\t\t\t\t\t\t\tvalue={getValues().username}\n\t\t\t\t\t\t\t\texcludeId={room.servedBy?._id}\n\t\t\t\t\t\t\t\tshowIdleAgents={idleAgentsAllowedForForwarding}\n\t\t\t\t\t\t\t\tplaceholder={t('Username_name_email')}\n\t\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\t\tsetValue('username', value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field marginBlock={15}>\n\t\t\t\t\t\t<FieldLabel>\n\t\t\t\t\t\t\t{t('Leave_a_comment')}{' '}\n\t\t\t\t\t\t\t<Box is='span' color='annotation'>\n\t\t\t\t\t\t\t\t({t('Optional')})\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<TextAreaInput data-qa-id='ForwardChatModalTextAreaInputComment' {...register('comment')} rows={8} flexGrow={1} />\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button type='submit' disabled={!username && !department} primary loading={isSubmitting}>\n\t\t\t\t\t\t{t('Forward')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default ForwardChatModal;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"0788f8879f00bdea495e1cec991630b827dc9ead"}
