{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSetting.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSetting.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSetting.tsx","inputSourceMap":{"version":3,"file":"client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSetting.tsx","sourceRoot":"","sources":["client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSetting.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { ISettingSelectValue } from '@rocket.chat/apps-engine/definition/settings';\nimport type { ISetting } from '@rocket.chat/apps-engine/definition/settings/ISetting';\nimport { useRouteParameter, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useCallback } from 'react';\nimport { Controller, useFormContext } from 'react-hook-form';\n\nimport { Utilities } from '../../../../../../ee/lib/misc/Utilities';\nimport MarkdownText from '../../../../../components/MarkdownText';\nimport MemoizedSetting from '../../../../admin/settings/Setting/MemoizedSetting';\n\ntype AppTranslationFunction = {\n\t(key: string, ...replaces: unknown[]): string;\n\thas: (key: string | undefined) => boolean;\n};\n\nconst useAppTranslation = (appId: string): AppTranslationFunction => {\n\tconst t = useTranslation();\n\n\tconst tApp = useCallback(\n\t\t(key: string, ...args: unknown[]) => {\n\t\t\tif (!key) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tconst appKey = Utilities.getI18nKeyForApp(key, appId);\n\n\t\t\tif (t.has(appKey)) {\n\t\t\t\treturn t(appKey, ...args);\n\t\t\t}\n\t\t\tif (t.has(key)) {\n\t\t\t\treturn t(key, ...args);\n\t\t\t}\n\t\t\treturn key;\n\t\t},\n\t\t[t, appId],\n\t);\n\n\treturn Object.assign(tApp, {\n\t\thas: useCallback(\n\t\t\t(key: string | undefined) => {\n\t\t\t\tif (!key) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn t.has(Utilities.getI18nKeyForApp(key, appId)) || t.has(key);\n\t\t\t},\n\t\t\t[t, appId],\n\t\t),\n\t});\n};\n\nconst AppSetting = ({ id, type, i18nLabel, i18nDescription, values, value, packageValue, ...props }: ISetting): ReactElement => {\n\tconst appId = useRouteParameter('id');\n\tconst tApp = useAppTranslation(appId || '');\n\n\tconst label = (i18nLabel && tApp(i18nLabel)) || id || tApp(id);\n\tconst hint = useMemo(() => i18nDescription && <MarkdownText content={tApp(i18nDescription)} />, [i18nDescription, tApp]);\n\n\tconst { control } = useFormContext();\n\n\tlet translatedValues: ISettingSelectValue[];\n\tif (values?.length) {\n\t\ttranslatedValues = values.map((selectFieldEntry) => {\n\t\t\tconst { key, i18nLabel } = selectFieldEntry;\n\n\t\t\tif (!i18nLabel) {\n\t\t\t\treturn selectFieldEntry;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tkey,\n\t\t\t\ti18nLabel: tApp(i18nLabel),\n\t\t\t};\n\t\t});\n\t}\n\n\treturn (\n\t\t<Controller\n\t\t\tdefaultValue={value || packageValue}\n\t\t\tname={id}\n\t\t\tcontrol={control}\n\t\t\trender={({ field: { onChange, value } }) => (\n\t\t\t\t<MemoizedSetting\n\t\t\t\t\tpackageValue={packageValue}\n\t\t\t\t\ttype={type}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\thint={hint}\n\t\t\t\t\t_id={id}\n\t\t\t\t\t{...(translatedValues && { values: translatedValues })}\n\t\t\t\t\t{...props}\n\t\t\t\t\tonChangeValue={onChange}\n\t\t\t\t\tvalue={value}\n\t\t\t\t/>\n\t\t\t)}\n\t\t/>\n\t);\n};\n\nexport default AppSetting;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSetting.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSetting.tsx","inputSourceMap":{"version":3,"file":"client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSetting.tsx","sourceRoot":"","sources":["client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSetting.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { ISettingSelectValue } from '@rocket.chat/apps-engine/definition/settings';\nimport type { ISetting } from '@rocket.chat/apps-engine/definition/settings/ISetting';\nimport { useRouteParameter, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useCallback } from 'react';\nimport { Controller, useFormContext } from 'react-hook-form';\n\nimport { Utilities } from '../../../../../../ee/lib/misc/Utilities';\nimport MarkdownText from '../../../../../components/MarkdownText';\nimport MemoizedSetting from '../../../../admin/settings/Setting/MemoizedSetting';\n\ntype AppTranslationFunction = {\n\t(key: string, ...replaces: unknown[]): string;\n\thas: (key: string | undefined) => boolean;\n};\n\nconst useAppTranslation = (appId: string): AppTranslationFunction => {\n\tconst t = useTranslation();\n\n\tconst tApp = useCallback(\n\t\t(key: string, ...args: unknown[]) => {\n\t\t\tif (!key) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tconst appKey = Utilities.getI18nKeyForApp(key, appId);\n\n\t\t\tif (t.has(appKey)) {\n\t\t\t\treturn t(appKey, ...args);\n\t\t\t}\n\t\t\tif (t.has(key)) {\n\t\t\t\treturn t(key, ...args);\n\t\t\t}\n\t\t\treturn key;\n\t\t},\n\t\t[t, appId],\n\t);\n\n\treturn Object.assign(tApp, {\n\t\thas: useCallback(\n\t\t\t(key: string | undefined) => {\n\t\t\t\tif (!key) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn t.has(Utilities.getI18nKeyForApp(key, appId)) || t.has(key);\n\t\t\t},\n\t\t\t[t, appId],\n\t\t),\n\t});\n};\n\nconst AppSetting = ({ id, type, i18nLabel, i18nDescription, values, value, packageValue, ...props }: ISetting): ReactElement => {\n\tconst appId = useRouteParameter('id');\n\tconst tApp = useAppTranslation(appId || '');\n\n\tconst label = (i18nLabel && tApp(i18nLabel)) || id || tApp(id);\n\tconst hint = useMemo(() => i18nDescription && <MarkdownText content={tApp(i18nDescription)} />, [i18nDescription, tApp]);\n\n\tconst { control } = useFormContext();\n\n\tlet translatedValues: ISettingSelectValue[];\n\tif (values?.length) {\n\t\ttranslatedValues = values.map((selectFieldEntry) => {\n\t\t\tconst { key, i18nLabel } = selectFieldEntry;\n\n\t\t\tif (!i18nLabel) {\n\t\t\t\treturn selectFieldEntry;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tkey,\n\t\t\t\ti18nLabel: tApp(i18nLabel),\n\t\t\t};\n\t\t});\n\t}\n\n\treturn (\n\t\t<Controller\n\t\t\tdefaultValue={value || packageValue}\n\t\t\tname={id}\n\t\t\tcontrol={control}\n\t\t\trender={({ field: { onChange, value } }) => (\n\t\t\t\t<MemoizedSetting\n\t\t\t\t\tpackageValue={packageValue}\n\t\t\t\t\ttype={type}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\thint={hint}\n\t\t\t\t\t_id={id}\n\t\t\t\t\t{...(translatedValues && { values: translatedValues })}\n\t\t\t\t\t{...props}\n\t\t\t\t\tonChangeValue={onChange}\n\t\t\t\t\tvalue={value}\n\t\t\t\t/>\n\t\t\t)}\n\t\t/>\n\t);\n};\n\nexport default AppSetting;\n"]}}},"code":"const _excluded = [\"id\", \"type\", \"i18nLabel\", \"i18nDescription\", \"values\", \"value\", \"packageValue\"];\nlet _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n}, 1);\nlet useRouteParameter, useTranslation;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useRouteParameter(v) {\n    useRouteParameter = v;\n  },\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 0);\nlet React, useMemo, useCallback;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  }\n}, 1);\nlet Controller, useFormContext;\nmodule.link(\"react-hook-form\", {\n  Controller(v) {\n    Controller = v;\n  },\n  useFormContext(v) {\n    useFormContext = v;\n  }\n}, 2);\nlet Utilities;\nmodule.link(\"../../../../../../ee/lib/misc/Utilities\", {\n  Utilities(v) {\n    Utilities = v;\n  }\n}, 3);\nlet MarkdownText;\nmodule.link(\"../../../../../components/MarkdownText\", {\n  default(v) {\n    MarkdownText = v;\n  }\n}, 4);\nlet MemoizedSetting;\nmodule.link(\"../../../../admin/settings/Setting/MemoizedSetting\", {\n  default(v) {\n    MemoizedSetting = v;\n  }\n}, 5);\nconst useAppTranslation = appId => {\n  const t = useTranslation();\n  const tApp = useCallback(function (key) {\n    if (!key) {\n      return '';\n    }\n    const appKey = Utilities.getI18nKeyForApp(key, appId);\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (t.has(appKey)) {\n      return t(appKey, ...args);\n    }\n    if (t.has(key)) {\n      return t(key, ...args);\n    }\n    return key;\n  }, [t, appId]);\n  return Object.assign(tApp, {\n    has: useCallback(key => {\n      if (!key) {\n        return false;\n      }\n      return t.has(Utilities.getI18nKeyForApp(key, appId)) || t.has(key);\n    }, [t, appId])\n  });\n};\nconst AppSetting = _ref => {\n  let {\n      id,\n      type,\n      i18nLabel,\n      i18nDescription,\n      values,\n      value,\n      packageValue\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  const appId = useRouteParameter('id');\n  const tApp = useAppTranslation(appId || '');\n  const label = i18nLabel && tApp(i18nLabel) || id || tApp(id);\n  const hint = useMemo(() => i18nDescription && /*#__PURE__*/React.createElement(MarkdownText, {\n    content: tApp(i18nDescription)\n  }), [i18nDescription, tApp]);\n  const {\n    control\n  } = useFormContext();\n  let translatedValues;\n  if (values !== null && values !== void 0 && values.length) {\n    translatedValues = values.map(selectFieldEntry => {\n      const {\n        key,\n        i18nLabel\n      } = selectFieldEntry;\n      if (!i18nLabel) {\n        return selectFieldEntry;\n      }\n      return {\n        key,\n        i18nLabel: tApp(i18nLabel)\n      };\n    });\n  }\n  return /*#__PURE__*/React.createElement(Controller, {\n    defaultValue: value || packageValue,\n    name: id,\n    control: control,\n    render: _ref2 => {\n      let {\n        field: {\n          onChange,\n          value\n        }\n      } = _ref2;\n      return /*#__PURE__*/React.createElement(MemoizedSetting, _extends({\n        packageValue: packageValue,\n        type: type,\n        label: label,\n        hint: hint,\n        _id: id\n      }, translatedValues && {\n        values: translatedValues\n      }, props, {\n        onChangeValue: onChange,\n        value: value\n      }));\n    }\n  });\n};\nmodule.exportDefault(AppSetting);","map":{"version":3,"names":["_extends","module","link","default","v","_objectWithoutProperties","useRouteParameter","useTranslation","React","useMemo","useCallback","Controller","useFormContext","Utilities","MarkdownText","MemoizedSetting","useAppTranslation","appId","t","tApp","key","appKey","getI18nKeyForApp","_len","arguments","length","args","Array","_key","has","Object","assign","AppSetting","_ref","id","type","i18nLabel","i18nDescription","values","value","packageValue","props","_excluded","label","hint","createElement","content","control","translatedValues","map","selectFieldEntry","defaultValue","name","render","_ref2","field","onChange","_id","onChangeValue","exportDefault"],"sources":["client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSetting.tsx"],"sourcesContent":["import type { ISettingSelectValue } from '@rocket.chat/apps-engine/definition/settings';\nimport type { ISetting } from '@rocket.chat/apps-engine/definition/settings/ISetting';\nimport { useRouteParameter, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useCallback } from 'react';\nimport { Controller, useFormContext } from 'react-hook-form';\n\nimport { Utilities } from '../../../../../../ee/lib/misc/Utilities';\nimport MarkdownText from '../../../../../components/MarkdownText';\nimport MemoizedSetting from '../../../../admin/settings/Setting/MemoizedSetting';\n\ntype AppTranslationFunction = {\n\t(key: string, ...replaces: unknown[]): string;\n\thas: (key: string | undefined) => boolean;\n};\n\nconst useAppTranslation = (appId: string): AppTranslationFunction => {\n\tconst t = useTranslation();\n\n\tconst tApp = useCallback(\n\t\t(key: string, ...args: unknown[]) => {\n\t\t\tif (!key) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tconst appKey = Utilities.getI18nKeyForApp(key, appId);\n\n\t\t\tif (t.has(appKey)) {\n\t\t\t\treturn t(appKey, ...args);\n\t\t\t}\n\t\t\tif (t.has(key)) {\n\t\t\t\treturn t(key, ...args);\n\t\t\t}\n\t\t\treturn key;\n\t\t},\n\t\t[t, appId],\n\t);\n\n\treturn Object.assign(tApp, {\n\t\thas: useCallback(\n\t\t\t(key: string | undefined) => {\n\t\t\t\tif (!key) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn t.has(Utilities.getI18nKeyForApp(key, appId)) || t.has(key);\n\t\t\t},\n\t\t\t[t, appId],\n\t\t),\n\t});\n};\n\nconst AppSetting = ({ id, type, i18nLabel, i18nDescription, values, value, packageValue, ...props }: ISetting): ReactElement => {\n\tconst appId = useRouteParameter('id');\n\tconst tApp = useAppTranslation(appId || '');\n\n\tconst label = (i18nLabel && tApp(i18nLabel)) || id || tApp(id);\n\tconst hint = useMemo(() => i18nDescription && <MarkdownText content={tApp(i18nDescription)} />, [i18nDescription, tApp]);\n\n\tconst { control } = useFormContext();\n\n\tlet translatedValues: ISettingSelectValue[];\n\tif (values?.length) {\n\t\ttranslatedValues = values.map((selectFieldEntry) => {\n\t\t\tconst { key, i18nLabel } = selectFieldEntry;\n\n\t\t\tif (!i18nLabel) {\n\t\t\t\treturn selectFieldEntry;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tkey,\n\t\t\t\ti18nLabel: tApp(i18nLabel),\n\t\t\t};\n\t\t});\n\t}\n\n\treturn (\n\t\t<Controller\n\t\t\tdefaultValue={value || packageValue}\n\t\t\tname={id}\n\t\t\tcontrol={control}\n\t\t\trender={({ field: { onChange, value } }) => (\n\t\t\t\t<MemoizedSetting\n\t\t\t\t\tpackageValue={packageValue}\n\t\t\t\t\ttype={type}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\thint={hint}\n\t\t\t\t\t_id={id}\n\t\t\t\t\t{...(translatedValues && { values: translatedValues })}\n\t\t\t\t\t{...props}\n\t\t\t\t\tonChangeValue={onChange}\n\t\t\t\t\tvalue={value}\n\t\t\t\t/>\n\t\t\t)}\n\t\t/>\n\t);\n};\n\nexport default AppSetting;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"edc2d7cb3d4c30b255191de6d38462817c921755"}
