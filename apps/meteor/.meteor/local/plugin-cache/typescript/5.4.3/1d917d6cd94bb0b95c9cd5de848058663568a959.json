{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/message/variants/SystemMessage.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/components/message/variants/SystemMessage.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/message/variants/SystemMessage.tsx","inputSourceMap":{"version":3,"file":"client/components/message/variants/SystemMessage.tsx","sourceRoot":"","sources":["client/components/message/variants/SystemMessage.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport {\n\tMessageSystem,\n\tMessageSystemBody,\n\tMessageSystemContainer,\n\tMessageSystemLeftContainer,\n\tMessageSystemName,\n\tMessageSystemTimestamp,\n\tMessageSystemBlock,\n\tCheckBox,\n\tMessageUsername,\n\tMessageNameContainer,\n} from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps, ReactElement, KeyboardEvent } from 'react';\nimport React, { memo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { MessageTypes } from '../../../../app/ui-utils/client';\nimport { getUserDisplayName } from '../../../../lib/getUserDisplayName';\nimport { useFormatDateAndTime } from '../../../hooks/useFormatDateAndTime';\nimport { useFormatTime } from '../../../hooks/useFormatTime';\nimport { useUserData } from '../../../hooks/useUserData';\nimport type { UserPresence } from '../../../lib/presence';\nimport {\n\tuseIsSelecting,\n\tuseToggleSelect,\n\tuseIsSelectedMessage,\n\tuseCountSelected,\n} from '../../../views/room/MessageList/contexts/SelectedMessagesContext';\nimport { useUserCard } from '../../../views/room/contexts/UserCardContext';\nimport Attachments from '../content/Attachments';\nimport MessageActions from '../content/MessageActions';\nimport { useMessageListShowRealName, useMessageListShowUsername } from '../list/MessageListContext';\n\ntype SystemMessageProps = {\n\tmessage: IMessage;\n\tshowUserAvatar: boolean;\n} & ComponentProps<typeof MessageSystem>;\n\nconst SystemMessage = ({ message, showUserAvatar, ...props }: SystemMessageProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst formatTime = useFormatTime();\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst { triggerProps, openUserCard } = useUserCard();\n\n\tconst showRealName = useMessageListShowRealName();\n\tconst user: UserPresence = { ...message.u, roles: [], ...useUserData(message.u._id) };\n\tconst usernameAndRealNameAreSame = !user.name || user.username === user.name;\n\tconst showUsername = useMessageListShowUsername() && showRealName && !usernameAndRealNameAreSame;\n\n\tconst messageType = MessageTypes.getType(message);\n\n\tconst isSelecting = useIsSelecting();\n\tconst toggleSelected = useToggleSelect(message._id);\n\tconst isSelected = useIsSelectedMessage(message._id);\n\tuseCountSelected();\n\n\treturn (\n\t\t<MessageSystem\n\t\t\trole='listitem'\n\t\t\taria-roledescription={t('system_message')}\n\t\t\ttabIndex={0}\n\t\t\tonClick={isSelecting ? toggleSelected : undefined}\n\t\t\tisSelected={isSelected}\n\t\t\tdata-qa-selected={isSelected}\n\t\t\tdata-qa='system-message'\n\t\t\tdata-system-message-type={message.t}\n\t\t\t{...props}\n\t\t>\n\t\t\t<MessageSystemLeftContainer>\n\t\t\t\t{!isSelecting && showUserAvatar && <UserAvatar username={message.u.username} size='x18' />}\n\t\t\t\t{isSelecting && <CheckBox checked={isSelected} onChange={toggleSelected} />}\n\t\t\t</MessageSystemLeftContainer>\n\t\t\t<MessageSystemContainer>\n\t\t\t\t<MessageSystemBlock>\n\t\t\t\t\t<MessageNameContainer\n\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\trole='button'\n\t\t\t\t\t\tonClick={(e) => user.username && openUserCard(e, user.username)}\n\t\t\t\t\t\tonKeyDown={(e: KeyboardEvent<HTMLSpanElement>) => {\n\t\t\t\t\t\t\t(e.code === 'Enter' || e.code === 'Space') && openUserCard(e, message.u.username);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={{ cursor: 'pointer' }}\n\t\t\t\t\t\t{...triggerProps}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MessageSystemName>{getUserDisplayName(user.name, user.username, showRealName)}</MessageSystemName>\n\t\t\t\t\t\t{showUsername && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t<MessageUsername data-username={user.username}>@{user.username}</MessageUsername>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</MessageNameContainer>\n\t\t\t\t\t{messageType && (\n\t\t\t\t\t\t<MessageSystemBody data-qa-type='system-message-body'>\n\t\t\t\t\t\t\t{t(messageType.message, messageType.data ? messageType.data(message) : {})}\n\t\t\t\t\t\t</MessageSystemBody>\n\t\t\t\t\t)}\n\t\t\t\t\t<MessageSystemTimestamp title={formatDateAndTime(message.ts)}>{formatTime(message.ts)}</MessageSystemTimestamp>\n\t\t\t\t</MessageSystemBlock>\n\t\t\t\t{message.attachments && (\n\t\t\t\t\t<MessageSystemBlock>\n\t\t\t\t\t\t<Attachments attachments={message.attachments} />\n\t\t\t\t\t</MessageSystemBlock>\n\t\t\t\t)}\n\t\t\t\t{message.actionLinks?.length && (\n\t\t\t\t\t<MessageActions\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tactions={message.actionLinks.map(({ method_id: methodId, i18nLabel, ...action }) => ({\n\t\t\t\t\t\t\tmethodId,\n\t\t\t\t\t\t\ti18nLabel: i18nLabel as TranslationKey,\n\t\t\t\t\t\t\t...action,\n\t\t\t\t\t\t}))}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</MessageSystemContainer>\n\t\t</MessageSystem>\n\t);\n};\n\nexport default memo(SystemMessage);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/message/variants/SystemMessage.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/components/message/variants/SystemMessage.tsx","inputSourceMap":{"version":3,"file":"client/components/message/variants/SystemMessage.tsx","sourceRoot":"","sources":["client/components/message/variants/SystemMessage.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport {\n\tMessageSystem,\n\tMessageSystemBody,\n\tMessageSystemContainer,\n\tMessageSystemLeftContainer,\n\tMessageSystemName,\n\tMessageSystemTimestamp,\n\tMessageSystemBlock,\n\tCheckBox,\n\tMessageUsername,\n\tMessageNameContainer,\n} from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps, ReactElement, KeyboardEvent } from 'react';\nimport React, { memo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { MessageTypes } from '../../../../app/ui-utils/client';\nimport { getUserDisplayName } from '../../../../lib/getUserDisplayName';\nimport { useFormatDateAndTime } from '../../../hooks/useFormatDateAndTime';\nimport { useFormatTime } from '../../../hooks/useFormatTime';\nimport { useUserData } from '../../../hooks/useUserData';\nimport type { UserPresence } from '../../../lib/presence';\nimport {\n\tuseIsSelecting,\n\tuseToggleSelect,\n\tuseIsSelectedMessage,\n\tuseCountSelected,\n} from '../../../views/room/MessageList/contexts/SelectedMessagesContext';\nimport { useUserCard } from '../../../views/room/contexts/UserCardContext';\nimport Attachments from '../content/Attachments';\nimport MessageActions from '../content/MessageActions';\nimport { useMessageListShowRealName, useMessageListShowUsername } from '../list/MessageListContext';\n\ntype SystemMessageProps = {\n\tmessage: IMessage;\n\tshowUserAvatar: boolean;\n} & ComponentProps<typeof MessageSystem>;\n\nconst SystemMessage = ({ message, showUserAvatar, ...props }: SystemMessageProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst formatTime = useFormatTime();\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst { triggerProps, openUserCard } = useUserCard();\n\n\tconst showRealName = useMessageListShowRealName();\n\tconst user: UserPresence = { ...message.u, roles: [], ...useUserData(message.u._id) };\n\tconst usernameAndRealNameAreSame = !user.name || user.username === user.name;\n\tconst showUsername = useMessageListShowUsername() && showRealName && !usernameAndRealNameAreSame;\n\n\tconst messageType = MessageTypes.getType(message);\n\n\tconst isSelecting = useIsSelecting();\n\tconst toggleSelected = useToggleSelect(message._id);\n\tconst isSelected = useIsSelectedMessage(message._id);\n\tuseCountSelected();\n\n\treturn (\n\t\t<MessageSystem\n\t\t\trole='listitem'\n\t\t\taria-roledescription={t('system_message')}\n\t\t\ttabIndex={0}\n\t\t\tonClick={isSelecting ? toggleSelected : undefined}\n\t\t\tisSelected={isSelected}\n\t\t\tdata-qa-selected={isSelected}\n\t\t\tdata-qa='system-message'\n\t\t\tdata-system-message-type={message.t}\n\t\t\t{...props}\n\t\t>\n\t\t\t<MessageSystemLeftContainer>\n\t\t\t\t{!isSelecting && showUserAvatar && <UserAvatar username={message.u.username} size='x18' />}\n\t\t\t\t{isSelecting && <CheckBox checked={isSelected} onChange={toggleSelected} />}\n\t\t\t</MessageSystemLeftContainer>\n\t\t\t<MessageSystemContainer>\n\t\t\t\t<MessageSystemBlock>\n\t\t\t\t\t<MessageNameContainer\n\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\trole='button'\n\t\t\t\t\t\tonClick={(e) => user.username && openUserCard(e, user.username)}\n\t\t\t\t\t\tonKeyDown={(e: KeyboardEvent<HTMLSpanElement>) => {\n\t\t\t\t\t\t\t(e.code === 'Enter' || e.code === 'Space') && openUserCard(e, message.u.username);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={{ cursor: 'pointer' }}\n\t\t\t\t\t\t{...triggerProps}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MessageSystemName>{getUserDisplayName(user.name, user.username, showRealName)}</MessageSystemName>\n\t\t\t\t\t\t{showUsername && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t<MessageUsername data-username={user.username}>@{user.username}</MessageUsername>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</MessageNameContainer>\n\t\t\t\t\t{messageType && (\n\t\t\t\t\t\t<MessageSystemBody data-qa-type='system-message-body'>\n\t\t\t\t\t\t\t{t(messageType.message, messageType.data ? messageType.data(message) : {})}\n\t\t\t\t\t\t</MessageSystemBody>\n\t\t\t\t\t)}\n\t\t\t\t\t<MessageSystemTimestamp title={formatDateAndTime(message.ts)}>{formatTime(message.ts)}</MessageSystemTimestamp>\n\t\t\t\t</MessageSystemBlock>\n\t\t\t\t{message.attachments && (\n\t\t\t\t\t<MessageSystemBlock>\n\t\t\t\t\t\t<Attachments attachments={message.attachments} />\n\t\t\t\t\t</MessageSystemBlock>\n\t\t\t\t)}\n\t\t\t\t{message.actionLinks?.length && (\n\t\t\t\t\t<MessageActions\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tactions={message.actionLinks.map(({ method_id: methodId, i18nLabel, ...action }) => ({\n\t\t\t\t\t\t\tmethodId,\n\t\t\t\t\t\t\ti18nLabel: i18nLabel as TranslationKey,\n\t\t\t\t\t\t\t...action,\n\t\t\t\t\t\t}))}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</MessageSystemContainer>\n\t\t</MessageSystem>\n\t);\n};\n\nexport default memo(SystemMessage);\n"]}}},"code":"const _excluded = [\"message\", \"showUserAvatar\"],\n  _excluded2 = [\"method_id\", \"i18nLabel\"];\nlet _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 1);\nlet _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n}, 2);\nlet MessageSystem, MessageSystemBody, MessageSystemContainer, MessageSystemLeftContainer, MessageSystemName, MessageSystemTimestamp, MessageSystemBlock, CheckBox, MessageUsername, MessageNameContainer;\nmodule.link(\"@rocket.chat/fuselage\", {\n  MessageSystem(v) {\n    MessageSystem = v;\n  },\n  MessageSystemBody(v) {\n    MessageSystemBody = v;\n  },\n  MessageSystemContainer(v) {\n    MessageSystemContainer = v;\n  },\n  MessageSystemLeftContainer(v) {\n    MessageSystemLeftContainer = v;\n  },\n  MessageSystemName(v) {\n    MessageSystemName = v;\n  },\n  MessageSystemTimestamp(v) {\n    MessageSystemTimestamp = v;\n  },\n  MessageSystemBlock(v) {\n    MessageSystemBlock = v;\n  },\n  CheckBox(v) {\n    CheckBox = v;\n  },\n  MessageUsername(v) {\n    MessageUsername = v;\n  },\n  MessageNameContainer(v) {\n    MessageNameContainer = v;\n  }\n}, 0);\nlet UserAvatar;\nmodule.link(\"@rocket.chat/ui-avatar\", {\n  UserAvatar(v) {\n    UserAvatar = v;\n  }\n}, 1);\nlet React, memo;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  memo(v) {\n    memo = v;\n  }\n}, 2);\nlet useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 3);\nlet MessageTypes;\nmodule.link(\"../../../../app/ui-utils/client\", {\n  MessageTypes(v) {\n    MessageTypes = v;\n  }\n}, 4);\nlet getUserDisplayName;\nmodule.link(\"../../../../lib/getUserDisplayName\", {\n  getUserDisplayName(v) {\n    getUserDisplayName = v;\n  }\n}, 5);\nlet useFormatDateAndTime;\nmodule.link(\"../../../hooks/useFormatDateAndTime\", {\n  useFormatDateAndTime(v) {\n    useFormatDateAndTime = v;\n  }\n}, 6);\nlet useFormatTime;\nmodule.link(\"../../../hooks/useFormatTime\", {\n  useFormatTime(v) {\n    useFormatTime = v;\n  }\n}, 7);\nlet useUserData;\nmodule.link(\"../../../hooks/useUserData\", {\n  useUserData(v) {\n    useUserData = v;\n  }\n}, 8);\nlet useIsSelecting, useToggleSelect, useIsSelectedMessage, useCountSelected;\nmodule.link(\"../../../views/room/MessageList/contexts/SelectedMessagesContext\", {\n  useIsSelecting(v) {\n    useIsSelecting = v;\n  },\n  useToggleSelect(v) {\n    useToggleSelect = v;\n  },\n  useIsSelectedMessage(v) {\n    useIsSelectedMessage = v;\n  },\n  useCountSelected(v) {\n    useCountSelected = v;\n  }\n}, 9);\nlet useUserCard;\nmodule.link(\"../../../views/room/contexts/UserCardContext\", {\n  useUserCard(v) {\n    useUserCard = v;\n  }\n}, 10);\nlet Attachments;\nmodule.link(\"../content/Attachments\", {\n  default(v) {\n    Attachments = v;\n  }\n}, 11);\nlet MessageActions;\nmodule.link(\"../content/MessageActions\", {\n  default(v) {\n    MessageActions = v;\n  }\n}, 12);\nlet useMessageListShowRealName, useMessageListShowUsername;\nmodule.link(\"../list/MessageListContext\", {\n  useMessageListShowRealName(v) {\n    useMessageListShowRealName = v;\n  },\n  useMessageListShowUsername(v) {\n    useMessageListShowUsername = v;\n  }\n}, 13);\nconst SystemMessage = _ref => {\n  var _message$actionLinks;\n  let {\n      message,\n      showUserAvatar\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  const {\n    t\n  } = useTranslation();\n  const formatTime = useFormatTime();\n  const formatDateAndTime = useFormatDateAndTime();\n  const {\n    triggerProps,\n    openUserCard\n  } = useUserCard();\n  const showRealName = useMessageListShowRealName();\n  const user = _objectSpread(_objectSpread({}, message.u), {}, {\n    roles: []\n  }, useUserData(message.u._id));\n  const usernameAndRealNameAreSame = !user.name || user.username === user.name;\n  const showUsername = useMessageListShowUsername() && showRealName && !usernameAndRealNameAreSame;\n  const messageType = MessageTypes.getType(message);\n  const isSelecting = useIsSelecting();\n  const toggleSelected = useToggleSelect(message._id);\n  const isSelected = useIsSelectedMessage(message._id);\n  useCountSelected();\n  return /*#__PURE__*/React.createElement(MessageSystem, _extends({\n    role: \"listitem\",\n    \"aria-roledescription\": t('system_message'),\n    tabIndex: 0,\n    onClick: isSelecting ? toggleSelected : undefined,\n    isSelected: isSelected,\n    \"data-qa-selected\": isSelected,\n    \"data-qa\": \"system-message\",\n    \"data-system-message-type\": message.t\n  }, props), /*#__PURE__*/React.createElement(MessageSystemLeftContainer, null, !isSelecting && showUserAvatar && /*#__PURE__*/React.createElement(UserAvatar, {\n    username: message.u.username,\n    size: \"x18\"\n  }), isSelecting && /*#__PURE__*/React.createElement(CheckBox, {\n    checked: isSelected,\n    onChange: toggleSelected\n  })), /*#__PURE__*/React.createElement(MessageSystemContainer, null, /*#__PURE__*/React.createElement(MessageSystemBlock, null, /*#__PURE__*/React.createElement(MessageNameContainer, _extends({\n    tabIndex: 0,\n    role: \"button\",\n    onClick: e => user.username && openUserCard(e, user.username),\n    onKeyDown: e => {\n      (e.code === 'Enter' || e.code === 'Space') && openUserCard(e, message.u.username);\n    },\n    style: {\n      cursor: 'pointer'\n    }\n  }, triggerProps), /*#__PURE__*/React.createElement(MessageSystemName, null, getUserDisplayName(user.name, user.username, showRealName)), showUsername && /*#__PURE__*/React.createElement(React.Fragment, null, ' ', /*#__PURE__*/React.createElement(MessageUsername, {\n    \"data-username\": user.username\n  }, \"@\", user.username))), messageType && /*#__PURE__*/React.createElement(MessageSystemBody, {\n    \"data-qa-type\": \"system-message-body\"\n  }, t(messageType.message, messageType.data ? messageType.data(message) : {})), /*#__PURE__*/React.createElement(MessageSystemTimestamp, {\n    title: formatDateAndTime(message.ts)\n  }, formatTime(message.ts))), message.attachments && /*#__PURE__*/React.createElement(MessageSystemBlock, null, /*#__PURE__*/React.createElement(Attachments, {\n    attachments: message.attachments\n  })), ((_message$actionLinks = message.actionLinks) === null || _message$actionLinks === void 0 ? void 0 : _message$actionLinks.length) && /*#__PURE__*/React.createElement(MessageActions, {\n    message: message,\n    actions: message.actionLinks.map(_ref2 => {\n      let {\n          method_id: methodId,\n          i18nLabel\n        } = _ref2,\n        action = _objectWithoutProperties(_ref2, _excluded2);\n      return _objectSpread({\n        methodId,\n        i18nLabel: i18nLabel\n      }, action);\n    })\n  })));\n};\nmodule.exportDefault( /*#__PURE__*/memo(SystemMessage));","map":{"version":3,"names":["_extends","module","link","default","v","_objectSpread","_objectWithoutProperties","MessageSystem","MessageSystemBody","MessageSystemContainer","MessageSystemLeftContainer","MessageSystemName","MessageSystemTimestamp","MessageSystemBlock","CheckBox","MessageUsername","MessageNameContainer","UserAvatar","React","memo","useTranslation","MessageTypes","getUserDisplayName","useFormatDateAndTime","useFormatTime","useUserData","useIsSelecting","useToggleSelect","useIsSelectedMessage","useCountSelected","useUserCard","Attachments","MessageActions","useMessageListShowRealName","useMessageListShowUsername","SystemMessage","_ref","_message$actionLinks","message","showUserAvatar","props","_excluded","t","formatTime","formatDateAndTime","triggerProps","openUserCard","showRealName","user","u","roles","_id","usernameAndRealNameAreSame","name","username","showUsername","messageType","getType","isSelecting","toggleSelected","isSelected","createElement","role","tabIndex","onClick","undefined","size","checked","onChange","e","onKeyDown","code","style","cursor","Fragment","data","title","ts","attachments","actionLinks","length","actions","map","_ref2","method_id","methodId","i18nLabel","action","_excluded2","exportDefault"],"sources":["client/components/message/variants/SystemMessage.tsx"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport {\n\tMessageSystem,\n\tMessageSystemBody,\n\tMessageSystemContainer,\n\tMessageSystemLeftContainer,\n\tMessageSystemName,\n\tMessageSystemTimestamp,\n\tMessageSystemBlock,\n\tCheckBox,\n\tMessageUsername,\n\tMessageNameContainer,\n} from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps, ReactElement, KeyboardEvent } from 'react';\nimport React, { memo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { MessageTypes } from '../../../../app/ui-utils/client';\nimport { getUserDisplayName } from '../../../../lib/getUserDisplayName';\nimport { useFormatDateAndTime } from '../../../hooks/useFormatDateAndTime';\nimport { useFormatTime } from '../../../hooks/useFormatTime';\nimport { useUserData } from '../../../hooks/useUserData';\nimport type { UserPresence } from '../../../lib/presence';\nimport {\n\tuseIsSelecting,\n\tuseToggleSelect,\n\tuseIsSelectedMessage,\n\tuseCountSelected,\n} from '../../../views/room/MessageList/contexts/SelectedMessagesContext';\nimport { useUserCard } from '../../../views/room/contexts/UserCardContext';\nimport Attachments from '../content/Attachments';\nimport MessageActions from '../content/MessageActions';\nimport { useMessageListShowRealName, useMessageListShowUsername } from '../list/MessageListContext';\n\ntype SystemMessageProps = {\n\tmessage: IMessage;\n\tshowUserAvatar: boolean;\n} & ComponentProps<typeof MessageSystem>;\n\nconst SystemMessage = ({ message, showUserAvatar, ...props }: SystemMessageProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst formatTime = useFormatTime();\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst { triggerProps, openUserCard } = useUserCard();\n\n\tconst showRealName = useMessageListShowRealName();\n\tconst user: UserPresence = { ...message.u, roles: [], ...useUserData(message.u._id) };\n\tconst usernameAndRealNameAreSame = !user.name || user.username === user.name;\n\tconst showUsername = useMessageListShowUsername() && showRealName && !usernameAndRealNameAreSame;\n\n\tconst messageType = MessageTypes.getType(message);\n\n\tconst isSelecting = useIsSelecting();\n\tconst toggleSelected = useToggleSelect(message._id);\n\tconst isSelected = useIsSelectedMessage(message._id);\n\tuseCountSelected();\n\n\treturn (\n\t\t<MessageSystem\n\t\t\trole='listitem'\n\t\t\taria-roledescription={t('system_message')}\n\t\t\ttabIndex={0}\n\t\t\tonClick={isSelecting ? toggleSelected : undefined}\n\t\t\tisSelected={isSelected}\n\t\t\tdata-qa-selected={isSelected}\n\t\t\tdata-qa='system-message'\n\t\t\tdata-system-message-type={message.t}\n\t\t\t{...props}\n\t\t>\n\t\t\t<MessageSystemLeftContainer>\n\t\t\t\t{!isSelecting && showUserAvatar && <UserAvatar username={message.u.username} size='x18' />}\n\t\t\t\t{isSelecting && <CheckBox checked={isSelected} onChange={toggleSelected} />}\n\t\t\t</MessageSystemLeftContainer>\n\t\t\t<MessageSystemContainer>\n\t\t\t\t<MessageSystemBlock>\n\t\t\t\t\t<MessageNameContainer\n\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\trole='button'\n\t\t\t\t\t\tonClick={(e) => user.username && openUserCard(e, user.username)}\n\t\t\t\t\t\tonKeyDown={(e: KeyboardEvent<HTMLSpanElement>) => {\n\t\t\t\t\t\t\t(e.code === 'Enter' || e.code === 'Space') && openUserCard(e, message.u.username);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tstyle={{ cursor: 'pointer' }}\n\t\t\t\t\t\t{...triggerProps}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MessageSystemName>{getUserDisplayName(user.name, user.username, showRealName)}</MessageSystemName>\n\t\t\t\t\t\t{showUsername && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t<MessageUsername data-username={user.username}>@{user.username}</MessageUsername>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</MessageNameContainer>\n\t\t\t\t\t{messageType && (\n\t\t\t\t\t\t<MessageSystemBody data-qa-type='system-message-body'>\n\t\t\t\t\t\t\t{t(messageType.message, messageType.data ? messageType.data(message) : {})}\n\t\t\t\t\t\t</MessageSystemBody>\n\t\t\t\t\t)}\n\t\t\t\t\t<MessageSystemTimestamp title={formatDateAndTime(message.ts)}>{formatTime(message.ts)}</MessageSystemTimestamp>\n\t\t\t\t</MessageSystemBlock>\n\t\t\t\t{message.attachments && (\n\t\t\t\t\t<MessageSystemBlock>\n\t\t\t\t\t\t<Attachments attachments={message.attachments} />\n\t\t\t\t\t</MessageSystemBlock>\n\t\t\t\t)}\n\t\t\t\t{message.actionLinks?.length && (\n\t\t\t\t\t<MessageActions\n\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\tactions={message.actionLinks.map(({ method_id: methodId, i18nLabel, ...action }) => ({\n\t\t\t\t\t\t\tmethodId,\n\t\t\t\t\t\t\ti18nLabel: i18nLabel as TranslationKey,\n\t\t\t\t\t\t\t...action,\n\t\t\t\t\t\t}))}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</MessageSystemContainer>\n\t\t</MessageSystem>\n\t);\n};\n\nexport default memo(SystemMessage);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"1d917d6cd94bb0b95c9cd5de848058663568a959"}
