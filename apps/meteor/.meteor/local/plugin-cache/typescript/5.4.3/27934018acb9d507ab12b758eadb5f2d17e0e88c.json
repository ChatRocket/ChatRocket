{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/ComposerMessage.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/composer/ComposerMessage.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/ComposerMessage.tsx","inputSourceMap":{"version":3,"file":"client/views/room/composer/ComposerMessage.tsx","sourceRoot":"","sources":["client/views/room/composer/ComposerMessage.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, ISubscription } from '@rocket.chat/core-typings';\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ReactNode } from 'react';\nimport React, { memo, useCallback, useMemo } from 'react';\n\nimport { LegacyRoomManager } from '../../../../app/ui-utils/client';\nimport { useReactiveValue } from '../../../hooks/useReactiveValue';\nimport { useChat } from '../contexts/ChatContext';\nimport { useRoom } from '../contexts/RoomContext';\nimport ComposerSkeleton from './ComposerSkeleton';\nimport MessageBox from './messageBox/MessageBox';\n\nexport type ComposerMessageProps = {\n\ttmid?: IMessage['_id'];\n\tchildren?: ReactNode;\n\tsubscription?: ISubscription;\n\ttshow?: boolean;\n\tpreviewUrls?: string[];\n\tonResize?: () => void;\n\tonEscape?: () => void;\n\tonSend?: () => void;\n\tonNavigateToNextMessage?: () => void;\n\tonNavigateToPreviousMessage?: () => void;\n\tonUploadFiles?: (files: readonly File[]) => void;\n};\n\nconst ComposerMessage = ({ tmid, onSend, ...props }: ComposerMessageProps): ReactElement => {\n\tconst chat = useChat();\n\tconst room = useRoom();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst composerProps = useMemo(\n\t\t() => ({\n\t\t\tonJoin: async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tawait chat?.data?.joinRoom();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonSend: async ({\n\t\t\t\tvalue: text,\n\t\t\t\ttshow,\n\t\t\t\tpreviewUrls,\n\t\t\t\tisSlashCommandAllowed,\n\t\t\t}: {\n\t\t\t\tvalue: string;\n\t\t\t\ttshow?: boolean;\n\t\t\t\tpreviewUrls?: string[];\n\t\t\t\tisSlashCommandAllowed?: boolean;\n\t\t\t}): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tawait chat?.action.stop('typing');\n\t\t\t\t\tconst newMessageSent = await chat?.flows.sendMessage({\n\t\t\t\t\t\ttext,\n\t\t\t\t\t\ttshow,\n\t\t\t\t\t\tpreviewUrls,\n\t\t\t\t\t\tisSlashCommandAllowed,\n\t\t\t\t\t});\n\t\t\t\t\tif (newMessageSent) onSend?.();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t},\n\t\t\tonTyping: async (): Promise<void> => {\n\t\t\t\tif (chat?.composer?.text?.trim() === '') {\n\t\t\t\t\tawait chat?.action.stop('typing');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tawait chat?.action.start('typing');\n\t\t\t},\n\t\t\tonNavigateToPreviousMessage: () => chat?.messageEditing.toPreviousMessage(),\n\t\t\tonNavigateToNextMessage: () => chat?.messageEditing.toNextMessage(),\n\t\t\tonUploadFiles: (files: readonly File[]) => {\n\t\t\t\treturn chat?.flows.uploadFiles(files);\n\t\t\t},\n\t\t}),\n\t\t[chat?.data, chat?.flows, chat?.action, chat?.composer?.text, chat?.messageEditing, dispatchToastMessage, onSend],\n\t);\n\n\tconst publicationReady = useReactiveValue(\n\t\tuseCallback(() => LegacyRoomManager.getOpenedRoomByRid(room._id)?.streamActive ?? false, [room._id]),\n\t);\n\n\tif (!publicationReady) {\n\t\treturn <ComposerSkeleton />;\n\t}\n\n\treturn <MessageBox key={room._id} tmid={tmid} {...composerProps} showFormattingTips={true} {...props} />;\n};\n\nexport default memo(ComposerMessage);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/ComposerMessage.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/composer/ComposerMessage.tsx","inputSourceMap":{"version":3,"file":"client/views/room/composer/ComposerMessage.tsx","sourceRoot":"","sources":["client/views/room/composer/ComposerMessage.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, ISubscription } from '@rocket.chat/core-typings';\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ReactNode } from 'react';\nimport React, { memo, useCallback, useMemo } from 'react';\n\nimport { LegacyRoomManager } from '../../../../app/ui-utils/client';\nimport { useReactiveValue } from '../../../hooks/useReactiveValue';\nimport { useChat } from '../contexts/ChatContext';\nimport { useRoom } from '../contexts/RoomContext';\nimport ComposerSkeleton from './ComposerSkeleton';\nimport MessageBox from './messageBox/MessageBox';\n\nexport type ComposerMessageProps = {\n\ttmid?: IMessage['_id'];\n\tchildren?: ReactNode;\n\tsubscription?: ISubscription;\n\ttshow?: boolean;\n\tpreviewUrls?: string[];\n\tonResize?: () => void;\n\tonEscape?: () => void;\n\tonSend?: () => void;\n\tonNavigateToNextMessage?: () => void;\n\tonNavigateToPreviousMessage?: () => void;\n\tonUploadFiles?: (files: readonly File[]) => void;\n};\n\nconst ComposerMessage = ({ tmid, onSend, ...props }: ComposerMessageProps): ReactElement => {\n\tconst chat = useChat();\n\tconst room = useRoom();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst composerProps = useMemo(\n\t\t() => ({\n\t\t\tonJoin: async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tawait chat?.data?.joinRoom();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonSend: async ({\n\t\t\t\tvalue: text,\n\t\t\t\ttshow,\n\t\t\t\tpreviewUrls,\n\t\t\t\tisSlashCommandAllowed,\n\t\t\t}: {\n\t\t\t\tvalue: string;\n\t\t\t\ttshow?: boolean;\n\t\t\t\tpreviewUrls?: string[];\n\t\t\t\tisSlashCommandAllowed?: boolean;\n\t\t\t}): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tawait chat?.action.stop('typing');\n\t\t\t\t\tconst newMessageSent = await chat?.flows.sendMessage({\n\t\t\t\t\t\ttext,\n\t\t\t\t\t\ttshow,\n\t\t\t\t\t\tpreviewUrls,\n\t\t\t\t\t\tisSlashCommandAllowed,\n\t\t\t\t\t});\n\t\t\t\t\tif (newMessageSent) onSend?.();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t},\n\t\t\tonTyping: async (): Promise<void> => {\n\t\t\t\tif (chat?.composer?.text?.trim() === '') {\n\t\t\t\t\tawait chat?.action.stop('typing');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tawait chat?.action.start('typing');\n\t\t\t},\n\t\t\tonNavigateToPreviousMessage: () => chat?.messageEditing.toPreviousMessage(),\n\t\t\tonNavigateToNextMessage: () => chat?.messageEditing.toNextMessage(),\n\t\t\tonUploadFiles: (files: readonly File[]) => {\n\t\t\t\treturn chat?.flows.uploadFiles(files);\n\t\t\t},\n\t\t}),\n\t\t[chat?.data, chat?.flows, chat?.action, chat?.composer?.text, chat?.messageEditing, dispatchToastMessage, onSend],\n\t);\n\n\tconst publicationReady = useReactiveValue(\n\t\tuseCallback(() => LegacyRoomManager.getOpenedRoomByRid(room._id)?.streamActive ?? false, [room._id]),\n\t);\n\n\tif (!publicationReady) {\n\t\treturn <ComposerSkeleton />;\n\t}\n\n\treturn <MessageBox key={room._id} tmid={tmid} {...composerProps} showFormattingTips={true} {...props} />;\n};\n\nexport default memo(ComposerMessage);\n"]}}},"code":"var _excluded = [\"tmid\", \"onSend\"];\nvar _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\nvar _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 1);\nvar _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 2);\nvar useToastMessageDispatch;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  }\n}, 0);\nvar React, memo, useCallback, useMemo;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  memo: function (v) {\n    memo = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  }\n}, 1);\nvar LegacyRoomManager;\nmodule.link(\"../../../../app/ui-utils/client\", {\n  LegacyRoomManager: function (v) {\n    LegacyRoomManager = v;\n  }\n}, 2);\nvar useReactiveValue;\nmodule.link(\"../../../hooks/useReactiveValue\", {\n  useReactiveValue: function (v) {\n    useReactiveValue = v;\n  }\n}, 3);\nvar useChat;\nmodule.link(\"../contexts/ChatContext\", {\n  useChat: function (v) {\n    useChat = v;\n  }\n}, 4);\nvar useRoom;\nmodule.link(\"../contexts/RoomContext\", {\n  useRoom: function (v) {\n    useRoom = v;\n  }\n}, 5);\nvar ComposerSkeleton;\nmodule.link(\"./ComposerSkeleton\", {\n  \"default\": function (v) {\n    ComposerSkeleton = v;\n  }\n}, 6);\nvar MessageBox;\nmodule.link(\"./messageBox/MessageBox\", {\n  \"default\": function (v) {\n    MessageBox = v;\n  }\n}, 7);\nvar ComposerMessage = function (_ref) {\n  var _chat$composer2;\n  var tmid = _ref.tmid,\n    onSend = _ref.onSend,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var chat = useChat();\n  var room = useRoom();\n  var dispatchToastMessage = useToastMessageDispatch();\n  var composerProps = useMemo(function () {\n    return {\n      onJoin: function () {\n        function _callee() {\n          var _chat$data;\n          return _regeneratorRuntime.async(function () {\n            function _callee$(_context) {\n              while (1) switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  _context.next = 3;\n                  return _regeneratorRuntime.awrap(chat === null || chat === void 0 ? void 0 : (_chat$data = chat.data) === null || _chat$data === void 0 ? void 0 : _chat$data.joinRoom());\n                case 3:\n                  _context.next = 9;\n                  break;\n                case 5:\n                  _context.prev = 5;\n                  _context.t0 = _context[\"catch\"](0);\n                  dispatchToastMessage({\n                    type: 'error',\n                    message: _context.t0\n                  });\n                  throw _context.t0;\n                case 9:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n            return _callee$;\n          }(), null, null, [[0, 5]], Promise);\n        }\n        return _callee;\n      }(),\n      onSend: function () {\n        function _callee2(_ref2) {\n          var text, tshow, previewUrls, isSlashCommandAllowed, newMessageSent;\n          return _regeneratorRuntime.async(function () {\n            function _callee2$(_context2) {\n              while (1) switch (_context2.prev = _context2.next) {\n                case 0:\n                  text = _ref2.value, tshow = _ref2.tshow, previewUrls = _ref2.previewUrls, isSlashCommandAllowed = _ref2.isSlashCommandAllowed;\n                  _context2.prev = 1;\n                  _context2.next = 4;\n                  return _regeneratorRuntime.awrap(chat === null || chat === void 0 ? void 0 : chat.action.stop('typing'));\n                case 4:\n                  _context2.next = 6;\n                  return _regeneratorRuntime.awrap(chat === null || chat === void 0 ? void 0 : chat.flows.sendMessage({\n                    text: text,\n                    tshow: tshow,\n                    previewUrls: previewUrls,\n                    isSlashCommandAllowed: isSlashCommandAllowed\n                  }));\n                case 6:\n                  newMessageSent = _context2.sent;\n                  if (newMessageSent) onSend === null || onSend === void 0 ? void 0 : onSend();\n                  _context2.next = 13;\n                  break;\n                case 10:\n                  _context2.prev = 10;\n                  _context2.t0 = _context2[\"catch\"](1);\n                  dispatchToastMessage({\n                    type: 'error',\n                    message: _context2.t0\n                  });\n                case 13:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n            return _callee2$;\n          }(), null, null, [[1, 10]], Promise);\n        }\n        return _callee2;\n      }(),\n      onTyping: function () {\n        function _callee3() {\n          var _chat$composer, _chat$composer$text;\n          return _regeneratorRuntime.async(function () {\n            function _callee3$(_context3) {\n              while (1) switch (_context3.prev = _context3.next) {\n                case 0:\n                  if (!((chat === null || chat === void 0 ? void 0 : (_chat$composer = chat.composer) === null || _chat$composer === void 0 ? void 0 : (_chat$composer$text = _chat$composer.text) === null || _chat$composer$text === void 0 ? void 0 : _chat$composer$text.trim()) === '')) {\n                    _context3.next = 4;\n                    break;\n                  }\n                  _context3.next = 3;\n                  return _regeneratorRuntime.awrap(chat === null || chat === void 0 ? void 0 : chat.action.stop('typing'));\n                case 3:\n                  return _context3.abrupt(\"return\");\n                case 4:\n                  _context3.next = 6;\n                  return _regeneratorRuntime.awrap(chat === null || chat === void 0 ? void 0 : chat.action.start('typing'));\n                case 6:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n            return _callee3$;\n          }(), null, null, null, Promise);\n        }\n        return _callee3;\n      }(),\n      onNavigateToPreviousMessage: function () {\n        return chat === null || chat === void 0 ? void 0 : chat.messageEditing.toPreviousMessage();\n      },\n      onNavigateToNextMessage: function () {\n        return chat === null || chat === void 0 ? void 0 : chat.messageEditing.toNextMessage();\n      },\n      onUploadFiles: function (files) {\n        return chat === null || chat === void 0 ? void 0 : chat.flows.uploadFiles(files);\n      }\n    };\n  }, [chat === null || chat === void 0 ? void 0 : chat.data, chat === null || chat === void 0 ? void 0 : chat.flows, chat === null || chat === void 0 ? void 0 : chat.action, chat === null || chat === void 0 ? void 0 : (_chat$composer2 = chat.composer) === null || _chat$composer2 === void 0 ? void 0 : _chat$composer2.text, chat === null || chat === void 0 ? void 0 : chat.messageEditing, dispatchToastMessage, onSend]);\n  var publicationReady = useReactiveValue(useCallback(function () {\n    var _LegacyRoomManager$ge, _LegacyRoomManager$ge2;\n    return (_LegacyRoomManager$ge = (_LegacyRoomManager$ge2 = LegacyRoomManager.getOpenedRoomByRid(room._id)) === null || _LegacyRoomManager$ge2 === void 0 ? void 0 : _LegacyRoomManager$ge2.streamActive) !== null && _LegacyRoomManager$ge !== void 0 ? _LegacyRoomManager$ge : false;\n  }, [room._id]));\n  if (!publicationReady) {\n    return /*#__PURE__*/React.createElement(ComposerSkeleton, null);\n  }\n  return /*#__PURE__*/React.createElement(MessageBox, _extends({\n    key: room._id,\n    tmid: tmid\n  }, composerProps, {\n    showFormattingTips: true\n  }, props));\n};\nmodule.exportDefault( /*#__PURE__*/memo(ComposerMessage));","map":{"version":3,"names":["_regeneratorRuntime","module","link","default","v","_extends","_objectWithoutProperties","useToastMessageDispatch","React","memo","useCallback","useMemo","LegacyRoomManager","useReactiveValue","useChat","useRoom","ComposerSkeleton","MessageBox","ComposerMessage","_ref","_chat$composer2","tmid","onSend","props","_excluded","chat","room","dispatchToastMessage","composerProps","onJoin","_callee","_chat$data","async","_callee$","_context","prev","next","awrap","data","joinRoom","t0","type","message","stop","Promise","_callee2","_ref2","text","tshow","previewUrls","isSlashCommandAllowed","newMessageSent","_callee2$","_context2","value","action","flows","sendMessage","sent","onTyping","_callee3","_chat$composer","_chat$composer$text","_callee3$","_context3","composer","trim","abrupt","start","onNavigateToPreviousMessage","messageEditing","toPreviousMessage","onNavigateToNextMessage","toNextMessage","onUploadFiles","files","uploadFiles","publicationReady","_LegacyRoomManager$ge","_LegacyRoomManager$ge2","getOpenedRoomByRid","_id","streamActive","createElement","key","showFormattingTips","exportDefault"],"sources":["client/views/room/composer/ComposerMessage.tsx"],"sourcesContent":["import type { IMessage, ISubscription } from '@rocket.chat/core-typings';\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport type { ReactElement, ReactNode } from 'react';\nimport React, { memo, useCallback, useMemo } from 'react';\n\nimport { LegacyRoomManager } from '../../../../app/ui-utils/client';\nimport { useReactiveValue } from '../../../hooks/useReactiveValue';\nimport { useChat } from '../contexts/ChatContext';\nimport { useRoom } from '../contexts/RoomContext';\nimport ComposerSkeleton from './ComposerSkeleton';\nimport MessageBox from './messageBox/MessageBox';\n\nexport type ComposerMessageProps = {\n\ttmid?: IMessage['_id'];\n\tchildren?: ReactNode;\n\tsubscription?: ISubscription;\n\ttshow?: boolean;\n\tpreviewUrls?: string[];\n\tonResize?: () => void;\n\tonEscape?: () => void;\n\tonSend?: () => void;\n\tonNavigateToNextMessage?: () => void;\n\tonNavigateToPreviousMessage?: () => void;\n\tonUploadFiles?: (files: readonly File[]) => void;\n};\n\nconst ComposerMessage = ({ tmid, onSend, ...props }: ComposerMessageProps): ReactElement => {\n\tconst chat = useChat();\n\tconst room = useRoom();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst composerProps = useMemo(\n\t\t() => ({\n\t\t\tonJoin: async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tawait chat?.data?.joinRoom();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonSend: async ({\n\t\t\t\tvalue: text,\n\t\t\t\ttshow,\n\t\t\t\tpreviewUrls,\n\t\t\t\tisSlashCommandAllowed,\n\t\t\t}: {\n\t\t\t\tvalue: string;\n\t\t\t\ttshow?: boolean;\n\t\t\t\tpreviewUrls?: string[];\n\t\t\t\tisSlashCommandAllowed?: boolean;\n\t\t\t}): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tawait chat?.action.stop('typing');\n\t\t\t\t\tconst newMessageSent = await chat?.flows.sendMessage({\n\t\t\t\t\t\ttext,\n\t\t\t\t\t\ttshow,\n\t\t\t\t\t\tpreviewUrls,\n\t\t\t\t\t\tisSlashCommandAllowed,\n\t\t\t\t\t});\n\t\t\t\t\tif (newMessageSent) onSend?.();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t},\n\t\t\tonTyping: async (): Promise<void> => {\n\t\t\t\tif (chat?.composer?.text?.trim() === '') {\n\t\t\t\t\tawait chat?.action.stop('typing');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tawait chat?.action.start('typing');\n\t\t\t},\n\t\t\tonNavigateToPreviousMessage: () => chat?.messageEditing.toPreviousMessage(),\n\t\t\tonNavigateToNextMessage: () => chat?.messageEditing.toNextMessage(),\n\t\t\tonUploadFiles: (files: readonly File[]) => {\n\t\t\t\treturn chat?.flows.uploadFiles(files);\n\t\t\t},\n\t\t}),\n\t\t[chat?.data, chat?.flows, chat?.action, chat?.composer?.text, chat?.messageEditing, dispatchToastMessage, onSend],\n\t);\n\n\tconst publicationReady = useReactiveValue(\n\t\tuseCallback(() => LegacyRoomManager.getOpenedRoomByRid(room._id)?.streamActive ?? false, [room._id]),\n\t);\n\n\tif (!publicationReady) {\n\t\treturn <ComposerSkeleton />;\n\t}\n\n\treturn <MessageBox key={room._id} tmid={tmid} {...composerProps} showFormattingTips={true} {...props} />;\n};\n\nexport default memo(ComposerMessage);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"27934018acb9d507ab12b758eadb5f2d17e0e88c"}
