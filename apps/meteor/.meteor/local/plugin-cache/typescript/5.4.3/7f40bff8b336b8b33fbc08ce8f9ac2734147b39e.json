{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/setupWizard/providers/SetupWizardProvider.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/setupWizard/providers/SetupWizardProvider.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/setupWizard/providers/SetupWizardProvider.tsx","inputSourceMap":{"version":3,"file":"client/views/setupWizard/providers/SetupWizardProvider.tsx","sourceRoot":"","sources":["client/views/setupWizard/providers/SetupWizardProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport {\n\tuseToastMessageDispatch,\n\tuseSessionDispatch,\n\tuseLoginWithPassword,\n\tuseSettingSetValue,\n\tuseSettingsDispatch,\n\tuseMethod,\n\tuseEndpoint,\n\tuseTranslation,\n} from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport type { ReactElement, ContextType } from 'react';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { callbacks } from '../../../../lib/callbacks';\nimport { validateEmail } from '../../../../lib/emailValidator';\nimport { useInvalidateLicense } from '../../../hooks/useLicense';\nimport { queryClient } from '../../../lib/queryClient';\nimport { SetupWizardContext } from '../contexts/SetupWizardContext';\nimport { useParameters } from '../hooks/useParameters';\nimport { useStepRouting } from '../hooks/useStepRouting';\n\nconst initialData: ContextType<typeof SetupWizardContext>['setupWizardData'] = {\n\torganizationData: {\n\t\torganizationName: '',\n\t\torganizationIndustry: '',\n\t\torganizationSize: '',\n\t\tcountry: '',\n\t},\n\tserverData: {\n\t\tagreement: false,\n\t\temail: '',\n\t\tupdates: false,\n\t},\n\tregistrationData: { cloudEmail: '', device_code: '', user_code: '' },\n};\n\ntype HandleRegisterServer = (params: { email: string; resend?: boolean }) => Promise<void>;\n\nconst SetupWizardProvider = ({ children }: { children: ReactElement }): ReactElement => {\n\tconst invalidateLicenseQuery = useInvalidateLicense();\n\tconst t = useTranslation();\n\tconst [setupWizardData, setSetupWizardData] = useState<ContextType<typeof SetupWizardContext>['setupWizardData']>(initialData);\n\tconst [currentStep, setCurrentStep] = useStepRouting();\n\tconst { isSuccess, data } = useParameters();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst dispatchSettings = useSettingsDispatch();\n\n\tconst setShowSetupWizard = useSettingSetValue('Show_Setup_Wizard');\n\tconst registerUser = useMethod('registerUser');\n\tconst defineUsername = useMethod('setUsername');\n\tconst loginWithPassword = useLoginWithPassword();\n\tconst setForceLogin = useSessionDispatch('forceLogin');\n\tconst createRegistrationIntent = useEndpoint('POST', '/v1/cloud.createRegistrationIntent');\n\n\tconst goToPreviousStep = useCallback(() => setCurrentStep((currentStep) => currentStep - 1), [setCurrentStep]);\n\tconst goToNextStep = useCallback(() => setCurrentStep((currentStep) => currentStep + 1), [setCurrentStep]);\n\tconst goToStep = useCallback((step) => setCurrentStep(() => step), [setCurrentStep]);\n\n\tconst _validateEmail = useCallback(\n\t\t(email: string): true | string => {\n\t\t\tif (!validateEmail(email)) {\n\t\t\t\treturn t('Invalid_email');\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\t[t],\n\t);\n\n\tconst registerAdminUser = useCallback(\n\t\tasync ({ fullname, username, email, password }): Promise<void> => {\n\t\t\tawait registerUser({ name: fullname, username, email, pass: password });\n\t\t\tvoid callbacks.run('userRegistered', {});\n\n\t\t\ttry {\n\t\t\t\tawait loginWithPassword(email, password);\n\t\t\t} catch (error) {\n\t\t\t\tif (error instanceof Meteor.Error && error.error === 'error-invalid-email') {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('We_have_sent_registration_email') });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (error instanceof Error || typeof error === 'string') {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\tsetForceLogin(false);\n\n\t\t\tawait defineUsername(username);\n\t\t\tawait dispatchSettings([{ _id: 'Organization_Email', value: email }]);\n\t\t\tvoid callbacks.run('usernameSet', {});\n\t\t},\n\t\t[registerUser, setForceLogin, defineUsername, dispatchSettings, loginWithPassword, dispatchToastMessage, t],\n\t);\n\n\tconst saveAgreementData = useCallback(\n\t\tasync (agreement): Promise<void> => {\n\t\t\tawait dispatchSettings([\n\t\t\t\t{\n\t\t\t\t\t_id: 'Cloud_Service_Agree_PrivacyTerms',\n\t\t\t\t\tvalue: agreement,\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t[dispatchSettings],\n\t);\n\n\tconst saveWorkspaceData = useCallback(async (): Promise<void> => {\n\t\tconst {\n\t\t\tserverData: { updates, agreement },\n\t\t} = setupWizardData;\n\n\t\tawait dispatchSettings([\n\t\t\t{\n\t\t\t\t_id: 'Register_Server',\n\t\t\t\tvalue: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: 'Allow_Marketing_Emails',\n\t\t\t\tvalue: updates,\n\t\t\t},\n\t\t]);\n\t\tawait saveAgreementData(agreement);\n\t}, [dispatchSettings, saveAgreementData, setupWizardData]);\n\n\tconst saveOrganizationData = useCallback(\n\t\tasync (organizationData: ContextType<typeof SetupWizardContext>['setupWizardData']['organizationData']): Promise<void> => {\n\t\t\tconst { organizationName, organizationIndustry, organizationSize, country } = organizationData;\n\n\t\t\tawait dispatchSettings([\n\t\t\t\t{\n\t\t\t\t\t_id: 'Country',\n\t\t\t\t\tvalue: country,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Industry',\n\t\t\t\t\tvalue: organizationIndustry,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Size',\n\t\t\t\t\tvalue: organizationSize,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Organization_Name',\n\t\t\t\t\tvalue: organizationName,\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t[dispatchSettings],\n\t);\n\n\tconst registerServer: HandleRegisterServer = useMutableCallback(async ({ email, resend = false }): Promise<void> => {\n\t\ttry {\n\t\t\tconst { intentData } = await createRegistrationIntent({ resend, email });\n\t\t\tinvalidateLicenseQuery(100);\n\t\t\tqueryClient.invalidateQueries(['getRegistrationStatus']);\n\n\t\t\tsetSetupWizardData((prevState) => ({\n\t\t\t\t...prevState,\n\t\t\t\tregistrationData: { ...intentData, cloudEmail: email },\n\t\t\t}));\n\n\t\t\tgoToStep(4);\n\t\t\tsetShowSetupWizard('in_progress');\n\t\t} catch (e) {\n\t\t\tdispatchToastMessage({ type: 'error', message: t('Cloud_register_error') });\n\t\t}\n\t});\n\n\tconst completeSetupWizard = useMutableCallback(async (): Promise<void> => {\n\t\tdispatchToastMessage({ type: 'success', message: t('Your_workspace_is_ready') });\n\t\treturn setShowSetupWizard('completed');\n\t});\n\n\tconst value = useMemo(\n\t\t() => ({\n\t\t\tsetupWizardData,\n\t\t\tsetSetupWizardData,\n\t\t\tcurrentStep,\n\t\t\tloaded: isSuccess,\n\t\t\tsettings: data.settings,\n\t\t\tskipCloudRegistration: data.serverAlreadyRegistered,\n\t\t\tgoToPreviousStep,\n\t\t\tgoToNextStep,\n\t\t\tgoToStep,\n\t\t\tregisterAdminUser,\n\t\t\tvalidateEmail: _validateEmail,\n\t\t\tregisterServer,\n\t\t\tsaveAgreementData,\n\t\t\tsaveWorkspaceData,\n\t\t\tsaveOrganizationData,\n\t\t\tcompleteSetupWizard,\n\t\t\tmaxSteps: data.serverAlreadyRegistered ? 2 : 4,\n\t\t}),\n\t\t[\n\t\t\tsetupWizardData,\n\t\t\tcurrentStep,\n\t\t\tisSuccess,\n\t\t\tdata.settings,\n\t\t\tdata.serverAlreadyRegistered,\n\t\t\tgoToPreviousStep,\n\t\t\tgoToNextStep,\n\t\t\tgoToStep,\n\t\t\tregisterAdminUser,\n\t\t\t_validateEmail,\n\t\t\tregisterServer,\n\t\t\tsaveAgreementData,\n\t\t\tsaveWorkspaceData,\n\t\t\tsaveOrganizationData,\n\t\t\tcompleteSetupWizard,\n\t\t],\n\t);\n\n\treturn <SetupWizardContext.Provider value={value}>{children}</SetupWizardContext.Provider>;\n};\n\nexport default SetupWizardProvider;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/setupWizard/providers/SetupWizardProvider.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/setupWizard/providers/SetupWizardProvider.tsx","inputSourceMap":{"version":3,"file":"client/views/setupWizard/providers/SetupWizardProvider.tsx","sourceRoot":"","sources":["client/views/setupWizard/providers/SetupWizardProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport {\n\tuseToastMessageDispatch,\n\tuseSessionDispatch,\n\tuseLoginWithPassword,\n\tuseSettingSetValue,\n\tuseSettingsDispatch,\n\tuseMethod,\n\tuseEndpoint,\n\tuseTranslation,\n} from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport type { ReactElement, ContextType } from 'react';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { callbacks } from '../../../../lib/callbacks';\nimport { validateEmail } from '../../../../lib/emailValidator';\nimport { useInvalidateLicense } from '../../../hooks/useLicense';\nimport { queryClient } from '../../../lib/queryClient';\nimport { SetupWizardContext } from '../contexts/SetupWizardContext';\nimport { useParameters } from '../hooks/useParameters';\nimport { useStepRouting } from '../hooks/useStepRouting';\n\nconst initialData: ContextType<typeof SetupWizardContext>['setupWizardData'] = {\n\torganizationData: {\n\t\torganizationName: '',\n\t\torganizationIndustry: '',\n\t\torganizationSize: '',\n\t\tcountry: '',\n\t},\n\tserverData: {\n\t\tagreement: false,\n\t\temail: '',\n\t\tupdates: false,\n\t},\n\tregistrationData: { cloudEmail: '', device_code: '', user_code: '' },\n};\n\ntype HandleRegisterServer = (params: { email: string; resend?: boolean }) => Promise<void>;\n\nconst SetupWizardProvider = ({ children }: { children: ReactElement }): ReactElement => {\n\tconst invalidateLicenseQuery = useInvalidateLicense();\n\tconst t = useTranslation();\n\tconst [setupWizardData, setSetupWizardData] = useState<ContextType<typeof SetupWizardContext>['setupWizardData']>(initialData);\n\tconst [currentStep, setCurrentStep] = useStepRouting();\n\tconst { isSuccess, data } = useParameters();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst dispatchSettings = useSettingsDispatch();\n\n\tconst setShowSetupWizard = useSettingSetValue('Show_Setup_Wizard');\n\tconst registerUser = useMethod('registerUser');\n\tconst defineUsername = useMethod('setUsername');\n\tconst loginWithPassword = useLoginWithPassword();\n\tconst setForceLogin = useSessionDispatch('forceLogin');\n\tconst createRegistrationIntent = useEndpoint('POST', '/v1/cloud.createRegistrationIntent');\n\n\tconst goToPreviousStep = useCallback(() => setCurrentStep((currentStep) => currentStep - 1), [setCurrentStep]);\n\tconst goToNextStep = useCallback(() => setCurrentStep((currentStep) => currentStep + 1), [setCurrentStep]);\n\tconst goToStep = useCallback((step) => setCurrentStep(() => step), [setCurrentStep]);\n\n\tconst _validateEmail = useCallback(\n\t\t(email: string): true | string => {\n\t\t\tif (!validateEmail(email)) {\n\t\t\t\treturn t('Invalid_email');\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\t[t],\n\t);\n\n\tconst registerAdminUser = useCallback(\n\t\tasync ({ fullname, username, email, password }): Promise<void> => {\n\t\t\tawait registerUser({ name: fullname, username, email, pass: password });\n\t\t\tvoid callbacks.run('userRegistered', {});\n\n\t\t\ttry {\n\t\t\t\tawait loginWithPassword(email, password);\n\t\t\t} catch (error) {\n\t\t\t\tif (error instanceof Meteor.Error && error.error === 'error-invalid-email') {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('We_have_sent_registration_email') });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (error instanceof Error || typeof error === 'string') {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\tsetForceLogin(false);\n\n\t\t\tawait defineUsername(username);\n\t\t\tawait dispatchSettings([{ _id: 'Organization_Email', value: email }]);\n\t\t\tvoid callbacks.run('usernameSet', {});\n\t\t},\n\t\t[registerUser, setForceLogin, defineUsername, dispatchSettings, loginWithPassword, dispatchToastMessage, t],\n\t);\n\n\tconst saveAgreementData = useCallback(\n\t\tasync (agreement): Promise<void> => {\n\t\t\tawait dispatchSettings([\n\t\t\t\t{\n\t\t\t\t\t_id: 'Cloud_Service_Agree_PrivacyTerms',\n\t\t\t\t\tvalue: agreement,\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t[dispatchSettings],\n\t);\n\n\tconst saveWorkspaceData = useCallback(async (): Promise<void> => {\n\t\tconst {\n\t\t\tserverData: { updates, agreement },\n\t\t} = setupWizardData;\n\n\t\tawait dispatchSettings([\n\t\t\t{\n\t\t\t\t_id: 'Register_Server',\n\t\t\t\tvalue: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: 'Allow_Marketing_Emails',\n\t\t\t\tvalue: updates,\n\t\t\t},\n\t\t]);\n\t\tawait saveAgreementData(agreement);\n\t}, [dispatchSettings, saveAgreementData, setupWizardData]);\n\n\tconst saveOrganizationData = useCallback(\n\t\tasync (organizationData: ContextType<typeof SetupWizardContext>['setupWizardData']['organizationData']): Promise<void> => {\n\t\t\tconst { organizationName, organizationIndustry, organizationSize, country } = organizationData;\n\n\t\t\tawait dispatchSettings([\n\t\t\t\t{\n\t\t\t\t\t_id: 'Country',\n\t\t\t\t\tvalue: country,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Industry',\n\t\t\t\t\tvalue: organizationIndustry,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Size',\n\t\t\t\t\tvalue: organizationSize,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Organization_Name',\n\t\t\t\t\tvalue: organizationName,\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t[dispatchSettings],\n\t);\n\n\tconst registerServer: HandleRegisterServer = useMutableCallback(async ({ email, resend = false }): Promise<void> => {\n\t\ttry {\n\t\t\tconst { intentData } = await createRegistrationIntent({ resend, email });\n\t\t\tinvalidateLicenseQuery(100);\n\t\t\tqueryClient.invalidateQueries(['getRegistrationStatus']);\n\n\t\t\tsetSetupWizardData((prevState) => ({\n\t\t\t\t...prevState,\n\t\t\t\tregistrationData: { ...intentData, cloudEmail: email },\n\t\t\t}));\n\n\t\t\tgoToStep(4);\n\t\t\tsetShowSetupWizard('in_progress');\n\t\t} catch (e) {\n\t\t\tdispatchToastMessage({ type: 'error', message: t('Cloud_register_error') });\n\t\t}\n\t});\n\n\tconst completeSetupWizard = useMutableCallback(async (): Promise<void> => {\n\t\tdispatchToastMessage({ type: 'success', message: t('Your_workspace_is_ready') });\n\t\treturn setShowSetupWizard('completed');\n\t});\n\n\tconst value = useMemo(\n\t\t() => ({\n\t\t\tsetupWizardData,\n\t\t\tsetSetupWizardData,\n\t\t\tcurrentStep,\n\t\t\tloaded: isSuccess,\n\t\t\tsettings: data.settings,\n\t\t\tskipCloudRegistration: data.serverAlreadyRegistered,\n\t\t\tgoToPreviousStep,\n\t\t\tgoToNextStep,\n\t\t\tgoToStep,\n\t\t\tregisterAdminUser,\n\t\t\tvalidateEmail: _validateEmail,\n\t\t\tregisterServer,\n\t\t\tsaveAgreementData,\n\t\t\tsaveWorkspaceData,\n\t\t\tsaveOrganizationData,\n\t\t\tcompleteSetupWizard,\n\t\t\tmaxSteps: data.serverAlreadyRegistered ? 2 : 4,\n\t\t}),\n\t\t[\n\t\t\tsetupWizardData,\n\t\t\tcurrentStep,\n\t\t\tisSuccess,\n\t\t\tdata.settings,\n\t\t\tdata.serverAlreadyRegistered,\n\t\t\tgoToPreviousStep,\n\t\t\tgoToNextStep,\n\t\t\tgoToStep,\n\t\t\tregisterAdminUser,\n\t\t\t_validateEmail,\n\t\t\tregisterServer,\n\t\t\tsaveAgreementData,\n\t\t\tsaveWorkspaceData,\n\t\t\tsaveOrganizationData,\n\t\t\tcompleteSetupWizard,\n\t\t],\n\t);\n\n\treturn <SetupWizardContext.Provider value={value}>{children}</SetupWizardContext.Provider>;\n};\n\nexport default SetupWizardProvider;\n"]}}},"code":"let _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 0);\nlet useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback(v) {\n    useMutableCallback = v;\n  }\n}, 0);\nlet useToastMessageDispatch, useSessionDispatch, useLoginWithPassword, useSettingSetValue, useSettingsDispatch, useMethod, useEndpoint, useTranslation;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useToastMessageDispatch(v) {\n    useToastMessageDispatch = v;\n  },\n  useSessionDispatch(v) {\n    useSessionDispatch = v;\n  },\n  useLoginWithPassword(v) {\n    useLoginWithPassword = v;\n  },\n  useSettingSetValue(v) {\n    useSettingSetValue = v;\n  },\n  useSettingsDispatch(v) {\n    useSettingsDispatch = v;\n  },\n  useMethod(v) {\n    useMethod = v;\n  },\n  useEndpoint(v) {\n    useEndpoint = v;\n  },\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 1);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n}, 2);\nlet React, useCallback, useMemo, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  },\n  useState(v) {\n    useState = v;\n  }\n}, 3);\nlet callbacks;\nmodule.link(\"../../../../lib/callbacks\", {\n  callbacks(v) {\n    callbacks = v;\n  }\n}, 4);\nlet validateEmail;\nmodule.link(\"../../../../lib/emailValidator\", {\n  validateEmail(v) {\n    validateEmail = v;\n  }\n}, 5);\nlet useInvalidateLicense;\nmodule.link(\"../../../hooks/useLicense\", {\n  useInvalidateLicense(v) {\n    useInvalidateLicense = v;\n  }\n}, 6);\nlet queryClient;\nmodule.link(\"../../../lib/queryClient\", {\n  queryClient(v) {\n    queryClient = v;\n  }\n}, 7);\nlet SetupWizardContext;\nmodule.link(\"../contexts/SetupWizardContext\", {\n  SetupWizardContext(v) {\n    SetupWizardContext = v;\n  }\n}, 8);\nlet useParameters;\nmodule.link(\"../hooks/useParameters\", {\n  useParameters(v) {\n    useParameters = v;\n  }\n}, 9);\nlet useStepRouting;\nmodule.link(\"../hooks/useStepRouting\", {\n  useStepRouting(v) {\n    useStepRouting = v;\n  }\n}, 10);\nconst initialData = {\n  organizationData: {\n    organizationName: '',\n    organizationIndustry: '',\n    organizationSize: '',\n    country: ''\n  },\n  serverData: {\n    agreement: false,\n    email: '',\n    updates: false\n  },\n  registrationData: {\n    cloudEmail: '',\n    device_code: '',\n    user_code: ''\n  }\n};\nconst SetupWizardProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const invalidateLicenseQuery = useInvalidateLicense();\n  const t = useTranslation();\n  const [setupWizardData, setSetupWizardData] = useState(initialData);\n  const [currentStep, setCurrentStep] = useStepRouting();\n  const {\n    isSuccess,\n    data\n  } = useParameters();\n  const dispatchToastMessage = useToastMessageDispatch();\n  const dispatchSettings = useSettingsDispatch();\n  const setShowSetupWizard = useSettingSetValue('Show_Setup_Wizard');\n  const registerUser = useMethod('registerUser');\n  const defineUsername = useMethod('setUsername');\n  const loginWithPassword = useLoginWithPassword();\n  const setForceLogin = useSessionDispatch('forceLogin');\n  const createRegistrationIntent = useEndpoint('POST', '/v1/cloud.createRegistrationIntent');\n  const goToPreviousStep = useCallback(() => setCurrentStep(currentStep => currentStep - 1), [setCurrentStep]);\n  const goToNextStep = useCallback(() => setCurrentStep(currentStep => currentStep + 1), [setCurrentStep]);\n  const goToStep = useCallback(step => setCurrentStep(() => step), [setCurrentStep]);\n  const _validateEmail = useCallback(email => {\n    if (!validateEmail(email)) {\n      return t('Invalid_email');\n    }\n    return true;\n  }, [t]);\n  const registerAdminUser = useCallback(async _ref2 => {\n    let {\n      fullname,\n      username,\n      email,\n      password\n    } = _ref2;\n    await registerUser({\n      name: fullname,\n      username,\n      email,\n      pass: password\n    });\n    void callbacks.run('userRegistered', {});\n    try {\n      await loginWithPassword(email, password);\n    } catch (error) {\n      if (error instanceof Meteor.Error && error.error === 'error-invalid-email') {\n        dispatchToastMessage({\n          type: 'success',\n          message: t('We_have_sent_registration_email')\n        });\n        return;\n      }\n      if (error instanceof Error || typeof error === 'string') {\n        dispatchToastMessage({\n          type: 'error',\n          message: error\n        });\n      }\n      throw error;\n    }\n    setForceLogin(false);\n    await defineUsername(username);\n    await dispatchSettings([{\n      _id: 'Organization_Email',\n      value: email\n    }]);\n    void callbacks.run('usernameSet', {});\n  }, [registerUser, setForceLogin, defineUsername, dispatchSettings, loginWithPassword, dispatchToastMessage, t]);\n  const saveAgreementData = useCallback(async agreement => {\n    await dispatchSettings([{\n      _id: 'Cloud_Service_Agree_PrivacyTerms',\n      value: agreement\n    }]);\n  }, [dispatchSettings]);\n  const saveWorkspaceData = useCallback(async () => {\n    const {\n      serverData: {\n        updates,\n        agreement\n      }\n    } = setupWizardData;\n    await dispatchSettings([{\n      _id: 'Register_Server',\n      value: true\n    }, {\n      _id: 'Allow_Marketing_Emails',\n      value: updates\n    }]);\n    await saveAgreementData(agreement);\n  }, [dispatchSettings, saveAgreementData, setupWizardData]);\n  const saveOrganizationData = useCallback(async organizationData => {\n    const {\n      organizationName,\n      organizationIndustry,\n      organizationSize,\n      country\n    } = organizationData;\n    await dispatchSettings([{\n      _id: 'Country',\n      value: country\n    }, {\n      _id: 'Industry',\n      value: organizationIndustry\n    }, {\n      _id: 'Size',\n      value: organizationSize\n    }, {\n      _id: 'Organization_Name',\n      value: organizationName\n    }]);\n  }, [dispatchSettings]);\n  const registerServer = useMutableCallback(async _ref3 => {\n    let {\n      email,\n      resend = false\n    } = _ref3;\n    try {\n      const {\n        intentData\n      } = await createRegistrationIntent({\n        resend,\n        email\n      });\n      invalidateLicenseQuery(100);\n      queryClient.invalidateQueries(['getRegistrationStatus']);\n      setSetupWizardData(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n        registrationData: _objectSpread(_objectSpread({}, intentData), {}, {\n          cloudEmail: email\n        })\n      }));\n      goToStep(4);\n      setShowSetupWizard('in_progress');\n    } catch (e) {\n      dispatchToastMessage({\n        type: 'error',\n        message: t('Cloud_register_error')\n      });\n    }\n  });\n  const completeSetupWizard = useMutableCallback(async () => {\n    dispatchToastMessage({\n      type: 'success',\n      message: t('Your_workspace_is_ready')\n    });\n    return setShowSetupWizard('completed');\n  });\n  const value = useMemo(() => ({\n    setupWizardData,\n    setSetupWizardData,\n    currentStep,\n    loaded: isSuccess,\n    settings: data.settings,\n    skipCloudRegistration: data.serverAlreadyRegistered,\n    goToPreviousStep,\n    goToNextStep,\n    goToStep,\n    registerAdminUser,\n    validateEmail: _validateEmail,\n    registerServer,\n    saveAgreementData,\n    saveWorkspaceData,\n    saveOrganizationData,\n    completeSetupWizard,\n    maxSteps: data.serverAlreadyRegistered ? 2 : 4\n  }), [setupWizardData, currentStep, isSuccess, data.settings, data.serverAlreadyRegistered, goToPreviousStep, goToNextStep, goToStep, registerAdminUser, _validateEmail, registerServer, saveAgreementData, saveWorkspaceData, saveOrganizationData, completeSetupWizard]);\n  return /*#__PURE__*/React.createElement(SetupWizardContext.Provider, {\n    value: value\n  }, children);\n};\nmodule.exportDefault(SetupWizardProvider);","map":{"version":3,"names":["_objectSpread","module","link","default","v","useMutableCallback","useToastMessageDispatch","useSessionDispatch","useLoginWithPassword","useSettingSetValue","useSettingsDispatch","useMethod","useEndpoint","useTranslation","Meteor","React","useCallback","useMemo","useState","callbacks","validateEmail","useInvalidateLicense","queryClient","SetupWizardContext","useParameters","useStepRouting","initialData","organizationData","organizationName","organizationIndustry","organizationSize","country","serverData","agreement","email","updates","registrationData","cloudEmail","device_code","user_code","SetupWizardProvider","_ref","children","invalidateLicenseQuery","t","setupWizardData","setSetupWizardData","currentStep","setCurrentStep","isSuccess","data","dispatchToastMessage","dispatchSettings","setShowSetupWizard","registerUser","defineUsername","loginWithPassword","setForceLogin","createRegistrationIntent","goToPreviousStep","goToNextStep","goToStep","step","_validateEmail","registerAdminUser","_ref2","fullname","username","password","name","pass","run","error","Error","type","message","_id","value","saveAgreementData","saveWorkspaceData","saveOrganizationData","registerServer","_ref3","resend","intentData","invalidateQueries","prevState","e","completeSetupWizard","loaded","settings","skipCloudRegistration","serverAlreadyRegistered","maxSteps","createElement","Provider","exportDefault"],"sources":["client/views/setupWizard/providers/SetupWizardProvider.tsx"],"sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport {\n\tuseToastMessageDispatch,\n\tuseSessionDispatch,\n\tuseLoginWithPassword,\n\tuseSettingSetValue,\n\tuseSettingsDispatch,\n\tuseMethod,\n\tuseEndpoint,\n\tuseTranslation,\n} from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport type { ReactElement, ContextType } from 'react';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { callbacks } from '../../../../lib/callbacks';\nimport { validateEmail } from '../../../../lib/emailValidator';\nimport { useInvalidateLicense } from '../../../hooks/useLicense';\nimport { queryClient } from '../../../lib/queryClient';\nimport { SetupWizardContext } from '../contexts/SetupWizardContext';\nimport { useParameters } from '../hooks/useParameters';\nimport { useStepRouting } from '../hooks/useStepRouting';\n\nconst initialData: ContextType<typeof SetupWizardContext>['setupWizardData'] = {\n\torganizationData: {\n\t\torganizationName: '',\n\t\torganizationIndustry: '',\n\t\torganizationSize: '',\n\t\tcountry: '',\n\t},\n\tserverData: {\n\t\tagreement: false,\n\t\temail: '',\n\t\tupdates: false,\n\t},\n\tregistrationData: { cloudEmail: '', device_code: '', user_code: '' },\n};\n\ntype HandleRegisterServer = (params: { email: string; resend?: boolean }) => Promise<void>;\n\nconst SetupWizardProvider = ({ children }: { children: ReactElement }): ReactElement => {\n\tconst invalidateLicenseQuery = useInvalidateLicense();\n\tconst t = useTranslation();\n\tconst [setupWizardData, setSetupWizardData] = useState<ContextType<typeof SetupWizardContext>['setupWizardData']>(initialData);\n\tconst [currentStep, setCurrentStep] = useStepRouting();\n\tconst { isSuccess, data } = useParameters();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst dispatchSettings = useSettingsDispatch();\n\n\tconst setShowSetupWizard = useSettingSetValue('Show_Setup_Wizard');\n\tconst registerUser = useMethod('registerUser');\n\tconst defineUsername = useMethod('setUsername');\n\tconst loginWithPassword = useLoginWithPassword();\n\tconst setForceLogin = useSessionDispatch('forceLogin');\n\tconst createRegistrationIntent = useEndpoint('POST', '/v1/cloud.createRegistrationIntent');\n\n\tconst goToPreviousStep = useCallback(() => setCurrentStep((currentStep) => currentStep - 1), [setCurrentStep]);\n\tconst goToNextStep = useCallback(() => setCurrentStep((currentStep) => currentStep + 1), [setCurrentStep]);\n\tconst goToStep = useCallback((step) => setCurrentStep(() => step), [setCurrentStep]);\n\n\tconst _validateEmail = useCallback(\n\t\t(email: string): true | string => {\n\t\t\tif (!validateEmail(email)) {\n\t\t\t\treturn t('Invalid_email');\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\t[t],\n\t);\n\n\tconst registerAdminUser = useCallback(\n\t\tasync ({ fullname, username, email, password }): Promise<void> => {\n\t\t\tawait registerUser({ name: fullname, username, email, pass: password });\n\t\t\tvoid callbacks.run('userRegistered', {});\n\n\t\t\ttry {\n\t\t\t\tawait loginWithPassword(email, password);\n\t\t\t} catch (error) {\n\t\t\t\tif (error instanceof Meteor.Error && error.error === 'error-invalid-email') {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('We_have_sent_registration_email') });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (error instanceof Error || typeof error === 'string') {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\tsetForceLogin(false);\n\n\t\t\tawait defineUsername(username);\n\t\t\tawait dispatchSettings([{ _id: 'Organization_Email', value: email }]);\n\t\t\tvoid callbacks.run('usernameSet', {});\n\t\t},\n\t\t[registerUser, setForceLogin, defineUsername, dispatchSettings, loginWithPassword, dispatchToastMessage, t],\n\t);\n\n\tconst saveAgreementData = useCallback(\n\t\tasync (agreement): Promise<void> => {\n\t\t\tawait dispatchSettings([\n\t\t\t\t{\n\t\t\t\t\t_id: 'Cloud_Service_Agree_PrivacyTerms',\n\t\t\t\t\tvalue: agreement,\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t[dispatchSettings],\n\t);\n\n\tconst saveWorkspaceData = useCallback(async (): Promise<void> => {\n\t\tconst {\n\t\t\tserverData: { updates, agreement },\n\t\t} = setupWizardData;\n\n\t\tawait dispatchSettings([\n\t\t\t{\n\t\t\t\t_id: 'Register_Server',\n\t\t\t\tvalue: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: 'Allow_Marketing_Emails',\n\t\t\t\tvalue: updates,\n\t\t\t},\n\t\t]);\n\t\tawait saveAgreementData(agreement);\n\t}, [dispatchSettings, saveAgreementData, setupWizardData]);\n\n\tconst saveOrganizationData = useCallback(\n\t\tasync (organizationData: ContextType<typeof SetupWizardContext>['setupWizardData']['organizationData']): Promise<void> => {\n\t\t\tconst { organizationName, organizationIndustry, organizationSize, country } = organizationData;\n\n\t\t\tawait dispatchSettings([\n\t\t\t\t{\n\t\t\t\t\t_id: 'Country',\n\t\t\t\t\tvalue: country,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Industry',\n\t\t\t\t\tvalue: organizationIndustry,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Size',\n\t\t\t\t\tvalue: organizationSize,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Organization_Name',\n\t\t\t\t\tvalue: organizationName,\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t[dispatchSettings],\n\t);\n\n\tconst registerServer: HandleRegisterServer = useMutableCallback(async ({ email, resend = false }): Promise<void> => {\n\t\ttry {\n\t\t\tconst { intentData } = await createRegistrationIntent({ resend, email });\n\t\t\tinvalidateLicenseQuery(100);\n\t\t\tqueryClient.invalidateQueries(['getRegistrationStatus']);\n\n\t\t\tsetSetupWizardData((prevState) => ({\n\t\t\t\t...prevState,\n\t\t\t\tregistrationData: { ...intentData, cloudEmail: email },\n\t\t\t}));\n\n\t\t\tgoToStep(4);\n\t\t\tsetShowSetupWizard('in_progress');\n\t\t} catch (e) {\n\t\t\tdispatchToastMessage({ type: 'error', message: t('Cloud_register_error') });\n\t\t}\n\t});\n\n\tconst completeSetupWizard = useMutableCallback(async (): Promise<void> => {\n\t\tdispatchToastMessage({ type: 'success', message: t('Your_workspace_is_ready') });\n\t\treturn setShowSetupWizard('completed');\n\t});\n\n\tconst value = useMemo(\n\t\t() => ({\n\t\t\tsetupWizardData,\n\t\t\tsetSetupWizardData,\n\t\t\tcurrentStep,\n\t\t\tloaded: isSuccess,\n\t\t\tsettings: data.settings,\n\t\t\tskipCloudRegistration: data.serverAlreadyRegistered,\n\t\t\tgoToPreviousStep,\n\t\t\tgoToNextStep,\n\t\t\tgoToStep,\n\t\t\tregisterAdminUser,\n\t\t\tvalidateEmail: _validateEmail,\n\t\t\tregisterServer,\n\t\t\tsaveAgreementData,\n\t\t\tsaveWorkspaceData,\n\t\t\tsaveOrganizationData,\n\t\t\tcompleteSetupWizard,\n\t\t\tmaxSteps: data.serverAlreadyRegistered ? 2 : 4,\n\t\t}),\n\t\t[\n\t\t\tsetupWizardData,\n\t\t\tcurrentStep,\n\t\t\tisSuccess,\n\t\t\tdata.settings,\n\t\t\tdata.serverAlreadyRegistered,\n\t\t\tgoToPreviousStep,\n\t\t\tgoToNextStep,\n\t\t\tgoToStep,\n\t\t\tregisterAdminUser,\n\t\t\t_validateEmail,\n\t\t\tregisterServer,\n\t\t\tsaveAgreementData,\n\t\t\tsaveWorkspaceData,\n\t\t\tsaveOrganizationData,\n\t\t\tcompleteSetupWizard,\n\t\t],\n\t);\n\n\treturn <SetupWizardContext.Provider value={value}>{children}</SetupWizardContext.Provider>;\n};\n\nexport default SetupWizardProvider;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"7f40bff8b336b8b33fbc08ce8f9ac2734147b39e"}
