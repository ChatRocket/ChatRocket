{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/statistics/server/lib/getServicesStatistics.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"app/statistics/server/lib/getServicesStatistics.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/statistics/server/lib/getServicesStatistics.ts","inputSourceMap":{"version":3,"file":"app/statistics/server/lib/getServicesStatistics.ts","sourceRoot":"","sources":["app/statistics/server/lib/getServicesStatistics.ts"],"names":[],"mappings":"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","sourcesContent":["import { Users } from '@rocket.chat/models';\nimport { MongoInternals } from 'meteor/mongo';\n\nimport { readSecondaryPreferred } from '../../../../server/database/readSecondaryPreferred';\nimport { settings } from '../../../settings/server';\n\nconst { db } = MongoInternals.defaultRemoteCollectionDriver().mongo;\n\nasync function getCustomOAuthServices(): Promise<\n\tRecord<\n\t\tstring,\n\t\t{\n\t\t\tenabled: boolean;\n\t\t\tmergeRoles: boolean;\n\t\t\tusers: number;\n\t\t}\n\t>\n> {\n\tconst readPreference = readSecondaryPreferred(db);\n\n\tconst customOauth = settings.getByRegexp(/Accounts_OAuth_Custom-[^-]+$/im);\n\treturn Object.fromEntries(\n\t\tawait Promise.all(\n\t\t\tObject.entries(customOauth).map(async ([key, value]) => {\n\t\t\t\tconst name = key.replace('Accounts_OAuth_Custom-', '');\n\t\t\t\treturn [\n\t\t\t\t\tname,\n\t\t\t\t\t{\n\t\t\t\t\t\tenabled: Boolean(value),\n\t\t\t\t\t\tmergeRoles: settings.get<boolean>(`Accounts_OAuth_Custom-${name}-merge_roles`),\n\t\t\t\t\t\tusers: await Users.countActiveUsersByService(name, { readPreference }),\n\t\t\t\t\t\tmapChannels: settings.get<boolean>(`Accounts_OAuth_Custom-${name}-map_channels`),\n\t\t\t\t\t\trolesToSync: !!settings.get<string>(`Accounts_OAuth_Custom-${name}-roles_to_sync`),\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}),\n\t\t),\n\t);\n}\n\nexport async function getServicesStatistics(): Promise<Record<string, unknown>> {\n\tconst readPreference = readSecondaryPreferred(db);\n\n\treturn {\n\t\tldap: {\n\t\t\tusers: await Users.countActiveUsersByService('ldap', { readPreference }),\n\t\t\tenabled: settings.get('LDAP_Enable'),\n\t\t\tloginFallback: settings.get('LDAP_Login_Fallback'),\n\t\t\tencryption: settings.get('LDAP_Encryption'),\n\t\t\tmergeUsers: settings.get('LDAP_Merge_Existing_Users'),\n\t\t\tsyncRoles: settings.get('LDAP_Sync_User_Data_Roles'),\n\t\t\tsyncRolesAutoRemove: settings.get('LDAP_Sync_User_Data_Roles_AutoRemove'),\n\t\t\tsyncData: settings.get('LDAP_Sync_Custom_Fields'),\n\t\t\tsyncChannels: settings.get('LDAP_Sync_User_Data_Channels'),\n\t\t\tsyncAvatar: settings.get('LDAP_Sync_User_Avatar'),\n\t\t\tgroupFilter: settings.get('LDAP_Group_Filter_Enable'),\n\t\t\tbackgroundSync: {\n\t\t\t\tenabled: settings.get('LDAP_Background_Sync'),\n\t\t\t\tinterval: settings.get('LDAP_Background_Sync_Interval'),\n\t\t\t\tnewUsers: settings.get('LDAP_Background_Sync_Import_New_Users'),\n\t\t\t\texistingUsers: settings.get('LDAP_Background_Sync_Keep_Existant_Users_Updated'),\n\t\t\t},\n\t\t\tee: {\n\t\t\t\tsyncActiveState: settings.get('LDAP_Sync_User_Active_State'),\n\t\t\t\tsyncTeams: settings.get('LDAP_Enable_LDAP_Groups_To_RC_Teams'),\n\t\t\t\tsyncRoles: settings.get('LDAP_Sync_User_Data_Roles'),\n\t\t\t},\n\t\t},\n\t\tsaml: {\n\t\t\tenabled: settings.get('SAML_Custom_Default'),\n\t\t\tusers: await Users.countActiveUsersByService('saml', { readPreference }),\n\t\t\tsignatureValidationType: settings.get('SAML_Custom_Default_signature_validation_type'),\n\t\t\tgenerateUsername: settings.get('SAML_Custom_Default_generate_username'),\n\t\t\tupdateSubscriptionsOnLogin: settings.get('SAML_Custom_Default_channels_update'),\n\t\t\tsyncRoles: settings.get('SAML_Custom_Default_role_attribute_sync'),\n\t\t\tuserDataCustomFieldMap: !(\n\t\t\t\tsettings.getSetting('SAML_Custom_Default_user_data_custom_fieldmap')?.packageValue ===\n\t\t\t\tsettings.getSetting('SAML_Custom_Default_user_data_custom_fieldmap')?.value\n\t\t\t),\n\t\t},\n\t\tcas: {\n\t\t\tenabled: settings.get('CAS_enabled'),\n\t\t\tusers: await Users.countActiveUsersByService('cas', { readPreference }),\n\t\t\tallowUserCreation: settings.get('CAS_Creation_User_Enabled'),\n\t\t\talwaysSyncUserData: settings.get('CAS_Sync_User_Data_Enabled'),\n\t\t},\n\t\toauth: {\n\t\t\tapple: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Apple'),\n\t\t\t\tusers: await Users.countActiveUsersByService('apple', { readPreference }),\n\t\t\t},\n\t\t\tdolphin: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Dolphin'),\n\t\t\t\tusers: await Users.countActiveUsersByService('dolphin', { readPreference }),\n\t\t\t},\n\t\t\tdrupal: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Drupal'),\n\t\t\t\tusers: await Users.countActiveUsersByService('drupal', { readPreference }),\n\t\t\t},\n\t\t\tfacebook: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Facebook'),\n\t\t\t\tusers: await Users.countActiveUsersByService('facebook', { readPreference }),\n\t\t\t},\n\t\t\tgithub: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Github'),\n\t\t\t\tusers: await Users.countActiveUsersByService('github', { readPreference }),\n\t\t\t},\n\t\t\tgithubEnterprise: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_GitHub_Enterprise'),\n\t\t\t\tusers: await Users.countActiveUsersByService('github_enterprise', { readPreference }),\n\t\t\t},\n\t\t\tgitlab: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Gitlab'),\n\t\t\t\tusers: await Users.countActiveUsersByService('gitlab', { readPreference }),\n\t\t\t},\n\t\t\tgoogle: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Google'),\n\t\t\t\tusers: await Users.countActiveUsersByService('google', { readPreference }),\n\t\t\t},\n\t\t\tlinkedin: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Linkedin'),\n\t\t\t\tusers: await Users.countActiveUsersByService('linkedin', { readPreference }),\n\t\t\t},\n\t\t\tmeteor: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Meteor'),\n\t\t\t\tusers: await Users.countActiveUsersByService('meteor', { readPreference }),\n\t\t\t},\n\t\t\tnextcloud: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Nextcloud'),\n\t\t\t\tusers: await Users.countActiveUsersByService('nextcloud', { readPreference }),\n\t\t\t},\n\t\t\ttokenpass: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Tokenpass'),\n\t\t\t\tusers: await Users.countActiveUsersByService('tokenpass', { readPreference }),\n\t\t\t},\n\t\t\ttwitter: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Twitter'),\n\t\t\t\tusers: await Users.countActiveUsersByService('twitter', { readPreference }),\n\t\t\t},\n\t\t\twordpress: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Wordpress'),\n\t\t\t\tusers: await Users.countActiveUsersByService('wordpress', { readPreference }),\n\t\t\t},\n\t\t\tcustom: await getCustomOAuthServices(),\n\t\t},\n\t};\n}\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true,"topLevelAwait":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/statistics/server/lib/getServicesStatistics.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/statistics/server/lib/getServicesStatistics.ts","inputSourceMap":{"version":3,"file":"app/statistics/server/lib/getServicesStatistics.ts","sourceRoot":"","sources":["app/statistics/server/lib/getServicesStatistics.ts"],"names":[],"mappings":"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","sourcesContent":["import { Users } from '@rocket.chat/models';\nimport { MongoInternals } from 'meteor/mongo';\n\nimport { readSecondaryPreferred } from '../../../../server/database/readSecondaryPreferred';\nimport { settings } from '../../../settings/server';\n\nconst { db } = MongoInternals.defaultRemoteCollectionDriver().mongo;\n\nasync function getCustomOAuthServices(): Promise<\n\tRecord<\n\t\tstring,\n\t\t{\n\t\t\tenabled: boolean;\n\t\t\tmergeRoles: boolean;\n\t\t\tusers: number;\n\t\t}\n\t>\n> {\n\tconst readPreference = readSecondaryPreferred(db);\n\n\tconst customOauth = settings.getByRegexp(/Accounts_OAuth_Custom-[^-]+$/im);\n\treturn Object.fromEntries(\n\t\tawait Promise.all(\n\t\t\tObject.entries(customOauth).map(async ([key, value]) => {\n\t\t\t\tconst name = key.replace('Accounts_OAuth_Custom-', '');\n\t\t\t\treturn [\n\t\t\t\t\tname,\n\t\t\t\t\t{\n\t\t\t\t\t\tenabled: Boolean(value),\n\t\t\t\t\t\tmergeRoles: settings.get<boolean>(`Accounts_OAuth_Custom-${name}-merge_roles`),\n\t\t\t\t\t\tusers: await Users.countActiveUsersByService(name, { readPreference }),\n\t\t\t\t\t\tmapChannels: settings.get<boolean>(`Accounts_OAuth_Custom-${name}-map_channels`),\n\t\t\t\t\t\trolesToSync: !!settings.get<string>(`Accounts_OAuth_Custom-${name}-roles_to_sync`),\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}),\n\t\t),\n\t);\n}\n\nexport async function getServicesStatistics(): Promise<Record<string, unknown>> {\n\tconst readPreference = readSecondaryPreferred(db);\n\n\treturn {\n\t\tldap: {\n\t\t\tusers: await Users.countActiveUsersByService('ldap', { readPreference }),\n\t\t\tenabled: settings.get('LDAP_Enable'),\n\t\t\tloginFallback: settings.get('LDAP_Login_Fallback'),\n\t\t\tencryption: settings.get('LDAP_Encryption'),\n\t\t\tmergeUsers: settings.get('LDAP_Merge_Existing_Users'),\n\t\t\tsyncRoles: settings.get('LDAP_Sync_User_Data_Roles'),\n\t\t\tsyncRolesAutoRemove: settings.get('LDAP_Sync_User_Data_Roles_AutoRemove'),\n\t\t\tsyncData: settings.get('LDAP_Sync_Custom_Fields'),\n\t\t\tsyncChannels: settings.get('LDAP_Sync_User_Data_Channels'),\n\t\t\tsyncAvatar: settings.get('LDAP_Sync_User_Avatar'),\n\t\t\tgroupFilter: settings.get('LDAP_Group_Filter_Enable'),\n\t\t\tbackgroundSync: {\n\t\t\t\tenabled: settings.get('LDAP_Background_Sync'),\n\t\t\t\tinterval: settings.get('LDAP_Background_Sync_Interval'),\n\t\t\t\tnewUsers: settings.get('LDAP_Background_Sync_Import_New_Users'),\n\t\t\t\texistingUsers: settings.get('LDAP_Background_Sync_Keep_Existant_Users_Updated'),\n\t\t\t},\n\t\t\tee: {\n\t\t\t\tsyncActiveState: settings.get('LDAP_Sync_User_Active_State'),\n\t\t\t\tsyncTeams: settings.get('LDAP_Enable_LDAP_Groups_To_RC_Teams'),\n\t\t\t\tsyncRoles: settings.get('LDAP_Sync_User_Data_Roles'),\n\t\t\t},\n\t\t},\n\t\tsaml: {\n\t\t\tenabled: settings.get('SAML_Custom_Default'),\n\t\t\tusers: await Users.countActiveUsersByService('saml', { readPreference }),\n\t\t\tsignatureValidationType: settings.get('SAML_Custom_Default_signature_validation_type'),\n\t\t\tgenerateUsername: settings.get('SAML_Custom_Default_generate_username'),\n\t\t\tupdateSubscriptionsOnLogin: settings.get('SAML_Custom_Default_channels_update'),\n\t\t\tsyncRoles: settings.get('SAML_Custom_Default_role_attribute_sync'),\n\t\t\tuserDataCustomFieldMap: !(\n\t\t\t\tsettings.getSetting('SAML_Custom_Default_user_data_custom_fieldmap')?.packageValue ===\n\t\t\t\tsettings.getSetting('SAML_Custom_Default_user_data_custom_fieldmap')?.value\n\t\t\t),\n\t\t},\n\t\tcas: {\n\t\t\tenabled: settings.get('CAS_enabled'),\n\t\t\tusers: await Users.countActiveUsersByService('cas', { readPreference }),\n\t\t\tallowUserCreation: settings.get('CAS_Creation_User_Enabled'),\n\t\t\talwaysSyncUserData: settings.get('CAS_Sync_User_Data_Enabled'),\n\t\t},\n\t\toauth: {\n\t\t\tapple: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Apple'),\n\t\t\t\tusers: await Users.countActiveUsersByService('apple', { readPreference }),\n\t\t\t},\n\t\t\tdolphin: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Dolphin'),\n\t\t\t\tusers: await Users.countActiveUsersByService('dolphin', { readPreference }),\n\t\t\t},\n\t\t\tdrupal: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Drupal'),\n\t\t\t\tusers: await Users.countActiveUsersByService('drupal', { readPreference }),\n\t\t\t},\n\t\t\tfacebook: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Facebook'),\n\t\t\t\tusers: await Users.countActiveUsersByService('facebook', { readPreference }),\n\t\t\t},\n\t\t\tgithub: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Github'),\n\t\t\t\tusers: await Users.countActiveUsersByService('github', { readPreference }),\n\t\t\t},\n\t\t\tgithubEnterprise: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_GitHub_Enterprise'),\n\t\t\t\tusers: await Users.countActiveUsersByService('github_enterprise', { readPreference }),\n\t\t\t},\n\t\t\tgitlab: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Gitlab'),\n\t\t\t\tusers: await Users.countActiveUsersByService('gitlab', { readPreference }),\n\t\t\t},\n\t\t\tgoogle: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Google'),\n\t\t\t\tusers: await Users.countActiveUsersByService('google', { readPreference }),\n\t\t\t},\n\t\t\tlinkedin: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Linkedin'),\n\t\t\t\tusers: await Users.countActiveUsersByService('linkedin', { readPreference }),\n\t\t\t},\n\t\t\tmeteor: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Meteor'),\n\t\t\t\tusers: await Users.countActiveUsersByService('meteor', { readPreference }),\n\t\t\t},\n\t\t\tnextcloud: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Nextcloud'),\n\t\t\t\tusers: await Users.countActiveUsersByService('nextcloud', { readPreference }),\n\t\t\t},\n\t\t\ttokenpass: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Tokenpass'),\n\t\t\t\tusers: await Users.countActiveUsersByService('tokenpass', { readPreference }),\n\t\t\t},\n\t\t\ttwitter: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Twitter'),\n\t\t\t\tusers: await Users.countActiveUsersByService('twitter', { readPreference }),\n\t\t\t},\n\t\t\twordpress: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Wordpress'),\n\t\t\t\tusers: await Users.countActiveUsersByService('wordpress', { readPreference }),\n\t\t\t},\n\t\t\tcustom: await getCustomOAuthServices(),\n\t\t},\n\t};\n}\n"]}}},"code":"!module.wrapAsync(async function (module, __reifyWaitForDeps__, __reify_async_result__) {\n  \"use strict\";\n  try {\n    module.export({\n      getServicesStatistics: () => getServicesStatistics\n    });\n    let Users;\n    module.link(\"@rocket.chat/models\", {\n      Users(v) {\n        Users = v;\n      }\n    }, 0);\n    let MongoInternals;\n    module.link(\"meteor/mongo\", {\n      MongoInternals(v) {\n        MongoInternals = v;\n      }\n    }, 1);\n    let readSecondaryPreferred;\n    module.link(\"../../../../server/database/readSecondaryPreferred\", {\n      readSecondaryPreferred(v) {\n        readSecondaryPreferred = v;\n      }\n    }, 2);\n    let settings;\n    module.link(\"../../../settings/server\", {\n      settings(v) {\n        settings = v;\n      }\n    }, 3);\n    if (__reifyWaitForDeps__()) (await __reifyWaitForDeps__())();\n    const {\n      db\n    } = MongoInternals.defaultRemoteCollectionDriver().mongo;\n    async function getCustomOAuthServices() {\n      const readPreference = readSecondaryPreferred(db);\n      const customOauth = settings.getByRegexp(/Accounts_OAuth_Custom-[^-]+$/im);\n      return Object.fromEntries(await Promise.all(Object.entries(customOauth).map(async _ref => {\n        let [key, value] = _ref;\n        const name = key.replace('Accounts_OAuth_Custom-', '');\n        return [name, {\n          enabled: Boolean(value),\n          mergeRoles: settings.get(\"Accounts_OAuth_Custom-\".concat(name, \"-merge_roles\")),\n          users: await Users.countActiveUsersByService(name, {\n            readPreference\n          }),\n          mapChannels: settings.get(\"Accounts_OAuth_Custom-\".concat(name, \"-map_channels\")),\n          rolesToSync: !!settings.get(\"Accounts_OAuth_Custom-\".concat(name, \"-roles_to_sync\"))\n        }];\n      })));\n    }\n    async function getServicesStatistics() {\n      var _settings$getSetting, _settings$getSetting2;\n      const readPreference = readSecondaryPreferred(db);\n      return {\n        ldap: {\n          users: await Users.countActiveUsersByService('ldap', {\n            readPreference\n          }),\n          enabled: settings.get('LDAP_Enable'),\n          loginFallback: settings.get('LDAP_Login_Fallback'),\n          encryption: settings.get('LDAP_Encryption'),\n          mergeUsers: settings.get('LDAP_Merge_Existing_Users'),\n          syncRoles: settings.get('LDAP_Sync_User_Data_Roles'),\n          syncRolesAutoRemove: settings.get('LDAP_Sync_User_Data_Roles_AutoRemove'),\n          syncData: settings.get('LDAP_Sync_Custom_Fields'),\n          syncChannels: settings.get('LDAP_Sync_User_Data_Channels'),\n          syncAvatar: settings.get('LDAP_Sync_User_Avatar'),\n          groupFilter: settings.get('LDAP_Group_Filter_Enable'),\n          backgroundSync: {\n            enabled: settings.get('LDAP_Background_Sync'),\n            interval: settings.get('LDAP_Background_Sync_Interval'),\n            newUsers: settings.get('LDAP_Background_Sync_Import_New_Users'),\n            existingUsers: settings.get('LDAP_Background_Sync_Keep_Existant_Users_Updated')\n          },\n          ee: {\n            syncActiveState: settings.get('LDAP_Sync_User_Active_State'),\n            syncTeams: settings.get('LDAP_Enable_LDAP_Groups_To_RC_Teams'),\n            syncRoles: settings.get('LDAP_Sync_User_Data_Roles')\n          }\n        },\n        saml: {\n          enabled: settings.get('SAML_Custom_Default'),\n          users: await Users.countActiveUsersByService('saml', {\n            readPreference\n          }),\n          signatureValidationType: settings.get('SAML_Custom_Default_signature_validation_type'),\n          generateUsername: settings.get('SAML_Custom_Default_generate_username'),\n          updateSubscriptionsOnLogin: settings.get('SAML_Custom_Default_channels_update'),\n          syncRoles: settings.get('SAML_Custom_Default_role_attribute_sync'),\n          userDataCustomFieldMap: !(((_settings$getSetting = settings.getSetting('SAML_Custom_Default_user_data_custom_fieldmap')) === null || _settings$getSetting === void 0 ? void 0 : _settings$getSetting.packageValue) === ((_settings$getSetting2 = settings.getSetting('SAML_Custom_Default_user_data_custom_fieldmap')) === null || _settings$getSetting2 === void 0 ? void 0 : _settings$getSetting2.value))\n        },\n        cas: {\n          enabled: settings.get('CAS_enabled'),\n          users: await Users.countActiveUsersByService('cas', {\n            readPreference\n          }),\n          allowUserCreation: settings.get('CAS_Creation_User_Enabled'),\n          alwaysSyncUserData: settings.get('CAS_Sync_User_Data_Enabled')\n        },\n        oauth: {\n          apple: {\n            enabled: settings.get('Accounts_OAuth_Apple'),\n            users: await Users.countActiveUsersByService('apple', {\n              readPreference\n            })\n          },\n          dolphin: {\n            enabled: settings.get('Accounts_OAuth_Dolphin'),\n            users: await Users.countActiveUsersByService('dolphin', {\n              readPreference\n            })\n          },\n          drupal: {\n            enabled: settings.get('Accounts_OAuth_Drupal'),\n            users: await Users.countActiveUsersByService('drupal', {\n              readPreference\n            })\n          },\n          facebook: {\n            enabled: settings.get('Accounts_OAuth_Facebook'),\n            users: await Users.countActiveUsersByService('facebook', {\n              readPreference\n            })\n          },\n          github: {\n            enabled: settings.get('Accounts_OAuth_Github'),\n            users: await Users.countActiveUsersByService('github', {\n              readPreference\n            })\n          },\n          githubEnterprise: {\n            enabled: settings.get('Accounts_OAuth_GitHub_Enterprise'),\n            users: await Users.countActiveUsersByService('github_enterprise', {\n              readPreference\n            })\n          },\n          gitlab: {\n            enabled: settings.get('Accounts_OAuth_Gitlab'),\n            users: await Users.countActiveUsersByService('gitlab', {\n              readPreference\n            })\n          },\n          google: {\n            enabled: settings.get('Accounts_OAuth_Google'),\n            users: await Users.countActiveUsersByService('google', {\n              readPreference\n            })\n          },\n          linkedin: {\n            enabled: settings.get('Accounts_OAuth_Linkedin'),\n            users: await Users.countActiveUsersByService('linkedin', {\n              readPreference\n            })\n          },\n          meteor: {\n            enabled: settings.get('Accounts_OAuth_Meteor'),\n            users: await Users.countActiveUsersByService('meteor', {\n              readPreference\n            })\n          },\n          nextcloud: {\n            enabled: settings.get('Accounts_OAuth_Nextcloud'),\n            users: await Users.countActiveUsersByService('nextcloud', {\n              readPreference\n            })\n          },\n          tokenpass: {\n            enabled: settings.get('Accounts_OAuth_Tokenpass'),\n            users: await Users.countActiveUsersByService('tokenpass', {\n              readPreference\n            })\n          },\n          twitter: {\n            enabled: settings.get('Accounts_OAuth_Twitter'),\n            users: await Users.countActiveUsersByService('twitter', {\n              readPreference\n            })\n          },\n          wordpress: {\n            enabled: settings.get('Accounts_OAuth_Wordpress'),\n            users: await Users.countActiveUsersByService('wordpress', {\n              readPreference\n            })\n          },\n          custom: await getCustomOAuthServices()\n        }\n      };\n    }\n    __reify_async_result__();\n  } catch (_reifyError) {\n    return __reify_async_result__(_reifyError);\n  }\n  __reify_async_result__()\n}, {\n  self: this,\n  async: false\n});","map":{"version":3,"names":["module","export","getServicesStatistics","Users","link","v","MongoInternals","readSecondaryPreferred","settings","__reifyWaitForDeps__","db","defaultRemoteCollectionDriver","mongo","getCustomOAuthServices","readPreference","customOauth","getByRegexp","Object","fromEntries","Promise","all","entries","map","_ref","key","value","name","replace","enabled","Boolean","mergeRoles","get","concat","users","countActiveUsersByService","mapChannels","rolesToSync","_settings$getSetting","_settings$getSetting2","ldap","loginFallback","encryption","mergeUsers","syncRoles","syncRolesAutoRemove","syncData","syncChannels","syncAvatar","groupFilter","backgroundSync","interval","newUsers","existingUsers","ee","syncActiveState","syncTeams","saml","signatureValidationType","generateUsername","updateSubscriptionsOnLogin","userDataCustomFieldMap","getSetting","packageValue","cas","allowUserCreation","alwaysSyncUserData","oauth","apple","dolphin","drupal","facebook","github","githubEnterprise","gitlab","google","linkedin","meteor","nextcloud","tokenpass","twitter","wordpress","custom","__reify_async_result__","_reifyError","self","async"],"sources":["app/statistics/server/lib/getServicesStatistics.ts"],"sourcesContent":["import { Users } from '@rocket.chat/models';\nimport { MongoInternals } from 'meteor/mongo';\n\nimport { readSecondaryPreferred } from '../../../../server/database/readSecondaryPreferred';\nimport { settings } from '../../../settings/server';\n\nconst { db } = MongoInternals.defaultRemoteCollectionDriver().mongo;\n\nasync function getCustomOAuthServices(): Promise<\n\tRecord<\n\t\tstring,\n\t\t{\n\t\t\tenabled: boolean;\n\t\t\tmergeRoles: boolean;\n\t\t\tusers: number;\n\t\t}\n\t>\n> {\n\tconst readPreference = readSecondaryPreferred(db);\n\n\tconst customOauth = settings.getByRegexp(/Accounts_OAuth_Custom-[^-]+$/im);\n\treturn Object.fromEntries(\n\t\tawait Promise.all(\n\t\t\tObject.entries(customOauth).map(async ([key, value]) => {\n\t\t\t\tconst name = key.replace('Accounts_OAuth_Custom-', '');\n\t\t\t\treturn [\n\t\t\t\t\tname,\n\t\t\t\t\t{\n\t\t\t\t\t\tenabled: Boolean(value),\n\t\t\t\t\t\tmergeRoles: settings.get<boolean>(`Accounts_OAuth_Custom-${name}-merge_roles`),\n\t\t\t\t\t\tusers: await Users.countActiveUsersByService(name, { readPreference }),\n\t\t\t\t\t\tmapChannels: settings.get<boolean>(`Accounts_OAuth_Custom-${name}-map_channels`),\n\t\t\t\t\t\trolesToSync: !!settings.get<string>(`Accounts_OAuth_Custom-${name}-roles_to_sync`),\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}),\n\t\t),\n\t);\n}\n\nexport async function getServicesStatistics(): Promise<Record<string, unknown>> {\n\tconst readPreference = readSecondaryPreferred(db);\n\n\treturn {\n\t\tldap: {\n\t\t\tusers: await Users.countActiveUsersByService('ldap', { readPreference }),\n\t\t\tenabled: settings.get('LDAP_Enable'),\n\t\t\tloginFallback: settings.get('LDAP_Login_Fallback'),\n\t\t\tencryption: settings.get('LDAP_Encryption'),\n\t\t\tmergeUsers: settings.get('LDAP_Merge_Existing_Users'),\n\t\t\tsyncRoles: settings.get('LDAP_Sync_User_Data_Roles'),\n\t\t\tsyncRolesAutoRemove: settings.get('LDAP_Sync_User_Data_Roles_AutoRemove'),\n\t\t\tsyncData: settings.get('LDAP_Sync_Custom_Fields'),\n\t\t\tsyncChannels: settings.get('LDAP_Sync_User_Data_Channels'),\n\t\t\tsyncAvatar: settings.get('LDAP_Sync_User_Avatar'),\n\t\t\tgroupFilter: settings.get('LDAP_Group_Filter_Enable'),\n\t\t\tbackgroundSync: {\n\t\t\t\tenabled: settings.get('LDAP_Background_Sync'),\n\t\t\t\tinterval: settings.get('LDAP_Background_Sync_Interval'),\n\t\t\t\tnewUsers: settings.get('LDAP_Background_Sync_Import_New_Users'),\n\t\t\t\texistingUsers: settings.get('LDAP_Background_Sync_Keep_Existant_Users_Updated'),\n\t\t\t},\n\t\t\tee: {\n\t\t\t\tsyncActiveState: settings.get('LDAP_Sync_User_Active_State'),\n\t\t\t\tsyncTeams: settings.get('LDAP_Enable_LDAP_Groups_To_RC_Teams'),\n\t\t\t\tsyncRoles: settings.get('LDAP_Sync_User_Data_Roles'),\n\t\t\t},\n\t\t},\n\t\tsaml: {\n\t\t\tenabled: settings.get('SAML_Custom_Default'),\n\t\t\tusers: await Users.countActiveUsersByService('saml', { readPreference }),\n\t\t\tsignatureValidationType: settings.get('SAML_Custom_Default_signature_validation_type'),\n\t\t\tgenerateUsername: settings.get('SAML_Custom_Default_generate_username'),\n\t\t\tupdateSubscriptionsOnLogin: settings.get('SAML_Custom_Default_channels_update'),\n\t\t\tsyncRoles: settings.get('SAML_Custom_Default_role_attribute_sync'),\n\t\t\tuserDataCustomFieldMap: !(\n\t\t\t\tsettings.getSetting('SAML_Custom_Default_user_data_custom_fieldmap')?.packageValue ===\n\t\t\t\tsettings.getSetting('SAML_Custom_Default_user_data_custom_fieldmap')?.value\n\t\t\t),\n\t\t},\n\t\tcas: {\n\t\t\tenabled: settings.get('CAS_enabled'),\n\t\t\tusers: await Users.countActiveUsersByService('cas', { readPreference }),\n\t\t\tallowUserCreation: settings.get('CAS_Creation_User_Enabled'),\n\t\t\talwaysSyncUserData: settings.get('CAS_Sync_User_Data_Enabled'),\n\t\t},\n\t\toauth: {\n\t\t\tapple: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Apple'),\n\t\t\t\tusers: await Users.countActiveUsersByService('apple', { readPreference }),\n\t\t\t},\n\t\t\tdolphin: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Dolphin'),\n\t\t\t\tusers: await Users.countActiveUsersByService('dolphin', { readPreference }),\n\t\t\t},\n\t\t\tdrupal: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Drupal'),\n\t\t\t\tusers: await Users.countActiveUsersByService('drupal', { readPreference }),\n\t\t\t},\n\t\t\tfacebook: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Facebook'),\n\t\t\t\tusers: await Users.countActiveUsersByService('facebook', { readPreference }),\n\t\t\t},\n\t\t\tgithub: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Github'),\n\t\t\t\tusers: await Users.countActiveUsersByService('github', { readPreference }),\n\t\t\t},\n\t\t\tgithubEnterprise: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_GitHub_Enterprise'),\n\t\t\t\tusers: await Users.countActiveUsersByService('github_enterprise', { readPreference }),\n\t\t\t},\n\t\t\tgitlab: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Gitlab'),\n\t\t\t\tusers: await Users.countActiveUsersByService('gitlab', { readPreference }),\n\t\t\t},\n\t\t\tgoogle: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Google'),\n\t\t\t\tusers: await Users.countActiveUsersByService('google', { readPreference }),\n\t\t\t},\n\t\t\tlinkedin: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Linkedin'),\n\t\t\t\tusers: await Users.countActiveUsersByService('linkedin', { readPreference }),\n\t\t\t},\n\t\t\tmeteor: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Meteor'),\n\t\t\t\tusers: await Users.countActiveUsersByService('meteor', { readPreference }),\n\t\t\t},\n\t\t\tnextcloud: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Nextcloud'),\n\t\t\t\tusers: await Users.countActiveUsersByService('nextcloud', { readPreference }),\n\t\t\t},\n\t\t\ttokenpass: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Tokenpass'),\n\t\t\t\tusers: await Users.countActiveUsersByService('tokenpass', { readPreference }),\n\t\t\t},\n\t\t\ttwitter: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Twitter'),\n\t\t\t\tusers: await Users.countActiveUsersByService('twitter', { readPreference }),\n\t\t\t},\n\t\t\twordpress: {\n\t\t\t\tenabled: settings.get('Accounts_OAuth_Wordpress'),\n\t\t\t\tusers: await Users.countActiveUsersByService('wordpress', { readPreference }),\n\t\t\t},\n\t\t\tcustom: await getCustomOAuthServices(),\n\t\t},\n\t};\n}\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"58f509d52048191aaf608f0e1a36435609a14b2e"}
