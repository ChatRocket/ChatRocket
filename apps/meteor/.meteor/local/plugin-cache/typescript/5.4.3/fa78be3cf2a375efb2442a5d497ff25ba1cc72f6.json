{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/RouterProvider.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/providers/RouterProvider.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/RouterProvider.tsx","inputSourceMap":{"version":3,"file":"client/providers/RouterProvider.tsx","sourceRoot":"","sources":["client/providers/RouterProvider.tsx"],"names":[],"mappings":"AACA,OAAO,EAAE,aAAa,EAAE,MAAM,0BAA0B,CAAC;AAWzD,OAAO,EAAE,UAAU,EAAE,MAAM,2BAA2B,CAAC;AACvD,OAAO,EAAE,OAAO,EAAE,MAAM,gBAAgB,CAAC;AAEzC,OAAO,KAAK,MAAM,OAAO,CAAC;AAE1B,OAAO,EAAE,SAAS,EAAE,MAAM,kBAAkB,CAAC;AAC7C,OAAO,EAAE,eAAe,EAAE,MAAM,8BAA8B,CAAC;AAC/D,OAAO,EAAE,cAAc,EAAE,MAAM,6BAA6B,CAAC;AAE7D,MAAM,WAAW,GAAG,IAAI,GAAG,EAAc,CAAC;AAE1C,MAAM,mBAAmB,GAAG,GAAG,EAAE;IAChC,UAAU,CAAC,eAAe,EAAE,CAAC;IAC7B,WAAW,CAAC,OAAO,CAAC,CAAC,aAAa,EAAE,EAAE,CAAC,aAAa,EAAE,CAAC,CAAC;AACzD,CAAC,CAAC;AAEF,IAAI,WAA4C,CAAC;AAEjD,cAAc,CAAC,GAAG,EAAE;IACnB,WAAW,GAAG,OAAO,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;AACpD,CAAC,CAAC,CAAC;AAEH,MAAM,sBAAsB,GAAG,CAAC,aAAyB,EAAgB,EAAE;IAC1E,WAAW,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;IAE/B,WAAW,EAAE,UAAU,EAAE,CAAC;IAE1B,OAAO,GAAG,EAAE;QACX,WAAW,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;QAElC,IAAI,WAAW,CAAC,IAAI,KAAK,CAAC,EAAE,CAAC;YAC5B,cAAc,CAAC,GAAG,EAAE,CAAC,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;QAC3C,CAAC;IACF,CAAC,CAAC;AACH,CAAC,CAAC;AAEF,MAAM,mBAAmB,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,IAAwB,CAAC;AAEhF,MAAM,iBAAiB,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC,MAAwB,CAAC;AAElE,MAAM,kBAAkB,GAAG,GAAG,EAAE,CAAC,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,MAAM,IAAI,EAAE,CAAoB,CAAC;AAExF,MAAM,mBAAmB,GAAG,GAAG,EAAE,CAAC,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,WAAW,IAAI,EAAE,CAAqB,CAAC;AAE/F,MAAM,YAAY,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,IAA6B,CAAC;AAErF,MAAM,sBAAsB,GAAG,CAAC,gBAAkC,EAAE,EAAE;IACrE,MAAM,MAAM,GAAG,IAAI,eAAe,EAAE,CAAC;IAErC,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,EAAE,CAAC;QAC7D,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;IAC3B,CAAC;IAED,MAAM,YAAY,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;IAEvC,OAAO,YAAY,CAAC,CAAC,CAAC,IAAI,YAAY,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;AAC/C,CAAC,CAAC;AAEF,MAAM,cAAc,GAAG,CAAC,EAAM,EAA8D,EAAE;IAC7F,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE,CAAC;QAC5B,OAAO,EAAE,CAAC;IACX,CAAC;IAED,IAAI,UAAU,IAAI,EAAE,EAAE,CAAC;QACtB,MAAM,EAAE,QAAQ,EAAE,MAAM,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC;QACrC,OAAO,CAAC,QAAQ,GAAG,sBAAsB,CAAC,MAAM,CAAC,CAA+D,CAAC;IAClH,CAAC;IAED,IAAI,SAAS,IAAI,EAAE,EAAE,CAAC;QACrB,MAAM,EAAE,OAAO,EAAE,MAAM,GAAG,EAAE,EAAE,MAAM,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC;QACjD,OAAO,OAAO,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC,CAE/B,CAAC;IAC5C,CAAC;IAED,IAAI,MAAM,IAAI,EAAE,EAAE,CAAC;QAClB,MAAM,EAAE,IAAI,EAAE,MAAM,GAAG,EAAE,EAAE,MAAM,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC;QAC9C,OAAO,OAAO,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,MAAM,CAAC,CAA+D,CAAC;IACvI,CAAC;IAED,MAAM,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC;AAClC,CAAC,CAAC;AAEF,MAAM,QAAQ,GAAG,CAChB,SAAsB,EACtB,OAEC,EACA,EAAE;IACH,IAAI,OAAO,SAAS,KAAK,QAAQ,EAAE,CAAC;QACnC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;QACtB,OAAO;IACR,CAAC;IAED,MAAM,IAAI,GAAG,cAAc,CAAC,SAAS,CAAC,CAAC;IACvC,MAAM,KAAK,GAAG,EAAE,IAAI,EAAE,CAAC;IAEvB,IAAI,OAAO,EAAE,OAAO,EAAE,CAAC;QACtB,OAAO,CAAC,YAAY,CAAC,KAAK,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;IACvC,CAAC;SAAM,CAAC;QACP,OAAO,CAAC,SAAS,CAAC,KAAK,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;IACpC,CAAC;IAED,aAAa,CAAC,IAAI,aAAa,CAAC,UAAU,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;AACzD,CAAC,CAAC;AAEF,MAAM,MAAM,GAAkB,EAAE,CAAC;AACjC,MAAM,iBAAiB,GAAG,IAAI,GAAG,EAAc,CAAC;AAEhD,MAAM,gBAAgB,GAAG,GAAG,EAAE;IAC7B,IAAI,UAAU,CAAC,YAAY,EAAE,CAAC;QAC7B,UAAU,CAAC,gBAAgB,EAAE,CAAC;QAC9B,UAAU,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,UAAU,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;QAClF,OAAO;IACR,CAAC;IAED,UAAU,CAAC,UAAU,EAAE,CAAC;AACzB,CAAC,CAAC;AAEF,MAAM,YAAY,GAAG,CAAC,MAAqB,EAAE,EAAE;IAC9C,MAAM,UAAU,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE;QACvC,IAAI,KAAK,CAAC,IAAI,KAAK,GAAG,EAAE,CAAC;YACxB,UAAU,CAAC,QAAQ,GAAG;gBACrB,MAAM,EAAE,GAAG,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC;aACpD,CAAC;YAEF,OAAO,UAAU,CAAC,QAAQ,CAAC;QAC5B,CAAC;QAED,OAAO,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE;YACnC,IAAI,EAAE,KAAK,CAAC,EAAE;YACd,MAAM,EAAE,GAAG,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC;SACpD,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC;IACvB,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;IAEhC,gBAAgB,EAAE,CAAC;IACnB,iBAAiB,CAAC,OAAO,CAAC,CAAC,cAAc,EAAE,EAAE,CAAC,cAAc,EAAE,CAAC,CAAC;IAEhE,OAAO,GAAG,EAAE;QACX,UAAU,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,EAAE;YAChC,UAAU,CAAC,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,SAAS,CAAC,CAAC;YACvE,IAAI,MAAM,IAAI,SAAS,IAAI,SAAS,CAAC,IAAI,EAAE,CAAC;gBAC3C,OAAO,UAAU,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAC9C,CAAC;iBAAM,CAAC;gBACP,UAAU,CAAC,QAAQ,GAAG;oBACrB,MAAM,EAAE,GAAG,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC;iBACrC,CAAC;YACH,CAAC;QACF,CAAC,CAAC,CAAC;QAEH,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE,CAAC;YAClB,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACzB,CAAC;QAED,gBAAgB,EAAE,CAAC;QACnB,iBAAiB,CAAC,OAAO,CAAC,CAAC,cAAc,EAAE,EAAE,CAAC,cAAc,EAAE,CAAC,CAAC;IACjE,CAAC,CAAC;AACH,CAAC,CAAC;AAEF,MAAM,SAAS,GAAG,GAAG,EAAE,CAAC,MAAM,CAAC;AAE/B,MAAM,uBAAuB,GAAG,CAAC,cAA0B,EAAgB,EAAE;IAC5E,iBAAiB,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;IAEtC,cAAc,EAAE,CAAC;IAEjB,OAAO,GAAG,EAAE;QACX,iBAAiB,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;IAC1C,CAAC,CAAC;AACH,CAAC,CAAC;AAEF,kBAAkB;AAClB,MAAM,CAAC,MAAM,MAAM,GAAuB;IACzC,sBAAsB;IACtB,mBAAmB;IACnB,iBAAiB;IACjB,kBAAkB;IAClB,mBAAmB;IACnB,YAAY;IACZ,cAAc;IACd,QAAQ;IACR,YAAY;IACZ,SAAS;IACT,uBAAuB;IACvB,YAAY,CAAC,QAAkB,EAAE,SAAwB;QACxD,OAAO,EAAE,IAAI,EAAE,eAAe,CAAC,YAAY,CAAC,QAAQ,EAAE,SAAS,CAAC,IAAI,GAAG,EAAE,CAAC;IAC3E,CAAC;CACD,CAAC;AAMF,MAAM,cAAc,GAAG,CAAC,EAAE,QAAQ,EAAuB,EAAE,EAAE,CAAC,CAAC,aAAa,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,EAAG,CAAC;AAE5H,eAAe,cAAc,CAAC","sourcesContent":["import type { RoomType, RoomRouteData } from '@rocket.chat/core-typings';\nimport { RouterContext } from '@rocket.chat/ui-contexts';\nimport type {\n\tRouterContextValue,\n\tRouteName,\n\tLocationPathname,\n\tRouteParameters,\n\tSearchParameters,\n\tTo,\n\tRouteObject,\n\tLocationSearch,\n} from '@rocket.chat/ui-contexts';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Tracker } from 'meteor/tracker';\nimport type { ReactNode } from 'react';\nimport React from 'react';\n\nimport { appLayout } from '../lib/appLayout';\nimport { roomCoordinator } from '../lib/rooms/roomCoordinator';\nimport { queueMicrotask } from '../lib/utils/queueMicrotask';\n\nconst subscribers = new Set<() => void>();\n\nconst listenToRouteChange = () => {\n\tFlowRouter.watchPathChange();\n\tsubscribers.forEach((onRouteChange) => onRouteChange());\n};\n\nlet computation: Tracker.Computation | undefined;\n\nqueueMicrotask(() => {\n\tcomputation = Tracker.autorun(listenToRouteChange);\n});\n\nconst subscribeToRouteChange = (onRouteChange: () => void): (() => void) => {\n\tsubscribers.add(onRouteChange);\n\n\tcomputation?.invalidate();\n\n\treturn () => {\n\t\tsubscribers.delete(onRouteChange);\n\n\t\tif (subscribers.size === 0) {\n\t\t\tqueueMicrotask(() => computation?.stop());\n\t\t}\n\t};\n};\n\nconst getLocationPathname = () => FlowRouter.current().path as LocationPathname;\n\nconst getLocationSearch = () => location.search as LocationSearch;\n\nconst getRouteParameters = () => (FlowRouter.current().params ?? {}) as RouteParameters;\n\nconst getSearchParameters = () => (FlowRouter.current().queryParams ?? {}) as SearchParameters;\n\nconst getRouteName = () => FlowRouter.current().route?.name as RouteName | undefined;\n\nconst encodeSearchParameters = (searchParameters: SearchParameters) => {\n\tconst search = new URLSearchParams();\n\n\tfor (const [key, value] of Object.entries(searchParameters)) {\n\t\tsearch.append(key, value);\n\t}\n\n\tconst searchString = search.toString();\n\n\treturn searchString ? `?${searchString}` : '';\n};\n\nconst buildRoutePath = (to: To): LocationPathname | `${LocationPathname}?${LocationSearch}` => {\n\tif (typeof to === 'string') {\n\t\treturn to;\n\t}\n\n\tif ('pathname' in to) {\n\t\tconst { pathname, search = {} } = to;\n\t\treturn (pathname + encodeSearchParameters(search)) as LocationPathname | `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tif ('pattern' in to) {\n\t\tconst { pattern, params = {}, search = {} } = to;\n\t\treturn Tracker.nonreactive(() => FlowRouter.path(pattern, params, search)) as\n\t\t\t| LocationPathname\n\t\t\t| `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tif ('name' in to) {\n\t\tconst { name, params = {}, search = {} } = to;\n\t\treturn Tracker.nonreactive(() => FlowRouter.path(name, params, search)) as LocationPathname | `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tthrow new Error('Invalid route');\n};\n\nconst navigate = (\n\ttoOrDelta: To | number,\n\toptions?: {\n\t\treplace?: boolean;\n\t},\n) => {\n\tif (typeof toOrDelta === 'number') {\n\t\thistory.go(toOrDelta);\n\t\treturn;\n\t}\n\n\tconst path = buildRoutePath(toOrDelta);\n\tconst state = { path };\n\n\tif (options?.replace) {\n\t\thistory.replaceState(state, '', path);\n\t} else {\n\t\thistory.pushState(state, '', path);\n\t}\n\n\tdispatchEvent(new PopStateEvent('popstate', { state }));\n};\n\nconst routes: RouteObject[] = [];\nconst routesSubscribers = new Set<() => void>();\n\nconst updateFlowRouter = () => {\n\tif (FlowRouter._initialized) {\n\t\tFlowRouter._updateCallbacks();\n\t\tFlowRouter._page.dispatch(new FlowRouter._page.Context(FlowRouter._current.path));\n\t\treturn;\n\t}\n\n\tFlowRouter.initialize();\n};\n\nconst defineRoutes = (routes: RouteObject[]) => {\n\tconst flowRoutes = routes.map((route) => {\n\t\tif (route.path === '*') {\n\t\t\tFlowRouter.notFound = {\n\t\t\t\taction: () => appLayout.render(<>{route.element}</>),\n\t\t\t};\n\n\t\t\treturn FlowRouter.notFound;\n\t\t}\n\n\t\treturn FlowRouter.route(route.path, {\n\t\t\tname: route.id,\n\t\t\taction: () => appLayout.render(<>{route.element}</>),\n\t\t});\n\t});\n\n\troutes.push(...routes);\n\tconst index = routes.length - 1;\n\n\tupdateFlowRouter();\n\troutesSubscribers.forEach((onRoutesChange) => onRoutesChange());\n\n\treturn () => {\n\t\tflowRoutes.forEach((flowRoute) => {\n\t\t\tFlowRouter._routes = FlowRouter._routes.filter((r) => r !== flowRoute);\n\t\t\tif ('name' in flowRoute && flowRoute.name) {\n\t\t\t\tdelete FlowRouter._routesMap[flowRoute.name];\n\t\t\t} else {\n\t\t\t\tFlowRouter.notFound = {\n\t\t\t\t\taction: () => appLayout.render(<></>),\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tif (index !== -1) {\n\t\t\troutes.splice(index, 1);\n\t\t}\n\n\t\tupdateFlowRouter();\n\t\troutesSubscribers.forEach((onRoutesChange) => onRoutesChange());\n\t};\n};\n\nconst getRoutes = () => routes;\n\nconst subscribeToRoutesChange = (onRoutesChange: () => void): (() => void) => {\n\troutesSubscribers.add(onRoutesChange);\n\n\tonRoutesChange();\n\n\treturn () => {\n\t\troutesSubscribers.delete(onRoutesChange);\n\t};\n};\n\n/** @deprecated */\nexport const router: RouterContextValue = {\n\tsubscribeToRouteChange,\n\tgetLocationPathname,\n\tgetLocationSearch,\n\tgetRouteParameters,\n\tgetSearchParameters,\n\tgetRouteName,\n\tbuildRoutePath,\n\tnavigate,\n\tdefineRoutes,\n\tgetRoutes,\n\tsubscribeToRoutesChange,\n\tgetRoomRoute(roomType: RoomType, routeData: RoomRouteData) {\n\t\treturn { path: roomCoordinator.getRouteLink(roomType, routeData) || '/' };\n\t},\n};\n\ntype RouterProviderProps = {\n\tchildren?: ReactNode;\n};\n\nconst RouterProvider = ({ children }: RouterProviderProps) => <RouterContext.Provider children={children} value={router} />;\n\nexport default RouterProvider;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/RouterProvider.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/providers/RouterProvider.tsx","inputSourceMap":{"version":3,"file":"client/providers/RouterProvider.tsx","sourceRoot":"","sources":["client/providers/RouterProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { RoomType, RoomRouteData } from '@rocket.chat/core-typings';\nimport { RouterContext } from '@rocket.chat/ui-contexts';\nimport type {\n\tRouterContextValue,\n\tRouteName,\n\tLocationPathname,\n\tRouteParameters,\n\tSearchParameters,\n\tTo,\n\tRouteObject,\n\tLocationSearch,\n} from '@rocket.chat/ui-contexts';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Tracker } from 'meteor/tracker';\nimport type { ReactNode } from 'react';\nimport React from 'react';\n\nimport { appLayout } from '../lib/appLayout';\nimport { roomCoordinator } from '../lib/rooms/roomCoordinator';\nimport { queueMicrotask } from '../lib/utils/queueMicrotask';\n\nconst subscribers = new Set<() => void>();\n\nconst listenToRouteChange = () => {\n\tFlowRouter.watchPathChange();\n\tsubscribers.forEach((onRouteChange) => onRouteChange());\n};\n\nlet computation: Tracker.Computation | undefined;\n\nqueueMicrotask(() => {\n\tcomputation = Tracker.autorun(listenToRouteChange);\n});\n\nconst subscribeToRouteChange = (onRouteChange: () => void): (() => void) => {\n\tsubscribers.add(onRouteChange);\n\n\tcomputation?.invalidate();\n\n\treturn () => {\n\t\tsubscribers.delete(onRouteChange);\n\n\t\tif (subscribers.size === 0) {\n\t\t\tqueueMicrotask(() => computation?.stop());\n\t\t}\n\t};\n};\n\nconst getLocationPathname = () => FlowRouter.current().path as LocationPathname;\n\nconst getLocationSearch = () => location.search as LocationSearch;\n\nconst getRouteParameters = () => (FlowRouter.current().params ?? {}) as RouteParameters;\n\nconst getSearchParameters = () => (FlowRouter.current().queryParams ?? {}) as SearchParameters;\n\nconst getRouteName = () => FlowRouter.current().route?.name as RouteName | undefined;\n\nconst encodeSearchParameters = (searchParameters: SearchParameters) => {\n\tconst search = new URLSearchParams();\n\n\tfor (const [key, value] of Object.entries(searchParameters)) {\n\t\tsearch.append(key, value);\n\t}\n\n\tconst searchString = search.toString();\n\n\treturn searchString ? `?${searchString}` : '';\n};\n\nconst buildRoutePath = (to: To): LocationPathname | `${LocationPathname}?${LocationSearch}` => {\n\tif (typeof to === 'string') {\n\t\treturn to;\n\t}\n\n\tif ('pathname' in to) {\n\t\tconst { pathname, search = {} } = to;\n\t\treturn (pathname + encodeSearchParameters(search)) as LocationPathname | `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tif ('pattern' in to) {\n\t\tconst { pattern, params = {}, search = {} } = to;\n\t\treturn Tracker.nonreactive(() => FlowRouter.path(pattern, params, search)) as\n\t\t\t| LocationPathname\n\t\t\t| `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tif ('name' in to) {\n\t\tconst { name, params = {}, search = {} } = to;\n\t\treturn Tracker.nonreactive(() => FlowRouter.path(name, params, search)) as LocationPathname | `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tthrow new Error('Invalid route');\n};\n\nconst navigate = (\n\ttoOrDelta: To | number,\n\toptions?: {\n\t\treplace?: boolean;\n\t},\n) => {\n\tif (typeof toOrDelta === 'number') {\n\t\thistory.go(toOrDelta);\n\t\treturn;\n\t}\n\n\tconst path = buildRoutePath(toOrDelta);\n\tconst state = { path };\n\n\tif (options?.replace) {\n\t\thistory.replaceState(state, '', path);\n\t} else {\n\t\thistory.pushState(state, '', path);\n\t}\n\n\tdispatchEvent(new PopStateEvent('popstate', { state }));\n};\n\nconst routes: RouteObject[] = [];\nconst routesSubscribers = new Set<() => void>();\n\nconst updateFlowRouter = () => {\n\tif (FlowRouter._initialized) {\n\t\tFlowRouter._updateCallbacks();\n\t\tFlowRouter._page.dispatch(new FlowRouter._page.Context(FlowRouter._current.path));\n\t\treturn;\n\t}\n\n\tFlowRouter.initialize();\n};\n\nconst defineRoutes = (routes: RouteObject[]) => {\n\tconst flowRoutes = routes.map((route) => {\n\t\tif (route.path === '*') {\n\t\t\tFlowRouter.notFound = {\n\t\t\t\taction: () => appLayout.render(<>{route.element}</>),\n\t\t\t};\n\n\t\t\treturn FlowRouter.notFound;\n\t\t}\n\n\t\treturn FlowRouter.route(route.path, {\n\t\t\tname: route.id,\n\t\t\taction: () => appLayout.render(<>{route.element}</>),\n\t\t});\n\t});\n\n\troutes.push(...routes);\n\tconst index = routes.length - 1;\n\n\tupdateFlowRouter();\n\troutesSubscribers.forEach((onRoutesChange) => onRoutesChange());\n\n\treturn () => {\n\t\tflowRoutes.forEach((flowRoute) => {\n\t\t\tFlowRouter._routes = FlowRouter._routes.filter((r) => r !== flowRoute);\n\t\t\tif ('name' in flowRoute && flowRoute.name) {\n\t\t\t\tdelete FlowRouter._routesMap[flowRoute.name];\n\t\t\t} else {\n\t\t\t\tFlowRouter.notFound = {\n\t\t\t\t\taction: () => appLayout.render(<></>),\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tif (index !== -1) {\n\t\t\troutes.splice(index, 1);\n\t\t}\n\n\t\tupdateFlowRouter();\n\t\troutesSubscribers.forEach((onRoutesChange) => onRoutesChange());\n\t};\n};\n\nconst getRoutes = () => routes;\n\nconst subscribeToRoutesChange = (onRoutesChange: () => void): (() => void) => {\n\troutesSubscribers.add(onRoutesChange);\n\n\tonRoutesChange();\n\n\treturn () => {\n\t\troutesSubscribers.delete(onRoutesChange);\n\t};\n};\n\n/** @deprecated */\nexport const router: RouterContextValue = {\n\tsubscribeToRouteChange,\n\tgetLocationPathname,\n\tgetLocationSearch,\n\tgetRouteParameters,\n\tgetSearchParameters,\n\tgetRouteName,\n\tbuildRoutePath,\n\tnavigate,\n\tdefineRoutes,\n\tgetRoutes,\n\tsubscribeToRoutesChange,\n\tgetRoomRoute(roomType: RoomType, routeData: RoomRouteData) {\n\t\treturn { path: roomCoordinator.getRouteLink(roomType, routeData) || '/' };\n\t},\n};\n\ntype RouterProviderProps = {\n\tchildren?: ReactNode;\n};\n\nconst RouterProvider = ({ children }: RouterProviderProps) => <RouterContext.Provider children={children} value={router} />;\n\nexport default RouterProvider;\n"]}}},"code":"var _toConsumableArray;\nmodule.link(\"@babel/runtime/helpers/toConsumableArray\", {\n  default: function (v) {\n    _toConsumableArray = v;\n  }\n}, 0);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\nmodule.export({\n  router: function () {\n    return router;\n  }\n});\nvar RouterContext;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  RouterContext: function (v) {\n    RouterContext = v;\n  }\n}, 0);\nvar FlowRouter;\nmodule.link(\"meteor/kadira:flow-router\", {\n  FlowRouter: function (v) {\n    FlowRouter = v;\n  }\n}, 1);\nvar Tracker;\nmodule.link(\"meteor/tracker\", {\n  Tracker: function (v) {\n    Tracker = v;\n  }\n}, 2);\nvar React;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  }\n}, 3);\nvar appLayout;\nmodule.link(\"../lib/appLayout\", {\n  appLayout: function (v) {\n    appLayout = v;\n  }\n}, 4);\nvar roomCoordinator;\nmodule.link(\"../lib/rooms/roomCoordinator\", {\n  roomCoordinator: function (v) {\n    roomCoordinator = v;\n  }\n}, 5);\nvar queueMicrotask;\nmodule.link(\"../lib/utils/queueMicrotask\", {\n  queueMicrotask: function (v) {\n    queueMicrotask = v;\n  }\n}, 6);\nvar subscribers = new Set();\nvar listenToRouteChange = function () {\n  FlowRouter.watchPathChange();\n  subscribers.forEach(function (onRouteChange) {\n    return onRouteChange();\n  });\n};\nvar computation;\nqueueMicrotask(function () {\n  computation = Tracker.autorun(listenToRouteChange);\n});\nvar subscribeToRouteChange = function (onRouteChange) {\n  var _computation;\n  subscribers.add(onRouteChange);\n  (_computation = computation) === null || _computation === void 0 ? void 0 : _computation.invalidate();\n  return function () {\n    subscribers.delete(onRouteChange);\n    if (subscribers.size === 0) {\n      queueMicrotask(function () {\n        var _computation2;\n        return (_computation2 = computation) === null || _computation2 === void 0 ? void 0 : _computation2.stop();\n      });\n    }\n  };\n};\nvar getLocationPathname = function () {\n  return FlowRouter.current().path;\n};\nvar getLocationSearch = function () {\n  return location.search;\n};\nvar getRouteParameters = function () {\n  var _FlowRouter$current$p;\n  return (_FlowRouter$current$p = FlowRouter.current().params) !== null && _FlowRouter$current$p !== void 0 ? _FlowRouter$current$p : {};\n};\nvar getSearchParameters = function () {\n  var _FlowRouter$current$q;\n  return (_FlowRouter$current$q = FlowRouter.current().queryParams) !== null && _FlowRouter$current$q !== void 0 ? _FlowRouter$current$q : {};\n};\nvar getRouteName = function () {\n  var _FlowRouter$current$r;\n  return (_FlowRouter$current$r = FlowRouter.current().route) === null || _FlowRouter$current$r === void 0 ? void 0 : _FlowRouter$current$r.name;\n};\nvar encodeSearchParameters = function (searchParameters) {\n  var search = new URLSearchParams();\n  for (var _i = 0, _Object$entries = Object.entries(searchParameters); _i < _Object$entries.length; _i++) {\n    var _ref = _Object$entries[_i];\n    var _ref2 = _slicedToArray(_ref, 2);\n    var key = _ref2[0];\n    var value = _ref2[1];\n    search.append(key, value);\n  }\n  var searchString = search.toString();\n  return searchString ? \"?\" + searchString : '';\n};\nvar buildRoutePath = function (to) {\n  if (typeof to === 'string') {\n    return to;\n  }\n  if ('pathname' in to) {\n    var pathname = to.pathname,\n      _to$search = to.search,\n      search = _to$search === void 0 ? {} : _to$search;\n    return pathname + encodeSearchParameters(search);\n  }\n  if ('pattern' in to) {\n    var pattern = to.pattern,\n      _to$params = to.params,\n      params = _to$params === void 0 ? {} : _to$params,\n      _to$search2 = to.search,\n      _search = _to$search2 === void 0 ? {} : _to$search2;\n    return Tracker.nonreactive(function () {\n      return FlowRouter.path(pattern, params, _search);\n    });\n  }\n  if ('name' in to) {\n    var name = to.name,\n      _to$params2 = to.params,\n      _params = _to$params2 === void 0 ? {} : _to$params2,\n      _to$search3 = to.search,\n      _search2 = _to$search3 === void 0 ? {} : _to$search3;\n    return Tracker.nonreactive(function () {\n      return FlowRouter.path(name, _params, _search2);\n    });\n  }\n  throw new Error('Invalid route');\n};\nvar navigate = function (toOrDelta, options) {\n  if (typeof toOrDelta === 'number') {\n    history.go(toOrDelta);\n    return;\n  }\n  var path = buildRoutePath(toOrDelta);\n  var state = {\n    path: path\n  };\n  if (options !== null && options !== void 0 && options.replace) {\n    history.replaceState(state, '', path);\n  } else {\n    history.pushState(state, '', path);\n  }\n  dispatchEvent(new PopStateEvent('popstate', {\n    state: state\n  }));\n};\nvar routes = [];\nvar routesSubscribers = new Set();\nvar updateFlowRouter = function () {\n  if (FlowRouter._initialized) {\n    FlowRouter._updateCallbacks();\n    FlowRouter._page.dispatch(new FlowRouter._page.Context(FlowRouter._current.path));\n    return;\n  }\n  FlowRouter.initialize();\n};\nvar defineRoutes = function (routes) {\n  var flowRoutes = routes.map(function (route) {\n    if (route.path === '*') {\n      FlowRouter.notFound = {\n        action: function () {\n          return appLayout.render( /*#__PURE__*/React.createElement(React.Fragment, null, route.element));\n        }\n      };\n      return FlowRouter.notFound;\n    }\n    return FlowRouter.route(route.path, {\n      name: route.id,\n      action: function () {\n        return appLayout.render( /*#__PURE__*/React.createElement(React.Fragment, null, route.element));\n      }\n    });\n  });\n  routes.push.apply(routes, _toConsumableArray(routes));\n  var index = routes.length - 1;\n  updateFlowRouter();\n  routesSubscribers.forEach(function (onRoutesChange) {\n    return onRoutesChange();\n  });\n  return function () {\n    flowRoutes.forEach(function (flowRoute) {\n      FlowRouter._routes = FlowRouter._routes.filter(function (r) {\n        return r !== flowRoute;\n      });\n      if ('name' in flowRoute && flowRoute.name) {\n        delete FlowRouter._routesMap[flowRoute.name];\n      } else {\n        FlowRouter.notFound = {\n          action: function () {\n            return appLayout.render( /*#__PURE__*/React.createElement(React.Fragment, null));\n          }\n        };\n      }\n    });\n    if (index !== -1) {\n      routes.splice(index, 1);\n    }\n    updateFlowRouter();\n    routesSubscribers.forEach(function (onRoutesChange) {\n      return onRoutesChange();\n    });\n  };\n};\nvar getRoutes = function () {\n  return routes;\n};\nvar subscribeToRoutesChange = function (onRoutesChange) {\n  routesSubscribers.add(onRoutesChange);\n  onRoutesChange();\n  return function () {\n    routesSubscribers.delete(onRoutesChange);\n  };\n};\n/** @deprecated */\nvar router = {\n  subscribeToRouteChange: subscribeToRouteChange,\n  getLocationPathname: getLocationPathname,\n  getLocationSearch: getLocationSearch,\n  getRouteParameters: getRouteParameters,\n  getSearchParameters: getSearchParameters,\n  getRouteName: getRouteName,\n  buildRoutePath: buildRoutePath,\n  navigate: navigate,\n  defineRoutes: defineRoutes,\n  getRoutes: getRoutes,\n  subscribeToRoutesChange: subscribeToRoutesChange,\n  getRoomRoute: function (roomType, routeData) {\n    return {\n      path: roomCoordinator.getRouteLink(roomType, routeData) || '/'\n    };\n  }\n};\nvar RouterProvider = function (_ref3) {\n  var children = _ref3.children;\n  return /*#__PURE__*/React.createElement(RouterContext.Provider, {\n    children: children,\n    value: router\n  });\n};\nmodule.exportDefault(RouterProvider);","map":{"version":3,"names":["_toConsumableArray","module","link","default","v","_slicedToArray","export","router","RouterContext","FlowRouter","Tracker","React","appLayout","roomCoordinator","queueMicrotask","subscribers","Set","listenToRouteChange","watchPathChange","forEach","onRouteChange","computation","autorun","subscribeToRouteChange","_computation","add","invalidate","delete","size","_computation2","stop","getLocationPathname","current","path","getLocationSearch","location","search","getRouteParameters","_FlowRouter$current$p","params","getSearchParameters","_FlowRouter$current$q","queryParams","getRouteName","_FlowRouter$current$r","route","name","encodeSearchParameters","searchParameters","URLSearchParams","_i","_Object$entries","Object","entries","length","_ref","_ref2","key","value","append","searchString","toString","buildRoutePath","to","pathname","_to$search","pattern","_to$params","_to$search2","nonreactive","_to$params2","_to$search3","Error","navigate","toOrDelta","options","history","go","state","replace","replaceState","pushState","dispatchEvent","PopStateEvent","routes","routesSubscribers","updateFlowRouter","_initialized","_updateCallbacks","_page","dispatch","Context","_current","initialize","defineRoutes","flowRoutes","map","notFound","action","render","createElement","Fragment","element","id","push","apply","index","onRoutesChange","flowRoute","_routes","filter","r","_routesMap","splice","getRoutes","subscribeToRoutesChange","getRoomRoute","roomType","routeData","getRouteLink","RouterProvider","_ref3","children","Provider","exportDefault"],"sources":["client/providers/RouterProvider.tsx"],"sourcesContent":["import type { RoomType, RoomRouteData } from '@rocket.chat/core-typings';\nimport { RouterContext } from '@rocket.chat/ui-contexts';\nimport type {\n\tRouterContextValue,\n\tRouteName,\n\tLocationPathname,\n\tRouteParameters,\n\tSearchParameters,\n\tTo,\n\tRouteObject,\n\tLocationSearch,\n} from '@rocket.chat/ui-contexts';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Tracker } from 'meteor/tracker';\nimport type { ReactNode } from 'react';\nimport React from 'react';\n\nimport { appLayout } from '../lib/appLayout';\nimport { roomCoordinator } from '../lib/rooms/roomCoordinator';\nimport { queueMicrotask } from '../lib/utils/queueMicrotask';\n\nconst subscribers = new Set<() => void>();\n\nconst listenToRouteChange = () => {\n\tFlowRouter.watchPathChange();\n\tsubscribers.forEach((onRouteChange) => onRouteChange());\n};\n\nlet computation: Tracker.Computation | undefined;\n\nqueueMicrotask(() => {\n\tcomputation = Tracker.autorun(listenToRouteChange);\n});\n\nconst subscribeToRouteChange = (onRouteChange: () => void): (() => void) => {\n\tsubscribers.add(onRouteChange);\n\n\tcomputation?.invalidate();\n\n\treturn () => {\n\t\tsubscribers.delete(onRouteChange);\n\n\t\tif (subscribers.size === 0) {\n\t\t\tqueueMicrotask(() => computation?.stop());\n\t\t}\n\t};\n};\n\nconst getLocationPathname = () => FlowRouter.current().path as LocationPathname;\n\nconst getLocationSearch = () => location.search as LocationSearch;\n\nconst getRouteParameters = () => (FlowRouter.current().params ?? {}) as RouteParameters;\n\nconst getSearchParameters = () => (FlowRouter.current().queryParams ?? {}) as SearchParameters;\n\nconst getRouteName = () => FlowRouter.current().route?.name as RouteName | undefined;\n\nconst encodeSearchParameters = (searchParameters: SearchParameters) => {\n\tconst search = new URLSearchParams();\n\n\tfor (const [key, value] of Object.entries(searchParameters)) {\n\t\tsearch.append(key, value);\n\t}\n\n\tconst searchString = search.toString();\n\n\treturn searchString ? `?${searchString}` : '';\n};\n\nconst buildRoutePath = (to: To): LocationPathname | `${LocationPathname}?${LocationSearch}` => {\n\tif (typeof to === 'string') {\n\t\treturn to;\n\t}\n\n\tif ('pathname' in to) {\n\t\tconst { pathname, search = {} } = to;\n\t\treturn (pathname + encodeSearchParameters(search)) as LocationPathname | `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tif ('pattern' in to) {\n\t\tconst { pattern, params = {}, search = {} } = to;\n\t\treturn Tracker.nonreactive(() => FlowRouter.path(pattern, params, search)) as\n\t\t\t| LocationPathname\n\t\t\t| `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tif ('name' in to) {\n\t\tconst { name, params = {}, search = {} } = to;\n\t\treturn Tracker.nonreactive(() => FlowRouter.path(name, params, search)) as LocationPathname | `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tthrow new Error('Invalid route');\n};\n\nconst navigate = (\n\ttoOrDelta: To | number,\n\toptions?: {\n\t\treplace?: boolean;\n\t},\n) => {\n\tif (typeof toOrDelta === 'number') {\n\t\thistory.go(toOrDelta);\n\t\treturn;\n\t}\n\n\tconst path = buildRoutePath(toOrDelta);\n\tconst state = { path };\n\n\tif (options?.replace) {\n\t\thistory.replaceState(state, '', path);\n\t} else {\n\t\thistory.pushState(state, '', path);\n\t}\n\n\tdispatchEvent(new PopStateEvent('popstate', { state }));\n};\n\nconst routes: RouteObject[] = [];\nconst routesSubscribers = new Set<() => void>();\n\nconst updateFlowRouter = () => {\n\tif (FlowRouter._initialized) {\n\t\tFlowRouter._updateCallbacks();\n\t\tFlowRouter._page.dispatch(new FlowRouter._page.Context(FlowRouter._current.path));\n\t\treturn;\n\t}\n\n\tFlowRouter.initialize();\n};\n\nconst defineRoutes = (routes: RouteObject[]) => {\n\tconst flowRoutes = routes.map((route) => {\n\t\tif (route.path === '*') {\n\t\t\tFlowRouter.notFound = {\n\t\t\t\taction: () => appLayout.render(<>{route.element}</>),\n\t\t\t};\n\n\t\t\treturn FlowRouter.notFound;\n\t\t}\n\n\t\treturn FlowRouter.route(route.path, {\n\t\t\tname: route.id,\n\t\t\taction: () => appLayout.render(<>{route.element}</>),\n\t\t});\n\t});\n\n\troutes.push(...routes);\n\tconst index = routes.length - 1;\n\n\tupdateFlowRouter();\n\troutesSubscribers.forEach((onRoutesChange) => onRoutesChange());\n\n\treturn () => {\n\t\tflowRoutes.forEach((flowRoute) => {\n\t\t\tFlowRouter._routes = FlowRouter._routes.filter((r) => r !== flowRoute);\n\t\t\tif ('name' in flowRoute && flowRoute.name) {\n\t\t\t\tdelete FlowRouter._routesMap[flowRoute.name];\n\t\t\t} else {\n\t\t\t\tFlowRouter.notFound = {\n\t\t\t\t\taction: () => appLayout.render(<></>),\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tif (index !== -1) {\n\t\t\troutes.splice(index, 1);\n\t\t}\n\n\t\tupdateFlowRouter();\n\t\troutesSubscribers.forEach((onRoutesChange) => onRoutesChange());\n\t};\n};\n\nconst getRoutes = () => routes;\n\nconst subscribeToRoutesChange = (onRoutesChange: () => void): (() => void) => {\n\troutesSubscribers.add(onRoutesChange);\n\n\tonRoutesChange();\n\n\treturn () => {\n\t\troutesSubscribers.delete(onRoutesChange);\n\t};\n};\n\n/** @deprecated */\nexport const router: RouterContextValue = {\n\tsubscribeToRouteChange,\n\tgetLocationPathname,\n\tgetLocationSearch,\n\tgetRouteParameters,\n\tgetSearchParameters,\n\tgetRouteName,\n\tbuildRoutePath,\n\tnavigate,\n\tdefineRoutes,\n\tgetRoutes,\n\tsubscribeToRoutesChange,\n\tgetRoomRoute(roomType: RoomType, routeData: RoomRouteData) {\n\t\treturn { path: roomCoordinator.getRouteLink(roomType, routeData) || '/' };\n\t},\n};\n\ntype RouterProviderProps = {\n\tchildren?: ReactNode;\n};\n\nconst RouterProvider = ({ children }: RouterProviderProps) => <RouterContext.Provider children={children} value={router} />;\n\nexport default RouterProvider;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"fa78be3cf2a375efb2442a5d497ff25ba1cc72f6"}
