{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebar/RoomList/SideBarItemTemplateWithData.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/sidebar/RoomList/SideBarItemTemplateWithData.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebar/RoomList/SideBarItemTemplateWithData.tsx","inputSourceMap":{"version":3,"file":"client/sidebar/RoomList/SideBarItemTemplateWithData.tsx","sourceRoot":"","sources":["client/sidebar/RoomList/SideBarItemTemplateWithData.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, IRoom, ISubscription } from '@rocket.chat/core-typings';\nimport { isDirectMessageRoom, isMultipleDirectMessageRoom, isOmnichannelRoom, isVideoConfMessage } from '@rocket.chat/core-typings';\nimport { Badge, Sidebar, SidebarItemAction, SidebarItemActions, Margins } from '@rocket.chat/fuselage';\nimport { useLayout } from '@rocket.chat/ui-contexts';\nimport type { TFunction } from 'i18next';\nimport type { AllHTMLAttributes, ComponentType, ReactElement, ReactNode } from 'react';\nimport React, { memo, useMemo } from 'react';\n\nimport { RoomIcon } from '../../components/RoomIcon';\nimport { roomCoordinator } from '../../lib/rooms/roomCoordinator';\nimport { isIOsDevice } from '../../lib/utils/isIOsDevice';\nimport { useOmnichannelPriorities } from '../../omnichannel/hooks/useOmnichannelPriorities';\nimport RoomMenu from '../RoomMenu';\nimport { OmnichannelBadges } from '../badges/OmnichannelBadges';\nimport type { useAvatarTemplate } from '../hooks/useAvatarTemplate';\nimport { normalizeSidebarMessage } from './normalizeSidebarMessage';\n\nconst getMessage = (room: IRoom, lastMessage: IMessage | undefined, t: TFunction): string | undefined => {\n\tif (!lastMessage) {\n\t\treturn t('No_messages_yet');\n\t}\n\tif (isVideoConfMessage(lastMessage)) {\n\t\treturn t('Call_started');\n\t}\n\tif (!lastMessage.u) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\tif (lastMessage.u?.username === room.u?.username) {\n\t\treturn `${t('You')}: ${normalizeSidebarMessage(lastMessage, t)}`;\n\t}\n\tif (isDirectMessageRoom(room) && !isMultipleDirectMessageRoom(room)) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\treturn `${lastMessage.u.name || lastMessage.u.username}: ${normalizeSidebarMessage(lastMessage, t)}`;\n};\n\nconst getBadgeTitle = (userMentions: number, threadUnread: number, groupMentions: number, unread: number, t: TFunction) => {\n\tconst title = [] as string[];\n\tif (userMentions) {\n\t\ttitle.push(t('mentions_counter', { count: userMentions }));\n\t}\n\tif (threadUnread) {\n\t\ttitle.push(t('threads_counter', { count: threadUnread }));\n\t}\n\tif (groupMentions) {\n\t\ttitle.push(t('group_mentions_counter', { count: groupMentions }));\n\t}\n\tconst count = unread - userMentions - groupMentions;\n\tif (count > 0) {\n\t\ttitle.push(t('unread_messages_counter', { count }));\n\t}\n\treturn title.join(', ');\n};\n\ntype RoomListRowProps = {\n\textended: boolean;\n\tt: TFunction;\n\tSideBarItemTemplate: ComponentType<\n\t\t{\n\t\t\ticon: ReactNode;\n\t\t\ttitle: ReactNode;\n\t\t\tavatar: ReactNode;\n\t\t\tactions: unknown;\n\t\t\thref: string;\n\t\t\ttime?: Date;\n\t\t\tmenu?: ReactNode;\n\t\t\tmenuOptions?: unknown;\n\t\t\tsubtitle?: ReactNode;\n\t\t\ttitleIcon?: string;\n\t\t\tbadges?: ReactNode;\n\t\t\tthreadUnread?: boolean;\n\t\t\tunread?: boolean;\n\t\t\tselected?: boolean;\n\t\t\tis?: string;\n\t\t} & AllHTMLAttributes<HTMLElement>\n\t>;\n\tAvatarTemplate: ReturnType<typeof useAvatarTemplate>;\n\topenedRoom?: string;\n\t// sidebarViewMode: 'extended';\n\tisAnonymous?: boolean;\n\n\troom: ISubscription & IRoom;\n\tid?: string;\n\t/* @deprecated */\n\tstyle?: AllHTMLAttributes<HTMLElement>['style'];\n\n\tselected?: boolean;\n\n\tsidebarViewMode?: unknown;\n\tvideoConfActions?: {\n\t\t[action: string]: () => void;\n\t};\n};\n\nfunction SideBarItemTemplateWithData({\n\troom,\n\tid,\n\tselected,\n\tstyle,\n\textended,\n\tSideBarItemTemplate,\n\tAvatarTemplate,\n\tt,\n\tisAnonymous,\n\tvideoConfActions,\n}: RoomListRowProps): ReactElement {\n\tconst { sidebar } = useLayout();\n\n\tconst href = roomCoordinator.getRouteLink(room.t, room) || '';\n\tconst title = roomCoordinator.getRoomName(room.t, room) || '';\n\n\tconst {\n\t\tlastMessage,\n\t\thideUnreadStatus,\n\t\thideMentionStatus,\n\t\tunread = 0,\n\t\talert,\n\t\tuserMentions,\n\t\tgroupMentions,\n\t\ttunread = [],\n\t\ttunreadUser = [],\n\t\trid,\n\t\tt: type,\n\t\tcl,\n\t} = room;\n\n\tconst highlighted = Boolean(!hideUnreadStatus && (alert || unread));\n\tconst icon = (\n\t\t// TODO: Remove icon='at'\n\t\t<Sidebar.Item.Icon highlighted={highlighted} icon='at'>\n\t\t\t<RoomIcon room={room} placement='sidebar' isIncomingCall={Boolean(videoConfActions)} />\n\t\t</Sidebar.Item.Icon>\n\t);\n\n\tconst actions = useMemo(\n\t\t() =>\n\t\t\tvideoConfActions && (\n\t\t\t\t<SidebarItemActions>\n\t\t\t\t\t<SidebarItemAction onClick={videoConfActions.acceptCall} secondary success icon='phone' />\n\t\t\t\t\t<SidebarItemAction onClick={videoConfActions.rejectCall} secondary danger icon='phone-off' />\n\t\t\t\t</SidebarItemActions>\n\t\t\t),\n\t\t[videoConfActions],\n\t);\n\n\tconst isQueued = isOmnichannelRoom(room) && room.status === 'queued';\n\tconst { enabled: isPriorityEnabled } = useOmnichannelPriorities();\n\n\tconst message = extended && getMessage(room, lastMessage, t);\n\tconst subtitle = message ? <span className='message-body--unstyled' dangerouslySetInnerHTML={{ __html: message }} /> : null;\n\n\tconst threadUnread = tunread.length > 0;\n\tconst variant =\n\t\t((userMentions || tunreadUser.length) && 'danger') || (threadUnread && 'primary') || (groupMentions && 'warning') || 'secondary';\n\n\tconst isUnread = unread > 0 || threadUnread;\n\tconst showBadge = !hideUnreadStatus || (!hideMentionStatus && (Boolean(userMentions) || tunreadUser.length > 0));\n\n\tconst badgeTitle = getBadgeTitle(userMentions, tunread.length, groupMentions, unread, t);\n\n\tconst badges = (\n\t\t<Margins inlineStart={8}>\n\t\t\t{showBadge && isUnread && (\n\t\t\t\t<Badge role='status' {...({ style: { display: 'inline-flex', flexShrink: 0 } } as any)} variant={variant} title={badgeTitle}>\n\t\t\t\t\t{unread + tunread?.length}\n\t\t\t\t</Badge>\n\t\t\t)}\n\t\t\t{isOmnichannelRoom(room) && <OmnichannelBadges room={room} />}\n\t\t</Margins>\n\t);\n\n\treturn (\n\t\t<SideBarItemTemplate\n\t\t\tis='a'\n\t\t\tid={id}\n\t\t\tdata-qa='sidebar-item'\n\t\t\tdata-unread={highlighted}\n\t\t\tunread={highlighted}\n\t\t\tselected={selected}\n\t\t\thref={href}\n\t\t\tonClick={(): void => {\n\t\t\t\t!selected && sidebar.toggle();\n\t\t\t}}\n\t\t\taria-label={title}\n\t\t\ttitle={title}\n\t\t\ttime={lastMessage?.ts}\n\t\t\tsubtitle={subtitle}\n\t\t\ticon={icon}\n\t\t\tstyle={style}\n\t\t\tbadges={badges}\n\t\t\tavatar={AvatarTemplate && <AvatarTemplate {...room} />}\n\t\t\tactions={actions}\n\t\t\tmenu={\n\t\t\t\t!isIOsDevice &&\n\t\t\t\t!isAnonymous &&\n\t\t\t\t(!isQueued || (isQueued && isPriorityEnabled)) &&\n\t\t\t\t((): ReactElement => (\n\t\t\t\t\t<RoomMenu\n\t\t\t\t\t\talert={alert}\n\t\t\t\t\t\tthreadUnread={threadUnread}\n\t\t\t\t\t\trid={rid}\n\t\t\t\t\t\tunread={!!unread}\n\t\t\t\t\t\troomOpen={selected}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tcl={cl}\n\t\t\t\t\t\tname={title}\n\t\t\t\t\t\thideDefaultOptions={isQueued}\n\t\t\t\t\t/>\n\t\t\t\t))\n\t\t\t}\n\t\t/>\n\t);\n}\n\nfunction safeDateNotEqualCheck(a: Date | string | undefined, b: Date | string | undefined): boolean {\n\tif (!a || !b) {\n\t\treturn a !== b;\n\t}\n\treturn new Date(a).toISOString() !== new Date(b).toISOString();\n}\n\nconst keys: (keyof RoomListRowProps)[] = [\n\t'id',\n\t'style',\n\t'extended',\n\t'selected',\n\t'SideBarItemTemplate',\n\t'AvatarTemplate',\n\t't',\n\t'sidebarViewMode',\n\t'videoConfActions',\n];\n\n// eslint-disable-next-line react/no-multi-comp\nexport default memo(SideBarItemTemplateWithData, (prevProps, nextProps) => {\n\tif (keys.some((key) => prevProps[key] !== nextProps[key])) {\n\t\treturn false;\n\t}\n\n\tif (prevProps.room === nextProps.room) {\n\t\treturn true;\n\t}\n\n\tif (prevProps.room._id !== nextProps.room._id) {\n\t\treturn false;\n\t}\n\tif (prevProps.room._updatedAt?.toISOString() !== nextProps.room._updatedAt?.toISOString()) {\n\t\treturn false;\n\t}\n\tif (safeDateNotEqualCheck(prevProps.room.lastMessage?._updatedAt, nextProps.room.lastMessage?._updatedAt)) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.alert !== nextProps.room.alert) {\n\t\treturn false;\n\t}\n\tif (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && prevProps.room?.v?.status !== nextProps.room?.v?.status) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.teamMain !== nextProps.room.teamMain) {\n\t\treturn false;\n\t}\n\n\tif (\n\t\tisOmnichannelRoom(prevProps.room) &&\n\t\tisOmnichannelRoom(nextProps.room) &&\n\t\tprevProps.room.priorityWeight !== nextProps.room.priorityWeight\n\t) {\n\t\treturn false;\n\t}\n\n\treturn true;\n});\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"production","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebar/RoomList/SideBarItemTemplateWithData.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/sidebar/RoomList/SideBarItemTemplateWithData.tsx","inputSourceMap":{"version":3,"file":"client/sidebar/RoomList/SideBarItemTemplateWithData.tsx","sourceRoot":"","sources":["client/sidebar/RoomList/SideBarItemTemplateWithData.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, IRoom, ISubscription } from '@rocket.chat/core-typings';\nimport { isDirectMessageRoom, isMultipleDirectMessageRoom, isOmnichannelRoom, isVideoConfMessage } from '@rocket.chat/core-typings';\nimport { Badge, Sidebar, SidebarItemAction, SidebarItemActions, Margins } from '@rocket.chat/fuselage';\nimport { useLayout } from '@rocket.chat/ui-contexts';\nimport type { TFunction } from 'i18next';\nimport type { AllHTMLAttributes, ComponentType, ReactElement, ReactNode } from 'react';\nimport React, { memo, useMemo } from 'react';\n\nimport { RoomIcon } from '../../components/RoomIcon';\nimport { roomCoordinator } from '../../lib/rooms/roomCoordinator';\nimport { isIOsDevice } from '../../lib/utils/isIOsDevice';\nimport { useOmnichannelPriorities } from '../../omnichannel/hooks/useOmnichannelPriorities';\nimport RoomMenu from '../RoomMenu';\nimport { OmnichannelBadges } from '../badges/OmnichannelBadges';\nimport type { useAvatarTemplate } from '../hooks/useAvatarTemplate';\nimport { normalizeSidebarMessage } from './normalizeSidebarMessage';\n\nconst getMessage = (room: IRoom, lastMessage: IMessage | undefined, t: TFunction): string | undefined => {\n\tif (!lastMessage) {\n\t\treturn t('No_messages_yet');\n\t}\n\tif (isVideoConfMessage(lastMessage)) {\n\t\treturn t('Call_started');\n\t}\n\tif (!lastMessage.u) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\tif (lastMessage.u?.username === room.u?.username) {\n\t\treturn `${t('You')}: ${normalizeSidebarMessage(lastMessage, t)}`;\n\t}\n\tif (isDirectMessageRoom(room) && !isMultipleDirectMessageRoom(room)) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\treturn `${lastMessage.u.name || lastMessage.u.username}: ${normalizeSidebarMessage(lastMessage, t)}`;\n};\n\nconst getBadgeTitle = (userMentions: number, threadUnread: number, groupMentions: number, unread: number, t: TFunction) => {\n\tconst title = [] as string[];\n\tif (userMentions) {\n\t\ttitle.push(t('mentions_counter', { count: userMentions }));\n\t}\n\tif (threadUnread) {\n\t\ttitle.push(t('threads_counter', { count: threadUnread }));\n\t}\n\tif (groupMentions) {\n\t\ttitle.push(t('group_mentions_counter', { count: groupMentions }));\n\t}\n\tconst count = unread - userMentions - groupMentions;\n\tif (count > 0) {\n\t\ttitle.push(t('unread_messages_counter', { count }));\n\t}\n\treturn title.join(', ');\n};\n\ntype RoomListRowProps = {\n\textended: boolean;\n\tt: TFunction;\n\tSideBarItemTemplate: ComponentType<\n\t\t{\n\t\t\ticon: ReactNode;\n\t\t\ttitle: ReactNode;\n\t\t\tavatar: ReactNode;\n\t\t\tactions: unknown;\n\t\t\thref: string;\n\t\t\ttime?: Date;\n\t\t\tmenu?: ReactNode;\n\t\t\tmenuOptions?: unknown;\n\t\t\tsubtitle?: ReactNode;\n\t\t\ttitleIcon?: string;\n\t\t\tbadges?: ReactNode;\n\t\t\tthreadUnread?: boolean;\n\t\t\tunread?: boolean;\n\t\t\tselected?: boolean;\n\t\t\tis?: string;\n\t\t} & AllHTMLAttributes<HTMLElement>\n\t>;\n\tAvatarTemplate: ReturnType<typeof useAvatarTemplate>;\n\topenedRoom?: string;\n\t// sidebarViewMode: 'extended';\n\tisAnonymous?: boolean;\n\n\troom: ISubscription & IRoom;\n\tid?: string;\n\t/* @deprecated */\n\tstyle?: AllHTMLAttributes<HTMLElement>['style'];\n\n\tselected?: boolean;\n\n\tsidebarViewMode?: unknown;\n\tvideoConfActions?: {\n\t\t[action: string]: () => void;\n\t};\n};\n\nfunction SideBarItemTemplateWithData({\n\troom,\n\tid,\n\tselected,\n\tstyle,\n\textended,\n\tSideBarItemTemplate,\n\tAvatarTemplate,\n\tt,\n\tisAnonymous,\n\tvideoConfActions,\n}: RoomListRowProps): ReactElement {\n\tconst { sidebar } = useLayout();\n\n\tconst href = roomCoordinator.getRouteLink(room.t, room) || '';\n\tconst title = roomCoordinator.getRoomName(room.t, room) || '';\n\n\tconst {\n\t\tlastMessage,\n\t\thideUnreadStatus,\n\t\thideMentionStatus,\n\t\tunread = 0,\n\t\talert,\n\t\tuserMentions,\n\t\tgroupMentions,\n\t\ttunread = [],\n\t\ttunreadUser = [],\n\t\trid,\n\t\tt: type,\n\t\tcl,\n\t} = room;\n\n\tconst highlighted = Boolean(!hideUnreadStatus && (alert || unread));\n\tconst icon = (\n\t\t// TODO: Remove icon='at'\n\t\t<Sidebar.Item.Icon highlighted={highlighted} icon='at'>\n\t\t\t<RoomIcon room={room} placement='sidebar' isIncomingCall={Boolean(videoConfActions)} />\n\t\t</Sidebar.Item.Icon>\n\t);\n\n\tconst actions = useMemo(\n\t\t() =>\n\t\t\tvideoConfActions && (\n\t\t\t\t<SidebarItemActions>\n\t\t\t\t\t<SidebarItemAction onClick={videoConfActions.acceptCall} secondary success icon='phone' />\n\t\t\t\t\t<SidebarItemAction onClick={videoConfActions.rejectCall} secondary danger icon='phone-off' />\n\t\t\t\t</SidebarItemActions>\n\t\t\t),\n\t\t[videoConfActions],\n\t);\n\n\tconst isQueued = isOmnichannelRoom(room) && room.status === 'queued';\n\tconst { enabled: isPriorityEnabled } = useOmnichannelPriorities();\n\n\tconst message = extended && getMessage(room, lastMessage, t);\n\tconst subtitle = message ? <span className='message-body--unstyled' dangerouslySetInnerHTML={{ __html: message }} /> : null;\n\n\tconst threadUnread = tunread.length > 0;\n\tconst variant =\n\t\t((userMentions || tunreadUser.length) && 'danger') || (threadUnread && 'primary') || (groupMentions && 'warning') || 'secondary';\n\n\tconst isUnread = unread > 0 || threadUnread;\n\tconst showBadge = !hideUnreadStatus || (!hideMentionStatus && (Boolean(userMentions) || tunreadUser.length > 0));\n\n\tconst badgeTitle = getBadgeTitle(userMentions, tunread.length, groupMentions, unread, t);\n\n\tconst badges = (\n\t\t<Margins inlineStart={8}>\n\t\t\t{showBadge && isUnread && (\n\t\t\t\t<Badge role='status' {...({ style: { display: 'inline-flex', flexShrink: 0 } } as any)} variant={variant} title={badgeTitle}>\n\t\t\t\t\t{unread + tunread?.length}\n\t\t\t\t</Badge>\n\t\t\t)}\n\t\t\t{isOmnichannelRoom(room) && <OmnichannelBadges room={room} />}\n\t\t</Margins>\n\t);\n\n\treturn (\n\t\t<SideBarItemTemplate\n\t\t\tis='a'\n\t\t\tid={id}\n\t\t\tdata-qa='sidebar-item'\n\t\t\tdata-unread={highlighted}\n\t\t\tunread={highlighted}\n\t\t\tselected={selected}\n\t\t\thref={href}\n\t\t\tonClick={(): void => {\n\t\t\t\t!selected && sidebar.toggle();\n\t\t\t}}\n\t\t\taria-label={title}\n\t\t\ttitle={title}\n\t\t\ttime={lastMessage?.ts}\n\t\t\tsubtitle={subtitle}\n\t\t\ticon={icon}\n\t\t\tstyle={style}\n\t\t\tbadges={badges}\n\t\t\tavatar={AvatarTemplate && <AvatarTemplate {...room} />}\n\t\t\tactions={actions}\n\t\t\tmenu={\n\t\t\t\t!isIOsDevice &&\n\t\t\t\t!isAnonymous &&\n\t\t\t\t(!isQueued || (isQueued && isPriorityEnabled)) &&\n\t\t\t\t((): ReactElement => (\n\t\t\t\t\t<RoomMenu\n\t\t\t\t\t\talert={alert}\n\t\t\t\t\t\tthreadUnread={threadUnread}\n\t\t\t\t\t\trid={rid}\n\t\t\t\t\t\tunread={!!unread}\n\t\t\t\t\t\troomOpen={selected}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tcl={cl}\n\t\t\t\t\t\tname={title}\n\t\t\t\t\t\thideDefaultOptions={isQueued}\n\t\t\t\t\t/>\n\t\t\t\t))\n\t\t\t}\n\t\t/>\n\t);\n}\n\nfunction safeDateNotEqualCheck(a: Date | string | undefined, b: Date | string | undefined): boolean {\n\tif (!a || !b) {\n\t\treturn a !== b;\n\t}\n\treturn new Date(a).toISOString() !== new Date(b).toISOString();\n}\n\nconst keys: (keyof RoomListRowProps)[] = [\n\t'id',\n\t'style',\n\t'extended',\n\t'selected',\n\t'SideBarItemTemplate',\n\t'AvatarTemplate',\n\t't',\n\t'sidebarViewMode',\n\t'videoConfActions',\n];\n\n// eslint-disable-next-line react/no-multi-comp\nexport default memo(SideBarItemTemplateWithData, (prevProps, nextProps) => {\n\tif (keys.some((key) => prevProps[key] !== nextProps[key])) {\n\t\treturn false;\n\t}\n\n\tif (prevProps.room === nextProps.room) {\n\t\treturn true;\n\t}\n\n\tif (prevProps.room._id !== nextProps.room._id) {\n\t\treturn false;\n\t}\n\tif (prevProps.room._updatedAt?.toISOString() !== nextProps.room._updatedAt?.toISOString()) {\n\t\treturn false;\n\t}\n\tif (safeDateNotEqualCheck(prevProps.room.lastMessage?._updatedAt, nextProps.room.lastMessage?._updatedAt)) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.alert !== nextProps.room.alert) {\n\t\treturn false;\n\t}\n\tif (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && prevProps.room?.v?.status !== nextProps.room?.v?.status) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.teamMain !== nextProps.room.teamMain) {\n\t\treturn false;\n\t}\n\n\tif (\n\t\tisOmnichannelRoom(prevProps.room) &&\n\t\tisOmnichannelRoom(nextProps.room) &&\n\t\tprevProps.room.priorityWeight !== nextProps.room.priorityWeight\n\t) {\n\t\treturn false;\n\t}\n\n\treturn true;\n});\n"]}}},"code":"var isDirectMessageRoom, isMultipleDirectMessageRoom, isOmnichannelRoom, isVideoConfMessage;\nmodule.link(\"@rocket.chat/core-typings\", {\n  isDirectMessageRoom: function (v) {\n    isDirectMessageRoom = v;\n  },\n  isMultipleDirectMessageRoom: function (v) {\n    isMultipleDirectMessageRoom = v;\n  },\n  isOmnichannelRoom: function (v) {\n    isOmnichannelRoom = v;\n  },\n  isVideoConfMessage: function (v) {\n    isVideoConfMessage = v;\n  }\n}, 0);\nvar Badge, Sidebar, SidebarItemAction, SidebarItemActions, Margins;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Badge: function (v) {\n    Badge = v;\n  },\n  Sidebar: function (v) {\n    Sidebar = v;\n  },\n  SidebarItemAction: function (v) {\n    SidebarItemAction = v;\n  },\n  SidebarItemActions: function (v) {\n    SidebarItemActions = v;\n  },\n  Margins: function (v) {\n    Margins = v;\n  }\n}, 1);\nvar useLayout;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useLayout: function (v) {\n    useLayout = v;\n  }\n}, 2);\nvar React, memo, useMemo;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  memo: function (v) {\n    memo = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  }\n}, 3);\nvar RoomIcon;\nmodule.link(\"../../components/RoomIcon\", {\n  RoomIcon: function (v) {\n    RoomIcon = v;\n  }\n}, 4);\nvar roomCoordinator;\nmodule.link(\"../../lib/rooms/roomCoordinator\", {\n  roomCoordinator: function (v) {\n    roomCoordinator = v;\n  }\n}, 5);\nvar isIOsDevice;\nmodule.link(\"../../lib/utils/isIOsDevice\", {\n  isIOsDevice: function (v) {\n    isIOsDevice = v;\n  }\n}, 6);\nvar useOmnichannelPriorities;\nmodule.link(\"../../omnichannel/hooks/useOmnichannelPriorities\", {\n  useOmnichannelPriorities: function (v) {\n    useOmnichannelPriorities = v;\n  }\n}, 7);\nvar RoomMenu;\nmodule.link(\"../RoomMenu\", {\n  \"default\": function (v) {\n    RoomMenu = v;\n  }\n}, 8);\nvar OmnichannelBadges;\nmodule.link(\"../badges/OmnichannelBadges\", {\n  OmnichannelBadges: function (v) {\n    OmnichannelBadges = v;\n  }\n}, 9);\nvar normalizeSidebarMessage;\nmodule.link(\"./normalizeSidebarMessage\", {\n  normalizeSidebarMessage: function (v) {\n    normalizeSidebarMessage = v;\n  }\n}, 10);\nvar getMessage = function (room, lastMessage, t) {\n  var _lastMessage$u, _room$u;\n  if (!lastMessage) {\n    return t('No_messages_yet');\n  }\n  if (isVideoConfMessage(lastMessage)) {\n    return t('Call_started');\n  }\n  if (!lastMessage.u) {\n    return normalizeSidebarMessage(lastMessage, t);\n  }\n  if (((_lastMessage$u = lastMessage.u) === null || _lastMessage$u === void 0 ? void 0 : _lastMessage$u.username) === ((_room$u = room.u) === null || _room$u === void 0 ? void 0 : _room$u.username)) {\n    return t('You') + \": \" + normalizeSidebarMessage(lastMessage, t);\n  }\n  if (isDirectMessageRoom(room) && !isMultipleDirectMessageRoom(room)) {\n    return normalizeSidebarMessage(lastMessage, t);\n  }\n  return (lastMessage.u.name || lastMessage.u.username) + \": \" + normalizeSidebarMessage(lastMessage, t);\n};\nvar getBadgeTitle = function (userMentions, threadUnread, groupMentions, unread, t) {\n  var title = [];\n  if (userMentions) {\n    title.push(t('mentions_counter', {\n      count: userMentions\n    }));\n  }\n  if (threadUnread) {\n    title.push(t('threads_counter', {\n      count: threadUnread\n    }));\n  }\n  if (groupMentions) {\n    title.push(t('group_mentions_counter', {\n      count: groupMentions\n    }));\n  }\n  var count = unread - userMentions - groupMentions;\n  if (count > 0) {\n    title.push(t('unread_messages_counter', {\n      count: count\n    }));\n  }\n  return title.join(', ');\n};\nfunction SideBarItemTemplateWithData(_ref) {\n  var room = _ref.room,\n    id = _ref.id,\n    selected = _ref.selected,\n    style = _ref.style,\n    extended = _ref.extended,\n    SideBarItemTemplate = _ref.SideBarItemTemplate,\n    AvatarTemplate = _ref.AvatarTemplate,\n    t = _ref.t,\n    isAnonymous = _ref.isAnonymous,\n    videoConfActions = _ref.videoConfActions;\n  var _useLayout = useLayout(),\n    sidebar = _useLayout.sidebar;\n  var href = roomCoordinator.getRouteLink(room.t, room) || '';\n  var title = roomCoordinator.getRoomName(room.t, room) || '';\n  var lastMessage = room.lastMessage,\n    hideUnreadStatus = room.hideUnreadStatus,\n    hideMentionStatus = room.hideMentionStatus,\n    _room$unread = room.unread,\n    unread = _room$unread === void 0 ? 0 : _room$unread,\n    alert = room.alert,\n    userMentions = room.userMentions,\n    groupMentions = room.groupMentions,\n    _room$tunread = room.tunread,\n    tunread = _room$tunread === void 0 ? [] : _room$tunread,\n    _room$tunreadUser = room.tunreadUser,\n    tunreadUser = _room$tunreadUser === void 0 ? [] : _room$tunreadUser,\n    rid = room.rid,\n    type = room.t,\n    cl = room.cl;\n  var highlighted = Boolean(!hideUnreadStatus && (alert || unread));\n  var icon =\n  /*#__PURE__*/\n  // TODO: Remove icon='at'\n  React.createElement(Sidebar.Item.Icon, {\n    highlighted: highlighted,\n    icon: \"at\"\n  }, /*#__PURE__*/React.createElement(RoomIcon, {\n    room: room,\n    placement: \"sidebar\",\n    isIncomingCall: Boolean(videoConfActions)\n  }));\n  var actions = useMemo(function () {\n    return videoConfActions && /*#__PURE__*/React.createElement(SidebarItemActions, null, /*#__PURE__*/React.createElement(SidebarItemAction, {\n      onClick: videoConfActions.acceptCall,\n      secondary: true,\n      success: true,\n      icon: \"phone\"\n    }), /*#__PURE__*/React.createElement(SidebarItemAction, {\n      onClick: videoConfActions.rejectCall,\n      secondary: true,\n      danger: true,\n      icon: \"phone-off\"\n    }));\n  }, [videoConfActions]);\n  var isQueued = isOmnichannelRoom(room) && room.status === 'queued';\n  var _useOmnichannelPriori = useOmnichannelPriorities(),\n    isPriorityEnabled = _useOmnichannelPriori.enabled;\n  var message = extended && getMessage(room, lastMessage, t);\n  var subtitle = message ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"message-body--unstyled\",\n    dangerouslySetInnerHTML: {\n      __html: message\n    }\n  }) : null;\n  var threadUnread = tunread.length > 0;\n  var variant = (userMentions || tunreadUser.length) && 'danger' || threadUnread && 'primary' || groupMentions && 'warning' || 'secondary';\n  var isUnread = unread > 0 || threadUnread;\n  var showBadge = !hideUnreadStatus || !hideMentionStatus && (Boolean(userMentions) || tunreadUser.length > 0);\n  var badgeTitle = getBadgeTitle(userMentions, tunread.length, groupMentions, unread, t);\n  var badges = /*#__PURE__*/React.createElement(Margins, {\n    inlineStart: 8\n  }, showBadge && isUnread && /*#__PURE__*/React.createElement(Badge, {\n    role: \"status\",\n    style: {\n      display: 'inline-flex',\n      flexShrink: 0\n    },\n    variant: variant,\n    title: badgeTitle\n  }, unread + (tunread === null || tunread === void 0 ? void 0 : tunread.length)), isOmnichannelRoom(room) && /*#__PURE__*/React.createElement(OmnichannelBadges, {\n    room: room\n  }));\n  return /*#__PURE__*/React.createElement(SideBarItemTemplate, {\n    is: \"a\",\n    id: id,\n    \"data-qa\": \"sidebar-item\",\n    \"data-unread\": highlighted,\n    unread: highlighted,\n    selected: selected,\n    href: href,\n    onClick: function () {\n      !selected && sidebar.toggle();\n    },\n    \"aria-label\": title,\n    title: title,\n    time: lastMessage === null || lastMessage === void 0 ? void 0 : lastMessage.ts,\n    subtitle: subtitle,\n    icon: icon,\n    style: style,\n    badges: badges,\n    avatar: AvatarTemplate && /*#__PURE__*/React.createElement(AvatarTemplate, room),\n    actions: actions,\n    menu: !isIOsDevice && !isAnonymous && (!isQueued || isQueued && isPriorityEnabled) && function () {\n      return /*#__PURE__*/React.createElement(RoomMenu, {\n        alert: alert,\n        threadUnread: threadUnread,\n        rid: rid,\n        unread: !!unread,\n        roomOpen: selected,\n        type: type,\n        cl: cl,\n        name: title,\n        hideDefaultOptions: isQueued\n      });\n    }\n  });\n}\nfunction safeDateNotEqualCheck(a, b) {\n  if (!a || !b) {\n    return a !== b;\n  }\n  return new Date(a).toISOString() !== new Date(b).toISOString();\n}\nvar keys = ['id', 'style', 'extended', 'selected', 'SideBarItemTemplate', 'AvatarTemplate', 't', 'sidebarViewMode', 'videoConfActions'];\n// eslint-disable-next-line react/no-multi-comp\nmodule.exportDefault( /*#__PURE__*/memo(SideBarItemTemplateWithData, function (prevProps, nextProps) {\n  var _prevProps$room$_upda, _nextProps$room$_upda, _prevProps$room$lastM, _nextProps$room$lastM, _prevProps$room, _prevProps$room$v, _nextProps$room, _nextProps$room$v;\n  if (keys.some(function (key) {\n    return prevProps[key] !== nextProps[key];\n  })) {\n    return false;\n  }\n  if (prevProps.room === nextProps.room) {\n    return true;\n  }\n  if (prevProps.room._id !== nextProps.room._id) {\n    return false;\n  }\n  if (((_prevProps$room$_upda = prevProps.room._updatedAt) === null || _prevProps$room$_upda === void 0 ? void 0 : _prevProps$room$_upda.toISOString()) !== ((_nextProps$room$_upda = nextProps.room._updatedAt) === null || _nextProps$room$_upda === void 0 ? void 0 : _nextProps$room$_upda.toISOString())) {\n    return false;\n  }\n  if (safeDateNotEqualCheck((_prevProps$room$lastM = prevProps.room.lastMessage) === null || _prevProps$room$lastM === void 0 ? void 0 : _prevProps$room$lastM._updatedAt, (_nextProps$room$lastM = nextProps.room.lastMessage) === null || _nextProps$room$lastM === void 0 ? void 0 : _nextProps$room$lastM._updatedAt)) {\n    return false;\n  }\n  if (prevProps.room.alert !== nextProps.room.alert) {\n    return false;\n  }\n  if (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && ((_prevProps$room = prevProps.room) === null || _prevProps$room === void 0 ? void 0 : (_prevProps$room$v = _prevProps$room.v) === null || _prevProps$room$v === void 0 ? void 0 : _prevProps$room$v.status) !== ((_nextProps$room = nextProps.room) === null || _nextProps$room === void 0 ? void 0 : (_nextProps$room$v = _nextProps$room.v) === null || _nextProps$room$v === void 0 ? void 0 : _nextProps$room$v.status)) {\n    return false;\n  }\n  if (prevProps.room.teamMain !== nextProps.room.teamMain) {\n    return false;\n  }\n  if (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && prevProps.room.priorityWeight !== nextProps.room.priorityWeight) {\n    return false;\n  }\n  return true;\n}));","map":{"version":3,"names":["isDirectMessageRoom","isMultipleDirectMessageRoom","isOmnichannelRoom","isVideoConfMessage","module","link","v","Badge","Sidebar","SidebarItemAction","SidebarItemActions","Margins","useLayout","React","memo","useMemo","default","RoomIcon","roomCoordinator","isIOsDevice","useOmnichannelPriorities","RoomMenu","OmnichannelBadges","normalizeSidebarMessage","getMessage","room","lastMessage","t","_lastMessage$u","_room$u","u","username","name","getBadgeTitle","userMentions","threadUnread","groupMentions","unread","title","push","count","join","SideBarItemTemplateWithData","_ref","id","selected","style","extended","SideBarItemTemplate","AvatarTemplate","isAnonymous","videoConfActions","_useLayout","sidebar","href","getRouteLink","getRoomName","hideUnreadStatus","hideMentionStatus","_room$unread","alert","_room$tunread","tunread","_room$tunreadUser","tunreadUser","rid","type","cl","highlighted","Boolean","icon","createElement","Item","Icon","placement","isIncomingCall","actions","onClick","acceptCall","secondary","success","rejectCall","danger","isQueued","status","_useOmnichannelPriori","isPriorityEnabled","enabled","message","subtitle","className","dangerouslySetInnerHTML","__html","length","variant","isUnread","showBadge","badgeTitle","badges","inlineStart","role","display","flexShrink","is","toggle","time","ts","avatar","menu","roomOpen","hideDefaultOptions","safeDateNotEqualCheck","a","b","Date","toISOString","keys","exportDefault","prevProps","nextProps","_prevProps$room$_upda","_nextProps$room$_upda","_prevProps$room$lastM","_nextProps$room$lastM","_prevProps$room","_prevProps$room$v","_nextProps$room","_nextProps$room$v","some","key","_id","_updatedAt","teamMain","priorityWeight"],"sources":["client/sidebar/RoomList/SideBarItemTemplateWithData.tsx"],"sourcesContent":["import type { IMessage, IRoom, ISubscription } from '@rocket.chat/core-typings';\nimport { isDirectMessageRoom, isMultipleDirectMessageRoom, isOmnichannelRoom, isVideoConfMessage } from '@rocket.chat/core-typings';\nimport { Badge, Sidebar, SidebarItemAction, SidebarItemActions, Margins } from '@rocket.chat/fuselage';\nimport { useLayout } from '@rocket.chat/ui-contexts';\nimport type { TFunction } from 'i18next';\nimport type { AllHTMLAttributes, ComponentType, ReactElement, ReactNode } from 'react';\nimport React, { memo, useMemo } from 'react';\n\nimport { RoomIcon } from '../../components/RoomIcon';\nimport { roomCoordinator } from '../../lib/rooms/roomCoordinator';\nimport { isIOsDevice } from '../../lib/utils/isIOsDevice';\nimport { useOmnichannelPriorities } from '../../omnichannel/hooks/useOmnichannelPriorities';\nimport RoomMenu from '../RoomMenu';\nimport { OmnichannelBadges } from '../badges/OmnichannelBadges';\nimport type { useAvatarTemplate } from '../hooks/useAvatarTemplate';\nimport { normalizeSidebarMessage } from './normalizeSidebarMessage';\n\nconst getMessage = (room: IRoom, lastMessage: IMessage | undefined, t: TFunction): string | undefined => {\n\tif (!lastMessage) {\n\t\treturn t('No_messages_yet');\n\t}\n\tif (isVideoConfMessage(lastMessage)) {\n\t\treturn t('Call_started');\n\t}\n\tif (!lastMessage.u) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\tif (lastMessage.u?.username === room.u?.username) {\n\t\treturn `${t('You')}: ${normalizeSidebarMessage(lastMessage, t)}`;\n\t}\n\tif (isDirectMessageRoom(room) && !isMultipleDirectMessageRoom(room)) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\treturn `${lastMessage.u.name || lastMessage.u.username}: ${normalizeSidebarMessage(lastMessage, t)}`;\n};\n\nconst getBadgeTitle = (userMentions: number, threadUnread: number, groupMentions: number, unread: number, t: TFunction) => {\n\tconst title = [] as string[];\n\tif (userMentions) {\n\t\ttitle.push(t('mentions_counter', { count: userMentions }));\n\t}\n\tif (threadUnread) {\n\t\ttitle.push(t('threads_counter', { count: threadUnread }));\n\t}\n\tif (groupMentions) {\n\t\ttitle.push(t('group_mentions_counter', { count: groupMentions }));\n\t}\n\tconst count = unread - userMentions - groupMentions;\n\tif (count > 0) {\n\t\ttitle.push(t('unread_messages_counter', { count }));\n\t}\n\treturn title.join(', ');\n};\n\ntype RoomListRowProps = {\n\textended: boolean;\n\tt: TFunction;\n\tSideBarItemTemplate: ComponentType<\n\t\t{\n\t\t\ticon: ReactNode;\n\t\t\ttitle: ReactNode;\n\t\t\tavatar: ReactNode;\n\t\t\tactions: unknown;\n\t\t\thref: string;\n\t\t\ttime?: Date;\n\t\t\tmenu?: ReactNode;\n\t\t\tmenuOptions?: unknown;\n\t\t\tsubtitle?: ReactNode;\n\t\t\ttitleIcon?: string;\n\t\t\tbadges?: ReactNode;\n\t\t\tthreadUnread?: boolean;\n\t\t\tunread?: boolean;\n\t\t\tselected?: boolean;\n\t\t\tis?: string;\n\t\t} & AllHTMLAttributes<HTMLElement>\n\t>;\n\tAvatarTemplate: ReturnType<typeof useAvatarTemplate>;\n\topenedRoom?: string;\n\t// sidebarViewMode: 'extended';\n\tisAnonymous?: boolean;\n\n\troom: ISubscription & IRoom;\n\tid?: string;\n\t/* @deprecated */\n\tstyle?: AllHTMLAttributes<HTMLElement>['style'];\n\n\tselected?: boolean;\n\n\tsidebarViewMode?: unknown;\n\tvideoConfActions?: {\n\t\t[action: string]: () => void;\n\t};\n};\n\nfunction SideBarItemTemplateWithData({\n\troom,\n\tid,\n\tselected,\n\tstyle,\n\textended,\n\tSideBarItemTemplate,\n\tAvatarTemplate,\n\tt,\n\tisAnonymous,\n\tvideoConfActions,\n}: RoomListRowProps): ReactElement {\n\tconst { sidebar } = useLayout();\n\n\tconst href = roomCoordinator.getRouteLink(room.t, room) || '';\n\tconst title = roomCoordinator.getRoomName(room.t, room) || '';\n\n\tconst {\n\t\tlastMessage,\n\t\thideUnreadStatus,\n\t\thideMentionStatus,\n\t\tunread = 0,\n\t\talert,\n\t\tuserMentions,\n\t\tgroupMentions,\n\t\ttunread = [],\n\t\ttunreadUser = [],\n\t\trid,\n\t\tt: type,\n\t\tcl,\n\t} = room;\n\n\tconst highlighted = Boolean(!hideUnreadStatus && (alert || unread));\n\tconst icon = (\n\t\t// TODO: Remove icon='at'\n\t\t<Sidebar.Item.Icon highlighted={highlighted} icon='at'>\n\t\t\t<RoomIcon room={room} placement='sidebar' isIncomingCall={Boolean(videoConfActions)} />\n\t\t</Sidebar.Item.Icon>\n\t);\n\n\tconst actions = useMemo(\n\t\t() =>\n\t\t\tvideoConfActions && (\n\t\t\t\t<SidebarItemActions>\n\t\t\t\t\t<SidebarItemAction onClick={videoConfActions.acceptCall} secondary success icon='phone' />\n\t\t\t\t\t<SidebarItemAction onClick={videoConfActions.rejectCall} secondary danger icon='phone-off' />\n\t\t\t\t</SidebarItemActions>\n\t\t\t),\n\t\t[videoConfActions],\n\t);\n\n\tconst isQueued = isOmnichannelRoom(room) && room.status === 'queued';\n\tconst { enabled: isPriorityEnabled } = useOmnichannelPriorities();\n\n\tconst message = extended && getMessage(room, lastMessage, t);\n\tconst subtitle = message ? <span className='message-body--unstyled' dangerouslySetInnerHTML={{ __html: message }} /> : null;\n\n\tconst threadUnread = tunread.length > 0;\n\tconst variant =\n\t\t((userMentions || tunreadUser.length) && 'danger') || (threadUnread && 'primary') || (groupMentions && 'warning') || 'secondary';\n\n\tconst isUnread = unread > 0 || threadUnread;\n\tconst showBadge = !hideUnreadStatus || (!hideMentionStatus && (Boolean(userMentions) || tunreadUser.length > 0));\n\n\tconst badgeTitle = getBadgeTitle(userMentions, tunread.length, groupMentions, unread, t);\n\n\tconst badges = (\n\t\t<Margins inlineStart={8}>\n\t\t\t{showBadge && isUnread && (\n\t\t\t\t<Badge role='status' {...({ style: { display: 'inline-flex', flexShrink: 0 } } as any)} variant={variant} title={badgeTitle}>\n\t\t\t\t\t{unread + tunread?.length}\n\t\t\t\t</Badge>\n\t\t\t)}\n\t\t\t{isOmnichannelRoom(room) && <OmnichannelBadges room={room} />}\n\t\t</Margins>\n\t);\n\n\treturn (\n\t\t<SideBarItemTemplate\n\t\t\tis='a'\n\t\t\tid={id}\n\t\t\tdata-qa='sidebar-item'\n\t\t\tdata-unread={highlighted}\n\t\t\tunread={highlighted}\n\t\t\tselected={selected}\n\t\t\thref={href}\n\t\t\tonClick={(): void => {\n\t\t\t\t!selected && sidebar.toggle();\n\t\t\t}}\n\t\t\taria-label={title}\n\t\t\ttitle={title}\n\t\t\ttime={lastMessage?.ts}\n\t\t\tsubtitle={subtitle}\n\t\t\ticon={icon}\n\t\t\tstyle={style}\n\t\t\tbadges={badges}\n\t\t\tavatar={AvatarTemplate && <AvatarTemplate {...room} />}\n\t\t\tactions={actions}\n\t\t\tmenu={\n\t\t\t\t!isIOsDevice &&\n\t\t\t\t!isAnonymous &&\n\t\t\t\t(!isQueued || (isQueued && isPriorityEnabled)) &&\n\t\t\t\t((): ReactElement => (\n\t\t\t\t\t<RoomMenu\n\t\t\t\t\t\talert={alert}\n\t\t\t\t\t\tthreadUnread={threadUnread}\n\t\t\t\t\t\trid={rid}\n\t\t\t\t\t\tunread={!!unread}\n\t\t\t\t\t\troomOpen={selected}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tcl={cl}\n\t\t\t\t\t\tname={title}\n\t\t\t\t\t\thideDefaultOptions={isQueued}\n\t\t\t\t\t/>\n\t\t\t\t))\n\t\t\t}\n\t\t/>\n\t);\n}\n\nfunction safeDateNotEqualCheck(a: Date | string | undefined, b: Date | string | undefined): boolean {\n\tif (!a || !b) {\n\t\treturn a !== b;\n\t}\n\treturn new Date(a).toISOString() !== new Date(b).toISOString();\n}\n\nconst keys: (keyof RoomListRowProps)[] = [\n\t'id',\n\t'style',\n\t'extended',\n\t'selected',\n\t'SideBarItemTemplate',\n\t'AvatarTemplate',\n\t't',\n\t'sidebarViewMode',\n\t'videoConfActions',\n];\n\n// eslint-disable-next-line react/no-multi-comp\nexport default memo(SideBarItemTemplateWithData, (prevProps, nextProps) => {\n\tif (keys.some((key) => prevProps[key] !== nextProps[key])) {\n\t\treturn false;\n\t}\n\n\tif (prevProps.room === nextProps.room) {\n\t\treturn true;\n\t}\n\n\tif (prevProps.room._id !== nextProps.room._id) {\n\t\treturn false;\n\t}\n\tif (prevProps.room._updatedAt?.toISOString() !== nextProps.room._updatedAt?.toISOString()) {\n\t\treturn false;\n\t}\n\tif (safeDateNotEqualCheck(prevProps.room.lastMessage?._updatedAt, nextProps.room.lastMessage?._updatedAt)) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.alert !== nextProps.room.alert) {\n\t\treturn false;\n\t}\n\tif (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && prevProps.room?.v?.status !== nextProps.room?.v?.status) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.teamMain !== nextProps.room.teamMain) {\n\t\treturn false;\n\t}\n\n\tif (\n\t\tisOmnichannelRoom(prevProps.room) &&\n\t\tisOmnichannelRoom(nextProps.room) &&\n\t\tprevProps.room.priorityWeight !== nextProps.room.priorityWeight\n\t) {\n\t\treturn false;\n\t}\n\n\treturn true;\n});\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"ff7746b42ff8d10910fca0aecc34550bca68b819"}
