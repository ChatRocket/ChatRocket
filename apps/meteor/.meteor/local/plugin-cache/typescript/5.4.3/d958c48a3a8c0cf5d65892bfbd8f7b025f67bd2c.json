{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebar/search/SearchList.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/sidebar/search/SearchList.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebar/search/SearchList.tsx","inputSourceMap":{"version":3,"file":"client/sidebar/search/SearchList.tsx","sourceRoot":"","sources":["client/sidebar/search/SearchList.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IRoom, ISubscription } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport { Sidebar, TextInput, Box, Icon } from '@rocket.chat/fuselage';\nimport { useMutableCallback, useDebouncedValue, useAutoFocus, useUniqueId, useMergedRefs } from '@rocket.chat/fuselage-hooks';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { useUserPreference, useUserSubscriptions, useSetting, useTranslation, useMethod } from '@rocket.chat/ui-contexts';\nimport type { UseQueryResult } from '@tanstack/react-query';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement, MutableRefObject, SetStateAction, Dispatch, FormEventHandler, Ref, MouseEventHandler } from 'react';\nimport React, { forwardRef, useState, useMemo, useEffect, useRef } from 'react';\nimport type { VirtuosoHandle } from 'react-virtuoso';\nimport { Virtuoso } from 'react-virtuoso';\nimport tinykeys from 'tinykeys';\n\nimport { VirtuosoScrollbars } from '../../components/CustomScrollbars';\nimport { getConfig } from '../../lib/utils/getConfig';\nimport { useAvatarTemplate } from '../hooks/useAvatarTemplate';\nimport { usePreventDefault } from '../hooks/usePreventDefault';\nimport { useTemplateByViewMode } from '../hooks/useTemplateByViewMode';\nimport Row from './Row';\n\nconst mobileCheck = function () {\n\tlet check = false;\n\t(function (a: string) {\n\t\tif (\n\t\t\t/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n\t\t\t\ta,\n\t\t\t) ||\n\t\t\t/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n\t\t\t\ta.substr(0, 4),\n\t\t\t)\n\t\t)\n\t\t\tcheck = true;\n\t})(navigator.userAgent || navigator.vendor || window.opera || '');\n\treturn check;\n};\n\ndeclare global {\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tinterface Window {\n\t\topera?: string;\n\t}\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tinterface Navigator {\n\t\tuserAgentData?: {\n\t\t\tmobile: boolean;\n\t\t};\n\t}\n}\n\nconst shortcut = ((): string => {\n\tif (navigator.userAgentData?.mobile || mobileCheck()) {\n\t\treturn '';\n\t}\n\tif (window.navigator.platform.toLowerCase().includes('mac')) {\n\t\treturn '(\\u2318+K)';\n\t}\n\treturn '(Ctrl+K)';\n})();\n\nconst LIMIT = parseInt(String(getConfig('Sidebar_Search_Spotlight_LIMIT', 20)));\n\nconst options = {\n\tsort: {\n\t\tlm: -1,\n\t\tname: 1,\n\t},\n\tlimit: LIMIT,\n} as const;\n\nconst useSearchItems = (filterText: string): UseQueryResult<(ISubscription & IRoom)[] | undefined, Error> => {\n\tconst [, mention, name] = useMemo(() => filterText.match(/(@|#)?(.*)/i) || [], [filterText]);\n\tconst query = useMemo(() => {\n\t\tconst filterRegex = new RegExp(escapeRegExp(name), 'i');\n\n\t\treturn {\n\t\t\t$or: [{ name: filterRegex }, { fname: filterRegex }],\n\t\t\t...(mention && {\n\t\t\t\tt: mention === '@' ? 'd' : { $ne: 'd' },\n\t\t\t}),\n\t\t};\n\t}, [name, mention]);\n\n\tconst localRooms = useUserSubscriptions(query, options);\n\n\tconst usernamesFromClient = [...localRooms?.map(({ t, name }) => (t === 'd' ? name : null))].filter(Boolean) as string[];\n\n\tconst searchForChannels = mention === '#';\n\tconst searchForDMs = mention === '@';\n\n\tconst type = useMemo(() => {\n\t\tif (searchForChannels) {\n\t\t\treturn { users: false, rooms: true, includeFederatedRooms: true };\n\t\t}\n\t\tif (searchForDMs) {\n\t\t\treturn { users: true, rooms: false };\n\t\t}\n\t\treturn { users: true, rooms: true, includeFederatedRooms: true };\n\t}, [searchForChannels, searchForDMs]);\n\n\tconst getSpotlight = useMethod('spotlight');\n\n\treturn useQuery(\n\t\t['sidebar/search/spotlight', name, usernamesFromClient, type, localRooms.map(({ _id, name }) => _id + name)],\n\t\tasync () => {\n\t\t\tif (localRooms.length === LIMIT) {\n\t\t\t\treturn localRooms;\n\t\t\t}\n\n\t\t\tconst spotlight = await getSpotlight(name, usernamesFromClient, type);\n\n\t\t\tconst filterUsersUnique = ({ _id }: { _id: string }, index: number, arr: { _id: string }[]): boolean =>\n\t\t\t\tindex === arr.findIndex((user) => _id === user._id);\n\n\t\t\tconst roomFilter = (room: { t: string; uids?: string[]; _id: string; name?: string }): boolean =>\n\t\t\t\t!localRooms.find(\n\t\t\t\t\t(item) =>\n\t\t\t\t\t\t(room.t === 'd' && room.uids && room.uids.length > 1 && room.uids?.includes(item._id)) ||\n\t\t\t\t\t\t[item.rid, item._id].includes(room._id),\n\t\t\t\t);\n\t\t\tconst usersFilter = (user: { _id: string }): boolean =>\n\t\t\t\t!localRooms.find((room) => room.t === 'd' && room.uids && room.uids?.length === 2 && room.uids.includes(user._id));\n\n\t\t\tconst userMap = (user: {\n\t\t\t\t_id: string;\n\t\t\t\tname: string;\n\t\t\t\tusername: string;\n\t\t\t\tavatarETag?: string;\n\t\t\t}): {\n\t\t\t\t_id: string;\n\t\t\t\tt: string;\n\t\t\t\tname: string;\n\t\t\t\tfname: string;\n\t\t\t\tavatarETag?: string;\n\t\t\t} => ({\n\t\t\t\t_id: user._id,\n\t\t\t\tt: 'd',\n\t\t\t\tname: user.username,\n\t\t\t\tfname: user.name,\n\t\t\t\tavatarETag: user.avatarETag,\n\t\t\t});\n\n\t\t\ttype resultsFromServerType = {\n\t\t\t\t_id: string;\n\t\t\t\tt: string;\n\t\t\t\tname: string;\n\t\t\t\tteamMain?: boolean;\n\t\t\t\tfname?: string;\n\t\t\t\tavatarETag?: string | undefined;\n\t\t\t\tuids?: string[] | undefined;\n\t\t\t}[];\n\n\t\t\tconst resultsFromServer: resultsFromServerType = [];\n\t\t\tresultsFromServer.push(...spotlight.users.filter(filterUsersUnique).filter(usersFilter).map(userMap));\n\t\t\tresultsFromServer.push(...spotlight.rooms.filter(roomFilter));\n\n\t\t\tconst exact = resultsFromServer?.filter((item) => [item.name, item.fname].includes(name));\n\t\t\treturn Array.from(new Set([...exact, ...localRooms, ...resultsFromServer]));\n\t\t},\n\t\t{\n\t\t\tstaleTime: 60_000,\n\t\t\tkeepPreviousData: true,\n\t\t\tplaceholderData: localRooms,\n\t\t},\n\t);\n};\n\nconst useInput = (initial: string): { value: string; onChange: FormEventHandler; setValue: Dispatch<SetStateAction<string>> } => {\n\tconst [value, setValue] = useState(initial);\n\tconst onChange = useMutableCallback((e) => {\n\t\tsetValue(e.currentTarget.value);\n\t});\n\treturn { value, onChange, setValue };\n};\n\nconst toggleSelectionState = (next: HTMLElement, current: HTMLElement | undefined, input: HTMLElement | undefined): void => {\n\tinput?.setAttribute('aria-activedescendant', next.id);\n\tnext.setAttribute('aria-selected', 'true');\n\tnext.classList.add('rcx-sidebar-item--selected');\n\tif (current) {\n\t\tcurrent.removeAttribute('aria-selected');\n\t\tcurrent.classList.remove('rcx-sidebar-item--selected');\n\t}\n};\n\n/**\n * @type import('react').ForwardRefExoticComponent<{ onClose: unknown } & import('react').RefAttributes<HTMLElement>>\n */\n\ntype SearchListProps = {\n\tonClose: () => void;\n};\n\nconst SearchList = forwardRef(function SearchList({ onClose }: SearchListProps, ref): ReactElement {\n\tconst listId = useUniqueId();\n\tconst t = useTranslation();\n\tconst { setValue: setFilterValue, ...filter } = useInput('');\n\n\tconst cursorRef = useRef<HTMLInputElement>(null);\n\tconst autofocus: Ref<HTMLInputElement> = useMergedRefs(useAutoFocus<HTMLInputElement>(), cursorRef);\n\n\tconst listRef = useRef<VirtuosoHandle>(null);\n\tconst boxRef = useRef<HTMLDivElement>(null);\n\n\tconst selectedElement: MutableRefObject<HTMLElement | null | undefined> = useRef(null);\n\tconst itemIndexRef = useRef(0);\n\n\tconst sidebarViewMode = useUserPreference('sidebarViewMode');\n\tconst useRealName = useSetting('UI_Use_Real_Name');\n\n\tconst sideBarItemTemplate = useTemplateByViewMode();\n\tconst avatarTemplate = useAvatarTemplate();\n\n\tconst extended = sidebarViewMode === 'extended';\n\n\tconst filterText = useDebouncedValue(filter.value, 100);\n\n\tconst placeholder = [t('Search'), shortcut].filter(Boolean).join(' ');\n\n\tconst { data: items = [], isLoading } = useSearchItems(filterText);\n\n\tconst itemData = useMemo(\n\t\t() => ({\n\t\t\titems,\n\t\t\tt,\n\t\t\tSideBarItemTemplate: sideBarItemTemplate,\n\t\t\tavatarTemplate,\n\t\t\tuseRealName,\n\t\t\textended,\n\t\t\tsidebarViewMode,\n\t\t}),\n\t\t[avatarTemplate, extended, items, useRealName, sideBarItemTemplate, sidebarViewMode, t],\n\t);\n\n\tconst changeSelection = useMutableCallback((dir) => {\n\t\tlet nextSelectedElement = null;\n\n\t\tif (dir === 'up') {\n\t\t\tconst potentialElement = selectedElement.current?.parentElement?.previousSibling as HTMLElement;\n\t\t\tif (potentialElement) {\n\t\t\t\tnextSelectedElement = potentialElement.querySelector('a');\n\t\t\t}\n\t\t} else {\n\t\t\tconst potentialElement = selectedElement.current?.parentElement?.nextSibling as HTMLElement;\n\t\t\tif (potentialElement) {\n\t\t\t\tnextSelectedElement = potentialElement.querySelector('a');\n\t\t\t}\n\t\t}\n\n\t\tif (nextSelectedElement) {\n\t\t\ttoggleSelectionState(nextSelectedElement, selectedElement.current || undefined, cursorRef?.current || undefined);\n\t\t\treturn nextSelectedElement;\n\t\t}\n\t\treturn selectedElement.current;\n\t});\n\n\tconst resetCursor = useMutableCallback(() => {\n\t\tsetTimeout(() => {\n\t\t\titemIndexRef.current = 0;\n\t\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\t\t\tselectedElement.current = boxRef.current?.querySelector('a.rcx-sidebar-item');\n\t\t\tif (selectedElement.current) {\n\t\t\t\ttoggleSelectionState(selectedElement.current, undefined, cursorRef?.current || undefined);\n\t\t\t}\n\t\t}, 0);\n\t});\n\n\tusePreventDefault(boxRef);\n\n\tuseEffect(() => {\n\t\tresetCursor();\n\t});\n\n\tuseEffect(() => {\n\t\tresetCursor();\n\t}, [filterText, resetCursor]);\n\n\tuseEffect(() => {\n\t\tif (!cursorRef?.current) {\n\t\t\treturn;\n\t\t}\n\t\treturn tinykeys(cursorRef?.current, {\n\t\t\tEscape: (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tsetFilterValue((value) => {\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t}\n\t\t\t\t\tresetCursor();\n\t\t\t\t\treturn '';\n\t\t\t\t});\n\t\t\t},\n\t\t\tTab: onClose,\n\t\t\tArrowUp: () => {\n\t\t\t\tconst currentElement = changeSelection('up');\n\t\t\t\titemIndexRef.current = Math.max(itemIndexRef.current - 1, 0);\n\t\t\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\t\t\t\tselectedElement.current = currentElement;\n\t\t\t},\n\t\t\tArrowDown: () => {\n\t\t\t\tconst currentElement = changeSelection('down');\n\t\t\t\titemIndexRef.current = Math.min(itemIndexRef.current + 1, items.length + 1);\n\t\t\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\t\t\t\tselectedElement.current = currentElement;\n\t\t\t},\n\t\t\tEnter: (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (selectedElement.current && items.length > 0) {\n\t\t\t\t\tselectedElement.current.click();\n\t\t\t\t} else {\n\t\t\t\t\tonClose();\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}, [cursorRef, changeSelection, items.length, onClose, resetCursor, setFilterValue]);\n\n\tconst handleClick: MouseEventHandler<HTMLElement> = (e): void => {\n\t\tif (e.target instanceof Element && [e.target.tagName, e.target.parentElement?.tagName].includes('BUTTON')) {\n\t\t\treturn;\n\t\t}\n\t\treturn onClose();\n\t};\n\n\treturn (\n\t\t<Box\n\t\t\tposition='absolute'\n\t\t\trcx-sidebar\n\t\t\th='full'\n\t\t\tdisplay='flex'\n\t\t\tflexDirection='column'\n\t\t\tzIndex={99}\n\t\t\tw='full'\n\t\t\tclassName={css`\n\t\t\t\tleft: 0;\n\t\t\t\ttop: 0;\n\t\t\t`}\n\t\t\tref={ref}\n\t\t\trole='search'\n\t\t>\n\t\t\t<Sidebar.TopBar.Section {...({ flexShrink: 0 } as any)} is='form'>\n\t\t\t\t<Box mb='x12' w='full'>\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\taria-owns={listId}\n\t\t\t\t\t\tdata-qa='sidebar-search-input'\n\t\t\t\t\t\tref={autofocus}\n\t\t\t\t\t\t{...filter}\n\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\trole='searchbox'\n\t\t\t\t\t\taddon={<Icon name='cross' size='x20' onClick={onClose} />}\n\t\t\t\t\t/>\n\t\t\t\t</Box>\n\t\t\t</Sidebar.TopBar.Section>\n\t\t\t<Box\n\t\t\t\tref={boxRef}\n\t\t\t\trole='listbox'\n\t\t\t\tid={listId}\n\t\t\t\ttabIndex={-1}\n\t\t\t\tflexShrink={1}\n\t\t\t\th='full'\n\t\t\t\tw='full'\n\t\t\t\tdata-qa='sidebar-search-result'\n\t\t\t\taria-live='polite'\n\t\t\t\taria-atomic='true'\n\t\t\t\taria-busy={isLoading}\n\t\t\t\tonClick={handleClick}\n\t\t\t>\n\t\t\t\t<Virtuoso\n\t\t\t\t\tstyle={{ height: '100%', width: '100%' }}\n\t\t\t\t\ttotalCount={items.length}\n\t\t\t\t\tdata={items}\n\t\t\t\t\tcomponents={{ Scroller: VirtuosoScrollbars }}\n\t\t\t\t\tcomputeItemKey={(_, room) => room._id}\n\t\t\t\t\titemContent={(_, data): ReactElement => <Row data={itemData} item={data} />}\n\t\t\t\t\tref={listRef}\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n});\n\nexport default SearchList;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebar/search/SearchList.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/sidebar/search/SearchList.tsx","inputSourceMap":{"version":3,"file":"client/sidebar/search/SearchList.tsx","sourceRoot":"","sources":["client/sidebar/search/SearchList.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IRoom, ISubscription } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport { Sidebar, TextInput, Box, Icon } from '@rocket.chat/fuselage';\nimport { useMutableCallback, useDebouncedValue, useAutoFocus, useUniqueId, useMergedRefs } from '@rocket.chat/fuselage-hooks';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { useUserPreference, useUserSubscriptions, useSetting, useTranslation, useMethod } from '@rocket.chat/ui-contexts';\nimport type { UseQueryResult } from '@tanstack/react-query';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement, MutableRefObject, SetStateAction, Dispatch, FormEventHandler, Ref, MouseEventHandler } from 'react';\nimport React, { forwardRef, useState, useMemo, useEffect, useRef } from 'react';\nimport type { VirtuosoHandle } from 'react-virtuoso';\nimport { Virtuoso } from 'react-virtuoso';\nimport tinykeys from 'tinykeys';\n\nimport { VirtuosoScrollbars } from '../../components/CustomScrollbars';\nimport { getConfig } from '../../lib/utils/getConfig';\nimport { useAvatarTemplate } from '../hooks/useAvatarTemplate';\nimport { usePreventDefault } from '../hooks/usePreventDefault';\nimport { useTemplateByViewMode } from '../hooks/useTemplateByViewMode';\nimport Row from './Row';\n\nconst mobileCheck = function () {\n\tlet check = false;\n\t(function (a: string) {\n\t\tif (\n\t\t\t/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n\t\t\t\ta,\n\t\t\t) ||\n\t\t\t/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n\t\t\t\ta.substr(0, 4),\n\t\t\t)\n\t\t)\n\t\t\tcheck = true;\n\t})(navigator.userAgent || navigator.vendor || window.opera || '');\n\treturn check;\n};\n\ndeclare global {\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tinterface Window {\n\t\topera?: string;\n\t}\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tinterface Navigator {\n\t\tuserAgentData?: {\n\t\t\tmobile: boolean;\n\t\t};\n\t}\n}\n\nconst shortcut = ((): string => {\n\tif (navigator.userAgentData?.mobile || mobileCheck()) {\n\t\treturn '';\n\t}\n\tif (window.navigator.platform.toLowerCase().includes('mac')) {\n\t\treturn '(\\u2318+K)';\n\t}\n\treturn '(Ctrl+K)';\n})();\n\nconst LIMIT = parseInt(String(getConfig('Sidebar_Search_Spotlight_LIMIT', 20)));\n\nconst options = {\n\tsort: {\n\t\tlm: -1,\n\t\tname: 1,\n\t},\n\tlimit: LIMIT,\n} as const;\n\nconst useSearchItems = (filterText: string): UseQueryResult<(ISubscription & IRoom)[] | undefined, Error> => {\n\tconst [, mention, name] = useMemo(() => filterText.match(/(@|#)?(.*)/i) || [], [filterText]);\n\tconst query = useMemo(() => {\n\t\tconst filterRegex = new RegExp(escapeRegExp(name), 'i');\n\n\t\treturn {\n\t\t\t$or: [{ name: filterRegex }, { fname: filterRegex }],\n\t\t\t...(mention && {\n\t\t\t\tt: mention === '@' ? 'd' : { $ne: 'd' },\n\t\t\t}),\n\t\t};\n\t}, [name, mention]);\n\n\tconst localRooms = useUserSubscriptions(query, options);\n\n\tconst usernamesFromClient = [...localRooms?.map(({ t, name }) => (t === 'd' ? name : null))].filter(Boolean) as string[];\n\n\tconst searchForChannels = mention === '#';\n\tconst searchForDMs = mention === '@';\n\n\tconst type = useMemo(() => {\n\t\tif (searchForChannels) {\n\t\t\treturn { users: false, rooms: true, includeFederatedRooms: true };\n\t\t}\n\t\tif (searchForDMs) {\n\t\t\treturn { users: true, rooms: false };\n\t\t}\n\t\treturn { users: true, rooms: true, includeFederatedRooms: true };\n\t}, [searchForChannels, searchForDMs]);\n\n\tconst getSpotlight = useMethod('spotlight');\n\n\treturn useQuery(\n\t\t['sidebar/search/spotlight', name, usernamesFromClient, type, localRooms.map(({ _id, name }) => _id + name)],\n\t\tasync () => {\n\t\t\tif (localRooms.length === LIMIT) {\n\t\t\t\treturn localRooms;\n\t\t\t}\n\n\t\t\tconst spotlight = await getSpotlight(name, usernamesFromClient, type);\n\n\t\t\tconst filterUsersUnique = ({ _id }: { _id: string }, index: number, arr: { _id: string }[]): boolean =>\n\t\t\t\tindex === arr.findIndex((user) => _id === user._id);\n\n\t\t\tconst roomFilter = (room: { t: string; uids?: string[]; _id: string; name?: string }): boolean =>\n\t\t\t\t!localRooms.find(\n\t\t\t\t\t(item) =>\n\t\t\t\t\t\t(room.t === 'd' && room.uids && room.uids.length > 1 && room.uids?.includes(item._id)) ||\n\t\t\t\t\t\t[item.rid, item._id].includes(room._id),\n\t\t\t\t);\n\t\t\tconst usersFilter = (user: { _id: string }): boolean =>\n\t\t\t\t!localRooms.find((room) => room.t === 'd' && room.uids && room.uids?.length === 2 && room.uids.includes(user._id));\n\n\t\t\tconst userMap = (user: {\n\t\t\t\t_id: string;\n\t\t\t\tname: string;\n\t\t\t\tusername: string;\n\t\t\t\tavatarETag?: string;\n\t\t\t}): {\n\t\t\t\t_id: string;\n\t\t\t\tt: string;\n\t\t\t\tname: string;\n\t\t\t\tfname: string;\n\t\t\t\tavatarETag?: string;\n\t\t\t} => ({\n\t\t\t\t_id: user._id,\n\t\t\t\tt: 'd',\n\t\t\t\tname: user.username,\n\t\t\t\tfname: user.name,\n\t\t\t\tavatarETag: user.avatarETag,\n\t\t\t});\n\n\t\t\ttype resultsFromServerType = {\n\t\t\t\t_id: string;\n\t\t\t\tt: string;\n\t\t\t\tname: string;\n\t\t\t\tteamMain?: boolean;\n\t\t\t\tfname?: string;\n\t\t\t\tavatarETag?: string | undefined;\n\t\t\t\tuids?: string[] | undefined;\n\t\t\t}[];\n\n\t\t\tconst resultsFromServer: resultsFromServerType = [];\n\t\t\tresultsFromServer.push(...spotlight.users.filter(filterUsersUnique).filter(usersFilter).map(userMap));\n\t\t\tresultsFromServer.push(...spotlight.rooms.filter(roomFilter));\n\n\t\t\tconst exact = resultsFromServer?.filter((item) => [item.name, item.fname].includes(name));\n\t\t\treturn Array.from(new Set([...exact, ...localRooms, ...resultsFromServer]));\n\t\t},\n\t\t{\n\t\t\tstaleTime: 60_000,\n\t\t\tkeepPreviousData: true,\n\t\t\tplaceholderData: localRooms,\n\t\t},\n\t);\n};\n\nconst useInput = (initial: string): { value: string; onChange: FormEventHandler; setValue: Dispatch<SetStateAction<string>> } => {\n\tconst [value, setValue] = useState(initial);\n\tconst onChange = useMutableCallback((e) => {\n\t\tsetValue(e.currentTarget.value);\n\t});\n\treturn { value, onChange, setValue };\n};\n\nconst toggleSelectionState = (next: HTMLElement, current: HTMLElement | undefined, input: HTMLElement | undefined): void => {\n\tinput?.setAttribute('aria-activedescendant', next.id);\n\tnext.setAttribute('aria-selected', 'true');\n\tnext.classList.add('rcx-sidebar-item--selected');\n\tif (current) {\n\t\tcurrent.removeAttribute('aria-selected');\n\t\tcurrent.classList.remove('rcx-sidebar-item--selected');\n\t}\n};\n\n/**\n * @type import('react').ForwardRefExoticComponent<{ onClose: unknown } & import('react').RefAttributes<HTMLElement>>\n */\n\ntype SearchListProps = {\n\tonClose: () => void;\n};\n\nconst SearchList = forwardRef(function SearchList({ onClose }: SearchListProps, ref): ReactElement {\n\tconst listId = useUniqueId();\n\tconst t = useTranslation();\n\tconst { setValue: setFilterValue, ...filter } = useInput('');\n\n\tconst cursorRef = useRef<HTMLInputElement>(null);\n\tconst autofocus: Ref<HTMLInputElement> = useMergedRefs(useAutoFocus<HTMLInputElement>(), cursorRef);\n\n\tconst listRef = useRef<VirtuosoHandle>(null);\n\tconst boxRef = useRef<HTMLDivElement>(null);\n\n\tconst selectedElement: MutableRefObject<HTMLElement | null | undefined> = useRef(null);\n\tconst itemIndexRef = useRef(0);\n\n\tconst sidebarViewMode = useUserPreference('sidebarViewMode');\n\tconst useRealName = useSetting('UI_Use_Real_Name');\n\n\tconst sideBarItemTemplate = useTemplateByViewMode();\n\tconst avatarTemplate = useAvatarTemplate();\n\n\tconst extended = sidebarViewMode === 'extended';\n\n\tconst filterText = useDebouncedValue(filter.value, 100);\n\n\tconst placeholder = [t('Search'), shortcut].filter(Boolean).join(' ');\n\n\tconst { data: items = [], isLoading } = useSearchItems(filterText);\n\n\tconst itemData = useMemo(\n\t\t() => ({\n\t\t\titems,\n\t\t\tt,\n\t\t\tSideBarItemTemplate: sideBarItemTemplate,\n\t\t\tavatarTemplate,\n\t\t\tuseRealName,\n\t\t\textended,\n\t\t\tsidebarViewMode,\n\t\t}),\n\t\t[avatarTemplate, extended, items, useRealName, sideBarItemTemplate, sidebarViewMode, t],\n\t);\n\n\tconst changeSelection = useMutableCallback((dir) => {\n\t\tlet nextSelectedElement = null;\n\n\t\tif (dir === 'up') {\n\t\t\tconst potentialElement = selectedElement.current?.parentElement?.previousSibling as HTMLElement;\n\t\t\tif (potentialElement) {\n\t\t\t\tnextSelectedElement = potentialElement.querySelector('a');\n\t\t\t}\n\t\t} else {\n\t\t\tconst potentialElement = selectedElement.current?.parentElement?.nextSibling as HTMLElement;\n\t\t\tif (potentialElement) {\n\t\t\t\tnextSelectedElement = potentialElement.querySelector('a');\n\t\t\t}\n\t\t}\n\n\t\tif (nextSelectedElement) {\n\t\t\ttoggleSelectionState(nextSelectedElement, selectedElement.current || undefined, cursorRef?.current || undefined);\n\t\t\treturn nextSelectedElement;\n\t\t}\n\t\treturn selectedElement.current;\n\t});\n\n\tconst resetCursor = useMutableCallback(() => {\n\t\tsetTimeout(() => {\n\t\t\titemIndexRef.current = 0;\n\t\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\t\t\tselectedElement.current = boxRef.current?.querySelector('a.rcx-sidebar-item');\n\t\t\tif (selectedElement.current) {\n\t\t\t\ttoggleSelectionState(selectedElement.current, undefined, cursorRef?.current || undefined);\n\t\t\t}\n\t\t}, 0);\n\t});\n\n\tusePreventDefault(boxRef);\n\n\tuseEffect(() => {\n\t\tresetCursor();\n\t});\n\n\tuseEffect(() => {\n\t\tresetCursor();\n\t}, [filterText, resetCursor]);\n\n\tuseEffect(() => {\n\t\tif (!cursorRef?.current) {\n\t\t\treturn;\n\t\t}\n\t\treturn tinykeys(cursorRef?.current, {\n\t\t\tEscape: (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tsetFilterValue((value) => {\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t}\n\t\t\t\t\tresetCursor();\n\t\t\t\t\treturn '';\n\t\t\t\t});\n\t\t\t},\n\t\t\tTab: onClose,\n\t\t\tArrowUp: () => {\n\t\t\t\tconst currentElement = changeSelection('up');\n\t\t\t\titemIndexRef.current = Math.max(itemIndexRef.current - 1, 0);\n\t\t\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\t\t\t\tselectedElement.current = currentElement;\n\t\t\t},\n\t\t\tArrowDown: () => {\n\t\t\t\tconst currentElement = changeSelection('down');\n\t\t\t\titemIndexRef.current = Math.min(itemIndexRef.current + 1, items.length + 1);\n\t\t\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\t\t\t\tselectedElement.current = currentElement;\n\t\t\t},\n\t\t\tEnter: (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (selectedElement.current && items.length > 0) {\n\t\t\t\t\tselectedElement.current.click();\n\t\t\t\t} else {\n\t\t\t\t\tonClose();\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}, [cursorRef, changeSelection, items.length, onClose, resetCursor, setFilterValue]);\n\n\tconst handleClick: MouseEventHandler<HTMLElement> = (e): void => {\n\t\tif (e.target instanceof Element && [e.target.tagName, e.target.parentElement?.tagName].includes('BUTTON')) {\n\t\t\treturn;\n\t\t}\n\t\treturn onClose();\n\t};\n\n\treturn (\n\t\t<Box\n\t\t\tposition='absolute'\n\t\t\trcx-sidebar\n\t\t\th='full'\n\t\t\tdisplay='flex'\n\t\t\tflexDirection='column'\n\t\t\tzIndex={99}\n\t\t\tw='full'\n\t\t\tclassName={css`\n\t\t\t\tleft: 0;\n\t\t\t\ttop: 0;\n\t\t\t`}\n\t\t\tref={ref}\n\t\t\trole='search'\n\t\t>\n\t\t\t<Sidebar.TopBar.Section {...({ flexShrink: 0 } as any)} is='form'>\n\t\t\t\t<Box mb='x12' w='full'>\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\taria-owns={listId}\n\t\t\t\t\t\tdata-qa='sidebar-search-input'\n\t\t\t\t\t\tref={autofocus}\n\t\t\t\t\t\t{...filter}\n\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\trole='searchbox'\n\t\t\t\t\t\taddon={<Icon name='cross' size='x20' onClick={onClose} />}\n\t\t\t\t\t/>\n\t\t\t\t</Box>\n\t\t\t</Sidebar.TopBar.Section>\n\t\t\t<Box\n\t\t\t\tref={boxRef}\n\t\t\t\trole='listbox'\n\t\t\t\tid={listId}\n\t\t\t\ttabIndex={-1}\n\t\t\t\tflexShrink={1}\n\t\t\t\th='full'\n\t\t\t\tw='full'\n\t\t\t\tdata-qa='sidebar-search-result'\n\t\t\t\taria-live='polite'\n\t\t\t\taria-atomic='true'\n\t\t\t\taria-busy={isLoading}\n\t\t\t\tonClick={handleClick}\n\t\t\t>\n\t\t\t\t<Virtuoso\n\t\t\t\t\tstyle={{ height: '100%', width: '100%' }}\n\t\t\t\t\ttotalCount={items.length}\n\t\t\t\t\tdata={items}\n\t\t\t\t\tcomponents={{ Scroller: VirtuosoScrollbars }}\n\t\t\t\t\tcomputeItemKey={(_, room) => room._id}\n\t\t\t\t\titemContent={(_, data): ReactElement => <Row data={itemData} item={data} />}\n\t\t\t\t\tref={listRef}\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n});\n\nexport default SearchList;\n"]}}},"code":"var _templateObject;\nvar _excluded = [\"setValue\"];\nvar _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 0);\nvar _taggedTemplateLiteralLoose;\nmodule.link(\"@babel/runtime/helpers/taggedTemplateLiteralLoose\", {\n  default: function (v) {\n    _taggedTemplateLiteralLoose = v;\n  }\n}, 1);\nvar _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 2);\nvar _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 3);\nvar _toConsumableArray;\nmodule.link(\"@babel/runtime/helpers/toConsumableArray\", {\n  default: function (v) {\n    _toConsumableArray = v;\n  }\n}, 4);\nvar _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 5);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 6);\nvar css;\nmodule.link(\"@rocket.chat/css-in-js\", {\n  css: function (v) {\n    css = v;\n  }\n}, 0);\nvar Sidebar, TextInput, Box, Icon;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Sidebar: function (v) {\n    Sidebar = v;\n  },\n  TextInput: function (v) {\n    TextInput = v;\n  },\n  Box: function (v) {\n    Box = v;\n  },\n  Icon: function (v) {\n    Icon = v;\n  }\n}, 1);\nvar useMutableCallback, useDebouncedValue, useAutoFocus, useUniqueId, useMergedRefs;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  },\n  useDebouncedValue: function (v) {\n    useDebouncedValue = v;\n  },\n  useAutoFocus: function (v) {\n    useAutoFocus = v;\n  },\n  useUniqueId: function (v) {\n    useUniqueId = v;\n  },\n  useMergedRefs: function (v) {\n    useMergedRefs = v;\n  }\n}, 2);\nvar escapeRegExp;\nmodule.link(\"@rocket.chat/string-helpers\", {\n  escapeRegExp: function (v) {\n    escapeRegExp = v;\n  }\n}, 3);\nvar useUserPreference, useUserSubscriptions, useSetting, useTranslation, useMethod;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useUserPreference: function (v) {\n    useUserPreference = v;\n  },\n  useUserSubscriptions: function (v) {\n    useUserSubscriptions = v;\n  },\n  useSetting: function (v) {\n    useSetting = v;\n  },\n  useTranslation: function (v) {\n    useTranslation = v;\n  },\n  useMethod: function (v) {\n    useMethod = v;\n  }\n}, 4);\nvar useQuery;\nmodule.link(\"@tanstack/react-query\", {\n  useQuery: function (v) {\n    useQuery = v;\n  }\n}, 5);\nvar React, forwardRef, useState, useMemo, useEffect, useRef;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  forwardRef: function (v) {\n    forwardRef = v;\n  },\n  useState: function (v) {\n    useState = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useEffect: function (v) {\n    useEffect = v;\n  },\n  useRef: function (v) {\n    useRef = v;\n  }\n}, 6);\nvar Virtuoso;\nmodule.link(\"react-virtuoso\", {\n  Virtuoso: function (v) {\n    Virtuoso = v;\n  }\n}, 7);\nvar tinykeys;\nmodule.link(\"tinykeys\", {\n  \"default\": function (v) {\n    tinykeys = v;\n  }\n}, 8);\nvar VirtuosoScrollbars;\nmodule.link(\"../../components/CustomScrollbars\", {\n  VirtuosoScrollbars: function (v) {\n    VirtuosoScrollbars = v;\n  }\n}, 9);\nvar getConfig;\nmodule.link(\"../../lib/utils/getConfig\", {\n  getConfig: function (v) {\n    getConfig = v;\n  }\n}, 10);\nvar useAvatarTemplate;\nmodule.link(\"../hooks/useAvatarTemplate\", {\n  useAvatarTemplate: function (v) {\n    useAvatarTemplate = v;\n  }\n}, 11);\nvar usePreventDefault;\nmodule.link(\"../hooks/usePreventDefault\", {\n  usePreventDefault: function (v) {\n    usePreventDefault = v;\n  }\n}, 12);\nvar useTemplateByViewMode;\nmodule.link(\"../hooks/useTemplateByViewMode\", {\n  useTemplateByViewMode: function (v) {\n    useTemplateByViewMode = v;\n  }\n}, 13);\nvar Row;\nmodule.link(\"./Row\", {\n  \"default\": function (v) {\n    Row = v;\n  }\n}, 14);\nvar mobileCheck = function () {\n  var check = false;\n  (function (a) {\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n  })(navigator.userAgent || navigator.vendor || window.opera || '');\n  return check;\n};\nvar shortcut = function (_navigator$userAgentD) {\n  if ((_navigator$userAgentD = navigator.userAgentData) !== null && _navigator$userAgentD !== void 0 && _navigator$userAgentD.mobile || mobileCheck()) {\n    return '';\n  }\n  if (window.navigator.platform.toLowerCase().includes('mac')) {\n    return \"(\\u2318+K)\";\n  }\n  return '(Ctrl+K)';\n}();\nvar LIMIT = parseInt(String(getConfig('Sidebar_Search_Spotlight_LIMIT', 20)));\nvar options = {\n  sort: {\n    lm: -1,\n    name: 1\n  },\n  limit: LIMIT\n};\nvar useSearchItems = function (filterText) {\n  var _useMemo = useMemo(function () {\n      return filterText.match(/(@|#)?(.*)/i) || [];\n    }, [filterText]),\n    _useMemo2 = _slicedToArray(_useMemo, 3),\n    mention = _useMemo2[1],\n    name = _useMemo2[2];\n  var query = useMemo(function () {\n    var filterRegex = new RegExp(escapeRegExp(name), 'i');\n    return _objectSpread({\n      $or: [{\n        name: filterRegex\n      }, {\n        fname: filterRegex\n      }]\n    }, mention && {\n      t: mention === '@' ? 'd' : {\n        $ne: 'd'\n      }\n    });\n  }, [name, mention]);\n  var localRooms = useUserSubscriptions(query, options);\n  var usernamesFromClient = _toConsumableArray(localRooms === null || localRooms === void 0 ? void 0 : localRooms.map(function (_ref) {\n    var t = _ref.t,\n      name = _ref.name;\n    return t === 'd' ? name : null;\n  })).filter(Boolean);\n  var searchForChannels = mention === '#';\n  var searchForDMs = mention === '@';\n  var type = useMemo(function () {\n    if (searchForChannels) {\n      return {\n        users: false,\n        rooms: true,\n        includeFederatedRooms: true\n      };\n    }\n    if (searchForDMs) {\n      return {\n        users: true,\n        rooms: false\n      };\n    }\n    return {\n      users: true,\n      rooms: true,\n      includeFederatedRooms: true\n    };\n  }, [searchForChannels, searchForDMs]);\n  var getSpotlight = useMethod('spotlight');\n  return useQuery(['sidebar/search/spotlight', name, usernamesFromClient, type, localRooms.map(function (_ref2) {\n    var _id = _ref2._id,\n      name = _ref2.name;\n    return _id + name;\n  })], function () {\n    function _callee() {\n      var spotlight, filterUsersUnique, roomFilter, usersFilter, userMap, resultsFromServer, exact;\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!(localRooms.length === LIMIT)) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\", localRooms);\n            case 2:\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(getSpotlight(name, usernamesFromClient, type));\n            case 4:\n              spotlight = _context.sent;\n              filterUsersUnique = function (_ref3, index, arr) {\n                var _id = _ref3._id;\n                return index === arr.findIndex(function (user) {\n                  return _id === user._id;\n                });\n              };\n              roomFilter = function (room) {\n                return !localRooms.find(function (item) {\n                  var _room$uids;\n                  return room.t === 'd' && room.uids && room.uids.length > 1 && ((_room$uids = room.uids) === null || _room$uids === void 0 ? void 0 : _room$uids.includes(item._id)) || [item.rid, item._id].includes(room._id);\n                });\n              };\n              usersFilter = function (user) {\n                return !localRooms.find(function (room) {\n                  var _room$uids2;\n                  return room.t === 'd' && room.uids && ((_room$uids2 = room.uids) === null || _room$uids2 === void 0 ? void 0 : _room$uids2.length) === 2 && room.uids.includes(user._id);\n                });\n              };\n              userMap = function (user) {\n                return {\n                  _id: user._id,\n                  t: 'd',\n                  name: user.username,\n                  fname: user.name,\n                  avatarETag: user.avatarETag\n                };\n              };\n              resultsFromServer = [];\n              resultsFromServer.push.apply(resultsFromServer, _toConsumableArray(spotlight.users.filter(filterUsersUnique).filter(usersFilter).map(userMap)));\n              resultsFromServer.push.apply(resultsFromServer, _toConsumableArray(spotlight.rooms.filter(roomFilter)));\n              exact = resultsFromServer === null || resultsFromServer === void 0 ? void 0 : resultsFromServer.filter(function (item) {\n                return [item.name, item.fname].includes(name);\n              });\n              return _context.abrupt(\"return\", Array.from(new Set([].concat(_toConsumableArray(exact), _toConsumableArray(localRooms), resultsFromServer))));\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n        return _callee$;\n      }(), null, null, null, Promise);\n    }\n    return _callee;\n  }(), {\n    staleTime: 60_000,\n    keepPreviousData: true,\n    placeholderData: localRooms\n  });\n};\nvar useInput = function (initial) {\n  var _useState = useState(initial),\n    _useState2 = _slicedToArray(_useState, 2),\n    value = _useState2[0],\n    setValue = _useState2[1];\n  var onChange = useMutableCallback(function (e) {\n    setValue(e.currentTarget.value);\n  });\n  return {\n    value: value,\n    onChange: onChange,\n    setValue: setValue\n  };\n};\nvar toggleSelectionState = function (next, current, input) {\n  input === null || input === void 0 ? void 0 : input.setAttribute('aria-activedescendant', next.id);\n  next.setAttribute('aria-selected', 'true');\n  next.classList.add('rcx-sidebar-item--selected');\n  if (current) {\n    current.removeAttribute('aria-selected');\n    current.classList.remove('rcx-sidebar-item--selected');\n  }\n};\nvar SearchList = /*#__PURE__*/forwardRef(function () {\n  function SearchList(_ref4, ref) {\n    var onClose = _ref4.onClose;\n    var listId = useUniqueId();\n    var t = useTranslation();\n    var _useInput = useInput(''),\n      setFilterValue = _useInput.setValue,\n      filter = _objectWithoutProperties(_useInput, _excluded);\n    var cursorRef = useRef(null);\n    var autofocus = useMergedRefs(useAutoFocus(), cursorRef);\n    var listRef = useRef(null);\n    var boxRef = useRef(null);\n    var selectedElement = useRef(null);\n    var itemIndexRef = useRef(0);\n    var sidebarViewMode = useUserPreference('sidebarViewMode');\n    var useRealName = useSetting('UI_Use_Real_Name');\n    var sideBarItemTemplate = useTemplateByViewMode();\n    var avatarTemplate = useAvatarTemplate();\n    var extended = sidebarViewMode === 'extended';\n    var filterText = useDebouncedValue(filter.value, 100);\n    var placeholder = [t('Search'), shortcut].filter(Boolean).join(' ');\n    var _useSearchItems = useSearchItems(filterText),\n      _useSearchItems$data = _useSearchItems.data,\n      items = _useSearchItems$data === void 0 ? [] : _useSearchItems$data,\n      isLoading = _useSearchItems.isLoading;\n    var itemData = useMemo(function () {\n      return {\n        items: items,\n        t: t,\n        SideBarItemTemplate: sideBarItemTemplate,\n        avatarTemplate: avatarTemplate,\n        useRealName: useRealName,\n        extended: extended,\n        sidebarViewMode: sidebarViewMode\n      };\n    }, [avatarTemplate, extended, items, useRealName, sideBarItemTemplate, sidebarViewMode, t]);\n    var changeSelection = useMutableCallback(function (dir) {\n      var nextSelectedElement = null;\n      if (dir === 'up') {\n        var _selectedElement$curr, _selectedElement$curr2;\n        var potentialElement = (_selectedElement$curr = selectedElement.current) === null || _selectedElement$curr === void 0 ? void 0 : (_selectedElement$curr2 = _selectedElement$curr.parentElement) === null || _selectedElement$curr2 === void 0 ? void 0 : _selectedElement$curr2.previousSibling;\n        if (potentialElement) {\n          nextSelectedElement = potentialElement.querySelector('a');\n        }\n      } else {\n        var _selectedElement$curr3, _selectedElement$curr4;\n        var _potentialElement = (_selectedElement$curr3 = selectedElement.current) === null || _selectedElement$curr3 === void 0 ? void 0 : (_selectedElement$curr4 = _selectedElement$curr3.parentElement) === null || _selectedElement$curr4 === void 0 ? void 0 : _selectedElement$curr4.nextSibling;\n        if (_potentialElement) {\n          nextSelectedElement = _potentialElement.querySelector('a');\n        }\n      }\n      if (nextSelectedElement) {\n        toggleSelectionState(nextSelectedElement, selectedElement.current || undefined, (cursorRef === null || cursorRef === void 0 ? void 0 : cursorRef.current) || undefined);\n        return nextSelectedElement;\n      }\n      return selectedElement.current;\n    });\n    var resetCursor = useMutableCallback(function () {\n      setTimeout(function () {\n        var _listRef$current, _boxRef$current;\n        itemIndexRef.current = 0;\n        (_listRef$current = listRef.current) === null || _listRef$current === void 0 ? void 0 : _listRef$current.scrollToIndex({\n          index: itemIndexRef.current\n        });\n        selectedElement.current = (_boxRef$current = boxRef.current) === null || _boxRef$current === void 0 ? void 0 : _boxRef$current.querySelector('a.rcx-sidebar-item');\n        if (selectedElement.current) {\n          toggleSelectionState(selectedElement.current, undefined, (cursorRef === null || cursorRef === void 0 ? void 0 : cursorRef.current) || undefined);\n        }\n      }, 0);\n    });\n    usePreventDefault(boxRef);\n    useEffect(function () {\n      resetCursor();\n    });\n    useEffect(function () {\n      resetCursor();\n    }, [filterText, resetCursor]);\n    useEffect(function () {\n      if (!(cursorRef !== null && cursorRef !== void 0 && cursorRef.current)) {\n        return;\n      }\n      return tinykeys(cursorRef === null || cursorRef === void 0 ? void 0 : cursorRef.current, {\n        Escape: function (event) {\n          event.preventDefault();\n          setFilterValue(function (value) {\n            if (!value) {\n              onClose();\n            }\n            resetCursor();\n            return '';\n          });\n        },\n        Tab: onClose,\n        ArrowUp: function () {\n          var _listRef$current2;\n          var currentElement = changeSelection('up');\n          itemIndexRef.current = Math.max(itemIndexRef.current - 1, 0);\n          (_listRef$current2 = listRef.current) === null || _listRef$current2 === void 0 ? void 0 : _listRef$current2.scrollToIndex({\n            index: itemIndexRef.current\n          });\n          selectedElement.current = currentElement;\n        },\n        ArrowDown: function () {\n          var _listRef$current3;\n          var currentElement = changeSelection('down');\n          itemIndexRef.current = Math.min(itemIndexRef.current + 1, items.length + 1);\n          (_listRef$current3 = listRef.current) === null || _listRef$current3 === void 0 ? void 0 : _listRef$current3.scrollToIndex({\n            index: itemIndexRef.current\n          });\n          selectedElement.current = currentElement;\n        },\n        Enter: function (event) {\n          event.preventDefault();\n          if (selectedElement.current && items.length > 0) {\n            selectedElement.current.click();\n          } else {\n            onClose();\n          }\n        }\n      });\n    }, [cursorRef, changeSelection, items.length, onClose, resetCursor, setFilterValue]);\n    var handleClick = function (e) {\n      var _e$target$parentEleme;\n      if (e.target instanceof Element && [e.target.tagName, (_e$target$parentEleme = e.target.parentElement) === null || _e$target$parentEleme === void 0 ? void 0 : _e$target$parentEleme.tagName].includes('BUTTON')) {\n        return;\n      }\n      return onClose();\n    };\n    return /*#__PURE__*/React.createElement(Box, {\n      position: \"absolute\",\n      \"rcx-sidebar\": true,\n      h: \"full\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      zIndex: 99,\n      w: \"full\",\n      className: css(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\\n\\t\\t\\t\\tleft: 0;\\n\\t\\t\\t\\ttop: 0;\\n\\t\\t\\t\"]))),\n      ref: ref,\n      role: \"search\"\n    }, /*#__PURE__*/React.createElement(Sidebar.TopBar.Section, {\n      flexShrink: 0,\n      is: \"form\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      mb: \"x12\",\n      w: \"full\"\n    }, /*#__PURE__*/React.createElement(TextInput, _extends({\n      \"aria-owns\": listId,\n      \"data-qa\": \"sidebar-search-input\",\n      ref: autofocus\n    }, filter, {\n      placeholder: placeholder,\n      role: \"searchbox\",\n      addon: /*#__PURE__*/React.createElement(Icon, {\n        name: \"cross\",\n        size: \"x20\",\n        onClick: onClose\n      })\n    })))), /*#__PURE__*/React.createElement(Box, {\n      ref: boxRef,\n      role: \"listbox\",\n      id: listId,\n      tabIndex: -1,\n      flexShrink: 1,\n      h: \"full\",\n      w: \"full\",\n      \"data-qa\": \"sidebar-search-result\",\n      \"aria-live\": \"polite\",\n      \"aria-atomic\": \"true\",\n      \"aria-busy\": isLoading,\n      onClick: handleClick\n    }, /*#__PURE__*/React.createElement(Virtuoso, {\n      style: {\n        height: '100%',\n        width: '100%'\n      },\n      totalCount: items.length,\n      data: items,\n      components: {\n        Scroller: VirtuosoScrollbars\n      },\n      computeItemKey: function (_, room) {\n        return room._id;\n      },\n      itemContent: function (_, data) {\n        return /*#__PURE__*/React.createElement(Row, {\n          data: itemData,\n          item: data\n        });\n      },\n      ref: listRef\n    })));\n  }\n  return SearchList;\n}());\nmodule.exportDefault(SearchList);","map":{"version":3,"names":["_extends","module","link","default","v","_taggedTemplateLiteralLoose","_objectWithoutProperties","_regeneratorRuntime","_toConsumableArray","_objectSpread","_slicedToArray","css","Sidebar","TextInput","Box","Icon","useMutableCallback","useDebouncedValue","useAutoFocus","useUniqueId","useMergedRefs","escapeRegExp","useUserPreference","useUserSubscriptions","useSetting","useTranslation","useMethod","useQuery","React","forwardRef","useState","useMemo","useEffect","useRef","Virtuoso","tinykeys","VirtuosoScrollbars","getConfig","useAvatarTemplate","usePreventDefault","useTemplateByViewMode","Row","mobileCheck","check","a","test","substr","navigator","userAgent","vendor","window","opera","shortcut","_navigator$userAgentD","userAgentData","mobile","platform","toLowerCase","includes","LIMIT","parseInt","String","options","sort","lm","name","limit","useSearchItems","filterText","_useMemo","match","_useMemo2","mention","query","filterRegex","RegExp","$or","fname","t","$ne","localRooms","usernamesFromClient","map","_ref","filter","Boolean","searchForChannels","searchForDMs","type","users","rooms","includeFederatedRooms","getSpotlight","_ref2","_id","_callee","spotlight","filterUsersUnique","roomFilter","usersFilter","userMap","resultsFromServer","exact","async","_callee$","_context","prev","next","length","abrupt","awrap","sent","_ref3","index","arr","findIndex","user","room","find","item","_room$uids","uids","rid","_room$uids2","username","avatarETag","push","apply","Array","from","Set","concat","stop","Promise","staleTime","keepPreviousData","placeholderData","useInput","initial","_useState","_useState2","value","setValue","onChange","e","currentTarget","toggleSelectionState","current","input","setAttribute","id","classList","add","removeAttribute","remove","SearchList","_ref4","ref","onClose","listId","_useInput","setFilterValue","_excluded","cursorRef","autofocus","listRef","boxRef","selectedElement","itemIndexRef","sidebarViewMode","useRealName","sideBarItemTemplate","avatarTemplate","extended","placeholder","join","_useSearchItems","_useSearchItems$data","data","items","isLoading","itemData","SideBarItemTemplate","changeSelection","dir","nextSelectedElement","_selectedElement$curr","_selectedElement$curr2","potentialElement","parentElement","previousSibling","querySelector","_selectedElement$curr3","_selectedElement$curr4","nextSibling","undefined","resetCursor","setTimeout","_listRef$current","_boxRef$current","scrollToIndex","Escape","event","preventDefault","Tab","ArrowUp","_listRef$current2","currentElement","Math","max","ArrowDown","_listRef$current3","min","Enter","click","handleClick","_e$target$parentEleme","target","Element","tagName","createElement","position","h","display","flexDirection","zIndex","w","className","_templateObject","role","TopBar","Section","flexShrink","is","mb","addon","size","onClick","tabIndex","style","height","width","totalCount","components","Scroller","computeItemKey","_","itemContent","exportDefault"],"sources":["client/sidebar/search/SearchList.tsx"],"sourcesContent":["import type { IRoom, ISubscription } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport { Sidebar, TextInput, Box, Icon } from '@rocket.chat/fuselage';\nimport { useMutableCallback, useDebouncedValue, useAutoFocus, useUniqueId, useMergedRefs } from '@rocket.chat/fuselage-hooks';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { useUserPreference, useUserSubscriptions, useSetting, useTranslation, useMethod } from '@rocket.chat/ui-contexts';\nimport type { UseQueryResult } from '@tanstack/react-query';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ReactElement, MutableRefObject, SetStateAction, Dispatch, FormEventHandler, Ref, MouseEventHandler } from 'react';\nimport React, { forwardRef, useState, useMemo, useEffect, useRef } from 'react';\nimport type { VirtuosoHandle } from 'react-virtuoso';\nimport { Virtuoso } from 'react-virtuoso';\nimport tinykeys from 'tinykeys';\n\nimport { VirtuosoScrollbars } from '../../components/CustomScrollbars';\nimport { getConfig } from '../../lib/utils/getConfig';\nimport { useAvatarTemplate } from '../hooks/useAvatarTemplate';\nimport { usePreventDefault } from '../hooks/usePreventDefault';\nimport { useTemplateByViewMode } from '../hooks/useTemplateByViewMode';\nimport Row from './Row';\n\nconst mobileCheck = function () {\n\tlet check = false;\n\t(function (a: string) {\n\t\tif (\n\t\t\t/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n\t\t\t\ta,\n\t\t\t) ||\n\t\t\t/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n\t\t\t\ta.substr(0, 4),\n\t\t\t)\n\t\t)\n\t\t\tcheck = true;\n\t})(navigator.userAgent || navigator.vendor || window.opera || '');\n\treturn check;\n};\n\ndeclare global {\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tinterface Window {\n\t\topera?: string;\n\t}\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tinterface Navigator {\n\t\tuserAgentData?: {\n\t\t\tmobile: boolean;\n\t\t};\n\t}\n}\n\nconst shortcut = ((): string => {\n\tif (navigator.userAgentData?.mobile || mobileCheck()) {\n\t\treturn '';\n\t}\n\tif (window.navigator.platform.toLowerCase().includes('mac')) {\n\t\treturn '(\\u2318+K)';\n\t}\n\treturn '(Ctrl+K)';\n})();\n\nconst LIMIT = parseInt(String(getConfig('Sidebar_Search_Spotlight_LIMIT', 20)));\n\nconst options = {\n\tsort: {\n\t\tlm: -1,\n\t\tname: 1,\n\t},\n\tlimit: LIMIT,\n} as const;\n\nconst useSearchItems = (filterText: string): UseQueryResult<(ISubscription & IRoom)[] | undefined, Error> => {\n\tconst [, mention, name] = useMemo(() => filterText.match(/(@|#)?(.*)/i) || [], [filterText]);\n\tconst query = useMemo(() => {\n\t\tconst filterRegex = new RegExp(escapeRegExp(name), 'i');\n\n\t\treturn {\n\t\t\t$or: [{ name: filterRegex }, { fname: filterRegex }],\n\t\t\t...(mention && {\n\t\t\t\tt: mention === '@' ? 'd' : { $ne: 'd' },\n\t\t\t}),\n\t\t};\n\t}, [name, mention]);\n\n\tconst localRooms = useUserSubscriptions(query, options);\n\n\tconst usernamesFromClient = [...localRooms?.map(({ t, name }) => (t === 'd' ? name : null))].filter(Boolean) as string[];\n\n\tconst searchForChannels = mention === '#';\n\tconst searchForDMs = mention === '@';\n\n\tconst type = useMemo(() => {\n\t\tif (searchForChannels) {\n\t\t\treturn { users: false, rooms: true, includeFederatedRooms: true };\n\t\t}\n\t\tif (searchForDMs) {\n\t\t\treturn { users: true, rooms: false };\n\t\t}\n\t\treturn { users: true, rooms: true, includeFederatedRooms: true };\n\t}, [searchForChannels, searchForDMs]);\n\n\tconst getSpotlight = useMethod('spotlight');\n\n\treturn useQuery(\n\t\t['sidebar/search/spotlight', name, usernamesFromClient, type, localRooms.map(({ _id, name }) => _id + name)],\n\t\tasync () => {\n\t\t\tif (localRooms.length === LIMIT) {\n\t\t\t\treturn localRooms;\n\t\t\t}\n\n\t\t\tconst spotlight = await getSpotlight(name, usernamesFromClient, type);\n\n\t\t\tconst filterUsersUnique = ({ _id }: { _id: string }, index: number, arr: { _id: string }[]): boolean =>\n\t\t\t\tindex === arr.findIndex((user) => _id === user._id);\n\n\t\t\tconst roomFilter = (room: { t: string; uids?: string[]; _id: string; name?: string }): boolean =>\n\t\t\t\t!localRooms.find(\n\t\t\t\t\t(item) =>\n\t\t\t\t\t\t(room.t === 'd' && room.uids && room.uids.length > 1 && room.uids?.includes(item._id)) ||\n\t\t\t\t\t\t[item.rid, item._id].includes(room._id),\n\t\t\t\t);\n\t\t\tconst usersFilter = (user: { _id: string }): boolean =>\n\t\t\t\t!localRooms.find((room) => room.t === 'd' && room.uids && room.uids?.length === 2 && room.uids.includes(user._id));\n\n\t\t\tconst userMap = (user: {\n\t\t\t\t_id: string;\n\t\t\t\tname: string;\n\t\t\t\tusername: string;\n\t\t\t\tavatarETag?: string;\n\t\t\t}): {\n\t\t\t\t_id: string;\n\t\t\t\tt: string;\n\t\t\t\tname: string;\n\t\t\t\tfname: string;\n\t\t\t\tavatarETag?: string;\n\t\t\t} => ({\n\t\t\t\t_id: user._id,\n\t\t\t\tt: 'd',\n\t\t\t\tname: user.username,\n\t\t\t\tfname: user.name,\n\t\t\t\tavatarETag: user.avatarETag,\n\t\t\t});\n\n\t\t\ttype resultsFromServerType = {\n\t\t\t\t_id: string;\n\t\t\t\tt: string;\n\t\t\t\tname: string;\n\t\t\t\tteamMain?: boolean;\n\t\t\t\tfname?: string;\n\t\t\t\tavatarETag?: string | undefined;\n\t\t\t\tuids?: string[] | undefined;\n\t\t\t}[];\n\n\t\t\tconst resultsFromServer: resultsFromServerType = [];\n\t\t\tresultsFromServer.push(...spotlight.users.filter(filterUsersUnique).filter(usersFilter).map(userMap));\n\t\t\tresultsFromServer.push(...spotlight.rooms.filter(roomFilter));\n\n\t\t\tconst exact = resultsFromServer?.filter((item) => [item.name, item.fname].includes(name));\n\t\t\treturn Array.from(new Set([...exact, ...localRooms, ...resultsFromServer]));\n\t\t},\n\t\t{\n\t\t\tstaleTime: 60_000,\n\t\t\tkeepPreviousData: true,\n\t\t\tplaceholderData: localRooms,\n\t\t},\n\t);\n};\n\nconst useInput = (initial: string): { value: string; onChange: FormEventHandler; setValue: Dispatch<SetStateAction<string>> } => {\n\tconst [value, setValue] = useState(initial);\n\tconst onChange = useMutableCallback((e) => {\n\t\tsetValue(e.currentTarget.value);\n\t});\n\treturn { value, onChange, setValue };\n};\n\nconst toggleSelectionState = (next: HTMLElement, current: HTMLElement | undefined, input: HTMLElement | undefined): void => {\n\tinput?.setAttribute('aria-activedescendant', next.id);\n\tnext.setAttribute('aria-selected', 'true');\n\tnext.classList.add('rcx-sidebar-item--selected');\n\tif (current) {\n\t\tcurrent.removeAttribute('aria-selected');\n\t\tcurrent.classList.remove('rcx-sidebar-item--selected');\n\t}\n};\n\n/**\n * @type import('react').ForwardRefExoticComponent<{ onClose: unknown } & import('react').RefAttributes<HTMLElement>>\n */\n\ntype SearchListProps = {\n\tonClose: () => void;\n};\n\nconst SearchList = forwardRef(function SearchList({ onClose }: SearchListProps, ref): ReactElement {\n\tconst listId = useUniqueId();\n\tconst t = useTranslation();\n\tconst { setValue: setFilterValue, ...filter } = useInput('');\n\n\tconst cursorRef = useRef<HTMLInputElement>(null);\n\tconst autofocus: Ref<HTMLInputElement> = useMergedRefs(useAutoFocus<HTMLInputElement>(), cursorRef);\n\n\tconst listRef = useRef<VirtuosoHandle>(null);\n\tconst boxRef = useRef<HTMLDivElement>(null);\n\n\tconst selectedElement: MutableRefObject<HTMLElement | null | undefined> = useRef(null);\n\tconst itemIndexRef = useRef(0);\n\n\tconst sidebarViewMode = useUserPreference('sidebarViewMode');\n\tconst useRealName = useSetting('UI_Use_Real_Name');\n\n\tconst sideBarItemTemplate = useTemplateByViewMode();\n\tconst avatarTemplate = useAvatarTemplate();\n\n\tconst extended = sidebarViewMode === 'extended';\n\n\tconst filterText = useDebouncedValue(filter.value, 100);\n\n\tconst placeholder = [t('Search'), shortcut].filter(Boolean).join(' ');\n\n\tconst { data: items = [], isLoading } = useSearchItems(filterText);\n\n\tconst itemData = useMemo(\n\t\t() => ({\n\t\t\titems,\n\t\t\tt,\n\t\t\tSideBarItemTemplate: sideBarItemTemplate,\n\t\t\tavatarTemplate,\n\t\t\tuseRealName,\n\t\t\textended,\n\t\t\tsidebarViewMode,\n\t\t}),\n\t\t[avatarTemplate, extended, items, useRealName, sideBarItemTemplate, sidebarViewMode, t],\n\t);\n\n\tconst changeSelection = useMutableCallback((dir) => {\n\t\tlet nextSelectedElement = null;\n\n\t\tif (dir === 'up') {\n\t\t\tconst potentialElement = selectedElement.current?.parentElement?.previousSibling as HTMLElement;\n\t\t\tif (potentialElement) {\n\t\t\t\tnextSelectedElement = potentialElement.querySelector('a');\n\t\t\t}\n\t\t} else {\n\t\t\tconst potentialElement = selectedElement.current?.parentElement?.nextSibling as HTMLElement;\n\t\t\tif (potentialElement) {\n\t\t\t\tnextSelectedElement = potentialElement.querySelector('a');\n\t\t\t}\n\t\t}\n\n\t\tif (nextSelectedElement) {\n\t\t\ttoggleSelectionState(nextSelectedElement, selectedElement.current || undefined, cursorRef?.current || undefined);\n\t\t\treturn nextSelectedElement;\n\t\t}\n\t\treturn selectedElement.current;\n\t});\n\n\tconst resetCursor = useMutableCallback(() => {\n\t\tsetTimeout(() => {\n\t\t\titemIndexRef.current = 0;\n\t\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\t\t\tselectedElement.current = boxRef.current?.querySelector('a.rcx-sidebar-item');\n\t\t\tif (selectedElement.current) {\n\t\t\t\ttoggleSelectionState(selectedElement.current, undefined, cursorRef?.current || undefined);\n\t\t\t}\n\t\t}, 0);\n\t});\n\n\tusePreventDefault(boxRef);\n\n\tuseEffect(() => {\n\t\tresetCursor();\n\t});\n\n\tuseEffect(() => {\n\t\tresetCursor();\n\t}, [filterText, resetCursor]);\n\n\tuseEffect(() => {\n\t\tif (!cursorRef?.current) {\n\t\t\treturn;\n\t\t}\n\t\treturn tinykeys(cursorRef?.current, {\n\t\t\tEscape: (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tsetFilterValue((value) => {\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t}\n\t\t\t\t\tresetCursor();\n\t\t\t\t\treturn '';\n\t\t\t\t});\n\t\t\t},\n\t\t\tTab: onClose,\n\t\t\tArrowUp: () => {\n\t\t\t\tconst currentElement = changeSelection('up');\n\t\t\t\titemIndexRef.current = Math.max(itemIndexRef.current - 1, 0);\n\t\t\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\t\t\t\tselectedElement.current = currentElement;\n\t\t\t},\n\t\t\tArrowDown: () => {\n\t\t\t\tconst currentElement = changeSelection('down');\n\t\t\t\titemIndexRef.current = Math.min(itemIndexRef.current + 1, items.length + 1);\n\t\t\t\tlistRef.current?.scrollToIndex({ index: itemIndexRef.current });\n\t\t\t\tselectedElement.current = currentElement;\n\t\t\t},\n\t\t\tEnter: (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (selectedElement.current && items.length > 0) {\n\t\t\t\t\tselectedElement.current.click();\n\t\t\t\t} else {\n\t\t\t\t\tonClose();\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}, [cursorRef, changeSelection, items.length, onClose, resetCursor, setFilterValue]);\n\n\tconst handleClick: MouseEventHandler<HTMLElement> = (e): void => {\n\t\tif (e.target instanceof Element && [e.target.tagName, e.target.parentElement?.tagName].includes('BUTTON')) {\n\t\t\treturn;\n\t\t}\n\t\treturn onClose();\n\t};\n\n\treturn (\n\t\t<Box\n\t\t\tposition='absolute'\n\t\t\trcx-sidebar\n\t\t\th='full'\n\t\t\tdisplay='flex'\n\t\t\tflexDirection='column'\n\t\t\tzIndex={99}\n\t\t\tw='full'\n\t\t\tclassName={css`\n\t\t\t\tleft: 0;\n\t\t\t\ttop: 0;\n\t\t\t`}\n\t\t\tref={ref}\n\t\t\trole='search'\n\t\t>\n\t\t\t<Sidebar.TopBar.Section {...({ flexShrink: 0 } as any)} is='form'>\n\t\t\t\t<Box mb='x12' w='full'>\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\taria-owns={listId}\n\t\t\t\t\t\tdata-qa='sidebar-search-input'\n\t\t\t\t\t\tref={autofocus}\n\t\t\t\t\t\t{...filter}\n\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\trole='searchbox'\n\t\t\t\t\t\taddon={<Icon name='cross' size='x20' onClick={onClose} />}\n\t\t\t\t\t/>\n\t\t\t\t</Box>\n\t\t\t</Sidebar.TopBar.Section>\n\t\t\t<Box\n\t\t\t\tref={boxRef}\n\t\t\t\trole='listbox'\n\t\t\t\tid={listId}\n\t\t\t\ttabIndex={-1}\n\t\t\t\tflexShrink={1}\n\t\t\t\th='full'\n\t\t\t\tw='full'\n\t\t\t\tdata-qa='sidebar-search-result'\n\t\t\t\taria-live='polite'\n\t\t\t\taria-atomic='true'\n\t\t\t\taria-busy={isLoading}\n\t\t\t\tonClick={handleClick}\n\t\t\t>\n\t\t\t\t<Virtuoso\n\t\t\t\t\tstyle={{ height: '100%', width: '100%' }}\n\t\t\t\t\ttotalCount={items.length}\n\t\t\t\t\tdata={items}\n\t\t\t\t\tcomponents={{ Scroller: VirtuosoScrollbars }}\n\t\t\t\t\tcomputeItemKey={(_, room) => room._id}\n\t\t\t\t\titemContent={(_, data): ReactElement => <Row data={itemData} item={data} />}\n\t\t\t\t\tref={listRef}\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n});\n\nexport default SearchList;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"d958c48a3a8c0cf5d65892bfbd8f7b025f67bd2c"}
