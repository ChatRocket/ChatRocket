{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/RouterProvider.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/providers/RouterProvider.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/RouterProvider.tsx","inputSourceMap":{"version":3,"file":"client/providers/RouterProvider.tsx","sourceRoot":"","sources":["client/providers/RouterProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { RoomType, RoomRouteData } from '@rocket.chat/core-typings';\nimport { RouterContext } from '@rocket.chat/ui-contexts';\nimport type {\n\tRouterContextValue,\n\tRouteName,\n\tLocationPathname,\n\tRouteParameters,\n\tSearchParameters,\n\tTo,\n\tRouteObject,\n\tLocationSearch,\n} from '@rocket.chat/ui-contexts';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Tracker } from 'meteor/tracker';\nimport type { ReactNode } from 'react';\nimport React from 'react';\n\nimport { appLayout } from '../lib/appLayout';\nimport { roomCoordinator } from '../lib/rooms/roomCoordinator';\nimport { queueMicrotask } from '../lib/utils/queueMicrotask';\n\nconst subscribers = new Set<() => void>();\n\nconst listenToRouteChange = () => {\n\tFlowRouter.watchPathChange();\n\tsubscribers.forEach((onRouteChange) => onRouteChange());\n};\n\nlet computation: Tracker.Computation | undefined;\n\nqueueMicrotask(() => {\n\tcomputation = Tracker.autorun(listenToRouteChange);\n});\n\nconst subscribeToRouteChange = (onRouteChange: () => void): (() => void) => {\n\tsubscribers.add(onRouteChange);\n\n\tcomputation?.invalidate();\n\n\treturn () => {\n\t\tsubscribers.delete(onRouteChange);\n\n\t\tif (subscribers.size === 0) {\n\t\t\tqueueMicrotask(() => computation?.stop());\n\t\t}\n\t};\n};\n\nconst getLocationPathname = () => FlowRouter.current().path as LocationPathname;\n\nconst getLocationSearch = () => location.search as LocationSearch;\n\nconst getRouteParameters = () => (FlowRouter.current().params ?? {}) as RouteParameters;\n\nconst getSearchParameters = () => (FlowRouter.current().queryParams ?? {}) as SearchParameters;\n\nconst getRouteName = () => FlowRouter.current().route?.name as RouteName | undefined;\n\nconst encodeSearchParameters = (searchParameters: SearchParameters) => {\n\tconst search = new URLSearchParams();\n\n\tfor (const [key, value] of Object.entries(searchParameters)) {\n\t\tsearch.append(key, value);\n\t}\n\n\tconst searchString = search.toString();\n\n\treturn searchString ? `?${searchString}` : '';\n};\n\nconst buildRoutePath = (to: To): LocationPathname | `${LocationPathname}?${LocationSearch}` => {\n\tif (typeof to === 'string') {\n\t\treturn to;\n\t}\n\n\tif ('pathname' in to) {\n\t\tconst { pathname, search = {} } = to;\n\t\treturn (pathname + encodeSearchParameters(search)) as LocationPathname | `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tif ('pattern' in to) {\n\t\tconst { pattern, params = {}, search = {} } = to;\n\t\treturn Tracker.nonreactive(() => FlowRouter.path(pattern, params, search)) as\n\t\t\t| LocationPathname\n\t\t\t| `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tif ('name' in to) {\n\t\tconst { name, params = {}, search = {} } = to;\n\t\treturn Tracker.nonreactive(() => FlowRouter.path(name, params, search)) as LocationPathname | `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tthrow new Error('Invalid route');\n};\n\nconst navigate = (\n\ttoOrDelta: To | number,\n\toptions?: {\n\t\treplace?: boolean;\n\t},\n) => {\n\tif (typeof toOrDelta === 'number') {\n\t\thistory.go(toOrDelta);\n\t\treturn;\n\t}\n\n\tconst path = buildRoutePath(toOrDelta);\n\tconst state = { path };\n\n\tif (options?.replace) {\n\t\thistory.replaceState(state, '', path);\n\t} else {\n\t\thistory.pushState(state, '', path);\n\t}\n\n\tdispatchEvent(new PopStateEvent('popstate', { state }));\n};\n\nconst routes: RouteObject[] = [];\nconst routesSubscribers = new Set<() => void>();\n\nconst updateFlowRouter = () => {\n\tif (FlowRouter._initialized) {\n\t\tFlowRouter._updateCallbacks();\n\t\tFlowRouter._page.dispatch(new FlowRouter._page.Context(FlowRouter._current.path));\n\t\treturn;\n\t}\n\n\tFlowRouter.initialize();\n};\n\nconst defineRoutes = (routes: RouteObject[]) => {\n\tconst flowRoutes = routes.map((route) => {\n\t\tif (route.path === '*') {\n\t\t\tFlowRouter.notFound = {\n\t\t\t\taction: () => appLayout.render(<>{route.element}</>),\n\t\t\t};\n\n\t\t\treturn FlowRouter.notFound;\n\t\t}\n\n\t\treturn FlowRouter.route(route.path, {\n\t\t\tname: route.id,\n\t\t\taction: () => appLayout.render(<>{route.element}</>),\n\t\t});\n\t});\n\n\troutes.push(...routes);\n\tconst index = routes.length - 1;\n\n\tupdateFlowRouter();\n\troutesSubscribers.forEach((onRoutesChange) => onRoutesChange());\n\n\treturn () => {\n\t\tflowRoutes.forEach((flowRoute) => {\n\t\t\tFlowRouter._routes = FlowRouter._routes.filter((r) => r !== flowRoute);\n\t\t\tif ('name' in flowRoute && flowRoute.name) {\n\t\t\t\tdelete FlowRouter._routesMap[flowRoute.name];\n\t\t\t} else {\n\t\t\t\tFlowRouter.notFound = {\n\t\t\t\t\taction: () => appLayout.render(<></>),\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tif (index !== -1) {\n\t\t\troutes.splice(index, 1);\n\t\t}\n\n\t\tupdateFlowRouter();\n\t\troutesSubscribers.forEach((onRoutesChange) => onRoutesChange());\n\t};\n};\n\nconst getRoutes = () => routes;\n\nconst subscribeToRoutesChange = (onRoutesChange: () => void): (() => void) => {\n\troutesSubscribers.add(onRoutesChange);\n\n\tonRoutesChange();\n\n\treturn () => {\n\t\troutesSubscribers.delete(onRoutesChange);\n\t};\n};\n\n/** @deprecated */\nexport const router: RouterContextValue = {\n\tsubscribeToRouteChange,\n\tgetLocationPathname,\n\tgetLocationSearch,\n\tgetRouteParameters,\n\tgetSearchParameters,\n\tgetRouteName,\n\tbuildRoutePath,\n\tnavigate,\n\tdefineRoutes,\n\tgetRoutes,\n\tsubscribeToRoutesChange,\n\tgetRoomRoute(roomType: RoomType, routeData: RoomRouteData) {\n\t\treturn { path: roomCoordinator.getRouteLink(roomType, routeData) || '/' };\n\t},\n};\n\ntype RouterProviderProps = {\n\tchildren?: ReactNode;\n};\n\nconst RouterProvider = ({ children }: RouterProviderProps) => <RouterContext.Provider children={children} value={router} />;\n\nexport default RouterProvider;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/RouterProvider.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/providers/RouterProvider.tsx","inputSourceMap":{"version":3,"file":"client/providers/RouterProvider.tsx","sourceRoot":"","sources":["client/providers/RouterProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { RoomType, RoomRouteData } from '@rocket.chat/core-typings';\nimport { RouterContext } from '@rocket.chat/ui-contexts';\nimport type {\n\tRouterContextValue,\n\tRouteName,\n\tLocationPathname,\n\tRouteParameters,\n\tSearchParameters,\n\tTo,\n\tRouteObject,\n\tLocationSearch,\n} from '@rocket.chat/ui-contexts';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Tracker } from 'meteor/tracker';\nimport type { ReactNode } from 'react';\nimport React from 'react';\n\nimport { appLayout } from '../lib/appLayout';\nimport { roomCoordinator } from '../lib/rooms/roomCoordinator';\nimport { queueMicrotask } from '../lib/utils/queueMicrotask';\n\nconst subscribers = new Set<() => void>();\n\nconst listenToRouteChange = () => {\n\tFlowRouter.watchPathChange();\n\tsubscribers.forEach((onRouteChange) => onRouteChange());\n};\n\nlet computation: Tracker.Computation | undefined;\n\nqueueMicrotask(() => {\n\tcomputation = Tracker.autorun(listenToRouteChange);\n});\n\nconst subscribeToRouteChange = (onRouteChange: () => void): (() => void) => {\n\tsubscribers.add(onRouteChange);\n\n\tcomputation?.invalidate();\n\n\treturn () => {\n\t\tsubscribers.delete(onRouteChange);\n\n\t\tif (subscribers.size === 0) {\n\t\t\tqueueMicrotask(() => computation?.stop());\n\t\t}\n\t};\n};\n\nconst getLocationPathname = () => FlowRouter.current().path as LocationPathname;\n\nconst getLocationSearch = () => location.search as LocationSearch;\n\nconst getRouteParameters = () => (FlowRouter.current().params ?? {}) as RouteParameters;\n\nconst getSearchParameters = () => (FlowRouter.current().queryParams ?? {}) as SearchParameters;\n\nconst getRouteName = () => FlowRouter.current().route?.name as RouteName | undefined;\n\nconst encodeSearchParameters = (searchParameters: SearchParameters) => {\n\tconst search = new URLSearchParams();\n\n\tfor (const [key, value] of Object.entries(searchParameters)) {\n\t\tsearch.append(key, value);\n\t}\n\n\tconst searchString = search.toString();\n\n\treturn searchString ? `?${searchString}` : '';\n};\n\nconst buildRoutePath = (to: To): LocationPathname | `${LocationPathname}?${LocationSearch}` => {\n\tif (typeof to === 'string') {\n\t\treturn to;\n\t}\n\n\tif ('pathname' in to) {\n\t\tconst { pathname, search = {} } = to;\n\t\treturn (pathname + encodeSearchParameters(search)) as LocationPathname | `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tif ('pattern' in to) {\n\t\tconst { pattern, params = {}, search = {} } = to;\n\t\treturn Tracker.nonreactive(() => FlowRouter.path(pattern, params, search)) as\n\t\t\t| LocationPathname\n\t\t\t| `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tif ('name' in to) {\n\t\tconst { name, params = {}, search = {} } = to;\n\t\treturn Tracker.nonreactive(() => FlowRouter.path(name, params, search)) as LocationPathname | `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tthrow new Error('Invalid route');\n};\n\nconst navigate = (\n\ttoOrDelta: To | number,\n\toptions?: {\n\t\treplace?: boolean;\n\t},\n) => {\n\tif (typeof toOrDelta === 'number') {\n\t\thistory.go(toOrDelta);\n\t\treturn;\n\t}\n\n\tconst path = buildRoutePath(toOrDelta);\n\tconst state = { path };\n\n\tif (options?.replace) {\n\t\thistory.replaceState(state, '', path);\n\t} else {\n\t\thistory.pushState(state, '', path);\n\t}\n\n\tdispatchEvent(new PopStateEvent('popstate', { state }));\n};\n\nconst routes: RouteObject[] = [];\nconst routesSubscribers = new Set<() => void>();\n\nconst updateFlowRouter = () => {\n\tif (FlowRouter._initialized) {\n\t\tFlowRouter._updateCallbacks();\n\t\tFlowRouter._page.dispatch(new FlowRouter._page.Context(FlowRouter._current.path));\n\t\treturn;\n\t}\n\n\tFlowRouter.initialize();\n};\n\nconst defineRoutes = (routes: RouteObject[]) => {\n\tconst flowRoutes = routes.map((route) => {\n\t\tif (route.path === '*') {\n\t\t\tFlowRouter.notFound = {\n\t\t\t\taction: () => appLayout.render(<>{route.element}</>),\n\t\t\t};\n\n\t\t\treturn FlowRouter.notFound;\n\t\t}\n\n\t\treturn FlowRouter.route(route.path, {\n\t\t\tname: route.id,\n\t\t\taction: () => appLayout.render(<>{route.element}</>),\n\t\t});\n\t});\n\n\troutes.push(...routes);\n\tconst index = routes.length - 1;\n\n\tupdateFlowRouter();\n\troutesSubscribers.forEach((onRoutesChange) => onRoutesChange());\n\n\treturn () => {\n\t\tflowRoutes.forEach((flowRoute) => {\n\t\t\tFlowRouter._routes = FlowRouter._routes.filter((r) => r !== flowRoute);\n\t\t\tif ('name' in flowRoute && flowRoute.name) {\n\t\t\t\tdelete FlowRouter._routesMap[flowRoute.name];\n\t\t\t} else {\n\t\t\t\tFlowRouter.notFound = {\n\t\t\t\t\taction: () => appLayout.render(<></>),\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tif (index !== -1) {\n\t\t\troutes.splice(index, 1);\n\t\t}\n\n\t\tupdateFlowRouter();\n\t\troutesSubscribers.forEach((onRoutesChange) => onRoutesChange());\n\t};\n};\n\nconst getRoutes = () => routes;\n\nconst subscribeToRoutesChange = (onRoutesChange: () => void): (() => void) => {\n\troutesSubscribers.add(onRoutesChange);\n\n\tonRoutesChange();\n\n\treturn () => {\n\t\troutesSubscribers.delete(onRoutesChange);\n\t};\n};\n\n/** @deprecated */\nexport const router: RouterContextValue = {\n\tsubscribeToRouteChange,\n\tgetLocationPathname,\n\tgetLocationSearch,\n\tgetRouteParameters,\n\tgetSearchParameters,\n\tgetRouteName,\n\tbuildRoutePath,\n\tnavigate,\n\tdefineRoutes,\n\tgetRoutes,\n\tsubscribeToRoutesChange,\n\tgetRoomRoute(roomType: RoomType, routeData: RoomRouteData) {\n\t\treturn { path: roomCoordinator.getRouteLink(roomType, routeData) || '/' };\n\t},\n};\n\ntype RouterProviderProps = {\n\tchildren?: ReactNode;\n};\n\nconst RouterProvider = ({ children }: RouterProviderProps) => <RouterContext.Provider children={children} value={router} />;\n\nexport default RouterProvider;\n"]}}},"code":"module.export({\n  router: () => router\n});\nlet RouterContext;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  RouterContext(v) {\n    RouterContext = v;\n  }\n}, 0);\nlet FlowRouter;\nmodule.link(\"meteor/kadira:flow-router\", {\n  FlowRouter(v) {\n    FlowRouter = v;\n  }\n}, 1);\nlet Tracker;\nmodule.link(\"meteor/tracker\", {\n  Tracker(v) {\n    Tracker = v;\n  }\n}, 2);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n}, 3);\nlet appLayout;\nmodule.link(\"../lib/appLayout\", {\n  appLayout(v) {\n    appLayout = v;\n  }\n}, 4);\nlet roomCoordinator;\nmodule.link(\"../lib/rooms/roomCoordinator\", {\n  roomCoordinator(v) {\n    roomCoordinator = v;\n  }\n}, 5);\nlet queueMicrotask;\nmodule.link(\"../lib/utils/queueMicrotask\", {\n  queueMicrotask(v) {\n    queueMicrotask = v;\n  }\n}, 6);\nconst subscribers = new Set();\nconst listenToRouteChange = () => {\n  FlowRouter.watchPathChange();\n  subscribers.forEach(onRouteChange => onRouteChange());\n};\nlet computation;\nqueueMicrotask(() => {\n  computation = Tracker.autorun(listenToRouteChange);\n});\nconst subscribeToRouteChange = onRouteChange => {\n  var _computation;\n  subscribers.add(onRouteChange);\n  (_computation = computation) === null || _computation === void 0 ? void 0 : _computation.invalidate();\n  return () => {\n    subscribers.delete(onRouteChange);\n    if (subscribers.size === 0) {\n      queueMicrotask(() => {\n        var _computation2;\n        return (_computation2 = computation) === null || _computation2 === void 0 ? void 0 : _computation2.stop();\n      });\n    }\n  };\n};\nconst getLocationPathname = () => FlowRouter.current().path;\nconst getLocationSearch = () => location.search;\nconst getRouteParameters = () => {\n  var _FlowRouter$current$p;\n  return (_FlowRouter$current$p = FlowRouter.current().params) !== null && _FlowRouter$current$p !== void 0 ? _FlowRouter$current$p : {};\n};\nconst getSearchParameters = () => {\n  var _FlowRouter$current$q;\n  return (_FlowRouter$current$q = FlowRouter.current().queryParams) !== null && _FlowRouter$current$q !== void 0 ? _FlowRouter$current$q : {};\n};\nconst getRouteName = () => {\n  var _FlowRouter$current$r;\n  return (_FlowRouter$current$r = FlowRouter.current().route) === null || _FlowRouter$current$r === void 0 ? void 0 : _FlowRouter$current$r.name;\n};\nconst encodeSearchParameters = searchParameters => {\n  const search = new URLSearchParams();\n  for (const [key, value] of Object.entries(searchParameters)) {\n    search.append(key, value);\n  }\n  const searchString = search.toString();\n  return searchString ? \"?\".concat(searchString) : '';\n};\nconst buildRoutePath = to => {\n  if (typeof to === 'string') {\n    return to;\n  }\n  if ('pathname' in to) {\n    const {\n      pathname,\n      search = {}\n    } = to;\n    return pathname + encodeSearchParameters(search);\n  }\n  if ('pattern' in to) {\n    const {\n      pattern,\n      params = {},\n      search = {}\n    } = to;\n    return Tracker.nonreactive(() => FlowRouter.path(pattern, params, search));\n  }\n  if ('name' in to) {\n    const {\n      name,\n      params = {},\n      search = {}\n    } = to;\n    return Tracker.nonreactive(() => FlowRouter.path(name, params, search));\n  }\n  throw new Error('Invalid route');\n};\nconst navigate = (toOrDelta, options) => {\n  if (typeof toOrDelta === 'number') {\n    history.go(toOrDelta);\n    return;\n  }\n  const path = buildRoutePath(toOrDelta);\n  const state = {\n    path\n  };\n  if (options !== null && options !== void 0 && options.replace) {\n    history.replaceState(state, '', path);\n  } else {\n    history.pushState(state, '', path);\n  }\n  dispatchEvent(new PopStateEvent('popstate', {\n    state\n  }));\n};\nconst routes = [];\nconst routesSubscribers = new Set();\nconst updateFlowRouter = () => {\n  if (FlowRouter._initialized) {\n    FlowRouter._updateCallbacks();\n    FlowRouter._page.dispatch(new FlowRouter._page.Context(FlowRouter._current.path));\n    return;\n  }\n  FlowRouter.initialize();\n};\nconst defineRoutes = routes => {\n  const flowRoutes = routes.map(route => {\n    if (route.path === '*') {\n      FlowRouter.notFound = {\n        action: () => appLayout.render( /*#__PURE__*/React.createElement(React.Fragment, null, route.element))\n      };\n      return FlowRouter.notFound;\n    }\n    return FlowRouter.route(route.path, {\n      name: route.id,\n      action: () => appLayout.render( /*#__PURE__*/React.createElement(React.Fragment, null, route.element))\n    });\n  });\n  routes.push(...routes);\n  const index = routes.length - 1;\n  updateFlowRouter();\n  routesSubscribers.forEach(onRoutesChange => onRoutesChange());\n  return () => {\n    flowRoutes.forEach(flowRoute => {\n      FlowRouter._routes = FlowRouter._routes.filter(r => r !== flowRoute);\n      if ('name' in flowRoute && flowRoute.name) {\n        delete FlowRouter._routesMap[flowRoute.name];\n      } else {\n        FlowRouter.notFound = {\n          action: () => appLayout.render( /*#__PURE__*/React.createElement(React.Fragment, null))\n        };\n      }\n    });\n    if (index !== -1) {\n      routes.splice(index, 1);\n    }\n    updateFlowRouter();\n    routesSubscribers.forEach(onRoutesChange => onRoutesChange());\n  };\n};\nconst getRoutes = () => routes;\nconst subscribeToRoutesChange = onRoutesChange => {\n  routesSubscribers.add(onRoutesChange);\n  onRoutesChange();\n  return () => {\n    routesSubscribers.delete(onRoutesChange);\n  };\n};\n/** @deprecated */\nconst router = {\n  subscribeToRouteChange,\n  getLocationPathname,\n  getLocationSearch,\n  getRouteParameters,\n  getSearchParameters,\n  getRouteName,\n  buildRoutePath,\n  navigate,\n  defineRoutes,\n  getRoutes,\n  subscribeToRoutesChange,\n  getRoomRoute(roomType, routeData) {\n    return {\n      path: roomCoordinator.getRouteLink(roomType, routeData) || '/'\n    };\n  }\n};\nconst RouterProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  return /*#__PURE__*/React.createElement(RouterContext.Provider, {\n    children: children,\n    value: router\n  });\n};\nmodule.exportDefault(RouterProvider);","map":{"version":3,"names":["module","export","router","RouterContext","link","v","FlowRouter","Tracker","React","default","appLayout","roomCoordinator","queueMicrotask","subscribers","Set","listenToRouteChange","watchPathChange","forEach","onRouteChange","computation","autorun","subscribeToRouteChange","_computation","add","invalidate","delete","size","_computation2","stop","getLocationPathname","current","path","getLocationSearch","location","search","getRouteParameters","_FlowRouter$current$p","params","getSearchParameters","_FlowRouter$current$q","queryParams","getRouteName","_FlowRouter$current$r","route","name","encodeSearchParameters","searchParameters","URLSearchParams","key","value","Object","entries","append","searchString","toString","concat","buildRoutePath","to","pathname","pattern","nonreactive","Error","navigate","toOrDelta","options","history","go","state","replace","replaceState","pushState","dispatchEvent","PopStateEvent","routes","routesSubscribers","updateFlowRouter","_initialized","_updateCallbacks","_page","dispatch","Context","_current","initialize","defineRoutes","flowRoutes","map","notFound","action","render","createElement","Fragment","element","id","push","index","length","onRoutesChange","flowRoute","_routes","filter","r","_routesMap","splice","getRoutes","subscribeToRoutesChange","getRoomRoute","roomType","routeData","getRouteLink","RouterProvider","_ref","children","Provider","exportDefault"],"sources":["client/providers/RouterProvider.tsx"],"sourcesContent":["import type { RoomType, RoomRouteData } from '@rocket.chat/core-typings';\nimport { RouterContext } from '@rocket.chat/ui-contexts';\nimport type {\n\tRouterContextValue,\n\tRouteName,\n\tLocationPathname,\n\tRouteParameters,\n\tSearchParameters,\n\tTo,\n\tRouteObject,\n\tLocationSearch,\n} from '@rocket.chat/ui-contexts';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Tracker } from 'meteor/tracker';\nimport type { ReactNode } from 'react';\nimport React from 'react';\n\nimport { appLayout } from '../lib/appLayout';\nimport { roomCoordinator } from '../lib/rooms/roomCoordinator';\nimport { queueMicrotask } from '../lib/utils/queueMicrotask';\n\nconst subscribers = new Set<() => void>();\n\nconst listenToRouteChange = () => {\n\tFlowRouter.watchPathChange();\n\tsubscribers.forEach((onRouteChange) => onRouteChange());\n};\n\nlet computation: Tracker.Computation | undefined;\n\nqueueMicrotask(() => {\n\tcomputation = Tracker.autorun(listenToRouteChange);\n});\n\nconst subscribeToRouteChange = (onRouteChange: () => void): (() => void) => {\n\tsubscribers.add(onRouteChange);\n\n\tcomputation?.invalidate();\n\n\treturn () => {\n\t\tsubscribers.delete(onRouteChange);\n\n\t\tif (subscribers.size === 0) {\n\t\t\tqueueMicrotask(() => computation?.stop());\n\t\t}\n\t};\n};\n\nconst getLocationPathname = () => FlowRouter.current().path as LocationPathname;\n\nconst getLocationSearch = () => location.search as LocationSearch;\n\nconst getRouteParameters = () => (FlowRouter.current().params ?? {}) as RouteParameters;\n\nconst getSearchParameters = () => (FlowRouter.current().queryParams ?? {}) as SearchParameters;\n\nconst getRouteName = () => FlowRouter.current().route?.name as RouteName | undefined;\n\nconst encodeSearchParameters = (searchParameters: SearchParameters) => {\n\tconst search = new URLSearchParams();\n\n\tfor (const [key, value] of Object.entries(searchParameters)) {\n\t\tsearch.append(key, value);\n\t}\n\n\tconst searchString = search.toString();\n\n\treturn searchString ? `?${searchString}` : '';\n};\n\nconst buildRoutePath = (to: To): LocationPathname | `${LocationPathname}?${LocationSearch}` => {\n\tif (typeof to === 'string') {\n\t\treturn to;\n\t}\n\n\tif ('pathname' in to) {\n\t\tconst { pathname, search = {} } = to;\n\t\treturn (pathname + encodeSearchParameters(search)) as LocationPathname | `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tif ('pattern' in to) {\n\t\tconst { pattern, params = {}, search = {} } = to;\n\t\treturn Tracker.nonreactive(() => FlowRouter.path(pattern, params, search)) as\n\t\t\t| LocationPathname\n\t\t\t| `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tif ('name' in to) {\n\t\tconst { name, params = {}, search = {} } = to;\n\t\treturn Tracker.nonreactive(() => FlowRouter.path(name, params, search)) as LocationPathname | `${LocationPathname}?${LocationSearch}`;\n\t}\n\n\tthrow new Error('Invalid route');\n};\n\nconst navigate = (\n\ttoOrDelta: To | number,\n\toptions?: {\n\t\treplace?: boolean;\n\t},\n) => {\n\tif (typeof toOrDelta === 'number') {\n\t\thistory.go(toOrDelta);\n\t\treturn;\n\t}\n\n\tconst path = buildRoutePath(toOrDelta);\n\tconst state = { path };\n\n\tif (options?.replace) {\n\t\thistory.replaceState(state, '', path);\n\t} else {\n\t\thistory.pushState(state, '', path);\n\t}\n\n\tdispatchEvent(new PopStateEvent('popstate', { state }));\n};\n\nconst routes: RouteObject[] = [];\nconst routesSubscribers = new Set<() => void>();\n\nconst updateFlowRouter = () => {\n\tif (FlowRouter._initialized) {\n\t\tFlowRouter._updateCallbacks();\n\t\tFlowRouter._page.dispatch(new FlowRouter._page.Context(FlowRouter._current.path));\n\t\treturn;\n\t}\n\n\tFlowRouter.initialize();\n};\n\nconst defineRoutes = (routes: RouteObject[]) => {\n\tconst flowRoutes = routes.map((route) => {\n\t\tif (route.path === '*') {\n\t\t\tFlowRouter.notFound = {\n\t\t\t\taction: () => appLayout.render(<>{route.element}</>),\n\t\t\t};\n\n\t\t\treturn FlowRouter.notFound;\n\t\t}\n\n\t\treturn FlowRouter.route(route.path, {\n\t\t\tname: route.id,\n\t\t\taction: () => appLayout.render(<>{route.element}</>),\n\t\t});\n\t});\n\n\troutes.push(...routes);\n\tconst index = routes.length - 1;\n\n\tupdateFlowRouter();\n\troutesSubscribers.forEach((onRoutesChange) => onRoutesChange());\n\n\treturn () => {\n\t\tflowRoutes.forEach((flowRoute) => {\n\t\t\tFlowRouter._routes = FlowRouter._routes.filter((r) => r !== flowRoute);\n\t\t\tif ('name' in flowRoute && flowRoute.name) {\n\t\t\t\tdelete FlowRouter._routesMap[flowRoute.name];\n\t\t\t} else {\n\t\t\t\tFlowRouter.notFound = {\n\t\t\t\t\taction: () => appLayout.render(<></>),\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tif (index !== -1) {\n\t\t\troutes.splice(index, 1);\n\t\t}\n\n\t\tupdateFlowRouter();\n\t\troutesSubscribers.forEach((onRoutesChange) => onRoutesChange());\n\t};\n};\n\nconst getRoutes = () => routes;\n\nconst subscribeToRoutesChange = (onRoutesChange: () => void): (() => void) => {\n\troutesSubscribers.add(onRoutesChange);\n\n\tonRoutesChange();\n\n\treturn () => {\n\t\troutesSubscribers.delete(onRoutesChange);\n\t};\n};\n\n/** @deprecated */\nexport const router: RouterContextValue = {\n\tsubscribeToRouteChange,\n\tgetLocationPathname,\n\tgetLocationSearch,\n\tgetRouteParameters,\n\tgetSearchParameters,\n\tgetRouteName,\n\tbuildRoutePath,\n\tnavigate,\n\tdefineRoutes,\n\tgetRoutes,\n\tsubscribeToRoutesChange,\n\tgetRoomRoute(roomType: RoomType, routeData: RoomRouteData) {\n\t\treturn { path: roomCoordinator.getRouteLink(roomType, routeData) || '/' };\n\t},\n};\n\ntype RouterProviderProps = {\n\tchildren?: ReactNode;\n};\n\nconst RouterProvider = ({ children }: RouterProviderProps) => <RouterContext.Provider children={children} value={router} />;\n\nexport default RouterProvider;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"2c5afded164405c1fb4be26e62fea39fd8c369f4"}
