{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/emoji-custom/client/lib/emojiCustom.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"app/emoji-custom/client/lib/emojiCustom.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/emoji-custom/client/lib/emojiCustom.ts","inputSourceMap":{"version":3,"file":"app/emoji-custom/client/lib/emojiCustom.ts","sourceRoot":"","sources":["app/emoji-custom/client/lib/emojiCustom.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IEmoji } from '@rocket.chat/core-typings';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { emoji, updateRecent } from '../../../emoji/client';\nimport { CachedCollectionManager } from '../../../ui-cached-collection/client';\nimport { getURL } from '../../../utils/client';\nimport { sdk } from '../../../utils/client/lib/SDKClient';\n\nconst isSetNotNull = (fn: () => unknown) => {\n\tlet value;\n\ttry {\n\t\tvalue = fn();\n\t} catch (e) {\n\t\tvalue = null;\n\t}\n\treturn value !== null && value !== undefined;\n};\n\nconst getEmojiUrlFromName = (name: string, extension: string) => {\n\tif (name == null) {\n\t\treturn;\n\t}\n\n\tconst key = `emoji_random_${name}` as const;\n\n\tconst random = (Session as unknown as { keys: Record<string, any> }).keys[key] ?? 0;\n\n\treturn getURL(`/emoji-custom/${encodeURIComponent(name)}.${extension}?_dc=${random}`);\n};\n\nexport const deleteEmojiCustom = (emojiData: IEmoji) => {\n\tdelete emoji.list[`:${emojiData.name}:`];\n\tconst arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.name);\n\tif (arrayIndex !== -1) {\n\t\temoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t}\n\tconst arrayIndexList = emoji.packages.emojiCustom.list?.indexOf(`:${emojiData.name}:`) ?? -1;\n\tif (arrayIndexList !== -1) {\n\t\temoji.packages.emojiCustom.list?.splice(arrayIndexList, 1);\n\t}\n\tif (emojiData.aliases) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\tdelete emoji.list[`:${alias}:`];\n\t\t\tconst aliasIndex = emoji.packages.emojiCustom.list?.indexOf(`:${alias}:`) ?? -1;\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\temoji.packages.emojiCustom.list?.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\tupdateRecent(['rocket']);\n};\n\nexport const updateEmojiCustom = (emojiData: IEmoji) => {\n\tconst previousExists = isSetNotNull(() => emojiData.previousName);\n\tconst currentAliases = isSetNotNull(() => emojiData.aliases);\n\n\tif (previousExists && isSetNotNull(() => emoji.list[`:${emojiData.previousName}:`].aliases)) {\n\t\tfor (const alias of emoji.list[`:${emojiData.previousName}:`].aliases ?? []) {\n\t\t\tdelete emoji.list[`:${alias}:`];\n\t\t\tconst aliasIndex = emoji.packages.emojiCustom.list?.indexOf(`:${alias}:`) ?? -1;\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\temoji.packages.emojiCustom.list?.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\tconst arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.previousName);\n\t\tif (arrayIndex !== -1) {\n\t\t\temoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t\t}\n\t\tconst arrayIndexList = emoji.packages.emojiCustom.list?.indexOf(`:${emojiData.previousName}:`) ?? -1;\n\t\tif (arrayIndexList !== -1) {\n\t\t\temoji.packages.emojiCustom.list?.splice(arrayIndexList, 1);\n\t\t}\n\t\tdelete emoji.list[`:${emojiData.previousName}:`];\n\t}\n\n\tconst categoryIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(`${emojiData.name}`);\n\tif (categoryIndex === -1) {\n\t\temoji.packages.emojiCustom.emojisByCategory.rocket.push(`${emojiData.name}`);\n\t\temoji.packages.emojiCustom.list?.push(`:${emojiData.name}:`);\n\t}\n\temoji.list[`:${emojiData.name}:`] = Object.assign({ emojiPackage: 'emojiCustom' }, emoji.list[`:${emojiData.name}:`], emojiData);\n\tif (currentAliases) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\temoji.packages.emojiCustom.list?.push(`:${alias}:`);\n\t\t\temoji.list[`:${alias}:`] = {\n\t\t\t\temojiPackage: 'emojiCustom',\n\t\t\t\taliasOf: emojiData.name,\n\t\t\t};\n\t\t}\n\t}\n\n\tupdateRecent(['rocket']);\n};\n\nconst customRender = (html: string) => {\n\tconst emojisMatchGroup = emoji.packages.emojiCustom.list?.map(escapeRegExp).join('|');\n\tif (emojisMatchGroup !== emoji.packages.emojiCustom._regexpSignature) {\n\t\temoji.packages.emojiCustom._regexpSignature = emojisMatchGroup;\n\t\temoji.packages.emojiCustom._regexp = new RegExp(\n\t\t\t`<object[^>]*>.*?<\\/object>|<span[^>]*>.*?<\\/span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(${emojisMatchGroup})`,\n\t\t\t'gi',\n\t\t);\n\t}\n\n\thtml = html.replace(emoji.packages.emojiCustom._regexp!, (shortname) => {\n\t\tif (typeof shortname === 'undefined' || shortname === '' || (emoji.packages.emojiCustom.list?.indexOf(shortname) ?? -1) === -1) {\n\t\t\treturn shortname;\n\t\t}\n\n\t\tlet emojiAlias = shortname.replace(/:/g, '');\n\n\t\tlet dataCheck = emoji.list[shortname];\n\t\tif (dataCheck.aliasOf) {\n\t\t\temojiAlias = dataCheck.aliasOf;\n\t\t\tdataCheck = emoji.list[`:${emojiAlias}:`];\n\t\t}\n\n\t\treturn `<span class=\"emoji\" style=\"background-image:url(${getEmojiUrlFromName(\n\t\t\temojiAlias,\n\t\t\tdataCheck.extension!,\n\t\t)});\" data-emoji=\"${emojiAlias}\" title=\"${shortname}\">${shortname}</span>`;\n\t});\n\n\treturn html;\n};\n\nemoji.packages.emojiCustom = {\n\temojiCategories: [{ key: 'rocket', i18n: 'Custom' }],\n\tcategoryIndex: 1,\n\ttoneList: {},\n\tlist: [],\n\t_regexpSignature: null,\n\t_regexp: null,\n\temojisByCategory: {},\n\trender: customRender,\n\trenderPicker: customRender,\n};\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(async () => {\n\t\ttry {\n\t\t\tconst {\n\t\t\t\temojis: { update: emojis },\n\t\t\t} = await sdk.rest.get('/v1/emoji-custom.list', { query: '' });\n\n\t\t\temoji.packages.emojiCustom.emojisByCategory = { rocket: [] };\n\t\t\tfor (const currentEmoji of emojis) {\n\t\t\t\temoji.packages.emojiCustom.emojisByCategory.rocket.push(currentEmoji.name);\n\t\t\t\temoji.packages.emojiCustom.list?.push(`:${currentEmoji.name}:`);\n\t\t\t\temoji.list[`:${currentEmoji.name}:`] = { ...currentEmoji, emojiPackage: 'emojiCustom' } as any;\n\t\t\t\tfor (const alias of currentEmoji.aliases) {\n\t\t\t\t\temoji.packages.emojiCustom.list?.push(`:${alias}:`);\n\t\t\t\t\temoji.list[`:${alias}:`] = {\n\t\t\t\t\t\temojiPackage: 'emojiCustom',\n\t\t\t\t\t\taliasOf: currentEmoji.name,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error('Error getting custom emoji', e);\n\t\t}\n\t}),\n);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"production","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/emoji-custom/client/lib/emojiCustom.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/emoji-custom/client/lib/emojiCustom.ts","inputSourceMap":{"version":3,"file":"app/emoji-custom/client/lib/emojiCustom.ts","sourceRoot":"","sources":["app/emoji-custom/client/lib/emojiCustom.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IEmoji } from '@rocket.chat/core-typings';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { emoji, updateRecent } from '../../../emoji/client';\nimport { CachedCollectionManager } from '../../../ui-cached-collection/client';\nimport { getURL } from '../../../utils/client';\nimport { sdk } from '../../../utils/client/lib/SDKClient';\n\nconst isSetNotNull = (fn: () => unknown) => {\n\tlet value;\n\ttry {\n\t\tvalue = fn();\n\t} catch (e) {\n\t\tvalue = null;\n\t}\n\treturn value !== null && value !== undefined;\n};\n\nconst getEmojiUrlFromName = (name: string, extension: string) => {\n\tif (name == null) {\n\t\treturn;\n\t}\n\n\tconst key = `emoji_random_${name}` as const;\n\n\tconst random = (Session as unknown as { keys: Record<string, any> }).keys[key] ?? 0;\n\n\treturn getURL(`/emoji-custom/${encodeURIComponent(name)}.${extension}?_dc=${random}`);\n};\n\nexport const deleteEmojiCustom = (emojiData: IEmoji) => {\n\tdelete emoji.list[`:${emojiData.name}:`];\n\tconst arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.name);\n\tif (arrayIndex !== -1) {\n\t\temoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t}\n\tconst arrayIndexList = emoji.packages.emojiCustom.list?.indexOf(`:${emojiData.name}:`) ?? -1;\n\tif (arrayIndexList !== -1) {\n\t\temoji.packages.emojiCustom.list?.splice(arrayIndexList, 1);\n\t}\n\tif (emojiData.aliases) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\tdelete emoji.list[`:${alias}:`];\n\t\t\tconst aliasIndex = emoji.packages.emojiCustom.list?.indexOf(`:${alias}:`) ?? -1;\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\temoji.packages.emojiCustom.list?.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\tupdateRecent(['rocket']);\n};\n\nexport const updateEmojiCustom = (emojiData: IEmoji) => {\n\tconst previousExists = isSetNotNull(() => emojiData.previousName);\n\tconst currentAliases = isSetNotNull(() => emojiData.aliases);\n\n\tif (previousExists && isSetNotNull(() => emoji.list[`:${emojiData.previousName}:`].aliases)) {\n\t\tfor (const alias of emoji.list[`:${emojiData.previousName}:`].aliases ?? []) {\n\t\t\tdelete emoji.list[`:${alias}:`];\n\t\t\tconst aliasIndex = emoji.packages.emojiCustom.list?.indexOf(`:${alias}:`) ?? -1;\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\temoji.packages.emojiCustom.list?.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\tconst arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.previousName);\n\t\tif (arrayIndex !== -1) {\n\t\t\temoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t\t}\n\t\tconst arrayIndexList = emoji.packages.emojiCustom.list?.indexOf(`:${emojiData.previousName}:`) ?? -1;\n\t\tif (arrayIndexList !== -1) {\n\t\t\temoji.packages.emojiCustom.list?.splice(arrayIndexList, 1);\n\t\t}\n\t\tdelete emoji.list[`:${emojiData.previousName}:`];\n\t}\n\n\tconst categoryIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(`${emojiData.name}`);\n\tif (categoryIndex === -1) {\n\t\temoji.packages.emojiCustom.emojisByCategory.rocket.push(`${emojiData.name}`);\n\t\temoji.packages.emojiCustom.list?.push(`:${emojiData.name}:`);\n\t}\n\temoji.list[`:${emojiData.name}:`] = Object.assign({ emojiPackage: 'emojiCustom' }, emoji.list[`:${emojiData.name}:`], emojiData);\n\tif (currentAliases) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\temoji.packages.emojiCustom.list?.push(`:${alias}:`);\n\t\t\temoji.list[`:${alias}:`] = {\n\t\t\t\temojiPackage: 'emojiCustom',\n\t\t\t\taliasOf: emojiData.name,\n\t\t\t};\n\t\t}\n\t}\n\n\tupdateRecent(['rocket']);\n};\n\nconst customRender = (html: string) => {\n\tconst emojisMatchGroup = emoji.packages.emojiCustom.list?.map(escapeRegExp).join('|');\n\tif (emojisMatchGroup !== emoji.packages.emojiCustom._regexpSignature) {\n\t\temoji.packages.emojiCustom._regexpSignature = emojisMatchGroup;\n\t\temoji.packages.emojiCustom._regexp = new RegExp(\n\t\t\t`<object[^>]*>.*?<\\/object>|<span[^>]*>.*?<\\/span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(${emojisMatchGroup})`,\n\t\t\t'gi',\n\t\t);\n\t}\n\n\thtml = html.replace(emoji.packages.emojiCustom._regexp!, (shortname) => {\n\t\tif (typeof shortname === 'undefined' || shortname === '' || (emoji.packages.emojiCustom.list?.indexOf(shortname) ?? -1) === -1) {\n\t\t\treturn shortname;\n\t\t}\n\n\t\tlet emojiAlias = shortname.replace(/:/g, '');\n\n\t\tlet dataCheck = emoji.list[shortname];\n\t\tif (dataCheck.aliasOf) {\n\t\t\temojiAlias = dataCheck.aliasOf;\n\t\t\tdataCheck = emoji.list[`:${emojiAlias}:`];\n\t\t}\n\n\t\treturn `<span class=\"emoji\" style=\"background-image:url(${getEmojiUrlFromName(\n\t\t\temojiAlias,\n\t\t\tdataCheck.extension!,\n\t\t)});\" data-emoji=\"${emojiAlias}\" title=\"${shortname}\">${shortname}</span>`;\n\t});\n\n\treturn html;\n};\n\nemoji.packages.emojiCustom = {\n\temojiCategories: [{ key: 'rocket', i18n: 'Custom' }],\n\tcategoryIndex: 1,\n\ttoneList: {},\n\tlist: [],\n\t_regexpSignature: null,\n\t_regexp: null,\n\temojisByCategory: {},\n\trender: customRender,\n\trenderPicker: customRender,\n};\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(async () => {\n\t\ttry {\n\t\t\tconst {\n\t\t\t\temojis: { update: emojis },\n\t\t\t} = await sdk.rest.get('/v1/emoji-custom.list', { query: '' });\n\n\t\t\temoji.packages.emojiCustom.emojisByCategory = { rocket: [] };\n\t\t\tfor (const currentEmoji of emojis) {\n\t\t\t\temoji.packages.emojiCustom.emojisByCategory.rocket.push(currentEmoji.name);\n\t\t\t\temoji.packages.emojiCustom.list?.push(`:${currentEmoji.name}:`);\n\t\t\t\temoji.list[`:${currentEmoji.name}:`] = { ...currentEmoji, emojiPackage: 'emojiCustom' } as any;\n\t\t\t\tfor (const alias of currentEmoji.aliases) {\n\t\t\t\t\temoji.packages.emojiCustom.list?.push(`:${alias}:`);\n\t\t\t\t\temoji.list[`:${alias}:`] = {\n\t\t\t\t\t\temojiPackage: 'emojiCustom',\n\t\t\t\t\t\taliasOf: currentEmoji.name,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error('Error getting custom emoji', e);\n\t\t}\n\t}),\n);\n"]}}},"code":"var _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\nvar _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 1);\nvar _createForOfIteratorHelperLoose;\nmodule.link(\"@babel/runtime/helpers/createForOfIteratorHelperLoose\", {\n  default: function (v) {\n    _createForOfIteratorHelperLoose = v;\n  }\n}, 2);\nmodule.export({\n  deleteEmojiCustom: function () {\n    return deleteEmojiCustom;\n  },\n  updateEmojiCustom: function () {\n    return updateEmojiCustom;\n  }\n});\nvar escapeRegExp;\nmodule.link(\"@rocket.chat/string-helpers\", {\n  escapeRegExp: function (v) {\n    escapeRegExp = v;\n  }\n}, 0);\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 1);\nvar Session;\nmodule.link(\"meteor/session\", {\n  Session: function (v) {\n    Session = v;\n  }\n}, 2);\nvar emoji, updateRecent;\nmodule.link(\"../../../emoji/client\", {\n  emoji: function (v) {\n    emoji = v;\n  },\n  updateRecent: function (v) {\n    updateRecent = v;\n  }\n}, 3);\nvar CachedCollectionManager;\nmodule.link(\"../../../ui-cached-collection/client\", {\n  CachedCollectionManager: function (v) {\n    CachedCollectionManager = v;\n  }\n}, 4);\nvar getURL;\nmodule.link(\"../../../utils/client\", {\n  getURL: function (v) {\n    getURL = v;\n  }\n}, 5);\nvar sdk;\nmodule.link(\"../../../utils/client/lib/SDKClient\", {\n  sdk: function (v) {\n    sdk = v;\n  }\n}, 6);\nvar isSetNotNull = function (fn) {\n  var value;\n  try {\n    value = fn();\n  } catch (e) {\n    value = null;\n  }\n  return value !== null && value !== undefined;\n};\nvar getEmojiUrlFromName = function (name, extension) {\n  var _Session$keys$key;\n  if (name == null) {\n    return;\n  }\n  var key = \"emoji_random_\" + name;\n  var random = (_Session$keys$key = Session.keys[key]) !== null && _Session$keys$key !== void 0 ? _Session$keys$key : 0;\n  return getURL(\"/emoji-custom/\" + encodeURIComponent(name) + \".\" + extension + \"?_dc=\" + random);\n};\nvar deleteEmojiCustom = function (emojiData) {\n  var _emoji$packages$emoji, _emoji$packages$emoji2;\n  delete emoji.list[\":\" + emojiData.name + \":\"];\n  var arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.name);\n  if (arrayIndex !== -1) {\n    emoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n  }\n  var arrayIndexList = (_emoji$packages$emoji = (_emoji$packages$emoji2 = emoji.packages.emojiCustom.list) === null || _emoji$packages$emoji2 === void 0 ? void 0 : _emoji$packages$emoji2.indexOf(\":\" + emojiData.name + \":\")) !== null && _emoji$packages$emoji !== void 0 ? _emoji$packages$emoji : -1;\n  if (arrayIndexList !== -1) {\n    var _emoji$packages$emoji3;\n    (_emoji$packages$emoji3 = emoji.packages.emojiCustom.list) === null || _emoji$packages$emoji3 === void 0 ? void 0 : _emoji$packages$emoji3.splice(arrayIndexList, 1);\n  }\n  if (emojiData.aliases) {\n    for (var _iterator = _createForOfIteratorHelperLoose(emojiData.aliases), _step; !(_step = _iterator()).done;) {\n      var _emoji$packages$emoji4, _emoji$packages$emoji5;\n      var alias = _step.value;\n      delete emoji.list[\":\" + alias + \":\"];\n      var aliasIndex = (_emoji$packages$emoji4 = (_emoji$packages$emoji5 = emoji.packages.emojiCustom.list) === null || _emoji$packages$emoji5 === void 0 ? void 0 : _emoji$packages$emoji5.indexOf(\":\" + alias + \":\")) !== null && _emoji$packages$emoji4 !== void 0 ? _emoji$packages$emoji4 : -1;\n      if (aliasIndex !== -1) {\n        var _emoji$packages$emoji6;\n        (_emoji$packages$emoji6 = emoji.packages.emojiCustom.list) === null || _emoji$packages$emoji6 === void 0 ? void 0 : _emoji$packages$emoji6.splice(aliasIndex, 1);\n      }\n    }\n  }\n  updateRecent(['rocket']);\n};\nvar updateEmojiCustom = function (emojiData) {\n  var previousExists = isSetNotNull(function () {\n    return emojiData.previousName;\n  });\n  var currentAliases = isSetNotNull(function () {\n    return emojiData.aliases;\n  });\n  if (previousExists && isSetNotNull(function () {\n    return emoji.list[\":\" + emojiData.previousName + \":\"].aliases;\n  })) {\n    for (var _iterator2 = _createForOfIteratorHelperLoose((_emoji$list$aliases = emoji.list[\":\" + emojiData.previousName + \":\"].aliases) !== null && _emoji$list$aliases !== void 0 ? _emoji$list$aliases : []), _step2; !(_step2 = _iterator2()).done;) {\n      var _emoji$list$aliases, _emoji$packages$emoji7, _emoji$packages$emoji8;\n      var alias = _step2.value;\n      delete emoji.list[\":\" + alias + \":\"];\n      var aliasIndex = (_emoji$packages$emoji7 = (_emoji$packages$emoji8 = emoji.packages.emojiCustom.list) === null || _emoji$packages$emoji8 === void 0 ? void 0 : _emoji$packages$emoji8.indexOf(\":\" + alias + \":\")) !== null && _emoji$packages$emoji7 !== void 0 ? _emoji$packages$emoji7 : -1;\n      if (aliasIndex !== -1) {\n        var _emoji$packages$emoji9;\n        (_emoji$packages$emoji9 = emoji.packages.emojiCustom.list) === null || _emoji$packages$emoji9 === void 0 ? void 0 : _emoji$packages$emoji9.splice(aliasIndex, 1);\n      }\n    }\n  }\n  if (previousExists && emojiData.name !== emojiData.previousName) {\n    var _emoji$packages$emoji10, _emoji$packages$emoji11;\n    var arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.previousName);\n    if (arrayIndex !== -1) {\n      emoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n    }\n    var arrayIndexList = (_emoji$packages$emoji10 = (_emoji$packages$emoji11 = emoji.packages.emojiCustom.list) === null || _emoji$packages$emoji11 === void 0 ? void 0 : _emoji$packages$emoji11.indexOf(\":\" + emojiData.previousName + \":\")) !== null && _emoji$packages$emoji10 !== void 0 ? _emoji$packages$emoji10 : -1;\n    if (arrayIndexList !== -1) {\n      var _emoji$packages$emoji12;\n      (_emoji$packages$emoji12 = emoji.packages.emojiCustom.list) === null || _emoji$packages$emoji12 === void 0 ? void 0 : _emoji$packages$emoji12.splice(arrayIndexList, 1);\n    }\n    delete emoji.list[\":\" + emojiData.previousName + \":\"];\n  }\n  var categoryIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(\"\" + emojiData.name);\n  if (categoryIndex === -1) {\n    var _emoji$packages$emoji13;\n    emoji.packages.emojiCustom.emojisByCategory.rocket.push(\"\" + emojiData.name);\n    (_emoji$packages$emoji13 = emoji.packages.emojiCustom.list) === null || _emoji$packages$emoji13 === void 0 ? void 0 : _emoji$packages$emoji13.push(\":\" + emojiData.name + \":\");\n  }\n  emoji.list[\":\" + emojiData.name + \":\"] = Object.assign({\n    emojiPackage: 'emojiCustom'\n  }, emoji.list[\":\" + emojiData.name + \":\"], emojiData);\n  if (currentAliases) {\n    for (var _iterator3 = _createForOfIteratorHelperLoose(emojiData.aliases), _step3; !(_step3 = _iterator3()).done;) {\n      var _emoji$packages$emoji14;\n      var _alias = _step3.value;\n      (_emoji$packages$emoji14 = emoji.packages.emojiCustom.list) === null || _emoji$packages$emoji14 === void 0 ? void 0 : _emoji$packages$emoji14.push(\":\" + _alias + \":\");\n      emoji.list[\":\" + _alias + \":\"] = {\n        emojiPackage: 'emojiCustom',\n        aliasOf: emojiData.name\n      };\n    }\n  }\n  updateRecent(['rocket']);\n};\nvar customRender = function (html) {\n  var _emoji$packages$emoji15;\n  var emojisMatchGroup = (_emoji$packages$emoji15 = emoji.packages.emojiCustom.list) === null || _emoji$packages$emoji15 === void 0 ? void 0 : _emoji$packages$emoji15.map(escapeRegExp).join('|');\n  if (emojisMatchGroup !== emoji.packages.emojiCustom._regexpSignature) {\n    emoji.packages.emojiCustom._regexpSignature = emojisMatchGroup;\n    emoji.packages.emojiCustom._regexp = new RegExp(\"<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(\" + emojisMatchGroup + \")\", 'gi');\n  }\n  html = html.replace(emoji.packages.emojiCustom._regexp, function (shortname) {\n    var _emoji$packages$emoji16, _emoji$packages$emoji17;\n    if (typeof shortname === 'undefined' || shortname === '' || ((_emoji$packages$emoji16 = (_emoji$packages$emoji17 = emoji.packages.emojiCustom.list) === null || _emoji$packages$emoji17 === void 0 ? void 0 : _emoji$packages$emoji17.indexOf(shortname)) !== null && _emoji$packages$emoji16 !== void 0 ? _emoji$packages$emoji16 : -1) === -1) {\n      return shortname;\n    }\n    var emojiAlias = shortname.replace(/:/g, '');\n    var dataCheck = emoji.list[shortname];\n    if (dataCheck.aliasOf) {\n      emojiAlias = dataCheck.aliasOf;\n      dataCheck = emoji.list[\":\" + emojiAlias + \":\"];\n    }\n    return \"<span class=\\\"emoji\\\" style=\\\"background-image:url(\" + getEmojiUrlFromName(emojiAlias, dataCheck.extension) + \");\\\" data-emoji=\\\"\" + emojiAlias + \"\\\" title=\\\"\" + shortname + \"\\\">\" + shortname + \"</span>\";\n  });\n  return html;\n};\nemoji.packages.emojiCustom = {\n  emojiCategories: [{\n    key: 'rocket',\n    i18n: 'Custom'\n  }],\n  categoryIndex: 1,\n  toneList: {},\n  list: [],\n  _regexpSignature: null,\n  _regexp: null,\n  emojisByCategory: {},\n  render: customRender,\n  renderPicker: customRender\n};\nMeteor.startup(function () {\n  return CachedCollectionManager.onLogin(function () {\n    function _callee() {\n      var _await$sdk$rest$get, emojis, _iterator4, _step4, _emoji$packages$emoji18, currentEmoji, _iterator5, _step5, _emoji$packages$emoji19, alias;\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(sdk.rest.get('/v1/emoji-custom.list', {\n                query: ''\n              }));\n            case 3:\n              _await$sdk$rest$get = _context.sent;\n              emojis = _await$sdk$rest$get.emojis.update;\n              emoji.packages.emojiCustom.emojisByCategory = {\n                rocket: []\n              };\n              for (_iterator4 = _createForOfIteratorHelperLoose(emojis); !(_step4 = _iterator4()).done;) {\n                currentEmoji = _step4.value;\n                emoji.packages.emojiCustom.emojisByCategory.rocket.push(currentEmoji.name);\n                (_emoji$packages$emoji18 = emoji.packages.emojiCustom.list) === null || _emoji$packages$emoji18 === void 0 ? void 0 : _emoji$packages$emoji18.push(\":\" + currentEmoji.name + \":\");\n                emoji.list[\":\" + currentEmoji.name + \":\"] = _objectSpread(_objectSpread({}, currentEmoji), {}, {\n                  emojiPackage: 'emojiCustom'\n                });\n                for (_iterator5 = _createForOfIteratorHelperLoose(currentEmoji.aliases); !(_step5 = _iterator5()).done;) {\n                  alias = _step5.value;\n                  (_emoji$packages$emoji19 = emoji.packages.emojiCustom.list) === null || _emoji$packages$emoji19 === void 0 ? void 0 : _emoji$packages$emoji19.push(\":\" + alias + \":\");\n                  emoji.list[\":\" + alias + \":\"] = {\n                    emojiPackage: 'emojiCustom',\n                    aliasOf: currentEmoji.name\n                  };\n                }\n              }\n              _context.next = 12;\n              break;\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('Error getting custom emoji', _context.t0);\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n        return _callee$;\n      }(), null, null, [[0, 9]], Promise);\n    }\n    return _callee;\n  }());\n});","map":{"version":3,"names":["_regeneratorRuntime","module","link","default","v","_objectSpread","_createForOfIteratorHelperLoose","export","deleteEmojiCustom","updateEmojiCustom","escapeRegExp","Meteor","Session","emoji","updateRecent","CachedCollectionManager","getURL","sdk","isSetNotNull","fn","value","e","undefined","getEmojiUrlFromName","name","extension","_Session$keys$key","key","random","keys","encodeURIComponent","emojiData","_emoji$packages$emoji","_emoji$packages$emoji2","list","arrayIndex","packages","emojiCustom","emojisByCategory","rocket","indexOf","splice","arrayIndexList","_emoji$packages$emoji3","aliases","_iterator","_step","done","_emoji$packages$emoji4","_emoji$packages$emoji5","alias","aliasIndex","_emoji$packages$emoji6","previousExists","previousName","currentAliases","_iterator2","_emoji$list$aliases","_step2","_emoji$packages$emoji7","_emoji$packages$emoji8","_emoji$packages$emoji9","_emoji$packages$emoji10","_emoji$packages$emoji11","_emoji$packages$emoji12","categoryIndex","_emoji$packages$emoji13","push","Object","assign","emojiPackage","_iterator3","_step3","_emoji$packages$emoji14","aliasOf","customRender","html","_emoji$packages$emoji15","emojisMatchGroup","map","join","_regexpSignature","_regexp","RegExp","replace","shortname","_emoji$packages$emoji16","_emoji$packages$emoji17","emojiAlias","dataCheck","emojiCategories","i18n","toneList","render","renderPicker","startup","onLogin","_callee","_await$sdk$rest$get","emojis","_iterator4","_step4","_emoji$packages$emoji18","currentEmoji","_iterator5","_step5","_emoji$packages$emoji19","async","_callee$","_context","prev","next","awrap","rest","get","query","sent","update","t0","console","error","stop","Promise"],"sources":["app/emoji-custom/client/lib/emojiCustom.ts"],"sourcesContent":["import type { IEmoji } from '@rocket.chat/core-typings';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { emoji, updateRecent } from '../../../emoji/client';\nimport { CachedCollectionManager } from '../../../ui-cached-collection/client';\nimport { getURL } from '../../../utils/client';\nimport { sdk } from '../../../utils/client/lib/SDKClient';\n\nconst isSetNotNull = (fn: () => unknown) => {\n\tlet value;\n\ttry {\n\t\tvalue = fn();\n\t} catch (e) {\n\t\tvalue = null;\n\t}\n\treturn value !== null && value !== undefined;\n};\n\nconst getEmojiUrlFromName = (name: string, extension: string) => {\n\tif (name == null) {\n\t\treturn;\n\t}\n\n\tconst key = `emoji_random_${name}` as const;\n\n\tconst random = (Session as unknown as { keys: Record<string, any> }).keys[key] ?? 0;\n\n\treturn getURL(`/emoji-custom/${encodeURIComponent(name)}.${extension}?_dc=${random}`);\n};\n\nexport const deleteEmojiCustom = (emojiData: IEmoji) => {\n\tdelete emoji.list[`:${emojiData.name}:`];\n\tconst arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.name);\n\tif (arrayIndex !== -1) {\n\t\temoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t}\n\tconst arrayIndexList = emoji.packages.emojiCustom.list?.indexOf(`:${emojiData.name}:`) ?? -1;\n\tif (arrayIndexList !== -1) {\n\t\temoji.packages.emojiCustom.list?.splice(arrayIndexList, 1);\n\t}\n\tif (emojiData.aliases) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\tdelete emoji.list[`:${alias}:`];\n\t\t\tconst aliasIndex = emoji.packages.emojiCustom.list?.indexOf(`:${alias}:`) ?? -1;\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\temoji.packages.emojiCustom.list?.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\tupdateRecent(['rocket']);\n};\n\nexport const updateEmojiCustom = (emojiData: IEmoji) => {\n\tconst previousExists = isSetNotNull(() => emojiData.previousName);\n\tconst currentAliases = isSetNotNull(() => emojiData.aliases);\n\n\tif (previousExists && isSetNotNull(() => emoji.list[`:${emojiData.previousName}:`].aliases)) {\n\t\tfor (const alias of emoji.list[`:${emojiData.previousName}:`].aliases ?? []) {\n\t\t\tdelete emoji.list[`:${alias}:`];\n\t\t\tconst aliasIndex = emoji.packages.emojiCustom.list?.indexOf(`:${alias}:`) ?? -1;\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\temoji.packages.emojiCustom.list?.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\tconst arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.previousName);\n\t\tif (arrayIndex !== -1) {\n\t\t\temoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t\t}\n\t\tconst arrayIndexList = emoji.packages.emojiCustom.list?.indexOf(`:${emojiData.previousName}:`) ?? -1;\n\t\tif (arrayIndexList !== -1) {\n\t\t\temoji.packages.emojiCustom.list?.splice(arrayIndexList, 1);\n\t\t}\n\t\tdelete emoji.list[`:${emojiData.previousName}:`];\n\t}\n\n\tconst categoryIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(`${emojiData.name}`);\n\tif (categoryIndex === -1) {\n\t\temoji.packages.emojiCustom.emojisByCategory.rocket.push(`${emojiData.name}`);\n\t\temoji.packages.emojiCustom.list?.push(`:${emojiData.name}:`);\n\t}\n\temoji.list[`:${emojiData.name}:`] = Object.assign({ emojiPackage: 'emojiCustom' }, emoji.list[`:${emojiData.name}:`], emojiData);\n\tif (currentAliases) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\temoji.packages.emojiCustom.list?.push(`:${alias}:`);\n\t\t\temoji.list[`:${alias}:`] = {\n\t\t\t\temojiPackage: 'emojiCustom',\n\t\t\t\taliasOf: emojiData.name,\n\t\t\t};\n\t\t}\n\t}\n\n\tupdateRecent(['rocket']);\n};\n\nconst customRender = (html: string) => {\n\tconst emojisMatchGroup = emoji.packages.emojiCustom.list?.map(escapeRegExp).join('|');\n\tif (emojisMatchGroup !== emoji.packages.emojiCustom._regexpSignature) {\n\t\temoji.packages.emojiCustom._regexpSignature = emojisMatchGroup;\n\t\temoji.packages.emojiCustom._regexp = new RegExp(\n\t\t\t`<object[^>]*>.*?<\\/object>|<span[^>]*>.*?<\\/span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(${emojisMatchGroup})`,\n\t\t\t'gi',\n\t\t);\n\t}\n\n\thtml = html.replace(emoji.packages.emojiCustom._regexp!, (shortname) => {\n\t\tif (typeof shortname === 'undefined' || shortname === '' || (emoji.packages.emojiCustom.list?.indexOf(shortname) ?? -1) === -1) {\n\t\t\treturn shortname;\n\t\t}\n\n\t\tlet emojiAlias = shortname.replace(/:/g, '');\n\n\t\tlet dataCheck = emoji.list[shortname];\n\t\tif (dataCheck.aliasOf) {\n\t\t\temojiAlias = dataCheck.aliasOf;\n\t\t\tdataCheck = emoji.list[`:${emojiAlias}:`];\n\t\t}\n\n\t\treturn `<span class=\"emoji\" style=\"background-image:url(${getEmojiUrlFromName(\n\t\t\temojiAlias,\n\t\t\tdataCheck.extension!,\n\t\t)});\" data-emoji=\"${emojiAlias}\" title=\"${shortname}\">${shortname}</span>`;\n\t});\n\n\treturn html;\n};\n\nemoji.packages.emojiCustom = {\n\temojiCategories: [{ key: 'rocket', i18n: 'Custom' }],\n\tcategoryIndex: 1,\n\ttoneList: {},\n\tlist: [],\n\t_regexpSignature: null,\n\t_regexp: null,\n\temojisByCategory: {},\n\trender: customRender,\n\trenderPicker: customRender,\n};\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(async () => {\n\t\ttry {\n\t\t\tconst {\n\t\t\t\temojis: { update: emojis },\n\t\t\t} = await sdk.rest.get('/v1/emoji-custom.list', { query: '' });\n\n\t\t\temoji.packages.emojiCustom.emojisByCategory = { rocket: [] };\n\t\t\tfor (const currentEmoji of emojis) {\n\t\t\t\temoji.packages.emojiCustom.emojisByCategory.rocket.push(currentEmoji.name);\n\t\t\t\temoji.packages.emojiCustom.list?.push(`:${currentEmoji.name}:`);\n\t\t\t\temoji.list[`:${currentEmoji.name}:`] = { ...currentEmoji, emojiPackage: 'emojiCustom' } as any;\n\t\t\t\tfor (const alias of currentEmoji.aliases) {\n\t\t\t\t\temoji.packages.emojiCustom.list?.push(`:${alias}:`);\n\t\t\t\t\temoji.list[`:${alias}:`] = {\n\t\t\t\t\t\temojiPackage: 'emojiCustom',\n\t\t\t\t\t\taliasOf: currentEmoji.name,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error('Error getting custom emoji', e);\n\t\t}\n\t}),\n);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"aaab2acfab49ed340c997674cd63292962ccbf1b"}
