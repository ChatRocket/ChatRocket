{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebar/RoomList/SideBarItemTemplateWithData.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/sidebar/RoomList/SideBarItemTemplateWithData.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebar/RoomList/SideBarItemTemplateWithData.tsx","inputSourceMap":{"version":3,"file":"client/sidebar/RoomList/SideBarItemTemplateWithData.tsx","sourceRoot":"","sources":["client/sidebar/RoomList/SideBarItemTemplateWithData.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, IRoom, ISubscription } from '@rocket.chat/core-typings';\nimport { isDirectMessageRoom, isMultipleDirectMessageRoom, isOmnichannelRoom, isVideoConfMessage } from '@rocket.chat/core-typings';\nimport { Badge, Sidebar, SidebarItemAction, SidebarItemActions, Margins } from '@rocket.chat/fuselage';\nimport { useLayout } from '@rocket.chat/ui-contexts';\nimport type { TFunction } from 'i18next';\nimport type { AllHTMLAttributes, ComponentType, ReactElement, ReactNode } from 'react';\nimport React, { memo, useMemo } from 'react';\n\nimport { normalizeSidebarMessage } from './normalizeSidebarMessage';\nimport { RoomIcon } from '../../components/RoomIcon';\nimport { roomCoordinator } from '../../lib/rooms/roomCoordinator';\nimport { isIOsDevice } from '../../lib/utils/isIOsDevice';\nimport { useOmnichannelPriorities } from '../../omnichannel/hooks/useOmnichannelPriorities';\nimport RoomMenu from '../RoomMenu';\nimport { OmnichannelBadges } from '../badges/OmnichannelBadges';\nimport type { useAvatarTemplate } from '../hooks/useAvatarTemplate';\n\nconst getMessage = (room: IRoom, lastMessage: IMessage | undefined, t: TFunction): string | undefined => {\n\tif (!lastMessage) {\n\t\treturn t('No_messages_yet');\n\t}\n\tif (isVideoConfMessage(lastMessage)) {\n\t\treturn t('Call_started');\n\t}\n\tif (!lastMessage.u) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\tif (lastMessage.u?.username === room.u?.username) {\n\t\treturn `${t('You')}: ${normalizeSidebarMessage(lastMessage, t)}`;\n\t}\n\tif (isDirectMessageRoom(room) && !isMultipleDirectMessageRoom(room)) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\treturn `${lastMessage.u.name || lastMessage.u.username}: ${normalizeSidebarMessage(lastMessage, t)}`;\n};\n\nconst getBadgeTitle = (userMentions: number, threadUnread: number, groupMentions: number, unread: number, t: TFunction) => {\n\tconst title = [] as string[];\n\tif (userMentions) {\n\t\ttitle.push(t('mentions_counter', { count: userMentions }));\n\t}\n\tif (threadUnread) {\n\t\ttitle.push(t('threads_counter', { count: threadUnread }));\n\t}\n\tif (groupMentions) {\n\t\ttitle.push(t('group_mentions_counter', { count: groupMentions }));\n\t}\n\tconst count = unread - userMentions - groupMentions;\n\tif (count > 0) {\n\t\ttitle.push(t('unread_messages_counter', { count }));\n\t}\n\treturn title.join(', ');\n};\n\ntype RoomListRowProps = {\n\textended: boolean;\n\tt: TFunction;\n\tSideBarItemTemplate: ComponentType<\n\t\t{\n\t\t\ticon: ReactNode;\n\t\t\ttitle: ReactNode;\n\t\t\tavatar: ReactNode;\n\t\t\tactions: unknown;\n\t\t\thref: string;\n\t\t\ttime?: Date;\n\t\t\tmenu?: ReactNode;\n\t\t\tmenuOptions?: unknown;\n\t\t\tsubtitle?: ReactNode;\n\t\t\ttitleIcon?: string;\n\t\t\tbadges?: ReactNode;\n\t\t\tthreadUnread?: boolean;\n\t\t\tunread?: boolean;\n\t\t\tselected?: boolean;\n\t\t\tis?: string;\n\t\t} & AllHTMLAttributes<HTMLElement>\n\t>;\n\tAvatarTemplate: ReturnType<typeof useAvatarTemplate>;\n\topenedRoom?: string;\n\t// sidebarViewMode: 'extended';\n\tisAnonymous?: boolean;\n\n\troom: ISubscription & IRoom;\n\tid?: string;\n\t/* @deprecated */\n\tstyle?: AllHTMLAttributes<HTMLElement>['style'];\n\n\tselected?: boolean;\n\n\tsidebarViewMode?: unknown;\n\tvideoConfActions?: {\n\t\t[action: string]: () => void;\n\t};\n};\n\nfunction SideBarItemTemplateWithData({\n\troom,\n\tid,\n\tselected,\n\tstyle,\n\textended,\n\tSideBarItemTemplate,\n\tAvatarTemplate,\n\tt,\n\tisAnonymous,\n\tvideoConfActions,\n}: RoomListRowProps): ReactElement {\n\tconst { sidebar } = useLayout();\n\n\tconst href = roomCoordinator.getRouteLink(room.t, room) || '';\n\tconst title = roomCoordinator.getRoomName(room.t, room) || '';\n\n\tconst {\n\t\tlastMessage,\n\t\thideUnreadStatus,\n\t\thideMentionStatus,\n\t\tunread = 0,\n\t\talert,\n\t\tuserMentions,\n\t\tgroupMentions,\n\t\ttunread = [],\n\t\ttunreadUser = [],\n\t\trid,\n\t\tt: type,\n\t\tcl,\n\t} = room;\n\n\tconst highlighted = Boolean(!hideUnreadStatus && (alert || unread));\n\tconst icon = (\n\t\t// TODO: Remove icon='at'\n\t\t<Sidebar.Item.Icon highlighted={highlighted} icon='at'>\n\t\t\t<RoomIcon room={room} placement='sidebar' isIncomingCall={Boolean(videoConfActions)} />\n\t\t</Sidebar.Item.Icon>\n\t);\n\n\tconst actions = useMemo(\n\t\t() =>\n\t\t\tvideoConfActions && (\n\t\t\t\t<SidebarItemActions>\n\t\t\t\t\t<SidebarItemAction onClick={videoConfActions.acceptCall} secondary success icon='phone' />\n\t\t\t\t\t<SidebarItemAction onClick={videoConfActions.rejectCall} secondary danger icon='phone-off' />\n\t\t\t\t</SidebarItemActions>\n\t\t\t),\n\t\t[videoConfActions],\n\t);\n\n\tconst isQueued = isOmnichannelRoom(room) && room.status === 'queued';\n\tconst { enabled: isPriorityEnabled } = useOmnichannelPriorities();\n\n\tconst message = extended && getMessage(room, lastMessage, t);\n\tconst subtitle = message ? <span className='message-body--unstyled' dangerouslySetInnerHTML={{ __html: message }} /> : null;\n\n\tconst threadUnread = tunread.length > 0;\n\tconst variant =\n\t\t((userMentions || tunreadUser.length) && 'danger') || (threadUnread && 'primary') || (groupMentions && 'warning') || 'secondary';\n\n\tconst isUnread = unread > 0 || threadUnread;\n\tconst showBadge = !hideUnreadStatus || (!hideMentionStatus && (Boolean(userMentions) || tunreadUser.length > 0));\n\n\tconst badgeTitle = getBadgeTitle(userMentions, tunread.length, groupMentions, unread, t);\n\n\tconst badges = (\n\t\t<Margins inlineStart={8}>\n\t\t\t{showBadge && isUnread && (\n\t\t\t\t<Badge role='status' {...({ style: { display: 'inline-flex', flexShrink: 0 } } as any)} variant={variant} title={badgeTitle}>\n\t\t\t\t\t{unread + tunread?.length}\n\t\t\t\t</Badge>\n\t\t\t)}\n\t\t\t{isOmnichannelRoom(room) && <OmnichannelBadges room={room} />}\n\t\t</Margins>\n\t);\n\n\treturn (\n\t\t<SideBarItemTemplate\n\t\t\tis='a'\n\t\t\tid={id}\n\t\t\tdata-qa='sidebar-item'\n\t\t\tdata-unread={highlighted}\n\t\t\tunread={highlighted}\n\t\t\tselected={selected}\n\t\t\thref={href}\n\t\t\tonClick={(): void => {\n\t\t\t\t!selected && sidebar.toggle();\n\t\t\t}}\n\t\t\taria-label={title}\n\t\t\ttitle={title}\n\t\t\ttime={lastMessage?.ts}\n\t\t\tsubtitle={subtitle}\n\t\t\ticon={icon}\n\t\t\tstyle={style}\n\t\t\tbadges={badges}\n\t\t\tavatar={AvatarTemplate && <AvatarTemplate {...room} />}\n\t\t\tactions={actions}\n\t\t\tmenu={\n\t\t\t\t!isIOsDevice &&\n\t\t\t\t!isAnonymous &&\n\t\t\t\t(!isQueued || (isQueued && isPriorityEnabled)) &&\n\t\t\t\t((): ReactElement => (\n\t\t\t\t\t<RoomMenu\n\t\t\t\t\t\talert={alert}\n\t\t\t\t\t\tthreadUnread={threadUnread}\n\t\t\t\t\t\trid={rid}\n\t\t\t\t\t\tunread={!!unread}\n\t\t\t\t\t\troomOpen={selected}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tcl={cl}\n\t\t\t\t\t\tname={title}\n\t\t\t\t\t\thideDefaultOptions={isQueued}\n\t\t\t\t\t/>\n\t\t\t\t))\n\t\t\t}\n\t\t/>\n\t);\n}\n\nfunction safeDateNotEqualCheck(a: Date | string | undefined, b: Date | string | undefined): boolean {\n\tif (!a || !b) {\n\t\treturn a !== b;\n\t}\n\treturn new Date(a).toISOString() !== new Date(b).toISOString();\n}\n\nconst keys: (keyof RoomListRowProps)[] = [\n\t'id',\n\t'style',\n\t'extended',\n\t'selected',\n\t'SideBarItemTemplate',\n\t'AvatarTemplate',\n\t't',\n\t'sidebarViewMode',\n\t'videoConfActions',\n];\n\n// eslint-disable-next-line react/no-multi-comp\nexport default memo(SideBarItemTemplateWithData, (prevProps, nextProps) => {\n\tif (keys.some((key) => prevProps[key] !== nextProps[key])) {\n\t\treturn false;\n\t}\n\n\tif (prevProps.room === nextProps.room) {\n\t\treturn true;\n\t}\n\n\tif (prevProps.room._id !== nextProps.room._id) {\n\t\treturn false;\n\t}\n\tif (prevProps.room._updatedAt?.toISOString() !== nextProps.room._updatedAt?.toISOString()) {\n\t\treturn false;\n\t}\n\tif (safeDateNotEqualCheck(prevProps.room.lastMessage?._updatedAt, nextProps.room.lastMessage?._updatedAt)) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.alert !== nextProps.room.alert) {\n\t\treturn false;\n\t}\n\tif (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && prevProps.room?.v?.status !== nextProps.room?.v?.status) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.teamMain !== nextProps.room.teamMain) {\n\t\treturn false;\n\t}\n\n\tif (\n\t\tisOmnichannelRoom(prevProps.room) &&\n\t\tisOmnichannelRoom(nextProps.room) &&\n\t\tprevProps.room.priorityWeight !== nextProps.room.priorityWeight\n\t) {\n\t\treturn false;\n\t}\n\n\treturn true;\n});\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebar/RoomList/SideBarItemTemplateWithData.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/sidebar/RoomList/SideBarItemTemplateWithData.tsx","inputSourceMap":{"version":3,"file":"client/sidebar/RoomList/SideBarItemTemplateWithData.tsx","sourceRoot":"","sources":["client/sidebar/RoomList/SideBarItemTemplateWithData.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, IRoom, ISubscription } from '@rocket.chat/core-typings';\nimport { isDirectMessageRoom, isMultipleDirectMessageRoom, isOmnichannelRoom, isVideoConfMessage } from '@rocket.chat/core-typings';\nimport { Badge, Sidebar, SidebarItemAction, SidebarItemActions, Margins } from '@rocket.chat/fuselage';\nimport { useLayout } from '@rocket.chat/ui-contexts';\nimport type { TFunction } from 'i18next';\nimport type { AllHTMLAttributes, ComponentType, ReactElement, ReactNode } from 'react';\nimport React, { memo, useMemo } from 'react';\n\nimport { normalizeSidebarMessage } from './normalizeSidebarMessage';\nimport { RoomIcon } from '../../components/RoomIcon';\nimport { roomCoordinator } from '../../lib/rooms/roomCoordinator';\nimport { isIOsDevice } from '../../lib/utils/isIOsDevice';\nimport { useOmnichannelPriorities } from '../../omnichannel/hooks/useOmnichannelPriorities';\nimport RoomMenu from '../RoomMenu';\nimport { OmnichannelBadges } from '../badges/OmnichannelBadges';\nimport type { useAvatarTemplate } from '../hooks/useAvatarTemplate';\n\nconst getMessage = (room: IRoom, lastMessage: IMessage | undefined, t: TFunction): string | undefined => {\n\tif (!lastMessage) {\n\t\treturn t('No_messages_yet');\n\t}\n\tif (isVideoConfMessage(lastMessage)) {\n\t\treturn t('Call_started');\n\t}\n\tif (!lastMessage.u) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\tif (lastMessage.u?.username === room.u?.username) {\n\t\treturn `${t('You')}: ${normalizeSidebarMessage(lastMessage, t)}`;\n\t}\n\tif (isDirectMessageRoom(room) && !isMultipleDirectMessageRoom(room)) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\treturn `${lastMessage.u.name || lastMessage.u.username}: ${normalizeSidebarMessage(lastMessage, t)}`;\n};\n\nconst getBadgeTitle = (userMentions: number, threadUnread: number, groupMentions: number, unread: number, t: TFunction) => {\n\tconst title = [] as string[];\n\tif (userMentions) {\n\t\ttitle.push(t('mentions_counter', { count: userMentions }));\n\t}\n\tif (threadUnread) {\n\t\ttitle.push(t('threads_counter', { count: threadUnread }));\n\t}\n\tif (groupMentions) {\n\t\ttitle.push(t('group_mentions_counter', { count: groupMentions }));\n\t}\n\tconst count = unread - userMentions - groupMentions;\n\tif (count > 0) {\n\t\ttitle.push(t('unread_messages_counter', { count }));\n\t}\n\treturn title.join(', ');\n};\n\ntype RoomListRowProps = {\n\textended: boolean;\n\tt: TFunction;\n\tSideBarItemTemplate: ComponentType<\n\t\t{\n\t\t\ticon: ReactNode;\n\t\t\ttitle: ReactNode;\n\t\t\tavatar: ReactNode;\n\t\t\tactions: unknown;\n\t\t\thref: string;\n\t\t\ttime?: Date;\n\t\t\tmenu?: ReactNode;\n\t\t\tmenuOptions?: unknown;\n\t\t\tsubtitle?: ReactNode;\n\t\t\ttitleIcon?: string;\n\t\t\tbadges?: ReactNode;\n\t\t\tthreadUnread?: boolean;\n\t\t\tunread?: boolean;\n\t\t\tselected?: boolean;\n\t\t\tis?: string;\n\t\t} & AllHTMLAttributes<HTMLElement>\n\t>;\n\tAvatarTemplate: ReturnType<typeof useAvatarTemplate>;\n\topenedRoom?: string;\n\t// sidebarViewMode: 'extended';\n\tisAnonymous?: boolean;\n\n\troom: ISubscription & IRoom;\n\tid?: string;\n\t/* @deprecated */\n\tstyle?: AllHTMLAttributes<HTMLElement>['style'];\n\n\tselected?: boolean;\n\n\tsidebarViewMode?: unknown;\n\tvideoConfActions?: {\n\t\t[action: string]: () => void;\n\t};\n};\n\nfunction SideBarItemTemplateWithData({\n\troom,\n\tid,\n\tselected,\n\tstyle,\n\textended,\n\tSideBarItemTemplate,\n\tAvatarTemplate,\n\tt,\n\tisAnonymous,\n\tvideoConfActions,\n}: RoomListRowProps): ReactElement {\n\tconst { sidebar } = useLayout();\n\n\tconst href = roomCoordinator.getRouteLink(room.t, room) || '';\n\tconst title = roomCoordinator.getRoomName(room.t, room) || '';\n\n\tconst {\n\t\tlastMessage,\n\t\thideUnreadStatus,\n\t\thideMentionStatus,\n\t\tunread = 0,\n\t\talert,\n\t\tuserMentions,\n\t\tgroupMentions,\n\t\ttunread = [],\n\t\ttunreadUser = [],\n\t\trid,\n\t\tt: type,\n\t\tcl,\n\t} = room;\n\n\tconst highlighted = Boolean(!hideUnreadStatus && (alert || unread));\n\tconst icon = (\n\t\t// TODO: Remove icon='at'\n\t\t<Sidebar.Item.Icon highlighted={highlighted} icon='at'>\n\t\t\t<RoomIcon room={room} placement='sidebar' isIncomingCall={Boolean(videoConfActions)} />\n\t\t</Sidebar.Item.Icon>\n\t);\n\n\tconst actions = useMemo(\n\t\t() =>\n\t\t\tvideoConfActions && (\n\t\t\t\t<SidebarItemActions>\n\t\t\t\t\t<SidebarItemAction onClick={videoConfActions.acceptCall} secondary success icon='phone' />\n\t\t\t\t\t<SidebarItemAction onClick={videoConfActions.rejectCall} secondary danger icon='phone-off' />\n\t\t\t\t</SidebarItemActions>\n\t\t\t),\n\t\t[videoConfActions],\n\t);\n\n\tconst isQueued = isOmnichannelRoom(room) && room.status === 'queued';\n\tconst { enabled: isPriorityEnabled } = useOmnichannelPriorities();\n\n\tconst message = extended && getMessage(room, lastMessage, t);\n\tconst subtitle = message ? <span className='message-body--unstyled' dangerouslySetInnerHTML={{ __html: message }} /> : null;\n\n\tconst threadUnread = tunread.length > 0;\n\tconst variant =\n\t\t((userMentions || tunreadUser.length) && 'danger') || (threadUnread && 'primary') || (groupMentions && 'warning') || 'secondary';\n\n\tconst isUnread = unread > 0 || threadUnread;\n\tconst showBadge = !hideUnreadStatus || (!hideMentionStatus && (Boolean(userMentions) || tunreadUser.length > 0));\n\n\tconst badgeTitle = getBadgeTitle(userMentions, tunread.length, groupMentions, unread, t);\n\n\tconst badges = (\n\t\t<Margins inlineStart={8}>\n\t\t\t{showBadge && isUnread && (\n\t\t\t\t<Badge role='status' {...({ style: { display: 'inline-flex', flexShrink: 0 } } as any)} variant={variant} title={badgeTitle}>\n\t\t\t\t\t{unread + tunread?.length}\n\t\t\t\t</Badge>\n\t\t\t)}\n\t\t\t{isOmnichannelRoom(room) && <OmnichannelBadges room={room} />}\n\t\t</Margins>\n\t);\n\n\treturn (\n\t\t<SideBarItemTemplate\n\t\t\tis='a'\n\t\t\tid={id}\n\t\t\tdata-qa='sidebar-item'\n\t\t\tdata-unread={highlighted}\n\t\t\tunread={highlighted}\n\t\t\tselected={selected}\n\t\t\thref={href}\n\t\t\tonClick={(): void => {\n\t\t\t\t!selected && sidebar.toggle();\n\t\t\t}}\n\t\t\taria-label={title}\n\t\t\ttitle={title}\n\t\t\ttime={lastMessage?.ts}\n\t\t\tsubtitle={subtitle}\n\t\t\ticon={icon}\n\t\t\tstyle={style}\n\t\t\tbadges={badges}\n\t\t\tavatar={AvatarTemplate && <AvatarTemplate {...room} />}\n\t\t\tactions={actions}\n\t\t\tmenu={\n\t\t\t\t!isIOsDevice &&\n\t\t\t\t!isAnonymous &&\n\t\t\t\t(!isQueued || (isQueued && isPriorityEnabled)) &&\n\t\t\t\t((): ReactElement => (\n\t\t\t\t\t<RoomMenu\n\t\t\t\t\t\talert={alert}\n\t\t\t\t\t\tthreadUnread={threadUnread}\n\t\t\t\t\t\trid={rid}\n\t\t\t\t\t\tunread={!!unread}\n\t\t\t\t\t\troomOpen={selected}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tcl={cl}\n\t\t\t\t\t\tname={title}\n\t\t\t\t\t\thideDefaultOptions={isQueued}\n\t\t\t\t\t/>\n\t\t\t\t))\n\t\t\t}\n\t\t/>\n\t);\n}\n\nfunction safeDateNotEqualCheck(a: Date | string | undefined, b: Date | string | undefined): boolean {\n\tif (!a || !b) {\n\t\treturn a !== b;\n\t}\n\treturn new Date(a).toISOString() !== new Date(b).toISOString();\n}\n\nconst keys: (keyof RoomListRowProps)[] = [\n\t'id',\n\t'style',\n\t'extended',\n\t'selected',\n\t'SideBarItemTemplate',\n\t'AvatarTemplate',\n\t't',\n\t'sidebarViewMode',\n\t'videoConfActions',\n];\n\n// eslint-disable-next-line react/no-multi-comp\nexport default memo(SideBarItemTemplateWithData, (prevProps, nextProps) => {\n\tif (keys.some((key) => prevProps[key] !== nextProps[key])) {\n\t\treturn false;\n\t}\n\n\tif (prevProps.room === nextProps.room) {\n\t\treturn true;\n\t}\n\n\tif (prevProps.room._id !== nextProps.room._id) {\n\t\treturn false;\n\t}\n\tif (prevProps.room._updatedAt?.toISOString() !== nextProps.room._updatedAt?.toISOString()) {\n\t\treturn false;\n\t}\n\tif (safeDateNotEqualCheck(prevProps.room.lastMessage?._updatedAt, nextProps.room.lastMessage?._updatedAt)) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.alert !== nextProps.room.alert) {\n\t\treturn false;\n\t}\n\tif (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && prevProps.room?.v?.status !== nextProps.room?.v?.status) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.teamMain !== nextProps.room.teamMain) {\n\t\treturn false;\n\t}\n\n\tif (\n\t\tisOmnichannelRoom(prevProps.room) &&\n\t\tisOmnichannelRoom(nextProps.room) &&\n\t\tprevProps.room.priorityWeight !== nextProps.room.priorityWeight\n\t) {\n\t\treturn false;\n\t}\n\n\treturn true;\n});\n"]}}},"code":"let isDirectMessageRoom, isMultipleDirectMessageRoom, isOmnichannelRoom, isVideoConfMessage;\nmodule.link(\"@rocket.chat/core-typings\", {\n  isDirectMessageRoom(v) {\n    isDirectMessageRoom = v;\n  },\n  isMultipleDirectMessageRoom(v) {\n    isMultipleDirectMessageRoom = v;\n  },\n  isOmnichannelRoom(v) {\n    isOmnichannelRoom = v;\n  },\n  isVideoConfMessage(v) {\n    isVideoConfMessage = v;\n  }\n}, 0);\nlet Badge, Sidebar, SidebarItemAction, SidebarItemActions, Margins;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Badge(v) {\n    Badge = v;\n  },\n  Sidebar(v) {\n    Sidebar = v;\n  },\n  SidebarItemAction(v) {\n    SidebarItemAction = v;\n  },\n  SidebarItemActions(v) {\n    SidebarItemActions = v;\n  },\n  Margins(v) {\n    Margins = v;\n  }\n}, 1);\nlet useLayout;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useLayout(v) {\n    useLayout = v;\n  }\n}, 2);\nlet React, memo, useMemo;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  memo(v) {\n    memo = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  }\n}, 3);\nlet normalizeSidebarMessage;\nmodule.link(\"./normalizeSidebarMessage\", {\n  normalizeSidebarMessage(v) {\n    normalizeSidebarMessage = v;\n  }\n}, 4);\nlet RoomIcon;\nmodule.link(\"../../components/RoomIcon\", {\n  RoomIcon(v) {\n    RoomIcon = v;\n  }\n}, 5);\nlet roomCoordinator;\nmodule.link(\"../../lib/rooms/roomCoordinator\", {\n  roomCoordinator(v) {\n    roomCoordinator = v;\n  }\n}, 6);\nlet isIOsDevice;\nmodule.link(\"../../lib/utils/isIOsDevice\", {\n  isIOsDevice(v) {\n    isIOsDevice = v;\n  }\n}, 7);\nlet useOmnichannelPriorities;\nmodule.link(\"../../omnichannel/hooks/useOmnichannelPriorities\", {\n  useOmnichannelPriorities(v) {\n    useOmnichannelPriorities = v;\n  }\n}, 8);\nlet RoomMenu;\nmodule.link(\"../RoomMenu\", {\n  default(v) {\n    RoomMenu = v;\n  }\n}, 9);\nlet OmnichannelBadges;\nmodule.link(\"../badges/OmnichannelBadges\", {\n  OmnichannelBadges(v) {\n    OmnichannelBadges = v;\n  }\n}, 10);\nconst getMessage = (room, lastMessage, t) => {\n  var _lastMessage$u, _room$u;\n  if (!lastMessage) {\n    return t('No_messages_yet');\n  }\n  if (isVideoConfMessage(lastMessage)) {\n    return t('Call_started');\n  }\n  if (!lastMessage.u) {\n    return normalizeSidebarMessage(lastMessage, t);\n  }\n  if (((_lastMessage$u = lastMessage.u) === null || _lastMessage$u === void 0 ? void 0 : _lastMessage$u.username) === ((_room$u = room.u) === null || _room$u === void 0 ? void 0 : _room$u.username)) {\n    return \"\".concat(t('You'), \": \").concat(normalizeSidebarMessage(lastMessage, t));\n  }\n  if (isDirectMessageRoom(room) && !isMultipleDirectMessageRoom(room)) {\n    return normalizeSidebarMessage(lastMessage, t);\n  }\n  return \"\".concat(lastMessage.u.name || lastMessage.u.username, \": \").concat(normalizeSidebarMessage(lastMessage, t));\n};\nconst getBadgeTitle = (userMentions, threadUnread, groupMentions, unread, t) => {\n  const title = [];\n  if (userMentions) {\n    title.push(t('mentions_counter', {\n      count: userMentions\n    }));\n  }\n  if (threadUnread) {\n    title.push(t('threads_counter', {\n      count: threadUnread\n    }));\n  }\n  if (groupMentions) {\n    title.push(t('group_mentions_counter', {\n      count: groupMentions\n    }));\n  }\n  const count = unread - userMentions - groupMentions;\n  if (count > 0) {\n    title.push(t('unread_messages_counter', {\n      count\n    }));\n  }\n  return title.join(', ');\n};\nfunction SideBarItemTemplateWithData(_ref) {\n  let {\n    room,\n    id,\n    selected,\n    style,\n    extended,\n    SideBarItemTemplate,\n    AvatarTemplate,\n    t,\n    isAnonymous,\n    videoConfActions\n  } = _ref;\n  const {\n    sidebar\n  } = useLayout();\n  const href = roomCoordinator.getRouteLink(room.t, room) || '';\n  const title = roomCoordinator.getRoomName(room.t, room) || '';\n  const {\n    lastMessage,\n    hideUnreadStatus,\n    hideMentionStatus,\n    unread = 0,\n    alert,\n    userMentions,\n    groupMentions,\n    tunread = [],\n    tunreadUser = [],\n    rid,\n    t: type,\n    cl\n  } = room;\n  const highlighted = Boolean(!hideUnreadStatus && (alert || unread));\n  const icon =\n  /*#__PURE__*/\n  // TODO: Remove icon='at'\n  React.createElement(Sidebar.Item.Icon, {\n    highlighted: highlighted,\n    icon: \"at\"\n  }, /*#__PURE__*/React.createElement(RoomIcon, {\n    room: room,\n    placement: \"sidebar\",\n    isIncomingCall: Boolean(videoConfActions)\n  }));\n  const actions = useMemo(() => videoConfActions && /*#__PURE__*/React.createElement(SidebarItemActions, null, /*#__PURE__*/React.createElement(SidebarItemAction, {\n    onClick: videoConfActions.acceptCall,\n    secondary: true,\n    success: true,\n    icon: \"phone\"\n  }), /*#__PURE__*/React.createElement(SidebarItemAction, {\n    onClick: videoConfActions.rejectCall,\n    secondary: true,\n    danger: true,\n    icon: \"phone-off\"\n  })), [videoConfActions]);\n  const isQueued = isOmnichannelRoom(room) && room.status === 'queued';\n  const {\n    enabled: isPriorityEnabled\n  } = useOmnichannelPriorities();\n  const message = extended && getMessage(room, lastMessage, t);\n  const subtitle = message ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"message-body--unstyled\",\n    dangerouslySetInnerHTML: {\n      __html: message\n    }\n  }) : null;\n  const threadUnread = tunread.length > 0;\n  const variant = (userMentions || tunreadUser.length) && 'danger' || threadUnread && 'primary' || groupMentions && 'warning' || 'secondary';\n  const isUnread = unread > 0 || threadUnread;\n  const showBadge = !hideUnreadStatus || !hideMentionStatus && (Boolean(userMentions) || tunreadUser.length > 0);\n  const badgeTitle = getBadgeTitle(userMentions, tunread.length, groupMentions, unread, t);\n  const badges = /*#__PURE__*/React.createElement(Margins, {\n    inlineStart: 8\n  }, showBadge && isUnread && /*#__PURE__*/React.createElement(Badge, {\n    role: \"status\",\n    style: {\n      display: 'inline-flex',\n      flexShrink: 0\n    },\n    variant: variant,\n    title: badgeTitle\n  }, unread + (tunread === null || tunread === void 0 ? void 0 : tunread.length)), isOmnichannelRoom(room) && /*#__PURE__*/React.createElement(OmnichannelBadges, {\n    room: room\n  }));\n  return /*#__PURE__*/React.createElement(SideBarItemTemplate, {\n    is: \"a\",\n    id: id,\n    \"data-qa\": \"sidebar-item\",\n    \"data-unread\": highlighted,\n    unread: highlighted,\n    selected: selected,\n    href: href,\n    onClick: () => {\n      !selected && sidebar.toggle();\n    },\n    \"aria-label\": title,\n    title: title,\n    time: lastMessage === null || lastMessage === void 0 ? void 0 : lastMessage.ts,\n    subtitle: subtitle,\n    icon: icon,\n    style: style,\n    badges: badges,\n    avatar: AvatarTemplate && /*#__PURE__*/React.createElement(AvatarTemplate, room),\n    actions: actions,\n    menu: !isIOsDevice && !isAnonymous && (!isQueued || isQueued && isPriorityEnabled) && (() => /*#__PURE__*/React.createElement(RoomMenu, {\n      alert: alert,\n      threadUnread: threadUnread,\n      rid: rid,\n      unread: !!unread,\n      roomOpen: selected,\n      type: type,\n      cl: cl,\n      name: title,\n      hideDefaultOptions: isQueued\n    }))\n  });\n}\nfunction safeDateNotEqualCheck(a, b) {\n  if (!a || !b) {\n    return a !== b;\n  }\n  return new Date(a).toISOString() !== new Date(b).toISOString();\n}\nconst keys = ['id', 'style', 'extended', 'selected', 'SideBarItemTemplate', 'AvatarTemplate', 't', 'sidebarViewMode', 'videoConfActions'];\n// eslint-disable-next-line react/no-multi-comp\nmodule.exportDefault( /*#__PURE__*/memo(SideBarItemTemplateWithData, (prevProps, nextProps) => {\n  var _prevProps$room$_upda, _nextProps$room$_upda, _prevProps$room$lastM, _nextProps$room$lastM, _prevProps$room, _prevProps$room$v, _nextProps$room, _nextProps$room$v;\n  if (keys.some(key => prevProps[key] !== nextProps[key])) {\n    return false;\n  }\n  if (prevProps.room === nextProps.room) {\n    return true;\n  }\n  if (prevProps.room._id !== nextProps.room._id) {\n    return false;\n  }\n  if (((_prevProps$room$_upda = prevProps.room._updatedAt) === null || _prevProps$room$_upda === void 0 ? void 0 : _prevProps$room$_upda.toISOString()) !== ((_nextProps$room$_upda = nextProps.room._updatedAt) === null || _nextProps$room$_upda === void 0 ? void 0 : _nextProps$room$_upda.toISOString())) {\n    return false;\n  }\n  if (safeDateNotEqualCheck((_prevProps$room$lastM = prevProps.room.lastMessage) === null || _prevProps$room$lastM === void 0 ? void 0 : _prevProps$room$lastM._updatedAt, (_nextProps$room$lastM = nextProps.room.lastMessage) === null || _nextProps$room$lastM === void 0 ? void 0 : _nextProps$room$lastM._updatedAt)) {\n    return false;\n  }\n  if (prevProps.room.alert !== nextProps.room.alert) {\n    return false;\n  }\n  if (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && ((_prevProps$room = prevProps.room) === null || _prevProps$room === void 0 ? void 0 : (_prevProps$room$v = _prevProps$room.v) === null || _prevProps$room$v === void 0 ? void 0 : _prevProps$room$v.status) !== ((_nextProps$room = nextProps.room) === null || _nextProps$room === void 0 ? void 0 : (_nextProps$room$v = _nextProps$room.v) === null || _nextProps$room$v === void 0 ? void 0 : _nextProps$room$v.status)) {\n    return false;\n  }\n  if (prevProps.room.teamMain !== nextProps.room.teamMain) {\n    return false;\n  }\n  if (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && prevProps.room.priorityWeight !== nextProps.room.priorityWeight) {\n    return false;\n  }\n  return true;\n}));","map":{"version":3,"names":["isDirectMessageRoom","isMultipleDirectMessageRoom","isOmnichannelRoom","isVideoConfMessage","module","link","v","Badge","Sidebar","SidebarItemAction","SidebarItemActions","Margins","useLayout","React","memo","useMemo","default","normalizeSidebarMessage","RoomIcon","roomCoordinator","isIOsDevice","useOmnichannelPriorities","RoomMenu","OmnichannelBadges","getMessage","room","lastMessage","t","_lastMessage$u","_room$u","u","username","concat","name","getBadgeTitle","userMentions","threadUnread","groupMentions","unread","title","push","count","join","SideBarItemTemplateWithData","_ref","id","selected","style","extended","SideBarItemTemplate","AvatarTemplate","isAnonymous","videoConfActions","sidebar","href","getRouteLink","getRoomName","hideUnreadStatus","hideMentionStatus","alert","tunread","tunreadUser","rid","type","cl","highlighted","Boolean","icon","createElement","Item","Icon","placement","isIncomingCall","actions","onClick","acceptCall","secondary","success","rejectCall","danger","isQueued","status","enabled","isPriorityEnabled","message","subtitle","className","dangerouslySetInnerHTML","__html","length","variant","isUnread","showBadge","badgeTitle","badges","inlineStart","role","display","flexShrink","is","toggle","time","ts","avatar","menu","roomOpen","hideDefaultOptions","safeDateNotEqualCheck","a","b","Date","toISOString","keys","exportDefault","prevProps","nextProps","_prevProps$room$_upda","_nextProps$room$_upda","_prevProps$room$lastM","_nextProps$room$lastM","_prevProps$room","_prevProps$room$v","_nextProps$room","_nextProps$room$v","some","key","_id","_updatedAt","teamMain","priorityWeight"],"sources":["client/sidebar/RoomList/SideBarItemTemplateWithData.tsx"],"sourcesContent":["import type { IMessage, IRoom, ISubscription } from '@rocket.chat/core-typings';\nimport { isDirectMessageRoom, isMultipleDirectMessageRoom, isOmnichannelRoom, isVideoConfMessage } from '@rocket.chat/core-typings';\nimport { Badge, Sidebar, SidebarItemAction, SidebarItemActions, Margins } from '@rocket.chat/fuselage';\nimport { useLayout } from '@rocket.chat/ui-contexts';\nimport type { TFunction } from 'i18next';\nimport type { AllHTMLAttributes, ComponentType, ReactElement, ReactNode } from 'react';\nimport React, { memo, useMemo } from 'react';\n\nimport { normalizeSidebarMessage } from './normalizeSidebarMessage';\nimport { RoomIcon } from '../../components/RoomIcon';\nimport { roomCoordinator } from '../../lib/rooms/roomCoordinator';\nimport { isIOsDevice } from '../../lib/utils/isIOsDevice';\nimport { useOmnichannelPriorities } from '../../omnichannel/hooks/useOmnichannelPriorities';\nimport RoomMenu from '../RoomMenu';\nimport { OmnichannelBadges } from '../badges/OmnichannelBadges';\nimport type { useAvatarTemplate } from '../hooks/useAvatarTemplate';\n\nconst getMessage = (room: IRoom, lastMessage: IMessage | undefined, t: TFunction): string | undefined => {\n\tif (!lastMessage) {\n\t\treturn t('No_messages_yet');\n\t}\n\tif (isVideoConfMessage(lastMessage)) {\n\t\treturn t('Call_started');\n\t}\n\tif (!lastMessage.u) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\tif (lastMessage.u?.username === room.u?.username) {\n\t\treturn `${t('You')}: ${normalizeSidebarMessage(lastMessage, t)}`;\n\t}\n\tif (isDirectMessageRoom(room) && !isMultipleDirectMessageRoom(room)) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\treturn `${lastMessage.u.name || lastMessage.u.username}: ${normalizeSidebarMessage(lastMessage, t)}`;\n};\n\nconst getBadgeTitle = (userMentions: number, threadUnread: number, groupMentions: number, unread: number, t: TFunction) => {\n\tconst title = [] as string[];\n\tif (userMentions) {\n\t\ttitle.push(t('mentions_counter', { count: userMentions }));\n\t}\n\tif (threadUnread) {\n\t\ttitle.push(t('threads_counter', { count: threadUnread }));\n\t}\n\tif (groupMentions) {\n\t\ttitle.push(t('group_mentions_counter', { count: groupMentions }));\n\t}\n\tconst count = unread - userMentions - groupMentions;\n\tif (count > 0) {\n\t\ttitle.push(t('unread_messages_counter', { count }));\n\t}\n\treturn title.join(', ');\n};\n\ntype RoomListRowProps = {\n\textended: boolean;\n\tt: TFunction;\n\tSideBarItemTemplate: ComponentType<\n\t\t{\n\t\t\ticon: ReactNode;\n\t\t\ttitle: ReactNode;\n\t\t\tavatar: ReactNode;\n\t\t\tactions: unknown;\n\t\t\thref: string;\n\t\t\ttime?: Date;\n\t\t\tmenu?: ReactNode;\n\t\t\tmenuOptions?: unknown;\n\t\t\tsubtitle?: ReactNode;\n\t\t\ttitleIcon?: string;\n\t\t\tbadges?: ReactNode;\n\t\t\tthreadUnread?: boolean;\n\t\t\tunread?: boolean;\n\t\t\tselected?: boolean;\n\t\t\tis?: string;\n\t\t} & AllHTMLAttributes<HTMLElement>\n\t>;\n\tAvatarTemplate: ReturnType<typeof useAvatarTemplate>;\n\topenedRoom?: string;\n\t// sidebarViewMode: 'extended';\n\tisAnonymous?: boolean;\n\n\troom: ISubscription & IRoom;\n\tid?: string;\n\t/* @deprecated */\n\tstyle?: AllHTMLAttributes<HTMLElement>['style'];\n\n\tselected?: boolean;\n\n\tsidebarViewMode?: unknown;\n\tvideoConfActions?: {\n\t\t[action: string]: () => void;\n\t};\n};\n\nfunction SideBarItemTemplateWithData({\n\troom,\n\tid,\n\tselected,\n\tstyle,\n\textended,\n\tSideBarItemTemplate,\n\tAvatarTemplate,\n\tt,\n\tisAnonymous,\n\tvideoConfActions,\n}: RoomListRowProps): ReactElement {\n\tconst { sidebar } = useLayout();\n\n\tconst href = roomCoordinator.getRouteLink(room.t, room) || '';\n\tconst title = roomCoordinator.getRoomName(room.t, room) || '';\n\n\tconst {\n\t\tlastMessage,\n\t\thideUnreadStatus,\n\t\thideMentionStatus,\n\t\tunread = 0,\n\t\talert,\n\t\tuserMentions,\n\t\tgroupMentions,\n\t\ttunread = [],\n\t\ttunreadUser = [],\n\t\trid,\n\t\tt: type,\n\t\tcl,\n\t} = room;\n\n\tconst highlighted = Boolean(!hideUnreadStatus && (alert || unread));\n\tconst icon = (\n\t\t// TODO: Remove icon='at'\n\t\t<Sidebar.Item.Icon highlighted={highlighted} icon='at'>\n\t\t\t<RoomIcon room={room} placement='sidebar' isIncomingCall={Boolean(videoConfActions)} />\n\t\t</Sidebar.Item.Icon>\n\t);\n\n\tconst actions = useMemo(\n\t\t() =>\n\t\t\tvideoConfActions && (\n\t\t\t\t<SidebarItemActions>\n\t\t\t\t\t<SidebarItemAction onClick={videoConfActions.acceptCall} secondary success icon='phone' />\n\t\t\t\t\t<SidebarItemAction onClick={videoConfActions.rejectCall} secondary danger icon='phone-off' />\n\t\t\t\t</SidebarItemActions>\n\t\t\t),\n\t\t[videoConfActions],\n\t);\n\n\tconst isQueued = isOmnichannelRoom(room) && room.status === 'queued';\n\tconst { enabled: isPriorityEnabled } = useOmnichannelPriorities();\n\n\tconst message = extended && getMessage(room, lastMessage, t);\n\tconst subtitle = message ? <span className='message-body--unstyled' dangerouslySetInnerHTML={{ __html: message }} /> : null;\n\n\tconst threadUnread = tunread.length > 0;\n\tconst variant =\n\t\t((userMentions || tunreadUser.length) && 'danger') || (threadUnread && 'primary') || (groupMentions && 'warning') || 'secondary';\n\n\tconst isUnread = unread > 0 || threadUnread;\n\tconst showBadge = !hideUnreadStatus || (!hideMentionStatus && (Boolean(userMentions) || tunreadUser.length > 0));\n\n\tconst badgeTitle = getBadgeTitle(userMentions, tunread.length, groupMentions, unread, t);\n\n\tconst badges = (\n\t\t<Margins inlineStart={8}>\n\t\t\t{showBadge && isUnread && (\n\t\t\t\t<Badge role='status' {...({ style: { display: 'inline-flex', flexShrink: 0 } } as any)} variant={variant} title={badgeTitle}>\n\t\t\t\t\t{unread + tunread?.length}\n\t\t\t\t</Badge>\n\t\t\t)}\n\t\t\t{isOmnichannelRoom(room) && <OmnichannelBadges room={room} />}\n\t\t</Margins>\n\t);\n\n\treturn (\n\t\t<SideBarItemTemplate\n\t\t\tis='a'\n\t\t\tid={id}\n\t\t\tdata-qa='sidebar-item'\n\t\t\tdata-unread={highlighted}\n\t\t\tunread={highlighted}\n\t\t\tselected={selected}\n\t\t\thref={href}\n\t\t\tonClick={(): void => {\n\t\t\t\t!selected && sidebar.toggle();\n\t\t\t}}\n\t\t\taria-label={title}\n\t\t\ttitle={title}\n\t\t\ttime={lastMessage?.ts}\n\t\t\tsubtitle={subtitle}\n\t\t\ticon={icon}\n\t\t\tstyle={style}\n\t\t\tbadges={badges}\n\t\t\tavatar={AvatarTemplate && <AvatarTemplate {...room} />}\n\t\t\tactions={actions}\n\t\t\tmenu={\n\t\t\t\t!isIOsDevice &&\n\t\t\t\t!isAnonymous &&\n\t\t\t\t(!isQueued || (isQueued && isPriorityEnabled)) &&\n\t\t\t\t((): ReactElement => (\n\t\t\t\t\t<RoomMenu\n\t\t\t\t\t\talert={alert}\n\t\t\t\t\t\tthreadUnread={threadUnread}\n\t\t\t\t\t\trid={rid}\n\t\t\t\t\t\tunread={!!unread}\n\t\t\t\t\t\troomOpen={selected}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tcl={cl}\n\t\t\t\t\t\tname={title}\n\t\t\t\t\t\thideDefaultOptions={isQueued}\n\t\t\t\t\t/>\n\t\t\t\t))\n\t\t\t}\n\t\t/>\n\t);\n}\n\nfunction safeDateNotEqualCheck(a: Date | string | undefined, b: Date | string | undefined): boolean {\n\tif (!a || !b) {\n\t\treturn a !== b;\n\t}\n\treturn new Date(a).toISOString() !== new Date(b).toISOString();\n}\n\nconst keys: (keyof RoomListRowProps)[] = [\n\t'id',\n\t'style',\n\t'extended',\n\t'selected',\n\t'SideBarItemTemplate',\n\t'AvatarTemplate',\n\t't',\n\t'sidebarViewMode',\n\t'videoConfActions',\n];\n\n// eslint-disable-next-line react/no-multi-comp\nexport default memo(SideBarItemTemplateWithData, (prevProps, nextProps) => {\n\tif (keys.some((key) => prevProps[key] !== nextProps[key])) {\n\t\treturn false;\n\t}\n\n\tif (prevProps.room === nextProps.room) {\n\t\treturn true;\n\t}\n\n\tif (prevProps.room._id !== nextProps.room._id) {\n\t\treturn false;\n\t}\n\tif (prevProps.room._updatedAt?.toISOString() !== nextProps.room._updatedAt?.toISOString()) {\n\t\treturn false;\n\t}\n\tif (safeDateNotEqualCheck(prevProps.room.lastMessage?._updatedAt, nextProps.room.lastMessage?._updatedAt)) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.alert !== nextProps.room.alert) {\n\t\treturn false;\n\t}\n\tif (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && prevProps.room?.v?.status !== nextProps.room?.v?.status) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.teamMain !== nextProps.room.teamMain) {\n\t\treturn false;\n\t}\n\n\tif (\n\t\tisOmnichannelRoom(prevProps.room) &&\n\t\tisOmnichannelRoom(nextProps.room) &&\n\t\tprevProps.room.priorityWeight !== nextProps.room.priorityWeight\n\t) {\n\t\treturn false;\n\t}\n\n\treturn true;\n});\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"04014b86c814743fbd8831f247cf155d2373d88a"}
