{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/contacts/ContactTable.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/omnichannel/directory/contacts/ContactTable.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/contacts/ContactTable.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/directory/contacts/ContactTable.tsx","sourceRoot":"","sources":["client/views/omnichannel/directory/contacts/ContactTable.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,EAAE,YAAY,EAAE,aAAa,EAAE,UAAU,EAAE,WAAW,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,uBAAuB,CAAC;AAC9H,OAAO,EAAE,iBAAiB,EAAE,iBAAiB,EAAE,kBAAkB,EAAE,MAAM,6BAA6B,CAAC;AACvG,OAAO,EAAE,QAAQ,EAAE,cAAc,EAAE,MAAM,0BAA0B,CAAC;AACpE,OAAO,EAAE,YAAY,EAAE,MAAM,uBAAuB,CAAC;AAErD,OAAO,KAAK,EAAE,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAEjD,OAAO,YAAY,MAAM,qCAAqC,CAAC;AAC/D,OAAO,gBAAgB,MAAM,yCAAyC,CAAC;AACvE,OAAO,EACN,YAAY,EACZ,kBAAkB,EAClB,gBAAgB,EAChB,gBAAgB,EAChB,eAAe,EACf,sBAAsB,EACtB,sBAAsB,GACtB,MAAM,qCAAqC,CAAC;AAC7C,OAAO,EAAE,aAAa,EAAE,MAAM,yDAAyD,CAAC;AACxF,OAAO,EAAE,OAAO,EAAE,MAAM,mDAAmD,CAAC;AAC5E,OAAO,EAAE,cAAc,EAAE,MAAM,kCAAkC,CAAC;AAClE,OAAO,EAAE,aAAa,EAAE,MAAM,iCAAiC,CAAC;AAChE,OAAO,EAAE,wBAAwB,EAAE,MAAM,+CAA+C,CAAC;AACzF,OAAO,EAAE,iBAAiB,EAAE,MAAM,iCAAiC,CAAC;AACpE,OAAO,EAAE,kBAAkB,EAAE,MAAM,4BAA4B,CAAC;AAEhE,SAAS,YAAY;IACpB,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,eAAe,EAAE,UAAU,EAAE,GAAG,eAAe,EAAE,GAAG,aAAa,EAAE,CAAC;IACnG,MAAM,EAAE,MAAM,EAAE,aAAa,EAAE,OAAO,EAAE,GAAG,OAAO,CAA0E,UAAU,CAAC,CAAC;IACxI,MAAM,WAAW,GAAG,cAAc,EAAE,CAAC;IAErC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,iBAAiB,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;IAEnD,MAAM,CAAC,GAAG,cAAc,EAAE,CAAC;IAE3B,MAAM,KAAK,GAAG,iBAAiB,CAC9B,OAAO,CACN,GAAG,EAAE,CAAC,CAAC;QACN,IAAI;QACJ,IAAI,EAAE,MAAM,MAAM,MAAM,aAAa,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI;QAC5D,GAAG,CAAC,YAAY,IAAI,EAAE,KAAK,EAAE,YAAY,EAAE,CAAC;QAC5C,GAAG,CAAC,OAAO,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC;KACnC,CAAC,EACF,CAAC,YAAY,EAAE,OAAO,EAAE,MAAM,EAAE,aAAa,EAAE,IAAI,CAAC,CACpD,EACD,GAAG,CACH,CAAC;IAEF,MAAM,cAAc,GAAG,QAAQ,CAAC,uBAAuB,CAAC,CAAC;IACzD,MAAM,UAAU,GAAG,aAAa,EAAE,CAAC;IAEnC,MAAM,gBAAgB,GAAG,kBAAkB,CAAC,GAAG,EAAE,CAChD,cAAc,CAAC,IAAI,CAAC;QACnB,IAAI,EAAE,UAAU;QAChB,GAAG,EAAE,KAAK;KACV,CAAC,CACF,CAAC;IAEF,MAAM,UAAU,GAAG,kBAAkB,CACpC,CAAC,EAAE,EAAE,EAAE,CAAC,GAAS,EAAE,CAClB,cAAc,CAAC,IAAI,CAAC;QACnB,IAAI,EAAE,UAAU;QAChB,EAAE;QACF,GAAG,EAAE,MAAM;KACX,CAAC,CACH,CAAC;IAEF,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAC;IAEnF,MAAM,CAAC,YAAY,CAAC,GAAG,QAAQ,CAAC,YAAY,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACvD,MAAM,eAAe,GAAG,YAAY,KAAK,YAAY,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;IAE/D,MAAM,OAAO,GAAG,CACf,EACC;GAAA,CAAC,sBAAsB,CAAC,GAAG,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,KAAK,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAU,CAChI;IAAA,CAAC,CAAC,CAAC,UAAU,CAAC,CACf;GAAA,EAAE,sBAAsB,CACxB;GAAA,CAAC,sBAAsB,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,KAAK,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM,CACpH;IAAA,CAAC,CAAC,CAAC,MAAM,CAAC,CACX;GAAA,EAAE,sBAAsB,CACxB;GAAA,CAAC,sBAAsB,CAAC,GAAG,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,KAAK,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,OAAO,CACvH;IAAA,CAAC,CAAC,CAAC,OAAO,CAAC,CACZ;GAAA,EAAE,sBAAsB,CACxB;GAAA,CAAC,sBAAsB,CACtB,GAAG,CAAC,OAAO,CACX,SAAS,CAAC,CAAC,aAAa,CAAC,CACzB,MAAM,CAAC,CAAC,MAAM,KAAK,uBAAuB,CAAC,CAC3C,OAAO,CAAC,CAAC,OAAO,CAAC,CACjB,IAAI,CAAC,uBAAuB,CAE5B;IAAA,CAAC,CAAC,CAAC,OAAO,CAAC,CACZ;GAAA,EAAE,sBAAsB,CACxB;GAAA,CAAC,sBAAsB,CACtB,GAAG,CAAC,UAAU,CACd,SAAS,CAAC,CAAC,aAAa,CAAC,CACzB,MAAM,CAAC,CAAC,MAAM,KAAK,aAAa,CAAC,CACjC,OAAO,CAAC,CAAC,OAAO,CAAC,CACjB,IAAI,CAAC,aAAa,CAElB;IAAA,CAAC,CAAC,CAAC,WAAW,CAAC,CAChB;GAAA,EAAE,sBAAsB,CACxB;GAAA,CAAC,sBAAsB,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,EAC9C;EAAA,GAAG,CACH,CAAC;IAEF,OAAO,CACN,EACC;GAAA,CAAC,CAAC,CAAC,SAAS,IAAI,IAAI,EAAE,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,eAAe,CAAC,IAAI,CACjE,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAC/B;KAAA,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,gBAAgB,CAAC,CAAC,OAAO,CACzC;MAAA,CAAC,CAAC,CAAC,aAAa,CAAC,CAClB;KAAA,EAAE,MAAM,CACT;IAAA,EAAE,YAAY,CAAC,CACf,CACD;GAAA,CAAC,SAAS,IAAI,CACb,CAAC,YAAY,CACZ;KAAA,CAAC,kBAAkB,CAAC,CAAC,OAAO,CAAC,EAAE,kBAAkB,CACjD;KAAA,CAAC,gBAAgB,CAChB;MAAA,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EACjC;KAAA,EAAE,gBAAgB,CACnB;IAAA,EAAE,YAAY,CAAC,CACf,CACD;GAAA,CAAC,SAAS,IAAI,IAAI,EAAE,QAAQ,CAAC,MAAM,KAAK,CAAC,IAAI,eAAe,IAAI,CAAC,gBAAgB,CAAC,AAAD,EAAG,CACpF;GAAA,CAAC,SAAS,IAAI,IAAI,EAAE,QAAQ,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,eAAe,IAAI,CAChE,CAAC,gBAAgB,CAChB,IAAI,CAAC,WAAW,CAChB,KAAK,CAAC,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAC5B,WAAW,CAAC,CAAC,CAAC,CAAC,6BAA6B,CAAC,CAAC,CAC9C,WAAW,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAC9B,YAAY,CAAC,CAAC,gBAAgB,CAAC,CAC/B,QAAQ,CAAC,2CAA2C,CACpD,QAAQ,CAAC,CAAC,CAAC,CAAC,2BAA2B,CAAC,CAAC,EACxC,CACF,CACD;GAAA,CAAC,SAAS,IAAI,IAAI,EAAE,QAAQ,CAAC,MAAM,GAAG,CAAC,IAAI,CAC1C,EACC;KAAA,CAAC,YAAY,CACZ;MAAA,CAAC,kBAAkB,CAAC,CAAC,OAAO,CAAC,EAAE,kBAAkB,CACjD;MAAA,CAAC,gBAAgB,CAChB;OAAA,CAAC,IAAI,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,aAAa,EAAE,KAAK,EAAE,QAAQ,EAAE,EAAE,EAAE;gBACtF,MAAM,WAAW,GAAG,CAAC,KAAK,EAAE,MAAM,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;gBAClE,MAAM,YAAY,GAAG,aAAa,EAAE,MAAM,IAAI,aAAa,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;gBAEvE,OAAO,CACN,CAAC,eAAe,CACf,MAAM,CACN,GAAG,CAAC,CAAC,GAAG,CAAC,CACT,QAAQ,CAAC,CAAC,CAAC,CAAC,CACZ,IAAI,CAAC,MAAM,CACX,MAAM,CAAC,MAAM,CACb,UAAU,CAAC,CAAC,GAAG,CAAC,CAChB,6BAA6B,CAC7B,OAAO,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAEzB;UAAA,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAAC,QAAQ,CAAC,EAAE,gBAAgB,CAChE;UAAA,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAAC,wBAAwB,CAAC,KAAK,IAAI,IAAI,CAAC,CAAC,EAAE,gBAAgB,CAC/F;UAAA,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAAC,wBAAwB,CAAC,WAAW,CAAC,CAAC,EAAE,gBAAgB,CAC7F;UAAA,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAAC,YAAY,CAAC,EAAE,gBAAgB,CACpE;UAAA,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAAC,QAAQ,IAAI,UAAU,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,EAAE,gBAAgB,CAC3F;UAAA,CAAC,gBAAgB,CAAC,CAAC,WAAW,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC,WAAW,CAAC,EAAG,CAAC,EAAE,gBAAgB,CACrG;SAAA,EAAE,eAAe,CAAC,CAClB,CAAC;YACH,CAAC,CAAC,CACH;MAAA,EAAE,gBAAgB,CACnB;KAAA,EAAE,YAAY,CACd;KAAA,CAAC,UAAU,CACV,OAAO,CACP,OAAO,CAAC,CAAC,OAAO,CAAC,CACjB,YAAY,CAAC,CAAC,YAAY,CAAC,CAC3B,KAAK,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,CACnB,iBAAiB,CAAC,CAAC,eAAe,CAAC,CACnC,YAAY,CAAC,CAAC,UAAU,CAAC,CACzB,IAAI,eAAe,CAAC,EAEtB;IAAA,GAAG,CACH,CACD;GAAA,CAAC,OAAO,IAAI,CACX,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CACZ;KAAA,CAAC,MAAM,CACN;MAAA,CAAC,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,oBAAoB,EACxD;MAAA,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,kBAAkB,CAAC,CAAC,EAAE,WAAW,CACjD;MAAA,CAAC,aAAa,CACb;OAAA,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC,OAAO,EAAE,CAAC,CACpD;QAAA,CAAC,CAAC,CAAC,aAAa,CAAC,CAClB;OAAA,EAAE,YAAY,CACf;MAAA,EAAE,aAAa,CAChB;KAAA,EAAE,MAAM,CACT;IAAA,EAAE,GAAG,CAAC,CACN,CACF;EAAA,GAAG,CACH,CAAC;AACH,CAAC;AAED,eAAe,YAAY,CAAC","sourcesContent":["import { Pagination, States, StatesAction, StatesActions, StatesIcon, StatesTitle, Box, Button } from '@rocket.chat/fuselage';\nimport { useDebouncedState, useDebouncedValue, useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useRoute, useTranslation } from '@rocket.chat/ui-contexts';\nimport { hashQueryKey } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useState } from 'react';\n\nimport FilterByText from '../../../../components/FilterByText';\nimport GenericNoResults from '../../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableHeader,\n\tGenericTableCell,\n\tGenericTableBody,\n\tGenericTableRow,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingRow,\n} from '../../../../components/GenericTable';\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\nimport { useIsCallReady } from '../../../../contexts/CallContext';\nimport { useFormatDate } from '../../../../hooks/useFormatDate';\nimport { parseOutboundPhoneNumber } from '../../../../lib/voip/parseOutboundPhoneNumber';\nimport { CallDialpadButton } from '../components/CallDialpadButton';\nimport { useCurrentContacts } from './hooks/useCurrentContacts';\n\nfunction ContactTable(): ReactElement {\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\tconst { sortBy, sortDirection, setSort } = useSort<'username' | 'phone' | 'name' | 'visitorEmails.address' | 'lastChat.ts'>('username');\n\tconst isCallReady = useIsCallReady();\n\n\tconst [term, setTerm] = useDebouncedState('', 500);\n\n\tconst t = useTranslation();\n\n\tconst query = useDebouncedValue(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tterm,\n\t\t\t\tsort: `{ \"${sortBy}\": ${sortDirection === 'asc' ? 1 : -1} }`,\n\t\t\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t\t\t...(current && { offset: current }),\n\t\t\t}),\n\t\t\t[itemsPerPage, current, sortBy, sortDirection, term],\n\t\t),\n\t\t500,\n\t);\n\n\tconst directoryRoute = useRoute('omnichannel-directory');\n\tconst formatDate = useFormatDate();\n\n\tconst onButtonNewClick = useMutableCallback(() =>\n\t\tdirectoryRoute.push({\n\t\t\tpage: 'contacts',\n\t\t\tbar: 'new',\n\t\t}),\n\t);\n\n\tconst onRowClick = useMutableCallback(\n\t\t(id) => (): void =>\n\t\t\tdirectoryRoute.push({\n\t\t\t\tpage: 'contacts',\n\t\t\t\tid,\n\t\t\t\tbar: 'info',\n\t\t\t}),\n\t);\n\n\tconst { data, isLoading, isError, isSuccess, refetch } = useCurrentContacts(query);\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell key='username' direction={sortDirection} active={sortBy === 'username'} onClick={setSort} sort='username'>\n\t\t\t\t{t('Username')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name'>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='phone' direction={sortDirection} active={sortBy === 'phone'} onClick={setSort} sort='phone'>\n\t\t\t\t{t('Phone')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='email'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'visitorEmails.address'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='visitorEmails.address'\n\t\t\t>\n\t\t\t\t{t('Email')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='lastchat'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'lastChat.ts'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='lastChat.ts'\n\t\t\t>\n\t\t\t\t{t('Last_Chat')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='call' width={44} />\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{((isSuccess && data?.visitors.length > 0) || queryHasChanged) && (\n\t\t\t\t<FilterByText onChange={setTerm}>\n\t\t\t\t\t<Button onClick={onButtonNewClick} primary>\n\t\t\t\t\t\t{t('New_contact')}\n\t\t\t\t\t</Button>\n\t\t\t\t</FilterByText>\n\t\t\t)}\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingRow cols={6} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data?.visitors.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t{isSuccess && data?.visitors.length === 0 && !queryHasChanged && (\n\t\t\t\t<GenericNoResults\n\t\t\t\t\ticon='user-plus'\n\t\t\t\t\ttitle={t('No_contacts_yet')}\n\t\t\t\t\tdescription={t('No_contacts_yet_description')}\n\t\t\t\t\tbuttonTitle={t('New_contact')}\n\t\t\t\t\tbuttonAction={onButtonNewClick}\n\t\t\t\t\tlinkHref='https://go.rocket.chat/i/omnichannel-docs'\n\t\t\t\t\tlinkText={t('Learn_more_about_contacts')}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isSuccess && data?.visitors.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{data?.visitors.map(({ _id, username, fname, name, visitorEmails, phone, lastChat }) => {\n\t\t\t\t\t\t\t\tconst phoneNumber = (phone?.length && phone[0].phoneNumber) || '';\n\t\t\t\t\t\t\t\tconst visitorEmail = visitorEmails?.length && visitorEmails[0].address;\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<GenericTableRow\n\t\t\t\t\t\t\t\t\t\taction\n\t\t\t\t\t\t\t\t\t\tkey={_id}\n\t\t\t\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\t\t\t\trole='link'\n\t\t\t\t\t\t\t\t\t\theight='40px'\n\t\t\t\t\t\t\t\t\t\tqa-user-id={_id}\n\t\t\t\t\t\t\t\t\t\trcx-show-call-button-on-hover\n\t\t\t\t\t\t\t\t\t\tonClick={onRowClick(_id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{username}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{parseOutboundPhoneNumber(fname || name)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{parseOutboundPhoneNumber(phoneNumber)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{visitorEmail}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{lastChat && formatDate(lastChat.ts)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell>{isCallReady && <CallDialpadButton phoneNumber={phoneNumber} />}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t</GenericTableRow>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total}\n\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{isError && (\n\t\t\t\t<Box mbs={20}>\n\t\t\t\t\t<States>\n\t\t\t\t\t\t<StatesIcon variation='danger' name='circle-exclamation' />\n\t\t\t\t\t\t<StatesTitle>{t('Connection_error')}</StatesTitle>\n\t\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t\t<StatesAction icon='reload' onClick={() => refetch()}>\n\t\t\t\t\t\t\t\t{t('Reload_page')}\n\t\t\t\t\t\t\t</StatesAction>\n\t\t\t\t\t\t</StatesActions>\n\t\t\t\t\t</States>\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default ContactTable;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/contacts/ContactTable.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/omnichannel/directory/contacts/ContactTable.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/directory/contacts/ContactTable.tsx","sourceRoot":"","sources":["client/views/omnichannel/directory/contacts/ContactTable.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Pagination, States, StatesAction, StatesActions, StatesIcon, StatesTitle, Box, Button } from '@rocket.chat/fuselage';\nimport { useDebouncedState, useDebouncedValue, useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useRoute, useTranslation } from '@rocket.chat/ui-contexts';\nimport { hashQueryKey } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useState } from 'react';\n\nimport FilterByText from '../../../../components/FilterByText';\nimport GenericNoResults from '../../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableHeader,\n\tGenericTableCell,\n\tGenericTableBody,\n\tGenericTableRow,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingRow,\n} from '../../../../components/GenericTable';\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\nimport { useIsCallReady } from '../../../../contexts/CallContext';\nimport { useFormatDate } from '../../../../hooks/useFormatDate';\nimport { parseOutboundPhoneNumber } from '../../../../lib/voip/parseOutboundPhoneNumber';\nimport { CallDialpadButton } from '../components/CallDialpadButton';\nimport { useCurrentContacts } from './hooks/useCurrentContacts';\n\nfunction ContactTable(): ReactElement {\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\tconst { sortBy, sortDirection, setSort } = useSort<'username' | 'phone' | 'name' | 'visitorEmails.address' | 'lastChat.ts'>('username');\n\tconst isCallReady = useIsCallReady();\n\n\tconst [term, setTerm] = useDebouncedState('', 500);\n\n\tconst t = useTranslation();\n\n\tconst query = useDebouncedValue(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tterm,\n\t\t\t\tsort: `{ \"${sortBy}\": ${sortDirection === 'asc' ? 1 : -1} }`,\n\t\t\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t\t\t...(current && { offset: current }),\n\t\t\t}),\n\t\t\t[itemsPerPage, current, sortBy, sortDirection, term],\n\t\t),\n\t\t500,\n\t);\n\n\tconst directoryRoute = useRoute('omnichannel-directory');\n\tconst formatDate = useFormatDate();\n\n\tconst onButtonNewClick = useMutableCallback(() =>\n\t\tdirectoryRoute.push({\n\t\t\tpage: 'contacts',\n\t\t\tbar: 'new',\n\t\t}),\n\t);\n\n\tconst onRowClick = useMutableCallback(\n\t\t(id) => (): void =>\n\t\t\tdirectoryRoute.push({\n\t\t\t\tpage: 'contacts',\n\t\t\t\tid,\n\t\t\t\tbar: 'info',\n\t\t\t}),\n\t);\n\n\tconst { data, isLoading, isError, isSuccess, refetch } = useCurrentContacts(query);\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell key='username' direction={sortDirection} active={sortBy === 'username'} onClick={setSort} sort='username'>\n\t\t\t\t{t('Username')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name'>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='phone' direction={sortDirection} active={sortBy === 'phone'} onClick={setSort} sort='phone'>\n\t\t\t\t{t('Phone')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='email'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'visitorEmails.address'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='visitorEmails.address'\n\t\t\t>\n\t\t\t\t{t('Email')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='lastchat'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'lastChat.ts'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='lastChat.ts'\n\t\t\t>\n\t\t\t\t{t('Last_Chat')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='call' width={44} />\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{((isSuccess && data?.visitors.length > 0) || queryHasChanged) && (\n\t\t\t\t<FilterByText onChange={setTerm}>\n\t\t\t\t\t<Button onClick={onButtonNewClick} primary>\n\t\t\t\t\t\t{t('New_contact')}\n\t\t\t\t\t</Button>\n\t\t\t\t</FilterByText>\n\t\t\t)}\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingRow cols={6} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data?.visitors.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t{isSuccess && data?.visitors.length === 0 && !queryHasChanged && (\n\t\t\t\t<GenericNoResults\n\t\t\t\t\ticon='user-plus'\n\t\t\t\t\ttitle={t('No_contacts_yet')}\n\t\t\t\t\tdescription={t('No_contacts_yet_description')}\n\t\t\t\t\tbuttonTitle={t('New_contact')}\n\t\t\t\t\tbuttonAction={onButtonNewClick}\n\t\t\t\t\tlinkHref='https://go.rocket.chat/i/omnichannel-docs'\n\t\t\t\t\tlinkText={t('Learn_more_about_contacts')}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isSuccess && data?.visitors.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{data?.visitors.map(({ _id, username, fname, name, visitorEmails, phone, lastChat }) => {\n\t\t\t\t\t\t\t\tconst phoneNumber = (phone?.length && phone[0].phoneNumber) || '';\n\t\t\t\t\t\t\t\tconst visitorEmail = visitorEmails?.length && visitorEmails[0].address;\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<GenericTableRow\n\t\t\t\t\t\t\t\t\t\taction\n\t\t\t\t\t\t\t\t\t\tkey={_id}\n\t\t\t\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\t\t\t\trole='link'\n\t\t\t\t\t\t\t\t\t\theight='40px'\n\t\t\t\t\t\t\t\t\t\tqa-user-id={_id}\n\t\t\t\t\t\t\t\t\t\trcx-show-call-button-on-hover\n\t\t\t\t\t\t\t\t\t\tonClick={onRowClick(_id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{username}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{parseOutboundPhoneNumber(fname || name)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{parseOutboundPhoneNumber(phoneNumber)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{visitorEmail}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{lastChat && formatDate(lastChat.ts)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell>{isCallReady && <CallDialpadButton phoneNumber={phoneNumber} />}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t</GenericTableRow>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total}\n\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{isError && (\n\t\t\t\t<Box mbs={20}>\n\t\t\t\t\t<States>\n\t\t\t\t\t\t<StatesIcon variation='danger' name='circle-exclamation' />\n\t\t\t\t\t\t<StatesTitle>{t('Connection_error')}</StatesTitle>\n\t\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t\t<StatesAction icon='reload' onClick={() => refetch()}>\n\t\t\t\t\t\t\t\t{t('Reload_page')}\n\t\t\t\t\t\t\t</StatesAction>\n\t\t\t\t\t\t</StatesActions>\n\t\t\t\t\t</States>\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default ContactTable;\n"]}}},"code":"var _excluded = [\"current\", \"itemsPerPage\", \"setItemsPerPage\", \"setCurrent\"];\nvar _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 0);\nvar _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 1);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 2);\nvar _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 3);\nvar Pagination, States, StatesAction, StatesActions, StatesIcon, StatesTitle, Box, Button;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Pagination: function (v) {\n    Pagination = v;\n  },\n  States: function (v) {\n    States = v;\n  },\n  StatesAction: function (v) {\n    StatesAction = v;\n  },\n  StatesActions: function (v) {\n    StatesActions = v;\n  },\n  StatesIcon: function (v) {\n    StatesIcon = v;\n  },\n  StatesTitle: function (v) {\n    StatesTitle = v;\n  },\n  Box: function (v) {\n    Box = v;\n  },\n  Button: function (v) {\n    Button = v;\n  }\n}, 0);\nvar useDebouncedState, useDebouncedValue, useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useDebouncedState: function (v) {\n    useDebouncedState = v;\n  },\n  useDebouncedValue: function (v) {\n    useDebouncedValue = v;\n  },\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 1);\nvar useRoute, useTranslation;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useRoute: function (v) {\n    useRoute = v;\n  },\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 2);\nvar hashQueryKey;\nmodule.link(\"@tanstack/react-query\", {\n  hashQueryKey: function (v) {\n    hashQueryKey = v;\n  }\n}, 3);\nvar React, useMemo, useState;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 4);\nvar FilterByText;\nmodule.link(\"../../../../components/FilterByText\", {\n  \"default\": function (v) {\n    FilterByText = v;\n  }\n}, 5);\nvar GenericNoResults;\nmodule.link(\"../../../../components/GenericNoResults\", {\n  \"default\": function (v) {\n    GenericNoResults = v;\n  }\n}, 6);\nvar GenericTable, GenericTableHeader, GenericTableCell, GenericTableBody, GenericTableRow, GenericTableHeaderCell, GenericTableLoadingRow;\nmodule.link(\"../../../../components/GenericTable\", {\n  GenericTable: function (v) {\n    GenericTable = v;\n  },\n  GenericTableHeader: function (v) {\n    GenericTableHeader = v;\n  },\n  GenericTableCell: function (v) {\n    GenericTableCell = v;\n  },\n  GenericTableBody: function (v) {\n    GenericTableBody = v;\n  },\n  GenericTableRow: function (v) {\n    GenericTableRow = v;\n  },\n  GenericTableHeaderCell: function (v) {\n    GenericTableHeaderCell = v;\n  },\n  GenericTableLoadingRow: function (v) {\n    GenericTableLoadingRow = v;\n  }\n}, 7);\nvar usePagination;\nmodule.link(\"../../../../components/GenericTable/hooks/usePagination\", {\n  usePagination: function (v) {\n    usePagination = v;\n  }\n}, 8);\nvar useSort;\nmodule.link(\"../../../../components/GenericTable/hooks/useSort\", {\n  useSort: function (v) {\n    useSort = v;\n  }\n}, 9);\nvar useIsCallReady;\nmodule.link(\"../../../../contexts/CallContext\", {\n  useIsCallReady: function (v) {\n    useIsCallReady = v;\n  }\n}, 10);\nvar useFormatDate;\nmodule.link(\"../../../../hooks/useFormatDate\", {\n  useFormatDate: function (v) {\n    useFormatDate = v;\n  }\n}, 11);\nvar parseOutboundPhoneNumber;\nmodule.link(\"../../../../lib/voip/parseOutboundPhoneNumber\", {\n  parseOutboundPhoneNumber: function (v) {\n    parseOutboundPhoneNumber = v;\n  }\n}, 12);\nvar CallDialpadButton;\nmodule.link(\"../components/CallDialpadButton\", {\n  CallDialpadButton: function (v) {\n    CallDialpadButton = v;\n  }\n}, 13);\nvar useCurrentContacts;\nmodule.link(\"./hooks/useCurrentContacts\", {\n  useCurrentContacts: function (v) {\n    useCurrentContacts = v;\n  }\n}, 14);\nfunction ContactTable() {\n  var _usePagination = usePagination(),\n    current = _usePagination.current,\n    itemsPerPage = _usePagination.itemsPerPage,\n    setItemsPerPage = _usePagination.setItemsPerPage,\n    setCurrent = _usePagination.setCurrent,\n    paginationProps = _objectWithoutProperties(_usePagination, _excluded);\n  var _useSort = useSort('username'),\n    sortBy = _useSort.sortBy,\n    sortDirection = _useSort.sortDirection,\n    setSort = _useSort.setSort;\n  var isCallReady = useIsCallReady();\n  var _useDebouncedState = useDebouncedState('', 500),\n    _useDebouncedState2 = _slicedToArray(_useDebouncedState, 2),\n    term = _useDebouncedState2[0],\n    setTerm = _useDebouncedState2[1];\n  var t = useTranslation();\n  var query = useDebouncedValue(useMemo(function () {\n    return _objectSpread(_objectSpread({\n      term: term,\n      sort: \"{ \\\"\" + sortBy + \"\\\": \" + (sortDirection === 'asc' ? 1 : -1) + \" }\"\n    }, itemsPerPage && {\n      count: itemsPerPage\n    }), current && {\n      offset: current\n    });\n  }, [itemsPerPage, current, sortBy, sortDirection, term]), 500);\n  var directoryRoute = useRoute('omnichannel-directory');\n  var formatDate = useFormatDate();\n  var onButtonNewClick = useMutableCallback(function () {\n    return directoryRoute.push({\n      page: 'contacts',\n      bar: 'new'\n    });\n  });\n  var onRowClick = useMutableCallback(function (id) {\n    return function () {\n      return directoryRoute.push({\n        page: 'contacts',\n        id: id,\n        bar: 'info'\n      });\n    };\n  });\n  var _useCurrentContacts = useCurrentContacts(query),\n    data = _useCurrentContacts.data,\n    isLoading = _useCurrentContacts.isLoading,\n    isError = _useCurrentContacts.isError,\n    isSuccess = _useCurrentContacts.isSuccess,\n    refetch = _useCurrentContacts.refetch;\n  var _useState = useState(hashQueryKey([query])),\n    _useState2 = _slicedToArray(_useState, 1),\n    defaultQuery = _useState2[0];\n  var queryHasChanged = defaultQuery !== hashQueryKey([query]);\n  var headers = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"username\",\n    direction: sortDirection,\n    active: sortBy === 'username',\n    onClick: setSort,\n    sort: \"username\"\n  }, t('Username')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"name\",\n    direction: sortDirection,\n    active: sortBy === 'name',\n    onClick: setSort,\n    sort: \"name\"\n  }, t('Name')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"phone\",\n    direction: sortDirection,\n    active: sortBy === 'phone',\n    onClick: setSort,\n    sort: \"phone\"\n  }, t('Phone')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"email\",\n    direction: sortDirection,\n    active: sortBy === 'visitorEmails.address',\n    onClick: setSort,\n    sort: \"visitorEmails.address\"\n  }, t('Email')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"lastchat\",\n    direction: sortDirection,\n    active: sortBy === 'lastChat.ts',\n    onClick: setSort,\n    sort: \"lastChat.ts\"\n  }, t('Last_Chat')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"call\",\n    width: 44\n  }));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, (isSuccess && (data === null || data === void 0 ? void 0 : data.visitors.length) > 0 || queryHasChanged) && /*#__PURE__*/React.createElement(FilterByText, {\n    onChange: setTerm\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onButtonNewClick,\n    primary: true\n  }, t('New_contact'))), isLoading && /*#__PURE__*/React.createElement(GenericTable, null, /*#__PURE__*/React.createElement(GenericTableHeader, null, headers), /*#__PURE__*/React.createElement(GenericTableBody, null, /*#__PURE__*/React.createElement(GenericTableLoadingRow, {\n    cols: 6\n  }))), isSuccess && (data === null || data === void 0 ? void 0 : data.visitors.length) === 0 && queryHasChanged && /*#__PURE__*/React.createElement(GenericNoResults, null), isSuccess && (data === null || data === void 0 ? void 0 : data.visitors.length) === 0 && !queryHasChanged && /*#__PURE__*/React.createElement(GenericNoResults, {\n    icon: \"user-plus\",\n    title: t('No_contacts_yet'),\n    description: t('No_contacts_yet_description'),\n    buttonTitle: t('New_contact'),\n    buttonAction: onButtonNewClick,\n    linkHref: \"https://go.rocket.chat/i/omnichannel-docs\",\n    linkText: t('Learn_more_about_contacts')\n  }), isSuccess && (data === null || data === void 0 ? void 0 : data.visitors.length) > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GenericTable, null, /*#__PURE__*/React.createElement(GenericTableHeader, null, headers), /*#__PURE__*/React.createElement(GenericTableBody, null, data === null || data === void 0 ? void 0 : data.visitors.map(function (_ref) {\n    var _id = _ref._id,\n      username = _ref.username,\n      fname = _ref.fname,\n      name = _ref.name,\n      visitorEmails = _ref.visitorEmails,\n      phone = _ref.phone,\n      lastChat = _ref.lastChat;\n    var phoneNumber = (phone === null || phone === void 0 ? void 0 : phone.length) && phone[0].phoneNumber || '';\n    var visitorEmail = (visitorEmails === null || visitorEmails === void 0 ? void 0 : visitorEmails.length) && visitorEmails[0].address;\n    return /*#__PURE__*/React.createElement(GenericTableRow, {\n      action: true,\n      key: _id,\n      tabIndex: 0,\n      role: \"link\",\n      height: \"40px\",\n      \"qa-user-id\": _id,\n      \"rcx-show-call-button-on-hover\": true,\n      onClick: onRowClick(_id)\n    }, /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true\n    }, username), /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true\n    }, parseOutboundPhoneNumber(fname || name)), /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true\n    }, parseOutboundPhoneNumber(phoneNumber)), /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true\n    }, visitorEmail), /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true\n    }, lastChat && formatDate(lastChat.ts)), /*#__PURE__*/React.createElement(GenericTableCell, null, isCallReady && /*#__PURE__*/React.createElement(CallDialpadButton, {\n      phoneNumber: phoneNumber\n    })));\n  }))), /*#__PURE__*/React.createElement(Pagination, _extends({\n    divider: true,\n    current: current,\n    itemsPerPage: itemsPerPage,\n    count: data === null || data === void 0 ? void 0 : data.total,\n    onSetItemsPerPage: setItemsPerPage,\n    onSetCurrent: setCurrent\n  }, paginationProps))), isError && /*#__PURE__*/React.createElement(Box, {\n    mbs: 20\n  }, /*#__PURE__*/React.createElement(States, null, /*#__PURE__*/React.createElement(StatesIcon, {\n    variation: \"danger\",\n    name: \"circle-exclamation\"\n  }), /*#__PURE__*/React.createElement(StatesTitle, null, t('Connection_error')), /*#__PURE__*/React.createElement(StatesActions, null, /*#__PURE__*/React.createElement(StatesAction, {\n    icon: \"reload\",\n    onClick: function () {\n      return refetch();\n    }\n  }, t('Reload_page'))))));\n}\nmodule.exportDefault(ContactTable);","map":{"version":3,"names":["_extends","module","link","default","v","_objectSpread","_slicedToArray","_objectWithoutProperties","Pagination","States","StatesAction","StatesActions","StatesIcon","StatesTitle","Box","Button","useDebouncedState","useDebouncedValue","useMutableCallback","useRoute","useTranslation","hashQueryKey","React","useMemo","useState","FilterByText","GenericNoResults","GenericTable","GenericTableHeader","GenericTableCell","GenericTableBody","GenericTableRow","GenericTableHeaderCell","GenericTableLoadingRow","usePagination","useSort","useIsCallReady","useFormatDate","parseOutboundPhoneNumber","CallDialpadButton","useCurrentContacts","ContactTable","_usePagination","current","itemsPerPage","setItemsPerPage","setCurrent","paginationProps","_excluded","_useSort","sortBy","sortDirection","setSort","isCallReady","_useDebouncedState","_useDebouncedState2","term","setTerm","t","query","sort","count","offset","directoryRoute","formatDate","onButtonNewClick","push","page","bar","onRowClick","id","_useCurrentContacts","data","isLoading","isError","isSuccess","refetch","_useState","_useState2","defaultQuery","queryHasChanged","headers","createElement","Fragment","key","direction","active","onClick","width","visitors","length","onChange","primary","cols","icon","title","description","buttonTitle","buttonAction","linkHref","linkText","map","_ref","_id","username","fname","name","visitorEmails","phone","lastChat","phoneNumber","visitorEmail","address","action","tabIndex","role","height","withTruncatedText","ts","divider","total","onSetItemsPerPage","onSetCurrent","mbs","variation","exportDefault"],"sources":["client/views/omnichannel/directory/contacts/ContactTable.tsx"],"sourcesContent":["import { Pagination, States, StatesAction, StatesActions, StatesIcon, StatesTitle, Box, Button } from '@rocket.chat/fuselage';\nimport { useDebouncedState, useDebouncedValue, useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useRoute, useTranslation } from '@rocket.chat/ui-contexts';\nimport { hashQueryKey } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useState } from 'react';\n\nimport FilterByText from '../../../../components/FilterByText';\nimport GenericNoResults from '../../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableHeader,\n\tGenericTableCell,\n\tGenericTableBody,\n\tGenericTableRow,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingRow,\n} from '../../../../components/GenericTable';\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\nimport { useIsCallReady } from '../../../../contexts/CallContext';\nimport { useFormatDate } from '../../../../hooks/useFormatDate';\nimport { parseOutboundPhoneNumber } from '../../../../lib/voip/parseOutboundPhoneNumber';\nimport { CallDialpadButton } from '../components/CallDialpadButton';\nimport { useCurrentContacts } from './hooks/useCurrentContacts';\n\nfunction ContactTable(): ReactElement {\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\tconst { sortBy, sortDirection, setSort } = useSort<'username' | 'phone' | 'name' | 'visitorEmails.address' | 'lastChat.ts'>('username');\n\tconst isCallReady = useIsCallReady();\n\n\tconst [term, setTerm] = useDebouncedState('', 500);\n\n\tconst t = useTranslation();\n\n\tconst query = useDebouncedValue(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tterm,\n\t\t\t\tsort: `{ \"${sortBy}\": ${sortDirection === 'asc' ? 1 : -1} }`,\n\t\t\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t\t\t...(current && { offset: current }),\n\t\t\t}),\n\t\t\t[itemsPerPage, current, sortBy, sortDirection, term],\n\t\t),\n\t\t500,\n\t);\n\n\tconst directoryRoute = useRoute('omnichannel-directory');\n\tconst formatDate = useFormatDate();\n\n\tconst onButtonNewClick = useMutableCallback(() =>\n\t\tdirectoryRoute.push({\n\t\t\tpage: 'contacts',\n\t\t\tbar: 'new',\n\t\t}),\n\t);\n\n\tconst onRowClick = useMutableCallback(\n\t\t(id) => (): void =>\n\t\t\tdirectoryRoute.push({\n\t\t\t\tpage: 'contacts',\n\t\t\t\tid,\n\t\t\t\tbar: 'info',\n\t\t\t}),\n\t);\n\n\tconst { data, isLoading, isError, isSuccess, refetch } = useCurrentContacts(query);\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell key='username' direction={sortDirection} active={sortBy === 'username'} onClick={setSort} sort='username'>\n\t\t\t\t{t('Username')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name'>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='phone' direction={sortDirection} active={sortBy === 'phone'} onClick={setSort} sort='phone'>\n\t\t\t\t{t('Phone')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='email'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'visitorEmails.address'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='visitorEmails.address'\n\t\t\t>\n\t\t\t\t{t('Email')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='lastchat'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'lastChat.ts'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='lastChat.ts'\n\t\t\t>\n\t\t\t\t{t('Last_Chat')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='call' width={44} />\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{((isSuccess && data?.visitors.length > 0) || queryHasChanged) && (\n\t\t\t\t<FilterByText onChange={setTerm}>\n\t\t\t\t\t<Button onClick={onButtonNewClick} primary>\n\t\t\t\t\t\t{t('New_contact')}\n\t\t\t\t\t</Button>\n\t\t\t\t</FilterByText>\n\t\t\t)}\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingRow cols={6} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data?.visitors.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t{isSuccess && data?.visitors.length === 0 && !queryHasChanged && (\n\t\t\t\t<GenericNoResults\n\t\t\t\t\ticon='user-plus'\n\t\t\t\t\ttitle={t('No_contacts_yet')}\n\t\t\t\t\tdescription={t('No_contacts_yet_description')}\n\t\t\t\t\tbuttonTitle={t('New_contact')}\n\t\t\t\t\tbuttonAction={onButtonNewClick}\n\t\t\t\t\tlinkHref='https://go.rocket.chat/i/omnichannel-docs'\n\t\t\t\t\tlinkText={t('Learn_more_about_contacts')}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isSuccess && data?.visitors.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{data?.visitors.map(({ _id, username, fname, name, visitorEmails, phone, lastChat }) => {\n\t\t\t\t\t\t\t\tconst phoneNumber = (phone?.length && phone[0].phoneNumber) || '';\n\t\t\t\t\t\t\t\tconst visitorEmail = visitorEmails?.length && visitorEmails[0].address;\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<GenericTableRow\n\t\t\t\t\t\t\t\t\t\taction\n\t\t\t\t\t\t\t\t\t\tkey={_id}\n\t\t\t\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\t\t\t\trole='link'\n\t\t\t\t\t\t\t\t\t\theight='40px'\n\t\t\t\t\t\t\t\t\t\tqa-user-id={_id}\n\t\t\t\t\t\t\t\t\t\trcx-show-call-button-on-hover\n\t\t\t\t\t\t\t\t\t\tonClick={onRowClick(_id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{username}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{parseOutboundPhoneNumber(fname || name)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{parseOutboundPhoneNumber(phoneNumber)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{visitorEmail}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{lastChat && formatDate(lastChat.ts)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell>{isCallReady && <CallDialpadButton phoneNumber={phoneNumber} />}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t</GenericTableRow>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total}\n\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{isError && (\n\t\t\t\t<Box mbs={20}>\n\t\t\t\t\t<States>\n\t\t\t\t\t\t<StatesIcon variation='danger' name='circle-exclamation' />\n\t\t\t\t\t\t<StatesTitle>{t('Connection_error')}</StatesTitle>\n\t\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t\t<StatesAction icon='reload' onClick={() => refetch()}>\n\t\t\t\t\t\t\t\t{t('Reload_page')}\n\t\t\t\t\t\t\t</StatesAction>\n\t\t\t\t\t\t</StatesActions>\n\t\t\t\t\t</States>\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default ContactTable;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"d58397d7ddbbbec165a34da519d13f0d3f7a4871"}
