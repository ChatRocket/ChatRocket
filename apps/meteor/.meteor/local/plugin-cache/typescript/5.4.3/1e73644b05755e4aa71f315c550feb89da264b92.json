{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/chats/contextualBar/ChatInfo.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/omnichannel/directory/chats/contextualBar/ChatInfo.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/chats/contextualBar/ChatInfo.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/directory/chats/contextualBar/ChatInfo.tsx","sourceRoot":"","sources":["client/views/omnichannel/directory/chats/contextualBar/ChatInfo.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { ILivechatCustomField, IOmnichannelRoom, IVisitor, Serialized } from '@rocket.chat/core-typings';\nimport { Box, Margins, Tag, Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { IRouterPaths } from '@rocket.chat/ui-contexts';\nimport { useToastMessageDispatch, useRoute, useUserSubscription, useTranslation, usePermission } from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport moment from 'moment';\nimport React, { useEffect, useMemo, useState } from 'react';\n\nimport DepartmentField from './DepartmentField';\nimport VisitorClientInfo from './VisitorClientInfo';\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../../../components/Contextualbar';\nimport { InfoPanelField, InfoPanelLabel, InfoPanelText } from '../../../../../components/InfoPanel';\nimport MarkdownText from '../../../../../components/MarkdownText';\nimport { useEndpointData } from '../../../../../hooks/useEndpointData';\nimport { useFormatDateAndTime } from '../../../../../hooks/useFormatDateAndTime';\nimport { useFormatDuration } from '../../../../../hooks/useFormatDuration';\nimport CustomField from '../../../components/CustomField';\nimport { AgentField, SlaField, ContactField, SourceField } from '../../components';\nimport PriorityField from '../../components/PriorityField';\nimport { useOmnichannelRoomInfo } from '../../hooks/useOmnichannelRoomInfo';\nimport { formatQueuedAt } from '../../utils/formatQueuedAt';\n\ntype ChatInfoProps = {\n\tid: string;\n\troute: keyof IRouterPaths;\n};\n\n// TODO: Remove moment we are mixing moment and our own formatters :sadface:\nfunction ChatInfo({ id, route }: ChatInfoProps) {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst { value: allCustomFields, phase: stateCustomFields } = useEndpointData('/v1/livechat/custom-fields');\n\tconst [customFields, setCustomFields] = useState<Serialized<ILivechatCustomField>[]>([]);\n\tconst formatDuration = useFormatDuration();\n\n\tconst { data: room } = useOmnichannelRoomInfo(id); // FIXME: `room` is serialized, but we need to deserialize it\n\n\tconst {\n\t\tts,\n\t\ttags,\n\t\tclosedAt,\n\t\tdepartmentId,\n\t\tv,\n\t\tservedBy,\n\t\tmetrics,\n\t\ttopic,\n\t\twaitingResponse,\n\t\tresponseBy,\n\t\tslaId,\n\t\tpriorityId,\n\t\tlivechatData,\n\t\tsource,\n\t\tqueuedAt,\n\t} = room || { v: {} };\n\n\tconst routePath = useRoute(route || 'omnichannel-directory');\n\tconst canViewCustomFields = usePermission('view-livechat-room-customfields');\n\tconst subscription = useUserSubscription(id);\n\tconst hasGlobalEditRoomPermission = usePermission('save-others-livechat-room-info');\n\tconst hasLocalEditRoomPermission = servedBy?._id === Meteor.userId();\n\tconst visitorId = v?._id;\n\tconst queueStartedAt = queuedAt || ts;\n\n\tconst queueTime = useMemo(() => formatQueuedAt(room), [room]);\n\n\tuseEffect(() => {\n\t\tif (allCustomFields) {\n\t\t\tconst { customFields: customFieldsAPI } = allCustomFields;\n\t\t\tsetCustomFields(customFieldsAPI);\n\t\t}\n\t}, [allCustomFields, stateCustomFields]);\n\n\tconst checkIsVisibleAndScopeRoom = (key: string) => {\n\t\tconst field = customFields.find(({ _id }) => _id === key);\n\t\treturn field?.visibility === 'visible' && field?.scope === 'room';\n\t};\n\n\tconst onEditClick = useMutableCallback(() => {\n\t\tconst hasEditAccess = !!subscription || hasLocalEditRoomPermission || hasGlobalEditRoomPermission;\n\t\tif (!hasEditAccess) {\n\t\t\treturn dispatchToastMessage({ type: 'error', message: t('Not_authorized') });\n\t\t}\n\n\t\troutePath.push(\n\t\t\troute\n\t\t\t\t? {\n\t\t\t\t\t\ttab: 'room-info',\n\t\t\t\t\t\tcontext: 'edit',\n\t\t\t\t\t\tid,\n\t\t\t\t\t}\n\t\t\t\t: {\n\t\t\t\t\t\tpage: 'chats',\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tbar: 'edit',\n\t\t\t\t\t},\n\t\t);\n\t});\n\n\tconst customFieldEntries: [string, any][] = Object.entries(livechatData || {}).filter(\n\t\t([key]) => checkIsVisibleAndScopeRoom(key) && livechatData[key],\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent p={24}>\n\t\t\t\t<Margins block='x4'>\n\t\t\t\t\t{source && <SourceField room={room as unknown as IOmnichannelRoom} />}\n\t\t\t\t\t{room && v && <ContactField contact={v as IVisitor} room={room as unknown as IOmnichannelRoom} />}\n\t\t\t\t\t{visitorId && <VisitorClientInfo uid={visitorId} />}\n\t\t\t\t\t{servedBy && <AgentField agent={servedBy as unknown as IOmnichannelRoom['servedBy']} />}\n\t\t\t\t\t{departmentId && <DepartmentField departmentId={departmentId} />}\n\t\t\t\t\t{tags && tags.length > 0 && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Tags')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>\n\t\t\t\t\t\t\t\t{tags.map((tag) => (\n\t\t\t\t\t\t\t\t\t<Box key={tag} mie={4} display='inline'>\n\t\t\t\t\t\t\t\t\t\t<Tag style={{ display: 'inline' }} disabled>\n\t\t\t\t\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{topic && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Topic')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText withTruncatedText={false}>\n\t\t\t\t\t\t\t\t<MarkdownText variant='inline' content={topic} />\n\t\t\t\t\t\t\t</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{queueStartedAt && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Queue_Time')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{queueTime}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{closedAt && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Chat_Duration')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{moment(closedAt).from(moment(ts), true)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{ts && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Created_at')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDateAndTime(ts)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{closedAt && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Closed_At')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDateAndTime(closedAt)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{servedBy?.ts && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Taken_at')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDateAndTime(servedBy.ts)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{metrics?.response?.avg && formatDuration(metrics.response.avg) && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Avg_response_time')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDuration(metrics.response.avg)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{!waitingResponse && responseBy?.lastMessageTs && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Inactivity_Time')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{moment(responseBy.lastMessageTs).fromNow(true)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{canViewCustomFields && customFieldEntries.map(([key, value]) => <CustomField key={key} id={key} value={value} />)}\n\t\t\t\t\t{slaId && <SlaField id={slaId} />}\n\t\t\t\t\t{priorityId && <PriorityField id={priorityId} />}\n\t\t\t\t</Margins>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button icon='pencil' onClick={onEditClick} data-qa-id='room-info-edit'>\n\t\t\t\t\t\t{t('Edit')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n}\n\nexport default ChatInfo;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/chats/contextualBar/ChatInfo.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/omnichannel/directory/chats/contextualBar/ChatInfo.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/directory/chats/contextualBar/ChatInfo.tsx","sourceRoot":"","sources":["client/views/omnichannel/directory/chats/contextualBar/ChatInfo.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { ILivechatCustomField, IOmnichannelRoom, IVisitor, Serialized } from '@rocket.chat/core-typings';\nimport { Box, Margins, Tag, Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { IRouterPaths } from '@rocket.chat/ui-contexts';\nimport { useToastMessageDispatch, useRoute, useUserSubscription, useTranslation, usePermission } from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport moment from 'moment';\nimport React, { useEffect, useMemo, useState } from 'react';\n\nimport DepartmentField from './DepartmentField';\nimport VisitorClientInfo from './VisitorClientInfo';\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../../../components/Contextualbar';\nimport { InfoPanelField, InfoPanelLabel, InfoPanelText } from '../../../../../components/InfoPanel';\nimport MarkdownText from '../../../../../components/MarkdownText';\nimport { useEndpointData } from '../../../../../hooks/useEndpointData';\nimport { useFormatDateAndTime } from '../../../../../hooks/useFormatDateAndTime';\nimport { useFormatDuration } from '../../../../../hooks/useFormatDuration';\nimport CustomField from '../../../components/CustomField';\nimport { AgentField, SlaField, ContactField, SourceField } from '../../components';\nimport PriorityField from '../../components/PriorityField';\nimport { useOmnichannelRoomInfo } from '../../hooks/useOmnichannelRoomInfo';\nimport { formatQueuedAt } from '../../utils/formatQueuedAt';\n\ntype ChatInfoProps = {\n\tid: string;\n\troute: keyof IRouterPaths;\n};\n\n// TODO: Remove moment we are mixing moment and our own formatters :sadface:\nfunction ChatInfo({ id, route }: ChatInfoProps) {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst { value: allCustomFields, phase: stateCustomFields } = useEndpointData('/v1/livechat/custom-fields');\n\tconst [customFields, setCustomFields] = useState<Serialized<ILivechatCustomField>[]>([]);\n\tconst formatDuration = useFormatDuration();\n\n\tconst { data: room } = useOmnichannelRoomInfo(id); // FIXME: `room` is serialized, but we need to deserialize it\n\n\tconst {\n\t\tts,\n\t\ttags,\n\t\tclosedAt,\n\t\tdepartmentId,\n\t\tv,\n\t\tservedBy,\n\t\tmetrics,\n\t\ttopic,\n\t\twaitingResponse,\n\t\tresponseBy,\n\t\tslaId,\n\t\tpriorityId,\n\t\tlivechatData,\n\t\tsource,\n\t\tqueuedAt,\n\t} = room || { v: {} };\n\n\tconst routePath = useRoute(route || 'omnichannel-directory');\n\tconst canViewCustomFields = usePermission('view-livechat-room-customfields');\n\tconst subscription = useUserSubscription(id);\n\tconst hasGlobalEditRoomPermission = usePermission('save-others-livechat-room-info');\n\tconst hasLocalEditRoomPermission = servedBy?._id === Meteor.userId();\n\tconst visitorId = v?._id;\n\tconst queueStartedAt = queuedAt || ts;\n\n\tconst queueTime = useMemo(() => formatQueuedAt(room), [room]);\n\n\tuseEffect(() => {\n\t\tif (allCustomFields) {\n\t\t\tconst { customFields: customFieldsAPI } = allCustomFields;\n\t\t\tsetCustomFields(customFieldsAPI);\n\t\t}\n\t}, [allCustomFields, stateCustomFields]);\n\n\tconst checkIsVisibleAndScopeRoom = (key: string) => {\n\t\tconst field = customFields.find(({ _id }) => _id === key);\n\t\treturn field?.visibility === 'visible' && field?.scope === 'room';\n\t};\n\n\tconst onEditClick = useMutableCallback(() => {\n\t\tconst hasEditAccess = !!subscription || hasLocalEditRoomPermission || hasGlobalEditRoomPermission;\n\t\tif (!hasEditAccess) {\n\t\t\treturn dispatchToastMessage({ type: 'error', message: t('Not_authorized') });\n\t\t}\n\n\t\troutePath.push(\n\t\t\troute\n\t\t\t\t? {\n\t\t\t\t\t\ttab: 'room-info',\n\t\t\t\t\t\tcontext: 'edit',\n\t\t\t\t\t\tid,\n\t\t\t\t\t}\n\t\t\t\t: {\n\t\t\t\t\t\tpage: 'chats',\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tbar: 'edit',\n\t\t\t\t\t},\n\t\t);\n\t});\n\n\tconst customFieldEntries: [string, any][] = Object.entries(livechatData || {}).filter(\n\t\t([key]) => checkIsVisibleAndScopeRoom(key) && livechatData[key],\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent p={24}>\n\t\t\t\t<Margins block='x4'>\n\t\t\t\t\t{source && <SourceField room={room as unknown as IOmnichannelRoom} />}\n\t\t\t\t\t{room && v && <ContactField contact={v as IVisitor} room={room as unknown as IOmnichannelRoom} />}\n\t\t\t\t\t{visitorId && <VisitorClientInfo uid={visitorId} />}\n\t\t\t\t\t{servedBy && <AgentField agent={servedBy as unknown as IOmnichannelRoom['servedBy']} />}\n\t\t\t\t\t{departmentId && <DepartmentField departmentId={departmentId} />}\n\t\t\t\t\t{tags && tags.length > 0 && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Tags')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>\n\t\t\t\t\t\t\t\t{tags.map((tag) => (\n\t\t\t\t\t\t\t\t\t<Box key={tag} mie={4} display='inline'>\n\t\t\t\t\t\t\t\t\t\t<Tag style={{ display: 'inline' }} disabled>\n\t\t\t\t\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{topic && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Topic')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText withTruncatedText={false}>\n\t\t\t\t\t\t\t\t<MarkdownText variant='inline' content={topic} />\n\t\t\t\t\t\t\t</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{queueStartedAt && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Queue_Time')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{queueTime}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{closedAt && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Chat_Duration')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{moment(closedAt).from(moment(ts), true)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{ts && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Created_at')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDateAndTime(ts)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{closedAt && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Closed_At')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDateAndTime(closedAt)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{servedBy?.ts && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Taken_at')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDateAndTime(servedBy.ts)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{metrics?.response?.avg && formatDuration(metrics.response.avg) && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Avg_response_time')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDuration(metrics.response.avg)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{!waitingResponse && responseBy?.lastMessageTs && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Inactivity_Time')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{moment(responseBy.lastMessageTs).fromNow(true)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{canViewCustomFields && customFieldEntries.map(([key, value]) => <CustomField key={key} id={key} value={value} />)}\n\t\t\t\t\t{slaId && <SlaField id={slaId} />}\n\t\t\t\t\t{priorityId && <PriorityField id={priorityId} />}\n\t\t\t\t</Margins>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button icon='pencil' onClick={onEditClick} data-qa-id='room-info-edit'>\n\t\t\t\t\t\t{t('Edit')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n}\n\nexport default ChatInfo;\n"]}}},"code":"let Box, Margins, Tag, Button, ButtonGroup;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box(v) {\n    Box = v;\n  },\n  Margins(v) {\n    Margins = v;\n  },\n  Tag(v) {\n    Tag = v;\n  },\n  Button(v) {\n    Button = v;\n  },\n  ButtonGroup(v) {\n    ButtonGroup = v;\n  }\n}, 0);\nlet useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback(v) {\n    useMutableCallback = v;\n  }\n}, 1);\nlet useToastMessageDispatch, useRoute, useUserSubscription, useTranslation, usePermission;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useToastMessageDispatch(v) {\n    useToastMessageDispatch = v;\n  },\n  useRoute(v) {\n    useRoute = v;\n  },\n  useUserSubscription(v) {\n    useUserSubscription = v;\n  },\n  useTranslation(v) {\n    useTranslation = v;\n  },\n  usePermission(v) {\n    usePermission = v;\n  }\n}, 2);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n}, 3);\nlet moment;\nmodule.link(\"moment\", {\n  default(v) {\n    moment = v;\n  }\n}, 4);\nlet React, useEffect, useMemo, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  },\n  useState(v) {\n    useState = v;\n  }\n}, 5);\nlet DepartmentField;\nmodule.link(\"./DepartmentField\", {\n  default(v) {\n    DepartmentField = v;\n  }\n}, 6);\nlet VisitorClientInfo;\nmodule.link(\"./VisitorClientInfo\", {\n  default(v) {\n    VisitorClientInfo = v;\n  }\n}, 7);\nlet ContextualbarScrollableContent, ContextualbarFooter;\nmodule.link(\"../../../../../components/Contextualbar\", {\n  ContextualbarScrollableContent(v) {\n    ContextualbarScrollableContent = v;\n  },\n  ContextualbarFooter(v) {\n    ContextualbarFooter = v;\n  }\n}, 8);\nlet InfoPanelField, InfoPanelLabel, InfoPanelText;\nmodule.link(\"../../../../../components/InfoPanel\", {\n  InfoPanelField(v) {\n    InfoPanelField = v;\n  },\n  InfoPanelLabel(v) {\n    InfoPanelLabel = v;\n  },\n  InfoPanelText(v) {\n    InfoPanelText = v;\n  }\n}, 9);\nlet MarkdownText;\nmodule.link(\"../../../../../components/MarkdownText\", {\n  default(v) {\n    MarkdownText = v;\n  }\n}, 10);\nlet useEndpointData;\nmodule.link(\"../../../../../hooks/useEndpointData\", {\n  useEndpointData(v) {\n    useEndpointData = v;\n  }\n}, 11);\nlet useFormatDateAndTime;\nmodule.link(\"../../../../../hooks/useFormatDateAndTime\", {\n  useFormatDateAndTime(v) {\n    useFormatDateAndTime = v;\n  }\n}, 12);\nlet useFormatDuration;\nmodule.link(\"../../../../../hooks/useFormatDuration\", {\n  useFormatDuration(v) {\n    useFormatDuration = v;\n  }\n}, 13);\nlet CustomField;\nmodule.link(\"../../../components/CustomField\", {\n  default(v) {\n    CustomField = v;\n  }\n}, 14);\nlet AgentField, SlaField, ContactField, SourceField;\nmodule.link(\"../../components\", {\n  AgentField(v) {\n    AgentField = v;\n  },\n  SlaField(v) {\n    SlaField = v;\n  },\n  ContactField(v) {\n    ContactField = v;\n  },\n  SourceField(v) {\n    SourceField = v;\n  }\n}, 15);\nlet PriorityField;\nmodule.link(\"../../components/PriorityField\", {\n  default(v) {\n    PriorityField = v;\n  }\n}, 16);\nlet useOmnichannelRoomInfo;\nmodule.link(\"../../hooks/useOmnichannelRoomInfo\", {\n  useOmnichannelRoomInfo(v) {\n    useOmnichannelRoomInfo = v;\n  }\n}, 17);\nlet formatQueuedAt;\nmodule.link(\"../../utils/formatQueuedAt\", {\n  formatQueuedAt(v) {\n    formatQueuedAt = v;\n  }\n}, 18);\n// TODO: Remove moment we are mixing moment and our own formatters :sadface:\nfunction ChatInfo(_ref) {\n  var _metrics$response;\n  let {\n    id,\n    route\n  } = _ref;\n  const t = useTranslation();\n  const dispatchToastMessage = useToastMessageDispatch();\n  const formatDateAndTime = useFormatDateAndTime();\n  const {\n    value: allCustomFields,\n    phase: stateCustomFields\n  } = useEndpointData('/v1/livechat/custom-fields');\n  const [customFields, setCustomFields] = useState([]);\n  const formatDuration = useFormatDuration();\n  const {\n    data: room\n  } = useOmnichannelRoomInfo(id); // FIXME: `room` is serialized, but we need to deserialize it\n  const {\n    ts,\n    tags,\n    closedAt,\n    departmentId,\n    v,\n    servedBy,\n    metrics,\n    topic,\n    waitingResponse,\n    responseBy,\n    slaId,\n    priorityId,\n    livechatData,\n    source,\n    queuedAt\n  } = room || {\n    v: {}\n  };\n  const routePath = useRoute(route || 'omnichannel-directory');\n  const canViewCustomFields = usePermission('view-livechat-room-customfields');\n  const subscription = useUserSubscription(id);\n  const hasGlobalEditRoomPermission = usePermission('save-others-livechat-room-info');\n  const hasLocalEditRoomPermission = (servedBy === null || servedBy === void 0 ? void 0 : servedBy._id) === Meteor.userId();\n  const visitorId = v === null || v === void 0 ? void 0 : v._id;\n  const queueStartedAt = queuedAt || ts;\n  const queueTime = useMemo(() => formatQueuedAt(room), [room]);\n  useEffect(() => {\n    if (allCustomFields) {\n      const {\n        customFields: customFieldsAPI\n      } = allCustomFields;\n      setCustomFields(customFieldsAPI);\n    }\n  }, [allCustomFields, stateCustomFields]);\n  const checkIsVisibleAndScopeRoom = key => {\n    const field = customFields.find(_ref2 => {\n      let {\n        _id\n      } = _ref2;\n      return _id === key;\n    });\n    return (field === null || field === void 0 ? void 0 : field.visibility) === 'visible' && (field === null || field === void 0 ? void 0 : field.scope) === 'room';\n  };\n  const onEditClick = useMutableCallback(() => {\n    const hasEditAccess = !!subscription || hasLocalEditRoomPermission || hasGlobalEditRoomPermission;\n    if (!hasEditAccess) {\n      return dispatchToastMessage({\n        type: 'error',\n        message: t('Not_authorized')\n      });\n    }\n    routePath.push(route ? {\n      tab: 'room-info',\n      context: 'edit',\n      id\n    } : {\n      page: 'chats',\n      id,\n      bar: 'edit'\n    });\n  });\n  const customFieldEntries = Object.entries(livechatData || {}).filter(_ref3 => {\n    let [key] = _ref3;\n    return checkIsVisibleAndScopeRoom(key) && livechatData[key];\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ContextualbarScrollableContent, {\n    p: 24\n  }, /*#__PURE__*/React.createElement(Margins, {\n    block: \"x4\"\n  }, source && /*#__PURE__*/React.createElement(SourceField, {\n    room: room\n  }), room && v && /*#__PURE__*/React.createElement(ContactField, {\n    contact: v,\n    room: room\n  }), visitorId && /*#__PURE__*/React.createElement(VisitorClientInfo, {\n    uid: visitorId\n  }), servedBy && /*#__PURE__*/React.createElement(AgentField, {\n    agent: servedBy\n  }), departmentId && /*#__PURE__*/React.createElement(DepartmentField, {\n    departmentId: departmentId\n  }), tags && tags.length > 0 && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Tags')), /*#__PURE__*/React.createElement(InfoPanelText, null, tags.map(tag => /*#__PURE__*/React.createElement(Box, {\n    key: tag,\n    mie: 4,\n    display: \"inline\"\n  }, /*#__PURE__*/React.createElement(Tag, {\n    style: {\n      display: 'inline'\n    },\n    disabled: true\n  }, tag))))), topic && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Topic')), /*#__PURE__*/React.createElement(InfoPanelText, {\n    withTruncatedText: false\n  }, /*#__PURE__*/React.createElement(MarkdownText, {\n    variant: \"inline\",\n    content: topic\n  }))), queueStartedAt && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Queue_Time')), /*#__PURE__*/React.createElement(InfoPanelText, null, queueTime)), closedAt && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Chat_Duration')), /*#__PURE__*/React.createElement(InfoPanelText, null, moment(closedAt).from(moment(ts), true))), ts && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Created_at')), /*#__PURE__*/React.createElement(InfoPanelText, null, formatDateAndTime(ts))), closedAt && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Closed_At')), /*#__PURE__*/React.createElement(InfoPanelText, null, formatDateAndTime(closedAt))), (servedBy === null || servedBy === void 0 ? void 0 : servedBy.ts) && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Taken_at')), /*#__PURE__*/React.createElement(InfoPanelText, null, formatDateAndTime(servedBy.ts))), (metrics === null || metrics === void 0 ? void 0 : (_metrics$response = metrics.response) === null || _metrics$response === void 0 ? void 0 : _metrics$response.avg) && formatDuration(metrics.response.avg) && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Avg_response_time')), /*#__PURE__*/React.createElement(InfoPanelText, null, formatDuration(metrics.response.avg))), !waitingResponse && (responseBy === null || responseBy === void 0 ? void 0 : responseBy.lastMessageTs) && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Inactivity_Time')), /*#__PURE__*/React.createElement(InfoPanelText, null, moment(responseBy.lastMessageTs).fromNow(true))), canViewCustomFields && customFieldEntries.map(_ref4 => {\n    let [key, value] = _ref4;\n    return /*#__PURE__*/React.createElement(CustomField, {\n      key: key,\n      id: key,\n      value: value\n    });\n  }), slaId && /*#__PURE__*/React.createElement(SlaField, {\n    id: slaId\n  }), priorityId && /*#__PURE__*/React.createElement(PriorityField, {\n    id: priorityId\n  }))), /*#__PURE__*/React.createElement(ContextualbarFooter, null, /*#__PURE__*/React.createElement(ButtonGroup, {\n    stretch: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    icon: \"pencil\",\n    onClick: onEditClick,\n    \"data-qa-id\": \"room-info-edit\"\n  }, t('Edit')))));\n}\nmodule.exportDefault(ChatInfo);","map":{"version":3,"names":["Box","Margins","Tag","Button","ButtonGroup","module","link","v","useMutableCallback","useToastMessageDispatch","useRoute","useUserSubscription","useTranslation","usePermission","Meteor","moment","default","React","useEffect","useMemo","useState","DepartmentField","VisitorClientInfo","ContextualbarScrollableContent","ContextualbarFooter","InfoPanelField","InfoPanelLabel","InfoPanelText","MarkdownText","useEndpointData","useFormatDateAndTime","useFormatDuration","CustomField","AgentField","SlaField","ContactField","SourceField","PriorityField","useOmnichannelRoomInfo","formatQueuedAt","ChatInfo","_ref","_metrics$response","id","route","t","dispatchToastMessage","formatDateAndTime","value","allCustomFields","phase","stateCustomFields","customFields","setCustomFields","formatDuration","data","room","ts","tags","closedAt","departmentId","servedBy","metrics","topic","waitingResponse","responseBy","slaId","priorityId","livechatData","source","queuedAt","routePath","canViewCustomFields","subscription","hasGlobalEditRoomPermission","hasLocalEditRoomPermission","_id","userId","visitorId","queueStartedAt","queueTime","customFieldsAPI","checkIsVisibleAndScopeRoom","key","field","find","_ref2","visibility","scope","onEditClick","hasEditAccess","type","message","push","tab","context","page","bar","customFieldEntries","Object","entries","filter","_ref3","createElement","Fragment","p","block","contact","uid","agent","length","map","tag","mie","display","style","disabled","withTruncatedText","variant","content","from","response","avg","lastMessageTs","fromNow","_ref4","stretch","icon","onClick","exportDefault"],"sources":["client/views/omnichannel/directory/chats/contextualBar/ChatInfo.tsx"],"sourcesContent":["import type { ILivechatCustomField, IOmnichannelRoom, IVisitor, Serialized } from '@rocket.chat/core-typings';\nimport { Box, Margins, Tag, Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { IRouterPaths } from '@rocket.chat/ui-contexts';\nimport { useToastMessageDispatch, useRoute, useUserSubscription, useTranslation, usePermission } from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport moment from 'moment';\nimport React, { useEffect, useMemo, useState } from 'react';\n\nimport DepartmentField from './DepartmentField';\nimport VisitorClientInfo from './VisitorClientInfo';\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../../../components/Contextualbar';\nimport { InfoPanelField, InfoPanelLabel, InfoPanelText } from '../../../../../components/InfoPanel';\nimport MarkdownText from '../../../../../components/MarkdownText';\nimport { useEndpointData } from '../../../../../hooks/useEndpointData';\nimport { useFormatDateAndTime } from '../../../../../hooks/useFormatDateAndTime';\nimport { useFormatDuration } from '../../../../../hooks/useFormatDuration';\nimport CustomField from '../../../components/CustomField';\nimport { AgentField, SlaField, ContactField, SourceField } from '../../components';\nimport PriorityField from '../../components/PriorityField';\nimport { useOmnichannelRoomInfo } from '../../hooks/useOmnichannelRoomInfo';\nimport { formatQueuedAt } from '../../utils/formatQueuedAt';\n\ntype ChatInfoProps = {\n\tid: string;\n\troute: keyof IRouterPaths;\n};\n\n// TODO: Remove moment we are mixing moment and our own formatters :sadface:\nfunction ChatInfo({ id, route }: ChatInfoProps) {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst { value: allCustomFields, phase: stateCustomFields } = useEndpointData('/v1/livechat/custom-fields');\n\tconst [customFields, setCustomFields] = useState<Serialized<ILivechatCustomField>[]>([]);\n\tconst formatDuration = useFormatDuration();\n\n\tconst { data: room } = useOmnichannelRoomInfo(id); // FIXME: `room` is serialized, but we need to deserialize it\n\n\tconst {\n\t\tts,\n\t\ttags,\n\t\tclosedAt,\n\t\tdepartmentId,\n\t\tv,\n\t\tservedBy,\n\t\tmetrics,\n\t\ttopic,\n\t\twaitingResponse,\n\t\tresponseBy,\n\t\tslaId,\n\t\tpriorityId,\n\t\tlivechatData,\n\t\tsource,\n\t\tqueuedAt,\n\t} = room || { v: {} };\n\n\tconst routePath = useRoute(route || 'omnichannel-directory');\n\tconst canViewCustomFields = usePermission('view-livechat-room-customfields');\n\tconst subscription = useUserSubscription(id);\n\tconst hasGlobalEditRoomPermission = usePermission('save-others-livechat-room-info');\n\tconst hasLocalEditRoomPermission = servedBy?._id === Meteor.userId();\n\tconst visitorId = v?._id;\n\tconst queueStartedAt = queuedAt || ts;\n\n\tconst queueTime = useMemo(() => formatQueuedAt(room), [room]);\n\n\tuseEffect(() => {\n\t\tif (allCustomFields) {\n\t\t\tconst { customFields: customFieldsAPI } = allCustomFields;\n\t\t\tsetCustomFields(customFieldsAPI);\n\t\t}\n\t}, [allCustomFields, stateCustomFields]);\n\n\tconst checkIsVisibleAndScopeRoom = (key: string) => {\n\t\tconst field = customFields.find(({ _id }) => _id === key);\n\t\treturn field?.visibility === 'visible' && field?.scope === 'room';\n\t};\n\n\tconst onEditClick = useMutableCallback(() => {\n\t\tconst hasEditAccess = !!subscription || hasLocalEditRoomPermission || hasGlobalEditRoomPermission;\n\t\tif (!hasEditAccess) {\n\t\t\treturn dispatchToastMessage({ type: 'error', message: t('Not_authorized') });\n\t\t}\n\n\t\troutePath.push(\n\t\t\troute\n\t\t\t\t? {\n\t\t\t\t\t\ttab: 'room-info',\n\t\t\t\t\t\tcontext: 'edit',\n\t\t\t\t\t\tid,\n\t\t\t\t\t}\n\t\t\t\t: {\n\t\t\t\t\t\tpage: 'chats',\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tbar: 'edit',\n\t\t\t\t\t},\n\t\t);\n\t});\n\n\tconst customFieldEntries: [string, any][] = Object.entries(livechatData || {}).filter(\n\t\t([key]) => checkIsVisibleAndScopeRoom(key) && livechatData[key],\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent p={24}>\n\t\t\t\t<Margins block='x4'>\n\t\t\t\t\t{source && <SourceField room={room as unknown as IOmnichannelRoom} />}\n\t\t\t\t\t{room && v && <ContactField contact={v as IVisitor} room={room as unknown as IOmnichannelRoom} />}\n\t\t\t\t\t{visitorId && <VisitorClientInfo uid={visitorId} />}\n\t\t\t\t\t{servedBy && <AgentField agent={servedBy as unknown as IOmnichannelRoom['servedBy']} />}\n\t\t\t\t\t{departmentId && <DepartmentField departmentId={departmentId} />}\n\t\t\t\t\t{tags && tags.length > 0 && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Tags')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>\n\t\t\t\t\t\t\t\t{tags.map((tag) => (\n\t\t\t\t\t\t\t\t\t<Box key={tag} mie={4} display='inline'>\n\t\t\t\t\t\t\t\t\t\t<Tag style={{ display: 'inline' }} disabled>\n\t\t\t\t\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{topic && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Topic')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText withTruncatedText={false}>\n\t\t\t\t\t\t\t\t<MarkdownText variant='inline' content={topic} />\n\t\t\t\t\t\t\t</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{queueStartedAt && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Queue_Time')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{queueTime}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{closedAt && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Chat_Duration')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{moment(closedAt).from(moment(ts), true)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{ts && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Created_at')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDateAndTime(ts)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{closedAt && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Closed_At')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDateAndTime(closedAt)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{servedBy?.ts && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Taken_at')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDateAndTime(servedBy.ts)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{metrics?.response?.avg && formatDuration(metrics.response.avg) && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Avg_response_time')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDuration(metrics.response.avg)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{!waitingResponse && responseBy?.lastMessageTs && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Inactivity_Time')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{moment(responseBy.lastMessageTs).fromNow(true)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{canViewCustomFields && customFieldEntries.map(([key, value]) => <CustomField key={key} id={key} value={value} />)}\n\t\t\t\t\t{slaId && <SlaField id={slaId} />}\n\t\t\t\t\t{priorityId && <PriorityField id={priorityId} />}\n\t\t\t\t</Margins>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button icon='pencil' onClick={onEditClick} data-qa-id='room-info-edit'>\n\t\t\t\t\t\t{t('Edit')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n}\n\nexport default ChatInfo;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"1e73644b05755e4aa71f315c550feb89da264b92"}
