{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/agents/AgentEdit.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/omnichannel/agents/AgentEdit.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/agents/AgentEdit.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/agents/AgentEdit.tsx","sourceRoot":"","sources":["client/views/omnichannel/agents/AgentEdit.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { ILivechatAgent, ILivechatDepartment, ILivechatDepartmentAgents } from '@rocket.chat/core-typings';\nimport {\n\tField,\n\tFieldLabel,\n\tFieldGroup,\n\tFieldRow,\n\tTextInput,\n\tButton,\n\tBox,\n\tMultiSelect,\n\tIcon,\n\tSelect,\n\tContextualbarFooter,\n\tButtonGroup,\n\tCheckOption,\n} from '@rocket.chat/fuselage';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { useMutableCallback, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useSetting, useMethod, useTranslation, useEndpoint, useRouter } from '@rocket.chat/ui-contexts';\nimport { useQueryClient } from '@tanstack/react-query';\nimport React, { useMemo } from 'react';\nimport { useForm, Controller, FormProvider } from 'react-hook-form';\n\nimport { getUserEmailAddress } from '../../../../lib/getUserEmailAddress';\nimport {\n\tContextualbar,\n\tContextualbarTitle,\n\tContextualbarClose,\n\tContextualbarHeader,\n\tContextualbarScrollableContent,\n} from '../../../components/Contextualbar';\nimport { UserInfoAvatar } from '../../../components/UserInfo';\nimport { MaxChatsPerAgent } from '../additionalForms';\n\ntype AgentEditProps = {\n\tagentData: Pick<ILivechatAgent, '_id' | 'username' | 'name' | 'status' | 'statusLivechat' | 'emails' | 'livechat'>;\n\tuserDepartments: (Pick<ILivechatDepartmentAgents, 'departmentId'> & { departmentName: string })[];\n\tavailableDepartments: Pick<ILivechatDepartment, '_id' | 'name' | 'archived'>[];\n};\n\nconst AgentEdit = ({ agentData, userDepartments, availableDepartments }: AgentEditProps) => {\n\tconst t = useTranslation();\n\tconst router = useRouter();\n\tconst queryClient = useQueryClient();\n\n\tconst voipEnabled = useSetting('VoIP_Enabled');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst { name, username, livechat, statusLivechat } = agentData;\n\n\tconst email = getUserEmailAddress(agentData);\n\n\tconst departments: Pick<ILivechatDepartment, '_id' | 'name' | 'archived'>[] = useMemo(() => {\n\t\tconst pending = userDepartments\n\t\t\t.filter(({ departmentId }) => !availableDepartments.find((dep) => dep._id === departmentId))\n\t\t\t.map((dep) => ({\n\t\t\t\t_id: dep.departmentId,\n\t\t\t\tname: dep.departmentName,\n\t\t\t}));\n\n\t\treturn [...availableDepartments, ...pending];\n\t}, [availableDepartments, userDepartments]);\n\n\tconst departmentsOptions: SelectOption[] = useMemo(() => {\n\t\tconst archivedDepartment = (name: string, archived?: boolean) => (archived ? `${name} [${t('Archived')}]` : name);\n\n\t\treturn (\n\t\t\tdepartments.map(({ _id, name, archived }) =>\n\t\t\t\tname ? [_id, archivedDepartment(name, archived)] : [_id, archivedDepartment(_id, archived)],\n\t\t\t) || []\n\t\t);\n\t}, [departments, t]);\n\n\tconst statusOptions: SelectOption[] = useMemo(\n\t\t() => [\n\t\t\t['available', t('Available')],\n\t\t\t['not-available', t('Not_Available')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst initialDepartmentValue = useMemo(() => userDepartments.map(({ departmentId }) => departmentId) || [], [userDepartments]);\n\n\tconst methods = useForm({\n\t\tvalues: {\n\t\t\tname,\n\t\t\tusername,\n\t\t\temail,\n\t\t\tdepartments: initialDepartmentValue,\n\t\t\tstatus: statusLivechat,\n\t\t\tmaxNumberSimultaneousChat: livechat?.maxNumberSimultaneousChat || 0,\n\t\t\tvoipExtension: '',\n\t\t},\n\t});\n\n\tconst {\n\t\tcontrol,\n\t\thandleSubmit,\n\t\treset,\n\t\tformState: { isDirty },\n\t} = methods;\n\n\tconst saveAgentInfo = useMethod('livechat:saveAgentInfo');\n\tconst saveAgentStatus = useEndpoint('POST', '/v1/livechat/agent.status');\n\n\tconst handleSave = useMutableCallback(async ({ status, departments, ...data }) => {\n\t\ttry {\n\t\t\tawait saveAgentStatus({ agentId: agentData._id, status });\n\t\t\tawait saveAgentInfo(agentData._id, data, departments);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Success') });\n\t\t\trouter.navigate('/omnichannel/agents');\n\t\t\tqueryClient.invalidateQueries(['livechat-agents']);\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\tconst formId = useUniqueId();\n\tconst nameField = useUniqueId();\n\tconst usernameField = useUniqueId();\n\tconst emailField = useUniqueId();\n\tconst departmentsField = useUniqueId();\n\tconst statusField = useUniqueId();\n\tconst voipExtensionField = useUniqueId();\n\n\treturn (\n\t\t<Contextualbar data-qa-id='agent-edit-contextual-bar'>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarTitle>{t('Edit_User')}</ContextualbarTitle>\n\t\t\t\t<ContextualbarClose onClick={() => router.navigate('/omnichannel/agents')} />\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<FormProvider {...methods}>\n\t\t\t\t\t<form id={formId} onSubmit={handleSubmit(handleSave)}>\n\t\t\t\t\t\t{username && (\n\t\t\t\t\t\t\t<Box display='flex' flexDirection='column' alignItems='center'>\n\t\t\t\t\t\t\t\t<UserInfoAvatar data-qa-id='agent-edit-avatar' username={username} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={nameField}>{t('Name')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='name'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => <TextInput id={nameField} data-qa-id='agent-edit-name' {...field} readOnly />}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={usernameField}>{t('Username')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='username'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t\tid={usernameField}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-qa-id='agent-edit-username'\n\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\t\t\taddon={<Icon name='at' size='x20' />}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={emailField}>{t('Email')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t\tid={emailField}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-qa-id='agent-edit-email'\n\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\t\t\taddon={<Icon name='mail' size='x20' />}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={departmentsField}>{t('Departments')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='departments'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t<MultiSelect\n\t\t\t\t\t\t\t\t\t\t\t\tid={departmentsField}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-qa-id='agent-edit-departments'\n\t\t\t\t\t\t\t\t\t\t\t\toptions={departmentsOptions}\n\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\t\t\t\t\trenderItem={({ label, ...props }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckOption {...props} label={<span style={{ whiteSpace: 'normal' }}>{label}</span>} />\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={statusField}>{t('Status')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='status'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\t\tid={statusField}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-qa-id='agent-edit-status'\n\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\toptions={statusOptions}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t{MaxChatsPerAgent && <MaxChatsPerAgent />}\n\t\t\t\t\t\t\t{voipEnabled && (\n\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor={voipExtensionField}>{t('VoIP_Extension')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\t\tname='voipExtension'\n\t\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\t\trender={({ field }) => <TextInput id={voipExtensionField} {...field} data-qa-id='agent-edit-voip-extension' />}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</FieldGroup>\n\t\t\t\t\t</form>\n\t\t\t\t</FormProvider>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button data-qa-id='agent-edit-reset' type='reset' disabled={!isDirty} onClick={() => reset()}>\n\t\t\t\t\t\t{t('Reset')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button form={formId} primary type='submit' data-qa-id='agent-edit-save' disabled={!isDirty}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</Contextualbar>\n\t);\n};\n\nexport default AgentEdit;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/agents/AgentEdit.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/omnichannel/agents/AgentEdit.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/agents/AgentEdit.tsx","sourceRoot":"","sources":["client/views/omnichannel/agents/AgentEdit.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { ILivechatAgent, ILivechatDepartment, ILivechatDepartmentAgents } from '@rocket.chat/core-typings';\nimport {\n\tField,\n\tFieldLabel,\n\tFieldGroup,\n\tFieldRow,\n\tTextInput,\n\tButton,\n\tBox,\n\tMultiSelect,\n\tIcon,\n\tSelect,\n\tContextualbarFooter,\n\tButtonGroup,\n\tCheckOption,\n} from '@rocket.chat/fuselage';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { useMutableCallback, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useSetting, useMethod, useTranslation, useEndpoint, useRouter } from '@rocket.chat/ui-contexts';\nimport { useQueryClient } from '@tanstack/react-query';\nimport React, { useMemo } from 'react';\nimport { useForm, Controller, FormProvider } from 'react-hook-form';\n\nimport { getUserEmailAddress } from '../../../../lib/getUserEmailAddress';\nimport {\n\tContextualbar,\n\tContextualbarTitle,\n\tContextualbarClose,\n\tContextualbarHeader,\n\tContextualbarScrollableContent,\n} from '../../../components/Contextualbar';\nimport { UserInfoAvatar } from '../../../components/UserInfo';\nimport { MaxChatsPerAgent } from '../additionalForms';\n\ntype AgentEditProps = {\n\tagentData: Pick<ILivechatAgent, '_id' | 'username' | 'name' | 'status' | 'statusLivechat' | 'emails' | 'livechat'>;\n\tuserDepartments: (Pick<ILivechatDepartmentAgents, 'departmentId'> & { departmentName: string })[];\n\tavailableDepartments: Pick<ILivechatDepartment, '_id' | 'name' | 'archived'>[];\n};\n\nconst AgentEdit = ({ agentData, userDepartments, availableDepartments }: AgentEditProps) => {\n\tconst t = useTranslation();\n\tconst router = useRouter();\n\tconst queryClient = useQueryClient();\n\n\tconst voipEnabled = useSetting('VoIP_Enabled');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst { name, username, livechat, statusLivechat } = agentData;\n\n\tconst email = getUserEmailAddress(agentData);\n\n\tconst departments: Pick<ILivechatDepartment, '_id' | 'name' | 'archived'>[] = useMemo(() => {\n\t\tconst pending = userDepartments\n\t\t\t.filter(({ departmentId }) => !availableDepartments.find((dep) => dep._id === departmentId))\n\t\t\t.map((dep) => ({\n\t\t\t\t_id: dep.departmentId,\n\t\t\t\tname: dep.departmentName,\n\t\t\t}));\n\n\t\treturn [...availableDepartments, ...pending];\n\t}, [availableDepartments, userDepartments]);\n\n\tconst departmentsOptions: SelectOption[] = useMemo(() => {\n\t\tconst archivedDepartment = (name: string, archived?: boolean) => (archived ? `${name} [${t('Archived')}]` : name);\n\n\t\treturn (\n\t\t\tdepartments.map(({ _id, name, archived }) =>\n\t\t\t\tname ? [_id, archivedDepartment(name, archived)] : [_id, archivedDepartment(_id, archived)],\n\t\t\t) || []\n\t\t);\n\t}, [departments, t]);\n\n\tconst statusOptions: SelectOption[] = useMemo(\n\t\t() => [\n\t\t\t['available', t('Available')],\n\t\t\t['not-available', t('Not_Available')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst initialDepartmentValue = useMemo(() => userDepartments.map(({ departmentId }) => departmentId) || [], [userDepartments]);\n\n\tconst methods = useForm({\n\t\tvalues: {\n\t\t\tname,\n\t\t\tusername,\n\t\t\temail,\n\t\t\tdepartments: initialDepartmentValue,\n\t\t\tstatus: statusLivechat,\n\t\t\tmaxNumberSimultaneousChat: livechat?.maxNumberSimultaneousChat || 0,\n\t\t\tvoipExtension: '',\n\t\t},\n\t});\n\n\tconst {\n\t\tcontrol,\n\t\thandleSubmit,\n\t\treset,\n\t\tformState: { isDirty },\n\t} = methods;\n\n\tconst saveAgentInfo = useMethod('livechat:saveAgentInfo');\n\tconst saveAgentStatus = useEndpoint('POST', '/v1/livechat/agent.status');\n\n\tconst handleSave = useMutableCallback(async ({ status, departments, ...data }) => {\n\t\ttry {\n\t\t\tawait saveAgentStatus({ agentId: agentData._id, status });\n\t\t\tawait saveAgentInfo(agentData._id, data, departments);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Success') });\n\t\t\trouter.navigate('/omnichannel/agents');\n\t\t\tqueryClient.invalidateQueries(['livechat-agents']);\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\tconst formId = useUniqueId();\n\tconst nameField = useUniqueId();\n\tconst usernameField = useUniqueId();\n\tconst emailField = useUniqueId();\n\tconst departmentsField = useUniqueId();\n\tconst statusField = useUniqueId();\n\tconst voipExtensionField = useUniqueId();\n\n\treturn (\n\t\t<Contextualbar data-qa-id='agent-edit-contextual-bar'>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarTitle>{t('Edit_User')}</ContextualbarTitle>\n\t\t\t\t<ContextualbarClose onClick={() => router.navigate('/omnichannel/agents')} />\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<FormProvider {...methods}>\n\t\t\t\t\t<form id={formId} onSubmit={handleSubmit(handleSave)}>\n\t\t\t\t\t\t{username && (\n\t\t\t\t\t\t\t<Box display='flex' flexDirection='column' alignItems='center'>\n\t\t\t\t\t\t\t\t<UserInfoAvatar data-qa-id='agent-edit-avatar' username={username} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={nameField}>{t('Name')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='name'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => <TextInput id={nameField} data-qa-id='agent-edit-name' {...field} readOnly />}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={usernameField}>{t('Username')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='username'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t\tid={usernameField}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-qa-id='agent-edit-username'\n\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\t\t\taddon={<Icon name='at' size='x20' />}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={emailField}>{t('Email')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t\tid={emailField}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-qa-id='agent-edit-email'\n\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\t\t\taddon={<Icon name='mail' size='x20' />}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={departmentsField}>{t('Departments')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='departments'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t<MultiSelect\n\t\t\t\t\t\t\t\t\t\t\t\tid={departmentsField}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-qa-id='agent-edit-departments'\n\t\t\t\t\t\t\t\t\t\t\t\toptions={departmentsOptions}\n\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\t\t\t\t\trenderItem={({ label, ...props }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckOption {...props} label={<span style={{ whiteSpace: 'normal' }}>{label}</span>} />\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={statusField}>{t('Status')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='status'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\t\tid={statusField}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-qa-id='agent-edit-status'\n\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\toptions={statusOptions}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t{MaxChatsPerAgent && <MaxChatsPerAgent />}\n\t\t\t\t\t\t\t{voipEnabled && (\n\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor={voipExtensionField}>{t('VoIP_Extension')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\t\tname='voipExtension'\n\t\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\t\trender={({ field }) => <TextInput id={voipExtensionField} {...field} data-qa-id='agent-edit-voip-extension' />}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</FieldGroup>\n\t\t\t\t\t</form>\n\t\t\t\t</FormProvider>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button data-qa-id='agent-edit-reset' type='reset' disabled={!isDirty} onClick={() => reset()}>\n\t\t\t\t\t\t{t('Reset')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button form={formId} primary type='submit' data-qa-id='agent-edit-save' disabled={!isDirty}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</Contextualbar>\n\t);\n};\n\nexport default AgentEdit;\n"]}}},"code":"var _excluded = [\"status\", \"departments\"],\n  _excluded2 = [\"label\"];\nvar _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\nvar _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 1);\nvar _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 2);\nvar _toConsumableArray;\nmodule.link(\"@babel/runtime/helpers/toConsumableArray\", {\n  default: function (v) {\n    _toConsumableArray = v;\n  }\n}, 3);\nvar Field, FieldLabel, FieldGroup, FieldRow, TextInput, Button, Box, MultiSelect, Icon, Select, ContextualbarFooter, ButtonGroup, CheckOption;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Field: function (v) {\n    Field = v;\n  },\n  FieldLabel: function (v) {\n    FieldLabel = v;\n  },\n  FieldGroup: function (v) {\n    FieldGroup = v;\n  },\n  FieldRow: function (v) {\n    FieldRow = v;\n  },\n  TextInput: function (v) {\n    TextInput = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  Box: function (v) {\n    Box = v;\n  },\n  MultiSelect: function (v) {\n    MultiSelect = v;\n  },\n  Icon: function (v) {\n    Icon = v;\n  },\n  Select: function (v) {\n    Select = v;\n  },\n  ContextualbarFooter: function (v) {\n    ContextualbarFooter = v;\n  },\n  ButtonGroup: function (v) {\n    ButtonGroup = v;\n  },\n  CheckOption: function (v) {\n    CheckOption = v;\n  }\n}, 0);\nvar useMutableCallback, useUniqueId;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  },\n  useUniqueId: function (v) {\n    useUniqueId = v;\n  }\n}, 1);\nvar useToastMessageDispatch, useSetting, useMethod, useTranslation, useEndpoint, useRouter;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  },\n  useSetting: function (v) {\n    useSetting = v;\n  },\n  useMethod: function (v) {\n    useMethod = v;\n  },\n  useTranslation: function (v) {\n    useTranslation = v;\n  },\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  },\n  useRouter: function (v) {\n    useRouter = v;\n  }\n}, 2);\nvar useQueryClient;\nmodule.link(\"@tanstack/react-query\", {\n  useQueryClient: function (v) {\n    useQueryClient = v;\n  }\n}, 3);\nvar React, useMemo;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  }\n}, 4);\nvar useForm, Controller, FormProvider;\nmodule.link(\"react-hook-form\", {\n  useForm: function (v) {\n    useForm = v;\n  },\n  Controller: function (v) {\n    Controller = v;\n  },\n  FormProvider: function (v) {\n    FormProvider = v;\n  }\n}, 5);\nvar getUserEmailAddress;\nmodule.link(\"../../../../lib/getUserEmailAddress\", {\n  getUserEmailAddress: function (v) {\n    getUserEmailAddress = v;\n  }\n}, 6);\nvar Contextualbar, ContextualbarTitle, ContextualbarClose, ContextualbarHeader, ContextualbarScrollableContent;\nmodule.link(\"../../../components/Contextualbar\", {\n  Contextualbar: function (v) {\n    Contextualbar = v;\n  },\n  ContextualbarTitle: function (v) {\n    ContextualbarTitle = v;\n  },\n  ContextualbarClose: function (v) {\n    ContextualbarClose = v;\n  },\n  ContextualbarHeader: function (v) {\n    ContextualbarHeader = v;\n  },\n  ContextualbarScrollableContent: function (v) {\n    ContextualbarScrollableContent = v;\n  }\n}, 7);\nvar UserInfoAvatar;\nmodule.link(\"../../../components/UserInfo\", {\n  UserInfoAvatar: function (v) {\n    UserInfoAvatar = v;\n  }\n}, 8);\nvar MaxChatsPerAgent;\nmodule.link(\"../additionalForms\", {\n  MaxChatsPerAgent: function (v) {\n    MaxChatsPerAgent = v;\n  }\n}, 9);\nvar AgentEdit = function (_ref) {\n  var agentData = _ref.agentData,\n    userDepartments = _ref.userDepartments,\n    availableDepartments = _ref.availableDepartments;\n  var t = useTranslation();\n  var router = useRouter();\n  var queryClient = useQueryClient();\n  var voipEnabled = useSetting('VoIP_Enabled');\n  var dispatchToastMessage = useToastMessageDispatch();\n  var name = agentData.name,\n    username = agentData.username,\n    livechat = agentData.livechat,\n    statusLivechat = agentData.statusLivechat;\n  var email = getUserEmailAddress(agentData);\n  var departments = useMemo(function () {\n    var pending = userDepartments.filter(function (_ref2) {\n      var departmentId = _ref2.departmentId;\n      return !availableDepartments.find(function (dep) {\n        return dep._id === departmentId;\n      });\n    }).map(function (dep) {\n      return {\n        _id: dep.departmentId,\n        name: dep.departmentName\n      };\n    });\n    return [].concat(_toConsumableArray(availableDepartments), _toConsumableArray(pending));\n  }, [availableDepartments, userDepartments]);\n  var departmentsOptions = useMemo(function () {\n    var archivedDepartment = function (name, archived) {\n      return archived ? name + \" [\" + t('Archived') + \"]\" : name;\n    };\n    return departments.map(function (_ref3) {\n      var _id = _ref3._id,\n        name = _ref3.name,\n        archived = _ref3.archived;\n      return name ? [_id, archivedDepartment(name, archived)] : [_id, archivedDepartment(_id, archived)];\n    }) || [];\n  }, [departments, t]);\n  var statusOptions = useMemo(function () {\n    return [['available', t('Available')], ['not-available', t('Not_Available')]];\n  }, [t]);\n  var initialDepartmentValue = useMemo(function () {\n    return userDepartments.map(function (_ref4) {\n      var departmentId = _ref4.departmentId;\n      return departmentId;\n    }) || [];\n  }, [userDepartments]);\n  var methods = useForm({\n    values: {\n      name: name,\n      username: username,\n      email: email,\n      departments: initialDepartmentValue,\n      status: statusLivechat,\n      maxNumberSimultaneousChat: (livechat === null || livechat === void 0 ? void 0 : livechat.maxNumberSimultaneousChat) || 0,\n      voipExtension: ''\n    }\n  });\n  var control = methods.control,\n    handleSubmit = methods.handleSubmit,\n    reset = methods.reset,\n    isDirty = methods.formState.isDirty;\n  var saveAgentInfo = useMethod('livechat:saveAgentInfo');\n  var saveAgentStatus = useEndpoint('POST', '/v1/livechat/agent.status');\n  var handleSave = useMutableCallback(function () {\n    function _callee(_ref5) {\n      var status, departments, data;\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              status = _ref5.status, departments = _ref5.departments, data = _objectWithoutProperties(_ref5, _excluded);\n              _context.prev = 1;\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(saveAgentStatus({\n                agentId: agentData._id,\n                status: status\n              }));\n            case 4:\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(saveAgentInfo(agentData._id, data, departments));\n            case 6:\n              dispatchToastMessage({\n                type: 'success',\n                message: t('Success')\n              });\n              router.navigate('/omnichannel/agents');\n              queryClient.invalidateQueries(['livechat-agents']);\n              _context.next = 14;\n              break;\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](1);\n              dispatchToastMessage({\n                type: 'error',\n                message: _context.t0\n              });\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n        return _callee$;\n      }(), null, null, [[1, 11]], Promise);\n    }\n    return _callee;\n  }());\n  var formId = useUniqueId();\n  var nameField = useUniqueId();\n  var usernameField = useUniqueId();\n  var emailField = useUniqueId();\n  var departmentsField = useUniqueId();\n  var statusField = useUniqueId();\n  var voipExtensionField = useUniqueId();\n  return /*#__PURE__*/React.createElement(Contextualbar, {\n    \"data-qa-id\": \"agent-edit-contextual-bar\"\n  }, /*#__PURE__*/React.createElement(ContextualbarHeader, null, /*#__PURE__*/React.createElement(ContextualbarTitle, null, t('Edit_User')), /*#__PURE__*/React.createElement(ContextualbarClose, {\n    onClick: function () {\n      return router.navigate('/omnichannel/agents');\n    }\n  })), /*#__PURE__*/React.createElement(ContextualbarScrollableContent, null, /*#__PURE__*/React.createElement(FormProvider, methods, /*#__PURE__*/React.createElement(\"form\", {\n    id: formId,\n    onSubmit: handleSubmit(handleSave)\n  }, username && /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  }, /*#__PURE__*/React.createElement(UserInfoAvatar, {\n    \"data-qa-id\": \"agent-edit-avatar\",\n    username: username\n  })), /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, {\n    htmlFor: nameField\n  }, t('Name')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(Controller, {\n    name: \"name\",\n    control: control,\n    render: function (_ref6) {\n      var field = _ref6.field;\n      return /*#__PURE__*/React.createElement(TextInput, _extends({\n        id: nameField,\n        \"data-qa-id\": \"agent-edit-name\"\n      }, field, {\n        readOnly: true\n      }));\n    }\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, {\n    htmlFor: usernameField\n  }, t('Username')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(Controller, {\n    name: \"username\",\n    control: control,\n    render: function (_ref7) {\n      var field = _ref7.field;\n      return /*#__PURE__*/React.createElement(TextInput, _extends({\n        id: usernameField,\n        \"data-qa-id\": \"agent-edit-username\"\n      }, field, {\n        readOnly: true,\n        addon: /*#__PURE__*/React.createElement(Icon, {\n          name: \"at\",\n          size: \"x20\"\n        })\n      }));\n    }\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, {\n    htmlFor: emailField\n  }, t('Email')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(Controller, {\n    name: \"email\",\n    control: control,\n    render: function (_ref8) {\n      var field = _ref8.field;\n      return /*#__PURE__*/React.createElement(TextInput, _extends({\n        id: emailField,\n        \"data-qa-id\": \"agent-edit-email\"\n      }, field, {\n        readOnly: true,\n        addon: /*#__PURE__*/React.createElement(Icon, {\n          name: \"mail\",\n          size: \"x20\"\n        })\n      }));\n    }\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, {\n    htmlFor: departmentsField\n  }, t('Departments')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(Controller, {\n    name: \"departments\",\n    control: control,\n    render: function (_ref9) {\n      var field = _ref9.field;\n      return /*#__PURE__*/React.createElement(MultiSelect, _extends({\n        id: departmentsField,\n        \"data-qa-id\": \"agent-edit-departments\",\n        options: departmentsOptions\n      }, field, {\n        placeholder: t('Select_an_option'),\n        renderItem: function (_ref10) {\n          var label = _ref10.label,\n            props = _objectWithoutProperties(_ref10, _excluded2);\n          return /*#__PURE__*/React.createElement(CheckOption, _extends({}, props, {\n            label: /*#__PURE__*/React.createElement(\"span\", {\n              style: {\n                whiteSpace: 'normal'\n              }\n            }, label)\n          }));\n        }\n      }));\n    }\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, {\n    htmlFor: statusField\n  }, t('Status')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(Controller, {\n    name: \"status\",\n    control: control,\n    render: function (_ref11) {\n      var field = _ref11.field;\n      return /*#__PURE__*/React.createElement(Select, _extends({\n        id: statusField,\n        \"data-qa-id\": \"agent-edit-status\"\n      }, field, {\n        options: statusOptions,\n        placeholder: t('Select_an_option')\n      }));\n    }\n  }))), MaxChatsPerAgent && /*#__PURE__*/React.createElement(MaxChatsPerAgent, null), voipEnabled && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, {\n    htmlFor: voipExtensionField\n  }, t('VoIP_Extension')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(Controller, {\n    name: \"voipExtension\",\n    control: control,\n    render: function (_ref12) {\n      var field = _ref12.field;\n      return /*#__PURE__*/React.createElement(TextInput, _extends({\n        id: voipExtensionField\n      }, field, {\n        \"data-qa-id\": \"agent-edit-voip-extension\"\n      }));\n    }\n  }))))))), /*#__PURE__*/React.createElement(ContextualbarFooter, null, /*#__PURE__*/React.createElement(ButtonGroup, {\n    stretch: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    \"data-qa-id\": \"agent-edit-reset\",\n    type: \"reset\",\n    disabled: !isDirty,\n    onClick: function () {\n      return reset();\n    }\n  }, t('Reset')), /*#__PURE__*/React.createElement(Button, {\n    form: formId,\n    primary: true,\n    type: \"submit\",\n    \"data-qa-id\": \"agent-edit-save\",\n    disabled: !isDirty\n  }, t('Save')))));\n};\nmodule.exportDefault(AgentEdit);","map":{"version":3,"names":["_regeneratorRuntime","module","link","default","v","_extends","_objectWithoutProperties","_toConsumableArray","Field","FieldLabel","FieldGroup","FieldRow","TextInput","Button","Box","MultiSelect","Icon","Select","ContextualbarFooter","ButtonGroup","CheckOption","useMutableCallback","useUniqueId","useToastMessageDispatch","useSetting","useMethod","useTranslation","useEndpoint","useRouter","useQueryClient","React","useMemo","useForm","Controller","FormProvider","getUserEmailAddress","Contextualbar","ContextualbarTitle","ContextualbarClose","ContextualbarHeader","ContextualbarScrollableContent","UserInfoAvatar","MaxChatsPerAgent","AgentEdit","_ref","agentData","userDepartments","availableDepartments","t","router","queryClient","voipEnabled","dispatchToastMessage","name","username","livechat","statusLivechat","email","departments","pending","filter","_ref2","departmentId","find","dep","_id","map","departmentName","concat","departmentsOptions","archivedDepartment","archived","_ref3","statusOptions","initialDepartmentValue","_ref4","methods","values","status","maxNumberSimultaneousChat","voipExtension","control","handleSubmit","reset","isDirty","formState","saveAgentInfo","saveAgentStatus","handleSave","_callee","_ref5","data","async","_callee$","_context","prev","next","_excluded","awrap","agentId","type","message","navigate","invalidateQueries","t0","stop","Promise","formId","nameField","usernameField","emailField","departmentsField","statusField","voipExtensionField","createElement","onClick","id","onSubmit","display","flexDirection","alignItems","htmlFor","render","_ref6","field","readOnly","_ref7","addon","size","_ref8","_ref9","options","placeholder","renderItem","_ref10","label","props","_excluded2","style","whiteSpace","_ref11","_ref12","stretch","disabled","form","primary","exportDefault"],"sources":["client/views/omnichannel/agents/AgentEdit.tsx"],"sourcesContent":["import type { ILivechatAgent, ILivechatDepartment, ILivechatDepartmentAgents } from '@rocket.chat/core-typings';\nimport {\n\tField,\n\tFieldLabel,\n\tFieldGroup,\n\tFieldRow,\n\tTextInput,\n\tButton,\n\tBox,\n\tMultiSelect,\n\tIcon,\n\tSelect,\n\tContextualbarFooter,\n\tButtonGroup,\n\tCheckOption,\n} from '@rocket.chat/fuselage';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { useMutableCallback, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useSetting, useMethod, useTranslation, useEndpoint, useRouter } from '@rocket.chat/ui-contexts';\nimport { useQueryClient } from '@tanstack/react-query';\nimport React, { useMemo } from 'react';\nimport { useForm, Controller, FormProvider } from 'react-hook-form';\n\nimport { getUserEmailAddress } from '../../../../lib/getUserEmailAddress';\nimport {\n\tContextualbar,\n\tContextualbarTitle,\n\tContextualbarClose,\n\tContextualbarHeader,\n\tContextualbarScrollableContent,\n} from '../../../components/Contextualbar';\nimport { UserInfoAvatar } from '../../../components/UserInfo';\nimport { MaxChatsPerAgent } from '../additionalForms';\n\ntype AgentEditProps = {\n\tagentData: Pick<ILivechatAgent, '_id' | 'username' | 'name' | 'status' | 'statusLivechat' | 'emails' | 'livechat'>;\n\tuserDepartments: (Pick<ILivechatDepartmentAgents, 'departmentId'> & { departmentName: string })[];\n\tavailableDepartments: Pick<ILivechatDepartment, '_id' | 'name' | 'archived'>[];\n};\n\nconst AgentEdit = ({ agentData, userDepartments, availableDepartments }: AgentEditProps) => {\n\tconst t = useTranslation();\n\tconst router = useRouter();\n\tconst queryClient = useQueryClient();\n\n\tconst voipEnabled = useSetting('VoIP_Enabled');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst { name, username, livechat, statusLivechat } = agentData;\n\n\tconst email = getUserEmailAddress(agentData);\n\n\tconst departments: Pick<ILivechatDepartment, '_id' | 'name' | 'archived'>[] = useMemo(() => {\n\t\tconst pending = userDepartments\n\t\t\t.filter(({ departmentId }) => !availableDepartments.find((dep) => dep._id === departmentId))\n\t\t\t.map((dep) => ({\n\t\t\t\t_id: dep.departmentId,\n\t\t\t\tname: dep.departmentName,\n\t\t\t}));\n\n\t\treturn [...availableDepartments, ...pending];\n\t}, [availableDepartments, userDepartments]);\n\n\tconst departmentsOptions: SelectOption[] = useMemo(() => {\n\t\tconst archivedDepartment = (name: string, archived?: boolean) => (archived ? `${name} [${t('Archived')}]` : name);\n\n\t\treturn (\n\t\t\tdepartments.map(({ _id, name, archived }) =>\n\t\t\t\tname ? [_id, archivedDepartment(name, archived)] : [_id, archivedDepartment(_id, archived)],\n\t\t\t) || []\n\t\t);\n\t}, [departments, t]);\n\n\tconst statusOptions: SelectOption[] = useMemo(\n\t\t() => [\n\t\t\t['available', t('Available')],\n\t\t\t['not-available', t('Not_Available')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst initialDepartmentValue = useMemo(() => userDepartments.map(({ departmentId }) => departmentId) || [], [userDepartments]);\n\n\tconst methods = useForm({\n\t\tvalues: {\n\t\t\tname,\n\t\t\tusername,\n\t\t\temail,\n\t\t\tdepartments: initialDepartmentValue,\n\t\t\tstatus: statusLivechat,\n\t\t\tmaxNumberSimultaneousChat: livechat?.maxNumberSimultaneousChat || 0,\n\t\t\tvoipExtension: '',\n\t\t},\n\t});\n\n\tconst {\n\t\tcontrol,\n\t\thandleSubmit,\n\t\treset,\n\t\tformState: { isDirty },\n\t} = methods;\n\n\tconst saveAgentInfo = useMethod('livechat:saveAgentInfo');\n\tconst saveAgentStatus = useEndpoint('POST', '/v1/livechat/agent.status');\n\n\tconst handleSave = useMutableCallback(async ({ status, departments, ...data }) => {\n\t\ttry {\n\t\t\tawait saveAgentStatus({ agentId: agentData._id, status });\n\t\t\tawait saveAgentInfo(agentData._id, data, departments);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Success') });\n\t\t\trouter.navigate('/omnichannel/agents');\n\t\t\tqueryClient.invalidateQueries(['livechat-agents']);\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\tconst formId = useUniqueId();\n\tconst nameField = useUniqueId();\n\tconst usernameField = useUniqueId();\n\tconst emailField = useUniqueId();\n\tconst departmentsField = useUniqueId();\n\tconst statusField = useUniqueId();\n\tconst voipExtensionField = useUniqueId();\n\n\treturn (\n\t\t<Contextualbar data-qa-id='agent-edit-contextual-bar'>\n\t\t\t<ContextualbarHeader>\n\t\t\t\t<ContextualbarTitle>{t('Edit_User')}</ContextualbarTitle>\n\t\t\t\t<ContextualbarClose onClick={() => router.navigate('/omnichannel/agents')} />\n\t\t\t</ContextualbarHeader>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<FormProvider {...methods}>\n\t\t\t\t\t<form id={formId} onSubmit={handleSubmit(handleSave)}>\n\t\t\t\t\t\t{username && (\n\t\t\t\t\t\t\t<Box display='flex' flexDirection='column' alignItems='center'>\n\t\t\t\t\t\t\t\t<UserInfoAvatar data-qa-id='agent-edit-avatar' username={username} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={nameField}>{t('Name')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='name'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => <TextInput id={nameField} data-qa-id='agent-edit-name' {...field} readOnly />}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={usernameField}>{t('Username')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='username'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t\tid={usernameField}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-qa-id='agent-edit-username'\n\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\t\t\taddon={<Icon name='at' size='x20' />}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={emailField}>{t('Email')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t\tid={emailField}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-qa-id='agent-edit-email'\n\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t\t\t\t\taddon={<Icon name='mail' size='x20' />}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={departmentsField}>{t('Departments')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='departments'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t<MultiSelect\n\t\t\t\t\t\t\t\t\t\t\t\tid={departmentsField}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-qa-id='agent-edit-departments'\n\t\t\t\t\t\t\t\t\t\t\t\toptions={departmentsOptions}\n\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\t\t\t\t\trenderItem={({ label, ...props }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckOption {...props} label={<span style={{ whiteSpace: 'normal' }}>{label}</span>} />\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel htmlFor={statusField}>{t('Status')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\tname='status'\n\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\t\tid={statusField}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-qa-id='agent-edit-status'\n\t\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\t\toptions={statusOptions}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Select_an_option')}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t{MaxChatsPerAgent && <MaxChatsPerAgent />}\n\t\t\t\t\t\t\t{voipEnabled && (\n\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor={voipExtensionField}>{t('VoIP_Extension')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\t\t\tname='voipExtension'\n\t\t\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\t\t\trender={({ field }) => <TextInput id={voipExtensionField} {...field} data-qa-id='agent-edit-voip-extension' />}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</FieldGroup>\n\t\t\t\t\t</form>\n\t\t\t\t</FormProvider>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button data-qa-id='agent-edit-reset' type='reset' disabled={!isDirty} onClick={() => reset()}>\n\t\t\t\t\t\t{t('Reset')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button form={formId} primary type='submit' data-qa-id='agent-edit-save' disabled={!isDirty}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</Contextualbar>\n\t);\n};\n\nexport default AgentEdit;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"cc20d63f070cd52794ae9f2a9cf3995cd42e4a44"}
