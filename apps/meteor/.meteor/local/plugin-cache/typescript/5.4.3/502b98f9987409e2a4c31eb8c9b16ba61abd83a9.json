{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/body/RoomBodyV2.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/body/RoomBodyV2.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/body/RoomBodyV2.tsx","inputSourceMap":{"version":3,"file":"client/views/room/body/RoomBodyV2.tsx","sourceRoot":"","sources":["client/views/room/body/RoomBodyV2.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,GAAG,EAAE,MAAM,wBAAwB,CAAC;AAC7C,OAAO,EAAE,GAAG,EAAE,MAAM,uBAAuB,CAAC;AAC5C,OAAO,EAAE,aAAa,EAAE,MAAM,6BAA6B,CAAC;AAC5D,OAAO,EAAE,aAAa,EAAE,OAAO,EAAE,UAAU,EAAE,cAAc,EAAE,OAAO,EAAE,iBAAiB,EAAE,MAAM,0BAA0B,CAAC;AAE1H,OAAO,KAAK,EAAE,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AAElE,OAAO,EAAE,QAAQ,EAAE,MAAM,0BAA0B,CAAC;AACpD,OAAO,EAAE,gBAAgB,EAAE,MAAM,sCAAsC,CAAC;AACxE,OAAO,EAAE,iBAAiB,EAAE,MAAM,kCAAkC,CAAC;AACrE,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAC3C,OAAO,EAAE,WAAW,EAAE,MAAM,gBAAgB,CAAC;AAC7C,OAAO,wBAAwB,MAAM,yCAAyC,CAAC;AAC/E,OAAO,gBAAgB,MAAM,qBAAqB,CAAC;AACnD,OAAO,iBAAiB,MAAM,+BAA+B,CAAC;AAC9D,OAAO,YAAY,MAAM,uCAAuC,CAAC;AACjE,OAAO,EAAE,OAAO,EAAE,MAAM,yBAAyB,CAAC;AAClD,OAAO,EAAE,OAAO,EAAE,mBAAmB,EAAE,eAAe,EAAE,MAAM,yBAAyB,CAAC;AACxF,OAAO,EAAE,cAAc,EAAE,MAAM,gCAAgC,CAAC;AAChE,OAAO,EAAE,aAAa,EAAE,MAAM,wBAAwB,CAAC;AACvD,OAAO,EAAE,wBAAwB,EAAE,MAAM,mCAAmC,CAAC;AAC7E,OAAO,EAAE,kBAAkB,EAAE,MAAM,6BAA6B,CAAC;AACjE,OAAO,iBAAiB,MAAM,qBAAqB,CAAC;AACpD,OAAO,yBAAyB,MAAM,6BAA6B,CAAC;AACpE,OAAO,wBAAwB,MAAM,4BAA4B,CAAC;AAClE,OAAO,sBAAsB,MAAM,0BAA0B,CAAC;AAC9D,OAAO,YAAY,MAAM,6BAA6B,CAAC;AACvD,OAAO,EAAE,SAAS,EAAE,MAAM,aAAa,CAAC;AACxC,OAAO,uBAAuB,MAAM,2BAA2B,CAAC;AAChE,OAAO,uBAAuB,MAAM,2BAA2B,CAAC;AAChE,OAAO,EAAE,gBAAgB,EAAE,MAAM,0BAA0B,CAAC;AAC5D,OAAO,EAAE,aAAa,EAAE,MAAM,uBAAuB,CAAC;AACtD,OAAO,EAAE,UAAU,EAAE,MAAM,oBAAoB,CAAC;AAChD,OAAO,EAAE,oBAAoB,EAAE,MAAM,8BAA8B,CAAC;AACpE,OAAO,EAAE,iBAAiB,EAAE,MAAM,2BAA2B,CAAC;AAC9D,OAAO,EAAE,iBAAiB,EAAE,MAAM,2BAA2B,CAAC;AAC9D,OAAO,EAAE,oBAAoB,EAAE,MAAM,8BAA8B,CAAC;AACpE,OAAO,EAAE,0BAA0B,EAAE,MAAM,oCAAoC,CAAC;AAChF,OAAO,EAAE,wBAAwB,EAAE,MAAM,kCAAkC,CAAC;AAC5E,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAE5D,MAAM,QAAQ,GAAG,GAAiB,EAAE;IACnC,MAAM,IAAI,GAAG,OAAO,EAAE,CAAC;IACvB,IAAI,CAAC,IAAI,EAAE,CAAC;QACX,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC5C,CAAC;IAED,MAAM,CAAC,GAAG,cAAc,EAAE,CAAC;IAC3B,MAAM,gBAAgB,GAAG,iBAAiB,EAAE,CAAC;IAC7C,MAAM,IAAI,GAAG,OAAO,EAAE,CAAC;IACvB,MAAM,IAAI,GAAG,OAAO,EAAE,CAAC;IACvB,MAAM,OAAO,GAAG,cAAc,EAAE,CAAC;IACjC,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;IAC/B,MAAM,YAAY,GAAG,mBAAmB,EAAE,CAAC;IAE3C,MAAM,eAAe,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC;IAEjD,MAAM,WAAW,GAAG,iBAAiB,CAAU,aAAa,CAAC,IAAI,SAAS,CAAC;IAC3E,MAAM,aAAa,GAAG,iBAAiB,CAAU,eAAe,CAAC,CAAC;IAClE,MAAM,cAAc,GAAG,iBAAiB,CAAU,gBAAgB,CAAC,CAAC;IAEpE,MAAM,EAAE,uBAAuB,EAAE,mBAAmB,EAAE,qBAAqB,EAAE,GAAG,eAAe,EAAE,CAAC;IAElG,MAAM,kBAAkB,GAAG,UAAU,CAAC,6BAA6B,CAAwB,CAAC;IAE5F,MAAM,qBAAqB,GAAG,aAAa,CAAC,gBAAgB,CAAC,CAAC;IAE9D,MAAM,UAAU,GAAG,CAAC,CAAC,YAAY,CAAC;IAElC,MAAM,UAAU,GAAG,OAAO,CAAC,GAAG,EAAE;QAC/B,IAAI,IAAI,IAAI,IAAI,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC;YAC5B,OAAO,IAAI,CAAC;QACb,CAAC;QAED,IAAI,kBAAkB,KAAK,IAAI,EAAE,CAAC;YACjC,OAAO,IAAI,CAAC;QACb,CAAC;QAED,IAAI,qBAAqB,EAAE,CAAC;YAC3B,OAAO,IAAI,CAAC;QACb,CAAC;QAED,OAAO,UAAU,CAAC;IACnB,CAAC,EAAE,CAAC,kBAAkB,EAAE,qBAAqB,EAAE,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC;IAElE,MAAM,WAAW,GAAG,MAAM,CAAwB,IAAI,CAAC,CAAC;IAExD,MAAM,EACL,UAAU,EAAE,mBAAmB,EAC/B,QAAQ,EAAE,iBAAiB,EAC3B,gCAAgC,EAChC,2BAA2B,EAC3B,OAAO,EAAE,CAAC,MAAM,CAAC,GACjB,GAAG,eAAe,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;IAExC,MAAM,EAAE,QAAQ,EAAE,kBAAkB,EAAE,SAAS,EAAE,SAAS,EAAE,GAAG,UAAU,EAAE,GAAG,aAAa,EAAE,CAAC;IAE9F,MAAM,EAAE,QAAQ,EAAE,kBAAkB,EAAE,WAAW,EAAE,YAAY,EAAE,uBAAuB,EAAE,UAAU,EAAE,GAAG,iBAAiB,EAAE,CAAC;IAE7H,MAAM,EAAE,QAAQ,EAAE,eAAe,EAAE,GAAG,UAAU,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;IAExE,MAAM,EAAE,UAAU,EAAE,iBAAiB,EAAE,WAAW,EAAE,QAAQ,EAAE,gBAAgB,EAAE,GAAG,gBAAgB,EAAE,CAAC;IAEtG,MAAM,EACL,OAAO,EACP,iBAAiB,EACjB,yBAAyB,EACzB,SAAS,EAAE,CAAC,sBAAsB,EAAE,sBAAsB,CAAC,GAC3D,GAAG,aAAa,EAAE,CAAC;IAEpB,MAAM,EAAE,QAAQ,EAAE,6BAA6B,EAAE,GAAG,wBAAwB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAEvF,MAAM,EAAE,cAAc,EAAE,GAAG,wBAAwB,EAAE,CAAC;IAEtD,MAAM,EAAE,2BAA2B,EAAE,6BAA6B,EAAE,oBAAoB,EAAE,cAAc,EAAE,oBAAoB,EAAE,GAC/H,iBAAiB,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,WAAW,EAAE;QACnD,YAAY;QACZ,uBAAuB;QACvB,UAAU;KACV,CAAC,CAAC;IAEJ,MAAM,QAAQ,GAAG,aAAa,CAC7B,kBAAkB,EAClB,WAAW,EACX,6BAA6B,EAC7B,kBAAkB,EAClB,oBAAoB,EACpB,gBAAgB,EAChB,iBAAiB,EACjB,eAAe,EAEf,cAAc,CACd,CAAC;IAEF,MAAM,cAAc,GAAG,aAAa,CAAC,mBAAmB,CAAC,CAAC;IAE1D,MAAM,+BAA+B,GAAG,WAAW,CAAC,GAAS,EAAE;QAC9D,IAAI,CAAC,cAAc,CAAC,iBAAiB,EAAE,CAAC;IACzC,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;IAE1B,MAAM,2BAA2B,GAAG,WAAW,CAAC,GAAS,EAAE;QAC1D,IAAI,CAAC,cAAc,CAAC,aAAa,EAAE,CAAC;IACrC,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;IAE1B,MAAM,kBAAkB,GAAmC,WAAW,CACrE,CAAC,CAAC,EAAQ,EAAE;QACX;;;;;;WAMG;QAEH,MAAM,YAAY,GAAG,CAAC,OAA2B,EAAW,EAAE;YAC7D,IAAI,CAAC,OAAO,EAAE,CAAC;gBACd,OAAO,KAAK,CAAC;YACd,CAAC;YACD,IAAI,OAAO,YAAY,iBAAiB,IAAI,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,QAAQ,EAAE,CAAC;gBACvF,OAAO,IAAI,CAAC;YACb,CAAC;YACD,IAAI,OAAO,YAAY,iBAAiB,IAAI,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,MAAM,EAAE,CAAC;gBACrF,OAAO,IAAI,CAAC;YACb,CAAC;YACD,OAAO,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QAC5C,CAAC,CAAC;QAEF,IAAI,YAAY,CAAC,CAAC,CAAC,MAAqB,CAAC,EAAE,CAAC;YAC3C,OAAO;QACR,CAAC;QAED,OAAO,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC,EACD,CAAC,OAAO,CAAC,CACT,CAAC;IAEF,oBAAoB,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;IACtC,0BAA0B,EAAE,CAAC;IAC7B,oBAAoB,EAAE,CAAC;IAEvB,MAAM,YAAY,GAAG,GAAG,CAAA;;;;;;;;;EASvB,CAAC;IAEF,OAAO,CACN,EACC;GAAA,CAAC,GAAG,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAChC;IAAA,CAAC,GAAG,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,YAAY,EAAE,WAAW,IAAI,iBAAiB,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,iBAAiB,CAAC,CAClH;KAAA,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,EAClC;KAAA,CAAC,CAAC,gBAAgB,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,mBAAmB,CAAC,CAAC,SAAS,CAAC,EAAG,CACjI;IAAA,EAAE,GAAG,CACN;GAAA,EAAE,GAAG,CAEL;;GAAA,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,mBAAmB,EAAE,SAAS,CAAC,CAAC,CAC/D;IAAA,CAAC,OAAO,CACP,IAAI,CAAC,cAAc,CACnB,SAAS,CAAC,CAAC,4CAA4C,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAC9E,EAAE,CAAC,CAAC,eAAe,IAAI,CAAC,GAAG,EAAE,CAAC,CAC9B,OAAO,CAAC,CAAC,WAAW,IAAI,kBAAkB,CAAC,CAE3C;KAAA,CAAC,GAAG,CAAC,SAAS,CAAC,4BAA4B,CAC1C;MAAA,CAAC,GAAG,CAAC,SAAS,CAAC,yBAAyB,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC,IAAI,sBAAsB,CAAC,CACxF;OAAA,CAAC,iBAAiB,CAAC,IAAI,sBAAsB,CAAC,EAC9C;OAAA,CAAC,GAAG,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAChC;QAAA,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,gBAAgB,EAAE,OAAO,CAAC,MAAM,IAAI,MAAM,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CACvF;SAAA,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,CACxB,CAAC,uBAAuB,CACvB,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CACf,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CACd,IAAI,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAClB,UAAU,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAC9B,KAAK,CAAC,CAAC,MAAM,CAAC,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CACxE,OAAO,CAAC,CAAC,yBAAyB,CAAC,EAClC,CACF,CAAC,CACH;QAAA,EAAE,GAAG,CACL;QAAA,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CACnB,CAAC,uBAAuB,CACvB,KAAK,CAAC,CAAC,MAAM,CAAC,CACd,iBAAiB,CAAC,CAAC,gCAAgC,CAAC,CACpD,uBAAuB,CAAC,CAAC,2BAA2B,CAAC,EACpD,CACF,CAED;;QAAA,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,UAAU,CAAC,EAC5C;OAAA,EAAE,GAAG,CAEL;;OAAA,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAC3D;QAAA,CAAC,yBAAyB,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,CAAC,2BAA2B,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,EAClH;QAAA,CAAC,yBAAyB,CACzB,OAAO,CAAC,CAAC,mBAAmB,CAAC,CAC7B,OAAO,CAAC,CAAC,6BAA6B,CAAC,CACvC,IAAI,CAAC,CAAC,CAAC,CAAC,yBAAyB,CAAC,CAAC,EAEpC;QAAA,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CACd,CAAC,GAAG,CAAC,SAAS,CAAC,oCAAoC,CAClD;UAAA,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,gDAAgD,CAAC,CAAC,EAAE,GAAG,CAChE;SAAA,EAAE,GAAG,CAAC,CACN,CAAC,CAAC,CAAC,IAAI,CACR;QAAA,CAAC,GAAG,CACH,SAAS,CAAC,CAAC;YACV,SAAS;YACT,mBAAmB,IAAI,eAAe;YACtC,aAAa,IAAI,gBAAgB;YACjC,CAAC,cAAc,IAAI,aAAa;SAChC;aACC,MAAM,CAAC,QAAQ,CAAC;aAChB,IAAI,CAAC,GAAG,CAAC,CAAC,CAEZ;SAAA,CAAC,wBAAwB,CACxB;UAAA,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAC/B;WAAA,CAAC,EAAE,CAAC,SAAS,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,qBAAqB,CAAC,CAC7F;YAAA,CAAC,UAAU,CAAC,CAAC,CAAC,CACb,EACC;cAAA,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAC1B,CAAC,EAAE,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,AAAD,EAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAC5F,CAAC,CAAC,CAAC,CACH,CAAC,EAAE,CACF;gBAAA,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,EACrC;gBAAA,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,EAAG,CAAC,CAAC,CAAC,IAAI,CAC3E;eAAA,EAAE,EAAE,CAAC,CACL,CACF;aAAA,GAAG,CACH,CAAC,CAAC,CAAC,IAAI,CACR;YAAA,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC,WAAW,CAAC,EACxD;YAAA,CAAC,mBAAmB,CAAC,CAAC,CAAC,CACtB,CAAC,EAAE,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,AAAD,EAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAC5F,CAAC,CAAC,CAAC,IAAI,CACT;WAAA,EAAE,EAAE,CACL;UAAA,EAAE,gBAAgB,CACnB;SAAA,EAAE,wBAAwB,CAC3B;QAAA,EAAE,GAAG,CACN;OAAA,EAAE,GAAG,CACL;OAAA,CAAC,YAAY,CACZ;QAAA,CAAC,iBAAiB,CACjB,YAAY,CAAC,CAAC,YAAY,CAAC,CAC3B,QAAQ,CAAC,CAAC,oBAAoB,CAAC,CAC/B,2BAA2B,CAAC,CAAC,+BAA+B,CAAC,CAC7D,uBAAuB,CAAC,CAAC,2BAA2B,CAAC,CACrD,aAAa,CAAC,CAAC,iBAAiB,CAAC,EAInC;OAAA,EAAE,YAAY,CACf;MAAA,EAAE,GAAG,CACN;KAAA,EAAE,GAAG,CACN;IAAA,EAAE,OAAO,CACV;GAAA,EAAE,GAAG,CACN;EAAA,GAAG,CACH,CAAC;AACH,CAAC,CAAC;AAEF,eAAe,IAAI,CAAC,QAAQ,CAAC,CAAC","sourcesContent":["import { css } from '@rocket.chat/css-in-js';\nimport { Box } from '@rocket.chat/fuselage';\nimport { useMergedRefs } from '@rocket.chat/fuselage-hooks';\nimport { usePermission, useRole, useSetting, useTranslation, useUser, useUserPreference } from '@rocket.chat/ui-contexts';\nimport type { MouseEventHandler, ReactElement } from 'react';\nimport React, { memo, useCallback, useMemo, useRef } from 'react';\n\nimport { isTruthy } from '../../../../lib/isTruthy';\nimport { CustomScrollbars } from '../../../components/CustomScrollbars';\nimport { useEmbeddedLayout } from '../../../hooks/useEmbeddedLayout';\nimport { BubbleDate } from '../BubbleDate';\nimport { MessageList } from '../MessageList';\nimport MessageListErrorBoundary from '../MessageList/MessageListErrorBoundary';\nimport RoomAnnouncement from '../RoomAnnouncement';\nimport ComposerContainer from '../composer/ComposerContainer';\nimport RoomComposer from '../composer/RoomComposer/RoomComposer';\nimport { useChat } from '../contexts/ChatContext';\nimport { useRoom, useRoomSubscription, useRoomMessages } from '../contexts/RoomContext';\nimport { useRoomToolbox } from '../contexts/RoomToolboxContext';\nimport { useDateScroll } from '../hooks/useDateScroll';\nimport { useMessageListNavigation } from '../hooks/useMessageListNavigation';\nimport { useRetentionPolicy } from '../hooks/useRetentionPolicy';\nimport DropTargetOverlay from './DropTargetOverlay';\nimport JumpToRecentMessageButton from './JumpToRecentMessageButton';\nimport LoadingMessagesIndicator from './LoadingMessagesIndicator';\nimport RetentionPolicyWarning from './RetentionPolicyWarning';\nimport RoomForeword from './RoomForeword/RoomForeword';\nimport { RoomTopic } from './RoomTopic';\nimport UnreadMessagesIndicator from './UnreadMessagesIndicator';\nimport UploadProgressIndicator from './UploadProgressIndicator';\nimport { useBannerSection } from './hooks/useBannerSection';\nimport { useFileUpload } from './hooks/useFileUpload';\nimport { useGetMore } from './hooks/useGetMore';\nimport { useGoToHomeOnRemoved } from './hooks/useGoToHomeOnRemoved';\nimport { useHasNewMessages } from './hooks/useHasNewMessages';\nimport { useListIsAtBottom } from './hooks/useListIsAtBottom';\nimport { useQuoteMessageByUrl } from './hooks/useQuoteMessageByUrl';\nimport { useReadMessageWindowEvents } from './hooks/useReadMessageWindowEvents';\nimport { useRestoreScrollPosition } from './hooks/useRestoreScrollPosition';\nimport { useHandleUnread } from './hooks/useUnreadMessages';\n\nconst RoomBody = (): ReactElement => {\n\tconst chat = useChat();\n\tif (!chat) {\n\t\tthrow new Error('No ChatContext provided');\n\t}\n\n\tconst t = useTranslation();\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\tconst room = useRoom();\n\tconst user = useUser();\n\tconst toolbox = useRoomToolbox();\n\tconst admin = useRole('admin');\n\tconst subscription = useRoomSubscription();\n\n\tconst retentionPolicy = useRetentionPolicy(room);\n\n\tconst hideFlexTab = useUserPreference<boolean>('hideFlexTab') || undefined;\n\tconst hideUsernames = useUserPreference<boolean>('hideUsernames');\n\tconst displayAvatars = useUserPreference<boolean>('displayAvatars');\n\n\tconst { hasMorePreviousMessages, hasMoreNextMessages, isLoadingMoreMessages } = useRoomMessages();\n\n\tconst allowAnonymousRead = useSetting('Accounts_AllowAnonymousRead') as boolean | undefined;\n\n\tconst canPreviewChannelRoom = usePermission('preview-c-room');\n\n\tconst subscribed = !!subscription;\n\n\tconst canPreview = useMemo(() => {\n\t\tif (room && room.t !== 'c') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (allowAnonymousRead === true) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (canPreviewChannelRoom) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn subscribed;\n\t}, [allowAnonymousRead, canPreviewChannelRoom, room, subscribed]);\n\n\tconst innerBoxRef = useRef<HTMLDivElement | null>(null);\n\n\tconst {\n\t\twrapperRef: unreadBarWrapperRef,\n\t\tinnerRef: unreadBarInnerRef,\n\t\thandleUnreadBarJumpToButtonClick,\n\t\thandleMarkAsReadButtonClick,\n\t\tcounter: [unread],\n\t} = useHandleUnread(room, subscription);\n\n\tconst { innerRef: dateScrollInnerRef, bubbleRef, listStyle, ...bubbleDate } = useDateScroll();\n\n\tconst { innerRef: isAtBottomInnerRef, atBottomRef, sendToBottom, sendToBottomIfNecessary, isAtBottom } = useListIsAtBottom();\n\n\tconst { innerRef: getMoreInnerRef } = useGetMore(room._id, atBottomRef);\n\n\tconst { wrapperRef: sectionWrapperRef, hideSection, innerRef: sectionScrollRef } = useBannerSection();\n\n\tconst {\n\t\tuploads,\n\t\thandleUploadFiles,\n\t\thandleUploadProgressClose,\n\t\ttargeDrop: [fileUploadTriggerProps, fileUploadOverlayProps],\n\t} = useFileUpload();\n\n\tconst { innerRef: restoreScrollPositionInnerRef } = useRestoreScrollPosition(room._id);\n\n\tconst { messageListRef } = useMessageListNavigation();\n\n\tconst { handleNewMessageButtonClick, handleJumpToRecentButtonClick, handleComposerResize, hasNewMessages, newMessagesScrollRef } =\n\t\tuseHasNewMessages(room._id, user?._id, atBottomRef, {\n\t\t\tsendToBottom,\n\t\t\tsendToBottomIfNecessary,\n\t\t\tisAtBottom,\n\t\t});\n\n\tconst innerRef = useMergedRefs(\n\t\tdateScrollInnerRef,\n\t\tinnerBoxRef,\n\t\trestoreScrollPositionInnerRef,\n\t\tisAtBottomInnerRef,\n\t\tnewMessagesScrollRef,\n\t\tsectionScrollRef,\n\t\tunreadBarInnerRef,\n\t\tgetMoreInnerRef,\n\n\t\tmessageListRef,\n\t);\n\n\tconst wrapperBoxRefs = useMergedRefs(unreadBarWrapperRef);\n\n\tconst handleNavigateToPreviousMessage = useCallback((): void => {\n\t\tchat.messageEditing.toPreviousMessage();\n\t}, [chat.messageEditing]);\n\n\tconst handleNavigateToNextMessage = useCallback((): void => {\n\t\tchat.messageEditing.toNextMessage();\n\t}, [chat.messageEditing]);\n\n\tconst handleCloseFlexTab: MouseEventHandler<HTMLElement> = useCallback(\n\t\t(e): void => {\n\t\t\t/*\n\t\t\t * check if the element is a button or anchor\n\t\t\t * it considers the role as well\n\t\t\t * usually, the flex tab is closed when clicking outside of it\n\t\t\t * but if the user clicks on a button or anchor, we don't want to close the flex tab\n\t\t\t * because the user could be actually trying to open the flex tab through those elements\n\t\t\t */\n\n\t\t\tconst checkElement = (element: HTMLElement | null): boolean => {\n\t\t\t\tif (!element) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (element instanceof HTMLButtonElement || element.getAttribute('role') === 'button') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (element instanceof HTMLAnchorElement || element.getAttribute('role') === 'link') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn checkElement(element.parentElement);\n\t\t\t};\n\n\t\t\tif (checkElement(e.target as HTMLElement)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttoolbox.closeTab();\n\t\t},\n\t\t[toolbox],\n\t);\n\n\tuseGoToHomeOnRemoved(room, user?._id);\n\tuseReadMessageWindowEvents();\n\tuseQuoteMessageByUrl();\n\n\tconst wrapperStyle = css`\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\tz-index: 5;\n\t\ttop: 0px;\n\n\t\t&.animated-hidden {\n\t\t\ttop: -88px;\n\t\t}\n\t`;\n\n\treturn (\n\t\t<>\n\t\t\t<Box position='relative' w='full'>\n\t\t\t\t<Box animated className={[wrapperStyle, hideSection && 'animated-hidden'].filter(isTruthy)} ref={sectionWrapperRef}>\n\t\t\t\t\t<RoomTopic room={room} user={user} />\n\t\t\t\t\t{!isLayoutEmbedded && room.announcement && <RoomAnnouncement announcement={room.announcement} announcementDetails={undefined} />}\n\t\t\t\t</Box>\n\t\t\t</Box>\n\n\t\t\t<Box key={room._id} className={['main-content-flex', listStyle]}>\n\t\t\t\t<section\n\t\t\t\t\trole='presentation'\n\t\t\t\t\tclassName={`messages-container flex-tab-main-content ${admin ? 'admin' : ''}`}\n\t\t\t\t\tid={`chat-window-${room._id}`}\n\t\t\t\t\tonClick={hideFlexTab && handleCloseFlexTab}\n\t\t\t\t>\n\t\t\t\t\t<div className='messages-container-wrapper'>\n\t\t\t\t\t\t<div className='messages-container-main' ref={wrapperBoxRefs} {...fileUploadTriggerProps}>\n\t\t\t\t\t\t\t<DropTargetOverlay {...fileUploadOverlayProps} />\n\t\t\t\t\t\t\t<Box position='absolute' w='full'>\n\t\t\t\t\t\t\t\t<div className={['container-bars', uploads.length && 'show'].filter(isTruthy).join(' ')}>\n\t\t\t\t\t\t\t\t\t{uploads.map((upload) => (\n\t\t\t\t\t\t\t\t\t\t<UploadProgressIndicator\n\t\t\t\t\t\t\t\t\t\t\tkey={upload.id}\n\t\t\t\t\t\t\t\t\t\t\tid={upload.id}\n\t\t\t\t\t\t\t\t\t\t\tname={upload.name}\n\t\t\t\t\t\t\t\t\t\t\tpercentage={upload.percentage}\n\t\t\t\t\t\t\t\t\t\t\terror={upload.error instanceof Error ? upload.error.message : undefined}\n\t\t\t\t\t\t\t\t\t\t\tonClose={handleUploadProgressClose}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{Boolean(unread) && (\n\t\t\t\t\t\t\t\t\t<UnreadMessagesIndicator\n\t\t\t\t\t\t\t\t\t\tcount={unread}\n\t\t\t\t\t\t\t\t\t\tonJumpButtonClick={handleUnreadBarJumpToButtonClick}\n\t\t\t\t\t\t\t\t\t\tonMarkAsReadButtonClick={handleMarkAsReadButtonClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<BubbleDate ref={bubbleRef} {...bubbleDate} />\n\t\t\t\t\t\t\t</Box>\n\n\t\t\t\t\t\t\t<div className={['messages-box'].filter(isTruthy).join(' ')}>\n\t\t\t\t\t\t\t\t<JumpToRecentMessageButton visible={hasNewMessages} onClick={handleNewMessageButtonClick} text={t('New_messages')} />\n\t\t\t\t\t\t\t\t<JumpToRecentMessageButton\n\t\t\t\t\t\t\t\t\tvisible={hasMoreNextMessages}\n\t\t\t\t\t\t\t\t\tonClick={handleJumpToRecentButtonClick}\n\t\t\t\t\t\t\t\t\ttext={t('Jump_to_recent_messages')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{!canPreview ? (\n\t\t\t\t\t\t\t\t\t<div className='content room-not-found error-color'>\n\t\t\t\t\t\t\t\t\t\t<div>{t('You_must_join_to_view_messages_in_this_channel')}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\t\t\t\t'wrapper',\n\t\t\t\t\t\t\t\t\t\thasMoreNextMessages && 'has-more-next',\n\t\t\t\t\t\t\t\t\t\thideUsernames && 'hide-usernames',\n\t\t\t\t\t\t\t\t\t\t!displayAvatars && 'hide-avatar',\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t.filter(isTruthy)\n\t\t\t\t\t\t\t\t\t\t.join(' ')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<MessageListErrorBoundary>\n\t\t\t\t\t\t\t\t\t\t<CustomScrollbars ref={innerRef}>\n\t\t\t\t\t\t\t\t\t\t\t<ul className='messages-list' aria-label={t('Message_list')} aria-busy={isLoadingMoreMessages}>\n\t\t\t\t\t\t\t\t\t\t\t\t{canPreview ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{hasMorePreviousMessages ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='load-more'>{isLoadingMoreMessages ? <LoadingMessagesIndicator /> : null}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RoomForeword user={user} room={room} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{retentionPolicy?.isActive ? <RetentionPolicyWarning room={room} /> : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t<MessageList rid={room._id} messageListRef={innerBoxRef} />\n\t\t\t\t\t\t\t\t\t\t\t\t{hasMoreNextMessages ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='load-more'>{isLoadingMoreMessages ? <LoadingMessagesIndicator /> : null}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</CustomScrollbars>\n\t\t\t\t\t\t\t\t\t</MessageListErrorBoundary>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<RoomComposer>\n\t\t\t\t\t\t\t\t<ComposerContainer\n\t\t\t\t\t\t\t\t\tsubscription={subscription}\n\t\t\t\t\t\t\t\t\tonResize={handleComposerResize}\n\t\t\t\t\t\t\t\t\tonNavigateToPreviousMessage={handleNavigateToPreviousMessage}\n\t\t\t\t\t\t\t\t\tonNavigateToNextMessage={handleNavigateToNextMessage}\n\t\t\t\t\t\t\t\t\tonUploadFiles={handleUploadFiles}\n\t\t\t\t\t\t\t\t\t// TODO: send previewUrls param\n\t\t\t\t\t\t\t\t\t// previewUrls={}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</RoomComposer>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</Box>\n\t\t</>\n\t);\n};\n\nexport default memo(RoomBody);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/body/RoomBodyV2.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/body/RoomBodyV2.tsx","inputSourceMap":{"version":3,"file":"client/views/room/body/RoomBodyV2.tsx","sourceRoot":"","sources":["client/views/room/body/RoomBodyV2.tsx"],"names":[],"mappings":"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","sourcesContent":["import { css } from '@rocket.chat/css-in-js';\nimport { Box } from '@rocket.chat/fuselage';\nimport { useMergedRefs } from '@rocket.chat/fuselage-hooks';\nimport { usePermission, useRole, useSetting, useTranslation, useUser, useUserPreference } from '@rocket.chat/ui-contexts';\nimport type { MouseEventHandler, ReactElement } from 'react';\nimport React, { memo, useCallback, useMemo, useRef } from 'react';\n\nimport { isTruthy } from '../../../../lib/isTruthy';\nimport { CustomScrollbars } from '../../../components/CustomScrollbars';\nimport { useEmbeddedLayout } from '../../../hooks/useEmbeddedLayout';\nimport { BubbleDate } from '../BubbleDate';\nimport { MessageList } from '../MessageList';\nimport MessageListErrorBoundary from '../MessageList/MessageListErrorBoundary';\nimport RoomAnnouncement from '../RoomAnnouncement';\nimport ComposerContainer from '../composer/ComposerContainer';\nimport RoomComposer from '../composer/RoomComposer/RoomComposer';\nimport { useChat } from '../contexts/ChatContext';\nimport { useRoom, useRoomSubscription, useRoomMessages } from '../contexts/RoomContext';\nimport { useRoomToolbox } from '../contexts/RoomToolboxContext';\nimport { useDateScroll } from '../hooks/useDateScroll';\nimport { useMessageListNavigation } from '../hooks/useMessageListNavigation';\nimport { useRetentionPolicy } from '../hooks/useRetentionPolicy';\nimport DropTargetOverlay from './DropTargetOverlay';\nimport JumpToRecentMessageButton from './JumpToRecentMessageButton';\nimport LoadingMessagesIndicator from './LoadingMessagesIndicator';\nimport RetentionPolicyWarning from './RetentionPolicyWarning';\nimport RoomForeword from './RoomForeword/RoomForeword';\nimport { RoomTopic } from './RoomTopic';\nimport UnreadMessagesIndicator from './UnreadMessagesIndicator';\nimport UploadProgressIndicator from './UploadProgressIndicator';\nimport { useBannerSection } from './hooks/useBannerSection';\nimport { useFileUpload } from './hooks/useFileUpload';\nimport { useGetMore } from './hooks/useGetMore';\nimport { useGoToHomeOnRemoved } from './hooks/useGoToHomeOnRemoved';\nimport { useHasNewMessages } from './hooks/useHasNewMessages';\nimport { useListIsAtBottom } from './hooks/useListIsAtBottom';\nimport { useQuoteMessageByUrl } from './hooks/useQuoteMessageByUrl';\nimport { useReadMessageWindowEvents } from './hooks/useReadMessageWindowEvents';\nimport { useRestoreScrollPosition } from './hooks/useRestoreScrollPosition';\nimport { useHandleUnread } from './hooks/useUnreadMessages';\n\nconst RoomBody = (): ReactElement => {\n\tconst chat = useChat();\n\tif (!chat) {\n\t\tthrow new Error('No ChatContext provided');\n\t}\n\n\tconst t = useTranslation();\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\tconst room = useRoom();\n\tconst user = useUser();\n\tconst toolbox = useRoomToolbox();\n\tconst admin = useRole('admin');\n\tconst subscription = useRoomSubscription();\n\n\tconst retentionPolicy = useRetentionPolicy(room);\n\n\tconst hideFlexTab = useUserPreference<boolean>('hideFlexTab') || undefined;\n\tconst hideUsernames = useUserPreference<boolean>('hideUsernames');\n\tconst displayAvatars = useUserPreference<boolean>('displayAvatars');\n\n\tconst { hasMorePreviousMessages, hasMoreNextMessages, isLoadingMoreMessages } = useRoomMessages();\n\n\tconst allowAnonymousRead = useSetting('Accounts_AllowAnonymousRead') as boolean | undefined;\n\n\tconst canPreviewChannelRoom = usePermission('preview-c-room');\n\n\tconst subscribed = !!subscription;\n\n\tconst canPreview = useMemo(() => {\n\t\tif (room && room.t !== 'c') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (allowAnonymousRead === true) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (canPreviewChannelRoom) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn subscribed;\n\t}, [allowAnonymousRead, canPreviewChannelRoom, room, subscribed]);\n\n\tconst innerBoxRef = useRef<HTMLDivElement | null>(null);\n\n\tconst {\n\t\twrapperRef: unreadBarWrapperRef,\n\t\tinnerRef: unreadBarInnerRef,\n\t\thandleUnreadBarJumpToButtonClick,\n\t\thandleMarkAsReadButtonClick,\n\t\tcounter: [unread],\n\t} = useHandleUnread(room, subscription);\n\n\tconst { innerRef: dateScrollInnerRef, bubbleRef, listStyle, ...bubbleDate } = useDateScroll();\n\n\tconst { innerRef: isAtBottomInnerRef, atBottomRef, sendToBottom, sendToBottomIfNecessary, isAtBottom } = useListIsAtBottom();\n\n\tconst { innerRef: getMoreInnerRef } = useGetMore(room._id, atBottomRef);\n\n\tconst { wrapperRef: sectionWrapperRef, hideSection, innerRef: sectionScrollRef } = useBannerSection();\n\n\tconst {\n\t\tuploads,\n\t\thandleUploadFiles,\n\t\thandleUploadProgressClose,\n\t\ttargeDrop: [fileUploadTriggerProps, fileUploadOverlayProps],\n\t} = useFileUpload();\n\n\tconst { innerRef: restoreScrollPositionInnerRef } = useRestoreScrollPosition(room._id);\n\n\tconst { messageListRef } = useMessageListNavigation();\n\n\tconst { handleNewMessageButtonClick, handleJumpToRecentButtonClick, handleComposerResize, hasNewMessages, newMessagesScrollRef } =\n\t\tuseHasNewMessages(room._id, user?._id, atBottomRef, {\n\t\t\tsendToBottom,\n\t\t\tsendToBottomIfNecessary,\n\t\t\tisAtBottom,\n\t\t});\n\n\tconst innerRef = useMergedRefs(\n\t\tdateScrollInnerRef,\n\t\tinnerBoxRef,\n\t\trestoreScrollPositionInnerRef,\n\t\tisAtBottomInnerRef,\n\t\tnewMessagesScrollRef,\n\t\tsectionScrollRef,\n\t\tunreadBarInnerRef,\n\t\tgetMoreInnerRef,\n\n\t\tmessageListRef,\n\t);\n\n\tconst wrapperBoxRefs = useMergedRefs(unreadBarWrapperRef);\n\n\tconst handleNavigateToPreviousMessage = useCallback((): void => {\n\t\tchat.messageEditing.toPreviousMessage();\n\t}, [chat.messageEditing]);\n\n\tconst handleNavigateToNextMessage = useCallback((): void => {\n\t\tchat.messageEditing.toNextMessage();\n\t}, [chat.messageEditing]);\n\n\tconst handleCloseFlexTab: MouseEventHandler<HTMLElement> = useCallback(\n\t\t(e): void => {\n\t\t\t/*\n\t\t\t * check if the element is a button or anchor\n\t\t\t * it considers the role as well\n\t\t\t * usually, the flex tab is closed when clicking outside of it\n\t\t\t * but if the user clicks on a button or anchor, we don't want to close the flex tab\n\t\t\t * because the user could be actually trying to open the flex tab through those elements\n\t\t\t */\n\n\t\t\tconst checkElement = (element: HTMLElement | null): boolean => {\n\t\t\t\tif (!element) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (element instanceof HTMLButtonElement || element.getAttribute('role') === 'button') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (element instanceof HTMLAnchorElement || element.getAttribute('role') === 'link') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn checkElement(element.parentElement);\n\t\t\t};\n\n\t\t\tif (checkElement(e.target as HTMLElement)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttoolbox.closeTab();\n\t\t},\n\t\t[toolbox],\n\t);\n\n\tuseGoToHomeOnRemoved(room, user?._id);\n\tuseReadMessageWindowEvents();\n\tuseQuoteMessageByUrl();\n\n\tconst wrapperStyle = css`\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\tz-index: 5;\n\t\ttop: 0px;\n\n\t\t&.animated-hidden {\n\t\t\ttop: -88px;\n\t\t}\n\t`;\n\n\treturn (\n\t\t<>\n\t\t\t<Box position='relative' w='full'>\n\t\t\t\t<Box animated className={[wrapperStyle, hideSection && 'animated-hidden'].filter(isTruthy)} ref={sectionWrapperRef}>\n\t\t\t\t\t<RoomTopic room={room} user={user} />\n\t\t\t\t\t{!isLayoutEmbedded && room.announcement && <RoomAnnouncement announcement={room.announcement} announcementDetails={undefined} />}\n\t\t\t\t</Box>\n\t\t\t</Box>\n\n\t\t\t<Box key={room._id} className={['main-content-flex', listStyle]}>\n\t\t\t\t<section\n\t\t\t\t\trole='presentation'\n\t\t\t\t\tclassName={`messages-container flex-tab-main-content ${admin ? 'admin' : ''}`}\n\t\t\t\t\tid={`chat-window-${room._id}`}\n\t\t\t\t\tonClick={hideFlexTab && handleCloseFlexTab}\n\t\t\t\t>\n\t\t\t\t\t<div className='messages-container-wrapper'>\n\t\t\t\t\t\t<div className='messages-container-main' ref={wrapperBoxRefs} {...fileUploadTriggerProps}>\n\t\t\t\t\t\t\t<DropTargetOverlay {...fileUploadOverlayProps} />\n\t\t\t\t\t\t\t<Box position='absolute' w='full'>\n\t\t\t\t\t\t\t\t<div className={['container-bars', uploads.length && 'show'].filter(isTruthy).join(' ')}>\n\t\t\t\t\t\t\t\t\t{uploads.map((upload) => (\n\t\t\t\t\t\t\t\t\t\t<UploadProgressIndicator\n\t\t\t\t\t\t\t\t\t\t\tkey={upload.id}\n\t\t\t\t\t\t\t\t\t\t\tid={upload.id}\n\t\t\t\t\t\t\t\t\t\t\tname={upload.name}\n\t\t\t\t\t\t\t\t\t\t\tpercentage={upload.percentage}\n\t\t\t\t\t\t\t\t\t\t\terror={upload.error instanceof Error ? upload.error.message : undefined}\n\t\t\t\t\t\t\t\t\t\t\tonClose={handleUploadProgressClose}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{Boolean(unread) && (\n\t\t\t\t\t\t\t\t\t<UnreadMessagesIndicator\n\t\t\t\t\t\t\t\t\t\tcount={unread}\n\t\t\t\t\t\t\t\t\t\tonJumpButtonClick={handleUnreadBarJumpToButtonClick}\n\t\t\t\t\t\t\t\t\t\tonMarkAsReadButtonClick={handleMarkAsReadButtonClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<BubbleDate ref={bubbleRef} {...bubbleDate} />\n\t\t\t\t\t\t\t</Box>\n\n\t\t\t\t\t\t\t<div className={['messages-box'].filter(isTruthy).join(' ')}>\n\t\t\t\t\t\t\t\t<JumpToRecentMessageButton visible={hasNewMessages} onClick={handleNewMessageButtonClick} text={t('New_messages')} />\n\t\t\t\t\t\t\t\t<JumpToRecentMessageButton\n\t\t\t\t\t\t\t\t\tvisible={hasMoreNextMessages}\n\t\t\t\t\t\t\t\t\tonClick={handleJumpToRecentButtonClick}\n\t\t\t\t\t\t\t\t\ttext={t('Jump_to_recent_messages')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{!canPreview ? (\n\t\t\t\t\t\t\t\t\t<div className='content room-not-found error-color'>\n\t\t\t\t\t\t\t\t\t\t<div>{t('You_must_join_to_view_messages_in_this_channel')}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\t\t\t\t'wrapper',\n\t\t\t\t\t\t\t\t\t\thasMoreNextMessages && 'has-more-next',\n\t\t\t\t\t\t\t\t\t\thideUsernames && 'hide-usernames',\n\t\t\t\t\t\t\t\t\t\t!displayAvatars && 'hide-avatar',\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t.filter(isTruthy)\n\t\t\t\t\t\t\t\t\t\t.join(' ')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<MessageListErrorBoundary>\n\t\t\t\t\t\t\t\t\t\t<CustomScrollbars ref={innerRef}>\n\t\t\t\t\t\t\t\t\t\t\t<ul className='messages-list' aria-label={t('Message_list')} aria-busy={isLoadingMoreMessages}>\n\t\t\t\t\t\t\t\t\t\t\t\t{canPreview ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{hasMorePreviousMessages ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='load-more'>{isLoadingMoreMessages ? <LoadingMessagesIndicator /> : null}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RoomForeword user={user} room={room} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{retentionPolicy?.isActive ? <RetentionPolicyWarning room={room} /> : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t<MessageList rid={room._id} messageListRef={innerBoxRef} />\n\t\t\t\t\t\t\t\t\t\t\t\t{hasMoreNextMessages ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='load-more'>{isLoadingMoreMessages ? <LoadingMessagesIndicator /> : null}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</CustomScrollbars>\n\t\t\t\t\t\t\t\t\t</MessageListErrorBoundary>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<RoomComposer>\n\t\t\t\t\t\t\t\t<ComposerContainer\n\t\t\t\t\t\t\t\t\tsubscription={subscription}\n\t\t\t\t\t\t\t\t\tonResize={handleComposerResize}\n\t\t\t\t\t\t\t\t\tonNavigateToPreviousMessage={handleNavigateToPreviousMessage}\n\t\t\t\t\t\t\t\t\tonNavigateToNextMessage={handleNavigateToNextMessage}\n\t\t\t\t\t\t\t\t\tonUploadFiles={handleUploadFiles}\n\t\t\t\t\t\t\t\t\t// TODO: send previewUrls param\n\t\t\t\t\t\t\t\t\t// previewUrls={}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</RoomComposer>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</Box>\n\t\t</>\n\t);\n};\n\nexport default memo(RoomBody);\n"]}}},"code":"var _templateObject;\nvar _excluded = [\"innerRef\", \"bubbleRef\", \"listStyle\"];\nvar _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 0);\nvar _taggedTemplateLiteralLoose;\nmodule.link(\"@babel/runtime/helpers/taggedTemplateLiteralLoose\", {\n  default: function (v) {\n    _taggedTemplateLiteralLoose = v;\n  }\n}, 1);\nvar _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 2);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 3);\nvar css;\nmodule.link(\"@rocket.chat/css-in-js\", {\n  css: function (v) {\n    css = v;\n  }\n}, 0);\nvar Box;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box: function (v) {\n    Box = v;\n  }\n}, 1);\nvar useMergedRefs;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMergedRefs: function (v) {\n    useMergedRefs = v;\n  }\n}, 2);\nvar usePermission, useRole, useSetting, useTranslation, useUser, useUserPreference;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  usePermission: function (v) {\n    usePermission = v;\n  },\n  useRole: function (v) {\n    useRole = v;\n  },\n  useSetting: function (v) {\n    useSetting = v;\n  },\n  useTranslation: function (v) {\n    useTranslation = v;\n  },\n  useUser: function (v) {\n    useUser = v;\n  },\n  useUserPreference: function (v) {\n    useUserPreference = v;\n  }\n}, 3);\nvar React, memo, useCallback, useMemo, useRef;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  memo: function (v) {\n    memo = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useRef: function (v) {\n    useRef = v;\n  }\n}, 4);\nvar isTruthy;\nmodule.link(\"../../../../lib/isTruthy\", {\n  isTruthy: function (v) {\n    isTruthy = v;\n  }\n}, 5);\nvar CustomScrollbars;\nmodule.link(\"../../../components/CustomScrollbars\", {\n  CustomScrollbars: function (v) {\n    CustomScrollbars = v;\n  }\n}, 6);\nvar useEmbeddedLayout;\nmodule.link(\"../../../hooks/useEmbeddedLayout\", {\n  useEmbeddedLayout: function (v) {\n    useEmbeddedLayout = v;\n  }\n}, 7);\nvar BubbleDate;\nmodule.link(\"../BubbleDate\", {\n  BubbleDate: function (v) {\n    BubbleDate = v;\n  }\n}, 8);\nvar MessageList;\nmodule.link(\"../MessageList\", {\n  MessageList: function (v) {\n    MessageList = v;\n  }\n}, 9);\nvar MessageListErrorBoundary;\nmodule.link(\"../MessageList/MessageListErrorBoundary\", {\n  \"default\": function (v) {\n    MessageListErrorBoundary = v;\n  }\n}, 10);\nvar RoomAnnouncement;\nmodule.link(\"../RoomAnnouncement\", {\n  \"default\": function (v) {\n    RoomAnnouncement = v;\n  }\n}, 11);\nvar ComposerContainer;\nmodule.link(\"../composer/ComposerContainer\", {\n  \"default\": function (v) {\n    ComposerContainer = v;\n  }\n}, 12);\nvar RoomComposer;\nmodule.link(\"../composer/RoomComposer/RoomComposer\", {\n  \"default\": function (v) {\n    RoomComposer = v;\n  }\n}, 13);\nvar useChat;\nmodule.link(\"../contexts/ChatContext\", {\n  useChat: function (v) {\n    useChat = v;\n  }\n}, 14);\nvar useRoom, useRoomSubscription, useRoomMessages;\nmodule.link(\"../contexts/RoomContext\", {\n  useRoom: function (v) {\n    useRoom = v;\n  },\n  useRoomSubscription: function (v) {\n    useRoomSubscription = v;\n  },\n  useRoomMessages: function (v) {\n    useRoomMessages = v;\n  }\n}, 15);\nvar useRoomToolbox;\nmodule.link(\"../contexts/RoomToolboxContext\", {\n  useRoomToolbox: function (v) {\n    useRoomToolbox = v;\n  }\n}, 16);\nvar useDateScroll;\nmodule.link(\"../hooks/useDateScroll\", {\n  useDateScroll: function (v) {\n    useDateScroll = v;\n  }\n}, 17);\nvar useMessageListNavigation;\nmodule.link(\"../hooks/useMessageListNavigation\", {\n  useMessageListNavigation: function (v) {\n    useMessageListNavigation = v;\n  }\n}, 18);\nvar useRetentionPolicy;\nmodule.link(\"../hooks/useRetentionPolicy\", {\n  useRetentionPolicy: function (v) {\n    useRetentionPolicy = v;\n  }\n}, 19);\nvar DropTargetOverlay;\nmodule.link(\"./DropTargetOverlay\", {\n  \"default\": function (v) {\n    DropTargetOverlay = v;\n  }\n}, 20);\nvar JumpToRecentMessageButton;\nmodule.link(\"./JumpToRecentMessageButton\", {\n  \"default\": function (v) {\n    JumpToRecentMessageButton = v;\n  }\n}, 21);\nvar LoadingMessagesIndicator;\nmodule.link(\"./LoadingMessagesIndicator\", {\n  \"default\": function (v) {\n    LoadingMessagesIndicator = v;\n  }\n}, 22);\nvar RetentionPolicyWarning;\nmodule.link(\"./RetentionPolicyWarning\", {\n  \"default\": function (v) {\n    RetentionPolicyWarning = v;\n  }\n}, 23);\nvar RoomForeword;\nmodule.link(\"./RoomForeword/RoomForeword\", {\n  \"default\": function (v) {\n    RoomForeword = v;\n  }\n}, 24);\nvar RoomTopic;\nmodule.link(\"./RoomTopic\", {\n  RoomTopic: function (v) {\n    RoomTopic = v;\n  }\n}, 25);\nvar UnreadMessagesIndicator;\nmodule.link(\"./UnreadMessagesIndicator\", {\n  \"default\": function (v) {\n    UnreadMessagesIndicator = v;\n  }\n}, 26);\nvar UploadProgressIndicator;\nmodule.link(\"./UploadProgressIndicator\", {\n  \"default\": function (v) {\n    UploadProgressIndicator = v;\n  }\n}, 27);\nvar useBannerSection;\nmodule.link(\"./hooks/useBannerSection\", {\n  useBannerSection: function (v) {\n    useBannerSection = v;\n  }\n}, 28);\nvar useFileUpload;\nmodule.link(\"./hooks/useFileUpload\", {\n  useFileUpload: function (v) {\n    useFileUpload = v;\n  }\n}, 29);\nvar useGetMore;\nmodule.link(\"./hooks/useGetMore\", {\n  useGetMore: function (v) {\n    useGetMore = v;\n  }\n}, 30);\nvar useGoToHomeOnRemoved;\nmodule.link(\"./hooks/useGoToHomeOnRemoved\", {\n  useGoToHomeOnRemoved: function (v) {\n    useGoToHomeOnRemoved = v;\n  }\n}, 31);\nvar useHasNewMessages;\nmodule.link(\"./hooks/useHasNewMessages\", {\n  useHasNewMessages: function (v) {\n    useHasNewMessages = v;\n  }\n}, 32);\nvar useListIsAtBottom;\nmodule.link(\"./hooks/useListIsAtBottom\", {\n  useListIsAtBottom: function (v) {\n    useListIsAtBottom = v;\n  }\n}, 33);\nvar useQuoteMessageByUrl;\nmodule.link(\"./hooks/useQuoteMessageByUrl\", {\n  useQuoteMessageByUrl: function (v) {\n    useQuoteMessageByUrl = v;\n  }\n}, 34);\nvar useReadMessageWindowEvents;\nmodule.link(\"./hooks/useReadMessageWindowEvents\", {\n  useReadMessageWindowEvents: function (v) {\n    useReadMessageWindowEvents = v;\n  }\n}, 35);\nvar useRestoreScrollPosition;\nmodule.link(\"./hooks/useRestoreScrollPosition\", {\n  useRestoreScrollPosition: function (v) {\n    useRestoreScrollPosition = v;\n  }\n}, 36);\nvar useHandleUnread;\nmodule.link(\"./hooks/useUnreadMessages\", {\n  useHandleUnread: function (v) {\n    useHandleUnread = v;\n  }\n}, 37);\nvar RoomBody = function () {\n  var chat = useChat();\n  if (!chat) {\n    throw new Error('No ChatContext provided');\n  }\n  var t = useTranslation();\n  var isLayoutEmbedded = useEmbeddedLayout();\n  var room = useRoom();\n  var user = useUser();\n  var toolbox = useRoomToolbox();\n  var admin = useRole('admin');\n  var subscription = useRoomSubscription();\n  var retentionPolicy = useRetentionPolicy(room);\n  var hideFlexTab = useUserPreference('hideFlexTab') || undefined;\n  var hideUsernames = useUserPreference('hideUsernames');\n  var displayAvatars = useUserPreference('displayAvatars');\n  var _useRoomMessages = useRoomMessages(),\n    hasMorePreviousMessages = _useRoomMessages.hasMorePreviousMessages,\n    hasMoreNextMessages = _useRoomMessages.hasMoreNextMessages,\n    isLoadingMoreMessages = _useRoomMessages.isLoadingMoreMessages;\n  var allowAnonymousRead = useSetting('Accounts_AllowAnonymousRead');\n  var canPreviewChannelRoom = usePermission('preview-c-room');\n  var subscribed = !!subscription;\n  var canPreview = useMemo(function () {\n    if (room && room.t !== 'c') {\n      return true;\n    }\n    if (allowAnonymousRead === true) {\n      return true;\n    }\n    if (canPreviewChannelRoom) {\n      return true;\n    }\n    return subscribed;\n  }, [allowAnonymousRead, canPreviewChannelRoom, room, subscribed]);\n  var innerBoxRef = useRef(null);\n  var _useHandleUnread = useHandleUnread(room, subscription),\n    unreadBarWrapperRef = _useHandleUnread.wrapperRef,\n    unreadBarInnerRef = _useHandleUnread.innerRef,\n    handleUnreadBarJumpToButtonClick = _useHandleUnread.handleUnreadBarJumpToButtonClick,\n    handleMarkAsReadButtonClick = _useHandleUnread.handleMarkAsReadButtonClick,\n    _useHandleUnread$coun = _slicedToArray(_useHandleUnread.counter, 1),\n    unread = _useHandleUnread$coun[0];\n  var _useDateScroll = useDateScroll(),\n    dateScrollInnerRef = _useDateScroll.innerRef,\n    bubbleRef = _useDateScroll.bubbleRef,\n    listStyle = _useDateScroll.listStyle,\n    bubbleDate = _objectWithoutProperties(_useDateScroll, _excluded);\n  var _useListIsAtBottom = useListIsAtBottom(),\n    isAtBottomInnerRef = _useListIsAtBottom.innerRef,\n    atBottomRef = _useListIsAtBottom.atBottomRef,\n    sendToBottom = _useListIsAtBottom.sendToBottom,\n    sendToBottomIfNecessary = _useListIsAtBottom.sendToBottomIfNecessary,\n    isAtBottom = _useListIsAtBottom.isAtBottom;\n  var _useGetMore = useGetMore(room._id, atBottomRef),\n    getMoreInnerRef = _useGetMore.innerRef;\n  var _useBannerSection = useBannerSection(),\n    sectionWrapperRef = _useBannerSection.wrapperRef,\n    hideSection = _useBannerSection.hideSection,\n    sectionScrollRef = _useBannerSection.innerRef;\n  var _useFileUpload = useFileUpload(),\n    uploads = _useFileUpload.uploads,\n    handleUploadFiles = _useFileUpload.handleUploadFiles,\n    handleUploadProgressClose = _useFileUpload.handleUploadProgressClose,\n    _useFileUpload$targeD = _slicedToArray(_useFileUpload.targeDrop, 2),\n    fileUploadTriggerProps = _useFileUpload$targeD[0],\n    fileUploadOverlayProps = _useFileUpload$targeD[1];\n  var _useRestoreScrollPosi = useRestoreScrollPosition(room._id),\n    restoreScrollPositionInnerRef = _useRestoreScrollPosi.innerRef;\n  var _useMessageListNaviga = useMessageListNavigation(),\n    messageListRef = _useMessageListNaviga.messageListRef;\n  var _useHasNewMessages = useHasNewMessages(room._id, user === null || user === void 0 ? void 0 : user._id, atBottomRef, {\n      sendToBottom: sendToBottom,\n      sendToBottomIfNecessary: sendToBottomIfNecessary,\n      isAtBottom: isAtBottom\n    }),\n    handleNewMessageButtonClick = _useHasNewMessages.handleNewMessageButtonClick,\n    handleJumpToRecentButtonClick = _useHasNewMessages.handleJumpToRecentButtonClick,\n    handleComposerResize = _useHasNewMessages.handleComposerResize,\n    hasNewMessages = _useHasNewMessages.hasNewMessages,\n    newMessagesScrollRef = _useHasNewMessages.newMessagesScrollRef;\n  var innerRef = useMergedRefs(dateScrollInnerRef, innerBoxRef, restoreScrollPositionInnerRef, isAtBottomInnerRef, newMessagesScrollRef, sectionScrollRef, unreadBarInnerRef, getMoreInnerRef, messageListRef);\n  var wrapperBoxRefs = useMergedRefs(unreadBarWrapperRef);\n  var handleNavigateToPreviousMessage = useCallback(function () {\n    chat.messageEditing.toPreviousMessage();\n  }, [chat.messageEditing]);\n  var handleNavigateToNextMessage = useCallback(function () {\n    chat.messageEditing.toNextMessage();\n  }, [chat.messageEditing]);\n  var handleCloseFlexTab = useCallback(function (e) {\n    /*\n     * check if the element is a button or anchor\n     * it considers the role as well\n     * usually, the flex tab is closed when clicking outside of it\n     * but if the user clicks on a button or anchor, we don't want to close the flex tab\n     * because the user could be actually trying to open the flex tab through those elements\n     */\n    var checkElement = function (element) {\n      if (!element) {\n        return false;\n      }\n      if (element instanceof HTMLButtonElement || element.getAttribute('role') === 'button') {\n        return true;\n      }\n      if (element instanceof HTMLAnchorElement || element.getAttribute('role') === 'link') {\n        return true;\n      }\n      return checkElement(element.parentElement);\n    };\n    if (checkElement(e.target)) {\n      return;\n    }\n    toolbox.closeTab();\n  }, [toolbox]);\n  useGoToHomeOnRemoved(room, user === null || user === void 0 ? void 0 : user._id);\n  useReadMessageWindowEvents();\n  useQuoteMessageByUrl();\n  var wrapperStyle = css(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"\\n\\t\\tposition: absolute;\\n\\t\\twidth: 100%;\\n\\t\\tz-index: 5;\\n\\t\\ttop: 0px;\\n\\n\\t\\t&.animated-hidden {\\n\\t\\t\\ttop: -88px;\\n\\t\\t}\\n\\t\"])));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Box, {\n    position: \"relative\",\n    w: \"full\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    animated: true,\n    className: [wrapperStyle, hideSection && 'animated-hidden'].filter(isTruthy),\n    ref: sectionWrapperRef\n  }, /*#__PURE__*/React.createElement(RoomTopic, {\n    room: room,\n    user: user\n  }), !isLayoutEmbedded && room.announcement && /*#__PURE__*/React.createElement(RoomAnnouncement, {\n    announcement: room.announcement,\n    announcementDetails: undefined\n  }))), /*#__PURE__*/React.createElement(Box, {\n    key: room._id,\n    className: ['main-content-flex', listStyle]\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    role: \"presentation\",\n    className: \"messages-container flex-tab-main-content \" + (admin ? 'admin' : ''),\n    id: \"chat-window-\" + room._id,\n    onClick: hideFlexTab && handleCloseFlexTab\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"messages-container-wrapper\"\n  }, /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: \"messages-container-main\",\n    ref: wrapperBoxRefs\n  }, fileUploadTriggerProps), /*#__PURE__*/React.createElement(DropTargetOverlay, fileUploadOverlayProps), /*#__PURE__*/React.createElement(Box, {\n    position: \"absolute\",\n    w: \"full\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: ['container-bars', uploads.length && 'show'].filter(isTruthy).join(' ')\n  }, uploads.map(function (upload) {\n    return /*#__PURE__*/React.createElement(UploadProgressIndicator, {\n      key: upload.id,\n      id: upload.id,\n      name: upload.name,\n      percentage: upload.percentage,\n      error: upload.error instanceof Error ? upload.error.message : undefined,\n      onClose: handleUploadProgressClose\n    });\n  })), Boolean(unread) && /*#__PURE__*/React.createElement(UnreadMessagesIndicator, {\n    count: unread,\n    onJumpButtonClick: handleUnreadBarJumpToButtonClick,\n    onMarkAsReadButtonClick: handleMarkAsReadButtonClick\n  }), /*#__PURE__*/React.createElement(BubbleDate, _extends({\n    ref: bubbleRef\n  }, bubbleDate))), /*#__PURE__*/React.createElement(\"div\", {\n    className: ['messages-box'].filter(isTruthy).join(' ')\n  }, /*#__PURE__*/React.createElement(JumpToRecentMessageButton, {\n    visible: hasNewMessages,\n    onClick: handleNewMessageButtonClick,\n    text: t('New_messages')\n  }), /*#__PURE__*/React.createElement(JumpToRecentMessageButton, {\n    visible: hasMoreNextMessages,\n    onClick: handleJumpToRecentButtonClick,\n    text: t('Jump_to_recent_messages')\n  }), !canPreview ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content room-not-found error-color\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, t('You_must_join_to_view_messages_in_this_channel'))) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: ['wrapper', hasMoreNextMessages && 'has-more-next', hideUsernames && 'hide-usernames', !displayAvatars && 'hide-avatar'].filter(isTruthy).join(' ')\n  }, /*#__PURE__*/React.createElement(MessageListErrorBoundary, null, /*#__PURE__*/React.createElement(CustomScrollbars, {\n    ref: innerRef\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"messages-list\",\n    \"aria-label\": t('Message_list'),\n    \"aria-busy\": isLoadingMoreMessages\n  }, canPreview ? /*#__PURE__*/React.createElement(React.Fragment, null, hasMorePreviousMessages ? /*#__PURE__*/React.createElement(\"li\", {\n    className: \"load-more\"\n  }, isLoadingMoreMessages ? /*#__PURE__*/React.createElement(LoadingMessagesIndicator, null) : null) : /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(RoomForeword, {\n    user: user,\n    room: room\n  }), retentionPolicy !== null && retentionPolicy !== void 0 && retentionPolicy.isActive ? /*#__PURE__*/React.createElement(RetentionPolicyWarning, {\n    room: room\n  }) : null)) : null, /*#__PURE__*/React.createElement(MessageList, {\n    rid: room._id,\n    messageListRef: innerBoxRef\n  }), hasMoreNextMessages ? /*#__PURE__*/React.createElement(\"li\", {\n    className: \"load-more\"\n  }, isLoadingMoreMessages ? /*#__PURE__*/React.createElement(LoadingMessagesIndicator, null) : null) : null))))), /*#__PURE__*/React.createElement(RoomComposer, null, /*#__PURE__*/React.createElement(ComposerContainer, {\n    subscription: subscription,\n    onResize: handleComposerResize,\n    onNavigateToPreviousMessage: handleNavigateToPreviousMessage,\n    onNavigateToNextMessage: handleNavigateToNextMessage,\n    onUploadFiles: handleUploadFiles\n  })))))));\n};\nmodule.exportDefault( /*#__PURE__*/memo(RoomBody));","map":{"version":3,"names":["_extends","module","link","default","v","_taggedTemplateLiteralLoose","_objectWithoutProperties","_slicedToArray","css","Box","useMergedRefs","usePermission","useRole","useSetting","useTranslation","useUser","useUserPreference","React","memo","useCallback","useMemo","useRef","isTruthy","CustomScrollbars","useEmbeddedLayout","BubbleDate","MessageList","MessageListErrorBoundary","RoomAnnouncement","ComposerContainer","RoomComposer","useChat","useRoom","useRoomSubscription","useRoomMessages","useRoomToolbox","useDateScroll","useMessageListNavigation","useRetentionPolicy","DropTargetOverlay","JumpToRecentMessageButton","LoadingMessagesIndicator","RetentionPolicyWarning","RoomForeword","RoomTopic","UnreadMessagesIndicator","UploadProgressIndicator","useBannerSection","useFileUpload","useGetMore","useGoToHomeOnRemoved","useHasNewMessages","useListIsAtBottom","useQuoteMessageByUrl","useReadMessageWindowEvents","useRestoreScrollPosition","useHandleUnread","RoomBody","chat","Error","t","isLayoutEmbedded","room","user","toolbox","admin","subscription","retentionPolicy","hideFlexTab","undefined","hideUsernames","displayAvatars","_useRoomMessages","hasMorePreviousMessages","hasMoreNextMessages","isLoadingMoreMessages","allowAnonymousRead","canPreviewChannelRoom","subscribed","canPreview","innerBoxRef","_useHandleUnread","unreadBarWrapperRef","wrapperRef","unreadBarInnerRef","innerRef","handleUnreadBarJumpToButtonClick","handleMarkAsReadButtonClick","_useHandleUnread$coun","counter","unread","_useDateScroll","dateScrollInnerRef","bubbleRef","listStyle","bubbleDate","_excluded","_useListIsAtBottom","isAtBottomInnerRef","atBottomRef","sendToBottom","sendToBottomIfNecessary","isAtBottom","_useGetMore","_id","getMoreInnerRef","_useBannerSection","sectionWrapperRef","hideSection","sectionScrollRef","_useFileUpload","uploads","handleUploadFiles","handleUploadProgressClose","_useFileUpload$targeD","targeDrop","fileUploadTriggerProps","fileUploadOverlayProps","_useRestoreScrollPosi","restoreScrollPositionInnerRef","_useMessageListNaviga","messageListRef","_useHasNewMessages","handleNewMessageButtonClick","handleJumpToRecentButtonClick","handleComposerResize","hasNewMessages","newMessagesScrollRef","wrapperBoxRefs","handleNavigateToPreviousMessage","messageEditing","toPreviousMessage","handleNavigateToNextMessage","toNextMessage","handleCloseFlexTab","e","checkElement","element","HTMLButtonElement","getAttribute","HTMLAnchorElement","parentElement","target","closeTab","wrapperStyle","_templateObject","createElement","Fragment","position","w","animated","className","filter","ref","announcement","announcementDetails","key","role","id","onClick","length","join","map","upload","name","percentage","error","message","onClose","Boolean","count","onJumpButtonClick","onMarkAsReadButtonClick","visible","text","isActive","rid","onResize","onNavigateToPreviousMessage","onNavigateToNextMessage","onUploadFiles","exportDefault"],"sources":["client/views/room/body/RoomBodyV2.tsx"],"sourcesContent":["import { css } from '@rocket.chat/css-in-js';\nimport { Box } from '@rocket.chat/fuselage';\nimport { useMergedRefs } from '@rocket.chat/fuselage-hooks';\nimport { usePermission, useRole, useSetting, useTranslation, useUser, useUserPreference } from '@rocket.chat/ui-contexts';\nimport type { MouseEventHandler, ReactElement } from 'react';\nimport React, { memo, useCallback, useMemo, useRef } from 'react';\n\nimport { isTruthy } from '../../../../lib/isTruthy';\nimport { CustomScrollbars } from '../../../components/CustomScrollbars';\nimport { useEmbeddedLayout } from '../../../hooks/useEmbeddedLayout';\nimport { BubbleDate } from '../BubbleDate';\nimport { MessageList } from '../MessageList';\nimport MessageListErrorBoundary from '../MessageList/MessageListErrorBoundary';\nimport RoomAnnouncement from '../RoomAnnouncement';\nimport ComposerContainer from '../composer/ComposerContainer';\nimport RoomComposer from '../composer/RoomComposer/RoomComposer';\nimport { useChat } from '../contexts/ChatContext';\nimport { useRoom, useRoomSubscription, useRoomMessages } from '../contexts/RoomContext';\nimport { useRoomToolbox } from '../contexts/RoomToolboxContext';\nimport { useDateScroll } from '../hooks/useDateScroll';\nimport { useMessageListNavigation } from '../hooks/useMessageListNavigation';\nimport { useRetentionPolicy } from '../hooks/useRetentionPolicy';\nimport DropTargetOverlay from './DropTargetOverlay';\nimport JumpToRecentMessageButton from './JumpToRecentMessageButton';\nimport LoadingMessagesIndicator from './LoadingMessagesIndicator';\nimport RetentionPolicyWarning from './RetentionPolicyWarning';\nimport RoomForeword from './RoomForeword/RoomForeword';\nimport { RoomTopic } from './RoomTopic';\nimport UnreadMessagesIndicator from './UnreadMessagesIndicator';\nimport UploadProgressIndicator from './UploadProgressIndicator';\nimport { useBannerSection } from './hooks/useBannerSection';\nimport { useFileUpload } from './hooks/useFileUpload';\nimport { useGetMore } from './hooks/useGetMore';\nimport { useGoToHomeOnRemoved } from './hooks/useGoToHomeOnRemoved';\nimport { useHasNewMessages } from './hooks/useHasNewMessages';\nimport { useListIsAtBottom } from './hooks/useListIsAtBottom';\nimport { useQuoteMessageByUrl } from './hooks/useQuoteMessageByUrl';\nimport { useReadMessageWindowEvents } from './hooks/useReadMessageWindowEvents';\nimport { useRestoreScrollPosition } from './hooks/useRestoreScrollPosition';\nimport { useHandleUnread } from './hooks/useUnreadMessages';\n\nconst RoomBody = (): ReactElement => {\n\tconst chat = useChat();\n\tif (!chat) {\n\t\tthrow new Error('No ChatContext provided');\n\t}\n\n\tconst t = useTranslation();\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\tconst room = useRoom();\n\tconst user = useUser();\n\tconst toolbox = useRoomToolbox();\n\tconst admin = useRole('admin');\n\tconst subscription = useRoomSubscription();\n\n\tconst retentionPolicy = useRetentionPolicy(room);\n\n\tconst hideFlexTab = useUserPreference<boolean>('hideFlexTab') || undefined;\n\tconst hideUsernames = useUserPreference<boolean>('hideUsernames');\n\tconst displayAvatars = useUserPreference<boolean>('displayAvatars');\n\n\tconst { hasMorePreviousMessages, hasMoreNextMessages, isLoadingMoreMessages } = useRoomMessages();\n\n\tconst allowAnonymousRead = useSetting('Accounts_AllowAnonymousRead') as boolean | undefined;\n\n\tconst canPreviewChannelRoom = usePermission('preview-c-room');\n\n\tconst subscribed = !!subscription;\n\n\tconst canPreview = useMemo(() => {\n\t\tif (room && room.t !== 'c') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (allowAnonymousRead === true) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (canPreviewChannelRoom) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn subscribed;\n\t}, [allowAnonymousRead, canPreviewChannelRoom, room, subscribed]);\n\n\tconst innerBoxRef = useRef<HTMLDivElement | null>(null);\n\n\tconst {\n\t\twrapperRef: unreadBarWrapperRef,\n\t\tinnerRef: unreadBarInnerRef,\n\t\thandleUnreadBarJumpToButtonClick,\n\t\thandleMarkAsReadButtonClick,\n\t\tcounter: [unread],\n\t} = useHandleUnread(room, subscription);\n\n\tconst { innerRef: dateScrollInnerRef, bubbleRef, listStyle, ...bubbleDate } = useDateScroll();\n\n\tconst { innerRef: isAtBottomInnerRef, atBottomRef, sendToBottom, sendToBottomIfNecessary, isAtBottom } = useListIsAtBottom();\n\n\tconst { innerRef: getMoreInnerRef } = useGetMore(room._id, atBottomRef);\n\n\tconst { wrapperRef: sectionWrapperRef, hideSection, innerRef: sectionScrollRef } = useBannerSection();\n\n\tconst {\n\t\tuploads,\n\t\thandleUploadFiles,\n\t\thandleUploadProgressClose,\n\t\ttargeDrop: [fileUploadTriggerProps, fileUploadOverlayProps],\n\t} = useFileUpload();\n\n\tconst { innerRef: restoreScrollPositionInnerRef } = useRestoreScrollPosition(room._id);\n\n\tconst { messageListRef } = useMessageListNavigation();\n\n\tconst { handleNewMessageButtonClick, handleJumpToRecentButtonClick, handleComposerResize, hasNewMessages, newMessagesScrollRef } =\n\t\tuseHasNewMessages(room._id, user?._id, atBottomRef, {\n\t\t\tsendToBottom,\n\t\t\tsendToBottomIfNecessary,\n\t\t\tisAtBottom,\n\t\t});\n\n\tconst innerRef = useMergedRefs(\n\t\tdateScrollInnerRef,\n\t\tinnerBoxRef,\n\t\trestoreScrollPositionInnerRef,\n\t\tisAtBottomInnerRef,\n\t\tnewMessagesScrollRef,\n\t\tsectionScrollRef,\n\t\tunreadBarInnerRef,\n\t\tgetMoreInnerRef,\n\n\t\tmessageListRef,\n\t);\n\n\tconst wrapperBoxRefs = useMergedRefs(unreadBarWrapperRef);\n\n\tconst handleNavigateToPreviousMessage = useCallback((): void => {\n\t\tchat.messageEditing.toPreviousMessage();\n\t}, [chat.messageEditing]);\n\n\tconst handleNavigateToNextMessage = useCallback((): void => {\n\t\tchat.messageEditing.toNextMessage();\n\t}, [chat.messageEditing]);\n\n\tconst handleCloseFlexTab: MouseEventHandler<HTMLElement> = useCallback(\n\t\t(e): void => {\n\t\t\t/*\n\t\t\t * check if the element is a button or anchor\n\t\t\t * it considers the role as well\n\t\t\t * usually, the flex tab is closed when clicking outside of it\n\t\t\t * but if the user clicks on a button or anchor, we don't want to close the flex tab\n\t\t\t * because the user could be actually trying to open the flex tab through those elements\n\t\t\t */\n\n\t\t\tconst checkElement = (element: HTMLElement | null): boolean => {\n\t\t\t\tif (!element) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (element instanceof HTMLButtonElement || element.getAttribute('role') === 'button') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (element instanceof HTMLAnchorElement || element.getAttribute('role') === 'link') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn checkElement(element.parentElement);\n\t\t\t};\n\n\t\t\tif (checkElement(e.target as HTMLElement)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttoolbox.closeTab();\n\t\t},\n\t\t[toolbox],\n\t);\n\n\tuseGoToHomeOnRemoved(room, user?._id);\n\tuseReadMessageWindowEvents();\n\tuseQuoteMessageByUrl();\n\n\tconst wrapperStyle = css`\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\tz-index: 5;\n\t\ttop: 0px;\n\n\t\t&.animated-hidden {\n\t\t\ttop: -88px;\n\t\t}\n\t`;\n\n\treturn (\n\t\t<>\n\t\t\t<Box position='relative' w='full'>\n\t\t\t\t<Box animated className={[wrapperStyle, hideSection && 'animated-hidden'].filter(isTruthy)} ref={sectionWrapperRef}>\n\t\t\t\t\t<RoomTopic room={room} user={user} />\n\t\t\t\t\t{!isLayoutEmbedded && room.announcement && <RoomAnnouncement announcement={room.announcement} announcementDetails={undefined} />}\n\t\t\t\t</Box>\n\t\t\t</Box>\n\n\t\t\t<Box key={room._id} className={['main-content-flex', listStyle]}>\n\t\t\t\t<section\n\t\t\t\t\trole='presentation'\n\t\t\t\t\tclassName={`messages-container flex-tab-main-content ${admin ? 'admin' : ''}`}\n\t\t\t\t\tid={`chat-window-${room._id}`}\n\t\t\t\t\tonClick={hideFlexTab && handleCloseFlexTab}\n\t\t\t\t>\n\t\t\t\t\t<div className='messages-container-wrapper'>\n\t\t\t\t\t\t<div className='messages-container-main' ref={wrapperBoxRefs} {...fileUploadTriggerProps}>\n\t\t\t\t\t\t\t<DropTargetOverlay {...fileUploadOverlayProps} />\n\t\t\t\t\t\t\t<Box position='absolute' w='full'>\n\t\t\t\t\t\t\t\t<div className={['container-bars', uploads.length && 'show'].filter(isTruthy).join(' ')}>\n\t\t\t\t\t\t\t\t\t{uploads.map((upload) => (\n\t\t\t\t\t\t\t\t\t\t<UploadProgressIndicator\n\t\t\t\t\t\t\t\t\t\t\tkey={upload.id}\n\t\t\t\t\t\t\t\t\t\t\tid={upload.id}\n\t\t\t\t\t\t\t\t\t\t\tname={upload.name}\n\t\t\t\t\t\t\t\t\t\t\tpercentage={upload.percentage}\n\t\t\t\t\t\t\t\t\t\t\terror={upload.error instanceof Error ? upload.error.message : undefined}\n\t\t\t\t\t\t\t\t\t\t\tonClose={handleUploadProgressClose}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{Boolean(unread) && (\n\t\t\t\t\t\t\t\t\t<UnreadMessagesIndicator\n\t\t\t\t\t\t\t\t\t\tcount={unread}\n\t\t\t\t\t\t\t\t\t\tonJumpButtonClick={handleUnreadBarJumpToButtonClick}\n\t\t\t\t\t\t\t\t\t\tonMarkAsReadButtonClick={handleMarkAsReadButtonClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<BubbleDate ref={bubbleRef} {...bubbleDate} />\n\t\t\t\t\t\t\t</Box>\n\n\t\t\t\t\t\t\t<div className={['messages-box'].filter(isTruthy).join(' ')}>\n\t\t\t\t\t\t\t\t<JumpToRecentMessageButton visible={hasNewMessages} onClick={handleNewMessageButtonClick} text={t('New_messages')} />\n\t\t\t\t\t\t\t\t<JumpToRecentMessageButton\n\t\t\t\t\t\t\t\t\tvisible={hasMoreNextMessages}\n\t\t\t\t\t\t\t\t\tonClick={handleJumpToRecentButtonClick}\n\t\t\t\t\t\t\t\t\ttext={t('Jump_to_recent_messages')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{!canPreview ? (\n\t\t\t\t\t\t\t\t\t<div className='content room-not-found error-color'>\n\t\t\t\t\t\t\t\t\t\t<div>{t('You_must_join_to_view_messages_in_this_channel')}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\t\t\t\t'wrapper',\n\t\t\t\t\t\t\t\t\t\thasMoreNextMessages && 'has-more-next',\n\t\t\t\t\t\t\t\t\t\thideUsernames && 'hide-usernames',\n\t\t\t\t\t\t\t\t\t\t!displayAvatars && 'hide-avatar',\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t.filter(isTruthy)\n\t\t\t\t\t\t\t\t\t\t.join(' ')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<MessageListErrorBoundary>\n\t\t\t\t\t\t\t\t\t\t<CustomScrollbars ref={innerRef}>\n\t\t\t\t\t\t\t\t\t\t\t<ul className='messages-list' aria-label={t('Message_list')} aria-busy={isLoadingMoreMessages}>\n\t\t\t\t\t\t\t\t\t\t\t\t{canPreview ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{hasMorePreviousMessages ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='load-more'>{isLoadingMoreMessages ? <LoadingMessagesIndicator /> : null}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RoomForeword user={user} room={room} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{retentionPolicy?.isActive ? <RetentionPolicyWarning room={room} /> : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t<MessageList rid={room._id} messageListRef={innerBoxRef} />\n\t\t\t\t\t\t\t\t\t\t\t\t{hasMoreNextMessages ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='load-more'>{isLoadingMoreMessages ? <LoadingMessagesIndicator /> : null}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</CustomScrollbars>\n\t\t\t\t\t\t\t\t\t</MessageListErrorBoundary>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<RoomComposer>\n\t\t\t\t\t\t\t\t<ComposerContainer\n\t\t\t\t\t\t\t\t\tsubscription={subscription}\n\t\t\t\t\t\t\t\t\tonResize={handleComposerResize}\n\t\t\t\t\t\t\t\t\tonNavigateToPreviousMessage={handleNavigateToPreviousMessage}\n\t\t\t\t\t\t\t\t\tonNavigateToNextMessage={handleNavigateToNextMessage}\n\t\t\t\t\t\t\t\t\tonUploadFiles={handleUploadFiles}\n\t\t\t\t\t\t\t\t\t// TODO: send previewUrls param\n\t\t\t\t\t\t\t\t\t// previewUrls={}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</RoomComposer>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</Box>\n\t\t</>\n\t);\n};\n\nexport default memo(RoomBody);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"502b98f9987409e2a4c31eb8c9b16ba61abd83a9"}
