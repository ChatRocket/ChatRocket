{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/omnichannel/priorities/PrioritiesPage.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/omnichannel/priorities/PrioritiesPage.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/omnichannel/priorities/PrioritiesPage.tsx","inputSourceMap":{"version":3,"file":"client/omnichannel/priorities/PrioritiesPage.tsx","sourceRoot":"","sources":["client/omnichannel/priorities/PrioritiesPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint, useRoute, useSetModal, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport { useQueryClient } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { Page, PageHeader, PageContent } from '../../components/Page';\nimport { useOmnichannelPriorities } from '../hooks/useOmnichannelPriorities';\nimport { PrioritiesResetModal } from './PrioritiesResetModal';\nimport { PrioritiesTable } from './PrioritiesTable';\nimport type { PriorityFormData } from './PriorityEditForm';\nimport PriorityList from './PriorityList';\n\ntype PrioritiesPageProps = {\n\tpriorityId: string;\n\tcontext: 'edit' | undefined;\n};\n\nexport const PrioritiesPage = ({ priorityId, context }: PrioritiesPageProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst queryClient = useQueryClient();\n\tconst prioritiesRoute = useRoute('omnichannel-priorities');\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\n\tconst [isResetting, setResetting] = useState(false);\n\n\tconst savePriority = useEndpoint('PUT', `/v1/livechat/priorities/:priorityId`, { priorityId });\n\tconst resetPriorities = useEndpoint('POST', '/v1/livechat/priorities.reset');\n\n\tconst { data: priorities, isLoading } = useOmnichannelPriorities();\n\n\tconst isPrioritiesDirty = useMemo(() => !!priorities.length && priorities.some((p) => p.dirty), [priorities]);\n\n\tconst handleReset = (): void => {\n\t\tconst onReset = async (): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tsetResetting(true);\n\t\t\t\tsetModal(null);\n\n\t\t\t\tawait resetPriorities();\n\t\t\t\tawait queryClient.invalidateQueries(['/v1/livechat/priorities'], { exact: true });\n\n\t\t\t\tprioritiesRoute.push({});\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Priorities_restored') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tsetResetting(false);\n\t\t\t}\n\t\t};\n\n\t\tsetModal(<PrioritiesResetModal onReset={onReset} onCancel={(): void => setModal(null)} />);\n\t};\n\n\tconst onRowClick = useMutableCallback((id: string): void => {\n\t\tprioritiesRoute.push({ context: 'edit', id });\n\t});\n\n\tconst onContextualbarClose = (): void => {\n\t\tprioritiesRoute.push({});\n\t};\n\n\tconst onSavePriority = async ({ reset, ...payload }: PriorityFormData): Promise<void> => {\n\t\tawait savePriority(reset ? { reset } : payload);\n\t\tawait queryClient.invalidateQueries(['/v1/livechat/priorities']);\n\n\t\tdispatchToastMessage({ type: 'success', message: t('Priority_saved') });\n\t\tawait queryClient.invalidateQueries(['/v1/livechat/priorities'], { exact: true });\n\t\tprioritiesRoute.push({});\n\t};\n\n\treturn (\n\t\t<Page flexDirection='row'>\n\t\t\t<Page>\n\t\t\t\t<PageHeader title={t('Priorities')}>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button onClick={handleReset} title={t('Reset')} disabled={!isPrioritiesDirty} loading={isResetting}>\n\t\t\t\t\t\t\t{t('Reset')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</PageHeader>\n\t\t\t\t<PageContent>\n\t\t\t\t\t<PrioritiesTable priorities={priorities} isLoading={isLoading} onRowClick={onRowClick} />\n\t\t\t\t</PageContent>\n\t\t\t</Page>\n\t\t\t{context === 'edit' && (\n\t\t\t\t<PriorityList priorityId={priorityId} context={context} onSave={onSavePriority} onClose={onContextualbarClose} />\n\t\t\t)}\n\t\t</Page>\n\t);\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"production","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/omnichannel/priorities/PrioritiesPage.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/omnichannel/priorities/PrioritiesPage.tsx","inputSourceMap":{"version":3,"file":"client/omnichannel/priorities/PrioritiesPage.tsx","sourceRoot":"","sources":["client/omnichannel/priorities/PrioritiesPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint, useRoute, useSetModal, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport { useQueryClient } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { Page, PageHeader, PageContent } from '../../components/Page';\nimport { useOmnichannelPriorities } from '../hooks/useOmnichannelPriorities';\nimport { PrioritiesResetModal } from './PrioritiesResetModal';\nimport { PrioritiesTable } from './PrioritiesTable';\nimport type { PriorityFormData } from './PriorityEditForm';\nimport PriorityList from './PriorityList';\n\ntype PrioritiesPageProps = {\n\tpriorityId: string;\n\tcontext: 'edit' | undefined;\n};\n\nexport const PrioritiesPage = ({ priorityId, context }: PrioritiesPageProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst queryClient = useQueryClient();\n\tconst prioritiesRoute = useRoute('omnichannel-priorities');\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\n\tconst [isResetting, setResetting] = useState(false);\n\n\tconst savePriority = useEndpoint('PUT', `/v1/livechat/priorities/:priorityId`, { priorityId });\n\tconst resetPriorities = useEndpoint('POST', '/v1/livechat/priorities.reset');\n\n\tconst { data: priorities, isLoading } = useOmnichannelPriorities();\n\n\tconst isPrioritiesDirty = useMemo(() => !!priorities.length && priorities.some((p) => p.dirty), [priorities]);\n\n\tconst handleReset = (): void => {\n\t\tconst onReset = async (): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tsetResetting(true);\n\t\t\t\tsetModal(null);\n\n\t\t\t\tawait resetPriorities();\n\t\t\t\tawait queryClient.invalidateQueries(['/v1/livechat/priorities'], { exact: true });\n\n\t\t\t\tprioritiesRoute.push({});\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Priorities_restored') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tsetResetting(false);\n\t\t\t}\n\t\t};\n\n\t\tsetModal(<PrioritiesResetModal onReset={onReset} onCancel={(): void => setModal(null)} />);\n\t};\n\n\tconst onRowClick = useMutableCallback((id: string): void => {\n\t\tprioritiesRoute.push({ context: 'edit', id });\n\t});\n\n\tconst onContextualbarClose = (): void => {\n\t\tprioritiesRoute.push({});\n\t};\n\n\tconst onSavePriority = async ({ reset, ...payload }: PriorityFormData): Promise<void> => {\n\t\tawait savePriority(reset ? { reset } : payload);\n\t\tawait queryClient.invalidateQueries(['/v1/livechat/priorities']);\n\n\t\tdispatchToastMessage({ type: 'success', message: t('Priority_saved') });\n\t\tawait queryClient.invalidateQueries(['/v1/livechat/priorities'], { exact: true });\n\t\tprioritiesRoute.push({});\n\t};\n\n\treturn (\n\t\t<Page flexDirection='row'>\n\t\t\t<Page>\n\t\t\t\t<PageHeader title={t('Priorities')}>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button onClick={handleReset} title={t('Reset')} disabled={!isPrioritiesDirty} loading={isResetting}>\n\t\t\t\t\t\t\t{t('Reset')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</PageHeader>\n\t\t\t\t<PageContent>\n\t\t\t\t\t<PrioritiesTable priorities={priorities} isLoading={isLoading} onRowClick={onRowClick} />\n\t\t\t\t</PageContent>\n\t\t\t</Page>\n\t\t\t{context === 'edit' && (\n\t\t\t\t<PriorityList priorityId={priorityId} context={context} onSave={onSavePriority} onClose={onContextualbarClose} />\n\t\t\t)}\n\t\t</Page>\n\t);\n};\n"]}}},"code":"var _excluded = [\"reset\"];\nvar _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 0);\nvar _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 1);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 2);\nmodule.export({\n  PrioritiesPage: function () {\n    return PrioritiesPage;\n  }\n});\nvar Button, ButtonGroup;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Button: function (v) {\n    Button = v;\n  },\n  ButtonGroup: function (v) {\n    ButtonGroup = v;\n  }\n}, 0);\nvar useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 1);\nvar useEndpoint, useRoute, useSetModal, useToastMessageDispatch;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  },\n  useRoute: function (v) {\n    useRoute = v;\n  },\n  useSetModal: function (v) {\n    useSetModal = v;\n  },\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  }\n}, 2);\nvar useQueryClient;\nmodule.link(\"@tanstack/react-query\", {\n  useQueryClient: function (v) {\n    useQueryClient = v;\n  }\n}, 3);\nvar React, useMemo, useState;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 4);\nvar useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 5);\nvar Page, PageHeader, PageContent;\nmodule.link(\"../../components/Page\", {\n  Page: function (v) {\n    Page = v;\n  },\n  PageHeader: function (v) {\n    PageHeader = v;\n  },\n  PageContent: function (v) {\n    PageContent = v;\n  }\n}, 6);\nvar useOmnichannelPriorities;\nmodule.link(\"../hooks/useOmnichannelPriorities\", {\n  useOmnichannelPriorities: function (v) {\n    useOmnichannelPriorities = v;\n  }\n}, 7);\nvar PrioritiesResetModal;\nmodule.link(\"./PrioritiesResetModal\", {\n  PrioritiesResetModal: function (v) {\n    PrioritiesResetModal = v;\n  }\n}, 8);\nvar PrioritiesTable;\nmodule.link(\"./PrioritiesTable\", {\n  PrioritiesTable: function (v) {\n    PrioritiesTable = v;\n  }\n}, 9);\nvar PriorityList;\nmodule.link(\"./PriorityList\", {\n  \"default\": function (v) {\n    PriorityList = v;\n  }\n}, 10);\nvar PrioritiesPage = function (_ref) {\n  var priorityId = _ref.priorityId,\n    context = _ref.context;\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var queryClient = useQueryClient();\n  var prioritiesRoute = useRoute('omnichannel-priorities');\n  var dispatchToastMessage = useToastMessageDispatch();\n  var setModal = useSetModal();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isResetting = _useState2[0],\n    setResetting = _useState2[1];\n  var savePriority = useEndpoint('PUT', \"/v1/livechat/priorities/:priorityId\", {\n    priorityId: priorityId\n  });\n  var resetPriorities = useEndpoint('POST', '/v1/livechat/priorities.reset');\n  var _useOmnichannelPriori = useOmnichannelPriorities(),\n    priorities = _useOmnichannelPriori.data,\n    isLoading = _useOmnichannelPriori.isLoading;\n  var isPrioritiesDirty = useMemo(function () {\n    return !!priorities.length && priorities.some(function (p) {\n      return p.dirty;\n    });\n  }, [priorities]);\n  var handleReset = function () {\n    var onReset = function () {\n      function _callee() {\n        return _regeneratorRuntime.async(function () {\n          function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                setResetting(true);\n                setModal(null);\n                _context.next = 5;\n                return _regeneratorRuntime.awrap(resetPriorities());\n              case 5:\n                _context.next = 7;\n                return _regeneratorRuntime.awrap(queryClient.invalidateQueries(['/v1/livechat/priorities'], {\n                  exact: true\n                }));\n              case 7:\n                prioritiesRoute.push({});\n                dispatchToastMessage({\n                  type: 'success',\n                  message: t('Priorities_restored')\n                });\n                _context.next = 14;\n                break;\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](0);\n                dispatchToastMessage({\n                  type: 'error',\n                  message: _context.t0\n                });\n              case 14:\n                _context.prev = 14;\n                setResetting(false);\n                return _context.finish(14);\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n          return _callee$;\n        }(), null, null, [[0, 11, 14, 17]], Promise);\n      }\n      return _callee;\n    }();\n    setModal( /*#__PURE__*/React.createElement(PrioritiesResetModal, {\n      onReset: onReset,\n      onCancel: function () {\n        return setModal(null);\n      }\n    }));\n  };\n  var onRowClick = useMutableCallback(function (id) {\n    prioritiesRoute.push({\n      context: 'edit',\n      id: id\n    });\n  });\n  var onContextualbarClose = function () {\n    prioritiesRoute.push({});\n  };\n  var onSavePriority = function () {\n    function _callee2(_ref2) {\n      var reset, payload;\n      return _regeneratorRuntime.async(function () {\n        function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              reset = _ref2.reset, payload = _objectWithoutProperties(_ref2, _excluded);\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(savePriority(reset ? {\n                reset: reset\n              } : payload));\n            case 3:\n              _context2.next = 5;\n              return _regeneratorRuntime.awrap(queryClient.invalidateQueries(['/v1/livechat/priorities']));\n            case 5:\n              dispatchToastMessage({\n                type: 'success',\n                message: t('Priority_saved')\n              });\n              _context2.next = 8;\n              return _regeneratorRuntime.awrap(queryClient.invalidateQueries(['/v1/livechat/priorities'], {\n                exact: true\n              }));\n            case 8:\n              prioritiesRoute.push({});\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n        return _callee2$;\n      }(), null, null, null, Promise);\n    }\n    return _callee2;\n  }();\n  return /*#__PURE__*/React.createElement(Page, {\n    flexDirection: \"row\"\n  }, /*#__PURE__*/React.createElement(Page, null, /*#__PURE__*/React.createElement(PageHeader, {\n    title: t('Priorities')\n  }, /*#__PURE__*/React.createElement(ButtonGroup, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleReset,\n    title: t('Reset'),\n    disabled: !isPrioritiesDirty,\n    loading: isResetting\n  }, t('Reset')))), /*#__PURE__*/React.createElement(PageContent, null, /*#__PURE__*/React.createElement(PrioritiesTable, {\n    priorities: priorities,\n    isLoading: isLoading,\n    onRowClick: onRowClick\n  }))), context === 'edit' && /*#__PURE__*/React.createElement(PriorityList, {\n    priorityId: priorityId,\n    context: context,\n    onSave: onSavePriority,\n    onClose: onContextualbarClose\n  }));\n};","map":{"version":3,"names":["_objectWithoutProperties","module","link","default","v","_regeneratorRuntime","_slicedToArray","export","PrioritiesPage","Button","ButtonGroup","useMutableCallback","useEndpoint","useRoute","useSetModal","useToastMessageDispatch","useQueryClient","React","useMemo","useState","useTranslation","Page","PageHeader","PageContent","useOmnichannelPriorities","PrioritiesResetModal","PrioritiesTable","PriorityList","_ref","priorityId","context","_useTranslation","t","queryClient","prioritiesRoute","dispatchToastMessage","setModal","_useState","_useState2","isResetting","setResetting","savePriority","resetPriorities","_useOmnichannelPriori","priorities","data","isLoading","isPrioritiesDirty","length","some","p","dirty","handleReset","onReset","_callee","async","_callee$","_context","prev","next","awrap","invalidateQueries","exact","push","type","message","t0","finish","stop","Promise","createElement","onCancel","onRowClick","id","onContextualbarClose","onSavePriority","_callee2","_ref2","reset","payload","_callee2$","_context2","_excluded","flexDirection","title","onClick","disabled","loading","onSave","onClose"],"sources":["client/omnichannel/priorities/PrioritiesPage.tsx"],"sourcesContent":["import { Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useEndpoint, useRoute, useSetModal, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport { useQueryClient } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { Page, PageHeader, PageContent } from '../../components/Page';\nimport { useOmnichannelPriorities } from '../hooks/useOmnichannelPriorities';\nimport { PrioritiesResetModal } from './PrioritiesResetModal';\nimport { PrioritiesTable } from './PrioritiesTable';\nimport type { PriorityFormData } from './PriorityEditForm';\nimport PriorityList from './PriorityList';\n\ntype PrioritiesPageProps = {\n\tpriorityId: string;\n\tcontext: 'edit' | undefined;\n};\n\nexport const PrioritiesPage = ({ priorityId, context }: PrioritiesPageProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst queryClient = useQueryClient();\n\tconst prioritiesRoute = useRoute('omnichannel-priorities');\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\n\tconst [isResetting, setResetting] = useState(false);\n\n\tconst savePriority = useEndpoint('PUT', `/v1/livechat/priorities/:priorityId`, { priorityId });\n\tconst resetPriorities = useEndpoint('POST', '/v1/livechat/priorities.reset');\n\n\tconst { data: priorities, isLoading } = useOmnichannelPriorities();\n\n\tconst isPrioritiesDirty = useMemo(() => !!priorities.length && priorities.some((p) => p.dirty), [priorities]);\n\n\tconst handleReset = (): void => {\n\t\tconst onReset = async (): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tsetResetting(true);\n\t\t\t\tsetModal(null);\n\n\t\t\t\tawait resetPriorities();\n\t\t\t\tawait queryClient.invalidateQueries(['/v1/livechat/priorities'], { exact: true });\n\n\t\t\t\tprioritiesRoute.push({});\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Priorities_restored') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tsetResetting(false);\n\t\t\t}\n\t\t};\n\n\t\tsetModal(<PrioritiesResetModal onReset={onReset} onCancel={(): void => setModal(null)} />);\n\t};\n\n\tconst onRowClick = useMutableCallback((id: string): void => {\n\t\tprioritiesRoute.push({ context: 'edit', id });\n\t});\n\n\tconst onContextualbarClose = (): void => {\n\t\tprioritiesRoute.push({});\n\t};\n\n\tconst onSavePriority = async ({ reset, ...payload }: PriorityFormData): Promise<void> => {\n\t\tawait savePriority(reset ? { reset } : payload);\n\t\tawait queryClient.invalidateQueries(['/v1/livechat/priorities']);\n\n\t\tdispatchToastMessage({ type: 'success', message: t('Priority_saved') });\n\t\tawait queryClient.invalidateQueries(['/v1/livechat/priorities'], { exact: true });\n\t\tprioritiesRoute.push({});\n\t};\n\n\treturn (\n\t\t<Page flexDirection='row'>\n\t\t\t<Page>\n\t\t\t\t<PageHeader title={t('Priorities')}>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button onClick={handleReset} title={t('Reset')} disabled={!isPrioritiesDirty} loading={isResetting}>\n\t\t\t\t\t\t\t{t('Reset')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</PageHeader>\n\t\t\t\t<PageContent>\n\t\t\t\t\t<PrioritiesTable priorities={priorities} isLoading={isLoading} onRowClick={onRowClick} />\n\t\t\t\t</PageContent>\n\t\t\t</Page>\n\t\t\t{context === 'edit' && (\n\t\t\t\t<PriorityList priorityId={priorityId} context={context} onSave={onSavePriority} onClose={onContextualbarClose} />\n\t\t\t)}\n\t\t</Page>\n\t);\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"320b6e6c792492c56fe02e9ddadaa5accd333e24"}
