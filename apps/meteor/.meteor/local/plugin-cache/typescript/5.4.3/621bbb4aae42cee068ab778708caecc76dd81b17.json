{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/server/database/watchCollections.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"server/database/watchCollections.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/server/database/watchCollections.ts","inputSourceMap":{"version":3,"file":"server/database/watchCollections.ts","sourceRoot":"","sources":["server/database/watchCollections.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,kBAAkB,EAAE,MAAM,4BAA4B,CAAC;AAChE,OAAO,EACN,QAAQ,EACR,KAAK,EACL,aAAa,EACb,QAAQ,EACR,eAAe,EACf,wBAAwB,EACxB,KAAK,EACL,KAAK,EACL,yBAAyB,EACzB,cAAc,EACd,kBAAkB,EAClB,YAAY,EACZ,UAAU,EACV,SAAS,EACT,WAAW,EACX,gBAAgB,GAChB,MAAM,qBAAqB,CAAC;AAE7B,MAAM,EAAE,6BAA6B,GAAG,EAAE,EAAE,0BAA0B,GAAG,EAAE,EAAE,GAAG,OAAO,CAAC,GAAG,CAAC;AAE5F,MAAM,kBAAkB,GAAG,6BAA6B,CAAC,KAAK,CAAC,GAAG,CAAC;KACjE,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;KACtC,MAAM,CAAC,OAAO,CAAC,CAAC;AAElB,MAAM,eAAe,GAAG,0BAA0B,CAAC,KAAK,CAAC,GAAG,CAAC;KAC3D,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;KACtC,MAAM,CAAC,OAAO,CAAC,CAAC;AAElB,MAAM,UAAU,mBAAmB;IAClC,MAAM,WAAW,GAAG,CAAC,cAAc,CAAC,iBAAiB,EAAE,CAAC,CAAC;IAEzD,sEAAsE;IACtE,IAAI,CAAC,kBAAkB,EAAE,CAAC;QACzB,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAC5C,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAC/C,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,iBAAiB,EAAE,CAAC,CAAC;QACtD,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAC5C,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAC5C,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAChD,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,iBAAiB,EAAE,CAAC,CAAC;QACnD,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAClD,WAAW,CAAC,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,EAAE,CAAC,CAAC;QACvD,WAAW,CAAC,IAAI,CAAC,yBAAyB,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAChE,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,iBAAiB,EAAE,CAAC,CAAC;QACjD,WAAW,CAAC,IAAI,CAAC,kBAAkB,CAAC,iBAAiB,EAAE,CAAC,CAAC;QACzD,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,iBAAiB,EAAE,CAAC,CAAC;QACpD,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAC/C,WAAW,CAAC,IAAI,CAAC,wBAAwB,CAAC,iBAAiB,EAAE,CAAC,CAAC;IAChE,CAAC;IAED,IAAI,eAAe,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAChC,OAAO,WAAW,CAAC,MAAM,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,eAAe,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;IACjF,CAAC;IAED,IAAI,kBAAkB,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QACnC,OAAO,WAAW,CAAC,MAAM,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC,kBAAkB,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;IACrF,CAAC;IAED,OAAO,WAAW,CAAC;AACpB,CAAC","sourcesContent":["import { dbWatchersDisabled } from '@rocket.chat/core-services';\nimport {\n\tMessages,\n\tUsers,\n\tSubscriptions,\n\tSettings,\n\tLivechatInquiry,\n\tLivechatDepartmentAgents,\n\tRooms,\n\tRoles,\n\tLoginServiceConfiguration,\n\tInstanceStatus,\n\tIntegrationHistory,\n\tIntegrations,\n\tEmailInbox,\n\tPbxEvents,\n\tPermissions,\n\tLivechatPriority,\n} from '@rocket.chat/models';\n\nconst { DBWATCHER_EXCLUDE_COLLECTIONS = '', DBWATCHER_ONLY_COLLECTIONS = '' } = process.env;\n\nconst excludeCollections = DBWATCHER_EXCLUDE_COLLECTIONS.split(',')\n\t.map((collection) => collection.trim())\n\t.filter(Boolean);\n\nconst onlyCollections = DBWATCHER_ONLY_COLLECTIONS.split(',')\n\t.map((collection) => collection.trim())\n\t.filter(Boolean);\n\nexport function getWatchCollections(): string[] {\n\tconst collections = [InstanceStatus.getCollectionName()];\n\n\t// add back to the list of collections in case db watchers are enabled\n\tif (!dbWatchersDisabled) {\n\t\tcollections.push(Users.getCollectionName());\n\t\tcollections.push(Messages.getCollectionName());\n\t\tcollections.push(LivechatInquiry.getCollectionName());\n\t\tcollections.push(Roles.getCollectionName());\n\t\tcollections.push(Rooms.getCollectionName());\n\t\tcollections.push(PbxEvents.getCollectionName());\n\t\tcollections.push(Integrations.getCollectionName());\n\t\tcollections.push(Permissions.getCollectionName());\n\t\tcollections.push(LivechatPriority.getCollectionName());\n\t\tcollections.push(LoginServiceConfiguration.getCollectionName());\n\t\tcollections.push(EmailInbox.getCollectionName());\n\t\tcollections.push(IntegrationHistory.getCollectionName());\n\t\tcollections.push(Subscriptions.getCollectionName());\n\t\tcollections.push(Settings.getCollectionName());\n\t\tcollections.push(LivechatDepartmentAgents.getCollectionName());\n\t}\n\n\tif (onlyCollections.length > 0) {\n\t\treturn collections.filter((collection) => onlyCollections.includes(collection));\n\t}\n\n\tif (excludeCollections.length > 0) {\n\t\treturn collections.filter((collection) => !excludeCollections.includes(collection));\n\t}\n\n\treturn collections;\n}\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true,"topLevelAwait":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/server/database/watchCollections.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"server/database/watchCollections.ts","inputSourceMap":{"version":3,"file":"server/database/watchCollections.ts","sourceRoot":"","sources":["server/database/watchCollections.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,kBAAkB,EAAE,MAAM,4BAA4B,CAAC;AAChE,OAAO,EACN,QAAQ,EACR,KAAK,EACL,aAAa,EACb,QAAQ,EACR,eAAe,EACf,wBAAwB,EACxB,KAAK,EACL,KAAK,EACL,yBAAyB,EACzB,cAAc,EACd,kBAAkB,EAClB,YAAY,EACZ,UAAU,EACV,SAAS,EACT,WAAW,EACX,gBAAgB,GAChB,MAAM,qBAAqB,CAAC;AAE7B,MAAM,EAAE,6BAA6B,GAAG,EAAE,EAAE,0BAA0B,GAAG,EAAE,EAAE,GAAG,OAAO,CAAC,GAAG,CAAC;AAE5F,MAAM,kBAAkB,GAAG,6BAA6B,CAAC,KAAK,CAAC,GAAG,CAAC;KACjE,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;KACtC,MAAM,CAAC,OAAO,CAAC,CAAC;AAElB,MAAM,eAAe,GAAG,0BAA0B,CAAC,KAAK,CAAC,GAAG,CAAC;KAC3D,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;KACtC,MAAM,CAAC,OAAO,CAAC,CAAC;AAElB,MAAM,UAAU,mBAAmB;IAClC,MAAM,WAAW,GAAG,CAAC,cAAc,CAAC,iBAAiB,EAAE,CAAC,CAAC;IAEzD,sEAAsE;IACtE,IAAI,CAAC,kBAAkB,EAAE,CAAC;QACzB,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAC5C,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAC/C,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,iBAAiB,EAAE,CAAC,CAAC;QACtD,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAC5C,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAC5C,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAChD,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,iBAAiB,EAAE,CAAC,CAAC;QACnD,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAClD,WAAW,CAAC,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,EAAE,CAAC,CAAC;QACvD,WAAW,CAAC,IAAI,CAAC,yBAAyB,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAChE,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,iBAAiB,EAAE,CAAC,CAAC;QACjD,WAAW,CAAC,IAAI,CAAC,kBAAkB,CAAC,iBAAiB,EAAE,CAAC,CAAC;QACzD,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,iBAAiB,EAAE,CAAC,CAAC;QACpD,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAC/C,WAAW,CAAC,IAAI,CAAC,wBAAwB,CAAC,iBAAiB,EAAE,CAAC,CAAC;IAChE,CAAC;IAED,IAAI,eAAe,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAChC,OAAO,WAAW,CAAC,MAAM,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,eAAe,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;IACjF,CAAC;IAED,IAAI,kBAAkB,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QACnC,OAAO,WAAW,CAAC,MAAM,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC,kBAAkB,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;IACrF,CAAC;IAED,OAAO,WAAW,CAAC;AACpB,CAAC","sourcesContent":["import { dbWatchersDisabled } from '@rocket.chat/core-services';\nimport {\n\tMessages,\n\tUsers,\n\tSubscriptions,\n\tSettings,\n\tLivechatInquiry,\n\tLivechatDepartmentAgents,\n\tRooms,\n\tRoles,\n\tLoginServiceConfiguration,\n\tInstanceStatus,\n\tIntegrationHistory,\n\tIntegrations,\n\tEmailInbox,\n\tPbxEvents,\n\tPermissions,\n\tLivechatPriority,\n} from '@rocket.chat/models';\n\nconst { DBWATCHER_EXCLUDE_COLLECTIONS = '', DBWATCHER_ONLY_COLLECTIONS = '' } = process.env;\n\nconst excludeCollections = DBWATCHER_EXCLUDE_COLLECTIONS.split(',')\n\t.map((collection) => collection.trim())\n\t.filter(Boolean);\n\nconst onlyCollections = DBWATCHER_ONLY_COLLECTIONS.split(',')\n\t.map((collection) => collection.trim())\n\t.filter(Boolean);\n\nexport function getWatchCollections(): string[] {\n\tconst collections = [InstanceStatus.getCollectionName()];\n\n\t// add back to the list of collections in case db watchers are enabled\n\tif (!dbWatchersDisabled) {\n\t\tcollections.push(Users.getCollectionName());\n\t\tcollections.push(Messages.getCollectionName());\n\t\tcollections.push(LivechatInquiry.getCollectionName());\n\t\tcollections.push(Roles.getCollectionName());\n\t\tcollections.push(Rooms.getCollectionName());\n\t\tcollections.push(PbxEvents.getCollectionName());\n\t\tcollections.push(Integrations.getCollectionName());\n\t\tcollections.push(Permissions.getCollectionName());\n\t\tcollections.push(LivechatPriority.getCollectionName());\n\t\tcollections.push(LoginServiceConfiguration.getCollectionName());\n\t\tcollections.push(EmailInbox.getCollectionName());\n\t\tcollections.push(IntegrationHistory.getCollectionName());\n\t\tcollections.push(Subscriptions.getCollectionName());\n\t\tcollections.push(Settings.getCollectionName());\n\t\tcollections.push(LivechatDepartmentAgents.getCollectionName());\n\t}\n\n\tif (onlyCollections.length > 0) {\n\t\treturn collections.filter((collection) => onlyCollections.includes(collection));\n\t}\n\n\tif (excludeCollections.length > 0) {\n\t\treturn collections.filter((collection) => !excludeCollections.includes(collection));\n\t}\n\n\treturn collections;\n}\n"]}}},"code":"!module.wrapAsync(async function (module, __reifyWaitForDeps__, __reify_async_result__) {\n  \"use strict\";\n  try {\n    module.export({\n      getWatchCollections: () => getWatchCollections\n    });\n    let dbWatchersDisabled;\n    module.link(\"@rocket.chat/core-services\", {\n      dbWatchersDisabled(v) {\n        dbWatchersDisabled = v;\n      }\n    }, 0);\n    let Messages, Users, Subscriptions, Settings, LivechatInquiry, LivechatDepartmentAgents, Rooms, Roles, LoginServiceConfiguration, InstanceStatus, IntegrationHistory, Integrations, EmailInbox, PbxEvents, Permissions, LivechatPriority;\n    module.link(\"@rocket.chat/models\", {\n      Messages(v) {\n        Messages = v;\n      },\n      Users(v) {\n        Users = v;\n      },\n      Subscriptions(v) {\n        Subscriptions = v;\n      },\n      Settings(v) {\n        Settings = v;\n      },\n      LivechatInquiry(v) {\n        LivechatInquiry = v;\n      },\n      LivechatDepartmentAgents(v) {\n        LivechatDepartmentAgents = v;\n      },\n      Rooms(v) {\n        Rooms = v;\n      },\n      Roles(v) {\n        Roles = v;\n      },\n      LoginServiceConfiguration(v) {\n        LoginServiceConfiguration = v;\n      },\n      InstanceStatus(v) {\n        InstanceStatus = v;\n      },\n      IntegrationHistory(v) {\n        IntegrationHistory = v;\n      },\n      Integrations(v) {\n        Integrations = v;\n      },\n      EmailInbox(v) {\n        EmailInbox = v;\n      },\n      PbxEvents(v) {\n        PbxEvents = v;\n      },\n      Permissions(v) {\n        Permissions = v;\n      },\n      LivechatPriority(v) {\n        LivechatPriority = v;\n      }\n    }, 1);\n    if (__reifyWaitForDeps__()) (await __reifyWaitForDeps__())();\n    const {\n      DBWATCHER_EXCLUDE_COLLECTIONS = '',\n      DBWATCHER_ONLY_COLLECTIONS = ''\n    } = process.env;\n    const excludeCollections = DBWATCHER_EXCLUDE_COLLECTIONS.split(',').map(collection => collection.trim()).filter(Boolean);\n    const onlyCollections = DBWATCHER_ONLY_COLLECTIONS.split(',').map(collection => collection.trim()).filter(Boolean);\n    function getWatchCollections() {\n      const collections = [InstanceStatus.getCollectionName()];\n      // add back to the list of collections in case db watchers are enabled\n      if (!dbWatchersDisabled) {\n        collections.push(Users.getCollectionName());\n        collections.push(Messages.getCollectionName());\n        collections.push(LivechatInquiry.getCollectionName());\n        collections.push(Roles.getCollectionName());\n        collections.push(Rooms.getCollectionName());\n        collections.push(PbxEvents.getCollectionName());\n        collections.push(Integrations.getCollectionName());\n        collections.push(Permissions.getCollectionName());\n        collections.push(LivechatPriority.getCollectionName());\n        collections.push(LoginServiceConfiguration.getCollectionName());\n        collections.push(EmailInbox.getCollectionName());\n        collections.push(IntegrationHistory.getCollectionName());\n        collections.push(Subscriptions.getCollectionName());\n        collections.push(Settings.getCollectionName());\n        collections.push(LivechatDepartmentAgents.getCollectionName());\n      }\n      if (onlyCollections.length > 0) {\n        return collections.filter(collection => onlyCollections.includes(collection));\n      }\n      if (excludeCollections.length > 0) {\n        return collections.filter(collection => !excludeCollections.includes(collection));\n      }\n      return collections;\n    }\n    __reify_async_result__();\n  } catch (_reifyError) {\n    return __reify_async_result__(_reifyError);\n  }\n  __reify_async_result__()\n}, {\n  self: this,\n  async: false\n});","map":{"version":3,"names":["module","export","getWatchCollections","dbWatchersDisabled","link","v","Messages","Users","Subscriptions","Settings","LivechatInquiry","LivechatDepartmentAgents","Rooms","Roles","LoginServiceConfiguration","InstanceStatus","IntegrationHistory","Integrations","EmailInbox","PbxEvents","Permissions","LivechatPriority","__reifyWaitForDeps__","DBWATCHER_EXCLUDE_COLLECTIONS","DBWATCHER_ONLY_COLLECTIONS","process","env","excludeCollections","split","map","collection","trim","filter","Boolean","onlyCollections","collections","getCollectionName","push","length","includes","__reify_async_result__","_reifyError","self","async"],"sources":["server/database/watchCollections.ts"],"sourcesContent":["import { dbWatchersDisabled } from '@rocket.chat/core-services';\nimport {\n\tMessages,\n\tUsers,\n\tSubscriptions,\n\tSettings,\n\tLivechatInquiry,\n\tLivechatDepartmentAgents,\n\tRooms,\n\tRoles,\n\tLoginServiceConfiguration,\n\tInstanceStatus,\n\tIntegrationHistory,\n\tIntegrations,\n\tEmailInbox,\n\tPbxEvents,\n\tPermissions,\n\tLivechatPriority,\n} from '@rocket.chat/models';\n\nconst { DBWATCHER_EXCLUDE_COLLECTIONS = '', DBWATCHER_ONLY_COLLECTIONS = '' } = process.env;\n\nconst excludeCollections = DBWATCHER_EXCLUDE_COLLECTIONS.split(',')\n\t.map((collection) => collection.trim())\n\t.filter(Boolean);\n\nconst onlyCollections = DBWATCHER_ONLY_COLLECTIONS.split(',')\n\t.map((collection) => collection.trim())\n\t.filter(Boolean);\n\nexport function getWatchCollections(): string[] {\n\tconst collections = [InstanceStatus.getCollectionName()];\n\n\t// add back to the list of collections in case db watchers are enabled\n\tif (!dbWatchersDisabled) {\n\t\tcollections.push(Users.getCollectionName());\n\t\tcollections.push(Messages.getCollectionName());\n\t\tcollections.push(LivechatInquiry.getCollectionName());\n\t\tcollections.push(Roles.getCollectionName());\n\t\tcollections.push(Rooms.getCollectionName());\n\t\tcollections.push(PbxEvents.getCollectionName());\n\t\tcollections.push(Integrations.getCollectionName());\n\t\tcollections.push(Permissions.getCollectionName());\n\t\tcollections.push(LivechatPriority.getCollectionName());\n\t\tcollections.push(LoginServiceConfiguration.getCollectionName());\n\t\tcollections.push(EmailInbox.getCollectionName());\n\t\tcollections.push(IntegrationHistory.getCollectionName());\n\t\tcollections.push(Subscriptions.getCollectionName());\n\t\tcollections.push(Settings.getCollectionName());\n\t\tcollections.push(LivechatDepartmentAgents.getCollectionName());\n\t}\n\n\tif (onlyCollections.length > 0) {\n\t\treturn collections.filter((collection) => onlyCollections.includes(collection));\n\t}\n\n\tif (excludeCollections.length > 0) {\n\t\treturn collections.filter((collection) => !excludeCollections.includes(collection));\n\t}\n\n\treturn collections;\n}\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"621bbb4aae42cee068ab778708caecc76dd81b17"}
