{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/metrics/server/lib/metrics.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"app/metrics/server/lib/metrics.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/metrics/server/lib/metrics.ts","inputSourceMap":{"version":3,"file":"app/metrics/server/lib/metrics.ts","sourceRoot":"","sources":["app/metrics/server/lib/metrics.ts"],"names":[],"mappings":"AAAA,OAAO,MAAM,MAAM,aAAa,CAAC;AAEjC,MAAM,WAAW,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AAEzD,MAAM,CAAC,MAAM,OAAO,GAAG;IACtB,YAAY,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC;QAChC,IAAI,EAAE,yBAAyB;QAC/B,UAAU,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,CAAC;QAC9C,IAAI,EAAE,6CAA6C;KACnD,CAAC;IACF,eAAe,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC;QACnC,IAAI,EAAE,6BAA6B;QACnC,UAAU,EAAE,CAAC,mBAAmB,CAAC;QACjC,IAAI,EAAE,mDAAmD;KACzD,CAAC;IACF,WAAW,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC7B,IAAI,EAAE,yBAAyB;QAC/B,IAAI,EAAE,uCAAuC;KAC7C,CAAC;IACF,IAAI,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QACtB,IAAI,EAAE,iBAAiB;QACvB,UAAU,EAAE,CAAC,SAAS,EAAE,WAAW,EAAE,UAAU,CAAC;QAChD,IAAI,EAAE,kBAAkB;KACxB,CAAC;IACF,aAAa,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC;QACjC,IAAI,EAAE,2BAA2B;QACjC,IAAI,EAAE,0CAA0C;QAChD,UAAU,EAAE,CAAC,QAAQ,EAAE,gBAAgB,EAAE,UAAU,CAAC;QACpD,WAAW;KACX,CAAC;IACF,mBAAmB,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC;QACvC,IAAI,EAAE,sBAAsB;QAC5B,IAAI,EAAE,gDAAgD;QACtD,UAAU,EAAE,CAAC,MAAM,EAAE,UAAU,CAAC;QAChC,WAAW;KACX,CAAC;IACF,eAAe,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC;QACnC,IAAI,EAAE,kBAAkB;QACxB,IAAI,EAAE,4CAA4C;QAClD,UAAU,EAAE,CAAC,MAAM,EAAE,kBAAkB,CAAC;QACxC,WAAW;KACX,CAAC;IACF,iBAAiB,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC;QACrC,IAAI,EAAE,qBAAqB;QAC3B,IAAI,EAAE,+CAA+C;QACrD,UAAU,EAAE,CAAC,QAAQ,EAAE,YAAY,EAAE,YAAY,EAAE,QAAQ,EAAE,SAAS,CAAC;QACvE,WAAW;KACX,CAAC;IAEF,mBAAmB,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC;QACvC,IAAI,EAAE,iCAAiC;QACvC,IAAI,EAAE,gDAAgD;QACtD,UAAU,EAAE,CAAC,cAAc,CAAC;QAC5B,WAAW;KACX,CAAC;IAEF,YAAY,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC;QAChC,IAAI,EAAE,yBAAyB;QAC/B,IAAI,EAAE,mCAAmC;KACzC,CAAC;IACF,iBAAiB,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC;QACrC,IAAI,EAAE,8BAA8B;QACpC,UAAU,EAAE,CAAC,mBAAmB,CAAC;QACjC,IAAI,EAAE,wCAAwC;KAC9C,CAAC;IACF,oBAAoB,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC;QACxC,IAAI,EAAE,4CAA4C;QAClD,IAAI,EAAE,mDAAmD;QACzD,WAAW;QACX,aAAa,EAAE,EAAE;QACjB,UAAU,EAAE,CAAC;QACb,kHAAkH;KAClH,CAAC;IAEF,WAAW,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC7B,IAAI,EAAE,+BAA+B;QACrC,IAAI,EAAE,6BAA6B;KACnC,CAAC;IACF,wBAAwB,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC1C,IAAI,EAAE,8BAA8B;QACpC,IAAI,EAAE,2CAA2C;KACjD,CAAC;IACF,iBAAiB,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QACnC,IAAI,EAAE,gCAAgC;QACtC,IAAI,EAAE,kCAAkC;KACxC,CAAC;IACF,oBAAoB,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC;QACxC,IAAI,EAAE,oCAAoC;QAC1C,UAAU,EAAE,CAAC,YAAY,EAAE,SAAS,EAAE,gBAAgB,EAAE,MAAM,EAAE,MAAM,EAAE,eAAe,CAAC;QACxF,IAAI,EAAE,iDAAiD;KACvD,CAAC;IAEF,OAAO,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QACzB,IAAI,EAAE,oBAAoB;QAC1B,UAAU,EAAE,CAAC,SAAS,CAAC;QACvB,IAAI,EAAE,qBAAqB;KAC3B,CAAC;IACF,SAAS,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,sBAAsB,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC;IACxF,aAAa,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC/B,IAAI,EAAE,2BAA2B;QACjC,IAAI,EAAE,mBAAmB;KACzB,CAAC;IACF,YAAY,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC9B,IAAI,EAAE,0BAA0B;QAChC,UAAU,EAAE,CAAC,SAAS,CAAC;QACvB,IAAI,EAAE,eAAe;KACrB,CAAC;IACF,UAAU,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC5B,IAAI,EAAE,wBAAwB;QAC9B,UAAU,EAAE,CAAC,OAAO,CAAC;QACrB,IAAI,EAAE,aAAa;KACnB,CAAC;IACF,KAAK,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC;QACzB,IAAI,EAAE,kBAAkB;QACxB,IAAI,EAAE,6BAA6B;QACnC,UAAU,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC;KAChC,CAAC;IAEF,SAAS,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC3B,IAAI,EAAE,uBAAuB;QAC7B,UAAU,EAAE,CAAC,OAAO,CAAC;QACrB,IAAI,EAAE,YAAY;KAClB,CAAC;IAEF,kBAAkB;IAClB,UAAU,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,wBAAwB,EAAE,IAAI,EAAE,gBAAgB,EAAE,CAAC;IACxF,WAAW,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC7B,IAAI,EAAE,yBAAyB;QAC/B,IAAI,EAAE,uBAAuB;KAC7B,CAAC;IACF,cAAc,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAChC,IAAI,EAAE,6BAA6B;QACnC,IAAI,EAAE,2BAA2B;KACjC,CAAC;IACF,WAAW,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC7B,IAAI,EAAE,yBAAyB;QAC/B,IAAI,EAAE,uBAAuB;KAC7B,CAAC;IACF,SAAS,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC3B,IAAI,EAAE,uBAAuB;QAC7B,IAAI,EAAE,qBAAqB;KAC3B,CAAC;IACF,YAAY,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC9B,IAAI,EAAE,0BAA0B;QAChC,IAAI,EAAE,wBAAwB;KAC9B,CAAC;IAEF,kBAAkB;IAClB,UAAU,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,wBAAwB,EAAE,IAAI,EAAE,gBAAgB,EAAE,CAAC;IACxF,aAAa,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC/B,IAAI,EAAE,2BAA2B;QACjC,IAAI,EAAE,gCAAgC;KACtC,CAAC;IACF,kBAAkB,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QACpC,IAAI,EAAE,iCAAiC;QACvC,IAAI,EAAE,wBAAwB;KAC9B,CAAC;IACF,WAAW,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC7B,IAAI,EAAE,yBAAyB;QAC/B,IAAI,EAAE,uBAAuB;KAC7B,CAAC;IACF,aAAa,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC/B,IAAI,EAAE,2BAA2B;QACjC,IAAI,EAAE,yBAAyB;KAC/B,CAAC;IAEF,qBAAqB;IACrB,aAAa,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC/B,IAAI,EAAE,2BAA2B;QACjC,IAAI,EAAE,mBAAmB;KACzB,CAAC;IACF,oBAAoB,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QACtC,IAAI,EAAE,mCAAmC;QACzC,IAAI,EAAE,mCAAmC;KACzC,CAAC;IACF,yBAAyB,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC3C,IAAI,EAAE,yCAAyC;QAC/C,IAAI,EAAE,oCAAoC;KAC1C,CAAC;IACF,mBAAmB,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QACrC,IAAI,EAAE,kCAAkC;QACxC,IAAI,EAAE,mCAAmC;KACzC,CAAC;IACF,qBAAqB,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QACvC,IAAI,EAAE,oCAAoC;QAC1C,IAAI,EAAE,qCAAqC;KAC3C,CAAC;IAEF,eAAe;IACf,kBAAkB,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QACpC,IAAI,EAAE,2BAA2B;QACjC,IAAI,EAAE,sBAAsB;KAC5B,CAAC;IACF,gBAAgB,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAClC,IAAI,EAAE,yBAAyB;QAC/B,IAAI,EAAE,oBAAoB;KAC1B,CAAC;IACF,eAAe,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QACjC,IAAI,EAAE,wBAAwB;QAC9B,IAAI,EAAE,gCAAgC;KACtC,CAAC;IAEF,eAAe;IACf,WAAW,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC;QAC7B,IAAI,EAAE,yBAAyB;QAC/B,UAAU,EAAE,CAAC,KAAK,EAAE,MAAM,CAAC;QAC3B,IAAI,EAAE,uBAAuB;KAC7B,CAAC;IAEF,mBAAmB;IACnB,qBAAqB,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,2BAA2B,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC;IACzG,mBAAmB,EAAE,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,yBAAyB,EAAE,IAAI,EAAE,iBAAiB,EAAE,CAAC;IACnG,4BAA4B,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC;QAChD,IAAI,EAAE,sCAAsC;QAC5C,IAAI,EAAE,8BAA8B;KACpC,CAAC;IACF,6BAA6B,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC;QACjD,IAAI,EAAE,uCAAuC;QAC7C,IAAI,EAAE,0BAA0B;KAChC,CAAC;CACF,CAAC;AAEF,UAAU","sourcesContent":["import client from 'prom-client';\n\nconst percentiles = [0.01, 0.1, 0.5, 0.9, 0.95, 0.99, 1];\n\nexport const metrics = {\n\tdeprecations: new client.Counter({\n\t\tname: 'rocketchat_deprecations',\n\t\tlabelNames: ['type', 'kind', 'name', 'params'],\n\t\thelp: 'cumulated number of deprecations being used',\n\t}),\n\tmetricsRequests: new client.Counter({\n\t\tname: 'rocketchat_metrics_requests',\n\t\tlabelNames: ['notification_type'],\n\t\thelp: 'cumulated number of calls to the metrics endpoint',\n\t}),\n\tmetricsSize: new client.Gauge({\n\t\tname: 'rocketchat_metrics_size',\n\t\thelp: 'size of the metrics response in chars',\n\t}),\n\tinfo: new client.Gauge({\n\t\tname: 'rocketchat_info',\n\t\tlabelNames: ['version', 'unique_id', 'site_url'],\n\t\thelp: 'Rocket.Chat info',\n\t}),\n\tmeteorMethods: new client.Summary({\n\t\tname: 'rocketchat_meteor_methods',\n\t\thelp: 'summary of meteor methods count and time',\n\t\tlabelNames: ['method', 'has_connection', 'has_user'],\n\t\tpercentiles,\n\t}),\n\trocketchatCallbacks: new client.Summary({\n\t\tname: 'rocketchat_callbacks',\n\t\thelp: 'summary of rocketchat callbacks count and time',\n\t\tlabelNames: ['hook', 'callback'],\n\t\tpercentiles,\n\t}),\n\trocketchatHooks: new client.Summary({\n\t\tname: 'rocketchat_hooks',\n\t\thelp: 'summary of rocketchat hooks count and time',\n\t\tlabelNames: ['hook', 'callbacks_length'],\n\t\tpercentiles,\n\t}),\n\trocketchatRestApi: new client.Summary({\n\t\tname: 'rocketchat_rest_api',\n\t\thelp: 'summary of rocketchat rest api count and time',\n\t\tlabelNames: ['method', 'entrypoint', 'user_agent', 'status', 'version'],\n\t\tpercentiles,\n\t}),\n\n\tmeteorSubscriptions: new client.Summary({\n\t\tname: 'rocketchat_meteor_subscriptions',\n\t\thelp: 'summary of meteor subscriptions count and time',\n\t\tlabelNames: ['subscription'],\n\t\tpercentiles,\n\t}),\n\n\tmessagesSent: new client.Counter({\n\t\tname: 'rocketchat_message_sent',\n\t\thelp: 'cumulated number of messages sent',\n\t}),\n\tnotificationsSent: new client.Counter({\n\t\tname: 'rocketchat_notification_sent',\n\t\tlabelNames: ['notification_type'],\n\t\thelp: 'cumulated number of notifications sent',\n\t}),\n\tmessageRoundtripTime: new client.Summary({\n\t\tname: 'rocketchat_messages_roundtrip_time_summary',\n\t\thelp: 'time spent by a message from save to receive back',\n\t\tpercentiles,\n\t\tmaxAgeSeconds: 60,\n\t\tageBuckets: 5,\n\t\t// pruneAgedBuckets: true, // Type not added to prom-client on 14.2 https://github.com/siimon/prom-client/pull/558\n\t}),\n\n\tddpSessions: new client.Gauge({\n\t\tname: 'rocketchat_ddp_sessions_count',\n\t\thelp: 'number of open ddp sessions',\n\t}),\n\tddpAuthenticatedSessions: new client.Gauge({\n\t\tname: 'rocketchat_ddp_sessions_auth',\n\t\thelp: 'number of authenticated open ddp sessions',\n\t}),\n\tddpConnectedUsers: new client.Gauge({\n\t\tname: 'rocketchat_ddp_connected_users',\n\t\thelp: 'number of unique connected users',\n\t}),\n\tddpRateLimitExceeded: new client.Counter({\n\t\tname: 'rocketchat_ddp_rate_limit_exceeded',\n\t\tlabelNames: ['limit_name', 'user_id', 'client_address', 'type', 'name', 'connection_id'],\n\t\thelp: 'number of times a ddp rate limiter was exceeded',\n\t}),\n\n\tversion: new client.Gauge({\n\t\tname: 'rocketchat_version',\n\t\tlabelNames: ['version'],\n\t\thelp: 'Rocket.Chat version',\n\t}),\n\tmigration: new client.Gauge({ name: 'rocketchat_migration', help: 'migration versoin' }),\n\tinstanceCount: new client.Gauge({\n\t\tname: 'rocketchat_instance_count',\n\t\thelp: 'instances running',\n\t}),\n\toplogEnabled: new client.Gauge({\n\t\tname: 'rocketchat_oplog_enabled',\n\t\tlabelNames: ['enabled'],\n\t\thelp: 'oplog enabled',\n\t}),\n\toplogQueue: new client.Gauge({\n\t\tname: 'rocketchat_oplog_queue',\n\t\tlabelNames: ['queue'],\n\t\thelp: 'oplog queue',\n\t}),\n\toplog: new client.Counter({\n\t\tname: 'rocketchat_oplog',\n\t\thelp: 'summary of oplog operations',\n\t\tlabelNames: ['collection', 'op'],\n\t}),\n\n\tpushQueue: new client.Gauge({\n\t\tname: 'rocketchat_push_queue',\n\t\tlabelNames: ['queue'],\n\t\thelp: 'push queue',\n\t}),\n\n\t// User statistics\n\ttotalUsers: new client.Gauge({ name: 'rocketchat_users_total', help: 'total of users' }),\n\tactiveUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_active',\n\t\thelp: 'total of active users',\n\t}),\n\tnonActiveUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_non_active',\n\t\thelp: 'total of non active users',\n\t}),\n\tonlineUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_online',\n\t\thelp: 'total of users online',\n\t}),\n\tawayUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_away',\n\t\thelp: 'total of users away',\n\t}),\n\tofflineUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_offline',\n\t\thelp: 'total of users offline',\n\t}),\n\n\t// Room statistics\n\ttotalRooms: new client.Gauge({ name: 'rocketchat_rooms_total', help: 'total of rooms' }),\n\ttotalChannels: new client.Gauge({\n\t\tname: 'rocketchat_channels_total',\n\t\thelp: 'total of public rooms/channels',\n\t}),\n\ttotalPrivateGroups: new client.Gauge({\n\t\tname: 'rocketchat_private_groups_total',\n\t\thelp: 'total of private rooms',\n\t}),\n\ttotalDirect: new client.Gauge({\n\t\tname: 'rocketchat_direct_total',\n\t\thelp: 'total of direct rooms',\n\t}),\n\ttotalLivechat: new client.Gauge({\n\t\tname: 'rocketchat_livechat_total',\n\t\thelp: 'total of livechat rooms',\n\t}),\n\n\t// Message statistics\n\ttotalMessages: new client.Gauge({\n\t\tname: 'rocketchat_messages_total',\n\t\thelp: 'total of messages',\n\t}),\n\ttotalChannelMessages: new client.Gauge({\n\t\tname: 'rocketchat_channel_messages_total',\n\t\thelp: 'total of messages in public rooms',\n\t}),\n\ttotalPrivateGroupMessages: new client.Gauge({\n\t\tname: 'rocketchat_private_group_messages_total',\n\t\thelp: 'total of messages in private rooms',\n\t}),\n\ttotalDirectMessages: new client.Gauge({\n\t\tname: 'rocketchat_direct_messages_total',\n\t\thelp: 'total of messages in direct rooms',\n\t}),\n\ttotalLivechatMessages: new client.Gauge({\n\t\tname: 'rocketchat_livechat_messages_total',\n\t\thelp: 'total of messages in livechat rooms',\n\t}),\n\n\t// Apps metrics\n\ttotalAppsInstalled: new client.Gauge({\n\t\tname: 'rocketchat_apps_installed',\n\t\thelp: 'total apps installed',\n\t}),\n\ttotalAppsEnabled: new client.Gauge({\n\t\tname: 'rocketchat_apps_enabled',\n\t\thelp: 'total apps enabled',\n\t}),\n\ttotalAppsFailed: new client.Gauge({\n\t\tname: 'rocketchat_apps_failed',\n\t\thelp: 'total apps that failed to load',\n\t}),\n\n\t// Meteor Facts\n\tmeteorFacts: new client.Gauge({\n\t\tname: 'rocketchat_meteor_facts',\n\t\tlabelNames: ['pkg', 'fact'],\n\t\thelp: 'internal meteor facts',\n\t}),\n\n\t// Livechat metrics\n\ttotalLivechatVisitors: new client.Gauge({ name: 'rocketchat_visitors_total', help: 'total of visitors' }),\n\ttotalLivechatAgents: new client.Gauge({ name: 'rocketchat_agents_total', help: 'total of agents' }),\n\ttotalLivechatWebhooksSuccess: new client.Counter({\n\t\tname: 'rocketchat_livechat_webhooks_success',\n\t\thelp: 'successful livechat webhooks',\n\t}),\n\ttotalLivechatWebhooksFailures: new client.Counter({\n\t\tname: 'rocketchat_livechat_webhooks_failures',\n\t\thelp: 'failed livechat webhooks',\n\t}),\n};\n\n// Metrics\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true,"topLevelAwait":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/metrics/server/lib/metrics.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/metrics/server/lib/metrics.ts","inputSourceMap":{"version":3,"file":"app/metrics/server/lib/metrics.ts","sourceRoot":"","sources":["app/metrics/server/lib/metrics.ts"],"names":[],"mappings":"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","sourcesContent":["import client from 'prom-client';\n\nconst percentiles = [0.01, 0.1, 0.5, 0.9, 0.95, 0.99, 1];\n\nexport const metrics = {\n\tdeprecations: new client.Counter({\n\t\tname: 'rocketchat_deprecations',\n\t\tlabelNames: ['type', 'kind', 'name', 'params'],\n\t\thelp: 'cumulated number of deprecations being used',\n\t}),\n\tmetricsRequests: new client.Counter({\n\t\tname: 'rocketchat_metrics_requests',\n\t\tlabelNames: ['notification_type'],\n\t\thelp: 'cumulated number of calls to the metrics endpoint',\n\t}),\n\tmetricsSize: new client.Gauge({\n\t\tname: 'rocketchat_metrics_size',\n\t\thelp: 'size of the metrics response in chars',\n\t}),\n\tinfo: new client.Gauge({\n\t\tname: 'rocketchat_info',\n\t\tlabelNames: ['version', 'unique_id', 'site_url'],\n\t\thelp: 'Rocket.Chat info',\n\t}),\n\tmeteorMethods: new client.Summary({\n\t\tname: 'rocketchat_meteor_methods',\n\t\thelp: 'summary of meteor methods count and time',\n\t\tlabelNames: ['method', 'has_connection', 'has_user'],\n\t\tpercentiles,\n\t}),\n\trocketchatCallbacks: new client.Summary({\n\t\tname: 'rocketchat_callbacks',\n\t\thelp: 'summary of rocketchat callbacks count and time',\n\t\tlabelNames: ['hook', 'callback'],\n\t\tpercentiles,\n\t}),\n\trocketchatHooks: new client.Summary({\n\t\tname: 'rocketchat_hooks',\n\t\thelp: 'summary of rocketchat hooks count and time',\n\t\tlabelNames: ['hook', 'callbacks_length'],\n\t\tpercentiles,\n\t}),\n\trocketchatRestApi: new client.Summary({\n\t\tname: 'rocketchat_rest_api',\n\t\thelp: 'summary of rocketchat rest api count and time',\n\t\tlabelNames: ['method', 'entrypoint', 'user_agent', 'status', 'version'],\n\t\tpercentiles,\n\t}),\n\n\tmeteorSubscriptions: new client.Summary({\n\t\tname: 'rocketchat_meteor_subscriptions',\n\t\thelp: 'summary of meteor subscriptions count and time',\n\t\tlabelNames: ['subscription'],\n\t\tpercentiles,\n\t}),\n\n\tmessagesSent: new client.Counter({\n\t\tname: 'rocketchat_message_sent',\n\t\thelp: 'cumulated number of messages sent',\n\t}),\n\tnotificationsSent: new client.Counter({\n\t\tname: 'rocketchat_notification_sent',\n\t\tlabelNames: ['notification_type'],\n\t\thelp: 'cumulated number of notifications sent',\n\t}),\n\tmessageRoundtripTime: new client.Summary({\n\t\tname: 'rocketchat_messages_roundtrip_time_summary',\n\t\thelp: 'time spent by a message from save to receive back',\n\t\tpercentiles,\n\t\tmaxAgeSeconds: 60,\n\t\tageBuckets: 5,\n\t\t// pruneAgedBuckets: true, // Type not added to prom-client on 14.2 https://github.com/siimon/prom-client/pull/558\n\t}),\n\n\tddpSessions: new client.Gauge({\n\t\tname: 'rocketchat_ddp_sessions_count',\n\t\thelp: 'number of open ddp sessions',\n\t}),\n\tddpAuthenticatedSessions: new client.Gauge({\n\t\tname: 'rocketchat_ddp_sessions_auth',\n\t\thelp: 'number of authenticated open ddp sessions',\n\t}),\n\tddpConnectedUsers: new client.Gauge({\n\t\tname: 'rocketchat_ddp_connected_users',\n\t\thelp: 'number of unique connected users',\n\t}),\n\tddpRateLimitExceeded: new client.Counter({\n\t\tname: 'rocketchat_ddp_rate_limit_exceeded',\n\t\tlabelNames: ['limit_name', 'user_id', 'client_address', 'type', 'name', 'connection_id'],\n\t\thelp: 'number of times a ddp rate limiter was exceeded',\n\t}),\n\n\tversion: new client.Gauge({\n\t\tname: 'rocketchat_version',\n\t\tlabelNames: ['version'],\n\t\thelp: 'Rocket.Chat version',\n\t}),\n\tmigration: new client.Gauge({ name: 'rocketchat_migration', help: 'migration versoin' }),\n\tinstanceCount: new client.Gauge({\n\t\tname: 'rocketchat_instance_count',\n\t\thelp: 'instances running',\n\t}),\n\toplogEnabled: new client.Gauge({\n\t\tname: 'rocketchat_oplog_enabled',\n\t\tlabelNames: ['enabled'],\n\t\thelp: 'oplog enabled',\n\t}),\n\toplogQueue: new client.Gauge({\n\t\tname: 'rocketchat_oplog_queue',\n\t\tlabelNames: ['queue'],\n\t\thelp: 'oplog queue',\n\t}),\n\toplog: new client.Counter({\n\t\tname: 'rocketchat_oplog',\n\t\thelp: 'summary of oplog operations',\n\t\tlabelNames: ['collection', 'op'],\n\t}),\n\n\tpushQueue: new client.Gauge({\n\t\tname: 'rocketchat_push_queue',\n\t\tlabelNames: ['queue'],\n\t\thelp: 'push queue',\n\t}),\n\n\t// User statistics\n\ttotalUsers: new client.Gauge({ name: 'rocketchat_users_total', help: 'total of users' }),\n\tactiveUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_active',\n\t\thelp: 'total of active users',\n\t}),\n\tnonActiveUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_non_active',\n\t\thelp: 'total of non active users',\n\t}),\n\tonlineUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_online',\n\t\thelp: 'total of users online',\n\t}),\n\tawayUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_away',\n\t\thelp: 'total of users away',\n\t}),\n\tofflineUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_offline',\n\t\thelp: 'total of users offline',\n\t}),\n\n\t// Room statistics\n\ttotalRooms: new client.Gauge({ name: 'rocketchat_rooms_total', help: 'total of rooms' }),\n\ttotalChannels: new client.Gauge({\n\t\tname: 'rocketchat_channels_total',\n\t\thelp: 'total of public rooms/channels',\n\t}),\n\ttotalPrivateGroups: new client.Gauge({\n\t\tname: 'rocketchat_private_groups_total',\n\t\thelp: 'total of private rooms',\n\t}),\n\ttotalDirect: new client.Gauge({\n\t\tname: 'rocketchat_direct_total',\n\t\thelp: 'total of direct rooms',\n\t}),\n\ttotalLivechat: new client.Gauge({\n\t\tname: 'rocketchat_livechat_total',\n\t\thelp: 'total of livechat rooms',\n\t}),\n\n\t// Message statistics\n\ttotalMessages: new client.Gauge({\n\t\tname: 'rocketchat_messages_total',\n\t\thelp: 'total of messages',\n\t}),\n\ttotalChannelMessages: new client.Gauge({\n\t\tname: 'rocketchat_channel_messages_total',\n\t\thelp: 'total of messages in public rooms',\n\t}),\n\ttotalPrivateGroupMessages: new client.Gauge({\n\t\tname: 'rocketchat_private_group_messages_total',\n\t\thelp: 'total of messages in private rooms',\n\t}),\n\ttotalDirectMessages: new client.Gauge({\n\t\tname: 'rocketchat_direct_messages_total',\n\t\thelp: 'total of messages in direct rooms',\n\t}),\n\ttotalLivechatMessages: new client.Gauge({\n\t\tname: 'rocketchat_livechat_messages_total',\n\t\thelp: 'total of messages in livechat rooms',\n\t}),\n\n\t// Apps metrics\n\ttotalAppsInstalled: new client.Gauge({\n\t\tname: 'rocketchat_apps_installed',\n\t\thelp: 'total apps installed',\n\t}),\n\ttotalAppsEnabled: new client.Gauge({\n\t\tname: 'rocketchat_apps_enabled',\n\t\thelp: 'total apps enabled',\n\t}),\n\ttotalAppsFailed: new client.Gauge({\n\t\tname: 'rocketchat_apps_failed',\n\t\thelp: 'total apps that failed to load',\n\t}),\n\n\t// Meteor Facts\n\tmeteorFacts: new client.Gauge({\n\t\tname: 'rocketchat_meteor_facts',\n\t\tlabelNames: ['pkg', 'fact'],\n\t\thelp: 'internal meteor facts',\n\t}),\n\n\t// Livechat metrics\n\ttotalLivechatVisitors: new client.Gauge({ name: 'rocketchat_visitors_total', help: 'total of visitors' }),\n\ttotalLivechatAgents: new client.Gauge({ name: 'rocketchat_agents_total', help: 'total of agents' }),\n\ttotalLivechatWebhooksSuccess: new client.Counter({\n\t\tname: 'rocketchat_livechat_webhooks_success',\n\t\thelp: 'successful livechat webhooks',\n\t}),\n\ttotalLivechatWebhooksFailures: new client.Counter({\n\t\tname: 'rocketchat_livechat_webhooks_failures',\n\t\thelp: 'failed livechat webhooks',\n\t}),\n};\n\n// Metrics\n"]}}},"code":"!module.wrapAsync(async function (module, __reifyWaitForDeps__, __reify_async_result__) {\n  \"use strict\";\n  try {\n    module.export({\n      metrics: () => metrics\n    });\n    let client;\n    module.link(\"prom-client\", {\n      default(v) {\n        client = v;\n      }\n    }, 0);\n    if (__reifyWaitForDeps__()) (await __reifyWaitForDeps__())();\n    const percentiles = [0.01, 0.1, 0.5, 0.9, 0.95, 0.99, 1];\n    const metrics = {\n      deprecations: new client.Counter({\n        name: 'rocketchat_deprecations',\n        labelNames: ['type', 'kind', 'name', 'params'],\n        help: 'cumulated number of deprecations being used'\n      }),\n      metricsRequests: new client.Counter({\n        name: 'rocketchat_metrics_requests',\n        labelNames: ['notification_type'],\n        help: 'cumulated number of calls to the metrics endpoint'\n      }),\n      metricsSize: new client.Gauge({\n        name: 'rocketchat_metrics_size',\n        help: 'size of the metrics response in chars'\n      }),\n      info: new client.Gauge({\n        name: 'rocketchat_info',\n        labelNames: ['version', 'unique_id', 'site_url'],\n        help: 'Rocket.Chat info'\n      }),\n      meteorMethods: new client.Summary({\n        name: 'rocketchat_meteor_methods',\n        help: 'summary of meteor methods count and time',\n        labelNames: ['method', 'has_connection', 'has_user'],\n        percentiles\n      }),\n      rocketchatCallbacks: new client.Summary({\n        name: 'rocketchat_callbacks',\n        help: 'summary of rocketchat callbacks count and time',\n        labelNames: ['hook', 'callback'],\n        percentiles\n      }),\n      rocketchatHooks: new client.Summary({\n        name: 'rocketchat_hooks',\n        help: 'summary of rocketchat hooks count and time',\n        labelNames: ['hook', 'callbacks_length'],\n        percentiles\n      }),\n      rocketchatRestApi: new client.Summary({\n        name: 'rocketchat_rest_api',\n        help: 'summary of rocketchat rest api count and time',\n        labelNames: ['method', 'entrypoint', 'user_agent', 'status', 'version'],\n        percentiles\n      }),\n      meteorSubscriptions: new client.Summary({\n        name: 'rocketchat_meteor_subscriptions',\n        help: 'summary of meteor subscriptions count and time',\n        labelNames: ['subscription'],\n        percentiles\n      }),\n      messagesSent: new client.Counter({\n        name: 'rocketchat_message_sent',\n        help: 'cumulated number of messages sent'\n      }),\n      notificationsSent: new client.Counter({\n        name: 'rocketchat_notification_sent',\n        labelNames: ['notification_type'],\n        help: 'cumulated number of notifications sent'\n      }),\n      messageRoundtripTime: new client.Summary({\n        name: 'rocketchat_messages_roundtrip_time_summary',\n        help: 'time spent by a message from save to receive back',\n        percentiles,\n        maxAgeSeconds: 60,\n        ageBuckets: 5\n        // pruneAgedBuckets: true, // Type not added to prom-client on 14.2 https://github.com/siimon/prom-client/pull/558\n      }),\n      ddpSessions: new client.Gauge({\n        name: 'rocketchat_ddp_sessions_count',\n        help: 'number of open ddp sessions'\n      }),\n      ddpAuthenticatedSessions: new client.Gauge({\n        name: 'rocketchat_ddp_sessions_auth',\n        help: 'number of authenticated open ddp sessions'\n      }),\n      ddpConnectedUsers: new client.Gauge({\n        name: 'rocketchat_ddp_connected_users',\n        help: 'number of unique connected users'\n      }),\n      ddpRateLimitExceeded: new client.Counter({\n        name: 'rocketchat_ddp_rate_limit_exceeded',\n        labelNames: ['limit_name', 'user_id', 'client_address', 'type', 'name', 'connection_id'],\n        help: 'number of times a ddp rate limiter was exceeded'\n      }),\n      version: new client.Gauge({\n        name: 'rocketchat_version',\n        labelNames: ['version'],\n        help: 'Rocket.Chat version'\n      }),\n      migration: new client.Gauge({\n        name: 'rocketchat_migration',\n        help: 'migration versoin'\n      }),\n      instanceCount: new client.Gauge({\n        name: 'rocketchat_instance_count',\n        help: 'instances running'\n      }),\n      oplogEnabled: new client.Gauge({\n        name: 'rocketchat_oplog_enabled',\n        labelNames: ['enabled'],\n        help: 'oplog enabled'\n      }),\n      oplogQueue: new client.Gauge({\n        name: 'rocketchat_oplog_queue',\n        labelNames: ['queue'],\n        help: 'oplog queue'\n      }),\n      oplog: new client.Counter({\n        name: 'rocketchat_oplog',\n        help: 'summary of oplog operations',\n        labelNames: ['collection', 'op']\n      }),\n      pushQueue: new client.Gauge({\n        name: 'rocketchat_push_queue',\n        labelNames: ['queue'],\n        help: 'push queue'\n      }),\n      // User statistics\n      totalUsers: new client.Gauge({\n        name: 'rocketchat_users_total',\n        help: 'total of users'\n      }),\n      activeUsers: new client.Gauge({\n        name: 'rocketchat_users_active',\n        help: 'total of active users'\n      }),\n      nonActiveUsers: new client.Gauge({\n        name: 'rocketchat_users_non_active',\n        help: 'total of non active users'\n      }),\n      onlineUsers: new client.Gauge({\n        name: 'rocketchat_users_online',\n        help: 'total of users online'\n      }),\n      awayUsers: new client.Gauge({\n        name: 'rocketchat_users_away',\n        help: 'total of users away'\n      }),\n      offlineUsers: new client.Gauge({\n        name: 'rocketchat_users_offline',\n        help: 'total of users offline'\n      }),\n      // Room statistics\n      totalRooms: new client.Gauge({\n        name: 'rocketchat_rooms_total',\n        help: 'total of rooms'\n      }),\n      totalChannels: new client.Gauge({\n        name: 'rocketchat_channels_total',\n        help: 'total of public rooms/channels'\n      }),\n      totalPrivateGroups: new client.Gauge({\n        name: 'rocketchat_private_groups_total',\n        help: 'total of private rooms'\n      }),\n      totalDirect: new client.Gauge({\n        name: 'rocketchat_direct_total',\n        help: 'total of direct rooms'\n      }),\n      totalLivechat: new client.Gauge({\n        name: 'rocketchat_livechat_total',\n        help: 'total of livechat rooms'\n      }),\n      // Message statistics\n      totalMessages: new client.Gauge({\n        name: 'rocketchat_messages_total',\n        help: 'total of messages'\n      }),\n      totalChannelMessages: new client.Gauge({\n        name: 'rocketchat_channel_messages_total',\n        help: 'total of messages in public rooms'\n      }),\n      totalPrivateGroupMessages: new client.Gauge({\n        name: 'rocketchat_private_group_messages_total',\n        help: 'total of messages in private rooms'\n      }),\n      totalDirectMessages: new client.Gauge({\n        name: 'rocketchat_direct_messages_total',\n        help: 'total of messages in direct rooms'\n      }),\n      totalLivechatMessages: new client.Gauge({\n        name: 'rocketchat_livechat_messages_total',\n        help: 'total of messages in livechat rooms'\n      }),\n      // Apps metrics\n      totalAppsInstalled: new client.Gauge({\n        name: 'rocketchat_apps_installed',\n        help: 'total apps installed'\n      }),\n      totalAppsEnabled: new client.Gauge({\n        name: 'rocketchat_apps_enabled',\n        help: 'total apps enabled'\n      }),\n      totalAppsFailed: new client.Gauge({\n        name: 'rocketchat_apps_failed',\n        help: 'total apps that failed to load'\n      }),\n      // Meteor Facts\n      meteorFacts: new client.Gauge({\n        name: 'rocketchat_meteor_facts',\n        labelNames: ['pkg', 'fact'],\n        help: 'internal meteor facts'\n      }),\n      // Livechat metrics\n      totalLivechatVisitors: new client.Gauge({\n        name: 'rocketchat_visitors_total',\n        help: 'total of visitors'\n      }),\n      totalLivechatAgents: new client.Gauge({\n        name: 'rocketchat_agents_total',\n        help: 'total of agents'\n      }),\n      totalLivechatWebhooksSuccess: new client.Counter({\n        name: 'rocketchat_livechat_webhooks_success',\n        help: 'successful livechat webhooks'\n      }),\n      totalLivechatWebhooksFailures: new client.Counter({\n        name: 'rocketchat_livechat_webhooks_failures',\n        help: 'failed livechat webhooks'\n      })\n    };\n    __reify_async_result__();\n  } catch (_reifyError) {\n    return __reify_async_result__(_reifyError);\n  }\n  __reify_async_result__()\n}, {\n  self: this,\n  async: false\n});","map":{"version":3,"names":["module","export","metrics","client","link","default","v","__reifyWaitForDeps__","percentiles","deprecations","Counter","name","labelNames","help","metricsRequests","metricsSize","Gauge","info","meteorMethods","Summary","rocketchatCallbacks","rocketchatHooks","rocketchatRestApi","meteorSubscriptions","messagesSent","notificationsSent","messageRoundtripTime","maxAgeSeconds","ageBuckets","ddpSessions","ddpAuthenticatedSessions","ddpConnectedUsers","ddpRateLimitExceeded","version","migration","instanceCount","oplogEnabled","oplogQueue","oplog","pushQueue","totalUsers","activeUsers","nonActiveUsers","onlineUsers","awayUsers","offlineUsers","totalRooms","totalChannels","totalPrivateGroups","totalDirect","totalLivechat","totalMessages","totalChannelMessages","totalPrivateGroupMessages","totalDirectMessages","totalLivechatMessages","totalAppsInstalled","totalAppsEnabled","totalAppsFailed","meteorFacts","totalLivechatVisitors","totalLivechatAgents","totalLivechatWebhooksSuccess","totalLivechatWebhooksFailures","__reify_async_result__","_reifyError","self","async"],"sources":["app/metrics/server/lib/metrics.ts"],"sourcesContent":["import client from 'prom-client';\n\nconst percentiles = [0.01, 0.1, 0.5, 0.9, 0.95, 0.99, 1];\n\nexport const metrics = {\n\tdeprecations: new client.Counter({\n\t\tname: 'rocketchat_deprecations',\n\t\tlabelNames: ['type', 'kind', 'name', 'params'],\n\t\thelp: 'cumulated number of deprecations being used',\n\t}),\n\tmetricsRequests: new client.Counter({\n\t\tname: 'rocketchat_metrics_requests',\n\t\tlabelNames: ['notification_type'],\n\t\thelp: 'cumulated number of calls to the metrics endpoint',\n\t}),\n\tmetricsSize: new client.Gauge({\n\t\tname: 'rocketchat_metrics_size',\n\t\thelp: 'size of the metrics response in chars',\n\t}),\n\tinfo: new client.Gauge({\n\t\tname: 'rocketchat_info',\n\t\tlabelNames: ['version', 'unique_id', 'site_url'],\n\t\thelp: 'Rocket.Chat info',\n\t}),\n\tmeteorMethods: new client.Summary({\n\t\tname: 'rocketchat_meteor_methods',\n\t\thelp: 'summary of meteor methods count and time',\n\t\tlabelNames: ['method', 'has_connection', 'has_user'],\n\t\tpercentiles,\n\t}),\n\trocketchatCallbacks: new client.Summary({\n\t\tname: 'rocketchat_callbacks',\n\t\thelp: 'summary of rocketchat callbacks count and time',\n\t\tlabelNames: ['hook', 'callback'],\n\t\tpercentiles,\n\t}),\n\trocketchatHooks: new client.Summary({\n\t\tname: 'rocketchat_hooks',\n\t\thelp: 'summary of rocketchat hooks count and time',\n\t\tlabelNames: ['hook', 'callbacks_length'],\n\t\tpercentiles,\n\t}),\n\trocketchatRestApi: new client.Summary({\n\t\tname: 'rocketchat_rest_api',\n\t\thelp: 'summary of rocketchat rest api count and time',\n\t\tlabelNames: ['method', 'entrypoint', 'user_agent', 'status', 'version'],\n\t\tpercentiles,\n\t}),\n\n\tmeteorSubscriptions: new client.Summary({\n\t\tname: 'rocketchat_meteor_subscriptions',\n\t\thelp: 'summary of meteor subscriptions count and time',\n\t\tlabelNames: ['subscription'],\n\t\tpercentiles,\n\t}),\n\n\tmessagesSent: new client.Counter({\n\t\tname: 'rocketchat_message_sent',\n\t\thelp: 'cumulated number of messages sent',\n\t}),\n\tnotificationsSent: new client.Counter({\n\t\tname: 'rocketchat_notification_sent',\n\t\tlabelNames: ['notification_type'],\n\t\thelp: 'cumulated number of notifications sent',\n\t}),\n\tmessageRoundtripTime: new client.Summary({\n\t\tname: 'rocketchat_messages_roundtrip_time_summary',\n\t\thelp: 'time spent by a message from save to receive back',\n\t\tpercentiles,\n\t\tmaxAgeSeconds: 60,\n\t\tageBuckets: 5,\n\t\t// pruneAgedBuckets: true, // Type not added to prom-client on 14.2 https://github.com/siimon/prom-client/pull/558\n\t}),\n\n\tddpSessions: new client.Gauge({\n\t\tname: 'rocketchat_ddp_sessions_count',\n\t\thelp: 'number of open ddp sessions',\n\t}),\n\tddpAuthenticatedSessions: new client.Gauge({\n\t\tname: 'rocketchat_ddp_sessions_auth',\n\t\thelp: 'number of authenticated open ddp sessions',\n\t}),\n\tddpConnectedUsers: new client.Gauge({\n\t\tname: 'rocketchat_ddp_connected_users',\n\t\thelp: 'number of unique connected users',\n\t}),\n\tddpRateLimitExceeded: new client.Counter({\n\t\tname: 'rocketchat_ddp_rate_limit_exceeded',\n\t\tlabelNames: ['limit_name', 'user_id', 'client_address', 'type', 'name', 'connection_id'],\n\t\thelp: 'number of times a ddp rate limiter was exceeded',\n\t}),\n\n\tversion: new client.Gauge({\n\t\tname: 'rocketchat_version',\n\t\tlabelNames: ['version'],\n\t\thelp: 'Rocket.Chat version',\n\t}),\n\tmigration: new client.Gauge({ name: 'rocketchat_migration', help: 'migration versoin' }),\n\tinstanceCount: new client.Gauge({\n\t\tname: 'rocketchat_instance_count',\n\t\thelp: 'instances running',\n\t}),\n\toplogEnabled: new client.Gauge({\n\t\tname: 'rocketchat_oplog_enabled',\n\t\tlabelNames: ['enabled'],\n\t\thelp: 'oplog enabled',\n\t}),\n\toplogQueue: new client.Gauge({\n\t\tname: 'rocketchat_oplog_queue',\n\t\tlabelNames: ['queue'],\n\t\thelp: 'oplog queue',\n\t}),\n\toplog: new client.Counter({\n\t\tname: 'rocketchat_oplog',\n\t\thelp: 'summary of oplog operations',\n\t\tlabelNames: ['collection', 'op'],\n\t}),\n\n\tpushQueue: new client.Gauge({\n\t\tname: 'rocketchat_push_queue',\n\t\tlabelNames: ['queue'],\n\t\thelp: 'push queue',\n\t}),\n\n\t// User statistics\n\ttotalUsers: new client.Gauge({ name: 'rocketchat_users_total', help: 'total of users' }),\n\tactiveUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_active',\n\t\thelp: 'total of active users',\n\t}),\n\tnonActiveUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_non_active',\n\t\thelp: 'total of non active users',\n\t}),\n\tonlineUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_online',\n\t\thelp: 'total of users online',\n\t}),\n\tawayUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_away',\n\t\thelp: 'total of users away',\n\t}),\n\tofflineUsers: new client.Gauge({\n\t\tname: 'rocketchat_users_offline',\n\t\thelp: 'total of users offline',\n\t}),\n\n\t// Room statistics\n\ttotalRooms: new client.Gauge({ name: 'rocketchat_rooms_total', help: 'total of rooms' }),\n\ttotalChannels: new client.Gauge({\n\t\tname: 'rocketchat_channels_total',\n\t\thelp: 'total of public rooms/channels',\n\t}),\n\ttotalPrivateGroups: new client.Gauge({\n\t\tname: 'rocketchat_private_groups_total',\n\t\thelp: 'total of private rooms',\n\t}),\n\ttotalDirect: new client.Gauge({\n\t\tname: 'rocketchat_direct_total',\n\t\thelp: 'total of direct rooms',\n\t}),\n\ttotalLivechat: new client.Gauge({\n\t\tname: 'rocketchat_livechat_total',\n\t\thelp: 'total of livechat rooms',\n\t}),\n\n\t// Message statistics\n\ttotalMessages: new client.Gauge({\n\t\tname: 'rocketchat_messages_total',\n\t\thelp: 'total of messages',\n\t}),\n\ttotalChannelMessages: new client.Gauge({\n\t\tname: 'rocketchat_channel_messages_total',\n\t\thelp: 'total of messages in public rooms',\n\t}),\n\ttotalPrivateGroupMessages: new client.Gauge({\n\t\tname: 'rocketchat_private_group_messages_total',\n\t\thelp: 'total of messages in private rooms',\n\t}),\n\ttotalDirectMessages: new client.Gauge({\n\t\tname: 'rocketchat_direct_messages_total',\n\t\thelp: 'total of messages in direct rooms',\n\t}),\n\ttotalLivechatMessages: new client.Gauge({\n\t\tname: 'rocketchat_livechat_messages_total',\n\t\thelp: 'total of messages in livechat rooms',\n\t}),\n\n\t// Apps metrics\n\ttotalAppsInstalled: new client.Gauge({\n\t\tname: 'rocketchat_apps_installed',\n\t\thelp: 'total apps installed',\n\t}),\n\ttotalAppsEnabled: new client.Gauge({\n\t\tname: 'rocketchat_apps_enabled',\n\t\thelp: 'total apps enabled',\n\t}),\n\ttotalAppsFailed: new client.Gauge({\n\t\tname: 'rocketchat_apps_failed',\n\t\thelp: 'total apps that failed to load',\n\t}),\n\n\t// Meteor Facts\n\tmeteorFacts: new client.Gauge({\n\t\tname: 'rocketchat_meteor_facts',\n\t\tlabelNames: ['pkg', 'fact'],\n\t\thelp: 'internal meteor facts',\n\t}),\n\n\t// Livechat metrics\n\ttotalLivechatVisitors: new client.Gauge({ name: 'rocketchat_visitors_total', help: 'total of visitors' }),\n\ttotalLivechatAgents: new client.Gauge({ name: 'rocketchat_agents_total', help: 'total of agents' }),\n\ttotalLivechatWebhooksSuccess: new client.Counter({\n\t\tname: 'rocketchat_livechat_webhooks_success',\n\t\thelp: 'successful livechat webhooks',\n\t}),\n\ttotalLivechatWebhooksFailures: new client.Counter({\n\t\tname: 'rocketchat_livechat_webhooks_failures',\n\t\thelp: 'failed livechat webhooks',\n\t}),\n};\n\n// Metrics\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"62c9d9d621002cbe9d2df46b1522f58024dccb19"}
