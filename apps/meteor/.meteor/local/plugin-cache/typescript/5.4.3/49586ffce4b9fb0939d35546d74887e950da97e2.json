{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/body/RoomBody.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/room/body/RoomBody.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/body/RoomBody.tsx","inputSourceMap":{"version":3,"file":"client/views/room/body/RoomBody.tsx","sourceRoot":"","sources":["client/views/room/body/RoomBody.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IUser } from '@rocket.chat/core-typings';\nimport { Box } from '@rocket.chat/fuselage';\nimport { useMergedRefs } from '@rocket.chat/fuselage-hooks';\nimport { usePermission, useRole, useSetting, useTranslation, useUser, useUserPreference } from '@rocket.chat/ui-contexts';\nimport type { MouseEventHandler, ReactElement, UIEvent } from 'react';\nimport React, { memo, useCallback, useMemo, useRef } from 'react';\n\nimport { RoomRoles } from '../../../../app/models/client';\nimport { isTruthy } from '../../../../lib/isTruthy';\nimport { CustomScrollbars } from '../../../components/CustomScrollbars';\nimport { useEmbeddedLayout } from '../../../hooks/useEmbeddedLayout';\nimport { useReactiveQuery } from '../../../hooks/useReactiveQuery';\nimport Announcement from '../Announcement';\nimport { BubbleDate } from '../BubbleDate';\nimport { MessageList } from '../MessageList';\nimport MessageListErrorBoundary from '../MessageList/MessageListErrorBoundary';\nimport ComposerContainer from '../composer/ComposerContainer';\nimport RoomComposer from '../composer/RoomComposer/RoomComposer';\nimport { useChat } from '../contexts/ChatContext';\nimport { useRoom, useRoomSubscription, useRoomMessages } from '../contexts/RoomContext';\nimport { useRoomToolbox } from '../contexts/RoomToolboxContext';\nimport { useUserCard } from '../contexts/UserCardContext';\nimport { useDateScroll } from '../hooks/useDateScroll';\nimport { useMessageListNavigation } from '../hooks/useMessageListNavigation';\nimport { useRetentionPolicy } from '../hooks/useRetentionPolicy';\nimport DropTargetOverlay from './DropTargetOverlay';\nimport JumpToRecentMessageButton from './JumpToRecentMessageButton';\nimport LeaderBar from './LeaderBar';\nimport LoadingMessagesIndicator from './LoadingMessagesIndicator';\nimport RetentionPolicyWarning from './RetentionPolicyWarning';\nimport RoomForeword from './RoomForeword/RoomForeword';\nimport UnreadMessagesIndicator from './UnreadMessagesIndicator';\nimport UploadProgressIndicator from './UploadProgressIndicator';\nimport { useFileUpload } from './hooks/useFileUpload';\nimport { useGetMore } from './hooks/useGetMore';\nimport { useGoToHomeOnRemoved } from './hooks/useGoToHomeOnRemoved';\nimport { useHasNewMessages } from './hooks/useHasNewMessages';\nimport { useLeaderBanner } from './hooks/useLeaderBanner';\nimport { useListIsAtBottom } from './hooks/useListIsAtBottom';\nimport { useQuoteMessageByUrl } from './hooks/useQuoteMessageByUrl';\nimport { useReadMessageWindowEvents } from './hooks/useReadMessageWindowEvents';\nimport { useRestoreScrollPosition } from './hooks/useRestoreScrollPosition';\nimport { useHandleUnread } from './hooks/useUnreadMessages';\n\nconst RoomBody = (): ReactElement => {\n\tconst chat = useChat();\n\tif (!chat) {\n\t\tthrow new Error('No ChatContext provided');\n\t}\n\n\tconst t = useTranslation();\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\tconst room = useRoom();\n\tconst user = useUser();\n\tconst toolbox = useRoomToolbox();\n\tconst admin = useRole('admin');\n\tconst subscription = useRoomSubscription();\n\n\tconst retentionPolicy = useRetentionPolicy(room);\n\n\tconst hideFlexTab = useUserPreference<boolean>('hideFlexTab') || undefined;\n\tconst hideUsernames = useUserPreference<boolean>('hideUsernames');\n\tconst displayAvatars = useUserPreference<boolean>('displayAvatars');\n\n\tconst { hasMorePreviousMessages, hasMoreNextMessages, isLoadingMoreMessages } = useRoomMessages();\n\n\tconst allowAnonymousRead = useSetting('Accounts_AllowAnonymousRead') as boolean | undefined;\n\n\tconst canPreviewChannelRoom = usePermission('preview-c-room');\n\n\tconst subscribed = !!subscription;\n\n\tconst canPreview = useMemo(() => {\n\t\tif (room && room.t !== 'c') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (allowAnonymousRead === true) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (canPreviewChannelRoom) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn subscribed;\n\t}, [allowAnonymousRead, canPreviewChannelRoom, room, subscribed]);\n\n\tconst useRealName = useSetting('UI_Use_Real_Name') as boolean;\n\n\tconst innerBoxRef = useRef<HTMLDivElement | null>(null);\n\n\tconst {\n\t\twrapperRef: unreadBarWrapperRef,\n\t\tinnerRef: unreadBarInnerRef,\n\t\thandleUnreadBarJumpToButtonClick,\n\t\thandleMarkAsReadButtonClick,\n\t\tcounter: [unread],\n\t} = useHandleUnread(room, subscription);\n\n\tconst { innerRef: dateScrollInnerRef, bubbleRef, listStyle, ...bubbleDate } = useDateScroll();\n\n\tconst { innerRef: isAtBottomInnerRef, atBottomRef, sendToBottom, sendToBottomIfNecessary, isAtBottom } = useListIsAtBottom();\n\n\tconst { innerRef: getMoreInnerRef } = useGetMore(room._id, atBottomRef);\n\n\tconst { wrapperRef: leaderBannerWrapperRef, hideLeaderHeader, innerRef: leaderBannerInnerRef } = useLeaderBanner();\n\n\tconst {\n\t\tuploads,\n\t\thandleUploadFiles,\n\t\thandleUploadProgressClose,\n\t\ttargeDrop: [fileUploadTriggerProps, fileUploadOverlayProps],\n\t} = useFileUpload();\n\n\tconst { innerRef: restoreScrollPositionInnerRef } = useRestoreScrollPosition(room._id);\n\n\tconst { messageListRef } = useMessageListNavigation();\n\n\tconst { handleNewMessageButtonClick, handleJumpToRecentButtonClick, handleComposerResize, hasNewMessages, newMessagesScrollRef } =\n\t\tuseHasNewMessages(room._id, user?._id, atBottomRef, {\n\t\t\tsendToBottom,\n\t\t\tsendToBottomIfNecessary,\n\t\t\tisAtBottom,\n\t\t});\n\n\tconst innerRef = useMergedRefs(\n\t\tdateScrollInnerRef,\n\t\tinnerBoxRef,\n\t\trestoreScrollPositionInnerRef,\n\t\tisAtBottomInnerRef,\n\t\tnewMessagesScrollRef,\n\t\tleaderBannerInnerRef,\n\t\tunreadBarInnerRef,\n\t\tgetMoreInnerRef,\n\n\t\tmessageListRef,\n\t);\n\n\tconst wrapperBoxRefs = useMergedRefs(unreadBarWrapperRef, leaderBannerWrapperRef);\n\n\tconst handleNavigateToPreviousMessage = useCallback((): void => {\n\t\tchat.messageEditing.toPreviousMessage();\n\t}, [chat.messageEditing]);\n\n\tconst handleNavigateToNextMessage = useCallback((): void => {\n\t\tchat.messageEditing.toNextMessage();\n\t}, [chat.messageEditing]);\n\n\tconst handleCloseFlexTab: MouseEventHandler<HTMLElement> = useCallback(\n\t\t(e): void => {\n\t\t\t/*\n\t\t\t * check if the element is a button or anchor\n\t\t\t * it considers the role as well\n\t\t\t * usually, the flex tab is closed when clicking outside of it\n\t\t\t * but if the user clicks on a button or anchor, we don't want to close the flex tab\n\t\t\t * because the user could be actually trying to open the flex tab through those elements\n\t\t\t */\n\n\t\t\tconst checkElement = (element: HTMLElement | null): boolean => {\n\t\t\t\tif (!element) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (element instanceof HTMLButtonElement || element.getAttribute('role') === 'button') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (element instanceof HTMLAnchorElement || element.getAttribute('role') === 'link') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn checkElement(element.parentElement);\n\t\t\t};\n\n\t\t\tif (checkElement(e.target as HTMLElement)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttoolbox.closeTab();\n\t\t},\n\t\t[toolbox],\n\t);\n\n\tconst { openUserCard, triggerProps } = useUserCard();\n\n\tconst handleOpenUserCard = useCallback(\n\t\t(event: UIEvent, username: IUser['username']) => {\n\t\t\tif (!username) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\topenUserCard(event, username);\n\t\t},\n\t\t[openUserCard],\n\t);\n\n\tuseGoToHomeOnRemoved(room, user?._id);\n\tuseReadMessageWindowEvents();\n\tuseQuoteMessageByUrl();\n\n\tconst { data: roomLeader } = useReactiveQuery(['rooms', room._id, 'leader', { not: user?._id }], () => {\n\t\tconst leaderRoomRole = RoomRoles.findOne({\n\t\t\t'rid': room._id,\n\t\t\t'roles': 'leader',\n\t\t\t'u._id': { $ne: user?._id },\n\t\t});\n\n\t\tif (!leaderRoomRole) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\t...leaderRoomRole.u,\n\t\t\tname: useRealName ? leaderRoomRole.u.name || leaderRoomRole.u.username : leaderRoomRole.u.username,\n\t\t};\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t{!isLayoutEmbedded && room.announcement && <Announcement announcement={room.announcement} announcementDetails={undefined} />}\n\t\t\t<Box key={room._id} className={['main-content-flex', listStyle]}>\n\t\t\t\t<section\n\t\t\t\t\trole='presentation'\n\t\t\t\t\tclassName={`messages-container flex-tab-main-content ${admin ? 'admin' : ''}`}\n\t\t\t\t\tid={`chat-window-${room._id}`}\n\t\t\t\t\tonClick={hideFlexTab && handleCloseFlexTab}\n\t\t\t\t>\n\t\t\t\t\t<div className='messages-container-wrapper'>\n\t\t\t\t\t\t<div className='messages-container-main' ref={wrapperBoxRefs} {...fileUploadTriggerProps}>\n\t\t\t\t\t\t\t<DropTargetOverlay {...fileUploadOverlayProps} />\n\t\t\t\t\t\t\t<Box position='absolute' w='full'>\n\t\t\t\t\t\t\t\t{roomLeader ? (\n\t\t\t\t\t\t\t\t\t<LeaderBar\n\t\t\t\t\t\t\t\t\t\t_id={roomLeader._id}\n\t\t\t\t\t\t\t\t\t\tusername={roomLeader.username}\n\t\t\t\t\t\t\t\t\t\tname={roomLeader.name}\n\t\t\t\t\t\t\t\t\t\tvisible={!hideLeaderHeader}\n\t\t\t\t\t\t\t\t\t\tonAvatarClick={handleOpenUserCard}\n\t\t\t\t\t\t\t\t\t\ttriggerProps={triggerProps}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t<div className={['container-bars', uploads.length && 'show'].filter(isTruthy).join(' ')}>\n\t\t\t\t\t\t\t\t\t{uploads.map((upload) => (\n\t\t\t\t\t\t\t\t\t\t<UploadProgressIndicator\n\t\t\t\t\t\t\t\t\t\t\tkey={upload.id}\n\t\t\t\t\t\t\t\t\t\t\tid={upload.id}\n\t\t\t\t\t\t\t\t\t\t\tname={upload.name}\n\t\t\t\t\t\t\t\t\t\t\tpercentage={upload.percentage}\n\t\t\t\t\t\t\t\t\t\t\terror={upload.error instanceof Error ? upload.error.message : undefined}\n\t\t\t\t\t\t\t\t\t\t\tonClose={handleUploadProgressClose}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{Boolean(unread) && (\n\t\t\t\t\t\t\t\t\t<UnreadMessagesIndicator\n\t\t\t\t\t\t\t\t\t\tcount={unread}\n\t\t\t\t\t\t\t\t\t\tonJumpButtonClick={handleUnreadBarJumpToButtonClick}\n\t\t\t\t\t\t\t\t\t\tonMarkAsReadButtonClick={handleMarkAsReadButtonClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<BubbleDate ref={bubbleRef} {...bubbleDate} />\n\t\t\t\t\t\t\t</Box>\n\n\t\t\t\t\t\t\t<div className={['messages-box', roomLeader && !hideLeaderHeader && 'has-leader'].filter(isTruthy).join(' ')}>\n\t\t\t\t\t\t\t\t<JumpToRecentMessageButton visible={hasNewMessages} onClick={handleNewMessageButtonClick} text={t('New_messages')} />\n\t\t\t\t\t\t\t\t<JumpToRecentMessageButton\n\t\t\t\t\t\t\t\t\tvisible={hasMoreNextMessages}\n\t\t\t\t\t\t\t\t\tonClick={handleJumpToRecentButtonClick}\n\t\t\t\t\t\t\t\t\ttext={t('Jump_to_recent_messages')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{!canPreview ? (\n\t\t\t\t\t\t\t\t\t<div className='content room-not-found error-color'>\n\t\t\t\t\t\t\t\t\t\t<div>{t('You_must_join_to_view_messages_in_this_channel')}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\t\t\t\t'wrapper',\n\t\t\t\t\t\t\t\t\t\thasMoreNextMessages && 'has-more-next',\n\t\t\t\t\t\t\t\t\t\thideUsernames && 'hide-usernames',\n\t\t\t\t\t\t\t\t\t\t!displayAvatars && 'hide-avatar',\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t.filter(isTruthy)\n\t\t\t\t\t\t\t\t\t\t.join(' ')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<MessageListErrorBoundary>\n\t\t\t\t\t\t\t\t\t\t<CustomScrollbars ref={innerRef}>\n\t\t\t\t\t\t\t\t\t\t\t<ul className='messages-list' aria-label={t('Message_list')} aria-busy={isLoadingMoreMessages}>\n\t\t\t\t\t\t\t\t\t\t\t\t{canPreview ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{hasMorePreviousMessages ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='load-more'>{isLoadingMoreMessages ? <LoadingMessagesIndicator /> : null}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RoomForeword user={user} room={room} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{retentionPolicy?.isActive ? <RetentionPolicyWarning room={room} /> : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t<MessageList rid={room._id} messageListRef={innerBoxRef} />\n\t\t\t\t\t\t\t\t\t\t\t\t{hasMoreNextMessages ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='load-more'>{isLoadingMoreMessages ? <LoadingMessagesIndicator /> : null}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</CustomScrollbars>\n\t\t\t\t\t\t\t\t\t</MessageListErrorBoundary>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<RoomComposer>\n\t\t\t\t\t\t\t\t<ComposerContainer\n\t\t\t\t\t\t\t\t\tsubscription={subscription}\n\t\t\t\t\t\t\t\t\tonResize={handleComposerResize}\n\t\t\t\t\t\t\t\t\tonNavigateToPreviousMessage={handleNavigateToPreviousMessage}\n\t\t\t\t\t\t\t\t\tonNavigateToNextMessage={handleNavigateToNextMessage}\n\t\t\t\t\t\t\t\t\tonUploadFiles={handleUploadFiles}\n\t\t\t\t\t\t\t\t\t// TODO: send previewUrls param\n\t\t\t\t\t\t\t\t\t// previewUrls={}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</RoomComposer>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</Box>\n\t\t</>\n\t);\n};\n\nexport default memo(RoomBody);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/body/RoomBody.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/body/RoomBody.tsx","inputSourceMap":{"version":3,"file":"client/views/room/body/RoomBody.tsx","sourceRoot":"","sources":["client/views/room/body/RoomBody.tsx"],"names":[],"mappings":"AACA,OAAO,EAAE,GAAG,EAAE,MAAM,uBAAuB,CAAC;AAC5C,OAAO,EAAE,aAAa,EAAE,MAAM,6BAA6B,CAAC;AAC5D,OAAO,EAAE,aAAa,EAAE,OAAO,EAAE,UAAU,EAAE,cAAc,EAAE,OAAO,EAAE,iBAAiB,EAAE,MAAM,0BAA0B,CAAC;AAE1H,OAAO,KAAK,EAAE,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AAElE,OAAO,EAAE,SAAS,EAAE,MAAM,+BAA+B,CAAC;AAC1D,OAAO,EAAE,QAAQ,EAAE,MAAM,0BAA0B,CAAC;AACpD,OAAO,EAAE,gBAAgB,EAAE,MAAM,sCAAsC,CAAC;AACxE,OAAO,EAAE,iBAAiB,EAAE,MAAM,kCAAkC,CAAC;AACrE,OAAO,EAAE,gBAAgB,EAAE,MAAM,iCAAiC,CAAC;AACnE,OAAO,YAAY,MAAM,iBAAiB,CAAC;AAC3C,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAC3C,OAAO,EAAE,WAAW,EAAE,MAAM,gBAAgB,CAAC;AAC7C,OAAO,wBAAwB,MAAM,yCAAyC,CAAC;AAC/E,OAAO,iBAAiB,MAAM,+BAA+B,CAAC;AAC9D,OAAO,YAAY,MAAM,uCAAuC,CAAC;AACjE,OAAO,EAAE,OAAO,EAAE,MAAM,yBAAyB,CAAC;AAClD,OAAO,EAAE,OAAO,EAAE,mBAAmB,EAAE,eAAe,EAAE,MAAM,yBAAyB,CAAC;AACxF,OAAO,EAAE,cAAc,EAAE,MAAM,gCAAgC,CAAC;AAChE,OAAO,EAAE,WAAW,EAAE,MAAM,6BAA6B,CAAC;AAC1D,OAAO,EAAE,aAAa,EAAE,MAAM,wBAAwB,CAAC;AACvD,OAAO,EAAE,wBAAwB,EAAE,MAAM,mCAAmC,CAAC;AAC7E,OAAO,EAAE,kBAAkB,EAAE,MAAM,6BAA6B,CAAC;AACjE,OAAO,iBAAiB,MAAM,qBAAqB,CAAC;AACpD,OAAO,yBAAyB,MAAM,6BAA6B,CAAC;AACpE,OAAO,SAAS,MAAM,aAAa,CAAC;AACpC,OAAO,wBAAwB,MAAM,4BAA4B,CAAC;AAClE,OAAO,sBAAsB,MAAM,0BAA0B,CAAC;AAC9D,OAAO,YAAY,MAAM,6BAA6B,CAAC;AACvD,OAAO,uBAAuB,MAAM,2BAA2B,CAAC;AAChE,OAAO,uBAAuB,MAAM,2BAA2B,CAAC;AAChE,OAAO,EAAE,aAAa,EAAE,MAAM,uBAAuB,CAAC;AACtD,OAAO,EAAE,UAAU,EAAE,MAAM,oBAAoB,CAAC;AAChD,OAAO,EAAE,oBAAoB,EAAE,MAAM,8BAA8B,CAAC;AACpE,OAAO,EAAE,iBAAiB,EAAE,MAAM,2BAA2B,CAAC;AAC9D,OAAO,EAAE,eAAe,EAAE,MAAM,yBAAyB,CAAC;AAC1D,OAAO,EAAE,iBAAiB,EAAE,MAAM,2BAA2B,CAAC;AAC9D,OAAO,EAAE,oBAAoB,EAAE,MAAM,8BAA8B,CAAC;AACpE,OAAO,EAAE,0BAA0B,EAAE,MAAM,oCAAoC,CAAC;AAChF,OAAO,EAAE,wBAAwB,EAAE,MAAM,kCAAkC,CAAC;AAC5E,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;AAE5D,MAAM,QAAQ,GAAG,GAAiB,EAAE;IACnC,MAAM,IAAI,GAAG,OAAO,EAAE,CAAC;IACvB,IAAI,CAAC,IAAI,EAAE,CAAC;QACX,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC5C,CAAC;IAED,MAAM,CAAC,GAAG,cAAc,EAAE,CAAC;IAC3B,MAAM,gBAAgB,GAAG,iBAAiB,EAAE,CAAC;IAC7C,MAAM,IAAI,GAAG,OAAO,EAAE,CAAC;IACvB,MAAM,IAAI,GAAG,OAAO,EAAE,CAAC;IACvB,MAAM,OAAO,GAAG,cAAc,EAAE,CAAC;IACjC,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;IAC/B,MAAM,YAAY,GAAG,mBAAmB,EAAE,CAAC;IAE3C,MAAM,eAAe,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC;IAEjD,MAAM,WAAW,GAAG,iBAAiB,CAAU,aAAa,CAAC,IAAI,SAAS,CAAC;IAC3E,MAAM,aAAa,GAAG,iBAAiB,CAAU,eAAe,CAAC,CAAC;IAClE,MAAM,cAAc,GAAG,iBAAiB,CAAU,gBAAgB,CAAC,CAAC;IAEpE,MAAM,EAAE,uBAAuB,EAAE,mBAAmB,EAAE,qBAAqB,EAAE,GAAG,eAAe,EAAE,CAAC;IAElG,MAAM,kBAAkB,GAAG,UAAU,CAAC,6BAA6B,CAAwB,CAAC;IAE5F,MAAM,qBAAqB,GAAG,aAAa,CAAC,gBAAgB,CAAC,CAAC;IAE9D,MAAM,UAAU,GAAG,CAAC,CAAC,YAAY,CAAC;IAElC,MAAM,UAAU,GAAG,OAAO,CAAC,GAAG,EAAE;QAC/B,IAAI,IAAI,IAAI,IAAI,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC;YAC5B,OAAO,IAAI,CAAC;QACb,CAAC;QAED,IAAI,kBAAkB,KAAK,IAAI,EAAE,CAAC;YACjC,OAAO,IAAI,CAAC;QACb,CAAC;QAED,IAAI,qBAAqB,EAAE,CAAC;YAC3B,OAAO,IAAI,CAAC;QACb,CAAC;QAED,OAAO,UAAU,CAAC;IACnB,CAAC,EAAE,CAAC,kBAAkB,EAAE,qBAAqB,EAAE,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC;IAElE,MAAM,WAAW,GAAG,UAAU,CAAC,kBAAkB,CAAY,CAAC;IAE9D,MAAM,WAAW,GAAG,MAAM,CAAwB,IAAI,CAAC,CAAC;IAExD,MAAM,EACL,UAAU,EAAE,mBAAmB,EAC/B,QAAQ,EAAE,iBAAiB,EAC3B,gCAAgC,EAChC,2BAA2B,EAC3B,OAAO,EAAE,CAAC,MAAM,CAAC,GACjB,GAAG,eAAe,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;IAExC,MAAM,EAAE,QAAQ,EAAE,kBAAkB,EAAE,SAAS,EAAE,SAAS,EAAE,GAAG,UAAU,EAAE,GAAG,aAAa,EAAE,CAAC;IAE9F,MAAM,EAAE,QAAQ,EAAE,kBAAkB,EAAE,WAAW,EAAE,YAAY,EAAE,uBAAuB,EAAE,UAAU,EAAE,GAAG,iBAAiB,EAAE,CAAC;IAE7H,MAAM,EAAE,QAAQ,EAAE,eAAe,EAAE,GAAG,UAAU,CAAC,IAAI,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC;IAExE,MAAM,EAAE,UAAU,EAAE,sBAAsB,EAAE,gBAAgB,EAAE,QAAQ,EAAE,oBAAoB,EAAE,GAAG,eAAe,EAAE,CAAC;IAEnH,MAAM,EACL,OAAO,EACP,iBAAiB,EACjB,yBAAyB,EACzB,SAAS,EAAE,CAAC,sBAAsB,EAAE,sBAAsB,CAAC,GAC3D,GAAG,aAAa,EAAE,CAAC;IAEpB,MAAM,EAAE,QAAQ,EAAE,6BAA6B,EAAE,GAAG,wBAAwB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAEvF,MAAM,EAAE,cAAc,EAAE,GAAG,wBAAwB,EAAE,CAAC;IAEtD,MAAM,EAAE,2BAA2B,EAAE,6BAA6B,EAAE,oBAAoB,EAAE,cAAc,EAAE,oBAAoB,EAAE,GAC/H,iBAAiB,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,WAAW,EAAE;QACnD,YAAY;QACZ,uBAAuB;QACvB,UAAU;KACV,CAAC,CAAC;IAEJ,MAAM,QAAQ,GAAG,aAAa,CAC7B,kBAAkB,EAClB,WAAW,EACX,6BAA6B,EAC7B,kBAAkB,EAClB,oBAAoB,EACpB,oBAAoB,EACpB,iBAAiB,EACjB,eAAe,EAEf,cAAc,CACd,CAAC;IAEF,MAAM,cAAc,GAAG,aAAa,CAAC,mBAAmB,EAAE,sBAAsB,CAAC,CAAC;IAElF,MAAM,+BAA+B,GAAG,WAAW,CAAC,GAAS,EAAE;QAC9D,IAAI,CAAC,cAAc,CAAC,iBAAiB,EAAE,CAAC;IACzC,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;IAE1B,MAAM,2BAA2B,GAAG,WAAW,CAAC,GAAS,EAAE;QAC1D,IAAI,CAAC,cAAc,CAAC,aAAa,EAAE,CAAC;IACrC,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;IAE1B,MAAM,kBAAkB,GAAmC,WAAW,CACrE,CAAC,CAAC,EAAQ,EAAE;QACX;;;;;;WAMG;QAEH,MAAM,YAAY,GAAG,CAAC,OAA2B,EAAW,EAAE;YAC7D,IAAI,CAAC,OAAO,EAAE,CAAC;gBACd,OAAO,KAAK,CAAC;YACd,CAAC;YACD,IAAI,OAAO,YAAY,iBAAiB,IAAI,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,QAAQ,EAAE,CAAC;gBACvF,OAAO,IAAI,CAAC;YACb,CAAC;YACD,IAAI,OAAO,YAAY,iBAAiB,IAAI,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,MAAM,EAAE,CAAC;gBACrF,OAAO,IAAI,CAAC;YACb,CAAC;YACD,OAAO,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QAC5C,CAAC,CAAC;QAEF,IAAI,YAAY,CAAC,CAAC,CAAC,MAAqB,CAAC,EAAE,CAAC;YAC3C,OAAO;QACR,CAAC;QAED,OAAO,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC,EACD,CAAC,OAAO,CAAC,CACT,CAAC;IAEF,MAAM,EAAE,YAAY,EAAE,YAAY,EAAE,GAAG,WAAW,EAAE,CAAC;IAErD,MAAM,kBAAkB,GAAG,WAAW,CACrC,CAAC,KAAc,EAAE,QAA2B,EAAE,EAAE;QAC/C,IAAI,CAAC,QAAQ,EAAE,CAAC;YACf,OAAO;QACR,CAAC;QAED,YAAY,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;IAC/B,CAAC,EACD,CAAC,YAAY,CAAC,CACd,CAAC;IAEF,oBAAoB,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;IACtC,0BAA0B,EAAE,CAAC;IAC7B,oBAAoB,EAAE,CAAC;IAEvB,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,gBAAgB,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE;QACrG,MAAM,cAAc,GAAG,SAAS,CAAC,OAAO,CAAC;YACxC,KAAK,EAAE,IAAI,CAAC,GAAG;YACf,OAAO,EAAE,QAAQ;YACjB,OAAO,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE;SAC3B,CAAC,CAAC;QAEH,IAAI,CAAC,cAAc,EAAE,CAAC;YACrB,OAAO,IAAI,CAAC;QACb,CAAC;QAED,OAAO;YACN,GAAG,cAAc,CAAC,CAAC;YACnB,IAAI,EAAE,WAAW,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,IAAI,IAAI,cAAc,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,QAAQ;SAClG,CAAC;IACH,CAAC,CAAC,CAAC;IAEH,OAAO,CACN,EACC;GAAA,CAAC,CAAC,gBAAgB,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,mBAAmB,CAAC,CAAC,SAAS,CAAC,EAAG,CAC5H;GAAA,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,mBAAmB,EAAE,SAAS,CAAC,CAAC,CAC/D;IAAA,CAAC,OAAO,CACP,IAAI,CAAC,cAAc,CACnB,SAAS,CAAC,CAAC,4CAA4C,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAC9E,EAAE,CAAC,CAAC,eAAe,IAAI,CAAC,GAAG,EAAE,CAAC,CAC9B,OAAO,CAAC,CAAC,WAAW,IAAI,kBAAkB,CAAC,CAE3C;KAAA,CAAC,GAAG,CAAC,SAAS,CAAC,4BAA4B,CAC1C;MAAA,CAAC,GAAG,CAAC,SAAS,CAAC,yBAAyB,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC,IAAI,sBAAsB,CAAC,CACxF;OAAA,CAAC,iBAAiB,CAAC,IAAI,sBAAsB,CAAC,EAC9C;OAAA,CAAC,GAAG,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAChC;QAAA,CAAC,UAAU,CAAC,CAAC,CAAC,CACb,CAAC,SAAS,CACT,GAAG,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,CACpB,QAAQ,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC,CAC9B,IAAI,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CACtB,OAAO,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAC3B,aAAa,CAAC,CAAC,kBAAkB,CAAC,CAClC,YAAY,CAAC,CAAC,YAAY,CAAC,EAC1B,CACF,CAAC,CAAC,CAAC,IAAI,CACR;QAAA,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,gBAAgB,EAAE,OAAO,CAAC,MAAM,IAAI,MAAM,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CACvF;SAAA,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,CACxB,CAAC,uBAAuB,CACvB,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CACf,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CACd,IAAI,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAClB,UAAU,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAC9B,KAAK,CAAC,CAAC,MAAM,CAAC,KAAK,YAAY,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CACxE,OAAO,CAAC,CAAC,yBAAyB,CAAC,EAClC,CACF,CAAC,CACH;QAAA,EAAE,GAAG,CACL;QAAA,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CACnB,CAAC,uBAAuB,CACvB,KAAK,CAAC,CAAC,MAAM,CAAC,CACd,iBAAiB,CAAC,CAAC,gCAAgC,CAAC,CACpD,uBAAuB,CAAC,CAAC,2BAA2B,CAAC,EACpD,CACF,CAED;;QAAA,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,UAAU,CAAC,EAC5C;OAAA,EAAE,GAAG,CAEL;;OAAA,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,cAAc,EAAE,UAAU,IAAI,CAAC,gBAAgB,IAAI,YAAY,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAC5G;QAAA,CAAC,yBAAyB,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,CAAC,2BAA2B,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,EAClH;QAAA,CAAC,yBAAyB,CACzB,OAAO,CAAC,CAAC,mBAAmB,CAAC,CAC7B,OAAO,CAAC,CAAC,6BAA6B,CAAC,CACvC,IAAI,CAAC,CAAC,CAAC,CAAC,yBAAyB,CAAC,CAAC,EAEpC;QAAA,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CACd,CAAC,GAAG,CAAC,SAAS,CAAC,oCAAoC,CAClD;UAAA,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,gDAAgD,CAAC,CAAC,EAAE,GAAG,CAChE;SAAA,EAAE,GAAG,CAAC,CACN,CAAC,CAAC,CAAC,IAAI,CACR;QAAA,CAAC,GAAG,CACH,SAAS,CAAC,CAAC;YACV,SAAS;YACT,mBAAmB,IAAI,eAAe;YACtC,aAAa,IAAI,gBAAgB;YACjC,CAAC,cAAc,IAAI,aAAa;SAChC;aACC,MAAM,CAAC,QAAQ,CAAC;aAChB,IAAI,CAAC,GAAG,CAAC,CAAC,CAEZ;SAAA,CAAC,wBAAwB,CACxB;UAAA,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,CAC/B;WAAA,CAAC,EAAE,CAAC,SAAS,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,qBAAqB,CAAC,CAC7F;YAAA,CAAC,UAAU,CAAC,CAAC,CAAC,CACb,EACC;cAAA,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAC1B,CAAC,EAAE,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,AAAD,EAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAC5F,CAAC,CAAC,CAAC,CACH,CAAC,EAAE,CACF;gBAAA,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,EACrC;gBAAA,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,EAAG,CAAC,CAAC,CAAC,IAAI,CAC3E;eAAA,EAAE,EAAE,CAAC,CACL,CACF;aAAA,GAAG,CACH,CAAC,CAAC,CAAC,IAAI,CACR;YAAA,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC,WAAW,CAAC,EACxD;YAAA,CAAC,mBAAmB,CAAC,CAAC,CAAC,CACtB,CAAC,EAAE,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,wBAAwB,CAAC,AAAD,EAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAC5F,CAAC,CAAC,CAAC,IAAI,CACT;WAAA,EAAE,EAAE,CACL;UAAA,EAAE,gBAAgB,CACnB;SAAA,EAAE,wBAAwB,CAC3B;QAAA,EAAE,GAAG,CACN;OAAA,EAAE,GAAG,CACL;OAAA,CAAC,YAAY,CACZ;QAAA,CAAC,iBAAiB,CACjB,YAAY,CAAC,CAAC,YAAY,CAAC,CAC3B,QAAQ,CAAC,CAAC,oBAAoB,CAAC,CAC/B,2BAA2B,CAAC,CAAC,+BAA+B,CAAC,CAC7D,uBAAuB,CAAC,CAAC,2BAA2B,CAAC,CACrD,aAAa,CAAC,CAAC,iBAAiB,CAAC,EAInC;OAAA,EAAE,YAAY,CACf;MAAA,EAAE,GAAG,CACN;KAAA,EAAE,GAAG,CACN;IAAA,EAAE,OAAO,CACV;GAAA,EAAE,GAAG,CACN;EAAA,GAAG,CACH,CAAC;AACH,CAAC,CAAC;AAEF,eAAe,IAAI,CAAC,QAAQ,CAAC,CAAC","sourcesContent":["import type { IUser } from '@rocket.chat/core-typings';\nimport { Box } from '@rocket.chat/fuselage';\nimport { useMergedRefs } from '@rocket.chat/fuselage-hooks';\nimport { usePermission, useRole, useSetting, useTranslation, useUser, useUserPreference } from '@rocket.chat/ui-contexts';\nimport type { MouseEventHandler, ReactElement, UIEvent } from 'react';\nimport React, { memo, useCallback, useMemo, useRef } from 'react';\n\nimport { RoomRoles } from '../../../../app/models/client';\nimport { isTruthy } from '../../../../lib/isTruthy';\nimport { CustomScrollbars } from '../../../components/CustomScrollbars';\nimport { useEmbeddedLayout } from '../../../hooks/useEmbeddedLayout';\nimport { useReactiveQuery } from '../../../hooks/useReactiveQuery';\nimport Announcement from '../Announcement';\nimport { BubbleDate } from '../BubbleDate';\nimport { MessageList } from '../MessageList';\nimport MessageListErrorBoundary from '../MessageList/MessageListErrorBoundary';\nimport ComposerContainer from '../composer/ComposerContainer';\nimport RoomComposer from '../composer/RoomComposer/RoomComposer';\nimport { useChat } from '../contexts/ChatContext';\nimport { useRoom, useRoomSubscription, useRoomMessages } from '../contexts/RoomContext';\nimport { useRoomToolbox } from '../contexts/RoomToolboxContext';\nimport { useUserCard } from '../contexts/UserCardContext';\nimport { useDateScroll } from '../hooks/useDateScroll';\nimport { useMessageListNavigation } from '../hooks/useMessageListNavigation';\nimport { useRetentionPolicy } from '../hooks/useRetentionPolicy';\nimport DropTargetOverlay from './DropTargetOverlay';\nimport JumpToRecentMessageButton from './JumpToRecentMessageButton';\nimport LeaderBar from './LeaderBar';\nimport LoadingMessagesIndicator from './LoadingMessagesIndicator';\nimport RetentionPolicyWarning from './RetentionPolicyWarning';\nimport RoomForeword from './RoomForeword/RoomForeword';\nimport UnreadMessagesIndicator from './UnreadMessagesIndicator';\nimport UploadProgressIndicator from './UploadProgressIndicator';\nimport { useFileUpload } from './hooks/useFileUpload';\nimport { useGetMore } from './hooks/useGetMore';\nimport { useGoToHomeOnRemoved } from './hooks/useGoToHomeOnRemoved';\nimport { useHasNewMessages } from './hooks/useHasNewMessages';\nimport { useLeaderBanner } from './hooks/useLeaderBanner';\nimport { useListIsAtBottom } from './hooks/useListIsAtBottom';\nimport { useQuoteMessageByUrl } from './hooks/useQuoteMessageByUrl';\nimport { useReadMessageWindowEvents } from './hooks/useReadMessageWindowEvents';\nimport { useRestoreScrollPosition } from './hooks/useRestoreScrollPosition';\nimport { useHandleUnread } from './hooks/useUnreadMessages';\n\nconst RoomBody = (): ReactElement => {\n\tconst chat = useChat();\n\tif (!chat) {\n\t\tthrow new Error('No ChatContext provided');\n\t}\n\n\tconst t = useTranslation();\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\tconst room = useRoom();\n\tconst user = useUser();\n\tconst toolbox = useRoomToolbox();\n\tconst admin = useRole('admin');\n\tconst subscription = useRoomSubscription();\n\n\tconst retentionPolicy = useRetentionPolicy(room);\n\n\tconst hideFlexTab = useUserPreference<boolean>('hideFlexTab') || undefined;\n\tconst hideUsernames = useUserPreference<boolean>('hideUsernames');\n\tconst displayAvatars = useUserPreference<boolean>('displayAvatars');\n\n\tconst { hasMorePreviousMessages, hasMoreNextMessages, isLoadingMoreMessages } = useRoomMessages();\n\n\tconst allowAnonymousRead = useSetting('Accounts_AllowAnonymousRead') as boolean | undefined;\n\n\tconst canPreviewChannelRoom = usePermission('preview-c-room');\n\n\tconst subscribed = !!subscription;\n\n\tconst canPreview = useMemo(() => {\n\t\tif (room && room.t !== 'c') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (allowAnonymousRead === true) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (canPreviewChannelRoom) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn subscribed;\n\t}, [allowAnonymousRead, canPreviewChannelRoom, room, subscribed]);\n\n\tconst useRealName = useSetting('UI_Use_Real_Name') as boolean;\n\n\tconst innerBoxRef = useRef<HTMLDivElement | null>(null);\n\n\tconst {\n\t\twrapperRef: unreadBarWrapperRef,\n\t\tinnerRef: unreadBarInnerRef,\n\t\thandleUnreadBarJumpToButtonClick,\n\t\thandleMarkAsReadButtonClick,\n\t\tcounter: [unread],\n\t} = useHandleUnread(room, subscription);\n\n\tconst { innerRef: dateScrollInnerRef, bubbleRef, listStyle, ...bubbleDate } = useDateScroll();\n\n\tconst { innerRef: isAtBottomInnerRef, atBottomRef, sendToBottom, sendToBottomIfNecessary, isAtBottom } = useListIsAtBottom();\n\n\tconst { innerRef: getMoreInnerRef } = useGetMore(room._id, atBottomRef);\n\n\tconst { wrapperRef: leaderBannerWrapperRef, hideLeaderHeader, innerRef: leaderBannerInnerRef } = useLeaderBanner();\n\n\tconst {\n\t\tuploads,\n\t\thandleUploadFiles,\n\t\thandleUploadProgressClose,\n\t\ttargeDrop: [fileUploadTriggerProps, fileUploadOverlayProps],\n\t} = useFileUpload();\n\n\tconst { innerRef: restoreScrollPositionInnerRef } = useRestoreScrollPosition(room._id);\n\n\tconst { messageListRef } = useMessageListNavigation();\n\n\tconst { handleNewMessageButtonClick, handleJumpToRecentButtonClick, handleComposerResize, hasNewMessages, newMessagesScrollRef } =\n\t\tuseHasNewMessages(room._id, user?._id, atBottomRef, {\n\t\t\tsendToBottom,\n\t\t\tsendToBottomIfNecessary,\n\t\t\tisAtBottom,\n\t\t});\n\n\tconst innerRef = useMergedRefs(\n\t\tdateScrollInnerRef,\n\t\tinnerBoxRef,\n\t\trestoreScrollPositionInnerRef,\n\t\tisAtBottomInnerRef,\n\t\tnewMessagesScrollRef,\n\t\tleaderBannerInnerRef,\n\t\tunreadBarInnerRef,\n\t\tgetMoreInnerRef,\n\n\t\tmessageListRef,\n\t);\n\n\tconst wrapperBoxRefs = useMergedRefs(unreadBarWrapperRef, leaderBannerWrapperRef);\n\n\tconst handleNavigateToPreviousMessage = useCallback((): void => {\n\t\tchat.messageEditing.toPreviousMessage();\n\t}, [chat.messageEditing]);\n\n\tconst handleNavigateToNextMessage = useCallback((): void => {\n\t\tchat.messageEditing.toNextMessage();\n\t}, [chat.messageEditing]);\n\n\tconst handleCloseFlexTab: MouseEventHandler<HTMLElement> = useCallback(\n\t\t(e): void => {\n\t\t\t/*\n\t\t\t * check if the element is a button or anchor\n\t\t\t * it considers the role as well\n\t\t\t * usually, the flex tab is closed when clicking outside of it\n\t\t\t * but if the user clicks on a button or anchor, we don't want to close the flex tab\n\t\t\t * because the user could be actually trying to open the flex tab through those elements\n\t\t\t */\n\n\t\t\tconst checkElement = (element: HTMLElement | null): boolean => {\n\t\t\t\tif (!element) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (element instanceof HTMLButtonElement || element.getAttribute('role') === 'button') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (element instanceof HTMLAnchorElement || element.getAttribute('role') === 'link') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn checkElement(element.parentElement);\n\t\t\t};\n\n\t\t\tif (checkElement(e.target as HTMLElement)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttoolbox.closeTab();\n\t\t},\n\t\t[toolbox],\n\t);\n\n\tconst { openUserCard, triggerProps } = useUserCard();\n\n\tconst handleOpenUserCard = useCallback(\n\t\t(event: UIEvent, username: IUser['username']) => {\n\t\t\tif (!username) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\topenUserCard(event, username);\n\t\t},\n\t\t[openUserCard],\n\t);\n\n\tuseGoToHomeOnRemoved(room, user?._id);\n\tuseReadMessageWindowEvents();\n\tuseQuoteMessageByUrl();\n\n\tconst { data: roomLeader } = useReactiveQuery(['rooms', room._id, 'leader', { not: user?._id }], () => {\n\t\tconst leaderRoomRole = RoomRoles.findOne({\n\t\t\t'rid': room._id,\n\t\t\t'roles': 'leader',\n\t\t\t'u._id': { $ne: user?._id },\n\t\t});\n\n\t\tif (!leaderRoomRole) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\t...leaderRoomRole.u,\n\t\t\tname: useRealName ? leaderRoomRole.u.name || leaderRoomRole.u.username : leaderRoomRole.u.username,\n\t\t};\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t{!isLayoutEmbedded && room.announcement && <Announcement announcement={room.announcement} announcementDetails={undefined} />}\n\t\t\t<Box key={room._id} className={['main-content-flex', listStyle]}>\n\t\t\t\t<section\n\t\t\t\t\trole='presentation'\n\t\t\t\t\tclassName={`messages-container flex-tab-main-content ${admin ? 'admin' : ''}`}\n\t\t\t\t\tid={`chat-window-${room._id}`}\n\t\t\t\t\tonClick={hideFlexTab && handleCloseFlexTab}\n\t\t\t\t>\n\t\t\t\t\t<div className='messages-container-wrapper'>\n\t\t\t\t\t\t<div className='messages-container-main' ref={wrapperBoxRefs} {...fileUploadTriggerProps}>\n\t\t\t\t\t\t\t<DropTargetOverlay {...fileUploadOverlayProps} />\n\t\t\t\t\t\t\t<Box position='absolute' w='full'>\n\t\t\t\t\t\t\t\t{roomLeader ? (\n\t\t\t\t\t\t\t\t\t<LeaderBar\n\t\t\t\t\t\t\t\t\t\t_id={roomLeader._id}\n\t\t\t\t\t\t\t\t\t\tusername={roomLeader.username}\n\t\t\t\t\t\t\t\t\t\tname={roomLeader.name}\n\t\t\t\t\t\t\t\t\t\tvisible={!hideLeaderHeader}\n\t\t\t\t\t\t\t\t\t\tonAvatarClick={handleOpenUserCard}\n\t\t\t\t\t\t\t\t\t\ttriggerProps={triggerProps}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t<div className={['container-bars', uploads.length && 'show'].filter(isTruthy).join(' ')}>\n\t\t\t\t\t\t\t\t\t{uploads.map((upload) => (\n\t\t\t\t\t\t\t\t\t\t<UploadProgressIndicator\n\t\t\t\t\t\t\t\t\t\t\tkey={upload.id}\n\t\t\t\t\t\t\t\t\t\t\tid={upload.id}\n\t\t\t\t\t\t\t\t\t\t\tname={upload.name}\n\t\t\t\t\t\t\t\t\t\t\tpercentage={upload.percentage}\n\t\t\t\t\t\t\t\t\t\t\terror={upload.error instanceof Error ? upload.error.message : undefined}\n\t\t\t\t\t\t\t\t\t\t\tonClose={handleUploadProgressClose}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{Boolean(unread) && (\n\t\t\t\t\t\t\t\t\t<UnreadMessagesIndicator\n\t\t\t\t\t\t\t\t\t\tcount={unread}\n\t\t\t\t\t\t\t\t\t\tonJumpButtonClick={handleUnreadBarJumpToButtonClick}\n\t\t\t\t\t\t\t\t\t\tonMarkAsReadButtonClick={handleMarkAsReadButtonClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<BubbleDate ref={bubbleRef} {...bubbleDate} />\n\t\t\t\t\t\t\t</Box>\n\n\t\t\t\t\t\t\t<div className={['messages-box', roomLeader && !hideLeaderHeader && 'has-leader'].filter(isTruthy).join(' ')}>\n\t\t\t\t\t\t\t\t<JumpToRecentMessageButton visible={hasNewMessages} onClick={handleNewMessageButtonClick} text={t('New_messages')} />\n\t\t\t\t\t\t\t\t<JumpToRecentMessageButton\n\t\t\t\t\t\t\t\t\tvisible={hasMoreNextMessages}\n\t\t\t\t\t\t\t\t\tonClick={handleJumpToRecentButtonClick}\n\t\t\t\t\t\t\t\t\ttext={t('Jump_to_recent_messages')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{!canPreview ? (\n\t\t\t\t\t\t\t\t\t<div className='content room-not-found error-color'>\n\t\t\t\t\t\t\t\t\t\t<div>{t('You_must_join_to_view_messages_in_this_channel')}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\t\t\t\t'wrapper',\n\t\t\t\t\t\t\t\t\t\thasMoreNextMessages && 'has-more-next',\n\t\t\t\t\t\t\t\t\t\thideUsernames && 'hide-usernames',\n\t\t\t\t\t\t\t\t\t\t!displayAvatars && 'hide-avatar',\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t.filter(isTruthy)\n\t\t\t\t\t\t\t\t\t\t.join(' ')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<MessageListErrorBoundary>\n\t\t\t\t\t\t\t\t\t\t<CustomScrollbars ref={innerRef}>\n\t\t\t\t\t\t\t\t\t\t\t<ul className='messages-list' aria-label={t('Message_list')} aria-busy={isLoadingMoreMessages}>\n\t\t\t\t\t\t\t\t\t\t\t\t{canPreview ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{hasMorePreviousMessages ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='load-more'>{isLoadingMoreMessages ? <LoadingMessagesIndicator /> : null}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RoomForeword user={user} room={room} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{retentionPolicy?.isActive ? <RetentionPolicyWarning room={room} /> : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t<MessageList rid={room._id} messageListRef={innerBoxRef} />\n\t\t\t\t\t\t\t\t\t\t\t\t{hasMoreNextMessages ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='load-more'>{isLoadingMoreMessages ? <LoadingMessagesIndicator /> : null}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</CustomScrollbars>\n\t\t\t\t\t\t\t\t\t</MessageListErrorBoundary>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<RoomComposer>\n\t\t\t\t\t\t\t\t<ComposerContainer\n\t\t\t\t\t\t\t\t\tsubscription={subscription}\n\t\t\t\t\t\t\t\t\tonResize={handleComposerResize}\n\t\t\t\t\t\t\t\t\tonNavigateToPreviousMessage={handleNavigateToPreviousMessage}\n\t\t\t\t\t\t\t\t\tonNavigateToNextMessage={handleNavigateToNextMessage}\n\t\t\t\t\t\t\t\t\tonUploadFiles={handleUploadFiles}\n\t\t\t\t\t\t\t\t\t// TODO: send previewUrls param\n\t\t\t\t\t\t\t\t\t// previewUrls={}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</RoomComposer>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</Box>\n\t\t</>\n\t);\n};\n\nexport default memo(RoomBody);\n"]}}},"code":"const _excluded = [\"innerRef\", \"bubbleRef\", \"listStyle\"];\nlet _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 1);\nlet _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n}, 2);\nlet Box;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box(v) {\n    Box = v;\n  }\n}, 0);\nlet useMergedRefs;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMergedRefs(v) {\n    useMergedRefs = v;\n  }\n}, 1);\nlet usePermission, useRole, useSetting, useTranslation, useUser, useUserPreference;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  usePermission(v) {\n    usePermission = v;\n  },\n  useRole(v) {\n    useRole = v;\n  },\n  useSetting(v) {\n    useSetting = v;\n  },\n  useTranslation(v) {\n    useTranslation = v;\n  },\n  useUser(v) {\n    useUser = v;\n  },\n  useUserPreference(v) {\n    useUserPreference = v;\n  }\n}, 2);\nlet React, memo, useCallback, useMemo, useRef;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  memo(v) {\n    memo = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  },\n  useRef(v) {\n    useRef = v;\n  }\n}, 3);\nlet RoomRoles;\nmodule.link(\"../../../../app/models/client\", {\n  RoomRoles(v) {\n    RoomRoles = v;\n  }\n}, 4);\nlet isTruthy;\nmodule.link(\"../../../../lib/isTruthy\", {\n  isTruthy(v) {\n    isTruthy = v;\n  }\n}, 5);\nlet CustomScrollbars;\nmodule.link(\"../../../components/CustomScrollbars\", {\n  CustomScrollbars(v) {\n    CustomScrollbars = v;\n  }\n}, 6);\nlet useEmbeddedLayout;\nmodule.link(\"../../../hooks/useEmbeddedLayout\", {\n  useEmbeddedLayout(v) {\n    useEmbeddedLayout = v;\n  }\n}, 7);\nlet useReactiveQuery;\nmodule.link(\"../../../hooks/useReactiveQuery\", {\n  useReactiveQuery(v) {\n    useReactiveQuery = v;\n  }\n}, 8);\nlet Announcement;\nmodule.link(\"../Announcement\", {\n  default(v) {\n    Announcement = v;\n  }\n}, 9);\nlet BubbleDate;\nmodule.link(\"../BubbleDate\", {\n  BubbleDate(v) {\n    BubbleDate = v;\n  }\n}, 10);\nlet MessageList;\nmodule.link(\"../MessageList\", {\n  MessageList(v) {\n    MessageList = v;\n  }\n}, 11);\nlet MessageListErrorBoundary;\nmodule.link(\"../MessageList/MessageListErrorBoundary\", {\n  default(v) {\n    MessageListErrorBoundary = v;\n  }\n}, 12);\nlet ComposerContainer;\nmodule.link(\"../composer/ComposerContainer\", {\n  default(v) {\n    ComposerContainer = v;\n  }\n}, 13);\nlet RoomComposer;\nmodule.link(\"../composer/RoomComposer/RoomComposer\", {\n  default(v) {\n    RoomComposer = v;\n  }\n}, 14);\nlet useChat;\nmodule.link(\"../contexts/ChatContext\", {\n  useChat(v) {\n    useChat = v;\n  }\n}, 15);\nlet useRoom, useRoomSubscription, useRoomMessages;\nmodule.link(\"../contexts/RoomContext\", {\n  useRoom(v) {\n    useRoom = v;\n  },\n  useRoomSubscription(v) {\n    useRoomSubscription = v;\n  },\n  useRoomMessages(v) {\n    useRoomMessages = v;\n  }\n}, 16);\nlet useRoomToolbox;\nmodule.link(\"../contexts/RoomToolboxContext\", {\n  useRoomToolbox(v) {\n    useRoomToolbox = v;\n  }\n}, 17);\nlet useUserCard;\nmodule.link(\"../contexts/UserCardContext\", {\n  useUserCard(v) {\n    useUserCard = v;\n  }\n}, 18);\nlet useDateScroll;\nmodule.link(\"../hooks/useDateScroll\", {\n  useDateScroll(v) {\n    useDateScroll = v;\n  }\n}, 19);\nlet useMessageListNavigation;\nmodule.link(\"../hooks/useMessageListNavigation\", {\n  useMessageListNavigation(v) {\n    useMessageListNavigation = v;\n  }\n}, 20);\nlet useRetentionPolicy;\nmodule.link(\"../hooks/useRetentionPolicy\", {\n  useRetentionPolicy(v) {\n    useRetentionPolicy = v;\n  }\n}, 21);\nlet DropTargetOverlay;\nmodule.link(\"./DropTargetOverlay\", {\n  default(v) {\n    DropTargetOverlay = v;\n  }\n}, 22);\nlet JumpToRecentMessageButton;\nmodule.link(\"./JumpToRecentMessageButton\", {\n  default(v) {\n    JumpToRecentMessageButton = v;\n  }\n}, 23);\nlet LeaderBar;\nmodule.link(\"./LeaderBar\", {\n  default(v) {\n    LeaderBar = v;\n  }\n}, 24);\nlet LoadingMessagesIndicator;\nmodule.link(\"./LoadingMessagesIndicator\", {\n  default(v) {\n    LoadingMessagesIndicator = v;\n  }\n}, 25);\nlet RetentionPolicyWarning;\nmodule.link(\"./RetentionPolicyWarning\", {\n  default(v) {\n    RetentionPolicyWarning = v;\n  }\n}, 26);\nlet RoomForeword;\nmodule.link(\"./RoomForeword/RoomForeword\", {\n  default(v) {\n    RoomForeword = v;\n  }\n}, 27);\nlet UnreadMessagesIndicator;\nmodule.link(\"./UnreadMessagesIndicator\", {\n  default(v) {\n    UnreadMessagesIndicator = v;\n  }\n}, 28);\nlet UploadProgressIndicator;\nmodule.link(\"./UploadProgressIndicator\", {\n  default(v) {\n    UploadProgressIndicator = v;\n  }\n}, 29);\nlet useFileUpload;\nmodule.link(\"./hooks/useFileUpload\", {\n  useFileUpload(v) {\n    useFileUpload = v;\n  }\n}, 30);\nlet useGetMore;\nmodule.link(\"./hooks/useGetMore\", {\n  useGetMore(v) {\n    useGetMore = v;\n  }\n}, 31);\nlet useGoToHomeOnRemoved;\nmodule.link(\"./hooks/useGoToHomeOnRemoved\", {\n  useGoToHomeOnRemoved(v) {\n    useGoToHomeOnRemoved = v;\n  }\n}, 32);\nlet useHasNewMessages;\nmodule.link(\"./hooks/useHasNewMessages\", {\n  useHasNewMessages(v) {\n    useHasNewMessages = v;\n  }\n}, 33);\nlet useLeaderBanner;\nmodule.link(\"./hooks/useLeaderBanner\", {\n  useLeaderBanner(v) {\n    useLeaderBanner = v;\n  }\n}, 34);\nlet useListIsAtBottom;\nmodule.link(\"./hooks/useListIsAtBottom\", {\n  useListIsAtBottom(v) {\n    useListIsAtBottom = v;\n  }\n}, 35);\nlet useQuoteMessageByUrl;\nmodule.link(\"./hooks/useQuoteMessageByUrl\", {\n  useQuoteMessageByUrl(v) {\n    useQuoteMessageByUrl = v;\n  }\n}, 36);\nlet useReadMessageWindowEvents;\nmodule.link(\"./hooks/useReadMessageWindowEvents\", {\n  useReadMessageWindowEvents(v) {\n    useReadMessageWindowEvents = v;\n  }\n}, 37);\nlet useRestoreScrollPosition;\nmodule.link(\"./hooks/useRestoreScrollPosition\", {\n  useRestoreScrollPosition(v) {\n    useRestoreScrollPosition = v;\n  }\n}, 38);\nlet useHandleUnread;\nmodule.link(\"./hooks/useUnreadMessages\", {\n  useHandleUnread(v) {\n    useHandleUnread = v;\n  }\n}, 39);\nconst RoomBody = () => {\n  const chat = useChat();\n  if (!chat) {\n    throw new Error('No ChatContext provided');\n  }\n  const t = useTranslation();\n  const isLayoutEmbedded = useEmbeddedLayout();\n  const room = useRoom();\n  const user = useUser();\n  const toolbox = useRoomToolbox();\n  const admin = useRole('admin');\n  const subscription = useRoomSubscription();\n  const retentionPolicy = useRetentionPolicy(room);\n  const hideFlexTab = useUserPreference('hideFlexTab') || undefined;\n  const hideUsernames = useUserPreference('hideUsernames');\n  const displayAvatars = useUserPreference('displayAvatars');\n  const {\n    hasMorePreviousMessages,\n    hasMoreNextMessages,\n    isLoadingMoreMessages\n  } = useRoomMessages();\n  const allowAnonymousRead = useSetting('Accounts_AllowAnonymousRead');\n  const canPreviewChannelRoom = usePermission('preview-c-room');\n  const subscribed = !!subscription;\n  const canPreview = useMemo(() => {\n    if (room && room.t !== 'c') {\n      return true;\n    }\n    if (allowAnonymousRead === true) {\n      return true;\n    }\n    if (canPreviewChannelRoom) {\n      return true;\n    }\n    return subscribed;\n  }, [allowAnonymousRead, canPreviewChannelRoom, room, subscribed]);\n  const useRealName = useSetting('UI_Use_Real_Name');\n  const innerBoxRef = useRef(null);\n  const {\n    wrapperRef: unreadBarWrapperRef,\n    innerRef: unreadBarInnerRef,\n    handleUnreadBarJumpToButtonClick,\n    handleMarkAsReadButtonClick,\n    counter: [unread]\n  } = useHandleUnread(room, subscription);\n  const _useDateScroll = useDateScroll(),\n    {\n      innerRef: dateScrollInnerRef,\n      bubbleRef,\n      listStyle\n    } = _useDateScroll,\n    bubbleDate = _objectWithoutProperties(_useDateScroll, _excluded);\n  const {\n    innerRef: isAtBottomInnerRef,\n    atBottomRef,\n    sendToBottom,\n    sendToBottomIfNecessary,\n    isAtBottom\n  } = useListIsAtBottom();\n  const {\n    innerRef: getMoreInnerRef\n  } = useGetMore(room._id, atBottomRef);\n  const {\n    wrapperRef: leaderBannerWrapperRef,\n    hideLeaderHeader,\n    innerRef: leaderBannerInnerRef\n  } = useLeaderBanner();\n  const {\n    uploads,\n    handleUploadFiles,\n    handleUploadProgressClose,\n    targeDrop: [fileUploadTriggerProps, fileUploadOverlayProps]\n  } = useFileUpload();\n  const {\n    innerRef: restoreScrollPositionInnerRef\n  } = useRestoreScrollPosition(room._id);\n  const {\n    messageListRef\n  } = useMessageListNavigation();\n  const {\n    handleNewMessageButtonClick,\n    handleJumpToRecentButtonClick,\n    handleComposerResize,\n    hasNewMessages,\n    newMessagesScrollRef\n  } = useHasNewMessages(room._id, user === null || user === void 0 ? void 0 : user._id, atBottomRef, {\n    sendToBottom,\n    sendToBottomIfNecessary,\n    isAtBottom\n  });\n  const innerRef = useMergedRefs(dateScrollInnerRef, innerBoxRef, restoreScrollPositionInnerRef, isAtBottomInnerRef, newMessagesScrollRef, leaderBannerInnerRef, unreadBarInnerRef, getMoreInnerRef, messageListRef);\n  const wrapperBoxRefs = useMergedRefs(unreadBarWrapperRef, leaderBannerWrapperRef);\n  const handleNavigateToPreviousMessage = useCallback(() => {\n    chat.messageEditing.toPreviousMessage();\n  }, [chat.messageEditing]);\n  const handleNavigateToNextMessage = useCallback(() => {\n    chat.messageEditing.toNextMessage();\n  }, [chat.messageEditing]);\n  const handleCloseFlexTab = useCallback(e => {\n    /*\n     * check if the element is a button or anchor\n     * it considers the role as well\n     * usually, the flex tab is closed when clicking outside of it\n     * but if the user clicks on a button or anchor, we don't want to close the flex tab\n     * because the user could be actually trying to open the flex tab through those elements\n     */\n    const checkElement = element => {\n      if (!element) {\n        return false;\n      }\n      if (element instanceof HTMLButtonElement || element.getAttribute('role') === 'button') {\n        return true;\n      }\n      if (element instanceof HTMLAnchorElement || element.getAttribute('role') === 'link') {\n        return true;\n      }\n      return checkElement(element.parentElement);\n    };\n    if (checkElement(e.target)) {\n      return;\n    }\n    toolbox.closeTab();\n  }, [toolbox]);\n  const {\n    openUserCard,\n    triggerProps\n  } = useUserCard();\n  const handleOpenUserCard = useCallback((event, username) => {\n    if (!username) {\n      return;\n    }\n    openUserCard(event, username);\n  }, [openUserCard]);\n  useGoToHomeOnRemoved(room, user === null || user === void 0 ? void 0 : user._id);\n  useReadMessageWindowEvents();\n  useQuoteMessageByUrl();\n  const {\n    data: roomLeader\n  } = useReactiveQuery(['rooms', room._id, 'leader', {\n    not: user === null || user === void 0 ? void 0 : user._id\n  }], () => {\n    const leaderRoomRole = RoomRoles.findOne({\n      'rid': room._id,\n      'roles': 'leader',\n      'u._id': {\n        $ne: user === null || user === void 0 ? void 0 : user._id\n      }\n    });\n    if (!leaderRoomRole) {\n      return null;\n    }\n    return _objectSpread(_objectSpread({}, leaderRoomRole.u), {}, {\n      name: useRealName ? leaderRoomRole.u.name || leaderRoomRole.u.username : leaderRoomRole.u.username\n    });\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !isLayoutEmbedded && room.announcement && /*#__PURE__*/React.createElement(Announcement, {\n    announcement: room.announcement,\n    announcementDetails: undefined\n  }), /*#__PURE__*/React.createElement(Box, {\n    key: room._id,\n    className: ['main-content-flex', listStyle]\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    role: \"presentation\",\n    className: \"messages-container flex-tab-main-content \".concat(admin ? 'admin' : ''),\n    id: \"chat-window-\".concat(room._id),\n    onClick: hideFlexTab && handleCloseFlexTab\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"messages-container-wrapper\"\n  }, /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: \"messages-container-main\",\n    ref: wrapperBoxRefs\n  }, fileUploadTriggerProps), /*#__PURE__*/React.createElement(DropTargetOverlay, fileUploadOverlayProps), /*#__PURE__*/React.createElement(Box, {\n    position: \"absolute\",\n    w: \"full\"\n  }, roomLeader ? /*#__PURE__*/React.createElement(LeaderBar, {\n    _id: roomLeader._id,\n    username: roomLeader.username,\n    name: roomLeader.name,\n    visible: !hideLeaderHeader,\n    onAvatarClick: handleOpenUserCard,\n    triggerProps: triggerProps\n  }) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: ['container-bars', uploads.length && 'show'].filter(isTruthy).join(' ')\n  }, uploads.map(upload => /*#__PURE__*/React.createElement(UploadProgressIndicator, {\n    key: upload.id,\n    id: upload.id,\n    name: upload.name,\n    percentage: upload.percentage,\n    error: upload.error instanceof Error ? upload.error.message : undefined,\n    onClose: handleUploadProgressClose\n  }))), Boolean(unread) && /*#__PURE__*/React.createElement(UnreadMessagesIndicator, {\n    count: unread,\n    onJumpButtonClick: handleUnreadBarJumpToButtonClick,\n    onMarkAsReadButtonClick: handleMarkAsReadButtonClick\n  }), /*#__PURE__*/React.createElement(BubbleDate, _extends({\n    ref: bubbleRef\n  }, bubbleDate))), /*#__PURE__*/React.createElement(\"div\", {\n    className: ['messages-box', roomLeader && !hideLeaderHeader && 'has-leader'].filter(isTruthy).join(' ')\n  }, /*#__PURE__*/React.createElement(JumpToRecentMessageButton, {\n    visible: hasNewMessages,\n    onClick: handleNewMessageButtonClick,\n    text: t('New_messages')\n  }), /*#__PURE__*/React.createElement(JumpToRecentMessageButton, {\n    visible: hasMoreNextMessages,\n    onClick: handleJumpToRecentButtonClick,\n    text: t('Jump_to_recent_messages')\n  }), !canPreview ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content room-not-found error-color\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, t('You_must_join_to_view_messages_in_this_channel'))) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: ['wrapper', hasMoreNextMessages && 'has-more-next', hideUsernames && 'hide-usernames', !displayAvatars && 'hide-avatar'].filter(isTruthy).join(' ')\n  }, /*#__PURE__*/React.createElement(MessageListErrorBoundary, null, /*#__PURE__*/React.createElement(CustomScrollbars, {\n    ref: innerRef\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"messages-list\",\n    \"aria-label\": t('Message_list'),\n    \"aria-busy\": isLoadingMoreMessages\n  }, canPreview ? /*#__PURE__*/React.createElement(React.Fragment, null, hasMorePreviousMessages ? /*#__PURE__*/React.createElement(\"li\", {\n    className: \"load-more\"\n  }, isLoadingMoreMessages ? /*#__PURE__*/React.createElement(LoadingMessagesIndicator, null) : null) : /*#__PURE__*/React.createElement(\"li\", null, /*#__PURE__*/React.createElement(RoomForeword, {\n    user: user,\n    room: room\n  }), retentionPolicy !== null && retentionPolicy !== void 0 && retentionPolicy.isActive ? /*#__PURE__*/React.createElement(RetentionPolicyWarning, {\n    room: room\n  }) : null)) : null, /*#__PURE__*/React.createElement(MessageList, {\n    rid: room._id,\n    messageListRef: innerBoxRef\n  }), hasMoreNextMessages ? /*#__PURE__*/React.createElement(\"li\", {\n    className: \"load-more\"\n  }, isLoadingMoreMessages ? /*#__PURE__*/React.createElement(LoadingMessagesIndicator, null) : null) : null))))), /*#__PURE__*/React.createElement(RoomComposer, null, /*#__PURE__*/React.createElement(ComposerContainer, {\n    subscription: subscription,\n    onResize: handleComposerResize,\n    onNavigateToPreviousMessage: handleNavigateToPreviousMessage,\n    onNavigateToNextMessage: handleNavigateToNextMessage,\n    onUploadFiles: handleUploadFiles\n  })))))));\n};\nmodule.exportDefault( /*#__PURE__*/memo(RoomBody));","map":{"version":3,"names":["_extends","module","link","default","v","_objectSpread","_objectWithoutProperties","Box","useMergedRefs","usePermission","useRole","useSetting","useTranslation","useUser","useUserPreference","React","memo","useCallback","useMemo","useRef","RoomRoles","isTruthy","CustomScrollbars","useEmbeddedLayout","useReactiveQuery","Announcement","BubbleDate","MessageList","MessageListErrorBoundary","ComposerContainer","RoomComposer","useChat","useRoom","useRoomSubscription","useRoomMessages","useRoomToolbox","useUserCard","useDateScroll","useMessageListNavigation","useRetentionPolicy","DropTargetOverlay","JumpToRecentMessageButton","LeaderBar","LoadingMessagesIndicator","RetentionPolicyWarning","RoomForeword","UnreadMessagesIndicator","UploadProgressIndicator","useFileUpload","useGetMore","useGoToHomeOnRemoved","useHasNewMessages","useLeaderBanner","useListIsAtBottom","useQuoteMessageByUrl","useReadMessageWindowEvents","useRestoreScrollPosition","useHandleUnread","RoomBody","chat","Error","t","isLayoutEmbedded","room","user","toolbox","admin","subscription","retentionPolicy","hideFlexTab","undefined","hideUsernames","displayAvatars","hasMorePreviousMessages","hasMoreNextMessages","isLoadingMoreMessages","allowAnonymousRead","canPreviewChannelRoom","subscribed","canPreview","useRealName","innerBoxRef","wrapperRef","unreadBarWrapperRef","innerRef","unreadBarInnerRef","handleUnreadBarJumpToButtonClick","handleMarkAsReadButtonClick","counter","unread","_useDateScroll","dateScrollInnerRef","bubbleRef","listStyle","bubbleDate","_excluded","isAtBottomInnerRef","atBottomRef","sendToBottom","sendToBottomIfNecessary","isAtBottom","getMoreInnerRef","_id","leaderBannerWrapperRef","hideLeaderHeader","leaderBannerInnerRef","uploads","handleUploadFiles","handleUploadProgressClose","targeDrop","fileUploadTriggerProps","fileUploadOverlayProps","restoreScrollPositionInnerRef","messageListRef","handleNewMessageButtonClick","handleJumpToRecentButtonClick","handleComposerResize","hasNewMessages","newMessagesScrollRef","wrapperBoxRefs","handleNavigateToPreviousMessage","messageEditing","toPreviousMessage","handleNavigateToNextMessage","toNextMessage","handleCloseFlexTab","e","checkElement","element","HTMLButtonElement","getAttribute","HTMLAnchorElement","parentElement","target","closeTab","openUserCard","triggerProps","handleOpenUserCard","event","username","data","roomLeader","not","leaderRoomRole","findOne","$ne","u","name","createElement","Fragment","announcement","announcementDetails","key","className","role","concat","id","onClick","ref","position","w","visible","onAvatarClick","length","filter","join","map","upload","percentage","error","message","onClose","Boolean","count","onJumpButtonClick","onMarkAsReadButtonClick","text","isActive","rid","onResize","onNavigateToPreviousMessage","onNavigateToNextMessage","onUploadFiles","exportDefault"],"sources":["client/views/room/body/RoomBody.tsx"],"sourcesContent":["import type { IUser } from '@rocket.chat/core-typings';\nimport { Box } from '@rocket.chat/fuselage';\nimport { useMergedRefs } from '@rocket.chat/fuselage-hooks';\nimport { usePermission, useRole, useSetting, useTranslation, useUser, useUserPreference } from '@rocket.chat/ui-contexts';\nimport type { MouseEventHandler, ReactElement, UIEvent } from 'react';\nimport React, { memo, useCallback, useMemo, useRef } from 'react';\n\nimport { RoomRoles } from '../../../../app/models/client';\nimport { isTruthy } from '../../../../lib/isTruthy';\nimport { CustomScrollbars } from '../../../components/CustomScrollbars';\nimport { useEmbeddedLayout } from '../../../hooks/useEmbeddedLayout';\nimport { useReactiveQuery } from '../../../hooks/useReactiveQuery';\nimport Announcement from '../Announcement';\nimport { BubbleDate } from '../BubbleDate';\nimport { MessageList } from '../MessageList';\nimport MessageListErrorBoundary from '../MessageList/MessageListErrorBoundary';\nimport ComposerContainer from '../composer/ComposerContainer';\nimport RoomComposer from '../composer/RoomComposer/RoomComposer';\nimport { useChat } from '../contexts/ChatContext';\nimport { useRoom, useRoomSubscription, useRoomMessages } from '../contexts/RoomContext';\nimport { useRoomToolbox } from '../contexts/RoomToolboxContext';\nimport { useUserCard } from '../contexts/UserCardContext';\nimport { useDateScroll } from '../hooks/useDateScroll';\nimport { useMessageListNavigation } from '../hooks/useMessageListNavigation';\nimport { useRetentionPolicy } from '../hooks/useRetentionPolicy';\nimport DropTargetOverlay from './DropTargetOverlay';\nimport JumpToRecentMessageButton from './JumpToRecentMessageButton';\nimport LeaderBar from './LeaderBar';\nimport LoadingMessagesIndicator from './LoadingMessagesIndicator';\nimport RetentionPolicyWarning from './RetentionPolicyWarning';\nimport RoomForeword from './RoomForeword/RoomForeword';\nimport UnreadMessagesIndicator from './UnreadMessagesIndicator';\nimport UploadProgressIndicator from './UploadProgressIndicator';\nimport { useFileUpload } from './hooks/useFileUpload';\nimport { useGetMore } from './hooks/useGetMore';\nimport { useGoToHomeOnRemoved } from './hooks/useGoToHomeOnRemoved';\nimport { useHasNewMessages } from './hooks/useHasNewMessages';\nimport { useLeaderBanner } from './hooks/useLeaderBanner';\nimport { useListIsAtBottom } from './hooks/useListIsAtBottom';\nimport { useQuoteMessageByUrl } from './hooks/useQuoteMessageByUrl';\nimport { useReadMessageWindowEvents } from './hooks/useReadMessageWindowEvents';\nimport { useRestoreScrollPosition } from './hooks/useRestoreScrollPosition';\nimport { useHandleUnread } from './hooks/useUnreadMessages';\n\nconst RoomBody = (): ReactElement => {\n\tconst chat = useChat();\n\tif (!chat) {\n\t\tthrow new Error('No ChatContext provided');\n\t}\n\n\tconst t = useTranslation();\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\tconst room = useRoom();\n\tconst user = useUser();\n\tconst toolbox = useRoomToolbox();\n\tconst admin = useRole('admin');\n\tconst subscription = useRoomSubscription();\n\n\tconst retentionPolicy = useRetentionPolicy(room);\n\n\tconst hideFlexTab = useUserPreference<boolean>('hideFlexTab') || undefined;\n\tconst hideUsernames = useUserPreference<boolean>('hideUsernames');\n\tconst displayAvatars = useUserPreference<boolean>('displayAvatars');\n\n\tconst { hasMorePreviousMessages, hasMoreNextMessages, isLoadingMoreMessages } = useRoomMessages();\n\n\tconst allowAnonymousRead = useSetting('Accounts_AllowAnonymousRead') as boolean | undefined;\n\n\tconst canPreviewChannelRoom = usePermission('preview-c-room');\n\n\tconst subscribed = !!subscription;\n\n\tconst canPreview = useMemo(() => {\n\t\tif (room && room.t !== 'c') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (allowAnonymousRead === true) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (canPreviewChannelRoom) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn subscribed;\n\t}, [allowAnonymousRead, canPreviewChannelRoom, room, subscribed]);\n\n\tconst useRealName = useSetting('UI_Use_Real_Name') as boolean;\n\n\tconst innerBoxRef = useRef<HTMLDivElement | null>(null);\n\n\tconst {\n\t\twrapperRef: unreadBarWrapperRef,\n\t\tinnerRef: unreadBarInnerRef,\n\t\thandleUnreadBarJumpToButtonClick,\n\t\thandleMarkAsReadButtonClick,\n\t\tcounter: [unread],\n\t} = useHandleUnread(room, subscription);\n\n\tconst { innerRef: dateScrollInnerRef, bubbleRef, listStyle, ...bubbleDate } = useDateScroll();\n\n\tconst { innerRef: isAtBottomInnerRef, atBottomRef, sendToBottom, sendToBottomIfNecessary, isAtBottom } = useListIsAtBottom();\n\n\tconst { innerRef: getMoreInnerRef } = useGetMore(room._id, atBottomRef);\n\n\tconst { wrapperRef: leaderBannerWrapperRef, hideLeaderHeader, innerRef: leaderBannerInnerRef } = useLeaderBanner();\n\n\tconst {\n\t\tuploads,\n\t\thandleUploadFiles,\n\t\thandleUploadProgressClose,\n\t\ttargeDrop: [fileUploadTriggerProps, fileUploadOverlayProps],\n\t} = useFileUpload();\n\n\tconst { innerRef: restoreScrollPositionInnerRef } = useRestoreScrollPosition(room._id);\n\n\tconst { messageListRef } = useMessageListNavigation();\n\n\tconst { handleNewMessageButtonClick, handleJumpToRecentButtonClick, handleComposerResize, hasNewMessages, newMessagesScrollRef } =\n\t\tuseHasNewMessages(room._id, user?._id, atBottomRef, {\n\t\t\tsendToBottom,\n\t\t\tsendToBottomIfNecessary,\n\t\t\tisAtBottom,\n\t\t});\n\n\tconst innerRef = useMergedRefs(\n\t\tdateScrollInnerRef,\n\t\tinnerBoxRef,\n\t\trestoreScrollPositionInnerRef,\n\t\tisAtBottomInnerRef,\n\t\tnewMessagesScrollRef,\n\t\tleaderBannerInnerRef,\n\t\tunreadBarInnerRef,\n\t\tgetMoreInnerRef,\n\n\t\tmessageListRef,\n\t);\n\n\tconst wrapperBoxRefs = useMergedRefs(unreadBarWrapperRef, leaderBannerWrapperRef);\n\n\tconst handleNavigateToPreviousMessage = useCallback((): void => {\n\t\tchat.messageEditing.toPreviousMessage();\n\t}, [chat.messageEditing]);\n\n\tconst handleNavigateToNextMessage = useCallback((): void => {\n\t\tchat.messageEditing.toNextMessage();\n\t}, [chat.messageEditing]);\n\n\tconst handleCloseFlexTab: MouseEventHandler<HTMLElement> = useCallback(\n\t\t(e): void => {\n\t\t\t/*\n\t\t\t * check if the element is a button or anchor\n\t\t\t * it considers the role as well\n\t\t\t * usually, the flex tab is closed when clicking outside of it\n\t\t\t * but if the user clicks on a button or anchor, we don't want to close the flex tab\n\t\t\t * because the user could be actually trying to open the flex tab through those elements\n\t\t\t */\n\n\t\t\tconst checkElement = (element: HTMLElement | null): boolean => {\n\t\t\t\tif (!element) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (element instanceof HTMLButtonElement || element.getAttribute('role') === 'button') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (element instanceof HTMLAnchorElement || element.getAttribute('role') === 'link') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn checkElement(element.parentElement);\n\t\t\t};\n\n\t\t\tif (checkElement(e.target as HTMLElement)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttoolbox.closeTab();\n\t\t},\n\t\t[toolbox],\n\t);\n\n\tconst { openUserCard, triggerProps } = useUserCard();\n\n\tconst handleOpenUserCard = useCallback(\n\t\t(event: UIEvent, username: IUser['username']) => {\n\t\t\tif (!username) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\topenUserCard(event, username);\n\t\t},\n\t\t[openUserCard],\n\t);\n\n\tuseGoToHomeOnRemoved(room, user?._id);\n\tuseReadMessageWindowEvents();\n\tuseQuoteMessageByUrl();\n\n\tconst { data: roomLeader } = useReactiveQuery(['rooms', room._id, 'leader', { not: user?._id }], () => {\n\t\tconst leaderRoomRole = RoomRoles.findOne({\n\t\t\t'rid': room._id,\n\t\t\t'roles': 'leader',\n\t\t\t'u._id': { $ne: user?._id },\n\t\t});\n\n\t\tif (!leaderRoomRole) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\t...leaderRoomRole.u,\n\t\t\tname: useRealName ? leaderRoomRole.u.name || leaderRoomRole.u.username : leaderRoomRole.u.username,\n\t\t};\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t{!isLayoutEmbedded && room.announcement && <Announcement announcement={room.announcement} announcementDetails={undefined} />}\n\t\t\t<Box key={room._id} className={['main-content-flex', listStyle]}>\n\t\t\t\t<section\n\t\t\t\t\trole='presentation'\n\t\t\t\t\tclassName={`messages-container flex-tab-main-content ${admin ? 'admin' : ''}`}\n\t\t\t\t\tid={`chat-window-${room._id}`}\n\t\t\t\t\tonClick={hideFlexTab && handleCloseFlexTab}\n\t\t\t\t>\n\t\t\t\t\t<div className='messages-container-wrapper'>\n\t\t\t\t\t\t<div className='messages-container-main' ref={wrapperBoxRefs} {...fileUploadTriggerProps}>\n\t\t\t\t\t\t\t<DropTargetOverlay {...fileUploadOverlayProps} />\n\t\t\t\t\t\t\t<Box position='absolute' w='full'>\n\t\t\t\t\t\t\t\t{roomLeader ? (\n\t\t\t\t\t\t\t\t\t<LeaderBar\n\t\t\t\t\t\t\t\t\t\t_id={roomLeader._id}\n\t\t\t\t\t\t\t\t\t\tusername={roomLeader.username}\n\t\t\t\t\t\t\t\t\t\tname={roomLeader.name}\n\t\t\t\t\t\t\t\t\t\tvisible={!hideLeaderHeader}\n\t\t\t\t\t\t\t\t\t\tonAvatarClick={handleOpenUserCard}\n\t\t\t\t\t\t\t\t\t\ttriggerProps={triggerProps}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t<div className={['container-bars', uploads.length && 'show'].filter(isTruthy).join(' ')}>\n\t\t\t\t\t\t\t\t\t{uploads.map((upload) => (\n\t\t\t\t\t\t\t\t\t\t<UploadProgressIndicator\n\t\t\t\t\t\t\t\t\t\t\tkey={upload.id}\n\t\t\t\t\t\t\t\t\t\t\tid={upload.id}\n\t\t\t\t\t\t\t\t\t\t\tname={upload.name}\n\t\t\t\t\t\t\t\t\t\t\tpercentage={upload.percentage}\n\t\t\t\t\t\t\t\t\t\t\terror={upload.error instanceof Error ? upload.error.message : undefined}\n\t\t\t\t\t\t\t\t\t\t\tonClose={handleUploadProgressClose}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{Boolean(unread) && (\n\t\t\t\t\t\t\t\t\t<UnreadMessagesIndicator\n\t\t\t\t\t\t\t\t\t\tcount={unread}\n\t\t\t\t\t\t\t\t\t\tonJumpButtonClick={handleUnreadBarJumpToButtonClick}\n\t\t\t\t\t\t\t\t\t\tonMarkAsReadButtonClick={handleMarkAsReadButtonClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<BubbleDate ref={bubbleRef} {...bubbleDate} />\n\t\t\t\t\t\t\t</Box>\n\n\t\t\t\t\t\t\t<div className={['messages-box', roomLeader && !hideLeaderHeader && 'has-leader'].filter(isTruthy).join(' ')}>\n\t\t\t\t\t\t\t\t<JumpToRecentMessageButton visible={hasNewMessages} onClick={handleNewMessageButtonClick} text={t('New_messages')} />\n\t\t\t\t\t\t\t\t<JumpToRecentMessageButton\n\t\t\t\t\t\t\t\t\tvisible={hasMoreNextMessages}\n\t\t\t\t\t\t\t\t\tonClick={handleJumpToRecentButtonClick}\n\t\t\t\t\t\t\t\t\ttext={t('Jump_to_recent_messages')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{!canPreview ? (\n\t\t\t\t\t\t\t\t\t<div className='content room-not-found error-color'>\n\t\t\t\t\t\t\t\t\t\t<div>{t('You_must_join_to_view_messages_in_this_channel')}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\t\t\t\t'wrapper',\n\t\t\t\t\t\t\t\t\t\thasMoreNextMessages && 'has-more-next',\n\t\t\t\t\t\t\t\t\t\thideUsernames && 'hide-usernames',\n\t\t\t\t\t\t\t\t\t\t!displayAvatars && 'hide-avatar',\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t.filter(isTruthy)\n\t\t\t\t\t\t\t\t\t\t.join(' ')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<MessageListErrorBoundary>\n\t\t\t\t\t\t\t\t\t\t<CustomScrollbars ref={innerRef}>\n\t\t\t\t\t\t\t\t\t\t\t<ul className='messages-list' aria-label={t('Message_list')} aria-busy={isLoadingMoreMessages}>\n\t\t\t\t\t\t\t\t\t\t\t\t{canPreview ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{hasMorePreviousMessages ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='load-more'>{isLoadingMoreMessages ? <LoadingMessagesIndicator /> : null}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RoomForeword user={user} room={room} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{retentionPolicy?.isActive ? <RetentionPolicyWarning room={room} /> : null}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t\t<MessageList rid={room._id} messageListRef={innerBoxRef} />\n\t\t\t\t\t\t\t\t\t\t\t\t{hasMoreNextMessages ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li className='load-more'>{isLoadingMoreMessages ? <LoadingMessagesIndicator /> : null}</li>\n\t\t\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</CustomScrollbars>\n\t\t\t\t\t\t\t\t\t</MessageListErrorBoundary>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<RoomComposer>\n\t\t\t\t\t\t\t\t<ComposerContainer\n\t\t\t\t\t\t\t\t\tsubscription={subscription}\n\t\t\t\t\t\t\t\t\tonResize={handleComposerResize}\n\t\t\t\t\t\t\t\t\tonNavigateToPreviousMessage={handleNavigateToPreviousMessage}\n\t\t\t\t\t\t\t\t\tonNavigateToNextMessage={handleNavigateToNextMessage}\n\t\t\t\t\t\t\t\t\tonUploadFiles={handleUploadFiles}\n\t\t\t\t\t\t\t\t\t// TODO: send previewUrls param\n\t\t\t\t\t\t\t\t\t// previewUrls={}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</RoomComposer>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</Box>\n\t\t</>\n\t);\n};\n\nexport default memo(RoomBody);\n"],"mappings":";AACA,IAAAA,QAAY;AAAAC,MAAE,CAAMC,IAAA,iCAAwB;EAAAC,QAAAC,CAAA;IAAAJ,QAAA,GAAAI,CAAA;EAAA;AAAA;AAAA,IAAAC,aAAA;AAAAJ,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAAC,aAAA,GAAAD,CAAA;EAAA;AAAA;AAAA,IAAAE,wBAAA;AAAAL,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAAE,wBAAA,GAAAF,CAAA;EAAA;AAAA;AAA5C,IAAAG,GAAO;AAAAN,MAAO,CAAAC,IAAA,CAAM,uBAAuB,EAAC;EAAAK,IAAAH,CAAA;IAAAG,GAAA,GAAAH,CAAA;EAAA;AAAA;AAAA,IAAAI,aAAA;AAAAP,MAAA,CAAAC,IAAA;EAAAM,cAAAJ,CAAA;IAAAI,aAAA,GAAAJ,CAAA;EAAA;AAAA;AAAA,IAAAK,aAAA,EAAAC,OAAA,EAAAC,UAAA,EAAAC,cAAA,EAAAC,OAAA,EAAAC,iBAAA;AAAAb,MAAA,CAAAC,IAAA;EAAAO,cAAAL,CAAA;IAAAK,aAAA,GAAAL,CAAA;EAAA;EAAAM,QAAAN,CAAA;IAAAM,OAAA,GAAAN,CAAA;EAAA;EAAAO,WAAAP,CAAA;IAAAO,UAAA,GAAAP,CAAA;EAAA;EAAAQ,eAAAR,CAAA;IAAAQ,cAAA,GAAAR,CAAA;EAAA;EAAAS,QAAAT,CAAA;IAAAS,OAAA,GAAAT,CAAA;EAAA;EAAAU,kBAAAV,CAAA;IAAAU,iBAAA,GAAAV,CAAA;EAAA;AAAA;AAAA,IAAAW,KAAA,EAAAC,IAAA,EAAAC,WAAA,EAAAC,OAAA,EAAAC,MAAA;AAAAlB,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAAW,KAAA,GAAAX,CAAA;EAAA;EAAAY,KAAAZ,CAAA;IAAAY,IAAA,GAAAZ,CAAA;EAAA;EAAAa,YAAAb,CAAA;IAAAa,WAAA,GAAAb,CAAA;EAAA;EAAAc,QAAAd,CAAA;IAAAc,OAAA,GAAAd,CAAA;EAAA;EAAAe,OAAAf,CAAA;IAAAe,MAAA,GAAAf,CAAA;EAAA;AAAA;AAAA,IAAAgB,SAAA;AAAAnB,MAAA,CAAAC,IAAA;EAAAkB,UAAAhB,CAAA;IAAAgB,SAAA,GAAAhB,CAAA;EAAA;AAAA;AAAA,IAAAiB,QAAA;AAAApB,MAAA,CAAAC,IAAA;EAAAmB,SAAAjB,CAAA;IAAAiB,QAAA,GAAAjB,CAAA;EAAA;AAAA;AAAA,IAAAkB,gBAAA;AAAArB,MAAA,CAAAC,IAAA;EAAAoB,iBAAAlB,CAAA;IAAAkB,gBAAA,GAAAlB,CAAA;EAAA;AAAA;AAAA,IAAAmB,iBAAA;AAAAtB,MAAA,CAAAC,IAAA;EAAAqB,kBAAAnB,CAAA;IAAAmB,iBAAA,GAAAnB,CAAA;EAAA;AAAA;AAAA,IAAAoB,gBAAA;AAAAvB,MAAA,CAAAC,IAAA;EAAAsB,iBAAApB,CAAA;IAAAoB,gBAAA,GAAApB,CAAA;EAAA;AAAA;AAAA,IAAAqB,YAAA;AAAAxB,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAAqB,YAAA,GAAArB,CAAA;EAAA;AAAA;AAAA,IAAAsB,UAAA;AAAAzB,MAAA,CAAAC,IAAA;EAAAwB,WAAAtB,CAAA;IAAAsB,UAAA,GAAAtB,CAAA;EAAA;AAAA;AAAA,IAAAuB,WAAA;AAAA1B,MAAA,CAAAC,IAAA;EAAAyB,YAAAvB,CAAA;IAAAuB,WAAA,GAAAvB,CAAA;EAAA;AAAA;AAAA,IAAAwB,wBAAA;AAAA3B,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAAwB,wBAAA,GAAAxB,CAAA;EAAA;AAAA;AAAA,IAAAyB,iBAAA;AAAA5B,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAAyB,iBAAA,GAAAzB,CAAA;EAAA;AAAA;AAAA,IAAA0B,YAAA;AAAA7B,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAA0B,YAAA,GAAA1B,CAAA;EAAA;AAAA;AAAA,IAAA2B,OAAA;AAAA9B,MAAA,CAAAC,IAAA;EAAA6B,QAAA3B,CAAA;IAAA2B,OAAA,GAAA3B,CAAA;EAAA;AAAA;AAAA,IAAA4B,OAAA,EAAAC,mBAAA,EAAAC,eAAA;AAAAjC,MAAA,CAAAC,IAAA;EAAA8B,QAAA5B,CAAA;IAAA4B,OAAA,GAAA5B,CAAA;EAAA;EAAA6B,oBAAA7B,CAAA;IAAA6B,mBAAA,GAAA7B,CAAA;EAAA;EAAA8B,gBAAA9B,CAAA;IAAA8B,eAAA,GAAA9B,CAAA;EAAA;AAAA;AAAA,IAAA+B,cAAA;AAAAlC,MAAA,CAAAC,IAAA;EAAAiC,eAAA/B,CAAA;IAAA+B,cAAA,GAAA/B,CAAA;EAAA;AAAA;AAAA,IAAAgC,WAAA;AAAAnC,MAAA,CAAAC,IAAA;EAAAkC,YAAAhC,CAAA;IAAAgC,WAAA,GAAAhC,CAAA;EAAA;AAAA;AAAA,IAAAiC,aAAA;AAAApC,MAAA,CAAAC,IAAA;EAAAmC,cAAAjC,CAAA;IAAAiC,aAAA,GAAAjC,CAAA;EAAA;AAAA;AAAA,IAAAkC,wBAAA;AAAArC,MAAA,CAAAC,IAAA;EAAAoC,yBAAAlC,CAAA;IAAAkC,wBAAA,GAAAlC,CAAA;EAAA;AAAA;AAAA,IAAAmC,kBAAA;AAAAtC,MAAA,CAAAC,IAAA;EAAAqC,mBAAAnC,CAAA;IAAAmC,kBAAA,GAAAnC,CAAA;EAAA;AAAA;AAAA,IAAAoC,iBAAA;AAAAvC,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAAoC,iBAAA,GAAApC,CAAA;EAAA;AAAA;AAAA,IAAAqC,yBAAA;AAAAxC,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAAqC,yBAAA,GAAArC,CAAA;EAAA;AAAA;AAAA,IAAAsC,SAAA;AAAAzC,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAAsC,SAAA,GAAAtC,CAAA;EAAA;AAAA;AAAA,IAAAuC,wBAAA;AAAA1C,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAAuC,wBAAA,GAAAvC,CAAA;EAAA;AAAA;AAAA,IAAAwC,sBAAA;AAAA3C,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAAwC,sBAAA,GAAAxC,CAAA;EAAA;AAAA;AAAA,IAAAyC,YAAA;AAAA5C,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAAyC,YAAA,GAAAzC,CAAA;EAAA;AAAA;AAAA,IAAA0C,uBAAA;AAAA7C,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAA0C,uBAAA,GAAA1C,CAAA;EAAA;AAAA;AAAA,IAAA2C,uBAAA;AAAA9C,MAAA,CAAAC,IAAA;EAAAC,QAAAC,CAAA;IAAA2C,uBAAA,GAAA3C,CAAA;EAAA;AAAA;AAAA,IAAA4C,aAAA;AAAA/C,MAAA,CAAAC,IAAA;EAAA8C,cAAA5C,CAAA;IAAA4C,aAAA,GAAA5C,CAAA;EAAA;AAAA;AAAA,IAAA6C,UAAA;AAAAhD,MAAA,CAAAC,IAAA;EAAA+C,WAAA7C,CAAA;IAAA6C,UAAA,GAAA7C,CAAA;EAAA;AAAA;AAAA,IAAA8C,oBAAA;AAAAjD,MAAA,CAAAC,IAAA;EAAAgD,qBAAA9C,CAAA;IAAA8C,oBAAA,GAAA9C,CAAA;EAAA;AAAA;AAAA,IAAA+C,iBAAA;AAAAlD,MAAA,CAAAC,IAAA;EAAAiD,kBAAA/C,CAAA;IAAA+C,iBAAA,GAAA/C,CAAA;EAAA;AAAA;AAAA,IAAAgD,eAAA;AAAAnD,MAAA,CAAAC,IAAA;EAAAkD,gBAAAhD,CAAA;IAAAgD,eAAA,GAAAhD,CAAA;EAAA;AAAA;AAAA,IAAAiD,iBAAA;AAAApD,MAAA,CAAAC,IAAA;EAAAmD,kBAAAjD,CAAA;IAAAiD,iBAAA,GAAAjD,CAAA;EAAA;AAAA;AAAA,IAAAkD,oBAAA;AAAArD,MAAA,CAAAC,IAAA;EAAAoD,qBAAAlD,CAAA;IAAAkD,oBAAA,GAAAlD,CAAA;EAAA;AAAA;AAAA,IAAAmD,0BAAA;AAAAtD,MAAA,CAAAC,IAAA;EAAAqD,2BAAAnD,CAAA;IAAAmD,0BAAA,GAAAnD,CAAA;EAAA;AAAA;AAAA,IAAAoD,wBAAA;AAAAvD,MAAA,CAAAC,IAAA;EAAAsD,yBAAApD,CAAA;IAAAoD,wBAAA,GAAApD,CAAA;EAAA;AAAA;AAAA,IAAAqD,eAAA;AAAAxD,MAAA,CAAAC,IAAA;EAAAuD,gBAAArD,CAAA;IAAAqD,eAAA,GAAArD,CAAA;EAAA;AAAA;AA2C5C,MAAMsD,QAAQ,GAAGA,CAAA,KAAmB;EACnC,MAAMC,IAAI,GAAG5B,OAAO,EAAE;EACtB,IAAI,CAAC4B,IAAI,EAAE;IACV,MAAM,IAAIC,KAAK,CAAC,yBAAyB,CAAC;EAC3C;EAEA,MAAMC,CAAC,GAAGjD,cAAc,EAAE;EAC1B,MAAMkD,gBAAgB,GAAGvC,iBAAiB,EAAE;EAC5C,MAAMwC,IAAI,GAAG/B,OAAO,EAAE;EACtB,MAAMgC,IAAI,GAAGnD,OAAO,EAAE;EACtB,MAAMoD,OAAO,GAAG9B,cAAc,EAAE;EAChC,MAAM+B,KAAK,GAAGxD,OAAO,CAAC,OAAO,CAAC;EAC9B,MAAMyD,YAAY,GAAGlC,mBAAmB,EAAE;EAE1C,MAAMmC,eAAe,GAAG7B,kBAAkB,CAACwB,IAAI,CAAC;EAEhD,MAAMM,WAAW,GAAGvD,iBAAiB,CAAU,aAAa,CAAC,IAAIwD,SAAS;EAC1E,MAAMC,aAAa,GAAGzD,iBAAiB,CAAU,eAAe,CAAC;EACjE,MAAM0D,cAAc,GAAG1D,iBAAiB,CAAU,gBAAgB,CAAC;EAEnE,MAAM;IAAE2D,uBAAuB;IAAEC,mBAAmB;IAAEC;EAAqB,CAAE,GAAGzC,eAAe,EAAE;EAEjG,MAAM0C,kBAAkB,GAAGjE,UAAU,CAAC,6BAA6B,CAAwB;EAE3F,MAAMkE,qBAAqB,GAAGpE,aAAa,CAAC,gBAAgB,CAAC;EAE7D,MAAMqE,UAAU,GAAG,CAAC,CAACX,YAAY;EAEjC,MAAMY,UAAU,GAAG7D,OAAO,CAAC,MAAK;IAC/B,IAAI6C,IAAI,IAAIA,IAAI,CAACF,CAAC,KAAK,GAAG,EAAE;MAC3B,OAAO,IAAI;IACZ;IAEA,IAAIe,kBAAkB,KAAK,IAAI,EAAE;MAChC,OAAO,IAAI;IACZ;IAEA,IAAIC,qBAAqB,EAAE;MAC1B,OAAO,IAAI;IACZ;IAEA,OAAOC,UAAU;EAClB,CAAC,EAAE,CAACF,kBAAkB,EAAEC,qBAAqB,EAAEd,IAAI,EAAEe,UAAU,CAAC,CAAC;EAEjE,MAAME,WAAW,GAAGrE,UAAU,CAAC,kBAAkB,CAAY;EAE7D,MAAMsE,WAAW,GAAG9D,MAAM,CAAwB,IAAI,CAAC;EAEvD,MAAM;IACL+D,UAAU,EAAEC,mBAAmB;IAC/BC,QAAQ,EAAEC,iBAAiB;IAC3BC,gCAAgC;IAChCC,2BAA2B;IAC3BC,OAAO,EAAE,CAACC,MAAM;EAAC,CACjB,GAAGhC,eAAe,CAACM,IAAI,EAAEI,YAAY,CAAC;EAEvC,MAAAuB,cAAA,GAA8ErD,aAAa,EAAE;IAAvF;MAAE+C,QAAQ,EAAEO,kBAAkB;MAAEC,SAAS;MAAEC;IAAwB,CAAE,GAAAH,cAAA;IAAZI,UAAU,GAAAxF,wBAAA,CAAAoF,cAAA,EAAAK,SAAA;EAEzE,MAAM;IAAEX,QAAQ,EAAEY,kBAAkB;IAAEC,WAAW;IAAEC,YAAY;IAAEC,uBAAuB;IAAEC;EAAU,CAAE,GAAG/C,iBAAiB,EAAE;EAE5H,MAAM;IAAE+B,QAAQ,EAAEiB;EAAe,CAAE,GAAGpD,UAAU,CAACc,IAAI,CAACuC,GAAG,EAAEL,WAAW,CAAC;EAEvE,MAAM;IAAEf,UAAU,EAAEqB,sBAAsB;IAAEC,gBAAgB;IAAEpB,QAAQ,EAAEqB;EAAoB,CAAE,GAAGrD,eAAe,EAAE;EAElH,MAAM;IACLsD,OAAO;IACPC,iBAAiB;IACjBC,yBAAyB;IACzBC,SAAS,EAAE,CAACC,sBAAsB,EAAEC,sBAAsB;EAAC,CAC3D,GAAG/D,aAAa,EAAE;EAEnB,MAAM;IAAEoC,QAAQ,EAAE4B;EAA6B,CAAE,GAAGxD,wBAAwB,CAACO,IAAI,CAACuC,GAAG,CAAC;EAEtF,MAAM;IAAEW;EAAc,CAAE,GAAG3E,wBAAwB,EAAE;EAErD,MAAM;IAAE4E,2BAA2B;IAAEC,6BAA6B;IAAEC,oBAAoB;IAAEC,cAAc;IAAEC;EAAoB,CAAE,GAC/HnE,iBAAiB,CAACY,IAAI,CAACuC,GAAG,EAAEtC,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEsC,GAAG,EAAEL,WAAW,EAAE;IACnDC,YAAY;IACZC,uBAAuB;IACvBC;GACA,CAAC;EAEH,MAAMhB,QAAQ,GAAG5E,aAAa,CAC7BmF,kBAAkB,EAClBV,WAAW,EACX+B,6BAA6B,EAC7BhB,kBAAkB,EAClBsB,oBAAoB,EACpBb,oBAAoB,EACpBpB,iBAAiB,EACjBgB,eAAe,EAEfY,cAAc,CACd;EAED,MAAMM,cAAc,GAAG/G,aAAa,CAAC2E,mBAAmB,EAAEoB,sBAAsB,CAAC;EAEjF,MAAMiB,+BAA+B,GAAGvG,WAAW,CAAC,MAAW;IAC9D0C,IAAI,CAAC8D,cAAc,CAACC,iBAAiB,EAAE;EACxC,CAAC,EAAE,CAAC/D,IAAI,CAAC8D,cAAc,CAAC,CAAC;EAEzB,MAAME,2BAA2B,GAAG1G,WAAW,CAAC,MAAW;IAC1D0C,IAAI,CAAC8D,cAAc,CAACG,aAAa,EAAE;EACpC,CAAC,EAAE,CAACjE,IAAI,CAAC8D,cAAc,CAAC,CAAC;EAEzB,MAAMI,kBAAkB,GAAmC5G,WAAW,CACpE6G,CAAC,IAAU;IACX;;;;;;;IAQA,MAAMC,YAAY,GAAIC,OAA2B,IAAa;MAC7D,IAAI,CAACA,OAAO,EAAE;QACb,OAAO,KAAK;MACb;MACA,IAAIA,OAAO,YAAYC,iBAAiB,IAAID,OAAO,CAACE,YAAY,CAAC,MAAM,CAAC,KAAK,QAAQ,EAAE;QACtF,OAAO,IAAI;MACZ;MACA,IAAIF,OAAO,YAAYG,iBAAiB,IAAIH,OAAO,CAACE,YAAY,CAAC,MAAM,CAAC,KAAK,MAAM,EAAE;QACpF,OAAO,IAAI;MACZ;MACA,OAAOH,YAAY,CAACC,OAAO,CAACI,aAAa,CAAC;IAC3C,CAAC;IAED,IAAIL,YAAY,CAACD,CAAC,CAACO,MAAqB,CAAC,EAAE;MAC1C;IACD;IAEApE,OAAO,CAACqE,QAAQ,EAAE;EACnB,CAAC,EACD,CAACrE,OAAO,CAAC,CACT;EAED,MAAM;IAAEsE,YAAY;IAAEC;EAAY,CAAE,GAAGpG,WAAW,EAAE;EAEpD,MAAMqG,kBAAkB,GAAGxH,WAAW,CACrC,CAACyH,KAAc,EAAEC,QAA2B,KAAI;IAC/C,IAAI,CAACA,QAAQ,EAAE;MACd;IACD;IAEAJ,YAAY,CAACG,KAAK,EAAEC,QAAQ,CAAC;EAC9B,CAAC,EACD,CAACJ,YAAY,CAAC,CACd;EAEDrF,oBAAoB,CAACa,IAAI,EAAEC,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEsC,GAAG,CAAC;EACrC/C,0BAA0B,EAAE;EAC5BD,oBAAoB,EAAE;EAEtB,MAAM;IAAEsF,IAAI,EAAEC;EAAU,CAAE,GAAGrH,gBAAgB,CAAC,CAAC,OAAO,EAAEuC,IAAI,CAACuC,GAAG,EAAE,QAAQ,EAAE;IAAEwC,GAAG,EAAE9E,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEsC;EAAG,CAAE,CAAC,EAAE,MAAK;IACrG,MAAMyC,cAAc,GAAG3H,SAAS,CAAC4H,OAAO,CAAC;MACxC,KAAK,EAAEjF,IAAI,CAACuC,GAAG;MACf,OAAO,EAAE,QAAQ;MACjB,OAAO,EAAE;QAAE2C,GAAG,EAAEjF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEsC;MAAG;KACzB,CAAC;IAEF,IAAI,CAACyC,cAAc,EAAE;MACpB,OAAO,IAAI;IACZ;IAEA,OAAA1I,aAAA,CAAAA,aAAA,KACI0I,cAAc,CAACG,CAAC;MACnBC,IAAI,EAAEnE,WAAW,GAAG+D,cAAc,CAACG,CAAC,CAACC,IAAI,IAAIJ,cAAc,CAACG,CAAC,CAACP,QAAQ,GAAGI,cAAc,CAACG,CAAC,CAACP;IAAQ;EAEpG,CAAC,CAAC;EAEF,oBACC5H,KAAA,CAAAqI,aAAA,CAAArI,KAAA,CAAAsI,QAAA,QACE,CAACvF,gBAAgB,IAAIC,IAAI,CAACuF,YAAY,iBAAIvI,KAAA,CAAAqI,aAAA,CAAC3H,YAAY;IAAC6H,YAAY,EAAEvF,IAAI,CAACuF,YAAa;IAACC,mBAAmB,EAAEjF;EAAU,EAAG,eAC5HvD,KAAA,CAAAqI,aAAA,CAAC7I,GAAG;IAACiJ,GAAG,EAAEzF,IAAI,CAACuC,GAAI;IAACmD,SAAS,EAAE,CAAC,mBAAmB,EAAE5D,SAAS;EAAE,gBAC/D9E,KAAA,CAAAqI,aAAA;IACCM,IAAI,EAAC,cAAc;IACnBD,SAAS,8CAAAE,MAAA,CAA8CzF,KAAK,GAAG,OAAO,GAAG,EAAE,CAAG;IAC9E0F,EAAE,iBAAAD,MAAA,CAAiB5F,IAAI,CAACuC,GAAG,CAAG;IAC9BuD,OAAO,EAAExF,WAAW,IAAIwD;EAAmB,gBAE3C9G,KAAA,CAAAqI,aAAA;IAAKK,SAAS,EAAC;EAA4B,gBAC1C1I,KAAA,CAAAqI,aAAA,QAAApJ,QAAA;IAAKyJ,SAAS,EAAC,yBAAyB;IAACK,GAAG,EAAEvC;EAAe,GAAKT,sBAAsB,gBACvF/F,KAAA,CAAAqI,aAAA,CAAC5G,iBAAiB,EAAKuE,sBAAuB,CAC9C,eAAAhG,KAAA,CAAAqI,aAAA,CAAC7I,GAAG;IAACwJ,QAAQ,EAAC,UAAU;IAACC,CAAC,EAAC;EAAM,GAC/BnB,UAAU,gBACV9H,KAAA,CAAAqI,aAAA,CAAC1G,SAAS;IACT4D,GAAG,EAAEuC,UAAU,CAACvC,GAAI;IACpBqC,QAAQ,EAAEE,UAAU,CAACF,QAAS;IAC9BQ,IAAI,EAAEN,UAAU,CAACM,IAAK;IACtBc,OAAO,EAAE,CAACzD,gBAAiB;IAC3B0D,aAAa,EAAEzB,kBAAmB;IAClCD,YAAY,EAAEA;EAAa,EAC1B,GACC,IAAI,eACRzH,KAAA,CAAAqI,aAAA;IAAKK,SAAS,EAAE,CAAC,gBAAgB,EAAE/C,OAAO,CAACyD,MAAM,IAAI,MAAM,CAAC,CAACC,MAAM,CAAC/I,QAAQ,CAAC,CAACgJ,IAAI,CAAC,GAAG;EAAE,GACtF3D,OAAO,CAAC4D,GAAG,CAAEC,MAAM,iBACnBxJ,KAAA,CAAAqI,aAAA,CAACrG,uBAAuB;IACvByG,GAAG,EAAEe,MAAM,CAACX,EAAG;IACfA,EAAE,EAAEW,MAAM,CAACX,EAAG;IACdT,IAAI,EAAEoB,MAAM,CAACpB,IAAK;IAClBqB,UAAU,EAAED,MAAM,CAACC,UAAW;IAC9BC,KAAK,EAAEF,MAAM,CAACE,KAAK,YAAY7G,KAAK,GAAG2G,MAAM,CAACE,KAAK,CAACC,OAAO,GAAGpG,SAAU;IACxEqG,OAAO,EAAE/D;EAA0B,EAEpC,CACG,CACL,EAACgE,OAAO,CAACnF,MAAM,CAAC,iBACf1E,KAAA,CAAAqI,aAAA,CAACtG,uBAAuB;IACvB+H,KAAK,EAAEpF,MAAO;IACdqF,iBAAiB,EAAExF,gCAAiC;IACpDyF,uBAAuB,EAAExF;EAA4B,EAEtD,eAEDxE,KAAA,CAAAqI,aAAA,CAAC1H,UAAU,EAAA1B,QAAA;IAAC8J,GAAG,EAAElE;EAAU,GAAKE,UAAU,CAAC,CACvC,CAEL,eAAA/E,KAAA,CAAAqI,aAAA;IAAKK,SAAS,EAAE,CAAC,cAAc,EAAEZ,UAAU,IAAI,CAACrC,gBAAgB,IAAI,YAAY,CAAC,CAAC4D,MAAM,CAAC/I,QAAQ,CAAC,CAACgJ,IAAI,CAAC,GAAG;EAAE,gBAC5GtJ,KAAA,CAAAqI,aAAA,CAAC3G,yBAAyB;IAACwH,OAAO,EAAE5C,cAAe;IAACwC,OAAO,EAAE3C,2BAA4B;IAAC8D,IAAI,EAAEnH,CAAC,CAAC,cAAc;EAAE,EAClH,eAAA9C,KAAA,CAAAqI,aAAA,CAAC3G,yBAAyB;IACzBwH,OAAO,EAAEvF,mBAAoB;IAC7BmF,OAAO,EAAE1C,6BAA8B;IACvC6D,IAAI,EAAEnH,CAAC,CAAC,yBAAyB;EAAE,EAEpC,EAAC,CAACkB,UAAU,gBACXhE,KAAA,CAAAqI,aAAA;IAAKK,SAAS,EAAC;EAAoC,gBAClD1I,KAAA,CAAAqI,aAAA,cAAMvF,CAAC,CAAC,gDAAgD,CAAO,CAC3D,CAAC,GACH,IAAI,eACR9C,KAAA,CAAAqI,aAAA;IACCK,SAAS,EAAE,CACV,SAAS,EACT/E,mBAAmB,IAAI,eAAe,EACtCH,aAAa,IAAI,gBAAgB,EACjC,CAACC,cAAc,IAAI,aAAa,CAChC,CACC4F,MAAM,CAAC/I,QAAQ,CAAC,CAChBgJ,IAAI,CAAC,GAAG;EAAE,gBAEZtJ,KAAA,CAAAqI,aAAA,CAACxH,wBAAwB,qBACxBb,KAAA,CAAAqI,aAAA,CAAC9H,gBAAgB;IAACwI,GAAG,EAAE1E;EAAS,gBAC/BrE,KAAA,CAAAqI,aAAA;IAAIK,SAAS,EAAC,eAAe;IAAC,cAAY5F,CAAC,CAAC,cAAc,CAAE;IAAC,aAAWc;EAAsB,GAC5FI,UAAU,gBACVhE,KAAA,CAAAqI,aAAA,CAAArI,KAAA,CAAAsI,QAAA,QACE5E,uBAAuB,gBACvB1D,KAAA,CAAAqI,aAAA;IAAIK,SAAS,EAAC;EAAW,GAAE9E,qBAAqB,gBAAG5D,KAAA,CAAAqI,aAAA,CAACzG,wBAAwB,OAAG,GAAG,IAAS,CAAC,gBAE5F5B,KAAA,CAAAqI,aAAA,0BACCrI,KAAA,CAAAqI,aAAA,CAACvG,YAAY;IAACmB,IAAI,EAAEA,IAAK;IAACD,IAAI,EAAEA;EAAK,EACrC,EAACK,eAAe,aAAfA,eAAe,eAAfA,eAAe,CAAE6G,QAAQ,gBAAGlK,KAAA,CAAAqI,aAAA,CAACxG,sBAAsB;IAACmB,IAAI,EAAEA;EAAK,EAAG,GAAG,IACnE,CAEN,CAAG,GACA,IAAI,eACRhD,KAAA,CAAAqI,aAAA,CAACzH,WAAW;IAACuJ,GAAG,EAAEnH,IAAI,CAACuC,GAAI;IAACW,cAAc,EAAEhC;EAAY,EACxD,EAACP,mBAAmB,gBACnB3D,KAAA,CAAAqI,aAAA;IAAIK,SAAS,EAAC;EAAW,GAAE9E,qBAAqB,gBAAG5D,KAAA,CAAAqI,aAAA,CAACzG,wBAAwB,OAAG,GAAG,IAAS,CAAC,GACzF,IACD,CACa,CACO,CACtB,CACD,CACL,eAAA5B,KAAA,CAAAqI,aAAA,CAACtH,YAAY,qBACZf,KAAA,CAAAqI,aAAA,CAACvH,iBAAiB;IACjBsC,YAAY,EAAEA,YAAa;IAC3BgH,QAAQ,EAAE/D,oBAAqB;IAC/BgE,2BAA2B,EAAE5D,+BAAgC;IAC7D6D,uBAAuB,EAAE1D,2BAA4B;IACrD2D,aAAa,EAAE3E;EAAkB,EAIrB,CACV,CACD,CACG,CACL,CACN,CAAG;AAEL,CAAC;AApUD1G,MAAA,CAAOsL,aAAa,eAsULvK,IAAI,CAAC0C,QAAQ,CAtUR","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"49586ffce4b9fb0939d35546d74887e950da97e2"}
