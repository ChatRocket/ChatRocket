{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/mentions/lib/MentionsParser.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"app/mentions/lib/MentionsParser.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/mentions/lib/MentionsParser.ts","inputSourceMap":{"version":3,"file":"app/mentions/lib/MentionsParser.ts","sourceRoot":"","sources":["app/mentions/lib/MentionsParser.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nexport type MentionsParserArgs = {\n\tpattern: () => string;\n\tuseRealName?: () => boolean;\n\tme?: () => string;\n\troomTemplate?: (args: { prefix: string; reference: string; mention: string; channel?: any }) => string;\n\tuserTemplate?: (args: { prefix: string; className: string; mention: string; title?: string; label: string; type?: string }) => string;\n};\n\nconst userTemplateDefault = ({\n\tprefix,\n\tclassName,\n\tmention,\n\ttitle = '',\n\tlabel,\n\ttype = 'username',\n}: {\n\tprefix: string;\n\tclassName: string;\n\tmention: string;\n\ttitle?: string;\n\tlabel?: string;\n\ttype?: string;\n}) => `${prefix}<a class=\"${className}\" data-${type}=\"${mention}\"${title ? ` title=\"${title}\"` : ''}>${label}</a>`;\n\nconst roomTemplateDefault = ({ prefix, reference, mention }: { prefix: string; reference: string; mention: string }) =>\n\t`${prefix}<a class=\"mention-link mention-link--room\" data-channel=\"${reference}\">${`#${mention}`}</a>`;\n\nexport class MentionsParser {\n\tme: () => string;\n\n\tpattern: MentionsParserArgs['pattern'];\n\n\tuserTemplate: (args: { prefix: string; className: string; mention: string; title?: string; label: string; type?: string }) => string;\n\n\troomTemplate: (args: { prefix: string; reference: string; mention: string; channel?: any }) => string;\n\n\tuseRealName: () => boolean;\n\n\tconstructor({ pattern, useRealName, me, roomTemplate = roomTemplateDefault, userTemplate = userTemplateDefault }: MentionsParserArgs) {\n\t\tthis.pattern = pattern;\n\t\tthis.useRealName = useRealName || (() => false);\n\t\tthis.me = me || (() => '');\n\t\tthis.userTemplate = userTemplate;\n\t\tthis.roomTemplate = roomTemplate;\n\t}\n\n\tget userMentionRegex() {\n\t\treturn new RegExp(`(^|\\\\s|>)@(${this.pattern()}(@(${this.pattern()}))?(:([0-9a-zA-Z-_.]+))?)`, 'gm');\n\t}\n\n\tget channelMentionRegex() {\n\t\treturn new RegExp(`(^|\\\\s|>)#(${this.pattern()}(@(${this.pattern()}))?)`, 'gm');\n\t}\n\n\treplaceUsers = (msg: string, { mentions, temp }: IMessage, me: string) =>\n\t\tmsg.replace(this.userMentionRegex, (match, prefix, mention) => {\n\t\t\tconst classNames = ['mention-link'];\n\n\t\t\tif (mention === 'all') {\n\t\t\t\tclassNames.push('mention-link--all');\n\t\t\t\tclassNames.push('mention-link--group');\n\t\t\t} else if (mention === 'here') {\n\t\t\t\tclassNames.push('mention-link--here');\n\t\t\t\tclassNames.push('mention-link--group');\n\t\t\t} else if (mention === me) {\n\t\t\t\tclassNames.push('mention-link--me');\n\t\t\t\tclassNames.push('mention-link--user');\n\t\t\t} else {\n\t\t\t\tclassNames.push('mention-link--user');\n\t\t\t}\n\n\t\t\tconst className = classNames.join(' ');\n\n\t\t\tif (mention === 'all' || mention === 'here') {\n\t\t\t\treturn this.userTemplate({ prefix, className, mention, label: mention, type: 'group' });\n\t\t\t}\n\n\t\t\tconst filterUser = ({ username, type }: { username?: string; type?: string }) => (!type || type === 'user') && username === mention;\n\t\t\tconst filterTeam = ({ name, type }: { name?: string; type?: string }) => type === 'team' && name === mention;\n\n\t\t\tconst [mentionObj] = (mentions || []).filter((m) => m && (filterUser(m) || filterTeam(m)));\n\n\t\t\tconst label = temp\n\t\t\t\t? mention && escapeHTML(mention)\n\t\t\t\t: mentionObj && escapeHTML((mentionObj.type === 'team' || this.useRealName() ? mentionObj.name : mentionObj.username) || '');\n\n\t\t\tif (!label) {\n\t\t\t\treturn match;\n\t\t\t}\n\n\t\t\treturn this.userTemplate({\n\t\t\t\tprefix,\n\t\t\t\tclassName,\n\t\t\t\tmention,\n\t\t\t\tlabel,\n\t\t\t\ttype: mentionObj?.type === 'team' ? 'team' : 'username',\n\t\t\t\ttitle: this.useRealName() ? mention : label,\n\t\t\t});\n\t\t});\n\n\treplaceChannels = (msg: string, { temp, channels }: IMessage) =>\n\t\tmsg.replace(/&#39;/g, \"'\").replace(this.channelMentionRegex, (match, prefix, mention) => {\n\t\t\tif (\n\t\t\t\t!temp &&\n\t\t\t\t!channels?.find((c) => {\n\t\t\t\t\treturn c.name === mention;\n\t\t\t\t})\n\t\t\t) {\n\t\t\t\treturn match;\n\t\t\t}\n\n\t\t\tconst channel = channels?.find(({ name }) => {\n\t\t\t\treturn name === mention;\n\t\t\t});\n\t\t\tconst reference = channel ? channel._id : mention;\n\t\t\treturn this.roomTemplate({ prefix, reference, channel, mention });\n\t\t});\n\n\tgetUserMentions(str: string) {\n\t\treturn (str.match(this.userMentionRegex) || []).map((match) => match.trim());\n\t}\n\n\tgetChannelMentions(str: string) {\n\t\treturn (str.match(this.channelMentionRegex) || []).map((match) => match.trim());\n\t}\n\n\tparse(message: IMessage) {\n\t\tlet msg = message?.html || '';\n\t\tif (!msg.trim()) {\n\t\t\treturn message;\n\t\t}\n\t\tmsg = this.replaceUsers(msg, message, this.me());\n\t\tmsg = this.replaceChannels(msg, message);\n\t\tmessage.html = msg;\n\t\treturn message;\n\t}\n}\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/mentions/lib/MentionsParser.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/mentions/lib/MentionsParser.ts","inputSourceMap":{"version":3,"file":"app/mentions/lib/MentionsParser.ts","sourceRoot":"","sources":["app/mentions/lib/MentionsParser.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nexport type MentionsParserArgs = {\n\tpattern: () => string;\n\tuseRealName?: () => boolean;\n\tme?: () => string;\n\troomTemplate?: (args: { prefix: string; reference: string; mention: string; channel?: any }) => string;\n\tuserTemplate?: (args: { prefix: string; className: string; mention: string; title?: string; label: string; type?: string }) => string;\n};\n\nconst userTemplateDefault = ({\n\tprefix,\n\tclassName,\n\tmention,\n\ttitle = '',\n\tlabel,\n\ttype = 'username',\n}: {\n\tprefix: string;\n\tclassName: string;\n\tmention: string;\n\ttitle?: string;\n\tlabel?: string;\n\ttype?: string;\n}) => `${prefix}<a class=\"${className}\" data-${type}=\"${mention}\"${title ? ` title=\"${title}\"` : ''}>${label}</a>`;\n\nconst roomTemplateDefault = ({ prefix, reference, mention }: { prefix: string; reference: string; mention: string }) =>\n\t`${prefix}<a class=\"mention-link mention-link--room\" data-channel=\"${reference}\">${`#${mention}`}</a>`;\n\nexport class MentionsParser {\n\tme: () => string;\n\n\tpattern: MentionsParserArgs['pattern'];\n\n\tuserTemplate: (args: { prefix: string; className: string; mention: string; title?: string; label: string; type?: string }) => string;\n\n\troomTemplate: (args: { prefix: string; reference: string; mention: string; channel?: any }) => string;\n\n\tuseRealName: () => boolean;\n\n\tconstructor({ pattern, useRealName, me, roomTemplate = roomTemplateDefault, userTemplate = userTemplateDefault }: MentionsParserArgs) {\n\t\tthis.pattern = pattern;\n\t\tthis.useRealName = useRealName || (() => false);\n\t\tthis.me = me || (() => '');\n\t\tthis.userTemplate = userTemplate;\n\t\tthis.roomTemplate = roomTemplate;\n\t}\n\n\tget userMentionRegex() {\n\t\treturn new RegExp(`(^|\\\\s|>)@(${this.pattern()}(@(${this.pattern()}))?(:([0-9a-zA-Z-_.]+))?)`, 'gm');\n\t}\n\n\tget channelMentionRegex() {\n\t\treturn new RegExp(`(^|\\\\s|>)#(${this.pattern()}(@(${this.pattern()}))?)`, 'gm');\n\t}\n\n\treplaceUsers = (msg: string, { mentions, temp }: IMessage, me: string) =>\n\t\tmsg.replace(this.userMentionRegex, (match, prefix, mention) => {\n\t\t\tconst classNames = ['mention-link'];\n\n\t\t\tif (mention === 'all') {\n\t\t\t\tclassNames.push('mention-link--all');\n\t\t\t\tclassNames.push('mention-link--group');\n\t\t\t} else if (mention === 'here') {\n\t\t\t\tclassNames.push('mention-link--here');\n\t\t\t\tclassNames.push('mention-link--group');\n\t\t\t} else if (mention === me) {\n\t\t\t\tclassNames.push('mention-link--me');\n\t\t\t\tclassNames.push('mention-link--user');\n\t\t\t} else {\n\t\t\t\tclassNames.push('mention-link--user');\n\t\t\t}\n\n\t\t\tconst className = classNames.join(' ');\n\n\t\t\tif (mention === 'all' || mention === 'here') {\n\t\t\t\treturn this.userTemplate({ prefix, className, mention, label: mention, type: 'group' });\n\t\t\t}\n\n\t\t\tconst filterUser = ({ username, type }: { username?: string; type?: string }) => (!type || type === 'user') && username === mention;\n\t\t\tconst filterTeam = ({ name, type }: { name?: string; type?: string }) => type === 'team' && name === mention;\n\n\t\t\tconst [mentionObj] = (mentions || []).filter((m) => m && (filterUser(m) || filterTeam(m)));\n\n\t\t\tconst label = temp\n\t\t\t\t? mention && escapeHTML(mention)\n\t\t\t\t: mentionObj && escapeHTML((mentionObj.type === 'team' || this.useRealName() ? mentionObj.name : mentionObj.username) || '');\n\n\t\t\tif (!label) {\n\t\t\t\treturn match;\n\t\t\t}\n\n\t\t\treturn this.userTemplate({\n\t\t\t\tprefix,\n\t\t\t\tclassName,\n\t\t\t\tmention,\n\t\t\t\tlabel,\n\t\t\t\ttype: mentionObj?.type === 'team' ? 'team' : 'username',\n\t\t\t\ttitle: this.useRealName() ? mention : label,\n\t\t\t});\n\t\t});\n\n\treplaceChannels = (msg: string, { temp, channels }: IMessage) =>\n\t\tmsg.replace(/&#39;/g, \"'\").replace(this.channelMentionRegex, (match, prefix, mention) => {\n\t\t\tif (\n\t\t\t\t!temp &&\n\t\t\t\t!channels?.find((c) => {\n\t\t\t\t\treturn c.name === mention;\n\t\t\t\t})\n\t\t\t) {\n\t\t\t\treturn match;\n\t\t\t}\n\n\t\t\tconst channel = channels?.find(({ name }) => {\n\t\t\t\treturn name === mention;\n\t\t\t});\n\t\t\tconst reference = channel ? channel._id : mention;\n\t\t\treturn this.roomTemplate({ prefix, reference, channel, mention });\n\t\t});\n\n\tgetUserMentions(str: string) {\n\t\treturn (str.match(this.userMentionRegex) || []).map((match) => match.trim());\n\t}\n\n\tgetChannelMentions(str: string) {\n\t\treturn (str.match(this.channelMentionRegex) || []).map((match) => match.trim());\n\t}\n\n\tparse(message: IMessage) {\n\t\tlet msg = message?.html || '';\n\t\tif (!msg.trim()) {\n\t\t\treturn message;\n\t\t}\n\t\tmsg = this.replaceUsers(msg, message, this.me());\n\t\tmsg = this.replaceChannels(msg, message);\n\t\tmessage.html = msg;\n\t\treturn message;\n\t}\n}\n"]}}},"code":"var _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 0);\nvar _createClass;\nmodule.link(\"@babel/runtime/helpers/createClass\", {\n  default: function (v) {\n    _createClass = v;\n  }\n}, 1);\nmodule.export({\n  MentionsParser: function () {\n    return MentionsParser;\n  }\n});\nvar escapeHTML;\nmodule.link(\"@rocket.chat/string-helpers\", {\n  escapeHTML: function (v) {\n    escapeHTML = v;\n  }\n}, 0);\nvar userTemplateDefault = function (_ref) {\n  var prefix = _ref.prefix,\n    className = _ref.className,\n    mention = _ref.mention,\n    _ref$title = _ref.title,\n    title = _ref$title === void 0 ? '' : _ref$title,\n    label = _ref.label,\n    _ref$type = _ref.type,\n    type = _ref$type === void 0 ? 'username' : _ref$type;\n  return prefix + \"<a class=\\\"\" + className + \"\\\" data-\" + type + \"=\\\"\" + mention + \"\\\"\" + (title ? \" title=\\\"\" + title + \"\\\"\" : '') + \">\" + label + \"</a>\";\n};\nvar roomTemplateDefault = function (_ref2) {\n  var prefix = _ref2.prefix,\n    reference = _ref2.reference,\n    mention = _ref2.mention;\n  return prefix + \"<a class=\\\"mention-link mention-link--room\\\" data-channel=\\\"\" + reference + \"\\\">\" + (\"#\" + mention) + \"</a>\";\n};\nvar MentionsParser = /*#__PURE__*/function () {\n  function MentionsParser(_ref3) {\n    var _this = this;\n    var pattern = _ref3.pattern,\n      useRealName = _ref3.useRealName,\n      _me = _ref3.me,\n      _ref3$roomTemplate = _ref3.roomTemplate,\n      roomTemplate = _ref3$roomTemplate === void 0 ? roomTemplateDefault : _ref3$roomTemplate,\n      _ref3$userTemplate = _ref3.userTemplate,\n      userTemplate = _ref3$userTemplate === void 0 ? userTemplateDefault : _ref3$userTemplate;\n    this.me = void 0;\n    this.pattern = void 0;\n    this.userTemplate = void 0;\n    this.roomTemplate = void 0;\n    this.useRealName = void 0;\n    this.replaceUsers = function (msg, _ref4, me) {\n      var mentions = _ref4.mentions,\n        temp = _ref4.temp;\n      return msg.replace(_this.userMentionRegex, function (match, prefix, mention) {\n        var classNames = ['mention-link'];\n        if (mention === 'all') {\n          classNames.push('mention-link--all');\n          classNames.push('mention-link--group');\n        } else if (mention === 'here') {\n          classNames.push('mention-link--here');\n          classNames.push('mention-link--group');\n        } else if (mention === me) {\n          classNames.push('mention-link--me');\n          classNames.push('mention-link--user');\n        } else {\n          classNames.push('mention-link--user');\n        }\n        var className = classNames.join(' ');\n        if (mention === 'all' || mention === 'here') {\n          return _this.userTemplate({\n            prefix: prefix,\n            className: className,\n            mention: mention,\n            label: mention,\n            type: 'group'\n          });\n        }\n        var filterUser = function (_ref5) {\n          var username = _ref5.username,\n            type = _ref5.type;\n          return (!type || type === 'user') && username === mention;\n        };\n        var filterTeam = function (_ref6) {\n          var name = _ref6.name,\n            type = _ref6.type;\n          return type === 'team' && name === mention;\n        };\n        var _filter = (mentions || []).filter(function (m) {\n            return m && (filterUser(m) || filterTeam(m));\n          }),\n          _filter2 = _slicedToArray(_filter, 1),\n          mentionObj = _filter2[0];\n        var label = temp ? mention && escapeHTML(mention) : mentionObj && escapeHTML((mentionObj.type === 'team' || _this.useRealName() ? mentionObj.name : mentionObj.username) || '');\n        if (!label) {\n          return match;\n        }\n        return _this.userTemplate({\n          prefix: prefix,\n          className: className,\n          mention: mention,\n          label: label,\n          type: (mentionObj === null || mentionObj === void 0 ? void 0 : mentionObj.type) === 'team' ? 'team' : 'username',\n          title: _this.useRealName() ? mention : label\n        });\n      });\n    };\n    this.replaceChannels = function (msg, _ref7) {\n      var temp = _ref7.temp,\n        channels = _ref7.channels;\n      return msg.replace(/&#39;/g, \"'\").replace(_this.channelMentionRegex, function (match, prefix, mention) {\n        if (!temp && !(channels !== null && channels !== void 0 && channels.find(function (c) {\n          return c.name === mention;\n        }))) {\n          return match;\n        }\n        var channel = channels === null || channels === void 0 ? void 0 : channels.find(function (_ref8) {\n          var name = _ref8.name;\n          return name === mention;\n        });\n        var reference = channel ? channel._id : mention;\n        return _this.roomTemplate({\n          prefix: prefix,\n          reference: reference,\n          channel: channel,\n          mention: mention\n        });\n      });\n    };\n    this.pattern = pattern;\n    this.useRealName = useRealName || function () {\n      return false;\n    };\n    this.me = _me || function () {\n      return '';\n    };\n    this.userTemplate = userTemplate;\n    this.roomTemplate = roomTemplate;\n  }\n  var _proto = MentionsParser.prototype;\n  _proto.getUserMentions = function () {\n    function getUserMentions(str) {\n      return (str.match(this.userMentionRegex) || []).map(function (match) {\n        return match.trim();\n      });\n    }\n    return getUserMentions;\n  }();\n  _proto.getChannelMentions = function () {\n    function getChannelMentions(str) {\n      return (str.match(this.channelMentionRegex) || []).map(function (match) {\n        return match.trim();\n      });\n    }\n    return getChannelMentions;\n  }();\n  _proto.parse = function () {\n    function parse(message) {\n      var msg = (message === null || message === void 0 ? void 0 : message.html) || '';\n      if (!msg.trim()) {\n        return message;\n      }\n      msg = this.replaceUsers(msg, message, this.me());\n      msg = this.replaceChannels(msg, message);\n      message.html = msg;\n      return message;\n    }\n    return parse;\n  }();\n  return _createClass(MentionsParser, [{\n    key: \"userMentionRegex\",\n    get: function () {\n      return new RegExp(\"(^|\\\\s|>)@(\" + this.pattern() + \"(@(\" + this.pattern() + \"))?(:([0-9a-zA-Z-_.]+))?)\", 'gm');\n    }\n  }, {\n    key: \"channelMentionRegex\",\n    get: function () {\n      return new RegExp(\"(^|\\\\s|>)#(\" + this.pattern() + \"(@(\" + this.pattern() + \"))?)\", 'gm');\n    }\n  }]);\n}();","map":{"version":3,"names":["_slicedToArray","module","link","default","v","_createClass","export","MentionsParser","escapeHTML","userTemplateDefault","_ref","prefix","className","mention","_ref$title","title","label","_ref$type","type","roomTemplateDefault","_ref2","reference","_ref3","_this","pattern","useRealName","me","_ref3$roomTemplate","roomTemplate","_ref3$userTemplate","userTemplate","replaceUsers","msg","_ref4","mentions","temp","replace","userMentionRegex","match","classNames","push","join","filterUser","_ref5","username","filterTeam","_ref6","name","_filter","filter","m","_filter2","mentionObj","replaceChannels","_ref7","channels","channelMentionRegex","find","c","channel","_ref8","_id","_proto","prototype","getUserMentions","str","map","trim","getChannelMentions","parse","message","html","key","get","RegExp"],"sources":["app/mentions/lib/MentionsParser.ts"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nexport type MentionsParserArgs = {\n\tpattern: () => string;\n\tuseRealName?: () => boolean;\n\tme?: () => string;\n\troomTemplate?: (args: { prefix: string; reference: string; mention: string; channel?: any }) => string;\n\tuserTemplate?: (args: { prefix: string; className: string; mention: string; title?: string; label: string; type?: string }) => string;\n};\n\nconst userTemplateDefault = ({\n\tprefix,\n\tclassName,\n\tmention,\n\ttitle = '',\n\tlabel,\n\ttype = 'username',\n}: {\n\tprefix: string;\n\tclassName: string;\n\tmention: string;\n\ttitle?: string;\n\tlabel?: string;\n\ttype?: string;\n}) => `${prefix}<a class=\"${className}\" data-${type}=\"${mention}\"${title ? ` title=\"${title}\"` : ''}>${label}</a>`;\n\nconst roomTemplateDefault = ({ prefix, reference, mention }: { prefix: string; reference: string; mention: string }) =>\n\t`${prefix}<a class=\"mention-link mention-link--room\" data-channel=\"${reference}\">${`#${mention}`}</a>`;\n\nexport class MentionsParser {\n\tme: () => string;\n\n\tpattern: MentionsParserArgs['pattern'];\n\n\tuserTemplate: (args: { prefix: string; className: string; mention: string; title?: string; label: string; type?: string }) => string;\n\n\troomTemplate: (args: { prefix: string; reference: string; mention: string; channel?: any }) => string;\n\n\tuseRealName: () => boolean;\n\n\tconstructor({ pattern, useRealName, me, roomTemplate = roomTemplateDefault, userTemplate = userTemplateDefault }: MentionsParserArgs) {\n\t\tthis.pattern = pattern;\n\t\tthis.useRealName = useRealName || (() => false);\n\t\tthis.me = me || (() => '');\n\t\tthis.userTemplate = userTemplate;\n\t\tthis.roomTemplate = roomTemplate;\n\t}\n\n\tget userMentionRegex() {\n\t\treturn new RegExp(`(^|\\\\s|>)@(${this.pattern()}(@(${this.pattern()}))?(:([0-9a-zA-Z-_.]+))?)`, 'gm');\n\t}\n\n\tget channelMentionRegex() {\n\t\treturn new RegExp(`(^|\\\\s|>)#(${this.pattern()}(@(${this.pattern()}))?)`, 'gm');\n\t}\n\n\treplaceUsers = (msg: string, { mentions, temp }: IMessage, me: string) =>\n\t\tmsg.replace(this.userMentionRegex, (match, prefix, mention) => {\n\t\t\tconst classNames = ['mention-link'];\n\n\t\t\tif (mention === 'all') {\n\t\t\t\tclassNames.push('mention-link--all');\n\t\t\t\tclassNames.push('mention-link--group');\n\t\t\t} else if (mention === 'here') {\n\t\t\t\tclassNames.push('mention-link--here');\n\t\t\t\tclassNames.push('mention-link--group');\n\t\t\t} else if (mention === me) {\n\t\t\t\tclassNames.push('mention-link--me');\n\t\t\t\tclassNames.push('mention-link--user');\n\t\t\t} else {\n\t\t\t\tclassNames.push('mention-link--user');\n\t\t\t}\n\n\t\t\tconst className = classNames.join(' ');\n\n\t\t\tif (mention === 'all' || mention === 'here') {\n\t\t\t\treturn this.userTemplate({ prefix, className, mention, label: mention, type: 'group' });\n\t\t\t}\n\n\t\t\tconst filterUser = ({ username, type }: { username?: string; type?: string }) => (!type || type === 'user') && username === mention;\n\t\t\tconst filterTeam = ({ name, type }: { name?: string; type?: string }) => type === 'team' && name === mention;\n\n\t\t\tconst [mentionObj] = (mentions || []).filter((m) => m && (filterUser(m) || filterTeam(m)));\n\n\t\t\tconst label = temp\n\t\t\t\t? mention && escapeHTML(mention)\n\t\t\t\t: mentionObj && escapeHTML((mentionObj.type === 'team' || this.useRealName() ? mentionObj.name : mentionObj.username) || '');\n\n\t\t\tif (!label) {\n\t\t\t\treturn match;\n\t\t\t}\n\n\t\t\treturn this.userTemplate({\n\t\t\t\tprefix,\n\t\t\t\tclassName,\n\t\t\t\tmention,\n\t\t\t\tlabel,\n\t\t\t\ttype: mentionObj?.type === 'team' ? 'team' : 'username',\n\t\t\t\ttitle: this.useRealName() ? mention : label,\n\t\t\t});\n\t\t});\n\n\treplaceChannels = (msg: string, { temp, channels }: IMessage) =>\n\t\tmsg.replace(/&#39;/g, \"'\").replace(this.channelMentionRegex, (match, prefix, mention) => {\n\t\t\tif (\n\t\t\t\t!temp &&\n\t\t\t\t!channels?.find((c) => {\n\t\t\t\t\treturn c.name === mention;\n\t\t\t\t})\n\t\t\t) {\n\t\t\t\treturn match;\n\t\t\t}\n\n\t\t\tconst channel = channels?.find(({ name }) => {\n\t\t\t\treturn name === mention;\n\t\t\t});\n\t\t\tconst reference = channel ? channel._id : mention;\n\t\t\treturn this.roomTemplate({ prefix, reference, channel, mention });\n\t\t});\n\n\tgetUserMentions(str: string) {\n\t\treturn (str.match(this.userMentionRegex) || []).map((match) => match.trim());\n\t}\n\n\tgetChannelMentions(str: string) {\n\t\treturn (str.match(this.channelMentionRegex) || []).map((match) => match.trim());\n\t}\n\n\tparse(message: IMessage) {\n\t\tlet msg = message?.html || '';\n\t\tif (!msg.trim()) {\n\t\t\treturn message;\n\t\t}\n\t\tmsg = this.replaceUsers(msg, message, this.me());\n\t\tmsg = this.replaceChannels(msg, message);\n\t\tmessage.html = msg;\n\t\treturn message;\n\t}\n}\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"d9c7171bc687cc8d81d11d13005ec5e772493905"}
