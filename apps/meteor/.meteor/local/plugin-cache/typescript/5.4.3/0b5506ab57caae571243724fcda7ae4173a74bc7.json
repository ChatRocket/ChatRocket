{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/setupWizard/providers/SetupWizardProvider.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/setupWizard/providers/SetupWizardProvider.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/setupWizard/providers/SetupWizardProvider.tsx","inputSourceMap":{"version":3,"file":"client/views/setupWizard/providers/SetupWizardProvider.tsx","sourceRoot":"","sources":["client/views/setupWizard/providers/SetupWizardProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport {\n\tuseToastMessageDispatch,\n\tuseSessionDispatch,\n\tuseLoginWithPassword,\n\tuseSettingSetValue,\n\tuseSettingsDispatch,\n\tuseMethod,\n\tuseEndpoint,\n\tuseTranslation,\n} from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport type { ReactElement, ContextType } from 'react';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { callbacks } from '../../../../lib/callbacks';\nimport { validateEmail } from '../../../../lib/emailValidator';\nimport { useInvalidateLicense } from '../../../hooks/useLicense';\nimport { queryClient } from '../../../lib/queryClient';\nimport { SetupWizardContext } from '../contexts/SetupWizardContext';\nimport { useParameters } from '../hooks/useParameters';\nimport { useStepRouting } from '../hooks/useStepRouting';\n\nconst initialData: ContextType<typeof SetupWizardContext>['setupWizardData'] = {\n\torganizationData: {\n\t\torganizationName: '',\n\t\torganizationIndustry: '',\n\t\torganizationSize: '',\n\t\tcountry: '',\n\t},\n\tserverData: {\n\t\tagreement: false,\n\t\temail: '',\n\t\tupdates: false,\n\t},\n\tregistrationData: { cloudEmail: '', device_code: '', user_code: '' },\n};\n\ntype HandleRegisterServer = (params: { email: string; resend?: boolean }) => Promise<void>;\n\nconst SetupWizardProvider = ({ children }: { children: ReactElement }): ReactElement => {\n\tconst invalidateLicenseQuery = useInvalidateLicense();\n\tconst t = useTranslation();\n\tconst [setupWizardData, setSetupWizardData] = useState<ContextType<typeof SetupWizardContext>['setupWizardData']>(initialData);\n\tconst [currentStep, setCurrentStep] = useStepRouting();\n\tconst { isSuccess, data } = useParameters();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst dispatchSettings = useSettingsDispatch();\n\n\tconst setShowSetupWizard = useSettingSetValue('Show_Setup_Wizard');\n\tconst registerUser = useMethod('registerUser');\n\tconst defineUsername = useMethod('setUsername');\n\tconst loginWithPassword = useLoginWithPassword();\n\tconst setForceLogin = useSessionDispatch('forceLogin');\n\tconst createRegistrationIntent = useEndpoint('POST', '/v1/cloud.createRegistrationIntent');\n\n\tconst goToPreviousStep = useCallback(() => setCurrentStep((currentStep) => currentStep - 1), [setCurrentStep]);\n\tconst goToNextStep = useCallback(() => setCurrentStep((currentStep) => currentStep + 1), [setCurrentStep]);\n\tconst goToStep = useCallback((step) => setCurrentStep(() => step), [setCurrentStep]);\n\n\tconst _validateEmail = useCallback(\n\t\t(email: string): true | string => {\n\t\t\tif (!validateEmail(email)) {\n\t\t\t\treturn t('Invalid_email');\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\t[t],\n\t);\n\n\tconst registerAdminUser = useCallback(\n\t\tasync ({ fullname, username, email, password }): Promise<void> => {\n\t\t\tawait registerUser({ name: fullname, username, email, pass: password });\n\t\t\tvoid callbacks.run('userRegistered', {});\n\n\t\t\ttry {\n\t\t\t\tawait loginWithPassword(email, password);\n\t\t\t} catch (error) {\n\t\t\t\tif (error instanceof Meteor.Error && error.error === 'error-invalid-email') {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('We_have_sent_registration_email') });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (error instanceof Error || typeof error === 'string') {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\tsetForceLogin(false);\n\n\t\t\tawait defineUsername(username);\n\t\t\tawait dispatchSettings([{ _id: 'Organization_Email', value: email }]);\n\t\t\tvoid callbacks.run('usernameSet', {});\n\t\t},\n\t\t[registerUser, setForceLogin, defineUsername, dispatchSettings, loginWithPassword, dispatchToastMessage, t],\n\t);\n\n\tconst saveAgreementData = useCallback(\n\t\tasync (agreement): Promise<void> => {\n\t\t\tawait dispatchSettings([\n\t\t\t\t{\n\t\t\t\t\t_id: 'Cloud_Service_Agree_PrivacyTerms',\n\t\t\t\t\tvalue: agreement,\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t[dispatchSettings],\n\t);\n\n\tconst saveWorkspaceData = useCallback(async (): Promise<void> => {\n\t\tconst {\n\t\t\tserverData: { updates, agreement },\n\t\t} = setupWizardData;\n\n\t\tawait dispatchSettings([\n\t\t\t{\n\t\t\t\t_id: 'Register_Server',\n\t\t\t\tvalue: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: 'Allow_Marketing_Emails',\n\t\t\t\tvalue: updates,\n\t\t\t},\n\t\t]);\n\t\tawait saveAgreementData(agreement);\n\t}, [dispatchSettings, saveAgreementData, setupWizardData]);\n\n\tconst saveOrganizationData = useCallback(\n\t\tasync (organizationData: ContextType<typeof SetupWizardContext>['setupWizardData']['organizationData']): Promise<void> => {\n\t\t\tconst { organizationName, organizationIndustry, organizationSize, country } = organizationData;\n\n\t\t\tawait dispatchSettings([\n\t\t\t\t{\n\t\t\t\t\t_id: 'Country',\n\t\t\t\t\tvalue: country,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Industry',\n\t\t\t\t\tvalue: organizationIndustry,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Size',\n\t\t\t\t\tvalue: organizationSize,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Organization_Name',\n\t\t\t\t\tvalue: organizationName,\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t[dispatchSettings],\n\t);\n\n\tconst registerServer: HandleRegisterServer = useMutableCallback(async ({ email, resend = false }): Promise<void> => {\n\t\ttry {\n\t\t\tconst { intentData } = await createRegistrationIntent({ resend, email });\n\t\t\tinvalidateLicenseQuery(100);\n\t\t\tqueryClient.invalidateQueries(['getRegistrationStatus']);\n\n\t\t\tsetSetupWizardData((prevState) => ({\n\t\t\t\t...prevState,\n\t\t\t\tregistrationData: { ...intentData, cloudEmail: email },\n\t\t\t}));\n\n\t\t\tgoToStep(4);\n\t\t\tsetShowSetupWizard('in_progress');\n\t\t} catch (e) {\n\t\t\tdispatchToastMessage({ type: 'error', message: t('Cloud_register_error') });\n\t\t}\n\t});\n\n\tconst completeSetupWizard = useMutableCallback(async (): Promise<void> => {\n\t\tdispatchToastMessage({ type: 'success', message: t('Your_workspace_is_ready') });\n\t\treturn setShowSetupWizard('completed');\n\t});\n\n\tconst value = useMemo(\n\t\t() => ({\n\t\t\tsetupWizardData,\n\t\t\tsetSetupWizardData,\n\t\t\tcurrentStep,\n\t\t\tloaded: isSuccess,\n\t\t\tsettings: data.settings,\n\t\t\tskipCloudRegistration: data.serverAlreadyRegistered,\n\t\t\tgoToPreviousStep,\n\t\t\tgoToNextStep,\n\t\t\tgoToStep,\n\t\t\tregisterAdminUser,\n\t\t\tvalidateEmail: _validateEmail,\n\t\t\tregisterServer,\n\t\t\tsaveAgreementData,\n\t\t\tsaveWorkspaceData,\n\t\t\tsaveOrganizationData,\n\t\t\tcompleteSetupWizard,\n\t\t\tmaxSteps: data.serverAlreadyRegistered ? 2 : 4,\n\t\t}),\n\t\t[\n\t\t\tsetupWizardData,\n\t\t\tcurrentStep,\n\t\t\tisSuccess,\n\t\t\tdata.settings,\n\t\t\tdata.serverAlreadyRegistered,\n\t\t\tgoToPreviousStep,\n\t\t\tgoToNextStep,\n\t\t\tgoToStep,\n\t\t\tregisterAdminUser,\n\t\t\t_validateEmail,\n\t\t\tregisterServer,\n\t\t\tsaveAgreementData,\n\t\t\tsaveWorkspaceData,\n\t\t\tsaveOrganizationData,\n\t\t\tcompleteSetupWizard,\n\t\t],\n\t);\n\n\treturn <SetupWizardContext.Provider value={value}>{children}</SetupWizardContext.Provider>;\n};\n\nexport default SetupWizardProvider;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/setupWizard/providers/SetupWizardProvider.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/setupWizard/providers/SetupWizardProvider.tsx","inputSourceMap":{"version":3,"file":"client/views/setupWizard/providers/SetupWizardProvider.tsx","sourceRoot":"","sources":["client/views/setupWizard/providers/SetupWizardProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport {\n\tuseToastMessageDispatch,\n\tuseSessionDispatch,\n\tuseLoginWithPassword,\n\tuseSettingSetValue,\n\tuseSettingsDispatch,\n\tuseMethod,\n\tuseEndpoint,\n\tuseTranslation,\n} from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport type { ReactElement, ContextType } from 'react';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { callbacks } from '../../../../lib/callbacks';\nimport { validateEmail } from '../../../../lib/emailValidator';\nimport { useInvalidateLicense } from '../../../hooks/useLicense';\nimport { queryClient } from '../../../lib/queryClient';\nimport { SetupWizardContext } from '../contexts/SetupWizardContext';\nimport { useParameters } from '../hooks/useParameters';\nimport { useStepRouting } from '../hooks/useStepRouting';\n\nconst initialData: ContextType<typeof SetupWizardContext>['setupWizardData'] = {\n\torganizationData: {\n\t\torganizationName: '',\n\t\torganizationIndustry: '',\n\t\torganizationSize: '',\n\t\tcountry: '',\n\t},\n\tserverData: {\n\t\tagreement: false,\n\t\temail: '',\n\t\tupdates: false,\n\t},\n\tregistrationData: { cloudEmail: '', device_code: '', user_code: '' },\n};\n\ntype HandleRegisterServer = (params: { email: string; resend?: boolean }) => Promise<void>;\n\nconst SetupWizardProvider = ({ children }: { children: ReactElement }): ReactElement => {\n\tconst invalidateLicenseQuery = useInvalidateLicense();\n\tconst t = useTranslation();\n\tconst [setupWizardData, setSetupWizardData] = useState<ContextType<typeof SetupWizardContext>['setupWizardData']>(initialData);\n\tconst [currentStep, setCurrentStep] = useStepRouting();\n\tconst { isSuccess, data } = useParameters();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst dispatchSettings = useSettingsDispatch();\n\n\tconst setShowSetupWizard = useSettingSetValue('Show_Setup_Wizard');\n\tconst registerUser = useMethod('registerUser');\n\tconst defineUsername = useMethod('setUsername');\n\tconst loginWithPassword = useLoginWithPassword();\n\tconst setForceLogin = useSessionDispatch('forceLogin');\n\tconst createRegistrationIntent = useEndpoint('POST', '/v1/cloud.createRegistrationIntent');\n\n\tconst goToPreviousStep = useCallback(() => setCurrentStep((currentStep) => currentStep - 1), [setCurrentStep]);\n\tconst goToNextStep = useCallback(() => setCurrentStep((currentStep) => currentStep + 1), [setCurrentStep]);\n\tconst goToStep = useCallback((step) => setCurrentStep(() => step), [setCurrentStep]);\n\n\tconst _validateEmail = useCallback(\n\t\t(email: string): true | string => {\n\t\t\tif (!validateEmail(email)) {\n\t\t\t\treturn t('Invalid_email');\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\t[t],\n\t);\n\n\tconst registerAdminUser = useCallback(\n\t\tasync ({ fullname, username, email, password }): Promise<void> => {\n\t\t\tawait registerUser({ name: fullname, username, email, pass: password });\n\t\t\tvoid callbacks.run('userRegistered', {});\n\n\t\t\ttry {\n\t\t\t\tawait loginWithPassword(email, password);\n\t\t\t} catch (error) {\n\t\t\t\tif (error instanceof Meteor.Error && error.error === 'error-invalid-email') {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('We_have_sent_registration_email') });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (error instanceof Error || typeof error === 'string') {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\tsetForceLogin(false);\n\n\t\t\tawait defineUsername(username);\n\t\t\tawait dispatchSettings([{ _id: 'Organization_Email', value: email }]);\n\t\t\tvoid callbacks.run('usernameSet', {});\n\t\t},\n\t\t[registerUser, setForceLogin, defineUsername, dispatchSettings, loginWithPassword, dispatchToastMessage, t],\n\t);\n\n\tconst saveAgreementData = useCallback(\n\t\tasync (agreement): Promise<void> => {\n\t\t\tawait dispatchSettings([\n\t\t\t\t{\n\t\t\t\t\t_id: 'Cloud_Service_Agree_PrivacyTerms',\n\t\t\t\t\tvalue: agreement,\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t[dispatchSettings],\n\t);\n\n\tconst saveWorkspaceData = useCallback(async (): Promise<void> => {\n\t\tconst {\n\t\t\tserverData: { updates, agreement },\n\t\t} = setupWizardData;\n\n\t\tawait dispatchSettings([\n\t\t\t{\n\t\t\t\t_id: 'Register_Server',\n\t\t\t\tvalue: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: 'Allow_Marketing_Emails',\n\t\t\t\tvalue: updates,\n\t\t\t},\n\t\t]);\n\t\tawait saveAgreementData(agreement);\n\t}, [dispatchSettings, saveAgreementData, setupWizardData]);\n\n\tconst saveOrganizationData = useCallback(\n\t\tasync (organizationData: ContextType<typeof SetupWizardContext>['setupWizardData']['organizationData']): Promise<void> => {\n\t\t\tconst { organizationName, organizationIndustry, organizationSize, country } = organizationData;\n\n\t\t\tawait dispatchSettings([\n\t\t\t\t{\n\t\t\t\t\t_id: 'Country',\n\t\t\t\t\tvalue: country,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Industry',\n\t\t\t\t\tvalue: organizationIndustry,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Size',\n\t\t\t\t\tvalue: organizationSize,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Organization_Name',\n\t\t\t\t\tvalue: organizationName,\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t[dispatchSettings],\n\t);\n\n\tconst registerServer: HandleRegisterServer = useMutableCallback(async ({ email, resend = false }): Promise<void> => {\n\t\ttry {\n\t\t\tconst { intentData } = await createRegistrationIntent({ resend, email });\n\t\t\tinvalidateLicenseQuery(100);\n\t\t\tqueryClient.invalidateQueries(['getRegistrationStatus']);\n\n\t\t\tsetSetupWizardData((prevState) => ({\n\t\t\t\t...prevState,\n\t\t\t\tregistrationData: { ...intentData, cloudEmail: email },\n\t\t\t}));\n\n\t\t\tgoToStep(4);\n\t\t\tsetShowSetupWizard('in_progress');\n\t\t} catch (e) {\n\t\t\tdispatchToastMessage({ type: 'error', message: t('Cloud_register_error') });\n\t\t}\n\t});\n\n\tconst completeSetupWizard = useMutableCallback(async (): Promise<void> => {\n\t\tdispatchToastMessage({ type: 'success', message: t('Your_workspace_is_ready') });\n\t\treturn setShowSetupWizard('completed');\n\t});\n\n\tconst value = useMemo(\n\t\t() => ({\n\t\t\tsetupWizardData,\n\t\t\tsetSetupWizardData,\n\t\t\tcurrentStep,\n\t\t\tloaded: isSuccess,\n\t\t\tsettings: data.settings,\n\t\t\tskipCloudRegistration: data.serverAlreadyRegistered,\n\t\t\tgoToPreviousStep,\n\t\t\tgoToNextStep,\n\t\t\tgoToStep,\n\t\t\tregisterAdminUser,\n\t\t\tvalidateEmail: _validateEmail,\n\t\t\tregisterServer,\n\t\t\tsaveAgreementData,\n\t\t\tsaveWorkspaceData,\n\t\t\tsaveOrganizationData,\n\t\t\tcompleteSetupWizard,\n\t\t\tmaxSteps: data.serverAlreadyRegistered ? 2 : 4,\n\t\t}),\n\t\t[\n\t\t\tsetupWizardData,\n\t\t\tcurrentStep,\n\t\t\tisSuccess,\n\t\t\tdata.settings,\n\t\t\tdata.serverAlreadyRegistered,\n\t\t\tgoToPreviousStep,\n\t\t\tgoToNextStep,\n\t\t\tgoToStep,\n\t\t\tregisterAdminUser,\n\t\t\t_validateEmail,\n\t\t\tregisterServer,\n\t\t\tsaveAgreementData,\n\t\t\tsaveWorkspaceData,\n\t\t\tsaveOrganizationData,\n\t\t\tcompleteSetupWizard,\n\t\t],\n\t);\n\n\treturn <SetupWizardContext.Provider value={value}>{children}</SetupWizardContext.Provider>;\n};\n\nexport default SetupWizardProvider;\n"]}}},"code":"var _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\nvar _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 1);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 2);\nvar useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 0);\nvar useToastMessageDispatch, useSessionDispatch, useLoginWithPassword, useSettingSetValue, useSettingsDispatch, useMethod, useEndpoint, useTranslation;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  },\n  useSessionDispatch: function (v) {\n    useSessionDispatch = v;\n  },\n  useLoginWithPassword: function (v) {\n    useLoginWithPassword = v;\n  },\n  useSettingSetValue: function (v) {\n    useSettingSetValue = v;\n  },\n  useSettingsDispatch: function (v) {\n    useSettingsDispatch = v;\n  },\n  useMethod: function (v) {\n    useMethod = v;\n  },\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  },\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 1);\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 2);\nvar React, useCallback, useMemo, useState;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 3);\nvar callbacks;\nmodule.link(\"../../../../lib/callbacks\", {\n  callbacks: function (v) {\n    callbacks = v;\n  }\n}, 4);\nvar validateEmail;\nmodule.link(\"../../../../lib/emailValidator\", {\n  validateEmail: function (v) {\n    validateEmail = v;\n  }\n}, 5);\nvar useInvalidateLicense;\nmodule.link(\"../../../hooks/useLicense\", {\n  useInvalidateLicense: function (v) {\n    useInvalidateLicense = v;\n  }\n}, 6);\nvar queryClient;\nmodule.link(\"../../../lib/queryClient\", {\n  queryClient: function (v) {\n    queryClient = v;\n  }\n}, 7);\nvar SetupWizardContext;\nmodule.link(\"../contexts/SetupWizardContext\", {\n  SetupWizardContext: function (v) {\n    SetupWizardContext = v;\n  }\n}, 8);\nvar useParameters;\nmodule.link(\"../hooks/useParameters\", {\n  useParameters: function (v) {\n    useParameters = v;\n  }\n}, 9);\nvar useStepRouting;\nmodule.link(\"../hooks/useStepRouting\", {\n  useStepRouting: function (v) {\n    useStepRouting = v;\n  }\n}, 10);\nvar initialData = {\n  organizationData: {\n    organizationName: '',\n    organizationIndustry: '',\n    organizationSize: '',\n    country: ''\n  },\n  serverData: {\n    agreement: false,\n    email: '',\n    updates: false\n  },\n  registrationData: {\n    cloudEmail: '',\n    device_code: '',\n    user_code: ''\n  }\n};\nvar SetupWizardProvider = function (_ref) {\n  var children = _ref.children;\n  var invalidateLicenseQuery = useInvalidateLicense();\n  var t = useTranslation();\n  var _useState = useState(initialData),\n    _useState2 = _slicedToArray(_useState, 2),\n    setupWizardData = _useState2[0],\n    setSetupWizardData = _useState2[1];\n  var _useStepRouting = useStepRouting(),\n    _useStepRouting2 = _slicedToArray(_useStepRouting, 2),\n    currentStep = _useStepRouting2[0],\n    setCurrentStep = _useStepRouting2[1];\n  var _useParameters = useParameters(),\n    isSuccess = _useParameters.isSuccess,\n    data = _useParameters.data;\n  var dispatchToastMessage = useToastMessageDispatch();\n  var dispatchSettings = useSettingsDispatch();\n  var setShowSetupWizard = useSettingSetValue('Show_Setup_Wizard');\n  var registerUser = useMethod('registerUser');\n  var defineUsername = useMethod('setUsername');\n  var loginWithPassword = useLoginWithPassword();\n  var setForceLogin = useSessionDispatch('forceLogin');\n  var createRegistrationIntent = useEndpoint('POST', '/v1/cloud.createRegistrationIntent');\n  var goToPreviousStep = useCallback(function () {\n    return setCurrentStep(function (currentStep) {\n      return currentStep - 1;\n    });\n  }, [setCurrentStep]);\n  var goToNextStep = useCallback(function () {\n    return setCurrentStep(function (currentStep) {\n      return currentStep + 1;\n    });\n  }, [setCurrentStep]);\n  var goToStep = useCallback(function (step) {\n    return setCurrentStep(function () {\n      return step;\n    });\n  }, [setCurrentStep]);\n  var _validateEmail = useCallback(function (email) {\n    if (!validateEmail(email)) {\n      return t('Invalid_email');\n    }\n    return true;\n  }, [t]);\n  var registerAdminUser = useCallback(function () {\n    function _callee(_ref2) {\n      var fullname, username, email, password;\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              fullname = _ref2.fullname, username = _ref2.username, email = _ref2.email, password = _ref2.password;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(registerUser({\n                name: fullname,\n                username: username,\n                email: email,\n                pass: password\n              }));\n            case 3:\n              void callbacks.run('userRegistered', {});\n              _context.prev = 4;\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(loginWithPassword(email, password));\n            case 7:\n              _context.next = 16;\n              break;\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](4);\n              if (!(_context.t0 instanceof Meteor.Error && _context.t0.error === 'error-invalid-email')) {\n                _context.next = 14;\n                break;\n              }\n              dispatchToastMessage({\n                type: 'success',\n                message: t('We_have_sent_registration_email')\n              });\n              return _context.abrupt(\"return\");\n            case 14:\n              if (_context.t0 instanceof Error || typeof _context.t0 === 'string') {\n                dispatchToastMessage({\n                  type: 'error',\n                  message: _context.t0\n                });\n              }\n              throw _context.t0;\n            case 16:\n              setForceLogin(false);\n              _context.next = 19;\n              return _regeneratorRuntime.awrap(defineUsername(username));\n            case 19:\n              _context.next = 21;\n              return _regeneratorRuntime.awrap(dispatchSettings([{\n                _id: 'Organization_Email',\n                value: email\n              }]));\n            case 21:\n              void callbacks.run('usernameSet', {});\n            case 22:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n        return _callee$;\n      }(), null, null, [[4, 9]], Promise);\n    }\n    return _callee;\n  }(), [registerUser, setForceLogin, defineUsername, dispatchSettings, loginWithPassword, dispatchToastMessage, t]);\n  var saveAgreementData = useCallback(function () {\n    function _callee2(agreement) {\n      return _regeneratorRuntime.async(function () {\n        function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(dispatchSettings([{\n                _id: 'Cloud_Service_Agree_PrivacyTerms',\n                value: agreement\n              }]));\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n        return _callee2$;\n      }(), null, null, null, Promise);\n    }\n    return _callee2;\n  }(), [dispatchSettings]);\n  var saveWorkspaceData = useCallback(function () {\n    function _callee3() {\n      var _setupWizardData$serv, updates, agreement;\n      return _regeneratorRuntime.async(function () {\n        function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _setupWizardData$serv = setupWizardData.serverData, updates = _setupWizardData$serv.updates, agreement = _setupWizardData$serv.agreement;\n              _context3.next = 3;\n              return _regeneratorRuntime.awrap(dispatchSettings([{\n                _id: 'Register_Server',\n                value: true\n              }, {\n                _id: 'Allow_Marketing_Emails',\n                value: updates\n              }]));\n            case 3:\n              _context3.next = 5;\n              return _regeneratorRuntime.awrap(saveAgreementData(agreement));\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n        return _callee3$;\n      }(), null, null, null, Promise);\n    }\n    return _callee3;\n  }(), [dispatchSettings, saveAgreementData, setupWizardData]);\n  var saveOrganizationData = useCallback(function () {\n    function _callee4(organizationData) {\n      var organizationName, organizationIndustry, organizationSize, country;\n      return _regeneratorRuntime.async(function () {\n        function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              organizationName = organizationData.organizationName, organizationIndustry = organizationData.organizationIndustry, organizationSize = organizationData.organizationSize, country = organizationData.country;\n              _context4.next = 3;\n              return _regeneratorRuntime.awrap(dispatchSettings([{\n                _id: 'Country',\n                value: country\n              }, {\n                _id: 'Industry',\n                value: organizationIndustry\n              }, {\n                _id: 'Size',\n                value: organizationSize\n              }, {\n                _id: 'Organization_Name',\n                value: organizationName\n              }]));\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n        return _callee4$;\n      }(), null, null, null, Promise);\n    }\n    return _callee4;\n  }(), [dispatchSettings]);\n  var registerServer = useMutableCallback(function () {\n    function _callee5(_ref3) {\n      var email, _ref3$resend, resend, _await$createRegistra, intentData;\n      return _regeneratorRuntime.async(function () {\n        function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              email = _ref3.email, _ref3$resend = _ref3.resend, resend = _ref3$resend === void 0 ? false : _ref3$resend;\n              _context5.prev = 1;\n              _context5.next = 4;\n              return _regeneratorRuntime.awrap(createRegistrationIntent({\n                resend: resend,\n                email: email\n              }));\n            case 4:\n              _await$createRegistra = _context5.sent;\n              intentData = _await$createRegistra.intentData;\n              invalidateLicenseQuery(100);\n              queryClient.invalidateQueries(['getRegistrationStatus']);\n              setSetupWizardData(function (prevState) {\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  registrationData: _objectSpread(_objectSpread({}, intentData), {}, {\n                    cloudEmail: email\n                  })\n                });\n              });\n              goToStep(4);\n              setShowSetupWizard('in_progress');\n              _context5.next = 16;\n              break;\n            case 13:\n              _context5.prev = 13;\n              _context5.t0 = _context5[\"catch\"](1);\n              dispatchToastMessage({\n                type: 'error',\n                message: t('Cloud_register_error')\n              });\n            case 16:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n        return _callee5$;\n      }(), null, null, [[1, 13]], Promise);\n    }\n    return _callee5;\n  }());\n  var completeSetupWizard = useMutableCallback(function () {\n    function _callee6() {\n      return _regeneratorRuntime.async(function () {\n        function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              dispatchToastMessage({\n                type: 'success',\n                message: t('Your_workspace_is_ready')\n              });\n              return _context6.abrupt(\"return\", setShowSetupWizard('completed'));\n            case 2:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n        return _callee6$;\n      }(), null, null, null, Promise);\n    }\n    return _callee6;\n  }());\n  var value = useMemo(function () {\n    return {\n      setupWizardData: setupWizardData,\n      setSetupWizardData: setSetupWizardData,\n      currentStep: currentStep,\n      loaded: isSuccess,\n      settings: data.settings,\n      skipCloudRegistration: data.serverAlreadyRegistered,\n      goToPreviousStep: goToPreviousStep,\n      goToNextStep: goToNextStep,\n      goToStep: goToStep,\n      registerAdminUser: registerAdminUser,\n      validateEmail: _validateEmail,\n      registerServer: registerServer,\n      saveAgreementData: saveAgreementData,\n      saveWorkspaceData: saveWorkspaceData,\n      saveOrganizationData: saveOrganizationData,\n      completeSetupWizard: completeSetupWizard,\n      maxSteps: data.serverAlreadyRegistered ? 2 : 4\n    };\n  }, [setupWizardData, currentStep, isSuccess, data.settings, data.serverAlreadyRegistered, goToPreviousStep, goToNextStep, goToStep, registerAdminUser, _validateEmail, registerServer, saveAgreementData, saveWorkspaceData, saveOrganizationData, completeSetupWizard]);\n  return /*#__PURE__*/React.createElement(SetupWizardContext.Provider, {\n    value: value\n  }, children);\n};\nmodule.exportDefault(SetupWizardProvider);","map":{"version":3,"names":["_regeneratorRuntime","module","link","default","v","_objectSpread","_slicedToArray","useMutableCallback","useToastMessageDispatch","useSessionDispatch","useLoginWithPassword","useSettingSetValue","useSettingsDispatch","useMethod","useEndpoint","useTranslation","Meteor","React","useCallback","useMemo","useState","callbacks","validateEmail","useInvalidateLicense","queryClient","SetupWizardContext","useParameters","useStepRouting","initialData","organizationData","organizationName","organizationIndustry","organizationSize","country","serverData","agreement","email","updates","registrationData","cloudEmail","device_code","user_code","SetupWizardProvider","_ref","children","invalidateLicenseQuery","t","_useState","_useState2","setupWizardData","setSetupWizardData","_useStepRouting","_useStepRouting2","currentStep","setCurrentStep","_useParameters","isSuccess","data","dispatchToastMessage","dispatchSettings","setShowSetupWizard","registerUser","defineUsername","loginWithPassword","setForceLogin","createRegistrationIntent","goToPreviousStep","goToNextStep","goToStep","step","_validateEmail","registerAdminUser","_callee","_ref2","fullname","username","password","async","_callee$","_context","prev","next","awrap","name","pass","run","t0","Error","error","type","message","abrupt","_id","value","stop","Promise","saveAgreementData","_callee2","_callee2$","_context2","saveWorkspaceData","_callee3","_setupWizardData$serv","_callee3$","_context3","saveOrganizationData","_callee4","_callee4$","_context4","registerServer","_callee5","_ref3","_ref3$resend","resend","_await$createRegistra","intentData","_callee5$","_context5","sent","invalidateQueries","prevState","completeSetupWizard","_callee6","_callee6$","_context6","loaded","settings","skipCloudRegistration","serverAlreadyRegistered","maxSteps","createElement","Provider","exportDefault"],"sources":["client/views/setupWizard/providers/SetupWizardProvider.tsx"],"sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport {\n\tuseToastMessageDispatch,\n\tuseSessionDispatch,\n\tuseLoginWithPassword,\n\tuseSettingSetValue,\n\tuseSettingsDispatch,\n\tuseMethod,\n\tuseEndpoint,\n\tuseTranslation,\n} from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport type { ReactElement, ContextType } from 'react';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { callbacks } from '../../../../lib/callbacks';\nimport { validateEmail } from '../../../../lib/emailValidator';\nimport { useInvalidateLicense } from '../../../hooks/useLicense';\nimport { queryClient } from '../../../lib/queryClient';\nimport { SetupWizardContext } from '../contexts/SetupWizardContext';\nimport { useParameters } from '../hooks/useParameters';\nimport { useStepRouting } from '../hooks/useStepRouting';\n\nconst initialData: ContextType<typeof SetupWizardContext>['setupWizardData'] = {\n\torganizationData: {\n\t\torganizationName: '',\n\t\torganizationIndustry: '',\n\t\torganizationSize: '',\n\t\tcountry: '',\n\t},\n\tserverData: {\n\t\tagreement: false,\n\t\temail: '',\n\t\tupdates: false,\n\t},\n\tregistrationData: { cloudEmail: '', device_code: '', user_code: '' },\n};\n\ntype HandleRegisterServer = (params: { email: string; resend?: boolean }) => Promise<void>;\n\nconst SetupWizardProvider = ({ children }: { children: ReactElement }): ReactElement => {\n\tconst invalidateLicenseQuery = useInvalidateLicense();\n\tconst t = useTranslation();\n\tconst [setupWizardData, setSetupWizardData] = useState<ContextType<typeof SetupWizardContext>['setupWizardData']>(initialData);\n\tconst [currentStep, setCurrentStep] = useStepRouting();\n\tconst { isSuccess, data } = useParameters();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst dispatchSettings = useSettingsDispatch();\n\n\tconst setShowSetupWizard = useSettingSetValue('Show_Setup_Wizard');\n\tconst registerUser = useMethod('registerUser');\n\tconst defineUsername = useMethod('setUsername');\n\tconst loginWithPassword = useLoginWithPassword();\n\tconst setForceLogin = useSessionDispatch('forceLogin');\n\tconst createRegistrationIntent = useEndpoint('POST', '/v1/cloud.createRegistrationIntent');\n\n\tconst goToPreviousStep = useCallback(() => setCurrentStep((currentStep) => currentStep - 1), [setCurrentStep]);\n\tconst goToNextStep = useCallback(() => setCurrentStep((currentStep) => currentStep + 1), [setCurrentStep]);\n\tconst goToStep = useCallback((step) => setCurrentStep(() => step), [setCurrentStep]);\n\n\tconst _validateEmail = useCallback(\n\t\t(email: string): true | string => {\n\t\t\tif (!validateEmail(email)) {\n\t\t\t\treturn t('Invalid_email');\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\t[t],\n\t);\n\n\tconst registerAdminUser = useCallback(\n\t\tasync ({ fullname, username, email, password }): Promise<void> => {\n\t\t\tawait registerUser({ name: fullname, username, email, pass: password });\n\t\t\tvoid callbacks.run('userRegistered', {});\n\n\t\t\ttry {\n\t\t\t\tawait loginWithPassword(email, password);\n\t\t\t} catch (error) {\n\t\t\t\tif (error instanceof Meteor.Error && error.error === 'error-invalid-email') {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('We_have_sent_registration_email') });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (error instanceof Error || typeof error === 'string') {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\tsetForceLogin(false);\n\n\t\t\tawait defineUsername(username);\n\t\t\tawait dispatchSettings([{ _id: 'Organization_Email', value: email }]);\n\t\t\tvoid callbacks.run('usernameSet', {});\n\t\t},\n\t\t[registerUser, setForceLogin, defineUsername, dispatchSettings, loginWithPassword, dispatchToastMessage, t],\n\t);\n\n\tconst saveAgreementData = useCallback(\n\t\tasync (agreement): Promise<void> => {\n\t\t\tawait dispatchSettings([\n\t\t\t\t{\n\t\t\t\t\t_id: 'Cloud_Service_Agree_PrivacyTerms',\n\t\t\t\t\tvalue: agreement,\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t[dispatchSettings],\n\t);\n\n\tconst saveWorkspaceData = useCallback(async (): Promise<void> => {\n\t\tconst {\n\t\t\tserverData: { updates, agreement },\n\t\t} = setupWizardData;\n\n\t\tawait dispatchSettings([\n\t\t\t{\n\t\t\t\t_id: 'Register_Server',\n\t\t\t\tvalue: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\t_id: 'Allow_Marketing_Emails',\n\t\t\t\tvalue: updates,\n\t\t\t},\n\t\t]);\n\t\tawait saveAgreementData(agreement);\n\t}, [dispatchSettings, saveAgreementData, setupWizardData]);\n\n\tconst saveOrganizationData = useCallback(\n\t\tasync (organizationData: ContextType<typeof SetupWizardContext>['setupWizardData']['organizationData']): Promise<void> => {\n\t\t\tconst { organizationName, organizationIndustry, organizationSize, country } = organizationData;\n\n\t\t\tawait dispatchSettings([\n\t\t\t\t{\n\t\t\t\t\t_id: 'Country',\n\t\t\t\t\tvalue: country,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Industry',\n\t\t\t\t\tvalue: organizationIndustry,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Size',\n\t\t\t\t\tvalue: organizationSize,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_id: 'Organization_Name',\n\t\t\t\t\tvalue: organizationName,\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t[dispatchSettings],\n\t);\n\n\tconst registerServer: HandleRegisterServer = useMutableCallback(async ({ email, resend = false }): Promise<void> => {\n\t\ttry {\n\t\t\tconst { intentData } = await createRegistrationIntent({ resend, email });\n\t\t\tinvalidateLicenseQuery(100);\n\t\t\tqueryClient.invalidateQueries(['getRegistrationStatus']);\n\n\t\t\tsetSetupWizardData((prevState) => ({\n\t\t\t\t...prevState,\n\t\t\t\tregistrationData: { ...intentData, cloudEmail: email },\n\t\t\t}));\n\n\t\t\tgoToStep(4);\n\t\t\tsetShowSetupWizard('in_progress');\n\t\t} catch (e) {\n\t\t\tdispatchToastMessage({ type: 'error', message: t('Cloud_register_error') });\n\t\t}\n\t});\n\n\tconst completeSetupWizard = useMutableCallback(async (): Promise<void> => {\n\t\tdispatchToastMessage({ type: 'success', message: t('Your_workspace_is_ready') });\n\t\treturn setShowSetupWizard('completed');\n\t});\n\n\tconst value = useMemo(\n\t\t() => ({\n\t\t\tsetupWizardData,\n\t\t\tsetSetupWizardData,\n\t\t\tcurrentStep,\n\t\t\tloaded: isSuccess,\n\t\t\tsettings: data.settings,\n\t\t\tskipCloudRegistration: data.serverAlreadyRegistered,\n\t\t\tgoToPreviousStep,\n\t\t\tgoToNextStep,\n\t\t\tgoToStep,\n\t\t\tregisterAdminUser,\n\t\t\tvalidateEmail: _validateEmail,\n\t\t\tregisterServer,\n\t\t\tsaveAgreementData,\n\t\t\tsaveWorkspaceData,\n\t\t\tsaveOrganizationData,\n\t\t\tcompleteSetupWizard,\n\t\t\tmaxSteps: data.serverAlreadyRegistered ? 2 : 4,\n\t\t}),\n\t\t[\n\t\t\tsetupWizardData,\n\t\t\tcurrentStep,\n\t\t\tisSuccess,\n\t\t\tdata.settings,\n\t\t\tdata.serverAlreadyRegistered,\n\t\t\tgoToPreviousStep,\n\t\t\tgoToNextStep,\n\t\t\tgoToStep,\n\t\t\tregisterAdminUser,\n\t\t\t_validateEmail,\n\t\t\tregisterServer,\n\t\t\tsaveAgreementData,\n\t\t\tsaveWorkspaceData,\n\t\t\tsaveOrganizationData,\n\t\t\tcompleteSetupWizard,\n\t\t],\n\t);\n\n\treturn <SetupWizardContext.Provider value={value}>{children}</SetupWizardContext.Provider>;\n};\n\nexport default SetupWizardProvider;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"0b5506ab57caae571243724fcda7ae4173a74bc7"}
