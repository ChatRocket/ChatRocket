{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/ee/server/local-services/voip-freeswitch/service.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"ee/server/local-services/voip-freeswitch/service.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/ee/server/local-services/voip-freeswitch/service.ts","inputSourceMap":{"version":3,"file":"ee/server/local-services/voip-freeswitch/service.ts","sourceRoot":"","sources":["ee/server/local-services/voip-freeswitch/service.ts"],"names":[],"mappings":"AAAA,OAAO,EAA+B,oBAAoB,EAAE,MAAM,4BAA4B,CAAC;AAE/F,OAAO,EAAE,SAAS,EAAE,eAAe,EAAE,gBAAgB,EAAE,mBAAmB,EAAE,MAAM,yBAAyB,CAAC;AAE5G,MAAM,OAAO,qBAAsB,SAAQ,oBAAoB;IAG1C;IAFV,IAAI,GAAG,iBAAiB,CAAC;IAEnC,YAAoB,UAA6E;QAChG,KAAK,EAAE,CAAC;QADW,eAAU,GAAV,UAAU,CAAmE;IAEjG,CAAC;IAEO,qBAAqB;QAC5B,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,yBAAyB,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;YAC9E,MAAM,IAAI,KAAK,CAAC,mBAAmB,CAAC,CAAC;QACtC,CAAC;QAED,MAAM,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,YAAY,IAAI,IAAI,CAAC,UAAU,CAAS,iCAAiC,CAAC,CAAC;QACpG,IAAI,CAAC,IAAI,EAAE,CAAC;YACX,MAAM,IAAI,KAAK,CAAC,kCAAkC,CAAC,CAAC;QACrD,CAAC;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAS,iCAAiC,CAAC,IAAI,IAAI,CAAC;QAChF,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,CAAS,oCAAoC,CAAC,IAAI,IAAI,CAAC;QACtF,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAS,qCAAqC,CAAC,CAAC;QAEhF,OAAO;YACN,IAAI;YACJ,IAAI;YACJ,QAAQ;YACR,OAAO;SACP,CAAC;IACH,CAAC;IAED,KAAK,CAAC,SAAS;QACd,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7C,OAAO,SAAS,CAAC,OAAO,CAAC,CAAC;IAC3B,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,IAAY;QACjC,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7C,OAAO,eAAe,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IACvC,CAAC;IAED,KAAK,CAAC,gBAAgB;QACrB,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7C,OAAO,gBAAgB,CAAC,OAAO,CAAC,CAAC;IAClC,CAAC;IAED,KAAK,CAAC,mBAAmB,CAAC,aAAoD;QAC7E,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7C,OAAO,mBAAmB,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;IACpD,CAAC;CACD","sourcesContent":["import { type IVoipFreeSwitchService, ServiceClassInternal } from '@rocket.chat/core-services';\nimport type { FreeSwitchExtension, ISetting, SettingValue } from '@rocket.chat/core-typings';\nimport { getDomain, getUserPassword, getExtensionList, getExtensionDetails } from '@rocket.chat/freeswitch';\n\nexport class VoipFreeSwitchService extends ServiceClassInternal implements IVoipFreeSwitchService {\n\tprotected name = 'voip-freeswitch';\n\n\tconstructor(private getSetting: <T extends SettingValue = SettingValue>(id: ISetting['_id']) => T) {\n\t\tsuper();\n\t}\n\n\tprivate getConnectionSettings(): { host: string; port: number; password: string; timeout: number } {\n\t\tif (!this.getSetting('VoIP_TeamCollab_Enabled') && !process.env.FREESWITCHIP) {\n\t\t\tthrow new Error('VoIP is disabled.');\n\t\t}\n\n\t\tconst host = process.env.FREESWITCHIP || this.getSetting<string>('VoIP_TeamCollab_FreeSwitch_Host');\n\t\tif (!host) {\n\t\t\tthrow new Error('VoIP is not properly configured.');\n\t\t}\n\n\t\tconst port = this.getSetting<number>('VoIP_TeamCollab_FreeSwitch_Port') || 8021;\n\t\tconst timeout = this.getSetting<number>('VoIP_TeamCollab_FreeSwitch_Timeout') || 3000;\n\t\tconst password = this.getSetting<string>('VoIP_TeamCollab_FreeSwitch_Password');\n\n\t\treturn {\n\t\t\thost,\n\t\t\tport,\n\t\t\tpassword,\n\t\t\ttimeout,\n\t\t};\n\t}\n\n\tasync getDomain(): Promise<string> {\n\t\tconst options = this.getConnectionSettings();\n\t\treturn getDomain(options);\n\t}\n\n\tasync getUserPassword(user: string): Promise<string> {\n\t\tconst options = this.getConnectionSettings();\n\t\treturn getUserPassword(options, user);\n\t}\n\n\tasync getExtensionList(): Promise<FreeSwitchExtension[]> {\n\t\tconst options = this.getConnectionSettings();\n\t\treturn getExtensionList(options);\n\t}\n\n\tasync getExtensionDetails(requestParams: { extension: string; group?: string }): Promise<FreeSwitchExtension> {\n\t\tconst options = this.getConnectionSettings();\n\t\treturn getExtensionDetails(options, requestParams);\n\t}\n}\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true,"topLevelAwait":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/ee/server/local-services/voip-freeswitch/service.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"ee/server/local-services/voip-freeswitch/service.ts","inputSourceMap":{"version":3,"file":"ee/server/local-services/voip-freeswitch/service.ts","sourceRoot":"","sources":["ee/server/local-services/voip-freeswitch/service.ts"],"names":[],"mappings":"AAAA,OAAO,EAA+B,oBAAoB,EAAE,MAAM,4BAA4B,CAAC;AAE/F,OAAO,EAAE,SAAS,EAAE,eAAe,EAAE,gBAAgB,EAAE,mBAAmB,EAAE,MAAM,yBAAyB,CAAC;AAE5G,MAAM,OAAO,qBAAsB,SAAQ,oBAAoB;IAG1C;IAFV,IAAI,GAAG,iBAAiB,CAAC;IAEnC,YAAoB,UAA6E;QAChG,KAAK,EAAE,CAAC;QADW,eAAU,GAAV,UAAU,CAAmE;IAEjG,CAAC;IAEO,qBAAqB;QAC5B,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,yBAAyB,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;YAC9E,MAAM,IAAI,KAAK,CAAC,mBAAmB,CAAC,CAAC;QACtC,CAAC;QAED,MAAM,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,YAAY,IAAI,IAAI,CAAC,UAAU,CAAS,iCAAiC,CAAC,CAAC;QACpG,IAAI,CAAC,IAAI,EAAE,CAAC;YACX,MAAM,IAAI,KAAK,CAAC,kCAAkC,CAAC,CAAC;QACrD,CAAC;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAS,iCAAiC,CAAC,IAAI,IAAI,CAAC;QAChF,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,CAAS,oCAAoC,CAAC,IAAI,IAAI,CAAC;QACtF,MAAM,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAS,qCAAqC,CAAC,CAAC;QAEhF,OAAO;YACN,IAAI;YACJ,IAAI;YACJ,QAAQ;YACR,OAAO;SACP,CAAC;IACH,CAAC;IAED,KAAK,CAAC,SAAS;QACd,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7C,OAAO,SAAS,CAAC,OAAO,CAAC,CAAC;IAC3B,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,IAAY;QACjC,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7C,OAAO,eAAe,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IACvC,CAAC;IAED,KAAK,CAAC,gBAAgB;QACrB,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7C,OAAO,gBAAgB,CAAC,OAAO,CAAC,CAAC;IAClC,CAAC;IAED,KAAK,CAAC,mBAAmB,CAAC,aAAoD;QAC7E,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7C,OAAO,mBAAmB,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;IACpD,CAAC;CACD","sourcesContent":["import { type IVoipFreeSwitchService, ServiceClassInternal } from '@rocket.chat/core-services';\nimport type { FreeSwitchExtension, ISetting, SettingValue } from '@rocket.chat/core-typings';\nimport { getDomain, getUserPassword, getExtensionList, getExtensionDetails } from '@rocket.chat/freeswitch';\n\nexport class VoipFreeSwitchService extends ServiceClassInternal implements IVoipFreeSwitchService {\n\tprotected name = 'voip-freeswitch';\n\n\tconstructor(private getSetting: <T extends SettingValue = SettingValue>(id: ISetting['_id']) => T) {\n\t\tsuper();\n\t}\n\n\tprivate getConnectionSettings(): { host: string; port: number; password: string; timeout: number } {\n\t\tif (!this.getSetting('VoIP_TeamCollab_Enabled') && !process.env.FREESWITCHIP) {\n\t\t\tthrow new Error('VoIP is disabled.');\n\t\t}\n\n\t\tconst host = process.env.FREESWITCHIP || this.getSetting<string>('VoIP_TeamCollab_FreeSwitch_Host');\n\t\tif (!host) {\n\t\t\tthrow new Error('VoIP is not properly configured.');\n\t\t}\n\n\t\tconst port = this.getSetting<number>('VoIP_TeamCollab_FreeSwitch_Port') || 8021;\n\t\tconst timeout = this.getSetting<number>('VoIP_TeamCollab_FreeSwitch_Timeout') || 3000;\n\t\tconst password = this.getSetting<string>('VoIP_TeamCollab_FreeSwitch_Password');\n\n\t\treturn {\n\t\t\thost,\n\t\t\tport,\n\t\t\tpassword,\n\t\t\ttimeout,\n\t\t};\n\t}\n\n\tasync getDomain(): Promise<string> {\n\t\tconst options = this.getConnectionSettings();\n\t\treturn getDomain(options);\n\t}\n\n\tasync getUserPassword(user: string): Promise<string> {\n\t\tconst options = this.getConnectionSettings();\n\t\treturn getUserPassword(options, user);\n\t}\n\n\tasync getExtensionList(): Promise<FreeSwitchExtension[]> {\n\t\tconst options = this.getConnectionSettings();\n\t\treturn getExtensionList(options);\n\t}\n\n\tasync getExtensionDetails(requestParams: { extension: string; group?: string }): Promise<FreeSwitchExtension> {\n\t\tconst options = this.getConnectionSettings();\n\t\treturn getExtensionDetails(options, requestParams);\n\t}\n}\n"]}}},"code":"!module.wrapAsync(async function (module, __reifyWaitForDeps__, __reify_async_result__) {\n  \"use strict\";\n  try {\n    module.export({\n      VoipFreeSwitchService: () => VoipFreeSwitchService\n    });\n    let ServiceClassInternal;\n    module.link(\"@rocket.chat/core-services\", {\n      ServiceClassInternal(v) {\n        ServiceClassInternal = v;\n      }\n    }, 0);\n    let getDomain, getUserPassword, getExtensionList, getExtensionDetails;\n    module.link(\"@rocket.chat/freeswitch\", {\n      getDomain(v) {\n        getDomain = v;\n      },\n      getUserPassword(v) {\n        getUserPassword = v;\n      },\n      getExtensionList(v) {\n        getExtensionList = v;\n      },\n      getExtensionDetails(v) {\n        getExtensionDetails = v;\n      }\n    }, 1);\n    if (__reifyWaitForDeps__()) (await __reifyWaitForDeps__())();\n    class VoipFreeSwitchService extends ServiceClassInternal {\n      constructor(getSetting) {\n        super();\n        this.getSetting = void 0;\n        this.name = 'voip-freeswitch';\n        this.getSetting = getSetting;\n      }\n      getConnectionSettings() {\n        if (!this.getSetting('VoIP_TeamCollab_Enabled') && !process.env.FREESWITCHIP) {\n          throw new Error('VoIP is disabled.');\n        }\n        const host = process.env.FREESWITCHIP || this.getSetting('VoIP_TeamCollab_FreeSwitch_Host');\n        if (!host) {\n          throw new Error('VoIP is not properly configured.');\n        }\n        const port = this.getSetting('VoIP_TeamCollab_FreeSwitch_Port') || 8021;\n        const timeout = this.getSetting('VoIP_TeamCollab_FreeSwitch_Timeout') || 3000;\n        const password = this.getSetting('VoIP_TeamCollab_FreeSwitch_Password');\n        return {\n          host,\n          port,\n          password,\n          timeout\n        };\n      }\n      async getDomain() {\n        const options = this.getConnectionSettings();\n        return getDomain(options);\n      }\n      async getUserPassword(user) {\n        const options = this.getConnectionSettings();\n        return getUserPassword(options, user);\n      }\n      async getExtensionList() {\n        const options = this.getConnectionSettings();\n        return getExtensionList(options);\n      }\n      async getExtensionDetails(requestParams) {\n        const options = this.getConnectionSettings();\n        return getExtensionDetails(options, requestParams);\n      }\n    }\n    __reify_async_result__();\n  } catch (_reifyError) {\n    return __reify_async_result__(_reifyError);\n  }\n  __reify_async_result__()\n}, {\n  self: this,\n  async: false\n});","map":{"version":3,"names":["module","export","VoipFreeSwitchService","ServiceClassInternal","link","v","getDomain","getUserPassword","getExtensionList","getExtensionDetails","__reifyWaitForDeps__","constructor","getSetting","name","getConnectionSettings","process","env","FREESWITCHIP","Error","host","port","timeout","password","options","user","requestParams","__reify_async_result__","_reifyError","self","async"],"sources":["ee/server/local-services/voip-freeswitch/service.ts"],"sourcesContent":["import { type IVoipFreeSwitchService, ServiceClassInternal } from '@rocket.chat/core-services';\nimport type { FreeSwitchExtension, ISetting, SettingValue } from '@rocket.chat/core-typings';\nimport { getDomain, getUserPassword, getExtensionList, getExtensionDetails } from '@rocket.chat/freeswitch';\n\nexport class VoipFreeSwitchService extends ServiceClassInternal implements IVoipFreeSwitchService {\n\tprotected name = 'voip-freeswitch';\n\n\tconstructor(private getSetting: <T extends SettingValue = SettingValue>(id: ISetting['_id']) => T) {\n\t\tsuper();\n\t}\n\n\tprivate getConnectionSettings(): { host: string; port: number; password: string; timeout: number } {\n\t\tif (!this.getSetting('VoIP_TeamCollab_Enabled') && !process.env.FREESWITCHIP) {\n\t\t\tthrow new Error('VoIP is disabled.');\n\t\t}\n\n\t\tconst host = process.env.FREESWITCHIP || this.getSetting<string>('VoIP_TeamCollab_FreeSwitch_Host');\n\t\tif (!host) {\n\t\t\tthrow new Error('VoIP is not properly configured.');\n\t\t}\n\n\t\tconst port = this.getSetting<number>('VoIP_TeamCollab_FreeSwitch_Port') || 8021;\n\t\tconst timeout = this.getSetting<number>('VoIP_TeamCollab_FreeSwitch_Timeout') || 3000;\n\t\tconst password = this.getSetting<string>('VoIP_TeamCollab_FreeSwitch_Password');\n\n\t\treturn {\n\t\t\thost,\n\t\t\tport,\n\t\t\tpassword,\n\t\t\ttimeout,\n\t\t};\n\t}\n\n\tasync getDomain(): Promise<string> {\n\t\tconst options = this.getConnectionSettings();\n\t\treturn getDomain(options);\n\t}\n\n\tasync getUserPassword(user: string): Promise<string> {\n\t\tconst options = this.getConnectionSettings();\n\t\treturn getUserPassword(options, user);\n\t}\n\n\tasync getExtensionList(): Promise<FreeSwitchExtension[]> {\n\t\tconst options = this.getConnectionSettings();\n\t\treturn getExtensionList(options);\n\t}\n\n\tasync getExtensionDetails(requestParams: { extension: string; group?: string }): Promise<FreeSwitchExtension> {\n\t\tconst options = this.getConnectionSettings();\n\t\treturn getExtensionDetails(options, requestParams);\n\t}\n}\n"],"mappings":";;;IAAAA,MAAA,CAAOC,MAA+B;MAAAC,qBAAsB,EAAMA,CAAA,KAAAA;IAAA;IAA4B,IAACC,oBAAA;IAAAH,MAAA,CAAAI,IAAA;MAAAD,qBAAAE,CAAA;QAAAF,oBAAA,GAAAE,CAAA;MAAA;IAAA;IAAA,IAAAC,SAAA,EAAAC,eAAA,EAAAC,gBAAA,EAAAC,mBAAA;IAAAT,MAAA,CAAAI,IAAA;MAAAE,UAAAD,CAAA;QAAAC,SAAA,GAAAD,CAAA;MAAA;MAAAE,gBAAAF,CAAA;QAAAE,eAAA,GAAAF,CAAA;MAAA;MAAAG,iBAAAH,CAAA;QAAAG,gBAAA,GAAAH,CAAA;MAAA;MAAAI,oBAAAJ,CAAA;QAAAI,mBAAA,GAAAJ,CAAA;MAAA;IAAA;IAAA,IAAAK,oBAAA,WAAAA,oBAAA;IAIzF,MAAOR,qBAAsB,SAAQC,oBAAoB;MAG9DQ,YAAoBC,UAA6E;QAChG,KAAK,EAAE;QAAC,KADWA,UAAA;QAAA,KAFVC,IAAI,GAAG,iBAAiB;QAEd,KAAAD,UAAU,GAAVA,UAAU;MAE9B;MAEQE,qBAAqBA,CAAA;QAC5B,IAAI,CAAC,IAAI,CAACF,UAAU,CAAC,yBAAyB,CAAC,IAAI,CAACG,OAAO,CAACC,GAAG,CAACC,YAAY,EAAE;UAC7E,MAAM,IAAIC,KAAK,CAAC,mBAAmB,CAAC;QACrC;QAEA,MAAMC,IAAI,GAAGJ,OAAO,CAACC,GAAG,CAACC,YAAY,IAAI,IAAI,CAACL,UAAU,CAAS,iCAAiC,CAAC;QACnG,IAAI,CAACO,IAAI,EAAE;UACV,MAAM,IAAID,KAAK,CAAC,kCAAkC,CAAC;QACpD;QAEA,MAAME,IAAI,GAAG,IAAI,CAACR,UAAU,CAAS,iCAAiC,CAAC,IAAI,IAAI;QAC/E,MAAMS,OAAO,GAAG,IAAI,CAACT,UAAU,CAAS,oCAAoC,CAAC,IAAI,IAAI;QACrF,MAAMU,QAAQ,GAAG,IAAI,CAACV,UAAU,CAAS,qCAAqC,CAAC;QAE/E,OAAO;UACNO,IAAI;UACJC,IAAI;UACJE,QAAQ;UACRD;SACA;MACF;MAEA,MAAMf,SAASA,CAAA;QACd,MAAMiB,OAAO,GAAG,IAAI,CAACT,qBAAqB,EAAE;QAC5C,OAAOR,SAAS,CAACiB,OAAO,CAAC;MAC1B;MAEA,MAAMhB,eAAeA,CAACiB,IAAY;QACjC,MAAMD,OAAO,GAAG,IAAI,CAACT,qBAAqB,EAAE;QAC5C,OAAOP,eAAe,CAACgB,OAAO,EAAEC,IAAI,CAAC;MACtC;MAEA,MAAMhB,gBAAgBA,CAAA;QACrB,MAAMe,OAAO,GAAG,IAAI,CAACT,qBAAqB,EAAE;QAC5C,OAAON,gBAAgB,CAACe,OAAO,CAAC;MACjC;MAEA,MAAMd,mBAAmBA,CAACgB,aAAoD;QAC7E,MAAMF,OAAO,GAAG,IAAI,CAACT,qBAAqB,EAAE;QAC5C,OAAOL,mBAAmB,CAACc,OAAO,EAAEE,aAAa,CAAC;MACnD;;IACAC,sBAAA;EAAA,SAAAC,WAAA;IAAA,OAAAD,sBAAA,CAAAC,WAAA;EAAA;EAAAD,sBAAA;AAAA;EAAAE,IAAA;EAAAC,KAAA;AAAA","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"893c94dcd1803c673269d2fdc0a65fea607a7180"}
