{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/EmojiPickerProvider/EmojiPickerProvider.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/providers/EmojiPickerProvider/EmojiPickerProvider.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/EmojiPickerProvider/EmojiPickerProvider.tsx","inputSourceMap":{"version":3,"file":"client/providers/EmojiPickerProvider/EmojiPickerProvider.tsx","sourceRoot":"","sources":["client/providers/EmojiPickerProvider/EmojiPickerProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useDebouncedState, useLocalStorage } from '@rocket.chat/fuselage-hooks';\nimport type { ReactNode, ReactElement, ContextType } from 'react';\nimport React, { useState, useCallback, useMemo, useEffect } from 'react';\n\nimport type { EmojiByCategory } from '../../../app/emoji/client';\nimport { emoji, getFrequentEmoji, updateRecent, createEmojiList, createPickerEmojis, CUSTOM_CATEGORY } from '../../../app/emoji/client';\nimport { EmojiPickerContext } from '../../contexts/EmojiPickerContext';\nimport EmojiPicker from '../../views/composer/EmojiPicker/EmojiPicker';\nimport { useUpdateCustomEmoji } from './useUpdateCustomEmoji';\n\nconst DEFAULT_ITEMS_LIMIT = 90;\n\nconst EmojiPickerProvider = ({ children }: { children: ReactNode }): ReactElement => {\n\tconst [emojiPicker, setEmojiPicker] = useState<ReactElement | null>(null);\n\tconst [emojiToPreview, setEmojiToPreview] = useDebouncedState<{ emoji: string; name: string } | null>(null, 100);\n\tconst [recentEmojis, setRecentEmojis] = useLocalStorage<string[]>('emoji.recent', []);\n\tconst [actualTone, setActualTone] = useLocalStorage('emoji.tone', 0);\n\tconst [currentCategory, setCurrentCategory] = useState('recent');\n\tconst [customItemsLimit, setCustomItemsLimit] = useState(DEFAULT_ITEMS_LIMIT);\n\n\tconst [frequentEmojis, setFrequentEmojis] = useLocalStorage<[string, number][]>('emoji.frequent', []);\n\n\tconst [quickReactions, setQuickReactions] = useState<{ emoji: string; image: string }[]>(() =>\n\t\tgetFrequentEmoji(frequentEmojis.map(([emoji]) => emoji)),\n\t);\n\n\tuseUpdateCustomEmoji();\n\n\tconst addFrequentEmojis = useCallback(\n\t\t(emoji: string) => {\n\t\t\tconst empty: [string, number][] = frequentEmojis.some(([emojiName]) => emojiName === emoji) ? [] : [[emoji, 0]];\n\n\t\t\tconst sortedFrequent = [...empty, ...frequentEmojis]\n\t\t\t\t.map(([emojiName, count]) => {\n\t\t\t\t\treturn (emojiName === emoji ? [emojiName, Math.min(count + 5, 100)] : [emojiName, Math.max(count - 1, 0)]) as [string, number];\n\t\t\t\t})\n\t\t\t\t.sort(([, frequentA], [, frequentB]) => frequentB - frequentA);\n\n\t\t\tsetFrequentEmojis(sortedFrequent);\n\t\t\tsetQuickReactions(getFrequentEmoji(sortedFrequent.map(([emoji]) => emoji)));\n\t\t},\n\t\t[frequentEmojis, setFrequentEmojis],\n\t);\n\n\tconst [getEmojiListsByCategory, setEmojiListsByCategoryGetter] = useState<() => EmojiByCategory[]>(() => () => []);\n\n\t// TODO: improve this update\n\tconst updateEmojiListByCategory = useCallback(\n\t\t(categoryKey: string, limit: number = DEFAULT_ITEMS_LIMIT) => {\n\t\t\tsetEmojiListsByCategoryGetter(\n\t\t\t\t(getEmojiListsByCategory) => () =>\n\t\t\t\t\tgetEmojiListsByCategory().map((category) =>\n\t\t\t\t\t\tcategoryKey === category.key\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t...category,\n\t\t\t\t\t\t\t\t\temojis: {\n\t\t\t\t\t\t\t\t\t\tlist: createEmojiList(category.key, null, recentEmojis, setRecentEmojis),\n\t\t\t\t\t\t\t\t\t\tlimit: category.key === CUSTOM_CATEGORY ? limit | customItemsLimit : null,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t: category,\n\t\t\t\t\t),\n\t\t\t);\n\t\t},\n\t\t[customItemsLimit, recentEmojis, setRecentEmojis],\n\t);\n\n\tuseEffect(() => {\n\t\tif (recentEmojis?.length > 0) {\n\t\t\tupdateRecent(recentEmojis);\n\t\t}\n\n\t\tsetEmojiListsByCategoryGetter(() => () => createPickerEmojis(customItemsLimit, actualTone, recentEmojis, setRecentEmojis));\n\t}, [actualTone, recentEmojis, customItemsLimit, currentCategory, setRecentEmojis, frequentEmojis]);\n\n\tconst addRecentEmoji = useCallback(\n\t\t(_emoji: string) => {\n\t\t\taddFrequentEmojis(_emoji);\n\n\t\t\tconst recent = recentEmojis || [];\n\t\t\tconst pos = recent.indexOf(_emoji as never);\n\n\t\t\tif (pos !== -1) {\n\t\t\t\trecent.splice(pos, 1);\n\t\t\t}\n\n\t\t\trecent.unshift(_emoji);\n\n\t\t\t// limit recent emojis to 27 (3 rows of 9)\n\t\t\trecent.splice(27);\n\n\t\t\tsetRecentEmojis(recent);\n\t\t\temoji.packages.base.emojisByCategory.recent = recent;\n\t\t\tupdateEmojiListByCategory('recent');\n\t\t},\n\t\t[recentEmojis, setRecentEmojis, updateEmojiListByCategory, addFrequentEmojis],\n\t);\n\n\tconst open = useCallback((ref: Element, callback: (emoji: string) => void) => {\n\t\treturn setEmojiPicker(<EmojiPicker reference={ref} onClose={() => setEmojiPicker(null)} onPickEmoji={(emoji) => callback(emoji)} />);\n\t}, []);\n\n\tconst handlePreview = useCallback((emoji: string, name: string) => setEmojiToPreview({ emoji, name }), [setEmojiToPreview]);\n\n\tconst handleRemovePreview = useCallback(() => setEmojiToPreview(null), [setEmojiToPreview]);\n\n\tconst contextValue = useMemo(\n\t\t(): ContextType<typeof EmojiPickerContext> => ({\n\t\t\tisOpen: emojiPicker !== null,\n\t\t\tclose: () => setEmojiPicker(null),\n\t\t\topen,\n\t\t\temojiToPreview,\n\t\t\thandlePreview,\n\t\t\thandleRemovePreview,\n\t\t\taddRecentEmoji,\n\t\t\tgetEmojiListsByCategory,\n\t\t\trecentEmojis,\n\t\t\tsetRecentEmojis,\n\t\t\tactualTone,\n\t\t\tcurrentCategory,\n\t\t\tsetCurrentCategory,\n\t\t\tcustomItemsLimit,\n\t\t\tsetCustomItemsLimit,\n\t\t\tsetActualTone,\n\t\t\tquickReactions,\n\t\t}),\n\t\t[\n\t\t\temojiPicker,\n\t\t\topen,\n\t\t\temojiToPreview,\n\t\t\taddRecentEmoji,\n\t\t\tgetEmojiListsByCategory,\n\t\t\trecentEmojis,\n\t\t\tsetRecentEmojis,\n\t\t\tactualTone,\n\t\t\tcurrentCategory,\n\t\t\tsetCurrentCategory,\n\t\t\tcustomItemsLimit,\n\t\t\tsetActualTone,\n\t\t\tquickReactions,\n\t\t\thandlePreview,\n\t\t\thandleRemovePreview,\n\t\t],\n\t);\n\n\treturn (\n\t\t<EmojiPickerContext.Provider value={contextValue}>\n\t\t\t{children}\n\t\t\t{emojiPicker}\n\t\t</EmojiPickerContext.Provider>\n\t);\n};\n\nexport default EmojiPickerProvider;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/EmojiPickerProvider/EmojiPickerProvider.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/providers/EmojiPickerProvider/EmojiPickerProvider.tsx","inputSourceMap":{"version":3,"file":"client/providers/EmojiPickerProvider/EmojiPickerProvider.tsx","sourceRoot":"","sources":["client/providers/EmojiPickerProvider/EmojiPickerProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useDebouncedState, useLocalStorage } from '@rocket.chat/fuselage-hooks';\nimport type { ReactNode, ReactElement, ContextType } from 'react';\nimport React, { useState, useCallback, useMemo, useEffect } from 'react';\n\nimport type { EmojiByCategory } from '../../../app/emoji/client';\nimport { emoji, getFrequentEmoji, updateRecent, createEmojiList, createPickerEmojis, CUSTOM_CATEGORY } from '../../../app/emoji/client';\nimport { EmojiPickerContext } from '../../contexts/EmojiPickerContext';\nimport EmojiPicker from '../../views/composer/EmojiPicker/EmojiPicker';\nimport { useUpdateCustomEmoji } from './useUpdateCustomEmoji';\n\nconst DEFAULT_ITEMS_LIMIT = 90;\n\nconst EmojiPickerProvider = ({ children }: { children: ReactNode }): ReactElement => {\n\tconst [emojiPicker, setEmojiPicker] = useState<ReactElement | null>(null);\n\tconst [emojiToPreview, setEmojiToPreview] = useDebouncedState<{ emoji: string; name: string } | null>(null, 100);\n\tconst [recentEmojis, setRecentEmojis] = useLocalStorage<string[]>('emoji.recent', []);\n\tconst [actualTone, setActualTone] = useLocalStorage('emoji.tone', 0);\n\tconst [currentCategory, setCurrentCategory] = useState('recent');\n\tconst [customItemsLimit, setCustomItemsLimit] = useState(DEFAULT_ITEMS_LIMIT);\n\n\tconst [frequentEmojis, setFrequentEmojis] = useLocalStorage<[string, number][]>('emoji.frequent', []);\n\n\tconst [quickReactions, setQuickReactions] = useState<{ emoji: string; image: string }[]>(() =>\n\t\tgetFrequentEmoji(frequentEmojis.map(([emoji]) => emoji)),\n\t);\n\n\tuseUpdateCustomEmoji();\n\n\tconst addFrequentEmojis = useCallback(\n\t\t(emoji: string) => {\n\t\t\tconst empty: [string, number][] = frequentEmojis.some(([emojiName]) => emojiName === emoji) ? [] : [[emoji, 0]];\n\n\t\t\tconst sortedFrequent = [...empty, ...frequentEmojis]\n\t\t\t\t.map(([emojiName, count]) => {\n\t\t\t\t\treturn (emojiName === emoji ? [emojiName, Math.min(count + 5, 100)] : [emojiName, Math.max(count - 1, 0)]) as [string, number];\n\t\t\t\t})\n\t\t\t\t.sort(([, frequentA], [, frequentB]) => frequentB - frequentA);\n\n\t\t\tsetFrequentEmojis(sortedFrequent);\n\t\t\tsetQuickReactions(getFrequentEmoji(sortedFrequent.map(([emoji]) => emoji)));\n\t\t},\n\t\t[frequentEmojis, setFrequentEmojis],\n\t);\n\n\tconst [getEmojiListsByCategory, setEmojiListsByCategoryGetter] = useState<() => EmojiByCategory[]>(() => () => []);\n\n\t// TODO: improve this update\n\tconst updateEmojiListByCategory = useCallback(\n\t\t(categoryKey: string, limit: number = DEFAULT_ITEMS_LIMIT) => {\n\t\t\tsetEmojiListsByCategoryGetter(\n\t\t\t\t(getEmojiListsByCategory) => () =>\n\t\t\t\t\tgetEmojiListsByCategory().map((category) =>\n\t\t\t\t\t\tcategoryKey === category.key\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t...category,\n\t\t\t\t\t\t\t\t\temojis: {\n\t\t\t\t\t\t\t\t\t\tlist: createEmojiList(category.key, null, recentEmojis, setRecentEmojis),\n\t\t\t\t\t\t\t\t\t\tlimit: category.key === CUSTOM_CATEGORY ? limit | customItemsLimit : null,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t: category,\n\t\t\t\t\t),\n\t\t\t);\n\t\t},\n\t\t[customItemsLimit, recentEmojis, setRecentEmojis],\n\t);\n\n\tuseEffect(() => {\n\t\tif (recentEmojis?.length > 0) {\n\t\t\tupdateRecent(recentEmojis);\n\t\t}\n\n\t\tsetEmojiListsByCategoryGetter(() => () => createPickerEmojis(customItemsLimit, actualTone, recentEmojis, setRecentEmojis));\n\t}, [actualTone, recentEmojis, customItemsLimit, currentCategory, setRecentEmojis, frequentEmojis]);\n\n\tconst addRecentEmoji = useCallback(\n\t\t(_emoji: string) => {\n\t\t\taddFrequentEmojis(_emoji);\n\n\t\t\tconst recent = recentEmojis || [];\n\t\t\tconst pos = recent.indexOf(_emoji as never);\n\n\t\t\tif (pos !== -1) {\n\t\t\t\trecent.splice(pos, 1);\n\t\t\t}\n\n\t\t\trecent.unshift(_emoji);\n\n\t\t\t// limit recent emojis to 27 (3 rows of 9)\n\t\t\trecent.splice(27);\n\n\t\t\tsetRecentEmojis(recent);\n\t\t\temoji.packages.base.emojisByCategory.recent = recent;\n\t\t\tupdateEmojiListByCategory('recent');\n\t\t},\n\t\t[recentEmojis, setRecentEmojis, updateEmojiListByCategory, addFrequentEmojis],\n\t);\n\n\tconst open = useCallback((ref: Element, callback: (emoji: string) => void) => {\n\t\treturn setEmojiPicker(<EmojiPicker reference={ref} onClose={() => setEmojiPicker(null)} onPickEmoji={(emoji) => callback(emoji)} />);\n\t}, []);\n\n\tconst handlePreview = useCallback((emoji: string, name: string) => setEmojiToPreview({ emoji, name }), [setEmojiToPreview]);\n\n\tconst handleRemovePreview = useCallback(() => setEmojiToPreview(null), [setEmojiToPreview]);\n\n\tconst contextValue = useMemo(\n\t\t(): ContextType<typeof EmojiPickerContext> => ({\n\t\t\tisOpen: emojiPicker !== null,\n\t\t\tclose: () => setEmojiPicker(null),\n\t\t\topen,\n\t\t\temojiToPreview,\n\t\t\thandlePreview,\n\t\t\thandleRemovePreview,\n\t\t\taddRecentEmoji,\n\t\t\tgetEmojiListsByCategory,\n\t\t\trecentEmojis,\n\t\t\tsetRecentEmojis,\n\t\t\tactualTone,\n\t\t\tcurrentCategory,\n\t\t\tsetCurrentCategory,\n\t\t\tcustomItemsLimit,\n\t\t\tsetCustomItemsLimit,\n\t\t\tsetActualTone,\n\t\t\tquickReactions,\n\t\t}),\n\t\t[\n\t\t\temojiPicker,\n\t\t\topen,\n\t\t\temojiToPreview,\n\t\t\taddRecentEmoji,\n\t\t\tgetEmojiListsByCategory,\n\t\t\trecentEmojis,\n\t\t\tsetRecentEmojis,\n\t\t\tactualTone,\n\t\t\tcurrentCategory,\n\t\t\tsetCurrentCategory,\n\t\t\tcustomItemsLimit,\n\t\t\tsetActualTone,\n\t\t\tquickReactions,\n\t\t\thandlePreview,\n\t\t\thandleRemovePreview,\n\t\t],\n\t);\n\n\treturn (\n\t\t<EmojiPickerContext.Provider value={contextValue}>\n\t\t\t{children}\n\t\t\t{emojiPicker}\n\t\t</EmojiPickerContext.Provider>\n\t);\n};\n\nexport default EmojiPickerProvider;\n"]}}},"code":"let _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 0);\nlet useDebouncedState, useLocalStorage;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useDebouncedState(v) {\n    useDebouncedState = v;\n  },\n  useLocalStorage(v) {\n    useLocalStorage = v;\n  }\n}, 0);\nlet React, useState, useCallback, useMemo, useEffect;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useState(v) {\n    useState = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  }\n}, 1);\nlet emoji, getFrequentEmoji, updateRecent, createEmojiList, createPickerEmojis, CUSTOM_CATEGORY;\nmodule.link(\"../../../app/emoji/client\", {\n  emoji(v) {\n    emoji = v;\n  },\n  getFrequentEmoji(v) {\n    getFrequentEmoji = v;\n  },\n  updateRecent(v) {\n    updateRecent = v;\n  },\n  createEmojiList(v) {\n    createEmojiList = v;\n  },\n  createPickerEmojis(v) {\n    createPickerEmojis = v;\n  },\n  CUSTOM_CATEGORY(v) {\n    CUSTOM_CATEGORY = v;\n  }\n}, 2);\nlet EmojiPickerContext;\nmodule.link(\"../../contexts/EmojiPickerContext\", {\n  EmojiPickerContext(v) {\n    EmojiPickerContext = v;\n  }\n}, 3);\nlet EmojiPicker;\nmodule.link(\"../../views/composer/EmojiPicker/EmojiPicker\", {\n  default(v) {\n    EmojiPicker = v;\n  }\n}, 4);\nlet useUpdateCustomEmoji;\nmodule.link(\"./useUpdateCustomEmoji\", {\n  useUpdateCustomEmoji(v) {\n    useUpdateCustomEmoji = v;\n  }\n}, 5);\nconst DEFAULT_ITEMS_LIMIT = 90;\nconst EmojiPickerProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const [emojiPicker, setEmojiPicker] = useState(null);\n  const [emojiToPreview, setEmojiToPreview] = useDebouncedState(null, 100);\n  const [recentEmojis, setRecentEmojis] = useLocalStorage('emoji.recent', []);\n  const [actualTone, setActualTone] = useLocalStorage('emoji.tone', 0);\n  const [currentCategory, setCurrentCategory] = useState('recent');\n  const [customItemsLimit, setCustomItemsLimit] = useState(DEFAULT_ITEMS_LIMIT);\n  const [frequentEmojis, setFrequentEmojis] = useLocalStorage('emoji.frequent', []);\n  const [quickReactions, setQuickReactions] = useState(() => getFrequentEmoji(frequentEmojis.map(_ref2 => {\n    let [emoji] = _ref2;\n    return emoji;\n  })));\n  useUpdateCustomEmoji();\n  const addFrequentEmojis = useCallback(emoji => {\n    const empty = frequentEmojis.some(_ref3 => {\n      let [emojiName] = _ref3;\n      return emojiName === emoji;\n    }) ? [] : [[emoji, 0]];\n    const sortedFrequent = [...empty, ...frequentEmojis].map(_ref4 => {\n      let [emojiName, count] = _ref4;\n      return emojiName === emoji ? [emojiName, Math.min(count + 5, 100)] : [emojiName, Math.max(count - 1, 0)];\n    }).sort((_ref5, _ref6) => {\n      let [, frequentA] = _ref5;\n      let [, frequentB] = _ref6;\n      return frequentB - frequentA;\n    });\n    setFrequentEmojis(sortedFrequent);\n    setQuickReactions(getFrequentEmoji(sortedFrequent.map(_ref7 => {\n      let [emoji] = _ref7;\n      return emoji;\n    })));\n  }, [frequentEmojis, setFrequentEmojis]);\n  const [getEmojiListsByCategory, setEmojiListsByCategoryGetter] = useState(() => () => []);\n  // TODO: improve this update\n  const updateEmojiListByCategory = useCallback(function (categoryKey) {\n    let limit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_ITEMS_LIMIT;\n    setEmojiListsByCategoryGetter(getEmojiListsByCategory => () => getEmojiListsByCategory().map(category => categoryKey === category.key ? _objectSpread(_objectSpread({}, category), {}, {\n      emojis: {\n        list: createEmojiList(category.key, null, recentEmojis, setRecentEmojis),\n        limit: category.key === CUSTOM_CATEGORY ? limit | customItemsLimit : null\n      }\n    }) : category));\n  }, [customItemsLimit, recentEmojis, setRecentEmojis]);\n  useEffect(() => {\n    if ((recentEmojis === null || recentEmojis === void 0 ? void 0 : recentEmojis.length) > 0) {\n      updateRecent(recentEmojis);\n    }\n    setEmojiListsByCategoryGetter(() => () => createPickerEmojis(customItemsLimit, actualTone, recentEmojis, setRecentEmojis));\n  }, [actualTone, recentEmojis, customItemsLimit, currentCategory, setRecentEmojis, frequentEmojis]);\n  const addRecentEmoji = useCallback(_emoji => {\n    addFrequentEmojis(_emoji);\n    const recent = recentEmojis || [];\n    const pos = recent.indexOf(_emoji);\n    if (pos !== -1) {\n      recent.splice(pos, 1);\n    }\n    recent.unshift(_emoji);\n    // limit recent emojis to 27 (3 rows of 9)\n    recent.splice(27);\n    setRecentEmojis(recent);\n    emoji.packages.base.emojisByCategory.recent = recent;\n    updateEmojiListByCategory('recent');\n  }, [recentEmojis, setRecentEmojis, updateEmojiListByCategory, addFrequentEmojis]);\n  const open = useCallback((ref, callback) => {\n    return setEmojiPicker( /*#__PURE__*/React.createElement(EmojiPicker, {\n      reference: ref,\n      onClose: () => setEmojiPicker(null),\n      onPickEmoji: emoji => callback(emoji)\n    }));\n  }, []);\n  const handlePreview = useCallback((emoji, name) => setEmojiToPreview({\n    emoji,\n    name\n  }), [setEmojiToPreview]);\n  const handleRemovePreview = useCallback(() => setEmojiToPreview(null), [setEmojiToPreview]);\n  const contextValue = useMemo(() => ({\n    isOpen: emojiPicker !== null,\n    close: () => setEmojiPicker(null),\n    open,\n    emojiToPreview,\n    handlePreview,\n    handleRemovePreview,\n    addRecentEmoji,\n    getEmojiListsByCategory,\n    recentEmojis,\n    setRecentEmojis,\n    actualTone,\n    currentCategory,\n    setCurrentCategory,\n    customItemsLimit,\n    setCustomItemsLimit,\n    setActualTone,\n    quickReactions\n  }), [emojiPicker, open, emojiToPreview, addRecentEmoji, getEmojiListsByCategory, recentEmojis, setRecentEmojis, actualTone, currentCategory, setCurrentCategory, customItemsLimit, setActualTone, quickReactions, handlePreview, handleRemovePreview]);\n  return /*#__PURE__*/React.createElement(EmojiPickerContext.Provider, {\n    value: contextValue\n  }, children, emojiPicker);\n};\nmodule.exportDefault(EmojiPickerProvider);","map":{"version":3,"names":["_objectSpread","module","link","default","v","useDebouncedState","useLocalStorage","React","useState","useCallback","useMemo","useEffect","emoji","getFrequentEmoji","updateRecent","createEmojiList","createPickerEmojis","CUSTOM_CATEGORY","EmojiPickerContext","EmojiPicker","useUpdateCustomEmoji","DEFAULT_ITEMS_LIMIT","EmojiPickerProvider","_ref","children","emojiPicker","setEmojiPicker","emojiToPreview","setEmojiToPreview","recentEmojis","setRecentEmojis","actualTone","setActualTone","currentCategory","setCurrentCategory","customItemsLimit","setCustomItemsLimit","frequentEmojis","setFrequentEmojis","quickReactions","setQuickReactions","map","_ref2","addFrequentEmojis","empty","some","_ref3","emojiName","sortedFrequent","_ref4","count","Math","min","max","sort","_ref5","_ref6","frequentA","frequentB","_ref7","getEmojiListsByCategory","setEmojiListsByCategoryGetter","updateEmojiListByCategory","categoryKey","limit","arguments","length","undefined","category","key","emojis","list","addRecentEmoji","_emoji","recent","pos","indexOf","splice","unshift","packages","base","emojisByCategory","open","ref","callback","createElement","reference","onClose","onPickEmoji","handlePreview","name","handleRemovePreview","contextValue","isOpen","close","Provider","value","exportDefault"],"sources":["client/providers/EmojiPickerProvider/EmojiPickerProvider.tsx"],"sourcesContent":["import { useDebouncedState, useLocalStorage } from '@rocket.chat/fuselage-hooks';\nimport type { ReactNode, ReactElement, ContextType } from 'react';\nimport React, { useState, useCallback, useMemo, useEffect } from 'react';\n\nimport type { EmojiByCategory } from '../../../app/emoji/client';\nimport { emoji, getFrequentEmoji, updateRecent, createEmojiList, createPickerEmojis, CUSTOM_CATEGORY } from '../../../app/emoji/client';\nimport { EmojiPickerContext } from '../../contexts/EmojiPickerContext';\nimport EmojiPicker from '../../views/composer/EmojiPicker/EmojiPicker';\nimport { useUpdateCustomEmoji } from './useUpdateCustomEmoji';\n\nconst DEFAULT_ITEMS_LIMIT = 90;\n\nconst EmojiPickerProvider = ({ children }: { children: ReactNode }): ReactElement => {\n\tconst [emojiPicker, setEmojiPicker] = useState<ReactElement | null>(null);\n\tconst [emojiToPreview, setEmojiToPreview] = useDebouncedState<{ emoji: string; name: string } | null>(null, 100);\n\tconst [recentEmojis, setRecentEmojis] = useLocalStorage<string[]>('emoji.recent', []);\n\tconst [actualTone, setActualTone] = useLocalStorage('emoji.tone', 0);\n\tconst [currentCategory, setCurrentCategory] = useState('recent');\n\tconst [customItemsLimit, setCustomItemsLimit] = useState(DEFAULT_ITEMS_LIMIT);\n\n\tconst [frequentEmojis, setFrequentEmojis] = useLocalStorage<[string, number][]>('emoji.frequent', []);\n\n\tconst [quickReactions, setQuickReactions] = useState<{ emoji: string; image: string }[]>(() =>\n\t\tgetFrequentEmoji(frequentEmojis.map(([emoji]) => emoji)),\n\t);\n\n\tuseUpdateCustomEmoji();\n\n\tconst addFrequentEmojis = useCallback(\n\t\t(emoji: string) => {\n\t\t\tconst empty: [string, number][] = frequentEmojis.some(([emojiName]) => emojiName === emoji) ? [] : [[emoji, 0]];\n\n\t\t\tconst sortedFrequent = [...empty, ...frequentEmojis]\n\t\t\t\t.map(([emojiName, count]) => {\n\t\t\t\t\treturn (emojiName === emoji ? [emojiName, Math.min(count + 5, 100)] : [emojiName, Math.max(count - 1, 0)]) as [string, number];\n\t\t\t\t})\n\t\t\t\t.sort(([, frequentA], [, frequentB]) => frequentB - frequentA);\n\n\t\t\tsetFrequentEmojis(sortedFrequent);\n\t\t\tsetQuickReactions(getFrequentEmoji(sortedFrequent.map(([emoji]) => emoji)));\n\t\t},\n\t\t[frequentEmojis, setFrequentEmojis],\n\t);\n\n\tconst [getEmojiListsByCategory, setEmojiListsByCategoryGetter] = useState<() => EmojiByCategory[]>(() => () => []);\n\n\t// TODO: improve this update\n\tconst updateEmojiListByCategory = useCallback(\n\t\t(categoryKey: string, limit: number = DEFAULT_ITEMS_LIMIT) => {\n\t\t\tsetEmojiListsByCategoryGetter(\n\t\t\t\t(getEmojiListsByCategory) => () =>\n\t\t\t\t\tgetEmojiListsByCategory().map((category) =>\n\t\t\t\t\t\tcategoryKey === category.key\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t...category,\n\t\t\t\t\t\t\t\t\temojis: {\n\t\t\t\t\t\t\t\t\t\tlist: createEmojiList(category.key, null, recentEmojis, setRecentEmojis),\n\t\t\t\t\t\t\t\t\t\tlimit: category.key === CUSTOM_CATEGORY ? limit | customItemsLimit : null,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t: category,\n\t\t\t\t\t),\n\t\t\t);\n\t\t},\n\t\t[customItemsLimit, recentEmojis, setRecentEmojis],\n\t);\n\n\tuseEffect(() => {\n\t\tif (recentEmojis?.length > 0) {\n\t\t\tupdateRecent(recentEmojis);\n\t\t}\n\n\t\tsetEmojiListsByCategoryGetter(() => () => createPickerEmojis(customItemsLimit, actualTone, recentEmojis, setRecentEmojis));\n\t}, [actualTone, recentEmojis, customItemsLimit, currentCategory, setRecentEmojis, frequentEmojis]);\n\n\tconst addRecentEmoji = useCallback(\n\t\t(_emoji: string) => {\n\t\t\taddFrequentEmojis(_emoji);\n\n\t\t\tconst recent = recentEmojis || [];\n\t\t\tconst pos = recent.indexOf(_emoji as never);\n\n\t\t\tif (pos !== -1) {\n\t\t\t\trecent.splice(pos, 1);\n\t\t\t}\n\n\t\t\trecent.unshift(_emoji);\n\n\t\t\t// limit recent emojis to 27 (3 rows of 9)\n\t\t\trecent.splice(27);\n\n\t\t\tsetRecentEmojis(recent);\n\t\t\temoji.packages.base.emojisByCategory.recent = recent;\n\t\t\tupdateEmojiListByCategory('recent');\n\t\t},\n\t\t[recentEmojis, setRecentEmojis, updateEmojiListByCategory, addFrequentEmojis],\n\t);\n\n\tconst open = useCallback((ref: Element, callback: (emoji: string) => void) => {\n\t\treturn setEmojiPicker(<EmojiPicker reference={ref} onClose={() => setEmojiPicker(null)} onPickEmoji={(emoji) => callback(emoji)} />);\n\t}, []);\n\n\tconst handlePreview = useCallback((emoji: string, name: string) => setEmojiToPreview({ emoji, name }), [setEmojiToPreview]);\n\n\tconst handleRemovePreview = useCallback(() => setEmojiToPreview(null), [setEmojiToPreview]);\n\n\tconst contextValue = useMemo(\n\t\t(): ContextType<typeof EmojiPickerContext> => ({\n\t\t\tisOpen: emojiPicker !== null,\n\t\t\tclose: () => setEmojiPicker(null),\n\t\t\topen,\n\t\t\temojiToPreview,\n\t\t\thandlePreview,\n\t\t\thandleRemovePreview,\n\t\t\taddRecentEmoji,\n\t\t\tgetEmojiListsByCategory,\n\t\t\trecentEmojis,\n\t\t\tsetRecentEmojis,\n\t\t\tactualTone,\n\t\t\tcurrentCategory,\n\t\t\tsetCurrentCategory,\n\t\t\tcustomItemsLimit,\n\t\t\tsetCustomItemsLimit,\n\t\t\tsetActualTone,\n\t\t\tquickReactions,\n\t\t}),\n\t\t[\n\t\t\temojiPicker,\n\t\t\topen,\n\t\t\temojiToPreview,\n\t\t\taddRecentEmoji,\n\t\t\tgetEmojiListsByCategory,\n\t\t\trecentEmojis,\n\t\t\tsetRecentEmojis,\n\t\t\tactualTone,\n\t\t\tcurrentCategory,\n\t\t\tsetCurrentCategory,\n\t\t\tcustomItemsLimit,\n\t\t\tsetActualTone,\n\t\t\tquickReactions,\n\t\t\thandlePreview,\n\t\t\thandleRemovePreview,\n\t\t],\n\t);\n\n\treturn (\n\t\t<EmojiPickerContext.Provider value={contextValue}>\n\t\t\t{children}\n\t\t\t{emojiPicker}\n\t\t</EmojiPickerContext.Provider>\n\t);\n};\n\nexport default EmojiPickerProvider;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"6e31a1d786abac49f12e11201db0ac284aafb1ea"}
