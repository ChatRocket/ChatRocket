{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/hooks/useAppMenu.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/marketplace/hooks/useAppMenu.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/hooks/useAppMenu.tsx","inputSourceMap":{"version":3,"file":"client/views/marketplace/hooks/useAppMenu.tsx","sourceRoot":"","sources":["client/views/marketplace/hooks/useAppMenu.tsx"],"names":[],"mappings":"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","sourcesContent":["import { AppStatus } from '@rocket.chat/apps-engine/definition/AppStatus';\nimport type { App } from '@rocket.chat/core-typings';\nimport { Box, Icon } from '@rocket.chat/fuselage';\nimport {\n\tuseSetModal,\n\tuseEndpoint,\n\tuseTranslation,\n\tuseRouteParameter,\n\tuseToastMessageDispatch,\n\tusePermission,\n\tuseRouter,\n} from '@rocket.chat/ui-contexts';\nimport type { MouseEvent, ReactNode } from 'react';\nimport React, { useMemo, useCallback, useState } from 'react';\nimport semver from 'semver';\n\nimport WarningModal from '../../../components/WarningModal';\nimport { useHasLicenseModule } from '../../../hooks/useHasLicenseModule';\nimport { useIsEnterprise } from '../../../hooks/useIsEnterprise';\nimport type { AddonActionType } from '../AppsList/AddonRequiredModal';\nimport AddonRequiredModal from '../AppsList/AddonRequiredModal';\nimport IframeModal from '../IframeModal';\nimport UninstallGrandfatheredAppModal from '../components/UninstallGrandfatheredAppModal/UninstallGrandfatheredAppModal';\nimport type { Actions } from '../helpers';\nimport { appEnabledStatuses, appButtonProps } from '../helpers';\nimport { handleAPIError } from '../helpers/handleAPIError';\nimport { warnEnableDisableApp } from '../helpers/warnEnableDisableApp';\nimport { useAppInstallationHandler } from './useAppInstallationHandler';\nimport type { MarketplaceRouteContext } from './useAppsCountQuery';\nimport { useAppsCountQuery } from './useAppsCountQuery';\nimport { useMarketplaceActions } from './useMarketplaceActions';\nimport { useOpenAppPermissionsReviewModal } from './useOpenAppPermissionsReviewModal';\nimport { useOpenIncompatibleModal } from './useOpenIncompatibleModal';\n\nexport type AppMenuOption = {\n\tid: string;\n\tsection: number;\n\tcontent: ReactNode;\n\tdisabled?: boolean;\n\tonClick?: (e?: MouseEvent<HTMLElement>) => void;\n};\n\ntype AppMenuSections = {\n\titems: AppMenuOption[];\n}[];\n\nexport const useAppMenu = (app: App, isAppDetailsPage: boolean) => {\n\tconst t = useTranslation();\n\tconst router = useRouter();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst openIncompatibleModal = useOpenIncompatibleModal();\n\n\tconst context = useRouteParameter('context') as MarketplaceRouteContext;\n\tconst currentTab = useRouteParameter('tab');\n\tconst appCountQuery = useAppsCountQuery(context);\n\n\tconst isAdminUser = usePermission('manage-apps');\n\tconst { data } = useIsEnterprise();\n\tconst isEnterpriseLicense = !!data?.isEnterprise;\n\n\tconst appAddon = app.addon;\n\tconst workspaceHasAddon = useHasLicenseModule(appAddon);\n\n\tconst [isLoading, setLoading] = useState(false);\n\tconst [requestedEndUser, setRequestedEndUser] = useState(app.requestedEndUser);\n\tconst [isAppPurchased, setPurchased] = useState(app?.isPurchased);\n\n\tconst button = appButtonProps({ ...app, isAdminUser, endUserRequested: false });\n\tconst buttonLabel = button?.label.replace(' ', '_') as\n\t\t| 'Update'\n\t\t| 'Install'\n\t\t| 'Subscribe'\n\t\t| 'See_Pricing'\n\t\t| 'Try_now'\n\t\t| 'Buy'\n\t\t| 'Request'\n\t\t| 'Requested';\n\tconst action = button?.action || '';\n\n\tconst setAppStatus = useEndpoint<'POST', '/apps/:id/status'>('POST', '/apps/:id/status', { id: app.id });\n\tconst buildExternalUrl = useEndpoint('GET', '/apps');\n\tconst syncApp = useEndpoint<'POST', '/apps/:id/sync'>('POST', '/apps/:id/sync', { id: app.id });\n\tconst uninstallApp = useEndpoint<'DELETE', '/apps/:id'>('DELETE', '/apps/:id', { id: app.id });\n\n\tconst canAppBeSubscribed = app.purchaseType === 'subscription';\n\tconst isSubscribed = app.subscriptionInfo && ['active', 'trialing'].includes(app.subscriptionInfo.status);\n\tconst isAppEnabled = app.status ? appEnabledStatuses.includes(app.status) : false;\n\n\tconst closeModal = useCallback(() => {\n\t\tsetModal(null);\n\t\tsetLoading(false);\n\t}, [setModal, setLoading]);\n\n\tconst marketplaceActions = useMarketplaceActions();\n\n\tconst installationSuccess = useCallback(\n\t\tasync (action: Actions | '', permissionsGranted) => {\n\t\t\tif (action) {\n\t\t\t\tif (action === 'request') {\n\t\t\t\t\tsetRequestedEndUser(true);\n\t\t\t\t} else {\n\t\t\t\t\tawait marketplaceActions[action]({ ...app, permissionsGranted });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetLoading(false);\n\t\t},\n\t\t[app, marketplaceActions, setLoading],\n\t);\n\n\tconst openPermissionModal = useOpenAppPermissionsReviewModal({\n\t\tapp,\n\t\tonCancel: closeModal,\n\t\tonConfirm: (permissionsGranted) => installationSuccess(action, permissionsGranted),\n\t});\n\n\tconst appInstallationHandler = useAppInstallationHandler({\n\t\tapp,\n\t\tisAppPurchased,\n\t\taction,\n\t\tonDismiss: closeModal,\n\t\tonSuccess: installationSuccess,\n\t\tsetIsPurchased: setPurchased,\n\t});\n\n\t// TODO: There is no necessity of all these callbacks being out of the above useMemo.\n\t// My propose here is to refactor the hook to make it clearer and with less unnecessary caching.\n\tconst missingAddonHandler = useCallback(\n\t\t(actionType: AddonActionType) => {\n\t\t\tsetModal(<AddonRequiredModal actionType={actionType} onDismiss={closeModal} onInstallAnyway={appInstallationHandler} />);\n\t\t},\n\t\t[appInstallationHandler, closeModal, setModal],\n\t);\n\n\tconst handleAddon = useCallback(\n\t\t(actionType: AddonActionType, callback: () => void) => {\n\t\t\tif (isAdminUser && appAddon && !workspaceHasAddon) {\n\t\t\t\treturn missingAddonHandler(actionType);\n\t\t\t}\n\n\t\t\tcallback();\n\t\t},\n\t\t[appAddon, isAdminUser, missingAddonHandler, workspaceHasAddon],\n\t);\n\n\tconst handleAcquireApp = useCallback(() => {\n\t\tsetLoading(true);\n\t\thandleAddon('install', appInstallationHandler);\n\t}, [appInstallationHandler, handleAddon]);\n\n\tconst handleSubscription = useCallback(async () => {\n\t\tif (app?.versionIncompatible && !isSubscribed) {\n\t\t\topenIncompatibleModal(app, 'subscribe', closeModal);\n\t\t\treturn;\n\t\t}\n\n\t\tlet data;\n\t\ttry {\n\t\t\tdata = (await buildExternalUrl({\n\t\t\t\tbuildExternalUrl: 'true',\n\t\t\t\tappId: app.id,\n\t\t\t\tpurchaseType: app.purchaseType,\n\t\t\t\tdetails: 'true',\n\t\t\t})) as { url: string };\n\t\t} catch (error) {\n\t\t\thandleAPIError(error);\n\t\t\treturn;\n\t\t}\n\n\t\tconst confirm = async () => {\n\t\t\ttry {\n\t\t\t\tawait syncApp();\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t};\n\n\t\tsetModal(<IframeModal url={data.url} confirm={confirm} cancel={closeModal} />);\n\t}, [app, isSubscribed, setModal, closeModal, openIncompatibleModal, buildExternalUrl, syncApp]);\n\n\tconst handleViewLogs = useCallback(() => {\n\t\trouter.navigate({\n\t\t\tname: 'marketplace',\n\t\t\tparams: {\n\t\t\t\tcontext,\n\t\t\t\tpage: 'info',\n\t\t\t\tid: app.id,\n\t\t\t\tversion: app.version,\n\t\t\t\ttab: 'logs',\n\t\t\t},\n\t\t});\n\t}, [app.id, app.version, context, router]);\n\n\tconst handleDisable = useCallback(() => {\n\t\tconst confirm = async () => {\n\t\t\tcloseModal();\n\t\t\ttry {\n\t\t\t\tconst { status } = await setAppStatus({ status: AppStatus.MANUALLY_DISABLED });\n\t\t\t\twarnEnableDisableApp(app.name, status, 'disable');\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t};\n\t\tsetModal(\n\t\t\t<WarningModal close={closeModal} confirm={confirm} text={t('Apps_Marketplace_Deactivate_App_Prompt')} confirmText={t('Yes')} />,\n\t\t);\n\t}, [app.name, closeModal, setAppStatus, setModal, t]);\n\n\tconst handleEnable = useCallback(() => {\n\t\thandleAddon('enable', async () => {\n\t\t\ttry {\n\t\t\t\tconst { status } = await setAppStatus({ status: AppStatus.MANUALLY_ENABLED });\n\t\t\t\twarnEnableDisableApp(app.name, status, 'enable');\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t});\n\t}, [app.name, handleAddon, setAppStatus]);\n\n\tconst handleUninstall = useCallback(() => {\n\t\tconst uninstall = async () => {\n\t\t\tcloseModal();\n\t\t\ttry {\n\t\t\t\tconst { success } = await uninstallApp();\n\t\t\t\tif (success) {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: `${app.name} uninstalled` });\n\t\t\t\t\tif (context === 'details' && currentTab !== 'details') {\n\t\t\t\t\t\trouter.navigate(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'marketplace',\n\t\t\t\t\t\t\t\tparams: { ...router.getRouteParameters(), tab: 'details' },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ replace: true },\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t};\n\n\t\tif (isSubscribed) {\n\t\t\tconst confirm = async () => {\n\t\t\t\tawait handleSubscription();\n\t\t\t};\n\n\t\t\tsetModal(\n\t\t\t\t<WarningModal\n\t\t\t\t\tclose={closeModal}\n\t\t\t\t\tcancel={uninstall}\n\t\t\t\t\tconfirm={confirm}\n\t\t\t\t\ttext={t('Apps_Marketplace_Uninstall_Subscribed_App_Prompt')}\n\t\t\t\t\tconfirmText={t('Apps_Marketplace_Modify_App_Subscription')}\n\t\t\t\t\tcancelText={t('Apps_Marketplace_Uninstall_Subscribed_App_Anyway')}\n\t\t\t\t/>,\n\t\t\t);\n\t\t}\n\n\t\tif (!appCountQuery.data) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (app.migrated) {\n\t\t\tsetModal(\n\t\t\t\t<UninstallGrandfatheredAppModal\n\t\t\t\t\tcontext={context}\n\t\t\t\t\tappName={app.name}\n\t\t\t\t\tlimit={appCountQuery.data.limit}\n\t\t\t\t\thandleUninstall={uninstall}\n\t\t\t\t\thandleClose={closeModal}\n\t\t\t\t/>,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tsetModal(\n\t\t\t<WarningModal close={closeModal} confirm={uninstall} text={t('Apps_Marketplace_Uninstall_App_Prompt')} confirmText={t('Yes')} />,\n\t\t);\n\t}, [\n\t\tisSubscribed,\n\t\tappCountQuery.data,\n\t\tapp.migrated,\n\t\tapp.name,\n\t\tsetModal,\n\t\tcloseModal,\n\t\tt,\n\t\tuninstallApp,\n\t\tdispatchToastMessage,\n\t\tcontext,\n\t\tcurrentTab,\n\t\trouter,\n\t\thandleSubscription,\n\t]);\n\n\tconst incompatibleIconName = useCallback(\n\t\t(app, action) => {\n\t\t\tif (!app.versionIncompatible) {\n\t\t\t\tif (action === 'update') {\n\t\t\t\t\treturn 'refresh';\n\t\t\t\t}\n\n\t\t\t\treturn 'card';\n\t\t\t}\n\n\t\t\t// Now we are handling an incompatible app\n\t\t\tif (action === 'subscribe' && !isSubscribed) {\n\t\t\t\treturn 'warning';\n\t\t\t}\n\n\t\t\tif (action === 'install' || action === 'update') {\n\t\t\t\treturn 'warning';\n\t\t\t}\n\n\t\t\treturn 'card';\n\t\t},\n\t\t[isSubscribed],\n\t);\n\n\tconst handleUpdate = useCallback(async () => {\n\t\tsetLoading(true);\n\n\t\tif (app?.versionIncompatible) {\n\t\t\topenIncompatibleModal(app, 'update', closeModal);\n\t\t\treturn;\n\t\t}\n\n\t\topenPermissionModal();\n\t}, [app, openPermissionModal, openIncompatibleModal, closeModal]);\n\n\tconst canUpdate = app.installed && app.version && app.marketplaceVersion && semver.lt(app.version, app.marketplaceVersion);\n\n\tconst menuSections = useMemo(() => {\n\t\tconst bothAppStatusOptions = [\n\t\t\tcanAppBeSubscribed &&\n\t\t\t\tisSubscribed &&\n\t\t\t\tisAdminUser && {\n\t\t\t\t\tid: 'subscribe',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Icon name={incompatibleIconName(app, 'subscribe')} size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('Subscription')}\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleSubscription,\n\t\t\t\t},\n\t\t];\n\n\t\tconst nonInstalledAppOptions = [\n\t\t\t!app.installed &&\n\t\t\t\t!!button && {\n\t\t\t\t\tid: 'acquire',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tdisabled: requestedEndUser,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{isAdminUser && <Icon name={incompatibleIconName(app, 'install')} size='x16' mie={4} />}\n\t\t\t\t\t\t\t{t(buttonLabel)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleAcquireApp,\n\t\t\t\t},\n\t\t];\n\n\t\tconst isEnterpriseOrNot = (app.isEnterpriseOnly && isEnterpriseLicense) || !app.isEnterpriseOnly;\n\t\tconst isPossibleToEnableApp = app.installed && isAdminUser && !isAppEnabled && isEnterpriseOrNot;\n\t\tconst doesItReachedTheLimit =\n\t\t\t!app.migrated &&\n\t\t\t!appCountQuery?.data?.hasUnlimitedApps &&\n\t\t\tappCountQuery?.data?.enabled !== undefined &&\n\t\t\tappCountQuery?.data?.enabled >= appCountQuery?.data?.limit;\n\n\t\tconst installedAppOptions = [\n\t\t\tcontext !== 'details' &&\n\t\t\t\tisAdminUser &&\n\t\t\t\tapp.installed && {\n\t\t\t\t\tid: 'viewLogs',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Icon name='desktop-text' size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('View_Logs')}\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleViewLogs,\n\t\t\t\t},\n\t\t\tisAdminUser &&\n\t\t\t\t!!canUpdate &&\n\t\t\t\t!isAppDetailsPage && {\n\t\t\t\t\tid: 'update',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Icon name={incompatibleIconName(app, 'update')} size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('Update')}\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleUpdate,\n\t\t\t\t},\n\t\t\tapp.installed &&\n\t\t\t\tisAdminUser &&\n\t\t\t\tisAppEnabled && {\n\t\t\t\t\tid: 'disable',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<Box color='status-font-on-warning'>\n\t\t\t\t\t\t\t<Icon name='ban' size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('Disable')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleDisable,\n\t\t\t\t},\n\t\t\tisPossibleToEnableApp && {\n\t\t\t\tid: 'enable',\n\t\t\t\tsection: 0,\n\t\t\t\tdisabled: doesItReachedTheLimit,\n\t\t\t\tcontent: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Icon name='check' size='x16' marginInlineEnd='x4' />\n\t\t\t\t\t\t{t('Enable')}\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t\tonClick: handleEnable,\n\t\t\t},\n\t\t\tapp.installed &&\n\t\t\t\tisAdminUser && {\n\t\t\t\t\tid: 'uninstall',\n\t\t\t\t\tsection: 1,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<Box color='status-font-on-danger'>\n\t\t\t\t\t\t\t<Icon name='trash' size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('Uninstall')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleUninstall,\n\t\t\t\t},\n\t\t];\n\n\t\tconst filtered = [...bothAppStatusOptions, ...nonInstalledAppOptions, ...installedAppOptions].flatMap((value) =>\n\t\t\tvalue && typeof value !== 'boolean' ? value : [],\n\t\t);\n\n\t\tconst sections: AppMenuSections = [];\n\n\t\tfiltered.forEach((option) => {\n\t\t\tif (typeof sections[option.section] === 'undefined') {\n\t\t\t\tsections[option.section] = { items: [] };\n\t\t\t}\n\n\t\t\tsections[option.section].items.push(option);\n\t\t});\n\n\t\treturn sections;\n\t}, [\n\t\tcanAppBeSubscribed,\n\t\tisSubscribed,\n\t\tisAdminUser,\n\t\tincompatibleIconName,\n\t\tapp,\n\t\tt,\n\t\thandleSubscription,\n\t\tbutton,\n\t\trequestedEndUser,\n\t\tbuttonLabel,\n\t\thandleAcquireApp,\n\t\tisEnterpriseLicense,\n\t\tisAppEnabled,\n\t\tappCountQuery?.data?.hasUnlimitedApps,\n\t\tappCountQuery?.data?.enabled,\n\t\tappCountQuery?.data?.limit,\n\t\tcontext,\n\t\thandleViewLogs,\n\t\tcanUpdate,\n\t\tisAppDetailsPage,\n\t\thandleUpdate,\n\t\thandleDisable,\n\t\thandleEnable,\n\t\thandleUninstall,\n\t]);\n\n\treturn { isLoading, isAdminUser, sections: menuSections };\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"production","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/hooks/useAppMenu.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/marketplace/hooks/useAppMenu.tsx","inputSourceMap":{"version":3,"file":"client/views/marketplace/hooks/useAppMenu.tsx","sourceRoot":"","sources":["client/views/marketplace/hooks/useAppMenu.tsx"],"names":[],"mappings":"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","sourcesContent":["import { AppStatus } from '@rocket.chat/apps-engine/definition/AppStatus';\nimport type { App } from '@rocket.chat/core-typings';\nimport { Box, Icon } from '@rocket.chat/fuselage';\nimport {\n\tuseSetModal,\n\tuseEndpoint,\n\tuseTranslation,\n\tuseRouteParameter,\n\tuseToastMessageDispatch,\n\tusePermission,\n\tuseRouter,\n} from '@rocket.chat/ui-contexts';\nimport type { MouseEvent, ReactNode } from 'react';\nimport React, { useMemo, useCallback, useState } from 'react';\nimport semver from 'semver';\n\nimport WarningModal from '../../../components/WarningModal';\nimport { useHasLicenseModule } from '../../../hooks/useHasLicenseModule';\nimport { useIsEnterprise } from '../../../hooks/useIsEnterprise';\nimport type { AddonActionType } from '../AppsList/AddonRequiredModal';\nimport AddonRequiredModal from '../AppsList/AddonRequiredModal';\nimport IframeModal from '../IframeModal';\nimport UninstallGrandfatheredAppModal from '../components/UninstallGrandfatheredAppModal/UninstallGrandfatheredAppModal';\nimport type { Actions } from '../helpers';\nimport { appEnabledStatuses, appButtonProps } from '../helpers';\nimport { handleAPIError } from '../helpers/handleAPIError';\nimport { warnEnableDisableApp } from '../helpers/warnEnableDisableApp';\nimport { useAppInstallationHandler } from './useAppInstallationHandler';\nimport type { MarketplaceRouteContext } from './useAppsCountQuery';\nimport { useAppsCountQuery } from './useAppsCountQuery';\nimport { useMarketplaceActions } from './useMarketplaceActions';\nimport { useOpenAppPermissionsReviewModal } from './useOpenAppPermissionsReviewModal';\nimport { useOpenIncompatibleModal } from './useOpenIncompatibleModal';\n\nexport type AppMenuOption = {\n\tid: string;\n\tsection: number;\n\tcontent: ReactNode;\n\tdisabled?: boolean;\n\tonClick?: (e?: MouseEvent<HTMLElement>) => void;\n};\n\ntype AppMenuSections = {\n\titems: AppMenuOption[];\n}[];\n\nexport const useAppMenu = (app: App, isAppDetailsPage: boolean) => {\n\tconst t = useTranslation();\n\tconst router = useRouter();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst openIncompatibleModal = useOpenIncompatibleModal();\n\n\tconst context = useRouteParameter('context') as MarketplaceRouteContext;\n\tconst currentTab = useRouteParameter('tab');\n\tconst appCountQuery = useAppsCountQuery(context);\n\n\tconst isAdminUser = usePermission('manage-apps');\n\tconst { data } = useIsEnterprise();\n\tconst isEnterpriseLicense = !!data?.isEnterprise;\n\n\tconst appAddon = app.addon;\n\tconst workspaceHasAddon = useHasLicenseModule(appAddon);\n\n\tconst [isLoading, setLoading] = useState(false);\n\tconst [requestedEndUser, setRequestedEndUser] = useState(app.requestedEndUser);\n\tconst [isAppPurchased, setPurchased] = useState(app?.isPurchased);\n\n\tconst button = appButtonProps({ ...app, isAdminUser, endUserRequested: false });\n\tconst buttonLabel = button?.label.replace(' ', '_') as\n\t\t| 'Update'\n\t\t| 'Install'\n\t\t| 'Subscribe'\n\t\t| 'See_Pricing'\n\t\t| 'Try_now'\n\t\t| 'Buy'\n\t\t| 'Request'\n\t\t| 'Requested';\n\tconst action = button?.action || '';\n\n\tconst setAppStatus = useEndpoint<'POST', '/apps/:id/status'>('POST', '/apps/:id/status', { id: app.id });\n\tconst buildExternalUrl = useEndpoint('GET', '/apps');\n\tconst syncApp = useEndpoint<'POST', '/apps/:id/sync'>('POST', '/apps/:id/sync', { id: app.id });\n\tconst uninstallApp = useEndpoint<'DELETE', '/apps/:id'>('DELETE', '/apps/:id', { id: app.id });\n\n\tconst canAppBeSubscribed = app.purchaseType === 'subscription';\n\tconst isSubscribed = app.subscriptionInfo && ['active', 'trialing'].includes(app.subscriptionInfo.status);\n\tconst isAppEnabled = app.status ? appEnabledStatuses.includes(app.status) : false;\n\n\tconst closeModal = useCallback(() => {\n\t\tsetModal(null);\n\t\tsetLoading(false);\n\t}, [setModal, setLoading]);\n\n\tconst marketplaceActions = useMarketplaceActions();\n\n\tconst installationSuccess = useCallback(\n\t\tasync (action: Actions | '', permissionsGranted) => {\n\t\t\tif (action) {\n\t\t\t\tif (action === 'request') {\n\t\t\t\t\tsetRequestedEndUser(true);\n\t\t\t\t} else {\n\t\t\t\t\tawait marketplaceActions[action]({ ...app, permissionsGranted });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetLoading(false);\n\t\t},\n\t\t[app, marketplaceActions, setLoading],\n\t);\n\n\tconst openPermissionModal = useOpenAppPermissionsReviewModal({\n\t\tapp,\n\t\tonCancel: closeModal,\n\t\tonConfirm: (permissionsGranted) => installationSuccess(action, permissionsGranted),\n\t});\n\n\tconst appInstallationHandler = useAppInstallationHandler({\n\t\tapp,\n\t\tisAppPurchased,\n\t\taction,\n\t\tonDismiss: closeModal,\n\t\tonSuccess: installationSuccess,\n\t\tsetIsPurchased: setPurchased,\n\t});\n\n\t// TODO: There is no necessity of all these callbacks being out of the above useMemo.\n\t// My propose here is to refactor the hook to make it clearer and with less unnecessary caching.\n\tconst missingAddonHandler = useCallback(\n\t\t(actionType: AddonActionType) => {\n\t\t\tsetModal(<AddonRequiredModal actionType={actionType} onDismiss={closeModal} onInstallAnyway={appInstallationHandler} />);\n\t\t},\n\t\t[appInstallationHandler, closeModal, setModal],\n\t);\n\n\tconst handleAddon = useCallback(\n\t\t(actionType: AddonActionType, callback: () => void) => {\n\t\t\tif (isAdminUser && appAddon && !workspaceHasAddon) {\n\t\t\t\treturn missingAddonHandler(actionType);\n\t\t\t}\n\n\t\t\tcallback();\n\t\t},\n\t\t[appAddon, isAdminUser, missingAddonHandler, workspaceHasAddon],\n\t);\n\n\tconst handleAcquireApp = useCallback(() => {\n\t\tsetLoading(true);\n\t\thandleAddon('install', appInstallationHandler);\n\t}, [appInstallationHandler, handleAddon]);\n\n\tconst handleSubscription = useCallback(async () => {\n\t\tif (app?.versionIncompatible && !isSubscribed) {\n\t\t\topenIncompatibleModal(app, 'subscribe', closeModal);\n\t\t\treturn;\n\t\t}\n\n\t\tlet data;\n\t\ttry {\n\t\t\tdata = (await buildExternalUrl({\n\t\t\t\tbuildExternalUrl: 'true',\n\t\t\t\tappId: app.id,\n\t\t\t\tpurchaseType: app.purchaseType,\n\t\t\t\tdetails: 'true',\n\t\t\t})) as { url: string };\n\t\t} catch (error) {\n\t\t\thandleAPIError(error);\n\t\t\treturn;\n\t\t}\n\n\t\tconst confirm = async () => {\n\t\t\ttry {\n\t\t\t\tawait syncApp();\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t};\n\n\t\tsetModal(<IframeModal url={data.url} confirm={confirm} cancel={closeModal} />);\n\t}, [app, isSubscribed, setModal, closeModal, openIncompatibleModal, buildExternalUrl, syncApp]);\n\n\tconst handleViewLogs = useCallback(() => {\n\t\trouter.navigate({\n\t\t\tname: 'marketplace',\n\t\t\tparams: {\n\t\t\t\tcontext,\n\t\t\t\tpage: 'info',\n\t\t\t\tid: app.id,\n\t\t\t\tversion: app.version,\n\t\t\t\ttab: 'logs',\n\t\t\t},\n\t\t});\n\t}, [app.id, app.version, context, router]);\n\n\tconst handleDisable = useCallback(() => {\n\t\tconst confirm = async () => {\n\t\t\tcloseModal();\n\t\t\ttry {\n\t\t\t\tconst { status } = await setAppStatus({ status: AppStatus.MANUALLY_DISABLED });\n\t\t\t\twarnEnableDisableApp(app.name, status, 'disable');\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t};\n\t\tsetModal(\n\t\t\t<WarningModal close={closeModal} confirm={confirm} text={t('Apps_Marketplace_Deactivate_App_Prompt')} confirmText={t('Yes')} />,\n\t\t);\n\t}, [app.name, closeModal, setAppStatus, setModal, t]);\n\n\tconst handleEnable = useCallback(() => {\n\t\thandleAddon('enable', async () => {\n\t\t\ttry {\n\t\t\t\tconst { status } = await setAppStatus({ status: AppStatus.MANUALLY_ENABLED });\n\t\t\t\twarnEnableDisableApp(app.name, status, 'enable');\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t});\n\t}, [app.name, handleAddon, setAppStatus]);\n\n\tconst handleUninstall = useCallback(() => {\n\t\tconst uninstall = async () => {\n\t\t\tcloseModal();\n\t\t\ttry {\n\t\t\t\tconst { success } = await uninstallApp();\n\t\t\t\tif (success) {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: `${app.name} uninstalled` });\n\t\t\t\t\tif (context === 'details' && currentTab !== 'details') {\n\t\t\t\t\t\trouter.navigate(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'marketplace',\n\t\t\t\t\t\t\t\tparams: { ...router.getRouteParameters(), tab: 'details' },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ replace: true },\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t};\n\n\t\tif (isSubscribed) {\n\t\t\tconst confirm = async () => {\n\t\t\t\tawait handleSubscription();\n\t\t\t};\n\n\t\t\tsetModal(\n\t\t\t\t<WarningModal\n\t\t\t\t\tclose={closeModal}\n\t\t\t\t\tcancel={uninstall}\n\t\t\t\t\tconfirm={confirm}\n\t\t\t\t\ttext={t('Apps_Marketplace_Uninstall_Subscribed_App_Prompt')}\n\t\t\t\t\tconfirmText={t('Apps_Marketplace_Modify_App_Subscription')}\n\t\t\t\t\tcancelText={t('Apps_Marketplace_Uninstall_Subscribed_App_Anyway')}\n\t\t\t\t/>,\n\t\t\t);\n\t\t}\n\n\t\tif (!appCountQuery.data) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (app.migrated) {\n\t\t\tsetModal(\n\t\t\t\t<UninstallGrandfatheredAppModal\n\t\t\t\t\tcontext={context}\n\t\t\t\t\tappName={app.name}\n\t\t\t\t\tlimit={appCountQuery.data.limit}\n\t\t\t\t\thandleUninstall={uninstall}\n\t\t\t\t\thandleClose={closeModal}\n\t\t\t\t/>,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tsetModal(\n\t\t\t<WarningModal close={closeModal} confirm={uninstall} text={t('Apps_Marketplace_Uninstall_App_Prompt')} confirmText={t('Yes')} />,\n\t\t);\n\t}, [\n\t\tisSubscribed,\n\t\tappCountQuery.data,\n\t\tapp.migrated,\n\t\tapp.name,\n\t\tsetModal,\n\t\tcloseModal,\n\t\tt,\n\t\tuninstallApp,\n\t\tdispatchToastMessage,\n\t\tcontext,\n\t\tcurrentTab,\n\t\trouter,\n\t\thandleSubscription,\n\t]);\n\n\tconst incompatibleIconName = useCallback(\n\t\t(app, action) => {\n\t\t\tif (!app.versionIncompatible) {\n\t\t\t\tif (action === 'update') {\n\t\t\t\t\treturn 'refresh';\n\t\t\t\t}\n\n\t\t\t\treturn 'card';\n\t\t\t}\n\n\t\t\t// Now we are handling an incompatible app\n\t\t\tif (action === 'subscribe' && !isSubscribed) {\n\t\t\t\treturn 'warning';\n\t\t\t}\n\n\t\t\tif (action === 'install' || action === 'update') {\n\t\t\t\treturn 'warning';\n\t\t\t}\n\n\t\t\treturn 'card';\n\t\t},\n\t\t[isSubscribed],\n\t);\n\n\tconst handleUpdate = useCallback(async () => {\n\t\tsetLoading(true);\n\n\t\tif (app?.versionIncompatible) {\n\t\t\topenIncompatibleModal(app, 'update', closeModal);\n\t\t\treturn;\n\t\t}\n\n\t\topenPermissionModal();\n\t}, [app, openPermissionModal, openIncompatibleModal, closeModal]);\n\n\tconst canUpdate = app.installed && app.version && app.marketplaceVersion && semver.lt(app.version, app.marketplaceVersion);\n\n\tconst menuSections = useMemo(() => {\n\t\tconst bothAppStatusOptions = [\n\t\t\tcanAppBeSubscribed &&\n\t\t\t\tisSubscribed &&\n\t\t\t\tisAdminUser && {\n\t\t\t\t\tid: 'subscribe',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Icon name={incompatibleIconName(app, 'subscribe')} size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('Subscription')}\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleSubscription,\n\t\t\t\t},\n\t\t];\n\n\t\tconst nonInstalledAppOptions = [\n\t\t\t!app.installed &&\n\t\t\t\t!!button && {\n\t\t\t\t\tid: 'acquire',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tdisabled: requestedEndUser,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{isAdminUser && <Icon name={incompatibleIconName(app, 'install')} size='x16' mie={4} />}\n\t\t\t\t\t\t\t{t(buttonLabel)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleAcquireApp,\n\t\t\t\t},\n\t\t];\n\n\t\tconst isEnterpriseOrNot = (app.isEnterpriseOnly && isEnterpriseLicense) || !app.isEnterpriseOnly;\n\t\tconst isPossibleToEnableApp = app.installed && isAdminUser && !isAppEnabled && isEnterpriseOrNot;\n\t\tconst doesItReachedTheLimit =\n\t\t\t!app.migrated &&\n\t\t\t!appCountQuery?.data?.hasUnlimitedApps &&\n\t\t\tappCountQuery?.data?.enabled !== undefined &&\n\t\t\tappCountQuery?.data?.enabled >= appCountQuery?.data?.limit;\n\n\t\tconst installedAppOptions = [\n\t\t\tcontext !== 'details' &&\n\t\t\t\tisAdminUser &&\n\t\t\t\tapp.installed && {\n\t\t\t\t\tid: 'viewLogs',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Icon name='desktop-text' size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('View_Logs')}\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleViewLogs,\n\t\t\t\t},\n\t\t\tisAdminUser &&\n\t\t\t\t!!canUpdate &&\n\t\t\t\t!isAppDetailsPage && {\n\t\t\t\t\tid: 'update',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Icon name={incompatibleIconName(app, 'update')} size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('Update')}\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleUpdate,\n\t\t\t\t},\n\t\t\tapp.installed &&\n\t\t\t\tisAdminUser &&\n\t\t\t\tisAppEnabled && {\n\t\t\t\t\tid: 'disable',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<Box color='status-font-on-warning'>\n\t\t\t\t\t\t\t<Icon name='ban' size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('Disable')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleDisable,\n\t\t\t\t},\n\t\t\tisPossibleToEnableApp && {\n\t\t\t\tid: 'enable',\n\t\t\t\tsection: 0,\n\t\t\t\tdisabled: doesItReachedTheLimit,\n\t\t\t\tcontent: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Icon name='check' size='x16' marginInlineEnd='x4' />\n\t\t\t\t\t\t{t('Enable')}\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t\tonClick: handleEnable,\n\t\t\t},\n\t\t\tapp.installed &&\n\t\t\t\tisAdminUser && {\n\t\t\t\t\tid: 'uninstall',\n\t\t\t\t\tsection: 1,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<Box color='status-font-on-danger'>\n\t\t\t\t\t\t\t<Icon name='trash' size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('Uninstall')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleUninstall,\n\t\t\t\t},\n\t\t];\n\n\t\tconst filtered = [...bothAppStatusOptions, ...nonInstalledAppOptions, ...installedAppOptions].flatMap((value) =>\n\t\t\tvalue && typeof value !== 'boolean' ? value : [],\n\t\t);\n\n\t\tconst sections: AppMenuSections = [];\n\n\t\tfiltered.forEach((option) => {\n\t\t\tif (typeof sections[option.section] === 'undefined') {\n\t\t\t\tsections[option.section] = { items: [] };\n\t\t\t}\n\n\t\t\tsections[option.section].items.push(option);\n\t\t});\n\n\t\treturn sections;\n\t}, [\n\t\tcanAppBeSubscribed,\n\t\tisSubscribed,\n\t\tisAdminUser,\n\t\tincompatibleIconName,\n\t\tapp,\n\t\tt,\n\t\thandleSubscription,\n\t\tbutton,\n\t\trequestedEndUser,\n\t\tbuttonLabel,\n\t\thandleAcquireApp,\n\t\tisEnterpriseLicense,\n\t\tisAppEnabled,\n\t\tappCountQuery?.data?.hasUnlimitedApps,\n\t\tappCountQuery?.data?.enabled,\n\t\tappCountQuery?.data?.limit,\n\t\tcontext,\n\t\thandleViewLogs,\n\t\tcanUpdate,\n\t\tisAppDetailsPage,\n\t\thandleUpdate,\n\t\thandleDisable,\n\t\thandleEnable,\n\t\thandleUninstall,\n\t]);\n\n\treturn { isLoading, isAdminUser, sections: menuSections };\n};\n"]}}},"code":"var _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\nvar _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 1);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 2);\nmodule.export({\n  useAppMenu: function () {\n    return useAppMenu;\n  }\n});\nvar AppStatus;\nmodule.link(\"@rocket.chat/apps-engine/definition/AppStatus\", {\n  AppStatus: function (v) {\n    AppStatus = v;\n  }\n}, 0);\nvar Box, Icon;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box: function (v) {\n    Box = v;\n  },\n  Icon: function (v) {\n    Icon = v;\n  }\n}, 1);\nvar useSetModal, useEndpoint, useTranslation, useRouteParameter, useToastMessageDispatch, usePermission, useRouter;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useSetModal: function (v) {\n    useSetModal = v;\n  },\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  },\n  useTranslation: function (v) {\n    useTranslation = v;\n  },\n  useRouteParameter: function (v) {\n    useRouteParameter = v;\n  },\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  },\n  usePermission: function (v) {\n    usePermission = v;\n  },\n  useRouter: function (v) {\n    useRouter = v;\n  }\n}, 2);\nvar React, useMemo, useCallback, useState;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 3);\nvar semver;\nmodule.link(\"semver\", {\n  \"default\": function (v) {\n    semver = v;\n  }\n}, 4);\nvar WarningModal;\nmodule.link(\"../../../components/WarningModal\", {\n  \"default\": function (v) {\n    WarningModal = v;\n  }\n}, 5);\nvar useHasLicenseModule;\nmodule.link(\"../../../hooks/useHasLicenseModule\", {\n  useHasLicenseModule: function (v) {\n    useHasLicenseModule = v;\n  }\n}, 6);\nvar useIsEnterprise;\nmodule.link(\"../../../hooks/useIsEnterprise\", {\n  useIsEnterprise: function (v) {\n    useIsEnterprise = v;\n  }\n}, 7);\nvar AddonRequiredModal;\nmodule.link(\"../AppsList/AddonRequiredModal\", {\n  \"default\": function (v) {\n    AddonRequiredModal = v;\n  }\n}, 8);\nvar IframeModal;\nmodule.link(\"../IframeModal\", {\n  \"default\": function (v) {\n    IframeModal = v;\n  }\n}, 9);\nvar UninstallGrandfatheredAppModal;\nmodule.link(\"../components/UninstallGrandfatheredAppModal/UninstallGrandfatheredAppModal\", {\n  \"default\": function (v) {\n    UninstallGrandfatheredAppModal = v;\n  }\n}, 10);\nvar appEnabledStatuses, appButtonProps;\nmodule.link(\"../helpers\", {\n  appEnabledStatuses: function (v) {\n    appEnabledStatuses = v;\n  },\n  appButtonProps: function (v) {\n    appButtonProps = v;\n  }\n}, 11);\nvar handleAPIError;\nmodule.link(\"../helpers/handleAPIError\", {\n  handleAPIError: function (v) {\n    handleAPIError = v;\n  }\n}, 12);\nvar warnEnableDisableApp;\nmodule.link(\"../helpers/warnEnableDisableApp\", {\n  warnEnableDisableApp: function (v) {\n    warnEnableDisableApp = v;\n  }\n}, 13);\nvar useAppInstallationHandler;\nmodule.link(\"./useAppInstallationHandler\", {\n  useAppInstallationHandler: function (v) {\n    useAppInstallationHandler = v;\n  }\n}, 14);\nvar useAppsCountQuery;\nmodule.link(\"./useAppsCountQuery\", {\n  useAppsCountQuery: function (v) {\n    useAppsCountQuery = v;\n  }\n}, 15);\nvar useMarketplaceActions;\nmodule.link(\"./useMarketplaceActions\", {\n  useMarketplaceActions: function (v) {\n    useMarketplaceActions = v;\n  }\n}, 16);\nvar useOpenAppPermissionsReviewModal;\nmodule.link(\"./useOpenAppPermissionsReviewModal\", {\n  useOpenAppPermissionsReviewModal: function (v) {\n    useOpenAppPermissionsReviewModal = v;\n  }\n}, 17);\nvar useOpenIncompatibleModal;\nmodule.link(\"./useOpenIncompatibleModal\", {\n  useOpenIncompatibleModal: function (v) {\n    useOpenIncompatibleModal = v;\n  }\n}, 18);\nvar useAppMenu = function (app, isAppDetailsPage) {\n  var _appCountQuery$data5, _appCountQuery$data6, _appCountQuery$data7;\n  var t = useTranslation();\n  var router = useRouter();\n  var setModal = useSetModal();\n  var dispatchToastMessage = useToastMessageDispatch();\n  var openIncompatibleModal = useOpenIncompatibleModal();\n  var context = useRouteParameter('context');\n  var currentTab = useRouteParameter('tab');\n  var appCountQuery = useAppsCountQuery(context);\n  var isAdminUser = usePermission('manage-apps');\n  var _useIsEnterprise = useIsEnterprise(),\n    data = _useIsEnterprise.data;\n  var isEnterpriseLicense = !!(data !== null && data !== void 0 && data.isEnterprise);\n  var appAddon = app.addon;\n  var workspaceHasAddon = useHasLicenseModule(appAddon);\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setLoading = _useState2[1];\n  var _useState3 = useState(app.requestedEndUser),\n    _useState4 = _slicedToArray(_useState3, 2),\n    requestedEndUser = _useState4[0],\n    setRequestedEndUser = _useState4[1];\n  var _useState5 = useState(app === null || app === void 0 ? void 0 : app.isPurchased),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isAppPurchased = _useState6[0],\n    setPurchased = _useState6[1];\n  var button = appButtonProps(_objectSpread(_objectSpread({}, app), {}, {\n    isAdminUser: isAdminUser,\n    endUserRequested: false\n  }));\n  var buttonLabel = button === null || button === void 0 ? void 0 : button.label.replace(' ', '_');\n  var action = (button === null || button === void 0 ? void 0 : button.action) || '';\n  var setAppStatus = useEndpoint('POST', '/apps/:id/status', {\n    id: app.id\n  });\n  var buildExternalUrl = useEndpoint('GET', '/apps');\n  var syncApp = useEndpoint('POST', '/apps/:id/sync', {\n    id: app.id\n  });\n  var uninstallApp = useEndpoint('DELETE', '/apps/:id', {\n    id: app.id\n  });\n  var canAppBeSubscribed = app.purchaseType === 'subscription';\n  var isSubscribed = app.subscriptionInfo && ['active', 'trialing'].includes(app.subscriptionInfo.status);\n  var isAppEnabled = app.status ? appEnabledStatuses.includes(app.status) : false;\n  var closeModal = useCallback(function () {\n    setModal(null);\n    setLoading(false);\n  }, [setModal, setLoading]);\n  var marketplaceActions = useMarketplaceActions();\n  var installationSuccess = useCallback(function () {\n    function _callee(action, permissionsGranted) {\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!action) {\n                _context.next = 7;\n                break;\n              }\n              if (!(action === 'request')) {\n                _context.next = 5;\n                break;\n              }\n              setRequestedEndUser(true);\n              _context.next = 7;\n              break;\n            case 5:\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(marketplaceActions[action](_objectSpread(_objectSpread({}, app), {}, {\n                permissionsGranted: permissionsGranted\n              })));\n            case 7:\n              setLoading(false);\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n        return _callee$;\n      }(), null, null, null, Promise);\n    }\n    return _callee;\n  }(), [app, marketplaceActions, setLoading]);\n  var openPermissionModal = useOpenAppPermissionsReviewModal({\n    app: app,\n    onCancel: closeModal,\n    onConfirm: function (permissionsGranted) {\n      return installationSuccess(action, permissionsGranted);\n    }\n  });\n  var appInstallationHandler = useAppInstallationHandler({\n    app: app,\n    isAppPurchased: isAppPurchased,\n    action: action,\n    onDismiss: closeModal,\n    onSuccess: installationSuccess,\n    setIsPurchased: setPurchased\n  });\n  // TODO: There is no necessity of all these callbacks being out of the above useMemo.\n  // My propose here is to refactor the hook to make it clearer and with less unnecessary caching.\n  var missingAddonHandler = useCallback(function (actionType) {\n    setModal( /*#__PURE__*/React.createElement(AddonRequiredModal, {\n      actionType: actionType,\n      onDismiss: closeModal,\n      onInstallAnyway: appInstallationHandler\n    }));\n  }, [appInstallationHandler, closeModal, setModal]);\n  var handleAddon = useCallback(function (actionType, callback) {\n    if (isAdminUser && appAddon && !workspaceHasAddon) {\n      return missingAddonHandler(actionType);\n    }\n    callback();\n  }, [appAddon, isAdminUser, missingAddonHandler, workspaceHasAddon]);\n  var handleAcquireApp = useCallback(function () {\n    setLoading(true);\n    handleAddon('install', appInstallationHandler);\n  }, [appInstallationHandler, handleAddon]);\n  var handleSubscription = useCallback(function () {\n    function _callee3() {\n      var data, confirm;\n      return _regeneratorRuntime.async(function () {\n        function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(app !== null && app !== void 0 && app.versionIncompatible && !isSubscribed)) {\n                _context3.next = 3;\n                break;\n              }\n              openIncompatibleModal(app, 'subscribe', closeModal);\n              return _context3.abrupt(\"return\");\n            case 3:\n              _context3.prev = 3;\n              _context3.next = 6;\n              return _regeneratorRuntime.awrap(buildExternalUrl({\n                buildExternalUrl: 'true',\n                appId: app.id,\n                purchaseType: app.purchaseType,\n                details: 'true'\n              }));\n            case 6:\n              data = _context3.sent;\n              _context3.next = 13;\n              break;\n            case 9:\n              _context3.prev = 9;\n              _context3.t0 = _context3[\"catch\"](3);\n              handleAPIError(_context3.t0);\n              return _context3.abrupt(\"return\");\n            case 13:\n              confirm = function () {\n                function _callee2() {\n                  return _regeneratorRuntime.async(function () {\n                    function _callee2$(_context2) {\n                      while (1) switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.prev = 0;\n                          _context2.next = 3;\n                          return _regeneratorRuntime.awrap(syncApp());\n                        case 3:\n                          _context2.next = 8;\n                          break;\n                        case 5:\n                          _context2.prev = 5;\n                          _context2.t0 = _context2[\"catch\"](0);\n                          handleAPIError(_context2.t0);\n                        case 8:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                    return _callee2$;\n                  }(), null, null, [[0, 5]], Promise);\n                }\n                return _callee2;\n              }();\n              setModal( /*#__PURE__*/React.createElement(IframeModal, {\n                url: data.url,\n                confirm: confirm,\n                cancel: closeModal\n              }));\n            case 15:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n        return _callee3$;\n      }(), null, null, [[3, 9]], Promise);\n    }\n    return _callee3;\n  }(), [app, isSubscribed, setModal, closeModal, openIncompatibleModal, buildExternalUrl, syncApp]);\n  var handleViewLogs = useCallback(function () {\n    router.navigate({\n      name: 'marketplace',\n      params: {\n        context: context,\n        page: 'info',\n        id: app.id,\n        version: app.version,\n        tab: 'logs'\n      }\n    });\n  }, [app.id, app.version, context, router]);\n  var handleDisable = useCallback(function () {\n    var confirm = function () {\n      function _callee4() {\n        var _await$setAppStatus, status;\n        return _regeneratorRuntime.async(function () {\n          function _callee4$(_context4) {\n            while (1) switch (_context4.prev = _context4.next) {\n              case 0:\n                closeModal();\n                _context4.prev = 1;\n                _context4.next = 4;\n                return _regeneratorRuntime.awrap(setAppStatus({\n                  status: AppStatus.MANUALLY_DISABLED\n                }));\n              case 4:\n                _await$setAppStatus = _context4.sent;\n                status = _await$setAppStatus.status;\n                warnEnableDisableApp(app.name, status, 'disable');\n                _context4.next = 12;\n                break;\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4[\"catch\"](1);\n                handleAPIError(_context4.t0);\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n          return _callee4$;\n        }(), null, null, [[1, 9]], Promise);\n      }\n      return _callee4;\n    }();\n    setModal( /*#__PURE__*/React.createElement(WarningModal, {\n      close: closeModal,\n      confirm: confirm,\n      text: t('Apps_Marketplace_Deactivate_App_Prompt'),\n      confirmText: t('Yes')\n    }));\n  }, [app.name, closeModal, setAppStatus, setModal, t]);\n  var handleEnable = useCallback(function () {\n    handleAddon('enable', function () {\n      function _callee5() {\n        var _await$setAppStatus2, status;\n        return _regeneratorRuntime.async(function () {\n          function _callee5$(_context5) {\n            while (1) switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return _regeneratorRuntime.awrap(setAppStatus({\n                  status: AppStatus.MANUALLY_ENABLED\n                }));\n              case 3:\n                _await$setAppStatus2 = _context5.sent;\n                status = _await$setAppStatus2.status;\n                warnEnableDisableApp(app.name, status, 'enable');\n                _context5.next = 11;\n                break;\n              case 8:\n                _context5.prev = 8;\n                _context5.t0 = _context5[\"catch\"](0);\n                handleAPIError(_context5.t0);\n              case 11:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n          return _callee5$;\n        }(), null, null, [[0, 8]], Promise);\n      }\n      return _callee5;\n    }());\n  }, [app.name, handleAddon, setAppStatus]);\n  var handleUninstall = useCallback(function () {\n    var uninstall = function () {\n      function _callee6() {\n        var _await$uninstallApp, success;\n        return _regeneratorRuntime.async(function () {\n          function _callee6$(_context6) {\n            while (1) switch (_context6.prev = _context6.next) {\n              case 0:\n                closeModal();\n                _context6.prev = 1;\n                _context6.next = 4;\n                return _regeneratorRuntime.awrap(uninstallApp());\n              case 4:\n                _await$uninstallApp = _context6.sent;\n                success = _await$uninstallApp.success;\n                if (success) {\n                  dispatchToastMessage({\n                    type: 'success',\n                    message: app.name + \" uninstalled\"\n                  });\n                  if (context === 'details' && currentTab !== 'details') {\n                    router.navigate({\n                      name: 'marketplace',\n                      params: _objectSpread(_objectSpread({}, router.getRouteParameters()), {}, {\n                        tab: 'details'\n                      })\n                    }, {\n                      replace: true\n                    });\n                  }\n                }\n                _context6.next = 12;\n                break;\n              case 9:\n                _context6.prev = 9;\n                _context6.t0 = _context6[\"catch\"](1);\n                handleAPIError(_context6.t0);\n              case 12:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n          return _callee6$;\n        }(), null, null, [[1, 9]], Promise);\n      }\n      return _callee6;\n    }();\n    if (isSubscribed) {\n      var confirm = function () {\n        function _callee7() {\n          return _regeneratorRuntime.async(function () {\n            function _callee7$(_context7) {\n              while (1) switch (_context7.prev = _context7.next) {\n                case 0:\n                  _context7.next = 2;\n                  return _regeneratorRuntime.awrap(handleSubscription());\n                case 2:\n                case \"end\":\n                  return _context7.stop();\n              }\n            }\n            return _callee7$;\n          }(), null, null, null, Promise);\n        }\n        return _callee7;\n      }();\n      setModal( /*#__PURE__*/React.createElement(WarningModal, {\n        close: closeModal,\n        cancel: uninstall,\n        confirm: confirm,\n        text: t('Apps_Marketplace_Uninstall_Subscribed_App_Prompt'),\n        confirmText: t('Apps_Marketplace_Modify_App_Subscription'),\n        cancelText: t('Apps_Marketplace_Uninstall_Subscribed_App_Anyway')\n      }));\n    }\n    if (!appCountQuery.data) {\n      return;\n    }\n    if (app.migrated) {\n      setModal( /*#__PURE__*/React.createElement(UninstallGrandfatheredAppModal, {\n        context: context,\n        appName: app.name,\n        limit: appCountQuery.data.limit,\n        handleUninstall: uninstall,\n        handleClose: closeModal\n      }));\n      return;\n    }\n    setModal( /*#__PURE__*/React.createElement(WarningModal, {\n      close: closeModal,\n      confirm: uninstall,\n      text: t('Apps_Marketplace_Uninstall_App_Prompt'),\n      confirmText: t('Yes')\n    }));\n  }, [isSubscribed, appCountQuery.data, app.migrated, app.name, setModal, closeModal, t, uninstallApp, dispatchToastMessage, context, currentTab, router, handleSubscription]);\n  var incompatibleIconName = useCallback(function (app, action) {\n    if (!app.versionIncompatible) {\n      if (action === 'update') {\n        return 'refresh';\n      }\n      return 'card';\n    }\n    // Now we are handling an incompatible app\n    if (action === 'subscribe' && !isSubscribed) {\n      return 'warning';\n    }\n    if (action === 'install' || action === 'update') {\n      return 'warning';\n    }\n    return 'card';\n  }, [isSubscribed]);\n  var handleUpdate = useCallback(function () {\n    function _callee8() {\n      return _regeneratorRuntime.async(function () {\n        function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              setLoading(true);\n              if (!(app !== null && app !== void 0 && app.versionIncompatible)) {\n                _context8.next = 4;\n                break;\n              }\n              openIncompatibleModal(app, 'update', closeModal);\n              return _context8.abrupt(\"return\");\n            case 4:\n              openPermissionModal();\n            case 5:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n        return _callee8$;\n      }(), null, null, null, Promise);\n    }\n    return _callee8;\n  }(), [app, openPermissionModal, openIncompatibleModal, closeModal]);\n  var canUpdate = app.installed && app.version && app.marketplaceVersion && semver.lt(app.version, app.marketplaceVersion);\n  var menuSections = useMemo(function () {\n    var _appCountQuery$data, _appCountQuery$data2, _appCountQuery$data3, _appCountQuery$data4;\n    var bothAppStatusOptions = [canAppBeSubscribed && isSubscribed && isAdminUser && {\n      id: 'subscribe',\n      section: 0,\n      content: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Icon, {\n        name: incompatibleIconName(app, 'subscribe'),\n        size: \"x16\",\n        mie: 4\n      }), t('Subscription')),\n      onClick: handleSubscription\n    }];\n    var nonInstalledAppOptions = [!app.installed && !!button && {\n      id: 'acquire',\n      section: 0,\n      disabled: requestedEndUser,\n      content: /*#__PURE__*/React.createElement(React.Fragment, null, isAdminUser && /*#__PURE__*/React.createElement(Icon, {\n        name: incompatibleIconName(app, 'install'),\n        size: \"x16\",\n        mie: 4\n      }), t(buttonLabel)),\n      onClick: handleAcquireApp\n    }];\n    var isEnterpriseOrNot = app.isEnterpriseOnly && isEnterpriseLicense || !app.isEnterpriseOnly;\n    var isPossibleToEnableApp = app.installed && isAdminUser && !isAppEnabled && isEnterpriseOrNot;\n    var doesItReachedTheLimit = !app.migrated && !(appCountQuery !== null && appCountQuery !== void 0 && (_appCountQuery$data = appCountQuery.data) !== null && _appCountQuery$data !== void 0 && _appCountQuery$data.hasUnlimitedApps) && (appCountQuery === null || appCountQuery === void 0 ? void 0 : (_appCountQuery$data2 = appCountQuery.data) === null || _appCountQuery$data2 === void 0 ? void 0 : _appCountQuery$data2.enabled) !== undefined && (appCountQuery === null || appCountQuery === void 0 ? void 0 : (_appCountQuery$data3 = appCountQuery.data) === null || _appCountQuery$data3 === void 0 ? void 0 : _appCountQuery$data3.enabled) >= (appCountQuery === null || appCountQuery === void 0 ? void 0 : (_appCountQuery$data4 = appCountQuery.data) === null || _appCountQuery$data4 === void 0 ? void 0 : _appCountQuery$data4.limit);\n    var installedAppOptions = [context !== 'details' && isAdminUser && app.installed && {\n      id: 'viewLogs',\n      section: 0,\n      content: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Icon, {\n        name: \"desktop-text\",\n        size: \"x16\",\n        mie: 4\n      }), t('View_Logs')),\n      onClick: handleViewLogs\n    }, isAdminUser && !!canUpdate && !isAppDetailsPage && {\n      id: 'update',\n      section: 0,\n      content: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Icon, {\n        name: incompatibleIconName(app, 'update'),\n        size: \"x16\",\n        mie: 4\n      }), t('Update')),\n      onClick: handleUpdate\n    }, app.installed && isAdminUser && isAppEnabled && {\n      id: 'disable',\n      section: 0,\n      content: /*#__PURE__*/React.createElement(Box, {\n        color: \"status-font-on-warning\"\n      }, /*#__PURE__*/React.createElement(Icon, {\n        name: \"ban\",\n        size: \"x16\",\n        mie: 4\n      }), t('Disable')),\n      onClick: handleDisable\n    }, isPossibleToEnableApp && {\n      id: 'enable',\n      section: 0,\n      disabled: doesItReachedTheLimit,\n      content: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Icon, {\n        name: \"check\",\n        size: \"x16\",\n        marginInlineEnd: \"x4\"\n      }), t('Enable')),\n      onClick: handleEnable\n    }, app.installed && isAdminUser && {\n      id: 'uninstall',\n      section: 1,\n      content: /*#__PURE__*/React.createElement(Box, {\n        color: \"status-font-on-danger\"\n      }, /*#__PURE__*/React.createElement(Icon, {\n        name: \"trash\",\n        size: \"x16\",\n        mie: 4\n      }), t('Uninstall')),\n      onClick: handleUninstall\n    }];\n    var filtered = [].concat(bothAppStatusOptions, nonInstalledAppOptions, installedAppOptions).flatMap(function (value) {\n      return value && typeof value !== 'boolean' ? value : [];\n    });\n    var sections = [];\n    filtered.forEach(function (option) {\n      if (typeof sections[option.section] === 'undefined') {\n        sections[option.section] = {\n          items: []\n        };\n      }\n      sections[option.section].items.push(option);\n    });\n    return sections;\n  }, [canAppBeSubscribed, isSubscribed, isAdminUser, incompatibleIconName, app, t, handleSubscription, button, requestedEndUser, buttonLabel, handleAcquireApp, isEnterpriseLicense, isAppEnabled, appCountQuery === null || appCountQuery === void 0 ? void 0 : (_appCountQuery$data5 = appCountQuery.data) === null || _appCountQuery$data5 === void 0 ? void 0 : _appCountQuery$data5.hasUnlimitedApps, appCountQuery === null || appCountQuery === void 0 ? void 0 : (_appCountQuery$data6 = appCountQuery.data) === null || _appCountQuery$data6 === void 0 ? void 0 : _appCountQuery$data6.enabled, appCountQuery === null || appCountQuery === void 0 ? void 0 : (_appCountQuery$data7 = appCountQuery.data) === null || _appCountQuery$data7 === void 0 ? void 0 : _appCountQuery$data7.limit, context, handleViewLogs, canUpdate, isAppDetailsPage, handleUpdate, handleDisable, handleEnable, handleUninstall]);\n  return {\n    isLoading: isLoading,\n    isAdminUser: isAdminUser,\n    sections: menuSections\n  };\n};","map":{"version":3,"names":["_regeneratorRuntime","module","link","default","v","_objectSpread","_slicedToArray","export","useAppMenu","AppStatus","Box","Icon","useSetModal","useEndpoint","useTranslation","useRouteParameter","useToastMessageDispatch","usePermission","useRouter","React","useMemo","useCallback","useState","semver","WarningModal","useHasLicenseModule","useIsEnterprise","AddonRequiredModal","IframeModal","UninstallGrandfatheredAppModal","appEnabledStatuses","appButtonProps","handleAPIError","warnEnableDisableApp","useAppInstallationHandler","useAppsCountQuery","useMarketplaceActions","useOpenAppPermissionsReviewModal","useOpenIncompatibleModal","app","isAppDetailsPage","_appCountQuery$data5","_appCountQuery$data6","_appCountQuery$data7","t","router","setModal","dispatchToastMessage","openIncompatibleModal","context","currentTab","appCountQuery","isAdminUser","_useIsEnterprise","data","isEnterpriseLicense","isEnterprise","appAddon","addon","workspaceHasAddon","_useState","_useState2","isLoading","setLoading","_useState3","requestedEndUser","_useState4","setRequestedEndUser","_useState5","isPurchased","_useState6","isAppPurchased","setPurchased","button","endUserRequested","buttonLabel","label","replace","action","setAppStatus","id","buildExternalUrl","syncApp","uninstallApp","canAppBeSubscribed","purchaseType","isSubscribed","subscriptionInfo","includes","status","isAppEnabled","closeModal","marketplaceActions","installationSuccess","_callee","permissionsGranted","async","_callee$","_context","prev","next","awrap","stop","Promise","openPermissionModal","onCancel","onConfirm","appInstallationHandler","onDismiss","onSuccess","setIsPurchased","missingAddonHandler","actionType","createElement","onInstallAnyway","handleAddon","callback","handleAcquireApp","handleSubscription","_callee3","confirm","_callee3$","_context3","versionIncompatible","abrupt","appId","details","sent","t0","_callee2","_callee2$","_context2","url","cancel","handleViewLogs","navigate","name","params","page","version","tab","handleDisable","_callee4","_await$setAppStatus","_callee4$","_context4","MANUALLY_DISABLED","close","text","confirmText","handleEnable","_callee5","_await$setAppStatus2","_callee5$","_context5","MANUALLY_ENABLED","handleUninstall","uninstall","_callee6","_await$uninstallApp","success","_callee6$","_context6","type","message","getRouteParameters","_callee7","_callee7$","_context7","cancelText","migrated","appName","limit","handleClose","incompatibleIconName","handleUpdate","_callee8","_callee8$","_context8","canUpdate","installed","marketplaceVersion","lt","menuSections","_appCountQuery$data","_appCountQuery$data2","_appCountQuery$data3","_appCountQuery$data4","bothAppStatusOptions","section","content","Fragment","size","mie","onClick","nonInstalledAppOptions","disabled","isEnterpriseOrNot","isEnterpriseOnly","isPossibleToEnableApp","doesItReachedTheLimit","hasUnlimitedApps","enabled","undefined","installedAppOptions","color","marginInlineEnd","filtered","concat","flatMap","value","sections","forEach","option","items","push"],"sources":["client/views/marketplace/hooks/useAppMenu.tsx"],"sourcesContent":["import { AppStatus } from '@rocket.chat/apps-engine/definition/AppStatus';\nimport type { App } from '@rocket.chat/core-typings';\nimport { Box, Icon } from '@rocket.chat/fuselage';\nimport {\n\tuseSetModal,\n\tuseEndpoint,\n\tuseTranslation,\n\tuseRouteParameter,\n\tuseToastMessageDispatch,\n\tusePermission,\n\tuseRouter,\n} from '@rocket.chat/ui-contexts';\nimport type { MouseEvent, ReactNode } from 'react';\nimport React, { useMemo, useCallback, useState } from 'react';\nimport semver from 'semver';\n\nimport WarningModal from '../../../components/WarningModal';\nimport { useHasLicenseModule } from '../../../hooks/useHasLicenseModule';\nimport { useIsEnterprise } from '../../../hooks/useIsEnterprise';\nimport type { AddonActionType } from '../AppsList/AddonRequiredModal';\nimport AddonRequiredModal from '../AppsList/AddonRequiredModal';\nimport IframeModal from '../IframeModal';\nimport UninstallGrandfatheredAppModal from '../components/UninstallGrandfatheredAppModal/UninstallGrandfatheredAppModal';\nimport type { Actions } from '../helpers';\nimport { appEnabledStatuses, appButtonProps } from '../helpers';\nimport { handleAPIError } from '../helpers/handleAPIError';\nimport { warnEnableDisableApp } from '../helpers/warnEnableDisableApp';\nimport { useAppInstallationHandler } from './useAppInstallationHandler';\nimport type { MarketplaceRouteContext } from './useAppsCountQuery';\nimport { useAppsCountQuery } from './useAppsCountQuery';\nimport { useMarketplaceActions } from './useMarketplaceActions';\nimport { useOpenAppPermissionsReviewModal } from './useOpenAppPermissionsReviewModal';\nimport { useOpenIncompatibleModal } from './useOpenIncompatibleModal';\n\nexport type AppMenuOption = {\n\tid: string;\n\tsection: number;\n\tcontent: ReactNode;\n\tdisabled?: boolean;\n\tonClick?: (e?: MouseEvent<HTMLElement>) => void;\n};\n\ntype AppMenuSections = {\n\titems: AppMenuOption[];\n}[];\n\nexport const useAppMenu = (app: App, isAppDetailsPage: boolean) => {\n\tconst t = useTranslation();\n\tconst router = useRouter();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst openIncompatibleModal = useOpenIncompatibleModal();\n\n\tconst context = useRouteParameter('context') as MarketplaceRouteContext;\n\tconst currentTab = useRouteParameter('tab');\n\tconst appCountQuery = useAppsCountQuery(context);\n\n\tconst isAdminUser = usePermission('manage-apps');\n\tconst { data } = useIsEnterprise();\n\tconst isEnterpriseLicense = !!data?.isEnterprise;\n\n\tconst appAddon = app.addon;\n\tconst workspaceHasAddon = useHasLicenseModule(appAddon);\n\n\tconst [isLoading, setLoading] = useState(false);\n\tconst [requestedEndUser, setRequestedEndUser] = useState(app.requestedEndUser);\n\tconst [isAppPurchased, setPurchased] = useState(app?.isPurchased);\n\n\tconst button = appButtonProps({ ...app, isAdminUser, endUserRequested: false });\n\tconst buttonLabel = button?.label.replace(' ', '_') as\n\t\t| 'Update'\n\t\t| 'Install'\n\t\t| 'Subscribe'\n\t\t| 'See_Pricing'\n\t\t| 'Try_now'\n\t\t| 'Buy'\n\t\t| 'Request'\n\t\t| 'Requested';\n\tconst action = button?.action || '';\n\n\tconst setAppStatus = useEndpoint<'POST', '/apps/:id/status'>('POST', '/apps/:id/status', { id: app.id });\n\tconst buildExternalUrl = useEndpoint('GET', '/apps');\n\tconst syncApp = useEndpoint<'POST', '/apps/:id/sync'>('POST', '/apps/:id/sync', { id: app.id });\n\tconst uninstallApp = useEndpoint<'DELETE', '/apps/:id'>('DELETE', '/apps/:id', { id: app.id });\n\n\tconst canAppBeSubscribed = app.purchaseType === 'subscription';\n\tconst isSubscribed = app.subscriptionInfo && ['active', 'trialing'].includes(app.subscriptionInfo.status);\n\tconst isAppEnabled = app.status ? appEnabledStatuses.includes(app.status) : false;\n\n\tconst closeModal = useCallback(() => {\n\t\tsetModal(null);\n\t\tsetLoading(false);\n\t}, [setModal, setLoading]);\n\n\tconst marketplaceActions = useMarketplaceActions();\n\n\tconst installationSuccess = useCallback(\n\t\tasync (action: Actions | '', permissionsGranted) => {\n\t\t\tif (action) {\n\t\t\t\tif (action === 'request') {\n\t\t\t\t\tsetRequestedEndUser(true);\n\t\t\t\t} else {\n\t\t\t\t\tawait marketplaceActions[action]({ ...app, permissionsGranted });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetLoading(false);\n\t\t},\n\t\t[app, marketplaceActions, setLoading],\n\t);\n\n\tconst openPermissionModal = useOpenAppPermissionsReviewModal({\n\t\tapp,\n\t\tonCancel: closeModal,\n\t\tonConfirm: (permissionsGranted) => installationSuccess(action, permissionsGranted),\n\t});\n\n\tconst appInstallationHandler = useAppInstallationHandler({\n\t\tapp,\n\t\tisAppPurchased,\n\t\taction,\n\t\tonDismiss: closeModal,\n\t\tonSuccess: installationSuccess,\n\t\tsetIsPurchased: setPurchased,\n\t});\n\n\t// TODO: There is no necessity of all these callbacks being out of the above useMemo.\n\t// My propose here is to refactor the hook to make it clearer and with less unnecessary caching.\n\tconst missingAddonHandler = useCallback(\n\t\t(actionType: AddonActionType) => {\n\t\t\tsetModal(<AddonRequiredModal actionType={actionType} onDismiss={closeModal} onInstallAnyway={appInstallationHandler} />);\n\t\t},\n\t\t[appInstallationHandler, closeModal, setModal],\n\t);\n\n\tconst handleAddon = useCallback(\n\t\t(actionType: AddonActionType, callback: () => void) => {\n\t\t\tif (isAdminUser && appAddon && !workspaceHasAddon) {\n\t\t\t\treturn missingAddonHandler(actionType);\n\t\t\t}\n\n\t\t\tcallback();\n\t\t},\n\t\t[appAddon, isAdminUser, missingAddonHandler, workspaceHasAddon],\n\t);\n\n\tconst handleAcquireApp = useCallback(() => {\n\t\tsetLoading(true);\n\t\thandleAddon('install', appInstallationHandler);\n\t}, [appInstallationHandler, handleAddon]);\n\n\tconst handleSubscription = useCallback(async () => {\n\t\tif (app?.versionIncompatible && !isSubscribed) {\n\t\t\topenIncompatibleModal(app, 'subscribe', closeModal);\n\t\t\treturn;\n\t\t}\n\n\t\tlet data;\n\t\ttry {\n\t\t\tdata = (await buildExternalUrl({\n\t\t\t\tbuildExternalUrl: 'true',\n\t\t\t\tappId: app.id,\n\t\t\t\tpurchaseType: app.purchaseType,\n\t\t\t\tdetails: 'true',\n\t\t\t})) as { url: string };\n\t\t} catch (error) {\n\t\t\thandleAPIError(error);\n\t\t\treturn;\n\t\t}\n\n\t\tconst confirm = async () => {\n\t\t\ttry {\n\t\t\t\tawait syncApp();\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t};\n\n\t\tsetModal(<IframeModal url={data.url} confirm={confirm} cancel={closeModal} />);\n\t}, [app, isSubscribed, setModal, closeModal, openIncompatibleModal, buildExternalUrl, syncApp]);\n\n\tconst handleViewLogs = useCallback(() => {\n\t\trouter.navigate({\n\t\t\tname: 'marketplace',\n\t\t\tparams: {\n\t\t\t\tcontext,\n\t\t\t\tpage: 'info',\n\t\t\t\tid: app.id,\n\t\t\t\tversion: app.version,\n\t\t\t\ttab: 'logs',\n\t\t\t},\n\t\t});\n\t}, [app.id, app.version, context, router]);\n\n\tconst handleDisable = useCallback(() => {\n\t\tconst confirm = async () => {\n\t\t\tcloseModal();\n\t\t\ttry {\n\t\t\t\tconst { status } = await setAppStatus({ status: AppStatus.MANUALLY_DISABLED });\n\t\t\t\twarnEnableDisableApp(app.name, status, 'disable');\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t};\n\t\tsetModal(\n\t\t\t<WarningModal close={closeModal} confirm={confirm} text={t('Apps_Marketplace_Deactivate_App_Prompt')} confirmText={t('Yes')} />,\n\t\t);\n\t}, [app.name, closeModal, setAppStatus, setModal, t]);\n\n\tconst handleEnable = useCallback(() => {\n\t\thandleAddon('enable', async () => {\n\t\t\ttry {\n\t\t\t\tconst { status } = await setAppStatus({ status: AppStatus.MANUALLY_ENABLED });\n\t\t\t\twarnEnableDisableApp(app.name, status, 'enable');\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t});\n\t}, [app.name, handleAddon, setAppStatus]);\n\n\tconst handleUninstall = useCallback(() => {\n\t\tconst uninstall = async () => {\n\t\t\tcloseModal();\n\t\t\ttry {\n\t\t\t\tconst { success } = await uninstallApp();\n\t\t\t\tif (success) {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: `${app.name} uninstalled` });\n\t\t\t\t\tif (context === 'details' && currentTab !== 'details') {\n\t\t\t\t\t\trouter.navigate(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'marketplace',\n\t\t\t\t\t\t\t\tparams: { ...router.getRouteParameters(), tab: 'details' },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ replace: true },\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\thandleAPIError(error);\n\t\t\t}\n\t\t};\n\n\t\tif (isSubscribed) {\n\t\t\tconst confirm = async () => {\n\t\t\t\tawait handleSubscription();\n\t\t\t};\n\n\t\t\tsetModal(\n\t\t\t\t<WarningModal\n\t\t\t\t\tclose={closeModal}\n\t\t\t\t\tcancel={uninstall}\n\t\t\t\t\tconfirm={confirm}\n\t\t\t\t\ttext={t('Apps_Marketplace_Uninstall_Subscribed_App_Prompt')}\n\t\t\t\t\tconfirmText={t('Apps_Marketplace_Modify_App_Subscription')}\n\t\t\t\t\tcancelText={t('Apps_Marketplace_Uninstall_Subscribed_App_Anyway')}\n\t\t\t\t/>,\n\t\t\t);\n\t\t}\n\n\t\tif (!appCountQuery.data) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (app.migrated) {\n\t\t\tsetModal(\n\t\t\t\t<UninstallGrandfatheredAppModal\n\t\t\t\t\tcontext={context}\n\t\t\t\t\tappName={app.name}\n\t\t\t\t\tlimit={appCountQuery.data.limit}\n\t\t\t\t\thandleUninstall={uninstall}\n\t\t\t\t\thandleClose={closeModal}\n\t\t\t\t/>,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tsetModal(\n\t\t\t<WarningModal close={closeModal} confirm={uninstall} text={t('Apps_Marketplace_Uninstall_App_Prompt')} confirmText={t('Yes')} />,\n\t\t);\n\t}, [\n\t\tisSubscribed,\n\t\tappCountQuery.data,\n\t\tapp.migrated,\n\t\tapp.name,\n\t\tsetModal,\n\t\tcloseModal,\n\t\tt,\n\t\tuninstallApp,\n\t\tdispatchToastMessage,\n\t\tcontext,\n\t\tcurrentTab,\n\t\trouter,\n\t\thandleSubscription,\n\t]);\n\n\tconst incompatibleIconName = useCallback(\n\t\t(app, action) => {\n\t\t\tif (!app.versionIncompatible) {\n\t\t\t\tif (action === 'update') {\n\t\t\t\t\treturn 'refresh';\n\t\t\t\t}\n\n\t\t\t\treturn 'card';\n\t\t\t}\n\n\t\t\t// Now we are handling an incompatible app\n\t\t\tif (action === 'subscribe' && !isSubscribed) {\n\t\t\t\treturn 'warning';\n\t\t\t}\n\n\t\t\tif (action === 'install' || action === 'update') {\n\t\t\t\treturn 'warning';\n\t\t\t}\n\n\t\t\treturn 'card';\n\t\t},\n\t\t[isSubscribed],\n\t);\n\n\tconst handleUpdate = useCallback(async () => {\n\t\tsetLoading(true);\n\n\t\tif (app?.versionIncompatible) {\n\t\t\topenIncompatibleModal(app, 'update', closeModal);\n\t\t\treturn;\n\t\t}\n\n\t\topenPermissionModal();\n\t}, [app, openPermissionModal, openIncompatibleModal, closeModal]);\n\n\tconst canUpdate = app.installed && app.version && app.marketplaceVersion && semver.lt(app.version, app.marketplaceVersion);\n\n\tconst menuSections = useMemo(() => {\n\t\tconst bothAppStatusOptions = [\n\t\t\tcanAppBeSubscribed &&\n\t\t\t\tisSubscribed &&\n\t\t\t\tisAdminUser && {\n\t\t\t\t\tid: 'subscribe',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Icon name={incompatibleIconName(app, 'subscribe')} size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('Subscription')}\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleSubscription,\n\t\t\t\t},\n\t\t];\n\n\t\tconst nonInstalledAppOptions = [\n\t\t\t!app.installed &&\n\t\t\t\t!!button && {\n\t\t\t\t\tid: 'acquire',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tdisabled: requestedEndUser,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{isAdminUser && <Icon name={incompatibleIconName(app, 'install')} size='x16' mie={4} />}\n\t\t\t\t\t\t\t{t(buttonLabel)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleAcquireApp,\n\t\t\t\t},\n\t\t];\n\n\t\tconst isEnterpriseOrNot = (app.isEnterpriseOnly && isEnterpriseLicense) || !app.isEnterpriseOnly;\n\t\tconst isPossibleToEnableApp = app.installed && isAdminUser && !isAppEnabled && isEnterpriseOrNot;\n\t\tconst doesItReachedTheLimit =\n\t\t\t!app.migrated &&\n\t\t\t!appCountQuery?.data?.hasUnlimitedApps &&\n\t\t\tappCountQuery?.data?.enabled !== undefined &&\n\t\t\tappCountQuery?.data?.enabled >= appCountQuery?.data?.limit;\n\n\t\tconst installedAppOptions = [\n\t\t\tcontext !== 'details' &&\n\t\t\t\tisAdminUser &&\n\t\t\t\tapp.installed && {\n\t\t\t\t\tid: 'viewLogs',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Icon name='desktop-text' size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('View_Logs')}\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleViewLogs,\n\t\t\t\t},\n\t\t\tisAdminUser &&\n\t\t\t\t!!canUpdate &&\n\t\t\t\t!isAppDetailsPage && {\n\t\t\t\t\tid: 'update',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Icon name={incompatibleIconName(app, 'update')} size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('Update')}\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleUpdate,\n\t\t\t\t},\n\t\t\tapp.installed &&\n\t\t\t\tisAdminUser &&\n\t\t\t\tisAppEnabled && {\n\t\t\t\t\tid: 'disable',\n\t\t\t\t\tsection: 0,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<Box color='status-font-on-warning'>\n\t\t\t\t\t\t\t<Icon name='ban' size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('Disable')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleDisable,\n\t\t\t\t},\n\t\t\tisPossibleToEnableApp && {\n\t\t\t\tid: 'enable',\n\t\t\t\tsection: 0,\n\t\t\t\tdisabled: doesItReachedTheLimit,\n\t\t\t\tcontent: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Icon name='check' size='x16' marginInlineEnd='x4' />\n\t\t\t\t\t\t{t('Enable')}\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t\tonClick: handleEnable,\n\t\t\t},\n\t\t\tapp.installed &&\n\t\t\t\tisAdminUser && {\n\t\t\t\t\tid: 'uninstall',\n\t\t\t\t\tsection: 1,\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<Box color='status-font-on-danger'>\n\t\t\t\t\t\t\t<Icon name='trash' size='x16' mie={4} />\n\t\t\t\t\t\t\t{t('Uninstall')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t),\n\t\t\t\t\tonClick: handleUninstall,\n\t\t\t\t},\n\t\t];\n\n\t\tconst filtered = [...bothAppStatusOptions, ...nonInstalledAppOptions, ...installedAppOptions].flatMap((value) =>\n\t\t\tvalue && typeof value !== 'boolean' ? value : [],\n\t\t);\n\n\t\tconst sections: AppMenuSections = [];\n\n\t\tfiltered.forEach((option) => {\n\t\t\tif (typeof sections[option.section] === 'undefined') {\n\t\t\t\tsections[option.section] = { items: [] };\n\t\t\t}\n\n\t\t\tsections[option.section].items.push(option);\n\t\t});\n\n\t\treturn sections;\n\t}, [\n\t\tcanAppBeSubscribed,\n\t\tisSubscribed,\n\t\tisAdminUser,\n\t\tincompatibleIconName,\n\t\tapp,\n\t\tt,\n\t\thandleSubscription,\n\t\tbutton,\n\t\trequestedEndUser,\n\t\tbuttonLabel,\n\t\thandleAcquireApp,\n\t\tisEnterpriseLicense,\n\t\tisAppEnabled,\n\t\tappCountQuery?.data?.hasUnlimitedApps,\n\t\tappCountQuery?.data?.enabled,\n\t\tappCountQuery?.data?.limit,\n\t\tcontext,\n\t\thandleViewLogs,\n\t\tcanUpdate,\n\t\tisAppDetailsPage,\n\t\thandleUpdate,\n\t\thandleDisable,\n\t\thandleEnable,\n\t\thandleUninstall,\n\t]);\n\n\treturn { isLoading, isAdminUser, sections: menuSections };\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"299d423ca9f652b1625c2baeda69ccaff2fcd484"}
