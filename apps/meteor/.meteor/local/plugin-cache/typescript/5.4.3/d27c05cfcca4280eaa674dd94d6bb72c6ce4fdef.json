{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/webdav/SaveToWebdavModal.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/webdav/SaveToWebdavModal.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/webdav/SaveToWebdavModal.tsx","inputSourceMap":{"version":3,"file":"client/views/room/webdav/SaveToWebdavModal.tsx","sourceRoot":"","sources":["client/views/room/webdav/SaveToWebdavModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { MessageAttachment, IWebdavAccount } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { Modal, Box, Button, FieldGroup, Field, FieldLabel, FieldRow, FieldError, Select, Throbber } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useMethod, useSetting, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useState, useMemo, useEffect, useRef } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\n\nimport { useWebDAVAccountIntegrationsQuery } from '../../../hooks/webdav/useWebDAVAccountIntegrationsQuery';\nimport { getWebdavServerName } from '../../../lib/getWebdavServerName';\n\ntype SaveToWebdavModalProps = {\n\tonClose: () => void;\n\tdata: {\n\t\tattachment: MessageAttachment;\n\t\turl: string;\n\t};\n};\n\nconst SaveToWebdavModal = ({ onClose, data }: SaveToWebdavModalProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst uploadFileToWebdav = useMethod('uploadFileToWebdav');\n\tconst fileRequest = useRef<XMLHttpRequest | null>(null);\n\tconst accountIdField = useUniqueId();\n\n\tconst {\n\t\tcontrol,\n\t\thandleSubmit,\n\t\tformState: { errors },\n\t} = useForm<{ accountId: string }>({ mode: 'all' });\n\n\tconst enabled = useSetting<boolean>('Webdav_Integration_Enabled', false);\n\n\tconst { data: value } = useWebDAVAccountIntegrationsQuery({ enabled });\n\n\tconst accountsOptions: SelectOption[] = useMemo(() => {\n\t\treturn value?.map(({ _id, ...current }) => [_id, getWebdavServerName(current)]) ?? [];\n\t}, [value]);\n\n\tuseEffect(() => fileRequest.current?.abort, []);\n\n\tconst handleSaveFile = ({ accountId }: { accountId: IWebdavAccount['_id'] }): void => {\n\t\tsetIsLoading(true);\n\n\t\tconst {\n\t\t\turl,\n\t\t\tattachment: { title },\n\t\t} = data;\n\n\t\tfileRequest.current = new XMLHttpRequest();\n\t\tfileRequest.current.open('GET', url, true);\n\t\tfileRequest.current.responseType = 'arraybuffer';\n\t\tfileRequest.current.onload = async (): Promise<void> => {\n\t\t\tconst arrayBuffer = fileRequest.current?.response;\n\t\t\tif (arrayBuffer) {\n\t\t\t\tconst fileData = new Uint8Array(arrayBuffer);\n\n\t\t\t\ttry {\n\t\t\t\t\tif (!title) {\n\t\t\t\t\t\tthrow new Error('File name is required');\n\t\t\t\t\t}\n\t\t\t\t\tconst response = await uploadFileToWebdav(accountId, fileData, title);\n\t\t\t\t\tif (!response.success) {\n\t\t\t\t\t\tthrow new Error(response.message ? t(response.message) : 'Error uploading file');\n\t\t\t\t\t}\n\t\t\t\t\treturn dispatchToastMessage({ type: 'success', message: t('File_uploaded') });\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn dispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t} finally {\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\tonClose();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tfileRequest.current.send(null);\n\t};\n\n\treturn (\n\t\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(handleSaveFile)} {...props} />}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Title>{t('Save_To_Webdav')}</Modal.Title>\n\t\t\t\t<Modal.Close title={t('Close')} onClick={onClose} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content>\n\t\t\t\t{isLoading && (\n\t\t\t\t\t<Box alignItems='center' display='flex' justifyContent='center' minHeight='x32'>\n\t\t\t\t\t\t<Throbber />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t\t{!isLoading && (\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel>{t('Select_a_webdav_server')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='accountId'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{ required: t('Required_field', { field: t('Select_a_webdav_server') }) }}\n\t\t\t\t\t\t\t\t\trender={({ field }): ReactElement => (\n\t\t\t\t\t\t\t\t\t\t<Select {...field} options={accountsOptions} id={accountIdField} placeholder={t('Select_an_option')} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors.accountId && <FieldError>{errors.accountId.message}</FieldError>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t)}\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={onClose}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button primary type='submit' loading={isLoading}>\n\t\t\t\t\t\t{t('Save_To_Webdav')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\nexport default SaveToWebdavModal;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"production","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/webdav/SaveToWebdavModal.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/webdav/SaveToWebdavModal.tsx","inputSourceMap":{"version":3,"file":"client/views/room/webdav/SaveToWebdavModal.tsx","sourceRoot":"","sources":["client/views/room/webdav/SaveToWebdavModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { MessageAttachment, IWebdavAccount } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { Modal, Box, Button, FieldGroup, Field, FieldLabel, FieldRow, FieldError, Select, Throbber } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useMethod, useSetting, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useState, useMemo, useEffect, useRef } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\n\nimport { useWebDAVAccountIntegrationsQuery } from '../../../hooks/webdav/useWebDAVAccountIntegrationsQuery';\nimport { getWebdavServerName } from '../../../lib/getWebdavServerName';\n\ntype SaveToWebdavModalProps = {\n\tonClose: () => void;\n\tdata: {\n\t\tattachment: MessageAttachment;\n\t\turl: string;\n\t};\n};\n\nconst SaveToWebdavModal = ({ onClose, data }: SaveToWebdavModalProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst uploadFileToWebdav = useMethod('uploadFileToWebdav');\n\tconst fileRequest = useRef<XMLHttpRequest | null>(null);\n\tconst accountIdField = useUniqueId();\n\n\tconst {\n\t\tcontrol,\n\t\thandleSubmit,\n\t\tformState: { errors },\n\t} = useForm<{ accountId: string }>({ mode: 'all' });\n\n\tconst enabled = useSetting<boolean>('Webdav_Integration_Enabled', false);\n\n\tconst { data: value } = useWebDAVAccountIntegrationsQuery({ enabled });\n\n\tconst accountsOptions: SelectOption[] = useMemo(() => {\n\t\treturn value?.map(({ _id, ...current }) => [_id, getWebdavServerName(current)]) ?? [];\n\t}, [value]);\n\n\tuseEffect(() => fileRequest.current?.abort, []);\n\n\tconst handleSaveFile = ({ accountId }: { accountId: IWebdavAccount['_id'] }): void => {\n\t\tsetIsLoading(true);\n\n\t\tconst {\n\t\t\turl,\n\t\t\tattachment: { title },\n\t\t} = data;\n\n\t\tfileRequest.current = new XMLHttpRequest();\n\t\tfileRequest.current.open('GET', url, true);\n\t\tfileRequest.current.responseType = 'arraybuffer';\n\t\tfileRequest.current.onload = async (): Promise<void> => {\n\t\t\tconst arrayBuffer = fileRequest.current?.response;\n\t\t\tif (arrayBuffer) {\n\t\t\t\tconst fileData = new Uint8Array(arrayBuffer);\n\n\t\t\t\ttry {\n\t\t\t\t\tif (!title) {\n\t\t\t\t\t\tthrow new Error('File name is required');\n\t\t\t\t\t}\n\t\t\t\t\tconst response = await uploadFileToWebdav(accountId, fileData, title);\n\t\t\t\t\tif (!response.success) {\n\t\t\t\t\t\tthrow new Error(response.message ? t(response.message) : 'Error uploading file');\n\t\t\t\t\t}\n\t\t\t\t\treturn dispatchToastMessage({ type: 'success', message: t('File_uploaded') });\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn dispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t} finally {\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\tonClose();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tfileRequest.current.send(null);\n\t};\n\n\treturn (\n\t\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(handleSaveFile)} {...props} />}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Title>{t('Save_To_Webdav')}</Modal.Title>\n\t\t\t\t<Modal.Close title={t('Close')} onClick={onClose} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content>\n\t\t\t\t{isLoading && (\n\t\t\t\t\t<Box alignItems='center' display='flex' justifyContent='center' minHeight='x32'>\n\t\t\t\t\t\t<Throbber />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t\t{!isLoading && (\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel>{t('Select_a_webdav_server')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='accountId'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{ required: t('Required_field', { field: t('Select_a_webdav_server') }) }}\n\t\t\t\t\t\t\t\t\trender={({ field }): ReactElement => (\n\t\t\t\t\t\t\t\t\t\t<Select {...field} options={accountsOptions} id={accountIdField} placeholder={t('Select_an_option')} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors.accountId && <FieldError>{errors.accountId.message}</FieldError>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t)}\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={onClose}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button primary type='submit' loading={isLoading}>\n\t\t\t\t\t\t{t('Save_To_Webdav')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\nexport default SaveToWebdavModal;\n"]}}},"code":"var _excluded = [\"_id\"];\nvar _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\nvar _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 1);\nvar _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 2);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 3);\nvar Modal, Box, Button, FieldGroup, Field, FieldLabel, FieldRow, FieldError, Select, Throbber;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Modal: function (v) {\n    Modal = v;\n  },\n  Box: function (v) {\n    Box = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  FieldGroup: function (v) {\n    FieldGroup = v;\n  },\n  Field: function (v) {\n    Field = v;\n  },\n  FieldLabel: function (v) {\n    FieldLabel = v;\n  },\n  FieldRow: function (v) {\n    FieldRow = v;\n  },\n  FieldError: function (v) {\n    FieldError = v;\n  },\n  Select: function (v) {\n    Select = v;\n  },\n  Throbber: function (v) {\n    Throbber = v;\n  }\n}, 0);\nvar useUniqueId;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useUniqueId: function (v) {\n    useUniqueId = v;\n  }\n}, 1);\nvar useMethod, useSetting, useToastMessageDispatch;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useMethod: function (v) {\n    useMethod = v;\n  },\n  useSetting: function (v) {\n    useSetting = v;\n  },\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  }\n}, 2);\nvar React, useState, useMemo, useEffect, useRef;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useState: function (v) {\n    useState = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useEffect: function (v) {\n    useEffect = v;\n  },\n  useRef: function (v) {\n    useRef = v;\n  }\n}, 3);\nvar useForm, Controller;\nmodule.link(\"react-hook-form\", {\n  useForm: function (v) {\n    useForm = v;\n  },\n  Controller: function (v) {\n    Controller = v;\n  }\n}, 4);\nvar useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 5);\nvar useWebDAVAccountIntegrationsQuery;\nmodule.link(\"../../../hooks/webdav/useWebDAVAccountIntegrationsQuery\", {\n  useWebDAVAccountIntegrationsQuery: function (v) {\n    useWebDAVAccountIntegrationsQuery = v;\n  }\n}, 6);\nvar getWebdavServerName;\nmodule.link(\"../../../lib/getWebdavServerName\", {\n  getWebdavServerName: function (v) {\n    getWebdavServerName = v;\n  }\n}, 7);\nvar SaveToWebdavModal = function (_ref) {\n  var onClose = _ref.onClose,\n    data = _ref.data;\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  var dispatchToastMessage = useToastMessageDispatch();\n  var uploadFileToWebdav = useMethod('uploadFileToWebdav');\n  var fileRequest = useRef(null);\n  var accountIdField = useUniqueId();\n  var _useForm = useForm({\n      mode: 'all'\n    }),\n    control = _useForm.control,\n    handleSubmit = _useForm.handleSubmit,\n    errors = _useForm.formState.errors;\n  var enabled = useSetting('Webdav_Integration_Enabled', false);\n  var _useWebDAVAccountInte = useWebDAVAccountIntegrationsQuery({\n      enabled: enabled\n    }),\n    value = _useWebDAVAccountInte.data;\n  var accountsOptions = useMemo(function () {\n    var _value$map;\n    return (_value$map = value === null || value === void 0 ? void 0 : value.map(function (_ref2) {\n      var _id = _ref2._id,\n        current = _objectWithoutProperties(_ref2, _excluded);\n      return [_id, getWebdavServerName(current)];\n    })) !== null && _value$map !== void 0 ? _value$map : [];\n  }, [value]);\n  useEffect(function () {\n    var _fileRequest$current;\n    return (_fileRequest$current = fileRequest.current) === null || _fileRequest$current === void 0 ? void 0 : _fileRequest$current.abort;\n  }, []);\n  var handleSaveFile = function (_ref3) {\n    var accountId = _ref3.accountId;\n    setIsLoading(true);\n    var url = data.url,\n      title = data.attachment.title;\n    fileRequest.current = new XMLHttpRequest();\n    fileRequest.current.open('GET', url, true);\n    fileRequest.current.responseType = 'arraybuffer';\n    fileRequest.current.onload = function () {\n      function _callee() {\n        var _fileRequest$current2;\n        var arrayBuffer, fileData, response;\n        return _regeneratorRuntime.async(function () {\n          function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                arrayBuffer = (_fileRequest$current2 = fileRequest.current) === null || _fileRequest$current2 === void 0 ? void 0 : _fileRequest$current2.response;\n                if (!arrayBuffer) {\n                  _context.next = 21;\n                  break;\n                }\n                fileData = new Uint8Array(arrayBuffer);\n                _context.prev = 3;\n                if (title) {\n                  _context.next = 6;\n                  break;\n                }\n                throw new Error('File name is required');\n              case 6:\n                _context.next = 8;\n                return _regeneratorRuntime.awrap(uploadFileToWebdav(accountId, fileData, title));\n              case 8:\n                response = _context.sent;\n                if (response.success) {\n                  _context.next = 11;\n                  break;\n                }\n                throw new Error(response.message ? t(response.message) : 'Error uploading file');\n              case 11:\n                return _context.abrupt(\"return\", dispatchToastMessage({\n                  type: 'success',\n                  message: t('File_uploaded')\n                }));\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](3);\n                return _context.abrupt(\"return\", dispatchToastMessage({\n                  type: 'error',\n                  message: _context.t0\n                }));\n              case 17:\n                _context.prev = 17;\n                setIsLoading(false);\n                onClose();\n                return _context.finish(17);\n              case 21:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n          return _callee$;\n        }(), null, null, [[3, 14, 17, 21]], Promise);\n      }\n      return _callee;\n    }();\n    fileRequest.current.send(null);\n  };\n  return /*#__PURE__*/React.createElement(Modal, {\n    wrapperFunction: function (props) {\n      return /*#__PURE__*/React.createElement(Box, _extends({\n        is: \"form\",\n        onSubmit: handleSubmit(handleSaveFile)\n      }, props));\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, null, /*#__PURE__*/React.createElement(Modal.Title, null, t('Save_To_Webdav')), /*#__PURE__*/React.createElement(Modal.Close, {\n    title: t('Close'),\n    onClick: onClose\n  })), /*#__PURE__*/React.createElement(Modal.Content, null, isLoading && /*#__PURE__*/React.createElement(Box, {\n    alignItems: \"center\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    minHeight: \"x32\"\n  }, /*#__PURE__*/React.createElement(Throbber, null)), !isLoading && /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, null, t('Select_a_webdav_server')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(Controller, {\n    name: \"accountId\",\n    control: control,\n    rules: {\n      required: t('Required_field', {\n        field: t('Select_a_webdav_server')\n      })\n    },\n    render: function (_ref4) {\n      var field = _ref4.field;\n      return /*#__PURE__*/React.createElement(Select, _extends({}, field, {\n        options: accountsOptions,\n        id: accountIdField,\n        placeholder: t('Select_an_option')\n      }));\n    }\n  })), errors.accountId && /*#__PURE__*/React.createElement(FieldError, null, errors.accountId.message)))), /*#__PURE__*/React.createElement(Modal.Footer, null, /*#__PURE__*/React.createElement(Modal.FooterControllers, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose\n  }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    type: \"submit\",\n    loading: isLoading\n  }, t('Save_To_Webdav')))));\n};\nmodule.exportDefault(SaveToWebdavModal);","map":{"version":3,"names":["_regeneratorRuntime","module","link","default","v","_extends","_objectWithoutProperties","_slicedToArray","Modal","Box","Button","FieldGroup","Field","FieldLabel","FieldRow","FieldError","Select","Throbber","useUniqueId","useMethod","useSetting","useToastMessageDispatch","React","useState","useMemo","useEffect","useRef","useForm","Controller","useTranslation","useWebDAVAccountIntegrationsQuery","getWebdavServerName","SaveToWebdavModal","_ref","onClose","data","_useTranslation","t","_useState","_useState2","isLoading","setIsLoading","dispatchToastMessage","uploadFileToWebdav","fileRequest","accountIdField","_useForm","mode","control","handleSubmit","errors","formState","enabled","_useWebDAVAccountInte","value","accountsOptions","_value$map","map","_ref2","_id","current","_excluded","_fileRequest$current","abort","handleSaveFile","_ref3","accountId","url","title","attachment","XMLHttpRequest","open","responseType","onload","_callee","_fileRequest$current2","arrayBuffer","fileData","response","async","_callee$","_context","prev","next","Uint8Array","Error","awrap","sent","success","message","abrupt","type","t0","finish","stop","Promise","send","createElement","wrapperFunction","props","is","onSubmit","Header","Title","Close","onClick","Content","alignItems","display","justifyContent","minHeight","name","rules","required","field","render","_ref4","options","id","placeholder","Footer","FooterControllers","primary","loading","exportDefault"],"sources":["client/views/room/webdav/SaveToWebdavModal.tsx"],"sourcesContent":["import type { MessageAttachment, IWebdavAccount } from '@rocket.chat/core-typings';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport { Modal, Box, Button, FieldGroup, Field, FieldLabel, FieldRow, FieldError, Select, Throbber } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useMethod, useSetting, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useState, useMemo, useEffect, useRef } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\n\nimport { useWebDAVAccountIntegrationsQuery } from '../../../hooks/webdav/useWebDAVAccountIntegrationsQuery';\nimport { getWebdavServerName } from '../../../lib/getWebdavServerName';\n\ntype SaveToWebdavModalProps = {\n\tonClose: () => void;\n\tdata: {\n\t\tattachment: MessageAttachment;\n\t\turl: string;\n\t};\n};\n\nconst SaveToWebdavModal = ({ onClose, data }: SaveToWebdavModalProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst uploadFileToWebdav = useMethod('uploadFileToWebdav');\n\tconst fileRequest = useRef<XMLHttpRequest | null>(null);\n\tconst accountIdField = useUniqueId();\n\n\tconst {\n\t\tcontrol,\n\t\thandleSubmit,\n\t\tformState: { errors },\n\t} = useForm<{ accountId: string }>({ mode: 'all' });\n\n\tconst enabled = useSetting<boolean>('Webdav_Integration_Enabled', false);\n\n\tconst { data: value } = useWebDAVAccountIntegrationsQuery({ enabled });\n\n\tconst accountsOptions: SelectOption[] = useMemo(() => {\n\t\treturn value?.map(({ _id, ...current }) => [_id, getWebdavServerName(current)]) ?? [];\n\t}, [value]);\n\n\tuseEffect(() => fileRequest.current?.abort, []);\n\n\tconst handleSaveFile = ({ accountId }: { accountId: IWebdavAccount['_id'] }): void => {\n\t\tsetIsLoading(true);\n\n\t\tconst {\n\t\t\turl,\n\t\t\tattachment: { title },\n\t\t} = data;\n\n\t\tfileRequest.current = new XMLHttpRequest();\n\t\tfileRequest.current.open('GET', url, true);\n\t\tfileRequest.current.responseType = 'arraybuffer';\n\t\tfileRequest.current.onload = async (): Promise<void> => {\n\t\t\tconst arrayBuffer = fileRequest.current?.response;\n\t\t\tif (arrayBuffer) {\n\t\t\t\tconst fileData = new Uint8Array(arrayBuffer);\n\n\t\t\t\ttry {\n\t\t\t\t\tif (!title) {\n\t\t\t\t\t\tthrow new Error('File name is required');\n\t\t\t\t\t}\n\t\t\t\t\tconst response = await uploadFileToWebdav(accountId, fileData, title);\n\t\t\t\t\tif (!response.success) {\n\t\t\t\t\t\tthrow new Error(response.message ? t(response.message) : 'Error uploading file');\n\t\t\t\t\t}\n\t\t\t\t\treturn dispatchToastMessage({ type: 'success', message: t('File_uploaded') });\n\t\t\t\t} catch (error) {\n\t\t\t\t\treturn dispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t} finally {\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\tonClose();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tfileRequest.current.send(null);\n\t};\n\n\treturn (\n\t\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(handleSaveFile)} {...props} />}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Title>{t('Save_To_Webdav')}</Modal.Title>\n\t\t\t\t<Modal.Close title={t('Close')} onClick={onClose} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content>\n\t\t\t\t{isLoading && (\n\t\t\t\t\t<Box alignItems='center' display='flex' justifyContent='center' minHeight='x32'>\n\t\t\t\t\t\t<Throbber />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t\t{!isLoading && (\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel>{t('Select_a_webdav_server')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='accountId'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{ required: t('Required_field', { field: t('Select_a_webdav_server') }) }}\n\t\t\t\t\t\t\t\t\trender={({ field }): ReactElement => (\n\t\t\t\t\t\t\t\t\t\t<Select {...field} options={accountsOptions} id={accountIdField} placeholder={t('Select_an_option')} />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors.accountId && <FieldError>{errors.accountId.message}</FieldError>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t)}\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={onClose}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button primary type='submit' loading={isLoading}>\n\t\t\t\t\t\t{t('Save_To_Webdav')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\nexport default SaveToWebdavModal;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"d27c05cfcca4280eaa674dd94d6bb72c6ce4fdef"}
