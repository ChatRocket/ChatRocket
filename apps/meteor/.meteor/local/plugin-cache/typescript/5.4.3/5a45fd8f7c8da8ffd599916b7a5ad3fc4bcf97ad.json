{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/subscription/SubscriptionPage.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/admin/subscription/SubscriptionPage.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/subscription/SubscriptionPage.tsx","inputSourceMap":{"version":3,"file":"client/views/admin/subscription/SubscriptionPage.tsx","sourceRoot":"","sources":["client/views/admin/subscription/SubscriptionPage.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,GAAG,EAAE,MAAM,EAAE,WAAW,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,uBAAuB,CAAC;AAC3F,OAAO,EAAE,iBAAiB,EAAE,iBAAiB,EAAE,MAAM,6BAA6B,CAAC;AACnF,OAAO,EAAE,kBAAkB,EAAE,SAAS,EAAE,MAAM,0BAA0B,CAAC;AACzE,OAAO,EAAE,CAAC,EAAE,MAAM,SAAS,CAAC;AAC5B,OAAO,KAAK,EAAE,EAAE,IAAI,EAAE,WAAW,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AAC5D,OAAO,QAAQ,MAAM,UAAU,CAAC;AAEhC,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,+BAA+B,EAAE,MAAM,0BAA0B,CAAC;AAC7F,OAAO,EAAE,eAAe,EAAE,MAAM,gCAAgC,CAAC;AACjE,OAAO,EAAE,oBAAoB,EAAE,UAAU,EAAE,MAAM,2BAA2B,CAAC;AAC7E,OAAO,EAAE,qBAAqB,EAAE,MAAM,sCAAsC,CAAC;AAC7E,OAAO,EAAE,yBAAyB,EAAE,MAAM,6BAA6B,CAAC;AACxE,OAAO,wBAAwB,MAAM,4BAA4B,CAAC;AAClE,OAAO,aAAa,MAAM,4BAA4B,CAAC;AACvD,OAAO,gBAAgB,MAAM,+BAA+B,CAAC;AAC7D,OAAO,kBAAkB,MAAM,uCAAuC,CAAC;AACvE,OAAO,sBAAsB,MAAM,2CAA2C,CAAC;AAC/E,OAAO,aAAa,MAAM,kCAAkC,CAAC;AAC7D,OAAO,YAAY,MAAM,iCAAiC,CAAC;AAC3D,OAAO,cAAc,MAAM,mCAAmC,CAAC;AAC/D,OAAO,YAAY,MAAM,iCAAiC,CAAC;AAC3D,OAAO,OAAO,MAAM,4BAA4B,CAAC;AACjD,OAAO,QAAQ,MAAM,6BAA6B,CAAC;AACnD,OAAO,iBAAiB,MAAM,+CAA+C,CAAC;AAC9E,OAAO,SAAS,MAAM,8BAA8B,CAAC;AACrD,OAAO,EAAE,gBAAgB,EAAE,MAAM,0BAA0B,CAAC;AAC5D,OAAO,EAAE,gBAAgB,EAAE,MAAM,0BAA0B,CAAC;AAE5D,SAAS,cAAc;IACtB,MAAM,CAAC,cAAc,EAAE,iBAAiB,CAAC,GAAG,iBAAiB,CAAC,sBAAsB,EAAE,KAAK,CAAC,CAAC;IAE7F,SAAS,CAAC,GAAG,EAAE;QACd,MAAM,WAAW,GAAG,QAAQ,CAAC,MAAM,EAAE;YACpC,mFAAmF,EAAE,GAAG,EAAE;gBACzF,iBAAiB,CAAC,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC;YACxD,CAAC;SACD,CAAC,CAAC;QACH,OAAO,GAAG,EAAE;YACX,WAAW,EAAE,CAAC;QACf,CAAC,CAAC;IACH,CAAC,CAAC,CAAC;IAEH,OAAO,cAAc,CAAC;AACvB,CAAC;AAED,MAAM,gBAAgB,GAAG,GAAG,EAAE;IAC7B,MAAM,WAAW,GAAG,cAAc,EAAE,CAAC;IACrC,MAAM,MAAM,GAAG,SAAS,EAAE,CAAC;IAC3B,MAAM,EAAE,IAAI,EAAE,cAAc,EAAE,GAAG,eAAe,EAAE,CAAC;IACnD,MAAM,EAAE,YAAY,EAAE,GAAG,qBAAqB,EAAE,CAAC;IACjD,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,SAAS,EAAE,gBAAgB,EAAE,GAAG,UAAU,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;IAC7F,MAAM,iBAAiB,GAAG,gBAAgB,EAAE,CAAC;IAC7C,MAAM,sBAAsB,GAAG,oBAAoB,EAAE,CAAC;IAEtD,MAAM,mBAAmB,GAAG,kBAAkB,CAAC,qBAAqB,CAAC,CAAC;IAEtE,MAAM,uBAAuB,GAAG,iBAAiB,CAAC,mBAAmB,IAAI,iBAAiB,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;IAE7G,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,aAAa,GAAG,EAAE,EAAE,GAAG,YAAY,IAAI,EAAE,CAAC;IACnE,MAAM,EAAE,YAAY,GAAG,IAAI,EAAE,GAAG,cAAc,IAAI,EAAE,CAAC;IAErD,MAAM,WAAW,GAAG,CAAC,GAA4C,EAAE,EAAE;QACpE,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,MAAM,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;QAC3C,OAAO;YACN,GAAG,EAAE,GAAG,KAAK,SAAS,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ;YACrD,KAAK;SACL,CAAC;IACH,CAAC,CAAC;IAEF,MAAM,QAAQ,GAAG,WAAW,CAAC,uBAAuB,CAAC,CAAC;IACtD,MAAM,UAAU,GAAG,WAAW,CAAC,aAAa,CAAC,CAAC;IAE9C,MAAM,uBAAuB,GAAG,WAAW,CAAC,GAAG,EAAE;QAChD,iBAAiB,CAAC,MAAM,CAAC,SAAS,EAAE;YACnC,SAAS,EAAE,GAAG,EAAE,CAAC,sBAAsB,CAAC,GAAG,CAAC;SAC5C,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,sBAAsB,EAAE,iBAAiB,CAAC,CAAC,CAAC;IAEhD,SAAS,CAAC,GAAG,EAAE;QACd,IAAI,mBAAmB,IAAI,iBAAiB,CAAC,MAAM,EAAE,CAAC;YACrD,uBAAuB,EAAE,CAAC;YAC1B,OAAO;QACR,CAAC;QAED,IAAI,mBAAmB,EAAE,CAAC;YACzB,MAAM,CAAC,QAAQ,CACd;gBACC,IAAI,EAAE,MAAM,CAAC,YAAY,EAAG;gBAC5B,MAAM,EAAE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,mBAAmB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,GAAG,KAAK,qBAAqB,CAAC,CAAC;aACzH,EACD;gBACC,OAAO,EAAE,IAAI;aACb,CACD,CAAC;QACH,CAAC;IACF,CAAC,EAAE,CAAC,uBAAuB,EAAE,MAAM,EAAE,mBAAmB,EAAE,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC;IAErF,MAAM,aAAa,GAAG,gBAAgB,EAAE,CAAC;IAEzC,OAAO,CACN,CAAC,IAAI,CAAC,EAAE,CAAC,MAAM,CACd;GAAA,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CACpC;IAAA,CAAC,WAAW,CACX;KAAA,CAAC,YAAY,IAAI,CAChB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC,uBAAuB,EAAE,CAAC,CACpG;OAAA,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAC1B;MAAA,EAAE,MAAM,CAAC,CACT,CACD;KAAA,CAAC,aAAa,CAAC,MAAM,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,OAAO,CAC5G;MAAA,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,SAAS,CAAC,CACrD;KAAA,EAAE,aAAa,CAChB;IAAA,EAAE,WAAW,CACd;GAAA,EAAE,UAAU,CACZ;GAAA,CAAC,+BAA+B,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CACtC;IAAA,CAAC,CAAC,uBAAuB,IAAI,iBAAiB,CAAC,SAAS,CAAC,IAAI,CAC5D,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,mCAAmC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACxE;MAAA,CAAC,CAAC,CAAC,6BAA6B,CAAC,CAClC;KAAA,EAAE,OAAO,CAAC,CACV,CACD;IAAA,CAAC,yBAAyB,CAAC,AAAD,EAC1B;IAAA,CAAC,gBAAgB,IAAI,CAAC,wBAAwB,CAAC,AAAD,EAAG,CACjD;IAAA,CAAC,CAAC,gBAAgB,IAAI,CACrB,EACC;MAAA,CAAC,WAAW,IAAI,CACf,CAAC,SAAS,CACT;QAAA,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CACnC;SAAA,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,GAAG,CAClD;QAAA,EAAE,SAAS,CAAC,IAAI,CACjB;OAAA,EAAE,SAAS,CAAC,CACZ,CACD;MAAA,CAAC,GAAG,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,SAAS,CACvE;OAAA,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACV;QAAA,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAC7B;SAAA,CAAC,OAAO,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,aAAa,CAAC,CAAC,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC,EAAG,CAC7G;SAAA,CAAC,CAAC,OAAO,IAAI,CAAC,iBAAiB,CAAC,AAAD,EAAG,CACnC;QAAA,EAAE,IAAI,CAAC,IAAI,CACX;QAAA,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAC7B;SAAA,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC,CAAC,YAAY,CAAC,CAAC,YAAY,CAAC,EACxE;QAAA,EAAE,IAAI,CAAC,IAAI,CAEX;;QAAA,CAAC,UAAU,CAAC,KAAK,KAAK,SAAS,IAAI,CAClC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAC7B;UAAA,CAAC,UAAU,CAAC,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,CAC9B,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,sBAAsB,CAAC,CAAC,YAAY,EAAE,KAAK,CAAC,EAAG,CACxG,CAAC,CAAC,CAAC,CACH,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,UAAU,EAAE,KAAK,CAAC,EAAG,CAClD,CACF;SAAA,EAAE,IAAI,CAAC,IAAI,CAAC,CACZ,CAED;;QAAA,CAAC,QAAQ,CAAC,KAAK,KAAK,SAAS,IAAI,CAChC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAC7B;UAAA,CAAC,QAAQ,CAAC,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,CAC5B,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,sBAAsB,CAAC,CAAC,YAAY,EAAE,KAAK,CAAC,EAAG,CAClG,CAAC,CAAC,CAAC,CACH,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAG,CAC3C,CACF;SAAA,EAAE,IAAI,CAAC,IAAI,CAAC,CACZ,CAED;;QAAA,CAAC,CAAC,OAAO,IAAI,CACZ,EACC;UAAA,CAAC,MAAM,EAAE,eAAe,KAAK,SAAS,IAAI,CACzC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAC7B;YAAA,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC,oBAAoB,CAAC,CAAC,MAAM,CAAC,eAAe,CAAC,EACpG;WAAA,EAAE,IAAI,CAAC,IAAI,CAAC,CACZ,CAED;;UAAA,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAC7B;WAAA,CAAC,kBAAkB,CAAC,AAAD,EACpB;UAAA,EAAE,IAAI,CAAC,IAAI,CACX;UAAA,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAC7B;WAAA,CAAC,sBAAsB,CAAC,AAAD,EACxB;UAAA,EAAE,IAAI,CAAC,IAAI,CACZ;SAAA,GAAG,CACH,CACF;OAAA,EAAE,IAAI,CACN;OAAA,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC,CAAC,YAAY,CAAC,CAAC,YAAY,CAAC,CAC1E;QAAA,CAAC,OAAO,CAAC,YAAY,EAAE,OAAO,EAAE,WAAW,CAAC,WAAW,CAAC,IAAI,CAC3D,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,CAChG;UAAA,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAC1B;SAAA,EAAE,MAAM,CAAC,CACT,CACF;OAAA,EAAE,gBAAgB,CACnB;MAAA,EAAE,GAAG,CACN;KAAA,GAAG,CACH,CACF;GAAA,EAAE,+BAA+B,CAClC;EAAA,EAAE,IAAI,CAAC,CACP,CAAC;AACH,CAAC,CAAC;AAEF,eAAe,IAAI,CAAC,gBAAgB,CAAC,CAAC","sourcesContent":["import { Accordion, Box, Button, ButtonGroup, Callout, Grid } from '@rocket.chat/fuselage';\nimport { useDebouncedValue, useSessionStorage } from '@rocket.chat/fuselage-hooks';\nimport { useSearchParameter, useRouter } from '@rocket.chat/ui-contexts';\nimport { t } from 'i18next';\nimport React, { memo, useCallback, useEffect } from 'react';\nimport tinykeys from 'tinykeys';\n\nimport { Page, PageHeader, PageScrollableContentWithShadow } from '../../../components/Page';\nimport { useIsEnterprise } from '../../../hooks/useIsEnterprise';\nimport { useInvalidateLicense, useLicense } from '../../../hooks/useLicense';\nimport { useRegistrationStatus } from '../../../hooks/useRegistrationStatus';\nimport { SubscriptionCalloutLimits } from './SubscriptionCalloutLimits';\nimport SubscriptionPageSkeleton from './SubscriptionPageSkeleton';\nimport UpgradeButton from './components/UpgradeButton';\nimport UpgradeToGetMore from './components/UpgradeToGetMore';\nimport ActiveSessionsCard from './components/cards/ActiveSessionsCard';\nimport ActiveSessionsPeakCard from './components/cards/ActiveSessionsPeakCard';\nimport AppsUsageCard from './components/cards/AppsUsageCard';\nimport CountMACCard from './components/cards/CountMACCard';\nimport CountSeatsCard from './components/cards/CountSeatsCard';\nimport FeaturesCard from './components/cards/FeaturesCard';\nimport MACCard from './components/cards/MACCard';\nimport PlanCard from './components/cards/PlanCard';\nimport PlanCardCommunity from './components/cards/PlanCard/PlanCardCommunity';\nimport SeatsCard from './components/cards/SeatsCard';\nimport { useRemoveLicense } from './hooks/useRemoveLicense';\nimport { useWorkspaceSync } from './hooks/useWorkspaceSync';\n\nfunction useShowLicense() {\n\tconst [showLicenseTab, setShowLicenseTab] = useSessionStorage('admin:showLicenseTab', false);\n\n\tuseEffect(() => {\n\t\tconst unsubscribe = tinykeys(window, {\n\t\t\t'ArrowUp ArrowUp ArrowDown ArrowDown ArrowLeft ArrowRight ArrowLeft ArrowRight b a': () => {\n\t\t\t\tsetShowLicenseTab((showLicenseTab) => !showLicenseTab);\n\t\t\t},\n\t\t});\n\t\treturn () => {\n\t\t\tunsubscribe();\n\t\t};\n\t});\n\n\treturn showLicenseTab;\n}\n\nconst SubscriptionPage = () => {\n\tconst showLicense = useShowLicense();\n\tconst router = useRouter();\n\tconst { data: enterpriseData } = useIsEnterprise();\n\tconst { isRegistered } = useRegistrationStatus();\n\tconst { data: licensesData, isLoading: isLicenseLoading } = useLicense({ loadValues: true });\n\tconst syncLicenseUpdate = useWorkspaceSync();\n\tconst invalidateLicenseQuery = useInvalidateLicense();\n\n\tconst subscriptionSuccess = useSearchParameter('subscriptionSuccess');\n\n\tconst showSubscriptionCallout = useDebouncedValue(subscriptionSuccess || syncLicenseUpdate.isLoading, 10000);\n\n\tconst { license, limits, activeModules = [] } = licensesData || {};\n\tconst { isEnterprise = true } = enterpriseData || {};\n\n\tconst getKeyLimit = (key: 'monthlyActiveContacts' | 'activeUsers') => {\n\t\tconst { max, value } = limits?.[key] || {};\n\t\treturn {\n\t\t\tmax: max !== undefined && max !== -1 ? max : Infinity,\n\t\t\tvalue,\n\t\t};\n\t};\n\n\tconst macLimit = getKeyLimit('monthlyActiveContacts');\n\tconst seatsLimit = getKeyLimit('activeUsers');\n\n\tconst handleSyncLicenseUpdate = useCallback(() => {\n\t\tsyncLicenseUpdate.mutate(undefined, {\n\t\t\tonSuccess: () => invalidateLicenseQuery(100),\n\t\t});\n\t}, [invalidateLicenseQuery, syncLicenseUpdate]);\n\n\tuseEffect(() => {\n\t\tif (subscriptionSuccess && syncLicenseUpdate.isIdle) {\n\t\t\thandleSyncLicenseUpdate();\n\t\t\treturn;\n\t\t}\n\n\t\tif (subscriptionSuccess) {\n\t\t\trouter.navigate(\n\t\t\t\t{\n\t\t\t\t\tname: router.getRouteName()!,\n\t\t\t\t\tparams: Object.fromEntries(Object.entries(router.getSearchParameters()).filter(([key]) => key !== 'subscriptionSuccess')),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\treplace: true,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t}, [handleSyncLicenseUpdate, router, subscriptionSuccess, syncLicenseUpdate.isIdle]);\n\n\tconst removeLicense = useRemoveLicense();\n\n\treturn (\n\t\t<Page bg='tint'>\n\t\t\t<PageHeader title={t('Subscription')}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t{isRegistered && (\n\t\t\t\t\t\t<Button loading={syncLicenseUpdate.isLoading} icon='reload' onClick={() => handleSyncLicenseUpdate()}>\n\t\t\t\t\t\t\t{t('Sync_license_update')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t<UpgradeButton target='subscription_header' action={isEnterprise ? 'manage_subscription' : 'upgrade'} primary>\n\t\t\t\t\t\t{t(isEnterprise ? 'Manage_subscription' : 'Upgrade')}\n\t\t\t\t\t</UpgradeButton>\n\t\t\t\t</ButtonGroup>\n\t\t\t</PageHeader>\n\t\t\t<PageScrollableContentWithShadow p={16}>\n\t\t\t\t{(showSubscriptionCallout || syncLicenseUpdate.isLoading) && (\n\t\t\t\t\t<Callout type='info' title={t('Sync_license_update_Callout_Title')} m={8}>\n\t\t\t\t\t\t{t('Sync_license_update_Callout')}\n\t\t\t\t\t</Callout>\n\t\t\t\t)}\n\t\t\t\t<SubscriptionCalloutLimits />\n\t\t\t\t{isLicenseLoading && <SubscriptionPageSkeleton />}\n\t\t\t\t{!isLicenseLoading && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{showLicense && (\n\t\t\t\t\t\t\t<Accordion>\n\t\t\t\t\t\t\t\t<Accordion.Item title={t('License')}>\n\t\t\t\t\t\t\t\t\t<pre>{JSON.stringify(licensesData, null, 2)}</pre>\n\t\t\t\t\t\t\t\t</Accordion.Item>\n\t\t\t\t\t\t\t</Accordion>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Box marginBlock='none' marginInline='auto' width='full' color='default'>\n\t\t\t\t\t\t\t<Grid m={0}>\n\t\t\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t{license && <PlanCard licenseInformation={license.information} licenseLimits={{ activeUsers: seatsLimit }} />}\n\t\t\t\t\t\t\t\t\t{!license && <PlanCardCommunity />}\n\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t<Grid.Item lg={8} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t<FeaturesCard activeModules={activeModules} isEnterprise={isEnterprise} />\n\t\t\t\t\t\t\t\t</Grid.Item>\n\n\t\t\t\t\t\t\t\t{seatsLimit.value !== undefined && (\n\t\t\t\t\t\t\t\t\t<Grid.Item lg={6} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t{seatsLimit.max !== Infinity ? (\n\t\t\t\t\t\t\t\t\t\t\t<SeatsCard value={seatsLimit.value} max={seatsLimit.max} hideManageSubscription={licensesData?.trial} />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<CountSeatsCard activeUsers={seatsLimit?.value} />\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{macLimit.value !== undefined && (\n\t\t\t\t\t\t\t\t\t<Grid.Item lg={6} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t{macLimit.max !== Infinity ? (\n\t\t\t\t\t\t\t\t\t\t\t<MACCard max={macLimit.max} value={macLimit.value} hideManageSubscription={licensesData?.trial} />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<CountMACCard macsCount={macLimit.value} />\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{!license && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t{limits?.marketplaceApps !== undefined && (\n\t\t\t\t\t\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t\t\t<AppsUsageCard privateAppsLimit={limits?.privateApps} marketplaceAppsLimit={limits.marketplaceApps} />\n\t\t\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t\t<ActiveSessionsCard />\n\t\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t\t<ActiveSessionsPeakCard />\n\t\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<UpgradeToGetMore activeModules={activeModules} isEnterprise={isEnterprise}>\n\t\t\t\t\t\t\t\t{Boolean(licensesData?.license?.information.cancellable) && (\n\t\t\t\t\t\t\t\t\t<Button loading={removeLicense.isLoading} secondary danger onClick={() => removeLicense.mutate()}>\n\t\t\t\t\t\t\t\t\t\t{t('Cancel_subscription')}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</UpgradeToGetMore>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</PageScrollableContentWithShadow>\n\t\t</Page>\n\t);\n};\n\nexport default memo(SubscriptionPage);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/subscription/SubscriptionPage.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/admin/subscription/SubscriptionPage.tsx","inputSourceMap":{"version":3,"file":"client/views/admin/subscription/SubscriptionPage.tsx","sourceRoot":"","sources":["client/views/admin/subscription/SubscriptionPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Accordion, Box, Button, ButtonGroup, Callout, Grid } from '@rocket.chat/fuselage';\nimport { useDebouncedValue, useSessionStorage } from '@rocket.chat/fuselage-hooks';\nimport { useSearchParameter, useRouter } from '@rocket.chat/ui-contexts';\nimport { t } from 'i18next';\nimport React, { memo, useCallback, useEffect } from 'react';\nimport tinykeys from 'tinykeys';\n\nimport { Page, PageHeader, PageScrollableContentWithShadow } from '../../../components/Page';\nimport { useIsEnterprise } from '../../../hooks/useIsEnterprise';\nimport { useInvalidateLicense, useLicense } from '../../../hooks/useLicense';\nimport { useRegistrationStatus } from '../../../hooks/useRegistrationStatus';\nimport { SubscriptionCalloutLimits } from './SubscriptionCalloutLimits';\nimport SubscriptionPageSkeleton from './SubscriptionPageSkeleton';\nimport UpgradeButton from './components/UpgradeButton';\nimport UpgradeToGetMore from './components/UpgradeToGetMore';\nimport ActiveSessionsCard from './components/cards/ActiveSessionsCard';\nimport ActiveSessionsPeakCard from './components/cards/ActiveSessionsPeakCard';\nimport AppsUsageCard from './components/cards/AppsUsageCard';\nimport CountMACCard from './components/cards/CountMACCard';\nimport CountSeatsCard from './components/cards/CountSeatsCard';\nimport FeaturesCard from './components/cards/FeaturesCard';\nimport MACCard from './components/cards/MACCard';\nimport PlanCard from './components/cards/PlanCard';\nimport PlanCardCommunity from './components/cards/PlanCard/PlanCardCommunity';\nimport SeatsCard from './components/cards/SeatsCard';\nimport { useRemoveLicense } from './hooks/useRemoveLicense';\nimport { useWorkspaceSync } from './hooks/useWorkspaceSync';\n\nfunction useShowLicense() {\n\tconst [showLicenseTab, setShowLicenseTab] = useSessionStorage('admin:showLicenseTab', false);\n\n\tuseEffect(() => {\n\t\tconst unsubscribe = tinykeys(window, {\n\t\t\t'ArrowUp ArrowUp ArrowDown ArrowDown ArrowLeft ArrowRight ArrowLeft ArrowRight b a': () => {\n\t\t\t\tsetShowLicenseTab((showLicenseTab) => !showLicenseTab);\n\t\t\t},\n\t\t});\n\t\treturn () => {\n\t\t\tunsubscribe();\n\t\t};\n\t});\n\n\treturn showLicenseTab;\n}\n\nconst SubscriptionPage = () => {\n\tconst showLicense = useShowLicense();\n\tconst router = useRouter();\n\tconst { data: enterpriseData } = useIsEnterprise();\n\tconst { isRegistered } = useRegistrationStatus();\n\tconst { data: licensesData, isLoading: isLicenseLoading } = useLicense({ loadValues: true });\n\tconst syncLicenseUpdate = useWorkspaceSync();\n\tconst invalidateLicenseQuery = useInvalidateLicense();\n\n\tconst subscriptionSuccess = useSearchParameter('subscriptionSuccess');\n\n\tconst showSubscriptionCallout = useDebouncedValue(subscriptionSuccess || syncLicenseUpdate.isLoading, 10000);\n\n\tconst { license, limits, activeModules = [] } = licensesData || {};\n\tconst { isEnterprise = true } = enterpriseData || {};\n\n\tconst getKeyLimit = (key: 'monthlyActiveContacts' | 'activeUsers') => {\n\t\tconst { max, value } = limits?.[key] || {};\n\t\treturn {\n\t\t\tmax: max !== undefined && max !== -1 ? max : Infinity,\n\t\t\tvalue,\n\t\t};\n\t};\n\n\tconst macLimit = getKeyLimit('monthlyActiveContacts');\n\tconst seatsLimit = getKeyLimit('activeUsers');\n\n\tconst handleSyncLicenseUpdate = useCallback(() => {\n\t\tsyncLicenseUpdate.mutate(undefined, {\n\t\t\tonSuccess: () => invalidateLicenseQuery(100),\n\t\t});\n\t}, [invalidateLicenseQuery, syncLicenseUpdate]);\n\n\tuseEffect(() => {\n\t\tif (subscriptionSuccess && syncLicenseUpdate.isIdle) {\n\t\t\thandleSyncLicenseUpdate();\n\t\t\treturn;\n\t\t}\n\n\t\tif (subscriptionSuccess) {\n\t\t\trouter.navigate(\n\t\t\t\t{\n\t\t\t\t\tname: router.getRouteName()!,\n\t\t\t\t\tparams: Object.fromEntries(Object.entries(router.getSearchParameters()).filter(([key]) => key !== 'subscriptionSuccess')),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\treplace: true,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t}, [handleSyncLicenseUpdate, router, subscriptionSuccess, syncLicenseUpdate.isIdle]);\n\n\tconst removeLicense = useRemoveLicense();\n\n\treturn (\n\t\t<Page bg='tint'>\n\t\t\t<PageHeader title={t('Subscription')}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t{isRegistered && (\n\t\t\t\t\t\t<Button loading={syncLicenseUpdate.isLoading} icon='reload' onClick={() => handleSyncLicenseUpdate()}>\n\t\t\t\t\t\t\t{t('Sync_license_update')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t<UpgradeButton target='subscription_header' action={isEnterprise ? 'manage_subscription' : 'upgrade'} primary>\n\t\t\t\t\t\t{t(isEnterprise ? 'Manage_subscription' : 'Upgrade')}\n\t\t\t\t\t</UpgradeButton>\n\t\t\t\t</ButtonGroup>\n\t\t\t</PageHeader>\n\t\t\t<PageScrollableContentWithShadow p={16}>\n\t\t\t\t{(showSubscriptionCallout || syncLicenseUpdate.isLoading) && (\n\t\t\t\t\t<Callout type='info' title={t('Sync_license_update_Callout_Title')} m={8}>\n\t\t\t\t\t\t{t('Sync_license_update_Callout')}\n\t\t\t\t\t</Callout>\n\t\t\t\t)}\n\t\t\t\t<SubscriptionCalloutLimits />\n\t\t\t\t{isLicenseLoading && <SubscriptionPageSkeleton />}\n\t\t\t\t{!isLicenseLoading && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{showLicense && (\n\t\t\t\t\t\t\t<Accordion>\n\t\t\t\t\t\t\t\t<Accordion.Item title={t('License')}>\n\t\t\t\t\t\t\t\t\t<pre>{JSON.stringify(licensesData, null, 2)}</pre>\n\t\t\t\t\t\t\t\t</Accordion.Item>\n\t\t\t\t\t\t\t</Accordion>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Box marginBlock='none' marginInline='auto' width='full' color='default'>\n\t\t\t\t\t\t\t<Grid m={0}>\n\t\t\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t{license && <PlanCard licenseInformation={license.information} licenseLimits={{ activeUsers: seatsLimit }} />}\n\t\t\t\t\t\t\t\t\t{!license && <PlanCardCommunity />}\n\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t<Grid.Item lg={8} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t<FeaturesCard activeModules={activeModules} isEnterprise={isEnterprise} />\n\t\t\t\t\t\t\t\t</Grid.Item>\n\n\t\t\t\t\t\t\t\t{seatsLimit.value !== undefined && (\n\t\t\t\t\t\t\t\t\t<Grid.Item lg={6} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t{seatsLimit.max !== Infinity ? (\n\t\t\t\t\t\t\t\t\t\t\t<SeatsCard value={seatsLimit.value} max={seatsLimit.max} hideManageSubscription={licensesData?.trial} />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<CountSeatsCard activeUsers={seatsLimit?.value} />\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{macLimit.value !== undefined && (\n\t\t\t\t\t\t\t\t\t<Grid.Item lg={6} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t{macLimit.max !== Infinity ? (\n\t\t\t\t\t\t\t\t\t\t\t<MACCard max={macLimit.max} value={macLimit.value} hideManageSubscription={licensesData?.trial} />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<CountMACCard macsCount={macLimit.value} />\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{!license && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t{limits?.marketplaceApps !== undefined && (\n\t\t\t\t\t\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t\t\t<AppsUsageCard privateAppsLimit={limits?.privateApps} marketplaceAppsLimit={limits.marketplaceApps} />\n\t\t\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t\t<ActiveSessionsCard />\n\t\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t\t<ActiveSessionsPeakCard />\n\t\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<UpgradeToGetMore activeModules={activeModules} isEnterprise={isEnterprise}>\n\t\t\t\t\t\t\t\t{Boolean(licensesData?.license?.information.cancellable) && (\n\t\t\t\t\t\t\t\t\t<Button loading={removeLicense.isLoading} secondary danger onClick={() => removeLicense.mutate()}>\n\t\t\t\t\t\t\t\t\t\t{t('Cancel_subscription')}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</UpgradeToGetMore>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</PageScrollableContentWithShadow>\n\t\t</Page>\n\t);\n};\n\nexport default memo(SubscriptionPage);\n"]}}},"code":"let Accordion, Box, Button, ButtonGroup, Callout, Grid;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Accordion(v) {\n    Accordion = v;\n  },\n  Box(v) {\n    Box = v;\n  },\n  Button(v) {\n    Button = v;\n  },\n  ButtonGroup(v) {\n    ButtonGroup = v;\n  },\n  Callout(v) {\n    Callout = v;\n  },\n  Grid(v) {\n    Grid = v;\n  }\n}, 0);\nlet useDebouncedValue, useSessionStorage;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useDebouncedValue(v) {\n    useDebouncedValue = v;\n  },\n  useSessionStorage(v) {\n    useSessionStorage = v;\n  }\n}, 1);\nlet useSearchParameter, useRouter;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useSearchParameter(v) {\n    useSearchParameter = v;\n  },\n  useRouter(v) {\n    useRouter = v;\n  }\n}, 2);\nlet t;\nmodule.link(\"i18next\", {\n  t(v) {\n    t = v;\n  }\n}, 3);\nlet React, memo, useCallback, useEffect;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  memo(v) {\n    memo = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  }\n}, 4);\nlet tinykeys;\nmodule.link(\"tinykeys\", {\n  default(v) {\n    tinykeys = v;\n  }\n}, 5);\nlet Page, PageHeader, PageScrollableContentWithShadow;\nmodule.link(\"../../../components/Page\", {\n  Page(v) {\n    Page = v;\n  },\n  PageHeader(v) {\n    PageHeader = v;\n  },\n  PageScrollableContentWithShadow(v) {\n    PageScrollableContentWithShadow = v;\n  }\n}, 6);\nlet useIsEnterprise;\nmodule.link(\"../../../hooks/useIsEnterprise\", {\n  useIsEnterprise(v) {\n    useIsEnterprise = v;\n  }\n}, 7);\nlet useInvalidateLicense, useLicense;\nmodule.link(\"../../../hooks/useLicense\", {\n  useInvalidateLicense(v) {\n    useInvalidateLicense = v;\n  },\n  useLicense(v) {\n    useLicense = v;\n  }\n}, 8);\nlet useRegistrationStatus;\nmodule.link(\"../../../hooks/useRegistrationStatus\", {\n  useRegistrationStatus(v) {\n    useRegistrationStatus = v;\n  }\n}, 9);\nlet SubscriptionCalloutLimits;\nmodule.link(\"./SubscriptionCalloutLimits\", {\n  SubscriptionCalloutLimits(v) {\n    SubscriptionCalloutLimits = v;\n  }\n}, 10);\nlet SubscriptionPageSkeleton;\nmodule.link(\"./SubscriptionPageSkeleton\", {\n  default(v) {\n    SubscriptionPageSkeleton = v;\n  }\n}, 11);\nlet UpgradeButton;\nmodule.link(\"./components/UpgradeButton\", {\n  default(v) {\n    UpgradeButton = v;\n  }\n}, 12);\nlet UpgradeToGetMore;\nmodule.link(\"./components/UpgradeToGetMore\", {\n  default(v) {\n    UpgradeToGetMore = v;\n  }\n}, 13);\nlet ActiveSessionsCard;\nmodule.link(\"./components/cards/ActiveSessionsCard\", {\n  default(v) {\n    ActiveSessionsCard = v;\n  }\n}, 14);\nlet ActiveSessionsPeakCard;\nmodule.link(\"./components/cards/ActiveSessionsPeakCard\", {\n  default(v) {\n    ActiveSessionsPeakCard = v;\n  }\n}, 15);\nlet AppsUsageCard;\nmodule.link(\"./components/cards/AppsUsageCard\", {\n  default(v) {\n    AppsUsageCard = v;\n  }\n}, 16);\nlet CountMACCard;\nmodule.link(\"./components/cards/CountMACCard\", {\n  default(v) {\n    CountMACCard = v;\n  }\n}, 17);\nlet CountSeatsCard;\nmodule.link(\"./components/cards/CountSeatsCard\", {\n  default(v) {\n    CountSeatsCard = v;\n  }\n}, 18);\nlet FeaturesCard;\nmodule.link(\"./components/cards/FeaturesCard\", {\n  default(v) {\n    FeaturesCard = v;\n  }\n}, 19);\nlet MACCard;\nmodule.link(\"./components/cards/MACCard\", {\n  default(v) {\n    MACCard = v;\n  }\n}, 20);\nlet PlanCard;\nmodule.link(\"./components/cards/PlanCard\", {\n  default(v) {\n    PlanCard = v;\n  }\n}, 21);\nlet PlanCardCommunity;\nmodule.link(\"./components/cards/PlanCard/PlanCardCommunity\", {\n  default(v) {\n    PlanCardCommunity = v;\n  }\n}, 22);\nlet SeatsCard;\nmodule.link(\"./components/cards/SeatsCard\", {\n  default(v) {\n    SeatsCard = v;\n  }\n}, 23);\nlet useRemoveLicense;\nmodule.link(\"./hooks/useRemoveLicense\", {\n  useRemoveLicense(v) {\n    useRemoveLicense = v;\n  }\n}, 24);\nlet useWorkspaceSync;\nmodule.link(\"./hooks/useWorkspaceSync\", {\n  useWorkspaceSync(v) {\n    useWorkspaceSync = v;\n  }\n}, 25);\nfunction useShowLicense() {\n  const [showLicenseTab, setShowLicenseTab] = useSessionStorage('admin:showLicenseTab', false);\n  useEffect(() => {\n    const unsubscribe = tinykeys(window, {\n      'ArrowUp ArrowUp ArrowDown ArrowDown ArrowLeft ArrowRight ArrowLeft ArrowRight b a': () => {\n        setShowLicenseTab(showLicenseTab => !showLicenseTab);\n      }\n    });\n    return () => {\n      unsubscribe();\n    };\n  });\n  return showLicenseTab;\n}\nconst SubscriptionPage = () => {\n  var _licensesData$license;\n  const showLicense = useShowLicense();\n  const router = useRouter();\n  const {\n    data: enterpriseData\n  } = useIsEnterprise();\n  const {\n    isRegistered\n  } = useRegistrationStatus();\n  const {\n    data: licensesData,\n    isLoading: isLicenseLoading\n  } = useLicense({\n    loadValues: true\n  });\n  const syncLicenseUpdate = useWorkspaceSync();\n  const invalidateLicenseQuery = useInvalidateLicense();\n  const subscriptionSuccess = useSearchParameter('subscriptionSuccess');\n  const showSubscriptionCallout = useDebouncedValue(subscriptionSuccess || syncLicenseUpdate.isLoading, 10000);\n  const {\n    license,\n    limits,\n    activeModules = []\n  } = licensesData || {};\n  const {\n    isEnterprise = true\n  } = enterpriseData || {};\n  const getKeyLimit = key => {\n    const {\n      max,\n      value\n    } = (limits === null || limits === void 0 ? void 0 : limits[key]) || {};\n    return {\n      max: max !== undefined && max !== -1 ? max : Infinity,\n      value\n    };\n  };\n  const macLimit = getKeyLimit('monthlyActiveContacts');\n  const seatsLimit = getKeyLimit('activeUsers');\n  const handleSyncLicenseUpdate = useCallback(() => {\n    syncLicenseUpdate.mutate(undefined, {\n      onSuccess: () => invalidateLicenseQuery(100)\n    });\n  }, [invalidateLicenseQuery, syncLicenseUpdate]);\n  useEffect(() => {\n    if (subscriptionSuccess && syncLicenseUpdate.isIdle) {\n      handleSyncLicenseUpdate();\n      return;\n    }\n    if (subscriptionSuccess) {\n      router.navigate({\n        name: router.getRouteName(),\n        params: Object.fromEntries(Object.entries(router.getSearchParameters()).filter(_ref => {\n          let [key] = _ref;\n          return key !== 'subscriptionSuccess';\n        }))\n      }, {\n        replace: true\n      });\n    }\n  }, [handleSyncLicenseUpdate, router, subscriptionSuccess, syncLicenseUpdate.isIdle]);\n  const removeLicense = useRemoveLicense();\n  return /*#__PURE__*/React.createElement(Page, {\n    bg: \"tint\"\n  }, /*#__PURE__*/React.createElement(PageHeader, {\n    title: t('Subscription')\n  }, /*#__PURE__*/React.createElement(ButtonGroup, null, isRegistered && /*#__PURE__*/React.createElement(Button, {\n    loading: syncLicenseUpdate.isLoading,\n    icon: \"reload\",\n    onClick: () => handleSyncLicenseUpdate()\n  }, t('Sync_license_update')), /*#__PURE__*/React.createElement(UpgradeButton, {\n    target: \"subscription_header\",\n    action: isEnterprise ? 'manage_subscription' : 'upgrade',\n    primary: true\n  }, t(isEnterprise ? 'Manage_subscription' : 'Upgrade')))), /*#__PURE__*/React.createElement(PageScrollableContentWithShadow, {\n    p: 16\n  }, (showSubscriptionCallout || syncLicenseUpdate.isLoading) && /*#__PURE__*/React.createElement(Callout, {\n    type: \"info\",\n    title: t('Sync_license_update_Callout_Title'),\n    m: 8\n  }, t('Sync_license_update_Callout')), /*#__PURE__*/React.createElement(SubscriptionCalloutLimits, null), isLicenseLoading && /*#__PURE__*/React.createElement(SubscriptionPageSkeleton, null), !isLicenseLoading && /*#__PURE__*/React.createElement(React.Fragment, null, showLicense && /*#__PURE__*/React.createElement(Accordion, null, /*#__PURE__*/React.createElement(Accordion.Item, {\n    title: t('License')\n  }, /*#__PURE__*/React.createElement(\"pre\", null, JSON.stringify(licensesData, null, 2)))), /*#__PURE__*/React.createElement(Box, {\n    marginBlock: \"none\",\n    marginInline: \"auto\",\n    width: \"full\",\n    color: \"default\"\n  }, /*#__PURE__*/React.createElement(Grid, {\n    m: 0\n  }, /*#__PURE__*/React.createElement(Grid.Item, {\n    lg: 4,\n    xs: 4,\n    p: 8\n  }, license && /*#__PURE__*/React.createElement(PlanCard, {\n    licenseInformation: license.information,\n    licenseLimits: {\n      activeUsers: seatsLimit\n    }\n  }), !license && /*#__PURE__*/React.createElement(PlanCardCommunity, null)), /*#__PURE__*/React.createElement(Grid.Item, {\n    lg: 8,\n    xs: 4,\n    p: 8\n  }, /*#__PURE__*/React.createElement(FeaturesCard, {\n    activeModules: activeModules,\n    isEnterprise: isEnterprise\n  })), seatsLimit.value !== undefined && /*#__PURE__*/React.createElement(Grid.Item, {\n    lg: 6,\n    xs: 4,\n    p: 8\n  }, seatsLimit.max !== Infinity ? /*#__PURE__*/React.createElement(SeatsCard, {\n    value: seatsLimit.value,\n    max: seatsLimit.max,\n    hideManageSubscription: licensesData === null || licensesData === void 0 ? void 0 : licensesData.trial\n  }) : /*#__PURE__*/React.createElement(CountSeatsCard, {\n    activeUsers: seatsLimit === null || seatsLimit === void 0 ? void 0 : seatsLimit.value\n  })), macLimit.value !== undefined && /*#__PURE__*/React.createElement(Grid.Item, {\n    lg: 6,\n    xs: 4,\n    p: 8\n  }, macLimit.max !== Infinity ? /*#__PURE__*/React.createElement(MACCard, {\n    max: macLimit.max,\n    value: macLimit.value,\n    hideManageSubscription: licensesData === null || licensesData === void 0 ? void 0 : licensesData.trial\n  }) : /*#__PURE__*/React.createElement(CountMACCard, {\n    macsCount: macLimit.value\n  })), !license && /*#__PURE__*/React.createElement(React.Fragment, null, (limits === null || limits === void 0 ? void 0 : limits.marketplaceApps) !== undefined && /*#__PURE__*/React.createElement(Grid.Item, {\n    lg: 4,\n    xs: 4,\n    p: 8\n  }, /*#__PURE__*/React.createElement(AppsUsageCard, {\n    privateAppsLimit: limits === null || limits === void 0 ? void 0 : limits.privateApps,\n    marketplaceAppsLimit: limits.marketplaceApps\n  })), /*#__PURE__*/React.createElement(Grid.Item, {\n    lg: 4,\n    xs: 4,\n    p: 8\n  }, /*#__PURE__*/React.createElement(ActiveSessionsCard, null)), /*#__PURE__*/React.createElement(Grid.Item, {\n    lg: 4,\n    xs: 4,\n    p: 8\n  }, /*#__PURE__*/React.createElement(ActiveSessionsPeakCard, null)))), /*#__PURE__*/React.createElement(UpgradeToGetMore, {\n    activeModules: activeModules,\n    isEnterprise: isEnterprise\n  }, Boolean(licensesData === null || licensesData === void 0 ? void 0 : (_licensesData$license = licensesData.license) === null || _licensesData$license === void 0 ? void 0 : _licensesData$license.information.cancellable) && /*#__PURE__*/React.createElement(Button, {\n    loading: removeLicense.isLoading,\n    secondary: true,\n    danger: true,\n    onClick: () => removeLicense.mutate()\n  }, t('Cancel_subscription')))))));\n};\nmodule.exportDefault( /*#__PURE__*/memo(SubscriptionPage));","map":{"version":3,"names":["Accordion","Box","Button","ButtonGroup","Callout","Grid","module","link","v","useDebouncedValue","useSessionStorage","useSearchParameter","useRouter","t","React","memo","useCallback","useEffect","default","tinykeys","Page","PageHeader","PageScrollableContentWithShadow","useIsEnterprise","useInvalidateLicense","useLicense","useRegistrationStatus","SubscriptionCalloutLimits","SubscriptionPageSkeleton","UpgradeButton","UpgradeToGetMore","ActiveSessionsCard","ActiveSessionsPeakCard","AppsUsageCard","CountMACCard","CountSeatsCard","FeaturesCard","MACCard","PlanCard","PlanCardCommunity","SeatsCard","useRemoveLicense","useWorkspaceSync","useShowLicense","showLicenseTab","setShowLicenseTab","unsubscribe","window","ArrowUp ArrowUp ArrowDown ArrowDown ArrowLeft ArrowRight ArrowLeft ArrowRight b a","SubscriptionPage","_licensesData$license","showLicense","router","data","enterpriseData","isRegistered","licensesData","isLoading","isLicenseLoading","loadValues","syncLicenseUpdate","invalidateLicenseQuery","subscriptionSuccess","showSubscriptionCallout","license","limits","activeModules","isEnterprise","getKeyLimit","key","max","value","undefined","Infinity","macLimit","seatsLimit","handleSyncLicenseUpdate","mutate","onSuccess","isIdle","navigate","name","getRouteName","params","Object","fromEntries","entries","getSearchParameters","filter","_ref","replace","removeLicense","createElement","bg","title","loading","icon","onClick","target","action","primary","p","type","m","Fragment","Item","JSON","stringify","marginBlock","marginInline","width","color","lg","xs","licenseInformation","information","licenseLimits","activeUsers","hideManageSubscription","trial","macsCount","marketplaceApps","privateAppsLimit","privateApps","marketplaceAppsLimit","Boolean","cancellable","secondary","danger","exportDefault"],"sources":["client/views/admin/subscription/SubscriptionPage.tsx"],"sourcesContent":["import { Accordion, Box, Button, ButtonGroup, Callout, Grid } from '@rocket.chat/fuselage';\nimport { useDebouncedValue, useSessionStorage } from '@rocket.chat/fuselage-hooks';\nimport { useSearchParameter, useRouter } from '@rocket.chat/ui-contexts';\nimport { t } from 'i18next';\nimport React, { memo, useCallback, useEffect } from 'react';\nimport tinykeys from 'tinykeys';\n\nimport { Page, PageHeader, PageScrollableContentWithShadow } from '../../../components/Page';\nimport { useIsEnterprise } from '../../../hooks/useIsEnterprise';\nimport { useInvalidateLicense, useLicense } from '../../../hooks/useLicense';\nimport { useRegistrationStatus } from '../../../hooks/useRegistrationStatus';\nimport { SubscriptionCalloutLimits } from './SubscriptionCalloutLimits';\nimport SubscriptionPageSkeleton from './SubscriptionPageSkeleton';\nimport UpgradeButton from './components/UpgradeButton';\nimport UpgradeToGetMore from './components/UpgradeToGetMore';\nimport ActiveSessionsCard from './components/cards/ActiveSessionsCard';\nimport ActiveSessionsPeakCard from './components/cards/ActiveSessionsPeakCard';\nimport AppsUsageCard from './components/cards/AppsUsageCard';\nimport CountMACCard from './components/cards/CountMACCard';\nimport CountSeatsCard from './components/cards/CountSeatsCard';\nimport FeaturesCard from './components/cards/FeaturesCard';\nimport MACCard from './components/cards/MACCard';\nimport PlanCard from './components/cards/PlanCard';\nimport PlanCardCommunity from './components/cards/PlanCard/PlanCardCommunity';\nimport SeatsCard from './components/cards/SeatsCard';\nimport { useRemoveLicense } from './hooks/useRemoveLicense';\nimport { useWorkspaceSync } from './hooks/useWorkspaceSync';\n\nfunction useShowLicense() {\n\tconst [showLicenseTab, setShowLicenseTab] = useSessionStorage('admin:showLicenseTab', false);\n\n\tuseEffect(() => {\n\t\tconst unsubscribe = tinykeys(window, {\n\t\t\t'ArrowUp ArrowUp ArrowDown ArrowDown ArrowLeft ArrowRight ArrowLeft ArrowRight b a': () => {\n\t\t\t\tsetShowLicenseTab((showLicenseTab) => !showLicenseTab);\n\t\t\t},\n\t\t});\n\t\treturn () => {\n\t\t\tunsubscribe();\n\t\t};\n\t});\n\n\treturn showLicenseTab;\n}\n\nconst SubscriptionPage = () => {\n\tconst showLicense = useShowLicense();\n\tconst router = useRouter();\n\tconst { data: enterpriseData } = useIsEnterprise();\n\tconst { isRegistered } = useRegistrationStatus();\n\tconst { data: licensesData, isLoading: isLicenseLoading } = useLicense({ loadValues: true });\n\tconst syncLicenseUpdate = useWorkspaceSync();\n\tconst invalidateLicenseQuery = useInvalidateLicense();\n\n\tconst subscriptionSuccess = useSearchParameter('subscriptionSuccess');\n\n\tconst showSubscriptionCallout = useDebouncedValue(subscriptionSuccess || syncLicenseUpdate.isLoading, 10000);\n\n\tconst { license, limits, activeModules = [] } = licensesData || {};\n\tconst { isEnterprise = true } = enterpriseData || {};\n\n\tconst getKeyLimit = (key: 'monthlyActiveContacts' | 'activeUsers') => {\n\t\tconst { max, value } = limits?.[key] || {};\n\t\treturn {\n\t\t\tmax: max !== undefined && max !== -1 ? max : Infinity,\n\t\t\tvalue,\n\t\t};\n\t};\n\n\tconst macLimit = getKeyLimit('monthlyActiveContacts');\n\tconst seatsLimit = getKeyLimit('activeUsers');\n\n\tconst handleSyncLicenseUpdate = useCallback(() => {\n\t\tsyncLicenseUpdate.mutate(undefined, {\n\t\t\tonSuccess: () => invalidateLicenseQuery(100),\n\t\t});\n\t}, [invalidateLicenseQuery, syncLicenseUpdate]);\n\n\tuseEffect(() => {\n\t\tif (subscriptionSuccess && syncLicenseUpdate.isIdle) {\n\t\t\thandleSyncLicenseUpdate();\n\t\t\treturn;\n\t\t}\n\n\t\tif (subscriptionSuccess) {\n\t\t\trouter.navigate(\n\t\t\t\t{\n\t\t\t\t\tname: router.getRouteName()!,\n\t\t\t\t\tparams: Object.fromEntries(Object.entries(router.getSearchParameters()).filter(([key]) => key !== 'subscriptionSuccess')),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\treplace: true,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t}, [handleSyncLicenseUpdate, router, subscriptionSuccess, syncLicenseUpdate.isIdle]);\n\n\tconst removeLicense = useRemoveLicense();\n\n\treturn (\n\t\t<Page bg='tint'>\n\t\t\t<PageHeader title={t('Subscription')}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t{isRegistered && (\n\t\t\t\t\t\t<Button loading={syncLicenseUpdate.isLoading} icon='reload' onClick={() => handleSyncLicenseUpdate()}>\n\t\t\t\t\t\t\t{t('Sync_license_update')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t<UpgradeButton target='subscription_header' action={isEnterprise ? 'manage_subscription' : 'upgrade'} primary>\n\t\t\t\t\t\t{t(isEnterprise ? 'Manage_subscription' : 'Upgrade')}\n\t\t\t\t\t</UpgradeButton>\n\t\t\t\t</ButtonGroup>\n\t\t\t</PageHeader>\n\t\t\t<PageScrollableContentWithShadow p={16}>\n\t\t\t\t{(showSubscriptionCallout || syncLicenseUpdate.isLoading) && (\n\t\t\t\t\t<Callout type='info' title={t('Sync_license_update_Callout_Title')} m={8}>\n\t\t\t\t\t\t{t('Sync_license_update_Callout')}\n\t\t\t\t\t</Callout>\n\t\t\t\t)}\n\t\t\t\t<SubscriptionCalloutLimits />\n\t\t\t\t{isLicenseLoading && <SubscriptionPageSkeleton />}\n\t\t\t\t{!isLicenseLoading && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{showLicense && (\n\t\t\t\t\t\t\t<Accordion>\n\t\t\t\t\t\t\t\t<Accordion.Item title={t('License')}>\n\t\t\t\t\t\t\t\t\t<pre>{JSON.stringify(licensesData, null, 2)}</pre>\n\t\t\t\t\t\t\t\t</Accordion.Item>\n\t\t\t\t\t\t\t</Accordion>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Box marginBlock='none' marginInline='auto' width='full' color='default'>\n\t\t\t\t\t\t\t<Grid m={0}>\n\t\t\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t{license && <PlanCard licenseInformation={license.information} licenseLimits={{ activeUsers: seatsLimit }} />}\n\t\t\t\t\t\t\t\t\t{!license && <PlanCardCommunity />}\n\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t<Grid.Item lg={8} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t<FeaturesCard activeModules={activeModules} isEnterprise={isEnterprise} />\n\t\t\t\t\t\t\t\t</Grid.Item>\n\n\t\t\t\t\t\t\t\t{seatsLimit.value !== undefined && (\n\t\t\t\t\t\t\t\t\t<Grid.Item lg={6} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t{seatsLimit.max !== Infinity ? (\n\t\t\t\t\t\t\t\t\t\t\t<SeatsCard value={seatsLimit.value} max={seatsLimit.max} hideManageSubscription={licensesData?.trial} />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<CountSeatsCard activeUsers={seatsLimit?.value} />\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{macLimit.value !== undefined && (\n\t\t\t\t\t\t\t\t\t<Grid.Item lg={6} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t{macLimit.max !== Infinity ? (\n\t\t\t\t\t\t\t\t\t\t\t<MACCard max={macLimit.max} value={macLimit.value} hideManageSubscription={licensesData?.trial} />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<CountMACCard macsCount={macLimit.value} />\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{!license && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t{limits?.marketplaceApps !== undefined && (\n\t\t\t\t\t\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t\t\t<AppsUsageCard privateAppsLimit={limits?.privateApps} marketplaceAppsLimit={limits.marketplaceApps} />\n\t\t\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t\t<ActiveSessionsCard />\n\t\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t\t\t<Grid.Item lg={4} xs={4} p={8}>\n\t\t\t\t\t\t\t\t\t\t\t<ActiveSessionsPeakCard />\n\t\t\t\t\t\t\t\t\t\t</Grid.Item>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<UpgradeToGetMore activeModules={activeModules} isEnterprise={isEnterprise}>\n\t\t\t\t\t\t\t\t{Boolean(licensesData?.license?.information.cancellable) && (\n\t\t\t\t\t\t\t\t\t<Button loading={removeLicense.isLoading} secondary danger onClick={() => removeLicense.mutate()}>\n\t\t\t\t\t\t\t\t\t\t{t('Cancel_subscription')}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</UpgradeToGetMore>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</PageScrollableContentWithShadow>\n\t\t</Page>\n\t);\n};\n\nexport default memo(SubscriptionPage);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"5a45fd8f7c8da8ffd599916b7a5ad3fc4bcf97ad"}
