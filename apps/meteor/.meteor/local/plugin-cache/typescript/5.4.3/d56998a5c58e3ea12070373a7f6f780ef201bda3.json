{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/ui-message/client/ActionManager.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"app/ui-message/client/ActionManager.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/ui-message/client/ActionManager.ts","inputSourceMap":{"version":3,"file":"app/ui-message/client/ActionManager.ts","sourceRoot":"","sources":["app/ui-message/client/ActionManager.ts"],"names":[],"mappings":"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","sourcesContent":["import type { DistributiveOmit } from '@rocket.chat/core-typings';\nimport { Emitter } from '@rocket.chat/emitter';\nimport { Random } from '@rocket.chat/random';\nimport type { RouterContext, IActionManager } from '@rocket.chat/ui-contexts';\nimport type * as UiKit from '@rocket.chat/ui-kit';\nimport { t } from 'i18next';\nimport type { ContextType } from 'react';\nimport { lazy } from 'react';\n\nimport * as banners from '../../../client/lib/banners';\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\nimport { exhaustiveCheck } from '../../../lib/utils/exhaustiveCheck';\nimport { sdk } from '../../utils/client/lib/SDKClient';\nimport { UiKitTriggerTimeoutError } from './UiKitTriggerTimeoutError';\n\nconst UiKitModal = lazy(() => import('../../../client/views/modal/uikit/UiKitModal'));\n\nexport class ActionManager implements IActionManager {\n\tprotected static TRIGGER_TIMEOUT = 5000;\n\n\tprotected static TRIGGER_TIMEOUT_ERROR = 'TRIGGER_TIMEOUT_ERROR';\n\n\tprotected events = new Emitter<{ busy: { busy: boolean }; [viewId: string]: any }>();\n\n\tprotected appIdByTriggerId = new Map<string, string | undefined>();\n\n\tprotected viewInstances = new Map<\n\t\tstring,\n\t\t{\n\t\t\tpayload?: {\n\t\t\t\tview: UiKit.ContextualBarView;\n\t\t\t};\n\t\t\tclose: () => void;\n\t\t}\n\t>();\n\n\tpublic constructor(protected router: ContextType<typeof RouterContext>) {}\n\n\tprotected invalidateTriggerId(id: string) {\n\t\tconst appId = this.appIdByTriggerId.get(id);\n\t\tthis.appIdByTriggerId.delete(id);\n\t\treturn appId;\n\t}\n\n\tpublic on(viewId: string, listener: (data: any) => void): void;\n\n\tpublic on(eventName: 'busy', listener: ({ busy }: { busy: boolean }) => void): void;\n\n\tpublic on(eventName: string, listener: (data: any) => void) {\n\t\treturn this.events.on(eventName, listener);\n\t}\n\n\tpublic off(viewId: string, listener: (data: any) => any): void;\n\n\tpublic off(eventName: 'busy', listener: ({ busy }: { busy: boolean }) => void): void;\n\n\tpublic off(eventName: string, listener: (data: any) => void) {\n\t\treturn this.events.off(eventName, listener);\n\t}\n\n\tpublic notifyBusy() {\n\t\tthis.events.emit('busy', { busy: true });\n\t}\n\n\tpublic notifyIdle() {\n\t\tthis.events.emit('busy', { busy: false });\n\t}\n\n\tpublic generateTriggerId(appId: string | undefined) {\n\t\tconst triggerId = Random.id();\n\t\tthis.appIdByTriggerId.set(triggerId, appId);\n\t\tsetTimeout(() => this.invalidateTriggerId(triggerId), ActionManager.TRIGGER_TIMEOUT);\n\t\treturn triggerId;\n\t}\n\n\tpublic async emitInteraction(appId: string, userInteraction: DistributiveOmit<UiKit.UserInteraction, 'triggerId'>) {\n\t\tconst triggerId = this.generateTriggerId(appId);\n\n\t\treturn this.runWithTimeout(\n\t\t\tasync () => {\n\t\t\t\tlet interaction: UiKit.ServerInteraction | undefined;\n\n\t\t\t\ttry {\n\t\t\t\t\tinteraction = (await sdk.rest.post(`/apps/ui.interaction/${appId}`, {\n\t\t\t\t\t\t...userInteraction,\n\t\t\t\t\t\ttriggerId,\n\t\t\t\t\t})) as UiKit.ServerInteraction;\n\n\t\t\t\t\tthis.handleServerInteraction(interaction);\n\t\t\t\t} finally {\n\t\t\t\t\tswitch (userInteraction.type) {\n\t\t\t\t\t\tcase 'viewSubmit':\n\t\t\t\t\t\t\tif (!!interaction && !['errors', 'modal.update', 'contextual_bar.update'].includes(interaction.type))\n\t\t\t\t\t\t\t\tthis.disposeView(userInteraction.viewId);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'viewClosed':\n\t\t\t\t\t\t\tif (!!interaction && interaction.type !== 'errors') this.disposeView(userInteraction.payload.viewId);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ triggerId, appId, ...('viewId' in userInteraction ? { viewId: userInteraction.viewId } : {}) },\n\t\t);\n\t}\n\n\tprotected async runWithTimeout<T>(task: () => Promise<T>, details: { triggerId: string; appId: string; viewId?: string }) {\n\t\tthis.notifyBusy();\n\n\t\tlet timer: ReturnType<typeof setTimeout> | undefined;\n\n\t\ttry {\n\t\t\tconst taskPromise = task();\n\t\t\tconst timeoutPromise = new Promise<T>((_, reject) => {\n\t\t\t\ttimer = setTimeout(() => {\n\t\t\t\t\treject(new UiKitTriggerTimeoutError('Timeout', details));\n\t\t\t\t}, ActionManager.TRIGGER_TIMEOUT);\n\t\t\t});\n\n\t\t\treturn await Promise.race([taskPromise, timeoutPromise]);\n\t\t} catch (error) {\n\t\t\tif (error instanceof UiKitTriggerTimeoutError) {\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tmessage: t('UIKit_Interaction_Timeout'),\n\t\t\t\t});\n\t\t\t\tif (details.viewId) {\n\t\t\t\t\tthis.disposeView(details.viewId);\n\t\t\t\t}\n\t\t\t}\n\t\t} finally {\n\t\t\tif (timer) clearTimeout(timer);\n\t\t\tthis.notifyIdle();\n\t\t}\n\t}\n\n\tpublic handleServerInteraction(interaction: UiKit.ServerInteraction): UiKit.ServerInteraction['type'] | undefined {\n\t\tconst { triggerId } = interaction;\n\n\t\tconst appId = this.invalidateTriggerId(triggerId);\n\t\tif (!appId) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (interaction.type) {\n\t\t\tcase 'errors': {\n\t\t\t\tconst { type, triggerId, viewId, appId, errors } = interaction;\n\t\t\t\tthis.events.emit(interaction.viewId, {\n\t\t\t\t\ttype,\n\t\t\t\t\ttriggerId,\n\t\t\t\t\tviewId,\n\t\t\t\t\tappId,\n\t\t\t\t\terrors,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'modal.open': {\n\t\t\t\tconst { view } = interaction;\n\t\t\t\tthis.openModal(view);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'modal.update':\n\t\t\tcase 'contextual_bar.update': {\n\t\t\t\tconst { type, triggerId, appId, view } = interaction;\n\t\t\t\tthis.events.emit(view.id, {\n\t\t\t\t\ttype,\n\t\t\t\t\ttriggerId,\n\t\t\t\t\tviewId: view.id,\n\t\t\t\t\tappId,\n\t\t\t\t\tview,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'modal.close': {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'banner.open': {\n\t\t\t\tconst { type, triggerId, ...view } = interaction;\n\t\t\t\tthis.openBanner(view);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'banner.update': {\n\t\t\t\tconst { type, triggerId, appId, view } = interaction;\n\t\t\t\tthis.events.emit(view.viewId, {\n\t\t\t\t\ttype,\n\t\t\t\t\ttriggerId,\n\t\t\t\t\tviewId: view.viewId,\n\t\t\t\t\tappId,\n\t\t\t\t\tview,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'banner.close': {\n\t\t\t\tconst { viewId } = interaction;\n\t\t\t\tthis.disposeView(viewId);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'contextual_bar.open': {\n\t\t\t\tconst { view } = interaction;\n\t\t\t\tthis.openContextualBar(view);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'contextual_bar.close': {\n\t\t\t\tconst { view } = interaction;\n\t\t\t\tthis.disposeView(view.id);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\texhaustiveCheck(interaction);\n\t\t}\n\n\t\treturn interaction.type;\n\t}\n\n\tpublic getInteractionPayloadByViewId(viewId: UiKit.ContextualBarView['id']) {\n\t\tif (!viewId) {\n\t\t\tthrow new Error('No viewId provided when checking for `user interaction payload`');\n\t\t}\n\n\t\treturn this.viewInstances.get(viewId)?.payload;\n\t}\n\n\tpublic openView(surface: 'modal', view: UiKit.ModalView): void;\n\n\tpublic openView(surface: 'banner', view: UiKit.BannerView): void;\n\n\tpublic openView(surface: 'contextual_bar', view: UiKit.ContextualBarView): void;\n\n\tpublic openView(surface: string, view: UiKit.View) {\n\t\tswitch (surface) {\n\t\t\tcase 'modal':\n\t\t\t\tthis.openModal(view as UiKit.ModalView);\n\t\t\t\tbreak;\n\n\t\t\tcase 'banner':\n\t\t\t\tthis.openBanner(view as UiKit.BannerView);\n\t\t\t\tbreak;\n\n\t\t\tcase 'contextual_bar':\n\t\t\t\tthis.openContextualBar(view as UiKit.ContextualBarView);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate openModal(view: UiKit.ModalView) {\n\t\tconst instance = imperativeModal.open({\n\t\t\tcomponent: UiKitModal,\n\t\t\tprops: {\n\t\t\t\tkey: view.id,\n\t\t\t\tinitialView: view,\n\t\t\t},\n\t\t});\n\n\t\tthis.viewInstances.set(view.id, {\n\t\t\tclose: () => {\n\t\t\t\tinstance.close();\n\t\t\t\tthis.viewInstances.delete(view.id);\n\t\t\t},\n\t\t});\n\t}\n\n\tprivate openBanner(view: UiKit.BannerView) {\n\t\tbanners.open(view);\n\t\tthis.viewInstances.set(view.viewId, {\n\t\t\tclose: () => {\n\t\t\t\tbanners.closeById(view.viewId);\n\t\t\t},\n\t\t});\n\t}\n\n\tprivate openContextualBar(view: UiKit.ContextualBarView) {\n\t\tthis.viewInstances.set(view.id, {\n\t\t\tpayload: {\n\t\t\t\tview,\n\t\t\t},\n\t\t\tclose: () => {\n\t\t\t\tthis.viewInstances.delete(view.id);\n\t\t\t},\n\t\t});\n\n\t\tconst routeName = this.router.getRouteName();\n\t\tconst routeParams = this.router.getRouteParameters();\n\n\t\tif (!routeName) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.router.navigate({\n\t\t\tname: routeName,\n\t\t\tparams: {\n\t\t\t\t...routeParams,\n\t\t\t\ttab: 'app',\n\t\t\t\tcontext: view.id,\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic disposeView(viewId: UiKit.ModalView['id'] | UiKit.BannerView['viewId'] | UiKit.ContextualBarView['id']) {\n\t\tconst instance = this.viewInstances.get(viewId);\n\t\tinstance?.close?.();\n\t\tthis.viewInstances.delete(viewId);\n\t}\n}\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/ui-message/client/ActionManager.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/ui-message/client/ActionManager.ts","inputSourceMap":{"version":3,"file":"app/ui-message/client/ActionManager.ts","sourceRoot":"","sources":["app/ui-message/client/ActionManager.ts"],"names":[],"mappings":"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","sourcesContent":["import type { DistributiveOmit } from '@rocket.chat/core-typings';\nimport { Emitter } from '@rocket.chat/emitter';\nimport { Random } from '@rocket.chat/random';\nimport type { RouterContext, IActionManager } from '@rocket.chat/ui-contexts';\nimport type * as UiKit from '@rocket.chat/ui-kit';\nimport { t } from 'i18next';\nimport type { ContextType } from 'react';\nimport { lazy } from 'react';\n\nimport * as banners from '../../../client/lib/banners';\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\nimport { exhaustiveCheck } from '../../../lib/utils/exhaustiveCheck';\nimport { sdk } from '../../utils/client/lib/SDKClient';\nimport { UiKitTriggerTimeoutError } from './UiKitTriggerTimeoutError';\n\nconst UiKitModal = lazy(() => import('../../../client/views/modal/uikit/UiKitModal'));\n\nexport class ActionManager implements IActionManager {\n\tprotected static TRIGGER_TIMEOUT = 5000;\n\n\tprotected static TRIGGER_TIMEOUT_ERROR = 'TRIGGER_TIMEOUT_ERROR';\n\n\tprotected events = new Emitter<{ busy: { busy: boolean }; [viewId: string]: any }>();\n\n\tprotected appIdByTriggerId = new Map<string, string | undefined>();\n\n\tprotected viewInstances = new Map<\n\t\tstring,\n\t\t{\n\t\t\tpayload?: {\n\t\t\t\tview: UiKit.ContextualBarView;\n\t\t\t};\n\t\t\tclose: () => void;\n\t\t}\n\t>();\n\n\tpublic constructor(protected router: ContextType<typeof RouterContext>) {}\n\n\tprotected invalidateTriggerId(id: string) {\n\t\tconst appId = this.appIdByTriggerId.get(id);\n\t\tthis.appIdByTriggerId.delete(id);\n\t\treturn appId;\n\t}\n\n\tpublic on(viewId: string, listener: (data: any) => void): void;\n\n\tpublic on(eventName: 'busy', listener: ({ busy }: { busy: boolean }) => void): void;\n\n\tpublic on(eventName: string, listener: (data: any) => void) {\n\t\treturn this.events.on(eventName, listener);\n\t}\n\n\tpublic off(viewId: string, listener: (data: any) => any): void;\n\n\tpublic off(eventName: 'busy', listener: ({ busy }: { busy: boolean }) => void): void;\n\n\tpublic off(eventName: string, listener: (data: any) => void) {\n\t\treturn this.events.off(eventName, listener);\n\t}\n\n\tpublic notifyBusy() {\n\t\tthis.events.emit('busy', { busy: true });\n\t}\n\n\tpublic notifyIdle() {\n\t\tthis.events.emit('busy', { busy: false });\n\t}\n\n\tpublic generateTriggerId(appId: string | undefined) {\n\t\tconst triggerId = Random.id();\n\t\tthis.appIdByTriggerId.set(triggerId, appId);\n\t\tsetTimeout(() => this.invalidateTriggerId(triggerId), ActionManager.TRIGGER_TIMEOUT);\n\t\treturn triggerId;\n\t}\n\n\tpublic async emitInteraction(appId: string, userInteraction: DistributiveOmit<UiKit.UserInteraction, 'triggerId'>) {\n\t\tconst triggerId = this.generateTriggerId(appId);\n\n\t\treturn this.runWithTimeout(\n\t\t\tasync () => {\n\t\t\t\tlet interaction: UiKit.ServerInteraction | undefined;\n\n\t\t\t\ttry {\n\t\t\t\t\tinteraction = (await sdk.rest.post(`/apps/ui.interaction/${appId}`, {\n\t\t\t\t\t\t...userInteraction,\n\t\t\t\t\t\ttriggerId,\n\t\t\t\t\t})) as UiKit.ServerInteraction;\n\n\t\t\t\t\tthis.handleServerInteraction(interaction);\n\t\t\t\t} finally {\n\t\t\t\t\tswitch (userInteraction.type) {\n\t\t\t\t\t\tcase 'viewSubmit':\n\t\t\t\t\t\t\tif (!!interaction && !['errors', 'modal.update', 'contextual_bar.update'].includes(interaction.type))\n\t\t\t\t\t\t\t\tthis.disposeView(userInteraction.viewId);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'viewClosed':\n\t\t\t\t\t\t\tif (!!interaction && interaction.type !== 'errors') this.disposeView(userInteraction.payload.viewId);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ triggerId, appId, ...('viewId' in userInteraction ? { viewId: userInteraction.viewId } : {}) },\n\t\t);\n\t}\n\n\tprotected async runWithTimeout<T>(task: () => Promise<T>, details: { triggerId: string; appId: string; viewId?: string }) {\n\t\tthis.notifyBusy();\n\n\t\tlet timer: ReturnType<typeof setTimeout> | undefined;\n\n\t\ttry {\n\t\t\tconst taskPromise = task();\n\t\t\tconst timeoutPromise = new Promise<T>((_, reject) => {\n\t\t\t\ttimer = setTimeout(() => {\n\t\t\t\t\treject(new UiKitTriggerTimeoutError('Timeout', details));\n\t\t\t\t}, ActionManager.TRIGGER_TIMEOUT);\n\t\t\t});\n\n\t\t\treturn await Promise.race([taskPromise, timeoutPromise]);\n\t\t} catch (error) {\n\t\t\tif (error instanceof UiKitTriggerTimeoutError) {\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tmessage: t('UIKit_Interaction_Timeout'),\n\t\t\t\t});\n\t\t\t\tif (details.viewId) {\n\t\t\t\t\tthis.disposeView(details.viewId);\n\t\t\t\t}\n\t\t\t}\n\t\t} finally {\n\t\t\tif (timer) clearTimeout(timer);\n\t\t\tthis.notifyIdle();\n\t\t}\n\t}\n\n\tpublic handleServerInteraction(interaction: UiKit.ServerInteraction): UiKit.ServerInteraction['type'] | undefined {\n\t\tconst { triggerId } = interaction;\n\n\t\tconst appId = this.invalidateTriggerId(triggerId);\n\t\tif (!appId) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (interaction.type) {\n\t\t\tcase 'errors': {\n\t\t\t\tconst { type, triggerId, viewId, appId, errors } = interaction;\n\t\t\t\tthis.events.emit(interaction.viewId, {\n\t\t\t\t\ttype,\n\t\t\t\t\ttriggerId,\n\t\t\t\t\tviewId,\n\t\t\t\t\tappId,\n\t\t\t\t\terrors,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'modal.open': {\n\t\t\t\tconst { view } = interaction;\n\t\t\t\tthis.openModal(view);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'modal.update':\n\t\t\tcase 'contextual_bar.update': {\n\t\t\t\tconst { type, triggerId, appId, view } = interaction;\n\t\t\t\tthis.events.emit(view.id, {\n\t\t\t\t\ttype,\n\t\t\t\t\ttriggerId,\n\t\t\t\t\tviewId: view.id,\n\t\t\t\t\tappId,\n\t\t\t\t\tview,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'modal.close': {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'banner.open': {\n\t\t\t\tconst { type, triggerId, ...view } = interaction;\n\t\t\t\tthis.openBanner(view);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'banner.update': {\n\t\t\t\tconst { type, triggerId, appId, view } = interaction;\n\t\t\t\tthis.events.emit(view.viewId, {\n\t\t\t\t\ttype,\n\t\t\t\t\ttriggerId,\n\t\t\t\t\tviewId: view.viewId,\n\t\t\t\t\tappId,\n\t\t\t\t\tview,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'banner.close': {\n\t\t\t\tconst { viewId } = interaction;\n\t\t\t\tthis.disposeView(viewId);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'contextual_bar.open': {\n\t\t\t\tconst { view } = interaction;\n\t\t\t\tthis.openContextualBar(view);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'contextual_bar.close': {\n\t\t\t\tconst { view } = interaction;\n\t\t\t\tthis.disposeView(view.id);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\texhaustiveCheck(interaction);\n\t\t}\n\n\t\treturn interaction.type;\n\t}\n\n\tpublic getInteractionPayloadByViewId(viewId: UiKit.ContextualBarView['id']) {\n\t\tif (!viewId) {\n\t\t\tthrow new Error('No viewId provided when checking for `user interaction payload`');\n\t\t}\n\n\t\treturn this.viewInstances.get(viewId)?.payload;\n\t}\n\n\tpublic openView(surface: 'modal', view: UiKit.ModalView): void;\n\n\tpublic openView(surface: 'banner', view: UiKit.BannerView): void;\n\n\tpublic openView(surface: 'contextual_bar', view: UiKit.ContextualBarView): void;\n\n\tpublic openView(surface: string, view: UiKit.View) {\n\t\tswitch (surface) {\n\t\t\tcase 'modal':\n\t\t\t\tthis.openModal(view as UiKit.ModalView);\n\t\t\t\tbreak;\n\n\t\t\tcase 'banner':\n\t\t\t\tthis.openBanner(view as UiKit.BannerView);\n\t\t\t\tbreak;\n\n\t\t\tcase 'contextual_bar':\n\t\t\t\tthis.openContextualBar(view as UiKit.ContextualBarView);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate openModal(view: UiKit.ModalView) {\n\t\tconst instance = imperativeModal.open({\n\t\t\tcomponent: UiKitModal,\n\t\t\tprops: {\n\t\t\t\tkey: view.id,\n\t\t\t\tinitialView: view,\n\t\t\t},\n\t\t});\n\n\t\tthis.viewInstances.set(view.id, {\n\t\t\tclose: () => {\n\t\t\t\tinstance.close();\n\t\t\t\tthis.viewInstances.delete(view.id);\n\t\t\t},\n\t\t});\n\t}\n\n\tprivate openBanner(view: UiKit.BannerView) {\n\t\tbanners.open(view);\n\t\tthis.viewInstances.set(view.viewId, {\n\t\t\tclose: () => {\n\t\t\t\tbanners.closeById(view.viewId);\n\t\t\t},\n\t\t});\n\t}\n\n\tprivate openContextualBar(view: UiKit.ContextualBarView) {\n\t\tthis.viewInstances.set(view.id, {\n\t\t\tpayload: {\n\t\t\t\tview,\n\t\t\t},\n\t\t\tclose: () => {\n\t\t\t\tthis.viewInstances.delete(view.id);\n\t\t\t},\n\t\t});\n\n\t\tconst routeName = this.router.getRouteName();\n\t\tconst routeParams = this.router.getRouteParameters();\n\n\t\tif (!routeName) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.router.navigate({\n\t\t\tname: routeName,\n\t\t\tparams: {\n\t\t\t\t...routeParams,\n\t\t\t\ttab: 'app',\n\t\t\t\tcontext: view.id,\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic disposeView(viewId: UiKit.ModalView['id'] | UiKit.BannerView['viewId'] | UiKit.ContextualBarView['id']) {\n\t\tconst instance = this.viewInstances.get(viewId);\n\t\tinstance?.close?.();\n\t\tthis.viewInstances.delete(viewId);\n\t}\n}\n"]}}},"code":"var _excluded = [\"type\", \"triggerId\"];\nvar _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 0);\nvar _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 1);\nvar _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 2);\nmodule.export({\n  ActionManager: function () {\n    return ActionManager;\n  }\n});\nvar Emitter;\nmodule.link(\"@rocket.chat/emitter\", {\n  Emitter: function (v) {\n    Emitter = v;\n  }\n}, 0);\nvar Random;\nmodule.link(\"@rocket.chat/random\", {\n  Random: function (v) {\n    Random = v;\n  }\n}, 1);\nvar t;\nmodule.link(\"i18next\", {\n  t: function (v) {\n    t = v;\n  }\n}, 2);\nvar lazy;\nmodule.link(\"react\", {\n  lazy: function (v) {\n    lazy = v;\n  }\n}, 3);\nvar banners;\nmodule.link(\"../../../client/lib/banners\", {\n  \"*\": function (v) {\n    banners = v;\n  }\n}, 4);\nvar imperativeModal;\nmodule.link(\"../../../client/lib/imperativeModal\", {\n  imperativeModal: function (v) {\n    imperativeModal = v;\n  }\n}, 5);\nvar dispatchToastMessage;\nmodule.link(\"../../../client/lib/toast\", {\n  dispatchToastMessage: function (v) {\n    dispatchToastMessage = v;\n  }\n}, 6);\nvar exhaustiveCheck;\nmodule.link(\"../../../lib/utils/exhaustiveCheck\", {\n  exhaustiveCheck: function (v) {\n    exhaustiveCheck = v;\n  }\n}, 7);\nvar sdk;\nmodule.link(\"../../utils/client/lib/SDKClient\", {\n  sdk: function (v) {\n    sdk = v;\n  }\n}, 8);\nvar UiKitTriggerTimeoutError;\nmodule.link(\"./UiKitTriggerTimeoutError\", {\n  UiKitTriggerTimeoutError: function (v) {\n    UiKitTriggerTimeoutError = v;\n  }\n}, 9);\nvar UiKitModal = /*#__PURE__*/lazy(function () {\n  return module.dynamicImport('../../../client/views/modal/uikit/UiKitModal');\n});\nvar ActionManager = /*#__PURE__*/function () {\n  function ActionManager(router) {\n    this.router = void 0;\n    this.events = new Emitter();\n    this.appIdByTriggerId = new Map();\n    this.viewInstances = new Map();\n    this.router = router;\n  }\n  var _proto = ActionManager.prototype;\n  _proto.invalidateTriggerId = function () {\n    function invalidateTriggerId(id) {\n      var appId = this.appIdByTriggerId.get(id);\n      this.appIdByTriggerId.delete(id);\n      return appId;\n    }\n    return invalidateTriggerId;\n  }();\n  _proto.on = function () {\n    function on(eventName, listener) {\n      return this.events.on(eventName, listener);\n    }\n    return on;\n  }();\n  _proto.off = function () {\n    function off(eventName, listener) {\n      return this.events.off(eventName, listener);\n    }\n    return off;\n  }();\n  _proto.notifyBusy = function () {\n    function notifyBusy() {\n      this.events.emit('busy', {\n        busy: true\n      });\n    }\n    return notifyBusy;\n  }();\n  _proto.notifyIdle = function () {\n    function notifyIdle() {\n      this.events.emit('busy', {\n        busy: false\n      });\n    }\n    return notifyIdle;\n  }();\n  _proto.generateTriggerId = function () {\n    function generateTriggerId(appId) {\n      var _this = this;\n      var triggerId = Random.id();\n      this.appIdByTriggerId.set(triggerId, appId);\n      setTimeout(function () {\n        return _this.invalidateTriggerId(triggerId);\n      }, ActionManager.TRIGGER_TIMEOUT);\n      return triggerId;\n    }\n    return generateTriggerId;\n  }();\n  _proto.emitInteraction = function () {\n    function emitInteraction(appId, userInteraction) {\n      var _this2 = this;\n      var triggerId;\n      return _regeneratorRuntime.async(function () {\n        function emitInteraction$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              triggerId = this.generateTriggerId(appId);\n              return _context2.abrupt(\"return\", this.runWithTimeout(function () {\n                function _callee() {\n                  var interaction;\n                  return _regeneratorRuntime.async(function () {\n                    function _callee$(_context) {\n                      while (1) switch (_context.prev = _context.next) {\n                        case 0:\n                          _context.prev = 0;\n                          _context.next = 3;\n                          return _regeneratorRuntime.awrap(sdk.rest.post(\"/apps/ui.interaction/\" + appId, _objectSpread(_objectSpread({}, userInteraction), {}, {\n                            triggerId: triggerId\n                          })));\n                        case 3:\n                          interaction = _context.sent;\n                          _this2.handleServerInteraction(interaction);\n                        case 5:\n                          _context.prev = 5;\n                          _context.t0 = userInteraction.type;\n                          _context.next = _context.t0 === 'viewSubmit' ? 9 : _context.t0 === 'viewClosed' ? 11 : 13;\n                          break;\n                        case 9:\n                          if (!!interaction && !['errors', 'modal.update', 'contextual_bar.update'].includes(interaction.type)) _this2.disposeView(userInteraction.viewId);\n                          return _context.abrupt(\"break\", 13);\n                        case 11:\n                          if (!!interaction && interaction.type !== 'errors') _this2.disposeView(userInteraction.payload.viewId);\n                          return _context.abrupt(\"break\", 13);\n                        case 13:\n                          return _context.finish(5);\n                        case 14:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                    return _callee$;\n                  }(), null, null, [[0,, 5, 14]], Promise);\n                }\n                return _callee;\n              }(), _objectSpread({\n                triggerId: triggerId,\n                appId: appId\n              }, 'viewId' in userInteraction ? {\n                viewId: userInteraction.viewId\n              } : {})));\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n        return emitInteraction$;\n      }(), null, this, null, Promise);\n    }\n    return emitInteraction;\n  }();\n  _proto.runWithTimeout = function () {\n    function runWithTimeout(task, details) {\n      var timer, taskPromise, timeoutPromise;\n      return _regeneratorRuntime.async(function () {\n        function runWithTimeout$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              this.notifyBusy();\n              _context3.prev = 1;\n              taskPromise = task();\n              timeoutPromise = new Promise(function (_, reject) {\n                timer = setTimeout(function () {\n                  reject(new UiKitTriggerTimeoutError('Timeout', details));\n                }, ActionManager.TRIGGER_TIMEOUT);\n              });\n              _context3.next = 6;\n              return _regeneratorRuntime.awrap(Promise.race([taskPromise, timeoutPromise]));\n            case 6:\n              return _context3.abrupt(\"return\", _context3.sent);\n            case 9:\n              _context3.prev = 9;\n              _context3.t0 = _context3[\"catch\"](1);\n              if (_context3.t0 instanceof UiKitTriggerTimeoutError) {\n                dispatchToastMessage({\n                  type: 'error',\n                  message: t('UIKit_Interaction_Timeout')\n                });\n                if (details.viewId) {\n                  this.disposeView(details.viewId);\n                }\n              }\n            case 12:\n              _context3.prev = 12;\n              if (timer) clearTimeout(timer);\n              this.notifyIdle();\n              return _context3.finish(12);\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n        return runWithTimeout$;\n      }(), null, this, [[1, 9, 12, 16]], Promise);\n    }\n    return runWithTimeout;\n  }();\n  _proto.handleServerInteraction = function () {\n    function handleServerInteraction(interaction) {\n      var triggerId = interaction.triggerId;\n      var appId = this.invalidateTriggerId(triggerId);\n      if (!appId) {\n        return;\n      }\n      switch (interaction.type) {\n        case 'errors':\n          {\n            var type = interaction.type,\n              _triggerId = interaction.triggerId,\n              viewId = interaction.viewId,\n              _appId = interaction.appId,\n              errors = interaction.errors;\n            this.events.emit(interaction.viewId, {\n              type: type,\n              triggerId: _triggerId,\n              viewId: viewId,\n              appId: _appId,\n              errors: errors\n            });\n            break;\n          }\n        case 'modal.open':\n          {\n            var view = interaction.view;\n            this.openModal(view);\n            break;\n          }\n        case 'modal.update':\n        case 'contextual_bar.update':\n          {\n            var _type = interaction.type,\n              _triggerId2 = interaction.triggerId,\n              _appId2 = interaction.appId,\n              _view = interaction.view;\n            this.events.emit(_view.id, {\n              type: _type,\n              triggerId: _triggerId2,\n              viewId: _view.id,\n              appId: _appId2,\n              view: _view\n            });\n            break;\n          }\n        case 'modal.close':\n          {\n            break;\n          }\n        case 'banner.open':\n          {\n            var _type2 = interaction.type,\n              _triggerId3 = interaction.triggerId,\n              _view2 = _objectWithoutProperties(interaction, _excluded);\n            this.openBanner(_view2);\n            break;\n          }\n        case 'banner.update':\n          {\n            var _type3 = interaction.type,\n              _triggerId4 = interaction.triggerId,\n              _appId3 = interaction.appId,\n              _view3 = interaction.view;\n            this.events.emit(_view3.viewId, {\n              type: _type3,\n              triggerId: _triggerId4,\n              viewId: _view3.viewId,\n              appId: _appId3,\n              view: _view3\n            });\n            break;\n          }\n        case 'banner.close':\n          {\n            var _viewId = interaction.viewId;\n            this.disposeView(_viewId);\n            break;\n          }\n        case 'contextual_bar.open':\n          {\n            var _view4 = interaction.view;\n            this.openContextualBar(_view4);\n            break;\n          }\n        case 'contextual_bar.close':\n          {\n            var _view5 = interaction.view;\n            this.disposeView(_view5.id);\n            break;\n          }\n        default:\n          exhaustiveCheck(interaction);\n      }\n      return interaction.type;\n    }\n    return handleServerInteraction;\n  }();\n  _proto.getInteractionPayloadByViewId = function () {\n    function getInteractionPayloadByViewId(viewId) {\n      var _this$viewInstances$g;\n      if (!viewId) {\n        throw new Error('No viewId provided when checking for `user interaction payload`');\n      }\n      return (_this$viewInstances$g = this.viewInstances.get(viewId)) === null || _this$viewInstances$g === void 0 ? void 0 : _this$viewInstances$g.payload;\n    }\n    return getInteractionPayloadByViewId;\n  }();\n  _proto.openView = function () {\n    function openView(surface, view) {\n      switch (surface) {\n        case 'modal':\n          this.openModal(view);\n          break;\n        case 'banner':\n          this.openBanner(view);\n          break;\n        case 'contextual_bar':\n          this.openContextualBar(view);\n          break;\n      }\n    }\n    return openView;\n  }();\n  _proto.openModal = function () {\n    function openModal(view) {\n      var _this3 = this;\n      var instance = imperativeModal.open({\n        component: UiKitModal,\n        props: {\n          key: view.id,\n          initialView: view\n        }\n      });\n      this.viewInstances.set(view.id, {\n        close: function () {\n          instance.close();\n          _this3.viewInstances.delete(view.id);\n        }\n      });\n    }\n    return openModal;\n  }();\n  _proto.openBanner = function () {\n    function openBanner(view) {\n      banners.open(view);\n      this.viewInstances.set(view.viewId, {\n        close: function () {\n          banners.closeById(view.viewId);\n        }\n      });\n    }\n    return openBanner;\n  }();\n  _proto.openContextualBar = function () {\n    function openContextualBar(view) {\n      var _this4 = this;\n      this.viewInstances.set(view.id, {\n        payload: {\n          view: view\n        },\n        close: function () {\n          _this4.viewInstances.delete(view.id);\n        }\n      });\n      var routeName = this.router.getRouteName();\n      var routeParams = this.router.getRouteParameters();\n      if (!routeName) {\n        return;\n      }\n      this.router.navigate({\n        name: routeName,\n        params: _objectSpread(_objectSpread({}, routeParams), {}, {\n          tab: 'app',\n          context: view.id\n        })\n      });\n    }\n    return openContextualBar;\n  }();\n  _proto.disposeView = function () {\n    function disposeView(viewId) {\n      var _instance$close;\n      var instance = this.viewInstances.get(viewId);\n      instance === null || instance === void 0 ? void 0 : (_instance$close = instance.close) === null || _instance$close === void 0 ? void 0 : _instance$close.call(instance);\n      this.viewInstances.delete(viewId);\n    }\n    return disposeView;\n  }();\n  return ActionManager;\n}();\nActionManager.TRIGGER_TIMEOUT = 5000;\nActionManager.TRIGGER_TIMEOUT_ERROR = 'TRIGGER_TIMEOUT_ERROR';","map":{"version":3,"names":["_objectWithoutProperties","module","link","default","v","_regeneratorRuntime","_objectSpread","export","ActionManager","Emitter","Random","t","lazy","banners","*","imperativeModal","dispatchToastMessage","exhaustiveCheck","sdk","UiKitTriggerTimeoutError","UiKitModal","dynamicImport","router","events","appIdByTriggerId","Map","viewInstances","_proto","prototype","invalidateTriggerId","id","appId","get","delete","on","eventName","listener","off","notifyBusy","emit","busy","notifyIdle","generateTriggerId","_this","triggerId","set","setTimeout","TRIGGER_TIMEOUT","emitInteraction","userInteraction","_this2","async","emitInteraction$","_context2","prev","next","abrupt","runWithTimeout","_callee","interaction","_callee$","_context","awrap","rest","post","sent","handleServerInteraction","t0","type","includes","disposeView","viewId","payload","finish","stop","Promise","task","details","timer","taskPromise","timeoutPromise","runWithTimeout$","_context3","_","reject","race","message","clearTimeout","errors","view","openModal","_excluded","openBanner","openContextualBar","getInteractionPayloadByViewId","_this$viewInstances$g","Error","openView","surface","_this3","instance","open","component","props","key","initialView","close","closeById","_this4","routeName","getRouteName","routeParams","getRouteParameters","navigate","name","params","tab","context","_instance$close","call","TRIGGER_TIMEOUT_ERROR"],"sources":["app/ui-message/client/ActionManager.ts"],"sourcesContent":["import type { DistributiveOmit } from '@rocket.chat/core-typings';\nimport { Emitter } from '@rocket.chat/emitter';\nimport { Random } from '@rocket.chat/random';\nimport type { RouterContext, IActionManager } from '@rocket.chat/ui-contexts';\nimport type * as UiKit from '@rocket.chat/ui-kit';\nimport { t } from 'i18next';\nimport type { ContextType } from 'react';\nimport { lazy } from 'react';\n\nimport * as banners from '../../../client/lib/banners';\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\nimport { exhaustiveCheck } from '../../../lib/utils/exhaustiveCheck';\nimport { sdk } from '../../utils/client/lib/SDKClient';\nimport { UiKitTriggerTimeoutError } from './UiKitTriggerTimeoutError';\n\nconst UiKitModal = lazy(() => import('../../../client/views/modal/uikit/UiKitModal'));\n\nexport class ActionManager implements IActionManager {\n\tprotected static TRIGGER_TIMEOUT = 5000;\n\n\tprotected static TRIGGER_TIMEOUT_ERROR = 'TRIGGER_TIMEOUT_ERROR';\n\n\tprotected events = new Emitter<{ busy: { busy: boolean }; [viewId: string]: any }>();\n\n\tprotected appIdByTriggerId = new Map<string, string | undefined>();\n\n\tprotected viewInstances = new Map<\n\t\tstring,\n\t\t{\n\t\t\tpayload?: {\n\t\t\t\tview: UiKit.ContextualBarView;\n\t\t\t};\n\t\t\tclose: () => void;\n\t\t}\n\t>();\n\n\tpublic constructor(protected router: ContextType<typeof RouterContext>) {}\n\n\tprotected invalidateTriggerId(id: string) {\n\t\tconst appId = this.appIdByTriggerId.get(id);\n\t\tthis.appIdByTriggerId.delete(id);\n\t\treturn appId;\n\t}\n\n\tpublic on(viewId: string, listener: (data: any) => void): void;\n\n\tpublic on(eventName: 'busy', listener: ({ busy }: { busy: boolean }) => void): void;\n\n\tpublic on(eventName: string, listener: (data: any) => void) {\n\t\treturn this.events.on(eventName, listener);\n\t}\n\n\tpublic off(viewId: string, listener: (data: any) => any): void;\n\n\tpublic off(eventName: 'busy', listener: ({ busy }: { busy: boolean }) => void): void;\n\n\tpublic off(eventName: string, listener: (data: any) => void) {\n\t\treturn this.events.off(eventName, listener);\n\t}\n\n\tpublic notifyBusy() {\n\t\tthis.events.emit('busy', { busy: true });\n\t}\n\n\tpublic notifyIdle() {\n\t\tthis.events.emit('busy', { busy: false });\n\t}\n\n\tpublic generateTriggerId(appId: string | undefined) {\n\t\tconst triggerId = Random.id();\n\t\tthis.appIdByTriggerId.set(triggerId, appId);\n\t\tsetTimeout(() => this.invalidateTriggerId(triggerId), ActionManager.TRIGGER_TIMEOUT);\n\t\treturn triggerId;\n\t}\n\n\tpublic async emitInteraction(appId: string, userInteraction: DistributiveOmit<UiKit.UserInteraction, 'triggerId'>) {\n\t\tconst triggerId = this.generateTriggerId(appId);\n\n\t\treturn this.runWithTimeout(\n\t\t\tasync () => {\n\t\t\t\tlet interaction: UiKit.ServerInteraction | undefined;\n\n\t\t\t\ttry {\n\t\t\t\t\tinteraction = (await sdk.rest.post(`/apps/ui.interaction/${appId}`, {\n\t\t\t\t\t\t...userInteraction,\n\t\t\t\t\t\ttriggerId,\n\t\t\t\t\t})) as UiKit.ServerInteraction;\n\n\t\t\t\t\tthis.handleServerInteraction(interaction);\n\t\t\t\t} finally {\n\t\t\t\t\tswitch (userInteraction.type) {\n\t\t\t\t\t\tcase 'viewSubmit':\n\t\t\t\t\t\t\tif (!!interaction && !['errors', 'modal.update', 'contextual_bar.update'].includes(interaction.type))\n\t\t\t\t\t\t\t\tthis.disposeView(userInteraction.viewId);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'viewClosed':\n\t\t\t\t\t\t\tif (!!interaction && interaction.type !== 'errors') this.disposeView(userInteraction.payload.viewId);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ triggerId, appId, ...('viewId' in userInteraction ? { viewId: userInteraction.viewId } : {}) },\n\t\t);\n\t}\n\n\tprotected async runWithTimeout<T>(task: () => Promise<T>, details: { triggerId: string; appId: string; viewId?: string }) {\n\t\tthis.notifyBusy();\n\n\t\tlet timer: ReturnType<typeof setTimeout> | undefined;\n\n\t\ttry {\n\t\t\tconst taskPromise = task();\n\t\t\tconst timeoutPromise = new Promise<T>((_, reject) => {\n\t\t\t\ttimer = setTimeout(() => {\n\t\t\t\t\treject(new UiKitTriggerTimeoutError('Timeout', details));\n\t\t\t\t}, ActionManager.TRIGGER_TIMEOUT);\n\t\t\t});\n\n\t\t\treturn await Promise.race([taskPromise, timeoutPromise]);\n\t\t} catch (error) {\n\t\t\tif (error instanceof UiKitTriggerTimeoutError) {\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tmessage: t('UIKit_Interaction_Timeout'),\n\t\t\t\t});\n\t\t\t\tif (details.viewId) {\n\t\t\t\t\tthis.disposeView(details.viewId);\n\t\t\t\t}\n\t\t\t}\n\t\t} finally {\n\t\t\tif (timer) clearTimeout(timer);\n\t\t\tthis.notifyIdle();\n\t\t}\n\t}\n\n\tpublic handleServerInteraction(interaction: UiKit.ServerInteraction): UiKit.ServerInteraction['type'] | undefined {\n\t\tconst { triggerId } = interaction;\n\n\t\tconst appId = this.invalidateTriggerId(triggerId);\n\t\tif (!appId) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (interaction.type) {\n\t\t\tcase 'errors': {\n\t\t\t\tconst { type, triggerId, viewId, appId, errors } = interaction;\n\t\t\t\tthis.events.emit(interaction.viewId, {\n\t\t\t\t\ttype,\n\t\t\t\t\ttriggerId,\n\t\t\t\t\tviewId,\n\t\t\t\t\tappId,\n\t\t\t\t\terrors,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'modal.open': {\n\t\t\t\tconst { view } = interaction;\n\t\t\t\tthis.openModal(view);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'modal.update':\n\t\t\tcase 'contextual_bar.update': {\n\t\t\t\tconst { type, triggerId, appId, view } = interaction;\n\t\t\t\tthis.events.emit(view.id, {\n\t\t\t\t\ttype,\n\t\t\t\t\ttriggerId,\n\t\t\t\t\tviewId: view.id,\n\t\t\t\t\tappId,\n\t\t\t\t\tview,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'modal.close': {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'banner.open': {\n\t\t\t\tconst { type, triggerId, ...view } = interaction;\n\t\t\t\tthis.openBanner(view);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'banner.update': {\n\t\t\t\tconst { type, triggerId, appId, view } = interaction;\n\t\t\t\tthis.events.emit(view.viewId, {\n\t\t\t\t\ttype,\n\t\t\t\t\ttriggerId,\n\t\t\t\t\tviewId: view.viewId,\n\t\t\t\t\tappId,\n\t\t\t\t\tview,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'banner.close': {\n\t\t\t\tconst { viewId } = interaction;\n\t\t\t\tthis.disposeView(viewId);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'contextual_bar.open': {\n\t\t\t\tconst { view } = interaction;\n\t\t\t\tthis.openContextualBar(view);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'contextual_bar.close': {\n\t\t\t\tconst { view } = interaction;\n\t\t\t\tthis.disposeView(view.id);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\texhaustiveCheck(interaction);\n\t\t}\n\n\t\treturn interaction.type;\n\t}\n\n\tpublic getInteractionPayloadByViewId(viewId: UiKit.ContextualBarView['id']) {\n\t\tif (!viewId) {\n\t\t\tthrow new Error('No viewId provided when checking for `user interaction payload`');\n\t\t}\n\n\t\treturn this.viewInstances.get(viewId)?.payload;\n\t}\n\n\tpublic openView(surface: 'modal', view: UiKit.ModalView): void;\n\n\tpublic openView(surface: 'banner', view: UiKit.BannerView): void;\n\n\tpublic openView(surface: 'contextual_bar', view: UiKit.ContextualBarView): void;\n\n\tpublic openView(surface: string, view: UiKit.View) {\n\t\tswitch (surface) {\n\t\t\tcase 'modal':\n\t\t\t\tthis.openModal(view as UiKit.ModalView);\n\t\t\t\tbreak;\n\n\t\t\tcase 'banner':\n\t\t\t\tthis.openBanner(view as UiKit.BannerView);\n\t\t\t\tbreak;\n\n\t\t\tcase 'contextual_bar':\n\t\t\t\tthis.openContextualBar(view as UiKit.ContextualBarView);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate openModal(view: UiKit.ModalView) {\n\t\tconst instance = imperativeModal.open({\n\t\t\tcomponent: UiKitModal,\n\t\t\tprops: {\n\t\t\t\tkey: view.id,\n\t\t\t\tinitialView: view,\n\t\t\t},\n\t\t});\n\n\t\tthis.viewInstances.set(view.id, {\n\t\t\tclose: () => {\n\t\t\t\tinstance.close();\n\t\t\t\tthis.viewInstances.delete(view.id);\n\t\t\t},\n\t\t});\n\t}\n\n\tprivate openBanner(view: UiKit.BannerView) {\n\t\tbanners.open(view);\n\t\tthis.viewInstances.set(view.viewId, {\n\t\t\tclose: () => {\n\t\t\t\tbanners.closeById(view.viewId);\n\t\t\t},\n\t\t});\n\t}\n\n\tprivate openContextualBar(view: UiKit.ContextualBarView) {\n\t\tthis.viewInstances.set(view.id, {\n\t\t\tpayload: {\n\t\t\t\tview,\n\t\t\t},\n\t\t\tclose: () => {\n\t\t\t\tthis.viewInstances.delete(view.id);\n\t\t\t},\n\t\t});\n\n\t\tconst routeName = this.router.getRouteName();\n\t\tconst routeParams = this.router.getRouteParameters();\n\n\t\tif (!routeName) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.router.navigate({\n\t\t\tname: routeName,\n\t\t\tparams: {\n\t\t\t\t...routeParams,\n\t\t\t\ttab: 'app',\n\t\t\t\tcontext: view.id,\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic disposeView(viewId: UiKit.ModalView['id'] | UiKit.BannerView['viewId'] | UiKit.ContextualBarView['id']) {\n\t\tconst instance = this.viewInstances.get(viewId);\n\t\tinstance?.close?.();\n\t\tthis.viewInstances.delete(viewId);\n\t}\n}\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"d56998a5c58e3ea12070373a7f6f780ef201bda3"}
