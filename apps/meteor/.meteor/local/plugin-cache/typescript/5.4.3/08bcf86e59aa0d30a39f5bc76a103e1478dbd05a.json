{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/helpers.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/marketplace/helpers.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/helpers.ts","inputSourceMap":{"version":3,"file":"client/views/marketplace/helpers.ts","sourceRoot":"","sources":["client/views/marketplace/helpers.ts"],"names":[],"mappings":"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","sourcesContent":["import { AppStatus } from '@rocket.chat/apps-engine/definition/AppStatus';\nimport type { App } from '@rocket.chat/core-typings';\nimport semver from 'semver';\n\n// import { t } from '../../../app/utils/client';\nimport { t } from '../../../app/utils/lib/i18n';\nimport { appErroredStatuses } from './helpers/appErroredStatuses';\n\nexport const appEnabledStatuses = [AppStatus.AUTO_ENABLED, AppStatus.MANUALLY_ENABLED];\n\nexport type Actions = 'update' | 'install' | 'purchase' | 'request';\n\ntype appButtonResponseProps = {\n\taction: Actions;\n\ticon?: 'reload' | 'warning';\n\tlabel: 'Update' | 'Install' | 'Subscribe' | 'See Pricing' | 'Try now' | 'Buy' | 'Request' | 'Requested';\n};\n\nexport type appStatusSpanResponseProps = {\n\ttype?: 'failed' | 'warning';\n\ticon?: 'warning' | 'checkmark-circled' | 'check';\n\tlabel:\n\t\t| 'Config Needed'\n\t\t| 'Failed'\n\t\t| 'Disabled'\n\t\t| 'Disabled*'\n\t\t| 'Trial period'\n\t\t| 'Enabled'\n\t\t| 'Enabled*'\n\t\t| 'Incompatible'\n\t\t| 'request'\n\t\t| 'requests'\n\t\t| 'Requested';\n\ttooltipText?: string;\n};\n\ntype appButtonPropsType = App & { isAdminUser: boolean; endUserRequested: boolean };\n\nexport const appButtonProps = ({\n\tinstalled,\n\tversion,\n\tmarketplaceVersion,\n\tisPurchased,\n\tprice,\n\tpurchaseType,\n\tsubscriptionInfo,\n\tpricingPlans,\n\tisEnterpriseOnly,\n\tversionIncompatible,\n\tisAdminUser,\n\t// TODO: Unify this two variables\n\trequestedEndUser,\n\tendUserRequested,\n}: appButtonPropsType): appButtonResponseProps | undefined => {\n\tif (!isAdminUser) {\n\t\tif (requestedEndUser || endUserRequested) {\n\t\t\treturn {\n\t\t\t\taction: 'request',\n\t\t\t\tlabel: 'Requested',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'request',\n\t\t\tlabel: 'Request',\n\t\t};\n\t}\n\n\tconst canUpdate = installed && version && marketplaceVersion && semver.lt(version, marketplaceVersion);\n\tif (canUpdate) {\n\t\tif (versionIncompatible) {\n\t\t\treturn {\n\t\t\t\taction: 'update',\n\t\t\t\ticon: 'warning',\n\t\t\t\tlabel: 'Update',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'update',\n\t\t\ticon: 'reload',\n\t\t\tlabel: 'Update',\n\t\t};\n\t}\n\n\tif (installed) {\n\t\treturn;\n\t}\n\n\tconst canDownload = isPurchased;\n\tif (canDownload) {\n\t\tif (versionIncompatible) {\n\t\t\treturn {\n\t\t\t\taction: 'install',\n\t\t\t\ticon: 'warning',\n\t\t\t\tlabel: 'Install',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'install',\n\t\t\tlabel: 'Install',\n\t\t};\n\t}\n\n\tconst canSubscribe = purchaseType === 'subscription' && !subscriptionInfo.status;\n\tif (canSubscribe) {\n\t\tconst cannotTry = pricingPlans.every((currentPricingPlan) => currentPricingPlan.trialDays === 0);\n\t\tconst isTierBased = pricingPlans.every((currentPricingPlan) => currentPricingPlan.tiers && currentPricingPlan.tiers.length > 0);\n\n\t\tif (versionIncompatible) {\n\t\t\treturn {\n\t\t\t\taction: 'purchase',\n\t\t\t\tlabel: 'Subscribe',\n\t\t\t\ticon: 'warning',\n\t\t\t};\n\t\t}\n\n\t\tif (cannotTry || isEnterpriseOnly) {\n\t\t\treturn {\n\t\t\t\taction: 'purchase',\n\t\t\t\tlabel: 'Subscribe',\n\t\t\t};\n\t\t}\n\n\t\tif (isTierBased) {\n\t\t\treturn {\n\t\t\t\taction: 'purchase',\n\t\t\t\tlabel: 'See Pricing',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'purchase',\n\t\t\tlabel: 'Try now',\n\t\t};\n\t}\n\n\tconst canBuy = price > 0;\n\tif (canBuy) {\n\t\tif (versionIncompatible) {\n\t\t\treturn {\n\t\t\t\taction: 'purchase',\n\t\t\t\tlabel: 'Buy',\n\t\t\t\ticon: 'warning',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'purchase',\n\t\t\tlabel: 'Buy',\n\t\t};\n\t}\n\n\tif (versionIncompatible) {\n\t\treturn {\n\t\t\taction: 'purchase',\n\t\t\tlabel: 'Install',\n\t\t\ticon: 'warning',\n\t\t};\n\t}\n\n\treturn {\n\t\taction: 'purchase',\n\t\tlabel: 'Install',\n\t};\n};\n\nexport const appIncompatibleStatusProps = (): appStatusSpanResponseProps => ({\n\ticon: 'check',\n\tlabel: 'Incompatible',\n\ttooltipText: t('App_version_incompatible_tooltip'),\n});\n\nexport const appStatusSpanProps = (\n\t{ installed, status, subscriptionInfo, appRequestStats, migrated }: App,\n\tisEnterprise?: boolean,\n\tcontext?: string,\n\tisAppDetailsPage?: boolean,\n): appStatusSpanResponseProps | undefined => {\n\tconst isEnabled = status && appEnabledStatuses.includes(status);\n\n\tif (installed) {\n\t\tif (isEnabled) {\n\t\t\treturn migrated && !isEnterprise\n\t\t\t\t? {\n\t\t\t\t\t\tlabel: 'Enabled*',\n\t\t\t\t\t\ttooltipText: t('Grandfathered_app'),\n\t\t\t\t  }\n\t\t\t\t: {\n\t\t\t\t\t\tlabel: 'Enabled',\n\t\t\t\t  };\n\t\t}\n\n\t\treturn migrated && !isEnterprise\n\t\t\t? {\n\t\t\t\t\tlabel: 'Disabled*',\n\t\t\t\t\ttooltipText: t('Grandfathered_app'),\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\ttype: 'warning',\n\t\t\t\t\tlabel: 'Disabled',\n\t\t\t  };\n\t}\n\n\tconst isFailed = status && appErroredStatuses.includes(status);\n\tif (isFailed) {\n\t\treturn {\n\t\t\ttype: 'failed',\n\t\t\ticon: 'warning',\n\t\t\tlabel: status === AppStatus.INVALID_SETTINGS_DISABLED ? 'Config Needed' : 'Failed',\n\t\t};\n\t}\n\n\tconst isOnTrialPeriod = subscriptionInfo && subscriptionInfo.status === 'trialing';\n\tif (isOnTrialPeriod) {\n\t\treturn {\n\t\t\ticon: 'checkmark-circled',\n\t\t\tlabel: 'Trial period',\n\t\t};\n\t}\n\n\tif (context === 'requested' && appRequestStats) {\n\t\tif (isAppDetailsPage) {\n\t\t\treturn {\n\t\t\t\tlabel: 'Requested',\n\t\t\t};\n\t\t}\n\n\t\tif (appRequestStats.totalUnseen) {\n\t\t\treturn {\n\t\t\t\tlabel: appRequestStats.totalUnseen > 1 ? 'requests' : 'request',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tlabel: appRequestStats.totalSeen > 1 ? 'requests' : 'request',\n\t\t};\n\t}\n};\n\nexport const appMultiStatusProps = (\n\tapp: App,\n\tisAppDetailsPage: boolean,\n\tcontext: string,\n\tisEnterprise: boolean,\n): appStatusSpanResponseProps[] => {\n\tconst status = appStatusSpanProps(app, isEnterprise, context, isAppDetailsPage);\n\tconst statuses = [];\n\n\tif (app?.versionIncompatible !== undefined && !isAppDetailsPage) {\n\t\tstatuses.push(appIncompatibleStatusProps());\n\t}\n\n\tif (status) {\n\t\tstatuses.push(status);\n\t}\n\n\treturn statuses;\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/helpers.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/marketplace/helpers.ts","inputSourceMap":{"version":3,"file":"client/views/marketplace/helpers.ts","sourceRoot":"","sources":["client/views/marketplace/helpers.ts"],"names":[],"mappings":"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","sourcesContent":["import { AppStatus } from '@rocket.chat/apps-engine/definition/AppStatus';\nimport type { App } from '@rocket.chat/core-typings';\nimport semver from 'semver';\n\n// import { t } from '../../../app/utils/client';\nimport { t } from '../../../app/utils/lib/i18n';\nimport { appErroredStatuses } from './helpers/appErroredStatuses';\n\nexport const appEnabledStatuses = [AppStatus.AUTO_ENABLED, AppStatus.MANUALLY_ENABLED];\n\nexport type Actions = 'update' | 'install' | 'purchase' | 'request';\n\ntype appButtonResponseProps = {\n\taction: Actions;\n\ticon?: 'reload' | 'warning';\n\tlabel: 'Update' | 'Install' | 'Subscribe' | 'See Pricing' | 'Try now' | 'Buy' | 'Request' | 'Requested';\n};\n\nexport type appStatusSpanResponseProps = {\n\ttype?: 'failed' | 'warning';\n\ticon?: 'warning' | 'checkmark-circled' | 'check';\n\tlabel:\n\t\t| 'Config Needed'\n\t\t| 'Failed'\n\t\t| 'Disabled'\n\t\t| 'Disabled*'\n\t\t| 'Trial period'\n\t\t| 'Enabled'\n\t\t| 'Enabled*'\n\t\t| 'Incompatible'\n\t\t| 'request'\n\t\t| 'requests'\n\t\t| 'Requested';\n\ttooltipText?: string;\n};\n\ntype appButtonPropsType = App & { isAdminUser: boolean; endUserRequested: boolean };\n\nexport const appButtonProps = ({\n\tinstalled,\n\tversion,\n\tmarketplaceVersion,\n\tisPurchased,\n\tprice,\n\tpurchaseType,\n\tsubscriptionInfo,\n\tpricingPlans,\n\tisEnterpriseOnly,\n\tversionIncompatible,\n\tisAdminUser,\n\t// TODO: Unify this two variables\n\trequestedEndUser,\n\tendUserRequested,\n}: appButtonPropsType): appButtonResponseProps | undefined => {\n\tif (!isAdminUser) {\n\t\tif (requestedEndUser || endUserRequested) {\n\t\t\treturn {\n\t\t\t\taction: 'request',\n\t\t\t\tlabel: 'Requested',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'request',\n\t\t\tlabel: 'Request',\n\t\t};\n\t}\n\n\tconst canUpdate = installed && version && marketplaceVersion && semver.lt(version, marketplaceVersion);\n\tif (canUpdate) {\n\t\tif (versionIncompatible) {\n\t\t\treturn {\n\t\t\t\taction: 'update',\n\t\t\t\ticon: 'warning',\n\t\t\t\tlabel: 'Update',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'update',\n\t\t\ticon: 'reload',\n\t\t\tlabel: 'Update',\n\t\t};\n\t}\n\n\tif (installed) {\n\t\treturn;\n\t}\n\n\tconst canDownload = isPurchased;\n\tif (canDownload) {\n\t\tif (versionIncompatible) {\n\t\t\treturn {\n\t\t\t\taction: 'install',\n\t\t\t\ticon: 'warning',\n\t\t\t\tlabel: 'Install',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'install',\n\t\t\tlabel: 'Install',\n\t\t};\n\t}\n\n\tconst canSubscribe = purchaseType === 'subscription' && !subscriptionInfo.status;\n\tif (canSubscribe) {\n\t\tconst cannotTry = pricingPlans.every((currentPricingPlan) => currentPricingPlan.trialDays === 0);\n\t\tconst isTierBased = pricingPlans.every((currentPricingPlan) => currentPricingPlan.tiers && currentPricingPlan.tiers.length > 0);\n\n\t\tif (versionIncompatible) {\n\t\t\treturn {\n\t\t\t\taction: 'purchase',\n\t\t\t\tlabel: 'Subscribe',\n\t\t\t\ticon: 'warning',\n\t\t\t};\n\t\t}\n\n\t\tif (cannotTry || isEnterpriseOnly) {\n\t\t\treturn {\n\t\t\t\taction: 'purchase',\n\t\t\t\tlabel: 'Subscribe',\n\t\t\t};\n\t\t}\n\n\t\tif (isTierBased) {\n\t\t\treturn {\n\t\t\t\taction: 'purchase',\n\t\t\t\tlabel: 'See Pricing',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'purchase',\n\t\t\tlabel: 'Try now',\n\t\t};\n\t}\n\n\tconst canBuy = price > 0;\n\tif (canBuy) {\n\t\tif (versionIncompatible) {\n\t\t\treturn {\n\t\t\t\taction: 'purchase',\n\t\t\t\tlabel: 'Buy',\n\t\t\t\ticon: 'warning',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'purchase',\n\t\t\tlabel: 'Buy',\n\t\t};\n\t}\n\n\tif (versionIncompatible) {\n\t\treturn {\n\t\t\taction: 'purchase',\n\t\t\tlabel: 'Install',\n\t\t\ticon: 'warning',\n\t\t};\n\t}\n\n\treturn {\n\t\taction: 'purchase',\n\t\tlabel: 'Install',\n\t};\n};\n\nexport const appIncompatibleStatusProps = (): appStatusSpanResponseProps => ({\n\ticon: 'check',\n\tlabel: 'Incompatible',\n\ttooltipText: t('App_version_incompatible_tooltip'),\n});\n\nexport const appStatusSpanProps = (\n\t{ installed, status, subscriptionInfo, appRequestStats, migrated }: App,\n\tisEnterprise?: boolean,\n\tcontext?: string,\n\tisAppDetailsPage?: boolean,\n): appStatusSpanResponseProps | undefined => {\n\tconst isEnabled = status && appEnabledStatuses.includes(status);\n\n\tif (installed) {\n\t\tif (isEnabled) {\n\t\t\treturn migrated && !isEnterprise\n\t\t\t\t? {\n\t\t\t\t\t\tlabel: 'Enabled*',\n\t\t\t\t\t\ttooltipText: t('Grandfathered_app'),\n\t\t\t\t  }\n\t\t\t\t: {\n\t\t\t\t\t\tlabel: 'Enabled',\n\t\t\t\t  };\n\t\t}\n\n\t\treturn migrated && !isEnterprise\n\t\t\t? {\n\t\t\t\t\tlabel: 'Disabled*',\n\t\t\t\t\ttooltipText: t('Grandfathered_app'),\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\ttype: 'warning',\n\t\t\t\t\tlabel: 'Disabled',\n\t\t\t  };\n\t}\n\n\tconst isFailed = status && appErroredStatuses.includes(status);\n\tif (isFailed) {\n\t\treturn {\n\t\t\ttype: 'failed',\n\t\t\ticon: 'warning',\n\t\t\tlabel: status === AppStatus.INVALID_SETTINGS_DISABLED ? 'Config Needed' : 'Failed',\n\t\t};\n\t}\n\n\tconst isOnTrialPeriod = subscriptionInfo && subscriptionInfo.status === 'trialing';\n\tif (isOnTrialPeriod) {\n\t\treturn {\n\t\t\ticon: 'checkmark-circled',\n\t\t\tlabel: 'Trial period',\n\t\t};\n\t}\n\n\tif (context === 'requested' && appRequestStats) {\n\t\tif (isAppDetailsPage) {\n\t\t\treturn {\n\t\t\t\tlabel: 'Requested',\n\t\t\t};\n\t\t}\n\n\t\tif (appRequestStats.totalUnseen) {\n\t\t\treturn {\n\t\t\t\tlabel: appRequestStats.totalUnseen > 1 ? 'requests' : 'request',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tlabel: appRequestStats.totalSeen > 1 ? 'requests' : 'request',\n\t\t};\n\t}\n};\n\nexport const appMultiStatusProps = (\n\tapp: App,\n\tisAppDetailsPage: boolean,\n\tcontext: string,\n\tisEnterprise: boolean,\n): appStatusSpanResponseProps[] => {\n\tconst status = appStatusSpanProps(app, isEnterprise, context, isAppDetailsPage);\n\tconst statuses = [];\n\n\tif (app?.versionIncompatible !== undefined && !isAppDetailsPage) {\n\t\tstatuses.push(appIncompatibleStatusProps());\n\t}\n\n\tif (status) {\n\t\tstatuses.push(status);\n\t}\n\n\treturn statuses;\n};\n"]}}},"code":"module.export({\n  appEnabledStatuses: function () {\n    return appEnabledStatuses;\n  },\n  appButtonProps: function () {\n    return appButtonProps;\n  },\n  appIncompatibleStatusProps: function () {\n    return appIncompatibleStatusProps;\n  },\n  appStatusSpanProps: function () {\n    return appStatusSpanProps;\n  },\n  appMultiStatusProps: function () {\n    return appMultiStatusProps;\n  }\n});\nvar AppStatus;\nmodule.link(\"@rocket.chat/apps-engine/definition/AppStatus\", {\n  AppStatus: function (v) {\n    AppStatus = v;\n  }\n}, 0);\nvar semver;\nmodule.link(\"semver\", {\n  \"default\": function (v) {\n    semver = v;\n  }\n}, 1);\nvar t;\nmodule.link(\"../../../app/utils/lib/i18n\", {\n  t: function (v) {\n    t = v;\n  }\n}, 2);\nvar appErroredStatuses;\nmodule.link(\"./helpers/appErroredStatuses\", {\n  appErroredStatuses: function (v) {\n    appErroredStatuses = v;\n  }\n}, 3);\nvar appEnabledStatuses = [AppStatus.AUTO_ENABLED, AppStatus.MANUALLY_ENABLED];\nvar appButtonProps = function (_ref) {\n  var installed = _ref.installed,\n    version = _ref.version,\n    marketplaceVersion = _ref.marketplaceVersion,\n    isPurchased = _ref.isPurchased,\n    price = _ref.price,\n    purchaseType = _ref.purchaseType,\n    subscriptionInfo = _ref.subscriptionInfo,\n    pricingPlans = _ref.pricingPlans,\n    isEnterpriseOnly = _ref.isEnterpriseOnly,\n    versionIncompatible = _ref.versionIncompatible,\n    isAdminUser = _ref.isAdminUser,\n    requestedEndUser = _ref.requestedEndUser,\n    endUserRequested = _ref.endUserRequested;\n  if (!isAdminUser) {\n    if (requestedEndUser || endUserRequested) {\n      return {\n        action: 'request',\n        label: 'Requested'\n      };\n    }\n    return {\n      action: 'request',\n      label: 'Request'\n    };\n  }\n  var canUpdate = installed && version && marketplaceVersion && semver.lt(version, marketplaceVersion);\n  if (canUpdate) {\n    if (versionIncompatible) {\n      return {\n        action: 'update',\n        icon: 'warning',\n        label: 'Update'\n      };\n    }\n    return {\n      action: 'update',\n      icon: 'reload',\n      label: 'Update'\n    };\n  }\n  if (installed) {\n    return;\n  }\n  var canDownload = isPurchased;\n  if (canDownload) {\n    if (versionIncompatible) {\n      return {\n        action: 'install',\n        icon: 'warning',\n        label: 'Install'\n      };\n    }\n    return {\n      action: 'install',\n      label: 'Install'\n    };\n  }\n  var canSubscribe = purchaseType === 'subscription' && !subscriptionInfo.status;\n  if (canSubscribe) {\n    var cannotTry = pricingPlans.every(function (currentPricingPlan) {\n      return currentPricingPlan.trialDays === 0;\n    });\n    var isTierBased = pricingPlans.every(function (currentPricingPlan) {\n      return currentPricingPlan.tiers && currentPricingPlan.tiers.length > 0;\n    });\n    if (versionIncompatible) {\n      return {\n        action: 'purchase',\n        label: 'Subscribe',\n        icon: 'warning'\n      };\n    }\n    if (cannotTry || isEnterpriseOnly) {\n      return {\n        action: 'purchase',\n        label: 'Subscribe'\n      };\n    }\n    if (isTierBased) {\n      return {\n        action: 'purchase',\n        label: 'See Pricing'\n      };\n    }\n    return {\n      action: 'purchase',\n      label: 'Try now'\n    };\n  }\n  var canBuy = price > 0;\n  if (canBuy) {\n    if (versionIncompatible) {\n      return {\n        action: 'purchase',\n        label: 'Buy',\n        icon: 'warning'\n      };\n    }\n    return {\n      action: 'purchase',\n      label: 'Buy'\n    };\n  }\n  if (versionIncompatible) {\n    return {\n      action: 'purchase',\n      label: 'Install',\n      icon: 'warning'\n    };\n  }\n  return {\n    action: 'purchase',\n    label: 'Install'\n  };\n};\nvar appIncompatibleStatusProps = function () {\n  return {\n    icon: 'check',\n    label: 'Incompatible',\n    tooltipText: t('App_version_incompatible_tooltip')\n  };\n};\nvar appStatusSpanProps = function (_ref2, isEnterprise, context, isAppDetailsPage) {\n  var installed = _ref2.installed,\n    status = _ref2.status,\n    subscriptionInfo = _ref2.subscriptionInfo,\n    appRequestStats = _ref2.appRequestStats,\n    migrated = _ref2.migrated;\n  var isEnabled = status && appEnabledStatuses.includes(status);\n  if (installed) {\n    if (isEnabled) {\n      return migrated && !isEnterprise ? {\n        label: 'Enabled*',\n        tooltipText: t('Grandfathered_app')\n      } : {\n        label: 'Enabled'\n      };\n    }\n    return migrated && !isEnterprise ? {\n      label: 'Disabled*',\n      tooltipText: t('Grandfathered_app')\n    } : {\n      type: 'warning',\n      label: 'Disabled'\n    };\n  }\n  var isFailed = status && appErroredStatuses.includes(status);\n  if (isFailed) {\n    return {\n      type: 'failed',\n      icon: 'warning',\n      label: status === AppStatus.INVALID_SETTINGS_DISABLED ? 'Config Needed' : 'Failed'\n    };\n  }\n  var isOnTrialPeriod = subscriptionInfo && subscriptionInfo.status === 'trialing';\n  if (isOnTrialPeriod) {\n    return {\n      icon: 'checkmark-circled',\n      label: 'Trial period'\n    };\n  }\n  if (context === 'requested' && appRequestStats) {\n    if (isAppDetailsPage) {\n      return {\n        label: 'Requested'\n      };\n    }\n    if (appRequestStats.totalUnseen) {\n      return {\n        label: appRequestStats.totalUnseen > 1 ? 'requests' : 'request'\n      };\n    }\n    return {\n      label: appRequestStats.totalSeen > 1 ? 'requests' : 'request'\n    };\n  }\n};\nvar appMultiStatusProps = function (app, isAppDetailsPage, context, isEnterprise) {\n  var status = appStatusSpanProps(app, isEnterprise, context, isAppDetailsPage);\n  var statuses = [];\n  if ((app === null || app === void 0 ? void 0 : app.versionIncompatible) !== undefined && !isAppDetailsPage) {\n    statuses.push(appIncompatibleStatusProps());\n  }\n  if (status) {\n    statuses.push(status);\n  }\n  return statuses;\n};","map":{"version":3,"names":["module","export","appEnabledStatuses","appButtonProps","appIncompatibleStatusProps","appStatusSpanProps","appMultiStatusProps","AppStatus","link","v","semver","default","t","appErroredStatuses","AUTO_ENABLED","MANUALLY_ENABLED","_ref","installed","version","marketplaceVersion","isPurchased","price","purchaseType","subscriptionInfo","pricingPlans","isEnterpriseOnly","versionIncompatible","isAdminUser","requestedEndUser","endUserRequested","action","label","canUpdate","lt","icon","canDownload","canSubscribe","status","cannotTry","every","currentPricingPlan","trialDays","isTierBased","tiers","length","canBuy","tooltipText","_ref2","isEnterprise","context","isAppDetailsPage","appRequestStats","migrated","isEnabled","includes","type","isFailed","INVALID_SETTINGS_DISABLED","isOnTrialPeriod","totalUnseen","totalSeen","app","statuses","undefined","push"],"sources":["client/views/marketplace/helpers.ts"],"sourcesContent":["import { AppStatus } from '@rocket.chat/apps-engine/definition/AppStatus';\nimport type { App } from '@rocket.chat/core-typings';\nimport semver from 'semver';\n\n// import { t } from '../../../app/utils/client';\nimport { t } from '../../../app/utils/lib/i18n';\nimport { appErroredStatuses } from './helpers/appErroredStatuses';\n\nexport const appEnabledStatuses = [AppStatus.AUTO_ENABLED, AppStatus.MANUALLY_ENABLED];\n\nexport type Actions = 'update' | 'install' | 'purchase' | 'request';\n\ntype appButtonResponseProps = {\n\taction: Actions;\n\ticon?: 'reload' | 'warning';\n\tlabel: 'Update' | 'Install' | 'Subscribe' | 'See Pricing' | 'Try now' | 'Buy' | 'Request' | 'Requested';\n};\n\nexport type appStatusSpanResponseProps = {\n\ttype?: 'failed' | 'warning';\n\ticon?: 'warning' | 'checkmark-circled' | 'check';\n\tlabel:\n\t\t| 'Config Needed'\n\t\t| 'Failed'\n\t\t| 'Disabled'\n\t\t| 'Disabled*'\n\t\t| 'Trial period'\n\t\t| 'Enabled'\n\t\t| 'Enabled*'\n\t\t| 'Incompatible'\n\t\t| 'request'\n\t\t| 'requests'\n\t\t| 'Requested';\n\ttooltipText?: string;\n};\n\ntype appButtonPropsType = App & { isAdminUser: boolean; endUserRequested: boolean };\n\nexport const appButtonProps = ({\n\tinstalled,\n\tversion,\n\tmarketplaceVersion,\n\tisPurchased,\n\tprice,\n\tpurchaseType,\n\tsubscriptionInfo,\n\tpricingPlans,\n\tisEnterpriseOnly,\n\tversionIncompatible,\n\tisAdminUser,\n\t// TODO: Unify this two variables\n\trequestedEndUser,\n\tendUserRequested,\n}: appButtonPropsType): appButtonResponseProps | undefined => {\n\tif (!isAdminUser) {\n\t\tif (requestedEndUser || endUserRequested) {\n\t\t\treturn {\n\t\t\t\taction: 'request',\n\t\t\t\tlabel: 'Requested',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'request',\n\t\t\tlabel: 'Request',\n\t\t};\n\t}\n\n\tconst canUpdate = installed && version && marketplaceVersion && semver.lt(version, marketplaceVersion);\n\tif (canUpdate) {\n\t\tif (versionIncompatible) {\n\t\t\treturn {\n\t\t\t\taction: 'update',\n\t\t\t\ticon: 'warning',\n\t\t\t\tlabel: 'Update',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'update',\n\t\t\ticon: 'reload',\n\t\t\tlabel: 'Update',\n\t\t};\n\t}\n\n\tif (installed) {\n\t\treturn;\n\t}\n\n\tconst canDownload = isPurchased;\n\tif (canDownload) {\n\t\tif (versionIncompatible) {\n\t\t\treturn {\n\t\t\t\taction: 'install',\n\t\t\t\ticon: 'warning',\n\t\t\t\tlabel: 'Install',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'install',\n\t\t\tlabel: 'Install',\n\t\t};\n\t}\n\n\tconst canSubscribe = purchaseType === 'subscription' && !subscriptionInfo.status;\n\tif (canSubscribe) {\n\t\tconst cannotTry = pricingPlans.every((currentPricingPlan) => currentPricingPlan.trialDays === 0);\n\t\tconst isTierBased = pricingPlans.every((currentPricingPlan) => currentPricingPlan.tiers && currentPricingPlan.tiers.length > 0);\n\n\t\tif (versionIncompatible) {\n\t\t\treturn {\n\t\t\t\taction: 'purchase',\n\t\t\t\tlabel: 'Subscribe',\n\t\t\t\ticon: 'warning',\n\t\t\t};\n\t\t}\n\n\t\tif (cannotTry || isEnterpriseOnly) {\n\t\t\treturn {\n\t\t\t\taction: 'purchase',\n\t\t\t\tlabel: 'Subscribe',\n\t\t\t};\n\t\t}\n\n\t\tif (isTierBased) {\n\t\t\treturn {\n\t\t\t\taction: 'purchase',\n\t\t\t\tlabel: 'See Pricing',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'purchase',\n\t\t\tlabel: 'Try now',\n\t\t};\n\t}\n\n\tconst canBuy = price > 0;\n\tif (canBuy) {\n\t\tif (versionIncompatible) {\n\t\t\treturn {\n\t\t\t\taction: 'purchase',\n\t\t\t\tlabel: 'Buy',\n\t\t\t\ticon: 'warning',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\taction: 'purchase',\n\t\t\tlabel: 'Buy',\n\t\t};\n\t}\n\n\tif (versionIncompatible) {\n\t\treturn {\n\t\t\taction: 'purchase',\n\t\t\tlabel: 'Install',\n\t\t\ticon: 'warning',\n\t\t};\n\t}\n\n\treturn {\n\t\taction: 'purchase',\n\t\tlabel: 'Install',\n\t};\n};\n\nexport const appIncompatibleStatusProps = (): appStatusSpanResponseProps => ({\n\ticon: 'check',\n\tlabel: 'Incompatible',\n\ttooltipText: t('App_version_incompatible_tooltip'),\n});\n\nexport const appStatusSpanProps = (\n\t{ installed, status, subscriptionInfo, appRequestStats, migrated }: App,\n\tisEnterprise?: boolean,\n\tcontext?: string,\n\tisAppDetailsPage?: boolean,\n): appStatusSpanResponseProps | undefined => {\n\tconst isEnabled = status && appEnabledStatuses.includes(status);\n\n\tif (installed) {\n\t\tif (isEnabled) {\n\t\t\treturn migrated && !isEnterprise\n\t\t\t\t? {\n\t\t\t\t\t\tlabel: 'Enabled*',\n\t\t\t\t\t\ttooltipText: t('Grandfathered_app'),\n\t\t\t\t  }\n\t\t\t\t: {\n\t\t\t\t\t\tlabel: 'Enabled',\n\t\t\t\t  };\n\t\t}\n\n\t\treturn migrated && !isEnterprise\n\t\t\t? {\n\t\t\t\t\tlabel: 'Disabled*',\n\t\t\t\t\ttooltipText: t('Grandfathered_app'),\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\ttype: 'warning',\n\t\t\t\t\tlabel: 'Disabled',\n\t\t\t  };\n\t}\n\n\tconst isFailed = status && appErroredStatuses.includes(status);\n\tif (isFailed) {\n\t\treturn {\n\t\t\ttype: 'failed',\n\t\t\ticon: 'warning',\n\t\t\tlabel: status === AppStatus.INVALID_SETTINGS_DISABLED ? 'Config Needed' : 'Failed',\n\t\t};\n\t}\n\n\tconst isOnTrialPeriod = subscriptionInfo && subscriptionInfo.status === 'trialing';\n\tif (isOnTrialPeriod) {\n\t\treturn {\n\t\t\ticon: 'checkmark-circled',\n\t\t\tlabel: 'Trial period',\n\t\t};\n\t}\n\n\tif (context === 'requested' && appRequestStats) {\n\t\tif (isAppDetailsPage) {\n\t\t\treturn {\n\t\t\t\tlabel: 'Requested',\n\t\t\t};\n\t\t}\n\n\t\tif (appRequestStats.totalUnseen) {\n\t\t\treturn {\n\t\t\t\tlabel: appRequestStats.totalUnseen > 1 ? 'requests' : 'request',\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tlabel: appRequestStats.totalSeen > 1 ? 'requests' : 'request',\n\t\t};\n\t}\n};\n\nexport const appMultiStatusProps = (\n\tapp: App,\n\tisAppDetailsPage: boolean,\n\tcontext: string,\n\tisEnterprise: boolean,\n): appStatusSpanResponseProps[] => {\n\tconst status = appStatusSpanProps(app, isEnterprise, context, isAppDetailsPage);\n\tconst statuses = [];\n\n\tif (app?.versionIncompatible !== undefined && !isAppDetailsPage) {\n\t\tstatuses.push(appIncompatibleStatusProps());\n\t}\n\n\tif (status) {\n\t\tstatuses.push(status);\n\t}\n\n\treturn statuses;\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"08bcf86e59aa0d30a39f5bc76a103e1478dbd05a"}
