{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/hooks/useApplyButtonFilters.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/hooks/useApplyButtonFilters.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/hooks/useApplyButtonFilters.ts","inputSourceMap":{"version":3,"file":"client/hooks/useApplyButtonFilters.ts","sourceRoot":"","sources":["client/hooks/useApplyButtonFilters.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IUIActionButton } from '@rocket.chat/apps-engine/definition/ui';\nimport { RoomTypeFilter } from '@rocket.chat/apps-engine/definition/ui';\nimport type { IRoom } from '@rocket.chat/core-typings';\nimport {\n\tisDirectMessageRoom,\n\tisMultipleDirectMessageRoom,\n\tisOmnichannelRoom,\n\tisPrivateDiscussion,\n\tisPrivateTeamRoom,\n\tisPublicDiscussion,\n\tisPublicTeamRoom,\n} from '@rocket.chat/core-typings';\nimport { AuthorizationContext, useUserId } from '@rocket.chat/ui-contexts';\nimport { useCallback, useContext } from 'react';\n\nimport { useRoom } from '../views/room/contexts/RoomContext';\n\nconst enumToFilter: { [k in RoomTypeFilter]: (room: IRoom) => boolean } = {\n\t[RoomTypeFilter.PUBLIC_CHANNEL]: (room) => room.t === 'c',\n\t[RoomTypeFilter.PRIVATE_CHANNEL]: (room) => room.t === 'p',\n\t[RoomTypeFilter.PUBLIC_TEAM]: isPublicTeamRoom,\n\t[RoomTypeFilter.PRIVATE_TEAM]: isPrivateTeamRoom,\n\t[RoomTypeFilter.PUBLIC_DISCUSSION]: isPublicDiscussion,\n\t[RoomTypeFilter.PRIVATE_DISCUSSION]: isPrivateDiscussion,\n\t[RoomTypeFilter.DIRECT]: isDirectMessageRoom,\n\t[RoomTypeFilter.DIRECT_MULTIPLE]: isMultipleDirectMessageRoom,\n\t[RoomTypeFilter.LIVE_CHAT]: isOmnichannelRoom,\n};\n\nconst applyRoomFilter = (button: IUIActionButton, room: IRoom): boolean => {\n\tconst { roomTypes } = button.when || {};\n\treturn !roomTypes || roomTypes.some((filter): boolean => enumToFilter[filter]?.(room));\n};\n\nconst applyCategoryFilter = (button: IUIActionButton, category: string): boolean => {\n\tconst { category: buttonCategory } = button;\n\n\tif (category === 'default') {\n\t\treturn !buttonCategory || buttonCategory === 'default';\n\t}\n\n\treturn buttonCategory === category;\n};\n\nexport const useApplyButtonFilters = (category = 'default'): ((button: IUIActionButton) => boolean) => {\n\tconst room = useRoom();\n\tif (!room) {\n\t\tthrow new Error('useApplyButtonFilters must be used inside a room context');\n\t}\n\tconst applyAuthFilter = useApplyButtonAuthFilter();\n\treturn useCallback(\n\t\t(button: IUIActionButton) =>\n\t\t\tapplyAuthFilter(button) && (!room || applyRoomFilter(button, room)) && applyCategoryFilter(button, category),\n\t\t[applyAuthFilter, category, room],\n\t);\n};\n\nexport const useApplyButtonAuthFilter = (): ((button: IUIActionButton) => boolean) => {\n\tconst uid = useUserId();\n\n\tconst { queryAllPermissions, queryAtLeastOnePermission, queryRole } = useContext(AuthorizationContext);\n\n\treturn useCallback(\n\t\t(button: IUIActionButton, room?: IRoom) => {\n\t\t\tconst { hasAllPermissions, hasOnePermission, hasAllRoles, hasOneRole } = button.when || {};\n\n\t\t\tconst hasAllPermissionsResult = hasAllPermissions ? queryAllPermissions(hasAllPermissions)[1]() : true;\n\t\t\tconst hasOnePermissionResult = hasOnePermission ? queryAtLeastOnePermission(hasOnePermission)[1]() : true;\n\t\t\tconst hasAllRolesResult = hasAllRoles ? !!uid && hasAllRoles.every((role) => queryRole(role, room?._id)) : true;\n\t\t\tconst hasOneRoleResult = hasOneRole ? !!uid && hasOneRole.some((role) => queryRole(role, room?._id)[1]()) : true;\n\n\t\t\treturn hasAllPermissionsResult && hasOnePermissionResult && hasAllRolesResult && hasOneRoleResult;\n\t\t},\n\t\t[queryAllPermissions, queryAtLeastOnePermission, queryRole, uid],\n\t);\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/hooks/useApplyButtonFilters.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/hooks/useApplyButtonFilters.ts","inputSourceMap":{"version":3,"file":"client/hooks/useApplyButtonFilters.ts","sourceRoot":"","sources":["client/hooks/useApplyButtonFilters.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IUIActionButton } from '@rocket.chat/apps-engine/definition/ui';\nimport { RoomTypeFilter } from '@rocket.chat/apps-engine/definition/ui';\nimport type { IRoom } from '@rocket.chat/core-typings';\nimport {\n\tisDirectMessageRoom,\n\tisMultipleDirectMessageRoom,\n\tisOmnichannelRoom,\n\tisPrivateDiscussion,\n\tisPrivateTeamRoom,\n\tisPublicDiscussion,\n\tisPublicTeamRoom,\n} from '@rocket.chat/core-typings';\nimport { AuthorizationContext, useUserId } from '@rocket.chat/ui-contexts';\nimport { useCallback, useContext } from 'react';\n\nimport { useRoom } from '../views/room/contexts/RoomContext';\n\nconst enumToFilter: { [k in RoomTypeFilter]: (room: IRoom) => boolean } = {\n\t[RoomTypeFilter.PUBLIC_CHANNEL]: (room) => room.t === 'c',\n\t[RoomTypeFilter.PRIVATE_CHANNEL]: (room) => room.t === 'p',\n\t[RoomTypeFilter.PUBLIC_TEAM]: isPublicTeamRoom,\n\t[RoomTypeFilter.PRIVATE_TEAM]: isPrivateTeamRoom,\n\t[RoomTypeFilter.PUBLIC_DISCUSSION]: isPublicDiscussion,\n\t[RoomTypeFilter.PRIVATE_DISCUSSION]: isPrivateDiscussion,\n\t[RoomTypeFilter.DIRECT]: isDirectMessageRoom,\n\t[RoomTypeFilter.DIRECT_MULTIPLE]: isMultipleDirectMessageRoom,\n\t[RoomTypeFilter.LIVE_CHAT]: isOmnichannelRoom,\n};\n\nconst applyRoomFilter = (button: IUIActionButton, room: IRoom): boolean => {\n\tconst { roomTypes } = button.when || {};\n\treturn !roomTypes || roomTypes.some((filter): boolean => enumToFilter[filter]?.(room));\n};\n\nconst applyCategoryFilter = (button: IUIActionButton, category: string): boolean => {\n\tconst { category: buttonCategory } = button;\n\n\tif (category === 'default') {\n\t\treturn !buttonCategory || buttonCategory === 'default';\n\t}\n\n\treturn buttonCategory === category;\n};\n\nexport const useApplyButtonFilters = (category = 'default'): ((button: IUIActionButton) => boolean) => {\n\tconst room = useRoom();\n\tif (!room) {\n\t\tthrow new Error('useApplyButtonFilters must be used inside a room context');\n\t}\n\tconst applyAuthFilter = useApplyButtonAuthFilter();\n\treturn useCallback(\n\t\t(button: IUIActionButton) =>\n\t\t\tapplyAuthFilter(button) && (!room || applyRoomFilter(button, room)) && applyCategoryFilter(button, category),\n\t\t[applyAuthFilter, category, room],\n\t);\n};\n\nexport const useApplyButtonAuthFilter = (): ((button: IUIActionButton) => boolean) => {\n\tconst uid = useUserId();\n\n\tconst { queryAllPermissions, queryAtLeastOnePermission, queryRole } = useContext(AuthorizationContext);\n\n\treturn useCallback(\n\t\t(button: IUIActionButton, room?: IRoom) => {\n\t\t\tconst { hasAllPermissions, hasOnePermission, hasAllRoles, hasOneRole } = button.when || {};\n\n\t\t\tconst hasAllPermissionsResult = hasAllPermissions ? queryAllPermissions(hasAllPermissions)[1]() : true;\n\t\t\tconst hasOnePermissionResult = hasOnePermission ? queryAtLeastOnePermission(hasOnePermission)[1]() : true;\n\t\t\tconst hasAllRolesResult = hasAllRoles ? !!uid && hasAllRoles.every((role) => queryRole(role, room?._id)) : true;\n\t\t\tconst hasOneRoleResult = hasOneRole ? !!uid && hasOneRole.some((role) => queryRole(role, room?._id)[1]()) : true;\n\n\t\t\treturn hasAllPermissionsResult && hasOnePermissionResult && hasAllRolesResult && hasOneRoleResult;\n\t\t},\n\t\t[queryAllPermissions, queryAtLeastOnePermission, queryRole, uid],\n\t);\n};\n"]}}},"code":"module.export({\n  useApplyButtonFilters: () => useApplyButtonFilters,\n  useApplyButtonAuthFilter: () => useApplyButtonAuthFilter\n});\nlet RoomTypeFilter;\nmodule.link(\"@rocket.chat/apps-engine/definition/ui\", {\n  RoomTypeFilter(v) {\n    RoomTypeFilter = v;\n  }\n}, 0);\nlet isDirectMessageRoom, isMultipleDirectMessageRoom, isOmnichannelRoom, isPrivateDiscussion, isPrivateTeamRoom, isPublicDiscussion, isPublicTeamRoom;\nmodule.link(\"@rocket.chat/core-typings\", {\n  isDirectMessageRoom(v) {\n    isDirectMessageRoom = v;\n  },\n  isMultipleDirectMessageRoom(v) {\n    isMultipleDirectMessageRoom = v;\n  },\n  isOmnichannelRoom(v) {\n    isOmnichannelRoom = v;\n  },\n  isPrivateDiscussion(v) {\n    isPrivateDiscussion = v;\n  },\n  isPrivateTeamRoom(v) {\n    isPrivateTeamRoom = v;\n  },\n  isPublicDiscussion(v) {\n    isPublicDiscussion = v;\n  },\n  isPublicTeamRoom(v) {\n    isPublicTeamRoom = v;\n  }\n}, 1);\nlet AuthorizationContext, useUserId;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  AuthorizationContext(v) {\n    AuthorizationContext = v;\n  },\n  useUserId(v) {\n    useUserId = v;\n  }\n}, 2);\nlet useCallback, useContext;\nmodule.link(\"react\", {\n  useCallback(v) {\n    useCallback = v;\n  },\n  useContext(v) {\n    useContext = v;\n  }\n}, 3);\nlet useRoom;\nmodule.link(\"../views/room/contexts/RoomContext\", {\n  useRoom(v) {\n    useRoom = v;\n  }\n}, 4);\nconst enumToFilter = {\n  [RoomTypeFilter.PUBLIC_CHANNEL]: room => room.t === 'c',\n  [RoomTypeFilter.PRIVATE_CHANNEL]: room => room.t === 'p',\n  [RoomTypeFilter.PUBLIC_TEAM]: isPublicTeamRoom,\n  [RoomTypeFilter.PRIVATE_TEAM]: isPrivateTeamRoom,\n  [RoomTypeFilter.PUBLIC_DISCUSSION]: isPublicDiscussion,\n  [RoomTypeFilter.PRIVATE_DISCUSSION]: isPrivateDiscussion,\n  [RoomTypeFilter.DIRECT]: isDirectMessageRoom,\n  [RoomTypeFilter.DIRECT_MULTIPLE]: isMultipleDirectMessageRoom,\n  [RoomTypeFilter.LIVE_CHAT]: isOmnichannelRoom\n};\nconst applyRoomFilter = (button, room) => {\n  const {\n    roomTypes\n  } = button.when || {};\n  return !roomTypes || roomTypes.some(filter => {\n    var _enumToFilter$filter;\n    return (_enumToFilter$filter = enumToFilter[filter]) === null || _enumToFilter$filter === void 0 ? void 0 : _enumToFilter$filter.call(enumToFilter, room);\n  });\n};\nconst applyCategoryFilter = (button, category) => {\n  const {\n    category: buttonCategory\n  } = button;\n  if (category === 'default') {\n    return !buttonCategory || buttonCategory === 'default';\n  }\n  return buttonCategory === category;\n};\nconst useApplyButtonFilters = function () {\n  let category = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'default';\n  const room = useRoom();\n  if (!room) {\n    throw new Error('useApplyButtonFilters must be used inside a room context');\n  }\n  const applyAuthFilter = useApplyButtonAuthFilter();\n  return useCallback(button => applyAuthFilter(button) && (!room || applyRoomFilter(button, room)) && applyCategoryFilter(button, category), [applyAuthFilter, category, room]);\n};\nconst useApplyButtonAuthFilter = () => {\n  const uid = useUserId();\n  const {\n    queryAllPermissions,\n    queryAtLeastOnePermission,\n    queryRole\n  } = useContext(AuthorizationContext);\n  return useCallback((button, room) => {\n    const {\n      hasAllPermissions,\n      hasOnePermission,\n      hasAllRoles,\n      hasOneRole\n    } = button.when || {};\n    const hasAllPermissionsResult = hasAllPermissions ? queryAllPermissions(hasAllPermissions)[1]() : true;\n    const hasOnePermissionResult = hasOnePermission ? queryAtLeastOnePermission(hasOnePermission)[1]() : true;\n    const hasAllRolesResult = hasAllRoles ? !!uid && hasAllRoles.every(role => queryRole(role, room === null || room === void 0 ? void 0 : room._id)) : true;\n    const hasOneRoleResult = hasOneRole ? !!uid && hasOneRole.some(role => queryRole(role, room === null || room === void 0 ? void 0 : room._id)[1]()) : true;\n    return hasAllPermissionsResult && hasOnePermissionResult && hasAllRolesResult && hasOneRoleResult;\n  }, [queryAllPermissions, queryAtLeastOnePermission, queryRole, uid]);\n};","map":{"version":3,"names":["module","export","useApplyButtonFilters","useApplyButtonAuthFilter","RoomTypeFilter","link","v","isDirectMessageRoom","isMultipleDirectMessageRoom","isOmnichannelRoom","isPrivateDiscussion","isPrivateTeamRoom","isPublicDiscussion","isPublicTeamRoom","AuthorizationContext","useUserId","useCallback","useContext","useRoom","enumToFilter","PUBLIC_CHANNEL","room","t","PRIVATE_CHANNEL","PUBLIC_TEAM","PRIVATE_TEAM","PUBLIC_DISCUSSION","PRIVATE_DISCUSSION","DIRECT","DIRECT_MULTIPLE","LIVE_CHAT","applyRoomFilter","button","roomTypes","when","some","filter","_enumToFilter$filter","call","applyCategoryFilter","category","buttonCategory","arguments","length","undefined","Error","applyAuthFilter","uid","queryAllPermissions","queryAtLeastOnePermission","queryRole","hasAllPermissions","hasOnePermission","hasAllRoles","hasOneRole","hasAllPermissionsResult","hasOnePermissionResult","hasAllRolesResult","every","role","_id","hasOneRoleResult"],"sources":["client/hooks/useApplyButtonFilters.ts"],"sourcesContent":["import type { IUIActionButton } from '@rocket.chat/apps-engine/definition/ui';\nimport { RoomTypeFilter } from '@rocket.chat/apps-engine/definition/ui';\nimport type { IRoom } from '@rocket.chat/core-typings';\nimport {\n\tisDirectMessageRoom,\n\tisMultipleDirectMessageRoom,\n\tisOmnichannelRoom,\n\tisPrivateDiscussion,\n\tisPrivateTeamRoom,\n\tisPublicDiscussion,\n\tisPublicTeamRoom,\n} from '@rocket.chat/core-typings';\nimport { AuthorizationContext, useUserId } from '@rocket.chat/ui-contexts';\nimport { useCallback, useContext } from 'react';\n\nimport { useRoom } from '../views/room/contexts/RoomContext';\n\nconst enumToFilter: { [k in RoomTypeFilter]: (room: IRoom) => boolean } = {\n\t[RoomTypeFilter.PUBLIC_CHANNEL]: (room) => room.t === 'c',\n\t[RoomTypeFilter.PRIVATE_CHANNEL]: (room) => room.t === 'p',\n\t[RoomTypeFilter.PUBLIC_TEAM]: isPublicTeamRoom,\n\t[RoomTypeFilter.PRIVATE_TEAM]: isPrivateTeamRoom,\n\t[RoomTypeFilter.PUBLIC_DISCUSSION]: isPublicDiscussion,\n\t[RoomTypeFilter.PRIVATE_DISCUSSION]: isPrivateDiscussion,\n\t[RoomTypeFilter.DIRECT]: isDirectMessageRoom,\n\t[RoomTypeFilter.DIRECT_MULTIPLE]: isMultipleDirectMessageRoom,\n\t[RoomTypeFilter.LIVE_CHAT]: isOmnichannelRoom,\n};\n\nconst applyRoomFilter = (button: IUIActionButton, room: IRoom): boolean => {\n\tconst { roomTypes } = button.when || {};\n\treturn !roomTypes || roomTypes.some((filter): boolean => enumToFilter[filter]?.(room));\n};\n\nconst applyCategoryFilter = (button: IUIActionButton, category: string): boolean => {\n\tconst { category: buttonCategory } = button;\n\n\tif (category === 'default') {\n\t\treturn !buttonCategory || buttonCategory === 'default';\n\t}\n\n\treturn buttonCategory === category;\n};\n\nexport const useApplyButtonFilters = (category = 'default'): ((button: IUIActionButton) => boolean) => {\n\tconst room = useRoom();\n\tif (!room) {\n\t\tthrow new Error('useApplyButtonFilters must be used inside a room context');\n\t}\n\tconst applyAuthFilter = useApplyButtonAuthFilter();\n\treturn useCallback(\n\t\t(button: IUIActionButton) =>\n\t\t\tapplyAuthFilter(button) && (!room || applyRoomFilter(button, room)) && applyCategoryFilter(button, category),\n\t\t[applyAuthFilter, category, room],\n\t);\n};\n\nexport const useApplyButtonAuthFilter = (): ((button: IUIActionButton) => boolean) => {\n\tconst uid = useUserId();\n\n\tconst { queryAllPermissions, queryAtLeastOnePermission, queryRole } = useContext(AuthorizationContext);\n\n\treturn useCallback(\n\t\t(button: IUIActionButton, room?: IRoom) => {\n\t\t\tconst { hasAllPermissions, hasOnePermission, hasAllRoles, hasOneRole } = button.when || {};\n\n\t\t\tconst hasAllPermissionsResult = hasAllPermissions ? queryAllPermissions(hasAllPermissions)[1]() : true;\n\t\t\tconst hasOnePermissionResult = hasOnePermission ? queryAtLeastOnePermission(hasOnePermission)[1]() : true;\n\t\t\tconst hasAllRolesResult = hasAllRoles ? !!uid && hasAllRoles.every((role) => queryRole(role, room?._id)) : true;\n\t\t\tconst hasOneRoleResult = hasOneRole ? !!uid && hasOneRole.some((role) => queryRole(role, room?._id)[1]()) : true;\n\n\t\t\treturn hasAllPermissionsResult && hasOnePermissionResult && hasAllRolesResult && hasOneRoleResult;\n\t\t},\n\t\t[queryAllPermissions, queryAtLeastOnePermission, queryRole, uid],\n\t);\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"946a62a3da5b09b86ed207c4f9cb772f3ed3af3c"}
