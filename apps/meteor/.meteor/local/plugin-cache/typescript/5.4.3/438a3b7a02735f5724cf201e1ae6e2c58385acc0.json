{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebarv2/RoomList/SidebarItemTemplateWithData.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/sidebarv2/RoomList/SidebarItemTemplateWithData.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebarv2/RoomList/SidebarItemTemplateWithData.tsx","inputSourceMap":{"version":3,"file":"client/sidebarv2/RoomList/SidebarItemTemplateWithData.tsx","sourceRoot":"","sources":["client/sidebarv2/RoomList/SidebarItemTemplateWithData.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, IRoom, ISubscription } from '@rocket.chat/core-typings';\nimport { isDirectMessageRoom, isMultipleDirectMessageRoom, isOmnichannelRoom, isVideoConfMessage } from '@rocket.chat/core-typings';\nimport { SidebarV2Action, SidebarV2Actions, SidebarV2ItemBadge, SidebarV2ItemIcon } from '@rocket.chat/fuselage';\nimport { useLayout } from '@rocket.chat/ui-contexts';\nimport type { TFunction } from 'i18next';\nimport type { AllHTMLAttributes, ComponentType, ReactElement, ReactNode } from 'react';\nimport React, { memo, useMemo } from 'react';\n\nimport { RoomIcon } from '../../components/RoomIcon';\nimport { roomCoordinator } from '../../lib/rooms/roomCoordinator';\nimport { isIOsDevice } from '../../lib/utils/isIOsDevice';\nimport { useOmnichannelPriorities } from '../../omnichannel/hooks/useOmnichannelPriorities';\nimport RoomMenu from '../RoomMenu';\nimport { OmnichannelBadges } from '../badges/OmnichannelBadges';\nimport type { useAvatarTemplate } from '../hooks/useAvatarTemplate';\nimport { useUnreadDisplay } from '../hooks/useUnreadDisplay';\nimport { normalizeSidebarMessage } from './normalizeSidebarMessage';\n\nexport const getMessage = (room: IRoom, lastMessage: IMessage | undefined, t: TFunction): string | undefined => {\n\tif (!lastMessage) {\n\t\treturn t('No_messages_yet');\n\t}\n\tif (isVideoConfMessage(lastMessage)) {\n\t\treturn t('Call_started');\n\t}\n\tif (!lastMessage.u) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\tif (lastMessage.u?.username === room.u?.username) {\n\t\treturn `${t('You')}: ${normalizeSidebarMessage(lastMessage, t)}`;\n\t}\n\tif (isDirectMessageRoom(room) && !isMultipleDirectMessageRoom(room)) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\treturn `${lastMessage.u.name || lastMessage.u.username}: ${normalizeSidebarMessage(lastMessage, t)}`;\n};\n\ntype RoomListRowProps = {\n\textended: boolean;\n\tt: TFunction;\n\tSidebarItemTemplate: ComponentType<\n\t\t{\n\t\t\ticon: ReactNode;\n\t\t\ttitle: ReactNode;\n\t\t\tavatar: ReactNode;\n\t\t\tactions: unknown;\n\t\t\thref: string;\n\t\t\ttime?: Date;\n\t\t\tmenu?: ReactNode;\n\t\t\tmenuOptions?: unknown;\n\t\t\tsubtitle?: ReactNode;\n\t\t\ttitleIcon?: string;\n\t\t\tbadges?: ReactNode;\n\t\t\tthreadUnread?: boolean;\n\t\t\tunread?: boolean;\n\t\t\tselected?: boolean;\n\t\t\tis?: string;\n\t\t} & AllHTMLAttributes<HTMLElement>\n\t>;\n\tAvatarTemplate: ReturnType<typeof useAvatarTemplate>;\n\topenedRoom?: string;\n\t// sidebarViewMode: 'extended';\n\tisAnonymous?: boolean;\n\n\troom: ISubscription & IRoom;\n\tid?: string;\n\t/* @deprecated */\n\tstyle?: AllHTMLAttributes<HTMLElement>['style'];\n\n\tselected?: boolean;\n\n\tsidebarViewMode?: unknown;\n\tvideoConfActions?: {\n\t\t[action: string]: () => void;\n\t};\n};\n\nconst SidebarItemTemplateWithData = ({\n\troom,\n\tid,\n\tselected,\n\tstyle,\n\textended,\n\tSidebarItemTemplate,\n\tAvatarTemplate,\n\tt,\n\tisAnonymous,\n\tvideoConfActions,\n}: RoomListRowProps) => {\n\tconst { sidebar } = useLayout();\n\n\tconst href = roomCoordinator.getRouteLink(room.t, room) || '';\n\tconst title = roomCoordinator.getRoomName(room.t, room) || '';\n\n\tconst { unreadTitle, unreadVariant, showUnread, unreadCount, highlightUnread: highlighted } = useUnreadDisplay(room);\n\n\tconst { lastMessage, unread = 0, alert, rid, t: type, cl } = room;\n\n\tconst icon = (\n\t\t<SidebarV2ItemIcon\n\t\t\thighlighted={highlighted}\n\t\t\ticon={<RoomIcon room={room} placement='sidebar' size='x20' isIncomingCall={Boolean(videoConfActions)} />}\n\t\t/>\n\t);\n\n\tconst actions = useMemo(\n\t\t() =>\n\t\t\tvideoConfActions && (\n\t\t\t\t<SidebarV2Actions>\n\t\t\t\t\t<SidebarV2Action onClick={videoConfActions.acceptCall} mini secondary success icon='phone' />\n\t\t\t\t\t<SidebarV2Action onClick={videoConfActions.rejectCall} mini secondary danger icon='phone-off' />\n\t\t\t\t</SidebarV2Actions>\n\t\t\t),\n\t\t[videoConfActions],\n\t);\n\n\tconst isQueued = isOmnichannelRoom(room) && room.status === 'queued';\n\tconst { enabled: isPriorityEnabled } = useOmnichannelPriorities();\n\n\tconst message = extended && getMessage(room, lastMessage, t);\n\tconst subtitle = message ? <span className='message-body--unstyled' dangerouslySetInnerHTML={{ __html: message }} /> : null;\n\n\tconst badges = (\n\t\t<>\n\t\t\t{showUnread && (\n\t\t\t\t<SidebarV2ItemBadge variant={unreadVariant} title={unreadTitle} role='status'>\n\t\t\t\t\t{unreadCount.total}\n\t\t\t\t</SidebarV2ItemBadge>\n\t\t\t)}\n\t\t\t{isOmnichannelRoom(room) && <OmnichannelBadges room={room} />}\n\t\t</>\n\t);\n\n\treturn (\n\t\t<SidebarItemTemplate\n\t\t\tis='a'\n\t\t\tid={id}\n\t\t\tdata-qa='sidebar-item'\n\t\t\tdata-unread={highlighted}\n\t\t\tunread={highlighted}\n\t\t\tselected={selected}\n\t\t\thref={href}\n\t\t\tonClick={(): void => {\n\t\t\t\t!selected && sidebar.toggle();\n\t\t\t}}\n\t\t\taria-label={title}\n\t\t\ttitle={title}\n\t\t\ttime={lastMessage?.ts}\n\t\t\tsubtitle={subtitle}\n\t\t\ticon={icon}\n\t\t\tstyle={style}\n\t\t\tbadges={badges}\n\t\t\tavatar={AvatarTemplate && <AvatarTemplate {...room} />}\n\t\t\tactions={actions}\n\t\t\tmenu={\n\t\t\t\t!isIOsDevice &&\n\t\t\t\t!isAnonymous &&\n\t\t\t\t(!isQueued || (isQueued && isPriorityEnabled)) &&\n\t\t\t\t((): ReactElement => (\n\t\t\t\t\t<RoomMenu\n\t\t\t\t\t\talert={alert}\n\t\t\t\t\t\tthreadUnread={unreadCount.threads > 0}\n\t\t\t\t\t\trid={rid}\n\t\t\t\t\t\tunread={!!unread}\n\t\t\t\t\t\troomOpen={selected}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tcl={cl}\n\t\t\t\t\t\tname={title}\n\t\t\t\t\t\thideDefaultOptions={isQueued}\n\t\t\t\t\t/>\n\t\t\t\t))\n\t\t\t}\n\t\t/>\n\t);\n};\n\nfunction safeDateNotEqualCheck(a: Date | string | undefined, b: Date | string | undefined): boolean {\n\tif (!a || !b) {\n\t\treturn a !== b;\n\t}\n\treturn new Date(a).toISOString() !== new Date(b).toISOString();\n}\n\nconst keys: (keyof RoomListRowProps)[] = [\n\t'id',\n\t'style',\n\t'extended',\n\t'selected',\n\t'SidebarItemTemplate',\n\t'AvatarTemplate',\n\t't',\n\t'sidebarViewMode',\n\t'videoConfActions',\n];\n\n// eslint-disable-next-line react/no-multi-comp\nexport default memo(SidebarItemTemplateWithData, (prevProps, nextProps) => {\n\tif (keys.some((key) => prevProps[key] !== nextProps[key])) {\n\t\treturn false;\n\t}\n\n\tif (prevProps.room === nextProps.room) {\n\t\treturn true;\n\t}\n\n\tif (prevProps.room._id !== nextProps.room._id) {\n\t\treturn false;\n\t}\n\tif (prevProps.room._updatedAt?.toISOString() !== nextProps.room._updatedAt?.toISOString()) {\n\t\treturn false;\n\t}\n\tif (safeDateNotEqualCheck(prevProps.room.lastMessage?._updatedAt, nextProps.room.lastMessage?._updatedAt)) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.alert !== nextProps.room.alert) {\n\t\treturn false;\n\t}\n\tif (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && prevProps.room?.v?.status !== nextProps.room?.v?.status) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.teamMain !== nextProps.room.teamMain) {\n\t\treturn false;\n\t}\n\n\tif (\n\t\tisOmnichannelRoom(prevProps.room) &&\n\t\tisOmnichannelRoom(nextProps.room) &&\n\t\tprevProps.room.priorityWeight !== nextProps.room.priorityWeight\n\t) {\n\t\treturn false;\n\t}\n\n\treturn true;\n});\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebarv2/RoomList/SidebarItemTemplateWithData.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/sidebarv2/RoomList/SidebarItemTemplateWithData.tsx","inputSourceMap":{"version":3,"file":"client/sidebarv2/RoomList/SidebarItemTemplateWithData.tsx","sourceRoot":"","sources":["client/sidebarv2/RoomList/SidebarItemTemplateWithData.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, IRoom, ISubscription } from '@rocket.chat/core-typings';\nimport { isDirectMessageRoom, isMultipleDirectMessageRoom, isOmnichannelRoom, isVideoConfMessage } from '@rocket.chat/core-typings';\nimport { SidebarV2Action, SidebarV2Actions, SidebarV2ItemBadge, SidebarV2ItemIcon } from '@rocket.chat/fuselage';\nimport { useLayout } from '@rocket.chat/ui-contexts';\nimport type { TFunction } from 'i18next';\nimport type { AllHTMLAttributes, ComponentType, ReactElement, ReactNode } from 'react';\nimport React, { memo, useMemo } from 'react';\n\nimport { RoomIcon } from '../../components/RoomIcon';\nimport { roomCoordinator } from '../../lib/rooms/roomCoordinator';\nimport { isIOsDevice } from '../../lib/utils/isIOsDevice';\nimport { useOmnichannelPriorities } from '../../omnichannel/hooks/useOmnichannelPriorities';\nimport RoomMenu from '../RoomMenu';\nimport { OmnichannelBadges } from '../badges/OmnichannelBadges';\nimport type { useAvatarTemplate } from '../hooks/useAvatarTemplate';\nimport { useUnreadDisplay } from '../hooks/useUnreadDisplay';\nimport { normalizeSidebarMessage } from './normalizeSidebarMessage';\n\nexport const getMessage = (room: IRoom, lastMessage: IMessage | undefined, t: TFunction): string | undefined => {\n\tif (!lastMessage) {\n\t\treturn t('No_messages_yet');\n\t}\n\tif (isVideoConfMessage(lastMessage)) {\n\t\treturn t('Call_started');\n\t}\n\tif (!lastMessage.u) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\tif (lastMessage.u?.username === room.u?.username) {\n\t\treturn `${t('You')}: ${normalizeSidebarMessage(lastMessage, t)}`;\n\t}\n\tif (isDirectMessageRoom(room) && !isMultipleDirectMessageRoom(room)) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\treturn `${lastMessage.u.name || lastMessage.u.username}: ${normalizeSidebarMessage(lastMessage, t)}`;\n};\n\ntype RoomListRowProps = {\n\textended: boolean;\n\tt: TFunction;\n\tSidebarItemTemplate: ComponentType<\n\t\t{\n\t\t\ticon: ReactNode;\n\t\t\ttitle: ReactNode;\n\t\t\tavatar: ReactNode;\n\t\t\tactions: unknown;\n\t\t\thref: string;\n\t\t\ttime?: Date;\n\t\t\tmenu?: ReactNode;\n\t\t\tmenuOptions?: unknown;\n\t\t\tsubtitle?: ReactNode;\n\t\t\ttitleIcon?: string;\n\t\t\tbadges?: ReactNode;\n\t\t\tthreadUnread?: boolean;\n\t\t\tunread?: boolean;\n\t\t\tselected?: boolean;\n\t\t\tis?: string;\n\t\t} & AllHTMLAttributes<HTMLElement>\n\t>;\n\tAvatarTemplate: ReturnType<typeof useAvatarTemplate>;\n\topenedRoom?: string;\n\t// sidebarViewMode: 'extended';\n\tisAnonymous?: boolean;\n\n\troom: ISubscription & IRoom;\n\tid?: string;\n\t/* @deprecated */\n\tstyle?: AllHTMLAttributes<HTMLElement>['style'];\n\n\tselected?: boolean;\n\n\tsidebarViewMode?: unknown;\n\tvideoConfActions?: {\n\t\t[action: string]: () => void;\n\t};\n};\n\nconst SidebarItemTemplateWithData = ({\n\troom,\n\tid,\n\tselected,\n\tstyle,\n\textended,\n\tSidebarItemTemplate,\n\tAvatarTemplate,\n\tt,\n\tisAnonymous,\n\tvideoConfActions,\n}: RoomListRowProps) => {\n\tconst { sidebar } = useLayout();\n\n\tconst href = roomCoordinator.getRouteLink(room.t, room) || '';\n\tconst title = roomCoordinator.getRoomName(room.t, room) || '';\n\n\tconst { unreadTitle, unreadVariant, showUnread, unreadCount, highlightUnread: highlighted } = useUnreadDisplay(room);\n\n\tconst { lastMessage, unread = 0, alert, rid, t: type, cl } = room;\n\n\tconst icon = (\n\t\t<SidebarV2ItemIcon\n\t\t\thighlighted={highlighted}\n\t\t\ticon={<RoomIcon room={room} placement='sidebar' size='x20' isIncomingCall={Boolean(videoConfActions)} />}\n\t\t/>\n\t);\n\n\tconst actions = useMemo(\n\t\t() =>\n\t\t\tvideoConfActions && (\n\t\t\t\t<SidebarV2Actions>\n\t\t\t\t\t<SidebarV2Action onClick={videoConfActions.acceptCall} mini secondary success icon='phone' />\n\t\t\t\t\t<SidebarV2Action onClick={videoConfActions.rejectCall} mini secondary danger icon='phone-off' />\n\t\t\t\t</SidebarV2Actions>\n\t\t\t),\n\t\t[videoConfActions],\n\t);\n\n\tconst isQueued = isOmnichannelRoom(room) && room.status === 'queued';\n\tconst { enabled: isPriorityEnabled } = useOmnichannelPriorities();\n\n\tconst message = extended && getMessage(room, lastMessage, t);\n\tconst subtitle = message ? <span className='message-body--unstyled' dangerouslySetInnerHTML={{ __html: message }} /> : null;\n\n\tconst badges = (\n\t\t<>\n\t\t\t{showUnread && (\n\t\t\t\t<SidebarV2ItemBadge variant={unreadVariant} title={unreadTitle} role='status'>\n\t\t\t\t\t{unreadCount.total}\n\t\t\t\t</SidebarV2ItemBadge>\n\t\t\t)}\n\t\t\t{isOmnichannelRoom(room) && <OmnichannelBadges room={room} />}\n\t\t</>\n\t);\n\n\treturn (\n\t\t<SidebarItemTemplate\n\t\t\tis='a'\n\t\t\tid={id}\n\t\t\tdata-qa='sidebar-item'\n\t\t\tdata-unread={highlighted}\n\t\t\tunread={highlighted}\n\t\t\tselected={selected}\n\t\t\thref={href}\n\t\t\tonClick={(): void => {\n\t\t\t\t!selected && sidebar.toggle();\n\t\t\t}}\n\t\t\taria-label={title}\n\t\t\ttitle={title}\n\t\t\ttime={lastMessage?.ts}\n\t\t\tsubtitle={subtitle}\n\t\t\ticon={icon}\n\t\t\tstyle={style}\n\t\t\tbadges={badges}\n\t\t\tavatar={AvatarTemplate && <AvatarTemplate {...room} />}\n\t\t\tactions={actions}\n\t\t\tmenu={\n\t\t\t\t!isIOsDevice &&\n\t\t\t\t!isAnonymous &&\n\t\t\t\t(!isQueued || (isQueued && isPriorityEnabled)) &&\n\t\t\t\t((): ReactElement => (\n\t\t\t\t\t<RoomMenu\n\t\t\t\t\t\talert={alert}\n\t\t\t\t\t\tthreadUnread={unreadCount.threads > 0}\n\t\t\t\t\t\trid={rid}\n\t\t\t\t\t\tunread={!!unread}\n\t\t\t\t\t\troomOpen={selected}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tcl={cl}\n\t\t\t\t\t\tname={title}\n\t\t\t\t\t\thideDefaultOptions={isQueued}\n\t\t\t\t\t/>\n\t\t\t\t))\n\t\t\t}\n\t\t/>\n\t);\n};\n\nfunction safeDateNotEqualCheck(a: Date | string | undefined, b: Date | string | undefined): boolean {\n\tif (!a || !b) {\n\t\treturn a !== b;\n\t}\n\treturn new Date(a).toISOString() !== new Date(b).toISOString();\n}\n\nconst keys: (keyof RoomListRowProps)[] = [\n\t'id',\n\t'style',\n\t'extended',\n\t'selected',\n\t'SidebarItemTemplate',\n\t'AvatarTemplate',\n\t't',\n\t'sidebarViewMode',\n\t'videoConfActions',\n];\n\n// eslint-disable-next-line react/no-multi-comp\nexport default memo(SidebarItemTemplateWithData, (prevProps, nextProps) => {\n\tif (keys.some((key) => prevProps[key] !== nextProps[key])) {\n\t\treturn false;\n\t}\n\n\tif (prevProps.room === nextProps.room) {\n\t\treturn true;\n\t}\n\n\tif (prevProps.room._id !== nextProps.room._id) {\n\t\treturn false;\n\t}\n\tif (prevProps.room._updatedAt?.toISOString() !== nextProps.room._updatedAt?.toISOString()) {\n\t\treturn false;\n\t}\n\tif (safeDateNotEqualCheck(prevProps.room.lastMessage?._updatedAt, nextProps.room.lastMessage?._updatedAt)) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.alert !== nextProps.room.alert) {\n\t\treturn false;\n\t}\n\tif (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && prevProps.room?.v?.status !== nextProps.room?.v?.status) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.teamMain !== nextProps.room.teamMain) {\n\t\treturn false;\n\t}\n\n\tif (\n\t\tisOmnichannelRoom(prevProps.room) &&\n\t\tisOmnichannelRoom(nextProps.room) &&\n\t\tprevProps.room.priorityWeight !== nextProps.room.priorityWeight\n\t) {\n\t\treturn false;\n\t}\n\n\treturn true;\n});\n"]}}},"code":"module.export({\n  getMessage: () => getMessage\n});\nlet isDirectMessageRoom, isMultipleDirectMessageRoom, isOmnichannelRoom, isVideoConfMessage;\nmodule.link(\"@rocket.chat/core-typings\", {\n  isDirectMessageRoom(v) {\n    isDirectMessageRoom = v;\n  },\n  isMultipleDirectMessageRoom(v) {\n    isMultipleDirectMessageRoom = v;\n  },\n  isOmnichannelRoom(v) {\n    isOmnichannelRoom = v;\n  },\n  isVideoConfMessage(v) {\n    isVideoConfMessage = v;\n  }\n}, 0);\nlet SidebarV2Action, SidebarV2Actions, SidebarV2ItemBadge, SidebarV2ItemIcon;\nmodule.link(\"@rocket.chat/fuselage\", {\n  SidebarV2Action(v) {\n    SidebarV2Action = v;\n  },\n  SidebarV2Actions(v) {\n    SidebarV2Actions = v;\n  },\n  SidebarV2ItemBadge(v) {\n    SidebarV2ItemBadge = v;\n  },\n  SidebarV2ItemIcon(v) {\n    SidebarV2ItemIcon = v;\n  }\n}, 1);\nlet useLayout;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useLayout(v) {\n    useLayout = v;\n  }\n}, 2);\nlet React, memo, useMemo;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  memo(v) {\n    memo = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  }\n}, 3);\nlet RoomIcon;\nmodule.link(\"../../components/RoomIcon\", {\n  RoomIcon(v) {\n    RoomIcon = v;\n  }\n}, 4);\nlet roomCoordinator;\nmodule.link(\"../../lib/rooms/roomCoordinator\", {\n  roomCoordinator(v) {\n    roomCoordinator = v;\n  }\n}, 5);\nlet isIOsDevice;\nmodule.link(\"../../lib/utils/isIOsDevice\", {\n  isIOsDevice(v) {\n    isIOsDevice = v;\n  }\n}, 6);\nlet useOmnichannelPriorities;\nmodule.link(\"../../omnichannel/hooks/useOmnichannelPriorities\", {\n  useOmnichannelPriorities(v) {\n    useOmnichannelPriorities = v;\n  }\n}, 7);\nlet RoomMenu;\nmodule.link(\"../RoomMenu\", {\n  default(v) {\n    RoomMenu = v;\n  }\n}, 8);\nlet OmnichannelBadges;\nmodule.link(\"../badges/OmnichannelBadges\", {\n  OmnichannelBadges(v) {\n    OmnichannelBadges = v;\n  }\n}, 9);\nlet useUnreadDisplay;\nmodule.link(\"../hooks/useUnreadDisplay\", {\n  useUnreadDisplay(v) {\n    useUnreadDisplay = v;\n  }\n}, 10);\nlet normalizeSidebarMessage;\nmodule.link(\"./normalizeSidebarMessage\", {\n  normalizeSidebarMessage(v) {\n    normalizeSidebarMessage = v;\n  }\n}, 11);\nconst getMessage = (room, lastMessage, t) => {\n  var _lastMessage$u, _room$u;\n  if (!lastMessage) {\n    return t('No_messages_yet');\n  }\n  if (isVideoConfMessage(lastMessage)) {\n    return t('Call_started');\n  }\n  if (!lastMessage.u) {\n    return normalizeSidebarMessage(lastMessage, t);\n  }\n  if (((_lastMessage$u = lastMessage.u) === null || _lastMessage$u === void 0 ? void 0 : _lastMessage$u.username) === ((_room$u = room.u) === null || _room$u === void 0 ? void 0 : _room$u.username)) {\n    return \"\".concat(t('You'), \": \").concat(normalizeSidebarMessage(lastMessage, t));\n  }\n  if (isDirectMessageRoom(room) && !isMultipleDirectMessageRoom(room)) {\n    return normalizeSidebarMessage(lastMessage, t);\n  }\n  return \"\".concat(lastMessage.u.name || lastMessage.u.username, \": \").concat(normalizeSidebarMessage(lastMessage, t));\n};\nconst SidebarItemTemplateWithData = _ref => {\n  let {\n    room,\n    id,\n    selected,\n    style,\n    extended,\n    SidebarItemTemplate,\n    AvatarTemplate,\n    t,\n    isAnonymous,\n    videoConfActions\n  } = _ref;\n  const {\n    sidebar\n  } = useLayout();\n  const href = roomCoordinator.getRouteLink(room.t, room) || '';\n  const title = roomCoordinator.getRoomName(room.t, room) || '';\n  const {\n    unreadTitle,\n    unreadVariant,\n    showUnread,\n    unreadCount,\n    highlightUnread: highlighted\n  } = useUnreadDisplay(room);\n  const {\n    lastMessage,\n    unread = 0,\n    alert,\n    rid,\n    t: type,\n    cl\n  } = room;\n  const icon = /*#__PURE__*/React.createElement(SidebarV2ItemIcon, {\n    highlighted: highlighted,\n    icon: /*#__PURE__*/React.createElement(RoomIcon, {\n      room: room,\n      placement: \"sidebar\",\n      size: \"x20\",\n      isIncomingCall: Boolean(videoConfActions)\n    })\n  });\n  const actions = useMemo(() => videoConfActions && /*#__PURE__*/React.createElement(SidebarV2Actions, null, /*#__PURE__*/React.createElement(SidebarV2Action, {\n    onClick: videoConfActions.acceptCall,\n    mini: true,\n    secondary: true,\n    success: true,\n    icon: \"phone\"\n  }), /*#__PURE__*/React.createElement(SidebarV2Action, {\n    onClick: videoConfActions.rejectCall,\n    mini: true,\n    secondary: true,\n    danger: true,\n    icon: \"phone-off\"\n  })), [videoConfActions]);\n  const isQueued = isOmnichannelRoom(room) && room.status === 'queued';\n  const {\n    enabled: isPriorityEnabled\n  } = useOmnichannelPriorities();\n  const message = extended && getMessage(room, lastMessage, t);\n  const subtitle = message ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"message-body--unstyled\",\n    dangerouslySetInnerHTML: {\n      __html: message\n    }\n  }) : null;\n  const badges = /*#__PURE__*/React.createElement(React.Fragment, null, showUnread && /*#__PURE__*/React.createElement(SidebarV2ItemBadge, {\n    variant: unreadVariant,\n    title: unreadTitle,\n    role: \"status\"\n  }, unreadCount.total), isOmnichannelRoom(room) && /*#__PURE__*/React.createElement(OmnichannelBadges, {\n    room: room\n  }));\n  return /*#__PURE__*/React.createElement(SidebarItemTemplate, {\n    is: \"a\",\n    id: id,\n    \"data-qa\": \"sidebar-item\",\n    \"data-unread\": highlighted,\n    unread: highlighted,\n    selected: selected,\n    href: href,\n    onClick: () => {\n      !selected && sidebar.toggle();\n    },\n    \"aria-label\": title,\n    title: title,\n    time: lastMessage === null || lastMessage === void 0 ? void 0 : lastMessage.ts,\n    subtitle: subtitle,\n    icon: icon,\n    style: style,\n    badges: badges,\n    avatar: AvatarTemplate && /*#__PURE__*/React.createElement(AvatarTemplate, room),\n    actions: actions,\n    menu: !isIOsDevice && !isAnonymous && (!isQueued || isQueued && isPriorityEnabled) && (() => /*#__PURE__*/React.createElement(RoomMenu, {\n      alert: alert,\n      threadUnread: unreadCount.threads > 0,\n      rid: rid,\n      unread: !!unread,\n      roomOpen: selected,\n      type: type,\n      cl: cl,\n      name: title,\n      hideDefaultOptions: isQueued\n    }))\n  });\n};\nfunction safeDateNotEqualCheck(a, b) {\n  if (!a || !b) {\n    return a !== b;\n  }\n  return new Date(a).toISOString() !== new Date(b).toISOString();\n}\nconst keys = ['id', 'style', 'extended', 'selected', 'SidebarItemTemplate', 'AvatarTemplate', 't', 'sidebarViewMode', 'videoConfActions'];\n// eslint-disable-next-line react/no-multi-comp\nmodule.exportDefault( /*#__PURE__*/memo(SidebarItemTemplateWithData, (prevProps, nextProps) => {\n  var _prevProps$room$_upda, _nextProps$room$_upda, _prevProps$room$lastM, _nextProps$room$lastM, _prevProps$room, _prevProps$room$v, _nextProps$room, _nextProps$room$v;\n  if (keys.some(key => prevProps[key] !== nextProps[key])) {\n    return false;\n  }\n  if (prevProps.room === nextProps.room) {\n    return true;\n  }\n  if (prevProps.room._id !== nextProps.room._id) {\n    return false;\n  }\n  if (((_prevProps$room$_upda = prevProps.room._updatedAt) === null || _prevProps$room$_upda === void 0 ? void 0 : _prevProps$room$_upda.toISOString()) !== ((_nextProps$room$_upda = nextProps.room._updatedAt) === null || _nextProps$room$_upda === void 0 ? void 0 : _nextProps$room$_upda.toISOString())) {\n    return false;\n  }\n  if (safeDateNotEqualCheck((_prevProps$room$lastM = prevProps.room.lastMessage) === null || _prevProps$room$lastM === void 0 ? void 0 : _prevProps$room$lastM._updatedAt, (_nextProps$room$lastM = nextProps.room.lastMessage) === null || _nextProps$room$lastM === void 0 ? void 0 : _nextProps$room$lastM._updatedAt)) {\n    return false;\n  }\n  if (prevProps.room.alert !== nextProps.room.alert) {\n    return false;\n  }\n  if (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && ((_prevProps$room = prevProps.room) === null || _prevProps$room === void 0 ? void 0 : (_prevProps$room$v = _prevProps$room.v) === null || _prevProps$room$v === void 0 ? void 0 : _prevProps$room$v.status) !== ((_nextProps$room = nextProps.room) === null || _nextProps$room === void 0 ? void 0 : (_nextProps$room$v = _nextProps$room.v) === null || _nextProps$room$v === void 0 ? void 0 : _nextProps$room$v.status)) {\n    return false;\n  }\n  if (prevProps.room.teamMain !== nextProps.room.teamMain) {\n    return false;\n  }\n  if (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && prevProps.room.priorityWeight !== nextProps.room.priorityWeight) {\n    return false;\n  }\n  return true;\n}));","map":{"version":3,"names":["module","export","getMessage","isDirectMessageRoom","isMultipleDirectMessageRoom","isOmnichannelRoom","isVideoConfMessage","link","v","SidebarV2Action","SidebarV2Actions","SidebarV2ItemBadge","SidebarV2ItemIcon","useLayout","React","memo","useMemo","default","RoomIcon","roomCoordinator","isIOsDevice","useOmnichannelPriorities","RoomMenu","OmnichannelBadges","useUnreadDisplay","normalizeSidebarMessage","room","lastMessage","t","_lastMessage$u","_room$u","u","username","concat","name","SidebarItemTemplateWithData","_ref","id","selected","style","extended","SidebarItemTemplate","AvatarTemplate","isAnonymous","videoConfActions","sidebar","href","getRouteLink","title","getRoomName","unreadTitle","unreadVariant","showUnread","unreadCount","highlightUnread","highlighted","unread","alert","rid","type","cl","icon","createElement","placement","size","isIncomingCall","Boolean","actions","onClick","acceptCall","mini","secondary","success","rejectCall","danger","isQueued","status","enabled","isPriorityEnabled","message","subtitle","className","dangerouslySetInnerHTML","__html","badges","Fragment","variant","role","total","is","toggle","time","ts","avatar","menu","threadUnread","threads","roomOpen","hideDefaultOptions","safeDateNotEqualCheck","a","b","Date","toISOString","keys","exportDefault","prevProps","nextProps","_prevProps$room$_upda","_nextProps$room$_upda","_prevProps$room$lastM","_nextProps$room$lastM","_prevProps$room","_prevProps$room$v","_nextProps$room","_nextProps$room$v","some","key","_id","_updatedAt","teamMain","priorityWeight"],"sources":["client/sidebarv2/RoomList/SidebarItemTemplateWithData.tsx"],"sourcesContent":["import type { IMessage, IRoom, ISubscription } from '@rocket.chat/core-typings';\nimport { isDirectMessageRoom, isMultipleDirectMessageRoom, isOmnichannelRoom, isVideoConfMessage } from '@rocket.chat/core-typings';\nimport { SidebarV2Action, SidebarV2Actions, SidebarV2ItemBadge, SidebarV2ItemIcon } from '@rocket.chat/fuselage';\nimport { useLayout } from '@rocket.chat/ui-contexts';\nimport type { TFunction } from 'i18next';\nimport type { AllHTMLAttributes, ComponentType, ReactElement, ReactNode } from 'react';\nimport React, { memo, useMemo } from 'react';\n\nimport { RoomIcon } from '../../components/RoomIcon';\nimport { roomCoordinator } from '../../lib/rooms/roomCoordinator';\nimport { isIOsDevice } from '../../lib/utils/isIOsDevice';\nimport { useOmnichannelPriorities } from '../../omnichannel/hooks/useOmnichannelPriorities';\nimport RoomMenu from '../RoomMenu';\nimport { OmnichannelBadges } from '../badges/OmnichannelBadges';\nimport type { useAvatarTemplate } from '../hooks/useAvatarTemplate';\nimport { useUnreadDisplay } from '../hooks/useUnreadDisplay';\nimport { normalizeSidebarMessage } from './normalizeSidebarMessage';\n\nexport const getMessage = (room: IRoom, lastMessage: IMessage | undefined, t: TFunction): string | undefined => {\n\tif (!lastMessage) {\n\t\treturn t('No_messages_yet');\n\t}\n\tif (isVideoConfMessage(lastMessage)) {\n\t\treturn t('Call_started');\n\t}\n\tif (!lastMessage.u) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\tif (lastMessage.u?.username === room.u?.username) {\n\t\treturn `${t('You')}: ${normalizeSidebarMessage(lastMessage, t)}`;\n\t}\n\tif (isDirectMessageRoom(room) && !isMultipleDirectMessageRoom(room)) {\n\t\treturn normalizeSidebarMessage(lastMessage, t);\n\t}\n\treturn `${lastMessage.u.name || lastMessage.u.username}: ${normalizeSidebarMessage(lastMessage, t)}`;\n};\n\ntype RoomListRowProps = {\n\textended: boolean;\n\tt: TFunction;\n\tSidebarItemTemplate: ComponentType<\n\t\t{\n\t\t\ticon: ReactNode;\n\t\t\ttitle: ReactNode;\n\t\t\tavatar: ReactNode;\n\t\t\tactions: unknown;\n\t\t\thref: string;\n\t\t\ttime?: Date;\n\t\t\tmenu?: ReactNode;\n\t\t\tmenuOptions?: unknown;\n\t\t\tsubtitle?: ReactNode;\n\t\t\ttitleIcon?: string;\n\t\t\tbadges?: ReactNode;\n\t\t\tthreadUnread?: boolean;\n\t\t\tunread?: boolean;\n\t\t\tselected?: boolean;\n\t\t\tis?: string;\n\t\t} & AllHTMLAttributes<HTMLElement>\n\t>;\n\tAvatarTemplate: ReturnType<typeof useAvatarTemplate>;\n\topenedRoom?: string;\n\t// sidebarViewMode: 'extended';\n\tisAnonymous?: boolean;\n\n\troom: ISubscription & IRoom;\n\tid?: string;\n\t/* @deprecated */\n\tstyle?: AllHTMLAttributes<HTMLElement>['style'];\n\n\tselected?: boolean;\n\n\tsidebarViewMode?: unknown;\n\tvideoConfActions?: {\n\t\t[action: string]: () => void;\n\t};\n};\n\nconst SidebarItemTemplateWithData = ({\n\troom,\n\tid,\n\tselected,\n\tstyle,\n\textended,\n\tSidebarItemTemplate,\n\tAvatarTemplate,\n\tt,\n\tisAnonymous,\n\tvideoConfActions,\n}: RoomListRowProps) => {\n\tconst { sidebar } = useLayout();\n\n\tconst href = roomCoordinator.getRouteLink(room.t, room) || '';\n\tconst title = roomCoordinator.getRoomName(room.t, room) || '';\n\n\tconst { unreadTitle, unreadVariant, showUnread, unreadCount, highlightUnread: highlighted } = useUnreadDisplay(room);\n\n\tconst { lastMessage, unread = 0, alert, rid, t: type, cl } = room;\n\n\tconst icon = (\n\t\t<SidebarV2ItemIcon\n\t\t\thighlighted={highlighted}\n\t\t\ticon={<RoomIcon room={room} placement='sidebar' size='x20' isIncomingCall={Boolean(videoConfActions)} />}\n\t\t/>\n\t);\n\n\tconst actions = useMemo(\n\t\t() =>\n\t\t\tvideoConfActions && (\n\t\t\t\t<SidebarV2Actions>\n\t\t\t\t\t<SidebarV2Action onClick={videoConfActions.acceptCall} mini secondary success icon='phone' />\n\t\t\t\t\t<SidebarV2Action onClick={videoConfActions.rejectCall} mini secondary danger icon='phone-off' />\n\t\t\t\t</SidebarV2Actions>\n\t\t\t),\n\t\t[videoConfActions],\n\t);\n\n\tconst isQueued = isOmnichannelRoom(room) && room.status === 'queued';\n\tconst { enabled: isPriorityEnabled } = useOmnichannelPriorities();\n\n\tconst message = extended && getMessage(room, lastMessage, t);\n\tconst subtitle = message ? <span className='message-body--unstyled' dangerouslySetInnerHTML={{ __html: message }} /> : null;\n\n\tconst badges = (\n\t\t<>\n\t\t\t{showUnread && (\n\t\t\t\t<SidebarV2ItemBadge variant={unreadVariant} title={unreadTitle} role='status'>\n\t\t\t\t\t{unreadCount.total}\n\t\t\t\t</SidebarV2ItemBadge>\n\t\t\t)}\n\t\t\t{isOmnichannelRoom(room) && <OmnichannelBadges room={room} />}\n\t\t</>\n\t);\n\n\treturn (\n\t\t<SidebarItemTemplate\n\t\t\tis='a'\n\t\t\tid={id}\n\t\t\tdata-qa='sidebar-item'\n\t\t\tdata-unread={highlighted}\n\t\t\tunread={highlighted}\n\t\t\tselected={selected}\n\t\t\thref={href}\n\t\t\tonClick={(): void => {\n\t\t\t\t!selected && sidebar.toggle();\n\t\t\t}}\n\t\t\taria-label={title}\n\t\t\ttitle={title}\n\t\t\ttime={lastMessage?.ts}\n\t\t\tsubtitle={subtitle}\n\t\t\ticon={icon}\n\t\t\tstyle={style}\n\t\t\tbadges={badges}\n\t\t\tavatar={AvatarTemplate && <AvatarTemplate {...room} />}\n\t\t\tactions={actions}\n\t\t\tmenu={\n\t\t\t\t!isIOsDevice &&\n\t\t\t\t!isAnonymous &&\n\t\t\t\t(!isQueued || (isQueued && isPriorityEnabled)) &&\n\t\t\t\t((): ReactElement => (\n\t\t\t\t\t<RoomMenu\n\t\t\t\t\t\talert={alert}\n\t\t\t\t\t\tthreadUnread={unreadCount.threads > 0}\n\t\t\t\t\t\trid={rid}\n\t\t\t\t\t\tunread={!!unread}\n\t\t\t\t\t\troomOpen={selected}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tcl={cl}\n\t\t\t\t\t\tname={title}\n\t\t\t\t\t\thideDefaultOptions={isQueued}\n\t\t\t\t\t/>\n\t\t\t\t))\n\t\t\t}\n\t\t/>\n\t);\n};\n\nfunction safeDateNotEqualCheck(a: Date | string | undefined, b: Date | string | undefined): boolean {\n\tif (!a || !b) {\n\t\treturn a !== b;\n\t}\n\treturn new Date(a).toISOString() !== new Date(b).toISOString();\n}\n\nconst keys: (keyof RoomListRowProps)[] = [\n\t'id',\n\t'style',\n\t'extended',\n\t'selected',\n\t'SidebarItemTemplate',\n\t'AvatarTemplate',\n\t't',\n\t'sidebarViewMode',\n\t'videoConfActions',\n];\n\n// eslint-disable-next-line react/no-multi-comp\nexport default memo(SidebarItemTemplateWithData, (prevProps, nextProps) => {\n\tif (keys.some((key) => prevProps[key] !== nextProps[key])) {\n\t\treturn false;\n\t}\n\n\tif (prevProps.room === nextProps.room) {\n\t\treturn true;\n\t}\n\n\tif (prevProps.room._id !== nextProps.room._id) {\n\t\treturn false;\n\t}\n\tif (prevProps.room._updatedAt?.toISOString() !== nextProps.room._updatedAt?.toISOString()) {\n\t\treturn false;\n\t}\n\tif (safeDateNotEqualCheck(prevProps.room.lastMessage?._updatedAt, nextProps.room.lastMessage?._updatedAt)) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.alert !== nextProps.room.alert) {\n\t\treturn false;\n\t}\n\tif (isOmnichannelRoom(prevProps.room) && isOmnichannelRoom(nextProps.room) && prevProps.room?.v?.status !== nextProps.room?.v?.status) {\n\t\treturn false;\n\t}\n\tif (prevProps.room.teamMain !== nextProps.room.teamMain) {\n\t\treturn false;\n\t}\n\n\tif (\n\t\tisOmnichannelRoom(prevProps.room) &&\n\t\tisOmnichannelRoom(nextProps.room) &&\n\t\tprevProps.room.priorityWeight !== nextProps.room.priorityWeight\n\t) {\n\t\treturn false;\n\t}\n\n\treturn true;\n});\n"],"mappings":"AACAA,MAAA,CAAOC,MAAE;EAAAC,UAAA,EAAAA,CAAA,KAAqBA;AAAA;AAAA,IAAAC,mBAA6B,EAAAC,2BAAmB,EAAAC,iBAA0B,EAAAC,kBAA2B;AAACN,MAAA,CAAAO,IAAA;EAAAJ,oBAAAK,CAAA;IAAAL,mBAAA,GAAAK,CAAA;EAAA;EAAAJ,4BAAAI,CAAA;IAAAJ,2BAAA,GAAAI,CAAA;EAAA;EAAAH,kBAAAG,CAAA;IAAAH,iBAAA,GAAAG,CAAA;EAAA;EAAAF,mBAAAE,CAAA;IAAAF,kBAAA,GAAAE,CAAA;EAAA;AAAA;AAAA,IAAAC,eAAA,EAAAC,gBAAA,EAAAC,kBAAA,EAAAC,iBAAA;AAAAZ,MAAA,CAAAO,IAAA;EAAAE,gBAAAD,CAAA;IAAAC,eAAA,GAAAD,CAAA;EAAA;EAAAE,iBAAAF,CAAA;IAAAE,gBAAA,GAAAF,CAAA;EAAA;EAAAG,mBAAAH,CAAA;IAAAG,kBAAA,GAAAH,CAAA;EAAA;EAAAI,kBAAAJ,CAAA;IAAAI,iBAAA,GAAAJ,CAAA;EAAA;AAAA;AAAA,IAAAK,SAAA;AAAAb,MAAA,CAAAO,IAAA;EAAAM,UAAAL,CAAA;IAAAK,SAAA,GAAAL,CAAA;EAAA;AAAA;AAAA,IAAAM,KAAA,EAAAC,IAAA,EAAAC,OAAA;AAAAhB,MAAA,CAAAO,IAAA;EAAAU,QAAAT,CAAA;IAAAM,KAAA,GAAAN,CAAA;EAAA;EAAAO,KAAAP,CAAA;IAAAO,IAAA,GAAAP,CAAA;EAAA;EAAAQ,QAAAR,CAAA;IAAAQ,OAAA,GAAAR,CAAA;EAAA;AAAA;AAAA,IAAAU,QAAA;AAAAlB,MAAA,CAAAO,IAAA;EAAAW,SAAAV,CAAA;IAAAU,QAAA,GAAAV,CAAA;EAAA;AAAA;AAAA,IAAAW,eAAA;AAAAnB,MAAA,CAAAO,IAAA;EAAAY,gBAAAX,CAAA;IAAAW,eAAA,GAAAX,CAAA;EAAA;AAAA;AAAA,IAAAY,WAAA;AAAApB,MAAA,CAAAO,IAAA;EAAAa,YAAAZ,CAAA;IAAAY,WAAA,GAAAZ,CAAA;EAAA;AAAA;AAAA,IAAAa,wBAAA;AAAArB,MAAA,CAAAO,IAAA;EAAAc,yBAAAb,CAAA;IAAAa,wBAAA,GAAAb,CAAA;EAAA;AAAA;AAAA,IAAAc,QAAA;AAAAtB,MAAA,CAAAO,IAAA;EAAAU,QAAAT,CAAA;IAAAc,QAAA,GAAAd,CAAA;EAAA;AAAA;AAAA,IAAAe,iBAAA;AAAAvB,MAAA,CAAAO,IAAA;EAAAgB,kBAAAf,CAAA;IAAAe,iBAAA,GAAAf,CAAA;EAAA;AAAA;AAAA,IAAAgB,gBAAA;AAAAxB,MAAA,CAAAO,IAAA;EAAAiB,iBAAAhB,CAAA;IAAAgB,gBAAA,GAAAhB,CAAA;EAAA;AAAA;AAAA,IAAAiB,uBAAA;AAAAzB,MAAA,CAAAO,IAAA;EAAAkB,wBAAAjB,CAAA;IAAAiB,uBAAA,GAAAjB,CAAA;EAAA;AAAA;AAiB7H,MAAMN,UAAU,GAAGA,CAACwB,IAAW,EAAEC,WAAiC,EAAEC,CAAY,KAAwB;EAAA,IAAAC,cAAA,EAAAC,OAAA;EAC9G,IAAI,CAACH,WAAW,EAAE;IACjB,OAAOC,CAAC,CAAC,iBAAiB,CAAC;EAC5B;EACA,IAAItB,kBAAkB,CAACqB,WAAW,CAAC,EAAE;IACpC,OAAOC,CAAC,CAAC,cAAc,CAAC;EACzB;EACA,IAAI,CAACD,WAAW,CAACI,CAAC,EAAE;IACnB,OAAON,uBAAuB,CAACE,WAAW,EAAEC,CAAC,CAAC;EAC/C;EACA,IAAI,EAAAC,cAAA,GAAAF,WAAW,CAACI,CAAC,cAAAF,cAAA,uBAAbA,cAAA,CAAeG,QAAQ,QAAAF,OAAA,GAAKJ,IAAI,CAACK,CAAC,cAAAD,OAAA,uBAANA,OAAA,CAAQE,QAAQ,GAAE;IACjD,UAAAC,MAAA,CAAUL,CAAC,CAAC,KAAK,CAAC,QAAAK,MAAA,CAAKR,uBAAuB,CAACE,WAAW,EAAEC,CAAC,CAAC;EAC/D;EACA,IAAIzB,mBAAmB,CAACuB,IAAI,CAAC,IAAI,CAACtB,2BAA2B,CAACsB,IAAI,CAAC,EAAE;IACpE,OAAOD,uBAAuB,CAACE,WAAW,EAAEC,CAAC,CAAC;EAC/C;EACA,UAAAK,MAAA,CAAUN,WAAW,CAACI,CAAC,CAACG,IAAI,IAAIP,WAAW,CAACI,CAAC,CAACC,QAAQ,QAAAC,MAAA,CAAKR,uBAAuB,CAACE,WAAW,EAAEC,CAAC,CAAC;AACnG,CAAC;AA0CD,MAAMO,2BAA2B,GAAGC,IAAA,IAWb;EAAA,IAXc;IACpCV,IAAI;IACJW,EAAE;IACFC,QAAQ;IACRC,KAAK;IACLC,QAAQ;IACRC,mBAAmB;IACnBC,cAAc;IACdd,CAAC;IACDe,WAAW;IACXC;EAAgB,CACE,GAAAR,IAAA;EAClB,MAAM;IAAES;EAAO,CAAE,GAAGhC,SAAS,EAAE;EAE/B,MAAMiC,IAAI,GAAG3B,eAAe,CAAC4B,YAAY,CAACrB,IAAI,CAACE,CAAC,EAAEF,IAAI,CAAC,IAAI,EAAE;EAC7D,MAAMsB,KAAK,GAAG7B,eAAe,CAAC8B,WAAW,CAACvB,IAAI,CAACE,CAAC,EAAEF,IAAI,CAAC,IAAI,EAAE;EAE7D,MAAM;IAAEwB,WAAW;IAAEC,aAAa;IAAEC,UAAU;IAAEC,WAAW;IAAEC,eAAe,EAAEC;EAAW,CAAE,GAAG/B,gBAAgB,CAACE,IAAI,CAAC;EAEpH,MAAM;IAAEC,WAAW;IAAE6B,MAAM,GAAG,CAAC;IAAEC,KAAK;IAAEC,GAAG;IAAE9B,CAAC,EAAE+B,IAAI;IAAEC;EAAE,CAAE,GAAGlC,IAAI;EAEjE,MAAMmC,IAAI,gBACT/C,KAAA,CAAAgD,aAAA,CAAClD,iBAAiB;IACjB2C,WAAW,EAAEA,WAAY;IACzBM,IAAI,eAAE/C,KAAA,CAAAgD,aAAA,CAAC5C,QAAQ;MAACQ,IAAI,EAAEA,IAAK;MAACqC,SAAS,EAAC,SAAS;MAACC,IAAI,EAAC,KAAK;MAACC,cAAc,EAAEC,OAAO,CAACtB,gBAAgB;IAAE;EAAI,EAE1G;EAED,MAAMuB,OAAO,GAAGnD,OAAO,CACtB,MACC4B,gBAAgB,iBACf9B,KAAA,CAAAgD,aAAA,CAACpD,gBAAgB,qBAChBI,KAAA,CAAAgD,aAAA,CAACrD,eAAe;IAAC2D,OAAO,EAAExB,gBAAgB,CAACyB,UAAW;IAACC,IAAI;IAACC,SAAS;IAACC,OAAO;IAACX,IAAI,EAAC;EAAO,EAC1F,eAAA/C,KAAA,CAAAgD,aAAA,CAACrD,eAAe;IAAC2D,OAAO,EAAExB,gBAAgB,CAAC6B,UAAW;IAACH,IAAI;IAACC,SAAS;IAACG,MAAM;IAACb,IAAI,EAAC;EAAW,EAC5E,CAClB,EACF,CAACjB,gBAAgB,CAAC,CAClB;EAED,MAAM+B,QAAQ,GAAGtE,iBAAiB,CAACqB,IAAI,CAAC,IAAIA,IAAI,CAACkD,MAAM,KAAK,QAAQ;EACpE,MAAM;IAAEC,OAAO,EAAEC;EAAiB,CAAE,GAAGzD,wBAAwB,EAAE;EAEjE,MAAM0D,OAAO,GAAGvC,QAAQ,IAAItC,UAAU,CAACwB,IAAI,EAAEC,WAAW,EAAEC,CAAC,CAAC;EAC5D,MAAMoD,QAAQ,GAAGD,OAAO,gBAAGjE,KAAA,CAAAgD,aAAA;IAAMmB,SAAS,EAAC,wBAAwB;IAACC,uBAAuB,EAAE;MAAEC,MAAM,EAAEJ;IAAO;EAAG,EAAG,GAAG,IAAI;EAE3H,MAAMK,MAAM,gBACXtE,KAAA,CAAAgD,aAAA,CAAAhD,KAAA,CAAAuE,QAAA,QACEjC,UAAU,iBACVtC,KAAA,CAAAgD,aAAA,CAACnD,kBAAkB;IAAC2E,OAAO,EAAEnC,aAAc;IAACH,KAAK,EAAEE,WAAY;IAACqC,IAAI,EAAC;EAAQ,GAC3ElC,WAAW,CAACmC,KACM,CACpB,EACAnF,iBAAiB,CAACqB,IAAI,CAAC,iBAAIZ,KAAA,CAAAgD,aAAA,CAACvC,iBAAiB;IAACG,IAAI,EAAEA;EAAK,EAC3D,CACA;EAED,oBACCZ,KAAA,CAAAgD,aAAA,CAACrB,mBAAmB;IACnBgD,EAAE,EAAC,GAAG;IACNpD,EAAE,EAAEA,EAAG;IACP,WAAQ,cAAc;IACtB,eAAakB,WAAY;IACzBC,MAAM,EAAED,WAAY;IACpBjB,QAAQ,EAAEA,QAAS;IACnBQ,IAAI,EAAEA,IAAK;IACXsB,OAAO,EAAEA,CAAA,KAAW;MACnB,CAAC9B,QAAQ,IAAIO,OAAO,CAAC6C,MAAM,EAAE;IAC9B,CAAE;IACF,cAAY1C,KAAM;IAClBA,KAAK,EAAEA,KAAM;IACb2C,IAAI,EAAEhE,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEiE,EAAG;IACtBZ,QAAQ,EAAEA,QAAS;IACnBnB,IAAI,EAAEA,IAAK;IACXtB,KAAK,EAAEA,KAAM;IACb6C,MAAM,EAAEA,MAAO;IACfS,MAAM,EAAEnD,cAAc,iBAAI5B,KAAA,CAAAgD,aAAA,CAACpB,cAAc,EAAKhB,IAAK,CAAI;IACvDyC,OAAO,EAAEA,OAAQ;IACjB2B,IAAI,EACH,CAAC1E,WAAW,IACZ,CAACuB,WAAW,KACX,CAACgC,QAAQ,IAAKA,QAAQ,IAAIG,iBAAkB,CAAC,KAC7C,mBACAhE,KAAA,CAAAgD,aAAA,CAACxC,QAAQ;MACRmC,KAAK,EAAEA,KAAM;MACbsC,YAAY,EAAE1C,WAAW,CAAC2C,OAAO,GAAG,CAAE;MACtCtC,GAAG,EAAEA,GAAI;MACTF,MAAM,EAAE,CAAC,CAACA,MAAO;MACjByC,QAAQ,EAAE3D,QAAS;MACnBqB,IAAI,EAAEA,IAAK;MACXC,EAAE,EAAEA,EAAG;MACP1B,IAAI,EAAEc,KAAM;MACZkD,kBAAkB,EAAEvB;IAAS,EAE9B;EACD,EACA;AAEJ,CAAC;AAED,SAASwB,qBAAqBA,CAACC,CAA4B,EAAEC,CAA4B;EACxF,IAAI,CAACD,CAAC,IAAI,CAACC,CAAC,EAAE;IACb,OAAOD,CAAC,KAAKC,CAAC;EACf;EACA,OAAO,IAAIC,IAAI,CAACF,CAAC,CAAC,CAACG,WAAW,EAAE,KAAK,IAAID,IAAI,CAACD,CAAC,CAAC,CAACE,WAAW,EAAE;AAC/D;AAEA,MAAMC,IAAI,GAA+B,CACxC,IAAI,EACJ,OAAO,EACP,UAAU,EACV,UAAU,EACV,qBAAqB,EACrB,gBAAgB,EAChB,GAAG,EACH,iBAAiB,EACjB,kBAAkB,CAClB;AAED;AAlMAxG,MAAA,CAAOyG,aAAE,eAmMM1F,IAAI,CAACoB,2BAA2B,EAAE,CAACuE,SAAS,EAAEC,SAAS,KAAI;EAAA,IAAAC,qBAAA,EAAAC,qBAAA,EAAAC,qBAAA,EAAAC,qBAAA,EAAAC,eAAA,EAAAC,iBAAA,EAAAC,eAAA,EAAAC,iBAAA;EACzE,IAAIX,IAAI,CAACY,IAAI,CAAEC,GAAG,IAAKX,SAAS,CAACW,GAAG,CAAC,KAAKV,SAAS,CAACU,GAAG,CAAC,CAAC,EAAE;IAC1D,OAAO,KAAK;EACb;EAEA,IAAIX,SAAS,CAAChF,IAAI,KAAKiF,SAAS,CAACjF,IAAI,EAAE;IACtC,OAAO,IAAI;EACZ;EAEA,IAAIgF,SAAS,CAAChF,IAAI,CAAC4F,GAAG,KAAKX,SAAS,CAACjF,IAAI,CAAC4F,GAAG,EAAE;IAC9C,OAAO,KAAK;EACb;EACA,IAAI,EAAAV,qBAAA,GAAAF,SAAS,CAAChF,IAAI,CAAC6F,UAAU,cAAAX,qBAAA,uBAAzBA,qBAAA,CAA2BL,WAAW,EAAE,QAAAM,qBAAA,GAAKF,SAAS,CAACjF,IAAI,CAAC6F,UAAU,cAAAV,qBAAA,uBAAzBA,qBAAA,CAA2BN,WAAW,EAAE,GAAE;IAC1F,OAAO,KAAK;EACb;EACA,IAAIJ,qBAAqB,EAAAW,qBAAA,GAACJ,SAAS,CAAChF,IAAI,CAACC,WAAW,cAAAmF,qBAAA,uBAA1BA,qBAAA,CAA4BS,UAAU,GAAAR,qBAAA,GAAEJ,SAAS,CAACjF,IAAI,CAACC,WAAW,cAAAoF,qBAAA,uBAA1BA,qBAAA,CAA4BQ,UAAU,CAAC,EAAE;IAC1G,OAAO,KAAK;EACb;EACA,IAAIb,SAAS,CAAChF,IAAI,CAAC+B,KAAK,KAAKkD,SAAS,CAACjF,IAAI,CAAC+B,KAAK,EAAE;IAClD,OAAO,KAAK;EACb;EACA,IAAIpD,iBAAiB,CAACqG,SAAS,CAAChF,IAAI,CAAC,IAAIrB,iBAAiB,CAACsG,SAAS,CAACjF,IAAI,CAAC,IAAI,EAAAsF,eAAA,GAAAN,SAAS,CAAChF,IAAI,cAAAsF,eAAA,wBAAAC,iBAAA,GAAdD,eAAA,CAAgBxG,CAAC,cAAAyG,iBAAA,uBAAjBA,iBAAA,CAAmBrC,MAAM,QAAAsC,eAAA,GAAKP,SAAS,CAACjF,IAAI,cAAAwF,eAAA,wBAAAC,iBAAA,GAAdD,eAAA,CAAgB1G,CAAC,cAAA2G,iBAAA,uBAAjBA,iBAAA,CAAmBvC,MAAM,GAAE;IACtI,OAAO,KAAK;EACb;EACA,IAAI8B,SAAS,CAAChF,IAAI,CAAC8F,QAAQ,KAAKb,SAAS,CAACjF,IAAI,CAAC8F,QAAQ,EAAE;IACxD,OAAO,KAAK;EACb;EAEA,IACCnH,iBAAiB,CAACqG,SAAS,CAAChF,IAAI,CAAC,IACjCrB,iBAAiB,CAACsG,SAAS,CAACjF,IAAI,CAAC,IACjCgF,SAAS,CAAChF,IAAI,CAAC+F,cAAc,KAAKd,SAAS,CAACjF,IAAI,CAAC+F,cAAc,EAC9D;IACD,OAAO,KAAK;EACb;EAEA,OAAO,IAAI;AACZ,CAAC,CAxOQ","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"438a3b7a02735f5724cf201e1ae6e2c58385acc0"}
