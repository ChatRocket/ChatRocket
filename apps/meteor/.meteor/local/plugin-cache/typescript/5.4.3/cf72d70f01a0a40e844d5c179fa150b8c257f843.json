{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/lib/rooms/roomTypes/public.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/lib/rooms/roomTypes/public.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/lib/rooms/roomTypes/public.ts","inputSourceMap":{"version":3,"file":"client/lib/rooms/roomTypes/public.ts","sourceRoot":"","sources":["client/lib/rooms/roomTypes/public.ts"],"names":[],"mappings":"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","sourcesContent":["import type { AtLeast, IRoom } from '@rocket.chat/core-typings';\nimport { isRoomFederated } from '@rocket.chat/core-typings';\nimport { Meteor } from 'meteor/meteor';\nimport type { Mongo } from 'meteor/mongo';\n\nimport { hasAtLeastOnePermission } from '../../../../app/authorization/client';\nimport { ChatRoom } from '../../../../app/models/client';\nimport { settings } from '../../../../app/settings/client';\nimport { getUserPreference } from '../../../../app/utils/client';\nimport { getRoomAvatarURL } from '../../../../app/utils/client/getRoomAvatarURL';\nimport type { IRoomTypeClientDirectives } from '../../../../definition/IRoomTypeConfig';\nimport { RoomSettingsEnum, RoomMemberActions, UiTextContext } from '../../../../definition/IRoomTypeConfig';\nimport { getPublicRoomType } from '../../../../lib/rooms/roomTypes/public';\nimport * as Federation from '../../federation/Federation';\nimport { roomCoordinator } from '../roomCoordinator';\n\nexport const PublicRoomType = getPublicRoomType(roomCoordinator);\n\nroomCoordinator.add(\n\t{\n\t\t...PublicRoomType,\n\t\tlabel: 'Channels',\n\t},\n\t{\n\t\tallowRoomSettingChange(room, setting) {\n\t\t\tif (isRoomFederated(room as IRoom)) {\n\t\t\t\treturn Federation.isRoomSettingAllowed(room, setting);\n\t\t\t}\n\t\t\tswitch (setting) {\n\t\t\t\tcase RoomSettingsEnum.BROADCAST:\n\t\t\t\t\treturn Boolean(room.broadcast);\n\t\t\t\tcase RoomSettingsEnum.READ_ONLY:\n\t\t\t\t\treturn Boolean(!room.broadcast);\n\t\t\t\tcase RoomSettingsEnum.REACT_WHEN_READ_ONLY:\n\t\t\t\t\treturn Boolean(!room.broadcast && room.ro);\n\t\t\t\tcase RoomSettingsEnum.E2E:\n\t\t\t\t\treturn false;\n\t\t\t\tcase RoomSettingsEnum.SYSTEM_MESSAGES:\n\t\t\t\tdefault:\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\n\t\tallowMemberAction(_room, action, showingUserId, userSubscription) {\n\t\t\tif (isRoomFederated(_room as IRoom)) {\n\t\t\t\treturn Federation.actionAllowed(_room, action, showingUserId, userSubscription);\n\t\t\t}\n\t\t\tswitch (action) {\n\t\t\t\tcase RoomMemberActions.BLOCK:\n\t\t\t\t\treturn false;\n\t\t\t\tdefault:\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\n\t\troomName(roomData) {\n\t\t\tif (roomData.prid || isRoomFederated(roomData)) {\n\t\t\t\treturn roomData.fname;\n\t\t\t}\n\t\t\tif (settings.get('UI_Allow_room_names_with_special_chars')) {\n\t\t\t\treturn roomData.fname || roomData.name;\n\t\t\t}\n\t\t\treturn roomData.name;\n\t\t},\n\n\t\tisGroupChat(_room) {\n\t\t\treturn true;\n\t\t},\n\n\t\tgetUiText(context) {\n\t\t\tswitch (context) {\n\t\t\t\tcase UiTextContext.HIDE_WARNING:\n\t\t\t\t\treturn 'Hide_Room_Warning';\n\t\t\t\tcase UiTextContext.LEAVE_WARNING:\n\t\t\t\t\treturn 'Leave_Room_Warning';\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\n\t\tcondition() {\n\t\t\tconst groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n\t\t\treturn (\n\t\t\t\tgroupByType &&\n\t\t\t\t(hasAtLeastOnePermission(['view-c-room', 'view-joined-room']) || settings.get('Accounts_AllowAnonymousRead') === true)\n\t\t\t);\n\t\t},\n\n\t\tgetAvatarPath(room) {\n\t\t\treturn getRoomAvatarURL({ roomId: room._id, cache: room.avatarETag });\n\t\t},\n\n\t\tgetIcon(room) {\n\t\t\tif (room.prid) {\n\t\t\t\treturn 'discussion';\n\t\t\t}\n\t\t\tif (room.teamMain) {\n\t\t\t\treturn 'team';\n\t\t\t}\n\t\t\tif (isRoomFederated(room)) {\n\t\t\t\treturn 'globe';\n\t\t\t}\n\n\t\t\treturn 'hashtag';\n\t\t},\n\n\t\textractOpenRoomParams({ name }) {\n\t\t\treturn { type: 'c', reference: name };\n\t\t},\n\n\t\tfindRoom(identifier) {\n\t\t\tconst query: Mongo.Selector<IRoom> = {\n\t\t\t\tt: 'c',\n\t\t\t\tname: identifier,\n\t\t\t};\n\n\t\t\treturn ChatRoom.findOne(query);\n\t\t},\n\n\t\tshowJoinLink(roomId) {\n\t\t\treturn !!ChatRoom.findOne({ _id: roomId, t: 'c' });\n\t\t},\n\t} as AtLeast<IRoomTypeClientDirectives, 'isGroupChat' | 'roomName'>,\n);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/lib/rooms/roomTypes/public.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/lib/rooms/roomTypes/public.ts","inputSourceMap":{"version":3,"file":"client/lib/rooms/roomTypes/public.ts","sourceRoot":"","sources":["client/lib/rooms/roomTypes/public.ts"],"names":[],"mappings":"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","sourcesContent":["import type { AtLeast, IRoom } from '@rocket.chat/core-typings';\nimport { isRoomFederated } from '@rocket.chat/core-typings';\nimport { Meteor } from 'meteor/meteor';\nimport type { Mongo } from 'meteor/mongo';\n\nimport { hasAtLeastOnePermission } from '../../../../app/authorization/client';\nimport { ChatRoom } from '../../../../app/models/client';\nimport { settings } from '../../../../app/settings/client';\nimport { getUserPreference } from '../../../../app/utils/client';\nimport { getRoomAvatarURL } from '../../../../app/utils/client/getRoomAvatarURL';\nimport type { IRoomTypeClientDirectives } from '../../../../definition/IRoomTypeConfig';\nimport { RoomSettingsEnum, RoomMemberActions, UiTextContext } from '../../../../definition/IRoomTypeConfig';\nimport { getPublicRoomType } from '../../../../lib/rooms/roomTypes/public';\nimport * as Federation from '../../federation/Federation';\nimport { roomCoordinator } from '../roomCoordinator';\n\nexport const PublicRoomType = getPublicRoomType(roomCoordinator);\n\nroomCoordinator.add(\n\t{\n\t\t...PublicRoomType,\n\t\tlabel: 'Channels',\n\t},\n\t{\n\t\tallowRoomSettingChange(room, setting) {\n\t\t\tif (isRoomFederated(room as IRoom)) {\n\t\t\t\treturn Federation.isRoomSettingAllowed(room, setting);\n\t\t\t}\n\t\t\tswitch (setting) {\n\t\t\t\tcase RoomSettingsEnum.BROADCAST:\n\t\t\t\t\treturn Boolean(room.broadcast);\n\t\t\t\tcase RoomSettingsEnum.READ_ONLY:\n\t\t\t\t\treturn Boolean(!room.broadcast);\n\t\t\t\tcase RoomSettingsEnum.REACT_WHEN_READ_ONLY:\n\t\t\t\t\treturn Boolean(!room.broadcast && room.ro);\n\t\t\t\tcase RoomSettingsEnum.E2E:\n\t\t\t\t\treturn false;\n\t\t\t\tcase RoomSettingsEnum.SYSTEM_MESSAGES:\n\t\t\t\tdefault:\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\n\t\tallowMemberAction(_room, action, showingUserId, userSubscription) {\n\t\t\tif (isRoomFederated(_room as IRoom)) {\n\t\t\t\treturn Federation.actionAllowed(_room, action, showingUserId, userSubscription);\n\t\t\t}\n\t\t\tswitch (action) {\n\t\t\t\tcase RoomMemberActions.BLOCK:\n\t\t\t\t\treturn false;\n\t\t\t\tdefault:\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\n\t\troomName(roomData) {\n\t\t\tif (roomData.prid || isRoomFederated(roomData)) {\n\t\t\t\treturn roomData.fname;\n\t\t\t}\n\t\t\tif (settings.get('UI_Allow_room_names_with_special_chars')) {\n\t\t\t\treturn roomData.fname || roomData.name;\n\t\t\t}\n\t\t\treturn roomData.name;\n\t\t},\n\n\t\tisGroupChat(_room) {\n\t\t\treturn true;\n\t\t},\n\n\t\tgetUiText(context) {\n\t\t\tswitch (context) {\n\t\t\t\tcase UiTextContext.HIDE_WARNING:\n\t\t\t\t\treturn 'Hide_Room_Warning';\n\t\t\t\tcase UiTextContext.LEAVE_WARNING:\n\t\t\t\t\treturn 'Leave_Room_Warning';\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\n\t\tcondition() {\n\t\t\tconst groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n\t\t\treturn (\n\t\t\t\tgroupByType &&\n\t\t\t\t(hasAtLeastOnePermission(['view-c-room', 'view-joined-room']) || settings.get('Accounts_AllowAnonymousRead') === true)\n\t\t\t);\n\t\t},\n\n\t\tgetAvatarPath(room) {\n\t\t\treturn getRoomAvatarURL({ roomId: room._id, cache: room.avatarETag });\n\t\t},\n\n\t\tgetIcon(room) {\n\t\t\tif (room.prid) {\n\t\t\t\treturn 'discussion';\n\t\t\t}\n\t\t\tif (room.teamMain) {\n\t\t\t\treturn 'team';\n\t\t\t}\n\t\t\tif (isRoomFederated(room)) {\n\t\t\t\treturn 'globe';\n\t\t\t}\n\n\t\t\treturn 'hashtag';\n\t\t},\n\n\t\textractOpenRoomParams({ name }) {\n\t\t\treturn { type: 'c', reference: name };\n\t\t},\n\n\t\tfindRoom(identifier) {\n\t\t\tconst query: Mongo.Selector<IRoom> = {\n\t\t\t\tt: 'c',\n\t\t\t\tname: identifier,\n\t\t\t};\n\n\t\t\treturn ChatRoom.findOne(query);\n\t\t},\n\n\t\tshowJoinLink(roomId) {\n\t\t\treturn !!ChatRoom.findOne({ _id: roomId, t: 'c' });\n\t\t},\n\t} as AtLeast<IRoomTypeClientDirectives, 'isGroupChat' | 'roomName'>,\n);\n"]}}},"code":"var _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 0);\nmodule.export({\n  PublicRoomType: function () {\n    return PublicRoomType;\n  }\n});\nvar isRoomFederated;\nmodule.link(\"@rocket.chat/core-typings\", {\n  isRoomFederated: function (v) {\n    isRoomFederated = v;\n  }\n}, 0);\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 1);\nvar hasAtLeastOnePermission;\nmodule.link(\"../../../../app/authorization/client\", {\n  hasAtLeastOnePermission: function (v) {\n    hasAtLeastOnePermission = v;\n  }\n}, 2);\nvar ChatRoom;\nmodule.link(\"../../../../app/models/client\", {\n  ChatRoom: function (v) {\n    ChatRoom = v;\n  }\n}, 3);\nvar settings;\nmodule.link(\"../../../../app/settings/client\", {\n  settings: function (v) {\n    settings = v;\n  }\n}, 4);\nvar getUserPreference;\nmodule.link(\"../../../../app/utils/client\", {\n  getUserPreference: function (v) {\n    getUserPreference = v;\n  }\n}, 5);\nvar getRoomAvatarURL;\nmodule.link(\"../../../../app/utils/client/getRoomAvatarURL\", {\n  getRoomAvatarURL: function (v) {\n    getRoomAvatarURL = v;\n  }\n}, 6);\nvar RoomSettingsEnum, RoomMemberActions, UiTextContext;\nmodule.link(\"../../../../definition/IRoomTypeConfig\", {\n  RoomSettingsEnum: function (v) {\n    RoomSettingsEnum = v;\n  },\n  RoomMemberActions: function (v) {\n    RoomMemberActions = v;\n  },\n  UiTextContext: function (v) {\n    UiTextContext = v;\n  }\n}, 7);\nvar getPublicRoomType;\nmodule.link(\"../../../../lib/rooms/roomTypes/public\", {\n  getPublicRoomType: function (v) {\n    getPublicRoomType = v;\n  }\n}, 8);\nvar Federation;\nmodule.link(\"../../federation/Federation\", {\n  \"*\": function (v) {\n    Federation = v;\n  }\n}, 9);\nvar roomCoordinator;\nmodule.link(\"../roomCoordinator\", {\n  roomCoordinator: function (v) {\n    roomCoordinator = v;\n  }\n}, 10);\nvar PublicRoomType = getPublicRoomType(roomCoordinator);\nroomCoordinator.add(_objectSpread(_objectSpread({}, PublicRoomType), {}, {\n  label: 'Channels'\n}), {\n  allowRoomSettingChange: function (room, setting) {\n    if (isRoomFederated(room)) {\n      return Federation.isRoomSettingAllowed(room, setting);\n    }\n    switch (setting) {\n      case RoomSettingsEnum.BROADCAST:\n        return Boolean(room.broadcast);\n      case RoomSettingsEnum.READ_ONLY:\n        return Boolean(!room.broadcast);\n      case RoomSettingsEnum.REACT_WHEN_READ_ONLY:\n        return Boolean(!room.broadcast && room.ro);\n      case RoomSettingsEnum.E2E:\n        return false;\n      case RoomSettingsEnum.SYSTEM_MESSAGES:\n      default:\n        return true;\n    }\n  },\n  allowMemberAction: function (_room, action, showingUserId, userSubscription) {\n    if (isRoomFederated(_room)) {\n      return Federation.actionAllowed(_room, action, showingUserId, userSubscription);\n    }\n    switch (action) {\n      case RoomMemberActions.BLOCK:\n        return false;\n      default:\n        return true;\n    }\n  },\n  roomName: function (roomData) {\n    if (roomData.prid || isRoomFederated(roomData)) {\n      return roomData.fname;\n    }\n    if (settings.get('UI_Allow_room_names_with_special_chars')) {\n      return roomData.fname || roomData.name;\n    }\n    return roomData.name;\n  },\n  isGroupChat: function (_room) {\n    return true;\n  },\n  getUiText: function (context) {\n    switch (context) {\n      case UiTextContext.HIDE_WARNING:\n        return 'Hide_Room_Warning';\n      case UiTextContext.LEAVE_WARNING:\n        return 'Leave_Room_Warning';\n      default:\n        return '';\n    }\n  },\n  condition: function () {\n    var groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n    return groupByType && (hasAtLeastOnePermission(['view-c-room', 'view-joined-room']) || settings.get('Accounts_AllowAnonymousRead') === true);\n  },\n  getAvatarPath: function (room) {\n    return getRoomAvatarURL({\n      roomId: room._id,\n      cache: room.avatarETag\n    });\n  },\n  getIcon: function (room) {\n    if (room.prid) {\n      return 'discussion';\n    }\n    if (room.teamMain) {\n      return 'team';\n    }\n    if (isRoomFederated(room)) {\n      return 'globe';\n    }\n    return 'hashtag';\n  },\n  extractOpenRoomParams: function (_ref) {\n    var name = _ref.name;\n    return {\n      type: 'c',\n      reference: name\n    };\n  },\n  findRoom: function (identifier) {\n    var query = {\n      t: 'c',\n      name: identifier\n    };\n    return ChatRoom.findOne(query);\n  },\n  showJoinLink: function (roomId) {\n    return !!ChatRoom.findOne({\n      _id: roomId,\n      t: 'c'\n    });\n  }\n});","map":{"version":3,"names":["_objectSpread","module","link","default","v","export","PublicRoomType","isRoomFederated","Meteor","hasAtLeastOnePermission","ChatRoom","settings","getUserPreference","getRoomAvatarURL","RoomSettingsEnum","RoomMemberActions","UiTextContext","getPublicRoomType","Federation","*","roomCoordinator","add","label","allowRoomSettingChange","room","setting","isRoomSettingAllowed","BROADCAST","Boolean","broadcast","READ_ONLY","REACT_WHEN_READ_ONLY","ro","E2E","SYSTEM_MESSAGES","allowMemberAction","_room","action","showingUserId","userSubscription","actionAllowed","BLOCK","roomName","roomData","prid","fname","get","name","isGroupChat","getUiText","context","HIDE_WARNING","LEAVE_WARNING","condition","groupByType","userId","getAvatarPath","roomId","_id","cache","avatarETag","getIcon","teamMain","extractOpenRoomParams","_ref","type","reference","findRoom","identifier","query","t","findOne","showJoinLink"],"sources":["client/lib/rooms/roomTypes/public.ts"],"sourcesContent":["import type { AtLeast, IRoom } from '@rocket.chat/core-typings';\nimport { isRoomFederated } from '@rocket.chat/core-typings';\nimport { Meteor } from 'meteor/meteor';\nimport type { Mongo } from 'meteor/mongo';\n\nimport { hasAtLeastOnePermission } from '../../../../app/authorization/client';\nimport { ChatRoom } from '../../../../app/models/client';\nimport { settings } from '../../../../app/settings/client';\nimport { getUserPreference } from '../../../../app/utils/client';\nimport { getRoomAvatarURL } from '../../../../app/utils/client/getRoomAvatarURL';\nimport type { IRoomTypeClientDirectives } from '../../../../definition/IRoomTypeConfig';\nimport { RoomSettingsEnum, RoomMemberActions, UiTextContext } from '../../../../definition/IRoomTypeConfig';\nimport { getPublicRoomType } from '../../../../lib/rooms/roomTypes/public';\nimport * as Federation from '../../federation/Federation';\nimport { roomCoordinator } from '../roomCoordinator';\n\nexport const PublicRoomType = getPublicRoomType(roomCoordinator);\n\nroomCoordinator.add(\n\t{\n\t\t...PublicRoomType,\n\t\tlabel: 'Channels',\n\t},\n\t{\n\t\tallowRoomSettingChange(room, setting) {\n\t\t\tif (isRoomFederated(room as IRoom)) {\n\t\t\t\treturn Federation.isRoomSettingAllowed(room, setting);\n\t\t\t}\n\t\t\tswitch (setting) {\n\t\t\t\tcase RoomSettingsEnum.BROADCAST:\n\t\t\t\t\treturn Boolean(room.broadcast);\n\t\t\t\tcase RoomSettingsEnum.READ_ONLY:\n\t\t\t\t\treturn Boolean(!room.broadcast);\n\t\t\t\tcase RoomSettingsEnum.REACT_WHEN_READ_ONLY:\n\t\t\t\t\treturn Boolean(!room.broadcast && room.ro);\n\t\t\t\tcase RoomSettingsEnum.E2E:\n\t\t\t\t\treturn false;\n\t\t\t\tcase RoomSettingsEnum.SYSTEM_MESSAGES:\n\t\t\t\tdefault:\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\n\t\tallowMemberAction(_room, action, showingUserId, userSubscription) {\n\t\t\tif (isRoomFederated(_room as IRoom)) {\n\t\t\t\treturn Federation.actionAllowed(_room, action, showingUserId, userSubscription);\n\t\t\t}\n\t\t\tswitch (action) {\n\t\t\t\tcase RoomMemberActions.BLOCK:\n\t\t\t\t\treturn false;\n\t\t\t\tdefault:\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\n\t\troomName(roomData) {\n\t\t\tif (roomData.prid || isRoomFederated(roomData)) {\n\t\t\t\treturn roomData.fname;\n\t\t\t}\n\t\t\tif (settings.get('UI_Allow_room_names_with_special_chars')) {\n\t\t\t\treturn roomData.fname || roomData.name;\n\t\t\t}\n\t\t\treturn roomData.name;\n\t\t},\n\n\t\tisGroupChat(_room) {\n\t\t\treturn true;\n\t\t},\n\n\t\tgetUiText(context) {\n\t\t\tswitch (context) {\n\t\t\t\tcase UiTextContext.HIDE_WARNING:\n\t\t\t\t\treturn 'Hide_Room_Warning';\n\t\t\t\tcase UiTextContext.LEAVE_WARNING:\n\t\t\t\t\treturn 'Leave_Room_Warning';\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\n\t\tcondition() {\n\t\t\tconst groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n\t\t\treturn (\n\t\t\t\tgroupByType &&\n\t\t\t\t(hasAtLeastOnePermission(['view-c-room', 'view-joined-room']) || settings.get('Accounts_AllowAnonymousRead') === true)\n\t\t\t);\n\t\t},\n\n\t\tgetAvatarPath(room) {\n\t\t\treturn getRoomAvatarURL({ roomId: room._id, cache: room.avatarETag });\n\t\t},\n\n\t\tgetIcon(room) {\n\t\t\tif (room.prid) {\n\t\t\t\treturn 'discussion';\n\t\t\t}\n\t\t\tif (room.teamMain) {\n\t\t\t\treturn 'team';\n\t\t\t}\n\t\t\tif (isRoomFederated(room)) {\n\t\t\t\treturn 'globe';\n\t\t\t}\n\n\t\t\treturn 'hashtag';\n\t\t},\n\n\t\textractOpenRoomParams({ name }) {\n\t\t\treturn { type: 'c', reference: name };\n\t\t},\n\n\t\tfindRoom(identifier) {\n\t\t\tconst query: Mongo.Selector<IRoom> = {\n\t\t\t\tt: 'c',\n\t\t\t\tname: identifier,\n\t\t\t};\n\n\t\t\treturn ChatRoom.findOne(query);\n\t\t},\n\n\t\tshowJoinLink(roomId) {\n\t\t\treturn !!ChatRoom.findOne({ _id: roomId, t: 'c' });\n\t\t},\n\t} as AtLeast<IRoomTypeClientDirectives, 'isGroupChat' | 'roomName'>,\n);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"cf72d70f01a0a40e844d5c179fa150b8c257f843"}
