{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","inputSourceMap":{"version":3,"file":"client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","sourceRoot":"","sources":["client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,iBAAiB,EAAE,MAAM,6BAA6B,CAAC;AAEhE,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAE5C,MAAM,eAAe,GAAkB;IACtC,QAAQ,EAAE,OAAO;IACjB,GAAG,EAAE,UAAU;IACf,IAAI,EAAE,UAAU;IAChB,MAAM,EAAE,MAAM;IACd,UAAU,EAAE,UAAU;IACtB,QAAQ,EAAE,YAAY;IACtB,UAAU,EAAE,UAAU;CACtB,CAAC;AAEF,MAAM,CAAC,MAAM,WAAW,GAAG,CAC1B,GAAmC,EACnC,SAAoC,EACpC,YAAsB,EAIrB,EAAE;IACH,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,MAAM,CAAC,gBAAgB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;IAE9F,SAAS,CAAC,GAAG,EAAE;QACd,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC;QAElC,IAAI,CAAC,QAAQ,EAAE,CAAC;YACf,OAAO;QACR,CAAC;QACD,QAAQ,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,OAAO,IAAI,MAAM,CAAC,gBAAgB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;IACrE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IAEV,SAAS,CAAC,GAAG,EAAE;QACd,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC;QAElC,IAAI,CAAC,QAAQ,EAAE,CAAC;YACf,OAAO;QACR,CAAC;QACD,MAAM,kBAAkB,GAAG,GAAG,EAAE;YAC/B,MAAM,EAAE,KAAK,EAAE,GAAG,QAAQ,CAAC;YAC3B,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,SAAS,CAAC;YACtC,IAAI,CAAC,MAAM,EAAE,CAAC;gBACb,OAAO;YACR,CAAC;YACD,MAAM,CAAC,SAAS,GAAG,KAAK;iBACtB,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC;iBACtB,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC;iBACrB,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC;iBACrB,OAAO,CAAC,KAAK,EAAE,aAAa,CAAC;iBAC7B,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAC3B,CAAC,CAAC;QACF,kBAAkB,EAAE,CAAC;QACrB,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAAC;QACvD,OAAO,GAAG,EAAE;YACX,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAAC;QAC3D,CAAC,CAAC;IACH,CAAC,EAAE,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC,CAAC;IAErB,MAAM,iBAAiB,GAAG,iBAAiB,CAAC,SAAS,CAAC,CAAC;IAEvD,MAAM,mBAAmB,GAAG,iBAAiB,CAAC,GAAG,CAAC,CAAC;IAEnD,OAAO;QACN,aAAa,EAAE;YACd,GAAG,CAAC,YAAY,IAAI;gBACnB,UAAU,EAAE,QAAQ;aACpB,CAAC;YACF,UAAU,EAAE,UAAU;YACtB,QAAQ,EAAE,YAAY;YACtB,YAAY,EAAE,YAAY;YAC1B,UAAU,EAAE,UAAU;YACtB,SAAS,EAAE,QAAQ;YACnB,SAAS,EAAE,iBAAiB,CAAC,SAAS,GAAG,QAAQ,CAAC,KAAK,EAAE,SAAS,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ;YAChG,GAAG,CAAC,iBAAiB,CAAC,SAAS,IAAI;gBAClC,MAAM,EAAE,GAAG,iBAAiB,CAAC,SAAS,IAAI;aAC1C,CAAC;SACF;QACD,WAAW,EAAE;YACZ,GAAG,eAAe;YAClB,IAAI,EAAE,KAAK,EAAE,IAAI;YACjB,KAAK,EAAE,mBAAmB,CAAC,UAAU;YACrC,SAAS,EAAE,KAAK,EAAE,UAAU;YAC5B,UAAU,EAAE,KAAK,EAAE,UAAU;SAC7B;KACD,CAAC;AACH,CAAC,CAAC","sourcesContent":["import { useContentBoxSize } from '@rocket.chat/fuselage-hooks';\nimport type { CSSProperties, RefObject } from 'react';\nimport { useEffect, useState } from 'react';\n\nconst shadowStyleBase: CSSProperties = {\n\tposition: 'fixed',\n\ttop: '-10000px',\n\tleft: '-10000px',\n\tresize: 'none',\n\twhiteSpace: 'pre-wrap',\n\twordWrap: 'break-word',\n\twillChange: 'contents',\n};\n\nexport const useAutoGrow = (\n\tref: RefObject<HTMLTextAreaElement>,\n\tshadowRef: RefObject<HTMLDivElement>,\n\thideTextArea?: boolean,\n): {\n\ttextAreaStyle: CSSProperties;\n\tshadowStyle: CSSProperties;\n} => {\n\tconst [style, setStyle] = useState(() => ref.current && window.getComputedStyle(ref.current));\n\n\tuseEffect(() => {\n\t\tconst { current: textarea } = ref;\n\n\t\tif (!textarea) {\n\t\t\treturn;\n\t\t}\n\t\tsetStyle(() => ref.current && window.getComputedStyle(ref.current));\n\t}, [ref]);\n\n\tuseEffect(() => {\n\t\tconst { current: textarea } = ref;\n\n\t\tif (!textarea) {\n\t\t\treturn;\n\t\t}\n\t\tconst updateTextareaSize = () => {\n\t\t\tconst { value } = textarea;\n\t\t\tconst { current: shadow } = shadowRef;\n\t\t\tif (!shadow) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tshadow.innerHTML = value\n\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t.replace(/</g, '&lt;')\n\t\t\t\t.replace(/>/g, '&gt;')\n\t\t\t\t.replace(/\\n$/, '<br/>&nbsp;')\n\t\t\t\t.replace(/\\n/g, '<br/>');\n\t\t};\n\t\tupdateTextareaSize();\n\t\ttextarea.addEventListener('input', updateTextareaSize);\n\t\treturn () => {\n\t\t\ttextarea.removeEventListener('input', updateTextareaSize);\n\t\t};\n\t}, [ref, shadowRef]);\n\n\tconst shadowContentSize = useContentBoxSize(shadowRef);\n\n\tconst composerContentSize = useContentBoxSize(ref);\n\n\treturn {\n\t\ttextAreaStyle: {\n\t\t\t...(hideTextArea && {\n\t\t\t\tvisibility: 'hidden',\n\t\t\t}),\n\t\t\twhiteSpace: 'pre-wrap',\n\t\t\twordWrap: 'break-word',\n\t\t\toverflowWrap: 'break-word',\n\t\t\twillChange: 'contents',\n\t\t\twordBreak: 'normal',\n\t\t\toverflowY: shadowContentSize.blockSize > parseInt(style?.maxHeight || '0') ? 'scroll' : 'hidden',\n\t\t\t...(shadowContentSize.blockSize && {\n\t\t\t\theight: `${shadowContentSize.blockSize}px`,\n\t\t\t}),\n\t\t},\n\t\tshadowStyle: {\n\t\t\t...shadowStyleBase,\n\t\t\tfont: style?.font,\n\t\t\twidth: composerContentSize.inlineSize,\n\t\t\tminHeight: style?.lineHeight,\n\t\t\tlineHeight: style?.lineHeight,\n\t\t},\n\t};\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","inputSourceMap":{"version":3,"file":"client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","sourceRoot":"","sources":["client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts"],"names":[],"mappings":"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","sourcesContent":["import { useContentBoxSize } from '@rocket.chat/fuselage-hooks';\nimport type { CSSProperties, RefObject } from 'react';\nimport { useEffect, useState } from 'react';\n\nconst shadowStyleBase: CSSProperties = {\n\tposition: 'fixed',\n\ttop: '-10000px',\n\tleft: '-10000px',\n\tresize: 'none',\n\twhiteSpace: 'pre-wrap',\n\twordWrap: 'break-word',\n\twillChange: 'contents',\n};\n\nexport const useAutoGrow = (\n\tref: RefObject<HTMLTextAreaElement>,\n\tshadowRef: RefObject<HTMLDivElement>,\n\thideTextArea?: boolean,\n): {\n\ttextAreaStyle: CSSProperties;\n\tshadowStyle: CSSProperties;\n} => {\n\tconst [style, setStyle] = useState(() => ref.current && window.getComputedStyle(ref.current));\n\n\tuseEffect(() => {\n\t\tconst { current: textarea } = ref;\n\n\t\tif (!textarea) {\n\t\t\treturn;\n\t\t}\n\t\tsetStyle(() => ref.current && window.getComputedStyle(ref.current));\n\t}, [ref]);\n\n\tuseEffect(() => {\n\t\tconst { current: textarea } = ref;\n\n\t\tif (!textarea) {\n\t\t\treturn;\n\t\t}\n\t\tconst updateTextareaSize = () => {\n\t\t\tconst { value } = textarea;\n\t\t\tconst { current: shadow } = shadowRef;\n\t\t\tif (!shadow) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tshadow.innerHTML = value\n\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t.replace(/</g, '&lt;')\n\t\t\t\t.replace(/>/g, '&gt;')\n\t\t\t\t.replace(/\\n$/, '<br/>&nbsp;')\n\t\t\t\t.replace(/\\n/g, '<br/>');\n\t\t};\n\t\tupdateTextareaSize();\n\t\ttextarea.addEventListener('input', updateTextareaSize);\n\t\treturn () => {\n\t\t\ttextarea.removeEventListener('input', updateTextareaSize);\n\t\t};\n\t}, [ref, shadowRef]);\n\n\tconst shadowContentSize = useContentBoxSize(shadowRef);\n\n\tconst composerContentSize = useContentBoxSize(ref);\n\n\treturn {\n\t\ttextAreaStyle: {\n\t\t\t...(hideTextArea && {\n\t\t\t\tvisibility: 'hidden',\n\t\t\t}),\n\t\t\twhiteSpace: 'pre-wrap',\n\t\t\twordWrap: 'break-word',\n\t\t\toverflowWrap: 'break-word',\n\t\t\twillChange: 'contents',\n\t\t\twordBreak: 'normal',\n\t\t\toverflowY: shadowContentSize.blockSize > parseInt(style?.maxHeight || '0') ? 'scroll' : 'hidden',\n\t\t\t...(shadowContentSize.blockSize && {\n\t\t\t\theight: `${shadowContentSize.blockSize}px`,\n\t\t\t}),\n\t\t},\n\t\tshadowStyle: {\n\t\t\t...shadowStyleBase,\n\t\t\tfont: style?.font,\n\t\t\twidth: composerContentSize.inlineSize,\n\t\t\tminHeight: style?.lineHeight,\n\t\t\tlineHeight: style?.lineHeight,\n\t\t},\n\t};\n};\n"]}}},"code":"let _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 0);\nmodule.export({\n  useAutoGrow: () => useAutoGrow\n});\nlet useContentBoxSize;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useContentBoxSize(v) {\n    useContentBoxSize = v;\n  }\n}, 0);\nlet useEffect, useState;\nmodule.link(\"react\", {\n  useEffect(v) {\n    useEffect = v;\n  },\n  useState(v) {\n    useState = v;\n  }\n}, 1);\nconst shadowStyleBase = {\n  position: 'fixed',\n  top: '-10000px',\n  left: '-10000px',\n  resize: 'none',\n  whiteSpace: 'pre-wrap',\n  wordWrap: 'break-word',\n  willChange: 'contents'\n};\nconst useAutoGrow = (ref, shadowRef, hideTextArea) => {\n  const [style, setStyle] = useState(() => ref.current && window.getComputedStyle(ref.current));\n  useEffect(() => {\n    const {\n      current: textarea\n    } = ref;\n    if (!textarea) {\n      return;\n    }\n    setStyle(() => ref.current && window.getComputedStyle(ref.current));\n  }, [ref]);\n  useEffect(() => {\n    const {\n      current: textarea\n    } = ref;\n    if (!textarea) {\n      return;\n    }\n    const updateTextareaSize = () => {\n      const {\n        value\n      } = textarea;\n      const {\n        current: shadow\n      } = shadowRef;\n      if (!shadow) {\n        return;\n      }\n      shadow.innerHTML = value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\n$/, '<br/>&nbsp;').replace(/\\n/g, '<br/>');\n    };\n    updateTextareaSize();\n    textarea.addEventListener('input', updateTextareaSize);\n    return () => {\n      textarea.removeEventListener('input', updateTextareaSize);\n    };\n  }, [ref, shadowRef]);\n  const shadowContentSize = useContentBoxSize(shadowRef);\n  const composerContentSize = useContentBoxSize(ref);\n  return {\n    textAreaStyle: _objectSpread(_objectSpread({}, hideTextArea && {\n      visibility: 'hidden'\n    }), {}, {\n      whiteSpace: 'pre-wrap',\n      wordWrap: 'break-word',\n      overflowWrap: 'break-word',\n      willChange: 'contents',\n      wordBreak: 'normal',\n      overflowY: shadowContentSize.blockSize > parseInt((style === null || style === void 0 ? void 0 : style.maxHeight) || '0') ? 'scroll' : 'hidden'\n    }, shadowContentSize.blockSize && {\n      height: \"\".concat(shadowContentSize.blockSize, \"px\")\n    }),\n    shadowStyle: _objectSpread(_objectSpread({}, shadowStyleBase), {}, {\n      font: style === null || style === void 0 ? void 0 : style.font,\n      width: composerContentSize.inlineSize,\n      minHeight: style === null || style === void 0 ? void 0 : style.lineHeight,\n      lineHeight: style === null || style === void 0 ? void 0 : style.lineHeight\n    })\n  };\n};","map":{"version":3,"names":["_objectSpread","module","link","default","v","export","useAutoGrow","useContentBoxSize","useEffect","useState","shadowStyleBase","position","top","left","resize","whiteSpace","wordWrap","willChange","ref","shadowRef","hideTextArea","style","setStyle","current","window","getComputedStyle","textarea","updateTextareaSize","value","shadow","innerHTML","replace","addEventListener","removeEventListener","shadowContentSize","composerContentSize","textAreaStyle","visibility","overflowWrap","wordBreak","overflowY","blockSize","parseInt","maxHeight","height","concat","shadowStyle","font","width","inlineSize","minHeight","lineHeight"],"sources":["client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts"],"sourcesContent":["import { useContentBoxSize } from '@rocket.chat/fuselage-hooks';\nimport type { CSSProperties, RefObject } from 'react';\nimport { useEffect, useState } from 'react';\n\nconst shadowStyleBase: CSSProperties = {\n\tposition: 'fixed',\n\ttop: '-10000px',\n\tleft: '-10000px',\n\tresize: 'none',\n\twhiteSpace: 'pre-wrap',\n\twordWrap: 'break-word',\n\twillChange: 'contents',\n};\n\nexport const useAutoGrow = (\n\tref: RefObject<HTMLTextAreaElement>,\n\tshadowRef: RefObject<HTMLDivElement>,\n\thideTextArea?: boolean,\n): {\n\ttextAreaStyle: CSSProperties;\n\tshadowStyle: CSSProperties;\n} => {\n\tconst [style, setStyle] = useState(() => ref.current && window.getComputedStyle(ref.current));\n\n\tuseEffect(() => {\n\t\tconst { current: textarea } = ref;\n\n\t\tif (!textarea) {\n\t\t\treturn;\n\t\t}\n\t\tsetStyle(() => ref.current && window.getComputedStyle(ref.current));\n\t}, [ref]);\n\n\tuseEffect(() => {\n\t\tconst { current: textarea } = ref;\n\n\t\tif (!textarea) {\n\t\t\treturn;\n\t\t}\n\t\tconst updateTextareaSize = () => {\n\t\t\tconst { value } = textarea;\n\t\t\tconst { current: shadow } = shadowRef;\n\t\t\tif (!shadow) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tshadow.innerHTML = value\n\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t.replace(/</g, '&lt;')\n\t\t\t\t.replace(/>/g, '&gt;')\n\t\t\t\t.replace(/\\n$/, '<br/>&nbsp;')\n\t\t\t\t.replace(/\\n/g, '<br/>');\n\t\t};\n\t\tupdateTextareaSize();\n\t\ttextarea.addEventListener('input', updateTextareaSize);\n\t\treturn () => {\n\t\t\ttextarea.removeEventListener('input', updateTextareaSize);\n\t\t};\n\t}, [ref, shadowRef]);\n\n\tconst shadowContentSize = useContentBoxSize(shadowRef);\n\n\tconst composerContentSize = useContentBoxSize(ref);\n\n\treturn {\n\t\ttextAreaStyle: {\n\t\t\t...(hideTextArea && {\n\t\t\t\tvisibility: 'hidden',\n\t\t\t}),\n\t\t\twhiteSpace: 'pre-wrap',\n\t\t\twordWrap: 'break-word',\n\t\t\toverflowWrap: 'break-word',\n\t\t\twillChange: 'contents',\n\t\t\twordBreak: 'normal',\n\t\t\toverflowY: shadowContentSize.blockSize > parseInt(style?.maxHeight || '0') ? 'scroll' : 'hidden',\n\t\t\t...(shadowContentSize.blockSize && {\n\t\t\t\theight: `${shadowContentSize.blockSize}px`,\n\t\t\t}),\n\t\t},\n\t\tshadowStyle: {\n\t\t\t...shadowStyleBase,\n\t\t\tfont: style?.font,\n\t\t\twidth: composerContentSize.inlineSize,\n\t\t\tminHeight: style?.lineHeight,\n\t\t\tlineHeight: style?.lineHeight,\n\t\t},\n\t};\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"10316a224ed97302d458a208508be8a3db9a9819"}
