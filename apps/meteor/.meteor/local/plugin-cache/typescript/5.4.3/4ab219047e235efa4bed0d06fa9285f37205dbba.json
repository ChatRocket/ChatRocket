{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/server/settings/lib/auditedSettingUpdates.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"server/settings/lib/auditedSettingUpdates.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/server/settings/lib/auditedSettingUpdates.ts","inputSourceMap":{"version":3,"file":"server/settings/lib/auditedSettingUpdates.ts","sourceRoot":"","sources":["server/settings/lib/auditedSettingUpdates.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAC;AAEnD,OAAO,EAAE,QAAQ,EAAE,MAAM,8BAA8B,CAAC;AAExD,MAAM,CAAC,MAAM,mBAAmB,GAC/B,CACC,KAA0C,EACzC,EAAE,CACJ,CAAC,EAAK,EAAE,GAAG,IAAmB,EAAE,EAAE;IACjC,MAAM,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;IACnC,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACnC,KAAK,YAAY,CAAC,sBAAsB,CACvC,kBAAkB,EAClB;QACC,EAAE,EAAE,GAAG;QACP,QAAQ;QACR,OAAO,EAAE,KAAK;KACd,EACD;QACC,IAAI,EAAE,MAAM;QACZ,GAAG,KAAK;KACR,CACD,CAAC;IACF,OAAO,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,CAAC;AAChC,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,qBAAqB,GACjC,CACC,KAA4C,EAC3C,EAAE,CACJ,CAAC,EAAK,EAAE,GAAG,IAAmB,EAAE,EAAE;IACjC,MAAM,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;IACnC,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACnC,KAAK,YAAY,CAAC,sBAAsB,CACvC,kBAAkB,EAClB;QACC,EAAE,EAAE,GAAG;QACP,QAAQ;QACR,OAAO,EAAE,KAAK;KACd,EACD;QACC,IAAI,EAAE,QAAQ;QACd,GAAG,KAAK;KACR,CACD,CAAC;IACF,OAAO,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,CAAC;AAChC,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,kBAAkB,GAC9B,CACC,KAAyC,EACxC,EAAE,CACJ,CAAC,EAAK,EAAE,GAAG,IAAmB,EAAE,EAAE;IACjC,MAAM,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;IACnC,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACnC,KAAK,YAAY,CAAC,sBAAsB,CACvC,kBAAkB,EAClB;QACC,EAAE,EAAE,GAAG;QACP,QAAQ;QACR,OAAO,EAAE,KAAK;KACd,EACD;QACC,IAAI,EAAE,KAAK;QACX,GAAG,KAAK;KACR,CACD,CAAC;IACF,OAAO,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,CAAC;AAChC,CAAC,CAAC","sourcesContent":["import type { IAuditServerAppActor, IAuditServerSystemActor, IAuditServerUserActor, ISetting } from '@rocket.chat/core-typings';\nimport { ServerEvents } from '@rocket.chat/models';\n\nimport { settings } from '../../../app/settings/server';\n\nexport const updateAuditedByUser =\n\t<T extends ISetting['value'], F extends (_id: ISetting['_id'], value: T, ...args: any[]) => any>(\n\t\tactor: Omit<IAuditServerUserActor, 'type'>,\n\t) =>\n\t(fn: F, ...args: Parameters<F>) => {\n\t\tconst [key, value, ...rest] = args;\n\t\tconst previous = settings.get(key);\n\t\tvoid ServerEvents.createAuditServerEvent(\n\t\t\t'settings.changed',\n\t\t\t{\n\t\t\t\tid: key,\n\t\t\t\tprevious,\n\t\t\t\tcurrent: value,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'user',\n\t\t\t\t...actor,\n\t\t\t},\n\t\t);\n\t\treturn fn(key, value, ...rest);\n\t};\n\nexport const updateAuditedBySystem =\n\t<T extends ISetting['value'], F extends (_id: ISetting['_id'], value: T, ...args: any[]) => any>(\n\t\tactor: Omit<IAuditServerSystemActor, 'type'>,\n\t) =>\n\t(fn: F, ...args: Parameters<F>) => {\n\t\tconst [key, value, ...rest] = args;\n\t\tconst previous = settings.get(key);\n\t\tvoid ServerEvents.createAuditServerEvent(\n\t\t\t'settings.changed',\n\t\t\t{\n\t\t\t\tid: key,\n\t\t\t\tprevious,\n\t\t\t\tcurrent: value,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'system',\n\t\t\t\t...actor,\n\t\t\t},\n\t\t);\n\t\treturn fn(key, value, ...rest);\n\t};\n\nexport const updateAuditedByApp =\n\t<T extends ISetting['value'], F extends (_id: ISetting['_id'], value: T, ...args: any[]) => any>(\n\t\tactor: Omit<IAuditServerAppActor, 'type'>,\n\t) =>\n\t(fn: F, ...args: Parameters<F>) => {\n\t\tconst [key, value, ...rest] = args;\n\t\tconst previous = settings.get(key);\n\t\tvoid ServerEvents.createAuditServerEvent(\n\t\t\t'settings.changed',\n\t\t\t{\n\t\t\t\tid: key,\n\t\t\t\tprevious,\n\t\t\t\tcurrent: value,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'app',\n\t\t\t\t...actor,\n\t\t\t},\n\t\t);\n\t\treturn fn(key, value, ...rest);\n\t};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true,"topLevelAwait":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/server/settings/lib/auditedSettingUpdates.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"server/settings/lib/auditedSettingUpdates.ts","inputSourceMap":{"version":3,"file":"server/settings/lib/auditedSettingUpdates.ts","sourceRoot":"","sources":["server/settings/lib/auditedSettingUpdates.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAC;AAEnD,OAAO,EAAE,QAAQ,EAAE,MAAM,8BAA8B,CAAC;AAExD,MAAM,CAAC,MAAM,mBAAmB,GAC/B,CACC,KAA0C,EACzC,EAAE,CACJ,CAAC,EAAK,EAAE,GAAG,IAAmB,EAAE,EAAE;IACjC,MAAM,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;IACnC,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACnC,KAAK,YAAY,CAAC,sBAAsB,CACvC,kBAAkB,EAClB;QACC,EAAE,EAAE,GAAG;QACP,QAAQ;QACR,OAAO,EAAE,KAAK;KACd,EACD;QACC,IAAI,EAAE,MAAM;QACZ,GAAG,KAAK;KACR,CACD,CAAC;IACF,OAAO,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,CAAC;AAChC,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,qBAAqB,GACjC,CACC,KAA4C,EAC3C,EAAE,CACJ,CAAC,EAAK,EAAE,GAAG,IAAmB,EAAE,EAAE;IACjC,MAAM,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;IACnC,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACnC,KAAK,YAAY,CAAC,sBAAsB,CACvC,kBAAkB,EAClB;QACC,EAAE,EAAE,GAAG;QACP,QAAQ;QACR,OAAO,EAAE,KAAK;KACd,EACD;QACC,IAAI,EAAE,QAAQ;QACd,GAAG,KAAK;KACR,CACD,CAAC;IACF,OAAO,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,CAAC;AAChC,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,kBAAkB,GAC9B,CACC,KAAyC,EACxC,EAAE,CACJ,CAAC,EAAK,EAAE,GAAG,IAAmB,EAAE,EAAE;IACjC,MAAM,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;IACnC,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;IACnC,KAAK,YAAY,CAAC,sBAAsB,CACvC,kBAAkB,EAClB;QACC,EAAE,EAAE,GAAG;QACP,QAAQ;QACR,OAAO,EAAE,KAAK;KACd,EACD;QACC,IAAI,EAAE,KAAK;QACX,GAAG,KAAK;KACR,CACD,CAAC;IACF,OAAO,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,CAAC;AAChC,CAAC,CAAC","sourcesContent":["import type { IAuditServerAppActor, IAuditServerSystemActor, IAuditServerUserActor, ISetting } from '@rocket.chat/core-typings';\nimport { ServerEvents } from '@rocket.chat/models';\n\nimport { settings } from '../../../app/settings/server';\n\nexport const updateAuditedByUser =\n\t<T extends ISetting['value'], F extends (_id: ISetting['_id'], value: T, ...args: any[]) => any>(\n\t\tactor: Omit<IAuditServerUserActor, 'type'>,\n\t) =>\n\t(fn: F, ...args: Parameters<F>) => {\n\t\tconst [key, value, ...rest] = args;\n\t\tconst previous = settings.get(key);\n\t\tvoid ServerEvents.createAuditServerEvent(\n\t\t\t'settings.changed',\n\t\t\t{\n\t\t\t\tid: key,\n\t\t\t\tprevious,\n\t\t\t\tcurrent: value,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'user',\n\t\t\t\t...actor,\n\t\t\t},\n\t\t);\n\t\treturn fn(key, value, ...rest);\n\t};\n\nexport const updateAuditedBySystem =\n\t<T extends ISetting['value'], F extends (_id: ISetting['_id'], value: T, ...args: any[]) => any>(\n\t\tactor: Omit<IAuditServerSystemActor, 'type'>,\n\t) =>\n\t(fn: F, ...args: Parameters<F>) => {\n\t\tconst [key, value, ...rest] = args;\n\t\tconst previous = settings.get(key);\n\t\tvoid ServerEvents.createAuditServerEvent(\n\t\t\t'settings.changed',\n\t\t\t{\n\t\t\t\tid: key,\n\t\t\t\tprevious,\n\t\t\t\tcurrent: value,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'system',\n\t\t\t\t...actor,\n\t\t\t},\n\t\t);\n\t\treturn fn(key, value, ...rest);\n\t};\n\nexport const updateAuditedByApp =\n\t<T extends ISetting['value'], F extends (_id: ISetting['_id'], value: T, ...args: any[]) => any>(\n\t\tactor: Omit<IAuditServerAppActor, 'type'>,\n\t) =>\n\t(fn: F, ...args: Parameters<F>) => {\n\t\tconst [key, value, ...rest] = args;\n\t\tconst previous = settings.get(key);\n\t\tvoid ServerEvents.createAuditServerEvent(\n\t\t\t'settings.changed',\n\t\t\t{\n\t\t\t\tid: key,\n\t\t\t\tprevious,\n\t\t\t\tcurrent: value,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'app',\n\t\t\t\t...actor,\n\t\t\t},\n\t\t);\n\t\treturn fn(key, value, ...rest);\n\t};\n"]}}},"code":"!module.wrapAsync(async function (module, __reifyWaitForDeps__, __reify_async_result__) {\n  \"use strict\";\n  try {\n    let _objectSpread;\n    module.link(\"@babel/runtime/helpers/objectSpread2\", {\n      default(v) {\n        _objectSpread = v;\n      }\n    }, 0);\n    module.export({\n      updateAuditedByUser: () => updateAuditedByUser,\n      updateAuditedBySystem: () => updateAuditedBySystem,\n      updateAuditedByApp: () => updateAuditedByApp\n    });\n    let ServerEvents;\n    module.link(\"@rocket.chat/models\", {\n      ServerEvents(v) {\n        ServerEvents = v;\n      }\n    }, 0);\n    let settings;\n    module.link(\"../../../app/settings/server\", {\n      settings(v) {\n        settings = v;\n      }\n    }, 1);\n    if (__reifyWaitForDeps__()) (await __reifyWaitForDeps__())();\n    const updateAuditedByUser = actor => function (fn) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      const [key, value, ...rest] = args;\n      const previous = settings.get(key);\n      void ServerEvents.createAuditServerEvent('settings.changed', {\n        id: key,\n        previous,\n        current: value\n      }, _objectSpread({\n        type: 'user'\n      }, actor));\n      return fn(key, value, ...rest);\n    };\n    const updateAuditedBySystem = actor => function (fn) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n      const [key, value, ...rest] = args;\n      const previous = settings.get(key);\n      void ServerEvents.createAuditServerEvent('settings.changed', {\n        id: key,\n        previous,\n        current: value\n      }, _objectSpread({\n        type: 'system'\n      }, actor));\n      return fn(key, value, ...rest);\n    };\n    const updateAuditedByApp = actor => function (fn) {\n      for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n        args[_key3 - 1] = arguments[_key3];\n      }\n      const [key, value, ...rest] = args;\n      const previous = settings.get(key);\n      void ServerEvents.createAuditServerEvent('settings.changed', {\n        id: key,\n        previous,\n        current: value\n      }, _objectSpread({\n        type: 'app'\n      }, actor));\n      return fn(key, value, ...rest);\n    };\n    __reify_async_result__();\n  } catch (_reifyError) {\n    return __reify_async_result__(_reifyError);\n  }\n  __reify_async_result__()\n}, {\n  self: this,\n  async: false\n});","map":{"version":3,"names":["_objectSpread","module","link","default","v","export","updateAuditedByUser","updateAuditedBySystem","updateAuditedByApp","ServerEvents","settings","__reifyWaitForDeps__","actor","fn","_len","arguments","length","args","Array","_key","key","value","rest","previous","get","createAuditServerEvent","id","current","type","_len2","_key2","_len3","_key3","__reify_async_result__","_reifyError","self","async"],"sources":["server/settings/lib/auditedSettingUpdates.ts"],"sourcesContent":["import type { IAuditServerAppActor, IAuditServerSystemActor, IAuditServerUserActor, ISetting } from '@rocket.chat/core-typings';\nimport { ServerEvents } from '@rocket.chat/models';\n\nimport { settings } from '../../../app/settings/server';\n\nexport const updateAuditedByUser =\n\t<T extends ISetting['value'], F extends (_id: ISetting['_id'], value: T, ...args: any[]) => any>(\n\t\tactor: Omit<IAuditServerUserActor, 'type'>,\n\t) =>\n\t(fn: F, ...args: Parameters<F>) => {\n\t\tconst [key, value, ...rest] = args;\n\t\tconst previous = settings.get(key);\n\t\tvoid ServerEvents.createAuditServerEvent(\n\t\t\t'settings.changed',\n\t\t\t{\n\t\t\t\tid: key,\n\t\t\t\tprevious,\n\t\t\t\tcurrent: value,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'user',\n\t\t\t\t...actor,\n\t\t\t},\n\t\t);\n\t\treturn fn(key, value, ...rest);\n\t};\n\nexport const updateAuditedBySystem =\n\t<T extends ISetting['value'], F extends (_id: ISetting['_id'], value: T, ...args: any[]) => any>(\n\t\tactor: Omit<IAuditServerSystemActor, 'type'>,\n\t) =>\n\t(fn: F, ...args: Parameters<F>) => {\n\t\tconst [key, value, ...rest] = args;\n\t\tconst previous = settings.get(key);\n\t\tvoid ServerEvents.createAuditServerEvent(\n\t\t\t'settings.changed',\n\t\t\t{\n\t\t\t\tid: key,\n\t\t\t\tprevious,\n\t\t\t\tcurrent: value,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'system',\n\t\t\t\t...actor,\n\t\t\t},\n\t\t);\n\t\treturn fn(key, value, ...rest);\n\t};\n\nexport const updateAuditedByApp =\n\t<T extends ISetting['value'], F extends (_id: ISetting['_id'], value: T, ...args: any[]) => any>(\n\t\tactor: Omit<IAuditServerAppActor, 'type'>,\n\t) =>\n\t(fn: F, ...args: Parameters<F>) => {\n\t\tconst [key, value, ...rest] = args;\n\t\tconst previous = settings.get(key);\n\t\tvoid ServerEvents.createAuditServerEvent(\n\t\t\t'settings.changed',\n\t\t\t{\n\t\t\t\tid: key,\n\t\t\t\tprevious,\n\t\t\t\tcurrent: value,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'app',\n\t\t\t\t...actor,\n\t\t\t},\n\t\t);\n\t\treturn fn(key, value, ...rest);\n\t};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"4ab219047e235efa4bed0d06fa9285f37205dbba"}
