{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/modals/FileUploadModal/FileUploadModal.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/room/modals/FileUploadModal/FileUploadModal.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/modals/FileUploadModal/FileUploadModal.tsx","inputSourceMap":{"version":3,"file":"client/views/room/modals/FileUploadModal/FileUploadModal.tsx","sourceRoot":"","sources":["client/views/room/modals/FileUploadModal/FileUploadModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Modal, Box, Field, FieldGroup, FieldLabel, FieldRow, FieldError, TextInput, Button } from '@rocket.chat/fuselage';\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useTranslation, useSetting } from '@rocket.chat/ui-contexts';\nimport fileSize from 'filesize';\nimport type { ReactElement, ChangeEvent, FormEventHandler, ComponentProps } from 'react';\nimport React, { memo, useState, useEffect } from 'react';\n\nimport FilePreview from './FilePreview';\n\ntype FileUploadModalProps = {\n\tonClose: () => void;\n\tonSubmit: (name: string, description?: string) => void;\n\tfile: File;\n\tfileName: string;\n\tfileDescription?: string;\n\tinvalidContentType: boolean;\n\tshowDescription?: boolean;\n};\n\nconst FileUploadModal = ({\n\tonClose,\n\tfile,\n\tfileName,\n\tfileDescription,\n\tonSubmit,\n\tinvalidContentType,\n\tshowDescription = true,\n}: FileUploadModalProps): ReactElement => {\n\tconst [name, setName] = useState<string>(fileName);\n\tconst [description, setDescription] = useState<string>(fileDescription || '');\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst maxFileSize = useSetting('FileUpload_MaxFileSize', 104857600);\n\n\tconst ref = useAutoFocus<HTMLInputElement>();\n\n\tconst handleName = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetName(e.currentTarget.value);\n\t};\n\n\tconst handleDescription = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetDescription(e.currentTarget.value);\n\t};\n\n\tconst handleSubmit: FormEventHandler<HTMLFormElement> = (e): void => {\n\t\te.preventDefault();\n\t\tif (!name) {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('Required_field', { field: t('Upload_file_name') }),\n\t\t\t});\n\t\t}\n\n\t\t// -1 maxFileSize means there is no limit\n\t\tif (maxFileSize > -1 && (file.size || 0) > maxFileSize) {\n\t\t\tonClose();\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('File_exceeds_allowed_size_of_bytes', { size: fileSize(maxFileSize) }),\n\t\t\t});\n\t\t}\n\n\t\tonSubmit(name, description);\n\t};\n\n\tuseEffect(() => {\n\t\tif (invalidContentType) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('FileUpload_MediaType_NotAccepted__type__', { type: file.type }),\n\t\t\t});\n\t\t\tonClose();\n\t\t\treturn;\n\t\t}\n\n\t\tif (file.size === 0) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('FileUpload_File_Empty'),\n\t\t\t});\n\t\t\tonClose();\n\t\t}\n\t}, [file, dispatchToastMessage, invalidContentType, t, onClose]);\n\n\treturn (\n\t\t<Modal wrapperFunction={(props: ComponentProps<typeof Box>) => <Box is='form' onSubmit={handleSubmit} {...props} />}>\n\t\t\t<Box display='flex' flexDirection='column' height='100%'>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>{t('FileUpload')}</Modal.Title>\n\t\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Content>\n\t\t\t\t\t<Box display='flex' maxHeight='x360' w='full' justifyContent='center' alignContent='center' mbe={16}>\n\t\t\t\t\t\t<FilePreview file={file} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel>{t('Upload_file_name')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<TextInput value={name} onChange={handleName} />\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{!name && <FieldError>{t('Required_field', { field: t('Upload_file_name') })}</FieldError>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{showDescription && (\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel>{t('Upload_file_description')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<TextInput value={description} onChange={handleDescription} placeholder={t('Description')} ref={ref} />\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</Modal.Content>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t\t<Button secondary onClick={onClose}>\n\t\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button primary type='submit'>\n\t\t\t\t\t\t\t{t('Send')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Modal.FooterControllers>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Box>\n\t\t</Modal>\n\t);\n};\n\nexport default memo(FileUploadModal);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/modals/FileUploadModal/FileUploadModal.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/modals/FileUploadModal/FileUploadModal.tsx","inputSourceMap":{"version":3,"file":"client/views/room/modals/FileUploadModal/FileUploadModal.tsx","sourceRoot":"","sources":["client/views/room/modals/FileUploadModal/FileUploadModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Modal, Box, Field, FieldGroup, FieldLabel, FieldRow, FieldError, TextInput, Button } from '@rocket.chat/fuselage';\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useTranslation, useSetting } from '@rocket.chat/ui-contexts';\nimport fileSize from 'filesize';\nimport type { ReactElement, ChangeEvent, FormEventHandler, ComponentProps } from 'react';\nimport React, { memo, useState, useEffect } from 'react';\n\nimport FilePreview from './FilePreview';\n\ntype FileUploadModalProps = {\n\tonClose: () => void;\n\tonSubmit: (name: string, description?: string) => void;\n\tfile: File;\n\tfileName: string;\n\tfileDescription?: string;\n\tinvalidContentType: boolean;\n\tshowDescription?: boolean;\n};\n\nconst FileUploadModal = ({\n\tonClose,\n\tfile,\n\tfileName,\n\tfileDescription,\n\tonSubmit,\n\tinvalidContentType,\n\tshowDescription = true,\n}: FileUploadModalProps): ReactElement => {\n\tconst [name, setName] = useState<string>(fileName);\n\tconst [description, setDescription] = useState<string>(fileDescription || '');\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst maxFileSize = useSetting('FileUpload_MaxFileSize', 104857600);\n\n\tconst ref = useAutoFocus<HTMLInputElement>();\n\n\tconst handleName = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetName(e.currentTarget.value);\n\t};\n\n\tconst handleDescription = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetDescription(e.currentTarget.value);\n\t};\n\n\tconst handleSubmit: FormEventHandler<HTMLFormElement> = (e): void => {\n\t\te.preventDefault();\n\t\tif (!name) {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('Required_field', { field: t('Upload_file_name') }),\n\t\t\t});\n\t\t}\n\n\t\t// -1 maxFileSize means there is no limit\n\t\tif (maxFileSize > -1 && (file.size || 0) > maxFileSize) {\n\t\t\tonClose();\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('File_exceeds_allowed_size_of_bytes', { size: fileSize(maxFileSize) }),\n\t\t\t});\n\t\t}\n\n\t\tonSubmit(name, description);\n\t};\n\n\tuseEffect(() => {\n\t\tif (invalidContentType) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('FileUpload_MediaType_NotAccepted__type__', { type: file.type }),\n\t\t\t});\n\t\t\tonClose();\n\t\t\treturn;\n\t\t}\n\n\t\tif (file.size === 0) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('FileUpload_File_Empty'),\n\t\t\t});\n\t\t\tonClose();\n\t\t}\n\t}, [file, dispatchToastMessage, invalidContentType, t, onClose]);\n\n\treturn (\n\t\t<Modal wrapperFunction={(props: ComponentProps<typeof Box>) => <Box is='form' onSubmit={handleSubmit} {...props} />}>\n\t\t\t<Box display='flex' flexDirection='column' height='100%'>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>{t('FileUpload')}</Modal.Title>\n\t\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Content>\n\t\t\t\t\t<Box display='flex' maxHeight='x360' w='full' justifyContent='center' alignContent='center' mbe={16}>\n\t\t\t\t\t\t<FilePreview file={file} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel>{t('Upload_file_name')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<TextInput value={name} onChange={handleName} />\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{!name && <FieldError>{t('Required_field', { field: t('Upload_file_name') })}</FieldError>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{showDescription && (\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel>{t('Upload_file_description')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<TextInput value={description} onChange={handleDescription} placeholder={t('Description')} ref={ref} />\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</Modal.Content>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t\t<Button secondary onClick={onClose}>\n\t\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button primary type='submit'>\n\t\t\t\t\t\t\t{t('Send')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Modal.FooterControllers>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Box>\n\t\t</Modal>\n\t);\n};\n\nexport default memo(FileUploadModal);\n"]}}},"code":"let _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet Modal, Box, Field, FieldGroup, FieldLabel, FieldRow, FieldError, TextInput, Button;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Modal(v) {\n    Modal = v;\n  },\n  Box(v) {\n    Box = v;\n  },\n  Field(v) {\n    Field = v;\n  },\n  FieldGroup(v) {\n    FieldGroup = v;\n  },\n  FieldLabel(v) {\n    FieldLabel = v;\n  },\n  FieldRow(v) {\n    FieldRow = v;\n  },\n  FieldError(v) {\n    FieldError = v;\n  },\n  TextInput(v) {\n    TextInput = v;\n  },\n  Button(v) {\n    Button = v;\n  }\n}, 0);\nlet useAutoFocus;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useAutoFocus(v) {\n    useAutoFocus = v;\n  }\n}, 1);\nlet useToastMessageDispatch, useTranslation, useSetting;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useToastMessageDispatch(v) {\n    useToastMessageDispatch = v;\n  },\n  useTranslation(v) {\n    useTranslation = v;\n  },\n  useSetting(v) {\n    useSetting = v;\n  }\n}, 2);\nlet fileSize;\nmodule.link(\"filesize\", {\n  default(v) {\n    fileSize = v;\n  }\n}, 3);\nlet React, memo, useState, useEffect;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  memo(v) {\n    memo = v;\n  },\n  useState(v) {\n    useState = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  }\n}, 4);\nlet FilePreview;\nmodule.link(\"./FilePreview\", {\n  default(v) {\n    FilePreview = v;\n  }\n}, 5);\nconst FileUploadModal = _ref => {\n  let {\n    onClose,\n    file,\n    fileName,\n    fileDescription,\n    onSubmit,\n    invalidContentType,\n    showDescription = true\n  } = _ref;\n  const [name, setName] = useState(fileName);\n  const [description, setDescription] = useState(fileDescription || '');\n  const t = useTranslation();\n  const dispatchToastMessage = useToastMessageDispatch();\n  const maxFileSize = useSetting('FileUpload_MaxFileSize', 104857600);\n  const ref = useAutoFocus();\n  const handleName = e => {\n    setName(e.currentTarget.value);\n  };\n  const handleDescription = e => {\n    setDescription(e.currentTarget.value);\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!name) {\n      return dispatchToastMessage({\n        type: 'error',\n        message: t('Required_field', {\n          field: t('Upload_file_name')\n        })\n      });\n    }\n    // -1 maxFileSize means there is no limit\n    if (maxFileSize > -1 && (file.size || 0) > maxFileSize) {\n      onClose();\n      return dispatchToastMessage({\n        type: 'error',\n        message: t('File_exceeds_allowed_size_of_bytes', {\n          size: fileSize(maxFileSize)\n        })\n      });\n    }\n    onSubmit(name, description);\n  };\n  useEffect(() => {\n    if (invalidContentType) {\n      dispatchToastMessage({\n        type: 'error',\n        message: t('FileUpload_MediaType_NotAccepted__type__', {\n          type: file.type\n        })\n      });\n      onClose();\n      return;\n    }\n    if (file.size === 0) {\n      dispatchToastMessage({\n        type: 'error',\n        message: t('FileUpload_File_Empty')\n      });\n      onClose();\n    }\n  }, [file, dispatchToastMessage, invalidContentType, t, onClose]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    wrapperFunction: props => /*#__PURE__*/React.createElement(Box, _extends({\n      is: \"form\",\n      onSubmit: handleSubmit\n    }, props))\n  }, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"column\",\n    height: \"100%\"\n  }, /*#__PURE__*/React.createElement(Modal.Header, null, /*#__PURE__*/React.createElement(Modal.Title, null, t('FileUpload')), /*#__PURE__*/React.createElement(Modal.Close, {\n    onClick: onClose\n  })), /*#__PURE__*/React.createElement(Modal.Content, null, /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    maxHeight: \"x360\",\n    w: \"full\",\n    justifyContent: \"center\",\n    alignContent: \"center\",\n    mbe: 16\n  }, /*#__PURE__*/React.createElement(FilePreview, {\n    file: file\n  })), /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, null, t('Upload_file_name')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(TextInput, {\n    value: name,\n    onChange: handleName\n  })), !name && /*#__PURE__*/React.createElement(FieldError, null, t('Required_field', {\n    field: t('Upload_file_name')\n  }))), showDescription && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, null, t('Upload_file_description')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(TextInput, {\n    value: description,\n    onChange: handleDescription,\n    placeholder: t('Description'),\n    ref: ref\n  }))))), /*#__PURE__*/React.createElement(Modal.Footer, null, /*#__PURE__*/React.createElement(Modal.FooterControllers, null, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: onClose\n  }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    type: \"submit\"\n  }, t('Send'))))));\n};\nmodule.exportDefault( /*#__PURE__*/memo(FileUploadModal));","map":{"version":3,"names":["_extends","module","link","default","v","Modal","Box","Field","FieldGroup","FieldLabel","FieldRow","FieldError","TextInput","Button","useAutoFocus","useToastMessageDispatch","useTranslation","useSetting","fileSize","React","memo","useState","useEffect","FilePreview","FileUploadModal","_ref","onClose","file","fileName","fileDescription","onSubmit","invalidContentType","showDescription","name","setName","description","setDescription","t","dispatchToastMessage","maxFileSize","ref","handleName","e","currentTarget","value","handleDescription","handleSubmit","preventDefault","type","message","field","size","createElement","wrapperFunction","props","is","display","flexDirection","height","Header","Title","Close","onClick","Content","maxHeight","w","justifyContent","alignContent","mbe","onChange","placeholder","Footer","FooterControllers","secondary","primary","exportDefault"],"sources":["client/views/room/modals/FileUploadModal/FileUploadModal.tsx"],"sourcesContent":["import { Modal, Box, Field, FieldGroup, FieldLabel, FieldRow, FieldError, TextInput, Button } from '@rocket.chat/fuselage';\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useTranslation, useSetting } from '@rocket.chat/ui-contexts';\nimport fileSize from 'filesize';\nimport type { ReactElement, ChangeEvent, FormEventHandler, ComponentProps } from 'react';\nimport React, { memo, useState, useEffect } from 'react';\n\nimport FilePreview from './FilePreview';\n\ntype FileUploadModalProps = {\n\tonClose: () => void;\n\tonSubmit: (name: string, description?: string) => void;\n\tfile: File;\n\tfileName: string;\n\tfileDescription?: string;\n\tinvalidContentType: boolean;\n\tshowDescription?: boolean;\n};\n\nconst FileUploadModal = ({\n\tonClose,\n\tfile,\n\tfileName,\n\tfileDescription,\n\tonSubmit,\n\tinvalidContentType,\n\tshowDescription = true,\n}: FileUploadModalProps): ReactElement => {\n\tconst [name, setName] = useState<string>(fileName);\n\tconst [description, setDescription] = useState<string>(fileDescription || '');\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst maxFileSize = useSetting('FileUpload_MaxFileSize', 104857600);\n\n\tconst ref = useAutoFocus<HTMLInputElement>();\n\n\tconst handleName = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetName(e.currentTarget.value);\n\t};\n\n\tconst handleDescription = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetDescription(e.currentTarget.value);\n\t};\n\n\tconst handleSubmit: FormEventHandler<HTMLFormElement> = (e): void => {\n\t\te.preventDefault();\n\t\tif (!name) {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('Required_field', { field: t('Upload_file_name') }),\n\t\t\t});\n\t\t}\n\n\t\t// -1 maxFileSize means there is no limit\n\t\tif (maxFileSize > -1 && (file.size || 0) > maxFileSize) {\n\t\t\tonClose();\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('File_exceeds_allowed_size_of_bytes', { size: fileSize(maxFileSize) }),\n\t\t\t});\n\t\t}\n\n\t\tonSubmit(name, description);\n\t};\n\n\tuseEffect(() => {\n\t\tif (invalidContentType) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('FileUpload_MediaType_NotAccepted__type__', { type: file.type }),\n\t\t\t});\n\t\t\tonClose();\n\t\t\treturn;\n\t\t}\n\n\t\tif (file.size === 0) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('FileUpload_File_Empty'),\n\t\t\t});\n\t\t\tonClose();\n\t\t}\n\t}, [file, dispatchToastMessage, invalidContentType, t, onClose]);\n\n\treturn (\n\t\t<Modal wrapperFunction={(props: ComponentProps<typeof Box>) => <Box is='form' onSubmit={handleSubmit} {...props} />}>\n\t\t\t<Box display='flex' flexDirection='column' height='100%'>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>{t('FileUpload')}</Modal.Title>\n\t\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Content>\n\t\t\t\t\t<Box display='flex' maxHeight='x360' w='full' justifyContent='center' alignContent='center' mbe={16}>\n\t\t\t\t\t\t<FilePreview file={file} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel>{t('Upload_file_name')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<TextInput value={name} onChange={handleName} />\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{!name && <FieldError>{t('Required_field', { field: t('Upload_file_name') })}</FieldError>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{showDescription && (\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<FieldLabel>{t('Upload_file_description')}</FieldLabel>\n\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t<TextInput value={description} onChange={handleDescription} placeholder={t('Description')} ref={ref} />\n\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</Modal.Content>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t\t<Button secondary onClick={onClose}>\n\t\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button primary type='submit'>\n\t\t\t\t\t\t\t{t('Send')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Modal.FooterControllers>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Box>\n\t\t</Modal>\n\t);\n};\n\nexport default memo(FileUploadModal);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"debdc0bcb158524dff684652ddcc02dec4c0d838"}
