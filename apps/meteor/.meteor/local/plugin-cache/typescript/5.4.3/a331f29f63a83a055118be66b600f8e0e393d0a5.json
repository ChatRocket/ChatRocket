{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/account/profile/AccountProfilePage.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/account/profile/AccountProfilePage.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/account/profile/AccountProfilePage.tsx","inputSourceMap":{"version":3,"file":"client/views/account/profile/AccountProfilePage.tsx","sourceRoot":"","sources":["client/views/account/profile/AccountProfilePage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { ButtonGroup, Button, Box } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { SHA256 } from '@rocket.chat/sha256';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport {\n\tuseSetModal,\n\tuseToastMessageDispatch,\n\tuseUser,\n\tuseLogout,\n\tuseEndpoint,\n\tuseTranslation,\n\tuseSetting,\n} from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useState, useCallback } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\n\nimport AccountProfileForm from './AccountProfileForm';\nimport ActionConfirmModal from './ActionConfirmModal';\nimport { getProfileInitialValues } from './getProfileInitialValues';\nimport ConfirmOwnerChangeModal from '../../../components/ConfirmOwnerChangeModal';\nimport { Page, PageFooter, PageHeader, PageScrollableContentWithShadow } from '../../../components/Page';\nimport { useAllowPasswordChange } from '../security/useAllowPasswordChange';\n\n// TODO: enforce useMutation\nconst AccountProfilePage = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst user = useUser();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst setModal = useSetModal();\n\tconst logout = useLogout();\n\tconst [loggingOut, setLoggingOut] = useState(false);\n\n\tconst erasureType = useSetting('Message_ErasureType');\n\tconst allowDeleteOwnAccount = useSetting('Accounts_AllowDeleteOwnAccount');\n\tconst { hasLocalPassword } = useAllowPasswordChange();\n\n\tconst methods = useForm({\n\t\tdefaultValues: getProfileInitialValues(user),\n\t\tmode: 'onBlur',\n\t});\n\n\tconst {\n\t\treset,\n\t\tformState: { isDirty, isSubmitting },\n\t} = methods;\n\n\tconst logoutOtherClients = useEndpoint('POST', '/v1/users.logoutOtherClients');\n\tconst deleteOwnAccount = useEndpoint('POST', '/v1/users.deleteOwnAccount');\n\n\tconst handleLogoutOtherLocations = useCallback(async () => {\n\t\tsetLoggingOut(true);\n\t\ttry {\n\t\t\tawait logoutOtherClients();\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Logged_out_of_other_clients_successfully'),\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t\tsetLoggingOut(false);\n\t}, [logoutOtherClients, dispatchToastMessage, t]);\n\n\tconst handleConfirmOwnerChange = useCallback(\n\t\t(passwordOrUsername, shouldChangeOwner, shouldBeRemoved) => {\n\t\t\tconst handleConfirm = async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tawait deleteOwnAccount({ password: SHA256(passwordOrUsername), confirmRelinquish: true });\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_has_been_deleted') });\n\t\t\t\t\tsetModal(null);\n\t\t\t\t\tlogout();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn setModal(() => (\n\t\t\t\t<ConfirmOwnerChangeModal\n\t\t\t\t\tonConfirm={handleConfirm}\n\t\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\t\tcontentTitle={t(`Delete_User_Warning_${erasureType}` as TranslationKey)}\n\t\t\t\t\tconfirmText={t('Delete')}\n\t\t\t\t\tshouldChangeOwner={shouldChangeOwner}\n\t\t\t\t\tshouldBeRemoved={shouldBeRemoved}\n\t\t\t\t/>\n\t\t\t));\n\t\t},\n\t\t[erasureType, setModal, t, deleteOwnAccount, dispatchToastMessage, logout],\n\t);\n\n\tconst handleDeleteOwnAccount = useCallback(async () => {\n\t\tconst handleConfirm = async (passwordOrUsername: string): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tawait deleteOwnAccount({ password: SHA256(passwordOrUsername) });\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_has_been_deleted') });\n\t\t\t\tlogout();\n\t\t\t} catch (error: any) {\n\t\t\t\tif (error.error === 'user-last-owner') {\n\t\t\t\t\tconst { shouldChangeOwner, shouldBeRemoved } = error.details;\n\t\t\t\t\treturn handleConfirmOwnerChange(passwordOrUsername, shouldChangeOwner, shouldBeRemoved);\n\t\t\t\t}\n\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t};\n\n\t\treturn setModal(() => <ActionConfirmModal onConfirm={handleConfirm} onCancel={() => setModal(null)} isPassword={hasLocalPassword} />);\n\t}, [dispatchToastMessage, hasLocalPassword, setModal, handleConfirmOwnerChange, deleteOwnAccount, logout, t]);\n\n\tconst profileFormId = useUniqueId();\n\n\treturn (\n\t\t<Page>\n\t\t\t<PageHeader title={t('Profile')} />\n\t\t\t<PageScrollableContentWithShadow>\n\t\t\t\t<Box maxWidth='600px' w='full' alignSelf='center'>\n\t\t\t\t\t<FormProvider {...methods}>\n\t\t\t\t\t\t<AccountProfileForm id={profileFormId} />\n\t\t\t\t\t</FormProvider>\n\t\t\t\t\t<Box mb={12}>\n\t\t\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t\t\t<Button onClick={handleLogoutOtherLocations} flexGrow={0} loading={loggingOut}>\n\t\t\t\t\t\t\t\t{t('Logout_Others')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t{allowDeleteOwnAccount && (\n\t\t\t\t\t\t\t\t<Button icon='trash' danger onClick={handleDeleteOwnAccount}>\n\t\t\t\t\t\t\t\t\t{t('Delete_my_account')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</PageScrollableContentWithShadow>\n\t\t\t<PageFooter isDirty={isDirty}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button disabled={!isDirty} onClick={() => reset(getProfileInitialValues(user))}>\n\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tform={profileFormId}\n\t\t\t\t\t\tdata-qa='AccountProfilePageSaveButton'\n\t\t\t\t\t\tprimary\n\t\t\t\t\t\tdisabled={!isDirty || loggingOut}\n\t\t\t\t\t\tloading={isSubmitting}\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('Save_changes')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</PageFooter>\n\t\t</Page>\n\t);\n};\n\nexport default AccountProfilePage;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/account/profile/AccountProfilePage.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/account/profile/AccountProfilePage.tsx","inputSourceMap":{"version":3,"file":"client/views/account/profile/AccountProfilePage.tsx","sourceRoot":"","sources":["client/views/account/profile/AccountProfilePage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { ButtonGroup, Button, Box } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { SHA256 } from '@rocket.chat/sha256';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport {\n\tuseSetModal,\n\tuseToastMessageDispatch,\n\tuseUser,\n\tuseLogout,\n\tuseEndpoint,\n\tuseTranslation,\n\tuseSetting,\n} from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useState, useCallback } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\n\nimport AccountProfileForm from './AccountProfileForm';\nimport ActionConfirmModal from './ActionConfirmModal';\nimport { getProfileInitialValues } from './getProfileInitialValues';\nimport ConfirmOwnerChangeModal from '../../../components/ConfirmOwnerChangeModal';\nimport { Page, PageFooter, PageHeader, PageScrollableContentWithShadow } from '../../../components/Page';\nimport { useAllowPasswordChange } from '../security/useAllowPasswordChange';\n\n// TODO: enforce useMutation\nconst AccountProfilePage = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst user = useUser();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst setModal = useSetModal();\n\tconst logout = useLogout();\n\tconst [loggingOut, setLoggingOut] = useState(false);\n\n\tconst erasureType = useSetting('Message_ErasureType');\n\tconst allowDeleteOwnAccount = useSetting('Accounts_AllowDeleteOwnAccount');\n\tconst { hasLocalPassword } = useAllowPasswordChange();\n\n\tconst methods = useForm({\n\t\tdefaultValues: getProfileInitialValues(user),\n\t\tmode: 'onBlur',\n\t});\n\n\tconst {\n\t\treset,\n\t\tformState: { isDirty, isSubmitting },\n\t} = methods;\n\n\tconst logoutOtherClients = useEndpoint('POST', '/v1/users.logoutOtherClients');\n\tconst deleteOwnAccount = useEndpoint('POST', '/v1/users.deleteOwnAccount');\n\n\tconst handleLogoutOtherLocations = useCallback(async () => {\n\t\tsetLoggingOut(true);\n\t\ttry {\n\t\t\tawait logoutOtherClients();\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Logged_out_of_other_clients_successfully'),\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t\tsetLoggingOut(false);\n\t}, [logoutOtherClients, dispatchToastMessage, t]);\n\n\tconst handleConfirmOwnerChange = useCallback(\n\t\t(passwordOrUsername, shouldChangeOwner, shouldBeRemoved) => {\n\t\t\tconst handleConfirm = async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tawait deleteOwnAccount({ password: SHA256(passwordOrUsername), confirmRelinquish: true });\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_has_been_deleted') });\n\t\t\t\t\tsetModal(null);\n\t\t\t\t\tlogout();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn setModal(() => (\n\t\t\t\t<ConfirmOwnerChangeModal\n\t\t\t\t\tonConfirm={handleConfirm}\n\t\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\t\tcontentTitle={t(`Delete_User_Warning_${erasureType}` as TranslationKey)}\n\t\t\t\t\tconfirmText={t('Delete')}\n\t\t\t\t\tshouldChangeOwner={shouldChangeOwner}\n\t\t\t\t\tshouldBeRemoved={shouldBeRemoved}\n\t\t\t\t/>\n\t\t\t));\n\t\t},\n\t\t[erasureType, setModal, t, deleteOwnAccount, dispatchToastMessage, logout],\n\t);\n\n\tconst handleDeleteOwnAccount = useCallback(async () => {\n\t\tconst handleConfirm = async (passwordOrUsername: string): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tawait deleteOwnAccount({ password: SHA256(passwordOrUsername) });\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_has_been_deleted') });\n\t\t\t\tlogout();\n\t\t\t} catch (error: any) {\n\t\t\t\tif (error.error === 'user-last-owner') {\n\t\t\t\t\tconst { shouldChangeOwner, shouldBeRemoved } = error.details;\n\t\t\t\t\treturn handleConfirmOwnerChange(passwordOrUsername, shouldChangeOwner, shouldBeRemoved);\n\t\t\t\t}\n\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t};\n\n\t\treturn setModal(() => <ActionConfirmModal onConfirm={handleConfirm} onCancel={() => setModal(null)} isPassword={hasLocalPassword} />);\n\t}, [dispatchToastMessage, hasLocalPassword, setModal, handleConfirmOwnerChange, deleteOwnAccount, logout, t]);\n\n\tconst profileFormId = useUniqueId();\n\n\treturn (\n\t\t<Page>\n\t\t\t<PageHeader title={t('Profile')} />\n\t\t\t<PageScrollableContentWithShadow>\n\t\t\t\t<Box maxWidth='600px' w='full' alignSelf='center'>\n\t\t\t\t\t<FormProvider {...methods}>\n\t\t\t\t\t\t<AccountProfileForm id={profileFormId} />\n\t\t\t\t\t</FormProvider>\n\t\t\t\t\t<Box mb={12}>\n\t\t\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t\t\t<Button onClick={handleLogoutOtherLocations} flexGrow={0} loading={loggingOut}>\n\t\t\t\t\t\t\t\t{t('Logout_Others')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t{allowDeleteOwnAccount && (\n\t\t\t\t\t\t\t\t<Button icon='trash' danger onClick={handleDeleteOwnAccount}>\n\t\t\t\t\t\t\t\t\t{t('Delete_my_account')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</PageScrollableContentWithShadow>\n\t\t\t<PageFooter isDirty={isDirty}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button disabled={!isDirty} onClick={() => reset(getProfileInitialValues(user))}>\n\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tform={profileFormId}\n\t\t\t\t\t\tdata-qa='AccountProfilePageSaveButton'\n\t\t\t\t\t\tprimary\n\t\t\t\t\t\tdisabled={!isDirty || loggingOut}\n\t\t\t\t\t\tloading={isSubmitting}\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('Save_changes')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</PageFooter>\n\t\t</Page>\n\t);\n};\n\nexport default AccountProfilePage;\n"]}}},"code":"let ButtonGroup, Button, Box;\nmodule.link(\"@rocket.chat/fuselage\", {\n  ButtonGroup(v) {\n    ButtonGroup = v;\n  },\n  Button(v) {\n    Button = v;\n  },\n  Box(v) {\n    Box = v;\n  }\n}, 0);\nlet useUniqueId;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useUniqueId(v) {\n    useUniqueId = v;\n  }\n}, 1);\nlet SHA256;\nmodule.link(\"@rocket.chat/sha256\", {\n  SHA256(v) {\n    SHA256 = v;\n  }\n}, 2);\nlet useSetModal, useToastMessageDispatch, useUser, useLogout, useEndpoint, useTranslation, useSetting;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useSetModal(v) {\n    useSetModal = v;\n  },\n  useToastMessageDispatch(v) {\n    useToastMessageDispatch = v;\n  },\n  useUser(v) {\n    useUser = v;\n  },\n  useLogout(v) {\n    useLogout = v;\n  },\n  useEndpoint(v) {\n    useEndpoint = v;\n  },\n  useTranslation(v) {\n    useTranslation = v;\n  },\n  useSetting(v) {\n    useSetting = v;\n  }\n}, 3);\nlet React, useState, useCallback;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useState(v) {\n    useState = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  }\n}, 4);\nlet FormProvider, useForm;\nmodule.link(\"react-hook-form\", {\n  FormProvider(v) {\n    FormProvider = v;\n  },\n  useForm(v) {\n    useForm = v;\n  }\n}, 5);\nlet AccountProfileForm;\nmodule.link(\"./AccountProfileForm\", {\n  default(v) {\n    AccountProfileForm = v;\n  }\n}, 6);\nlet ActionConfirmModal;\nmodule.link(\"./ActionConfirmModal\", {\n  default(v) {\n    ActionConfirmModal = v;\n  }\n}, 7);\nlet getProfileInitialValues;\nmodule.link(\"./getProfileInitialValues\", {\n  getProfileInitialValues(v) {\n    getProfileInitialValues = v;\n  }\n}, 8);\nlet ConfirmOwnerChangeModal;\nmodule.link(\"../../../components/ConfirmOwnerChangeModal\", {\n  default(v) {\n    ConfirmOwnerChangeModal = v;\n  }\n}, 9);\nlet Page, PageFooter, PageHeader, PageScrollableContentWithShadow;\nmodule.link(\"../../../components/Page\", {\n  Page(v) {\n    Page = v;\n  },\n  PageFooter(v) {\n    PageFooter = v;\n  },\n  PageHeader(v) {\n    PageHeader = v;\n  },\n  PageScrollableContentWithShadow(v) {\n    PageScrollableContentWithShadow = v;\n  }\n}, 10);\nlet useAllowPasswordChange;\nmodule.link(\"../security/useAllowPasswordChange\", {\n  useAllowPasswordChange(v) {\n    useAllowPasswordChange = v;\n  }\n}, 11);\n// TODO: enforce useMutation\nconst AccountProfilePage = () => {\n  const t = useTranslation();\n  const user = useUser();\n  const dispatchToastMessage = useToastMessageDispatch();\n  const setModal = useSetModal();\n  const logout = useLogout();\n  const [loggingOut, setLoggingOut] = useState(false);\n  const erasureType = useSetting('Message_ErasureType');\n  const allowDeleteOwnAccount = useSetting('Accounts_AllowDeleteOwnAccount');\n  const {\n    hasLocalPassword\n  } = useAllowPasswordChange();\n  const methods = useForm({\n    defaultValues: getProfileInitialValues(user),\n    mode: 'onBlur'\n  });\n  const {\n    reset,\n    formState: {\n      isDirty,\n      isSubmitting\n    }\n  } = methods;\n  const logoutOtherClients = useEndpoint('POST', '/v1/users.logoutOtherClients');\n  const deleteOwnAccount = useEndpoint('POST', '/v1/users.deleteOwnAccount');\n  const handleLogoutOtherLocations = useCallback(async () => {\n    setLoggingOut(true);\n    try {\n      await logoutOtherClients();\n      dispatchToastMessage({\n        type: 'success',\n        message: t('Logged_out_of_other_clients_successfully')\n      });\n    } catch (error) {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    }\n    setLoggingOut(false);\n  }, [logoutOtherClients, dispatchToastMessage, t]);\n  const handleConfirmOwnerChange = useCallback((passwordOrUsername, shouldChangeOwner, shouldBeRemoved) => {\n    const handleConfirm = async () => {\n      try {\n        await deleteOwnAccount({\n          password: SHA256(passwordOrUsername),\n          confirmRelinquish: true\n        });\n        dispatchToastMessage({\n          type: 'success',\n          message: t('User_has_been_deleted')\n        });\n        setModal(null);\n        logout();\n      } catch (error) {\n        dispatchToastMessage({\n          type: 'error',\n          message: error\n        });\n      }\n    };\n    return setModal(() => /*#__PURE__*/React.createElement(ConfirmOwnerChangeModal, {\n      onConfirm: handleConfirm,\n      onCancel: () => setModal(null),\n      contentTitle: t(\"Delete_User_Warning_\".concat(erasureType)),\n      confirmText: t('Delete'),\n      shouldChangeOwner: shouldChangeOwner,\n      shouldBeRemoved: shouldBeRemoved\n    }));\n  }, [erasureType, setModal, t, deleteOwnAccount, dispatchToastMessage, logout]);\n  const handleDeleteOwnAccount = useCallback(async () => {\n    const handleConfirm = async passwordOrUsername => {\n      try {\n        await deleteOwnAccount({\n          password: SHA256(passwordOrUsername)\n        });\n        dispatchToastMessage({\n          type: 'success',\n          message: t('User_has_been_deleted')\n        });\n        logout();\n      } catch (error) {\n        if (error.error === 'user-last-owner') {\n          const {\n            shouldChangeOwner,\n            shouldBeRemoved\n          } = error.details;\n          return handleConfirmOwnerChange(passwordOrUsername, shouldChangeOwner, shouldBeRemoved);\n        }\n        dispatchToastMessage({\n          type: 'error',\n          message: error\n        });\n      }\n    };\n    return setModal(() => /*#__PURE__*/React.createElement(ActionConfirmModal, {\n      onConfirm: handleConfirm,\n      onCancel: () => setModal(null),\n      isPassword: hasLocalPassword\n    }));\n  }, [dispatchToastMessage, hasLocalPassword, setModal, handleConfirmOwnerChange, deleteOwnAccount, logout, t]);\n  const profileFormId = useUniqueId();\n  return /*#__PURE__*/React.createElement(Page, null, /*#__PURE__*/React.createElement(PageHeader, {\n    title: t('Profile')\n  }), /*#__PURE__*/React.createElement(PageScrollableContentWithShadow, null, /*#__PURE__*/React.createElement(Box, {\n    maxWidth: \"600px\",\n    w: \"full\",\n    alignSelf: \"center\"\n  }, /*#__PURE__*/React.createElement(FormProvider, methods, /*#__PURE__*/React.createElement(AccountProfileForm, {\n    id: profileFormId\n  })), /*#__PURE__*/React.createElement(Box, {\n    mb: 12\n  }, /*#__PURE__*/React.createElement(ButtonGroup, {\n    stretch: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleLogoutOtherLocations,\n    flexGrow: 0,\n    loading: loggingOut\n  }, t('Logout_Others')), allowDeleteOwnAccount && /*#__PURE__*/React.createElement(Button, {\n    icon: \"trash\",\n    danger: true,\n    onClick: handleDeleteOwnAccount\n  }, t('Delete_my_account')))))), /*#__PURE__*/React.createElement(PageFooter, {\n    isDirty: isDirty\n  }, /*#__PURE__*/React.createElement(ButtonGroup, null, /*#__PURE__*/React.createElement(Button, {\n    disabled: !isDirty,\n    onClick: () => reset(getProfileInitialValues(user))\n  }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    form: profileFormId,\n    \"data-qa\": \"AccountProfilePageSaveButton\",\n    primary: true,\n    disabled: !isDirty || loggingOut,\n    loading: isSubmitting,\n    type: \"submit\"\n  }, t('Save_changes')))));\n};\nmodule.exportDefault(AccountProfilePage);","map":{"version":3,"names":["ButtonGroup","Button","Box","module","link","v","useUniqueId","SHA256","useSetModal","useToastMessageDispatch","useUser","useLogout","useEndpoint","useTranslation","useSetting","React","useState","useCallback","default","FormProvider","useForm","AccountProfileForm","ActionConfirmModal","getProfileInitialValues","ConfirmOwnerChangeModal","Page","PageFooter","PageHeader","PageScrollableContentWithShadow","useAllowPasswordChange","AccountProfilePage","t","user","dispatchToastMessage","setModal","logout","loggingOut","setLoggingOut","erasureType","allowDeleteOwnAccount","hasLocalPassword","methods","defaultValues","mode","reset","formState","isDirty","isSubmitting","logoutOtherClients","deleteOwnAccount","handleLogoutOtherLocations","type","message","error","handleConfirmOwnerChange","passwordOrUsername","shouldChangeOwner","shouldBeRemoved","handleConfirm","password","confirmRelinquish","createElement","onConfirm","onCancel","contentTitle","concat","confirmText","handleDeleteOwnAccount","details","isPassword","profileFormId","title","maxWidth","w","alignSelf","id","mb","stretch","onClick","flexGrow","loading","icon","danger","disabled","form","primary","exportDefault"],"sources":["client/views/account/profile/AccountProfilePage.tsx"],"sourcesContent":["import { ButtonGroup, Button, Box } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { SHA256 } from '@rocket.chat/sha256';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport {\n\tuseSetModal,\n\tuseToastMessageDispatch,\n\tuseUser,\n\tuseLogout,\n\tuseEndpoint,\n\tuseTranslation,\n\tuseSetting,\n} from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useState, useCallback } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\n\nimport AccountProfileForm from './AccountProfileForm';\nimport ActionConfirmModal from './ActionConfirmModal';\nimport { getProfileInitialValues } from './getProfileInitialValues';\nimport ConfirmOwnerChangeModal from '../../../components/ConfirmOwnerChangeModal';\nimport { Page, PageFooter, PageHeader, PageScrollableContentWithShadow } from '../../../components/Page';\nimport { useAllowPasswordChange } from '../security/useAllowPasswordChange';\n\n// TODO: enforce useMutation\nconst AccountProfilePage = (): ReactElement => {\n\tconst t = useTranslation();\n\tconst user = useUser();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst setModal = useSetModal();\n\tconst logout = useLogout();\n\tconst [loggingOut, setLoggingOut] = useState(false);\n\n\tconst erasureType = useSetting('Message_ErasureType');\n\tconst allowDeleteOwnAccount = useSetting('Accounts_AllowDeleteOwnAccount');\n\tconst { hasLocalPassword } = useAllowPasswordChange();\n\n\tconst methods = useForm({\n\t\tdefaultValues: getProfileInitialValues(user),\n\t\tmode: 'onBlur',\n\t});\n\n\tconst {\n\t\treset,\n\t\tformState: { isDirty, isSubmitting },\n\t} = methods;\n\n\tconst logoutOtherClients = useEndpoint('POST', '/v1/users.logoutOtherClients');\n\tconst deleteOwnAccount = useEndpoint('POST', '/v1/users.deleteOwnAccount');\n\n\tconst handleLogoutOtherLocations = useCallback(async () => {\n\t\tsetLoggingOut(true);\n\t\ttry {\n\t\t\tawait logoutOtherClients();\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Logged_out_of_other_clients_successfully'),\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t\tsetLoggingOut(false);\n\t}, [logoutOtherClients, dispatchToastMessage, t]);\n\n\tconst handleConfirmOwnerChange = useCallback(\n\t\t(passwordOrUsername, shouldChangeOwner, shouldBeRemoved) => {\n\t\t\tconst handleConfirm = async (): Promise<void> => {\n\t\t\t\ttry {\n\t\t\t\t\tawait deleteOwnAccount({ password: SHA256(passwordOrUsername), confirmRelinquish: true });\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_has_been_deleted') });\n\t\t\t\t\tsetModal(null);\n\t\t\t\t\tlogout();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn setModal(() => (\n\t\t\t\t<ConfirmOwnerChangeModal\n\t\t\t\t\tonConfirm={handleConfirm}\n\t\t\t\t\tonCancel={() => setModal(null)}\n\t\t\t\t\tcontentTitle={t(`Delete_User_Warning_${erasureType}` as TranslationKey)}\n\t\t\t\t\tconfirmText={t('Delete')}\n\t\t\t\t\tshouldChangeOwner={shouldChangeOwner}\n\t\t\t\t\tshouldBeRemoved={shouldBeRemoved}\n\t\t\t\t/>\n\t\t\t));\n\t\t},\n\t\t[erasureType, setModal, t, deleteOwnAccount, dispatchToastMessage, logout],\n\t);\n\n\tconst handleDeleteOwnAccount = useCallback(async () => {\n\t\tconst handleConfirm = async (passwordOrUsername: string): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tawait deleteOwnAccount({ password: SHA256(passwordOrUsername) });\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_has_been_deleted') });\n\t\t\t\tlogout();\n\t\t\t} catch (error: any) {\n\t\t\t\tif (error.error === 'user-last-owner') {\n\t\t\t\t\tconst { shouldChangeOwner, shouldBeRemoved } = error.details;\n\t\t\t\t\treturn handleConfirmOwnerChange(passwordOrUsername, shouldChangeOwner, shouldBeRemoved);\n\t\t\t\t}\n\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t};\n\n\t\treturn setModal(() => <ActionConfirmModal onConfirm={handleConfirm} onCancel={() => setModal(null)} isPassword={hasLocalPassword} />);\n\t}, [dispatchToastMessage, hasLocalPassword, setModal, handleConfirmOwnerChange, deleteOwnAccount, logout, t]);\n\n\tconst profileFormId = useUniqueId();\n\n\treturn (\n\t\t<Page>\n\t\t\t<PageHeader title={t('Profile')} />\n\t\t\t<PageScrollableContentWithShadow>\n\t\t\t\t<Box maxWidth='600px' w='full' alignSelf='center'>\n\t\t\t\t\t<FormProvider {...methods}>\n\t\t\t\t\t\t<AccountProfileForm id={profileFormId} />\n\t\t\t\t\t</FormProvider>\n\t\t\t\t\t<Box mb={12}>\n\t\t\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t\t\t<Button onClick={handleLogoutOtherLocations} flexGrow={0} loading={loggingOut}>\n\t\t\t\t\t\t\t\t{t('Logout_Others')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t{allowDeleteOwnAccount && (\n\t\t\t\t\t\t\t\t<Button icon='trash' danger onClick={handleDeleteOwnAccount}>\n\t\t\t\t\t\t\t\t\t{t('Delete_my_account')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</PageScrollableContentWithShadow>\n\t\t\t<PageFooter isDirty={isDirty}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button disabled={!isDirty} onClick={() => reset(getProfileInitialValues(user))}>\n\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tform={profileFormId}\n\t\t\t\t\t\tdata-qa='AccountProfilePageSaveButton'\n\t\t\t\t\t\tprimary\n\t\t\t\t\t\tdisabled={!isDirty || loggingOut}\n\t\t\t\t\t\tloading={isSubmitting}\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('Save_changes')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</PageFooter>\n\t\t</Page>\n\t);\n};\n\nexport default AccountProfilePage;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"a331f29f63a83a055118be66b600f8e0e393d0a5"}
