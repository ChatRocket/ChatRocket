{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/omnichannel/reports/components/BarChart.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/omnichannel/reports/components/BarChart.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/omnichannel/reports/components/BarChart.tsx","inputSourceMap":{"version":3,"file":"client/omnichannel/reports/components/BarChart.tsx","sourceRoot":"","sources":["client/omnichannel/reports/components/BarChart.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { BarCustomLayerProps, BarDatum } from '@nivo/bar';\nimport { ResponsiveBar } from '@nivo/bar';\nimport { Box, Palette, Tooltip } from '@rocket.chat/fuselage';\nimport type { ComponentProps } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { REPORTS_CHARTS_THEME } from './constants';\n\ntype axisItem = {\n\tticksPosition?: 'before' | 'after';\n\ttickValues?: number;\n\ttickSize?: number;\n\ttickPadding?: number;\n\ttickRotation?: number;\n\tformat?: string | ((v: string | number) => string | number);\n\trenderTick?: (props: any) => JSX.Element;\n\tlegend?: React.ReactNode;\n\tlegendPosition?: 'start' | 'middle' | 'end';\n\tlegendOffset?: number;\n\tariaHidden?: boolean;\n};\n\ntype BarChartProps = {\n\tdata: {\n\t\tlabel: string;\n\t\tvalue: number;\n\t\tcolor: string;\n\t}[];\n\tmaxWidth?: string | number;\n\theight: number;\n\tdirection?: 'vertical' | 'horizontal';\n\tindexBy?: string;\n\tkeys?: string[];\n\treverse?: boolean;\n\tmargins?: { top?: number; right?: number; bottom?: number; left?: number };\n\taxis: { axisTop?: axisItem; axisLeft?: axisItem; axisRight?: axisItem; axisBottom?: axisItem };\n\tenableGridX?: boolean;\n\tenableGridY?: boolean;\n\tcolors?: ComponentProps<typeof ResponsiveBar>['colors'];\n};\n\nconst sideLabelStyle = {\n\tfill: Palette.text['font-annotation'].toString(),\n\tfontFamily:\n\t\t'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',\n\tfontSize: 12,\n};\n\nconst horizontalSideLabel = ({ bars, labelSkipWidth }: BarCustomLayerProps<BarDatum>) => (\n\t<g>\n\t\t{bars?.map(({ width, height, y, data }) => {\n\t\t\tif (width >= labelSkipWidth) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<text\n\t\t\t\t\tkey={data.indexValue}\n\t\t\t\t\ttransform={`translate(${width + 8}, ${y + height / 2})`}\n\t\t\t\t\ttextAnchor='left'\n\t\t\t\t\tdominantBaseline='central'\n\t\t\t\t\tstyle={sideLabelStyle}\n\t\t\t\t>\n\t\t\t\t\t{data.formattedValue}\n\t\t\t\t</text>\n\t\t\t);\n\t\t})}\n\t</g>\n);\n\nconst verticalSideLabel = ({ bars, labelSkipHeight, innerHeight }: BarCustomLayerProps<BarDatum>) => (\n\t<g>\n\t\t{bars?.map(({ width, height, x, data }) => {\n\t\t\tif (height >= labelSkipHeight) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<text\n\t\t\t\t\tkey={data.indexValue}\n\t\t\t\t\ttransform={`translate(${x + width / 2}, ${innerHeight - height - 8})`}\n\t\t\t\t\ttextAnchor='middle'\n\t\t\t\t\tdominantBaseline='central'\n\t\t\t\t\tstyle={sideLabelStyle}\n\t\t\t\t>\n\t\t\t\t\t{data.formattedValue}\n\t\t\t\t</text>\n\t\t\t);\n\t\t})}\n\t</g>\n);\n\nexport const BarChart = ({\n\tdata,\n\tmaxWidth,\n\theight,\n\tdirection = 'vertical',\n\tindexBy = 'label',\n\tkeys,\n\tmargins,\n\treverse,\n\tenableGridX = false,\n\tenableGridY = false,\n\taxis: { axisTop, axisLeft, axisRight, axisBottom } = {},\n\tcolors,\n}: BarChartProps) => {\n\tconst { minHeight, padding } = useMemo(() => {\n\t\tconst minHeight = data.length * 22;\n\t\tconst padding = data.length <= 4 ? 0.5 : 0.05;\n\t\treturn { minHeight, padding };\n\t}, [data.length]);\n\n\tconst sideLabel: any = direction === 'vertical' ? verticalSideLabel : horizontalSideLabel;\n\n\treturn (\n\t\t<Box maxWidth={maxWidth} height={height} overflowY='auto'>\n\t\t\t<Box position='relative' height={Math.max(minHeight, height)} padding={8} overflow='hidden'>\n\t\t\t\t<ResponsiveBar\n\t\t\t\t\tanimate\n\t\t\t\t\tdata={data}\n\t\t\t\t\tindexBy={indexBy}\n\t\t\t\t\tlayout={direction}\n\t\t\t\t\tlayers={['grid', 'axes', 'bars', 'markers', 'legends', 'annotations', sideLabel]}\n\t\t\t\t\tindexScale={{ type: 'band', round: false }}\n\t\t\t\t\tkeys={keys}\n\t\t\t\t\tgroupMode='grouped'\n\t\t\t\t\tpadding={padding}\n\t\t\t\t\tcolors={colors ?? { datum: 'data.color' }}\n\t\t\t\t\tenableGridY={enableGridY}\n\t\t\t\t\tenableGridX={enableGridX}\n\t\t\t\t\taxisTop={axisTop || null}\n\t\t\t\t\taxisRight={axisRight || null}\n\t\t\t\t\taxisBottom={axisBottom || null}\n\t\t\t\t\taxisLeft={axisLeft || null}\n\t\t\t\t\treverse={reverse}\n\t\t\t\t\tborderRadius={4}\n\t\t\t\t\tlabelTextColor='white'\n\t\t\t\t\tmargin={margins}\n\t\t\t\t\tmotionConfig='stiff'\n\t\t\t\t\ttheme={REPORTS_CHARTS_THEME}\n\t\t\t\t\tlabelSkipWidth={direction === 'horizontal' ? 24 : undefined}\n\t\t\t\t\tlabelSkipHeight={direction === 'vertical' ? 16 : undefined}\n\t\t\t\t\tvalueScale={{ type: 'linear' }}\n\t\t\t\t\ttooltip={({ data }) => <Tooltip>{`${data.label}: ${data.value}`}</Tooltip>}\n\t\t\t\t\tbarAriaLabel={({ data }) => data.label}\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/omnichannel/reports/components/BarChart.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/omnichannel/reports/components/BarChart.tsx","inputSourceMap":{"version":3,"file":"client/omnichannel/reports/components/BarChart.tsx","sourceRoot":"","sources":["client/omnichannel/reports/components/BarChart.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { BarCustomLayerProps, BarDatum } from '@nivo/bar';\nimport { ResponsiveBar } from '@nivo/bar';\nimport { Box, Palette, Tooltip } from '@rocket.chat/fuselage';\nimport type { ComponentProps } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { REPORTS_CHARTS_THEME } from './constants';\n\ntype axisItem = {\n\tticksPosition?: 'before' | 'after';\n\ttickValues?: number;\n\ttickSize?: number;\n\ttickPadding?: number;\n\ttickRotation?: number;\n\tformat?: string | ((v: string | number) => string | number);\n\trenderTick?: (props: any) => JSX.Element;\n\tlegend?: React.ReactNode;\n\tlegendPosition?: 'start' | 'middle' | 'end';\n\tlegendOffset?: number;\n\tariaHidden?: boolean;\n};\n\ntype BarChartProps = {\n\tdata: {\n\t\tlabel: string;\n\t\tvalue: number;\n\t\tcolor: string;\n\t}[];\n\tmaxWidth?: string | number;\n\theight: number;\n\tdirection?: 'vertical' | 'horizontal';\n\tindexBy?: string;\n\tkeys?: string[];\n\treverse?: boolean;\n\tmargins?: { top?: number; right?: number; bottom?: number; left?: number };\n\taxis: { axisTop?: axisItem; axisLeft?: axisItem; axisRight?: axisItem; axisBottom?: axisItem };\n\tenableGridX?: boolean;\n\tenableGridY?: boolean;\n\tcolors?: ComponentProps<typeof ResponsiveBar>['colors'];\n};\n\nconst sideLabelStyle = {\n\tfill: Palette.text['font-annotation'].toString(),\n\tfontFamily:\n\t\t'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',\n\tfontSize: 12,\n};\n\nconst horizontalSideLabel = ({ bars, labelSkipWidth }: BarCustomLayerProps<BarDatum>) => (\n\t<g>\n\t\t{bars?.map(({ width, height, y, data }) => {\n\t\t\tif (width >= labelSkipWidth) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<text\n\t\t\t\t\tkey={data.indexValue}\n\t\t\t\t\ttransform={`translate(${width + 8}, ${y + height / 2})`}\n\t\t\t\t\ttextAnchor='left'\n\t\t\t\t\tdominantBaseline='central'\n\t\t\t\t\tstyle={sideLabelStyle}\n\t\t\t\t>\n\t\t\t\t\t{data.formattedValue}\n\t\t\t\t</text>\n\t\t\t);\n\t\t})}\n\t</g>\n);\n\nconst verticalSideLabel = ({ bars, labelSkipHeight, innerHeight }: BarCustomLayerProps<BarDatum>) => (\n\t<g>\n\t\t{bars?.map(({ width, height, x, data }) => {\n\t\t\tif (height >= labelSkipHeight) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<text\n\t\t\t\t\tkey={data.indexValue}\n\t\t\t\t\ttransform={`translate(${x + width / 2}, ${innerHeight - height - 8})`}\n\t\t\t\t\ttextAnchor='middle'\n\t\t\t\t\tdominantBaseline='central'\n\t\t\t\t\tstyle={sideLabelStyle}\n\t\t\t\t>\n\t\t\t\t\t{data.formattedValue}\n\t\t\t\t</text>\n\t\t\t);\n\t\t})}\n\t</g>\n);\n\nexport const BarChart = ({\n\tdata,\n\tmaxWidth,\n\theight,\n\tdirection = 'vertical',\n\tindexBy = 'label',\n\tkeys,\n\tmargins,\n\treverse,\n\tenableGridX = false,\n\tenableGridY = false,\n\taxis: { axisTop, axisLeft, axisRight, axisBottom } = {},\n\tcolors,\n}: BarChartProps) => {\n\tconst { minHeight, padding } = useMemo(() => {\n\t\tconst minHeight = data.length * 22;\n\t\tconst padding = data.length <= 4 ? 0.5 : 0.05;\n\t\treturn { minHeight, padding };\n\t}, [data.length]);\n\n\tconst sideLabel: any = direction === 'vertical' ? verticalSideLabel : horizontalSideLabel;\n\n\treturn (\n\t\t<Box maxWidth={maxWidth} height={height} overflowY='auto'>\n\t\t\t<Box position='relative' height={Math.max(minHeight, height)} padding={8} overflow='hidden'>\n\t\t\t\t<ResponsiveBar\n\t\t\t\t\tanimate\n\t\t\t\t\tdata={data}\n\t\t\t\t\tindexBy={indexBy}\n\t\t\t\t\tlayout={direction}\n\t\t\t\t\tlayers={['grid', 'axes', 'bars', 'markers', 'legends', 'annotations', sideLabel]}\n\t\t\t\t\tindexScale={{ type: 'band', round: false }}\n\t\t\t\t\tkeys={keys}\n\t\t\t\t\tgroupMode='grouped'\n\t\t\t\t\tpadding={padding}\n\t\t\t\t\tcolors={colors ?? { datum: 'data.color' }}\n\t\t\t\t\tenableGridY={enableGridY}\n\t\t\t\t\tenableGridX={enableGridX}\n\t\t\t\t\taxisTop={axisTop || null}\n\t\t\t\t\taxisRight={axisRight || null}\n\t\t\t\t\taxisBottom={axisBottom || null}\n\t\t\t\t\taxisLeft={axisLeft || null}\n\t\t\t\t\treverse={reverse}\n\t\t\t\t\tborderRadius={4}\n\t\t\t\t\tlabelTextColor='white'\n\t\t\t\t\tmargin={margins}\n\t\t\t\t\tmotionConfig='stiff'\n\t\t\t\t\ttheme={REPORTS_CHARTS_THEME}\n\t\t\t\t\tlabelSkipWidth={direction === 'horizontal' ? 24 : undefined}\n\t\t\t\t\tlabelSkipHeight={direction === 'vertical' ? 16 : undefined}\n\t\t\t\t\tvalueScale={{ type: 'linear' }}\n\t\t\t\t\ttooltip={({ data }) => <Tooltip>{`${data.label}: ${data.value}`}</Tooltip>}\n\t\t\t\t\tbarAriaLabel={({ data }) => data.label}\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n};\n"]}}},"code":"module.export({\n  BarChart: function () {\n    return BarChart;\n  }\n});\nvar ResponsiveBar;\nmodule.link(\"@nivo/bar\", {\n  ResponsiveBar: function (v) {\n    ResponsiveBar = v;\n  }\n}, 0);\nvar Box, Palette, Tooltip;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box: function (v) {\n    Box = v;\n  },\n  Palette: function (v) {\n    Palette = v;\n  },\n  Tooltip: function (v) {\n    Tooltip = v;\n  }\n}, 1);\nvar React, useMemo;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  }\n}, 2);\nvar REPORTS_CHARTS_THEME;\nmodule.link(\"./constants\", {\n  REPORTS_CHARTS_THEME: function (v) {\n    REPORTS_CHARTS_THEME = v;\n  }\n}, 3);\nvar sideLabelStyle = {\n  fill: Palette.text['font-annotation'].toString(),\n  fontFamily: 'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',\n  fontSize: 12\n};\nvar horizontalSideLabel = function (_ref) {\n  var bars = _ref.bars,\n    labelSkipWidth = _ref.labelSkipWidth;\n  return /*#__PURE__*/React.createElement(\"g\", null, bars === null || bars === void 0 ? void 0 : bars.map(function (_ref2) {\n    var width = _ref2.width,\n      height = _ref2.height,\n      y = _ref2.y,\n      data = _ref2.data;\n    if (width >= labelSkipWidth) {\n      return null;\n    }\n    return /*#__PURE__*/React.createElement(\"text\", {\n      key: data.indexValue,\n      transform: \"translate(\" + (width + 8) + \", \" + (y + height / 2) + \")\",\n      textAnchor: \"left\",\n      dominantBaseline: \"central\",\n      style: sideLabelStyle\n    }, data.formattedValue);\n  }));\n};\nvar verticalSideLabel = function (_ref3) {\n  var bars = _ref3.bars,\n    labelSkipHeight = _ref3.labelSkipHeight,\n    innerHeight = _ref3.innerHeight;\n  return /*#__PURE__*/React.createElement(\"g\", null, bars === null || bars === void 0 ? void 0 : bars.map(function (_ref4) {\n    var width = _ref4.width,\n      height = _ref4.height,\n      x = _ref4.x,\n      data = _ref4.data;\n    if (height >= labelSkipHeight) {\n      return null;\n    }\n    return /*#__PURE__*/React.createElement(\"text\", {\n      key: data.indexValue,\n      transform: \"translate(\" + (x + width / 2) + \", \" + (innerHeight - height - 8) + \")\",\n      textAnchor: \"middle\",\n      dominantBaseline: \"central\",\n      style: sideLabelStyle\n    }, data.formattedValue);\n  }));\n};\nvar BarChart = function (_ref5) {\n  var data = _ref5.data,\n    maxWidth = _ref5.maxWidth,\n    height = _ref5.height,\n    _ref5$direction = _ref5.direction,\n    direction = _ref5$direction === void 0 ? 'vertical' : _ref5$direction,\n    _ref5$indexBy = _ref5.indexBy,\n    indexBy = _ref5$indexBy === void 0 ? 'label' : _ref5$indexBy,\n    keys = _ref5.keys,\n    margins = _ref5.margins,\n    reverse = _ref5.reverse,\n    _ref5$enableGridX = _ref5.enableGridX,\n    enableGridX = _ref5$enableGridX === void 0 ? false : _ref5$enableGridX,\n    _ref5$enableGridY = _ref5.enableGridY,\n    enableGridY = _ref5$enableGridY === void 0 ? false : _ref5$enableGridY,\n    _ref5$axis = _ref5.axis;\n  _ref5$axis = _ref5$axis === void 0 ? {} : _ref5$axis;\n  var axisTop = _ref5$axis.axisTop,\n    axisLeft = _ref5$axis.axisLeft,\n    axisRight = _ref5$axis.axisRight,\n    axisBottom = _ref5$axis.axisBottom,\n    colors = _ref5.colors;\n  var _useMemo = useMemo(function () {\n      var minHeight = data.length * 22;\n      var padding = data.length <= 4 ? 0.5 : 0.05;\n      return {\n        minHeight: minHeight,\n        padding: padding\n      };\n    }, [data.length]),\n    minHeight = _useMemo.minHeight,\n    padding = _useMemo.padding;\n  var sideLabel = direction === 'vertical' ? verticalSideLabel : horizontalSideLabel;\n  return /*#__PURE__*/React.createElement(Box, {\n    maxWidth: maxWidth,\n    height: height,\n    overflowY: \"auto\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    position: \"relative\",\n    height: Math.max(minHeight, height),\n    padding: 8,\n    overflow: \"hidden\"\n  }, /*#__PURE__*/React.createElement(ResponsiveBar, {\n    animate: true,\n    data: data,\n    indexBy: indexBy,\n    layout: direction,\n    layers: ['grid', 'axes', 'bars', 'markers', 'legends', 'annotations', sideLabel],\n    indexScale: {\n      type: 'band',\n      round: false\n    },\n    keys: keys,\n    groupMode: \"grouped\",\n    padding: padding,\n    colors: colors !== null && colors !== void 0 ? colors : {\n      datum: 'data.color'\n    },\n    enableGridY: enableGridY,\n    enableGridX: enableGridX,\n    axisTop: axisTop || null,\n    axisRight: axisRight || null,\n    axisBottom: axisBottom || null,\n    axisLeft: axisLeft || null,\n    reverse: reverse,\n    borderRadius: 4,\n    labelTextColor: \"white\",\n    margin: margins,\n    motionConfig: \"stiff\",\n    theme: REPORTS_CHARTS_THEME,\n    labelSkipWidth: direction === 'horizontal' ? 24 : undefined,\n    labelSkipHeight: direction === 'vertical' ? 16 : undefined,\n    valueScale: {\n      type: 'linear'\n    },\n    tooltip: function (_ref6) {\n      var data = _ref6.data;\n      return /*#__PURE__*/React.createElement(Tooltip, null, data.label + \": \" + data.value);\n    },\n    barAriaLabel: function (_ref7) {\n      var data = _ref7.data;\n      return data.label;\n    }\n  })));\n};","map":{"version":3,"names":["module","export","BarChart","ResponsiveBar","link","v","Box","Palette","Tooltip","React","useMemo","default","REPORTS_CHARTS_THEME","sideLabelStyle","fill","text","toString","fontFamily","fontSize","horizontalSideLabel","_ref","bars","labelSkipWidth","createElement","map","_ref2","width","height","y","data","key","indexValue","transform","textAnchor","dominantBaseline","style","formattedValue","verticalSideLabel","_ref3","labelSkipHeight","innerHeight","_ref4","x","_ref5","maxWidth","_ref5$direction","direction","_ref5$indexBy","indexBy","keys","margins","reverse","_ref5$enableGridX","enableGridX","_ref5$enableGridY","enableGridY","_ref5$axis","axis","axisTop","axisLeft","axisRight","axisBottom","colors","_useMemo","minHeight","length","padding","sideLabel","overflowY","position","Math","max","overflow","animate","layout","layers","indexScale","type","round","groupMode","datum","borderRadius","labelTextColor","margin","motionConfig","theme","undefined","valueScale","tooltip","_ref6","label","value","barAriaLabel","_ref7"],"sources":["client/omnichannel/reports/components/BarChart.tsx"],"sourcesContent":["import type { BarCustomLayerProps, BarDatum } from '@nivo/bar';\nimport { ResponsiveBar } from '@nivo/bar';\nimport { Box, Palette, Tooltip } from '@rocket.chat/fuselage';\nimport type { ComponentProps } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { REPORTS_CHARTS_THEME } from './constants';\n\ntype axisItem = {\n\tticksPosition?: 'before' | 'after';\n\ttickValues?: number;\n\ttickSize?: number;\n\ttickPadding?: number;\n\ttickRotation?: number;\n\tformat?: string | ((v: string | number) => string | number);\n\trenderTick?: (props: any) => JSX.Element;\n\tlegend?: React.ReactNode;\n\tlegendPosition?: 'start' | 'middle' | 'end';\n\tlegendOffset?: number;\n\tariaHidden?: boolean;\n};\n\ntype BarChartProps = {\n\tdata: {\n\t\tlabel: string;\n\t\tvalue: number;\n\t\tcolor: string;\n\t}[];\n\tmaxWidth?: string | number;\n\theight: number;\n\tdirection?: 'vertical' | 'horizontal';\n\tindexBy?: string;\n\tkeys?: string[];\n\treverse?: boolean;\n\tmargins?: { top?: number; right?: number; bottom?: number; left?: number };\n\taxis: { axisTop?: axisItem; axisLeft?: axisItem; axisRight?: axisItem; axisBottom?: axisItem };\n\tenableGridX?: boolean;\n\tenableGridY?: boolean;\n\tcolors?: ComponentProps<typeof ResponsiveBar>['colors'];\n};\n\nconst sideLabelStyle = {\n\tfill: Palette.text['font-annotation'].toString(),\n\tfontFamily:\n\t\t'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',\n\tfontSize: 12,\n};\n\nconst horizontalSideLabel = ({ bars, labelSkipWidth }: BarCustomLayerProps<BarDatum>) => (\n\t<g>\n\t\t{bars?.map(({ width, height, y, data }) => {\n\t\t\tif (width >= labelSkipWidth) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<text\n\t\t\t\t\tkey={data.indexValue}\n\t\t\t\t\ttransform={`translate(${width + 8}, ${y + height / 2})`}\n\t\t\t\t\ttextAnchor='left'\n\t\t\t\t\tdominantBaseline='central'\n\t\t\t\t\tstyle={sideLabelStyle}\n\t\t\t\t>\n\t\t\t\t\t{data.formattedValue}\n\t\t\t\t</text>\n\t\t\t);\n\t\t})}\n\t</g>\n);\n\nconst verticalSideLabel = ({ bars, labelSkipHeight, innerHeight }: BarCustomLayerProps<BarDatum>) => (\n\t<g>\n\t\t{bars?.map(({ width, height, x, data }) => {\n\t\t\tif (height >= labelSkipHeight) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<text\n\t\t\t\t\tkey={data.indexValue}\n\t\t\t\t\ttransform={`translate(${x + width / 2}, ${innerHeight - height - 8})`}\n\t\t\t\t\ttextAnchor='middle'\n\t\t\t\t\tdominantBaseline='central'\n\t\t\t\t\tstyle={sideLabelStyle}\n\t\t\t\t>\n\t\t\t\t\t{data.formattedValue}\n\t\t\t\t</text>\n\t\t\t);\n\t\t})}\n\t</g>\n);\n\nexport const BarChart = ({\n\tdata,\n\tmaxWidth,\n\theight,\n\tdirection = 'vertical',\n\tindexBy = 'label',\n\tkeys,\n\tmargins,\n\treverse,\n\tenableGridX = false,\n\tenableGridY = false,\n\taxis: { axisTop, axisLeft, axisRight, axisBottom } = {},\n\tcolors,\n}: BarChartProps) => {\n\tconst { minHeight, padding } = useMemo(() => {\n\t\tconst minHeight = data.length * 22;\n\t\tconst padding = data.length <= 4 ? 0.5 : 0.05;\n\t\treturn { minHeight, padding };\n\t}, [data.length]);\n\n\tconst sideLabel: any = direction === 'vertical' ? verticalSideLabel : horizontalSideLabel;\n\n\treturn (\n\t\t<Box maxWidth={maxWidth} height={height} overflowY='auto'>\n\t\t\t<Box position='relative' height={Math.max(minHeight, height)} padding={8} overflow='hidden'>\n\t\t\t\t<ResponsiveBar\n\t\t\t\t\tanimate\n\t\t\t\t\tdata={data}\n\t\t\t\t\tindexBy={indexBy}\n\t\t\t\t\tlayout={direction}\n\t\t\t\t\tlayers={['grid', 'axes', 'bars', 'markers', 'legends', 'annotations', sideLabel]}\n\t\t\t\t\tindexScale={{ type: 'band', round: false }}\n\t\t\t\t\tkeys={keys}\n\t\t\t\t\tgroupMode='grouped'\n\t\t\t\t\tpadding={padding}\n\t\t\t\t\tcolors={colors ?? { datum: 'data.color' }}\n\t\t\t\t\tenableGridY={enableGridY}\n\t\t\t\t\tenableGridX={enableGridX}\n\t\t\t\t\taxisTop={axisTop || null}\n\t\t\t\t\taxisRight={axisRight || null}\n\t\t\t\t\taxisBottom={axisBottom || null}\n\t\t\t\t\taxisLeft={axisLeft || null}\n\t\t\t\t\treverse={reverse}\n\t\t\t\t\tborderRadius={4}\n\t\t\t\t\tlabelTextColor='white'\n\t\t\t\t\tmargin={margins}\n\t\t\t\t\tmotionConfig='stiff'\n\t\t\t\t\ttheme={REPORTS_CHARTS_THEME}\n\t\t\t\t\tlabelSkipWidth={direction === 'horizontal' ? 24 : undefined}\n\t\t\t\t\tlabelSkipHeight={direction === 'vertical' ? 16 : undefined}\n\t\t\t\t\tvalueScale={{ type: 'linear' }}\n\t\t\t\t\ttooltip={({ data }) => <Tooltip>{`${data.label}: ${data.value}`}</Tooltip>}\n\t\t\t\t\tbarAriaLabel={({ data }) => data.label}\n\t\t\t\t/>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"056b2fa9e1e2e2fd96e7a9f9561ad02ea557b33f"}
