{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/ComposerBoxPopupPreview.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/room/composer/ComposerBoxPopupPreview.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/ComposerBoxPopupPreview.tsx","inputSourceMap":{"version":3,"file":"client/views/room/composer/ComposerBoxPopupPreview.tsx","sourceRoot":"","sources":["client/views/room/composer/ComposerBoxPopupPreview.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, Skeleton, Tile, Option } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useMethod } from '@rocket.chat/ui-contexts';\nimport type { ForwardedRef } from 'react';\nimport React, { forwardRef, useEffect, useImperativeHandle } from 'react';\n\nimport type { ComposerBoxPopupProps } from './ComposerBoxPopup';\nimport { useChat } from '../contexts/ChatContext';\n\ntype ComposerBoxPopupPreviewItem = { _id: string; type: 'image' | 'video' | 'audio' | 'text' | 'other'; value: string; sort?: number };\n\ntype ComposerBoxPopupPreviewProps = ComposerBoxPopupProps<ComposerBoxPopupPreviewItem> & {\n\trid: string;\n\ttmid?: string;\n\tsuspended?: boolean;\n};\n\nconst ComposerBoxPopupPreview = forwardRef(function ComposerBoxPopupPreview(\n\t{ focused, items, rid, tmid, select, suspended }: ComposerBoxPopupPreviewProps,\n\tref: ForwardedRef<\n\t\t| {\n\t\t\t\tgetFilter?: () => unknown;\n\t\t\t\tselect?: (s: ComposerBoxPopupPreviewItem) => void;\n\t\t  }\n\t\t| undefined\n\t>,\n) {\n\tconst id = useUniqueId();\n\tconst chat = useChat();\n\tconst executeSlashCommandPreviewMethod = useMethod('executeSlashCommandPreview');\n\tuseImperativeHandle(\n\t\tref,\n\t\t() => ({\n\t\t\tgetFilter: () => {\n\t\t\t\tconst value = chat?.composer?.substring(0, chat?.composer?.selection.start);\n\t\t\t\tif (!value) {\n\t\t\t\t\tthrow new Error('No value');\n\t\t\t\t}\n\t\t\t\tconst matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n\n\t\t\t\tif (!matches) {\n\t\t\t\t\tthrow new Error('No matches');\n\t\t\t\t}\n\n\t\t\t\tconst cmd = matches[1].replace('/', '').trim().toLowerCase();\n\n\t\t\t\tconst params = matches[2];\n\t\t\t\treturn { cmd, params, msg: { rid, tmid } };\n\t\t\t},\n\t\t\t...(!suspended && {\n\t\t\t\tselect: (item) => {\n\t\t\t\t\tconst value = chat?.composer?.substring(0, chat?.composer?.selection.start);\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\tthrow new Error('No value');\n\t\t\t\t\t}\n\t\t\t\t\tconst matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n\n\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\tthrow new Error('No matches');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cmd = matches[1].replace('/', '').trim().toLowerCase();\n\n\t\t\t\t\tconst params = matches[2];\n\t\t\t\t\t// TODO: Fix this solve the typing issue\n\t\t\t\t\tvoid executeSlashCommandPreviewMethod({ cmd, params, msg: { rid, tmid } }, { id: item._id, type: item.type, value: item.value });\n\t\t\t\t\tchat?.composer?.setText('');\n\t\t\t\t},\n\t\t\t}),\n\t\t}),\n\t\t[chat?.composer, executeSlashCommandPreviewMethod, rid, tmid, suspended],\n\t);\n\n\tconst itemsFlat = items\n\t\t.flatMap((item) => {\n\t\t\tif (item.isSuccess) {\n\t\t\t\treturn item.data;\n\t\t\t}\n\t\t\treturn [];\n\t\t})\n\t\t.sort((a, b) => (('sort' in a && a.sort) || 0) - (('sort' in b && b.sort) || 0));\n\n\tconst isLoading = items.some((item) => item.isLoading && item.fetchStatus !== 'idle');\n\n\tuseEffect(() => {\n\t\tif (focused) {\n\t\t\tconst element = document.getElementById(`popup-item-${focused._id}`);\n\t\t\tif (element) {\n\t\t\t\telement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n\t\t\t}\n\t\t}\n\t}, [focused]);\n\n\tif (suspended) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Box className='message-popup-position' position='relative'>\n\t\t\t<Tile className='message-popup' display='flex' padding={8} role='menu' mbe={8} aria-labelledby={id}>\n\t\t\t\t<Box role='listbox' display='flex' overflow='auto' fontSize={0} width={0} flexGrow={1} aria-busy={isLoading}>\n\t\t\t\t\t{isLoading &&\n\t\t\t\t\t\tArray(5)\n\t\t\t\t\t\t\t.fill(5)\n\t\t\t\t\t\t\t.map((_, index) => <Skeleton variant='rect' h='100px' w='120px' m={2} key={index} />)}\n\n\t\t\t\t\t{!isLoading &&\n\t\t\t\t\t\titemsFlat.map((item) => (\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tonClick={() => select(item)}\n\t\t\t\t\t\t\t\trole='option'\n\t\t\t\t\t\t\t\tclassName={['popup-item', item === focused && 'selected'].filter(Boolean).join(' ')}\n\t\t\t\t\t\t\t\tid={`popup-item-${item._id}`}\n\t\t\t\t\t\t\t\tkey={item._id}\n\t\t\t\t\t\t\t\tbg={item === focused ? 'selected' : undefined}\n\t\t\t\t\t\t\t\tborderColor={item === focused ? 'highlight' : 'transparent'}\n\t\t\t\t\t\t\t\ttabIndex={item === focused ? 0 : -1}\n\t\t\t\t\t\t\t\taria-selected={item === focused}\n\t\t\t\t\t\t\t\tm={2}\n\t\t\t\t\t\t\t\tborderWidth='default'\n\t\t\t\t\t\t\t\tborderRadius='x4'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{item.type === 'image' && <img src={item.value} alt={item._id} />}\n\t\t\t\t\t\t\t\t{item.type === 'audio' && (\n\t\t\t\t\t\t\t\t\t<audio controls>\n\t\t\t\t\t\t\t\t\t\t<track kind='captions' />\n\t\t\t\t\t\t\t\t\t\t<source src={item.value} />\n\t\t\t\t\t\t\t\t\t\tYour browser does not support the audio element.\n\t\t\t\t\t\t\t\t\t</audio>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{item.type === 'video' && (\n\t\t\t\t\t\t\t\t\t<video controls className='inline-video'>\n\t\t\t\t\t\t\t\t\t\t<track kind='captions' />\n\t\t\t\t\t\t\t\t\t\t<source src={item.value} />\n\t\t\t\t\t\t\t\t\t\tYour browser does not support the video element.\n\t\t\t\t\t\t\t\t\t</video>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{item.type === 'text' && <Option>{item.value}</Option>}\n\t\t\t\t\t\t\t\t{item.type === 'other' && <code>{item.value}</code>}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t))}\n\t\t\t\t</Box>\n\t\t\t</Tile>\n\t\t</Box>\n\t);\n});\n\nexport default ComposerBoxPopupPreview;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/ComposerBoxPopupPreview.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/composer/ComposerBoxPopupPreview.tsx","inputSourceMap":{"version":3,"file":"client/views/room/composer/ComposerBoxPopupPreview.tsx","sourceRoot":"","sources":["client/views/room/composer/ComposerBoxPopupPreview.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, Skeleton, Tile, Option } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useMethod } from '@rocket.chat/ui-contexts';\nimport type { ForwardedRef } from 'react';\nimport React, { forwardRef, useEffect, useImperativeHandle } from 'react';\n\nimport type { ComposerBoxPopupProps } from './ComposerBoxPopup';\nimport { useChat } from '../contexts/ChatContext';\n\ntype ComposerBoxPopupPreviewItem = { _id: string; type: 'image' | 'video' | 'audio' | 'text' | 'other'; value: string; sort?: number };\n\ntype ComposerBoxPopupPreviewProps = ComposerBoxPopupProps<ComposerBoxPopupPreviewItem> & {\n\trid: string;\n\ttmid?: string;\n\tsuspended?: boolean;\n};\n\nconst ComposerBoxPopupPreview = forwardRef(function ComposerBoxPopupPreview(\n\t{ focused, items, rid, tmid, select, suspended }: ComposerBoxPopupPreviewProps,\n\tref: ForwardedRef<\n\t\t| {\n\t\t\t\tgetFilter?: () => unknown;\n\t\t\t\tselect?: (s: ComposerBoxPopupPreviewItem) => void;\n\t\t  }\n\t\t| undefined\n\t>,\n) {\n\tconst id = useUniqueId();\n\tconst chat = useChat();\n\tconst executeSlashCommandPreviewMethod = useMethod('executeSlashCommandPreview');\n\tuseImperativeHandle(\n\t\tref,\n\t\t() => ({\n\t\t\tgetFilter: () => {\n\t\t\t\tconst value = chat?.composer?.substring(0, chat?.composer?.selection.start);\n\t\t\t\tif (!value) {\n\t\t\t\t\tthrow new Error('No value');\n\t\t\t\t}\n\t\t\t\tconst matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n\n\t\t\t\tif (!matches) {\n\t\t\t\t\tthrow new Error('No matches');\n\t\t\t\t}\n\n\t\t\t\tconst cmd = matches[1].replace('/', '').trim().toLowerCase();\n\n\t\t\t\tconst params = matches[2];\n\t\t\t\treturn { cmd, params, msg: { rid, tmid } };\n\t\t\t},\n\t\t\t...(!suspended && {\n\t\t\t\tselect: (item) => {\n\t\t\t\t\tconst value = chat?.composer?.substring(0, chat?.composer?.selection.start);\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\tthrow new Error('No value');\n\t\t\t\t\t}\n\t\t\t\t\tconst matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n\n\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\tthrow new Error('No matches');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cmd = matches[1].replace('/', '').trim().toLowerCase();\n\n\t\t\t\t\tconst params = matches[2];\n\t\t\t\t\t// TODO: Fix this solve the typing issue\n\t\t\t\t\tvoid executeSlashCommandPreviewMethod({ cmd, params, msg: { rid, tmid } }, { id: item._id, type: item.type, value: item.value });\n\t\t\t\t\tchat?.composer?.setText('');\n\t\t\t\t},\n\t\t\t}),\n\t\t}),\n\t\t[chat?.composer, executeSlashCommandPreviewMethod, rid, tmid, suspended],\n\t);\n\n\tconst itemsFlat = items\n\t\t.flatMap((item) => {\n\t\t\tif (item.isSuccess) {\n\t\t\t\treturn item.data;\n\t\t\t}\n\t\t\treturn [];\n\t\t})\n\t\t.sort((a, b) => (('sort' in a && a.sort) || 0) - (('sort' in b && b.sort) || 0));\n\n\tconst isLoading = items.some((item) => item.isLoading && item.fetchStatus !== 'idle');\n\n\tuseEffect(() => {\n\t\tif (focused) {\n\t\t\tconst element = document.getElementById(`popup-item-${focused._id}`);\n\t\t\tif (element) {\n\t\t\t\telement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n\t\t\t}\n\t\t}\n\t}, [focused]);\n\n\tif (suspended) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Box className='message-popup-position' position='relative'>\n\t\t\t<Tile className='message-popup' display='flex' padding={8} role='menu' mbe={8} aria-labelledby={id}>\n\t\t\t\t<Box role='listbox' display='flex' overflow='auto' fontSize={0} width={0} flexGrow={1} aria-busy={isLoading}>\n\t\t\t\t\t{isLoading &&\n\t\t\t\t\t\tArray(5)\n\t\t\t\t\t\t\t.fill(5)\n\t\t\t\t\t\t\t.map((_, index) => <Skeleton variant='rect' h='100px' w='120px' m={2} key={index} />)}\n\n\t\t\t\t\t{!isLoading &&\n\t\t\t\t\t\titemsFlat.map((item) => (\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tonClick={() => select(item)}\n\t\t\t\t\t\t\t\trole='option'\n\t\t\t\t\t\t\t\tclassName={['popup-item', item === focused && 'selected'].filter(Boolean).join(' ')}\n\t\t\t\t\t\t\t\tid={`popup-item-${item._id}`}\n\t\t\t\t\t\t\t\tkey={item._id}\n\t\t\t\t\t\t\t\tbg={item === focused ? 'selected' : undefined}\n\t\t\t\t\t\t\t\tborderColor={item === focused ? 'highlight' : 'transparent'}\n\t\t\t\t\t\t\t\ttabIndex={item === focused ? 0 : -1}\n\t\t\t\t\t\t\t\taria-selected={item === focused}\n\t\t\t\t\t\t\t\tm={2}\n\t\t\t\t\t\t\t\tborderWidth='default'\n\t\t\t\t\t\t\t\tborderRadius='x4'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{item.type === 'image' && <img src={item.value} alt={item._id} />}\n\t\t\t\t\t\t\t\t{item.type === 'audio' && (\n\t\t\t\t\t\t\t\t\t<audio controls>\n\t\t\t\t\t\t\t\t\t\t<track kind='captions' />\n\t\t\t\t\t\t\t\t\t\t<source src={item.value} />\n\t\t\t\t\t\t\t\t\t\tYour browser does not support the audio element.\n\t\t\t\t\t\t\t\t\t</audio>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{item.type === 'video' && (\n\t\t\t\t\t\t\t\t\t<video controls className='inline-video'>\n\t\t\t\t\t\t\t\t\t\t<track kind='captions' />\n\t\t\t\t\t\t\t\t\t\t<source src={item.value} />\n\t\t\t\t\t\t\t\t\t\tYour browser does not support the video element.\n\t\t\t\t\t\t\t\t\t</video>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{item.type === 'text' && <Option>{item.value}</Option>}\n\t\t\t\t\t\t\t\t{item.type === 'other' && <code>{item.value}</code>}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t))}\n\t\t\t\t</Box>\n\t\t\t</Tile>\n\t\t</Box>\n\t);\n});\n\nexport default ComposerBoxPopupPreview;\n"]}}},"code":"let _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 0);\nlet Box, Skeleton, Tile, Option;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box(v) {\n    Box = v;\n  },\n  Skeleton(v) {\n    Skeleton = v;\n  },\n  Tile(v) {\n    Tile = v;\n  },\n  Option(v) {\n    Option = v;\n  }\n}, 0);\nlet useUniqueId;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useUniqueId(v) {\n    useUniqueId = v;\n  }\n}, 1);\nlet useMethod;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useMethod(v) {\n    useMethod = v;\n  }\n}, 2);\nlet React, forwardRef, useEffect, useImperativeHandle;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  forwardRef(v) {\n    forwardRef = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  },\n  useImperativeHandle(v) {\n    useImperativeHandle = v;\n  }\n}, 3);\nlet useChat;\nmodule.link(\"../contexts/ChatContext\", {\n  useChat(v) {\n    useChat = v;\n  }\n}, 4);\nconst ComposerBoxPopupPreview = /*#__PURE__*/forwardRef(function ComposerBoxPopupPreview(_ref, ref) {\n  let {\n    focused,\n    items,\n    rid,\n    tmid,\n    select,\n    suspended\n  } = _ref;\n  const id = useUniqueId();\n  const chat = useChat();\n  const executeSlashCommandPreviewMethod = useMethod('executeSlashCommandPreview');\n  useImperativeHandle(ref, () => _objectSpread({\n    getFilter: () => {\n      var _chat$composer, _chat$composer2;\n      const value = chat === null || chat === void 0 ? void 0 : (_chat$composer = chat.composer) === null || _chat$composer === void 0 ? void 0 : _chat$composer.substring(0, chat === null || chat === void 0 ? void 0 : (_chat$composer2 = chat.composer) === null || _chat$composer2 === void 0 ? void 0 : _chat$composer2.selection.start);\n      if (!value) {\n        throw new Error('No value');\n      }\n      const matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n      if (!matches) {\n        throw new Error('No matches');\n      }\n      const cmd = matches[1].replace('/', '').trim().toLowerCase();\n      const params = matches[2];\n      return {\n        cmd,\n        params,\n        msg: {\n          rid,\n          tmid\n        }\n      };\n    }\n  }, !suspended && {\n    select: item => {\n      var _chat$composer3, _chat$composer4, _chat$composer5;\n      const value = chat === null || chat === void 0 ? void 0 : (_chat$composer3 = chat.composer) === null || _chat$composer3 === void 0 ? void 0 : _chat$composer3.substring(0, chat === null || chat === void 0 ? void 0 : (_chat$composer4 = chat.composer) === null || _chat$composer4 === void 0 ? void 0 : _chat$composer4.selection.start);\n      if (!value) {\n        throw new Error('No value');\n      }\n      const matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n      if (!matches) {\n        throw new Error('No matches');\n      }\n      const cmd = matches[1].replace('/', '').trim().toLowerCase();\n      const params = matches[2];\n      // TODO: Fix this solve the typing issue\n      void executeSlashCommandPreviewMethod({\n        cmd,\n        params,\n        msg: {\n          rid,\n          tmid\n        }\n      }, {\n        id: item._id,\n        type: item.type,\n        value: item.value\n      });\n      chat === null || chat === void 0 ? void 0 : (_chat$composer5 = chat.composer) === null || _chat$composer5 === void 0 ? void 0 : _chat$composer5.setText('');\n    }\n  }), [chat === null || chat === void 0 ? void 0 : chat.composer, executeSlashCommandPreviewMethod, rid, tmid, suspended]);\n  const itemsFlat = items.flatMap(item => {\n    if (item.isSuccess) {\n      return item.data;\n    }\n    return [];\n  }).sort((a, b) => ('sort' in a && a.sort || 0) - ('sort' in b && b.sort || 0));\n  const isLoading = items.some(item => item.isLoading && item.fetchStatus !== 'idle');\n  useEffect(() => {\n    if (focused) {\n      const element = document.getElementById(\"popup-item-\".concat(focused._id));\n      if (element) {\n        element.scrollIntoView({\n          behavior: 'smooth',\n          block: 'nearest'\n        });\n      }\n    }\n  }, [focused]);\n  if (suspended) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(Box, {\n    className: \"message-popup-position\",\n    position: \"relative\"\n  }, /*#__PURE__*/React.createElement(Tile, {\n    className: \"message-popup\",\n    display: \"flex\",\n    padding: 8,\n    role: \"menu\",\n    mbe: 8,\n    \"aria-labelledby\": id\n  }, /*#__PURE__*/React.createElement(Box, {\n    role: \"listbox\",\n    display: \"flex\",\n    overflow: \"auto\",\n    fontSize: 0,\n    width: 0,\n    flexGrow: 1,\n    \"aria-busy\": isLoading\n  }, isLoading && Array(5).fill(5).map((_, index) => /*#__PURE__*/React.createElement(Skeleton, {\n    variant: \"rect\",\n    h: \"100px\",\n    w: \"120px\",\n    m: 2,\n    key: index\n  })), !isLoading && itemsFlat.map(item => /*#__PURE__*/React.createElement(Box, {\n    onClick: () => select(item),\n    role: \"option\",\n    className: ['popup-item', item === focused && 'selected'].filter(Boolean).join(' '),\n    id: \"popup-item-\".concat(item._id),\n    key: item._id,\n    bg: item === focused ? 'selected' : undefined,\n    borderColor: item === focused ? 'highlight' : 'transparent',\n    tabIndex: item === focused ? 0 : -1,\n    \"aria-selected\": item === focused,\n    m: 2,\n    borderWidth: \"default\",\n    borderRadius: \"x4\"\n  }, item.type === 'image' && /*#__PURE__*/React.createElement(\"img\", {\n    src: item.value,\n    alt: item._id\n  }), item.type === 'audio' && /*#__PURE__*/React.createElement(\"audio\", {\n    controls: true\n  }, /*#__PURE__*/React.createElement(\"track\", {\n    kind: \"captions\"\n  }), /*#__PURE__*/React.createElement(\"source\", {\n    src: item.value\n  }), \"Your browser does not support the audio element.\"), item.type === 'video' && /*#__PURE__*/React.createElement(\"video\", {\n    controls: true,\n    className: \"inline-video\"\n  }, /*#__PURE__*/React.createElement(\"track\", {\n    kind: \"captions\"\n  }), /*#__PURE__*/React.createElement(\"source\", {\n    src: item.value\n  }), \"Your browser does not support the video element.\"), item.type === 'text' && /*#__PURE__*/React.createElement(Option, null, item.value), item.type === 'other' && /*#__PURE__*/React.createElement(\"code\", null, item.value))))));\n});\nmodule.exportDefault(ComposerBoxPopupPreview);","map":{"version":3,"names":["_objectSpread","module","link","default","v","Box","Skeleton","Tile","Option","useUniqueId","useMethod","React","forwardRef","useEffect","useImperativeHandle","useChat","ComposerBoxPopupPreview","_ref","ref","focused","items","rid","tmid","select","suspended","id","chat","executeSlashCommandPreviewMethod","getFilter","_chat$composer","_chat$composer2","value","composer","substring","selection","start","Error","matches","match","cmd","replace","trim","toLowerCase","params","msg","item","_chat$composer3","_chat$composer4","_chat$composer5","_id","type","setText","itemsFlat","flatMap","isSuccess","data","sort","a","b","isLoading","some","fetchStatus","element","document","getElementById","concat","scrollIntoView","behavior","block","createElement","className","position","display","padding","role","mbe","overflow","fontSize","width","flexGrow","Array","fill","map","_","index","variant","h","w","m","key","onClick","filter","Boolean","join","bg","undefined","borderColor","tabIndex","borderWidth","borderRadius","src","alt","controls","kind","exportDefault"],"sources":["client/views/room/composer/ComposerBoxPopupPreview.tsx"],"sourcesContent":["import { Box, Skeleton, Tile, Option } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useMethod } from '@rocket.chat/ui-contexts';\nimport type { ForwardedRef } from 'react';\nimport React, { forwardRef, useEffect, useImperativeHandle } from 'react';\n\nimport type { ComposerBoxPopupProps } from './ComposerBoxPopup';\nimport { useChat } from '../contexts/ChatContext';\n\ntype ComposerBoxPopupPreviewItem = { _id: string; type: 'image' | 'video' | 'audio' | 'text' | 'other'; value: string; sort?: number };\n\ntype ComposerBoxPopupPreviewProps = ComposerBoxPopupProps<ComposerBoxPopupPreviewItem> & {\n\trid: string;\n\ttmid?: string;\n\tsuspended?: boolean;\n};\n\nconst ComposerBoxPopupPreview = forwardRef(function ComposerBoxPopupPreview(\n\t{ focused, items, rid, tmid, select, suspended }: ComposerBoxPopupPreviewProps,\n\tref: ForwardedRef<\n\t\t| {\n\t\t\t\tgetFilter?: () => unknown;\n\t\t\t\tselect?: (s: ComposerBoxPopupPreviewItem) => void;\n\t\t  }\n\t\t| undefined\n\t>,\n) {\n\tconst id = useUniqueId();\n\tconst chat = useChat();\n\tconst executeSlashCommandPreviewMethod = useMethod('executeSlashCommandPreview');\n\tuseImperativeHandle(\n\t\tref,\n\t\t() => ({\n\t\t\tgetFilter: () => {\n\t\t\t\tconst value = chat?.composer?.substring(0, chat?.composer?.selection.start);\n\t\t\t\tif (!value) {\n\t\t\t\t\tthrow new Error('No value');\n\t\t\t\t}\n\t\t\t\tconst matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n\n\t\t\t\tif (!matches) {\n\t\t\t\t\tthrow new Error('No matches');\n\t\t\t\t}\n\n\t\t\t\tconst cmd = matches[1].replace('/', '').trim().toLowerCase();\n\n\t\t\t\tconst params = matches[2];\n\t\t\t\treturn { cmd, params, msg: { rid, tmid } };\n\t\t\t},\n\t\t\t...(!suspended && {\n\t\t\t\tselect: (item) => {\n\t\t\t\t\tconst value = chat?.composer?.substring(0, chat?.composer?.selection.start);\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\tthrow new Error('No value');\n\t\t\t\t\t}\n\t\t\t\t\tconst matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n\n\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\tthrow new Error('No matches');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cmd = matches[1].replace('/', '').trim().toLowerCase();\n\n\t\t\t\t\tconst params = matches[2];\n\t\t\t\t\t// TODO: Fix this solve the typing issue\n\t\t\t\t\tvoid executeSlashCommandPreviewMethod({ cmd, params, msg: { rid, tmid } }, { id: item._id, type: item.type, value: item.value });\n\t\t\t\t\tchat?.composer?.setText('');\n\t\t\t\t},\n\t\t\t}),\n\t\t}),\n\t\t[chat?.composer, executeSlashCommandPreviewMethod, rid, tmid, suspended],\n\t);\n\n\tconst itemsFlat = items\n\t\t.flatMap((item) => {\n\t\t\tif (item.isSuccess) {\n\t\t\t\treturn item.data;\n\t\t\t}\n\t\t\treturn [];\n\t\t})\n\t\t.sort((a, b) => (('sort' in a && a.sort) || 0) - (('sort' in b && b.sort) || 0));\n\n\tconst isLoading = items.some((item) => item.isLoading && item.fetchStatus !== 'idle');\n\n\tuseEffect(() => {\n\t\tif (focused) {\n\t\t\tconst element = document.getElementById(`popup-item-${focused._id}`);\n\t\t\tif (element) {\n\t\t\t\telement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n\t\t\t}\n\t\t}\n\t}, [focused]);\n\n\tif (suspended) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Box className='message-popup-position' position='relative'>\n\t\t\t<Tile className='message-popup' display='flex' padding={8} role='menu' mbe={8} aria-labelledby={id}>\n\t\t\t\t<Box role='listbox' display='flex' overflow='auto' fontSize={0} width={0} flexGrow={1} aria-busy={isLoading}>\n\t\t\t\t\t{isLoading &&\n\t\t\t\t\t\tArray(5)\n\t\t\t\t\t\t\t.fill(5)\n\t\t\t\t\t\t\t.map((_, index) => <Skeleton variant='rect' h='100px' w='120px' m={2} key={index} />)}\n\n\t\t\t\t\t{!isLoading &&\n\t\t\t\t\t\titemsFlat.map((item) => (\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tonClick={() => select(item)}\n\t\t\t\t\t\t\t\trole='option'\n\t\t\t\t\t\t\t\tclassName={['popup-item', item === focused && 'selected'].filter(Boolean).join(' ')}\n\t\t\t\t\t\t\t\tid={`popup-item-${item._id}`}\n\t\t\t\t\t\t\t\tkey={item._id}\n\t\t\t\t\t\t\t\tbg={item === focused ? 'selected' : undefined}\n\t\t\t\t\t\t\t\tborderColor={item === focused ? 'highlight' : 'transparent'}\n\t\t\t\t\t\t\t\ttabIndex={item === focused ? 0 : -1}\n\t\t\t\t\t\t\t\taria-selected={item === focused}\n\t\t\t\t\t\t\t\tm={2}\n\t\t\t\t\t\t\t\tborderWidth='default'\n\t\t\t\t\t\t\t\tborderRadius='x4'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{item.type === 'image' && <img src={item.value} alt={item._id} />}\n\t\t\t\t\t\t\t\t{item.type === 'audio' && (\n\t\t\t\t\t\t\t\t\t<audio controls>\n\t\t\t\t\t\t\t\t\t\t<track kind='captions' />\n\t\t\t\t\t\t\t\t\t\t<source src={item.value} />\n\t\t\t\t\t\t\t\t\t\tYour browser does not support the audio element.\n\t\t\t\t\t\t\t\t\t</audio>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{item.type === 'video' && (\n\t\t\t\t\t\t\t\t\t<video controls className='inline-video'>\n\t\t\t\t\t\t\t\t\t\t<track kind='captions' />\n\t\t\t\t\t\t\t\t\t\t<source src={item.value} />\n\t\t\t\t\t\t\t\t\t\tYour browser does not support the video element.\n\t\t\t\t\t\t\t\t\t</video>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{item.type === 'text' && <Option>{item.value}</Option>}\n\t\t\t\t\t\t\t\t{item.type === 'other' && <code>{item.value}</code>}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t))}\n\t\t\t\t</Box>\n\t\t\t</Tile>\n\t\t</Box>\n\t);\n});\n\nexport default ComposerBoxPopupPreview;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"68bd208ec30994216646845489ad87d5c70a3130"}
