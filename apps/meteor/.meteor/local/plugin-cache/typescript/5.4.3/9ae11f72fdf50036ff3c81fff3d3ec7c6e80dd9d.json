{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/settings/SettingsGroupPage/SettingsGroupPage.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/admin/settings/SettingsGroupPage/SettingsGroupPage.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/settings/SettingsGroupPage/SettingsGroupPage.tsx","inputSourceMap":{"version":3,"file":"client/views/admin/settings/SettingsGroupPage/SettingsGroupPage.tsx","sourceRoot":"","sources":["client/views/admin/settings/SettingsGroupPage/SettingsGroupPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { ISetting, ISettingColor } from '@rocket.chat/core-typings';\nimport { Accordion, Box, Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useToastMessageDispatch, useSettingsDispatch, useSettings, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactNode, FormEvent, MouseEvent } from 'react';\nimport React, { useMemo, memo } from 'react';\n\nimport { Page, PageHeader, PageScrollableContentWithShadow, PageFooter } from '../../../../components/Page';\nimport type { EditableSetting } from '../../EditableSettingsContext';\nimport { useEditableSettingsDispatch, useEditableSettings } from '../../EditableSettingsContext';\n\ntype SettingsGroupPageProps = {\n\tchildren: ReactNode;\n\theaderButtons?: ReactNode;\n\tonClickBack?: () => void;\n\t_id: string;\n\ti18nLabel: string;\n\ti18nDescription?: string;\n\ttabs?: ReactNode;\n\tisCustom?: boolean;\n};\n\nconst SettingsGroupPage = ({\n\tchildren = undefined,\n\theaderButtons = undefined,\n\tonClickBack,\n\t_id,\n\ti18nLabel,\n\ti18nDescription = undefined,\n\ttabs = undefined,\n\tisCustom = false,\n}: SettingsGroupPageProps) => {\n\tconst t = useTranslation();\n\tconst dispatch = useSettingsDispatch();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst changedEditableSettings = useEditableSettings(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tgroup: _id,\n\t\t\t\tchanged: true,\n\t\t\t}),\n\t\t\t[_id],\n\t\t),\n\t);\n\n\tconst originalSettings = useSettings(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\t_id: changedEditableSettings.map(({ _id }) => _id),\n\t\t\t}),\n\t\t\t[changedEditableSettings],\n\t\t),\n\t);\n\n\tconst isColorSetting = (setting: ISetting): setting is ISettingColor => setting.type === 'color';\n\n\tconst save = useEffectEvent(async () => {\n\t\tconst changes = changedEditableSettings.map((setting) => {\n\t\t\tif (isColorSetting(setting)) {\n\t\t\t\treturn {\n\t\t\t\t\t_id: setting._id,\n\t\t\t\t\tvalue: setting.value,\n\t\t\t\t\teditor: setting.editor,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t_id: setting._id,\n\t\t\t\tvalue: setting.value,\n\t\t\t};\n\t\t});\n\n\t\tif (changes.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait dispatch(changes);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Settings_updated') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\tconst dispatchToEditing = useEditableSettingsDispatch();\n\n\tconst cancel = useEffectEvent(() => {\n\t\tconst settingsToDispatch = changedEditableSettings\n\t\t\t.map(({ _id }) => originalSettings.find((setting) => setting._id === _id))\n\t\t\t.map((setting) => {\n\t\t\t\tif (!setting) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (isColorSetting(setting)) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t_id: setting._id,\n\t\t\t\t\t\tvalue: setting.value,\n\t\t\t\t\t\teditor: setting.editor,\n\t\t\t\t\t\tchanged: false,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t_id: setting._id,\n\t\t\t\t\tvalue: setting.value,\n\t\t\t\t\tchanged: false,\n\t\t\t\t};\n\t\t\t})\n\t\t\t.filter(Boolean);\n\t\tdispatchToEditing(settingsToDispatch as Partial<EditableSetting>[]);\n\t});\n\n\tconst handleSubmit = (event: FormEvent<HTMLFormElement>): void => {\n\t\tevent.preventDefault();\n\t\tsave();\n\t};\n\n\tconst handleCancelClick = (event: MouseEvent<HTMLOrSVGElement>): void => {\n\t\tevent.preventDefault();\n\t\tcancel();\n\t};\n\n\tconst handleSaveClick = (event: MouseEvent<HTMLOrSVGElement>): void => {\n\t\tevent.preventDefault();\n\t\tsave();\n\t};\n\n\tif (!_id) {\n\t\treturn <Page>{children}</Page>;\n\t}\n\n\tconst isTranslationKey = (key: string): key is TranslationKey => (key as TranslationKey) !== undefined;\n\n\treturn (\n\t\t<Page is='form' action='#' method='post' onSubmit={handleSubmit}>\n\t\t\t<PageHeader onClickBack={onClickBack} title={i18nLabel && isTranslationKey(i18nLabel) && t(i18nLabel)}>\n\t\t\t\t<ButtonGroup>{headerButtons}</ButtonGroup>\n\t\t\t</PageHeader>\n\t\t\t{tabs}\n\t\t\t{isCustom ? (\n\t\t\t\tchildren\n\t\t\t) : (\n\t\t\t\t<PageScrollableContentWithShadow>\n\t\t\t\t\t<Box marginBlock='none' marginInline='auto' width='full' maxWidth='x580'>\n\t\t\t\t\t\t{i18nDescription && isTranslationKey(i18nDescription) && t.has(i18nDescription) && (\n\t\t\t\t\t\t\t<Box is='p' color='hint' fontScale='p2'>\n\t\t\t\t\t\t\t\t{t(i18nDescription)}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<Accordion className='page-settings'>{children}</Accordion>\n\t\t\t\t\t</Box>\n\t\t\t\t</PageScrollableContentWithShadow>\n\t\t\t)}\n\t\t\t<PageFooter isDirty={!(changedEditableSettings.length === 0)}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t{changedEditableSettings.length > 0 && (\n\t\t\t\t\t\t<Button type='reset' onClick={handleCancelClick}>\n\t\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tchildren={t('Save_changes')}\n\t\t\t\t\t\tclassName='save'\n\t\t\t\t\t\tdisabled={changedEditableSettings.length === 0}\n\t\t\t\t\t\tprimary\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\tonClick={handleSaveClick}\n\t\t\t\t\t/>\n\t\t\t\t</ButtonGroup>\n\t\t\t</PageFooter>\n\t\t</Page>\n\t);\n};\n\nexport default memo(SettingsGroupPage);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/settings/SettingsGroupPage/SettingsGroupPage.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/admin/settings/SettingsGroupPage/SettingsGroupPage.tsx","inputSourceMap":{"version":3,"file":"client/views/admin/settings/SettingsGroupPage/SettingsGroupPage.tsx","sourceRoot":"","sources":["client/views/admin/settings/SettingsGroupPage/SettingsGroupPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { ISetting, ISettingColor } from '@rocket.chat/core-typings';\nimport { Accordion, Box, Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useToastMessageDispatch, useSettingsDispatch, useSettings, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactNode, FormEvent, MouseEvent } from 'react';\nimport React, { useMemo, memo } from 'react';\n\nimport { Page, PageHeader, PageScrollableContentWithShadow, PageFooter } from '../../../../components/Page';\nimport type { EditableSetting } from '../../EditableSettingsContext';\nimport { useEditableSettingsDispatch, useEditableSettings } from '../../EditableSettingsContext';\n\ntype SettingsGroupPageProps = {\n\tchildren: ReactNode;\n\theaderButtons?: ReactNode;\n\tonClickBack?: () => void;\n\t_id: string;\n\ti18nLabel: string;\n\ti18nDescription?: string;\n\ttabs?: ReactNode;\n\tisCustom?: boolean;\n};\n\nconst SettingsGroupPage = ({\n\tchildren = undefined,\n\theaderButtons = undefined,\n\tonClickBack,\n\t_id,\n\ti18nLabel,\n\ti18nDescription = undefined,\n\ttabs = undefined,\n\tisCustom = false,\n}: SettingsGroupPageProps) => {\n\tconst t = useTranslation();\n\tconst dispatch = useSettingsDispatch();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst changedEditableSettings = useEditableSettings(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tgroup: _id,\n\t\t\t\tchanged: true,\n\t\t\t}),\n\t\t\t[_id],\n\t\t),\n\t);\n\n\tconst originalSettings = useSettings(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\t_id: changedEditableSettings.map(({ _id }) => _id),\n\t\t\t}),\n\t\t\t[changedEditableSettings],\n\t\t),\n\t);\n\n\tconst isColorSetting = (setting: ISetting): setting is ISettingColor => setting.type === 'color';\n\n\tconst save = useEffectEvent(async () => {\n\t\tconst changes = changedEditableSettings.map((setting) => {\n\t\t\tif (isColorSetting(setting)) {\n\t\t\t\treturn {\n\t\t\t\t\t_id: setting._id,\n\t\t\t\t\tvalue: setting.value,\n\t\t\t\t\teditor: setting.editor,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t_id: setting._id,\n\t\t\t\tvalue: setting.value,\n\t\t\t};\n\t\t});\n\n\t\tif (changes.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait dispatch(changes);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Settings_updated') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\tconst dispatchToEditing = useEditableSettingsDispatch();\n\n\tconst cancel = useEffectEvent(() => {\n\t\tconst settingsToDispatch = changedEditableSettings\n\t\t\t.map(({ _id }) => originalSettings.find((setting) => setting._id === _id))\n\t\t\t.map((setting) => {\n\t\t\t\tif (!setting) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (isColorSetting(setting)) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t_id: setting._id,\n\t\t\t\t\t\tvalue: setting.value,\n\t\t\t\t\t\teditor: setting.editor,\n\t\t\t\t\t\tchanged: false,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t_id: setting._id,\n\t\t\t\t\tvalue: setting.value,\n\t\t\t\t\tchanged: false,\n\t\t\t\t};\n\t\t\t})\n\t\t\t.filter(Boolean);\n\t\tdispatchToEditing(settingsToDispatch as Partial<EditableSetting>[]);\n\t});\n\n\tconst handleSubmit = (event: FormEvent<HTMLFormElement>): void => {\n\t\tevent.preventDefault();\n\t\tsave();\n\t};\n\n\tconst handleCancelClick = (event: MouseEvent<HTMLOrSVGElement>): void => {\n\t\tevent.preventDefault();\n\t\tcancel();\n\t};\n\n\tconst handleSaveClick = (event: MouseEvent<HTMLOrSVGElement>): void => {\n\t\tevent.preventDefault();\n\t\tsave();\n\t};\n\n\tif (!_id) {\n\t\treturn <Page>{children}</Page>;\n\t}\n\n\tconst isTranslationKey = (key: string): key is TranslationKey => (key as TranslationKey) !== undefined;\n\n\treturn (\n\t\t<Page is='form' action='#' method='post' onSubmit={handleSubmit}>\n\t\t\t<PageHeader onClickBack={onClickBack} title={i18nLabel && isTranslationKey(i18nLabel) && t(i18nLabel)}>\n\t\t\t\t<ButtonGroup>{headerButtons}</ButtonGroup>\n\t\t\t</PageHeader>\n\t\t\t{tabs}\n\t\t\t{isCustom ? (\n\t\t\t\tchildren\n\t\t\t) : (\n\t\t\t\t<PageScrollableContentWithShadow>\n\t\t\t\t\t<Box marginBlock='none' marginInline='auto' width='full' maxWidth='x580'>\n\t\t\t\t\t\t{i18nDescription && isTranslationKey(i18nDescription) && t.has(i18nDescription) && (\n\t\t\t\t\t\t\t<Box is='p' color='hint' fontScale='p2'>\n\t\t\t\t\t\t\t\t{t(i18nDescription)}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<Accordion className='page-settings'>{children}</Accordion>\n\t\t\t\t\t</Box>\n\t\t\t\t</PageScrollableContentWithShadow>\n\t\t\t)}\n\t\t\t<PageFooter isDirty={!(changedEditableSettings.length === 0)}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t{changedEditableSettings.length > 0 && (\n\t\t\t\t\t\t<Button type='reset' onClick={handleCancelClick}>\n\t\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tchildren={t('Save_changes')}\n\t\t\t\t\t\tclassName='save'\n\t\t\t\t\t\tdisabled={changedEditableSettings.length === 0}\n\t\t\t\t\t\tprimary\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\tonClick={handleSaveClick}\n\t\t\t\t\t/>\n\t\t\t\t</ButtonGroup>\n\t\t\t</PageFooter>\n\t\t</Page>\n\t);\n};\n\nexport default memo(SettingsGroupPage);\n"]}}},"code":"let Accordion, Box, Button, ButtonGroup;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Accordion(v) {\n    Accordion = v;\n  },\n  Box(v) {\n    Box = v;\n  },\n  Button(v) {\n    Button = v;\n  },\n  ButtonGroup(v) {\n    ButtonGroup = v;\n  }\n}, 0);\nlet useEffectEvent;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useEffectEvent(v) {\n    useEffectEvent = v;\n  }\n}, 1);\nlet useToastMessageDispatch, useSettingsDispatch, useSettings, useTranslation;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useToastMessageDispatch(v) {\n    useToastMessageDispatch = v;\n  },\n  useSettingsDispatch(v) {\n    useSettingsDispatch = v;\n  },\n  useSettings(v) {\n    useSettings = v;\n  },\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 2);\nlet React, useMemo, memo;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  },\n  memo(v) {\n    memo = v;\n  }\n}, 3);\nlet Page, PageHeader, PageScrollableContentWithShadow, PageFooter;\nmodule.link(\"../../../../components/Page\", {\n  Page(v) {\n    Page = v;\n  },\n  PageHeader(v) {\n    PageHeader = v;\n  },\n  PageScrollableContentWithShadow(v) {\n    PageScrollableContentWithShadow = v;\n  },\n  PageFooter(v) {\n    PageFooter = v;\n  }\n}, 4);\nlet useEditableSettingsDispatch, useEditableSettings;\nmodule.link(\"../../EditableSettingsContext\", {\n  useEditableSettingsDispatch(v) {\n    useEditableSettingsDispatch = v;\n  },\n  useEditableSettings(v) {\n    useEditableSettings = v;\n  }\n}, 5);\nconst SettingsGroupPage = _ref => {\n  let {\n    children = undefined,\n    headerButtons = undefined,\n    onClickBack,\n    _id,\n    i18nLabel,\n    i18nDescription = undefined,\n    tabs = undefined,\n    isCustom = false\n  } = _ref;\n  const t = useTranslation();\n  const dispatch = useSettingsDispatch();\n  const dispatchToastMessage = useToastMessageDispatch();\n  const changedEditableSettings = useEditableSettings(useMemo(() => ({\n    group: _id,\n    changed: true\n  }), [_id]));\n  const originalSettings = useSettings(useMemo(() => ({\n    _id: changedEditableSettings.map(_ref2 => {\n      let {\n        _id\n      } = _ref2;\n      return _id;\n    })\n  }), [changedEditableSettings]));\n  const isColorSetting = setting => setting.type === 'color';\n  const save = useEffectEvent(async () => {\n    const changes = changedEditableSettings.map(setting => {\n      if (isColorSetting(setting)) {\n        return {\n          _id: setting._id,\n          value: setting.value,\n          editor: setting.editor\n        };\n      }\n      return {\n        _id: setting._id,\n        value: setting.value\n      };\n    });\n    if (changes.length === 0) {\n      return;\n    }\n    try {\n      await dispatch(changes);\n      dispatchToastMessage({\n        type: 'success',\n        message: t('Settings_updated')\n      });\n    } catch (error) {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    }\n  });\n  const dispatchToEditing = useEditableSettingsDispatch();\n  const cancel = useEffectEvent(() => {\n    const settingsToDispatch = changedEditableSettings.map(_ref3 => {\n      let {\n        _id\n      } = _ref3;\n      return originalSettings.find(setting => setting._id === _id);\n    }).map(setting => {\n      if (!setting) {\n        return;\n      }\n      if (isColorSetting(setting)) {\n        return {\n          _id: setting._id,\n          value: setting.value,\n          editor: setting.editor,\n          changed: false\n        };\n      }\n      return {\n        _id: setting._id,\n        value: setting.value,\n        changed: false\n      };\n    }).filter(Boolean);\n    dispatchToEditing(settingsToDispatch);\n  });\n  const handleSubmit = event => {\n    event.preventDefault();\n    save();\n  };\n  const handleCancelClick = event => {\n    event.preventDefault();\n    cancel();\n  };\n  const handleSaveClick = event => {\n    event.preventDefault();\n    save();\n  };\n  if (!_id) {\n    return /*#__PURE__*/React.createElement(Page, null, children);\n  }\n  const isTranslationKey = key => key !== undefined;\n  return /*#__PURE__*/React.createElement(Page, {\n    is: \"form\",\n    action: \"#\",\n    method: \"post\",\n    onSubmit: handleSubmit\n  }, /*#__PURE__*/React.createElement(PageHeader, {\n    onClickBack: onClickBack,\n    title: i18nLabel && isTranslationKey(i18nLabel) && t(i18nLabel)\n  }, /*#__PURE__*/React.createElement(ButtonGroup, null, headerButtons)), tabs, isCustom ? children : /*#__PURE__*/React.createElement(PageScrollableContentWithShadow, null, /*#__PURE__*/React.createElement(Box, {\n    marginBlock: \"none\",\n    marginInline: \"auto\",\n    width: \"full\",\n    maxWidth: \"x580\"\n  }, i18nDescription && isTranslationKey(i18nDescription) && t.has(i18nDescription) && /*#__PURE__*/React.createElement(Box, {\n    is: \"p\",\n    color: \"hint\",\n    fontScale: \"p2\"\n  }, t(i18nDescription)), /*#__PURE__*/React.createElement(Accordion, {\n    className: \"page-settings\"\n  }, children))), /*#__PURE__*/React.createElement(PageFooter, {\n    isDirty: !(changedEditableSettings.length === 0)\n  }, /*#__PURE__*/React.createElement(ButtonGroup, null, changedEditableSettings.length > 0 && /*#__PURE__*/React.createElement(Button, {\n    type: \"reset\",\n    onClick: handleCancelClick\n  }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    children: t('Save_changes'),\n    className: \"save\",\n    disabled: changedEditableSettings.length === 0,\n    primary: true,\n    type: \"submit\",\n    onClick: handleSaveClick\n  }))));\n};\nmodule.exportDefault( /*#__PURE__*/memo(SettingsGroupPage));","map":{"version":3,"names":["Accordion","Box","Button","ButtonGroup","module","link","v","useEffectEvent","useToastMessageDispatch","useSettingsDispatch","useSettings","useTranslation","React","useMemo","memo","default","Page","PageHeader","PageScrollableContentWithShadow","PageFooter","useEditableSettingsDispatch","useEditableSettings","SettingsGroupPage","_ref","children","undefined","headerButtons","onClickBack","_id","i18nLabel","i18nDescription","tabs","isCustom","t","dispatch","dispatchToastMessage","changedEditableSettings","group","changed","originalSettings","map","_ref2","isColorSetting","setting","type","save","changes","value","editor","length","message","error","dispatchToEditing","cancel","settingsToDispatch","_ref3","find","filter","Boolean","handleSubmit","event","preventDefault","handleCancelClick","handleSaveClick","createElement","isTranslationKey","key","is","action","method","onSubmit","title","marginBlock","marginInline","width","maxWidth","has","color","fontScale","className","isDirty","onClick","disabled","primary","exportDefault"],"sources":["client/views/admin/settings/SettingsGroupPage/SettingsGroupPage.tsx"],"sourcesContent":["import type { ISetting, ISettingColor } from '@rocket.chat/core-typings';\nimport { Accordion, Box, Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useToastMessageDispatch, useSettingsDispatch, useSettings, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ReactNode, FormEvent, MouseEvent } from 'react';\nimport React, { useMemo, memo } from 'react';\n\nimport { Page, PageHeader, PageScrollableContentWithShadow, PageFooter } from '../../../../components/Page';\nimport type { EditableSetting } from '../../EditableSettingsContext';\nimport { useEditableSettingsDispatch, useEditableSettings } from '../../EditableSettingsContext';\n\ntype SettingsGroupPageProps = {\n\tchildren: ReactNode;\n\theaderButtons?: ReactNode;\n\tonClickBack?: () => void;\n\t_id: string;\n\ti18nLabel: string;\n\ti18nDescription?: string;\n\ttabs?: ReactNode;\n\tisCustom?: boolean;\n};\n\nconst SettingsGroupPage = ({\n\tchildren = undefined,\n\theaderButtons = undefined,\n\tonClickBack,\n\t_id,\n\ti18nLabel,\n\ti18nDescription = undefined,\n\ttabs = undefined,\n\tisCustom = false,\n}: SettingsGroupPageProps) => {\n\tconst t = useTranslation();\n\tconst dispatch = useSettingsDispatch();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst changedEditableSettings = useEditableSettings(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tgroup: _id,\n\t\t\t\tchanged: true,\n\t\t\t}),\n\t\t\t[_id],\n\t\t),\n\t);\n\n\tconst originalSettings = useSettings(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\t_id: changedEditableSettings.map(({ _id }) => _id),\n\t\t\t}),\n\t\t\t[changedEditableSettings],\n\t\t),\n\t);\n\n\tconst isColorSetting = (setting: ISetting): setting is ISettingColor => setting.type === 'color';\n\n\tconst save = useEffectEvent(async () => {\n\t\tconst changes = changedEditableSettings.map((setting) => {\n\t\t\tif (isColorSetting(setting)) {\n\t\t\t\treturn {\n\t\t\t\t\t_id: setting._id,\n\t\t\t\t\tvalue: setting.value,\n\t\t\t\t\teditor: setting.editor,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t_id: setting._id,\n\t\t\t\tvalue: setting.value,\n\t\t\t};\n\t\t});\n\n\t\tif (changes.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait dispatch(changes);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Settings_updated') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\n\tconst dispatchToEditing = useEditableSettingsDispatch();\n\n\tconst cancel = useEffectEvent(() => {\n\t\tconst settingsToDispatch = changedEditableSettings\n\t\t\t.map(({ _id }) => originalSettings.find((setting) => setting._id === _id))\n\t\t\t.map((setting) => {\n\t\t\t\tif (!setting) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (isColorSetting(setting)) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t_id: setting._id,\n\t\t\t\t\t\tvalue: setting.value,\n\t\t\t\t\t\teditor: setting.editor,\n\t\t\t\t\t\tchanged: false,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t_id: setting._id,\n\t\t\t\t\tvalue: setting.value,\n\t\t\t\t\tchanged: false,\n\t\t\t\t};\n\t\t\t})\n\t\t\t.filter(Boolean);\n\t\tdispatchToEditing(settingsToDispatch as Partial<EditableSetting>[]);\n\t});\n\n\tconst handleSubmit = (event: FormEvent<HTMLFormElement>): void => {\n\t\tevent.preventDefault();\n\t\tsave();\n\t};\n\n\tconst handleCancelClick = (event: MouseEvent<HTMLOrSVGElement>): void => {\n\t\tevent.preventDefault();\n\t\tcancel();\n\t};\n\n\tconst handleSaveClick = (event: MouseEvent<HTMLOrSVGElement>): void => {\n\t\tevent.preventDefault();\n\t\tsave();\n\t};\n\n\tif (!_id) {\n\t\treturn <Page>{children}</Page>;\n\t}\n\n\tconst isTranslationKey = (key: string): key is TranslationKey => (key as TranslationKey) !== undefined;\n\n\treturn (\n\t\t<Page is='form' action='#' method='post' onSubmit={handleSubmit}>\n\t\t\t<PageHeader onClickBack={onClickBack} title={i18nLabel && isTranslationKey(i18nLabel) && t(i18nLabel)}>\n\t\t\t\t<ButtonGroup>{headerButtons}</ButtonGroup>\n\t\t\t</PageHeader>\n\t\t\t{tabs}\n\t\t\t{isCustom ? (\n\t\t\t\tchildren\n\t\t\t) : (\n\t\t\t\t<PageScrollableContentWithShadow>\n\t\t\t\t\t<Box marginBlock='none' marginInline='auto' width='full' maxWidth='x580'>\n\t\t\t\t\t\t{i18nDescription && isTranslationKey(i18nDescription) && t.has(i18nDescription) && (\n\t\t\t\t\t\t\t<Box is='p' color='hint' fontScale='p2'>\n\t\t\t\t\t\t\t\t{t(i18nDescription)}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<Accordion className='page-settings'>{children}</Accordion>\n\t\t\t\t\t</Box>\n\t\t\t\t</PageScrollableContentWithShadow>\n\t\t\t)}\n\t\t\t<PageFooter isDirty={!(changedEditableSettings.length === 0)}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t{changedEditableSettings.length > 0 && (\n\t\t\t\t\t\t<Button type='reset' onClick={handleCancelClick}>\n\t\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tchildren={t('Save_changes')}\n\t\t\t\t\t\tclassName='save'\n\t\t\t\t\t\tdisabled={changedEditableSettings.length === 0}\n\t\t\t\t\t\tprimary\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\tonClick={handleSaveClick}\n\t\t\t\t\t/>\n\t\t\t\t</ButtonGroup>\n\t\t\t</PageFooter>\n\t\t</Page>\n\t);\n};\n\nexport default memo(SettingsGroupPage);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"9ae11f72fdf50036ff3c81fff3d3ec7c6e80dd9d"}
