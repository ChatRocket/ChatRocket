{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/contextualBar/ExportMessages/MailExportForm.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/room/contextualBar/ExportMessages/MailExportForm.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/contextualBar/ExportMessages/MailExportForm.tsx","inputSourceMap":{"version":3,"file":"client/views/room/contextualBar/ExportMessages/MailExportForm.tsx","sourceRoot":"","sources":["client/views/room/contextualBar/ExportMessages/MailExportForm.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport {\n\tFieldError,\n\tField,\n\tFieldLabel,\n\tFieldRow,\n\tTextAreaInput,\n\tTextInput,\n\tButtonGroup,\n\tButton,\n\tBox,\n\tIcon,\n\tCallout,\n\tFieldGroup,\n\tSelect,\n} from '@rocket.chat/fuselage';\nimport { useAutoFocus, useMutableCallback, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport React, { useEffect, useContext } from 'react';\nimport { Controller, useFormContext } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\n\nimport { validateEmail } from '../../../../../lib/emailValidator';\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../../components/Contextualbar';\nimport UserAutoCompleteMultiple from '../../../../components/UserAutoCompleteMultiple';\nimport { SelectedMessageContext, useCountSelected } from '../../MessageList/contexts/SelectedMessagesContext';\nimport type { MailExportFormValues } from './ExportMessages';\nimport { useRoomExportMutation } from './useRoomExportMutation';\n\ntype MailExportFormProps = {\n\tformId: string;\n\trid: IRoom['_id'];\n\tonCancel: () => void;\n\texportOptions: SelectOption[];\n};\n\nconst MailExportForm = ({ formId, rid, onCancel, exportOptions }: MailExportFormProps) => {\n\tconst { t } = useTranslation();\n\tconst formFocus = useAutoFocus<HTMLFormElement>();\n\n\tconst {\n\t\twatch,\n\t\tsetValue,\n\t\tcontrol,\n\t\tregister,\n\t\tformState: { errors, isDirty, isSubmitting },\n\t\thandleSubmit,\n\t\tclearErrors,\n\t} = useFormContext<MailExportFormValues>();\n\tconst roomExportMutation = useRoomExportMutation();\n\n\tconst { selectedMessageStore } = useContext(SelectedMessageContext);\n\tconst messages = selectedMessageStore.getSelectedMessages();\n\n\tconst count = useCountSelected();\n\n\tconst clearSelection = useMutableCallback(() => {\n\t\tselectedMessageStore.clearStore();\n\t});\n\n\tuseEffect(() => {\n\t\tselectedMessageStore.setIsSelecting(true);\n\t\treturn (): void => {\n\t\t\tselectedMessageStore.reset();\n\t\t};\n\t}, [selectedMessageStore]);\n\n\tconst { toUsers } = watch();\n\n\tuseEffect(() => {\n\t\tsetValue('messagesCount', messages.length);\n\t}, [setValue, messages.length]);\n\n\tconst handleExport = async ({ toUsers, subject, additionalEmails }: MailExportFormValues) => {\n\t\troomExportMutation.mutateAsync({\n\t\t\trid,\n\t\t\ttype: 'email',\n\t\t\ttoUsers,\n\t\t\ttoEmails: additionalEmails?.split(','),\n\t\t\tsubject,\n\t\t\tmessages,\n\t\t});\n\t};\n\n\tconst clickable = css`\n\t\tcursor: pointer;\n\t`;\n\n\tconst methodField = useUniqueId();\n\tconst toUsersField = useUniqueId();\n\tconst additionalEmailsField = useUniqueId();\n\tconst subjectField = useUniqueId();\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<form ref={formFocus} tabIndex={-1} aria-labelledby={`${formId}-title`} id={formId} onSubmit={handleSubmit(handleExport)}>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={methodField}>{t('Method')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='type'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field }) => <Select id={methodField} {...field} placeholder={t('Type')} options={exportOptions} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Callout onClick={clearSelection} title={t('Messages_selected')} type={count > 0 ? 'success' : 'info'}>\n\t\t\t\t\t\t\t\t<p>{`${count} Messages selected`}</p>\n\t\t\t\t\t\t\t\t{count > 0 && (\n\t\t\t\t\t\t\t\t\t<Box is='p' className={clickable}>\n\t\t\t\t\t\t\t\t\t\t{t('Click_here_to_clear_the_selection')}\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{count === 0 && <Box is='p'>{t('Click_the_messages_you_would_like_to_send_by_email')}</Box>}\n\t\t\t\t\t\t\t</Callout>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='hidden'\n\t\t\t\t\t\t\t\t{...register('messagesCount', {\n\t\t\t\t\t\t\t\t\tvalidate: (messagesCount) => (messagesCount > 0 ? undefined : t('Mail_Message_No_messages_selected_select_all')),\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors.messagesCount && <FieldError aria-live='assertive'>{errors.messagesCount.message}</FieldError>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={toUsersField}>{t('To_users')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='toUsers'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field: { value, onChange, onBlur, name } }) => (\n\t\t\t\t\t\t\t\t\t\t<UserAutoCompleteMultiple\n\t\t\t\t\t\t\t\t\t\t\tid={toUsersField}\n\t\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\t\t\t\t\tonChange(value);\n\t\t\t\t\t\t\t\t\t\t\t\tclearErrors('additionalEmails');\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={additionalEmailsField}>{t('To_additional_emails')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='additionalEmails'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{\n\t\t\t\t\t\t\t\t\t\tvalidate: {\n\t\t\t\t\t\t\t\t\t\t\tvalidateEmail: (additionalEmails) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (additionalEmails === '') {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (additionalEmails !== '' && validateEmail(additionalEmails)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn t('Mail_Message_Invalid_emails', { postProcess: 'sprintf', sprintf: [additionalEmails] });\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tvalidateToUsers: (additionalEmails) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (additionalEmails !== '' || toUsers?.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn t('Mail_Message_Missing_to');\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\tid={additionalEmailsField}\n\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Email_Placeholder_any')}\n\t\t\t\t\t\t\t\t\t\t\taddon={<Icon name='mail' size='x20' />}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${additionalEmailsField}-error`}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={Boolean(errors?.additionalEmails?.message)}\n\t\t\t\t\t\t\t\t\t\t\terror={errors?.additionalEmails?.message}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors?.additionalEmails && (\n\t\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${additionalEmailsField}-error`}>\n\t\t\t\t\t\t\t\t\t{errors.additionalEmails.message}\n\t\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={subjectField}>{t('Subject')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='subject'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field }) => <TextAreaInput rows={3} id={subjectField} {...field} addon={<Icon name='edit' size='x20' />} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</form>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button loading={isSubmitting} disabled={!isDirty} form={formId} primary type='submit'>\n\t\t\t\t\t\t{t('Send')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default MailExportForm;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/contextualBar/ExportMessages/MailExportForm.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/contextualBar/ExportMessages/MailExportForm.tsx","inputSourceMap":{"version":3,"file":"client/views/room/contextualBar/ExportMessages/MailExportForm.tsx","sourceRoot":"","sources":["client/views/room/contextualBar/ExportMessages/MailExportForm.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport {\n\tFieldError,\n\tField,\n\tFieldLabel,\n\tFieldRow,\n\tTextAreaInput,\n\tTextInput,\n\tButtonGroup,\n\tButton,\n\tBox,\n\tIcon,\n\tCallout,\n\tFieldGroup,\n\tSelect,\n} from '@rocket.chat/fuselage';\nimport { useAutoFocus, useMutableCallback, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport React, { useEffect, useContext } from 'react';\nimport { Controller, useFormContext } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\n\nimport { validateEmail } from '../../../../../lib/emailValidator';\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../../components/Contextualbar';\nimport UserAutoCompleteMultiple from '../../../../components/UserAutoCompleteMultiple';\nimport { SelectedMessageContext, useCountSelected } from '../../MessageList/contexts/SelectedMessagesContext';\nimport type { MailExportFormValues } from './ExportMessages';\nimport { useRoomExportMutation } from './useRoomExportMutation';\n\ntype MailExportFormProps = {\n\tformId: string;\n\trid: IRoom['_id'];\n\tonCancel: () => void;\n\texportOptions: SelectOption[];\n};\n\nconst MailExportForm = ({ formId, rid, onCancel, exportOptions }: MailExportFormProps) => {\n\tconst { t } = useTranslation();\n\tconst formFocus = useAutoFocus<HTMLFormElement>();\n\n\tconst {\n\t\twatch,\n\t\tsetValue,\n\t\tcontrol,\n\t\tregister,\n\t\tformState: { errors, isDirty, isSubmitting },\n\t\thandleSubmit,\n\t\tclearErrors,\n\t} = useFormContext<MailExportFormValues>();\n\tconst roomExportMutation = useRoomExportMutation();\n\n\tconst { selectedMessageStore } = useContext(SelectedMessageContext);\n\tconst messages = selectedMessageStore.getSelectedMessages();\n\n\tconst count = useCountSelected();\n\n\tconst clearSelection = useMutableCallback(() => {\n\t\tselectedMessageStore.clearStore();\n\t});\n\n\tuseEffect(() => {\n\t\tselectedMessageStore.setIsSelecting(true);\n\t\treturn (): void => {\n\t\t\tselectedMessageStore.reset();\n\t\t};\n\t}, [selectedMessageStore]);\n\n\tconst { toUsers } = watch();\n\n\tuseEffect(() => {\n\t\tsetValue('messagesCount', messages.length);\n\t}, [setValue, messages.length]);\n\n\tconst handleExport = async ({ toUsers, subject, additionalEmails }: MailExportFormValues) => {\n\t\troomExportMutation.mutateAsync({\n\t\t\trid,\n\t\t\ttype: 'email',\n\t\t\ttoUsers,\n\t\t\ttoEmails: additionalEmails?.split(','),\n\t\t\tsubject,\n\t\t\tmessages,\n\t\t});\n\t};\n\n\tconst clickable = css`\n\t\tcursor: pointer;\n\t`;\n\n\tconst methodField = useUniqueId();\n\tconst toUsersField = useUniqueId();\n\tconst additionalEmailsField = useUniqueId();\n\tconst subjectField = useUniqueId();\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<form ref={formFocus} tabIndex={-1} aria-labelledby={`${formId}-title`} id={formId} onSubmit={handleSubmit(handleExport)}>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={methodField}>{t('Method')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='type'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field }) => <Select id={methodField} {...field} placeholder={t('Type')} options={exportOptions} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Callout onClick={clearSelection} title={t('Messages_selected')} type={count > 0 ? 'success' : 'info'}>\n\t\t\t\t\t\t\t\t<p>{`${count} Messages selected`}</p>\n\t\t\t\t\t\t\t\t{count > 0 && (\n\t\t\t\t\t\t\t\t\t<Box is='p' className={clickable}>\n\t\t\t\t\t\t\t\t\t\t{t('Click_here_to_clear_the_selection')}\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{count === 0 && <Box is='p'>{t('Click_the_messages_you_would_like_to_send_by_email')}</Box>}\n\t\t\t\t\t\t\t</Callout>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='hidden'\n\t\t\t\t\t\t\t\t{...register('messagesCount', {\n\t\t\t\t\t\t\t\t\tvalidate: (messagesCount) => (messagesCount > 0 ? undefined : t('Mail_Message_No_messages_selected_select_all')),\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors.messagesCount && <FieldError aria-live='assertive'>{errors.messagesCount.message}</FieldError>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={toUsersField}>{t('To_users')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='toUsers'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field: { value, onChange, onBlur, name } }) => (\n\t\t\t\t\t\t\t\t\t\t<UserAutoCompleteMultiple\n\t\t\t\t\t\t\t\t\t\t\tid={toUsersField}\n\t\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\t\t\t\t\tonChange(value);\n\t\t\t\t\t\t\t\t\t\t\t\tclearErrors('additionalEmails');\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={additionalEmailsField}>{t('To_additional_emails')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='additionalEmails'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{\n\t\t\t\t\t\t\t\t\t\tvalidate: {\n\t\t\t\t\t\t\t\t\t\t\tvalidateEmail: (additionalEmails) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (additionalEmails === '') {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (additionalEmails !== '' && validateEmail(additionalEmails)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn t('Mail_Message_Invalid_emails', { postProcess: 'sprintf', sprintf: [additionalEmails] });\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tvalidateToUsers: (additionalEmails) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (additionalEmails !== '' || toUsers?.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn t('Mail_Message_Missing_to');\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\tid={additionalEmailsField}\n\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Email_Placeholder_any')}\n\t\t\t\t\t\t\t\t\t\t\taddon={<Icon name='mail' size='x20' />}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${additionalEmailsField}-error`}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={Boolean(errors?.additionalEmails?.message)}\n\t\t\t\t\t\t\t\t\t\t\terror={errors?.additionalEmails?.message}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors?.additionalEmails && (\n\t\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${additionalEmailsField}-error`}>\n\t\t\t\t\t\t\t\t\t{errors.additionalEmails.message}\n\t\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={subjectField}>{t('Subject')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='subject'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field }) => <TextAreaInput rows={3} id={subjectField} {...field} addon={<Icon name='edit' size='x20' />} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</form>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button loading={isSubmitting} disabled={!isDirty} form={formId} primary type='submit'>\n\t\t\t\t\t\t{t('Send')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default MailExportForm;\n"]}}},"code":"var _templateObject;\nlet _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet _taggedTemplateLiteral;\nmodule.link(\"@babel/runtime/helpers/taggedTemplateLiteral\", {\n  default(v) {\n    _taggedTemplateLiteral = v;\n  }\n}, 1);\nlet css;\nmodule.link(\"@rocket.chat/css-in-js\", {\n  css(v) {\n    css = v;\n  }\n}, 0);\nlet FieldError, Field, FieldLabel, FieldRow, TextAreaInput, TextInput, ButtonGroup, Button, Box, Icon, Callout, FieldGroup, Select;\nmodule.link(\"@rocket.chat/fuselage\", {\n  FieldError(v) {\n    FieldError = v;\n  },\n  Field(v) {\n    Field = v;\n  },\n  FieldLabel(v) {\n    FieldLabel = v;\n  },\n  FieldRow(v) {\n    FieldRow = v;\n  },\n  TextAreaInput(v) {\n    TextAreaInput = v;\n  },\n  TextInput(v) {\n    TextInput = v;\n  },\n  ButtonGroup(v) {\n    ButtonGroup = v;\n  },\n  Button(v) {\n    Button = v;\n  },\n  Box(v) {\n    Box = v;\n  },\n  Icon(v) {\n    Icon = v;\n  },\n  Callout(v) {\n    Callout = v;\n  },\n  FieldGroup(v) {\n    FieldGroup = v;\n  },\n  Select(v) {\n    Select = v;\n  }\n}, 1);\nlet useAutoFocus, useMutableCallback, useUniqueId;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useAutoFocus(v) {\n    useAutoFocus = v;\n  },\n  useMutableCallback(v) {\n    useMutableCallback = v;\n  },\n  useUniqueId(v) {\n    useUniqueId = v;\n  }\n}, 2);\nlet React, useEffect, useContext;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  },\n  useContext(v) {\n    useContext = v;\n  }\n}, 3);\nlet Controller, useFormContext;\nmodule.link(\"react-hook-form\", {\n  Controller(v) {\n    Controller = v;\n  },\n  useFormContext(v) {\n    useFormContext = v;\n  }\n}, 4);\nlet useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 5);\nlet validateEmail;\nmodule.link(\"../../../../../lib/emailValidator\", {\n  validateEmail(v) {\n    validateEmail = v;\n  }\n}, 6);\nlet ContextualbarScrollableContent, ContextualbarFooter;\nmodule.link(\"../../../../components/Contextualbar\", {\n  ContextualbarScrollableContent(v) {\n    ContextualbarScrollableContent = v;\n  },\n  ContextualbarFooter(v) {\n    ContextualbarFooter = v;\n  }\n}, 7);\nlet UserAutoCompleteMultiple;\nmodule.link(\"../../../../components/UserAutoCompleteMultiple\", {\n  default(v) {\n    UserAutoCompleteMultiple = v;\n  }\n}, 8);\nlet SelectedMessageContext, useCountSelected;\nmodule.link(\"../../MessageList/contexts/SelectedMessagesContext\", {\n  SelectedMessageContext(v) {\n    SelectedMessageContext = v;\n  },\n  useCountSelected(v) {\n    useCountSelected = v;\n  }\n}, 9);\nlet useRoomExportMutation;\nmodule.link(\"./useRoomExportMutation\", {\n  useRoomExportMutation(v) {\n    useRoomExportMutation = v;\n  }\n}, 10);\nconst MailExportForm = _ref => {\n  let {\n    formId,\n    rid,\n    onCancel,\n    exportOptions\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const formFocus = useAutoFocus();\n  const {\n    watch,\n    setValue,\n    control,\n    register,\n    formState: {\n      errors,\n      isDirty,\n      isSubmitting\n    },\n    handleSubmit,\n    clearErrors\n  } = useFormContext();\n  const roomExportMutation = useRoomExportMutation();\n  const {\n    selectedMessageStore\n  } = useContext(SelectedMessageContext);\n  const messages = selectedMessageStore.getSelectedMessages();\n  const count = useCountSelected();\n  const clearSelection = useMutableCallback(() => {\n    selectedMessageStore.clearStore();\n  });\n  useEffect(() => {\n    selectedMessageStore.setIsSelecting(true);\n    return () => {\n      selectedMessageStore.reset();\n    };\n  }, [selectedMessageStore]);\n  const {\n    toUsers\n  } = watch();\n  useEffect(() => {\n    setValue('messagesCount', messages.length);\n  }, [setValue, messages.length]);\n  const handleExport = async _ref2 => {\n    let {\n      toUsers,\n      subject,\n      additionalEmails\n    } = _ref2;\n    roomExportMutation.mutateAsync({\n      rid,\n      type: 'email',\n      toUsers,\n      toEmails: additionalEmails === null || additionalEmails === void 0 ? void 0 : additionalEmails.split(','),\n      subject,\n      messages\n    });\n  };\n  const clickable = css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n\\t\\tcursor: pointer;\\n\\t\"])));\n  const methodField = useUniqueId();\n  const toUsersField = useUniqueId();\n  const additionalEmailsField = useUniqueId();\n  const subjectField = useUniqueId();\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ContextualbarScrollableContent, null, /*#__PURE__*/React.createElement(\"form\", {\n    ref: formFocus,\n    tabIndex: -1,\n    \"aria-labelledby\": \"\".concat(formId, \"-title\"),\n    id: formId,\n    onSubmit: handleSubmit(handleExport)\n  }, /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, {\n    htmlFor: methodField\n  }, t('Method')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(Controller, {\n    name: \"type\",\n    control: control,\n    render: _ref3 => {\n      let {\n        field\n      } = _ref3;\n      return /*#__PURE__*/React.createElement(Select, _extends({\n        id: methodField\n      }, field, {\n        placeholder: t('Type'),\n        options: exportOptions\n      }));\n    }\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Callout, {\n    onClick: clearSelection,\n    title: t('Messages_selected'),\n    type: count > 0 ? 'success' : 'info'\n  }, /*#__PURE__*/React.createElement(\"p\", null, \"\".concat(count, \" Messages selected\")), count > 0 && /*#__PURE__*/React.createElement(Box, {\n    is: \"p\",\n    className: clickable\n  }, t('Click_here_to_clear_the_selection')), count === 0 && /*#__PURE__*/React.createElement(Box, {\n    is: \"p\"\n  }, t('Click_the_messages_you_would_like_to_send_by_email'))), /*#__PURE__*/React.createElement(\"input\", _extends({\n    type: \"hidden\"\n  }, register('messagesCount', {\n    validate: messagesCount => messagesCount > 0 ? undefined : t('Mail_Message_No_messages_selected_select_all')\n  }))), errors.messagesCount && /*#__PURE__*/React.createElement(FieldError, {\n    \"aria-live\": \"assertive\"\n  }, errors.messagesCount.message)), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, {\n    htmlFor: toUsersField\n  }, t('To_users')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(Controller, {\n    name: \"toUsers\",\n    control: control,\n    render: _ref4 => {\n      let {\n        field: {\n          value,\n          onChange,\n          onBlur,\n          name\n        }\n      } = _ref4;\n      return /*#__PURE__*/React.createElement(UserAutoCompleteMultiple, {\n        id: toUsersField,\n        value: value,\n        onChange: value => {\n          onChange(value);\n          clearErrors('additionalEmails');\n        },\n        onBlur: onBlur,\n        name: name\n      });\n    }\n  }))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, {\n    htmlFor: additionalEmailsField\n  }, t('To_additional_emails')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(Controller, {\n    name: \"additionalEmails\",\n    control: control,\n    rules: {\n      validate: {\n        validateEmail: additionalEmails => {\n          if (additionalEmails === '') {\n            return undefined;\n          }\n          if (additionalEmails !== '' && validateEmail(additionalEmails)) {\n            return undefined;\n          }\n          return t('Mail_Message_Invalid_emails', {\n            postProcess: 'sprintf',\n            sprintf: [additionalEmails]\n          });\n        },\n        validateToUsers: additionalEmails => {\n          if (additionalEmails !== '' || (toUsers === null || toUsers === void 0 ? void 0 : toUsers.length) > 0) {\n            return undefined;\n          }\n          return t('Mail_Message_Missing_to');\n        }\n      }\n    },\n    render: _ref5 => {\n      var _errors$additionalEma, _errors$additionalEma2;\n      let {\n        field\n      } = _ref5;\n      return /*#__PURE__*/React.createElement(TextInput, _extends({\n        id: additionalEmailsField\n      }, field, {\n        placeholder: t('Email_Placeholder_any'),\n        addon: /*#__PURE__*/React.createElement(Icon, {\n          name: \"mail\",\n          size: \"x20\"\n        }),\n        \"aria-describedby\": \"\".concat(additionalEmailsField, \"-error\"),\n        \"aria-invalid\": Boolean(errors === null || errors === void 0 ? void 0 : (_errors$additionalEma = errors.additionalEmails) === null || _errors$additionalEma === void 0 ? void 0 : _errors$additionalEma.message),\n        error: errors === null || errors === void 0 ? void 0 : (_errors$additionalEma2 = errors.additionalEmails) === null || _errors$additionalEma2 === void 0 ? void 0 : _errors$additionalEma2.message\n      }));\n    }\n  })), (errors === null || errors === void 0 ? void 0 : errors.additionalEmails) && /*#__PURE__*/React.createElement(FieldError, {\n    \"aria-live\": \"assertive\",\n    id: \"\".concat(additionalEmailsField, \"-error\")\n  }, errors.additionalEmails.message)), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, {\n    htmlFor: subjectField\n  }, t('Subject')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(Controller, {\n    name: \"subject\",\n    control: control,\n    render: _ref6 => {\n      let {\n        field\n      } = _ref6;\n      return /*#__PURE__*/React.createElement(TextAreaInput, _extends({\n        rows: 3,\n        id: subjectField\n      }, field, {\n        addon: /*#__PURE__*/React.createElement(Icon, {\n          name: \"edit\",\n          size: \"x20\"\n        })\n      }));\n    }\n  })))))), /*#__PURE__*/React.createElement(ContextualbarFooter, null, /*#__PURE__*/React.createElement(ButtonGroup, {\n    stretch: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onCancel\n  }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    loading: isSubmitting,\n    disabled: !isDirty,\n    form: formId,\n    primary: true,\n    type: \"submit\"\n  }, t('Send')))));\n};\nmodule.exportDefault(MailExportForm);","map":{"version":3,"names":["_extends","module","link","default","v","_taggedTemplateLiteral","css","FieldError","Field","FieldLabel","FieldRow","TextAreaInput","TextInput","ButtonGroup","Button","Box","Icon","Callout","FieldGroup","Select","useAutoFocus","useMutableCallback","useUniqueId","React","useEffect","useContext","Controller","useFormContext","useTranslation","validateEmail","ContextualbarScrollableContent","ContextualbarFooter","UserAutoCompleteMultiple","SelectedMessageContext","useCountSelected","useRoomExportMutation","MailExportForm","_ref","formId","rid","onCancel","exportOptions","t","formFocus","watch","setValue","control","register","formState","errors","isDirty","isSubmitting","handleSubmit","clearErrors","roomExportMutation","selectedMessageStore","messages","getSelectedMessages","count","clearSelection","clearStore","setIsSelecting","reset","toUsers","length","handleExport","_ref2","subject","additionalEmails","mutateAsync","type","toEmails","split","clickable","_templateObject","methodField","toUsersField","additionalEmailsField","subjectField","createElement","Fragment","ref","tabIndex","concat","id","onSubmit","htmlFor","name","render","_ref3","field","placeholder","options","onClick","title","is","className","validate","messagesCount","undefined","message","_ref4","value","onChange","onBlur","rules","postProcess","sprintf","validateToUsers","_ref5","_errors$additionalEma","_errors$additionalEma2","addon","size","Boolean","error","_ref6","rows","stretch","loading","disabled","form","primary","exportDefault"],"sources":["client/views/room/contextualBar/ExportMessages/MailExportForm.tsx"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport type { SelectOption } from '@rocket.chat/fuselage';\nimport {\n\tFieldError,\n\tField,\n\tFieldLabel,\n\tFieldRow,\n\tTextAreaInput,\n\tTextInput,\n\tButtonGroup,\n\tButton,\n\tBox,\n\tIcon,\n\tCallout,\n\tFieldGroup,\n\tSelect,\n} from '@rocket.chat/fuselage';\nimport { useAutoFocus, useMutableCallback, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport React, { useEffect, useContext } from 'react';\nimport { Controller, useFormContext } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\n\nimport { validateEmail } from '../../../../../lib/emailValidator';\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../../components/Contextualbar';\nimport UserAutoCompleteMultiple from '../../../../components/UserAutoCompleteMultiple';\nimport { SelectedMessageContext, useCountSelected } from '../../MessageList/contexts/SelectedMessagesContext';\nimport type { MailExportFormValues } from './ExportMessages';\nimport { useRoomExportMutation } from './useRoomExportMutation';\n\ntype MailExportFormProps = {\n\tformId: string;\n\trid: IRoom['_id'];\n\tonCancel: () => void;\n\texportOptions: SelectOption[];\n};\n\nconst MailExportForm = ({ formId, rid, onCancel, exportOptions }: MailExportFormProps) => {\n\tconst { t } = useTranslation();\n\tconst formFocus = useAutoFocus<HTMLFormElement>();\n\n\tconst {\n\t\twatch,\n\t\tsetValue,\n\t\tcontrol,\n\t\tregister,\n\t\tformState: { errors, isDirty, isSubmitting },\n\t\thandleSubmit,\n\t\tclearErrors,\n\t} = useFormContext<MailExportFormValues>();\n\tconst roomExportMutation = useRoomExportMutation();\n\n\tconst { selectedMessageStore } = useContext(SelectedMessageContext);\n\tconst messages = selectedMessageStore.getSelectedMessages();\n\n\tconst count = useCountSelected();\n\n\tconst clearSelection = useMutableCallback(() => {\n\t\tselectedMessageStore.clearStore();\n\t});\n\n\tuseEffect(() => {\n\t\tselectedMessageStore.setIsSelecting(true);\n\t\treturn (): void => {\n\t\t\tselectedMessageStore.reset();\n\t\t};\n\t}, [selectedMessageStore]);\n\n\tconst { toUsers } = watch();\n\n\tuseEffect(() => {\n\t\tsetValue('messagesCount', messages.length);\n\t}, [setValue, messages.length]);\n\n\tconst handleExport = async ({ toUsers, subject, additionalEmails }: MailExportFormValues) => {\n\t\troomExportMutation.mutateAsync({\n\t\t\trid,\n\t\t\ttype: 'email',\n\t\t\ttoUsers,\n\t\t\ttoEmails: additionalEmails?.split(','),\n\t\t\tsubject,\n\t\t\tmessages,\n\t\t});\n\t};\n\n\tconst clickable = css`\n\t\tcursor: pointer;\n\t`;\n\n\tconst methodField = useUniqueId();\n\tconst toUsersField = useUniqueId();\n\tconst additionalEmailsField = useUniqueId();\n\tconst subjectField = useUniqueId();\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent>\n\t\t\t\t<form ref={formFocus} tabIndex={-1} aria-labelledby={`${formId}-title`} id={formId} onSubmit={handleSubmit(handleExport)}>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={methodField}>{t('Method')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='type'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field }) => <Select id={methodField} {...field} placeholder={t('Type')} options={exportOptions} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Callout onClick={clearSelection} title={t('Messages_selected')} type={count > 0 ? 'success' : 'info'}>\n\t\t\t\t\t\t\t\t<p>{`${count} Messages selected`}</p>\n\t\t\t\t\t\t\t\t{count > 0 && (\n\t\t\t\t\t\t\t\t\t<Box is='p' className={clickable}>\n\t\t\t\t\t\t\t\t\t\t{t('Click_here_to_clear_the_selection')}\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{count === 0 && <Box is='p'>{t('Click_the_messages_you_would_like_to_send_by_email')}</Box>}\n\t\t\t\t\t\t\t</Callout>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype='hidden'\n\t\t\t\t\t\t\t\t{...register('messagesCount', {\n\t\t\t\t\t\t\t\t\tvalidate: (messagesCount) => (messagesCount > 0 ? undefined : t('Mail_Message_No_messages_selected_select_all')),\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{errors.messagesCount && <FieldError aria-live='assertive'>{errors.messagesCount.message}</FieldError>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={toUsersField}>{t('To_users')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='toUsers'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field: { value, onChange, onBlur, name } }) => (\n\t\t\t\t\t\t\t\t\t\t<UserAutoCompleteMultiple\n\t\t\t\t\t\t\t\t\t\t\tid={toUsersField}\n\t\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\t\t\t\t\tonChange(value);\n\t\t\t\t\t\t\t\t\t\t\t\tclearErrors('additionalEmails');\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={additionalEmailsField}>{t('To_additional_emails')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='additionalEmails'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trules={{\n\t\t\t\t\t\t\t\t\t\tvalidate: {\n\t\t\t\t\t\t\t\t\t\t\tvalidateEmail: (additionalEmails) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (additionalEmails === '') {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (additionalEmails !== '' && validateEmail(additionalEmails)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn t('Mail_Message_Invalid_emails', { postProcess: 'sprintf', sprintf: [additionalEmails] });\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tvalidateToUsers: (additionalEmails) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (additionalEmails !== '' || toUsers?.length > 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\treturn t('Mail_Message_Missing_to');\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\tid={additionalEmailsField}\n\t\t\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('Email_Placeholder_any')}\n\t\t\t\t\t\t\t\t\t\t\taddon={<Icon name='mail' size='x20' />}\n\t\t\t\t\t\t\t\t\t\t\taria-describedby={`${additionalEmailsField}-error`}\n\t\t\t\t\t\t\t\t\t\t\taria-invalid={Boolean(errors?.additionalEmails?.message)}\n\t\t\t\t\t\t\t\t\t\t\terror={errors?.additionalEmails?.message}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t{errors?.additionalEmails && (\n\t\t\t\t\t\t\t\t<FieldError aria-live='assertive' id={`${additionalEmailsField}-error`}>\n\t\t\t\t\t\t\t\t\t{errors.additionalEmails.message}\n\t\t\t\t\t\t\t\t</FieldError>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel htmlFor={subjectField}>{t('Subject')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\t\tname='subject'\n\t\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\t\trender={({ field }) => <TextAreaInput rows={3} id={subjectField} {...field} addon={<Icon name='edit' size='x20' />} />}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</form>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button loading={isSubmitting} disabled={!isDirty} form={formId} primary type='submit'>\n\t\t\t\t\t\t{t('Send')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default MailExportForm;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"9f7b4833f2076c2a425c7b3dc53a7d65b55226f0"}
