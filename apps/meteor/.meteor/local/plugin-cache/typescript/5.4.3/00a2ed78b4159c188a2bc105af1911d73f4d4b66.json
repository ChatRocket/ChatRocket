{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/Omnichannel/modals/CloseChatModal.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/components/Omnichannel/modals/CloseChatModal.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/Omnichannel/modals/CloseChatModal.tsx","inputSourceMap":{"version":3,"file":"client/components/Omnichannel/modals/CloseChatModal.tsx","sourceRoot":"","sources":["client/components/Omnichannel/modals/CloseChatModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { ILivechatDepartment, Serialized } from '@rocket.chat/core-typings';\nimport {\n\tField,\n\tFieldGroup,\n\tButton,\n\tTextInput,\n\tModal,\n\tBox,\n\tCheckBox,\n\tDivider,\n\tEmailInput,\n\tFieldLabel,\n\tFieldRow,\n\tFieldError,\n} from '@rocket.chat/fuselage';\nimport { usePermission, useSetting, useTranslation, useUserPreference } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useState, useEffect, useMemo } from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport { useHasLicenseModule } from '../../../hooks/useHasLicenseModule';\nimport { dispatchToastMessage } from '../../../lib/toast';\nimport GenericModal from '../../GenericModal';\nimport Tags from '../Tags';\n\nconst CloseChatModal = ({\n\tdepartment,\n\tvisitorEmail,\n\tonCancel,\n\tonConfirm,\n}: {\n\tdepartment?: Serialized<ILivechatDepartment | null>;\n\tvisitorEmail?: string;\n\tonCancel: () => void;\n\tonConfirm: (\n\t\tcomment?: string,\n\t\ttags?: string[],\n\t\tpreferences?: { omnichannelTranscriptPDF: boolean; omnichannelTranscriptEmail: boolean },\n\t\trequestData?: { email: string; subject: string },\n\t) => Promise<void>;\n}): ReactElement => {\n\tconst t = useTranslation();\n\n\tconst {\n\t\tformState: { errors },\n\t\thandleSubmit,\n\t\tregister,\n\t\tsetError,\n\t\tsetFocus,\n\t\tsetValue,\n\t\twatch,\n\t} = useForm();\n\n\tconst commentRequired = useSetting('Livechat_request_comment_when_closing_conversation') as boolean;\n\tconst alwaysSendTranscript = useSetting<boolean>('Livechat_transcript_send_always');\n\tconst customSubject = useSetting<string>('Livechat_transcript_email_subject');\n\tconst [tagRequired, setTagRequired] = useState(false);\n\n\tconst tags = watch('tags');\n\tconst comment = watch('comment');\n\tconst transcriptEmail = watch('transcriptEmail');\n\tconst subject = watch('subject');\n\n\tconst userTranscriptEmail = useUserPreference<boolean>('omnichannelTranscriptEmail') ?? false;\n\tconst userTranscriptPDF = useUserPreference<boolean>('omnichannelTranscriptPDF') ?? false;\n\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\n\tconst transcriptPDFPermission = usePermission('request-pdf-transcript');\n\tconst transcriptEmailPermission = usePermission('send-omnichannel-chat-transcript');\n\n\tconst canSendTranscriptEmail = transcriptEmailPermission && visitorEmail && !alwaysSendTranscript;\n\tconst canSendTranscriptPDF = transcriptPDFPermission && hasLicense;\n\tconst canSendTranscript = canSendTranscriptEmail || canSendTranscriptPDF;\n\n\tconst handleTags = (value: string[]): void => {\n\t\tsetValue('tags', value);\n\t};\n\n\tconst onSubmit = useCallback(\n\t\t({ comment, tags, transcriptPDF, transcriptEmail, subject }): void => {\n\t\t\tconst preferences = {\n\t\t\t\tomnichannelTranscriptPDF: !!transcriptPDF,\n\t\t\t\tomnichannelTranscriptEmail: alwaysSendTranscript ? true : !!transcriptEmail,\n\t\t\t};\n\t\t\tconst requestData = transcriptEmail && visitorEmail ? { email: visitorEmail, subject } : undefined;\n\n\t\t\tif (!comment?.trim() && commentRequired) {\n\t\t\t\tsetError('comment', { type: 'custom', message: t('Required_field', { field: t('Comment') }) });\n\t\t\t}\n\n\t\t\tif (transcriptEmail && !subject) {\n\t\t\t\tsetError('subject', { type: 'custom', message: t('Required_field', { field: t('Subject') }) });\n\t\t\t}\n\n\t\t\tif (!tags?.length && tagRequired) {\n\t\t\t\tsetError('tags', { type: 'custom', message: t('error-tags-must-be-assigned-before-closing-chat') });\n\t\t\t}\n\n\t\t\tif (!errors.comment || errors.tags) {\n\t\t\t\tonConfirm(comment, tags, preferences, requestData);\n\t\t\t}\n\t\t},\n\t\t[commentRequired, tagRequired, visitorEmail, errors, setError, t, onConfirm, alwaysSendTranscript],\n\t);\n\n\tconst cannotSubmit = useMemo(() => {\n\t\tconst cannotSendTag = (tagRequired && !tags?.length) || errors.tags;\n\t\tconst cannotSendComment = (commentRequired && !comment?.trim()) || errors.comment;\n\t\tconst cannotSendTranscriptEmail = transcriptEmail && (!visitorEmail || !subject);\n\n\t\treturn Boolean(cannotSendTag || cannotSendComment || cannotSendTranscriptEmail);\n\t}, [comment, commentRequired, errors, tagRequired, tags, transcriptEmail, visitorEmail, subject]);\n\n\tuseEffect(() => {\n\t\tif (department?.requestTagBeforeClosingChat) {\n\t\t\tsetTagRequired(true);\n\t\t}\n\t}, [department]);\n\n\tuseEffect(() => {\n\t\tif (commentRequired) {\n\t\t\tsetFocus('comment');\n\t\t}\n\t}, [commentRequired, setFocus]);\n\n\tuseEffect(() => {\n\t\tif (tagRequired) {\n\t\t\tregister('tags');\n\t\t}\n\t}, [register, tagRequired]);\n\n\tuseEffect(() => {\n\t\tif (transcriptEmail) {\n\t\t\tif (!visitorEmail) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Customer_without_registered_email') });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetValue('subject', subject || customSubject || t('Transcript_of_your_livechat_conversation'));\n\t\t}\n\t}, [transcriptEmail, setValue, visitorEmail, subject, t, customSubject]);\n\n\tif (commentRequired || tagRequired || canSendTranscript) {\n\t\treturn (\n\t\t\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(onSubmit)} {...props} data-qa-id='close-chat-modal' />}>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Icon name='baloon-close-top-right' />\n\t\t\t\t\t<Modal.Title>{t('Wrap_up_conversation')}</Modal.Title>\n\t\t\t\t\t<Modal.Close onClick={onCancel} />\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t\t<Box color='annotation'>{t('Close_room_description')}</Box>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel required={commentRequired}>{t('Comment')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t{...register('comment')}\n\t\t\t\t\t\t\t\t\terror={errors.comment && t('Required_field', { field: t('Comment') })}\n\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\tplaceholder={t('Please_add_a_comment')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t<FieldError>{errors.comment?.message}</FieldError>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Tags tagRequired={tagRequired} tags={tags} handler={handleTags} {...(department && { department: department._id })} />\n\t\t\t\t\t\t\t<FieldError>{errors.tags?.message}</FieldError>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{canSendTranscript && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t\t\t<FieldLabel marginBlockStart={8}>{t('Chat_transcript')}</FieldLabel>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t{canSendTranscriptPDF && (\n\t\t\t\t\t\t\t\t\t<Field marginBlockStart={10}>\n\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor='transcript-pdf'>{t('Omnichannel_transcript_pdf')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t<CheckBox id='transcript-pdf' {...register('transcriptPDF', { value: userTranscriptPDF })} />\n\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{canSendTranscriptEmail && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Field marginBlockStart={10}>\n\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor='transcript-email'>{t('Omnichannel_transcript_email')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox id='transcript-email' {...register('transcriptEmail', { value: userTranscriptEmail })} />\n\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t{transcriptEmail && (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<Field marginBlockStart={14}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldLabel required>{t('Contact_email')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EmailInput value={visitorEmail} required disabled flexGrow={1} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t\t\t<Field marginBlockStart={12}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldLabel required>{t('Subject')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...register('subject', { required: true })}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='active'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terror={errors.subject && t('Required_field', { field: t('Subject') })}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldError>{errors.subject?.message}</FieldError>\n\t\t\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<Field marginBlockStart={16}>\n\t\t\t\t\t\t\t\t\t<FieldLabel color='annotation' fontScale='c1'>\n\t\t\t\t\t\t\t\t\t\t{canSendTranscriptPDF && canSendTranscriptEmail\n\t\t\t\t\t\t\t\t\t\t\t? t('These_options_affect_this_conversation_only_To_set_default_selections_go_to_My_Account_Omnichannel')\n\t\t\t\t\t\t\t\t\t\t\t: t('This_option_affect_this_conversation_only_To_set_default_selection_go_to_My_Account_Omnichannel')}\n\t\t\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</Modal.Content>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t\t<Button type='submit' disabled={cannotSubmit} primary>\n\t\t\t\t\t\t\t{t('Confirm')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Modal.FooterControllers>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n\treturn (\n\t\t<GenericModal\n\t\t\tvariant='warning'\n\t\t\ttitle={t('Are_you_sure_you_want_to_close_this_chat')}\n\t\t\tonConfirm={(): Promise<void> => onConfirm()}\n\t\t\tonCancel={onCancel}\n\t\t\tonClose={onCancel}\n\t\t\tconfirmText={t('Confirm')}\n\t\t/>\n\t);\n};\n\nexport default CloseChatModal;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/Omnichannel/modals/CloseChatModal.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/components/Omnichannel/modals/CloseChatModal.tsx","inputSourceMap":{"version":3,"file":"client/components/Omnichannel/modals/CloseChatModal.tsx","sourceRoot":"","sources":["client/components/Omnichannel/modals/CloseChatModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { ILivechatDepartment, Serialized } from '@rocket.chat/core-typings';\nimport {\n\tField,\n\tFieldGroup,\n\tButton,\n\tTextInput,\n\tModal,\n\tBox,\n\tCheckBox,\n\tDivider,\n\tEmailInput,\n\tFieldLabel,\n\tFieldRow,\n\tFieldError,\n} from '@rocket.chat/fuselage';\nimport { usePermission, useSetting, useTranslation, useUserPreference } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useState, useEffect, useMemo } from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport { useHasLicenseModule } from '../../../hooks/useHasLicenseModule';\nimport { dispatchToastMessage } from '../../../lib/toast';\nimport GenericModal from '../../GenericModal';\nimport Tags from '../Tags';\n\nconst CloseChatModal = ({\n\tdepartment,\n\tvisitorEmail,\n\tonCancel,\n\tonConfirm,\n}: {\n\tdepartment?: Serialized<ILivechatDepartment | null>;\n\tvisitorEmail?: string;\n\tonCancel: () => void;\n\tonConfirm: (\n\t\tcomment?: string,\n\t\ttags?: string[],\n\t\tpreferences?: { omnichannelTranscriptPDF: boolean; omnichannelTranscriptEmail: boolean },\n\t\trequestData?: { email: string; subject: string },\n\t) => Promise<void>;\n}): ReactElement => {\n\tconst t = useTranslation();\n\n\tconst {\n\t\tformState: { errors },\n\t\thandleSubmit,\n\t\tregister,\n\t\tsetError,\n\t\tsetFocus,\n\t\tsetValue,\n\t\twatch,\n\t} = useForm();\n\n\tconst commentRequired = useSetting('Livechat_request_comment_when_closing_conversation') as boolean;\n\tconst alwaysSendTranscript = useSetting<boolean>('Livechat_transcript_send_always');\n\tconst customSubject = useSetting<string>('Livechat_transcript_email_subject');\n\tconst [tagRequired, setTagRequired] = useState(false);\n\n\tconst tags = watch('tags');\n\tconst comment = watch('comment');\n\tconst transcriptEmail = watch('transcriptEmail');\n\tconst subject = watch('subject');\n\n\tconst userTranscriptEmail = useUserPreference<boolean>('omnichannelTranscriptEmail') ?? false;\n\tconst userTranscriptPDF = useUserPreference<boolean>('omnichannelTranscriptPDF') ?? false;\n\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\n\tconst transcriptPDFPermission = usePermission('request-pdf-transcript');\n\tconst transcriptEmailPermission = usePermission('send-omnichannel-chat-transcript');\n\n\tconst canSendTranscriptEmail = transcriptEmailPermission && visitorEmail && !alwaysSendTranscript;\n\tconst canSendTranscriptPDF = transcriptPDFPermission && hasLicense;\n\tconst canSendTranscript = canSendTranscriptEmail || canSendTranscriptPDF;\n\n\tconst handleTags = (value: string[]): void => {\n\t\tsetValue('tags', value);\n\t};\n\n\tconst onSubmit = useCallback(\n\t\t({ comment, tags, transcriptPDF, transcriptEmail, subject }): void => {\n\t\t\tconst preferences = {\n\t\t\t\tomnichannelTranscriptPDF: !!transcriptPDF,\n\t\t\t\tomnichannelTranscriptEmail: alwaysSendTranscript ? true : !!transcriptEmail,\n\t\t\t};\n\t\t\tconst requestData = transcriptEmail && visitorEmail ? { email: visitorEmail, subject } : undefined;\n\n\t\t\tif (!comment?.trim() && commentRequired) {\n\t\t\t\tsetError('comment', { type: 'custom', message: t('Required_field', { field: t('Comment') }) });\n\t\t\t}\n\n\t\t\tif (transcriptEmail && !subject) {\n\t\t\t\tsetError('subject', { type: 'custom', message: t('Required_field', { field: t('Subject') }) });\n\t\t\t}\n\n\t\t\tif (!tags?.length && tagRequired) {\n\t\t\t\tsetError('tags', { type: 'custom', message: t('error-tags-must-be-assigned-before-closing-chat') });\n\t\t\t}\n\n\t\t\tif (!errors.comment || errors.tags) {\n\t\t\t\tonConfirm(comment, tags, preferences, requestData);\n\t\t\t}\n\t\t},\n\t\t[commentRequired, tagRequired, visitorEmail, errors, setError, t, onConfirm, alwaysSendTranscript],\n\t);\n\n\tconst cannotSubmit = useMemo(() => {\n\t\tconst cannotSendTag = (tagRequired && !tags?.length) || errors.tags;\n\t\tconst cannotSendComment = (commentRequired && !comment?.trim()) || errors.comment;\n\t\tconst cannotSendTranscriptEmail = transcriptEmail && (!visitorEmail || !subject);\n\n\t\treturn Boolean(cannotSendTag || cannotSendComment || cannotSendTranscriptEmail);\n\t}, [comment, commentRequired, errors, tagRequired, tags, transcriptEmail, visitorEmail, subject]);\n\n\tuseEffect(() => {\n\t\tif (department?.requestTagBeforeClosingChat) {\n\t\t\tsetTagRequired(true);\n\t\t}\n\t}, [department]);\n\n\tuseEffect(() => {\n\t\tif (commentRequired) {\n\t\t\tsetFocus('comment');\n\t\t}\n\t}, [commentRequired, setFocus]);\n\n\tuseEffect(() => {\n\t\tif (tagRequired) {\n\t\t\tregister('tags');\n\t\t}\n\t}, [register, tagRequired]);\n\n\tuseEffect(() => {\n\t\tif (transcriptEmail) {\n\t\t\tif (!visitorEmail) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Customer_without_registered_email') });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetValue('subject', subject || customSubject || t('Transcript_of_your_livechat_conversation'));\n\t\t}\n\t}, [transcriptEmail, setValue, visitorEmail, subject, t, customSubject]);\n\n\tif (commentRequired || tagRequired || canSendTranscript) {\n\t\treturn (\n\t\t\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(onSubmit)} {...props} data-qa-id='close-chat-modal' />}>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Icon name='baloon-close-top-right' />\n\t\t\t\t\t<Modal.Title>{t('Wrap_up_conversation')}</Modal.Title>\n\t\t\t\t\t<Modal.Close onClick={onCancel} />\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t\t<Box color='annotation'>{t('Close_room_description')}</Box>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel required={commentRequired}>{t('Comment')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t{...register('comment')}\n\t\t\t\t\t\t\t\t\terror={errors.comment && t('Required_field', { field: t('Comment') })}\n\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\tplaceholder={t('Please_add_a_comment')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t<FieldError>{errors.comment?.message}</FieldError>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Tags tagRequired={tagRequired} tags={tags} handler={handleTags} {...(department && { department: department._id })} />\n\t\t\t\t\t\t\t<FieldError>{errors.tags?.message}</FieldError>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{canSendTranscript && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t\t\t<FieldLabel marginBlockStart={8}>{t('Chat_transcript')}</FieldLabel>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t{canSendTranscriptPDF && (\n\t\t\t\t\t\t\t\t\t<Field marginBlockStart={10}>\n\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor='transcript-pdf'>{t('Omnichannel_transcript_pdf')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t<CheckBox id='transcript-pdf' {...register('transcriptPDF', { value: userTranscriptPDF })} />\n\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{canSendTranscriptEmail && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Field marginBlockStart={10}>\n\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor='transcript-email'>{t('Omnichannel_transcript_email')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox id='transcript-email' {...register('transcriptEmail', { value: userTranscriptEmail })} />\n\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t{transcriptEmail && (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<Field marginBlockStart={14}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldLabel required>{t('Contact_email')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EmailInput value={visitorEmail} required disabled flexGrow={1} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t\t\t<Field marginBlockStart={12}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldLabel required>{t('Subject')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...register('subject', { required: true })}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='active'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terror={errors.subject && t('Required_field', { field: t('Subject') })}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldError>{errors.subject?.message}</FieldError>\n\t\t\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<Field marginBlockStart={16}>\n\t\t\t\t\t\t\t\t\t<FieldLabel color='annotation' fontScale='c1'>\n\t\t\t\t\t\t\t\t\t\t{canSendTranscriptPDF && canSendTranscriptEmail\n\t\t\t\t\t\t\t\t\t\t\t? t('These_options_affect_this_conversation_only_To_set_default_selections_go_to_My_Account_Omnichannel')\n\t\t\t\t\t\t\t\t\t\t\t: t('This_option_affect_this_conversation_only_To_set_default_selection_go_to_My_Account_Omnichannel')}\n\t\t\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</Modal.Content>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t\t<Button type='submit' disabled={cannotSubmit} primary>\n\t\t\t\t\t\t\t{t('Confirm')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Modal.FooterControllers>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n\treturn (\n\t\t<GenericModal\n\t\t\tvariant='warning'\n\t\t\ttitle={t('Are_you_sure_you_want_to_close_this_chat')}\n\t\t\tonConfirm={(): Promise<void> => onConfirm()}\n\t\t\tonCancel={onCancel}\n\t\t\tonClose={onCancel}\n\t\t\tconfirmText={t('Confirm')}\n\t\t/>\n\t);\n};\n\nexport default CloseChatModal;\n"]}}},"code":"let _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet Field, FieldGroup, Button, TextInput, Modal, Box, CheckBox, Divider, EmailInput, FieldLabel, FieldRow, FieldError;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Field(v) {\n    Field = v;\n  },\n  FieldGroup(v) {\n    FieldGroup = v;\n  },\n  Button(v) {\n    Button = v;\n  },\n  TextInput(v) {\n    TextInput = v;\n  },\n  Modal(v) {\n    Modal = v;\n  },\n  Box(v) {\n    Box = v;\n  },\n  CheckBox(v) {\n    CheckBox = v;\n  },\n  Divider(v) {\n    Divider = v;\n  },\n  EmailInput(v) {\n    EmailInput = v;\n  },\n  FieldLabel(v) {\n    FieldLabel = v;\n  },\n  FieldRow(v) {\n    FieldRow = v;\n  },\n  FieldError(v) {\n    FieldError = v;\n  }\n}, 0);\nlet usePermission, useSetting, useTranslation, useUserPreference;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  usePermission(v) {\n    usePermission = v;\n  },\n  useSetting(v) {\n    useSetting = v;\n  },\n  useTranslation(v) {\n    useTranslation = v;\n  },\n  useUserPreference(v) {\n    useUserPreference = v;\n  }\n}, 1);\nlet React, useCallback, useState, useEffect, useMemo;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  },\n  useState(v) {\n    useState = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  }\n}, 2);\nlet useForm;\nmodule.link(\"react-hook-form\", {\n  useForm(v) {\n    useForm = v;\n  }\n}, 3);\nlet useHasLicenseModule;\nmodule.link(\"../../../hooks/useHasLicenseModule\", {\n  useHasLicenseModule(v) {\n    useHasLicenseModule = v;\n  }\n}, 4);\nlet dispatchToastMessage;\nmodule.link(\"../../../lib/toast\", {\n  dispatchToastMessage(v) {\n    dispatchToastMessage = v;\n  }\n}, 5);\nlet GenericModal;\nmodule.link(\"../../GenericModal\", {\n  default(v) {\n    GenericModal = v;\n  }\n}, 6);\nlet Tags;\nmodule.link(\"../Tags\", {\n  default(v) {\n    Tags = v;\n  }\n}, 7);\nconst CloseChatModal = _ref => {\n  var _useUserPreference, _useUserPreference2;\n  let {\n    department,\n    visitorEmail,\n    onCancel,\n    onConfirm\n  } = _ref;\n  const t = useTranslation();\n  const {\n    formState: {\n      errors\n    },\n    handleSubmit,\n    register,\n    setError,\n    setFocus,\n    setValue,\n    watch\n  } = useForm();\n  const commentRequired = useSetting('Livechat_request_comment_when_closing_conversation');\n  const alwaysSendTranscript = useSetting('Livechat_transcript_send_always');\n  const customSubject = useSetting('Livechat_transcript_email_subject');\n  const [tagRequired, setTagRequired] = useState(false);\n  const tags = watch('tags');\n  const comment = watch('comment');\n  const transcriptEmail = watch('transcriptEmail');\n  const subject = watch('subject');\n  const userTranscriptEmail = (_useUserPreference = useUserPreference('omnichannelTranscriptEmail')) !== null && _useUserPreference !== void 0 ? _useUserPreference : false;\n  const userTranscriptPDF = (_useUserPreference2 = useUserPreference('omnichannelTranscriptPDF')) !== null && _useUserPreference2 !== void 0 ? _useUserPreference2 : false;\n  const hasLicense = useHasLicenseModule('livechat-enterprise');\n  const transcriptPDFPermission = usePermission('request-pdf-transcript');\n  const transcriptEmailPermission = usePermission('send-omnichannel-chat-transcript');\n  const canSendTranscriptEmail = transcriptEmailPermission && visitorEmail && !alwaysSendTranscript;\n  const canSendTranscriptPDF = transcriptPDFPermission && hasLicense;\n  const canSendTranscript = canSendTranscriptEmail || canSendTranscriptPDF;\n  const handleTags = value => {\n    setValue('tags', value);\n  };\n  const onSubmit = useCallback(_ref2 => {\n    let {\n      comment,\n      tags,\n      transcriptPDF,\n      transcriptEmail,\n      subject\n    } = _ref2;\n    const preferences = {\n      omnichannelTranscriptPDF: !!transcriptPDF,\n      omnichannelTranscriptEmail: alwaysSendTranscript ? true : !!transcriptEmail\n    };\n    const requestData = transcriptEmail && visitorEmail ? {\n      email: visitorEmail,\n      subject\n    } : undefined;\n    if (!(comment !== null && comment !== void 0 && comment.trim()) && commentRequired) {\n      setError('comment', {\n        type: 'custom',\n        message: t('Required_field', {\n          field: t('Comment')\n        })\n      });\n    }\n    if (transcriptEmail && !subject) {\n      setError('subject', {\n        type: 'custom',\n        message: t('Required_field', {\n          field: t('Subject')\n        })\n      });\n    }\n    if (!(tags !== null && tags !== void 0 && tags.length) && tagRequired) {\n      setError('tags', {\n        type: 'custom',\n        message: t('error-tags-must-be-assigned-before-closing-chat')\n      });\n    }\n    if (!errors.comment || errors.tags) {\n      onConfirm(comment, tags, preferences, requestData);\n    }\n  }, [commentRequired, tagRequired, visitorEmail, errors, setError, t, onConfirm, alwaysSendTranscript]);\n  const cannotSubmit = useMemo(() => {\n    const cannotSendTag = tagRequired && !(tags !== null && tags !== void 0 && tags.length) || errors.tags;\n    const cannotSendComment = commentRequired && !(comment !== null && comment !== void 0 && comment.trim()) || errors.comment;\n    const cannotSendTranscriptEmail = transcriptEmail && (!visitorEmail || !subject);\n    return Boolean(cannotSendTag || cannotSendComment || cannotSendTranscriptEmail);\n  }, [comment, commentRequired, errors, tagRequired, tags, transcriptEmail, visitorEmail, subject]);\n  useEffect(() => {\n    if (department !== null && department !== void 0 && department.requestTagBeforeClosingChat) {\n      setTagRequired(true);\n    }\n  }, [department]);\n  useEffect(() => {\n    if (commentRequired) {\n      setFocus('comment');\n    }\n  }, [commentRequired, setFocus]);\n  useEffect(() => {\n    if (tagRequired) {\n      register('tags');\n    }\n  }, [register, tagRequired]);\n  useEffect(() => {\n    if (transcriptEmail) {\n      if (!visitorEmail) {\n        dispatchToastMessage({\n          type: 'error',\n          message: t('Customer_without_registered_email')\n        });\n        return;\n      }\n      setValue('subject', subject || customSubject || t('Transcript_of_your_livechat_conversation'));\n    }\n  }, [transcriptEmail, setValue, visitorEmail, subject, t, customSubject]);\n  if (commentRequired || tagRequired || canSendTranscript) {\n    var _errors$comment, _errors$tags, _errors$subject;\n    return /*#__PURE__*/React.createElement(Modal, {\n      wrapperFunction: props => /*#__PURE__*/React.createElement(Box, _extends({\n        is: \"form\",\n        onSubmit: handleSubmit(onSubmit)\n      }, props, {\n        \"data-qa-id\": \"close-chat-modal\"\n      }))\n    }, /*#__PURE__*/React.createElement(Modal.Header, null, /*#__PURE__*/React.createElement(Modal.Icon, {\n      name: \"baloon-close-top-right\"\n    }), /*#__PURE__*/React.createElement(Modal.Title, null, t('Wrap_up_conversation')), /*#__PURE__*/React.createElement(Modal.Close, {\n      onClick: onCancel\n    })), /*#__PURE__*/React.createElement(Modal.Content, {\n      fontScale: \"p2\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      color: \"annotation\"\n    }, t('Close_room_description')), /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, {\n      required: commentRequired\n    }, t('Comment')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(TextInput, _extends({}, register('comment'), {\n      error: errors.comment && t('Required_field', {\n        field: t('Comment')\n      }),\n      flexGrow: 1,\n      placeholder: t('Please_add_a_comment')\n    }))), /*#__PURE__*/React.createElement(FieldError, null, (_errors$comment = errors.comment) === null || _errors$comment === void 0 ? void 0 : _errors$comment.message)), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Tags, _extends({\n      tagRequired: tagRequired,\n      tags: tags,\n      handler: handleTags\n    }, department && {\n      department: department._id\n    })), /*#__PURE__*/React.createElement(FieldError, null, (_errors$tags = errors.tags) === null || _errors$tags === void 0 ? void 0 : _errors$tags.message)), canSendTranscript && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(FieldLabel, {\n      marginBlockStart: 8\n    }, t('Chat_transcript'))), canSendTranscriptPDF && /*#__PURE__*/React.createElement(Field, {\n      marginBlockStart: 10\n    }, /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(FieldLabel, {\n      htmlFor: \"transcript-pdf\"\n    }, t('Omnichannel_transcript_pdf')), /*#__PURE__*/React.createElement(CheckBox, _extends({\n      id: \"transcript-pdf\"\n    }, register('transcriptPDF', {\n      value: userTranscriptPDF\n    }))))), canSendTranscriptEmail && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Field, {\n      marginBlockStart: 10\n    }, /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(FieldLabel, {\n      htmlFor: \"transcript-email\"\n    }, t('Omnichannel_transcript_email')), /*#__PURE__*/React.createElement(CheckBox, _extends({\n      id: \"transcript-email\"\n    }, register('transcriptEmail', {\n      value: userTranscriptEmail\n    }))))), transcriptEmail && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Field, {\n      marginBlockStart: 14\n    }, /*#__PURE__*/React.createElement(FieldLabel, {\n      required: true\n    }, t('Contact_email')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(EmailInput, {\n      value: visitorEmail,\n      required: true,\n      disabled: true,\n      flexGrow: 1\n    }))), /*#__PURE__*/React.createElement(Field, {\n      marginBlockStart: 12\n    }, /*#__PURE__*/React.createElement(FieldLabel, {\n      required: true\n    }, t('Subject')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(TextInput, _extends({}, register('subject', {\n      required: true\n    }), {\n      className: \"active\",\n      error: errors.subject && t('Required_field', {\n        field: t('Subject')\n      }),\n      flexGrow: 1\n    }))), /*#__PURE__*/React.createElement(FieldError, null, (_errors$subject = errors.subject) === null || _errors$subject === void 0 ? void 0 : _errors$subject.message)))), /*#__PURE__*/React.createElement(Field, {\n      marginBlockStart: 16\n    }, /*#__PURE__*/React.createElement(FieldLabel, {\n      color: \"annotation\",\n      fontScale: \"c1\"\n    }, canSendTranscriptPDF && canSendTranscriptEmail ? t('These_options_affect_this_conversation_only_To_set_default_selections_go_to_My_Account_Omnichannel') : t('This_option_affect_this_conversation_only_To_set_default_selection_go_to_My_Account_Omnichannel')))))), /*#__PURE__*/React.createElement(Modal.Footer, null, /*#__PURE__*/React.createElement(Modal.FooterControllers, null, /*#__PURE__*/React.createElement(Button, {\n      onClick: onCancel\n    }, t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      disabled: cannotSubmit,\n      primary: true\n    }, t('Confirm')))));\n  }\n  return /*#__PURE__*/React.createElement(GenericModal, {\n    variant: \"warning\",\n    title: t('Are_you_sure_you_want_to_close_this_chat'),\n    onConfirm: () => onConfirm(),\n    onCancel: onCancel,\n    onClose: onCancel,\n    confirmText: t('Confirm')\n  });\n};\nmodule.exportDefault(CloseChatModal);","map":{"version":3,"names":["_extends","module","link","default","v","Field","FieldGroup","Button","TextInput","Modal","Box","CheckBox","Divider","EmailInput","FieldLabel","FieldRow","FieldError","usePermission","useSetting","useTranslation","useUserPreference","React","useCallback","useState","useEffect","useMemo","useForm","useHasLicenseModule","dispatchToastMessage","GenericModal","Tags","CloseChatModal","_ref","_useUserPreference","_useUserPreference2","department","visitorEmail","onCancel","onConfirm","t","formState","errors","handleSubmit","register","setError","setFocus","setValue","watch","commentRequired","alwaysSendTranscript","customSubject","tagRequired","setTagRequired","tags","comment","transcriptEmail","subject","userTranscriptEmail","userTranscriptPDF","hasLicense","transcriptPDFPermission","transcriptEmailPermission","canSendTranscriptEmail","canSendTranscriptPDF","canSendTranscript","handleTags","value","onSubmit","_ref2","transcriptPDF","preferences","omnichannelTranscriptPDF","omnichannelTranscriptEmail","requestData","email","undefined","trim","type","message","field","length","cannotSubmit","cannotSendTag","cannotSendComment","cannotSendTranscriptEmail","Boolean","requestTagBeforeClosingChat","_errors$comment","_errors$tags","_errors$subject","createElement","wrapperFunction","props","is","Header","Icon","name","Title","Close","onClick","Content","fontScale","color","required","error","flexGrow","placeholder","handler","_id","Fragment","marginBlockStart","htmlFor","id","disabled","className","Footer","FooterControllers","primary","variant","title","onClose","confirmText","exportDefault"],"sources":["client/components/Omnichannel/modals/CloseChatModal.tsx"],"sourcesContent":["import type { ILivechatDepartment, Serialized } from '@rocket.chat/core-typings';\nimport {\n\tField,\n\tFieldGroup,\n\tButton,\n\tTextInput,\n\tModal,\n\tBox,\n\tCheckBox,\n\tDivider,\n\tEmailInput,\n\tFieldLabel,\n\tFieldRow,\n\tFieldError,\n} from '@rocket.chat/fuselage';\nimport { usePermission, useSetting, useTranslation, useUserPreference } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { useCallback, useState, useEffect, useMemo } from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport { useHasLicenseModule } from '../../../hooks/useHasLicenseModule';\nimport { dispatchToastMessage } from '../../../lib/toast';\nimport GenericModal from '../../GenericModal';\nimport Tags from '../Tags';\n\nconst CloseChatModal = ({\n\tdepartment,\n\tvisitorEmail,\n\tonCancel,\n\tonConfirm,\n}: {\n\tdepartment?: Serialized<ILivechatDepartment | null>;\n\tvisitorEmail?: string;\n\tonCancel: () => void;\n\tonConfirm: (\n\t\tcomment?: string,\n\t\ttags?: string[],\n\t\tpreferences?: { omnichannelTranscriptPDF: boolean; omnichannelTranscriptEmail: boolean },\n\t\trequestData?: { email: string; subject: string },\n\t) => Promise<void>;\n}): ReactElement => {\n\tconst t = useTranslation();\n\n\tconst {\n\t\tformState: { errors },\n\t\thandleSubmit,\n\t\tregister,\n\t\tsetError,\n\t\tsetFocus,\n\t\tsetValue,\n\t\twatch,\n\t} = useForm();\n\n\tconst commentRequired = useSetting('Livechat_request_comment_when_closing_conversation') as boolean;\n\tconst alwaysSendTranscript = useSetting<boolean>('Livechat_transcript_send_always');\n\tconst customSubject = useSetting<string>('Livechat_transcript_email_subject');\n\tconst [tagRequired, setTagRequired] = useState(false);\n\n\tconst tags = watch('tags');\n\tconst comment = watch('comment');\n\tconst transcriptEmail = watch('transcriptEmail');\n\tconst subject = watch('subject');\n\n\tconst userTranscriptEmail = useUserPreference<boolean>('omnichannelTranscriptEmail') ?? false;\n\tconst userTranscriptPDF = useUserPreference<boolean>('omnichannelTranscriptPDF') ?? false;\n\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\n\tconst transcriptPDFPermission = usePermission('request-pdf-transcript');\n\tconst transcriptEmailPermission = usePermission('send-omnichannel-chat-transcript');\n\n\tconst canSendTranscriptEmail = transcriptEmailPermission && visitorEmail && !alwaysSendTranscript;\n\tconst canSendTranscriptPDF = transcriptPDFPermission && hasLicense;\n\tconst canSendTranscript = canSendTranscriptEmail || canSendTranscriptPDF;\n\n\tconst handleTags = (value: string[]): void => {\n\t\tsetValue('tags', value);\n\t};\n\n\tconst onSubmit = useCallback(\n\t\t({ comment, tags, transcriptPDF, transcriptEmail, subject }): void => {\n\t\t\tconst preferences = {\n\t\t\t\tomnichannelTranscriptPDF: !!transcriptPDF,\n\t\t\t\tomnichannelTranscriptEmail: alwaysSendTranscript ? true : !!transcriptEmail,\n\t\t\t};\n\t\t\tconst requestData = transcriptEmail && visitorEmail ? { email: visitorEmail, subject } : undefined;\n\n\t\t\tif (!comment?.trim() && commentRequired) {\n\t\t\t\tsetError('comment', { type: 'custom', message: t('Required_field', { field: t('Comment') }) });\n\t\t\t}\n\n\t\t\tif (transcriptEmail && !subject) {\n\t\t\t\tsetError('subject', { type: 'custom', message: t('Required_field', { field: t('Subject') }) });\n\t\t\t}\n\n\t\t\tif (!tags?.length && tagRequired) {\n\t\t\t\tsetError('tags', { type: 'custom', message: t('error-tags-must-be-assigned-before-closing-chat') });\n\t\t\t}\n\n\t\t\tif (!errors.comment || errors.tags) {\n\t\t\t\tonConfirm(comment, tags, preferences, requestData);\n\t\t\t}\n\t\t},\n\t\t[commentRequired, tagRequired, visitorEmail, errors, setError, t, onConfirm, alwaysSendTranscript],\n\t);\n\n\tconst cannotSubmit = useMemo(() => {\n\t\tconst cannotSendTag = (tagRequired && !tags?.length) || errors.tags;\n\t\tconst cannotSendComment = (commentRequired && !comment?.trim()) || errors.comment;\n\t\tconst cannotSendTranscriptEmail = transcriptEmail && (!visitorEmail || !subject);\n\n\t\treturn Boolean(cannotSendTag || cannotSendComment || cannotSendTranscriptEmail);\n\t}, [comment, commentRequired, errors, tagRequired, tags, transcriptEmail, visitorEmail, subject]);\n\n\tuseEffect(() => {\n\t\tif (department?.requestTagBeforeClosingChat) {\n\t\t\tsetTagRequired(true);\n\t\t}\n\t}, [department]);\n\n\tuseEffect(() => {\n\t\tif (commentRequired) {\n\t\t\tsetFocus('comment');\n\t\t}\n\t}, [commentRequired, setFocus]);\n\n\tuseEffect(() => {\n\t\tif (tagRequired) {\n\t\t\tregister('tags');\n\t\t}\n\t}, [register, tagRequired]);\n\n\tuseEffect(() => {\n\t\tif (transcriptEmail) {\n\t\t\tif (!visitorEmail) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Customer_without_registered_email') });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetValue('subject', subject || customSubject || t('Transcript_of_your_livechat_conversation'));\n\t\t}\n\t}, [transcriptEmail, setValue, visitorEmail, subject, t, customSubject]);\n\n\tif (commentRequired || tagRequired || canSendTranscript) {\n\t\treturn (\n\t\t\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(onSubmit)} {...props} data-qa-id='close-chat-modal' />}>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Icon name='baloon-close-top-right' />\n\t\t\t\t\t<Modal.Title>{t('Wrap_up_conversation')}</Modal.Title>\n\t\t\t\t\t<Modal.Close onClick={onCancel} />\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t\t<Box color='annotation'>{t('Close_room_description')}</Box>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<FieldLabel required={commentRequired}>{t('Comment')}</FieldLabel>\n\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t{...register('comment')}\n\t\t\t\t\t\t\t\t\terror={errors.comment && t('Required_field', { field: t('Comment') })}\n\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\tplaceholder={t('Please_add_a_comment')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t<FieldError>{errors.comment?.message}</FieldError>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Tags tagRequired={tagRequired} tags={tags} handler={handleTags} {...(department && { department: department._id })} />\n\t\t\t\t\t\t\t<FieldError>{errors.tags?.message}</FieldError>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t{canSendTranscript && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t\t\t<FieldLabel marginBlockStart={8}>{t('Chat_transcript')}</FieldLabel>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t{canSendTranscriptPDF && (\n\t\t\t\t\t\t\t\t\t<Field marginBlockStart={10}>\n\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor='transcript-pdf'>{t('Omnichannel_transcript_pdf')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t<CheckBox id='transcript-pdf' {...register('transcriptPDF', { value: userTranscriptPDF })} />\n\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{canSendTranscriptEmail && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Field marginBlockStart={10}>\n\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t<FieldLabel htmlFor='transcript-email'>{t('Omnichannel_transcript_email')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t<CheckBox id='transcript-email' {...register('transcriptEmail', { value: userTranscriptEmail })} />\n\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t{transcriptEmail && (\n\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t<Field marginBlockStart={14}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldLabel required>{t('Contact_email')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EmailInput value={visitorEmail} required disabled flexGrow={1} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t\t\t<Field marginBlockStart={12}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldLabel required>{t('Subject')}</FieldLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...register('subject', { required: true })}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='active'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terror={errors.subject && t('Required_field', { field: t('Subject') })}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FieldError>{errors.subject?.message}</FieldError>\n\t\t\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<Field marginBlockStart={16}>\n\t\t\t\t\t\t\t\t\t<FieldLabel color='annotation' fontScale='c1'>\n\t\t\t\t\t\t\t\t\t\t{canSendTranscriptPDF && canSendTranscriptEmail\n\t\t\t\t\t\t\t\t\t\t\t? t('These_options_affect_this_conversation_only_To_set_default_selections_go_to_My_Account_Omnichannel')\n\t\t\t\t\t\t\t\t\t\t\t: t('This_option_affect_this_conversation_only_To_set_default_selection_go_to_My_Account_Omnichannel')}\n\t\t\t\t\t\t\t\t\t</FieldLabel>\n\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</Modal.Content>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t\t<Button type='submit' disabled={cannotSubmit} primary>\n\t\t\t\t\t\t\t{t('Confirm')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Modal.FooterControllers>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n\treturn (\n\t\t<GenericModal\n\t\t\tvariant='warning'\n\t\t\ttitle={t('Are_you_sure_you_want_to_close_this_chat')}\n\t\t\tonConfirm={(): Promise<void> => onConfirm()}\n\t\t\tonCancel={onCancel}\n\t\t\tonClose={onCancel}\n\t\t\tconfirmText={t('Confirm')}\n\t\t/>\n\t);\n};\n\nexport default CloseChatModal;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"00a2ed78b4159c188a2bc105af1911d73f4d4b66"}
