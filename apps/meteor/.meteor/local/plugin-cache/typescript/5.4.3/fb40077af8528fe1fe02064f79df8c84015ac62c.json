{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx","inputSourceMap":{"version":3,"file":"client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx","sourceRoot":"","sources":["client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Button, PositionAnimated, Tile } from '@rocket.chat/fuselage';\nimport {\n\tMessageComposerAction,\n\tMessageComposerToolbarActions,\n\tMessageComposer,\n\tMessageComposerInput,\n\tMessageComposerToolbar,\n\tMessageComposerActionsDivider,\n} from '@rocket.chat/ui-composer';\nimport { useUserPreference, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps } from 'react';\nimport React, { memo, useCallback, useRef, useState } from 'react';\n\nimport { Backdrop } from '../../../../components/Backdrop';\nimport { useEmojiPicker } from '../../../../contexts/EmojiPickerContext';\nimport InsertPlaceholderDropdown from './InsertPlaceholderDropdown';\n\nconst CannedResponsesComposer = ({ onChange, ...props }: ComponentProps<typeof MessageComposerInput>) => {\n\tconst t = useTranslation();\n\tconst useEmojisPreference = useUserPreference('useEmojis');\n\n\tconst textAreaRef = useRef<HTMLTextAreaElement>(null);\n\tconst ref = useRef<HTMLButtonElement>(null);\n\n\tconst [visible, setVisible] = useState(false);\n\n\tconst { open: openEmojiPicker } = useEmojiPicker();\n\n\tconst useMarkdownSyntax = (char: '*' | '_' | '~' | '[]()'): (() => void) =>\n\t\tuseCallback(() => {\n\t\t\tif (textAreaRef?.current) {\n\t\t\t\tconst text = textAreaRef.current.value;\n\t\t\t\tconst startPos = textAreaRef.current.selectionStart;\n\t\t\t\tconst endPos = textAreaRef.current.selectionEnd;\n\n\t\t\t\tif (char === '[]()') {\n\t\t\t\t\tif (startPos !== endPos) {\n\t\t\t\t\t\ttextAreaRef.current.value = `${text.slice(0, startPos)}[${text.slice(startPos, endPos)}]()${text.slice(endPos)}`;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttextAreaRef.current.value = `${text.slice(0, startPos)}${char}${text.slice(startPos, endPos)}${char}${text.slice(endPos)}`;\n\t\t\t\t}\n\t\t\t\ttextAreaRef.current.focus();\n\n\t\t\t\tif (char === '[]()') {\n\t\t\t\t\tif (startPos === endPos) {\n\t\t\t\t\t\ttextAreaRef.current.setSelectionRange(startPos, endPos);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttextAreaRef.current.setSelectionRange(endPos + 3, endPos + 3);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttextAreaRef.current.setSelectionRange(startPos + 1, endPos + 1);\n\t\t\t\t}\n\n\t\t\t\tonChange?.(textAreaRef.current.value as any);\n\t\t\t}\n\t\t}, [char]);\n\n\tconst onClickEmoji = (emoji: string): void => {\n\t\tif (textAreaRef?.current) {\n\t\t\tconst text = textAreaRef.current.value;\n\t\t\tconst startPos = textAreaRef.current.selectionStart;\n\t\t\tconst emojiValue = `:${emoji}: `;\n\n\t\t\ttextAreaRef.current.value = text.slice(0, startPos) + emojiValue + text.slice(startPos);\n\n\t\t\ttextAreaRef.current.focus();\n\t\t\ttextAreaRef.current.setSelectionRange(startPos + emojiValue.length, startPos + emojiValue.length);\n\n\t\t\tonChange?.(textAreaRef.current.value as any);\n\t\t}\n\t};\n\n\tconst handleOpenEmojiPicker = (): void => {\n\t\tif (!useEmojisPreference) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!textAreaRef?.current) {\n\t\t\tthrow new Error('Missing textAreaRef');\n\t\t}\n\n\t\topenEmojiPicker(textAreaRef.current, (emoji: string) => onClickEmoji(emoji));\n\t};\n\n\tconst openPlaceholderSelect = (): void => {\n\t\ttextAreaRef?.current && textAreaRef.current.focus();\n\t\tsetVisible(!visible);\n\t};\n\n\treturn (\n\t\t<MessageComposer>\n\t\t\t<MessageComposerInput ref={textAreaRef} rows={10} onChange={onChange} {...props} />\n\t\t\t<MessageComposerToolbar>\n\t\t\t\t<MessageComposerToolbarActions aria-label={t('Message_composer_toolbox_primary_actions')}>\n\t\t\t\t\t<MessageComposerAction icon='emoji' disabled={!useEmojisPreference} onClick={handleOpenEmojiPicker} title={t('Emoji')} />\n\t\t\t\t\t<MessageComposerActionsDivider />\n\t\t\t\t\t<MessageComposerAction icon='bold' onClick={useMarkdownSyntax('*')} title={t('Bold')} />\n\t\t\t\t\t<MessageComposerAction icon='italic' onClick={useMarkdownSyntax('_')} title={t('Italic')} />\n\t\t\t\t\t<MessageComposerAction icon='strike' onClick={useMarkdownSyntax('~')} title={t('Strike')} />\n\t\t\t\t\t<MessageComposerAction icon='link' onClick={useMarkdownSyntax('[]()')} title={t('Link')} />\n\t\t\t\t\t<MessageComposerActionsDivider />\n\t\t\t\t\t<Button ref={ref} small onClick={openPlaceholderSelect}>\n\t\t\t\t\t\t{t('Insert_Placeholder')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Backdrop\n\t\t\t\t\t\tdisplay={visible ? 'block' : 'none'}\n\t\t\t\t\t\tonClick={(): void => {\n\t\t\t\t\t\t\ttextAreaRef?.current && textAreaRef.current.focus();\n\t\t\t\t\t\t\tsetVisible(false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<PositionAnimated visible={visible ? 'visible' : 'hidden'} anchor={ref}>\n\t\t\t\t\t\t<Tile elevation='1' w='224px'>\n\t\t\t\t\t\t\t<InsertPlaceholderDropdown onChange={onChange} textAreaRef={textAreaRef} setVisible={setVisible} />\n\t\t\t\t\t\t</Tile>\n\t\t\t\t\t</PositionAnimated>\n\t\t\t\t</MessageComposerToolbarActions>\n\t\t\t</MessageComposerToolbar>\n\t\t</MessageComposer>\n\t);\n};\n\nexport default memo(CannedResponsesComposer);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx","inputSourceMap":{"version":3,"file":"client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx","sourceRoot":"","sources":["client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Button, PositionAnimated, Tile } from '@rocket.chat/fuselage';\nimport {\n\tMessageComposerAction,\n\tMessageComposerToolbarActions,\n\tMessageComposer,\n\tMessageComposerInput,\n\tMessageComposerToolbar,\n\tMessageComposerActionsDivider,\n} from '@rocket.chat/ui-composer';\nimport { useUserPreference, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps } from 'react';\nimport React, { memo, useCallback, useRef, useState } from 'react';\n\nimport { Backdrop } from '../../../../components/Backdrop';\nimport { useEmojiPicker } from '../../../../contexts/EmojiPickerContext';\nimport InsertPlaceholderDropdown from './InsertPlaceholderDropdown';\n\nconst CannedResponsesComposer = ({ onChange, ...props }: ComponentProps<typeof MessageComposerInput>) => {\n\tconst t = useTranslation();\n\tconst useEmojisPreference = useUserPreference('useEmojis');\n\n\tconst textAreaRef = useRef<HTMLTextAreaElement>(null);\n\tconst ref = useRef<HTMLButtonElement>(null);\n\n\tconst [visible, setVisible] = useState(false);\n\n\tconst { open: openEmojiPicker } = useEmojiPicker();\n\n\tconst useMarkdownSyntax = (char: '*' | '_' | '~' | '[]()'): (() => void) =>\n\t\tuseCallback(() => {\n\t\t\tif (textAreaRef?.current) {\n\t\t\t\tconst text = textAreaRef.current.value;\n\t\t\t\tconst startPos = textAreaRef.current.selectionStart;\n\t\t\t\tconst endPos = textAreaRef.current.selectionEnd;\n\n\t\t\t\tif (char === '[]()') {\n\t\t\t\t\tif (startPos !== endPos) {\n\t\t\t\t\t\ttextAreaRef.current.value = `${text.slice(0, startPos)}[${text.slice(startPos, endPos)}]()${text.slice(endPos)}`;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttextAreaRef.current.value = `${text.slice(0, startPos)}${char}${text.slice(startPos, endPos)}${char}${text.slice(endPos)}`;\n\t\t\t\t}\n\t\t\t\ttextAreaRef.current.focus();\n\n\t\t\t\tif (char === '[]()') {\n\t\t\t\t\tif (startPos === endPos) {\n\t\t\t\t\t\ttextAreaRef.current.setSelectionRange(startPos, endPos);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttextAreaRef.current.setSelectionRange(endPos + 3, endPos + 3);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttextAreaRef.current.setSelectionRange(startPos + 1, endPos + 1);\n\t\t\t\t}\n\n\t\t\t\tonChange?.(textAreaRef.current.value as any);\n\t\t\t}\n\t\t}, [char]);\n\n\tconst onClickEmoji = (emoji: string): void => {\n\t\tif (textAreaRef?.current) {\n\t\t\tconst text = textAreaRef.current.value;\n\t\t\tconst startPos = textAreaRef.current.selectionStart;\n\t\t\tconst emojiValue = `:${emoji}: `;\n\n\t\t\ttextAreaRef.current.value = text.slice(0, startPos) + emojiValue + text.slice(startPos);\n\n\t\t\ttextAreaRef.current.focus();\n\t\t\ttextAreaRef.current.setSelectionRange(startPos + emojiValue.length, startPos + emojiValue.length);\n\n\t\t\tonChange?.(textAreaRef.current.value as any);\n\t\t}\n\t};\n\n\tconst handleOpenEmojiPicker = (): void => {\n\t\tif (!useEmojisPreference) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!textAreaRef?.current) {\n\t\t\tthrow new Error('Missing textAreaRef');\n\t\t}\n\n\t\topenEmojiPicker(textAreaRef.current, (emoji: string) => onClickEmoji(emoji));\n\t};\n\n\tconst openPlaceholderSelect = (): void => {\n\t\ttextAreaRef?.current && textAreaRef.current.focus();\n\t\tsetVisible(!visible);\n\t};\n\n\treturn (\n\t\t<MessageComposer>\n\t\t\t<MessageComposerInput ref={textAreaRef} rows={10} onChange={onChange} {...props} />\n\t\t\t<MessageComposerToolbar>\n\t\t\t\t<MessageComposerToolbarActions aria-label={t('Message_composer_toolbox_primary_actions')}>\n\t\t\t\t\t<MessageComposerAction icon='emoji' disabled={!useEmojisPreference} onClick={handleOpenEmojiPicker} title={t('Emoji')} />\n\t\t\t\t\t<MessageComposerActionsDivider />\n\t\t\t\t\t<MessageComposerAction icon='bold' onClick={useMarkdownSyntax('*')} title={t('Bold')} />\n\t\t\t\t\t<MessageComposerAction icon='italic' onClick={useMarkdownSyntax('_')} title={t('Italic')} />\n\t\t\t\t\t<MessageComposerAction icon='strike' onClick={useMarkdownSyntax('~')} title={t('Strike')} />\n\t\t\t\t\t<MessageComposerAction icon='link' onClick={useMarkdownSyntax('[]()')} title={t('Link')} />\n\t\t\t\t\t<MessageComposerActionsDivider />\n\t\t\t\t\t<Button ref={ref} small onClick={openPlaceholderSelect}>\n\t\t\t\t\t\t{t('Insert_Placeholder')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Backdrop\n\t\t\t\t\t\tdisplay={visible ? 'block' : 'none'}\n\t\t\t\t\t\tonClick={(): void => {\n\t\t\t\t\t\t\ttextAreaRef?.current && textAreaRef.current.focus();\n\t\t\t\t\t\t\tsetVisible(false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<PositionAnimated visible={visible ? 'visible' : 'hidden'} anchor={ref}>\n\t\t\t\t\t\t<Tile elevation='1' w='224px'>\n\t\t\t\t\t\t\t<InsertPlaceholderDropdown onChange={onChange} textAreaRef={textAreaRef} setVisible={setVisible} />\n\t\t\t\t\t\t</Tile>\n\t\t\t\t\t</PositionAnimated>\n\t\t\t\t</MessageComposerToolbarActions>\n\t\t\t</MessageComposerToolbar>\n\t\t</MessageComposer>\n\t);\n};\n\nexport default memo(CannedResponsesComposer);\n"]}}},"code":"var _excluded = [\"onChange\"];\nvar _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 0);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\nvar _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 2);\nvar Button, PositionAnimated, Tile;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Button: function (v) {\n    Button = v;\n  },\n  PositionAnimated: function (v) {\n    PositionAnimated = v;\n  },\n  Tile: function (v) {\n    Tile = v;\n  }\n}, 0);\nvar MessageComposerAction, MessageComposerToolbarActions, MessageComposer, MessageComposerInput, MessageComposerToolbar, MessageComposerActionsDivider;\nmodule.link(\"@rocket.chat/ui-composer\", {\n  MessageComposerAction: function (v) {\n    MessageComposerAction = v;\n  },\n  MessageComposerToolbarActions: function (v) {\n    MessageComposerToolbarActions = v;\n  },\n  MessageComposer: function (v) {\n    MessageComposer = v;\n  },\n  MessageComposerInput: function (v) {\n    MessageComposerInput = v;\n  },\n  MessageComposerToolbar: function (v) {\n    MessageComposerToolbar = v;\n  },\n  MessageComposerActionsDivider: function (v) {\n    MessageComposerActionsDivider = v;\n  }\n}, 1);\nvar useUserPreference, useTranslation;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useUserPreference: function (v) {\n    useUserPreference = v;\n  },\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 2);\nvar React, memo, useCallback, useRef, useState;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  memo: function (v) {\n    memo = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  },\n  useRef: function (v) {\n    useRef = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 3);\nvar Backdrop;\nmodule.link(\"../../../../components/Backdrop\", {\n  Backdrop: function (v) {\n    Backdrop = v;\n  }\n}, 4);\nvar useEmojiPicker;\nmodule.link(\"../../../../contexts/EmojiPickerContext\", {\n  useEmojiPicker: function (v) {\n    useEmojiPicker = v;\n  }\n}, 5);\nvar InsertPlaceholderDropdown;\nmodule.link(\"./InsertPlaceholderDropdown\", {\n  \"default\": function (v) {\n    InsertPlaceholderDropdown = v;\n  }\n}, 6);\nvar CannedResponsesComposer = function (_ref) {\n  var onChange = _ref.onChange,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var t = useTranslation();\n  var useEmojisPreference = useUserPreference('useEmojis');\n  var textAreaRef = useRef(null);\n  var ref = useRef(null);\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    visible = _useState2[0],\n    setVisible = _useState2[1];\n  var _useEmojiPicker = useEmojiPicker(),\n    openEmojiPicker = _useEmojiPicker.open;\n  var useMarkdownSyntax = function (char) {\n    return useCallback(function () {\n      if (textAreaRef !== null && textAreaRef !== void 0 && textAreaRef.current) {\n        var text = textAreaRef.current.value;\n        var startPos = textAreaRef.current.selectionStart;\n        var endPos = textAreaRef.current.selectionEnd;\n        if (char === '[]()') {\n          if (startPos !== endPos) {\n            textAreaRef.current.value = text.slice(0, startPos) + \"[\" + text.slice(startPos, endPos) + \"]()\" + text.slice(endPos);\n          }\n        } else {\n          textAreaRef.current.value = \"\" + text.slice(0, startPos) + char + text.slice(startPos, endPos) + char + text.slice(endPos);\n        }\n        textAreaRef.current.focus();\n        if (char === '[]()') {\n          if (startPos === endPos) {\n            textAreaRef.current.setSelectionRange(startPos, endPos);\n          } else {\n            textAreaRef.current.setSelectionRange(endPos + 3, endPos + 3);\n          }\n        } else {\n          textAreaRef.current.setSelectionRange(startPos + 1, endPos + 1);\n        }\n        onChange === null || onChange === void 0 ? void 0 : onChange(textAreaRef.current.value);\n      }\n    }, [char]);\n  };\n  var onClickEmoji = function (emoji) {\n    if (textAreaRef !== null && textAreaRef !== void 0 && textAreaRef.current) {\n      var text = textAreaRef.current.value;\n      var startPos = textAreaRef.current.selectionStart;\n      var emojiValue = \":\" + emoji + \": \";\n      textAreaRef.current.value = text.slice(0, startPos) + emojiValue + text.slice(startPos);\n      textAreaRef.current.focus();\n      textAreaRef.current.setSelectionRange(startPos + emojiValue.length, startPos + emojiValue.length);\n      onChange === null || onChange === void 0 ? void 0 : onChange(textAreaRef.current.value);\n    }\n  };\n  var handleOpenEmojiPicker = function () {\n    if (!useEmojisPreference) {\n      return;\n    }\n    if (!(textAreaRef !== null && textAreaRef !== void 0 && textAreaRef.current)) {\n      throw new Error('Missing textAreaRef');\n    }\n    openEmojiPicker(textAreaRef.current, function (emoji) {\n      return onClickEmoji(emoji);\n    });\n  };\n  var openPlaceholderSelect = function () {\n    (textAreaRef === null || textAreaRef === void 0 ? void 0 : textAreaRef.current) && textAreaRef.current.focus();\n    setVisible(!visible);\n  };\n  return /*#__PURE__*/React.createElement(MessageComposer, null, /*#__PURE__*/React.createElement(MessageComposerInput, _extends({\n    ref: textAreaRef,\n    rows: 10,\n    onChange: onChange\n  }, props)), /*#__PURE__*/React.createElement(MessageComposerToolbar, null, /*#__PURE__*/React.createElement(MessageComposerToolbarActions, {\n    \"aria-label\": t('Message_composer_toolbox_primary_actions')\n  }, /*#__PURE__*/React.createElement(MessageComposerAction, {\n    icon: \"emoji\",\n    disabled: !useEmojisPreference,\n    onClick: handleOpenEmojiPicker,\n    title: t('Emoji')\n  }), /*#__PURE__*/React.createElement(MessageComposerActionsDivider, null), /*#__PURE__*/React.createElement(MessageComposerAction, {\n    icon: \"bold\",\n    onClick: useMarkdownSyntax('*'),\n    title: t('Bold')\n  }), /*#__PURE__*/React.createElement(MessageComposerAction, {\n    icon: \"italic\",\n    onClick: useMarkdownSyntax('_'),\n    title: t('Italic')\n  }), /*#__PURE__*/React.createElement(MessageComposerAction, {\n    icon: \"strike\",\n    onClick: useMarkdownSyntax('~'),\n    title: t('Strike')\n  }), /*#__PURE__*/React.createElement(MessageComposerAction, {\n    icon: \"link\",\n    onClick: useMarkdownSyntax('[]()'),\n    title: t('Link')\n  }), /*#__PURE__*/React.createElement(MessageComposerActionsDivider, null), /*#__PURE__*/React.createElement(Button, {\n    ref: ref,\n    small: true,\n    onClick: openPlaceholderSelect\n  }, t('Insert_Placeholder')), /*#__PURE__*/React.createElement(Backdrop, {\n    display: visible ? 'block' : 'none',\n    onClick: function () {\n      (textAreaRef === null || textAreaRef === void 0 ? void 0 : textAreaRef.current) && textAreaRef.current.focus();\n      setVisible(false);\n    }\n  }), /*#__PURE__*/React.createElement(PositionAnimated, {\n    visible: visible ? 'visible' : 'hidden',\n    anchor: ref\n  }, /*#__PURE__*/React.createElement(Tile, {\n    elevation: \"1\",\n    w: \"224px\"\n  }, /*#__PURE__*/React.createElement(InsertPlaceholderDropdown, {\n    onChange: onChange,\n    textAreaRef: textAreaRef,\n    setVisible: setVisible\n  }))))));\n};\nmodule.exportDefault( /*#__PURE__*/memo(CannedResponsesComposer));","map":{"version":3,"names":["_extends","module","link","default","v","_slicedToArray","_objectWithoutProperties","Button","PositionAnimated","Tile","MessageComposerAction","MessageComposerToolbarActions","MessageComposer","MessageComposerInput","MessageComposerToolbar","MessageComposerActionsDivider","useUserPreference","useTranslation","React","memo","useCallback","useRef","useState","Backdrop","useEmojiPicker","InsertPlaceholderDropdown","CannedResponsesComposer","_ref","onChange","props","_excluded","t","useEmojisPreference","textAreaRef","ref","_useState","_useState2","visible","setVisible","_useEmojiPicker","openEmojiPicker","open","useMarkdownSyntax","char","current","text","value","startPos","selectionStart","endPos","selectionEnd","slice","focus","setSelectionRange","onClickEmoji","emoji","emojiValue","length","handleOpenEmojiPicker","Error","openPlaceholderSelect","createElement","rows","icon","disabled","onClick","title","small","display","anchor","elevation","w","exportDefault"],"sources":["client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx"],"sourcesContent":["import { Button, PositionAnimated, Tile } from '@rocket.chat/fuselage';\nimport {\n\tMessageComposerAction,\n\tMessageComposerToolbarActions,\n\tMessageComposer,\n\tMessageComposerInput,\n\tMessageComposerToolbar,\n\tMessageComposerActionsDivider,\n} from '@rocket.chat/ui-composer';\nimport { useUserPreference, useTranslation } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps } from 'react';\nimport React, { memo, useCallback, useRef, useState } from 'react';\n\nimport { Backdrop } from '../../../../components/Backdrop';\nimport { useEmojiPicker } from '../../../../contexts/EmojiPickerContext';\nimport InsertPlaceholderDropdown from './InsertPlaceholderDropdown';\n\nconst CannedResponsesComposer = ({ onChange, ...props }: ComponentProps<typeof MessageComposerInput>) => {\n\tconst t = useTranslation();\n\tconst useEmojisPreference = useUserPreference('useEmojis');\n\n\tconst textAreaRef = useRef<HTMLTextAreaElement>(null);\n\tconst ref = useRef<HTMLButtonElement>(null);\n\n\tconst [visible, setVisible] = useState(false);\n\n\tconst { open: openEmojiPicker } = useEmojiPicker();\n\n\tconst useMarkdownSyntax = (char: '*' | '_' | '~' | '[]()'): (() => void) =>\n\t\tuseCallback(() => {\n\t\t\tif (textAreaRef?.current) {\n\t\t\t\tconst text = textAreaRef.current.value;\n\t\t\t\tconst startPos = textAreaRef.current.selectionStart;\n\t\t\t\tconst endPos = textAreaRef.current.selectionEnd;\n\n\t\t\t\tif (char === '[]()') {\n\t\t\t\t\tif (startPos !== endPos) {\n\t\t\t\t\t\ttextAreaRef.current.value = `${text.slice(0, startPos)}[${text.slice(startPos, endPos)}]()${text.slice(endPos)}`;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttextAreaRef.current.value = `${text.slice(0, startPos)}${char}${text.slice(startPos, endPos)}${char}${text.slice(endPos)}`;\n\t\t\t\t}\n\t\t\t\ttextAreaRef.current.focus();\n\n\t\t\t\tif (char === '[]()') {\n\t\t\t\t\tif (startPos === endPos) {\n\t\t\t\t\t\ttextAreaRef.current.setSelectionRange(startPos, endPos);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttextAreaRef.current.setSelectionRange(endPos + 3, endPos + 3);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttextAreaRef.current.setSelectionRange(startPos + 1, endPos + 1);\n\t\t\t\t}\n\n\t\t\t\tonChange?.(textAreaRef.current.value as any);\n\t\t\t}\n\t\t}, [char]);\n\n\tconst onClickEmoji = (emoji: string): void => {\n\t\tif (textAreaRef?.current) {\n\t\t\tconst text = textAreaRef.current.value;\n\t\t\tconst startPos = textAreaRef.current.selectionStart;\n\t\t\tconst emojiValue = `:${emoji}: `;\n\n\t\t\ttextAreaRef.current.value = text.slice(0, startPos) + emojiValue + text.slice(startPos);\n\n\t\t\ttextAreaRef.current.focus();\n\t\t\ttextAreaRef.current.setSelectionRange(startPos + emojiValue.length, startPos + emojiValue.length);\n\n\t\t\tonChange?.(textAreaRef.current.value as any);\n\t\t}\n\t};\n\n\tconst handleOpenEmojiPicker = (): void => {\n\t\tif (!useEmojisPreference) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!textAreaRef?.current) {\n\t\t\tthrow new Error('Missing textAreaRef');\n\t\t}\n\n\t\topenEmojiPicker(textAreaRef.current, (emoji: string) => onClickEmoji(emoji));\n\t};\n\n\tconst openPlaceholderSelect = (): void => {\n\t\ttextAreaRef?.current && textAreaRef.current.focus();\n\t\tsetVisible(!visible);\n\t};\n\n\treturn (\n\t\t<MessageComposer>\n\t\t\t<MessageComposerInput ref={textAreaRef} rows={10} onChange={onChange} {...props} />\n\t\t\t<MessageComposerToolbar>\n\t\t\t\t<MessageComposerToolbarActions aria-label={t('Message_composer_toolbox_primary_actions')}>\n\t\t\t\t\t<MessageComposerAction icon='emoji' disabled={!useEmojisPreference} onClick={handleOpenEmojiPicker} title={t('Emoji')} />\n\t\t\t\t\t<MessageComposerActionsDivider />\n\t\t\t\t\t<MessageComposerAction icon='bold' onClick={useMarkdownSyntax('*')} title={t('Bold')} />\n\t\t\t\t\t<MessageComposerAction icon='italic' onClick={useMarkdownSyntax('_')} title={t('Italic')} />\n\t\t\t\t\t<MessageComposerAction icon='strike' onClick={useMarkdownSyntax('~')} title={t('Strike')} />\n\t\t\t\t\t<MessageComposerAction icon='link' onClick={useMarkdownSyntax('[]()')} title={t('Link')} />\n\t\t\t\t\t<MessageComposerActionsDivider />\n\t\t\t\t\t<Button ref={ref} small onClick={openPlaceholderSelect}>\n\t\t\t\t\t\t{t('Insert_Placeholder')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Backdrop\n\t\t\t\t\t\tdisplay={visible ? 'block' : 'none'}\n\t\t\t\t\t\tonClick={(): void => {\n\t\t\t\t\t\t\ttextAreaRef?.current && textAreaRef.current.focus();\n\t\t\t\t\t\t\tsetVisible(false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<PositionAnimated visible={visible ? 'visible' : 'hidden'} anchor={ref}>\n\t\t\t\t\t\t<Tile elevation='1' w='224px'>\n\t\t\t\t\t\t\t<InsertPlaceholderDropdown onChange={onChange} textAreaRef={textAreaRef} setVisible={setVisible} />\n\t\t\t\t\t\t</Tile>\n\t\t\t\t\t</PositionAnimated>\n\t\t\t\t</MessageComposerToolbarActions>\n\t\t\t</MessageComposerToolbar>\n\t\t</MessageComposer>\n\t);\n};\n\nexport default memo(CannedResponsesComposer);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"fb40077af8528fe1fe02064f79df8c84015ac62c"}
