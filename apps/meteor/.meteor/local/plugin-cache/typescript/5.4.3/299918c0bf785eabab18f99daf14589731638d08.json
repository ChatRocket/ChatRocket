{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/meet/CallPage.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/meet/CallPage.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/meet/CallPage.tsx","inputSourceMap":{"version":3,"file":"client/views/meet/CallPage.tsx","sourceRoot":"","sources":["client/views/meet/CallPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, Flex, ButtonGroup, Button, Icon } from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport { useTranslation, useStream } from '@rocket.chat/ui-contexts';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\n\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\nimport { WebRTC } from '../../../app/webrtc/client';\nimport { WEB_RTC_EVENTS } from '../../../app/webrtc/lib/constants';\nimport OngoingCallDuration from './OngoingCallDuration';\nimport './styles.css';\n\ntype CallPageProps = {\n\troomId?: string;\n\tvisitorToken: any;\n\tvisitorId: string | null;\n\tstatus: any;\n\tsetStatus: any;\n\tisLayoutEmbedded: boolean;\n\tvisitorName: any;\n\tagentName: any;\n\tcallStartTime: any;\n};\n\nconst CallPage = ({\n\troomId,\n\tvisitorToken,\n\tvisitorId,\n\tstatus,\n\tsetStatus,\n\tisLayoutEmbedded,\n\tvisitorName,\n\tagentName,\n\tcallStartTime,\n}: CallPageProps) => {\n\tif (!roomId) {\n\t\tthrow new Error('Call Page - no room id');\n\t}\n\tconst [isAgentActive, setIsAgentActive] = useState(false);\n\tconst [isMicOn, setIsMicOn] = useState(false);\n\tconst [isCameraOn, setIsCameraOn] = useState(false);\n\tconst [isRemoteMobileDevice, setIsRemoteMobileDevice] = useState(false);\n\tconst [callInIframe, setCallInIframe] = useState(false);\n\tconst [isRemoteCameraOn, setIsRemoteCameraOn] = useState(false);\n\tconst [isLocalMobileDevice, setIsLocalMobileDevice] = useState(false);\n\n\tlet iconSize = 'x21';\n\tlet buttonSize = 'x40';\n\tconst avatarSize = 'x48';\n\tif (isLayoutEmbedded) {\n\t\ticonSize = 'x19';\n\t\tbuttonSize = 'x35';\n\t}\n\n\tconst subscribeNotifyUser = useStream('notify-user');\n\tconst subscribeNotifyRoom = useStream('notify-room');\n\tconst t = useTranslation();\n\tuseEffect(() => {\n\t\tif (visitorToken) {\n\t\t\tif (!visitorId) {\n\t\t\t\tthrow new Error('Call Page - no visitor id');\n\t\t\t}\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId, visitorId);\n\t\t\tconst isMobileDevice = (): boolean => {\n\t\t\t\tif (isLayoutEmbedded) {\n\t\t\t\t\tsetCallInIframe(true);\n\t\t\t\t}\n\t\t\t\tif (window.innerWidth <= 450 && window.innerHeight >= 629 && window.innerHeight <= 900) {\n\t\t\t\t\tsetIsLocalMobileDevice(true);\n\t\t\t\t\tif (webrtcInstance)\n\t\t\t\t\t\twebrtcInstance.media = {\n\t\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\twidth: { ideal: 440 },\n\t\t\t\t\t\t\t\theight: { ideal: 580 },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tconst unsubNotifyUser = subscribeNotifyUser(`${visitorId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type, data) => {\n\t\t\t\tif (data.room == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase 'candidate':\n\t\t\t\t\t\twebrtcInstance?.onUserStream('candidate', data);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'description':\n\t\t\t\t\t\twebrtcInstance?.onUserStream('description', data);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'join':\n\t\t\t\t\t\twebrtcInstance?.onUserStream('join', data);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst unsubNotifyRoom = subscribeNotifyRoom(`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus' && data.callStatus === 'ended') {\n\t\t\t\t\twebrtcInstance?.stop();\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'getDeviceType') {\n\t\t\t\t\tsdk.publish('notify-room', [\n\t\t\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t\t\t'deviceType',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsdk.publish('notify-room', [\n\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t'deviceType',\n\t\t\t\t{\n\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t},\n\t\t\t]);\n\n\t\t\tsdk.publish('notify-room', [\n\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t'callStatus',\n\t\t\t\t{\n\t\t\t\t\tcallStatus: 'inProgress',\n\t\t\t\t},\n\t\t\t]);\n\n\t\t\treturn () => {\n\t\t\t\tunsubNotifyRoom();\n\t\t\t\tunsubNotifyUser();\n\t\t\t};\n\t\t}\n\n\t\tif (!isAgentActive) {\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId);\n\t\t\tif (status === 'inProgress') {\n\t\t\t\tsdk.publish('notify-room', [`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, 'getDeviceType']);\n\n\t\t\t\twebrtcInstance?.startCall({\n\t\t\t\t\taudio: true,\n\t\t\t\t\tvideo: {\n\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tsetIsAgentActive(true);\n\n\t\t\treturn subscribeNotifyRoom(`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus') {\n\t\t\t\t\tswitch (data.callStatus) {\n\t\t\t\t\t\tcase 'ended':\n\t\t\t\t\t\t\twebrtcInstance?.stop();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'inProgress':\n\t\t\t\t\t\t\twebrtcInstance?.startCall({\n\t\t\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'deviceType' && data.isMobileDevice) {\n\t\t\t\t\tsetIsRemoteMobileDevice(true);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, [isAgentActive, status, setStatus, visitorId, roomId, visitorToken, isLayoutEmbedded, subscribeNotifyUser, subscribeNotifyRoom]);\n\n\tconst toggleButton = (control: any): any => {\n\t\tif (control === 'mic') {\n\t\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken)?.toggleAudio();\n\t\t\treturn setIsMicOn(!isMicOn);\n\t\t}\n\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken)?.toggleVideo();\n\t\tsetIsCameraOn(!isCameraOn);\n\t\tsdk.publish('notify-room', [\n\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t'cameraStatus',\n\t\t\t{\n\t\t\t\tisCameraOn: !isCameraOn,\n\t\t\t},\n\t\t]);\n\t};\n\n\tconst closeWindow = (): void => {\n\t\tif (isLayoutEmbedded) {\n\t\t\treturn (parent as any)?.handleIframeClose();\n\t\t}\n\t\treturn window.close();\n\t};\n\n\tconst getCallDuration = (callStartTime: any): any => moment.duration(moment(new Date()).diff(moment(callStartTime))).asSeconds();\n\n\tconst showCallPage = (localAvatar: any, remoteAvatar: any): any => (\n\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t}}\n\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t>\n\t\t\t\t\t<video\n\t\t\t\t\t\tid='localVideo'\n\t\t\t\t\t\tautoPlay\n\t\t\t\t\t\tplaysInline\n\t\t\t\t\t\tmuted\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'block' : 'none',\n\t\t\t\t\t\t}}\n\t\t\t\t\t></video>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'none' : 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar username={localAvatar} size={isLocalMobileDevice || callInIframe ? 'x32' : 'x48'} />\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbottom: '5%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid='mic'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={isMicOn ? t('Mute_microphone') : t('Unmute_microphone')}\n\t\t\t\t\t\t\tonClick={(): any => toggleButton('mic')}\n\t\t\t\t\t\t\tclassName={isMicOn ? 'On' : 'Off'}\n\t\t\t\t\t\t\tsize={Number(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isMicOn ? <Icon name='mic' size={iconSize} /> : <Icon name='mic-off' size={iconSize} />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid='camera'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={isCameraOn ? t('Turn_off_video') : t('Turn_on_video')}\n\t\t\t\t\t\t\tonClick={(): void => toggleButton('camera')}\n\t\t\t\t\t\t\tclassName={isCameraOn ? 'On' : 'Off'}\n\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isCameraOn ? <Icon name='video' size={iconSize} /> : <Icon name='video-off' size={iconSize} />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{isLayoutEmbedded && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\t\tborderColor='stroke-extra-dark'\n\t\t\t\t\t\t\t\tdata-title={t('Expand_view')}\n\t\t\t\t\t\t\t\tonClick={(): void => (parent as any)?.expandCall()}\n\t\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon name='arrow-expand' size={iconSize} color='white' />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Button square danger title={t('End_call')} onClick={closeWindow} size={parseInt(buttonSize)}>\n\t\t\t\t\t\t\t<Icon name='phone-off' size={iconSize} color='white' />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Box>\n\t\t\t\t<video\n\t\t\t\t\tid='remoteVideo'\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: isRemoteMobileDevice ? '45%' : '100%',\n\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\tdisplay: isRemoteCameraOn ? 'block' : 'none',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<track kind='captions' />\n\t\t\t\t</video>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tdisplay={isRemoteCameraOn ? 'none' : 'flex'}\n\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\tflexDirection='column'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: isRemoteMobileDevice || isLocalMobileDevice ? '10%' : '30%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar username={remoteAvatar} size={!callInIframe ? 'x124' : avatarSize} />\n\t\t\t\t\t</Box>\n\n\t\t\t\t\t<Box color='white' fontSize={callInIframe ? 12 : 18} textAlign='center' margin={3}>\n\t\t\t\t\t\t<OngoingCallDuration counter={getCallDuration(callStartTime)} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tfontSize: callInIframe ? 12 : 22,\n\t\t\t\t\t\t\tmargin: callInIframe ? 5 : 9,\n\t\t\t\t\t\t\t...(callInIframe && { marginTop: 0 }),\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{remoteAvatar}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Flex.Container>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{status === 'ringing' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<UserAvatar username={agentName} size={isLocalMobileDevice ? 'x32' : 'x48'} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '20%',\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<UserAvatar username={visitorName} size='x124' />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box color='white' fontSize={16} margin={15}>\n\t\t\t\t\t\t\t\tCalling...\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\t\t\tfontSize: isLocalMobileDevice ? 15 : 22,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{visitorName}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t\t{status === 'declined' && (\n\t\t\t\t<Box minHeight='90%' display='flex' justifyContent='center' alignItems='center' color='white' fontSize='s1'>\n\t\t\t\t\t{t('Call_declined')}\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t\t{status === 'inProgress' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t{visitorToken ? showCallPage(visitorName, agentName) : showCallPage(agentName, visitorName)}\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default CallPage;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"production","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/meet/CallPage.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/meet/CallPage.tsx","inputSourceMap":{"version":3,"file":"client/views/meet/CallPage.tsx","sourceRoot":"","sources":["client/views/meet/CallPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, Flex, ButtonGroup, Button, Icon } from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport { useTranslation, useStream } from '@rocket.chat/ui-contexts';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\n\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\nimport { WebRTC } from '../../../app/webrtc/client';\nimport { WEB_RTC_EVENTS } from '../../../app/webrtc/lib/constants';\nimport OngoingCallDuration from './OngoingCallDuration';\nimport './styles.css';\n\ntype CallPageProps = {\n\troomId?: string;\n\tvisitorToken: any;\n\tvisitorId: string | null;\n\tstatus: any;\n\tsetStatus: any;\n\tisLayoutEmbedded: boolean;\n\tvisitorName: any;\n\tagentName: any;\n\tcallStartTime: any;\n};\n\nconst CallPage = ({\n\troomId,\n\tvisitorToken,\n\tvisitorId,\n\tstatus,\n\tsetStatus,\n\tisLayoutEmbedded,\n\tvisitorName,\n\tagentName,\n\tcallStartTime,\n}: CallPageProps) => {\n\tif (!roomId) {\n\t\tthrow new Error('Call Page - no room id');\n\t}\n\tconst [isAgentActive, setIsAgentActive] = useState(false);\n\tconst [isMicOn, setIsMicOn] = useState(false);\n\tconst [isCameraOn, setIsCameraOn] = useState(false);\n\tconst [isRemoteMobileDevice, setIsRemoteMobileDevice] = useState(false);\n\tconst [callInIframe, setCallInIframe] = useState(false);\n\tconst [isRemoteCameraOn, setIsRemoteCameraOn] = useState(false);\n\tconst [isLocalMobileDevice, setIsLocalMobileDevice] = useState(false);\n\n\tlet iconSize = 'x21';\n\tlet buttonSize = 'x40';\n\tconst avatarSize = 'x48';\n\tif (isLayoutEmbedded) {\n\t\ticonSize = 'x19';\n\t\tbuttonSize = 'x35';\n\t}\n\n\tconst subscribeNotifyUser = useStream('notify-user');\n\tconst subscribeNotifyRoom = useStream('notify-room');\n\tconst t = useTranslation();\n\tuseEffect(() => {\n\t\tif (visitorToken) {\n\t\t\tif (!visitorId) {\n\t\t\t\tthrow new Error('Call Page - no visitor id');\n\t\t\t}\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId, visitorId);\n\t\t\tconst isMobileDevice = (): boolean => {\n\t\t\t\tif (isLayoutEmbedded) {\n\t\t\t\t\tsetCallInIframe(true);\n\t\t\t\t}\n\t\t\t\tif (window.innerWidth <= 450 && window.innerHeight >= 629 && window.innerHeight <= 900) {\n\t\t\t\t\tsetIsLocalMobileDevice(true);\n\t\t\t\t\tif (webrtcInstance)\n\t\t\t\t\t\twebrtcInstance.media = {\n\t\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\twidth: { ideal: 440 },\n\t\t\t\t\t\t\t\theight: { ideal: 580 },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tconst unsubNotifyUser = subscribeNotifyUser(`${visitorId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type, data) => {\n\t\t\t\tif (data.room == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase 'candidate':\n\t\t\t\t\t\twebrtcInstance?.onUserStream('candidate', data);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'description':\n\t\t\t\t\t\twebrtcInstance?.onUserStream('description', data);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'join':\n\t\t\t\t\t\twebrtcInstance?.onUserStream('join', data);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst unsubNotifyRoom = subscribeNotifyRoom(`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus' && data.callStatus === 'ended') {\n\t\t\t\t\twebrtcInstance?.stop();\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'getDeviceType') {\n\t\t\t\t\tsdk.publish('notify-room', [\n\t\t\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t\t\t'deviceType',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsdk.publish('notify-room', [\n\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t'deviceType',\n\t\t\t\t{\n\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t},\n\t\t\t]);\n\n\t\t\tsdk.publish('notify-room', [\n\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t'callStatus',\n\t\t\t\t{\n\t\t\t\t\tcallStatus: 'inProgress',\n\t\t\t\t},\n\t\t\t]);\n\n\t\t\treturn () => {\n\t\t\t\tunsubNotifyRoom();\n\t\t\t\tunsubNotifyUser();\n\t\t\t};\n\t\t}\n\n\t\tif (!isAgentActive) {\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId);\n\t\t\tif (status === 'inProgress') {\n\t\t\t\tsdk.publish('notify-room', [`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, 'getDeviceType']);\n\n\t\t\t\twebrtcInstance?.startCall({\n\t\t\t\t\taudio: true,\n\t\t\t\t\tvideo: {\n\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tsetIsAgentActive(true);\n\n\t\t\treturn subscribeNotifyRoom(`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus') {\n\t\t\t\t\tswitch (data.callStatus) {\n\t\t\t\t\t\tcase 'ended':\n\t\t\t\t\t\t\twebrtcInstance?.stop();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'inProgress':\n\t\t\t\t\t\t\twebrtcInstance?.startCall({\n\t\t\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'deviceType' && data.isMobileDevice) {\n\t\t\t\t\tsetIsRemoteMobileDevice(true);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, [isAgentActive, status, setStatus, visitorId, roomId, visitorToken, isLayoutEmbedded, subscribeNotifyUser, subscribeNotifyRoom]);\n\n\tconst toggleButton = (control: any): any => {\n\t\tif (control === 'mic') {\n\t\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken)?.toggleAudio();\n\t\t\treturn setIsMicOn(!isMicOn);\n\t\t}\n\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken)?.toggleVideo();\n\t\tsetIsCameraOn(!isCameraOn);\n\t\tsdk.publish('notify-room', [\n\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t'cameraStatus',\n\t\t\t{\n\t\t\t\tisCameraOn: !isCameraOn,\n\t\t\t},\n\t\t]);\n\t};\n\n\tconst closeWindow = (): void => {\n\t\tif (isLayoutEmbedded) {\n\t\t\treturn (parent as any)?.handleIframeClose();\n\t\t}\n\t\treturn window.close();\n\t};\n\n\tconst getCallDuration = (callStartTime: any): any => moment.duration(moment(new Date()).diff(moment(callStartTime))).asSeconds();\n\n\tconst showCallPage = (localAvatar: any, remoteAvatar: any): any => (\n\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t}}\n\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t>\n\t\t\t\t\t<video\n\t\t\t\t\t\tid='localVideo'\n\t\t\t\t\t\tautoPlay\n\t\t\t\t\t\tplaysInline\n\t\t\t\t\t\tmuted\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'block' : 'none',\n\t\t\t\t\t\t}}\n\t\t\t\t\t></video>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'none' : 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar username={localAvatar} size={isLocalMobileDevice || callInIframe ? 'x32' : 'x48'} />\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbottom: '5%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid='mic'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={isMicOn ? t('Mute_microphone') : t('Unmute_microphone')}\n\t\t\t\t\t\t\tonClick={(): any => toggleButton('mic')}\n\t\t\t\t\t\t\tclassName={isMicOn ? 'On' : 'Off'}\n\t\t\t\t\t\t\tsize={Number(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isMicOn ? <Icon name='mic' size={iconSize} /> : <Icon name='mic-off' size={iconSize} />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid='camera'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={isCameraOn ? t('Turn_off_video') : t('Turn_on_video')}\n\t\t\t\t\t\t\tonClick={(): void => toggleButton('camera')}\n\t\t\t\t\t\t\tclassName={isCameraOn ? 'On' : 'Off'}\n\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isCameraOn ? <Icon name='video' size={iconSize} /> : <Icon name='video-off' size={iconSize} />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{isLayoutEmbedded && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\t\tborderColor='stroke-extra-dark'\n\t\t\t\t\t\t\t\tdata-title={t('Expand_view')}\n\t\t\t\t\t\t\t\tonClick={(): void => (parent as any)?.expandCall()}\n\t\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon name='arrow-expand' size={iconSize} color='white' />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Button square danger title={t('End_call')} onClick={closeWindow} size={parseInt(buttonSize)}>\n\t\t\t\t\t\t\t<Icon name='phone-off' size={iconSize} color='white' />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Box>\n\t\t\t\t<video\n\t\t\t\t\tid='remoteVideo'\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: isRemoteMobileDevice ? '45%' : '100%',\n\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\tdisplay: isRemoteCameraOn ? 'block' : 'none',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<track kind='captions' />\n\t\t\t\t</video>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tdisplay={isRemoteCameraOn ? 'none' : 'flex'}\n\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\tflexDirection='column'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: isRemoteMobileDevice || isLocalMobileDevice ? '10%' : '30%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar username={remoteAvatar} size={!callInIframe ? 'x124' : avatarSize} />\n\t\t\t\t\t</Box>\n\n\t\t\t\t\t<Box color='white' fontSize={callInIframe ? 12 : 18} textAlign='center' margin={3}>\n\t\t\t\t\t\t<OngoingCallDuration counter={getCallDuration(callStartTime)} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tfontSize: callInIframe ? 12 : 22,\n\t\t\t\t\t\t\tmargin: callInIframe ? 5 : 9,\n\t\t\t\t\t\t\t...(callInIframe && { marginTop: 0 }),\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{remoteAvatar}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Flex.Container>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{status === 'ringing' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<UserAvatar username={agentName} size={isLocalMobileDevice ? 'x32' : 'x48'} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '20%',\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<UserAvatar username={visitorName} size='x124' />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box color='white' fontSize={16} margin={15}>\n\t\t\t\t\t\t\t\tCalling...\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\t\t\tfontSize: isLocalMobileDevice ? 15 : 22,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{visitorName}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t\t{status === 'declined' && (\n\t\t\t\t<Box minHeight='90%' display='flex' justifyContent='center' alignItems='center' color='white' fontSize='s1'>\n\t\t\t\t\t{t('Call_declined')}\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t\t{status === 'inProgress' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t{visitorToken ? showCallPage(visitorName, agentName) : showCallPage(agentName, visitorName)}\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default CallPage;\n"]}}},"code":"let _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 0);\nlet Box, Flex, ButtonGroup, Button, Icon;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box(v) {\n    Box = v;\n  },\n  Flex(v) {\n    Flex = v;\n  },\n  ButtonGroup(v) {\n    ButtonGroup = v;\n  },\n  Button(v) {\n    Button = v;\n  },\n  Icon(v) {\n    Icon = v;\n  }\n}, 0);\nlet UserAvatar;\nmodule.link(\"@rocket.chat/ui-avatar\", {\n  UserAvatar(v) {\n    UserAvatar = v;\n  }\n}, 1);\nlet useTranslation, useStream;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useTranslation(v) {\n    useTranslation = v;\n  },\n  useStream(v) {\n    useStream = v;\n  }\n}, 2);\nlet moment;\nmodule.link(\"moment\", {\n  default(v) {\n    moment = v;\n  }\n}, 3);\nlet React, useEffect, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  },\n  useState(v) {\n    useState = v;\n  }\n}, 4);\nlet sdk;\nmodule.link(\"../../../app/utils/client/lib/SDKClient\", {\n  sdk(v) {\n    sdk = v;\n  }\n}, 5);\nlet WebRTC;\nmodule.link(\"../../../app/webrtc/client\", {\n  WebRTC(v) {\n    WebRTC = v;\n  }\n}, 6);\nlet WEB_RTC_EVENTS;\nmodule.link(\"../../../app/webrtc/lib/constants\", {\n  WEB_RTC_EVENTS(v) {\n    WEB_RTC_EVENTS = v;\n  }\n}, 7);\nlet OngoingCallDuration;\nmodule.link(\"./OngoingCallDuration\", {\n  default(v) {\n    OngoingCallDuration = v;\n  }\n}, 8);\nmodule.link(\"./styles.css\");\nconst CallPage = _ref => {\n  let {\n    roomId,\n    visitorToken,\n    visitorId,\n    status,\n    setStatus,\n    isLayoutEmbedded,\n    visitorName,\n    agentName,\n    callStartTime\n  } = _ref;\n  if (!roomId) {\n    throw new Error('Call Page - no room id');\n  }\n  const [isAgentActive, setIsAgentActive] = useState(false);\n  const [isMicOn, setIsMicOn] = useState(false);\n  const [isCameraOn, setIsCameraOn] = useState(false);\n  const [isRemoteMobileDevice, setIsRemoteMobileDevice] = useState(false);\n  const [callInIframe, setCallInIframe] = useState(false);\n  const [isRemoteCameraOn, setIsRemoteCameraOn] = useState(false);\n  const [isLocalMobileDevice, setIsLocalMobileDevice] = useState(false);\n  let iconSize = 'x21';\n  let buttonSize = 'x40';\n  const avatarSize = 'x48';\n  if (isLayoutEmbedded) {\n    iconSize = 'x19';\n    buttonSize = 'x35';\n  }\n  const subscribeNotifyUser = useStream('notify-user');\n  const subscribeNotifyRoom = useStream('notify-room');\n  const t = useTranslation();\n  useEffect(() => {\n    if (visitorToken) {\n      if (!visitorId) {\n        throw new Error('Call Page - no visitor id');\n      }\n      const webrtcInstance = WebRTC.getInstanceByRoomId(roomId, visitorId);\n      const isMobileDevice = () => {\n        if (isLayoutEmbedded) {\n          setCallInIframe(true);\n        }\n        if (window.innerWidth <= 450 && window.innerHeight >= 629 && window.innerHeight <= 900) {\n          setIsLocalMobileDevice(true);\n          if (webrtcInstance) webrtcInstance.media = {\n            audio: true,\n            video: {\n              width: {\n                ideal: 440\n              },\n              height: {\n                ideal: 580\n              }\n            }\n          };\n          return true;\n        }\n        return false;\n      };\n      const unsubNotifyUser = subscribeNotifyUser(\"\".concat(visitorId, \"/\").concat(WEB_RTC_EVENTS.WEB_RTC), (type, data) => {\n        if (data.room == null) {\n          return;\n        }\n        switch (type) {\n          case 'candidate':\n            webrtcInstance === null || webrtcInstance === void 0 ? void 0 : webrtcInstance.onUserStream('candidate', data);\n            break;\n          case 'description':\n            webrtcInstance === null || webrtcInstance === void 0 ? void 0 : webrtcInstance.onUserStream('description', data);\n            break;\n          case 'join':\n            webrtcInstance === null || webrtcInstance === void 0 ? void 0 : webrtcInstance.onUserStream('join', data);\n            break;\n        }\n      });\n      const unsubNotifyRoom = subscribeNotifyRoom(\"\".concat(roomId, \"/\").concat(WEB_RTC_EVENTS.WEB_RTC), (type, data) => {\n        if (type === 'callStatus' && data.callStatus === 'ended') {\n          webrtcInstance === null || webrtcInstance === void 0 ? void 0 : webrtcInstance.stop();\n          setStatus(data.callStatus);\n        } else if (type === 'getDeviceType') {\n          sdk.publish('notify-room', [\"\".concat(roomId, \"/\").concat(WEB_RTC_EVENTS.WEB_RTC), 'deviceType', {\n            isMobileDevice: isMobileDevice()\n          }]);\n        } else if (type === 'cameraStatus') {\n          setIsRemoteCameraOn(data.isCameraOn);\n        }\n      });\n      sdk.publish('notify-room', [\"\".concat(roomId, \"/\").concat(WEB_RTC_EVENTS.WEB_RTC), 'deviceType', {\n        isMobileDevice: isMobileDevice()\n      }]);\n      sdk.publish('notify-room', [\"\".concat(roomId, \"/\").concat(WEB_RTC_EVENTS.WEB_RTC), 'callStatus', {\n        callStatus: 'inProgress'\n      }]);\n      return () => {\n        unsubNotifyRoom();\n        unsubNotifyUser();\n      };\n    }\n    if (!isAgentActive) {\n      const webrtcInstance = WebRTC.getInstanceByRoomId(roomId);\n      if (status === 'inProgress') {\n        sdk.publish('notify-room', [\"\".concat(roomId, \"/\").concat(WEB_RTC_EVENTS.WEB_RTC), 'getDeviceType']);\n        webrtcInstance === null || webrtcInstance === void 0 ? void 0 : webrtcInstance.startCall({\n          audio: true,\n          video: {\n            width: {\n              ideal: 1920\n            },\n            height: {\n              ideal: 1080\n            }\n          }\n        });\n      }\n      setIsAgentActive(true);\n      return subscribeNotifyRoom(\"\".concat(roomId, \"/\").concat(WEB_RTC_EVENTS.WEB_RTC), (type, data) => {\n        if (type === 'callStatus') {\n          switch (data.callStatus) {\n            case 'ended':\n              webrtcInstance === null || webrtcInstance === void 0 ? void 0 : webrtcInstance.stop();\n              break;\n            case 'inProgress':\n              webrtcInstance === null || webrtcInstance === void 0 ? void 0 : webrtcInstance.startCall({\n                audio: true,\n                video: {\n                  width: {\n                    ideal: 1920\n                  },\n                  height: {\n                    ideal: 1080\n                  }\n                }\n              });\n          }\n          setStatus(data.callStatus);\n        } else if (type === 'deviceType' && data.isMobileDevice) {\n          setIsRemoteMobileDevice(true);\n        } else if (type === 'cameraStatus') {\n          setIsRemoteCameraOn(data.isCameraOn);\n        }\n      });\n    }\n  }, [isAgentActive, status, setStatus, visitorId, roomId, visitorToken, isLayoutEmbedded, subscribeNotifyUser, subscribeNotifyRoom]);\n  const toggleButton = control => {\n    var _WebRTC$getInstanceBy2;\n    if (control === 'mic') {\n      var _WebRTC$getInstanceBy;\n      (_WebRTC$getInstanceBy = WebRTC.getInstanceByRoomId(roomId, visitorToken)) === null || _WebRTC$getInstanceBy === void 0 ? void 0 : _WebRTC$getInstanceBy.toggleAudio();\n      return setIsMicOn(!isMicOn);\n    }\n    (_WebRTC$getInstanceBy2 = WebRTC.getInstanceByRoomId(roomId, visitorToken)) === null || _WebRTC$getInstanceBy2 === void 0 ? void 0 : _WebRTC$getInstanceBy2.toggleVideo();\n    setIsCameraOn(!isCameraOn);\n    sdk.publish('notify-room', [\"\".concat(roomId, \"/\").concat(WEB_RTC_EVENTS.WEB_RTC), 'cameraStatus', {\n      isCameraOn: !isCameraOn\n    }]);\n  };\n  const closeWindow = () => {\n    if (isLayoutEmbedded) {\n      var _parent;\n      return (_parent = parent) === null || _parent === void 0 ? void 0 : _parent.handleIframeClose();\n    }\n    return window.close();\n  };\n  const getCallDuration = callStartTime => moment.duration(moment(new Date()).diff(moment(callStartTime))).asSeconds();\n  const showCallPage = (localAvatar, remoteAvatar) => /*#__PURE__*/React.createElement(Flex.Container, {\n    direction: \"column\",\n    justifyContent: \"center\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    width: \"full\",\n    minHeight: \"sh\",\n    alignItems: \"center\",\n    backgroundColor: \"dark\",\n    overflow: \"hidden\",\n    position: \"relative\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    position: \"absolute\",\n    zIndex: 1,\n    style: {\n      top: '5%',\n      right: '2%'\n    },\n    className: \"Self_Video\",\n    alignItems: \"center\",\n    backgroundColor: \"dark\"\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    id: \"localVideo\",\n    autoPlay: true,\n    playsInline: true,\n    muted: true,\n    style: {\n      width: '100%',\n      transform: 'scaleX(-1)',\n      display: isCameraOn ? 'block' : 'none'\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    style: {\n      display: isCameraOn ? 'none' : 'block',\n      margin: 'auto'\n    }\n  }, /*#__PURE__*/React.createElement(UserAvatar, {\n    username: localAvatar,\n    size: isLocalMobileDevice || callInIframe ? 'x32' : 'x48'\n  }))), /*#__PURE__*/React.createElement(Box, {\n    position: \"absolute\",\n    zIndex: 1,\n    style: {\n      bottom: '5%'\n    }\n  }, /*#__PURE__*/React.createElement(ButtonGroup, null, /*#__PURE__*/React.createElement(Button, {\n    id: \"mic\",\n    square: true,\n    title: isMicOn ? t('Mute_microphone') : t('Unmute_microphone'),\n    onClick: () => toggleButton('mic'),\n    className: isMicOn ? 'On' : 'Off',\n    size: Number(buttonSize)\n  }, isMicOn ? /*#__PURE__*/React.createElement(Icon, {\n    name: \"mic\",\n    size: iconSize\n  }) : /*#__PURE__*/React.createElement(Icon, {\n    name: \"mic-off\",\n    size: iconSize\n  })), /*#__PURE__*/React.createElement(Button, {\n    id: \"camera\",\n    square: true,\n    title: isCameraOn ? t('Turn_off_video') : t('Turn_on_video'),\n    onClick: () => toggleButton('camera'),\n    className: isCameraOn ? 'On' : 'Off',\n    size: parseInt(buttonSize)\n  }, isCameraOn ? /*#__PURE__*/React.createElement(Icon, {\n    name: \"video\",\n    size: iconSize\n  }) : /*#__PURE__*/React.createElement(Icon, {\n    name: \"video-off\",\n    size: iconSize\n  })), isLayoutEmbedded && /*#__PURE__*/React.createElement(Button, {\n    square: true,\n    backgroundColor: \"dark\",\n    borderColor: \"stroke-extra-dark\",\n    \"data-title\": t('Expand_view'),\n    onClick: () => {\n      var _parent2;\n      return (_parent2 = parent) === null || _parent2 === void 0 ? void 0 : _parent2.expandCall();\n    },\n    size: parseInt(buttonSize)\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"arrow-expand\",\n    size: iconSize,\n    color: \"white\"\n  })), /*#__PURE__*/React.createElement(Button, {\n    square: true,\n    danger: true,\n    title: t('End_call'),\n    onClick: closeWindow,\n    size: parseInt(buttonSize)\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"phone-off\",\n    size: iconSize,\n    color: \"white\"\n  })))), /*#__PURE__*/React.createElement(\"video\", {\n    id: \"remoteVideo\",\n    autoPlay: true,\n    playsInline: true,\n    style: {\n      width: isRemoteMobileDevice ? '45%' : '100%',\n      transform: 'scaleX(-1)',\n      display: isRemoteCameraOn ? 'block' : 'none'\n    }\n  }, /*#__PURE__*/React.createElement(\"track\", {\n    kind: \"captions\"\n  })), /*#__PURE__*/React.createElement(Box, {\n    position: \"absolute\",\n    zIndex: 1,\n    display: isRemoteCameraOn ? 'none' : 'flex',\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    style: {\n      top: isRemoteMobileDevice || isLocalMobileDevice ? '10%' : '30%'\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    style: {\n      display: 'block',\n      margin: 'auto'\n    }\n  }, /*#__PURE__*/React.createElement(UserAvatar, {\n    username: remoteAvatar,\n    size: !callInIframe ? 'x124' : avatarSize\n  })), /*#__PURE__*/React.createElement(Box, {\n    color: \"white\",\n    fontSize: callInIframe ? 12 : 18,\n    textAlign: \"center\",\n    margin: 3\n  }, /*#__PURE__*/React.createElement(OngoingCallDuration, {\n    counter: getCallDuration(callStartTime)\n  })), /*#__PURE__*/React.createElement(Box, {\n    style: _objectSpread({\n      color: 'white',\n      fontSize: callInIframe ? 12 : 22,\n      margin: callInIframe ? 5 : 9\n    }, callInIframe && {\n      marginTop: 0\n    })\n  }, remoteAvatar))));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, status === 'ringing' && /*#__PURE__*/React.createElement(Flex.Container, {\n    direction: \"column\",\n    justifyContent: \"center\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    width: \"full\",\n    minHeight: \"sh\",\n    alignItems: \"center\",\n    backgroundColor: \"dark\",\n    overflow: \"hidden\",\n    position: \"relative\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    position: \"absolute\",\n    zIndex: 1,\n    style: {\n      top: '5%',\n      right: '2%'\n    },\n    className: \"Self_Video\",\n    backgroundColor: \"dark\",\n    alignItems: \"center\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    style: {\n      display: 'block',\n      margin: 'auto'\n    }\n  }, /*#__PURE__*/React.createElement(UserAvatar, {\n    username: agentName,\n    size: isLocalMobileDevice ? 'x32' : 'x48'\n  }))), /*#__PURE__*/React.createElement(Box, {\n    position: \"absolute\",\n    zIndex: 1,\n    style: {\n      top: '20%',\n      display: 'flex',\n      justifyContent: 'center',\n      flexDirection: 'column'\n    },\n    alignItems: \"center\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    style: {\n      display: 'block',\n      margin: 'auto'\n    }\n  }, /*#__PURE__*/React.createElement(UserAvatar, {\n    username: visitorName,\n    size: \"x124\"\n  })), /*#__PURE__*/React.createElement(Box, {\n    color: \"white\",\n    fontSize: 16,\n    margin: 15\n  }, \"Calling...\"), /*#__PURE__*/React.createElement(Box, {\n    style: {\n      color: 'white',\n      fontSize: isLocalMobileDevice ? 15 : 22\n    }\n  }, visitorName)))), status === 'declined' && /*#__PURE__*/React.createElement(Box, {\n    minHeight: \"90%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    color: \"white\",\n    fontSize: \"s1\"\n  }, t('Call_declined')), status === 'inProgress' && /*#__PURE__*/React.createElement(Flex.Container, {\n    direction: \"column\",\n    justifyContent: \"center\"\n  }, visitorToken ? showCallPage(visitorName, agentName) : showCallPage(agentName, visitorName)));\n};\nmodule.exportDefault(CallPage);","map":{"version":3,"names":["_objectSpread","module","link","default","v","Box","Flex","ButtonGroup","Button","Icon","UserAvatar","useTranslation","useStream","moment","React","useEffect","useState","sdk","WebRTC","WEB_RTC_EVENTS","OngoingCallDuration","CallPage","_ref","roomId","visitorToken","visitorId","status","setStatus","isLayoutEmbedded","visitorName","agentName","callStartTime","Error","isAgentActive","setIsAgentActive","isMicOn","setIsMicOn","isCameraOn","setIsCameraOn","isRemoteMobileDevice","setIsRemoteMobileDevice","callInIframe","setCallInIframe","isRemoteCameraOn","setIsRemoteCameraOn","isLocalMobileDevice","setIsLocalMobileDevice","iconSize","buttonSize","avatarSize","subscribeNotifyUser","subscribeNotifyRoom","t","webrtcInstance","getInstanceByRoomId","isMobileDevice","window","innerWidth","innerHeight","media","audio","video","width","ideal","height","unsubNotifyUser","concat","WEB_RTC","type","data","room","onUserStream","unsubNotifyRoom","callStatus","stop","publish","startCall","toggleButton","control","_WebRTC$getInstanceBy2","_WebRTC$getInstanceBy","toggleAudio","toggleVideo","closeWindow","_parent","parent","handleIframeClose","close","getCallDuration","duration","Date","diff","asSeconds","showCallPage","localAvatar","remoteAvatar","createElement","Container","direction","justifyContent","minHeight","alignItems","backgroundColor","overflow","position","zIndex","style","top","right","className","id","autoPlay","playsInline","muted","transform","display","margin","username","size","bottom","square","title","onClick","Number","name","parseInt","borderColor","_parent2","expandCall","color","danger","kind","flexDirection","fontSize","textAlign","counter","marginTop","Fragment","exportDefault"],"sources":["client/views/meet/CallPage.tsx"],"sourcesContent":["import { Box, Flex, ButtonGroup, Button, Icon } from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport { useTranslation, useStream } from '@rocket.chat/ui-contexts';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\n\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\nimport { WebRTC } from '../../../app/webrtc/client';\nimport { WEB_RTC_EVENTS } from '../../../app/webrtc/lib/constants';\nimport OngoingCallDuration from './OngoingCallDuration';\nimport './styles.css';\n\ntype CallPageProps = {\n\troomId?: string;\n\tvisitorToken: any;\n\tvisitorId: string | null;\n\tstatus: any;\n\tsetStatus: any;\n\tisLayoutEmbedded: boolean;\n\tvisitorName: any;\n\tagentName: any;\n\tcallStartTime: any;\n};\n\nconst CallPage = ({\n\troomId,\n\tvisitorToken,\n\tvisitorId,\n\tstatus,\n\tsetStatus,\n\tisLayoutEmbedded,\n\tvisitorName,\n\tagentName,\n\tcallStartTime,\n}: CallPageProps) => {\n\tif (!roomId) {\n\t\tthrow new Error('Call Page - no room id');\n\t}\n\tconst [isAgentActive, setIsAgentActive] = useState(false);\n\tconst [isMicOn, setIsMicOn] = useState(false);\n\tconst [isCameraOn, setIsCameraOn] = useState(false);\n\tconst [isRemoteMobileDevice, setIsRemoteMobileDevice] = useState(false);\n\tconst [callInIframe, setCallInIframe] = useState(false);\n\tconst [isRemoteCameraOn, setIsRemoteCameraOn] = useState(false);\n\tconst [isLocalMobileDevice, setIsLocalMobileDevice] = useState(false);\n\n\tlet iconSize = 'x21';\n\tlet buttonSize = 'x40';\n\tconst avatarSize = 'x48';\n\tif (isLayoutEmbedded) {\n\t\ticonSize = 'x19';\n\t\tbuttonSize = 'x35';\n\t}\n\n\tconst subscribeNotifyUser = useStream('notify-user');\n\tconst subscribeNotifyRoom = useStream('notify-room');\n\tconst t = useTranslation();\n\tuseEffect(() => {\n\t\tif (visitorToken) {\n\t\t\tif (!visitorId) {\n\t\t\t\tthrow new Error('Call Page - no visitor id');\n\t\t\t}\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId, visitorId);\n\t\t\tconst isMobileDevice = (): boolean => {\n\t\t\t\tif (isLayoutEmbedded) {\n\t\t\t\t\tsetCallInIframe(true);\n\t\t\t\t}\n\t\t\t\tif (window.innerWidth <= 450 && window.innerHeight >= 629 && window.innerHeight <= 900) {\n\t\t\t\t\tsetIsLocalMobileDevice(true);\n\t\t\t\t\tif (webrtcInstance)\n\t\t\t\t\t\twebrtcInstance.media = {\n\t\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\twidth: { ideal: 440 },\n\t\t\t\t\t\t\t\theight: { ideal: 580 },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tconst unsubNotifyUser = subscribeNotifyUser(`${visitorId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type, data) => {\n\t\t\t\tif (data.room == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase 'candidate':\n\t\t\t\t\t\twebrtcInstance?.onUserStream('candidate', data);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'description':\n\t\t\t\t\t\twebrtcInstance?.onUserStream('description', data);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'join':\n\t\t\t\t\t\twebrtcInstance?.onUserStream('join', data);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst unsubNotifyRoom = subscribeNotifyRoom(`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus' && data.callStatus === 'ended') {\n\t\t\t\t\twebrtcInstance?.stop();\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'getDeviceType') {\n\t\t\t\t\tsdk.publish('notify-room', [\n\t\t\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t\t\t'deviceType',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsdk.publish('notify-room', [\n\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t'deviceType',\n\t\t\t\t{\n\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t},\n\t\t\t]);\n\n\t\t\tsdk.publish('notify-room', [\n\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t'callStatus',\n\t\t\t\t{\n\t\t\t\t\tcallStatus: 'inProgress',\n\t\t\t\t},\n\t\t\t]);\n\n\t\t\treturn () => {\n\t\t\t\tunsubNotifyRoom();\n\t\t\t\tunsubNotifyUser();\n\t\t\t};\n\t\t}\n\n\t\tif (!isAgentActive) {\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId);\n\t\t\tif (status === 'inProgress') {\n\t\t\t\tsdk.publish('notify-room', [`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, 'getDeviceType']);\n\n\t\t\t\twebrtcInstance?.startCall({\n\t\t\t\t\taudio: true,\n\t\t\t\t\tvideo: {\n\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tsetIsAgentActive(true);\n\n\t\t\treturn subscribeNotifyRoom(`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus') {\n\t\t\t\t\tswitch (data.callStatus) {\n\t\t\t\t\t\tcase 'ended':\n\t\t\t\t\t\t\twebrtcInstance?.stop();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'inProgress':\n\t\t\t\t\t\t\twebrtcInstance?.startCall({\n\t\t\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'deviceType' && data.isMobileDevice) {\n\t\t\t\t\tsetIsRemoteMobileDevice(true);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, [isAgentActive, status, setStatus, visitorId, roomId, visitorToken, isLayoutEmbedded, subscribeNotifyUser, subscribeNotifyRoom]);\n\n\tconst toggleButton = (control: any): any => {\n\t\tif (control === 'mic') {\n\t\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken)?.toggleAudio();\n\t\t\treturn setIsMicOn(!isMicOn);\n\t\t}\n\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken)?.toggleVideo();\n\t\tsetIsCameraOn(!isCameraOn);\n\t\tsdk.publish('notify-room', [\n\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t'cameraStatus',\n\t\t\t{\n\t\t\t\tisCameraOn: !isCameraOn,\n\t\t\t},\n\t\t]);\n\t};\n\n\tconst closeWindow = (): void => {\n\t\tif (isLayoutEmbedded) {\n\t\t\treturn (parent as any)?.handleIframeClose();\n\t\t}\n\t\treturn window.close();\n\t};\n\n\tconst getCallDuration = (callStartTime: any): any => moment.duration(moment(new Date()).diff(moment(callStartTime))).asSeconds();\n\n\tconst showCallPage = (localAvatar: any, remoteAvatar: any): any => (\n\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t}}\n\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t>\n\t\t\t\t\t<video\n\t\t\t\t\t\tid='localVideo'\n\t\t\t\t\t\tautoPlay\n\t\t\t\t\t\tplaysInline\n\t\t\t\t\t\tmuted\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'block' : 'none',\n\t\t\t\t\t\t}}\n\t\t\t\t\t></video>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'none' : 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar username={localAvatar} size={isLocalMobileDevice || callInIframe ? 'x32' : 'x48'} />\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbottom: '5%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid='mic'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={isMicOn ? t('Mute_microphone') : t('Unmute_microphone')}\n\t\t\t\t\t\t\tonClick={(): any => toggleButton('mic')}\n\t\t\t\t\t\t\tclassName={isMicOn ? 'On' : 'Off'}\n\t\t\t\t\t\t\tsize={Number(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isMicOn ? <Icon name='mic' size={iconSize} /> : <Icon name='mic-off' size={iconSize} />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid='camera'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={isCameraOn ? t('Turn_off_video') : t('Turn_on_video')}\n\t\t\t\t\t\t\tonClick={(): void => toggleButton('camera')}\n\t\t\t\t\t\t\tclassName={isCameraOn ? 'On' : 'Off'}\n\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isCameraOn ? <Icon name='video' size={iconSize} /> : <Icon name='video-off' size={iconSize} />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{isLayoutEmbedded && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\t\tborderColor='stroke-extra-dark'\n\t\t\t\t\t\t\t\tdata-title={t('Expand_view')}\n\t\t\t\t\t\t\t\tonClick={(): void => (parent as any)?.expandCall()}\n\t\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon name='arrow-expand' size={iconSize} color='white' />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Button square danger title={t('End_call')} onClick={closeWindow} size={parseInt(buttonSize)}>\n\t\t\t\t\t\t\t<Icon name='phone-off' size={iconSize} color='white' />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Box>\n\t\t\t\t<video\n\t\t\t\t\tid='remoteVideo'\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: isRemoteMobileDevice ? '45%' : '100%',\n\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\tdisplay: isRemoteCameraOn ? 'block' : 'none',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<track kind='captions' />\n\t\t\t\t</video>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tdisplay={isRemoteCameraOn ? 'none' : 'flex'}\n\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\tflexDirection='column'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: isRemoteMobileDevice || isLocalMobileDevice ? '10%' : '30%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar username={remoteAvatar} size={!callInIframe ? 'x124' : avatarSize} />\n\t\t\t\t\t</Box>\n\n\t\t\t\t\t<Box color='white' fontSize={callInIframe ? 12 : 18} textAlign='center' margin={3}>\n\t\t\t\t\t\t<OngoingCallDuration counter={getCallDuration(callStartTime)} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tfontSize: callInIframe ? 12 : 22,\n\t\t\t\t\t\t\tmargin: callInIframe ? 5 : 9,\n\t\t\t\t\t\t\t...(callInIframe && { marginTop: 0 }),\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{remoteAvatar}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Flex.Container>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{status === 'ringing' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<UserAvatar username={agentName} size={isLocalMobileDevice ? 'x32' : 'x48'} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '20%',\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<UserAvatar username={visitorName} size='x124' />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box color='white' fontSize={16} margin={15}>\n\t\t\t\t\t\t\t\tCalling...\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\t\t\tfontSize: isLocalMobileDevice ? 15 : 22,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{visitorName}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t\t{status === 'declined' && (\n\t\t\t\t<Box minHeight='90%' display='flex' justifyContent='center' alignItems='center' color='white' fontSize='s1'>\n\t\t\t\t\t{t('Call_declined')}\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t\t{status === 'inProgress' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t{visitorToken ? showCallPage(visitorName, agentName) : showCallPage(agentName, visitorName)}\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default CallPage;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"299918c0bf785eabab18f99daf14589731638d08"}
