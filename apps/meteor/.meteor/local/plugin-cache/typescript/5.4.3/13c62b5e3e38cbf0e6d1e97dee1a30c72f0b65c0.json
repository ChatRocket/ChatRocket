{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/hooks/roomActions/useThreadRoomAction.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/hooks/roomActions/useThreadRoomAction.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/hooks/roomActions/useThreadRoomAction.tsx","inputSourceMap":{"version":3,"file":"client/hooks/roomActions/useThreadRoomAction.tsx","sourceRoot":"","sources":["client/hooks/roomActions/useThreadRoomAction.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { BadgeProps } from '@rocket.chat/fuselage';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport React, { lazy, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { HeaderToolbarAction, HeaderToolbarActionBadge } from '../../components/Header';\nimport { useRoomSubscription } from '../../views/room/contexts/RoomContext';\nimport type { RoomToolboxActionConfig } from '../../views/room/contexts/RoomToolboxContext';\n\nconst getVariant = (tunreadUser: number, tunreadGroup: number): BadgeProps['variant'] => {\n\tif (tunreadUser > 0) {\n\t\treturn 'danger';\n\t}\n\n\tif (tunreadGroup > 0) {\n\t\treturn 'warning';\n\t}\n\n\treturn 'primary';\n};\n\nconst Threads = lazy(() => import('../../views/room/contextualBar/Threads'));\n\nexport const useThreadRoomAction = () => {\n\tconst enabled = useSetting('Threads_enabled', false);\n\tconst subscription = useRoomSubscription();\n\n\tconst tunread = subscription?.tunread?.length ?? 0;\n\tconst tunreadUser = subscription?.tunreadUser?.length ?? 0;\n\tconst tunreadGroup = subscription?.tunreadGroup?.length ?? 0;\n\tconst unread = tunread > 99 ? '99+' : tunread;\n\tconst variant = getVariant(tunreadUser, tunreadGroup);\n\tconst { t } = useTranslation();\n\n\treturn useMemo((): RoomToolboxActionConfig | undefined => {\n\t\tif (!enabled) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tid: 'thread',\n\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\tfull: true,\n\t\t\ttitle: 'Threads',\n\t\t\ticon: 'thread',\n\t\t\ttabComponent: Threads,\n\t\t\torder: 2,\n\t\t\trenderToolboxItem: ({ id, className, index, icon, title, toolbox: { tab }, action, disabled, tooltip }) => (\n\t\t\t\t<HeaderToolbarAction\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tindex={index}\n\t\t\t\t\tid={id}\n\t\t\t\t\ticon={icon}\n\t\t\t\t\ttitle={t(title)}\n\t\t\t\t\tpressed={id === tab?.id}\n\t\t\t\t\taction={action}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\ttooltip={tooltip}\n\t\t\t\t>\n\t\t\t\t\t{!!unread && <HeaderToolbarActionBadge variant={variant}>{unread}</HeaderToolbarActionBadge>}\n\t\t\t\t</HeaderToolbarAction>\n\t\t\t),\n\t\t};\n\t}, [enabled, t, unread, variant]);\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/hooks/roomActions/useThreadRoomAction.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/hooks/roomActions/useThreadRoomAction.tsx","inputSourceMap":{"version":3,"file":"client/hooks/roomActions/useThreadRoomAction.tsx","sourceRoot":"","sources":["client/hooks/roomActions/useThreadRoomAction.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { BadgeProps } from '@rocket.chat/fuselage';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport React, { lazy, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { HeaderToolbarAction, HeaderToolbarActionBadge } from '../../components/Header';\nimport { useRoomSubscription } from '../../views/room/contexts/RoomContext';\nimport type { RoomToolboxActionConfig } from '../../views/room/contexts/RoomToolboxContext';\n\nconst getVariant = (tunreadUser: number, tunreadGroup: number): BadgeProps['variant'] => {\n\tif (tunreadUser > 0) {\n\t\treturn 'danger';\n\t}\n\n\tif (tunreadGroup > 0) {\n\t\treturn 'warning';\n\t}\n\n\treturn 'primary';\n};\n\nconst Threads = lazy(() => import('../../views/room/contextualBar/Threads'));\n\nexport const useThreadRoomAction = () => {\n\tconst enabled = useSetting('Threads_enabled', false);\n\tconst subscription = useRoomSubscription();\n\n\tconst tunread = subscription?.tunread?.length ?? 0;\n\tconst tunreadUser = subscription?.tunreadUser?.length ?? 0;\n\tconst tunreadGroup = subscription?.tunreadGroup?.length ?? 0;\n\tconst unread = tunread > 99 ? '99+' : tunread;\n\tconst variant = getVariant(tunreadUser, tunreadGroup);\n\tconst { t } = useTranslation();\n\n\treturn useMemo((): RoomToolboxActionConfig | undefined => {\n\t\tif (!enabled) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tid: 'thread',\n\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\tfull: true,\n\t\t\ttitle: 'Threads',\n\t\t\ticon: 'thread',\n\t\t\ttabComponent: Threads,\n\t\t\torder: 2,\n\t\t\trenderToolboxItem: ({ id, className, index, icon, title, toolbox: { tab }, action, disabled, tooltip }) => (\n\t\t\t\t<HeaderToolbarAction\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tindex={index}\n\t\t\t\t\tid={id}\n\t\t\t\t\ticon={icon}\n\t\t\t\t\ttitle={t(title)}\n\t\t\t\t\tpressed={id === tab?.id}\n\t\t\t\t\taction={action}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\ttooltip={tooltip}\n\t\t\t\t>\n\t\t\t\t\t{!!unread && <HeaderToolbarActionBadge variant={variant}>{unread}</HeaderToolbarActionBadge>}\n\t\t\t\t</HeaderToolbarAction>\n\t\t\t),\n\t\t};\n\t}, [enabled, t, unread, variant]);\n};\n"]}}},"code":"module.export({\n  useThreadRoomAction: () => useThreadRoomAction\n});\nlet useSetting;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useSetting(v) {\n    useSetting = v;\n  }\n}, 0);\nlet React, lazy, useMemo;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  lazy(v) {\n    lazy = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  }\n}, 1);\nlet useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 2);\nlet HeaderToolbarAction, HeaderToolbarActionBadge;\nmodule.link(\"../../components/Header\", {\n  HeaderToolbarAction(v) {\n    HeaderToolbarAction = v;\n  },\n  HeaderToolbarActionBadge(v) {\n    HeaderToolbarActionBadge = v;\n  }\n}, 3);\nlet useRoomSubscription;\nmodule.link(\"../../views/room/contexts/RoomContext\", {\n  useRoomSubscription(v) {\n    useRoomSubscription = v;\n  }\n}, 4);\nconst getVariant = (tunreadUser, tunreadGroup) => {\n  if (tunreadUser > 0) {\n    return 'danger';\n  }\n  if (tunreadGroup > 0) {\n    return 'warning';\n  }\n  return 'primary';\n};\nconst Threads = /*#__PURE__*/lazy(() => module.dynamicImport('../../views/room/contextualBar/Threads'));\nconst useThreadRoomAction = () => {\n  var _subscription$tunread, _subscription$tunread2, _subscription$tunread3, _subscription$tunread4, _subscription$tunread5, _subscription$tunread6;\n  const enabled = useSetting('Threads_enabled', false);\n  const subscription = useRoomSubscription();\n  const tunread = (_subscription$tunread = subscription === null || subscription === void 0 ? void 0 : (_subscription$tunread2 = subscription.tunread) === null || _subscription$tunread2 === void 0 ? void 0 : _subscription$tunread2.length) !== null && _subscription$tunread !== void 0 ? _subscription$tunread : 0;\n  const tunreadUser = (_subscription$tunread3 = subscription === null || subscription === void 0 ? void 0 : (_subscription$tunread4 = subscription.tunreadUser) === null || _subscription$tunread4 === void 0 ? void 0 : _subscription$tunread4.length) !== null && _subscription$tunread3 !== void 0 ? _subscription$tunread3 : 0;\n  const tunreadGroup = (_subscription$tunread5 = subscription === null || subscription === void 0 ? void 0 : (_subscription$tunread6 = subscription.tunreadGroup) === null || _subscription$tunread6 === void 0 ? void 0 : _subscription$tunread6.length) !== null && _subscription$tunread5 !== void 0 ? _subscription$tunread5 : 0;\n  const unread = tunread > 99 ? '99+' : tunread;\n  const variant = getVariant(tunreadUser, tunreadGroup);\n  const {\n    t\n  } = useTranslation();\n  return useMemo(() => {\n    if (!enabled) {\n      return undefined;\n    }\n    return {\n      id: 'thread',\n      groups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n      full: true,\n      title: 'Threads',\n      icon: 'thread',\n      tabComponent: Threads,\n      order: 2,\n      renderToolboxItem: _ref => {\n        let {\n          id,\n          className,\n          index,\n          icon,\n          title,\n          toolbox: {\n            tab\n          },\n          action,\n          disabled,\n          tooltip\n        } = _ref;\n        return /*#__PURE__*/React.createElement(HeaderToolbarAction, {\n          key: id,\n          className: className,\n          index: index,\n          id: id,\n          icon: icon,\n          title: t(title),\n          pressed: id === (tab === null || tab === void 0 ? void 0 : tab.id),\n          action: action,\n          disabled: disabled,\n          tooltip: tooltip\n        }, !!unread && /*#__PURE__*/React.createElement(HeaderToolbarActionBadge, {\n          variant: variant\n        }, unread));\n      }\n    };\n  }, [enabled, t, unread, variant]);\n};","map":{"version":3,"names":["module","export","useThreadRoomAction","useSetting","link","v","React","lazy","useMemo","default","useTranslation","HeaderToolbarAction","HeaderToolbarActionBadge","useRoomSubscription","getVariant","tunreadUser","tunreadGroup","Threads","dynamicImport","_subscription$tunread","_subscription$tunread2","_subscription$tunread3","_subscription$tunread4","_subscription$tunread5","_subscription$tunread6","enabled","subscription","tunread","length","unread","variant","t","undefined","id","groups","full","title","icon","tabComponent","order","renderToolboxItem","_ref","className","index","toolbox","tab","action","disabled","tooltip","createElement","key","pressed"],"sources":["client/hooks/roomActions/useThreadRoomAction.tsx"],"sourcesContent":["import type { BadgeProps } from '@rocket.chat/fuselage';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport React, { lazy, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { HeaderToolbarAction, HeaderToolbarActionBadge } from '../../components/Header';\nimport { useRoomSubscription } from '../../views/room/contexts/RoomContext';\nimport type { RoomToolboxActionConfig } from '../../views/room/contexts/RoomToolboxContext';\n\nconst getVariant = (tunreadUser: number, tunreadGroup: number): BadgeProps['variant'] => {\n\tif (tunreadUser > 0) {\n\t\treturn 'danger';\n\t}\n\n\tif (tunreadGroup > 0) {\n\t\treturn 'warning';\n\t}\n\n\treturn 'primary';\n};\n\nconst Threads = lazy(() => import('../../views/room/contextualBar/Threads'));\n\nexport const useThreadRoomAction = () => {\n\tconst enabled = useSetting('Threads_enabled', false);\n\tconst subscription = useRoomSubscription();\n\n\tconst tunread = subscription?.tunread?.length ?? 0;\n\tconst tunreadUser = subscription?.tunreadUser?.length ?? 0;\n\tconst tunreadGroup = subscription?.tunreadGroup?.length ?? 0;\n\tconst unread = tunread > 99 ? '99+' : tunread;\n\tconst variant = getVariant(tunreadUser, tunreadGroup);\n\tconst { t } = useTranslation();\n\n\treturn useMemo((): RoomToolboxActionConfig | undefined => {\n\t\tif (!enabled) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tid: 'thread',\n\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\tfull: true,\n\t\t\ttitle: 'Threads',\n\t\t\ticon: 'thread',\n\t\t\ttabComponent: Threads,\n\t\t\torder: 2,\n\t\t\trenderToolboxItem: ({ id, className, index, icon, title, toolbox: { tab }, action, disabled, tooltip }) => (\n\t\t\t\t<HeaderToolbarAction\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tindex={index}\n\t\t\t\t\tid={id}\n\t\t\t\t\ticon={icon}\n\t\t\t\t\ttitle={t(title)}\n\t\t\t\t\tpressed={id === tab?.id}\n\t\t\t\t\taction={action}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\ttooltip={tooltip}\n\t\t\t\t>\n\t\t\t\t\t{!!unread && <HeaderToolbarActionBadge variant={variant}>{unread}</HeaderToolbarActionBadge>}\n\t\t\t\t</HeaderToolbarAction>\n\t\t\t),\n\t\t};\n\t}, [enabled, t, unread, variant]);\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"13c62b5e3e38cbf0e6d1e97dee1a30c72f0b65c0"}
