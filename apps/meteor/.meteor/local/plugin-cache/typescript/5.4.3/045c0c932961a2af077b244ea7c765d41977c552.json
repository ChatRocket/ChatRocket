{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/livechat/client/lib/chartHandler.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"app/livechat/client/lib/chartHandler.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/livechat/client/lib/chartHandler.ts","inputSourceMap":{"version":3,"file":"app/livechat/client/lib/chartHandler.ts","sourceRoot":"","sources":["app/livechat/client/lib/chartHandler.ts"],"names":[],"mappings":"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","sourcesContent":["import type * as chartjs from 'chart.js';\n\nimport { t } from '../../../utils/lib/i18n';\n\ntype LineChartConfigOptions = Partial<{\n\tlegends: boolean;\n\tanim: boolean;\n\tdisplayColors: boolean;\n\tsmallTicks: boolean;\n\ttooltipCallbacks: any;\n}>;\n\nconst lineChartConfiguration = ({\n\tlegends = false,\n\tanim = false,\n\ttooltipCallbacks = {},\n}: LineChartConfigOptions): Partial<chartjs.ChartConfiguration<'line', number, string>['options']> => {\n\tconst config: chartjs.ChartConfiguration<'line', number, string>['options'] = {\n\t\tlayout: {\n\t\t\tpadding: {\n\t\t\t\ttop: 10,\n\t\t\t\tbottom: 0,\n\t\t\t},\n\t\t},\n\t\tlegend: {\n\t\t\tdisplay: false,\n\t\t},\n\t\tplugins: {\n\t\t\ttooltip: {\n\t\t\t\tusePointStyle: true,\n\t\t\t\tenabled: true,\n\t\t\t\tmode: 'point',\n\t\t\t\tyAlign: 'bottom',\n\t\t\t\tdisplayColors: true,\n\t\t\t\t...tooltipCallbacks,\n\t\t\t},\n\t\t},\n\t\tscales: {\n\t\t\txAxis: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t},\n\t\t\t},\n\t\t\tyAxis: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\thover: {\n\t\t\tintersect: false, // duration of animations when hovering an item\n\t\t\tmode: 'index',\n\t\t},\n\t\tresponsive: true,\n\t\tmaintainAspectRatio: false,\n\t\t...(!anim ? { animation: { duration: 0 } } : {}),\n\t\t...(legends ? { legend: { display: true, labels: { boxWidth: 20, fontSize: 8 } } } : {}),\n\t};\n\n\treturn config;\n};\n\nconst doughnutChartConfiguration = (\n\ttitle: string,\n\ttooltipCallbacks = {},\n): Partial<chartjs.ChartConfiguration<'doughnut', number, string>['options']> => ({\n\tlayout: {\n\t\tpadding: {\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t},\n\t},\n\tplugins: {\n\t\tlegend: {\n\t\t\tdisplay: true,\n\t\t\tposition: 'right',\n\t\t\tlabels: {\n\t\t\t\tboxWidth: 20,\n\t\t\t},\n\t\t},\n\t\ttitle: {\n\t\t\tdisplay: true,\n\t\t\ttext: title,\n\t\t},\n\t\ttooltip: {\n\t\t\tenabled: true,\n\t\t\tmode: 'point',\n\t\t\tdisplayColors: true, // hide color box\n\t\t\t...tooltipCallbacks,\n\t\t},\n\t},\n\t// animation: {\n\t// \tduration: 0 // general animation time\n\t// },\n\thover: {\n\t\tintersect: true, // duration of animations when hovering an item\n\t},\n\tresponsive: true,\n\tmaintainAspectRatio: false,\n});\n\ntype ChartDataSet = {\n\tlabel: string;\n\tdata: number[];\n\tbackgroundColor: string;\n\tborderColor: string;\n\tborderWidth: number;\n\tfill: boolean;\n};\n\nexport const drawLineChart = async (\n\tchart: HTMLCanvasElement,\n\tchartContext: chartjs.Chart<'line'> | undefined,\n\tchartLabels: string[],\n\tdataLabels: string[],\n\tdataSets: number[][],\n\toptions: LineChartConfigOptions = {},\n) => {\n\tif (!chart) {\n\t\tthrow new Error('No chart element');\n\t}\n\tchartContext?.destroy();\n\n\tconst colors = ['#2de0a5', '#ffd21f', '#f5455c', '#cbced1'];\n\n\tconst datasets: ChartDataSet[] = [];\n\n\tchartLabels.forEach((chartLabel: string, index: number) => {\n\t\tdatasets.push({\n\t\t\tlabel: t(chartLabel), // chart label\n\t\t\tdata: dataSets[index], // data points corresponding to data labels, x-axis points\n\t\t\tbackgroundColor: colors[index],\n\t\t\tborderColor: colors[index],\n\t\t\tborderWidth: 3,\n\t\t\tfill: false,\n\t\t});\n\t});\n\n\tconst { default: Chart } = await import('chart.js/auto');\n\treturn new Chart(chart, {\n\t\ttype: 'line',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets,\n\t\t},\n\t\toptions: lineChartConfiguration(options),\n\t});\n};\n\nexport const drawDoughnutChart = async (\n\tchart: chartjs.ChartItem,\n\ttitle: string,\n\tchartContext: chartjs.Chart<'doughnut'> | undefined,\n\tdataLabels: string[],\n\tdataPoints: number[],\n) => {\n\tif (!chart) {\n\t\tthrow new Error('No chart element');\n\t}\n\tchartContext?.destroy();\n\n\tconst { default: Chart } = await import('chart.js/auto');\n\treturn new Chart(chart, {\n\t\ttype: 'doughnut',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tdata: dataPoints, // data points corresponding to data labels, x-axis points\n\t\t\t\t\tbackgroundColor: ['#2de0a5', '#cbced1', '#f5455c', '#ffd21f'],\n\t\t\t\t\tborderWidth: 0,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\toptions: doughnutChartConfiguration(title),\n\t});\n};\n\nexport const updateChart = async <TChartType extends chartjs.ChartType>(\n\tchart: chartjs.Chart<TChartType>,\n\tlabel: string,\n\tdata: chartjs.DefaultDataPoint<TChartType>,\n): Promise<void> => {\n\tif (chart.data?.labels?.indexOf(label) === -1) {\n\t\t// insert data\n\t\tchart.data.labels.push(label);\n\t\tchart.data.datasets.forEach((dataset: { data: any[] }, idx: number) => {\n\t\t\tdataset.data.push(data[idx]);\n\t\t});\n\t} else {\n\t\t// update data\n\t\tconst index = chart.data?.labels?.indexOf(label);\n\t\tif (typeof index === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tchart.data.datasets.forEach((dataset: { data: { [x: string]: any } }, idx: number) => {\n\t\t\tdataset.data[index] = data[idx];\n\t\t});\n\t}\n\n\tchart.update();\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/livechat/client/lib/chartHandler.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/livechat/client/lib/chartHandler.ts","inputSourceMap":{"version":3,"file":"app/livechat/client/lib/chartHandler.ts","sourceRoot":"","sources":["app/livechat/client/lib/chartHandler.ts"],"names":[],"mappings":"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","sourcesContent":["import type * as chartjs from 'chart.js';\n\nimport { t } from '../../../utils/lib/i18n';\n\ntype LineChartConfigOptions = Partial<{\n\tlegends: boolean;\n\tanim: boolean;\n\tdisplayColors: boolean;\n\tsmallTicks: boolean;\n\ttooltipCallbacks: any;\n}>;\n\nconst lineChartConfiguration = ({\n\tlegends = false,\n\tanim = false,\n\ttooltipCallbacks = {},\n}: LineChartConfigOptions): Partial<chartjs.ChartConfiguration<'line', number, string>['options']> => {\n\tconst config: chartjs.ChartConfiguration<'line', number, string>['options'] = {\n\t\tlayout: {\n\t\t\tpadding: {\n\t\t\t\ttop: 10,\n\t\t\t\tbottom: 0,\n\t\t\t},\n\t\t},\n\t\tlegend: {\n\t\t\tdisplay: false,\n\t\t},\n\t\tplugins: {\n\t\t\ttooltip: {\n\t\t\t\tusePointStyle: true,\n\t\t\t\tenabled: true,\n\t\t\t\tmode: 'point',\n\t\t\t\tyAlign: 'bottom',\n\t\t\t\tdisplayColors: true,\n\t\t\t\t...tooltipCallbacks,\n\t\t\t},\n\t\t},\n\t\tscales: {\n\t\t\txAxis: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t},\n\t\t\t},\n\t\t\tyAxis: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\thover: {\n\t\t\tintersect: false, // duration of animations when hovering an item\n\t\t\tmode: 'index',\n\t\t},\n\t\tresponsive: true,\n\t\tmaintainAspectRatio: false,\n\t\t...(!anim ? { animation: { duration: 0 } } : {}),\n\t\t...(legends ? { legend: { display: true, labels: { boxWidth: 20, fontSize: 8 } } } : {}),\n\t};\n\n\treturn config;\n};\n\nconst doughnutChartConfiguration = (\n\ttitle: string,\n\ttooltipCallbacks = {},\n): Partial<chartjs.ChartConfiguration<'doughnut', number, string>['options']> => ({\n\tlayout: {\n\t\tpadding: {\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t},\n\t},\n\tplugins: {\n\t\tlegend: {\n\t\t\tdisplay: true,\n\t\t\tposition: 'right',\n\t\t\tlabels: {\n\t\t\t\tboxWidth: 20,\n\t\t\t},\n\t\t},\n\t\ttitle: {\n\t\t\tdisplay: true,\n\t\t\ttext: title,\n\t\t},\n\t\ttooltip: {\n\t\t\tenabled: true,\n\t\t\tmode: 'point',\n\t\t\tdisplayColors: true, // hide color box\n\t\t\t...tooltipCallbacks,\n\t\t},\n\t},\n\t// animation: {\n\t// \tduration: 0 // general animation time\n\t// },\n\thover: {\n\t\tintersect: true, // duration of animations when hovering an item\n\t},\n\tresponsive: true,\n\tmaintainAspectRatio: false,\n});\n\ntype ChartDataSet = {\n\tlabel: string;\n\tdata: number[];\n\tbackgroundColor: string;\n\tborderColor: string;\n\tborderWidth: number;\n\tfill: boolean;\n};\n\nexport const drawLineChart = async (\n\tchart: HTMLCanvasElement,\n\tchartContext: chartjs.Chart<'line'> | undefined,\n\tchartLabels: string[],\n\tdataLabels: string[],\n\tdataSets: number[][],\n\toptions: LineChartConfigOptions = {},\n) => {\n\tif (!chart) {\n\t\tthrow new Error('No chart element');\n\t}\n\tchartContext?.destroy();\n\n\tconst colors = ['#2de0a5', '#ffd21f', '#f5455c', '#cbced1'];\n\n\tconst datasets: ChartDataSet[] = [];\n\n\tchartLabels.forEach((chartLabel: string, index: number) => {\n\t\tdatasets.push({\n\t\t\tlabel: t(chartLabel), // chart label\n\t\t\tdata: dataSets[index], // data points corresponding to data labels, x-axis points\n\t\t\tbackgroundColor: colors[index],\n\t\t\tborderColor: colors[index],\n\t\t\tborderWidth: 3,\n\t\t\tfill: false,\n\t\t});\n\t});\n\n\tconst { default: Chart } = await import('chart.js/auto');\n\treturn new Chart(chart, {\n\t\ttype: 'line',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets,\n\t\t},\n\t\toptions: lineChartConfiguration(options),\n\t});\n};\n\nexport const drawDoughnutChart = async (\n\tchart: chartjs.ChartItem,\n\ttitle: string,\n\tchartContext: chartjs.Chart<'doughnut'> | undefined,\n\tdataLabels: string[],\n\tdataPoints: number[],\n) => {\n\tif (!chart) {\n\t\tthrow new Error('No chart element');\n\t}\n\tchartContext?.destroy();\n\n\tconst { default: Chart } = await import('chart.js/auto');\n\treturn new Chart(chart, {\n\t\ttype: 'doughnut',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tdata: dataPoints, // data points corresponding to data labels, x-axis points\n\t\t\t\t\tbackgroundColor: ['#2de0a5', '#cbced1', '#f5455c', '#ffd21f'],\n\t\t\t\t\tborderWidth: 0,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\toptions: doughnutChartConfiguration(title),\n\t});\n};\n\nexport const updateChart = async <TChartType extends chartjs.ChartType>(\n\tchart: chartjs.Chart<TChartType>,\n\tlabel: string,\n\tdata: chartjs.DefaultDataPoint<TChartType>,\n): Promise<void> => {\n\tif (chart.data?.labels?.indexOf(label) === -1) {\n\t\t// insert data\n\t\tchart.data.labels.push(label);\n\t\tchart.data.datasets.forEach((dataset: { data: any[] }, idx: number) => {\n\t\t\tdataset.data.push(data[idx]);\n\t\t});\n\t} else {\n\t\t// update data\n\t\tconst index = chart.data?.labels?.indexOf(label);\n\t\tif (typeof index === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tchart.data.datasets.forEach((dataset: { data: { [x: string]: any } }, idx: number) => {\n\t\t\tdataset.data[index] = data[idx];\n\t\t});\n\t}\n\n\tchart.update();\n};\n"]}}},"code":"let _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 0);\nmodule.export({\n  drawLineChart: () => drawLineChart,\n  drawDoughnutChart: () => drawDoughnutChart,\n  updateChart: () => updateChart\n});\nlet t;\nmodule.link(\"../../../utils/lib/i18n\", {\n  t(v) {\n    t = v;\n  }\n}, 0);\nconst lineChartConfiguration = _ref => {\n  let {\n    legends = false,\n    anim = false,\n    tooltipCallbacks = {}\n  } = _ref;\n  const config = _objectSpread(_objectSpread({\n    layout: {\n      padding: {\n        top: 10,\n        bottom: 0\n      }\n    },\n    legend: {\n      display: false\n    },\n    plugins: {\n      tooltip: _objectSpread({\n        usePointStyle: true,\n        enabled: true,\n        mode: 'point',\n        yAlign: 'bottom',\n        displayColors: true\n      }, tooltipCallbacks)\n    },\n    scales: {\n      xAxis: {\n        title: {\n          display: false\n        },\n        grid: {\n          display: true,\n          color: 'rgba(0, 0, 0, 0.03)'\n        }\n      },\n      yAxis: {\n        title: {\n          display: false\n        },\n        grid: {\n          display: true,\n          color: 'rgba(0, 0, 0, 0.03)'\n        }\n      }\n    },\n    hover: {\n      intersect: false,\n      // duration of animations when hovering an item\n      mode: 'index'\n    },\n    responsive: true,\n    maintainAspectRatio: false\n  }, !anim ? {\n    animation: {\n      duration: 0\n    }\n  } : {}), legends ? {\n    legend: {\n      display: true,\n      labels: {\n        boxWidth: 20,\n        fontSize: 8\n      }\n    }\n  } : {});\n  return config;\n};\nconst doughnutChartConfiguration = function (title) {\n  let tooltipCallbacks = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return {\n    layout: {\n      padding: {\n        top: 0,\n        bottom: 0\n      }\n    },\n    plugins: {\n      legend: {\n        display: true,\n        position: 'right',\n        labels: {\n          boxWidth: 20\n        }\n      },\n      title: {\n        display: true,\n        text: title\n      },\n      tooltip: _objectSpread({\n        enabled: true,\n        mode: 'point',\n        displayColors: true\n      }, tooltipCallbacks)\n    },\n    // animation: {\n    // \tduration: 0 // general animation time\n    // },\n    hover: {\n      intersect: true // duration of animations when hovering an item\n    },\n    responsive: true,\n    maintainAspectRatio: false\n  };\n};\nconst drawLineChart = async function (chart, chartContext, chartLabels, dataLabels, dataSets) {\n  let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n  if (!chart) {\n    throw new Error('No chart element');\n  }\n  chartContext === null || chartContext === void 0 ? void 0 : chartContext.destroy();\n  const colors = ['#2de0a5', '#ffd21f', '#f5455c', '#cbced1'];\n  const datasets = [];\n  chartLabels.forEach((chartLabel, index) => {\n    datasets.push({\n      label: t(chartLabel),\n      // chart label\n      data: dataSets[index],\n      // data points corresponding to data labels, x-axis points\n      backgroundColor: colors[index],\n      borderColor: colors[index],\n      borderWidth: 3,\n      fill: false\n    });\n  });\n  const {\n    default: Chart\n  } = await module.dynamicImport('chart.js/auto');\n  return new Chart(chart, {\n    type: 'line',\n    data: {\n      labels: dataLabels,\n      // data labels, y-axis points\n      datasets\n    },\n    options: lineChartConfiguration(options)\n  });\n};\nconst drawDoughnutChart = async (chart, title, chartContext, dataLabels, dataPoints) => {\n  if (!chart) {\n    throw new Error('No chart element');\n  }\n  chartContext === null || chartContext === void 0 ? void 0 : chartContext.destroy();\n  const {\n    default: Chart\n  } = await module.dynamicImport('chart.js/auto');\n  return new Chart(chart, {\n    type: 'doughnut',\n    data: {\n      labels: dataLabels,\n      // data labels, y-axis points\n      datasets: [{\n        data: dataPoints,\n        // data points corresponding to data labels, x-axis points\n        backgroundColor: ['#2de0a5', '#cbced1', '#f5455c', '#ffd21f'],\n        borderWidth: 0\n      }]\n    },\n    options: doughnutChartConfiguration(title)\n  });\n};\nconst updateChart = async (chart, label, data) => {\n  var _chart$data, _chart$data$labels;\n  if (((_chart$data = chart.data) === null || _chart$data === void 0 ? void 0 : (_chart$data$labels = _chart$data.labels) === null || _chart$data$labels === void 0 ? void 0 : _chart$data$labels.indexOf(label)) === -1) {\n    // insert data\n    chart.data.labels.push(label);\n    chart.data.datasets.forEach((dataset, idx) => {\n      dataset.data.push(data[idx]);\n    });\n  } else {\n    var _chart$data2, _chart$data2$labels;\n    // update data\n    const index = (_chart$data2 = chart.data) === null || _chart$data2 === void 0 ? void 0 : (_chart$data2$labels = _chart$data2.labels) === null || _chart$data2$labels === void 0 ? void 0 : _chart$data2$labels.indexOf(label);\n    if (typeof index === 'undefined') {\n      return;\n    }\n    chart.data.datasets.forEach((dataset, idx) => {\n      dataset.data[index] = data[idx];\n    });\n  }\n  chart.update();\n};","map":{"version":3,"names":["_objectSpread","module","link","default","v","export","drawLineChart","drawDoughnutChart","updateChart","t","lineChartConfiguration","_ref","legends","anim","tooltipCallbacks","config","layout","padding","top","bottom","legend","display","plugins","tooltip","usePointStyle","enabled","mode","yAlign","displayColors","scales","xAxis","title","grid","color","yAxis","hover","intersect","responsive","maintainAspectRatio","animation","duration","labels","boxWidth","fontSize","doughnutChartConfiguration","arguments","length","undefined","position","text","chart","chartContext","chartLabels","dataLabels","dataSets","options","Error","destroy","colors","datasets","forEach","chartLabel","index","push","label","data","backgroundColor","borderColor","borderWidth","fill","Chart","dynamicImport","type","dataPoints","_chart$data","_chart$data$labels","indexOf","dataset","idx","_chart$data2","_chart$data2$labels","update"],"sources":["app/livechat/client/lib/chartHandler.ts"],"sourcesContent":["import type * as chartjs from 'chart.js';\n\nimport { t } from '../../../utils/lib/i18n';\n\ntype LineChartConfigOptions = Partial<{\n\tlegends: boolean;\n\tanim: boolean;\n\tdisplayColors: boolean;\n\tsmallTicks: boolean;\n\ttooltipCallbacks: any;\n}>;\n\nconst lineChartConfiguration = ({\n\tlegends = false,\n\tanim = false,\n\ttooltipCallbacks = {},\n}: LineChartConfigOptions): Partial<chartjs.ChartConfiguration<'line', number, string>['options']> => {\n\tconst config: chartjs.ChartConfiguration<'line', number, string>['options'] = {\n\t\tlayout: {\n\t\t\tpadding: {\n\t\t\t\ttop: 10,\n\t\t\t\tbottom: 0,\n\t\t\t},\n\t\t},\n\t\tlegend: {\n\t\t\tdisplay: false,\n\t\t},\n\t\tplugins: {\n\t\t\ttooltip: {\n\t\t\t\tusePointStyle: true,\n\t\t\t\tenabled: true,\n\t\t\t\tmode: 'point',\n\t\t\t\tyAlign: 'bottom',\n\t\t\t\tdisplayColors: true,\n\t\t\t\t...tooltipCallbacks,\n\t\t\t},\n\t\t},\n\t\tscales: {\n\t\t\txAxis: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t},\n\t\t\t},\n\t\t\tyAxis: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\thover: {\n\t\t\tintersect: false, // duration of animations when hovering an item\n\t\t\tmode: 'index',\n\t\t},\n\t\tresponsive: true,\n\t\tmaintainAspectRatio: false,\n\t\t...(!anim ? { animation: { duration: 0 } } : {}),\n\t\t...(legends ? { legend: { display: true, labels: { boxWidth: 20, fontSize: 8 } } } : {}),\n\t};\n\n\treturn config;\n};\n\nconst doughnutChartConfiguration = (\n\ttitle: string,\n\ttooltipCallbacks = {},\n): Partial<chartjs.ChartConfiguration<'doughnut', number, string>['options']> => ({\n\tlayout: {\n\t\tpadding: {\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t},\n\t},\n\tplugins: {\n\t\tlegend: {\n\t\t\tdisplay: true,\n\t\t\tposition: 'right',\n\t\t\tlabels: {\n\t\t\t\tboxWidth: 20,\n\t\t\t},\n\t\t},\n\t\ttitle: {\n\t\t\tdisplay: true,\n\t\t\ttext: title,\n\t\t},\n\t\ttooltip: {\n\t\t\tenabled: true,\n\t\t\tmode: 'point',\n\t\t\tdisplayColors: true, // hide color box\n\t\t\t...tooltipCallbacks,\n\t\t},\n\t},\n\t// animation: {\n\t// \tduration: 0 // general animation time\n\t// },\n\thover: {\n\t\tintersect: true, // duration of animations when hovering an item\n\t},\n\tresponsive: true,\n\tmaintainAspectRatio: false,\n});\n\ntype ChartDataSet = {\n\tlabel: string;\n\tdata: number[];\n\tbackgroundColor: string;\n\tborderColor: string;\n\tborderWidth: number;\n\tfill: boolean;\n};\n\nexport const drawLineChart = async (\n\tchart: HTMLCanvasElement,\n\tchartContext: chartjs.Chart<'line'> | undefined,\n\tchartLabels: string[],\n\tdataLabels: string[],\n\tdataSets: number[][],\n\toptions: LineChartConfigOptions = {},\n) => {\n\tif (!chart) {\n\t\tthrow new Error('No chart element');\n\t}\n\tchartContext?.destroy();\n\n\tconst colors = ['#2de0a5', '#ffd21f', '#f5455c', '#cbced1'];\n\n\tconst datasets: ChartDataSet[] = [];\n\n\tchartLabels.forEach((chartLabel: string, index: number) => {\n\t\tdatasets.push({\n\t\t\tlabel: t(chartLabel), // chart label\n\t\t\tdata: dataSets[index], // data points corresponding to data labels, x-axis points\n\t\t\tbackgroundColor: colors[index],\n\t\t\tborderColor: colors[index],\n\t\t\tborderWidth: 3,\n\t\t\tfill: false,\n\t\t});\n\t});\n\n\tconst { default: Chart } = await import('chart.js/auto');\n\treturn new Chart(chart, {\n\t\ttype: 'line',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets,\n\t\t},\n\t\toptions: lineChartConfiguration(options),\n\t});\n};\n\nexport const drawDoughnutChart = async (\n\tchart: chartjs.ChartItem,\n\ttitle: string,\n\tchartContext: chartjs.Chart<'doughnut'> | undefined,\n\tdataLabels: string[],\n\tdataPoints: number[],\n) => {\n\tif (!chart) {\n\t\tthrow new Error('No chart element');\n\t}\n\tchartContext?.destroy();\n\n\tconst { default: Chart } = await import('chart.js/auto');\n\treturn new Chart(chart, {\n\t\ttype: 'doughnut',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tdata: dataPoints, // data points corresponding to data labels, x-axis points\n\t\t\t\t\tbackgroundColor: ['#2de0a5', '#cbced1', '#f5455c', '#ffd21f'],\n\t\t\t\t\tborderWidth: 0,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\toptions: doughnutChartConfiguration(title),\n\t});\n};\n\nexport const updateChart = async <TChartType extends chartjs.ChartType>(\n\tchart: chartjs.Chart<TChartType>,\n\tlabel: string,\n\tdata: chartjs.DefaultDataPoint<TChartType>,\n): Promise<void> => {\n\tif (chart.data?.labels?.indexOf(label) === -1) {\n\t\t// insert data\n\t\tchart.data.labels.push(label);\n\t\tchart.data.datasets.forEach((dataset: { data: any[] }, idx: number) => {\n\t\t\tdataset.data.push(data[idx]);\n\t\t});\n\t} else {\n\t\t// update data\n\t\tconst index = chart.data?.labels?.indexOf(label);\n\t\tif (typeof index === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tchart.data.datasets.forEach((dataset: { data: { [x: string]: any } }, idx: number) => {\n\t\t\tdataset.data[index] = data[idx];\n\t\t});\n\t}\n\n\tchart.update();\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"045c0c932961a2af077b244ea7c765d41977c552"}
