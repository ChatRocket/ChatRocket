{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/currentChats/CurrentChatsPage.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/omnichannel/currentChats/CurrentChatsPage.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/currentChats/CurrentChatsPage.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/currentChats/CurrentChatsPage.tsx","sourceRoot":"","sources":["client/views/omnichannel/currentChats/CurrentChatsPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Callout, Pagination } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { GETLivechatRoomsParams } from '@rocket.chat/rest-typings';\nimport { usePermission, useTranslation } from '@rocket.chat/ui-contexts';\nimport { hashQueryKey } from '@tanstack/react-query';\nimport moment from 'moment';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React, { memo, useCallback, useMemo, useState } from 'react';\n\nimport GenericNoResults from '../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableCell,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n\tGenericTableRow,\n} from '../../../components/GenericTable';\nimport { usePagination } from '../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../components/GenericTable/hooks/useSort';\nimport { Page, PageHeader, PageContent } from '../../../components/Page';\nimport { useIsOverMacLimit } from '../../../hooks/omnichannel/useIsOverMacLimit';\nimport { RoomActivityIcon } from '../../../omnichannel/components/RoomActivityIcon';\nimport { useOmnichannelPriorities } from '../../../omnichannel/hooks/useOmnichannelPriorities';\nimport { PriorityIcon } from '../../../omnichannel/priorities/PriorityIcon';\nimport CustomFieldsList from './CustomFieldsList';\nimport FilterByText from './FilterByText';\nimport RemoveChatButton from './RemoveChatButton';\nimport { useAllCustomFields } from './hooks/useAllCustomFields';\nimport { useCurrentChats } from './hooks/useCurrentChats';\n\ntype DebouncedParams = {\n\tfname: string;\n\tguest: string;\n\tservedBy: string;\n\tdepartment: string;\n\tstatus: string;\n\tfrom: string;\n\tto: string;\n\ttags: any[];\n};\n\ntype CurrentChatQuery = {\n\tagents?: string[];\n\toffset?: number;\n\troomName?: string;\n\tdepartmentId?: string;\n\topen?: boolean;\n\tcreatedAt?: string;\n\tclosedAt?: string;\n\ttags?: string[];\n\tonhold?: boolean;\n\tcustomFields?: string;\n\tsort: string;\n\tcount?: number;\n\tqueued?: boolean;\n};\n\ntype useQueryType = (\n\tdebouncedParams: DebouncedParams,\n\tcustomFields: { [key: string]: string } | undefined,\n\t[column, direction]: [string, 'asc' | 'desc'],\n\tcurrent: number,\n\titemsPerPage: 25 | 50 | 100,\n) => GETLivechatRoomsParams;\n\nconst sortDir = (sortDir: 'asc' | 'desc'): 1 | -1 => (sortDir === 'asc' ? 1 : -1);\n\nconst currentChatQuery: useQueryType = (\n\t{ guest, servedBy, department, status, from, to, tags },\n\tcustomFields,\n\t[column, direction],\n\tcurrent,\n\titemsPerPage,\n) => {\n\tconst query: CurrentChatQuery = {\n\t\t...(guest && { roomName: guest }),\n\t\tsort: JSON.stringify({\n\t\t\t[column]: sortDir(direction),\n\t\t\tts: column === 'ts' ? sortDir(direction) : undefined,\n\t\t}),\n\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t...(current && { offset: current }),\n\t};\n\n\tif (from || to) {\n\t\tquery.createdAt = JSON.stringify({\n\t\t\t...(from && {\n\t\t\t\tstart: moment(new Date(from)).set({ hour: 0, minutes: 0, seconds: 0 }).toISOString(),\n\t\t\t}),\n\t\t\t...(to && {\n\t\t\t\tend: moment(new Date(to)).set({ hour: 23, minutes: 59, seconds: 59 }).toISOString(),\n\t\t\t}),\n\t\t});\n\t}\n\n\tif (status !== 'all') {\n\t\tquery.open = status === 'opened' || status === 'onhold' || status === 'queued';\n\t\tquery.onhold = status === 'onhold';\n\t\tquery.queued = status === 'queued';\n\t}\n\tif (servedBy && servedBy !== 'all') {\n\t\tquery.agents = [servedBy];\n\t}\n\tif (department && department !== 'all') {\n\t\tquery.departmentId = department;\n\t}\n\n\tif (tags && tags.length > 0) {\n\t\tquery.tags = tags;\n\t}\n\n\tif (customFields && Object.keys(customFields).length > 0) {\n\t\tconst customFieldsQuery = Object.fromEntries(Object.entries(customFields).filter((item) => item[1] !== undefined && item[1] !== ''));\n\t\tif (Object.keys(customFieldsQuery).length > 0) {\n\t\t\tquery.customFields = JSON.stringify(customFieldsQuery);\n\t\t}\n\t}\n\n\treturn query;\n};\n\nconst CurrentChatsPage = ({ id, onRowClick }: { id?: string; onRowClick: (_id: string) => void }): ReactElement => {\n\tconst isWorkspaceOverMacLimit = useIsOverMacLimit();\n\tconst { sortBy, sortDirection, setSort } = useSort<'fname' | 'departmentId' | 'servedBy' | 'priorityWeight' | 'ts' | 'lm' | 'open'>(\n\t\t'ts',\n\t\t'desc',\n\t);\n\tconst [customFields, setCustomFields] = useState<{ [key: string]: string }>();\n\n\tconst t = useTranslation();\n\n\tconst canRemoveClosedChats = usePermission('remove-closed-livechat-room');\n\tconst { enabled: isPriorityEnabled } = useOmnichannelPriorities();\n\n\tconst { data: allCustomFields } = useAllCustomFields();\n\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\n\tconst [params, setParams] = useState({\n\t\tguest: '',\n\t\tfname: '',\n\t\tservedBy: '',\n\t\tstatus: 'all',\n\t\tdepartment: '',\n\t\tfrom: '',\n\t\tto: '',\n\t\ttags: [] as string[],\n\t});\n\n\tconst hasCustomFields = useMemo(\n\t\t() => !!allCustomFields?.customFields?.find((customField) => customField.scope === 'room'),\n\t\t[allCustomFields],\n\t);\n\n\tconst query = useMemo(\n\t\t() => currentChatQuery(params, customFields, [sortBy, sortDirection], current, itemsPerPage),\n\t\t[customFields, itemsPerPage, params, sortBy, sortDirection, current],\n\t);\n\n\tconst { data, isLoading, isSuccess } = useCurrentChats(query);\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst onFilter = useMutableCallback((params: DebouncedParams): void => {\n\t\tsetParams(params);\n\t\tsetCurrent(0);\n\t});\n\n\tconst renderRow = useCallback(\n\t\t(room) => {\n\t\t\tconst { _id, fname, servedBy, ts, lm, department, open, onHold, priorityWeight } = room;\n\t\t\tconst getStatusText = (open: boolean, onHold: boolean, servedBy: boolean): string => {\n\t\t\t\tif (!open) return t('Closed');\n\t\t\t\tif (open && !servedBy) return t('Queued');\n\t\t\t\treturn onHold ? t('On_Hold_Chats') : t('Room_Status_Open');\n\t\t\t};\n\n\t\t\treturn (\n\t\t\t\t<GenericTableRow key={_id} onClick={(): void => onRowClick(_id)} action data-qa-id={fname}>\n\t\t\t\t\t{isPriorityEnabled && (\n\t\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-priority'>\n\t\t\t\t\t\t\t<PriorityIcon level={priorityWeight} />\n\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t)}\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-name'>\n\t\t\t\t\t\t{fname}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-department'>\n\t\t\t\t\t\t{department ? department.name : ''}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-servedBy'>\n\t\t\t\t\t\t{servedBy?.username}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-startedAt'>\n\t\t\t\t\t\t{moment(ts).format('L LTS')}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-lastMessage'>\n\t\t\t\t\t\t{moment(lm).format('L LTS')}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-status'>\n\t\t\t\t\t\t<RoomActivityIcon room={room} /> {getStatusText(open, onHold, !!servedBy?.username)}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t{canRemoveClosedChats && !open && <RemoveChatButton _id={_id} />}\n\t\t\t\t</GenericTableRow>\n\t\t\t);\n\t\t},\n\t\t[canRemoveClosedChats, onRowClick, isPriorityEnabled, t],\n\t);\n\n\tconst headers = (\n\t\t<>\n\t\t\t{isPriorityEnabled && (\n\t\t\t\t<GenericTableHeaderCell\n\t\t\t\t\tkey='priorityWeight'\n\t\t\t\t\tdirection={sortDirection}\n\t\t\t\t\tactive={sortBy === 'priorityWeight'}\n\t\t\t\t\tonClick={setSort}\n\t\t\t\t\tsort='priorityWeight'\n\t\t\t\t\tw='x100'\n\t\t\t\t\talignItems='center'\n\t\t\t\t>\n\t\t\t\t\t{t('Priority')}\n\t\t\t\t</GenericTableHeaderCell>\n\t\t\t)}\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='fname'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'fname'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='fname'\n\t\t\t\tdata-qa='current-chats-header-name'\n\t\t\t>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='departmentId'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'departmentId'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='departmentId'\n\t\t\t\tdata-qa='current-chats-header-department'\n\t\t\t>\n\t\t\t\t{t('Department')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='servedBy'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'servedBy'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='servedBy'\n\t\t\t\tdata-qa='current-chats-header-servedBy'\n\t\t\t>\n\t\t\t\t{t('Served_By')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='ts'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'ts'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='ts'\n\t\t\t\tdata-qa='current-chats-header-startedAt'\n\t\t\t>\n\t\t\t\t{t('Started_At')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='lm'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'lm'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='lm'\n\t\t\t\tdata-qa='current-chats-header-lastMessage'\n\t\t\t>\n\t\t\t\t{t('Last_Message')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='open'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'open'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='open'\n\t\t\t\tw='x100'\n\t\t\t\tdata-qa='current-chats-header-status'\n\t\t\t>\n\t\t\t\t{t('Status')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t{canRemoveClosedChats && (\n\t\t\t\t<GenericTableHeaderCell key='remove' w='x60' data-qa='current-chats-header-remove'>\n\t\t\t\t\t{t('Remove')}\n\t\t\t\t</GenericTableHeaderCell>\n\t\t\t)}\n\t\t</>\n\t);\n\n\t// TODO: Missing error state\n\treturn (\n\t\t<Page flexDirection='row'>\n\t\t\t<Page>\n\t\t\t\t<PageHeader title={t('Current_Chats')} />\n\t\t\t\t<PageContent>\n\t\t\t\t\t{((isSuccess && data?.rooms.length > 0) || queryHasChanged) && (\n\t\t\t\t\t\t<FilterByText\n\t\t\t\t\t\t\tsetFilter={onFilter as ComponentProps<typeof FilterByText>['setFilter']}\n\t\t\t\t\t\t\tsetCustomFields={setCustomFields}\n\t\t\t\t\t\t\tcustomFields={customFields}\n\t\t\t\t\t\t\thasCustomFields={hasCustomFields}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{isWorkspaceOverMacLimit && (\n\t\t\t\t\t\t<Callout\n\t\t\t\t\t\t\ttype='danger'\n\t\t\t\t\t\t\ticon='warning'\n\t\t\t\t\t\t\ttitle={t('The_workspace_has_exceeded_the_monthly_limit_of_active_contacts')}\n\t\t\t\t\t\t\tstyle={{ marginBlock: '2rem' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Talk_to_your_workspace_admin_to_address_this_issue')}\n\t\t\t\t\t\t</Callout>\n\t\t\t\t\t)}\n\t\t\t\t\t{isSuccess && data?.rooms.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t\t\t{isSuccess && data?.rooms.length === 0 && !queryHasChanged && (\n\t\t\t\t\t\t<GenericNoResults\n\t\t\t\t\t\t\ticon='discussion'\n\t\t\t\t\t\t\ttitle={t('No_chats_yet')}\n\t\t\t\t\t\t\tdescription={t('No_chats_yet_description')}\n\t\t\t\t\t\t\tlinkHref='https://go.rocket.chat/i/omnichannel-docs'\n\t\t\t\t\t\t\tlinkText={t('Learn_more_about_current_chats')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t\t<GenericTableLoadingTable headerCells={6} />\n\t\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t\t</GenericTable>\n\t\t\t\t\t)}\n\t\t\t\t\t{isSuccess && data?.rooms.length > 0 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t\t\t<GenericTableBody data-qa='GenericTableCurrentChatsBody'>\n\t\t\t\t\t\t\t\t\t{data.rooms.map((room) => renderRow({ ...room }))}\n\t\t\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t\t\t</GenericTable>\n\t\t\t\t\t\t\t<Pagination\n\t\t\t\t\t\t\t\tdivider\n\t\t\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\t\t\tcount={data.total}\n\t\t\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</PageContent>\n\t\t\t</Page>\n\t\t\t{id === 'custom-fields' && hasCustomFields && (\n\t\t\t\t<CustomFieldsList setCustomFields={setCustomFields} allCustomFields={allCustomFields?.customFields || []} />\n\t\t\t)}\n\t\t</Page>\n\t);\n};\n\nexport default memo(CurrentChatsPage);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/currentChats/CurrentChatsPage.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/omnichannel/currentChats/CurrentChatsPage.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/currentChats/CurrentChatsPage.tsx","sourceRoot":"","sources":["client/views/omnichannel/currentChats/CurrentChatsPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Callout, Pagination } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { GETLivechatRoomsParams } from '@rocket.chat/rest-typings';\nimport { usePermission, useTranslation } from '@rocket.chat/ui-contexts';\nimport { hashQueryKey } from '@tanstack/react-query';\nimport moment from 'moment';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React, { memo, useCallback, useMemo, useState } from 'react';\n\nimport GenericNoResults from '../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableCell,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n\tGenericTableRow,\n} from '../../../components/GenericTable';\nimport { usePagination } from '../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../components/GenericTable/hooks/useSort';\nimport { Page, PageHeader, PageContent } from '../../../components/Page';\nimport { useIsOverMacLimit } from '../../../hooks/omnichannel/useIsOverMacLimit';\nimport { RoomActivityIcon } from '../../../omnichannel/components/RoomActivityIcon';\nimport { useOmnichannelPriorities } from '../../../omnichannel/hooks/useOmnichannelPriorities';\nimport { PriorityIcon } from '../../../omnichannel/priorities/PriorityIcon';\nimport CustomFieldsList from './CustomFieldsList';\nimport FilterByText from './FilterByText';\nimport RemoveChatButton from './RemoveChatButton';\nimport { useAllCustomFields } from './hooks/useAllCustomFields';\nimport { useCurrentChats } from './hooks/useCurrentChats';\n\ntype DebouncedParams = {\n\tfname: string;\n\tguest: string;\n\tservedBy: string;\n\tdepartment: string;\n\tstatus: string;\n\tfrom: string;\n\tto: string;\n\ttags: any[];\n};\n\ntype CurrentChatQuery = {\n\tagents?: string[];\n\toffset?: number;\n\troomName?: string;\n\tdepartmentId?: string;\n\topen?: boolean;\n\tcreatedAt?: string;\n\tclosedAt?: string;\n\ttags?: string[];\n\tonhold?: boolean;\n\tcustomFields?: string;\n\tsort: string;\n\tcount?: number;\n\tqueued?: boolean;\n};\n\ntype useQueryType = (\n\tdebouncedParams: DebouncedParams,\n\tcustomFields: { [key: string]: string } | undefined,\n\t[column, direction]: [string, 'asc' | 'desc'],\n\tcurrent: number,\n\titemsPerPage: 25 | 50 | 100,\n) => GETLivechatRoomsParams;\n\nconst sortDir = (sortDir: 'asc' | 'desc'): 1 | -1 => (sortDir === 'asc' ? 1 : -1);\n\nconst currentChatQuery: useQueryType = (\n\t{ guest, servedBy, department, status, from, to, tags },\n\tcustomFields,\n\t[column, direction],\n\tcurrent,\n\titemsPerPage,\n) => {\n\tconst query: CurrentChatQuery = {\n\t\t...(guest && { roomName: guest }),\n\t\tsort: JSON.stringify({\n\t\t\t[column]: sortDir(direction),\n\t\t\tts: column === 'ts' ? sortDir(direction) : undefined,\n\t\t}),\n\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t...(current && { offset: current }),\n\t};\n\n\tif (from || to) {\n\t\tquery.createdAt = JSON.stringify({\n\t\t\t...(from && {\n\t\t\t\tstart: moment(new Date(from)).set({ hour: 0, minutes: 0, seconds: 0 }).toISOString(),\n\t\t\t}),\n\t\t\t...(to && {\n\t\t\t\tend: moment(new Date(to)).set({ hour: 23, minutes: 59, seconds: 59 }).toISOString(),\n\t\t\t}),\n\t\t});\n\t}\n\n\tif (status !== 'all') {\n\t\tquery.open = status === 'opened' || status === 'onhold' || status === 'queued';\n\t\tquery.onhold = status === 'onhold';\n\t\tquery.queued = status === 'queued';\n\t}\n\tif (servedBy && servedBy !== 'all') {\n\t\tquery.agents = [servedBy];\n\t}\n\tif (department && department !== 'all') {\n\t\tquery.departmentId = department;\n\t}\n\n\tif (tags && tags.length > 0) {\n\t\tquery.tags = tags;\n\t}\n\n\tif (customFields && Object.keys(customFields).length > 0) {\n\t\tconst customFieldsQuery = Object.fromEntries(Object.entries(customFields).filter((item) => item[1] !== undefined && item[1] !== ''));\n\t\tif (Object.keys(customFieldsQuery).length > 0) {\n\t\t\tquery.customFields = JSON.stringify(customFieldsQuery);\n\t\t}\n\t}\n\n\treturn query;\n};\n\nconst CurrentChatsPage = ({ id, onRowClick }: { id?: string; onRowClick: (_id: string) => void }): ReactElement => {\n\tconst isWorkspaceOverMacLimit = useIsOverMacLimit();\n\tconst { sortBy, sortDirection, setSort } = useSort<'fname' | 'departmentId' | 'servedBy' | 'priorityWeight' | 'ts' | 'lm' | 'open'>(\n\t\t'ts',\n\t\t'desc',\n\t);\n\tconst [customFields, setCustomFields] = useState<{ [key: string]: string }>();\n\n\tconst t = useTranslation();\n\n\tconst canRemoveClosedChats = usePermission('remove-closed-livechat-room');\n\tconst { enabled: isPriorityEnabled } = useOmnichannelPriorities();\n\n\tconst { data: allCustomFields } = useAllCustomFields();\n\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\n\tconst [params, setParams] = useState({\n\t\tguest: '',\n\t\tfname: '',\n\t\tservedBy: '',\n\t\tstatus: 'all',\n\t\tdepartment: '',\n\t\tfrom: '',\n\t\tto: '',\n\t\ttags: [] as string[],\n\t});\n\n\tconst hasCustomFields = useMemo(\n\t\t() => !!allCustomFields?.customFields?.find((customField) => customField.scope === 'room'),\n\t\t[allCustomFields],\n\t);\n\n\tconst query = useMemo(\n\t\t() => currentChatQuery(params, customFields, [sortBy, sortDirection], current, itemsPerPage),\n\t\t[customFields, itemsPerPage, params, sortBy, sortDirection, current],\n\t);\n\n\tconst { data, isLoading, isSuccess } = useCurrentChats(query);\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst onFilter = useMutableCallback((params: DebouncedParams): void => {\n\t\tsetParams(params);\n\t\tsetCurrent(0);\n\t});\n\n\tconst renderRow = useCallback(\n\t\t(room) => {\n\t\t\tconst { _id, fname, servedBy, ts, lm, department, open, onHold, priorityWeight } = room;\n\t\t\tconst getStatusText = (open: boolean, onHold: boolean, servedBy: boolean): string => {\n\t\t\t\tif (!open) return t('Closed');\n\t\t\t\tif (open && !servedBy) return t('Queued');\n\t\t\t\treturn onHold ? t('On_Hold_Chats') : t('Room_Status_Open');\n\t\t\t};\n\n\t\t\treturn (\n\t\t\t\t<GenericTableRow key={_id} onClick={(): void => onRowClick(_id)} action data-qa-id={fname}>\n\t\t\t\t\t{isPriorityEnabled && (\n\t\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-priority'>\n\t\t\t\t\t\t\t<PriorityIcon level={priorityWeight} />\n\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t)}\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-name'>\n\t\t\t\t\t\t{fname}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-department'>\n\t\t\t\t\t\t{department ? department.name : ''}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-servedBy'>\n\t\t\t\t\t\t{servedBy?.username}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-startedAt'>\n\t\t\t\t\t\t{moment(ts).format('L LTS')}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-lastMessage'>\n\t\t\t\t\t\t{moment(lm).format('L LTS')}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-status'>\n\t\t\t\t\t\t<RoomActivityIcon room={room} /> {getStatusText(open, onHold, !!servedBy?.username)}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t{canRemoveClosedChats && !open && <RemoveChatButton _id={_id} />}\n\t\t\t\t</GenericTableRow>\n\t\t\t);\n\t\t},\n\t\t[canRemoveClosedChats, onRowClick, isPriorityEnabled, t],\n\t);\n\n\tconst headers = (\n\t\t<>\n\t\t\t{isPriorityEnabled && (\n\t\t\t\t<GenericTableHeaderCell\n\t\t\t\t\tkey='priorityWeight'\n\t\t\t\t\tdirection={sortDirection}\n\t\t\t\t\tactive={sortBy === 'priorityWeight'}\n\t\t\t\t\tonClick={setSort}\n\t\t\t\t\tsort='priorityWeight'\n\t\t\t\t\tw='x100'\n\t\t\t\t\talignItems='center'\n\t\t\t\t>\n\t\t\t\t\t{t('Priority')}\n\t\t\t\t</GenericTableHeaderCell>\n\t\t\t)}\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='fname'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'fname'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='fname'\n\t\t\t\tdata-qa='current-chats-header-name'\n\t\t\t>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='departmentId'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'departmentId'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='departmentId'\n\t\t\t\tdata-qa='current-chats-header-department'\n\t\t\t>\n\t\t\t\t{t('Department')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='servedBy'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'servedBy'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='servedBy'\n\t\t\t\tdata-qa='current-chats-header-servedBy'\n\t\t\t>\n\t\t\t\t{t('Served_By')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='ts'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'ts'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='ts'\n\t\t\t\tdata-qa='current-chats-header-startedAt'\n\t\t\t>\n\t\t\t\t{t('Started_At')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='lm'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'lm'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='lm'\n\t\t\t\tdata-qa='current-chats-header-lastMessage'\n\t\t\t>\n\t\t\t\t{t('Last_Message')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='open'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'open'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='open'\n\t\t\t\tw='x100'\n\t\t\t\tdata-qa='current-chats-header-status'\n\t\t\t>\n\t\t\t\t{t('Status')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t{canRemoveClosedChats && (\n\t\t\t\t<GenericTableHeaderCell key='remove' w='x60' data-qa='current-chats-header-remove'>\n\t\t\t\t\t{t('Remove')}\n\t\t\t\t</GenericTableHeaderCell>\n\t\t\t)}\n\t\t</>\n\t);\n\n\t// TODO: Missing error state\n\treturn (\n\t\t<Page flexDirection='row'>\n\t\t\t<Page>\n\t\t\t\t<PageHeader title={t('Current_Chats')} />\n\t\t\t\t<PageContent>\n\t\t\t\t\t{((isSuccess && data?.rooms.length > 0) || queryHasChanged) && (\n\t\t\t\t\t\t<FilterByText\n\t\t\t\t\t\t\tsetFilter={onFilter as ComponentProps<typeof FilterByText>['setFilter']}\n\t\t\t\t\t\t\tsetCustomFields={setCustomFields}\n\t\t\t\t\t\t\tcustomFields={customFields}\n\t\t\t\t\t\t\thasCustomFields={hasCustomFields}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{isWorkspaceOverMacLimit && (\n\t\t\t\t\t\t<Callout\n\t\t\t\t\t\t\ttype='danger'\n\t\t\t\t\t\t\ticon='warning'\n\t\t\t\t\t\t\ttitle={t('The_workspace_has_exceeded_the_monthly_limit_of_active_contacts')}\n\t\t\t\t\t\t\tstyle={{ marginBlock: '2rem' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Talk_to_your_workspace_admin_to_address_this_issue')}\n\t\t\t\t\t\t</Callout>\n\t\t\t\t\t)}\n\t\t\t\t\t{isSuccess && data?.rooms.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t\t\t{isSuccess && data?.rooms.length === 0 && !queryHasChanged && (\n\t\t\t\t\t\t<GenericNoResults\n\t\t\t\t\t\t\ticon='discussion'\n\t\t\t\t\t\t\ttitle={t('No_chats_yet')}\n\t\t\t\t\t\t\tdescription={t('No_chats_yet_description')}\n\t\t\t\t\t\t\tlinkHref='https://go.rocket.chat/i/omnichannel-docs'\n\t\t\t\t\t\t\tlinkText={t('Learn_more_about_current_chats')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t\t<GenericTableLoadingTable headerCells={6} />\n\t\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t\t</GenericTable>\n\t\t\t\t\t)}\n\t\t\t\t\t{isSuccess && data?.rooms.length > 0 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t\t\t<GenericTableBody data-qa='GenericTableCurrentChatsBody'>\n\t\t\t\t\t\t\t\t\t{data.rooms.map((room) => renderRow({ ...room }))}\n\t\t\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t\t\t</GenericTable>\n\t\t\t\t\t\t\t<Pagination\n\t\t\t\t\t\t\t\tdivider\n\t\t\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\t\t\tcount={data.total}\n\t\t\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</PageContent>\n\t\t\t</Page>\n\t\t\t{id === 'custom-fields' && hasCustomFields && (\n\t\t\t\t<CustomFieldsList setCustomFields={setCustomFields} allCustomFields={allCustomFields?.customFields || []} />\n\t\t\t)}\n\t\t</Page>\n\t);\n};\n\nexport default memo(CurrentChatsPage);\n"]}}},"code":"var _excluded = [\"current\", \"itemsPerPage\", \"setItemsPerPage\", \"setCurrent\"];\nvar _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 0);\nvar _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 1);\nvar _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 2);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 3);\nvar Callout, Pagination;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Callout: function (v) {\n    Callout = v;\n  },\n  Pagination: function (v) {\n    Pagination = v;\n  }\n}, 0);\nvar useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 1);\nvar usePermission, useTranslation;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  usePermission: function (v) {\n    usePermission = v;\n  },\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 2);\nvar hashQueryKey;\nmodule.link(\"@tanstack/react-query\", {\n  hashQueryKey: function (v) {\n    hashQueryKey = v;\n  }\n}, 3);\nvar moment;\nmodule.link(\"moment\", {\n  \"default\": function (v) {\n    moment = v;\n  }\n}, 4);\nvar React, memo, useCallback, useMemo, useState;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  memo: function (v) {\n    memo = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 5);\nvar GenericNoResults;\nmodule.link(\"../../../components/GenericNoResults\", {\n  \"default\": function (v) {\n    GenericNoResults = v;\n  }\n}, 6);\nvar GenericTable, GenericTableBody, GenericTableCell, GenericTableHeader, GenericTableHeaderCell, GenericTableLoadingTable, GenericTableRow;\nmodule.link(\"../../../components/GenericTable\", {\n  GenericTable: function (v) {\n    GenericTable = v;\n  },\n  GenericTableBody: function (v) {\n    GenericTableBody = v;\n  },\n  GenericTableCell: function (v) {\n    GenericTableCell = v;\n  },\n  GenericTableHeader: function (v) {\n    GenericTableHeader = v;\n  },\n  GenericTableHeaderCell: function (v) {\n    GenericTableHeaderCell = v;\n  },\n  GenericTableLoadingTable: function (v) {\n    GenericTableLoadingTable = v;\n  },\n  GenericTableRow: function (v) {\n    GenericTableRow = v;\n  }\n}, 7);\nvar usePagination;\nmodule.link(\"../../../components/GenericTable/hooks/usePagination\", {\n  usePagination: function (v) {\n    usePagination = v;\n  }\n}, 8);\nvar useSort;\nmodule.link(\"../../../components/GenericTable/hooks/useSort\", {\n  useSort: function (v) {\n    useSort = v;\n  }\n}, 9);\nvar Page, PageHeader, PageContent;\nmodule.link(\"../../../components/Page\", {\n  Page: function (v) {\n    Page = v;\n  },\n  PageHeader: function (v) {\n    PageHeader = v;\n  },\n  PageContent: function (v) {\n    PageContent = v;\n  }\n}, 10);\nvar useIsOverMacLimit;\nmodule.link(\"../../../hooks/omnichannel/useIsOverMacLimit\", {\n  useIsOverMacLimit: function (v) {\n    useIsOverMacLimit = v;\n  }\n}, 11);\nvar RoomActivityIcon;\nmodule.link(\"../../../omnichannel/components/RoomActivityIcon\", {\n  RoomActivityIcon: function (v) {\n    RoomActivityIcon = v;\n  }\n}, 12);\nvar useOmnichannelPriorities;\nmodule.link(\"../../../omnichannel/hooks/useOmnichannelPriorities\", {\n  useOmnichannelPriorities: function (v) {\n    useOmnichannelPriorities = v;\n  }\n}, 13);\nvar PriorityIcon;\nmodule.link(\"../../../omnichannel/priorities/PriorityIcon\", {\n  PriorityIcon: function (v) {\n    PriorityIcon = v;\n  }\n}, 14);\nvar CustomFieldsList;\nmodule.link(\"./CustomFieldsList\", {\n  \"default\": function (v) {\n    CustomFieldsList = v;\n  }\n}, 15);\nvar FilterByText;\nmodule.link(\"./FilterByText\", {\n  \"default\": function (v) {\n    FilterByText = v;\n  }\n}, 16);\nvar RemoveChatButton;\nmodule.link(\"./RemoveChatButton\", {\n  \"default\": function (v) {\n    RemoveChatButton = v;\n  }\n}, 17);\nvar useAllCustomFields;\nmodule.link(\"./hooks/useAllCustomFields\", {\n  useAllCustomFields: function (v) {\n    useAllCustomFields = v;\n  }\n}, 18);\nvar useCurrentChats;\nmodule.link(\"./hooks/useCurrentChats\", {\n  useCurrentChats: function (v) {\n    useCurrentChats = v;\n  }\n}, 19);\nvar sortDir = function (sortDir) {\n  return sortDir === 'asc' ? 1 : -1;\n};\nvar currentChatQuery = function (_ref, customFields, _ref2, current, itemsPerPage) {\n  var _JSON$stringify;\n  var guest = _ref.guest,\n    servedBy = _ref.servedBy,\n    department = _ref.department,\n    status = _ref.status,\n    from = _ref.from,\n    to = _ref.to,\n    tags = _ref.tags;\n  var _ref3 = _slicedToArray(_ref2, 2),\n    column = _ref3[0],\n    direction = _ref3[1];\n  var query = _objectSpread(_objectSpread(_objectSpread({}, guest && {\n    roomName: guest\n  }), {}, {\n    sort: JSON.stringify((_JSON$stringify = {}, _JSON$stringify[column] = sortDir(direction), _JSON$stringify.ts = column === 'ts' ? sortDir(direction) : undefined, _JSON$stringify))\n  }, itemsPerPage && {\n    count: itemsPerPage\n  }), current && {\n    offset: current\n  });\n  if (from || to) {\n    query.createdAt = JSON.stringify(_objectSpread(_objectSpread({}, from && {\n      start: moment(new Date(from)).set({\n        hour: 0,\n        minutes: 0,\n        seconds: 0\n      }).toISOString()\n    }), to && {\n      end: moment(new Date(to)).set({\n        hour: 23,\n        minutes: 59,\n        seconds: 59\n      }).toISOString()\n    }));\n  }\n  if (status !== 'all') {\n    query.open = status === 'opened' || status === 'onhold' || status === 'queued';\n    query.onhold = status === 'onhold';\n    query.queued = status === 'queued';\n  }\n  if (servedBy && servedBy !== 'all') {\n    query.agents = [servedBy];\n  }\n  if (department && department !== 'all') {\n    query.departmentId = department;\n  }\n  if (tags && tags.length > 0) {\n    query.tags = tags;\n  }\n  if (customFields && Object.keys(customFields).length > 0) {\n    var customFieldsQuery = Object.fromEntries(Object.entries(customFields).filter(function (item) {\n      return item[1] !== undefined && item[1] !== '';\n    }));\n    if (Object.keys(customFieldsQuery).length > 0) {\n      query.customFields = JSON.stringify(customFieldsQuery);\n    }\n  }\n  return query;\n};\nvar CurrentChatsPage = function (_ref4) {\n  var id = _ref4.id,\n    onRowClick = _ref4.onRowClick;\n  var isWorkspaceOverMacLimit = useIsOverMacLimit();\n  var _useSort = useSort('ts', 'desc'),\n    sortBy = _useSort.sortBy,\n    sortDirection = _useSort.sortDirection,\n    setSort = _useSort.setSort;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    customFields = _useState2[0],\n    setCustomFields = _useState2[1];\n  var t = useTranslation();\n  var canRemoveClosedChats = usePermission('remove-closed-livechat-room');\n  var _useOmnichannelPriori = useOmnichannelPriorities(),\n    isPriorityEnabled = _useOmnichannelPriori.enabled;\n  var _useAllCustomFields = useAllCustomFields(),\n    allCustomFields = _useAllCustomFields.data;\n  var _usePagination = usePagination(),\n    current = _usePagination.current,\n    itemsPerPage = _usePagination.itemsPerPage,\n    setItemsPerPage = _usePagination.setItemsPerPage,\n    setCurrent = _usePagination.setCurrent,\n    paginationProps = _objectWithoutProperties(_usePagination, _excluded);\n  var _useState3 = useState({\n      guest: '',\n      fname: '',\n      servedBy: '',\n      status: 'all',\n      department: '',\n      from: '',\n      to: '',\n      tags: []\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    params = _useState4[0],\n    setParams = _useState4[1];\n  var hasCustomFields = useMemo(function () {\n    var _allCustomFields$cust;\n    return !!(allCustomFields !== null && allCustomFields !== void 0 && (_allCustomFields$cust = allCustomFields.customFields) !== null && _allCustomFields$cust !== void 0 && _allCustomFields$cust.find(function (customField) {\n      return customField.scope === 'room';\n    }));\n  }, [allCustomFields]);\n  var query = useMemo(function () {\n    return currentChatQuery(params, customFields, [sortBy, sortDirection], current, itemsPerPage);\n  }, [customFields, itemsPerPage, params, sortBy, sortDirection, current]);\n  var _useCurrentChats = useCurrentChats(query),\n    data = _useCurrentChats.data,\n    isLoading = _useCurrentChats.isLoading,\n    isSuccess = _useCurrentChats.isSuccess;\n  var _useState5 = useState(hashQueryKey([query])),\n    _useState6 = _slicedToArray(_useState5, 1),\n    defaultQuery = _useState6[0];\n  var queryHasChanged = defaultQuery !== hashQueryKey([query]);\n  var onFilter = useMutableCallback(function (params) {\n    setParams(params);\n    setCurrent(0);\n  });\n  var renderRow = useCallback(function (room) {\n    var _id = room._id,\n      fname = room.fname,\n      servedBy = room.servedBy,\n      ts = room.ts,\n      lm = room.lm,\n      department = room.department,\n      open = room.open,\n      onHold = room.onHold,\n      priorityWeight = room.priorityWeight;\n    var getStatusText = function (open, onHold, servedBy) {\n      if (!open) return t('Closed');\n      if (open && !servedBy) return t('Queued');\n      return onHold ? t('On_Hold_Chats') : t('Room_Status_Open');\n    };\n    return /*#__PURE__*/React.createElement(GenericTableRow, {\n      key: _id,\n      onClick: function () {\n        return onRowClick(_id);\n      },\n      action: true,\n      \"data-qa-id\": fname\n    }, isPriorityEnabled && /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true,\n      \"data-qa\": \"current-chats-cell-priority\"\n    }, /*#__PURE__*/React.createElement(PriorityIcon, {\n      level: priorityWeight\n    })), /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true,\n      \"data-qa\": \"current-chats-cell-name\"\n    }, fname), /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true,\n      \"data-qa\": \"current-chats-cell-department\"\n    }, department ? department.name : ''), /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true,\n      \"data-qa\": \"current-chats-cell-servedBy\"\n    }, servedBy === null || servedBy === void 0 ? void 0 : servedBy.username), /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true,\n      \"data-qa\": \"current-chats-cell-startedAt\"\n    }, moment(ts).format('L LTS')), /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true,\n      \"data-qa\": \"current-chats-cell-lastMessage\"\n    }, moment(lm).format('L LTS')), /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true,\n      \"data-qa\": \"current-chats-cell-status\"\n    }, /*#__PURE__*/React.createElement(RoomActivityIcon, {\n      room: room\n    }), \" \", getStatusText(open, onHold, !!(servedBy !== null && servedBy !== void 0 && servedBy.username))), canRemoveClosedChats && !open && /*#__PURE__*/React.createElement(RemoveChatButton, {\n      _id: _id\n    }));\n  }, [canRemoveClosedChats, onRowClick, isPriorityEnabled, t]);\n  var headers = /*#__PURE__*/React.createElement(React.Fragment, null, isPriorityEnabled && /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"priorityWeight\",\n    direction: sortDirection,\n    active: sortBy === 'priorityWeight',\n    onClick: setSort,\n    sort: \"priorityWeight\",\n    w: \"x100\",\n    alignItems: \"center\"\n  }, t('Priority')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"fname\",\n    direction: sortDirection,\n    active: sortBy === 'fname',\n    onClick: setSort,\n    sort: \"fname\",\n    \"data-qa\": \"current-chats-header-name\"\n  }, t('Name')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"departmentId\",\n    direction: sortDirection,\n    active: sortBy === 'departmentId',\n    onClick: setSort,\n    sort: \"departmentId\",\n    \"data-qa\": \"current-chats-header-department\"\n  }, t('Department')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"servedBy\",\n    direction: sortDirection,\n    active: sortBy === 'servedBy',\n    onClick: setSort,\n    sort: \"servedBy\",\n    \"data-qa\": \"current-chats-header-servedBy\"\n  }, t('Served_By')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"ts\",\n    direction: sortDirection,\n    active: sortBy === 'ts',\n    onClick: setSort,\n    sort: \"ts\",\n    \"data-qa\": \"current-chats-header-startedAt\"\n  }, t('Started_At')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"lm\",\n    direction: sortDirection,\n    active: sortBy === 'lm',\n    onClick: setSort,\n    sort: \"lm\",\n    \"data-qa\": \"current-chats-header-lastMessage\"\n  }, t('Last_Message')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"open\",\n    direction: sortDirection,\n    active: sortBy === 'open',\n    onClick: setSort,\n    sort: \"open\",\n    w: \"x100\",\n    \"data-qa\": \"current-chats-header-status\"\n  }, t('Status')), canRemoveClosedChats && /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"remove\",\n    w: \"x60\",\n    \"data-qa\": \"current-chats-header-remove\"\n  }, t('Remove')));\n  // TODO: Missing error state\n  return /*#__PURE__*/React.createElement(Page, {\n    flexDirection: \"row\"\n  }, /*#__PURE__*/React.createElement(Page, null, /*#__PURE__*/React.createElement(PageHeader, {\n    title: t('Current_Chats')\n  }), /*#__PURE__*/React.createElement(PageContent, null, (isSuccess && (data === null || data === void 0 ? void 0 : data.rooms.length) > 0 || queryHasChanged) && /*#__PURE__*/React.createElement(FilterByText, {\n    setFilter: onFilter,\n    setCustomFields: setCustomFields,\n    customFields: customFields,\n    hasCustomFields: hasCustomFields\n  }), isWorkspaceOverMacLimit && /*#__PURE__*/React.createElement(Callout, {\n    type: \"danger\",\n    icon: \"warning\",\n    title: t('The_workspace_has_exceeded_the_monthly_limit_of_active_contacts'),\n    style: {\n      marginBlock: '2rem'\n    }\n  }, t('Talk_to_your_workspace_admin_to_address_this_issue')), isSuccess && (data === null || data === void 0 ? void 0 : data.rooms.length) === 0 && queryHasChanged && /*#__PURE__*/React.createElement(GenericNoResults, null), isSuccess && (data === null || data === void 0 ? void 0 : data.rooms.length) === 0 && !queryHasChanged && /*#__PURE__*/React.createElement(GenericNoResults, {\n    icon: \"discussion\",\n    title: t('No_chats_yet'),\n    description: t('No_chats_yet_description'),\n    linkHref: \"https://go.rocket.chat/i/omnichannel-docs\",\n    linkText: t('Learn_more_about_current_chats')\n  }), isLoading && /*#__PURE__*/React.createElement(GenericTable, null, /*#__PURE__*/React.createElement(GenericTableHeader, null, headers), /*#__PURE__*/React.createElement(GenericTableBody, null, /*#__PURE__*/React.createElement(GenericTableLoadingTable, {\n    headerCells: 6\n  }))), isSuccess && (data === null || data === void 0 ? void 0 : data.rooms.length) > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GenericTable, null, /*#__PURE__*/React.createElement(GenericTableHeader, null, headers), /*#__PURE__*/React.createElement(GenericTableBody, {\n    \"data-qa\": \"GenericTableCurrentChatsBody\"\n  }, data.rooms.map(function (room) {\n    return renderRow(_objectSpread({}, room));\n  }))), /*#__PURE__*/React.createElement(Pagination, _extends({\n    divider: true,\n    current: current,\n    itemsPerPage: itemsPerPage,\n    count: data.total,\n    onSetItemsPerPage: setItemsPerPage,\n    onSetCurrent: setCurrent\n  }, paginationProps))))), id === 'custom-fields' && hasCustomFields && /*#__PURE__*/React.createElement(CustomFieldsList, {\n    setCustomFields: setCustomFields,\n    allCustomFields: (allCustomFields === null || allCustomFields === void 0 ? void 0 : allCustomFields.customFields) || []\n  }));\n};\nmodule.exportDefault( /*#__PURE__*/memo(CurrentChatsPage));","map":{"version":3,"names":["_extends","module","link","default","v","_objectWithoutProperties","_objectSpread","_slicedToArray","Callout","Pagination","useMutableCallback","usePermission","useTranslation","hashQueryKey","moment","React","memo","useCallback","useMemo","useState","GenericNoResults","GenericTable","GenericTableBody","GenericTableCell","GenericTableHeader","GenericTableHeaderCell","GenericTableLoadingTable","GenericTableRow","usePagination","useSort","Page","PageHeader","PageContent","useIsOverMacLimit","RoomActivityIcon","useOmnichannelPriorities","PriorityIcon","CustomFieldsList","FilterByText","RemoveChatButton","useAllCustomFields","useCurrentChats","sortDir","currentChatQuery","_ref","customFields","_ref2","current","itemsPerPage","_JSON$stringify","guest","servedBy","department","status","from","to","tags","_ref3","column","direction","query","roomName","sort","JSON","stringify","ts","undefined","count","offset","createdAt","start","Date","set","hour","minutes","seconds","toISOString","end","open","onhold","queued","agents","departmentId","length","Object","keys","customFieldsQuery","fromEntries","entries","filter","item","CurrentChatsPage","_ref4","id","onRowClick","isWorkspaceOverMacLimit","_useSort","sortBy","sortDirection","setSort","_useState","_useState2","setCustomFields","t","canRemoveClosedChats","_useOmnichannelPriori","isPriorityEnabled","enabled","_useAllCustomFields","allCustomFields","data","_usePagination","setItemsPerPage","setCurrent","paginationProps","_excluded","_useState3","fname","_useState4","params","setParams","hasCustomFields","_allCustomFields$cust","find","customField","scope","_useCurrentChats","isLoading","isSuccess","_useState5","_useState6","defaultQuery","queryHasChanged","onFilter","renderRow","room","_id","lm","onHold","priorityWeight","getStatusText","createElement","key","onClick","action","withTruncatedText","level","name","username","format","headers","Fragment","active","w","alignItems","flexDirection","title","rooms","setFilter","type","icon","style","marginBlock","description","linkHref","linkText","headerCells","map","divider","total","onSetItemsPerPage","onSetCurrent","exportDefault"],"sources":["client/views/omnichannel/currentChats/CurrentChatsPage.tsx"],"sourcesContent":["import { Callout, Pagination } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { GETLivechatRoomsParams } from '@rocket.chat/rest-typings';\nimport { usePermission, useTranslation } from '@rocket.chat/ui-contexts';\nimport { hashQueryKey } from '@tanstack/react-query';\nimport moment from 'moment';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React, { memo, useCallback, useMemo, useState } from 'react';\n\nimport GenericNoResults from '../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableCell,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n\tGenericTableRow,\n} from '../../../components/GenericTable';\nimport { usePagination } from '../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../components/GenericTable/hooks/useSort';\nimport { Page, PageHeader, PageContent } from '../../../components/Page';\nimport { useIsOverMacLimit } from '../../../hooks/omnichannel/useIsOverMacLimit';\nimport { RoomActivityIcon } from '../../../omnichannel/components/RoomActivityIcon';\nimport { useOmnichannelPriorities } from '../../../omnichannel/hooks/useOmnichannelPriorities';\nimport { PriorityIcon } from '../../../omnichannel/priorities/PriorityIcon';\nimport CustomFieldsList from './CustomFieldsList';\nimport FilterByText from './FilterByText';\nimport RemoveChatButton from './RemoveChatButton';\nimport { useAllCustomFields } from './hooks/useAllCustomFields';\nimport { useCurrentChats } from './hooks/useCurrentChats';\n\ntype DebouncedParams = {\n\tfname: string;\n\tguest: string;\n\tservedBy: string;\n\tdepartment: string;\n\tstatus: string;\n\tfrom: string;\n\tto: string;\n\ttags: any[];\n};\n\ntype CurrentChatQuery = {\n\tagents?: string[];\n\toffset?: number;\n\troomName?: string;\n\tdepartmentId?: string;\n\topen?: boolean;\n\tcreatedAt?: string;\n\tclosedAt?: string;\n\ttags?: string[];\n\tonhold?: boolean;\n\tcustomFields?: string;\n\tsort: string;\n\tcount?: number;\n\tqueued?: boolean;\n};\n\ntype useQueryType = (\n\tdebouncedParams: DebouncedParams,\n\tcustomFields: { [key: string]: string } | undefined,\n\t[column, direction]: [string, 'asc' | 'desc'],\n\tcurrent: number,\n\titemsPerPage: 25 | 50 | 100,\n) => GETLivechatRoomsParams;\n\nconst sortDir = (sortDir: 'asc' | 'desc'): 1 | -1 => (sortDir === 'asc' ? 1 : -1);\n\nconst currentChatQuery: useQueryType = (\n\t{ guest, servedBy, department, status, from, to, tags },\n\tcustomFields,\n\t[column, direction],\n\tcurrent,\n\titemsPerPage,\n) => {\n\tconst query: CurrentChatQuery = {\n\t\t...(guest && { roomName: guest }),\n\t\tsort: JSON.stringify({\n\t\t\t[column]: sortDir(direction),\n\t\t\tts: column === 'ts' ? sortDir(direction) : undefined,\n\t\t}),\n\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t...(current && { offset: current }),\n\t};\n\n\tif (from || to) {\n\t\tquery.createdAt = JSON.stringify({\n\t\t\t...(from && {\n\t\t\t\tstart: moment(new Date(from)).set({ hour: 0, minutes: 0, seconds: 0 }).toISOString(),\n\t\t\t}),\n\t\t\t...(to && {\n\t\t\t\tend: moment(new Date(to)).set({ hour: 23, minutes: 59, seconds: 59 }).toISOString(),\n\t\t\t}),\n\t\t});\n\t}\n\n\tif (status !== 'all') {\n\t\tquery.open = status === 'opened' || status === 'onhold' || status === 'queued';\n\t\tquery.onhold = status === 'onhold';\n\t\tquery.queued = status === 'queued';\n\t}\n\tif (servedBy && servedBy !== 'all') {\n\t\tquery.agents = [servedBy];\n\t}\n\tif (department && department !== 'all') {\n\t\tquery.departmentId = department;\n\t}\n\n\tif (tags && tags.length > 0) {\n\t\tquery.tags = tags;\n\t}\n\n\tif (customFields && Object.keys(customFields).length > 0) {\n\t\tconst customFieldsQuery = Object.fromEntries(Object.entries(customFields).filter((item) => item[1] !== undefined && item[1] !== ''));\n\t\tif (Object.keys(customFieldsQuery).length > 0) {\n\t\t\tquery.customFields = JSON.stringify(customFieldsQuery);\n\t\t}\n\t}\n\n\treturn query;\n};\n\nconst CurrentChatsPage = ({ id, onRowClick }: { id?: string; onRowClick: (_id: string) => void }): ReactElement => {\n\tconst isWorkspaceOverMacLimit = useIsOverMacLimit();\n\tconst { sortBy, sortDirection, setSort } = useSort<'fname' | 'departmentId' | 'servedBy' | 'priorityWeight' | 'ts' | 'lm' | 'open'>(\n\t\t'ts',\n\t\t'desc',\n\t);\n\tconst [customFields, setCustomFields] = useState<{ [key: string]: string }>();\n\n\tconst t = useTranslation();\n\n\tconst canRemoveClosedChats = usePermission('remove-closed-livechat-room');\n\tconst { enabled: isPriorityEnabled } = useOmnichannelPriorities();\n\n\tconst { data: allCustomFields } = useAllCustomFields();\n\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\n\tconst [params, setParams] = useState({\n\t\tguest: '',\n\t\tfname: '',\n\t\tservedBy: '',\n\t\tstatus: 'all',\n\t\tdepartment: '',\n\t\tfrom: '',\n\t\tto: '',\n\t\ttags: [] as string[],\n\t});\n\n\tconst hasCustomFields = useMemo(\n\t\t() => !!allCustomFields?.customFields?.find((customField) => customField.scope === 'room'),\n\t\t[allCustomFields],\n\t);\n\n\tconst query = useMemo(\n\t\t() => currentChatQuery(params, customFields, [sortBy, sortDirection], current, itemsPerPage),\n\t\t[customFields, itemsPerPage, params, sortBy, sortDirection, current],\n\t);\n\n\tconst { data, isLoading, isSuccess } = useCurrentChats(query);\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst onFilter = useMutableCallback((params: DebouncedParams): void => {\n\t\tsetParams(params);\n\t\tsetCurrent(0);\n\t});\n\n\tconst renderRow = useCallback(\n\t\t(room) => {\n\t\t\tconst { _id, fname, servedBy, ts, lm, department, open, onHold, priorityWeight } = room;\n\t\t\tconst getStatusText = (open: boolean, onHold: boolean, servedBy: boolean): string => {\n\t\t\t\tif (!open) return t('Closed');\n\t\t\t\tif (open && !servedBy) return t('Queued');\n\t\t\t\treturn onHold ? t('On_Hold_Chats') : t('Room_Status_Open');\n\t\t\t};\n\n\t\t\treturn (\n\t\t\t\t<GenericTableRow key={_id} onClick={(): void => onRowClick(_id)} action data-qa-id={fname}>\n\t\t\t\t\t{isPriorityEnabled && (\n\t\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-priority'>\n\t\t\t\t\t\t\t<PriorityIcon level={priorityWeight} />\n\t\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t)}\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-name'>\n\t\t\t\t\t\t{fname}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-department'>\n\t\t\t\t\t\t{department ? department.name : ''}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-servedBy'>\n\t\t\t\t\t\t{servedBy?.username}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-startedAt'>\n\t\t\t\t\t\t{moment(ts).format('L LTS')}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-lastMessage'>\n\t\t\t\t\t\t{moment(lm).format('L LTS')}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t<GenericTableCell withTruncatedText data-qa='current-chats-cell-status'>\n\t\t\t\t\t\t<RoomActivityIcon room={room} /> {getStatusText(open, onHold, !!servedBy?.username)}\n\t\t\t\t\t</GenericTableCell>\n\t\t\t\t\t{canRemoveClosedChats && !open && <RemoveChatButton _id={_id} />}\n\t\t\t\t</GenericTableRow>\n\t\t\t);\n\t\t},\n\t\t[canRemoveClosedChats, onRowClick, isPriorityEnabled, t],\n\t);\n\n\tconst headers = (\n\t\t<>\n\t\t\t{isPriorityEnabled && (\n\t\t\t\t<GenericTableHeaderCell\n\t\t\t\t\tkey='priorityWeight'\n\t\t\t\t\tdirection={sortDirection}\n\t\t\t\t\tactive={sortBy === 'priorityWeight'}\n\t\t\t\t\tonClick={setSort}\n\t\t\t\t\tsort='priorityWeight'\n\t\t\t\t\tw='x100'\n\t\t\t\t\talignItems='center'\n\t\t\t\t>\n\t\t\t\t\t{t('Priority')}\n\t\t\t\t</GenericTableHeaderCell>\n\t\t\t)}\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='fname'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'fname'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='fname'\n\t\t\t\tdata-qa='current-chats-header-name'\n\t\t\t>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='departmentId'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'departmentId'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='departmentId'\n\t\t\t\tdata-qa='current-chats-header-department'\n\t\t\t>\n\t\t\t\t{t('Department')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='servedBy'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'servedBy'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='servedBy'\n\t\t\t\tdata-qa='current-chats-header-servedBy'\n\t\t\t>\n\t\t\t\t{t('Served_By')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='ts'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'ts'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='ts'\n\t\t\t\tdata-qa='current-chats-header-startedAt'\n\t\t\t>\n\t\t\t\t{t('Started_At')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='lm'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'lm'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='lm'\n\t\t\t\tdata-qa='current-chats-header-lastMessage'\n\t\t\t>\n\t\t\t\t{t('Last_Message')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='open'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'open'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='open'\n\t\t\t\tw='x100'\n\t\t\t\tdata-qa='current-chats-header-status'\n\t\t\t>\n\t\t\t\t{t('Status')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t{canRemoveClosedChats && (\n\t\t\t\t<GenericTableHeaderCell key='remove' w='x60' data-qa='current-chats-header-remove'>\n\t\t\t\t\t{t('Remove')}\n\t\t\t\t</GenericTableHeaderCell>\n\t\t\t)}\n\t\t</>\n\t);\n\n\t// TODO: Missing error state\n\treturn (\n\t\t<Page flexDirection='row'>\n\t\t\t<Page>\n\t\t\t\t<PageHeader title={t('Current_Chats')} />\n\t\t\t\t<PageContent>\n\t\t\t\t\t{((isSuccess && data?.rooms.length > 0) || queryHasChanged) && (\n\t\t\t\t\t\t<FilterByText\n\t\t\t\t\t\t\tsetFilter={onFilter as ComponentProps<typeof FilterByText>['setFilter']}\n\t\t\t\t\t\t\tsetCustomFields={setCustomFields}\n\t\t\t\t\t\t\tcustomFields={customFields}\n\t\t\t\t\t\t\thasCustomFields={hasCustomFields}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{isWorkspaceOverMacLimit && (\n\t\t\t\t\t\t<Callout\n\t\t\t\t\t\t\ttype='danger'\n\t\t\t\t\t\t\ticon='warning'\n\t\t\t\t\t\t\ttitle={t('The_workspace_has_exceeded_the_monthly_limit_of_active_contacts')}\n\t\t\t\t\t\t\tstyle={{ marginBlock: '2rem' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Talk_to_your_workspace_admin_to_address_this_issue')}\n\t\t\t\t\t\t</Callout>\n\t\t\t\t\t)}\n\t\t\t\t\t{isSuccess && data?.rooms.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t\t\t{isSuccess && data?.rooms.length === 0 && !queryHasChanged && (\n\t\t\t\t\t\t<GenericNoResults\n\t\t\t\t\t\t\ticon='discussion'\n\t\t\t\t\t\t\ttitle={t('No_chats_yet')}\n\t\t\t\t\t\t\tdescription={t('No_chats_yet_description')}\n\t\t\t\t\t\t\tlinkHref='https://go.rocket.chat/i/omnichannel-docs'\n\t\t\t\t\t\t\tlinkText={t('Learn_more_about_current_chats')}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t\t<GenericTableLoadingTable headerCells={6} />\n\t\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t\t</GenericTable>\n\t\t\t\t\t)}\n\t\t\t\t\t{isSuccess && data?.rooms.length > 0 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t\t\t<GenericTableBody data-qa='GenericTableCurrentChatsBody'>\n\t\t\t\t\t\t\t\t\t{data.rooms.map((room) => renderRow({ ...room }))}\n\t\t\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t\t\t</GenericTable>\n\t\t\t\t\t\t\t<Pagination\n\t\t\t\t\t\t\t\tdivider\n\t\t\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\t\t\tcount={data.total}\n\t\t\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</PageContent>\n\t\t\t</Page>\n\t\t\t{id === 'custom-fields' && hasCustomFields && (\n\t\t\t\t<CustomFieldsList setCustomFields={setCustomFields} allCustomFields={allCustomFields?.customFields || []} />\n\t\t\t)}\n\t\t</Page>\n\t);\n};\n\nexport default memo(CurrentChatsPage);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"251f0baf7c3ac946ef373c02837a81ab7edf9e8c"}
