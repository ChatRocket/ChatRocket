{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/teams/contextualBar/info/TeamsInfoWithData.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/teams/contextualBar/info/TeamsInfoWithData.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/teams/contextualBar/info/TeamsInfoWithData.tsx","inputSourceMap":{"version":3,"file":"client/views/teams/contextualBar/info/TeamsInfoWithData.tsx","sourceRoot":"","sources":["client/views/teams/contextualBar/info/TeamsInfoWithData.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IRoom, Serialized } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useSetModal, useToastMessageDispatch, useUserId, usePermission, useMethod, useRouter } from '@rocket.chat/ui-contexts';\nimport React, { useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport LeaveTeam from './LeaveTeam';\nimport TeamsInfo from './TeamsInfo';\nimport { UiTextContext } from '../../../../../definition/IRoomTypeConfig';\nimport { GenericModalDoNotAskAgain } from '../../../../components/GenericModal';\nimport { useDontAskAgain } from '../../../../hooks/useDontAskAgain';\nimport { useEndpointAction } from '../../../../hooks/useEndpointAction';\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\nimport { useDeleteRoom } from '../../../hooks/roomActions/useDeleteRoom';\nimport { useRoom } from '../../../room/contexts/RoomContext';\nimport { useRoomToolbox } from '../../../room/contexts/RoomToolboxContext';\nimport ConvertToChannelModal from '../../ConvertToChannelModal';\n\ntype TeamsInfoWithLogicProps = {\n\topenEditing: () => void;\n};\n\nconst TeamsInfoWithLogic = ({ openEditing }: TeamsInfoWithLogicProps) => {\n\tconst room = useRoom();\n\tconst { openTab, closeTab } = useRoomToolbox();\n\tconst { t } = useTranslation();\n\tconst userId = useUserId();\n\n\tconst dontAskHideRoom = useDontAskAgain('hideRoom');\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\tconst closeModal = useMutableCallback(() => setModal());\n\n\tconst leaveTeam = useEndpointAction('POST', '/v1/teams.leave');\n\tconst convertTeamToChannel = useEndpointAction('POST', '/v1/teams.convertToChannel');\n\n\tconst hideTeam = useMethod('hideRoom');\n\n\tconst router = useRouter();\n\n\tconst canEdit = usePermission('edit-team-channel', room._id);\n\n\t// const canLeave = usePermission('leave-team'); /* && room.cl !== false && joined */\n\n\tconst { handleDelete, canDeleteRoom } = useDeleteRoom(room);\n\n\tconst onClickLeave = useMutableCallback(() => {\n\t\tconst onConfirm = async (selectedRooms: { [key: string]: Serialized<IRoom> & { isLastOwner?: boolean } } = {}) => {\n\t\t\tconst roomsLeft = Object.keys(selectedRooms);\n\t\t\tconst roomsToLeave = Array.isArray(roomsLeft) && roomsLeft.length > 0 ? roomsLeft : [];\n\n\t\t\ttry {\n\t\t\t\tawait leaveTeam({\n\t\t\t\t\tteamId: room.teamId!,\n\t\t\t\t\t...(roomsToLeave.length && { rooms: roomsToLeave }),\n\t\t\t\t});\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Teams_left_team_successfully') });\n\t\t\t\trouter.navigate('/home');\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(<LeaveTeam onConfirm={onConfirm} onCancel={closeModal} teamId={room.teamId!} />);\n\t});\n\n\tconst handleHide = useMutableCallback(async () => {\n\t\tconst hide = async () => {\n\t\t\ttry {\n\t\t\t\tawait hideTeam(room._id);\n\t\t\t\trouter.navigate('/home');\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tconst warnText = roomCoordinator.getRoomDirectives(room.t).getUiText(UiTextContext.HIDE_WARNING) as TranslationKey;\n\n\t\tif (dontAskHideRoom) {\n\t\t\treturn hide();\n\t\t}\n\n\t\tsetModal(\n\t\t\t<GenericModalDoNotAskAgain\n\t\t\t\tvariant='danger'\n\t\t\t\tconfirmText={t('Yes_hide_it')}\n\t\t\t\tcancelText={t('Cancel')}\n\t\t\t\tonClose={closeModal}\n\t\t\t\tonCancel={closeModal}\n\t\t\t\tonConfirm={hide}\n\t\t\t\tdontAskAgain={{\n\t\t\t\t\taction: 'hideRoom',\n\t\t\t\t\tlabel: t('Hide_room'),\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{t(warnText, { postProcess: 'sprintf', sprintf: [room.fname] })}\n\t\t\t</GenericModalDoNotAskAgain>,\n\t\t);\n\t});\n\n\tconst onClickViewChannels = useCallback(() => openTab('team-channels'), [openTab]);\n\n\tconst onClickConvertToChannel = useMutableCallback(() => {\n\t\tconst onConfirm = async (roomsToRemove: { [key: string]: Serialized<IRoom> }) => {\n\t\t\ttry {\n\t\t\t\tawait convertTeamToChannel({\n\t\t\t\t\tteamId: room.teamId!,\n\t\t\t\t\troomsToRemove: Object.keys(roomsToRemove),\n\t\t\t\t});\n\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Success') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(\n\t\t\t<ConvertToChannelModal onClose={closeModal} onCancel={closeModal} onConfirm={onConfirm} teamId={room.teamId!} userId={userId!} />,\n\t\t);\n\t});\n\n\treturn (\n\t\t<TeamsInfo\n\t\t\troom={room}\n\t\t\tonClickEdit={canEdit ? openEditing : undefined}\n\t\t\tonClickClose={closeTab}\n\t\t\tonClickDelete={canDeleteRoom ? handleDelete : undefined}\n\t\t\tonClickLeave={onClickLeave}\n\t\t\tonClickHide={handleHide}\n\t\t\tonClickViewChannels={onClickViewChannels}\n\t\t\tonClickConvertToChannel={canEdit ? onClickConvertToChannel : undefined}\n\t\t/>\n\t);\n};\n\nexport default TeamsInfoWithLogic;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/teams/contextualBar/info/TeamsInfoWithData.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/teams/contextualBar/info/TeamsInfoWithData.tsx","inputSourceMap":{"version":3,"file":"client/views/teams/contextualBar/info/TeamsInfoWithData.tsx","sourceRoot":"","sources":["client/views/teams/contextualBar/info/TeamsInfoWithData.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IRoom, Serialized } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useSetModal, useToastMessageDispatch, useUserId, usePermission, useMethod, useRouter } from '@rocket.chat/ui-contexts';\nimport React, { useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport LeaveTeam from './LeaveTeam';\nimport TeamsInfo from './TeamsInfo';\nimport { UiTextContext } from '../../../../../definition/IRoomTypeConfig';\nimport { GenericModalDoNotAskAgain } from '../../../../components/GenericModal';\nimport { useDontAskAgain } from '../../../../hooks/useDontAskAgain';\nimport { useEndpointAction } from '../../../../hooks/useEndpointAction';\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\nimport { useDeleteRoom } from '../../../hooks/roomActions/useDeleteRoom';\nimport { useRoom } from '../../../room/contexts/RoomContext';\nimport { useRoomToolbox } from '../../../room/contexts/RoomToolboxContext';\nimport ConvertToChannelModal from '../../ConvertToChannelModal';\n\ntype TeamsInfoWithLogicProps = {\n\topenEditing: () => void;\n};\n\nconst TeamsInfoWithLogic = ({ openEditing }: TeamsInfoWithLogicProps) => {\n\tconst room = useRoom();\n\tconst { openTab, closeTab } = useRoomToolbox();\n\tconst { t } = useTranslation();\n\tconst userId = useUserId();\n\n\tconst dontAskHideRoom = useDontAskAgain('hideRoom');\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\tconst closeModal = useMutableCallback(() => setModal());\n\n\tconst leaveTeam = useEndpointAction('POST', '/v1/teams.leave');\n\tconst convertTeamToChannel = useEndpointAction('POST', '/v1/teams.convertToChannel');\n\n\tconst hideTeam = useMethod('hideRoom');\n\n\tconst router = useRouter();\n\n\tconst canEdit = usePermission('edit-team-channel', room._id);\n\n\t// const canLeave = usePermission('leave-team'); /* && room.cl !== false && joined */\n\n\tconst { handleDelete, canDeleteRoom } = useDeleteRoom(room);\n\n\tconst onClickLeave = useMutableCallback(() => {\n\t\tconst onConfirm = async (selectedRooms: { [key: string]: Serialized<IRoom> & { isLastOwner?: boolean } } = {}) => {\n\t\t\tconst roomsLeft = Object.keys(selectedRooms);\n\t\t\tconst roomsToLeave = Array.isArray(roomsLeft) && roomsLeft.length > 0 ? roomsLeft : [];\n\n\t\t\ttry {\n\t\t\t\tawait leaveTeam({\n\t\t\t\t\tteamId: room.teamId!,\n\t\t\t\t\t...(roomsToLeave.length && { rooms: roomsToLeave }),\n\t\t\t\t});\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Teams_left_team_successfully') });\n\t\t\t\trouter.navigate('/home');\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(<LeaveTeam onConfirm={onConfirm} onCancel={closeModal} teamId={room.teamId!} />);\n\t});\n\n\tconst handleHide = useMutableCallback(async () => {\n\t\tconst hide = async () => {\n\t\t\ttry {\n\t\t\t\tawait hideTeam(room._id);\n\t\t\t\trouter.navigate('/home');\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tconst warnText = roomCoordinator.getRoomDirectives(room.t).getUiText(UiTextContext.HIDE_WARNING) as TranslationKey;\n\n\t\tif (dontAskHideRoom) {\n\t\t\treturn hide();\n\t\t}\n\n\t\tsetModal(\n\t\t\t<GenericModalDoNotAskAgain\n\t\t\t\tvariant='danger'\n\t\t\t\tconfirmText={t('Yes_hide_it')}\n\t\t\t\tcancelText={t('Cancel')}\n\t\t\t\tonClose={closeModal}\n\t\t\t\tonCancel={closeModal}\n\t\t\t\tonConfirm={hide}\n\t\t\t\tdontAskAgain={{\n\t\t\t\t\taction: 'hideRoom',\n\t\t\t\t\tlabel: t('Hide_room'),\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{t(warnText, { postProcess: 'sprintf', sprintf: [room.fname] })}\n\t\t\t</GenericModalDoNotAskAgain>,\n\t\t);\n\t});\n\n\tconst onClickViewChannels = useCallback(() => openTab('team-channels'), [openTab]);\n\n\tconst onClickConvertToChannel = useMutableCallback(() => {\n\t\tconst onConfirm = async (roomsToRemove: { [key: string]: Serialized<IRoom> }) => {\n\t\t\ttry {\n\t\t\t\tawait convertTeamToChannel({\n\t\t\t\t\tteamId: room.teamId!,\n\t\t\t\t\troomsToRemove: Object.keys(roomsToRemove),\n\t\t\t\t});\n\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Success') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(\n\t\t\t<ConvertToChannelModal onClose={closeModal} onCancel={closeModal} onConfirm={onConfirm} teamId={room.teamId!} userId={userId!} />,\n\t\t);\n\t});\n\n\treturn (\n\t\t<TeamsInfo\n\t\t\troom={room}\n\t\t\tonClickEdit={canEdit ? openEditing : undefined}\n\t\t\tonClickClose={closeTab}\n\t\t\tonClickDelete={canDeleteRoom ? handleDelete : undefined}\n\t\t\tonClickLeave={onClickLeave}\n\t\t\tonClickHide={handleHide}\n\t\t\tonClickViewChannels={onClickViewChannels}\n\t\t\tonClickConvertToChannel={canEdit ? onClickConvertToChannel : undefined}\n\t\t/>\n\t);\n};\n\nexport default TeamsInfoWithLogic;\n"]}}},"code":"let _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 0);\nlet useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback(v) {\n    useMutableCallback = v;\n  }\n}, 0);\nlet useSetModal, useToastMessageDispatch, useUserId, usePermission, useMethod, useRouter;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useSetModal(v) {\n    useSetModal = v;\n  },\n  useToastMessageDispatch(v) {\n    useToastMessageDispatch = v;\n  },\n  useUserId(v) {\n    useUserId = v;\n  },\n  usePermission(v) {\n    usePermission = v;\n  },\n  useMethod(v) {\n    useMethod = v;\n  },\n  useRouter(v) {\n    useRouter = v;\n  }\n}, 1);\nlet React, useCallback;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  }\n}, 2);\nlet useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 3);\nlet LeaveTeam;\nmodule.link(\"./LeaveTeam\", {\n  default(v) {\n    LeaveTeam = v;\n  }\n}, 4);\nlet TeamsInfo;\nmodule.link(\"./TeamsInfo\", {\n  default(v) {\n    TeamsInfo = v;\n  }\n}, 5);\nlet UiTextContext;\nmodule.link(\"../../../../../definition/IRoomTypeConfig\", {\n  UiTextContext(v) {\n    UiTextContext = v;\n  }\n}, 6);\nlet GenericModalDoNotAskAgain;\nmodule.link(\"../../../../components/GenericModal\", {\n  GenericModalDoNotAskAgain(v) {\n    GenericModalDoNotAskAgain = v;\n  }\n}, 7);\nlet useDontAskAgain;\nmodule.link(\"../../../../hooks/useDontAskAgain\", {\n  useDontAskAgain(v) {\n    useDontAskAgain = v;\n  }\n}, 8);\nlet useEndpointAction;\nmodule.link(\"../../../../hooks/useEndpointAction\", {\n  useEndpointAction(v) {\n    useEndpointAction = v;\n  }\n}, 9);\nlet roomCoordinator;\nmodule.link(\"../../../../lib/rooms/roomCoordinator\", {\n  roomCoordinator(v) {\n    roomCoordinator = v;\n  }\n}, 10);\nlet useDeleteRoom;\nmodule.link(\"../../../hooks/roomActions/useDeleteRoom\", {\n  useDeleteRoom(v) {\n    useDeleteRoom = v;\n  }\n}, 11);\nlet useRoom;\nmodule.link(\"../../../room/contexts/RoomContext\", {\n  useRoom(v) {\n    useRoom = v;\n  }\n}, 12);\nlet useRoomToolbox;\nmodule.link(\"../../../room/contexts/RoomToolboxContext\", {\n  useRoomToolbox(v) {\n    useRoomToolbox = v;\n  }\n}, 13);\nlet ConvertToChannelModal;\nmodule.link(\"../../ConvertToChannelModal\", {\n  default(v) {\n    ConvertToChannelModal = v;\n  }\n}, 14);\nconst TeamsInfoWithLogic = _ref => {\n  let {\n    openEditing\n  } = _ref;\n  const room = useRoom();\n  const {\n    openTab,\n    closeTab\n  } = useRoomToolbox();\n  const {\n    t\n  } = useTranslation();\n  const userId = useUserId();\n  const dontAskHideRoom = useDontAskAgain('hideRoom');\n  const dispatchToastMessage = useToastMessageDispatch();\n  const setModal = useSetModal();\n  const closeModal = useMutableCallback(() => setModal());\n  const leaveTeam = useEndpointAction('POST', '/v1/teams.leave');\n  const convertTeamToChannel = useEndpointAction('POST', '/v1/teams.convertToChannel');\n  const hideTeam = useMethod('hideRoom');\n  const router = useRouter();\n  const canEdit = usePermission('edit-team-channel', room._id);\n  // const canLeave = usePermission('leave-team'); /* && room.cl !== false && joined */\n  const {\n    handleDelete,\n    canDeleteRoom\n  } = useDeleteRoom(room);\n  const onClickLeave = useMutableCallback(() => {\n    const onConfirm = async function () {\n      let selectedRooms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      const roomsLeft = Object.keys(selectedRooms);\n      const roomsToLeave = Array.isArray(roomsLeft) && roomsLeft.length > 0 ? roomsLeft : [];\n      try {\n        await leaveTeam(_objectSpread({\n          teamId: room.teamId\n        }, roomsToLeave.length && {\n          rooms: roomsToLeave\n        }));\n        dispatchToastMessage({\n          type: 'success',\n          message: t('Teams_left_team_successfully')\n        });\n        router.navigate('/home');\n      } catch (error) {\n        dispatchToastMessage({\n          type: 'error',\n          message: error\n        });\n      } finally {\n        closeModal();\n      }\n    };\n    setModal( /*#__PURE__*/React.createElement(LeaveTeam, {\n      onConfirm: onConfirm,\n      onCancel: closeModal,\n      teamId: room.teamId\n    }));\n  });\n  const handleHide = useMutableCallback(async () => {\n    const hide = async () => {\n      try {\n        await hideTeam(room._id);\n        router.navigate('/home');\n      } catch (error) {\n        dispatchToastMessage({\n          type: 'error',\n          message: error\n        });\n      } finally {\n        closeModal();\n      }\n    };\n    const warnText = roomCoordinator.getRoomDirectives(room.t).getUiText(UiTextContext.HIDE_WARNING);\n    if (dontAskHideRoom) {\n      return hide();\n    }\n    setModal( /*#__PURE__*/React.createElement(GenericModalDoNotAskAgain, {\n      variant: \"danger\",\n      confirmText: t('Yes_hide_it'),\n      cancelText: t('Cancel'),\n      onClose: closeModal,\n      onCancel: closeModal,\n      onConfirm: hide,\n      dontAskAgain: {\n        action: 'hideRoom',\n        label: t('Hide_room')\n      }\n    }, t(warnText, {\n      postProcess: 'sprintf',\n      sprintf: [room.fname]\n    })));\n  });\n  const onClickViewChannels = useCallback(() => openTab('team-channels'), [openTab]);\n  const onClickConvertToChannel = useMutableCallback(() => {\n    const onConfirm = async roomsToRemove => {\n      try {\n        await convertTeamToChannel({\n          teamId: room.teamId,\n          roomsToRemove: Object.keys(roomsToRemove)\n        });\n        dispatchToastMessage({\n          type: 'success',\n          message: t('Success')\n        });\n      } catch (error) {\n        dispatchToastMessage({\n          type: 'error',\n          message: error\n        });\n      } finally {\n        closeModal();\n      }\n    };\n    setModal( /*#__PURE__*/React.createElement(ConvertToChannelModal, {\n      onClose: closeModal,\n      onCancel: closeModal,\n      onConfirm: onConfirm,\n      teamId: room.teamId,\n      userId: userId\n    }));\n  });\n  return /*#__PURE__*/React.createElement(TeamsInfo, {\n    room: room,\n    onClickEdit: canEdit ? openEditing : undefined,\n    onClickClose: closeTab,\n    onClickDelete: canDeleteRoom ? handleDelete : undefined,\n    onClickLeave: onClickLeave,\n    onClickHide: handleHide,\n    onClickViewChannels: onClickViewChannels,\n    onClickConvertToChannel: canEdit ? onClickConvertToChannel : undefined\n  });\n};\nmodule.exportDefault(TeamsInfoWithLogic);","map":{"version":3,"names":["_objectSpread","module","link","default","v","useMutableCallback","useSetModal","useToastMessageDispatch","useUserId","usePermission","useMethod","useRouter","React","useCallback","useTranslation","LeaveTeam","TeamsInfo","UiTextContext","GenericModalDoNotAskAgain","useDontAskAgain","useEndpointAction","roomCoordinator","useDeleteRoom","useRoom","useRoomToolbox","ConvertToChannelModal","TeamsInfoWithLogic","_ref","openEditing","room","openTab","closeTab","t","userId","dontAskHideRoom","dispatchToastMessage","setModal","closeModal","leaveTeam","convertTeamToChannel","hideTeam","router","canEdit","_id","handleDelete","canDeleteRoom","onClickLeave","onConfirm","selectedRooms","arguments","length","undefined","roomsLeft","Object","keys","roomsToLeave","Array","isArray","teamId","rooms","type","message","navigate","error","createElement","onCancel","handleHide","hide","warnText","getRoomDirectives","getUiText","HIDE_WARNING","variant","confirmText","cancelText","onClose","dontAskAgain","action","label","postProcess","sprintf","fname","onClickViewChannels","onClickConvertToChannel","roomsToRemove","onClickEdit","onClickClose","onClickDelete","onClickHide","exportDefault"],"sources":["client/views/teams/contextualBar/info/TeamsInfoWithData.tsx"],"sourcesContent":["import type { IRoom, Serialized } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useSetModal, useToastMessageDispatch, useUserId, usePermission, useMethod, useRouter } from '@rocket.chat/ui-contexts';\nimport React, { useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport LeaveTeam from './LeaveTeam';\nimport TeamsInfo from './TeamsInfo';\nimport { UiTextContext } from '../../../../../definition/IRoomTypeConfig';\nimport { GenericModalDoNotAskAgain } from '../../../../components/GenericModal';\nimport { useDontAskAgain } from '../../../../hooks/useDontAskAgain';\nimport { useEndpointAction } from '../../../../hooks/useEndpointAction';\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\nimport { useDeleteRoom } from '../../../hooks/roomActions/useDeleteRoom';\nimport { useRoom } from '../../../room/contexts/RoomContext';\nimport { useRoomToolbox } from '../../../room/contexts/RoomToolboxContext';\nimport ConvertToChannelModal from '../../ConvertToChannelModal';\n\ntype TeamsInfoWithLogicProps = {\n\topenEditing: () => void;\n};\n\nconst TeamsInfoWithLogic = ({ openEditing }: TeamsInfoWithLogicProps) => {\n\tconst room = useRoom();\n\tconst { openTab, closeTab } = useRoomToolbox();\n\tconst { t } = useTranslation();\n\tconst userId = useUserId();\n\n\tconst dontAskHideRoom = useDontAskAgain('hideRoom');\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\tconst closeModal = useMutableCallback(() => setModal());\n\n\tconst leaveTeam = useEndpointAction('POST', '/v1/teams.leave');\n\tconst convertTeamToChannel = useEndpointAction('POST', '/v1/teams.convertToChannel');\n\n\tconst hideTeam = useMethod('hideRoom');\n\n\tconst router = useRouter();\n\n\tconst canEdit = usePermission('edit-team-channel', room._id);\n\n\t// const canLeave = usePermission('leave-team'); /* && room.cl !== false && joined */\n\n\tconst { handleDelete, canDeleteRoom } = useDeleteRoom(room);\n\n\tconst onClickLeave = useMutableCallback(() => {\n\t\tconst onConfirm = async (selectedRooms: { [key: string]: Serialized<IRoom> & { isLastOwner?: boolean } } = {}) => {\n\t\t\tconst roomsLeft = Object.keys(selectedRooms);\n\t\t\tconst roomsToLeave = Array.isArray(roomsLeft) && roomsLeft.length > 0 ? roomsLeft : [];\n\n\t\t\ttry {\n\t\t\t\tawait leaveTeam({\n\t\t\t\t\tteamId: room.teamId!,\n\t\t\t\t\t...(roomsToLeave.length && { rooms: roomsToLeave }),\n\t\t\t\t});\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Teams_left_team_successfully') });\n\t\t\t\trouter.navigate('/home');\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(<LeaveTeam onConfirm={onConfirm} onCancel={closeModal} teamId={room.teamId!} />);\n\t});\n\n\tconst handleHide = useMutableCallback(async () => {\n\t\tconst hide = async () => {\n\t\t\ttry {\n\t\t\t\tawait hideTeam(room._id);\n\t\t\t\trouter.navigate('/home');\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tconst warnText = roomCoordinator.getRoomDirectives(room.t).getUiText(UiTextContext.HIDE_WARNING) as TranslationKey;\n\n\t\tif (dontAskHideRoom) {\n\t\t\treturn hide();\n\t\t}\n\n\t\tsetModal(\n\t\t\t<GenericModalDoNotAskAgain\n\t\t\t\tvariant='danger'\n\t\t\t\tconfirmText={t('Yes_hide_it')}\n\t\t\t\tcancelText={t('Cancel')}\n\t\t\t\tonClose={closeModal}\n\t\t\t\tonCancel={closeModal}\n\t\t\t\tonConfirm={hide}\n\t\t\t\tdontAskAgain={{\n\t\t\t\t\taction: 'hideRoom',\n\t\t\t\t\tlabel: t('Hide_room'),\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{t(warnText, { postProcess: 'sprintf', sprintf: [room.fname] })}\n\t\t\t</GenericModalDoNotAskAgain>,\n\t\t);\n\t});\n\n\tconst onClickViewChannels = useCallback(() => openTab('team-channels'), [openTab]);\n\n\tconst onClickConvertToChannel = useMutableCallback(() => {\n\t\tconst onConfirm = async (roomsToRemove: { [key: string]: Serialized<IRoom> }) => {\n\t\t\ttry {\n\t\t\t\tawait convertTeamToChannel({\n\t\t\t\t\tteamId: room.teamId!,\n\t\t\t\t\troomsToRemove: Object.keys(roomsToRemove),\n\t\t\t\t});\n\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Success') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(\n\t\t\t<ConvertToChannelModal onClose={closeModal} onCancel={closeModal} onConfirm={onConfirm} teamId={room.teamId!} userId={userId!} />,\n\t\t);\n\t});\n\n\treturn (\n\t\t<TeamsInfo\n\t\t\troom={room}\n\t\t\tonClickEdit={canEdit ? openEditing : undefined}\n\t\t\tonClickClose={closeTab}\n\t\t\tonClickDelete={canDeleteRoom ? handleDelete : undefined}\n\t\t\tonClickLeave={onClickLeave}\n\t\t\tonClickHide={handleHide}\n\t\t\tonClickViewChannels={onClickViewChannels}\n\t\t\tonClickConvertToChannel={canEdit ? onClickConvertToChannel : undefined}\n\t\t/>\n\t);\n};\n\nexport default TeamsInfoWithLogic;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"794a68714a7cc9f12c41960e78a0dc9527e34215"}
