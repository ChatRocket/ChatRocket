{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/UserProvider/UserProvider.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/providers/UserProvider/UserProvider.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/UserProvider/UserProvider.tsx","inputSourceMap":{"version":3,"file":"client/providers/UserProvider/UserProvider.tsx","sourceRoot":"","sources":["client/providers/UserProvider/UserProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IRoom, ISubscription, IUser } from '@rocket.chat/core-typings';\nimport { useLocalStorage } from '@rocket.chat/fuselage-hooks';\nimport type { SubscriptionWithRoom } from '@rocket.chat/ui-contexts';\nimport { UserContext, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport type { ContextType, ReactElement, ReactNode } from 'react';\nimport React, { useEffect, useMemo, useRef } from 'react';\n\nimport { Subscriptions, ChatRoom } from '../../../app/models/client';\nimport { getUserPreference } from '../../../app/utils/client';\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\nimport { afterLogoutCleanUpCallback } from '../../../lib/callbacks/afterLogoutCleanUpCallback';\nimport { useReactiveValue } from '../../hooks/useReactiveValue';\nimport { createReactiveSubscriptionFactory } from '../../lib/createReactiveSubscriptionFactory';\nimport { queryClient } from '../../lib/queryClient';\nimport { useCreateFontStyleElement } from '../../views/account/accessibility/hooks/useCreateFontStyleElement';\nimport { useClearRemovedRoomsHistory } from './hooks/useClearRemovedRoomsHistory';\nimport { useDeleteUser } from './hooks/useDeleteUser';\nimport { useEmailVerificationWarning } from './hooks/useEmailVerificationWarning';\nimport { useUpdateAvatar } from './hooks/useUpdateAvatar';\n\nconst getUser = (): IUser | null => Meteor.user() as IUser | null;\n\nconst getUserId = (): string | null => Meteor.userId();\n\nconst logout = (): Promise<void> =>\n\tnew Promise((resolve, reject) => {\n\t\tconst user = getUser();\n\n\t\tif (!user) {\n\t\t\treturn resolve();\n\t\t}\n\n\t\tMeteor.logout(async () => {\n\t\t\tawait afterLogoutCleanUpCallback.run(user);\n\t\t\tsdk.call('logoutCleanUp', user).then(resolve, reject);\n\t\t});\n\t});\n\ntype UserProviderProps = {\n\tchildren: ReactNode;\n};\n\nconst UserProvider = ({ children }: UserProviderProps): ReactElement => {\n\tconst _user = useReactiveValue(getUser);\n\tconst userId = useReactiveValue(getUserId);\n\tconst previousUserId = useRef(userId);\n\tconst [userLanguage, setUserLanguage] = useLocalStorage('userLanguage', '');\n\tconst [preferedLanguage, setPreferedLanguage] = useLocalStorage('preferedLanguage', '');\n\n\tconst setUserPreferences = useEndpoint('POST', '/v1/users.setPreferences');\n\n\tconst user: IUser | null = useMemo(() => {\n\t\tif (!userId) return null;\n\t\tif (!_user) return user;\n\t\treturn _user;\n\t}, [_user, userId]);\n\n\tconst createFontStyleElement = useCreateFontStyleElement();\n\tcreateFontStyleElement(user?.settings?.preferences?.fontSize);\n\n\tuseEmailVerificationWarning(user ?? undefined);\n\tuseClearRemovedRoomsHistory(userId);\n\n\tuseDeleteUser();\n\tuseUpdateAvatar();\n\n\tconst contextValue = useMemo(\n\t\t(): ContextType<typeof UserContext> => ({\n\t\t\tuserId,\n\t\t\tuser,\n\t\t\tqueryPreference: createReactiveSubscriptionFactory(\n\t\t\t\t<T,>(key: string, defaultValue?: T) => getUserPreference(userId, key, defaultValue) as T,\n\t\t\t),\n\t\t\tquerySubscription: createReactiveSubscriptionFactory<ISubscription | undefined>((query, fields, sort) =>\n\t\t\t\tSubscriptions.findOne(query, { fields, sort }),\n\t\t\t),\n\t\t\tqueryRoom: createReactiveSubscriptionFactory<IRoom | undefined>((query, fields) => ChatRoom.findOne(query, { fields })),\n\t\t\tquerySubscriptions: createReactiveSubscriptionFactory<SubscriptionWithRoom[]>((query, options) => {\n\t\t\t\tif (userId) {\n\t\t\t\t\treturn Subscriptions.find(query, options).fetch();\n\t\t\t\t}\n\n\t\t\t\treturn ChatRoom.find(query, options).fetch();\n\t\t\t}),\n\t\t\tlogout,\n\t\t}),\n\t\t[userId, user],\n\t);\n\n\tuseEffect(() => {\n\t\tif (!!userId && preferedLanguage !== userLanguage) {\n\t\t\tsetUserPreferences({ data: { language: preferedLanguage } });\n\t\t\tsetUserLanguage(preferedLanguage);\n\t\t}\n\n\t\tif (user?.language !== undefined && user.language !== userLanguage) {\n\t\t\tsetUserLanguage(user.language);\n\t\t\tsetPreferedLanguage(user.language);\n\t\t}\n\t}, [preferedLanguage, setPreferedLanguage, setUserLanguage, user?.language, userLanguage, userId, setUserPreferences]);\n\n\tuseEffect(() => {\n\t\tif (previousUserId.current && previousUserId.current !== userId) {\n\t\t\tqueryClient.clear();\n\t\t}\n\n\t\tpreviousUserId.current = userId;\n\t}, [userId]);\n\n\treturn <UserContext.Provider children={children} value={contextValue} />;\n};\n\nexport default UserProvider;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/providers/UserProvider/UserProvider.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/providers/UserProvider/UserProvider.tsx","inputSourceMap":{"version":3,"file":"client/providers/UserProvider/UserProvider.tsx","sourceRoot":"","sources":["client/providers/UserProvider/UserProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IRoom, ISubscription, IUser } from '@rocket.chat/core-typings';\nimport { useLocalStorage } from '@rocket.chat/fuselage-hooks';\nimport type { SubscriptionWithRoom } from '@rocket.chat/ui-contexts';\nimport { UserContext, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport type { ContextType, ReactElement, ReactNode } from 'react';\nimport React, { useEffect, useMemo, useRef } from 'react';\n\nimport { Subscriptions, ChatRoom } from '../../../app/models/client';\nimport { getUserPreference } from '../../../app/utils/client';\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\nimport { afterLogoutCleanUpCallback } from '../../../lib/callbacks/afterLogoutCleanUpCallback';\nimport { useReactiveValue } from '../../hooks/useReactiveValue';\nimport { createReactiveSubscriptionFactory } from '../../lib/createReactiveSubscriptionFactory';\nimport { queryClient } from '../../lib/queryClient';\nimport { useCreateFontStyleElement } from '../../views/account/accessibility/hooks/useCreateFontStyleElement';\nimport { useClearRemovedRoomsHistory } from './hooks/useClearRemovedRoomsHistory';\nimport { useDeleteUser } from './hooks/useDeleteUser';\nimport { useEmailVerificationWarning } from './hooks/useEmailVerificationWarning';\nimport { useUpdateAvatar } from './hooks/useUpdateAvatar';\n\nconst getUser = (): IUser | null => Meteor.user() as IUser | null;\n\nconst getUserId = (): string | null => Meteor.userId();\n\nconst logout = (): Promise<void> =>\n\tnew Promise((resolve, reject) => {\n\t\tconst user = getUser();\n\n\t\tif (!user) {\n\t\t\treturn resolve();\n\t\t}\n\n\t\tMeteor.logout(async () => {\n\t\t\tawait afterLogoutCleanUpCallback.run(user);\n\t\t\tsdk.call('logoutCleanUp', user).then(resolve, reject);\n\t\t});\n\t});\n\ntype UserProviderProps = {\n\tchildren: ReactNode;\n};\n\nconst UserProvider = ({ children }: UserProviderProps): ReactElement => {\n\tconst _user = useReactiveValue(getUser);\n\tconst userId = useReactiveValue(getUserId);\n\tconst previousUserId = useRef(userId);\n\tconst [userLanguage, setUserLanguage] = useLocalStorage('userLanguage', '');\n\tconst [preferedLanguage, setPreferedLanguage] = useLocalStorage('preferedLanguage', '');\n\n\tconst setUserPreferences = useEndpoint('POST', '/v1/users.setPreferences');\n\n\tconst user: IUser | null = useMemo(() => {\n\t\tif (!userId) return null;\n\t\tif (!_user) return user;\n\t\treturn _user;\n\t}, [_user, userId]);\n\n\tconst createFontStyleElement = useCreateFontStyleElement();\n\tcreateFontStyleElement(user?.settings?.preferences?.fontSize);\n\n\tuseEmailVerificationWarning(user ?? undefined);\n\tuseClearRemovedRoomsHistory(userId);\n\n\tuseDeleteUser();\n\tuseUpdateAvatar();\n\n\tconst contextValue = useMemo(\n\t\t(): ContextType<typeof UserContext> => ({\n\t\t\tuserId,\n\t\t\tuser,\n\t\t\tqueryPreference: createReactiveSubscriptionFactory(\n\t\t\t\t<T,>(key: string, defaultValue?: T) => getUserPreference(userId, key, defaultValue) as T,\n\t\t\t),\n\t\t\tquerySubscription: createReactiveSubscriptionFactory<ISubscription | undefined>((query, fields, sort) =>\n\t\t\t\tSubscriptions.findOne(query, { fields, sort }),\n\t\t\t),\n\t\t\tqueryRoom: createReactiveSubscriptionFactory<IRoom | undefined>((query, fields) => ChatRoom.findOne(query, { fields })),\n\t\t\tquerySubscriptions: createReactiveSubscriptionFactory<SubscriptionWithRoom[]>((query, options) => {\n\t\t\t\tif (userId) {\n\t\t\t\t\treturn Subscriptions.find(query, options).fetch();\n\t\t\t\t}\n\n\t\t\t\treturn ChatRoom.find(query, options).fetch();\n\t\t\t}),\n\t\t\tlogout,\n\t\t}),\n\t\t[userId, user],\n\t);\n\n\tuseEffect(() => {\n\t\tif (!!userId && preferedLanguage !== userLanguage) {\n\t\t\tsetUserPreferences({ data: { language: preferedLanguage } });\n\t\t\tsetUserLanguage(preferedLanguage);\n\t\t}\n\n\t\tif (user?.language !== undefined && user.language !== userLanguage) {\n\t\t\tsetUserLanguage(user.language);\n\t\t\tsetPreferedLanguage(user.language);\n\t\t}\n\t}, [preferedLanguage, setPreferedLanguage, setUserLanguage, user?.language, userLanguage, userId, setUserPreferences]);\n\n\tuseEffect(() => {\n\t\tif (previousUserId.current && previousUserId.current !== userId) {\n\t\t\tqueryClient.clear();\n\t\t}\n\n\t\tpreviousUserId.current = userId;\n\t}, [userId]);\n\n\treturn <UserContext.Provider children={children} value={contextValue} />;\n};\n\nexport default UserProvider;\n"]}}},"code":"let useLocalStorage;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useLocalStorage(v) {\n    useLocalStorage = v;\n  }\n}, 0);\nlet UserContext, useEndpoint;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  UserContext(v) {\n    UserContext = v;\n  },\n  useEndpoint(v) {\n    useEndpoint = v;\n  }\n}, 1);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n}, 2);\nlet React, useEffect, useMemo, useRef;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  },\n  useRef(v) {\n    useRef = v;\n  }\n}, 3);\nlet Subscriptions, ChatRoom;\nmodule.link(\"../../../app/models/client\", {\n  Subscriptions(v) {\n    Subscriptions = v;\n  },\n  ChatRoom(v) {\n    ChatRoom = v;\n  }\n}, 4);\nlet getUserPreference;\nmodule.link(\"../../../app/utils/client\", {\n  getUserPreference(v) {\n    getUserPreference = v;\n  }\n}, 5);\nlet sdk;\nmodule.link(\"../../../app/utils/client/lib/SDKClient\", {\n  sdk(v) {\n    sdk = v;\n  }\n}, 6);\nlet afterLogoutCleanUpCallback;\nmodule.link(\"../../../lib/callbacks/afterLogoutCleanUpCallback\", {\n  afterLogoutCleanUpCallback(v) {\n    afterLogoutCleanUpCallback = v;\n  }\n}, 7);\nlet useReactiveValue;\nmodule.link(\"../../hooks/useReactiveValue\", {\n  useReactiveValue(v) {\n    useReactiveValue = v;\n  }\n}, 8);\nlet createReactiveSubscriptionFactory;\nmodule.link(\"../../lib/createReactiveSubscriptionFactory\", {\n  createReactiveSubscriptionFactory(v) {\n    createReactiveSubscriptionFactory = v;\n  }\n}, 9);\nlet queryClient;\nmodule.link(\"../../lib/queryClient\", {\n  queryClient(v) {\n    queryClient = v;\n  }\n}, 10);\nlet useCreateFontStyleElement;\nmodule.link(\"../../views/account/accessibility/hooks/useCreateFontStyleElement\", {\n  useCreateFontStyleElement(v) {\n    useCreateFontStyleElement = v;\n  }\n}, 11);\nlet useClearRemovedRoomsHistory;\nmodule.link(\"./hooks/useClearRemovedRoomsHistory\", {\n  useClearRemovedRoomsHistory(v) {\n    useClearRemovedRoomsHistory = v;\n  }\n}, 12);\nlet useDeleteUser;\nmodule.link(\"./hooks/useDeleteUser\", {\n  useDeleteUser(v) {\n    useDeleteUser = v;\n  }\n}, 13);\nlet useEmailVerificationWarning;\nmodule.link(\"./hooks/useEmailVerificationWarning\", {\n  useEmailVerificationWarning(v) {\n    useEmailVerificationWarning = v;\n  }\n}, 14);\nlet useUpdateAvatar;\nmodule.link(\"./hooks/useUpdateAvatar\", {\n  useUpdateAvatar(v) {\n    useUpdateAvatar = v;\n  }\n}, 15);\nconst getUser = () => Meteor.user();\nconst getUserId = () => Meteor.userId();\nconst logout = () => new Promise((resolve, reject) => {\n  const user = getUser();\n  if (!user) {\n    return resolve();\n  }\n  Meteor.logout(async () => {\n    await afterLogoutCleanUpCallback.run(user);\n    sdk.call('logoutCleanUp', user).then(resolve, reject);\n  });\n});\nconst UserProvider = _ref => {\n  var _user$settings, _user$settings$prefer;\n  let {\n    children\n  } = _ref;\n  const _user = useReactiveValue(getUser);\n  const userId = useReactiveValue(getUserId);\n  const previousUserId = useRef(userId);\n  const [userLanguage, setUserLanguage] = useLocalStorage('userLanguage', '');\n  const [preferedLanguage, setPreferedLanguage] = useLocalStorage('preferedLanguage', '');\n  const setUserPreferences = useEndpoint('POST', '/v1/users.setPreferences');\n  const user = useMemo(() => {\n    if (!userId) return null;\n    if (!_user) return user;\n    return _user;\n  }, [_user, userId]);\n  const createFontStyleElement = useCreateFontStyleElement();\n  createFontStyleElement(user === null || user === void 0 ? void 0 : (_user$settings = user.settings) === null || _user$settings === void 0 ? void 0 : (_user$settings$prefer = _user$settings.preferences) === null || _user$settings$prefer === void 0 ? void 0 : _user$settings$prefer.fontSize);\n  useEmailVerificationWarning(user !== null && user !== void 0 ? user : undefined);\n  useClearRemovedRoomsHistory(userId);\n  useDeleteUser();\n  useUpdateAvatar();\n  const contextValue = useMemo(() => ({\n    userId,\n    user,\n    queryPreference: createReactiveSubscriptionFactory((key, defaultValue) => getUserPreference(userId, key, defaultValue)),\n    querySubscription: createReactiveSubscriptionFactory((query, fields, sort) => Subscriptions.findOne(query, {\n      fields,\n      sort\n    })),\n    queryRoom: createReactiveSubscriptionFactory((query, fields) => ChatRoom.findOne(query, {\n      fields\n    })),\n    querySubscriptions: createReactiveSubscriptionFactory((query, options) => {\n      if (userId) {\n        return Subscriptions.find(query, options).fetch();\n      }\n      return ChatRoom.find(query, options).fetch();\n    }),\n    logout\n  }), [userId, user]);\n  useEffect(() => {\n    if (!!userId && preferedLanguage !== userLanguage) {\n      setUserPreferences({\n        data: {\n          language: preferedLanguage\n        }\n      });\n      setUserLanguage(preferedLanguage);\n    }\n    if ((user === null || user === void 0 ? void 0 : user.language) !== undefined && user.language !== userLanguage) {\n      setUserLanguage(user.language);\n      setPreferedLanguage(user.language);\n    }\n  }, [preferedLanguage, setPreferedLanguage, setUserLanguage, user === null || user === void 0 ? void 0 : user.language, userLanguage, userId, setUserPreferences]);\n  useEffect(() => {\n    if (previousUserId.current && previousUserId.current !== userId) {\n      queryClient.clear();\n    }\n    previousUserId.current = userId;\n  }, [userId]);\n  return /*#__PURE__*/React.createElement(UserContext.Provider, {\n    children: children,\n    value: contextValue\n  });\n};\nmodule.exportDefault(UserProvider);","map":{"version":3,"names":["useLocalStorage","module","link","v","UserContext","useEndpoint","Meteor","React","useEffect","useMemo","useRef","default","Subscriptions","ChatRoom","getUserPreference","sdk","afterLogoutCleanUpCallback","useReactiveValue","createReactiveSubscriptionFactory","queryClient","useCreateFontStyleElement","useClearRemovedRoomsHistory","useDeleteUser","useEmailVerificationWarning","useUpdateAvatar","getUser","user","getUserId","userId","logout","Promise","resolve","reject","run","call","then","UserProvider","_ref","_user$settings","_user$settings$prefer","children","_user","previousUserId","userLanguage","setUserLanguage","preferedLanguage","setPreferedLanguage","setUserPreferences","createFontStyleElement","settings","preferences","fontSize","undefined","contextValue","queryPreference","key","defaultValue","querySubscription","query","fields","sort","findOne","queryRoom","querySubscriptions","options","find","fetch","data","language","current","clear","createElement","Provider","value","exportDefault"],"sources":["client/providers/UserProvider/UserProvider.tsx"],"sourcesContent":["import type { IRoom, ISubscription, IUser } from '@rocket.chat/core-typings';\nimport { useLocalStorage } from '@rocket.chat/fuselage-hooks';\nimport type { SubscriptionWithRoom } from '@rocket.chat/ui-contexts';\nimport { UserContext, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport type { ContextType, ReactElement, ReactNode } from 'react';\nimport React, { useEffect, useMemo, useRef } from 'react';\n\nimport { Subscriptions, ChatRoom } from '../../../app/models/client';\nimport { getUserPreference } from '../../../app/utils/client';\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\nimport { afterLogoutCleanUpCallback } from '../../../lib/callbacks/afterLogoutCleanUpCallback';\nimport { useReactiveValue } from '../../hooks/useReactiveValue';\nimport { createReactiveSubscriptionFactory } from '../../lib/createReactiveSubscriptionFactory';\nimport { queryClient } from '../../lib/queryClient';\nimport { useCreateFontStyleElement } from '../../views/account/accessibility/hooks/useCreateFontStyleElement';\nimport { useClearRemovedRoomsHistory } from './hooks/useClearRemovedRoomsHistory';\nimport { useDeleteUser } from './hooks/useDeleteUser';\nimport { useEmailVerificationWarning } from './hooks/useEmailVerificationWarning';\nimport { useUpdateAvatar } from './hooks/useUpdateAvatar';\n\nconst getUser = (): IUser | null => Meteor.user() as IUser | null;\n\nconst getUserId = (): string | null => Meteor.userId();\n\nconst logout = (): Promise<void> =>\n\tnew Promise((resolve, reject) => {\n\t\tconst user = getUser();\n\n\t\tif (!user) {\n\t\t\treturn resolve();\n\t\t}\n\n\t\tMeteor.logout(async () => {\n\t\t\tawait afterLogoutCleanUpCallback.run(user);\n\t\t\tsdk.call('logoutCleanUp', user).then(resolve, reject);\n\t\t});\n\t});\n\ntype UserProviderProps = {\n\tchildren: ReactNode;\n};\n\nconst UserProvider = ({ children }: UserProviderProps): ReactElement => {\n\tconst _user = useReactiveValue(getUser);\n\tconst userId = useReactiveValue(getUserId);\n\tconst previousUserId = useRef(userId);\n\tconst [userLanguage, setUserLanguage] = useLocalStorage('userLanguage', '');\n\tconst [preferedLanguage, setPreferedLanguage] = useLocalStorage('preferedLanguage', '');\n\n\tconst setUserPreferences = useEndpoint('POST', '/v1/users.setPreferences');\n\n\tconst user: IUser | null = useMemo(() => {\n\t\tif (!userId) return null;\n\t\tif (!_user) return user;\n\t\treturn _user;\n\t}, [_user, userId]);\n\n\tconst createFontStyleElement = useCreateFontStyleElement();\n\tcreateFontStyleElement(user?.settings?.preferences?.fontSize);\n\n\tuseEmailVerificationWarning(user ?? undefined);\n\tuseClearRemovedRoomsHistory(userId);\n\n\tuseDeleteUser();\n\tuseUpdateAvatar();\n\n\tconst contextValue = useMemo(\n\t\t(): ContextType<typeof UserContext> => ({\n\t\t\tuserId,\n\t\t\tuser,\n\t\t\tqueryPreference: createReactiveSubscriptionFactory(\n\t\t\t\t<T,>(key: string, defaultValue?: T) => getUserPreference(userId, key, defaultValue) as T,\n\t\t\t),\n\t\t\tquerySubscription: createReactiveSubscriptionFactory<ISubscription | undefined>((query, fields, sort) =>\n\t\t\t\tSubscriptions.findOne(query, { fields, sort }),\n\t\t\t),\n\t\t\tqueryRoom: createReactiveSubscriptionFactory<IRoom | undefined>((query, fields) => ChatRoom.findOne(query, { fields })),\n\t\t\tquerySubscriptions: createReactiveSubscriptionFactory<SubscriptionWithRoom[]>((query, options) => {\n\t\t\t\tif (userId) {\n\t\t\t\t\treturn Subscriptions.find(query, options).fetch();\n\t\t\t\t}\n\n\t\t\t\treturn ChatRoom.find(query, options).fetch();\n\t\t\t}),\n\t\t\tlogout,\n\t\t}),\n\t\t[userId, user],\n\t);\n\n\tuseEffect(() => {\n\t\tif (!!userId && preferedLanguage !== userLanguage) {\n\t\t\tsetUserPreferences({ data: { language: preferedLanguage } });\n\t\t\tsetUserLanguage(preferedLanguage);\n\t\t}\n\n\t\tif (user?.language !== undefined && user.language !== userLanguage) {\n\t\t\tsetUserLanguage(user.language);\n\t\t\tsetPreferedLanguage(user.language);\n\t\t}\n\t}, [preferedLanguage, setPreferedLanguage, setUserLanguage, user?.language, userLanguage, userId, setUserPreferences]);\n\n\tuseEffect(() => {\n\t\tif (previousUserId.current && previousUserId.current !== userId) {\n\t\t\tqueryClient.clear();\n\t\t}\n\n\t\tpreviousUserId.current = userId;\n\t}, [userId]);\n\n\treturn <UserContext.Provider children={children} value={contextValue} />;\n};\n\nexport default UserProvider;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"72715e0e396f6ba9885d93e760bfd460a47ac7b0"}
