{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/message/variants/thread/ThreadMessageContent.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/components/message/variants/thread/ThreadMessageContent.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/message/variants/thread/ThreadMessageContent.tsx","inputSourceMap":{"version":3,"file":"client/components/message/variants/thread/ThreadMessageContent.tsx","sourceRoot":"","sources":["client/components/message/variants/thread/ThreadMessageContent.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IThreadMainMessage, IThreadMessage } from '@rocket.chat/core-typings';\nimport { isE2EEMessage, isQuoteAttachment } from '@rocket.chat/core-typings';\nimport { MessageBody } from '@rocket.chat/fuselage';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useSetting, useUserId } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { memo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useUserData } from '../../../../hooks/useUserData';\nimport type { UserPresence } from '../../../../lib/presence';\nimport MessageContentBody from '../../MessageContentBody';\nimport ReadReceiptIndicator from '../../ReadReceiptIndicator';\nimport Attachments from '../../content/Attachments';\nimport BroadcastMetrics from '../../content/BroadcastMetrics';\nimport Location from '../../content/Location';\nimport MessageActions from '../../content/MessageActions';\nimport Reactions from '../../content/Reactions';\nimport UrlPreviews from '../../content/UrlPreviews';\nimport { useNormalizedMessage } from '../../hooks/useNormalizedMessage';\nimport { useOembedLayout } from '../../hooks/useOembedLayout';\nimport { useSubscriptionFromMessageQuery } from '../../hooks/useSubscriptionFromMessageQuery';\nimport UiKitMessageBlock from '../../uikit/UiKitMessageBlock';\n\ntype ThreadMessageContentProps = {\n\tmessage: IThreadMessage | IThreadMainMessage;\n};\n\nconst ThreadMessageContent = ({ message }: ThreadMessageContentProps): ReactElement => {\n\tconst encrypted = isE2EEMessage(message);\n\tconst { enabled: oembedEnabled } = useOembedLayout();\n\tconst subscription = useSubscriptionFromMessageQuery(message).data ?? undefined;\n\tconst broadcast = subscription?.broadcast ?? false;\n\tconst uid = useUserId();\n\tconst messageUser: UserPresence = { ...message.u, roles: [], ...useUserData(message.u._id) };\n\tconst readReceiptEnabled = useSetting('Message_Read_Receipt_Enabled', false);\n\n\tconst { t } = useTranslation();\n\n\tconst normalizedMessage = useNormalizedMessage(message);\n\n\tconst isMessageEncrypted = encrypted && normalizedMessage?.e2e === 'pending';\n\n\tconst quotes = normalizedMessage?.attachments?.filter(isQuoteAttachment) || [];\n\n\tconst attachments = normalizedMessage?.attachments?.filter((attachment) => !isQuoteAttachment(attachment)) || [];\n\n\treturn (\n\t\t<>\n\t\t\t{isMessageEncrypted && <MessageBody>{t('E2E_message_encrypted_placeholder')}</MessageBody>}\n\n\t\t\t{!!quotes?.length && <Attachments attachments={quotes} />}\n\n\t\t\t{!normalizedMessage.blocks?.length && !!normalizedMessage.md?.length && (\n\t\t\t\t<>\n\t\t\t\t\t{(!encrypted || normalizedMessage.e2e === 'done') && (\n\t\t\t\t\t\t<MessageContentBody md={normalizedMessage.md} mentions={normalizedMessage.mentions} channels={normalizedMessage.channels} />\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t{normalizedMessage.blocks && (\n\t\t\t\t<UiKitMessageBlock rid={normalizedMessage.rid} mid={normalizedMessage._id} blocks={normalizedMessage.blocks} />\n\t\t\t)}\n\n\t\t\t{!!attachments && <Attachments id={message.files?.[0]?._id} attachments={attachments} />}\n\n\t\t\t{oembedEnabled && !!normalizedMessage.urls?.length && <UrlPreviews urls={normalizedMessage.urls} />}\n\n\t\t\t{normalizedMessage.actionLinks?.length && (\n\t\t\t\t<MessageActions\n\t\t\t\t\tmessage={normalizedMessage}\n\t\t\t\t\tactions={normalizedMessage.actionLinks.map(({ method_id: methodId, i18nLabel, ...action }) => ({\n\t\t\t\t\t\tmethodId,\n\t\t\t\t\t\ti18nLabel: i18nLabel as TranslationKey,\n\t\t\t\t\t\t...action,\n\t\t\t\t\t}))}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{normalizedMessage.reactions && Object.keys(normalizedMessage.reactions).length && <Reactions message={normalizedMessage} />}\n\n\t\t\t{normalizedMessage.location && <Location location={normalizedMessage.location} />}\n\n\t\t\t{broadcast && !!messageUser.username && normalizedMessage.u._id !== uid && (\n\t\t\t\t<BroadcastMetrics username={messageUser.username} message={normalizedMessage} />\n\t\t\t)}\n\n\t\t\t{readReceiptEnabled && <ReadReceiptIndicator mid={normalizedMessage._id} unread={normalizedMessage.unread} />}\n\t\t</>\n\t);\n};\n\nexport default memo(ThreadMessageContent);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"production","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/message/variants/thread/ThreadMessageContent.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/components/message/variants/thread/ThreadMessageContent.tsx","inputSourceMap":{"version":3,"file":"client/components/message/variants/thread/ThreadMessageContent.tsx","sourceRoot":"","sources":["client/components/message/variants/thread/ThreadMessageContent.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IThreadMainMessage, IThreadMessage } from '@rocket.chat/core-typings';\nimport { isE2EEMessage, isQuoteAttachment } from '@rocket.chat/core-typings';\nimport { MessageBody } from '@rocket.chat/fuselage';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useSetting, useUserId } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { memo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useUserData } from '../../../../hooks/useUserData';\nimport type { UserPresence } from '../../../../lib/presence';\nimport MessageContentBody from '../../MessageContentBody';\nimport ReadReceiptIndicator from '../../ReadReceiptIndicator';\nimport Attachments from '../../content/Attachments';\nimport BroadcastMetrics from '../../content/BroadcastMetrics';\nimport Location from '../../content/Location';\nimport MessageActions from '../../content/MessageActions';\nimport Reactions from '../../content/Reactions';\nimport UrlPreviews from '../../content/UrlPreviews';\nimport { useNormalizedMessage } from '../../hooks/useNormalizedMessage';\nimport { useOembedLayout } from '../../hooks/useOembedLayout';\nimport { useSubscriptionFromMessageQuery } from '../../hooks/useSubscriptionFromMessageQuery';\nimport UiKitMessageBlock from '../../uikit/UiKitMessageBlock';\n\ntype ThreadMessageContentProps = {\n\tmessage: IThreadMessage | IThreadMainMessage;\n};\n\nconst ThreadMessageContent = ({ message }: ThreadMessageContentProps): ReactElement => {\n\tconst encrypted = isE2EEMessage(message);\n\tconst { enabled: oembedEnabled } = useOembedLayout();\n\tconst subscription = useSubscriptionFromMessageQuery(message).data ?? undefined;\n\tconst broadcast = subscription?.broadcast ?? false;\n\tconst uid = useUserId();\n\tconst messageUser: UserPresence = { ...message.u, roles: [], ...useUserData(message.u._id) };\n\tconst readReceiptEnabled = useSetting('Message_Read_Receipt_Enabled', false);\n\n\tconst { t } = useTranslation();\n\n\tconst normalizedMessage = useNormalizedMessage(message);\n\n\tconst isMessageEncrypted = encrypted && normalizedMessage?.e2e === 'pending';\n\n\tconst quotes = normalizedMessage?.attachments?.filter(isQuoteAttachment) || [];\n\n\tconst attachments = normalizedMessage?.attachments?.filter((attachment) => !isQuoteAttachment(attachment)) || [];\n\n\treturn (\n\t\t<>\n\t\t\t{isMessageEncrypted && <MessageBody>{t('E2E_message_encrypted_placeholder')}</MessageBody>}\n\n\t\t\t{!!quotes?.length && <Attachments attachments={quotes} />}\n\n\t\t\t{!normalizedMessage.blocks?.length && !!normalizedMessage.md?.length && (\n\t\t\t\t<>\n\t\t\t\t\t{(!encrypted || normalizedMessage.e2e === 'done') && (\n\t\t\t\t\t\t<MessageContentBody md={normalizedMessage.md} mentions={normalizedMessage.mentions} channels={normalizedMessage.channels} />\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t{normalizedMessage.blocks && (\n\t\t\t\t<UiKitMessageBlock rid={normalizedMessage.rid} mid={normalizedMessage._id} blocks={normalizedMessage.blocks} />\n\t\t\t)}\n\n\t\t\t{!!attachments && <Attachments id={message.files?.[0]?._id} attachments={attachments} />}\n\n\t\t\t{oembedEnabled && !!normalizedMessage.urls?.length && <UrlPreviews urls={normalizedMessage.urls} />}\n\n\t\t\t{normalizedMessage.actionLinks?.length && (\n\t\t\t\t<MessageActions\n\t\t\t\t\tmessage={normalizedMessage}\n\t\t\t\t\tactions={normalizedMessage.actionLinks.map(({ method_id: methodId, i18nLabel, ...action }) => ({\n\t\t\t\t\t\tmethodId,\n\t\t\t\t\t\ti18nLabel: i18nLabel as TranslationKey,\n\t\t\t\t\t\t...action,\n\t\t\t\t\t}))}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{normalizedMessage.reactions && Object.keys(normalizedMessage.reactions).length && <Reactions message={normalizedMessage} />}\n\n\t\t\t{normalizedMessage.location && <Location location={normalizedMessage.location} />}\n\n\t\t\t{broadcast && !!messageUser.username && normalizedMessage.u._id !== uid && (\n\t\t\t\t<BroadcastMetrics username={messageUser.username} message={normalizedMessage} />\n\t\t\t)}\n\n\t\t\t{readReceiptEnabled && <ReadReceiptIndicator mid={normalizedMessage._id} unread={normalizedMessage.unread} />}\n\t\t</>\n\t);\n};\n\nexport default memo(ThreadMessageContent);\n"]}}},"code":"var _excluded = [\"method_id\", \"i18nLabel\"];\nvar _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 0);\nvar _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 1);\nvar isE2EEMessage, isQuoteAttachment;\nmodule.link(\"@rocket.chat/core-typings\", {\n  isE2EEMessage: function (v) {\n    isE2EEMessage = v;\n  },\n  isQuoteAttachment: function (v) {\n    isQuoteAttachment = v;\n  }\n}, 0);\nvar MessageBody;\nmodule.link(\"@rocket.chat/fuselage\", {\n  MessageBody: function (v) {\n    MessageBody = v;\n  }\n}, 1);\nvar useSetting, useUserId;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useSetting: function (v) {\n    useSetting = v;\n  },\n  useUserId: function (v) {\n    useUserId = v;\n  }\n}, 2);\nvar React, memo;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  memo: function (v) {\n    memo = v;\n  }\n}, 3);\nvar useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 4);\nvar useUserData;\nmodule.link(\"../../../../hooks/useUserData\", {\n  useUserData: function (v) {\n    useUserData = v;\n  }\n}, 5);\nvar MessageContentBody;\nmodule.link(\"../../MessageContentBody\", {\n  \"default\": function (v) {\n    MessageContentBody = v;\n  }\n}, 6);\nvar ReadReceiptIndicator;\nmodule.link(\"../../ReadReceiptIndicator\", {\n  \"default\": function (v) {\n    ReadReceiptIndicator = v;\n  }\n}, 7);\nvar Attachments;\nmodule.link(\"../../content/Attachments\", {\n  \"default\": function (v) {\n    Attachments = v;\n  }\n}, 8);\nvar BroadcastMetrics;\nmodule.link(\"../../content/BroadcastMetrics\", {\n  \"default\": function (v) {\n    BroadcastMetrics = v;\n  }\n}, 9);\nvar Location;\nmodule.link(\"../../content/Location\", {\n  \"default\": function (v) {\n    Location = v;\n  }\n}, 10);\nvar MessageActions;\nmodule.link(\"../../content/MessageActions\", {\n  \"default\": function (v) {\n    MessageActions = v;\n  }\n}, 11);\nvar Reactions;\nmodule.link(\"../../content/Reactions\", {\n  \"default\": function (v) {\n    Reactions = v;\n  }\n}, 12);\nvar UrlPreviews;\nmodule.link(\"../../content/UrlPreviews\", {\n  \"default\": function (v) {\n    UrlPreviews = v;\n  }\n}, 13);\nvar useNormalizedMessage;\nmodule.link(\"../../hooks/useNormalizedMessage\", {\n  useNormalizedMessage: function (v) {\n    useNormalizedMessage = v;\n  }\n}, 14);\nvar useOembedLayout;\nmodule.link(\"../../hooks/useOembedLayout\", {\n  useOembedLayout: function (v) {\n    useOembedLayout = v;\n  }\n}, 15);\nvar useSubscriptionFromMessageQuery;\nmodule.link(\"../../hooks/useSubscriptionFromMessageQuery\", {\n  useSubscriptionFromMessageQuery: function (v) {\n    useSubscriptionFromMessageQuery = v;\n  }\n}, 16);\nvar UiKitMessageBlock;\nmodule.link(\"../../uikit/UiKitMessageBlock\", {\n  \"default\": function (v) {\n    UiKitMessageBlock = v;\n  }\n}, 17);\nvar ThreadMessageContent = function (_ref) {\n  var _useSubscriptionFromM, _subscription$broadca, _normalizedMessage$at, _normalizedMessage$at2, _normalizedMessage$bl, _normalizedMessage$md, _message$files, _message$files$, _normalizedMessage$ur, _normalizedMessage$ac;\n  var message = _ref.message;\n  var encrypted = isE2EEMessage(message);\n  var _useOembedLayout = useOembedLayout(),\n    oembedEnabled = _useOembedLayout.enabled;\n  var subscription = (_useSubscriptionFromM = useSubscriptionFromMessageQuery(message).data) !== null && _useSubscriptionFromM !== void 0 ? _useSubscriptionFromM : undefined;\n  var broadcast = (_subscription$broadca = subscription === null || subscription === void 0 ? void 0 : subscription.broadcast) !== null && _subscription$broadca !== void 0 ? _subscription$broadca : false;\n  var uid = useUserId();\n  var messageUser = _objectSpread(_objectSpread({}, message.u), {}, {\n    roles: []\n  }, useUserData(message.u._id));\n  var readReceiptEnabled = useSetting('Message_Read_Receipt_Enabled', false);\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var normalizedMessage = useNormalizedMessage(message);\n  var isMessageEncrypted = encrypted && (normalizedMessage === null || normalizedMessage === void 0 ? void 0 : normalizedMessage.e2e) === 'pending';\n  var quotes = (normalizedMessage === null || normalizedMessage === void 0 ? void 0 : (_normalizedMessage$at = normalizedMessage.attachments) === null || _normalizedMessage$at === void 0 ? void 0 : _normalizedMessage$at.filter(isQuoteAttachment)) || [];\n  var attachments = (normalizedMessage === null || normalizedMessage === void 0 ? void 0 : (_normalizedMessage$at2 = normalizedMessage.attachments) === null || _normalizedMessage$at2 === void 0 ? void 0 : _normalizedMessage$at2.filter(function (attachment) {\n    return !isQuoteAttachment(attachment);\n  })) || [];\n  return /*#__PURE__*/React.createElement(React.Fragment, null, isMessageEncrypted && /*#__PURE__*/React.createElement(MessageBody, null, t('E2E_message_encrypted_placeholder')), !!(quotes !== null && quotes !== void 0 && quotes.length) && /*#__PURE__*/React.createElement(Attachments, {\n    attachments: quotes\n  }), !((_normalizedMessage$bl = normalizedMessage.blocks) !== null && _normalizedMessage$bl !== void 0 && _normalizedMessage$bl.length) && !!((_normalizedMessage$md = normalizedMessage.md) !== null && _normalizedMessage$md !== void 0 && _normalizedMessage$md.length) && /*#__PURE__*/React.createElement(React.Fragment, null, (!encrypted || normalizedMessage.e2e === 'done') && /*#__PURE__*/React.createElement(MessageContentBody, {\n    md: normalizedMessage.md,\n    mentions: normalizedMessage.mentions,\n    channels: normalizedMessage.channels\n  })), normalizedMessage.blocks && /*#__PURE__*/React.createElement(UiKitMessageBlock, {\n    rid: normalizedMessage.rid,\n    mid: normalizedMessage._id,\n    blocks: normalizedMessage.blocks\n  }), !!attachments && /*#__PURE__*/React.createElement(Attachments, {\n    id: (_message$files = message.files) === null || _message$files === void 0 ? void 0 : (_message$files$ = _message$files[0]) === null || _message$files$ === void 0 ? void 0 : _message$files$._id,\n    attachments: attachments\n  }), oembedEnabled && !!((_normalizedMessage$ur = normalizedMessage.urls) !== null && _normalizedMessage$ur !== void 0 && _normalizedMessage$ur.length) && /*#__PURE__*/React.createElement(UrlPreviews, {\n    urls: normalizedMessage.urls\n  }), ((_normalizedMessage$ac = normalizedMessage.actionLinks) === null || _normalizedMessage$ac === void 0 ? void 0 : _normalizedMessage$ac.length) && /*#__PURE__*/React.createElement(MessageActions, {\n    message: normalizedMessage,\n    actions: normalizedMessage.actionLinks.map(function (_ref2) {\n      var methodId = _ref2.method_id,\n        i18nLabel = _ref2.i18nLabel,\n        action = _objectWithoutProperties(_ref2, _excluded);\n      return _objectSpread({\n        methodId: methodId,\n        i18nLabel: i18nLabel\n      }, action);\n    })\n  }), normalizedMessage.reactions && Object.keys(normalizedMessage.reactions).length && /*#__PURE__*/React.createElement(Reactions, {\n    message: normalizedMessage\n  }), normalizedMessage.location && /*#__PURE__*/React.createElement(Location, {\n    location: normalizedMessage.location\n  }), broadcast && !!messageUser.username && normalizedMessage.u._id !== uid && /*#__PURE__*/React.createElement(BroadcastMetrics, {\n    username: messageUser.username,\n    message: normalizedMessage\n  }), readReceiptEnabled && /*#__PURE__*/React.createElement(ReadReceiptIndicator, {\n    mid: normalizedMessage._id,\n    unread: normalizedMessage.unread\n  }));\n};\nmodule.exportDefault( /*#__PURE__*/memo(ThreadMessageContent));","map":{"version":3,"names":["_objectWithoutProperties","module","link","default","v","_objectSpread","isE2EEMessage","isQuoteAttachment","MessageBody","useSetting","useUserId","React","memo","useTranslation","useUserData","MessageContentBody","ReadReceiptIndicator","Attachments","BroadcastMetrics","Location","MessageActions","Reactions","UrlPreviews","useNormalizedMessage","useOembedLayout","useSubscriptionFromMessageQuery","UiKitMessageBlock","ThreadMessageContent","_ref","_useSubscriptionFromM","_subscription$broadca","_normalizedMessage$at","_normalizedMessage$at2","_normalizedMessage$bl","_normalizedMessage$md","_message$files","_message$files$","_normalizedMessage$ur","_normalizedMessage$ac","message","encrypted","_useOembedLayout","oembedEnabled","enabled","subscription","data","undefined","broadcast","uid","messageUser","u","roles","_id","readReceiptEnabled","_useTranslation","t","normalizedMessage","isMessageEncrypted","e2e","quotes","attachments","filter","attachment","createElement","Fragment","length","blocks","md","mentions","channels","rid","mid","id","files","urls","actionLinks","actions","map","_ref2","methodId","method_id","i18nLabel","action","_excluded","reactions","Object","keys","location","username","unread","exportDefault"],"sources":["client/components/message/variants/thread/ThreadMessageContent.tsx"],"sourcesContent":["import type { IThreadMainMessage, IThreadMessage } from '@rocket.chat/core-typings';\nimport { isE2EEMessage, isQuoteAttachment } from '@rocket.chat/core-typings';\nimport { MessageBody } from '@rocket.chat/fuselage';\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\nimport { useSetting, useUserId } from '@rocket.chat/ui-contexts';\nimport type { ReactElement } from 'react';\nimport React, { memo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useUserData } from '../../../../hooks/useUserData';\nimport type { UserPresence } from '../../../../lib/presence';\nimport MessageContentBody from '../../MessageContentBody';\nimport ReadReceiptIndicator from '../../ReadReceiptIndicator';\nimport Attachments from '../../content/Attachments';\nimport BroadcastMetrics from '../../content/BroadcastMetrics';\nimport Location from '../../content/Location';\nimport MessageActions from '../../content/MessageActions';\nimport Reactions from '../../content/Reactions';\nimport UrlPreviews from '../../content/UrlPreviews';\nimport { useNormalizedMessage } from '../../hooks/useNormalizedMessage';\nimport { useOembedLayout } from '../../hooks/useOembedLayout';\nimport { useSubscriptionFromMessageQuery } from '../../hooks/useSubscriptionFromMessageQuery';\nimport UiKitMessageBlock from '../../uikit/UiKitMessageBlock';\n\ntype ThreadMessageContentProps = {\n\tmessage: IThreadMessage | IThreadMainMessage;\n};\n\nconst ThreadMessageContent = ({ message }: ThreadMessageContentProps): ReactElement => {\n\tconst encrypted = isE2EEMessage(message);\n\tconst { enabled: oembedEnabled } = useOembedLayout();\n\tconst subscription = useSubscriptionFromMessageQuery(message).data ?? undefined;\n\tconst broadcast = subscription?.broadcast ?? false;\n\tconst uid = useUserId();\n\tconst messageUser: UserPresence = { ...message.u, roles: [], ...useUserData(message.u._id) };\n\tconst readReceiptEnabled = useSetting('Message_Read_Receipt_Enabled', false);\n\n\tconst { t } = useTranslation();\n\n\tconst normalizedMessage = useNormalizedMessage(message);\n\n\tconst isMessageEncrypted = encrypted && normalizedMessage?.e2e === 'pending';\n\n\tconst quotes = normalizedMessage?.attachments?.filter(isQuoteAttachment) || [];\n\n\tconst attachments = normalizedMessage?.attachments?.filter((attachment) => !isQuoteAttachment(attachment)) || [];\n\n\treturn (\n\t\t<>\n\t\t\t{isMessageEncrypted && <MessageBody>{t('E2E_message_encrypted_placeholder')}</MessageBody>}\n\n\t\t\t{!!quotes?.length && <Attachments attachments={quotes} />}\n\n\t\t\t{!normalizedMessage.blocks?.length && !!normalizedMessage.md?.length && (\n\t\t\t\t<>\n\t\t\t\t\t{(!encrypted || normalizedMessage.e2e === 'done') && (\n\t\t\t\t\t\t<MessageContentBody md={normalizedMessage.md} mentions={normalizedMessage.mentions} channels={normalizedMessage.channels} />\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t{normalizedMessage.blocks && (\n\t\t\t\t<UiKitMessageBlock rid={normalizedMessage.rid} mid={normalizedMessage._id} blocks={normalizedMessage.blocks} />\n\t\t\t)}\n\n\t\t\t{!!attachments && <Attachments id={message.files?.[0]?._id} attachments={attachments} />}\n\n\t\t\t{oembedEnabled && !!normalizedMessage.urls?.length && <UrlPreviews urls={normalizedMessage.urls} />}\n\n\t\t\t{normalizedMessage.actionLinks?.length && (\n\t\t\t\t<MessageActions\n\t\t\t\t\tmessage={normalizedMessage}\n\t\t\t\t\tactions={normalizedMessage.actionLinks.map(({ method_id: methodId, i18nLabel, ...action }) => ({\n\t\t\t\t\t\tmethodId,\n\t\t\t\t\t\ti18nLabel: i18nLabel as TranslationKey,\n\t\t\t\t\t\t...action,\n\t\t\t\t\t}))}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{normalizedMessage.reactions && Object.keys(normalizedMessage.reactions).length && <Reactions message={normalizedMessage} />}\n\n\t\t\t{normalizedMessage.location && <Location location={normalizedMessage.location} />}\n\n\t\t\t{broadcast && !!messageUser.username && normalizedMessage.u._id !== uid && (\n\t\t\t\t<BroadcastMetrics username={messageUser.username} message={normalizedMessage} />\n\t\t\t)}\n\n\t\t\t{readReceiptEnabled && <ReadReceiptIndicator mid={normalizedMessage._id} unread={normalizedMessage.unread} />}\n\t\t</>\n\t);\n};\n\nexport default memo(ThreadMessageContent);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"9b67e8a43d7fa5e54ba1e1cd4d956c9de5330483"}
