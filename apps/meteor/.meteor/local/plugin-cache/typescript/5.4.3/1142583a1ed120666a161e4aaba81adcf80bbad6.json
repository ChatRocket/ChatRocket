{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/Omnichannel/modals/TranscriptModal.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/components/Omnichannel/modals/TranscriptModal.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/Omnichannel/modals/TranscriptModal.tsx","inputSourceMap":{"version":3,"file":"client/components/Omnichannel/modals/TranscriptModal.tsx","sourceRoot":"","sources":["client/components/Omnichannel/modals/TranscriptModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IOmnichannelRoom } from '@rocket.chat/core-typings';\nimport { Field, Button, TextInput, Modal, Box, FieldGroup, FieldLabel, FieldRow, FieldError } from '@rocket.chat/fuselage';\nimport React, { useCallback, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\n\ntype TranscriptModalProps = {\n\temail: string;\n\troom: IOmnichannelRoom;\n\tonRequest: (email: string, subject: string) => void;\n\tonSend?: (email: string, subject: string, token: string) => void;\n\tonCancel: () => void;\n\tonDiscard: () => void;\n};\n\nconst TranscriptModal = ({ email: emailDefault = '', room, onRequest, onSend, onCancel, onDiscard, ...props }: TranscriptModalProps) => {\n\tconst { t } = useTranslation();\n\n\tconst {\n\t\tregister,\n\t\thandleSubmit,\n\t\tsetValue,\n\t\tsetFocus,\n\t\tformState: { errors, isSubmitting },\n\t} = useForm({\n\t\tdefaultValues: { email: emailDefault || '', subject: t('Transcript_of_your_livechat_conversation') },\n\t});\n\n\tuseEffect(() => {\n\t\tsetFocus('subject');\n\t}, [setFocus]);\n\n\tconst { transcriptRequest } = room;\n\tconst roomOpen = room?.open;\n\tconst token = room?.v?.token;\n\n\tconst handleDiscard = useCallback(() => onDiscard(), [onDiscard]);\n\n\tconst submit = useCallback(\n\t\t({ email, subject }: { email: string; subject: string }) => {\n\t\t\tif (roomOpen && !transcriptRequest) {\n\t\t\t\tonRequest(email, subject);\n\t\t\t}\n\t\t\tif (!roomOpen && onSend && token) {\n\t\t\t\tonSend(email, subject, token);\n\t\t\t}\n\t\t},\n\t\t[onRequest, onSend, roomOpen, token, transcriptRequest],\n\t);\n\n\tuseEffect(() => {\n\t\tif (transcriptRequest) {\n\t\t\tsetValue('email', transcriptRequest.email);\n\t\t\tsetValue('subject', transcriptRequest.subject);\n\t\t}\n\t}, [setValue, transcriptRequest]);\n\n\t// const canSubmit = isValid && Boolean(watch('subject'));\n\n\treturn (\n\t\t<Modal open wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(submit)} {...props} />} {...props}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Icon name='mail-arrow-top-right' />\n\t\t\t\t<Modal.Title>{t('Transcript')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onCancel} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t{!!transcriptRequest && <p>{t('Livechat_transcript_already_requested_warning')}</p>}\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Email')}*</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tdisabled={!!emailDefault || !!transcriptRequest}\n\t\t\t\t\t\t\t\terror={errors.email?.message}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t{...register('email', { required: t('Required_field', { field: t('Email') }) })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t<FieldError>{errors.email?.message}</FieldError>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Subject')}*</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tdisabled={!!transcriptRequest}\n\t\t\t\t\t\t\t\terror={errors.subject?.message}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t{...register('subject', { required: t('Required_field', { field: t('Subject') }) })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t<FieldError>{errors.subject?.message}</FieldError>\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t{roomOpen && transcriptRequest && (\n\t\t\t\t\t\t<Button danger onClick={handleDiscard}>\n\t\t\t\t\t\t\t{t('Undo_request')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t{roomOpen && !transcriptRequest && (\n\t\t\t\t\t\t<Button aria-label='request-button' disabled={isSubmitting} loading={isSubmitting} primary type='submit'>\n\t\t\t\t\t\t\t{t('Request')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t{!roomOpen && (\n\t\t\t\t\t\t<Button aria-label='send-button' disabled={isSubmitting} loading={isSubmitting} primary type='submit'>\n\t\t\t\t\t\t\t{t('Send')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default TranscriptModal;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/Omnichannel/modals/TranscriptModal.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/components/Omnichannel/modals/TranscriptModal.tsx","inputSourceMap":{"version":3,"file":"client/components/Omnichannel/modals/TranscriptModal.tsx","sourceRoot":"","sources":["client/components/Omnichannel/modals/TranscriptModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IOmnichannelRoom } from '@rocket.chat/core-typings';\nimport { Field, Button, TextInput, Modal, Box, FieldGroup, FieldLabel, FieldRow, FieldError } from '@rocket.chat/fuselage';\nimport React, { useCallback, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\n\ntype TranscriptModalProps = {\n\temail: string;\n\troom: IOmnichannelRoom;\n\tonRequest: (email: string, subject: string) => void;\n\tonSend?: (email: string, subject: string, token: string) => void;\n\tonCancel: () => void;\n\tonDiscard: () => void;\n};\n\nconst TranscriptModal = ({ email: emailDefault = '', room, onRequest, onSend, onCancel, onDiscard, ...props }: TranscriptModalProps) => {\n\tconst { t } = useTranslation();\n\n\tconst {\n\t\tregister,\n\t\thandleSubmit,\n\t\tsetValue,\n\t\tsetFocus,\n\t\tformState: { errors, isSubmitting },\n\t} = useForm({\n\t\tdefaultValues: { email: emailDefault || '', subject: t('Transcript_of_your_livechat_conversation') },\n\t});\n\n\tuseEffect(() => {\n\t\tsetFocus('subject');\n\t}, [setFocus]);\n\n\tconst { transcriptRequest } = room;\n\tconst roomOpen = room?.open;\n\tconst token = room?.v?.token;\n\n\tconst handleDiscard = useCallback(() => onDiscard(), [onDiscard]);\n\n\tconst submit = useCallback(\n\t\t({ email, subject }: { email: string; subject: string }) => {\n\t\t\tif (roomOpen && !transcriptRequest) {\n\t\t\t\tonRequest(email, subject);\n\t\t\t}\n\t\t\tif (!roomOpen && onSend && token) {\n\t\t\t\tonSend(email, subject, token);\n\t\t\t}\n\t\t},\n\t\t[onRequest, onSend, roomOpen, token, transcriptRequest],\n\t);\n\n\tuseEffect(() => {\n\t\tif (transcriptRequest) {\n\t\t\tsetValue('email', transcriptRequest.email);\n\t\t\tsetValue('subject', transcriptRequest.subject);\n\t\t}\n\t}, [setValue, transcriptRequest]);\n\n\t// const canSubmit = isValid && Boolean(watch('subject'));\n\n\treturn (\n\t\t<Modal open wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(submit)} {...props} />} {...props}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Icon name='mail-arrow-top-right' />\n\t\t\t\t<Modal.Title>{t('Transcript')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onCancel} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t{!!transcriptRequest && <p>{t('Livechat_transcript_already_requested_warning')}</p>}\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Email')}*</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tdisabled={!!emailDefault || !!transcriptRequest}\n\t\t\t\t\t\t\t\terror={errors.email?.message}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t{...register('email', { required: t('Required_field', { field: t('Email') }) })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t<FieldError>{errors.email?.message}</FieldError>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Subject')}*</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tdisabled={!!transcriptRequest}\n\t\t\t\t\t\t\t\terror={errors.subject?.message}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t{...register('subject', { required: t('Required_field', { field: t('Subject') }) })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t<FieldError>{errors.subject?.message}</FieldError>\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t{roomOpen && transcriptRequest && (\n\t\t\t\t\t\t<Button danger onClick={handleDiscard}>\n\t\t\t\t\t\t\t{t('Undo_request')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t{roomOpen && !transcriptRequest && (\n\t\t\t\t\t\t<Button aria-label='request-button' disabled={isSubmitting} loading={isSubmitting} primary type='submit'>\n\t\t\t\t\t\t\t{t('Request')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t{!roomOpen && (\n\t\t\t\t\t\t<Button aria-label='send-button' disabled={isSubmitting} loading={isSubmitting} primary type='submit'>\n\t\t\t\t\t\t\t{t('Send')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default TranscriptModal;\n"]}}},"code":"const _excluded = [\"email\", \"room\", \"onRequest\", \"onSend\", \"onCancel\", \"onDiscard\"];\nlet _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n}, 1);\nlet Field, Button, TextInput, Modal, Box, FieldGroup, FieldLabel, FieldRow, FieldError;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Field(v) {\n    Field = v;\n  },\n  Button(v) {\n    Button = v;\n  },\n  TextInput(v) {\n    TextInput = v;\n  },\n  Modal(v) {\n    Modal = v;\n  },\n  Box(v) {\n    Box = v;\n  },\n  FieldGroup(v) {\n    FieldGroup = v;\n  },\n  FieldLabel(v) {\n    FieldLabel = v;\n  },\n  FieldRow(v) {\n    FieldRow = v;\n  },\n  FieldError(v) {\n    FieldError = v;\n  }\n}, 0);\nlet React, useCallback, useEffect;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  }\n}, 1);\nlet useForm;\nmodule.link(\"react-hook-form\", {\n  useForm(v) {\n    useForm = v;\n  }\n}, 2);\nlet useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 3);\nconst TranscriptModal = _ref => {\n  var _room$v, _errors$email, _errors$email2, _errors$subject, _errors$subject2;\n  let {\n      email: emailDefault = '',\n      room,\n      onRequest,\n      onSend,\n      onCancel,\n      onDiscard\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  const {\n    t\n  } = useTranslation();\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    setFocus,\n    formState: {\n      errors,\n      isSubmitting\n    }\n  } = useForm({\n    defaultValues: {\n      email: emailDefault || '',\n      subject: t('Transcript_of_your_livechat_conversation')\n    }\n  });\n  useEffect(() => {\n    setFocus('subject');\n  }, [setFocus]);\n  const {\n    transcriptRequest\n  } = room;\n  const roomOpen = room === null || room === void 0 ? void 0 : room.open;\n  const token = room === null || room === void 0 ? void 0 : (_room$v = room.v) === null || _room$v === void 0 ? void 0 : _room$v.token;\n  const handleDiscard = useCallback(() => onDiscard(), [onDiscard]);\n  const submit = useCallback(_ref2 => {\n    let {\n      email,\n      subject\n    } = _ref2;\n    if (roomOpen && !transcriptRequest) {\n      onRequest(email, subject);\n    }\n    if (!roomOpen && onSend && token) {\n      onSend(email, subject, token);\n    }\n  }, [onRequest, onSend, roomOpen, token, transcriptRequest]);\n  useEffect(() => {\n    if (transcriptRequest) {\n      setValue('email', transcriptRequest.email);\n      setValue('subject', transcriptRequest.subject);\n    }\n  }, [setValue, transcriptRequest]);\n  // const canSubmit = isValid && Boolean(watch('subject'));\n  return /*#__PURE__*/React.createElement(Modal, _extends({\n    open: true,\n    wrapperFunction: props => /*#__PURE__*/React.createElement(Box, _extends({\n      is: \"form\",\n      onSubmit: handleSubmit(submit)\n    }, props))\n  }, props), /*#__PURE__*/React.createElement(Modal.Header, null, /*#__PURE__*/React.createElement(Modal.Icon, {\n    name: \"mail-arrow-top-right\"\n  }), /*#__PURE__*/React.createElement(Modal.Title, null, t('Transcript')), /*#__PURE__*/React.createElement(Modal.Close, {\n    onClick: onCancel\n  })), /*#__PURE__*/React.createElement(Modal.Content, {\n    fontScale: \"p2\"\n  }, !!transcriptRequest && /*#__PURE__*/React.createElement(\"p\", null, t('Livechat_transcript_already_requested_warning')), /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, null, t('Email'), \"*\"), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(TextInput, _extends({\n    disabled: !!emailDefault || !!transcriptRequest,\n    error: (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message,\n    flexGrow: 1\n  }, register('email', {\n    required: t('Required_field', {\n      field: t('Email')\n    })\n  })))), /*#__PURE__*/React.createElement(FieldError, null, (_errors$email2 = errors.email) === null || _errors$email2 === void 0 ? void 0 : _errors$email2.message)), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, null, t('Subject'), \"*\"), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(TextInput, _extends({\n    disabled: !!transcriptRequest,\n    error: (_errors$subject = errors.subject) === null || _errors$subject === void 0 ? void 0 : _errors$subject.message,\n    flexGrow: 1\n  }, register('subject', {\n    required: t('Required_field', {\n      field: t('Subject')\n    })\n  })))), /*#__PURE__*/React.createElement(FieldError, null, (_errors$subject2 = errors.subject) === null || _errors$subject2 === void 0 ? void 0 : _errors$subject2.message)))), /*#__PURE__*/React.createElement(Modal.Footer, null, /*#__PURE__*/React.createElement(Modal.FooterControllers, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onCancel\n  }, t('Cancel')), roomOpen && transcriptRequest && /*#__PURE__*/React.createElement(Button, {\n    danger: true,\n    onClick: handleDiscard\n  }, t('Undo_request')), roomOpen && !transcriptRequest && /*#__PURE__*/React.createElement(Button, {\n    \"aria-label\": \"request-button\",\n    disabled: isSubmitting,\n    loading: isSubmitting,\n    primary: true,\n    type: \"submit\"\n  }, t('Request')), !roomOpen && /*#__PURE__*/React.createElement(Button, {\n    \"aria-label\": \"send-button\",\n    disabled: isSubmitting,\n    loading: isSubmitting,\n    primary: true,\n    type: \"submit\"\n  }, t('Send')))));\n};\nmodule.exportDefault(TranscriptModal);","map":{"version":3,"names":["_extends","module","link","default","v","_objectWithoutProperties","Field","Button","TextInput","Modal","Box","FieldGroup","FieldLabel","FieldRow","FieldError","React","useCallback","useEffect","useForm","useTranslation","TranscriptModal","_ref","_room$v","_errors$email","_errors$email2","_errors$subject","_errors$subject2","email","emailDefault","room","onRequest","onSend","onCancel","onDiscard","props","_excluded","t","register","handleSubmit","setValue","setFocus","formState","errors","isSubmitting","defaultValues","subject","transcriptRequest","roomOpen","open","token","handleDiscard","submit","_ref2","createElement","wrapperFunction","is","onSubmit","Header","Icon","name","Title","Close","onClick","Content","fontScale","disabled","error","message","flexGrow","required","field","Footer","FooterControllers","danger","loading","primary","type","exportDefault"],"sources":["client/components/Omnichannel/modals/TranscriptModal.tsx"],"sourcesContent":["import type { IOmnichannelRoom } from '@rocket.chat/core-typings';\nimport { Field, Button, TextInput, Modal, Box, FieldGroup, FieldLabel, FieldRow, FieldError } from '@rocket.chat/fuselage';\nimport React, { useCallback, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\n\ntype TranscriptModalProps = {\n\temail: string;\n\troom: IOmnichannelRoom;\n\tonRequest: (email: string, subject: string) => void;\n\tonSend?: (email: string, subject: string, token: string) => void;\n\tonCancel: () => void;\n\tonDiscard: () => void;\n};\n\nconst TranscriptModal = ({ email: emailDefault = '', room, onRequest, onSend, onCancel, onDiscard, ...props }: TranscriptModalProps) => {\n\tconst { t } = useTranslation();\n\n\tconst {\n\t\tregister,\n\t\thandleSubmit,\n\t\tsetValue,\n\t\tsetFocus,\n\t\tformState: { errors, isSubmitting },\n\t} = useForm({\n\t\tdefaultValues: { email: emailDefault || '', subject: t('Transcript_of_your_livechat_conversation') },\n\t});\n\n\tuseEffect(() => {\n\t\tsetFocus('subject');\n\t}, [setFocus]);\n\n\tconst { transcriptRequest } = room;\n\tconst roomOpen = room?.open;\n\tconst token = room?.v?.token;\n\n\tconst handleDiscard = useCallback(() => onDiscard(), [onDiscard]);\n\n\tconst submit = useCallback(\n\t\t({ email, subject }: { email: string; subject: string }) => {\n\t\t\tif (roomOpen && !transcriptRequest) {\n\t\t\t\tonRequest(email, subject);\n\t\t\t}\n\t\t\tif (!roomOpen && onSend && token) {\n\t\t\t\tonSend(email, subject, token);\n\t\t\t}\n\t\t},\n\t\t[onRequest, onSend, roomOpen, token, transcriptRequest],\n\t);\n\n\tuseEffect(() => {\n\t\tif (transcriptRequest) {\n\t\t\tsetValue('email', transcriptRequest.email);\n\t\t\tsetValue('subject', transcriptRequest.subject);\n\t\t}\n\t}, [setValue, transcriptRequest]);\n\n\t// const canSubmit = isValid && Boolean(watch('subject'));\n\n\treturn (\n\t\t<Modal open wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(submit)} {...props} />} {...props}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Icon name='mail-arrow-top-right' />\n\t\t\t\t<Modal.Title>{t('Transcript')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onCancel} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>\n\t\t\t\t{!!transcriptRequest && <p>{t('Livechat_transcript_already_requested_warning')}</p>}\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Email')}*</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tdisabled={!!emailDefault || !!transcriptRequest}\n\t\t\t\t\t\t\t\terror={errors.email?.message}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t{...register('email', { required: t('Required_field', { field: t('Email') }) })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t<FieldError>{errors.email?.message}</FieldError>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel>{t('Subject')}*</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tdisabled={!!transcriptRequest}\n\t\t\t\t\t\t\t\terror={errors.subject?.message}\n\t\t\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\t\t\t{...register('subject', { required: t('Required_field', { field: t('Subject') }) })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t<FieldError>{errors.subject?.message}</FieldError>\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Modal.FooterControllers>\n\t\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t\t{roomOpen && transcriptRequest && (\n\t\t\t\t\t\t<Button danger onClick={handleDiscard}>\n\t\t\t\t\t\t\t{t('Undo_request')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t{roomOpen && !transcriptRequest && (\n\t\t\t\t\t\t<Button aria-label='request-button' disabled={isSubmitting} loading={isSubmitting} primary type='submit'>\n\t\t\t\t\t\t\t{t('Request')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t{!roomOpen && (\n\t\t\t\t\t\t<Button aria-label='send-button' disabled={isSubmitting} loading={isSubmitting} primary type='submit'>\n\t\t\t\t\t\t\t{t('Send')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</Modal.FooterControllers>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default TranscriptModal;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"1142583a1ed120666a161e4aaba81adcf80bbad6"}
