{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/contacts/contextualBar/ContactInfo.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/omnichannel/directory/contacts/contextualBar/ContactInfo.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/contacts/contextualBar/ContactInfo.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/directory/contacts/contextualBar/ContactInfo.tsx","sourceRoot":"","sources":["client/views/omnichannel/directory/contacts/contextualBar/ContactInfo.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, Margins, ButtonGroup, Button, Divider } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport type { RouteName } from '@rocket.chat/ui-contexts';\nimport { useToastMessageDispatch, useRoute, useTranslation, useEndpoint, usePermission, useRouter } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport React, { useCallback } from 'react';\nimport { useSyncExternalStore } from 'use-sync-external-store/shim';\n\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../../../components/Contextualbar';\nimport { UserStatus } from '../../../../../components/UserStatus';\nimport { useIsCallReady } from '../../../../../contexts/CallContext';\nimport { useFormatDate } from '../../../../../hooks/useFormatDate';\nimport { parseOutboundPhoneNumber } from '../../../../../lib/voip/parseOutboundPhoneNumber';\nimport ContactManagerInfo from '../../../../../omnichannel/ContactManagerInfo';\nimport AgentInfoDetails from '../../../components/AgentInfoDetails';\nimport CustomField from '../../../components/CustomField';\nimport Field from '../../../components/Field';\nimport Info from '../../../components/Info';\nimport Label from '../../../components/Label';\nimport { VoipInfoCallButton } from '../../calls/contextualBar/VoipInfoCallButton';\nimport { FormSkeleton } from '../../components/FormSkeleton';\n\ntype ContactInfoProps = {\n\tid: string;\n\trid?: string;\n\troute?: RouteName;\n};\n\nconst ContactInfo = ({ id: contactId, rid: roomId = '', route }: ContactInfoProps) => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst router = useRouter();\n\tconst liveRoute = useRoute('live');\n\n\tconst currentRouteName = useSyncExternalStore(\n\t\trouter.subscribeToRouteChange,\n\t\tuseCallback(() => router.getRouteName(), [router]),\n\t);\n\n\tconst formatDate = useFormatDate();\n\tconst isCallReady = useIsCallReady();\n\n\tconst canViewCustomFields = usePermission('view-livechat-room-customfields');\n\tconst canEditContact = usePermission('edit-omnichannel-contact');\n\n\tconst getCustomFields = useEndpoint('GET', '/v1/livechat/custom-fields');\n\tconst { data: { customFields } = {} } = useQuery(['/v1/livechat/custom-fields'], () => getCustomFields());\n\n\tconst getContact = useEndpoint('GET', '/v1/omnichannel/contact');\n\tconst {\n\t\tdata: { contact } = {},\n\t\tisInitialLoading,\n\t\tisError,\n\t} = useQuery(['/v1/omnichannel/contact', contactId], () => getContact({ contactId }), {\n\t\tenabled: canViewCustomFields && !!contactId,\n\t});\n\n\tconst onEditButtonClick = useMutableCallback(() => {\n\t\tif (!canEditContact) {\n\t\t\treturn dispatchToastMessage({ type: 'error', message: t('Not_authorized') });\n\t\t}\n\n\t\tif (route) {\n\t\t\trouter.navigate({\n\t\t\t\tname: route,\n\t\t\t\tparams: {\n\t\t\t\t\ttab: 'contact-profile',\n\t\t\t\t\tcontext: 'edit',\n\t\t\t\t\tid: roomId,\n\t\t\t\t},\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\trouter.navigate({\n\t\t\tname: 'omnichannel-directory',\n\t\t\tparams: {\n\t\t\t\tpage: 'contacts',\n\t\t\t\tid: contactId,\n\t\t\t\tbar: 'edit',\n\t\t\t},\n\t\t});\n\t});\n\n\tif (isInitialLoading) {\n\t\treturn (\n\t\t\t<Box pi={24}>\n\t\t\t\t<FormSkeleton />\n\t\t\t</Box>\n\t\t);\n\t}\n\n\tif (isError || !contact) {\n\t\treturn <Box mbs={16}>{t('Contact_not_found')}</Box>;\n\t}\n\n\tconst { username, visitorEmails, phone, ts, livechatData, lastChat, contactManager, status } = contact;\n\n\tconst showContactHistory = currentRouteName === 'live' && lastChat;\n\n\tconst [{ phoneNumber = '' }] = phone ?? [{}];\n\tconst [{ address: email = '' }] = visitorEmails ?? [{}];\n\n\tconst checkIsVisibleAndScopeVisitor = (key: string) => {\n\t\tconst field = customFields?.find(({ _id }) => _id === key);\n\t\treturn field?.visibility === 'visible' && field?.scope === 'visitor';\n\t};\n\n\tconst onChatHistory = () => {\n\t\tconst { _id = '' } = lastChat ?? {};\n\t\tliveRoute.push({ id: _id, tab: 'contact-chat-history' });\n\t};\n\n\t// Serialized does not like unknown :(\n\tconst customFieldEntries = Object.entries((livechatData ?? {}) as unknown as Record<string, string>).filter(\n\t\t([key, value]) => checkIsVisibleAndScopeVisitor(key) && value,\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent p={24}>\n\t\t\t\t<Margins block={4}>\n\t\t\t\t\t{username && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{`${t('Name')} / ${t('Username')}`}</Label>\n\t\t\t\t\t\t\t<Info style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t<UserAvatar size='x40' title={username} username={username} />\n\t\t\t\t\t\t\t\t<AgentInfoDetails mis={10} name={username} shortName={username} status={<UserStatus status={status} />} />\n\t\t\t\t\t\t\t</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{email && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Email')}</Label>\n\t\t\t\t\t\t\t<Info data-qa-id='contactInfo-email'>{email}</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{phoneNumber && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Phone')}</Label>\n\t\t\t\t\t\t\t<Info>{parseOutboundPhoneNumber(phoneNumber)}</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{ts && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Created_at')}</Label>\n\t\t\t\t\t\t\t<Info>{formatDate(ts)}</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{lastChat && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Last_Chat')}</Label>\n\t\t\t\t\t\t\t<Info>{formatDate(lastChat.ts)}</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{canViewCustomFields &&\n\t\t\t\t\t\tcustomFieldEntries.map(([key, value]) => {\n\t\t\t\t\t\t\treturn <CustomField key={key} id={key} value={value} />;\n\t\t\t\t\t\t})}\n\n\t\t\t\t\t{contactManager && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Contact_Manager')}</Label>\n\t\t\t\t\t\t\t<ContactManagerInfo username={contactManager.username} />\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t</Margins>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t{isCallReady && (\n\t\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<VoipInfoCallButton phoneNumber={phoneNumber} />\n\t\t\t\t\t\t\t{showContactHistory && <Divider width='100%' />}\n\t\t\t\t\t\t</>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t)}\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t{showContactHistory && (\n\t\t\t\t\t\t<Button icon='history' onClick={onChatHistory}>\n\t\t\t\t\t\t\t{t('Chat_History')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button icon='pencil' onClick={onEditButtonClick}>\n\t\t\t\t\t\t{t('Edit')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default ContactInfo;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/contacts/contextualBar/ContactInfo.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/omnichannel/directory/contacts/contextualBar/ContactInfo.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/directory/contacts/contextualBar/ContactInfo.tsx","sourceRoot":"","sources":["client/views/omnichannel/directory/contacts/contextualBar/ContactInfo.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, Margins, ButtonGroup, Button, Divider } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport type { RouteName } from '@rocket.chat/ui-contexts';\nimport { useToastMessageDispatch, useRoute, useTranslation, useEndpoint, usePermission, useRouter } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport React, { useCallback } from 'react';\nimport { useSyncExternalStore } from 'use-sync-external-store/shim';\n\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../../../components/Contextualbar';\nimport { UserStatus } from '../../../../../components/UserStatus';\nimport { useIsCallReady } from '../../../../../contexts/CallContext';\nimport { useFormatDate } from '../../../../../hooks/useFormatDate';\nimport { parseOutboundPhoneNumber } from '../../../../../lib/voip/parseOutboundPhoneNumber';\nimport ContactManagerInfo from '../../../../../omnichannel/ContactManagerInfo';\nimport AgentInfoDetails from '../../../components/AgentInfoDetails';\nimport CustomField from '../../../components/CustomField';\nimport Field from '../../../components/Field';\nimport Info from '../../../components/Info';\nimport Label from '../../../components/Label';\nimport { VoipInfoCallButton } from '../../calls/contextualBar/VoipInfoCallButton';\nimport { FormSkeleton } from '../../components/FormSkeleton';\n\ntype ContactInfoProps = {\n\tid: string;\n\trid?: string;\n\troute?: RouteName;\n};\n\nconst ContactInfo = ({ id: contactId, rid: roomId = '', route }: ContactInfoProps) => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst router = useRouter();\n\tconst liveRoute = useRoute('live');\n\n\tconst currentRouteName = useSyncExternalStore(\n\t\trouter.subscribeToRouteChange,\n\t\tuseCallback(() => router.getRouteName(), [router]),\n\t);\n\n\tconst formatDate = useFormatDate();\n\tconst isCallReady = useIsCallReady();\n\n\tconst canViewCustomFields = usePermission('view-livechat-room-customfields');\n\tconst canEditContact = usePermission('edit-omnichannel-contact');\n\n\tconst getCustomFields = useEndpoint('GET', '/v1/livechat/custom-fields');\n\tconst { data: { customFields } = {} } = useQuery(['/v1/livechat/custom-fields'], () => getCustomFields());\n\n\tconst getContact = useEndpoint('GET', '/v1/omnichannel/contact');\n\tconst {\n\t\tdata: { contact } = {},\n\t\tisInitialLoading,\n\t\tisError,\n\t} = useQuery(['/v1/omnichannel/contact', contactId], () => getContact({ contactId }), {\n\t\tenabled: canViewCustomFields && !!contactId,\n\t});\n\n\tconst onEditButtonClick = useMutableCallback(() => {\n\t\tif (!canEditContact) {\n\t\t\treturn dispatchToastMessage({ type: 'error', message: t('Not_authorized') });\n\t\t}\n\n\t\tif (route) {\n\t\t\trouter.navigate({\n\t\t\t\tname: route,\n\t\t\t\tparams: {\n\t\t\t\t\ttab: 'contact-profile',\n\t\t\t\t\tcontext: 'edit',\n\t\t\t\t\tid: roomId,\n\t\t\t\t},\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\trouter.navigate({\n\t\t\tname: 'omnichannel-directory',\n\t\t\tparams: {\n\t\t\t\tpage: 'contacts',\n\t\t\t\tid: contactId,\n\t\t\t\tbar: 'edit',\n\t\t\t},\n\t\t});\n\t});\n\n\tif (isInitialLoading) {\n\t\treturn (\n\t\t\t<Box pi={24}>\n\t\t\t\t<FormSkeleton />\n\t\t\t</Box>\n\t\t);\n\t}\n\n\tif (isError || !contact) {\n\t\treturn <Box mbs={16}>{t('Contact_not_found')}</Box>;\n\t}\n\n\tconst { username, visitorEmails, phone, ts, livechatData, lastChat, contactManager, status } = contact;\n\n\tconst showContactHistory = currentRouteName === 'live' && lastChat;\n\n\tconst [{ phoneNumber = '' }] = phone ?? [{}];\n\tconst [{ address: email = '' }] = visitorEmails ?? [{}];\n\n\tconst checkIsVisibleAndScopeVisitor = (key: string) => {\n\t\tconst field = customFields?.find(({ _id }) => _id === key);\n\t\treturn field?.visibility === 'visible' && field?.scope === 'visitor';\n\t};\n\n\tconst onChatHistory = () => {\n\t\tconst { _id = '' } = lastChat ?? {};\n\t\tliveRoute.push({ id: _id, tab: 'contact-chat-history' });\n\t};\n\n\t// Serialized does not like unknown :(\n\tconst customFieldEntries = Object.entries((livechatData ?? {}) as unknown as Record<string, string>).filter(\n\t\t([key, value]) => checkIsVisibleAndScopeVisitor(key) && value,\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent p={24}>\n\t\t\t\t<Margins block={4}>\n\t\t\t\t\t{username && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{`${t('Name')} / ${t('Username')}`}</Label>\n\t\t\t\t\t\t\t<Info style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t<UserAvatar size='x40' title={username} username={username} />\n\t\t\t\t\t\t\t\t<AgentInfoDetails mis={10} name={username} shortName={username} status={<UserStatus status={status} />} />\n\t\t\t\t\t\t\t</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{email && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Email')}</Label>\n\t\t\t\t\t\t\t<Info data-qa-id='contactInfo-email'>{email}</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{phoneNumber && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Phone')}</Label>\n\t\t\t\t\t\t\t<Info>{parseOutboundPhoneNumber(phoneNumber)}</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{ts && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Created_at')}</Label>\n\t\t\t\t\t\t\t<Info>{formatDate(ts)}</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{lastChat && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Last_Chat')}</Label>\n\t\t\t\t\t\t\t<Info>{formatDate(lastChat.ts)}</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{canViewCustomFields &&\n\t\t\t\t\t\tcustomFieldEntries.map(([key, value]) => {\n\t\t\t\t\t\t\treturn <CustomField key={key} id={key} value={value} />;\n\t\t\t\t\t\t})}\n\n\t\t\t\t\t{contactManager && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Contact_Manager')}</Label>\n\t\t\t\t\t\t\t<ContactManagerInfo username={contactManager.username} />\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t</Margins>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t{isCallReady && (\n\t\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<VoipInfoCallButton phoneNumber={phoneNumber} />\n\t\t\t\t\t\t\t{showContactHistory && <Divider width='100%' />}\n\t\t\t\t\t\t</>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t)}\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t{showContactHistory && (\n\t\t\t\t\t\t<Button icon='history' onClick={onChatHistory}>\n\t\t\t\t\t\t\t{t('Chat_History')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button icon='pencil' onClick={onEditButtonClick}>\n\t\t\t\t\t\t{t('Edit')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default ContactInfo;\n"]}}},"code":"var _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 0);\nvar Box, Margins, ButtonGroup, Button, Divider;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box: function (v) {\n    Box = v;\n  },\n  Margins: function (v) {\n    Margins = v;\n  },\n  ButtonGroup: function (v) {\n    ButtonGroup = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  Divider: function (v) {\n    Divider = v;\n  }\n}, 0);\nvar useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 1);\nvar UserAvatar;\nmodule.link(\"@rocket.chat/ui-avatar\", {\n  UserAvatar: function (v) {\n    UserAvatar = v;\n  }\n}, 2);\nvar useToastMessageDispatch, useRoute, useTranslation, useEndpoint, usePermission, useRouter;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  },\n  useRoute: function (v) {\n    useRoute = v;\n  },\n  useTranslation: function (v) {\n    useTranslation = v;\n  },\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  },\n  usePermission: function (v) {\n    usePermission = v;\n  },\n  useRouter: function (v) {\n    useRouter = v;\n  }\n}, 3);\nvar useQuery;\nmodule.link(\"@tanstack/react-query\", {\n  useQuery: function (v) {\n    useQuery = v;\n  }\n}, 4);\nvar React, useCallback;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useCallback: function (v) {\n    useCallback = v;\n  }\n}, 5);\nvar useSyncExternalStore;\nmodule.link(\"use-sync-external-store/shim\", {\n  useSyncExternalStore: function (v) {\n    useSyncExternalStore = v;\n  }\n}, 6);\nvar ContextualbarScrollableContent, ContextualbarFooter;\nmodule.link(\"../../../../../components/Contextualbar\", {\n  ContextualbarScrollableContent: function (v) {\n    ContextualbarScrollableContent = v;\n  },\n  ContextualbarFooter: function (v) {\n    ContextualbarFooter = v;\n  }\n}, 7);\nvar UserStatus;\nmodule.link(\"../../../../../components/UserStatus\", {\n  UserStatus: function (v) {\n    UserStatus = v;\n  }\n}, 8);\nvar useIsCallReady;\nmodule.link(\"../../../../../contexts/CallContext\", {\n  useIsCallReady: function (v) {\n    useIsCallReady = v;\n  }\n}, 9);\nvar useFormatDate;\nmodule.link(\"../../../../../hooks/useFormatDate\", {\n  useFormatDate: function (v) {\n    useFormatDate = v;\n  }\n}, 10);\nvar parseOutboundPhoneNumber;\nmodule.link(\"../../../../../lib/voip/parseOutboundPhoneNumber\", {\n  parseOutboundPhoneNumber: function (v) {\n    parseOutboundPhoneNumber = v;\n  }\n}, 11);\nvar ContactManagerInfo;\nmodule.link(\"../../../../../omnichannel/ContactManagerInfo\", {\n  \"default\": function (v) {\n    ContactManagerInfo = v;\n  }\n}, 12);\nvar AgentInfoDetails;\nmodule.link(\"../../../components/AgentInfoDetails\", {\n  \"default\": function (v) {\n    AgentInfoDetails = v;\n  }\n}, 13);\nvar CustomField;\nmodule.link(\"../../../components/CustomField\", {\n  \"default\": function (v) {\n    CustomField = v;\n  }\n}, 14);\nvar Field;\nmodule.link(\"../../../components/Field\", {\n  \"default\": function (v) {\n    Field = v;\n  }\n}, 15);\nvar Info;\nmodule.link(\"../../../components/Info\", {\n  \"default\": function (v) {\n    Info = v;\n  }\n}, 16);\nvar Label;\nmodule.link(\"../../../components/Label\", {\n  \"default\": function (v) {\n    Label = v;\n  }\n}, 17);\nvar VoipInfoCallButton;\nmodule.link(\"../../calls/contextualBar/VoipInfoCallButton\", {\n  VoipInfoCallButton: function (v) {\n    VoipInfoCallButton = v;\n  }\n}, 18);\nvar FormSkeleton;\nmodule.link(\"../../components/FormSkeleton\", {\n  FormSkeleton: function (v) {\n    FormSkeleton = v;\n  }\n}, 19);\nvar ContactInfo = function (_ref) {\n  var contactId = _ref.id,\n    _ref$rid = _ref.rid,\n    roomId = _ref$rid === void 0 ? '' : _ref$rid,\n    route = _ref.route;\n  var t = useTranslation();\n  var dispatchToastMessage = useToastMessageDispatch();\n  var router = useRouter();\n  var liveRoute = useRoute('live');\n  var currentRouteName = useSyncExternalStore(router.subscribeToRouteChange, useCallback(function () {\n    return router.getRouteName();\n  }, [router]));\n  var formatDate = useFormatDate();\n  var isCallReady = useIsCallReady();\n  var canViewCustomFields = usePermission('view-livechat-room-customfields');\n  var canEditContact = usePermission('edit-omnichannel-contact');\n  var getCustomFields = useEndpoint('GET', '/v1/livechat/custom-fields');\n  var _useQuery = useQuery(['/v1/livechat/custom-fields'], function () {\n      return getCustomFields();\n    }),\n    _useQuery$data = _useQuery.data;\n  _useQuery$data = _useQuery$data === void 0 ? {} : _useQuery$data;\n  var customFields = _useQuery$data.customFields;\n  var getContact = useEndpoint('GET', '/v1/omnichannel/contact');\n  var _useQuery2 = useQuery(['/v1/omnichannel/contact', contactId], function () {\n      return getContact({\n        contactId: contactId\n      });\n    }, {\n      enabled: canViewCustomFields && !!contactId\n    }),\n    _useQuery2$data = _useQuery2.data;\n  _useQuery2$data = _useQuery2$data === void 0 ? {} : _useQuery2$data;\n  var contact = _useQuery2$data.contact,\n    isInitialLoading = _useQuery2.isInitialLoading,\n    isError = _useQuery2.isError;\n  var onEditButtonClick = useMutableCallback(function () {\n    if (!canEditContact) {\n      return dispatchToastMessage({\n        type: 'error',\n        message: t('Not_authorized')\n      });\n    }\n    if (route) {\n      router.navigate({\n        name: route,\n        params: {\n          tab: 'contact-profile',\n          context: 'edit',\n          id: roomId\n        }\n      });\n      return;\n    }\n    router.navigate({\n      name: 'omnichannel-directory',\n      params: {\n        page: 'contacts',\n        id: contactId,\n        bar: 'edit'\n      }\n    });\n  });\n  if (isInitialLoading) {\n    return /*#__PURE__*/React.createElement(Box, {\n      pi: 24\n    }, /*#__PURE__*/React.createElement(FormSkeleton, null));\n  }\n  if (isError || !contact) {\n    return /*#__PURE__*/React.createElement(Box, {\n      mbs: 16\n    }, t('Contact_not_found'));\n  }\n  var username = contact.username,\n    visitorEmails = contact.visitorEmails,\n    phone = contact.phone,\n    ts = contact.ts,\n    livechatData = contact.livechatData,\n    lastChat = contact.lastChat,\n    contactManager = contact.contactManager,\n    status = contact.status;\n  var showContactHistory = currentRouteName === 'live' && lastChat;\n  var _ref2 = phone !== null && phone !== void 0 ? phone : [{}],\n    _ref3 = _slicedToArray(_ref2, 1),\n    _ref3$0$phoneNumber = _ref3[0].phoneNumber,\n    phoneNumber = _ref3$0$phoneNumber === void 0 ? '' : _ref3$0$phoneNumber;\n  var _ref4 = visitorEmails !== null && visitorEmails !== void 0 ? visitorEmails : [{}],\n    _ref5 = _slicedToArray(_ref4, 1),\n    _ref5$0$address = _ref5[0].address,\n    email = _ref5$0$address === void 0 ? '' : _ref5$0$address;\n  var checkIsVisibleAndScopeVisitor = function (key) {\n    var field = customFields === null || customFields === void 0 ? void 0 : customFields.find(function (_ref6) {\n      var _id = _ref6._id;\n      return _id === key;\n    });\n    return (field === null || field === void 0 ? void 0 : field.visibility) === 'visible' && (field === null || field === void 0 ? void 0 : field.scope) === 'visitor';\n  };\n  var onChatHistory = function () {\n    var _ref7 = lastChat !== null && lastChat !== void 0 ? lastChat : {},\n      _ref7$_id = _ref7._id,\n      _id = _ref7$_id === void 0 ? '' : _ref7$_id;\n    liveRoute.push({\n      id: _id,\n      tab: 'contact-chat-history'\n    });\n  };\n  // Serialized does not like unknown :(\n  var customFieldEntries = Object.entries(livechatData !== null && livechatData !== void 0 ? livechatData : {}).filter(function (_ref8) {\n    var _ref9 = _slicedToArray(_ref8, 2),\n      key = _ref9[0],\n      value = _ref9[1];\n    return checkIsVisibleAndScopeVisitor(key) && value;\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ContextualbarScrollableContent, {\n    p: 24\n  }, /*#__PURE__*/React.createElement(Margins, {\n    block: 4\n  }, username && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Label, null, t('Name') + \" / \" + t('Username')), /*#__PURE__*/React.createElement(Info, {\n    style: {\n      display: 'flex'\n    }\n  }, /*#__PURE__*/React.createElement(UserAvatar, {\n    size: \"x40\",\n    title: username,\n    username: username\n  }), /*#__PURE__*/React.createElement(AgentInfoDetails, {\n    mis: 10,\n    name: username,\n    shortName: username,\n    status: /*#__PURE__*/React.createElement(UserStatus, {\n      status: status\n    })\n  }))), email && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Label, null, t('Email')), /*#__PURE__*/React.createElement(Info, {\n    \"data-qa-id\": \"contactInfo-email\"\n  }, email)), phoneNumber && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Label, null, t('Phone')), /*#__PURE__*/React.createElement(Info, null, parseOutboundPhoneNumber(phoneNumber))), ts && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Label, null, t('Created_at')), /*#__PURE__*/React.createElement(Info, null, formatDate(ts))), lastChat && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Label, null, t('Last_Chat')), /*#__PURE__*/React.createElement(Info, null, formatDate(lastChat.ts))), canViewCustomFields && customFieldEntries.map(function (_ref10) {\n    var _ref11 = _slicedToArray(_ref10, 2),\n      key = _ref11[0],\n      value = _ref11[1];\n    return /*#__PURE__*/React.createElement(CustomField, {\n      key: key,\n      id: key,\n      value: value\n    });\n  }), contactManager && /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(Label, null, t('Contact_Manager')), /*#__PURE__*/React.createElement(ContactManagerInfo, {\n    username: contactManager.username\n  })))), /*#__PURE__*/React.createElement(ContextualbarFooter, null, isCallReady && /*#__PURE__*/React.createElement(ButtonGroup, {\n    stretch: true\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(VoipInfoCallButton, {\n    phoneNumber: phoneNumber\n  }), showContactHistory && /*#__PURE__*/React.createElement(Divider, {\n    width: \"100%\"\n  }))), /*#__PURE__*/React.createElement(ButtonGroup, {\n    stretch: true\n  }, showContactHistory && /*#__PURE__*/React.createElement(Button, {\n    icon: \"history\",\n    onClick: onChatHistory\n  }, t('Chat_History')), /*#__PURE__*/React.createElement(Button, {\n    icon: \"pencil\",\n    onClick: onEditButtonClick\n  }, t('Edit')))));\n};\nmodule.exportDefault(ContactInfo);","map":{"version":3,"names":["_slicedToArray","module","link","default","v","Box","Margins","ButtonGroup","Button","Divider","useMutableCallback","UserAvatar","useToastMessageDispatch","useRoute","useTranslation","useEndpoint","usePermission","useRouter","useQuery","React","useCallback","useSyncExternalStore","ContextualbarScrollableContent","ContextualbarFooter","UserStatus","useIsCallReady","useFormatDate","parseOutboundPhoneNumber","ContactManagerInfo","AgentInfoDetails","CustomField","Field","Info","Label","VoipInfoCallButton","FormSkeleton","ContactInfo","_ref","contactId","id","_ref$rid","rid","roomId","route","t","dispatchToastMessage","router","liveRoute","currentRouteName","subscribeToRouteChange","getRouteName","formatDate","isCallReady","canViewCustomFields","canEditContact","getCustomFields","_useQuery","_useQuery$data","data","customFields","getContact","_useQuery2","enabled","_useQuery2$data","contact","isInitialLoading","isError","onEditButtonClick","type","message","navigate","name","params","tab","context","page","bar","createElement","pi","mbs","username","visitorEmails","phone","ts","livechatData","lastChat","contactManager","status","showContactHistory","_ref2","_ref3","_ref3$0$phoneNumber","phoneNumber","_ref4","_ref5","_ref5$0$address","address","email","checkIsVisibleAndScopeVisitor","key","field","find","_ref6","_id","visibility","scope","onChatHistory","_ref7","_ref7$_id","push","customFieldEntries","Object","entries","filter","_ref8","_ref9","value","Fragment","p","block","style","display","size","title","mis","shortName","map","_ref10","_ref11","stretch","width","icon","onClick","exportDefault"],"sources":["client/views/omnichannel/directory/contacts/contextualBar/ContactInfo.tsx"],"sourcesContent":["import { Box, Margins, ButtonGroup, Button, Divider } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport type { RouteName } from '@rocket.chat/ui-contexts';\nimport { useToastMessageDispatch, useRoute, useTranslation, useEndpoint, usePermission, useRouter } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport React, { useCallback } from 'react';\nimport { useSyncExternalStore } from 'use-sync-external-store/shim';\n\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../../../components/Contextualbar';\nimport { UserStatus } from '../../../../../components/UserStatus';\nimport { useIsCallReady } from '../../../../../contexts/CallContext';\nimport { useFormatDate } from '../../../../../hooks/useFormatDate';\nimport { parseOutboundPhoneNumber } from '../../../../../lib/voip/parseOutboundPhoneNumber';\nimport ContactManagerInfo from '../../../../../omnichannel/ContactManagerInfo';\nimport AgentInfoDetails from '../../../components/AgentInfoDetails';\nimport CustomField from '../../../components/CustomField';\nimport Field from '../../../components/Field';\nimport Info from '../../../components/Info';\nimport Label from '../../../components/Label';\nimport { VoipInfoCallButton } from '../../calls/contextualBar/VoipInfoCallButton';\nimport { FormSkeleton } from '../../components/FormSkeleton';\n\ntype ContactInfoProps = {\n\tid: string;\n\trid?: string;\n\troute?: RouteName;\n};\n\nconst ContactInfo = ({ id: contactId, rid: roomId = '', route }: ContactInfoProps) => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst router = useRouter();\n\tconst liveRoute = useRoute('live');\n\n\tconst currentRouteName = useSyncExternalStore(\n\t\trouter.subscribeToRouteChange,\n\t\tuseCallback(() => router.getRouteName(), [router]),\n\t);\n\n\tconst formatDate = useFormatDate();\n\tconst isCallReady = useIsCallReady();\n\n\tconst canViewCustomFields = usePermission('view-livechat-room-customfields');\n\tconst canEditContact = usePermission('edit-omnichannel-contact');\n\n\tconst getCustomFields = useEndpoint('GET', '/v1/livechat/custom-fields');\n\tconst { data: { customFields } = {} } = useQuery(['/v1/livechat/custom-fields'], () => getCustomFields());\n\n\tconst getContact = useEndpoint('GET', '/v1/omnichannel/contact');\n\tconst {\n\t\tdata: { contact } = {},\n\t\tisInitialLoading,\n\t\tisError,\n\t} = useQuery(['/v1/omnichannel/contact', contactId], () => getContact({ contactId }), {\n\t\tenabled: canViewCustomFields && !!contactId,\n\t});\n\n\tconst onEditButtonClick = useMutableCallback(() => {\n\t\tif (!canEditContact) {\n\t\t\treturn dispatchToastMessage({ type: 'error', message: t('Not_authorized') });\n\t\t}\n\n\t\tif (route) {\n\t\t\trouter.navigate({\n\t\t\t\tname: route,\n\t\t\t\tparams: {\n\t\t\t\t\ttab: 'contact-profile',\n\t\t\t\t\tcontext: 'edit',\n\t\t\t\t\tid: roomId,\n\t\t\t\t},\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\trouter.navigate({\n\t\t\tname: 'omnichannel-directory',\n\t\t\tparams: {\n\t\t\t\tpage: 'contacts',\n\t\t\t\tid: contactId,\n\t\t\t\tbar: 'edit',\n\t\t\t},\n\t\t});\n\t});\n\n\tif (isInitialLoading) {\n\t\treturn (\n\t\t\t<Box pi={24}>\n\t\t\t\t<FormSkeleton />\n\t\t\t</Box>\n\t\t);\n\t}\n\n\tif (isError || !contact) {\n\t\treturn <Box mbs={16}>{t('Contact_not_found')}</Box>;\n\t}\n\n\tconst { username, visitorEmails, phone, ts, livechatData, lastChat, contactManager, status } = contact;\n\n\tconst showContactHistory = currentRouteName === 'live' && lastChat;\n\n\tconst [{ phoneNumber = '' }] = phone ?? [{}];\n\tconst [{ address: email = '' }] = visitorEmails ?? [{}];\n\n\tconst checkIsVisibleAndScopeVisitor = (key: string) => {\n\t\tconst field = customFields?.find(({ _id }) => _id === key);\n\t\treturn field?.visibility === 'visible' && field?.scope === 'visitor';\n\t};\n\n\tconst onChatHistory = () => {\n\t\tconst { _id = '' } = lastChat ?? {};\n\t\tliveRoute.push({ id: _id, tab: 'contact-chat-history' });\n\t};\n\n\t// Serialized does not like unknown :(\n\tconst customFieldEntries = Object.entries((livechatData ?? {}) as unknown as Record<string, string>).filter(\n\t\t([key, value]) => checkIsVisibleAndScopeVisitor(key) && value,\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent p={24}>\n\t\t\t\t<Margins block={4}>\n\t\t\t\t\t{username && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{`${t('Name')} / ${t('Username')}`}</Label>\n\t\t\t\t\t\t\t<Info style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t<UserAvatar size='x40' title={username} username={username} />\n\t\t\t\t\t\t\t\t<AgentInfoDetails mis={10} name={username} shortName={username} status={<UserStatus status={status} />} />\n\t\t\t\t\t\t\t</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{email && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Email')}</Label>\n\t\t\t\t\t\t\t<Info data-qa-id='contactInfo-email'>{email}</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{phoneNumber && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Phone')}</Label>\n\t\t\t\t\t\t\t<Info>{parseOutboundPhoneNumber(phoneNumber)}</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t\t{ts && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Created_at')}</Label>\n\t\t\t\t\t\t\t<Info>{formatDate(ts)}</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{lastChat && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Last_Chat')}</Label>\n\t\t\t\t\t\t\t<Info>{formatDate(lastChat.ts)}</Info>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{canViewCustomFields &&\n\t\t\t\t\t\tcustomFieldEntries.map(([key, value]) => {\n\t\t\t\t\t\t\treturn <CustomField key={key} id={key} value={value} />;\n\t\t\t\t\t\t})}\n\n\t\t\t\t\t{contactManager && (\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Label>{t('Contact_Manager')}</Label>\n\t\t\t\t\t\t\t<ContactManagerInfo username={contactManager.username} />\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t)}\n\t\t\t\t</Margins>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t{isCallReady && (\n\t\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<VoipInfoCallButton phoneNumber={phoneNumber} />\n\t\t\t\t\t\t\t{showContactHistory && <Divider width='100%' />}\n\t\t\t\t\t\t</>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t)}\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t{showContactHistory && (\n\t\t\t\t\t\t<Button icon='history' onClick={onChatHistory}>\n\t\t\t\t\t\t\t{t('Chat_History')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button icon='pencil' onClick={onEditButtonClick}>\n\t\t\t\t\t\t{t('Edit')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n};\n\nexport default ContactInfo;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"9c46c4e7639ef434bc36b27ed5e331449f5a13a2"}
