{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/ui-utils/client/lib/messageActionDefault.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"app/ui-utils/client/lib/messageActionDefault.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/ui-utils/client/lib/messageActionDefault.ts","inputSourceMap":{"version":3,"file":"app/ui-utils/client/lib/messageActionDefault.ts","sourceRoot":"","sources":["app/ui-utils/client/lib/messageActionDefault.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { isE2EEMessage, isRoomFederated } from '@rocket.chat/core-typings';\nimport { Meteor } from 'meteor/meteor';\nimport moment from 'moment';\n\nimport { getPermaLink } from '../../../../client/lib/getPermaLink';\nimport { imperativeModal } from '../../../../client/lib/imperativeModal';\nimport { roomCoordinator } from '../../../../client/lib/rooms/roomCoordinator';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\nimport { messageArgs } from '../../../../client/lib/utils/messageArgs';\nimport { router } from '../../../../client/providers/RouterProvider';\nimport ForwardMessageModal from '../../../../client/views/room/modals/ForwardMessageModal/ForwardMessageModal';\nimport ReactionListModal from '../../../../client/views/room/modals/ReactionListModal';\nimport ReportMessageModal from '../../../../client/views/room/modals/ReportMessageModal';\nimport { hasAtLeastOnePermission, hasPermission } from '../../../authorization/client';\nimport { ChatRoom, Subscriptions } from '../../../models/client';\nimport { t } from '../../../utils/lib/i18n';\nimport { MessageAction } from './MessageAction';\n\nconst getMainMessageText = (message: IMessage): IMessage => {\n\tconst newMessage = { ...message };\n\tnewMessage.msg = newMessage.msg || newMessage.attachments?.[0]?.description || newMessage.attachments?.[0]?.title || '';\n\tnewMessage.md = newMessage.md || newMessage.attachments?.[0]?.descriptionMd || undefined;\n\treturn { ...newMessage };\n};\n\nMeteor.startup(async () => {\n\tMessageAction.addButton({\n\t\tid: 'reply-directly',\n\t\ticon: 'reply-directly',\n\t\tlabel: 'Reply_in_direct_message',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated'],\n\t\trole: 'link',\n\t\ttype: 'communication',\n\t\taction(_, props) {\n\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\troomCoordinator.openRouteLink(\n\t\t\t\t'd',\n\t\t\t\t{ name: message.u.username },\n\t\t\t\t{\n\t\t\t\t\t...router.getSearchParameters(),\n\t\t\t\t\treply: message._id,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tcondition({ subscription, room, message, user }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (room.t === 'd' || room.t === 'l') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Check if we already have a DM started with the message user (not ourselves) or we can start one\n\t\t\tif (!!user && user._id !== message.u._id && !hasPermission('create-d')) {\n\t\t\t\tconst dmRoom = ChatRoom.findOne({ _id: [user._id, message.u._id].sort().join('') });\n\t\t\t\tif (!dmRoom || !Subscriptions.findOne({ 'rid': dmRoom._id, 'u._id': user._id })) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\torder: 0,\n\t\tgroup: 'menu',\n\t\tdisabled({ message }) {\n\t\t\treturn isE2EEMessage(message);\n\t\t},\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'forward-message',\n\t\ticon: 'arrow-forward',\n\t\tlabel: 'Forward_message',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\ttype: 'communication',\n\t\tasync action(_, props) {\n\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\tconst permalink = await getPermaLink(message._id);\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: ForwardMessageModal,\n\t\t\t\tprops: {\n\t\t\t\t\tmessage,\n\t\t\t\t\tpermalink,\n\t\t\t\t\tonClose: (): void => {\n\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\torder: 0,\n\t\tgroup: 'message',\n\t\tdisabled({ message }) {\n\t\t\treturn isE2EEMessage(message);\n\t\t},\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'quote-message',\n\t\ticon: 'quote',\n\t\tlabel: 'Quote',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated'],\n\t\tasync action(_, props) {\n\t\t\tconst { message = messageArgs(this).msg, chat, autoTranslateOptions } = props;\n\n\t\t\tif (message && autoTranslateOptions?.autoTranslateEnabled && autoTranslateOptions.showAutoTranslate(message)) {\n\t\t\t\tmessage.msg =\n\t\t\t\t\tmessage.translations && autoTranslateOptions.autoTranslateLanguage\n\t\t\t\t\t\t? message.translations[autoTranslateOptions.autoTranslateLanguage]\n\t\t\t\t\t\t: message.msg;\n\t\t\t}\n\n\t\t\tawait chat?.composer?.quoteMessage(message);\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\torder: -2,\n\t\tgroup: 'message',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'permalink',\n\t\ticon: 'permalink',\n\t\tlabel: 'Copy_link',\n\t\t// classes: 'clipboard',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\n\t\ttype: 'duplication',\n\t\tasync action(_, props) {\n\t\t\ttry {\n\t\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\t\tconst permalink = await getPermaLink(message._id);\n\t\t\t\tawait navigator.clipboard.writeText(permalink);\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Copied') });\n\t\t\t} catch (e) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: e });\n\t\t\t}\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\treturn !!subscription;\n\t\t},\n\t\torder: 5,\n\t\tgroup: 'menu',\n\t\tdisabled({ message }) {\n\t\t\treturn isE2EEMessage(message);\n\t\t},\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'copy',\n\t\ticon: 'copy',\n\t\tlabel: 'Copy_text',\n\t\t// classes: 'clipboard',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated'],\n\t\ttype: 'duplication',\n\t\tasync action(_, props) {\n\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\tconst msgText = getMainMessageText(message).msg;\n\t\t\tawait navigator.clipboard.writeText(msgText);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Copied') });\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\treturn !!subscription;\n\t\t},\n\t\torder: 6,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'edit-message',\n\t\ticon: 'edit',\n\t\tlabel: 'Edit',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated'],\n\t\ttype: 'management',\n\t\tasync action(_, props) {\n\t\t\tconst { message = messageArgs(this).msg, chat } = props;\n\t\t\tawait chat?.messageEditing.editMessage(message);\n\t\t},\n\t\tcondition({ message, subscription, settings, room, user }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (isRoomFederated(room)) {\n\t\t\t\treturn message.u._id === user?._id;\n\t\t\t}\n\t\t\tconst canEditMessage = hasAtLeastOnePermission('edit-message', message.rid);\n\t\t\tconst isEditAllowed = settings.Message_AllowEditing;\n\t\t\tconst editOwn = message.u && message.u._id === user?._id;\n\t\t\tif (!(canEditMessage || (isEditAllowed && editOwn))) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst blockEditInMinutes = settings.Message_AllowEditing_BlockEditInMinutes as number;\n\t\t\tconst bypassBlockTimeLimit = hasPermission('bypass-time-limit-edit-and-delete', message.rid);\n\n\t\t\tif (!bypassBlockTimeLimit && blockEditInMinutes) {\n\t\t\t\tlet msgTs;\n\t\t\t\tif (message.ts != null) {\n\t\t\t\t\tmsgTs = moment(message.ts);\n\t\t\t\t}\n\t\t\t\tlet currentTsDiff;\n\t\t\t\tif (msgTs != null) {\n\t\t\t\t\tcurrentTsDiff = moment().diff(msgTs, 'minutes');\n\t\t\t\t}\n\t\t\t\treturn (!!currentTsDiff || currentTsDiff === 0) && currentTsDiff < blockEditInMinutes;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\torder: 8,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'delete-message',\n\t\ticon: 'trash',\n\t\tlabel: 'Delete',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\n\t\tcolor: 'alert',\n\t\ttype: 'management',\n\t\tasync action(this: unknown, _, { message = messageArgs(this).msg, chat }) {\n\t\t\tawait chat?.flows.requestMessageDeletion(message);\n\t\t},\n\t\tcondition({ message, subscription, room, chat, user }) {\n\t\t\tif (!subscription) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (isRoomFederated(room)) {\n\t\t\t\treturn message.u._id === user?._id;\n\t\t\t}\n\t\t\tconst isLivechatRoom = roomCoordinator.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn chat?.data.canDeleteMessage(message) ?? false;\n\t\t},\n\t\torder: 10,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'report-message',\n\t\ticon: 'report',\n\t\tlabel: 'Report',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\n\t\tcolor: 'alert',\n\t\ttype: 'management',\n\t\taction(this: unknown, _, { message = messageArgs(this).msg }) {\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: ReportMessageModal,\n\t\t\t\tprops: {\n\t\t\t\t\tmessage: getMainMessageText(message),\n\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tcondition({ subscription, room, message, user }) {\n\t\t\tconst isLivechatRoom = roomCoordinator.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom || message.u._id === user?._id) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn Boolean(subscription);\n\t\t},\n\t\torder: 9,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'reaction-list',\n\t\ticon: 'emoji',\n\t\tlabel: 'Reactions',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'videoconf', 'videoconf-threads'],\n\t\ttype: 'interaction',\n\t\taction(this: unknown, _, { message: { reactions = {} } = messageArgs(this).msg }) {\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: ReactionListModal,\n\t\t\t\tprops: { reactions, onClose: imperativeModal.close },\n\t\t\t});\n\t\t},\n\t\tcondition({ message: { reactions } }) {\n\t\t\treturn !!reactions;\n\t\t},\n\t\torder: 9,\n\t\tgroup: 'menu',\n\t});\n});\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/ui-utils/client/lib/messageActionDefault.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/ui-utils/client/lib/messageActionDefault.ts","inputSourceMap":{"version":3,"file":"app/ui-utils/client/lib/messageActionDefault.ts","sourceRoot":"","sources":["app/ui-utils/client/lib/messageActionDefault.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { isE2EEMessage, isRoomFederated } from '@rocket.chat/core-typings';\nimport { Meteor } from 'meteor/meteor';\nimport moment from 'moment';\n\nimport { getPermaLink } from '../../../../client/lib/getPermaLink';\nimport { imperativeModal } from '../../../../client/lib/imperativeModal';\nimport { roomCoordinator } from '../../../../client/lib/rooms/roomCoordinator';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\nimport { messageArgs } from '../../../../client/lib/utils/messageArgs';\nimport { router } from '../../../../client/providers/RouterProvider';\nimport ForwardMessageModal from '../../../../client/views/room/modals/ForwardMessageModal/ForwardMessageModal';\nimport ReactionListModal from '../../../../client/views/room/modals/ReactionListModal';\nimport ReportMessageModal from '../../../../client/views/room/modals/ReportMessageModal';\nimport { hasAtLeastOnePermission, hasPermission } from '../../../authorization/client';\nimport { ChatRoom, Subscriptions } from '../../../models/client';\nimport { t } from '../../../utils/lib/i18n';\nimport { MessageAction } from './MessageAction';\n\nconst getMainMessageText = (message: IMessage): IMessage => {\n\tconst newMessage = { ...message };\n\tnewMessage.msg = newMessage.msg || newMessage.attachments?.[0]?.description || newMessage.attachments?.[0]?.title || '';\n\tnewMessage.md = newMessage.md || newMessage.attachments?.[0]?.descriptionMd || undefined;\n\treturn { ...newMessage };\n};\n\nMeteor.startup(async () => {\n\tMessageAction.addButton({\n\t\tid: 'reply-directly',\n\t\ticon: 'reply-directly',\n\t\tlabel: 'Reply_in_direct_message',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated'],\n\t\trole: 'link',\n\t\ttype: 'communication',\n\t\taction(_, props) {\n\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\troomCoordinator.openRouteLink(\n\t\t\t\t'd',\n\t\t\t\t{ name: message.u.username },\n\t\t\t\t{\n\t\t\t\t\t...router.getSearchParameters(),\n\t\t\t\t\treply: message._id,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tcondition({ subscription, room, message, user }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (room.t === 'd' || room.t === 'l') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Check if we already have a DM started with the message user (not ourselves) or we can start one\n\t\t\tif (!!user && user._id !== message.u._id && !hasPermission('create-d')) {\n\t\t\t\tconst dmRoom = ChatRoom.findOne({ _id: [user._id, message.u._id].sort().join('') });\n\t\t\t\tif (!dmRoom || !Subscriptions.findOne({ 'rid': dmRoom._id, 'u._id': user._id })) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\torder: 0,\n\t\tgroup: 'menu',\n\t\tdisabled({ message }) {\n\t\t\treturn isE2EEMessage(message);\n\t\t},\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'forward-message',\n\t\ticon: 'arrow-forward',\n\t\tlabel: 'Forward_message',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\ttype: 'communication',\n\t\tasync action(_, props) {\n\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\tconst permalink = await getPermaLink(message._id);\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: ForwardMessageModal,\n\t\t\t\tprops: {\n\t\t\t\t\tmessage,\n\t\t\t\t\tpermalink,\n\t\t\t\t\tonClose: (): void => {\n\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\torder: 0,\n\t\tgroup: 'message',\n\t\tdisabled({ message }) {\n\t\t\treturn isE2EEMessage(message);\n\t\t},\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'quote-message',\n\t\ticon: 'quote',\n\t\tlabel: 'Quote',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated'],\n\t\tasync action(_, props) {\n\t\t\tconst { message = messageArgs(this).msg, chat, autoTranslateOptions } = props;\n\n\t\t\tif (message && autoTranslateOptions?.autoTranslateEnabled && autoTranslateOptions.showAutoTranslate(message)) {\n\t\t\t\tmessage.msg =\n\t\t\t\t\tmessage.translations && autoTranslateOptions.autoTranslateLanguage\n\t\t\t\t\t\t? message.translations[autoTranslateOptions.autoTranslateLanguage]\n\t\t\t\t\t\t: message.msg;\n\t\t\t}\n\n\t\t\tawait chat?.composer?.quoteMessage(message);\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\torder: -2,\n\t\tgroup: 'message',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'permalink',\n\t\ticon: 'permalink',\n\t\tlabel: 'Copy_link',\n\t\t// classes: 'clipboard',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\n\t\ttype: 'duplication',\n\t\tasync action(_, props) {\n\t\t\ttry {\n\t\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\t\tconst permalink = await getPermaLink(message._id);\n\t\t\t\tawait navigator.clipboard.writeText(permalink);\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Copied') });\n\t\t\t} catch (e) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: e });\n\t\t\t}\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\treturn !!subscription;\n\t\t},\n\t\torder: 5,\n\t\tgroup: 'menu',\n\t\tdisabled({ message }) {\n\t\t\treturn isE2EEMessage(message);\n\t\t},\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'copy',\n\t\ticon: 'copy',\n\t\tlabel: 'Copy_text',\n\t\t// classes: 'clipboard',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated'],\n\t\ttype: 'duplication',\n\t\tasync action(_, props) {\n\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\tconst msgText = getMainMessageText(message).msg;\n\t\t\tawait navigator.clipboard.writeText(msgText);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Copied') });\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\treturn !!subscription;\n\t\t},\n\t\torder: 6,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'edit-message',\n\t\ticon: 'edit',\n\t\tlabel: 'Edit',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated'],\n\t\ttype: 'management',\n\t\tasync action(_, props) {\n\t\t\tconst { message = messageArgs(this).msg, chat } = props;\n\t\t\tawait chat?.messageEditing.editMessage(message);\n\t\t},\n\t\tcondition({ message, subscription, settings, room, user }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (isRoomFederated(room)) {\n\t\t\t\treturn message.u._id === user?._id;\n\t\t\t}\n\t\t\tconst canEditMessage = hasAtLeastOnePermission('edit-message', message.rid);\n\t\t\tconst isEditAllowed = settings.Message_AllowEditing;\n\t\t\tconst editOwn = message.u && message.u._id === user?._id;\n\t\t\tif (!(canEditMessage || (isEditAllowed && editOwn))) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst blockEditInMinutes = settings.Message_AllowEditing_BlockEditInMinutes as number;\n\t\t\tconst bypassBlockTimeLimit = hasPermission('bypass-time-limit-edit-and-delete', message.rid);\n\n\t\t\tif (!bypassBlockTimeLimit && blockEditInMinutes) {\n\t\t\t\tlet msgTs;\n\t\t\t\tif (message.ts != null) {\n\t\t\t\t\tmsgTs = moment(message.ts);\n\t\t\t\t}\n\t\t\t\tlet currentTsDiff;\n\t\t\t\tif (msgTs != null) {\n\t\t\t\t\tcurrentTsDiff = moment().diff(msgTs, 'minutes');\n\t\t\t\t}\n\t\t\t\treturn (!!currentTsDiff || currentTsDiff === 0) && currentTsDiff < blockEditInMinutes;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\torder: 8,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'delete-message',\n\t\ticon: 'trash',\n\t\tlabel: 'Delete',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\n\t\tcolor: 'alert',\n\t\ttype: 'management',\n\t\tasync action(this: unknown, _, { message = messageArgs(this).msg, chat }) {\n\t\t\tawait chat?.flows.requestMessageDeletion(message);\n\t\t},\n\t\tcondition({ message, subscription, room, chat, user }) {\n\t\t\tif (!subscription) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (isRoomFederated(room)) {\n\t\t\t\treturn message.u._id === user?._id;\n\t\t\t}\n\t\t\tconst isLivechatRoom = roomCoordinator.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn chat?.data.canDeleteMessage(message) ?? false;\n\t\t},\n\t\torder: 10,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'report-message',\n\t\ticon: 'report',\n\t\tlabel: 'Report',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\n\t\tcolor: 'alert',\n\t\ttype: 'management',\n\t\taction(this: unknown, _, { message = messageArgs(this).msg }) {\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: ReportMessageModal,\n\t\t\t\tprops: {\n\t\t\t\t\tmessage: getMainMessageText(message),\n\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tcondition({ subscription, room, message, user }) {\n\t\t\tconst isLivechatRoom = roomCoordinator.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom || message.u._id === user?._id) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn Boolean(subscription);\n\t\t},\n\t\torder: 9,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'reaction-list',\n\t\ticon: 'emoji',\n\t\tlabel: 'Reactions',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'videoconf', 'videoconf-threads'],\n\t\ttype: 'interaction',\n\t\taction(this: unknown, _, { message: { reactions = {} } = messageArgs(this).msg }) {\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: ReactionListModal,\n\t\t\t\tprops: { reactions, onClose: imperativeModal.close },\n\t\t\t});\n\t\t},\n\t\tcondition({ message: { reactions } }) {\n\t\t\treturn !!reactions;\n\t\t},\n\t\torder: 9,\n\t\tgroup: 'menu',\n\t});\n});\n"]}}},"code":"var _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\nvar _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 1);\nvar isE2EEMessage, isRoomFederated;\nmodule.link(\"@rocket.chat/core-typings\", {\n  isE2EEMessage: function (v) {\n    isE2EEMessage = v;\n  },\n  isRoomFederated: function (v) {\n    isRoomFederated = v;\n  }\n}, 0);\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 1);\nvar moment;\nmodule.link(\"moment\", {\n  \"default\": function (v) {\n    moment = v;\n  }\n}, 2);\nvar getPermaLink;\nmodule.link(\"../../../../client/lib/getPermaLink\", {\n  getPermaLink: function (v) {\n    getPermaLink = v;\n  }\n}, 3);\nvar imperativeModal;\nmodule.link(\"../../../../client/lib/imperativeModal\", {\n  imperativeModal: function (v) {\n    imperativeModal = v;\n  }\n}, 4);\nvar roomCoordinator;\nmodule.link(\"../../../../client/lib/rooms/roomCoordinator\", {\n  roomCoordinator: function (v) {\n    roomCoordinator = v;\n  }\n}, 5);\nvar dispatchToastMessage;\nmodule.link(\"../../../../client/lib/toast\", {\n  dispatchToastMessage: function (v) {\n    dispatchToastMessage = v;\n  }\n}, 6);\nvar messageArgs;\nmodule.link(\"../../../../client/lib/utils/messageArgs\", {\n  messageArgs: function (v) {\n    messageArgs = v;\n  }\n}, 7);\nvar router;\nmodule.link(\"../../../../client/providers/RouterProvider\", {\n  router: function (v) {\n    router = v;\n  }\n}, 8);\nvar ForwardMessageModal;\nmodule.link(\"../../../../client/views/room/modals/ForwardMessageModal/ForwardMessageModal\", {\n  \"default\": function (v) {\n    ForwardMessageModal = v;\n  }\n}, 9);\nvar ReactionListModal;\nmodule.link(\"../../../../client/views/room/modals/ReactionListModal\", {\n  \"default\": function (v) {\n    ReactionListModal = v;\n  }\n}, 10);\nvar ReportMessageModal;\nmodule.link(\"../../../../client/views/room/modals/ReportMessageModal\", {\n  \"default\": function (v) {\n    ReportMessageModal = v;\n  }\n}, 11);\nvar hasAtLeastOnePermission, hasPermission;\nmodule.link(\"../../../authorization/client\", {\n  hasAtLeastOnePermission: function (v) {\n    hasAtLeastOnePermission = v;\n  },\n  hasPermission: function (v) {\n    hasPermission = v;\n  }\n}, 12);\nvar ChatRoom, Subscriptions;\nmodule.link(\"../../../models/client\", {\n  ChatRoom: function (v) {\n    ChatRoom = v;\n  },\n  Subscriptions: function (v) {\n    Subscriptions = v;\n  }\n}, 13);\nvar t;\nmodule.link(\"../../../utils/lib/i18n\", {\n  t: function (v) {\n    t = v;\n  }\n}, 14);\nvar MessageAction;\nmodule.link(\"./MessageAction\", {\n  MessageAction: function (v) {\n    MessageAction = v;\n  }\n}, 15);\nvar getMainMessageText = function (message) {\n  var _newMessage$attachmen, _newMessage$attachmen2, _newMessage$attachmen3, _newMessage$attachmen4, _newMessage$attachmen5, _newMessage$attachmen6;\n  var newMessage = _objectSpread({}, message);\n  newMessage.msg = newMessage.msg || ((_newMessage$attachmen = newMessage.attachments) === null || _newMessage$attachmen === void 0 ? void 0 : (_newMessage$attachmen2 = _newMessage$attachmen[0]) === null || _newMessage$attachmen2 === void 0 ? void 0 : _newMessage$attachmen2.description) || ((_newMessage$attachmen3 = newMessage.attachments) === null || _newMessage$attachmen3 === void 0 ? void 0 : (_newMessage$attachmen4 = _newMessage$attachmen3[0]) === null || _newMessage$attachmen4 === void 0 ? void 0 : _newMessage$attachmen4.title) || '';\n  newMessage.md = newMessage.md || ((_newMessage$attachmen5 = newMessage.attachments) === null || _newMessage$attachmen5 === void 0 ? void 0 : (_newMessage$attachmen6 = _newMessage$attachmen5[0]) === null || _newMessage$attachmen6 === void 0 ? void 0 : _newMessage$attachmen6.descriptionMd) || undefined;\n  return _objectSpread({}, newMessage);\n};\nMeteor.startup(function () {\n  function _callee7() {\n    return _regeneratorRuntime.async(function () {\n      function _callee7$(_context7) {\n        while (1) switch (_context7.prev = _context7.next) {\n          case 0:\n            MessageAction.addButton({\n              id: 'reply-directly',\n              icon: 'reply-directly',\n              label: 'Reply_in_direct_message',\n              context: ['message', 'message-mobile', 'threads', 'federated'],\n              role: 'link',\n              type: 'communication',\n              action: function (_, props) {\n                var _props$message = props.message,\n                  message = _props$message === void 0 ? messageArgs(this).msg : _props$message;\n                roomCoordinator.openRouteLink('d', {\n                  name: message.u.username\n                }, _objectSpread(_objectSpread({}, router.getSearchParameters()), {}, {\n                  reply: message._id\n                }));\n              },\n              condition: function (_ref) {\n                var subscription = _ref.subscription,\n                  room = _ref.room,\n                  message = _ref.message,\n                  user = _ref.user;\n                if (subscription == null) {\n                  return false;\n                }\n                if (room.t === 'd' || room.t === 'l') {\n                  return false;\n                }\n                // Check if we already have a DM started with the message user (not ourselves) or we can start one\n                if (!!user && user._id !== message.u._id && !hasPermission('create-d')) {\n                  var dmRoom = ChatRoom.findOne({\n                    _id: [user._id, message.u._id].sort().join('')\n                  });\n                  if (!dmRoom || !Subscriptions.findOne({\n                    'rid': dmRoom._id,\n                    'u._id': user._id\n                  })) {\n                    return false;\n                  }\n                }\n                return true;\n              },\n              order: 0,\n              group: 'menu',\n              disabled: function (_ref2) {\n                var message = _ref2.message;\n                return isE2EEMessage(message);\n              }\n            });\n            MessageAction.addButton({\n              id: 'forward-message',\n              icon: 'arrow-forward',\n              label: 'Forward_message',\n              context: ['message', 'message-mobile', 'threads'],\n              type: 'communication',\n              action: function () {\n                function _callee(_, props) {\n                  var _props$message2, message, permalink;\n                  return _regeneratorRuntime.async(function () {\n                    function _callee$(_context) {\n                      while (1) switch (_context.prev = _context.next) {\n                        case 0:\n                          _props$message2 = props.message, message = _props$message2 === void 0 ? messageArgs(this).msg : _props$message2;\n                          _context.next = 3;\n                          return _regeneratorRuntime.awrap(getPermaLink(message._id));\n                        case 3:\n                          permalink = _context.sent;\n                          imperativeModal.open({\n                            component: ForwardMessageModal,\n                            props: {\n                              message: message,\n                              permalink: permalink,\n                              onClose: function () {\n                                imperativeModal.close();\n                              }\n                            }\n                          });\n                        case 5:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                    return _callee$;\n                  }(), null, this, null, Promise);\n                }\n                return _callee;\n              }(),\n              order: 0,\n              group: 'message',\n              disabled: function (_ref3) {\n                var message = _ref3.message;\n                return isE2EEMessage(message);\n              }\n            });\n            MessageAction.addButton({\n              id: 'quote-message',\n              icon: 'quote',\n              label: 'Quote',\n              context: ['message', 'message-mobile', 'threads', 'federated'],\n              action: function () {\n                function _callee2(_, props) {\n                  var _chat$composer;\n                  var _props$message3, message, chat, autoTranslateOptions;\n                  return _regeneratorRuntime.async(function () {\n                    function _callee2$(_context2) {\n                      while (1) switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _props$message3 = props.message, message = _props$message3 === void 0 ? messageArgs(this).msg : _props$message3, chat = props.chat, autoTranslateOptions = props.autoTranslateOptions;\n                          if (message && autoTranslateOptions !== null && autoTranslateOptions !== void 0 && autoTranslateOptions.autoTranslateEnabled && autoTranslateOptions.showAutoTranslate(message)) {\n                            message.msg = message.translations && autoTranslateOptions.autoTranslateLanguage ? message.translations[autoTranslateOptions.autoTranslateLanguage] : message.msg;\n                          }\n                          _context2.next = 4;\n                          return _regeneratorRuntime.awrap(chat === null || chat === void 0 ? void 0 : (_chat$composer = chat.composer) === null || _chat$composer === void 0 ? void 0 : _chat$composer.quoteMessage(message));\n                        case 4:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                    return _callee2$;\n                  }(), null, this, null, Promise);\n                }\n                return _callee2;\n              }(),\n              condition: function (_ref4) {\n                var subscription = _ref4.subscription;\n                if (subscription == null) {\n                  return false;\n                }\n                return true;\n              },\n              order: -2,\n              group: 'message'\n            });\n            MessageAction.addButton({\n              id: 'permalink',\n              icon: 'permalink',\n              label: 'Copy_link',\n              // classes: 'clipboard',\n              context: ['message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\n              type: 'duplication',\n              action: function () {\n                function _callee3(_, props) {\n                  var _props$message4, message, permalink;\n                  return _regeneratorRuntime.async(function () {\n                    function _callee3$(_context3) {\n                      while (1) switch (_context3.prev = _context3.next) {\n                        case 0:\n                          _context3.prev = 0;\n                          _props$message4 = props.message, message = _props$message4 === void 0 ? messageArgs(this).msg : _props$message4;\n                          _context3.next = 4;\n                          return _regeneratorRuntime.awrap(getPermaLink(message._id));\n                        case 4:\n                          permalink = _context3.sent;\n                          _context3.next = 7;\n                          return _regeneratorRuntime.awrap(navigator.clipboard.writeText(permalink));\n                        case 7:\n                          dispatchToastMessage({\n                            type: 'success',\n                            message: t('Copied')\n                          });\n                          _context3.next = 13;\n                          break;\n                        case 10:\n                          _context3.prev = 10;\n                          _context3.t0 = _context3[\"catch\"](0);\n                          dispatchToastMessage({\n                            type: 'error',\n                            message: _context3.t0\n                          });\n                        case 13:\n                        case \"end\":\n                          return _context3.stop();\n                      }\n                    }\n                    return _callee3$;\n                  }(), null, this, [[0, 10]], Promise);\n                }\n                return _callee3;\n              }(),\n              condition: function (_ref5) {\n                var subscription = _ref5.subscription;\n                return !!subscription;\n              },\n              order: 5,\n              group: 'menu',\n              disabled: function (_ref6) {\n                var message = _ref6.message;\n                return isE2EEMessage(message);\n              }\n            });\n            MessageAction.addButton({\n              id: 'copy',\n              icon: 'copy',\n              label: 'Copy_text',\n              // classes: 'clipboard',\n              context: ['message', 'message-mobile', 'threads', 'federated'],\n              type: 'duplication',\n              action: function () {\n                function _callee4(_, props) {\n                  var _props$message5, message, msgText;\n                  return _regeneratorRuntime.async(function () {\n                    function _callee4$(_context4) {\n                      while (1) switch (_context4.prev = _context4.next) {\n                        case 0:\n                          _props$message5 = props.message, message = _props$message5 === void 0 ? messageArgs(this).msg : _props$message5;\n                          msgText = getMainMessageText(message).msg;\n                          _context4.next = 4;\n                          return _regeneratorRuntime.awrap(navigator.clipboard.writeText(msgText));\n                        case 4:\n                          dispatchToastMessage({\n                            type: 'success',\n                            message: t('Copied')\n                          });\n                        case 5:\n                        case \"end\":\n                          return _context4.stop();\n                      }\n                    }\n                    return _callee4$;\n                  }(), null, this, null, Promise);\n                }\n                return _callee4;\n              }(),\n              condition: function (_ref7) {\n                var subscription = _ref7.subscription;\n                return !!subscription;\n              },\n              order: 6,\n              group: 'menu'\n            });\n            MessageAction.addButton({\n              id: 'edit-message',\n              icon: 'edit',\n              label: 'Edit',\n              context: ['message', 'message-mobile', 'threads', 'federated'],\n              type: 'management',\n              action: function () {\n                function _callee5(_, props) {\n                  var _props$message6, message, chat;\n                  return _regeneratorRuntime.async(function () {\n                    function _callee5$(_context5) {\n                      while (1) switch (_context5.prev = _context5.next) {\n                        case 0:\n                          _props$message6 = props.message, message = _props$message6 === void 0 ? messageArgs(this).msg : _props$message6, chat = props.chat;\n                          _context5.next = 3;\n                          return _regeneratorRuntime.awrap(chat === null || chat === void 0 ? void 0 : chat.messageEditing.editMessage(message));\n                        case 3:\n                        case \"end\":\n                          return _context5.stop();\n                      }\n                    }\n                    return _callee5$;\n                  }(), null, this, null, Promise);\n                }\n                return _callee5;\n              }(),\n              condition: function (_ref8) {\n                var message = _ref8.message,\n                  subscription = _ref8.subscription,\n                  settings = _ref8.settings,\n                  room = _ref8.room,\n                  user = _ref8.user;\n                if (subscription == null) {\n                  return false;\n                }\n                if (isRoomFederated(room)) {\n                  return message.u._id === (user === null || user === void 0 ? void 0 : user._id);\n                }\n                var canEditMessage = hasAtLeastOnePermission('edit-message', message.rid);\n                var isEditAllowed = settings.Message_AllowEditing;\n                var editOwn = message.u && message.u._id === (user === null || user === void 0 ? void 0 : user._id);\n                if (!(canEditMessage || isEditAllowed && editOwn)) {\n                  return false;\n                }\n                var blockEditInMinutes = settings.Message_AllowEditing_BlockEditInMinutes;\n                var bypassBlockTimeLimit = hasPermission('bypass-time-limit-edit-and-delete', message.rid);\n                if (!bypassBlockTimeLimit && blockEditInMinutes) {\n                  var msgTs;\n                  if (message.ts != null) {\n                    msgTs = moment(message.ts);\n                  }\n                  var currentTsDiff;\n                  if (msgTs != null) {\n                    currentTsDiff = moment().diff(msgTs, 'minutes');\n                  }\n                  return (!!currentTsDiff || currentTsDiff === 0) && currentTsDiff < blockEditInMinutes;\n                }\n                return true;\n              },\n              order: 8,\n              group: 'menu'\n            });\n            MessageAction.addButton({\n              id: 'delete-message',\n              icon: 'trash',\n              label: 'Delete',\n              context: ['message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\n              color: 'alert',\n              type: 'management',\n              action: function () {\n                function _callee6(_, _ref9) {\n                  var _ref9$message, message, chat;\n                  return _regeneratorRuntime.async(function () {\n                    function _callee6$(_context6) {\n                      while (1) switch (_context6.prev = _context6.next) {\n                        case 0:\n                          _ref9$message = _ref9.message, message = _ref9$message === void 0 ? messageArgs(this).msg : _ref9$message, chat = _ref9.chat;\n                          _context6.next = 3;\n                          return _regeneratorRuntime.awrap(chat === null || chat === void 0 ? void 0 : chat.flows.requestMessageDeletion(message));\n                        case 3:\n                        case \"end\":\n                          return _context6.stop();\n                      }\n                    }\n                    return _callee6$;\n                  }(), null, this, null, Promise);\n                }\n                return _callee6;\n              }(),\n              condition: function (_ref10) {\n                var _chat$data$canDeleteM;\n                var message = _ref10.message,\n                  subscription = _ref10.subscription,\n                  room = _ref10.room,\n                  chat = _ref10.chat,\n                  user = _ref10.user;\n                if (!subscription) {\n                  return false;\n                }\n                if (isRoomFederated(room)) {\n                  return message.u._id === (user === null || user === void 0 ? void 0 : user._id);\n                }\n                var isLivechatRoom = roomCoordinator.isLivechatRoom(room.t);\n                if (isLivechatRoom) {\n                  return false;\n                }\n                return (_chat$data$canDeleteM = chat === null || chat === void 0 ? void 0 : chat.data.canDeleteMessage(message)) !== null && _chat$data$canDeleteM !== void 0 ? _chat$data$canDeleteM : false;\n              },\n              order: 10,\n              group: 'menu'\n            });\n            MessageAction.addButton({\n              id: 'report-message',\n              icon: 'report',\n              label: 'Report',\n              context: ['message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\n              color: 'alert',\n              type: 'management',\n              action: function (_, _ref11) {\n                var _ref11$message = _ref11.message,\n                  message = _ref11$message === void 0 ? messageArgs(this).msg : _ref11$message;\n                imperativeModal.open({\n                  component: ReportMessageModal,\n                  props: {\n                    message: getMainMessageText(message),\n                    onClose: imperativeModal.close\n                  }\n                });\n              },\n              condition: function (_ref12) {\n                var subscription = _ref12.subscription,\n                  room = _ref12.room,\n                  message = _ref12.message,\n                  user = _ref12.user;\n                var isLivechatRoom = roomCoordinator.isLivechatRoom(room.t);\n                if (isLivechatRoom || message.u._id === (user === null || user === void 0 ? void 0 : user._id)) {\n                  return false;\n                }\n                return Boolean(subscription);\n              },\n              order: 9,\n              group: 'menu'\n            });\n            MessageAction.addButton({\n              id: 'reaction-list',\n              icon: 'emoji',\n              label: 'Reactions',\n              context: ['message', 'message-mobile', 'threads', 'videoconf', 'videoconf-threads'],\n              type: 'interaction',\n              action: function (_, _ref13) {\n                var _ref13$message = _ref13.message;\n                _ref13$message = _ref13$message === void 0 ? messageArgs(this).msg : _ref13$message;\n                var _ref13$message$reacti = _ref13$message.reactions,\n                  reactions = _ref13$message$reacti === void 0 ? {} : _ref13$message$reacti;\n                imperativeModal.open({\n                  component: ReactionListModal,\n                  props: {\n                    reactions: reactions,\n                    onClose: imperativeModal.close\n                  }\n                });\n              },\n              condition: function (_ref14) {\n                var reactions = _ref14.message.reactions;\n                return !!reactions;\n              },\n              order: 9,\n              group: 'menu'\n            });\n          case 9:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n      return _callee7$;\n    }(), null, null, null, Promise);\n  }\n  return _callee7;\n}());","map":{"version":3,"names":["_regeneratorRuntime","module","link","default","v","_objectSpread","isE2EEMessage","isRoomFederated","Meteor","moment","getPermaLink","imperativeModal","roomCoordinator","dispatchToastMessage","messageArgs","router","ForwardMessageModal","ReactionListModal","ReportMessageModal","hasAtLeastOnePermission","hasPermission","ChatRoom","Subscriptions","t","MessageAction","getMainMessageText","message","_newMessage$attachmen","_newMessage$attachmen2","_newMessage$attachmen3","_newMessage$attachmen4","_newMessage$attachmen5","_newMessage$attachmen6","newMessage","msg","attachments","description","title","md","descriptionMd","undefined","startup","_callee7","async","_callee7$","_context7","prev","next","addButton","id","icon","label","context","role","type","action","_","props","_props$message","openRouteLink","name","u","username","getSearchParameters","reply","_id","condition","_ref","subscription","room","user","dmRoom","findOne","sort","join","order","group","disabled","_ref2","_callee","_props$message2","permalink","_callee$","_context","awrap","sent","open","component","onClose","close","stop","Promise","_ref3","_callee2","_chat$composer","_props$message3","chat","autoTranslateOptions","_callee2$","_context2","autoTranslateEnabled","showAutoTranslate","translations","autoTranslateLanguage","composer","quoteMessage","_ref4","_callee3","_props$message4","_callee3$","_context3","navigator","clipboard","writeText","t0","_ref5","_ref6","_callee4","_props$message5","msgText","_callee4$","_context4","_ref7","_callee5","_props$message6","_callee5$","_context5","messageEditing","editMessage","_ref8","settings","canEditMessage","rid","isEditAllowed","Message_AllowEditing","editOwn","blockEditInMinutes","Message_AllowEditing_BlockEditInMinutes","bypassBlockTimeLimit","msgTs","ts","currentTsDiff","diff","color","_callee6","_ref9","_ref9$message","_callee6$","_context6","flows","requestMessageDeletion","_ref10","_chat$data$canDeleteM","isLivechatRoom","data","canDeleteMessage","_ref11","_ref11$message","_ref12","Boolean","_ref13","_ref13$message","_ref13$message$reacti","reactions","_ref14"],"sources":["app/ui-utils/client/lib/messageActionDefault.ts"],"sourcesContent":["import type { IMessage } from '@rocket.chat/core-typings';\nimport { isE2EEMessage, isRoomFederated } from '@rocket.chat/core-typings';\nimport { Meteor } from 'meteor/meteor';\nimport moment from 'moment';\n\nimport { getPermaLink } from '../../../../client/lib/getPermaLink';\nimport { imperativeModal } from '../../../../client/lib/imperativeModal';\nimport { roomCoordinator } from '../../../../client/lib/rooms/roomCoordinator';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\nimport { messageArgs } from '../../../../client/lib/utils/messageArgs';\nimport { router } from '../../../../client/providers/RouterProvider';\nimport ForwardMessageModal from '../../../../client/views/room/modals/ForwardMessageModal/ForwardMessageModal';\nimport ReactionListModal from '../../../../client/views/room/modals/ReactionListModal';\nimport ReportMessageModal from '../../../../client/views/room/modals/ReportMessageModal';\nimport { hasAtLeastOnePermission, hasPermission } from '../../../authorization/client';\nimport { ChatRoom, Subscriptions } from '../../../models/client';\nimport { t } from '../../../utils/lib/i18n';\nimport { MessageAction } from './MessageAction';\n\nconst getMainMessageText = (message: IMessage): IMessage => {\n\tconst newMessage = { ...message };\n\tnewMessage.msg = newMessage.msg || newMessage.attachments?.[0]?.description || newMessage.attachments?.[0]?.title || '';\n\tnewMessage.md = newMessage.md || newMessage.attachments?.[0]?.descriptionMd || undefined;\n\treturn { ...newMessage };\n};\n\nMeteor.startup(async () => {\n\tMessageAction.addButton({\n\t\tid: 'reply-directly',\n\t\ticon: 'reply-directly',\n\t\tlabel: 'Reply_in_direct_message',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated'],\n\t\trole: 'link',\n\t\ttype: 'communication',\n\t\taction(_, props) {\n\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\troomCoordinator.openRouteLink(\n\t\t\t\t'd',\n\t\t\t\t{ name: message.u.username },\n\t\t\t\t{\n\t\t\t\t\t...router.getSearchParameters(),\n\t\t\t\t\treply: message._id,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tcondition({ subscription, room, message, user }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (room.t === 'd' || room.t === 'l') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Check if we already have a DM started with the message user (not ourselves) or we can start one\n\t\t\tif (!!user && user._id !== message.u._id && !hasPermission('create-d')) {\n\t\t\t\tconst dmRoom = ChatRoom.findOne({ _id: [user._id, message.u._id].sort().join('') });\n\t\t\t\tif (!dmRoom || !Subscriptions.findOne({ 'rid': dmRoom._id, 'u._id': user._id })) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\torder: 0,\n\t\tgroup: 'menu',\n\t\tdisabled({ message }) {\n\t\t\treturn isE2EEMessage(message);\n\t\t},\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'forward-message',\n\t\ticon: 'arrow-forward',\n\t\tlabel: 'Forward_message',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\ttype: 'communication',\n\t\tasync action(_, props) {\n\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\tconst permalink = await getPermaLink(message._id);\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: ForwardMessageModal,\n\t\t\t\tprops: {\n\t\t\t\t\tmessage,\n\t\t\t\t\tpermalink,\n\t\t\t\t\tonClose: (): void => {\n\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\torder: 0,\n\t\tgroup: 'message',\n\t\tdisabled({ message }) {\n\t\t\treturn isE2EEMessage(message);\n\t\t},\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'quote-message',\n\t\ticon: 'quote',\n\t\tlabel: 'Quote',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated'],\n\t\tasync action(_, props) {\n\t\t\tconst { message = messageArgs(this).msg, chat, autoTranslateOptions } = props;\n\n\t\t\tif (message && autoTranslateOptions?.autoTranslateEnabled && autoTranslateOptions.showAutoTranslate(message)) {\n\t\t\t\tmessage.msg =\n\t\t\t\t\tmessage.translations && autoTranslateOptions.autoTranslateLanguage\n\t\t\t\t\t\t? message.translations[autoTranslateOptions.autoTranslateLanguage]\n\t\t\t\t\t\t: message.msg;\n\t\t\t}\n\n\t\t\tawait chat?.composer?.quoteMessage(message);\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\torder: -2,\n\t\tgroup: 'message',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'permalink',\n\t\ticon: 'permalink',\n\t\tlabel: 'Copy_link',\n\t\t// classes: 'clipboard',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\n\t\ttype: 'duplication',\n\t\tasync action(_, props) {\n\t\t\ttry {\n\t\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\t\tconst permalink = await getPermaLink(message._id);\n\t\t\t\tawait navigator.clipboard.writeText(permalink);\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Copied') });\n\t\t\t} catch (e) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: e });\n\t\t\t}\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\treturn !!subscription;\n\t\t},\n\t\torder: 5,\n\t\tgroup: 'menu',\n\t\tdisabled({ message }) {\n\t\t\treturn isE2EEMessage(message);\n\t\t},\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'copy',\n\t\ticon: 'copy',\n\t\tlabel: 'Copy_text',\n\t\t// classes: 'clipboard',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated'],\n\t\ttype: 'duplication',\n\t\tasync action(_, props) {\n\t\t\tconst { message = messageArgs(this).msg } = props;\n\t\t\tconst msgText = getMainMessageText(message).msg;\n\t\t\tawait navigator.clipboard.writeText(msgText);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Copied') });\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\treturn !!subscription;\n\t\t},\n\t\torder: 6,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'edit-message',\n\t\ticon: 'edit',\n\t\tlabel: 'Edit',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated'],\n\t\ttype: 'management',\n\t\tasync action(_, props) {\n\t\t\tconst { message = messageArgs(this).msg, chat } = props;\n\t\t\tawait chat?.messageEditing.editMessage(message);\n\t\t},\n\t\tcondition({ message, subscription, settings, room, user }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (isRoomFederated(room)) {\n\t\t\t\treturn message.u._id === user?._id;\n\t\t\t}\n\t\t\tconst canEditMessage = hasAtLeastOnePermission('edit-message', message.rid);\n\t\t\tconst isEditAllowed = settings.Message_AllowEditing;\n\t\t\tconst editOwn = message.u && message.u._id === user?._id;\n\t\t\tif (!(canEditMessage || (isEditAllowed && editOwn))) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst blockEditInMinutes = settings.Message_AllowEditing_BlockEditInMinutes as number;\n\t\t\tconst bypassBlockTimeLimit = hasPermission('bypass-time-limit-edit-and-delete', message.rid);\n\n\t\t\tif (!bypassBlockTimeLimit && blockEditInMinutes) {\n\t\t\t\tlet msgTs;\n\t\t\t\tif (message.ts != null) {\n\t\t\t\t\tmsgTs = moment(message.ts);\n\t\t\t\t}\n\t\t\t\tlet currentTsDiff;\n\t\t\t\tif (msgTs != null) {\n\t\t\t\t\tcurrentTsDiff = moment().diff(msgTs, 'minutes');\n\t\t\t\t}\n\t\t\t\treturn (!!currentTsDiff || currentTsDiff === 0) && currentTsDiff < blockEditInMinutes;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\torder: 8,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'delete-message',\n\t\ticon: 'trash',\n\t\tlabel: 'Delete',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\n\t\tcolor: 'alert',\n\t\ttype: 'management',\n\t\tasync action(this: unknown, _, { message = messageArgs(this).msg, chat }) {\n\t\t\tawait chat?.flows.requestMessageDeletion(message);\n\t\t},\n\t\tcondition({ message, subscription, room, chat, user }) {\n\t\t\tif (!subscription) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (isRoomFederated(room)) {\n\t\t\t\treturn message.u._id === user?._id;\n\t\t\t}\n\t\t\tconst isLivechatRoom = roomCoordinator.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn chat?.data.canDeleteMessage(message) ?? false;\n\t\t},\n\t\torder: 10,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'report-message',\n\t\ticon: 'report',\n\t\tlabel: 'Report',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\n\t\tcolor: 'alert',\n\t\ttype: 'management',\n\t\taction(this: unknown, _, { message = messageArgs(this).msg }) {\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: ReportMessageModal,\n\t\t\t\tprops: {\n\t\t\t\t\tmessage: getMainMessageText(message),\n\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tcondition({ subscription, room, message, user }) {\n\t\t\tconst isLivechatRoom = roomCoordinator.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom || message.u._id === user?._id) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn Boolean(subscription);\n\t\t},\n\t\torder: 9,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'reaction-list',\n\t\ticon: 'emoji',\n\t\tlabel: 'Reactions',\n\t\tcontext: ['message', 'message-mobile', 'threads', 'videoconf', 'videoconf-threads'],\n\t\ttype: 'interaction',\n\t\taction(this: unknown, _, { message: { reactions = {} } = messageArgs(this).msg }) {\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: ReactionListModal,\n\t\t\t\tprops: { reactions, onClose: imperativeModal.close },\n\t\t\t});\n\t\t},\n\t\tcondition({ message: { reactions } }) {\n\t\t\treturn !!reactions;\n\t\t},\n\t\torder: 9,\n\t\tgroup: 'menu',\n\t});\n});\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"24a7cedd21f0529436960335c2ce83944182a68b"}
