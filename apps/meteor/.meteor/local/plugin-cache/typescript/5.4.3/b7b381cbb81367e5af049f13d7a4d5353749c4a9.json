{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/custom-sounds/client/lib/CustomSounds.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"app/custom-sounds/client/lib/CustomSounds.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/custom-sounds/client/lib/CustomSounds.ts","inputSourceMap":{"version":3,"file":"app/custom-sounds/client/lib/CustomSounds.ts","sourceRoot":"","sources":["app/custom-sounds/client/lib/CustomSounds.ts"],"names":[],"mappings":"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","sourcesContent":["import type { ICustomSound } from '@rocket.chat/core-typings';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport { getURL } from '../../../utils/client';\nimport { sdk } from '../../../utils/client/lib/SDKClient';\n\nconst getCustomSoundId = (soundId: ICustomSound['_id']) => `custom-sound-${soundId}`;\nconst getAssetUrl = (asset: string, params?: Record<string, any>) => getURL(asset, params, undefined, true);\n\nconst defaultSounds = [\n\t{ _id: 'chime', name: 'Chime', extension: 'mp3', src: getAssetUrl('sounds/chime.mp3') },\n\t{ _id: 'door', name: 'Door', extension: 'mp3', src: getAssetUrl('sounds/door.mp3') },\n\t{ _id: 'beep', name: 'Beep', extension: 'mp3', src: getAssetUrl('sounds/beep.mp3') },\n\t{ _id: 'chelle', name: 'Chelle', extension: 'mp3', src: getAssetUrl('sounds/chelle.mp3') },\n\t{ _id: 'ding', name: 'Ding', extension: 'mp3', src: getAssetUrl('sounds/ding.mp3') },\n\t{ _id: 'droplet', name: 'Droplet', extension: 'mp3', src: getAssetUrl('sounds/droplet.mp3') },\n\t{ _id: 'highbell', name: 'Highbell', extension: 'mp3', src: getAssetUrl('sounds/highbell.mp3') },\n\t{ _id: 'seasons', name: 'Seasons', extension: 'mp3', src: getAssetUrl('sounds/seasons.mp3') },\n\t{ _id: 'telephone', name: 'Telephone', extension: 'mp3', src: getAssetUrl('sounds/telephone.mp3') },\n\t{ _id: 'outbound-call-ringing', name: 'Outbound Call Ringing', extension: 'mp3', src: getAssetUrl('sounds/outbound-call-ringing.mp3') },\n\t{ _id: 'call-ended', name: 'Call Ended', extension: 'mp3', src: getAssetUrl('sounds/call-ended.mp3') },\n\t{ _id: 'dialtone', name: 'Dialtone', extension: 'mp3', src: getAssetUrl('sounds/dialtone.mp3') },\n\t{ _id: 'ringtone', name: 'Ringtone', extension: 'mp3', src: getAssetUrl('sounds/ringtone.mp3') },\n];\n\nclass CustomSoundsClass {\n\tlist: ReactiveVar<Record<string, ICustomSound>>;\n\n\tinitialFetchDone: boolean;\n\n\tconstructor() {\n\t\tthis.list = new ReactiveVar({});\n\t\tthis.initialFetchDone = false;\n\t\tdefaultSounds.forEach((sound) => this.add(sound));\n\t}\n\n\tadd(sound: ICustomSound) {\n\t\tif (!sound.src) {\n\t\t\tsound.src = this.getURL(sound);\n\t\t}\n\n\t\tconst source = document.createElement('source');\n\t\tsource.src = sound.src;\n\n\t\tconst audio = document.createElement('audio');\n\t\taudio.id = getCustomSoundId(sound._id);\n\t\taudio.preload = 'none';\n\t\taudio.appendChild(source);\n\n\t\tdocument.body.appendChild(audio);\n\n\t\tconst list = this.list.get();\n\t\tlist[sound._id] = sound;\n\t\tthis.list.set(list);\n\t}\n\n\tremove(sound: ICustomSound) {\n\t\tconst list = this.list.get();\n\t\tdelete list[sound._id];\n\t\tthis.list.set(list);\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(sound._id)}`);\n\t\taudio?.remove();\n\t}\n\n\tgetSound(soundId: ICustomSound['_id']) {\n\t\tconst list = this.list.get();\n\t\treturn list[soundId];\n\t}\n\n\tupdate(sound: ICustomSound) {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(sound._id)}`);\n\t\tif (audio) {\n\t\t\tconst list = this.list.get();\n\t\t\tif (!sound.src) {\n\t\t\t\tsound.src = this.getURL(sound);\n\t\t\t}\n\t\t\tlist[sound._id] = sound;\n\t\t\tthis.list.set(list);\n\t\t\tconst sourceEl = audio.querySelector('source');\n\t\t\tif (sourceEl) {\n\t\t\t\tsourceEl.src = sound.src;\n\t\t\t}\n\t\t\taudio.load();\n\t\t} else {\n\t\t\tthis.add(sound);\n\t\t}\n\t}\n\n\tgetURL(sound: ICustomSound) {\n\t\treturn getAssetUrl(`/custom-sounds/${sound._id}.${sound.extension}`, { _dc: sound.random || 0 });\n\t}\n\n\tgetList() {\n\t\tconst list = Object.values(this.list.get());\n\t\treturn list.sort((a, b) => (a.name ?? '').localeCompare(b.name ?? ''));\n\t}\n\n\tplay = async (soundId: ICustomSound['_id'], { volume = 1, loop = false } = {}) => {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(soundId)}`);\n\t\tif (!audio?.play) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio.volume = volume;\n\t\taudio.loop = loop;\n\t\tawait audio.play();\n\n\t\treturn audio;\n\t};\n\n\tpause = (soundId: ICustomSound['_id']) => {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(soundId)}`);\n\t\tif (!audio?.pause) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio.pause();\n\t};\n\n\tstop = (soundId: ICustomSound['_id']) => {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(soundId)}`);\n\t\tif (!audio?.load) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio?.load();\n\t};\n\n\tisPlaying = (soundId: ICustomSound['_id']) => {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(soundId)}`);\n\n\t\treturn audio && audio.duration > 0 && !audio.paused;\n\t};\n\n\tfetchCustomSoundList = async () => {\n\t\tif (this.initialFetchDone) {\n\t\t\treturn;\n\t\t}\n\t\tconst result = await sdk.call('listCustomSounds');\n\t\tfor (const sound of result) {\n\t\t\tthis.add(sound);\n\t\t}\n\t\tthis.initialFetchDone = true;\n\t};\n}\n\nexport const CustomSounds = new CustomSoundsClass();\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/custom-sounds/client/lib/CustomSounds.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/custom-sounds/client/lib/CustomSounds.ts","inputSourceMap":{"version":3,"file":"app/custom-sounds/client/lib/CustomSounds.ts","sourceRoot":"","sources":["app/custom-sounds/client/lib/CustomSounds.ts"],"names":[],"mappings":"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","sourcesContent":["import type { ICustomSound } from '@rocket.chat/core-typings';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport { getURL } from '../../../utils/client';\nimport { sdk } from '../../../utils/client/lib/SDKClient';\n\nconst getCustomSoundId = (soundId: ICustomSound['_id']) => `custom-sound-${soundId}`;\nconst getAssetUrl = (asset: string, params?: Record<string, any>) => getURL(asset, params, undefined, true);\n\nconst defaultSounds = [\n\t{ _id: 'chime', name: 'Chime', extension: 'mp3', src: getAssetUrl('sounds/chime.mp3') },\n\t{ _id: 'door', name: 'Door', extension: 'mp3', src: getAssetUrl('sounds/door.mp3') },\n\t{ _id: 'beep', name: 'Beep', extension: 'mp3', src: getAssetUrl('sounds/beep.mp3') },\n\t{ _id: 'chelle', name: 'Chelle', extension: 'mp3', src: getAssetUrl('sounds/chelle.mp3') },\n\t{ _id: 'ding', name: 'Ding', extension: 'mp3', src: getAssetUrl('sounds/ding.mp3') },\n\t{ _id: 'droplet', name: 'Droplet', extension: 'mp3', src: getAssetUrl('sounds/droplet.mp3') },\n\t{ _id: 'highbell', name: 'Highbell', extension: 'mp3', src: getAssetUrl('sounds/highbell.mp3') },\n\t{ _id: 'seasons', name: 'Seasons', extension: 'mp3', src: getAssetUrl('sounds/seasons.mp3') },\n\t{ _id: 'telephone', name: 'Telephone', extension: 'mp3', src: getAssetUrl('sounds/telephone.mp3') },\n\t{ _id: 'outbound-call-ringing', name: 'Outbound Call Ringing', extension: 'mp3', src: getAssetUrl('sounds/outbound-call-ringing.mp3') },\n\t{ _id: 'call-ended', name: 'Call Ended', extension: 'mp3', src: getAssetUrl('sounds/call-ended.mp3') },\n\t{ _id: 'dialtone', name: 'Dialtone', extension: 'mp3', src: getAssetUrl('sounds/dialtone.mp3') },\n\t{ _id: 'ringtone', name: 'Ringtone', extension: 'mp3', src: getAssetUrl('sounds/ringtone.mp3') },\n];\n\nclass CustomSoundsClass {\n\tlist: ReactiveVar<Record<string, ICustomSound>>;\n\n\tinitialFetchDone: boolean;\n\n\tconstructor() {\n\t\tthis.list = new ReactiveVar({});\n\t\tthis.initialFetchDone = false;\n\t\tdefaultSounds.forEach((sound) => this.add(sound));\n\t}\n\n\tadd(sound: ICustomSound) {\n\t\tif (!sound.src) {\n\t\t\tsound.src = this.getURL(sound);\n\t\t}\n\n\t\tconst source = document.createElement('source');\n\t\tsource.src = sound.src;\n\n\t\tconst audio = document.createElement('audio');\n\t\taudio.id = getCustomSoundId(sound._id);\n\t\taudio.preload = 'none';\n\t\taudio.appendChild(source);\n\n\t\tdocument.body.appendChild(audio);\n\n\t\tconst list = this.list.get();\n\t\tlist[sound._id] = sound;\n\t\tthis.list.set(list);\n\t}\n\n\tremove(sound: ICustomSound) {\n\t\tconst list = this.list.get();\n\t\tdelete list[sound._id];\n\t\tthis.list.set(list);\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(sound._id)}`);\n\t\taudio?.remove();\n\t}\n\n\tgetSound(soundId: ICustomSound['_id']) {\n\t\tconst list = this.list.get();\n\t\treturn list[soundId];\n\t}\n\n\tupdate(sound: ICustomSound) {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(sound._id)}`);\n\t\tif (audio) {\n\t\t\tconst list = this.list.get();\n\t\t\tif (!sound.src) {\n\t\t\t\tsound.src = this.getURL(sound);\n\t\t\t}\n\t\t\tlist[sound._id] = sound;\n\t\t\tthis.list.set(list);\n\t\t\tconst sourceEl = audio.querySelector('source');\n\t\t\tif (sourceEl) {\n\t\t\t\tsourceEl.src = sound.src;\n\t\t\t}\n\t\t\taudio.load();\n\t\t} else {\n\t\t\tthis.add(sound);\n\t\t}\n\t}\n\n\tgetURL(sound: ICustomSound) {\n\t\treturn getAssetUrl(`/custom-sounds/${sound._id}.${sound.extension}`, { _dc: sound.random || 0 });\n\t}\n\n\tgetList() {\n\t\tconst list = Object.values(this.list.get());\n\t\treturn list.sort((a, b) => (a.name ?? '').localeCompare(b.name ?? ''));\n\t}\n\n\tplay = async (soundId: ICustomSound['_id'], { volume = 1, loop = false } = {}) => {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(soundId)}`);\n\t\tif (!audio?.play) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio.volume = volume;\n\t\taudio.loop = loop;\n\t\tawait audio.play();\n\n\t\treturn audio;\n\t};\n\n\tpause = (soundId: ICustomSound['_id']) => {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(soundId)}`);\n\t\tif (!audio?.pause) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio.pause();\n\t};\n\n\tstop = (soundId: ICustomSound['_id']) => {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(soundId)}`);\n\t\tif (!audio?.load) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio?.load();\n\t};\n\n\tisPlaying = (soundId: ICustomSound['_id']) => {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(soundId)}`);\n\n\t\treturn audio && audio.duration > 0 && !audio.paused;\n\t};\n\n\tfetchCustomSoundList = async () => {\n\t\tif (this.initialFetchDone) {\n\t\t\treturn;\n\t\t}\n\t\tconst result = await sdk.call('listCustomSounds');\n\t\tfor (const sound of result) {\n\t\t\tthis.add(sound);\n\t\t}\n\t\tthis.initialFetchDone = true;\n\t};\n}\n\nexport const CustomSounds = new CustomSoundsClass();\n"]}}},"code":"module.export({\n  CustomSounds: () => CustomSounds\n});\nlet ReactiveVar;\nmodule.link(\"meteor/reactive-var\", {\n  ReactiveVar(v) {\n    ReactiveVar = v;\n  }\n}, 0);\nlet getURL;\nmodule.link(\"../../../utils/client\", {\n  getURL(v) {\n    getURL = v;\n  }\n}, 1);\nlet sdk;\nmodule.link(\"../../../utils/client/lib/SDKClient\", {\n  sdk(v) {\n    sdk = v;\n  }\n}, 2);\nconst getCustomSoundId = soundId => \"custom-sound-\".concat(soundId);\nconst getAssetUrl = (asset, params) => getURL(asset, params, undefined, true);\nconst defaultSounds = [{\n  _id: 'chime',\n  name: 'Chime',\n  extension: 'mp3',\n  src: getAssetUrl('sounds/chime.mp3')\n}, {\n  _id: 'door',\n  name: 'Door',\n  extension: 'mp3',\n  src: getAssetUrl('sounds/door.mp3')\n}, {\n  _id: 'beep',\n  name: 'Beep',\n  extension: 'mp3',\n  src: getAssetUrl('sounds/beep.mp3')\n}, {\n  _id: 'chelle',\n  name: 'Chelle',\n  extension: 'mp3',\n  src: getAssetUrl('sounds/chelle.mp3')\n}, {\n  _id: 'ding',\n  name: 'Ding',\n  extension: 'mp3',\n  src: getAssetUrl('sounds/ding.mp3')\n}, {\n  _id: 'droplet',\n  name: 'Droplet',\n  extension: 'mp3',\n  src: getAssetUrl('sounds/droplet.mp3')\n}, {\n  _id: 'highbell',\n  name: 'Highbell',\n  extension: 'mp3',\n  src: getAssetUrl('sounds/highbell.mp3')\n}, {\n  _id: 'seasons',\n  name: 'Seasons',\n  extension: 'mp3',\n  src: getAssetUrl('sounds/seasons.mp3')\n}, {\n  _id: 'telephone',\n  name: 'Telephone',\n  extension: 'mp3',\n  src: getAssetUrl('sounds/telephone.mp3')\n}, {\n  _id: 'outbound-call-ringing',\n  name: 'Outbound Call Ringing',\n  extension: 'mp3',\n  src: getAssetUrl('sounds/outbound-call-ringing.mp3')\n}, {\n  _id: 'call-ended',\n  name: 'Call Ended',\n  extension: 'mp3',\n  src: getAssetUrl('sounds/call-ended.mp3')\n}, {\n  _id: 'dialtone',\n  name: 'Dialtone',\n  extension: 'mp3',\n  src: getAssetUrl('sounds/dialtone.mp3')\n}, {\n  _id: 'ringtone',\n  name: 'Ringtone',\n  extension: 'mp3',\n  src: getAssetUrl('sounds/ringtone.mp3')\n}];\nclass CustomSoundsClass {\n  constructor() {\n    this.list = void 0;\n    this.initialFetchDone = void 0;\n    this.play = async function (soundId) {\n      let {\n        volume = 1,\n        loop = false\n      } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      const audio = document.querySelector(\"#\".concat(getCustomSoundId(soundId)));\n      if (!(audio !== null && audio !== void 0 && audio.play)) {\n        return;\n      }\n      audio.volume = volume;\n      audio.loop = loop;\n      await audio.play();\n      return audio;\n    };\n    this.pause = soundId => {\n      const audio = document.querySelector(\"#\".concat(getCustomSoundId(soundId)));\n      if (!(audio !== null && audio !== void 0 && audio.pause)) {\n        return;\n      }\n      audio.pause();\n    };\n    this.stop = soundId => {\n      const audio = document.querySelector(\"#\".concat(getCustomSoundId(soundId)));\n      if (!(audio !== null && audio !== void 0 && audio.load)) {\n        return;\n      }\n      audio === null || audio === void 0 ? void 0 : audio.load();\n    };\n    this.isPlaying = soundId => {\n      const audio = document.querySelector(\"#\".concat(getCustomSoundId(soundId)));\n      return audio && audio.duration > 0 && !audio.paused;\n    };\n    this.fetchCustomSoundList = async () => {\n      if (this.initialFetchDone) {\n        return;\n      }\n      const result = await sdk.call('listCustomSounds');\n      for (const sound of result) {\n        this.add(sound);\n      }\n      this.initialFetchDone = true;\n    };\n    this.list = new ReactiveVar({});\n    this.initialFetchDone = false;\n    defaultSounds.forEach(sound => this.add(sound));\n  }\n  add(sound) {\n    if (!sound.src) {\n      sound.src = this.getURL(sound);\n    }\n    const source = document.createElement('source');\n    source.src = sound.src;\n    const audio = document.createElement('audio');\n    audio.id = getCustomSoundId(sound._id);\n    audio.preload = 'none';\n    audio.appendChild(source);\n    document.body.appendChild(audio);\n    const list = this.list.get();\n    list[sound._id] = sound;\n    this.list.set(list);\n  }\n  remove(sound) {\n    const list = this.list.get();\n    delete list[sound._id];\n    this.list.set(list);\n    const audio = document.querySelector(\"#\".concat(getCustomSoundId(sound._id)));\n    audio === null || audio === void 0 ? void 0 : audio.remove();\n  }\n  getSound(soundId) {\n    const list = this.list.get();\n    return list[soundId];\n  }\n  update(sound) {\n    const audio = document.querySelector(\"#\".concat(getCustomSoundId(sound._id)));\n    if (audio) {\n      const list = this.list.get();\n      if (!sound.src) {\n        sound.src = this.getURL(sound);\n      }\n      list[sound._id] = sound;\n      this.list.set(list);\n      const sourceEl = audio.querySelector('source');\n      if (sourceEl) {\n        sourceEl.src = sound.src;\n      }\n      audio.load();\n    } else {\n      this.add(sound);\n    }\n  }\n  getURL(sound) {\n    return getAssetUrl(\"/custom-sounds/\".concat(sound._id, \".\").concat(sound.extension), {\n      _dc: sound.random || 0\n    });\n  }\n  getList() {\n    const list = Object.values(this.list.get());\n    return list.sort((a, b) => {\n      var _a$name, _b$name;\n      return ((_a$name = a.name) !== null && _a$name !== void 0 ? _a$name : '').localeCompare((_b$name = b.name) !== null && _b$name !== void 0 ? _b$name : '');\n    });\n  }\n}\nconst CustomSounds = new CustomSoundsClass();","map":{"version":3,"names":["module","export","CustomSounds","ReactiveVar","link","v","getURL","sdk","getCustomSoundId","soundId","concat","getAssetUrl","asset","params","undefined","defaultSounds","_id","name","extension","src","CustomSoundsClass","constructor","list","initialFetchDone","play","volume","loop","arguments","length","audio","document","querySelector","pause","stop","load","isPlaying","duration","paused","fetchCustomSoundList","result","call","sound","add","forEach","source","createElement","id","preload","appendChild","body","get","set","remove","getSound","update","sourceEl","_dc","random","getList","Object","values","sort","a","b","_a$name","_b$name","localeCompare"],"sources":["app/custom-sounds/client/lib/CustomSounds.ts"],"sourcesContent":["import type { ICustomSound } from '@rocket.chat/core-typings';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport { getURL } from '../../../utils/client';\nimport { sdk } from '../../../utils/client/lib/SDKClient';\n\nconst getCustomSoundId = (soundId: ICustomSound['_id']) => `custom-sound-${soundId}`;\nconst getAssetUrl = (asset: string, params?: Record<string, any>) => getURL(asset, params, undefined, true);\n\nconst defaultSounds = [\n\t{ _id: 'chime', name: 'Chime', extension: 'mp3', src: getAssetUrl('sounds/chime.mp3') },\n\t{ _id: 'door', name: 'Door', extension: 'mp3', src: getAssetUrl('sounds/door.mp3') },\n\t{ _id: 'beep', name: 'Beep', extension: 'mp3', src: getAssetUrl('sounds/beep.mp3') },\n\t{ _id: 'chelle', name: 'Chelle', extension: 'mp3', src: getAssetUrl('sounds/chelle.mp3') },\n\t{ _id: 'ding', name: 'Ding', extension: 'mp3', src: getAssetUrl('sounds/ding.mp3') },\n\t{ _id: 'droplet', name: 'Droplet', extension: 'mp3', src: getAssetUrl('sounds/droplet.mp3') },\n\t{ _id: 'highbell', name: 'Highbell', extension: 'mp3', src: getAssetUrl('sounds/highbell.mp3') },\n\t{ _id: 'seasons', name: 'Seasons', extension: 'mp3', src: getAssetUrl('sounds/seasons.mp3') },\n\t{ _id: 'telephone', name: 'Telephone', extension: 'mp3', src: getAssetUrl('sounds/telephone.mp3') },\n\t{ _id: 'outbound-call-ringing', name: 'Outbound Call Ringing', extension: 'mp3', src: getAssetUrl('sounds/outbound-call-ringing.mp3') },\n\t{ _id: 'call-ended', name: 'Call Ended', extension: 'mp3', src: getAssetUrl('sounds/call-ended.mp3') },\n\t{ _id: 'dialtone', name: 'Dialtone', extension: 'mp3', src: getAssetUrl('sounds/dialtone.mp3') },\n\t{ _id: 'ringtone', name: 'Ringtone', extension: 'mp3', src: getAssetUrl('sounds/ringtone.mp3') },\n];\n\nclass CustomSoundsClass {\n\tlist: ReactiveVar<Record<string, ICustomSound>>;\n\n\tinitialFetchDone: boolean;\n\n\tconstructor() {\n\t\tthis.list = new ReactiveVar({});\n\t\tthis.initialFetchDone = false;\n\t\tdefaultSounds.forEach((sound) => this.add(sound));\n\t}\n\n\tadd(sound: ICustomSound) {\n\t\tif (!sound.src) {\n\t\t\tsound.src = this.getURL(sound);\n\t\t}\n\n\t\tconst source = document.createElement('source');\n\t\tsource.src = sound.src;\n\n\t\tconst audio = document.createElement('audio');\n\t\taudio.id = getCustomSoundId(sound._id);\n\t\taudio.preload = 'none';\n\t\taudio.appendChild(source);\n\n\t\tdocument.body.appendChild(audio);\n\n\t\tconst list = this.list.get();\n\t\tlist[sound._id] = sound;\n\t\tthis.list.set(list);\n\t}\n\n\tremove(sound: ICustomSound) {\n\t\tconst list = this.list.get();\n\t\tdelete list[sound._id];\n\t\tthis.list.set(list);\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(sound._id)}`);\n\t\taudio?.remove();\n\t}\n\n\tgetSound(soundId: ICustomSound['_id']) {\n\t\tconst list = this.list.get();\n\t\treturn list[soundId];\n\t}\n\n\tupdate(sound: ICustomSound) {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(sound._id)}`);\n\t\tif (audio) {\n\t\t\tconst list = this.list.get();\n\t\t\tif (!sound.src) {\n\t\t\t\tsound.src = this.getURL(sound);\n\t\t\t}\n\t\t\tlist[sound._id] = sound;\n\t\t\tthis.list.set(list);\n\t\t\tconst sourceEl = audio.querySelector('source');\n\t\t\tif (sourceEl) {\n\t\t\t\tsourceEl.src = sound.src;\n\t\t\t}\n\t\t\taudio.load();\n\t\t} else {\n\t\t\tthis.add(sound);\n\t\t}\n\t}\n\n\tgetURL(sound: ICustomSound) {\n\t\treturn getAssetUrl(`/custom-sounds/${sound._id}.${sound.extension}`, { _dc: sound.random || 0 });\n\t}\n\n\tgetList() {\n\t\tconst list = Object.values(this.list.get());\n\t\treturn list.sort((a, b) => (a.name ?? '').localeCompare(b.name ?? ''));\n\t}\n\n\tplay = async (soundId: ICustomSound['_id'], { volume = 1, loop = false } = {}) => {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(soundId)}`);\n\t\tif (!audio?.play) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio.volume = volume;\n\t\taudio.loop = loop;\n\t\tawait audio.play();\n\n\t\treturn audio;\n\t};\n\n\tpause = (soundId: ICustomSound['_id']) => {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(soundId)}`);\n\t\tif (!audio?.pause) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio.pause();\n\t};\n\n\tstop = (soundId: ICustomSound['_id']) => {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(soundId)}`);\n\t\tif (!audio?.load) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio?.load();\n\t};\n\n\tisPlaying = (soundId: ICustomSound['_id']) => {\n\t\tconst audio = document.querySelector<HTMLAudioElement>(`#${getCustomSoundId(soundId)}`);\n\n\t\treturn audio && audio.duration > 0 && !audio.paused;\n\t};\n\n\tfetchCustomSoundList = async () => {\n\t\tif (this.initialFetchDone) {\n\t\t\treturn;\n\t\t}\n\t\tconst result = await sdk.call('listCustomSounds');\n\t\tfor (const sound of result) {\n\t\t\tthis.add(sound);\n\t\t}\n\t\tthis.initialFetchDone = true;\n\t};\n}\n\nexport const CustomSounds = new CustomSoundsClass();\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"b7b381cbb81367e5af049f13d7a4d5353749c4a9"}
