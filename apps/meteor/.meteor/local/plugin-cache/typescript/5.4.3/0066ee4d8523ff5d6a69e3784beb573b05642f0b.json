{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/ComposerBoxPopupPreview.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/composer/ComposerBoxPopupPreview.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/ComposerBoxPopupPreview.tsx","inputSourceMap":{"version":3,"file":"client/views/room/composer/ComposerBoxPopupPreview.tsx","sourceRoot":"","sources":["client/views/room/composer/ComposerBoxPopupPreview.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, Skeleton, Tile, Option } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useMethod } from '@rocket.chat/ui-contexts';\nimport type { ForwardedRef } from 'react';\nimport React, { forwardRef, useEffect, useImperativeHandle } from 'react';\n\nimport { useChat } from '../contexts/ChatContext';\nimport type { ComposerBoxPopupProps } from './ComposerBoxPopup';\n\ntype ComposerBoxPopupPreviewItem = { _id: string; type: 'image' | 'video' | 'audio' | 'text' | 'other'; value: string; sort?: number };\n\ntype ComposerBoxPopupPreviewProps = ComposerBoxPopupProps<ComposerBoxPopupPreviewItem> & {\n\trid: string;\n\ttmid?: string;\n\tsuspended?: boolean;\n};\n\nconst ComposerBoxPopupPreview = forwardRef(function ComposerBoxPopupPreview(\n\t{ focused, items, rid, tmid, select, suspended }: ComposerBoxPopupPreviewProps,\n\tref: ForwardedRef<\n\t\t| {\n\t\t\t\tgetFilter?: () => unknown;\n\t\t\t\tselect?: (s: ComposerBoxPopupPreviewItem) => void;\n\t\t  }\n\t\t| undefined\n\t>,\n) {\n\tconst id = useUniqueId();\n\tconst chat = useChat();\n\tconst executeSlashCommandPreviewMethod = useMethod('executeSlashCommandPreview');\n\tuseImperativeHandle(\n\t\tref,\n\t\t() => ({\n\t\t\tgetFilter: () => {\n\t\t\t\tconst value = chat?.composer?.substring(0, chat?.composer?.selection.start);\n\t\t\t\tif (!value) {\n\t\t\t\t\tthrow new Error('No value');\n\t\t\t\t}\n\t\t\t\tconst matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n\n\t\t\t\tif (!matches) {\n\t\t\t\t\tthrow new Error('No matches');\n\t\t\t\t}\n\n\t\t\t\tconst cmd = matches[1].replace('/', '').trim().toLowerCase();\n\n\t\t\t\tconst params = matches[2];\n\t\t\t\treturn { cmd, params, msg: { rid, tmid } };\n\t\t\t},\n\t\t\t...(!suspended && {\n\t\t\t\tselect: (item) => {\n\t\t\t\t\tconst value = chat?.composer?.substring(0, chat?.composer?.selection.start);\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\tthrow new Error('No value');\n\t\t\t\t\t}\n\t\t\t\t\tconst matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n\n\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\tthrow new Error('No matches');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cmd = matches[1].replace('/', '').trim().toLowerCase();\n\n\t\t\t\t\tconst params = matches[2];\n\t\t\t\t\t// TODO: Fix this solve the typing issue\n\t\t\t\t\tvoid executeSlashCommandPreviewMethod({ cmd, params, msg: { rid, tmid } }, { id: item._id, type: item.type, value: item.value });\n\t\t\t\t\tchat?.composer?.setText('');\n\t\t\t\t},\n\t\t\t}),\n\t\t}),\n\t\t[chat?.composer, executeSlashCommandPreviewMethod, rid, tmid, suspended],\n\t);\n\n\tconst itemsFlat = items\n\t\t.flatMap((item) => {\n\t\t\tif (item.isSuccess) {\n\t\t\t\treturn item.data;\n\t\t\t}\n\t\t\treturn [];\n\t\t})\n\t\t.sort((a, b) => (('sort' in a && a.sort) || 0) - (('sort' in b && b.sort) || 0));\n\n\tconst isLoading = items.some((item) => item.isLoading && item.fetchStatus !== 'idle');\n\n\tuseEffect(() => {\n\t\tif (focused) {\n\t\t\tconst element = document.getElementById(`popup-item-${focused._id}`);\n\t\t\tif (element) {\n\t\t\t\telement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n\t\t\t}\n\t\t}\n\t}, [focused]);\n\n\tif (suspended) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Box className='message-popup-position' position='relative'>\n\t\t\t<Tile className='message-popup' display='flex' padding={8} role='menu' mbe={8} aria-labelledby={id}>\n\t\t\t\t<Box role='listbox' display='flex' overflow='auto' fontSize={0} width={0} flexGrow={1} aria-busy={isLoading}>\n\t\t\t\t\t{isLoading &&\n\t\t\t\t\t\tArray(5)\n\t\t\t\t\t\t\t.fill(5)\n\t\t\t\t\t\t\t.map((_, index) => <Skeleton variant='rect' h='100px' w='120px' m={2} key={index} />)}\n\n\t\t\t\t\t{!isLoading &&\n\t\t\t\t\t\titemsFlat.map((item) => (\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tonClick={() => select(item)}\n\t\t\t\t\t\t\t\trole='option'\n\t\t\t\t\t\t\t\tclassName={['popup-item', item === focused && 'selected'].filter(Boolean).join(' ')}\n\t\t\t\t\t\t\t\tid={`popup-item-${item._id}`}\n\t\t\t\t\t\t\t\tkey={item._id}\n\t\t\t\t\t\t\t\tbg={item === focused ? 'selected' : undefined}\n\t\t\t\t\t\t\t\tborderColor={item === focused ? 'highlight' : 'transparent'}\n\t\t\t\t\t\t\t\ttabIndex={item === focused ? 0 : -1}\n\t\t\t\t\t\t\t\taria-selected={item === focused}\n\t\t\t\t\t\t\t\tm={2}\n\t\t\t\t\t\t\t\tborderWidth='default'\n\t\t\t\t\t\t\t\tborderRadius='x4'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{item.type === 'image' && <img src={item.value} alt={item._id} />}\n\t\t\t\t\t\t\t\t{item.type === 'audio' && (\n\t\t\t\t\t\t\t\t\t<audio controls>\n\t\t\t\t\t\t\t\t\t\t<track kind='captions' />\n\t\t\t\t\t\t\t\t\t\t<source src={item.value} />\n\t\t\t\t\t\t\t\t\t\tYour browser does not support the audio element.\n\t\t\t\t\t\t\t\t\t</audio>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{item.type === 'video' && (\n\t\t\t\t\t\t\t\t\t<video controls className='inline-video'>\n\t\t\t\t\t\t\t\t\t\t<track kind='captions' />\n\t\t\t\t\t\t\t\t\t\t<source src={item.value} />\n\t\t\t\t\t\t\t\t\t\tYour browser does not support the video element.\n\t\t\t\t\t\t\t\t\t</video>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{item.type === 'text' && <Option>{item.value}</Option>}\n\t\t\t\t\t\t\t\t{item.type === 'other' && <code>{item.value}</code>}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t))}\n\t\t\t\t</Box>\n\t\t\t</Tile>\n\t\t</Box>\n\t);\n});\n\nexport default ComposerBoxPopupPreview;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/ComposerBoxPopupPreview.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/composer/ComposerBoxPopupPreview.tsx","inputSourceMap":{"version":3,"file":"client/views/room/composer/ComposerBoxPopupPreview.tsx","sourceRoot":"","sources":["client/views/room/composer/ComposerBoxPopupPreview.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, Skeleton, Tile, Option } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useMethod } from '@rocket.chat/ui-contexts';\nimport type { ForwardedRef } from 'react';\nimport React, { forwardRef, useEffect, useImperativeHandle } from 'react';\n\nimport { useChat } from '../contexts/ChatContext';\nimport type { ComposerBoxPopupProps } from './ComposerBoxPopup';\n\ntype ComposerBoxPopupPreviewItem = { _id: string; type: 'image' | 'video' | 'audio' | 'text' | 'other'; value: string; sort?: number };\n\ntype ComposerBoxPopupPreviewProps = ComposerBoxPopupProps<ComposerBoxPopupPreviewItem> & {\n\trid: string;\n\ttmid?: string;\n\tsuspended?: boolean;\n};\n\nconst ComposerBoxPopupPreview = forwardRef(function ComposerBoxPopupPreview(\n\t{ focused, items, rid, tmid, select, suspended }: ComposerBoxPopupPreviewProps,\n\tref: ForwardedRef<\n\t\t| {\n\t\t\t\tgetFilter?: () => unknown;\n\t\t\t\tselect?: (s: ComposerBoxPopupPreviewItem) => void;\n\t\t  }\n\t\t| undefined\n\t>,\n) {\n\tconst id = useUniqueId();\n\tconst chat = useChat();\n\tconst executeSlashCommandPreviewMethod = useMethod('executeSlashCommandPreview');\n\tuseImperativeHandle(\n\t\tref,\n\t\t() => ({\n\t\t\tgetFilter: () => {\n\t\t\t\tconst value = chat?.composer?.substring(0, chat?.composer?.selection.start);\n\t\t\t\tif (!value) {\n\t\t\t\t\tthrow new Error('No value');\n\t\t\t\t}\n\t\t\t\tconst matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n\n\t\t\t\tif (!matches) {\n\t\t\t\t\tthrow new Error('No matches');\n\t\t\t\t}\n\n\t\t\t\tconst cmd = matches[1].replace('/', '').trim().toLowerCase();\n\n\t\t\t\tconst params = matches[2];\n\t\t\t\treturn { cmd, params, msg: { rid, tmid } };\n\t\t\t},\n\t\t\t...(!suspended && {\n\t\t\t\tselect: (item) => {\n\t\t\t\t\tconst value = chat?.composer?.substring(0, chat?.composer?.selection.start);\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\tthrow new Error('No value');\n\t\t\t\t\t}\n\t\t\t\t\tconst matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n\n\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\tthrow new Error('No matches');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cmd = matches[1].replace('/', '').trim().toLowerCase();\n\n\t\t\t\t\tconst params = matches[2];\n\t\t\t\t\t// TODO: Fix this solve the typing issue\n\t\t\t\t\tvoid executeSlashCommandPreviewMethod({ cmd, params, msg: { rid, tmid } }, { id: item._id, type: item.type, value: item.value });\n\t\t\t\t\tchat?.composer?.setText('');\n\t\t\t\t},\n\t\t\t}),\n\t\t}),\n\t\t[chat?.composer, executeSlashCommandPreviewMethod, rid, tmid, suspended],\n\t);\n\n\tconst itemsFlat = items\n\t\t.flatMap((item) => {\n\t\t\tif (item.isSuccess) {\n\t\t\t\treturn item.data;\n\t\t\t}\n\t\t\treturn [];\n\t\t})\n\t\t.sort((a, b) => (('sort' in a && a.sort) || 0) - (('sort' in b && b.sort) || 0));\n\n\tconst isLoading = items.some((item) => item.isLoading && item.fetchStatus !== 'idle');\n\n\tuseEffect(() => {\n\t\tif (focused) {\n\t\t\tconst element = document.getElementById(`popup-item-${focused._id}`);\n\t\t\tif (element) {\n\t\t\t\telement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n\t\t\t}\n\t\t}\n\t}, [focused]);\n\n\tif (suspended) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Box className='message-popup-position' position='relative'>\n\t\t\t<Tile className='message-popup' display='flex' padding={8} role='menu' mbe={8} aria-labelledby={id}>\n\t\t\t\t<Box role='listbox' display='flex' overflow='auto' fontSize={0} width={0} flexGrow={1} aria-busy={isLoading}>\n\t\t\t\t\t{isLoading &&\n\t\t\t\t\t\tArray(5)\n\t\t\t\t\t\t\t.fill(5)\n\t\t\t\t\t\t\t.map((_, index) => <Skeleton variant='rect' h='100px' w='120px' m={2} key={index} />)}\n\n\t\t\t\t\t{!isLoading &&\n\t\t\t\t\t\titemsFlat.map((item) => (\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tonClick={() => select(item)}\n\t\t\t\t\t\t\t\trole='option'\n\t\t\t\t\t\t\t\tclassName={['popup-item', item === focused && 'selected'].filter(Boolean).join(' ')}\n\t\t\t\t\t\t\t\tid={`popup-item-${item._id}`}\n\t\t\t\t\t\t\t\tkey={item._id}\n\t\t\t\t\t\t\t\tbg={item === focused ? 'selected' : undefined}\n\t\t\t\t\t\t\t\tborderColor={item === focused ? 'highlight' : 'transparent'}\n\t\t\t\t\t\t\t\ttabIndex={item === focused ? 0 : -1}\n\t\t\t\t\t\t\t\taria-selected={item === focused}\n\t\t\t\t\t\t\t\tm={2}\n\t\t\t\t\t\t\t\tborderWidth='default'\n\t\t\t\t\t\t\t\tborderRadius='x4'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{item.type === 'image' && <img src={item.value} alt={item._id} />}\n\t\t\t\t\t\t\t\t{item.type === 'audio' && (\n\t\t\t\t\t\t\t\t\t<audio controls>\n\t\t\t\t\t\t\t\t\t\t<track kind='captions' />\n\t\t\t\t\t\t\t\t\t\t<source src={item.value} />\n\t\t\t\t\t\t\t\t\t\tYour browser does not support the audio element.\n\t\t\t\t\t\t\t\t\t</audio>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{item.type === 'video' && (\n\t\t\t\t\t\t\t\t\t<video controls className='inline-video'>\n\t\t\t\t\t\t\t\t\t\t<track kind='captions' />\n\t\t\t\t\t\t\t\t\t\t<source src={item.value} />\n\t\t\t\t\t\t\t\t\t\tYour browser does not support the video element.\n\t\t\t\t\t\t\t\t\t</video>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{item.type === 'text' && <Option>{item.value}</Option>}\n\t\t\t\t\t\t\t\t{item.type === 'other' && <code>{item.value}</code>}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t))}\n\t\t\t\t</Box>\n\t\t\t</Tile>\n\t\t</Box>\n\t);\n});\n\nexport default ComposerBoxPopupPreview;\n"]}}},"code":"var _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 0);\nvar Box, Skeleton, Tile, Option;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box: function (v) {\n    Box = v;\n  },\n  Skeleton: function (v) {\n    Skeleton = v;\n  },\n  Tile: function (v) {\n    Tile = v;\n  },\n  Option: function (v) {\n    Option = v;\n  }\n}, 0);\nvar useUniqueId;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useUniqueId: function (v) {\n    useUniqueId = v;\n  }\n}, 1);\nvar useMethod;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useMethod: function (v) {\n    useMethod = v;\n  }\n}, 2);\nvar React, forwardRef, useEffect, useImperativeHandle;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  forwardRef: function (v) {\n    forwardRef = v;\n  },\n  useEffect: function (v) {\n    useEffect = v;\n  },\n  useImperativeHandle: function (v) {\n    useImperativeHandle = v;\n  }\n}, 3);\nvar useChat;\nmodule.link(\"../contexts/ChatContext\", {\n  useChat: function (v) {\n    useChat = v;\n  }\n}, 4);\nvar ComposerBoxPopupPreview = /*#__PURE__*/forwardRef(function () {\n  function ComposerBoxPopupPreview(_ref, ref) {\n    var focused = _ref.focused,\n      items = _ref.items,\n      rid = _ref.rid,\n      tmid = _ref.tmid,\n      select = _ref.select,\n      suspended = _ref.suspended;\n    var id = useUniqueId();\n    var chat = useChat();\n    var executeSlashCommandPreviewMethod = useMethod('executeSlashCommandPreview');\n    useImperativeHandle(ref, function () {\n      return _objectSpread({\n        getFilter: function () {\n          var _chat$composer, _chat$composer2;\n          var value = chat === null || chat === void 0 ? void 0 : (_chat$composer = chat.composer) === null || _chat$composer === void 0 ? void 0 : _chat$composer.substring(0, chat === null || chat === void 0 ? void 0 : (_chat$composer2 = chat.composer) === null || _chat$composer2 === void 0 ? void 0 : _chat$composer2.selection.start);\n          if (!value) {\n            throw new Error('No value');\n          }\n          var matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n          if (!matches) {\n            throw new Error('No matches');\n          }\n          var cmd = matches[1].replace('/', '').trim().toLowerCase();\n          var params = matches[2];\n          return {\n            cmd: cmd,\n            params: params,\n            msg: {\n              rid: rid,\n              tmid: tmid\n            }\n          };\n        }\n      }, !suspended && {\n        select: function (item) {\n          var _chat$composer3, _chat$composer4, _chat$composer5;\n          var value = chat === null || chat === void 0 ? void 0 : (_chat$composer3 = chat.composer) === null || _chat$composer3 === void 0 ? void 0 : _chat$composer3.substring(0, chat === null || chat === void 0 ? void 0 : (_chat$composer4 = chat.composer) === null || _chat$composer4 === void 0 ? void 0 : _chat$composer4.selection.start);\n          if (!value) {\n            throw new Error('No value');\n          }\n          var matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n          if (!matches) {\n            throw new Error('No matches');\n          }\n          var cmd = matches[1].replace('/', '').trim().toLowerCase();\n          var params = matches[2];\n          // TODO: Fix this solve the typing issue\n          void executeSlashCommandPreviewMethod({\n            cmd: cmd,\n            params: params,\n            msg: {\n              rid: rid,\n              tmid: tmid\n            }\n          }, {\n            id: item._id,\n            type: item.type,\n            value: item.value\n          });\n          chat === null || chat === void 0 ? void 0 : (_chat$composer5 = chat.composer) === null || _chat$composer5 === void 0 ? void 0 : _chat$composer5.setText('');\n        }\n      });\n    }, [chat === null || chat === void 0 ? void 0 : chat.composer, executeSlashCommandPreviewMethod, rid, tmid, suspended]);\n    var itemsFlat = items.flatMap(function (item) {\n      if (item.isSuccess) {\n        return item.data;\n      }\n      return [];\n    }).sort(function (a, b) {\n      return ('sort' in a && a.sort || 0) - ('sort' in b && b.sort || 0);\n    });\n    var isLoading = items.some(function (item) {\n      return item.isLoading && item.fetchStatus !== 'idle';\n    });\n    useEffect(function () {\n      if (focused) {\n        var element = document.getElementById(\"popup-item-\" + focused._id);\n        if (element) {\n          element.scrollIntoView({\n            behavior: 'smooth',\n            block: 'nearest'\n          });\n        }\n      }\n    }, [focused]);\n    if (suspended) {\n      return null;\n    }\n    return /*#__PURE__*/React.createElement(Box, {\n      className: \"message-popup-position\",\n      position: \"relative\"\n    }, /*#__PURE__*/React.createElement(Tile, {\n      className: \"message-popup\",\n      display: \"flex\",\n      padding: 8,\n      role: \"menu\",\n      mbe: 8,\n      \"aria-labelledby\": id\n    }, /*#__PURE__*/React.createElement(Box, {\n      role: \"listbox\",\n      display: \"flex\",\n      overflow: \"auto\",\n      fontSize: 0,\n      width: 0,\n      flexGrow: 1,\n      \"aria-busy\": isLoading\n    }, isLoading && Array(5).fill(5).map(function (_, index) {\n      return /*#__PURE__*/React.createElement(Skeleton, {\n        variant: \"rect\",\n        h: \"100px\",\n        w: \"120px\",\n        m: 2,\n        key: index\n      });\n    }), !isLoading && itemsFlat.map(function (item) {\n      return /*#__PURE__*/React.createElement(Box, {\n        onClick: function () {\n          return select(item);\n        },\n        role: \"option\",\n        className: ['popup-item', item === focused && 'selected'].filter(Boolean).join(' '),\n        id: \"popup-item-\" + item._id,\n        key: item._id,\n        bg: item === focused ? 'selected' : undefined,\n        borderColor: item === focused ? 'highlight' : 'transparent',\n        tabIndex: item === focused ? 0 : -1,\n        \"aria-selected\": item === focused,\n        m: 2,\n        borderWidth: \"default\",\n        borderRadius: \"x4\"\n      }, item.type === 'image' && /*#__PURE__*/React.createElement(\"img\", {\n        src: item.value,\n        alt: item._id\n      }), item.type === 'audio' && /*#__PURE__*/React.createElement(\"audio\", {\n        controls: true\n      }, /*#__PURE__*/React.createElement(\"track\", {\n        kind: \"captions\"\n      }), /*#__PURE__*/React.createElement(\"source\", {\n        src: item.value\n      }), \"Your browser does not support the audio element.\"), item.type === 'video' && /*#__PURE__*/React.createElement(\"video\", {\n        controls: true,\n        className: \"inline-video\"\n      }, /*#__PURE__*/React.createElement(\"track\", {\n        kind: \"captions\"\n      }), /*#__PURE__*/React.createElement(\"source\", {\n        src: item.value\n      }), \"Your browser does not support the video element.\"), item.type === 'text' && /*#__PURE__*/React.createElement(Option, null, item.value), item.type === 'other' && /*#__PURE__*/React.createElement(\"code\", null, item.value));\n    }))));\n  }\n  return ComposerBoxPopupPreview;\n}());\nmodule.exportDefault(ComposerBoxPopupPreview);","map":{"version":3,"names":["_objectSpread","module","link","default","v","Box","Skeleton","Tile","Option","useUniqueId","useMethod","React","forwardRef","useEffect","useImperativeHandle","useChat","ComposerBoxPopupPreview","_ref","ref","focused","items","rid","tmid","select","suspended","id","chat","executeSlashCommandPreviewMethod","getFilter","_chat$composer","_chat$composer2","value","composer","substring","selection","start","Error","matches","match","cmd","replace","trim","toLowerCase","params","msg","item","_chat$composer3","_chat$composer4","_chat$composer5","_id","type","setText","itemsFlat","flatMap","isSuccess","data","sort","a","b","isLoading","some","fetchStatus","element","document","getElementById","scrollIntoView","behavior","block","createElement","className","position","display","padding","role","mbe","overflow","fontSize","width","flexGrow","Array","fill","map","_","index","variant","h","w","m","key","onClick","filter","Boolean","join","bg","undefined","borderColor","tabIndex","borderWidth","borderRadius","src","alt","controls","kind","exportDefault"],"sources":["client/views/room/composer/ComposerBoxPopupPreview.tsx"],"sourcesContent":["import { Box, Skeleton, Tile, Option } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useMethod } from '@rocket.chat/ui-contexts';\nimport type { ForwardedRef } from 'react';\nimport React, { forwardRef, useEffect, useImperativeHandle } from 'react';\n\nimport { useChat } from '../contexts/ChatContext';\nimport type { ComposerBoxPopupProps } from './ComposerBoxPopup';\n\ntype ComposerBoxPopupPreviewItem = { _id: string; type: 'image' | 'video' | 'audio' | 'text' | 'other'; value: string; sort?: number };\n\ntype ComposerBoxPopupPreviewProps = ComposerBoxPopupProps<ComposerBoxPopupPreviewItem> & {\n\trid: string;\n\ttmid?: string;\n\tsuspended?: boolean;\n};\n\nconst ComposerBoxPopupPreview = forwardRef(function ComposerBoxPopupPreview(\n\t{ focused, items, rid, tmid, select, suspended }: ComposerBoxPopupPreviewProps,\n\tref: ForwardedRef<\n\t\t| {\n\t\t\t\tgetFilter?: () => unknown;\n\t\t\t\tselect?: (s: ComposerBoxPopupPreviewItem) => void;\n\t\t  }\n\t\t| undefined\n\t>,\n) {\n\tconst id = useUniqueId();\n\tconst chat = useChat();\n\tconst executeSlashCommandPreviewMethod = useMethod('executeSlashCommandPreview');\n\tuseImperativeHandle(\n\t\tref,\n\t\t() => ({\n\t\t\tgetFilter: () => {\n\t\t\t\tconst value = chat?.composer?.substring(0, chat?.composer?.selection.start);\n\t\t\t\tif (!value) {\n\t\t\t\t\tthrow new Error('No value');\n\t\t\t\t}\n\t\t\t\tconst matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n\n\t\t\t\tif (!matches) {\n\t\t\t\t\tthrow new Error('No matches');\n\t\t\t\t}\n\n\t\t\t\tconst cmd = matches[1].replace('/', '').trim().toLowerCase();\n\n\t\t\t\tconst params = matches[2];\n\t\t\t\treturn { cmd, params, msg: { rid, tmid } };\n\t\t\t},\n\t\t\t...(!suspended && {\n\t\t\t\tselect: (item) => {\n\t\t\t\t\tconst value = chat?.composer?.substring(0, chat?.composer?.selection.start);\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\tthrow new Error('No value');\n\t\t\t\t\t}\n\t\t\t\t\tconst matches = value.match(/(\\/[\\w\\d\\S]+ )([^]*)$/);\n\n\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\tthrow new Error('No matches');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cmd = matches[1].replace('/', '').trim().toLowerCase();\n\n\t\t\t\t\tconst params = matches[2];\n\t\t\t\t\t// TODO: Fix this solve the typing issue\n\t\t\t\t\tvoid executeSlashCommandPreviewMethod({ cmd, params, msg: { rid, tmid } }, { id: item._id, type: item.type, value: item.value });\n\t\t\t\t\tchat?.composer?.setText('');\n\t\t\t\t},\n\t\t\t}),\n\t\t}),\n\t\t[chat?.composer, executeSlashCommandPreviewMethod, rid, tmid, suspended],\n\t);\n\n\tconst itemsFlat = items\n\t\t.flatMap((item) => {\n\t\t\tif (item.isSuccess) {\n\t\t\t\treturn item.data;\n\t\t\t}\n\t\t\treturn [];\n\t\t})\n\t\t.sort((a, b) => (('sort' in a && a.sort) || 0) - (('sort' in b && b.sort) || 0));\n\n\tconst isLoading = items.some((item) => item.isLoading && item.fetchStatus !== 'idle');\n\n\tuseEffect(() => {\n\t\tif (focused) {\n\t\t\tconst element = document.getElementById(`popup-item-${focused._id}`);\n\t\t\tif (element) {\n\t\t\t\telement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n\t\t\t}\n\t\t}\n\t}, [focused]);\n\n\tif (suspended) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Box className='message-popup-position' position='relative'>\n\t\t\t<Tile className='message-popup' display='flex' padding={8} role='menu' mbe={8} aria-labelledby={id}>\n\t\t\t\t<Box role='listbox' display='flex' overflow='auto' fontSize={0} width={0} flexGrow={1} aria-busy={isLoading}>\n\t\t\t\t\t{isLoading &&\n\t\t\t\t\t\tArray(5)\n\t\t\t\t\t\t\t.fill(5)\n\t\t\t\t\t\t\t.map((_, index) => <Skeleton variant='rect' h='100px' w='120px' m={2} key={index} />)}\n\n\t\t\t\t\t{!isLoading &&\n\t\t\t\t\t\titemsFlat.map((item) => (\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tonClick={() => select(item)}\n\t\t\t\t\t\t\t\trole='option'\n\t\t\t\t\t\t\t\tclassName={['popup-item', item === focused && 'selected'].filter(Boolean).join(' ')}\n\t\t\t\t\t\t\t\tid={`popup-item-${item._id}`}\n\t\t\t\t\t\t\t\tkey={item._id}\n\t\t\t\t\t\t\t\tbg={item === focused ? 'selected' : undefined}\n\t\t\t\t\t\t\t\tborderColor={item === focused ? 'highlight' : 'transparent'}\n\t\t\t\t\t\t\t\ttabIndex={item === focused ? 0 : -1}\n\t\t\t\t\t\t\t\taria-selected={item === focused}\n\t\t\t\t\t\t\t\tm={2}\n\t\t\t\t\t\t\t\tborderWidth='default'\n\t\t\t\t\t\t\t\tborderRadius='x4'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{item.type === 'image' && <img src={item.value} alt={item._id} />}\n\t\t\t\t\t\t\t\t{item.type === 'audio' && (\n\t\t\t\t\t\t\t\t\t<audio controls>\n\t\t\t\t\t\t\t\t\t\t<track kind='captions' />\n\t\t\t\t\t\t\t\t\t\t<source src={item.value} />\n\t\t\t\t\t\t\t\t\t\tYour browser does not support the audio element.\n\t\t\t\t\t\t\t\t\t</audio>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{item.type === 'video' && (\n\t\t\t\t\t\t\t\t\t<video controls className='inline-video'>\n\t\t\t\t\t\t\t\t\t\t<track kind='captions' />\n\t\t\t\t\t\t\t\t\t\t<source src={item.value} />\n\t\t\t\t\t\t\t\t\t\tYour browser does not support the video element.\n\t\t\t\t\t\t\t\t\t</video>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{item.type === 'text' && <Option>{item.value}</Option>}\n\t\t\t\t\t\t\t\t{item.type === 'other' && <code>{item.value}</code>}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t))}\n\t\t\t\t</Box>\n\t\t\t</Tile>\n\t\t</Box>\n\t);\n});\n\nexport default ComposerBoxPopupPreview;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"0066ee4d8523ff5d6a69e3784beb573b05642f0b"}
