{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/hooks/roomActions/useThreadRoomAction.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/hooks/roomActions/useThreadRoomAction.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/hooks/roomActions/useThreadRoomAction.tsx","inputSourceMap":{"version":3,"file":"client/hooks/roomActions/useThreadRoomAction.tsx","sourceRoot":"","sources":["client/hooks/roomActions/useThreadRoomAction.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { BadgeProps } from '@rocket.chat/fuselage';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport React, { lazy, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { HeaderToolbarAction, HeaderToolbarActionBadge } from '../../components/Header';\nimport { useRoomSubscription } from '../../views/room/contexts/RoomContext';\nimport type { RoomToolboxActionConfig } from '../../views/room/contexts/RoomToolboxContext';\n\nconst getVariant = (tunreadUser: number, tunreadGroup: number): BadgeProps['variant'] => {\n\tif (tunreadUser > 0) {\n\t\treturn 'danger';\n\t}\n\n\tif (tunreadGroup > 0) {\n\t\treturn 'warning';\n\t}\n\n\treturn 'primary';\n};\n\nconst Threads = lazy(() => import('../../views/room/contextualBar/Threads'));\n\nexport const useThreadRoomAction = () => {\n\tconst enabled = useSetting('Threads_enabled', false);\n\tconst subscription = useRoomSubscription();\n\n\tconst tunread = subscription?.tunread?.length ?? 0;\n\tconst tunreadUser = subscription?.tunreadUser?.length ?? 0;\n\tconst tunreadGroup = subscription?.tunreadGroup?.length ?? 0;\n\tconst unread = tunread > 99 ? '99+' : tunread;\n\tconst variant = getVariant(tunreadUser, tunreadGroup);\n\tconst { t } = useTranslation();\n\n\treturn useMemo((): RoomToolboxActionConfig | undefined => {\n\t\tif (!enabled) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tid: 'thread',\n\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\tfull: true,\n\t\t\ttitle: 'Threads',\n\t\t\ticon: 'thread',\n\t\t\ttabComponent: Threads,\n\t\t\torder: 2,\n\t\t\trenderToolboxItem: ({ id, className, index, icon, title, toolbox: { tab }, action, disabled, tooltip }) => (\n\t\t\t\t<HeaderToolbarAction\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tindex={index}\n\t\t\t\t\tid={id}\n\t\t\t\t\ticon={icon}\n\t\t\t\t\ttitle={t(title)}\n\t\t\t\t\tpressed={id === tab?.id}\n\t\t\t\t\taction={action}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\ttooltip={tooltip}\n\t\t\t\t>\n\t\t\t\t\t{!!unread && <HeaderToolbarActionBadge variant={variant}>{unread}</HeaderToolbarActionBadge>}\n\t\t\t\t</HeaderToolbarAction>\n\t\t\t),\n\t\t};\n\t}, [enabled, t, unread, variant]);\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/hooks/roomActions/useThreadRoomAction.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/hooks/roomActions/useThreadRoomAction.tsx","inputSourceMap":{"version":3,"file":"client/hooks/roomActions/useThreadRoomAction.tsx","sourceRoot":"","sources":["client/hooks/roomActions/useThreadRoomAction.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { BadgeProps } from '@rocket.chat/fuselage';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport React, { lazy, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { HeaderToolbarAction, HeaderToolbarActionBadge } from '../../components/Header';\nimport { useRoomSubscription } from '../../views/room/contexts/RoomContext';\nimport type { RoomToolboxActionConfig } from '../../views/room/contexts/RoomToolboxContext';\n\nconst getVariant = (tunreadUser: number, tunreadGroup: number): BadgeProps['variant'] => {\n\tif (tunreadUser > 0) {\n\t\treturn 'danger';\n\t}\n\n\tif (tunreadGroup > 0) {\n\t\treturn 'warning';\n\t}\n\n\treturn 'primary';\n};\n\nconst Threads = lazy(() => import('../../views/room/contextualBar/Threads'));\n\nexport const useThreadRoomAction = () => {\n\tconst enabled = useSetting('Threads_enabled', false);\n\tconst subscription = useRoomSubscription();\n\n\tconst tunread = subscription?.tunread?.length ?? 0;\n\tconst tunreadUser = subscription?.tunreadUser?.length ?? 0;\n\tconst tunreadGroup = subscription?.tunreadGroup?.length ?? 0;\n\tconst unread = tunread > 99 ? '99+' : tunread;\n\tconst variant = getVariant(tunreadUser, tunreadGroup);\n\tconst { t } = useTranslation();\n\n\treturn useMemo((): RoomToolboxActionConfig | undefined => {\n\t\tif (!enabled) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tid: 'thread',\n\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\tfull: true,\n\t\t\ttitle: 'Threads',\n\t\t\ticon: 'thread',\n\t\t\ttabComponent: Threads,\n\t\t\torder: 2,\n\t\t\trenderToolboxItem: ({ id, className, index, icon, title, toolbox: { tab }, action, disabled, tooltip }) => (\n\t\t\t\t<HeaderToolbarAction\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tindex={index}\n\t\t\t\t\tid={id}\n\t\t\t\t\ticon={icon}\n\t\t\t\t\ttitle={t(title)}\n\t\t\t\t\tpressed={id === tab?.id}\n\t\t\t\t\taction={action}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\ttooltip={tooltip}\n\t\t\t\t>\n\t\t\t\t\t{!!unread && <HeaderToolbarActionBadge variant={variant}>{unread}</HeaderToolbarActionBadge>}\n\t\t\t\t</HeaderToolbarAction>\n\t\t\t),\n\t\t};\n\t}, [enabled, t, unread, variant]);\n};\n"]}}},"code":"module.export({\n  useThreadRoomAction: function () {\n    return useThreadRoomAction;\n  }\n});\nvar useSetting;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useSetting: function (v) {\n    useSetting = v;\n  }\n}, 0);\nvar React, lazy, useMemo;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  lazy: function (v) {\n    lazy = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  }\n}, 1);\nvar useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 2);\nvar HeaderToolbarAction, HeaderToolbarActionBadge;\nmodule.link(\"../../components/Header\", {\n  HeaderToolbarAction: function (v) {\n    HeaderToolbarAction = v;\n  },\n  HeaderToolbarActionBadge: function (v) {\n    HeaderToolbarActionBadge = v;\n  }\n}, 3);\nvar useRoomSubscription;\nmodule.link(\"../../views/room/contexts/RoomContext\", {\n  useRoomSubscription: function (v) {\n    useRoomSubscription = v;\n  }\n}, 4);\nvar getVariant = function (tunreadUser, tunreadGroup) {\n  if (tunreadUser > 0) {\n    return 'danger';\n  }\n  if (tunreadGroup > 0) {\n    return 'warning';\n  }\n  return 'primary';\n};\nvar Threads = /*#__PURE__*/lazy(function () {\n  return module.dynamicImport('../../views/room/contextualBar/Threads');\n});\nvar useThreadRoomAction = function () {\n  var _subscription$tunread, _subscription$tunread2, _subscription$tunread3, _subscription$tunread4, _subscription$tunread5, _subscription$tunread6;\n  var enabled = useSetting('Threads_enabled', false);\n  var subscription = useRoomSubscription();\n  var tunread = (_subscription$tunread = subscription === null || subscription === void 0 ? void 0 : (_subscription$tunread2 = subscription.tunread) === null || _subscription$tunread2 === void 0 ? void 0 : _subscription$tunread2.length) !== null && _subscription$tunread !== void 0 ? _subscription$tunread : 0;\n  var tunreadUser = (_subscription$tunread3 = subscription === null || subscription === void 0 ? void 0 : (_subscription$tunread4 = subscription.tunreadUser) === null || _subscription$tunread4 === void 0 ? void 0 : _subscription$tunread4.length) !== null && _subscription$tunread3 !== void 0 ? _subscription$tunread3 : 0;\n  var tunreadGroup = (_subscription$tunread5 = subscription === null || subscription === void 0 ? void 0 : (_subscription$tunread6 = subscription.tunreadGroup) === null || _subscription$tunread6 === void 0 ? void 0 : _subscription$tunread6.length) !== null && _subscription$tunread5 !== void 0 ? _subscription$tunread5 : 0;\n  var unread = tunread > 99 ? '99+' : tunread;\n  var variant = getVariant(tunreadUser, tunreadGroup);\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  return useMemo(function () {\n    if (!enabled) {\n      return undefined;\n    }\n    return {\n      id: 'thread',\n      groups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n      full: true,\n      title: 'Threads',\n      icon: 'thread',\n      tabComponent: Threads,\n      order: 2,\n      renderToolboxItem: function (_ref) {\n        var id = _ref.id,\n          className = _ref.className,\n          index = _ref.index,\n          icon = _ref.icon,\n          title = _ref.title,\n          tab = _ref.toolbox.tab,\n          action = _ref.action,\n          disabled = _ref.disabled,\n          tooltip = _ref.tooltip;\n        return /*#__PURE__*/React.createElement(HeaderToolbarAction, {\n          key: id,\n          className: className,\n          index: index,\n          id: id,\n          icon: icon,\n          title: t(title),\n          pressed: id === (tab === null || tab === void 0 ? void 0 : tab.id),\n          action: action,\n          disabled: disabled,\n          tooltip: tooltip\n        }, !!unread && /*#__PURE__*/React.createElement(HeaderToolbarActionBadge, {\n          variant: variant\n        }, unread));\n      }\n    };\n  }, [enabled, t, unread, variant]);\n};","map":{"version":3,"names":["module","export","useThreadRoomAction","useSetting","link","v","React","lazy","useMemo","default","useTranslation","HeaderToolbarAction","HeaderToolbarActionBadge","useRoomSubscription","getVariant","tunreadUser","tunreadGroup","Threads","dynamicImport","_subscription$tunread","_subscription$tunread2","_subscription$tunread3","_subscription$tunread4","_subscription$tunread5","_subscription$tunread6","enabled","subscription","tunread","length","unread","variant","_useTranslation","t","undefined","id","groups","full","title","icon","tabComponent","order","renderToolboxItem","_ref","className","index","tab","toolbox","action","disabled","tooltip","createElement","key","pressed"],"sources":["client/hooks/roomActions/useThreadRoomAction.tsx"],"sourcesContent":["import type { BadgeProps } from '@rocket.chat/fuselage';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport React, { lazy, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { HeaderToolbarAction, HeaderToolbarActionBadge } from '../../components/Header';\nimport { useRoomSubscription } from '../../views/room/contexts/RoomContext';\nimport type { RoomToolboxActionConfig } from '../../views/room/contexts/RoomToolboxContext';\n\nconst getVariant = (tunreadUser: number, tunreadGroup: number): BadgeProps['variant'] => {\n\tif (tunreadUser > 0) {\n\t\treturn 'danger';\n\t}\n\n\tif (tunreadGroup > 0) {\n\t\treturn 'warning';\n\t}\n\n\treturn 'primary';\n};\n\nconst Threads = lazy(() => import('../../views/room/contextualBar/Threads'));\n\nexport const useThreadRoomAction = () => {\n\tconst enabled = useSetting('Threads_enabled', false);\n\tconst subscription = useRoomSubscription();\n\n\tconst tunread = subscription?.tunread?.length ?? 0;\n\tconst tunreadUser = subscription?.tunreadUser?.length ?? 0;\n\tconst tunreadGroup = subscription?.tunreadGroup?.length ?? 0;\n\tconst unread = tunread > 99 ? '99+' : tunread;\n\tconst variant = getVariant(tunreadUser, tunreadGroup);\n\tconst { t } = useTranslation();\n\n\treturn useMemo((): RoomToolboxActionConfig | undefined => {\n\t\tif (!enabled) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tid: 'thread',\n\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\tfull: true,\n\t\t\ttitle: 'Threads',\n\t\t\ticon: 'thread',\n\t\t\ttabComponent: Threads,\n\t\t\torder: 2,\n\t\t\trenderToolboxItem: ({ id, className, index, icon, title, toolbox: { tab }, action, disabled, tooltip }) => (\n\t\t\t\t<HeaderToolbarAction\n\t\t\t\t\tkey={id}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tindex={index}\n\t\t\t\t\tid={id}\n\t\t\t\t\ticon={icon}\n\t\t\t\t\ttitle={t(title)}\n\t\t\t\t\tpressed={id === tab?.id}\n\t\t\t\t\taction={action}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\ttooltip={tooltip}\n\t\t\t\t>\n\t\t\t\t\t{!!unread && <HeaderToolbarActionBadge variant={variant}>{unread}</HeaderToolbarActionBadge>}\n\t\t\t\t</HeaderToolbarAction>\n\t\t\t),\n\t\t};\n\t}, [enabled, t, unread, variant]);\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"68b10780800ed434578c15d76060cf3bf52430e5"}
