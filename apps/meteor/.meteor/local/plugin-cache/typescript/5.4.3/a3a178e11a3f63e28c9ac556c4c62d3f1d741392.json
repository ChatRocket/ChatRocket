{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/import/ImportHistoryPage.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/admin/import/ImportHistoryPage.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/import/ImportHistoryPage.tsx","inputSourceMap":{"version":3,"file":"client/views/admin/import/ImportHistoryPage.tsx","sourceRoot":"","sources":["client/views/admin/import/ImportHistoryPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Button, ButtonGroup, Table, TableHead, TableCell, TableRow, TableBody } from '@rocket.chat/fuselage';\nimport { useMediaQuery } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useEndpoint, useTranslation, useRouter } from '@rocket.chat/ui-contexts';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport React, { useMemo } from 'react';\n\nimport { ProgressStep } from '../../../../app/importer/lib/ImporterProgressStep';\nimport { Page, PageHeader, PageScrollableContentWithShadow } from '../../../components/Page';\nimport ImportOperationSummary from './ImportOperationSummary';\nimport ImportOperationSummarySkeleton from './ImportOperationSummarySkeleton';\n\n// TODO: review inner logic\nfunction ImportHistoryPage() {\n\tconst queryClient = useQueryClient();\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst downloadPendingFiles = useEndpoint('POST', '/v1/downloadPendingFiles');\n\tconst downloadPendingAvatars = useEndpoint('POST', '/v1/downloadPendingAvatars');\n\n\tconst getCurrentImportOperation = useEndpoint('GET', '/v1/getCurrentImportOperation');\n\tconst getLatestImportOperations = useEndpoint('GET', '/v1/getLatestImportOperations');\n\n\tconst router = useRouter();\n\n\tconst currentOperation = useQuery(\n\t\t['ImportHistoryPage', 'currentOperation'],\n\t\tasync () => {\n\t\t\tconst { operation = { valid: false } } = await getCurrentImportOperation();\n\t\t\treturn operation;\n\t\t},\n\t\t{\n\t\t\tonError: () => dispatchToastMessage({ type: 'error', message: t('Failed_To_Load_Import_Operation') }),\n\t\t},\n\t);\n\n\tconst latestOperations = useQuery(\n\t\t['ImportHistoryPage', 'latestOperations'],\n\t\tasync () => {\n\t\t\tconst operations = await getLatestImportOperations();\n\t\t\treturn operations;\n\t\t},\n\t\t{\n\t\t\tonError: () => dispatchToastMessage({ type: 'error', message: t('Failed_To_Load_Import_History') }),\n\t\t},\n\t);\n\n\tconst isLoading = currentOperation.isLoading || latestOperations.isLoading;\n\n\tconst hasAnySuccessfulImport = useMemo(() => {\n\t\treturn latestOperations.isSuccess && latestOperations.data.some(({ status }) => status === ProgressStep.DONE);\n\t}, [latestOperations.isSuccess, latestOperations.data]);\n\n\tconst handleNewImportClick = () => {\n\t\trouter.navigate('/admin/import/new');\n\t};\n\n\tconst downloadPendingFilesResult = useMutation({\n\t\tmutationFn: async () => downloadPendingFiles(),\n\t\tonError: (error) => {\n\t\t\tconsole.error(error);\n\t\t\tdispatchToastMessage({ type: 'error', message: t('Failed_To_Download_Files') });\n\t\t},\n\t\tonSuccess: ({ count }) => {\n\t\t\tqueryClient.invalidateQueries(['ImportHistoryPage', 'currentOperation']);\n\t\t\tqueryClient.invalidateQueries(['ImportHistoryPage', 'latestOperations']);\n\t\t\tif (!count) {\n\t\t\t\tdispatchToastMessage({ type: 'info', message: t('No_files_left_to_download') });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatchToastMessage({ type: 'info', message: t('File_Downloads_Started') });\n\t\t\trouter.navigate('/admin/import/progress');\n\t\t},\n\t});\n\n\tconst downloadPendingAvatarsResult = useMutation({\n\t\tmutationFn: async () => downloadPendingAvatars(),\n\t\tonError: (error) => {\n\t\t\tconsole.error(error);\n\t\t\tdispatchToastMessage({ type: 'error', message: t('Failed_To_Download_Files') });\n\t\t},\n\t\tonSuccess: ({ count }) => {\n\t\t\tqueryClient.invalidateQueries(['ImportHistoryPage', 'currentOperation']);\n\t\t\tqueryClient.invalidateQueries(['ImportHistoryPage', 'latestOperations']);\n\t\t\tif (!count) {\n\t\t\t\tdispatchToastMessage({ type: 'info', message: t('No_files_left_to_download') });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatchToastMessage({ type: 'info', message: t('File_Downloads_Started') });\n\t\t\trouter.navigate('/admin/import/progress');\n\t\t},\n\t});\n\n\tconst small = useMediaQuery('(max-width: 768px)');\n\n\treturn (\n\t\t<Page>\n\t\t\t<PageHeader title={t('Import')}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button primary disabled={isLoading} onClick={handleNewImportClick}>\n\t\t\t\t\t\t{t('Import_New_File')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t{hasAnySuccessfulImport && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tloading={downloadPendingFilesResult.isLoading}\n\t\t\t\t\t\t\tdisabled={downloadPendingAvatarsResult.isLoading}\n\t\t\t\t\t\t\tonClick={() => downloadPendingFilesResult.mutate()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Download_Pending_Files')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t{hasAnySuccessfulImport && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tloading={downloadPendingAvatarsResult.isLoading}\n\t\t\t\t\t\t\tdisabled={downloadPendingFilesResult.isLoading}\n\t\t\t\t\t\t\tonClick={() => downloadPendingAvatarsResult.mutate()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Download_Pending_Avatars')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</ButtonGroup>\n\t\t\t</PageHeader>\n\t\t\t<PageScrollableContentWithShadow>\n\t\t\t\t<Table fixed data-qa-id='ImportTable'>\n\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell is='th' rowSpan={2} width='x140'>\n\t\t\t\t\t\t\t\t{t('Import_Type')}\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell is='th' rowSpan={2}>\n\t\t\t\t\t\t\t\t{t('Last_Updated')}\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t{!small && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<TableCell is='th' rowSpan={2}>\n\t\t\t\t\t\t\t\t\t\t{t('Last_Status')}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell is='th' rowSpan={2}>\n\t\t\t\t\t\t\t\t\t\t{t('File')}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell is='th' align='center' colSpan={4} width='x320'>\n\t\t\t\t\t\t\t\t\t\t{t('Counters')}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t{!small && (\n\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t<TableCell is='th' align='center'>\n\t\t\t\t\t\t\t\t\t{t('Users')}\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t<TableCell is='th' align='center'>\n\t\t\t\t\t\t\t\t\t{t('Channels')}\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t<TableCell is='th' align='center'>\n\t\t\t\t\t\t\t\t\t{t('Messages')}\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t<TableCell is='th' align='center'>\n\t\t\t\t\t\t\t\t\t{t('Total')}\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</TableHead>\n\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{Array.from({ length: 20 }, (_, i) => (\n\t\t\t\t\t\t\t\t\t<ImportOperationSummarySkeleton key={i} small={small} />\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{currentOperation.isSuccess && currentOperation.data.valid && (\n\t\t\t\t\t\t\t<ImportOperationSummary {...currentOperation.data} small={small} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{currentOperation.isSuccess && latestOperations.isSuccess && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{latestOperations.data\n\t\t\t\t\t\t\t\t\t.filter(({ _id }) => !currentOperation.data.valid || currentOperation.data._id !== _id)\n\t\t\t\t\t\t\t\t\t// Forcing valid=false as the current API only accept preparation/progress over currentOperation\n\t\t\t\t\t\t\t\t\t?.map((operation) => (\n\t\t\t\t\t\t\t\t\t\t<ImportOperationSummary key={operation._id} {...operation} valid={false} small={small} />\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</TableBody>\n\t\t\t\t</Table>\n\t\t\t</PageScrollableContentWithShadow>\n\t\t</Page>\n\t);\n}\n\nexport default ImportHistoryPage;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/import/ImportHistoryPage.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/admin/import/ImportHistoryPage.tsx","inputSourceMap":{"version":3,"file":"client/views/admin/import/ImportHistoryPage.tsx","sourceRoot":"","sources":["client/views/admin/import/ImportHistoryPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Button, ButtonGroup, Table, TableHead, TableCell, TableRow, TableBody } from '@rocket.chat/fuselage';\nimport { useMediaQuery } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useEndpoint, useTranslation, useRouter } from '@rocket.chat/ui-contexts';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport React, { useMemo } from 'react';\n\nimport { ProgressStep } from '../../../../app/importer/lib/ImporterProgressStep';\nimport { Page, PageHeader, PageScrollableContentWithShadow } from '../../../components/Page';\nimport ImportOperationSummary from './ImportOperationSummary';\nimport ImportOperationSummarySkeleton from './ImportOperationSummarySkeleton';\n\n// TODO: review inner logic\nfunction ImportHistoryPage() {\n\tconst queryClient = useQueryClient();\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst downloadPendingFiles = useEndpoint('POST', '/v1/downloadPendingFiles');\n\tconst downloadPendingAvatars = useEndpoint('POST', '/v1/downloadPendingAvatars');\n\n\tconst getCurrentImportOperation = useEndpoint('GET', '/v1/getCurrentImportOperation');\n\tconst getLatestImportOperations = useEndpoint('GET', '/v1/getLatestImportOperations');\n\n\tconst router = useRouter();\n\n\tconst currentOperation = useQuery(\n\t\t['ImportHistoryPage', 'currentOperation'],\n\t\tasync () => {\n\t\t\tconst { operation = { valid: false } } = await getCurrentImportOperation();\n\t\t\treturn operation;\n\t\t},\n\t\t{\n\t\t\tonError: () => dispatchToastMessage({ type: 'error', message: t('Failed_To_Load_Import_Operation') }),\n\t\t},\n\t);\n\n\tconst latestOperations = useQuery(\n\t\t['ImportHistoryPage', 'latestOperations'],\n\t\tasync () => {\n\t\t\tconst operations = await getLatestImportOperations();\n\t\t\treturn operations;\n\t\t},\n\t\t{\n\t\t\tonError: () => dispatchToastMessage({ type: 'error', message: t('Failed_To_Load_Import_History') }),\n\t\t},\n\t);\n\n\tconst isLoading = currentOperation.isLoading || latestOperations.isLoading;\n\n\tconst hasAnySuccessfulImport = useMemo(() => {\n\t\treturn latestOperations.isSuccess && latestOperations.data.some(({ status }) => status === ProgressStep.DONE);\n\t}, [latestOperations.isSuccess, latestOperations.data]);\n\n\tconst handleNewImportClick = () => {\n\t\trouter.navigate('/admin/import/new');\n\t};\n\n\tconst downloadPendingFilesResult = useMutation({\n\t\tmutationFn: async () => downloadPendingFiles(),\n\t\tonError: (error) => {\n\t\t\tconsole.error(error);\n\t\t\tdispatchToastMessage({ type: 'error', message: t('Failed_To_Download_Files') });\n\t\t},\n\t\tonSuccess: ({ count }) => {\n\t\t\tqueryClient.invalidateQueries(['ImportHistoryPage', 'currentOperation']);\n\t\t\tqueryClient.invalidateQueries(['ImportHistoryPage', 'latestOperations']);\n\t\t\tif (!count) {\n\t\t\t\tdispatchToastMessage({ type: 'info', message: t('No_files_left_to_download') });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatchToastMessage({ type: 'info', message: t('File_Downloads_Started') });\n\t\t\trouter.navigate('/admin/import/progress');\n\t\t},\n\t});\n\n\tconst downloadPendingAvatarsResult = useMutation({\n\t\tmutationFn: async () => downloadPendingAvatars(),\n\t\tonError: (error) => {\n\t\t\tconsole.error(error);\n\t\t\tdispatchToastMessage({ type: 'error', message: t('Failed_To_Download_Files') });\n\t\t},\n\t\tonSuccess: ({ count }) => {\n\t\t\tqueryClient.invalidateQueries(['ImportHistoryPage', 'currentOperation']);\n\t\t\tqueryClient.invalidateQueries(['ImportHistoryPage', 'latestOperations']);\n\t\t\tif (!count) {\n\t\t\t\tdispatchToastMessage({ type: 'info', message: t('No_files_left_to_download') });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatchToastMessage({ type: 'info', message: t('File_Downloads_Started') });\n\t\t\trouter.navigate('/admin/import/progress');\n\t\t},\n\t});\n\n\tconst small = useMediaQuery('(max-width: 768px)');\n\n\treturn (\n\t\t<Page>\n\t\t\t<PageHeader title={t('Import')}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button primary disabled={isLoading} onClick={handleNewImportClick}>\n\t\t\t\t\t\t{t('Import_New_File')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t{hasAnySuccessfulImport && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tloading={downloadPendingFilesResult.isLoading}\n\t\t\t\t\t\t\tdisabled={downloadPendingAvatarsResult.isLoading}\n\t\t\t\t\t\t\tonClick={() => downloadPendingFilesResult.mutate()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Download_Pending_Files')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t{hasAnySuccessfulImport && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tloading={downloadPendingAvatarsResult.isLoading}\n\t\t\t\t\t\t\tdisabled={downloadPendingFilesResult.isLoading}\n\t\t\t\t\t\t\tonClick={() => downloadPendingAvatarsResult.mutate()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Download_Pending_Avatars')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</ButtonGroup>\n\t\t\t</PageHeader>\n\t\t\t<PageScrollableContentWithShadow>\n\t\t\t\t<Table fixed data-qa-id='ImportTable'>\n\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell is='th' rowSpan={2} width='x140'>\n\t\t\t\t\t\t\t\t{t('Import_Type')}\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell is='th' rowSpan={2}>\n\t\t\t\t\t\t\t\t{t('Last_Updated')}\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t{!small && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<TableCell is='th' rowSpan={2}>\n\t\t\t\t\t\t\t\t\t\t{t('Last_Status')}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell is='th' rowSpan={2}>\n\t\t\t\t\t\t\t\t\t\t{t('File')}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell is='th' align='center' colSpan={4} width='x320'>\n\t\t\t\t\t\t\t\t\t\t{t('Counters')}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t{!small && (\n\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t<TableCell is='th' align='center'>\n\t\t\t\t\t\t\t\t\t{t('Users')}\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t<TableCell is='th' align='center'>\n\t\t\t\t\t\t\t\t\t{t('Channels')}\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t<TableCell is='th' align='center'>\n\t\t\t\t\t\t\t\t\t{t('Messages')}\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t<TableCell is='th' align='center'>\n\t\t\t\t\t\t\t\t\t{t('Total')}\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</TableHead>\n\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{Array.from({ length: 20 }, (_, i) => (\n\t\t\t\t\t\t\t\t\t<ImportOperationSummarySkeleton key={i} small={small} />\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{currentOperation.isSuccess && currentOperation.data.valid && (\n\t\t\t\t\t\t\t<ImportOperationSummary {...currentOperation.data} small={small} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{currentOperation.isSuccess && latestOperations.isSuccess && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{latestOperations.data\n\t\t\t\t\t\t\t\t\t.filter(({ _id }) => !currentOperation.data.valid || currentOperation.data._id !== _id)\n\t\t\t\t\t\t\t\t\t// Forcing valid=false as the current API only accept preparation/progress over currentOperation\n\t\t\t\t\t\t\t\t\t?.map((operation) => (\n\t\t\t\t\t\t\t\t\t\t<ImportOperationSummary key={operation._id} {...operation} valid={false} small={small} />\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</TableBody>\n\t\t\t\t</Table>\n\t\t\t</PageScrollableContentWithShadow>\n\t\t</Page>\n\t);\n}\n\nexport default ImportHistoryPage;\n"]}}},"code":"var _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 0);\nvar _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 1);\nvar Button, ButtonGroup, Table, TableHead, TableCell, TableRow, TableBody;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Button: function (v) {\n    Button = v;\n  },\n  ButtonGroup: function (v) {\n    ButtonGroup = v;\n  },\n  Table: function (v) {\n    Table = v;\n  },\n  TableHead: function (v) {\n    TableHead = v;\n  },\n  TableCell: function (v) {\n    TableCell = v;\n  },\n  TableRow: function (v) {\n    TableRow = v;\n  },\n  TableBody: function (v) {\n    TableBody = v;\n  }\n}, 0);\nvar useMediaQuery;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMediaQuery: function (v) {\n    useMediaQuery = v;\n  }\n}, 1);\nvar useToastMessageDispatch, useEndpoint, useTranslation, useRouter;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  },\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  },\n  useTranslation: function (v) {\n    useTranslation = v;\n  },\n  useRouter: function (v) {\n    useRouter = v;\n  }\n}, 2);\nvar useQuery, useMutation, useQueryClient;\nmodule.link(\"@tanstack/react-query\", {\n  useQuery: function (v) {\n    useQuery = v;\n  },\n  useMutation: function (v) {\n    useMutation = v;\n  },\n  useQueryClient: function (v) {\n    useQueryClient = v;\n  }\n}, 3);\nvar React, useMemo;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  }\n}, 4);\nvar ProgressStep;\nmodule.link(\"../../../../app/importer/lib/ImporterProgressStep\", {\n  ProgressStep: function (v) {\n    ProgressStep = v;\n  }\n}, 5);\nvar Page, PageHeader, PageScrollableContentWithShadow;\nmodule.link(\"../../../components/Page\", {\n  Page: function (v) {\n    Page = v;\n  },\n  PageHeader: function (v) {\n    PageHeader = v;\n  },\n  PageScrollableContentWithShadow: function (v) {\n    PageScrollableContentWithShadow = v;\n  }\n}, 6);\nvar ImportOperationSummary;\nmodule.link(\"./ImportOperationSummary\", {\n  \"default\": function (v) {\n    ImportOperationSummary = v;\n  }\n}, 7);\nvar ImportOperationSummarySkeleton;\nmodule.link(\"./ImportOperationSummarySkeleton\", {\n  \"default\": function (v) {\n    ImportOperationSummarySkeleton = v;\n  }\n}, 8);\n// TODO: review inner logic\nfunction ImportHistoryPage() {\n  var _latestOperations$dat;\n  var queryClient = useQueryClient();\n  var t = useTranslation();\n  var dispatchToastMessage = useToastMessageDispatch();\n  var downloadPendingFiles = useEndpoint('POST', '/v1/downloadPendingFiles');\n  var downloadPendingAvatars = useEndpoint('POST', '/v1/downloadPendingAvatars');\n  var getCurrentImportOperation = useEndpoint('GET', '/v1/getCurrentImportOperation');\n  var getLatestImportOperations = useEndpoint('GET', '/v1/getLatestImportOperations');\n  var router = useRouter();\n  var currentOperation = useQuery(['ImportHistoryPage', 'currentOperation'], function () {\n    function _callee() {\n      var _await$getCurrentImpo, _await$getCurrentImpo2, operation;\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(getCurrentImportOperation());\n            case 2:\n              _await$getCurrentImpo = _context.sent;\n              _await$getCurrentImpo2 = _await$getCurrentImpo.operation;\n              operation = _await$getCurrentImpo2 === void 0 ? {\n                valid: false\n              } : _await$getCurrentImpo2;\n              return _context.abrupt(\"return\", operation);\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n        return _callee$;\n      }(), null, null, null, Promise);\n    }\n    return _callee;\n  }(), {\n    onError: function () {\n      return dispatchToastMessage({\n        type: 'error',\n        message: t('Failed_To_Load_Import_Operation')\n      });\n    }\n  });\n  var latestOperations = useQuery(['ImportHistoryPage', 'latestOperations'], function () {\n    function _callee2() {\n      var operations;\n      return _regeneratorRuntime.async(function () {\n        function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(getLatestImportOperations());\n            case 2:\n              operations = _context2.sent;\n              return _context2.abrupt(\"return\", operations);\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n        return _callee2$;\n      }(), null, null, null, Promise);\n    }\n    return _callee2;\n  }(), {\n    onError: function () {\n      return dispatchToastMessage({\n        type: 'error',\n        message: t('Failed_To_Load_Import_History')\n      });\n    }\n  });\n  var isLoading = currentOperation.isLoading || latestOperations.isLoading;\n  var hasAnySuccessfulImport = useMemo(function () {\n    return latestOperations.isSuccess && latestOperations.data.some(function (_ref) {\n      var status = _ref.status;\n      return status === ProgressStep.DONE;\n    });\n  }, [latestOperations.isSuccess, latestOperations.data]);\n  var handleNewImportClick = function () {\n    router.navigate('/admin/import/new');\n  };\n  var downloadPendingFilesResult = useMutation({\n    mutationFn: function () {\n      function _callee3() {\n        return _regeneratorRuntime.async(function () {\n          function _callee3$(_context3) {\n            while (1) switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", downloadPendingFiles());\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n          return _callee3$;\n        }(), null, null, null, Promise);\n      }\n      return _callee3;\n    }(),\n    onError: function (error) {\n      console.error(error);\n      dispatchToastMessage({\n        type: 'error',\n        message: t('Failed_To_Download_Files')\n      });\n    },\n    onSuccess: function (_ref2) {\n      var count = _ref2.count;\n      queryClient.invalidateQueries(['ImportHistoryPage', 'currentOperation']);\n      queryClient.invalidateQueries(['ImportHistoryPage', 'latestOperations']);\n      if (!count) {\n        dispatchToastMessage({\n          type: 'info',\n          message: t('No_files_left_to_download')\n        });\n        return;\n      }\n      dispatchToastMessage({\n        type: 'info',\n        message: t('File_Downloads_Started')\n      });\n      router.navigate('/admin/import/progress');\n    }\n  });\n  var downloadPendingAvatarsResult = useMutation({\n    mutationFn: function () {\n      function _callee4() {\n        return _regeneratorRuntime.async(function () {\n          function _callee4$(_context4) {\n            while (1) switch (_context4.prev = _context4.next) {\n              case 0:\n                return _context4.abrupt(\"return\", downloadPendingAvatars());\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n          return _callee4$;\n        }(), null, null, null, Promise);\n      }\n      return _callee4;\n    }(),\n    onError: function (error) {\n      console.error(error);\n      dispatchToastMessage({\n        type: 'error',\n        message: t('Failed_To_Download_Files')\n      });\n    },\n    onSuccess: function (_ref3) {\n      var count = _ref3.count;\n      queryClient.invalidateQueries(['ImportHistoryPage', 'currentOperation']);\n      queryClient.invalidateQueries(['ImportHistoryPage', 'latestOperations']);\n      if (!count) {\n        dispatchToastMessage({\n          type: 'info',\n          message: t('No_files_left_to_download')\n        });\n        return;\n      }\n      dispatchToastMessage({\n        type: 'info',\n        message: t('File_Downloads_Started')\n      });\n      router.navigate('/admin/import/progress');\n    }\n  });\n  var small = useMediaQuery('(max-width: 768px)');\n  return /*#__PURE__*/React.createElement(Page, null, /*#__PURE__*/React.createElement(PageHeader, {\n    title: t('Import')\n  }, /*#__PURE__*/React.createElement(ButtonGroup, null, /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    disabled: isLoading,\n    onClick: handleNewImportClick\n  }, t('Import_New_File')), hasAnySuccessfulImport && /*#__PURE__*/React.createElement(Button, {\n    loading: downloadPendingFilesResult.isLoading,\n    disabled: downloadPendingAvatarsResult.isLoading,\n    onClick: function () {\n      return downloadPendingFilesResult.mutate();\n    }\n  }, t('Download_Pending_Files')), hasAnySuccessfulImport && /*#__PURE__*/React.createElement(Button, {\n    loading: downloadPendingAvatarsResult.isLoading,\n    disabled: downloadPendingFilesResult.isLoading,\n    onClick: function () {\n      return downloadPendingAvatarsResult.mutate();\n    }\n  }, t('Download_Pending_Avatars')))), /*#__PURE__*/React.createElement(PageScrollableContentWithShadow, null, /*#__PURE__*/React.createElement(Table, {\n    fixed: true,\n    \"data-qa-id\": \"ImportTable\"\n  }, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRow, null, /*#__PURE__*/React.createElement(TableCell, {\n    is: \"th\",\n    rowSpan: 2,\n    width: \"x140\"\n  }, t('Import_Type')), /*#__PURE__*/React.createElement(TableCell, {\n    is: \"th\",\n    rowSpan: 2\n  }, t('Last_Updated')), !small && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TableCell, {\n    is: \"th\",\n    rowSpan: 2\n  }, t('Last_Status')), /*#__PURE__*/React.createElement(TableCell, {\n    is: \"th\",\n    rowSpan: 2\n  }, t('File')), /*#__PURE__*/React.createElement(TableCell, {\n    is: \"th\",\n    align: \"center\",\n    colSpan: 4,\n    width: \"x320\"\n  }, t('Counters')))), !small && /*#__PURE__*/React.createElement(TableRow, null, /*#__PURE__*/React.createElement(TableCell, {\n    is: \"th\",\n    align: \"center\"\n  }, t('Users')), /*#__PURE__*/React.createElement(TableCell, {\n    is: \"th\",\n    align: \"center\"\n  }, t('Channels')), /*#__PURE__*/React.createElement(TableCell, {\n    is: \"th\",\n    align: \"center\"\n  }, t('Messages')), /*#__PURE__*/React.createElement(TableCell, {\n    is: \"th\",\n    align: \"center\"\n  }, t('Total')))), /*#__PURE__*/React.createElement(TableBody, null, isLoading && /*#__PURE__*/React.createElement(React.Fragment, null, Array.from({\n    length: 20\n  }, function (_, i) {\n    return /*#__PURE__*/React.createElement(ImportOperationSummarySkeleton, {\n      key: i,\n      small: small\n    });\n  })), currentOperation.isSuccess && currentOperation.data.valid && /*#__PURE__*/React.createElement(ImportOperationSummary, _extends({}, currentOperation.data, {\n    small: small\n  })), currentOperation.isSuccess && latestOperations.isSuccess && /*#__PURE__*/React.createElement(React.Fragment, null, (_latestOperations$dat = latestOperations.data.filter(function (_ref4) {\n    var _id = _ref4._id;\n    return !currentOperation.data.valid || currentOperation.data._id !== _id;\n  })\n  // Forcing valid=false as the current API only accept preparation/progress over currentOperation\n  ) === null || _latestOperations$dat === void 0 ? void 0 : _latestOperations$dat.map(function (operation) {\n    return /*#__PURE__*/React.createElement(ImportOperationSummary, _extends({\n      key: operation._id\n    }, operation, {\n      valid: false,\n      small: small\n    }));\n  }))))));\n}\nmodule.exportDefault(ImportHistoryPage);","map":{"version":3,"names":["_extends","module","link","default","v","_regeneratorRuntime","Button","ButtonGroup","Table","TableHead","TableCell","TableRow","TableBody","useMediaQuery","useToastMessageDispatch","useEndpoint","useTranslation","useRouter","useQuery","useMutation","useQueryClient","React","useMemo","ProgressStep","Page","PageHeader","PageScrollableContentWithShadow","ImportOperationSummary","ImportOperationSummarySkeleton","ImportHistoryPage","_latestOperations$dat","queryClient","t","dispatchToastMessage","downloadPendingFiles","downloadPendingAvatars","getCurrentImportOperation","getLatestImportOperations","router","currentOperation","_callee","_await$getCurrentImpo","_await$getCurrentImpo2","operation","async","_callee$","_context","prev","next","awrap","sent","valid","abrupt","stop","Promise","onError","type","message","latestOperations","_callee2","operations","_callee2$","_context2","isLoading","hasAnySuccessfulImport","isSuccess","data","some","_ref","status","DONE","handleNewImportClick","navigate","downloadPendingFilesResult","mutationFn","_callee3","_callee3$","_context3","error","console","onSuccess","_ref2","count","invalidateQueries","downloadPendingAvatarsResult","_callee4","_callee4$","_context4","_ref3","small","createElement","title","primary","disabled","onClick","loading","mutate","fixed","is","rowSpan","width","Fragment","align","colSpan","Array","from","length","_","i","key","filter","_ref4","_id","map","exportDefault"],"sources":["client/views/admin/import/ImportHistoryPage.tsx"],"sourcesContent":["import { Button, ButtonGroup, Table, TableHead, TableCell, TableRow, TableBody } from '@rocket.chat/fuselage';\nimport { useMediaQuery } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useEndpoint, useTranslation, useRouter } from '@rocket.chat/ui-contexts';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport React, { useMemo } from 'react';\n\nimport { ProgressStep } from '../../../../app/importer/lib/ImporterProgressStep';\nimport { Page, PageHeader, PageScrollableContentWithShadow } from '../../../components/Page';\nimport ImportOperationSummary from './ImportOperationSummary';\nimport ImportOperationSummarySkeleton from './ImportOperationSummarySkeleton';\n\n// TODO: review inner logic\nfunction ImportHistoryPage() {\n\tconst queryClient = useQueryClient();\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst downloadPendingFiles = useEndpoint('POST', '/v1/downloadPendingFiles');\n\tconst downloadPendingAvatars = useEndpoint('POST', '/v1/downloadPendingAvatars');\n\n\tconst getCurrentImportOperation = useEndpoint('GET', '/v1/getCurrentImportOperation');\n\tconst getLatestImportOperations = useEndpoint('GET', '/v1/getLatestImportOperations');\n\n\tconst router = useRouter();\n\n\tconst currentOperation = useQuery(\n\t\t['ImportHistoryPage', 'currentOperation'],\n\t\tasync () => {\n\t\t\tconst { operation = { valid: false } } = await getCurrentImportOperation();\n\t\t\treturn operation;\n\t\t},\n\t\t{\n\t\t\tonError: () => dispatchToastMessage({ type: 'error', message: t('Failed_To_Load_Import_Operation') }),\n\t\t},\n\t);\n\n\tconst latestOperations = useQuery(\n\t\t['ImportHistoryPage', 'latestOperations'],\n\t\tasync () => {\n\t\t\tconst operations = await getLatestImportOperations();\n\t\t\treturn operations;\n\t\t},\n\t\t{\n\t\t\tonError: () => dispatchToastMessage({ type: 'error', message: t('Failed_To_Load_Import_History') }),\n\t\t},\n\t);\n\n\tconst isLoading = currentOperation.isLoading || latestOperations.isLoading;\n\n\tconst hasAnySuccessfulImport = useMemo(() => {\n\t\treturn latestOperations.isSuccess && latestOperations.data.some(({ status }) => status === ProgressStep.DONE);\n\t}, [latestOperations.isSuccess, latestOperations.data]);\n\n\tconst handleNewImportClick = () => {\n\t\trouter.navigate('/admin/import/new');\n\t};\n\n\tconst downloadPendingFilesResult = useMutation({\n\t\tmutationFn: async () => downloadPendingFiles(),\n\t\tonError: (error) => {\n\t\t\tconsole.error(error);\n\t\t\tdispatchToastMessage({ type: 'error', message: t('Failed_To_Download_Files') });\n\t\t},\n\t\tonSuccess: ({ count }) => {\n\t\t\tqueryClient.invalidateQueries(['ImportHistoryPage', 'currentOperation']);\n\t\t\tqueryClient.invalidateQueries(['ImportHistoryPage', 'latestOperations']);\n\t\t\tif (!count) {\n\t\t\t\tdispatchToastMessage({ type: 'info', message: t('No_files_left_to_download') });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatchToastMessage({ type: 'info', message: t('File_Downloads_Started') });\n\t\t\trouter.navigate('/admin/import/progress');\n\t\t},\n\t});\n\n\tconst downloadPendingAvatarsResult = useMutation({\n\t\tmutationFn: async () => downloadPendingAvatars(),\n\t\tonError: (error) => {\n\t\t\tconsole.error(error);\n\t\t\tdispatchToastMessage({ type: 'error', message: t('Failed_To_Download_Files') });\n\t\t},\n\t\tonSuccess: ({ count }) => {\n\t\t\tqueryClient.invalidateQueries(['ImportHistoryPage', 'currentOperation']);\n\t\t\tqueryClient.invalidateQueries(['ImportHistoryPage', 'latestOperations']);\n\t\t\tif (!count) {\n\t\t\t\tdispatchToastMessage({ type: 'info', message: t('No_files_left_to_download') });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatchToastMessage({ type: 'info', message: t('File_Downloads_Started') });\n\t\t\trouter.navigate('/admin/import/progress');\n\t\t},\n\t});\n\n\tconst small = useMediaQuery('(max-width: 768px)');\n\n\treturn (\n\t\t<Page>\n\t\t\t<PageHeader title={t('Import')}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button primary disabled={isLoading} onClick={handleNewImportClick}>\n\t\t\t\t\t\t{t('Import_New_File')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t{hasAnySuccessfulImport && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tloading={downloadPendingFilesResult.isLoading}\n\t\t\t\t\t\t\tdisabled={downloadPendingAvatarsResult.isLoading}\n\t\t\t\t\t\t\tonClick={() => downloadPendingFilesResult.mutate()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Download_Pending_Files')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t{hasAnySuccessfulImport && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tloading={downloadPendingAvatarsResult.isLoading}\n\t\t\t\t\t\t\tdisabled={downloadPendingFilesResult.isLoading}\n\t\t\t\t\t\t\tonClick={() => downloadPendingAvatarsResult.mutate()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Download_Pending_Avatars')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</ButtonGroup>\n\t\t\t</PageHeader>\n\t\t\t<PageScrollableContentWithShadow>\n\t\t\t\t<Table fixed data-qa-id='ImportTable'>\n\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell is='th' rowSpan={2} width='x140'>\n\t\t\t\t\t\t\t\t{t('Import_Type')}\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t<TableCell is='th' rowSpan={2}>\n\t\t\t\t\t\t\t\t{t('Last_Updated')}\n\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t{!small && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<TableCell is='th' rowSpan={2}>\n\t\t\t\t\t\t\t\t\t\t{t('Last_Status')}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell is='th' rowSpan={2}>\n\t\t\t\t\t\t\t\t\t\t{t('File')}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t<TableCell is='th' align='center' colSpan={4} width='x320'>\n\t\t\t\t\t\t\t\t\t\t{t('Counters')}\n\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t{!small && (\n\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t<TableCell is='th' align='center'>\n\t\t\t\t\t\t\t\t\t{t('Users')}\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t<TableCell is='th' align='center'>\n\t\t\t\t\t\t\t\t\t{t('Channels')}\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t<TableCell is='th' align='center'>\n\t\t\t\t\t\t\t\t\t{t('Messages')}\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t<TableCell is='th' align='center'>\n\t\t\t\t\t\t\t\t\t{t('Total')}\n\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</TableHead>\n\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t{isLoading && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{Array.from({ length: 20 }, (_, i) => (\n\t\t\t\t\t\t\t\t\t<ImportOperationSummarySkeleton key={i} small={small} />\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{currentOperation.isSuccess && currentOperation.data.valid && (\n\t\t\t\t\t\t\t<ImportOperationSummary {...currentOperation.data} small={small} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{currentOperation.isSuccess && latestOperations.isSuccess && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{latestOperations.data\n\t\t\t\t\t\t\t\t\t.filter(({ _id }) => !currentOperation.data.valid || currentOperation.data._id !== _id)\n\t\t\t\t\t\t\t\t\t// Forcing valid=false as the current API only accept preparation/progress over currentOperation\n\t\t\t\t\t\t\t\t\t?.map((operation) => (\n\t\t\t\t\t\t\t\t\t\t<ImportOperationSummary key={operation._id} {...operation} valid={false} small={small} />\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</TableBody>\n\t\t\t\t</Table>\n\t\t\t</PageScrollableContentWithShadow>\n\t\t</Page>\n\t);\n}\n\nexport default ImportHistoryPage;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"a3a178e11a3f63e28c9ac556c4c62d3f1d741392"}
