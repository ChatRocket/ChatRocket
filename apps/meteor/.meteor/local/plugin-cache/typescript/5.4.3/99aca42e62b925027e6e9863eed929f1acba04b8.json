{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/GazzodownText.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/components/GazzodownText.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/GazzodownText.tsx","inputSourceMap":{"version":3,"file":"client/components/GazzodownText.tsx","sourceRoot":"","sources":["client/components/GazzodownText.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { useLocalStorage } from '@rocket.chat/fuselage-hooks';\nimport type { ChannelMention, UserMention } from '@rocket.chat/gazzodown';\nimport { MarkupInteractionContext } from '@rocket.chat/gazzodown';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { useFeaturePreview } from '@rocket.chat/ui-client';\nimport { useLayout, useRouter, useSetting, useUserPreference, useUserId } from '@rocket.chat/ui-contexts';\nimport type { UIEvent } from 'react';\nimport React, { useCallback, memo, useMemo } from 'react';\n\nimport { detectEmoji } from '../lib/utils/detectEmoji';\nimport { fireGlobalEvent } from '../lib/utils/fireGlobalEvent';\nimport { useMessageListHighlights } from './message/list/MessageListContext';\nimport { useUserCard } from '../views/room/contexts/UserCardContext';\nimport { useGoToRoom } from '../views/room/hooks/useGoToRoom';\n\ntype GazzodownTextProps = {\n\tchildren: JSX.Element;\n\tmentions?: {\n\t\ttype?: 'user' | 'team';\n\t\t_id: string;\n\t\tusername?: string;\n\t\tname?: string;\n\t}[];\n\tchannels?: Pick<IRoom, '_id' | 'name'>[];\n\tsearchText?: string;\n};\n\nconst GazzodownText = ({ mentions, channels, searchText, children }: GazzodownTextProps) => {\n\tconst enableTimestamp = useFeaturePreview('enable-timestamp-message-parser');\n\tconst [userLanguage] = useLocalStorage('userLanguage', 'en');\n\n\tconst highlights = useMessageListHighlights();\n\tconst { triggerProps, openUserCard } = useUserCard();\n\n\tconst highlightRegex = useMemo(() => {\n\t\tif (!highlights?.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst alternatives = highlights.map(({ highlight }) => escapeRegExp(highlight)).join('|');\n\t\tconst expression = `(?=^|\\\\b|[\\\\s\\\\n\\\\r\\\\t.,،'\\\\\\\"\\\\+!?:-])(${alternatives})(?=$|\\\\b|[\\\\s\\\\n\\\\r\\\\t.,،'\\\\\\\"\\\\+!?:-])`;\n\n\t\treturn (): RegExp => new RegExp(expression, 'gmi');\n\t}, [highlights]);\n\n\tconst markRegex = useMemo(() => {\n\t\tif (!searchText) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn (): RegExp => new RegExp(`(${searchText})(?![^<]*>)`, 'gi');\n\t}, [searchText]);\n\n\tconst convertAsciiToEmoji = useUserPreference<boolean>('convertAsciiEmoji', true);\n\tconst useEmoji = Boolean(useUserPreference('useEmojis'));\n\tconst useRealName = Boolean(useSetting('UI_Use_Real_Name'));\n\tconst ownUserId = useUserId();\n\tconst showMentionSymbol = Boolean(useUserPreference<boolean>('mentionsWithSymbol'));\n\n\tconst resolveUserMention = useCallback(\n\t\t(mention: string) => {\n\t\t\tif (mention === 'all' || mention === 'here') {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst filterUser = ({ username, type }: UserMention) => (!type || type === 'user') && username === mention;\n\t\t\tconst filterTeam = ({ name, type }: UserMention) => type === 'team' && name === mention;\n\n\t\t\treturn mentions?.find((mention) => filterUser(mention) || filterTeam(mention));\n\t\t},\n\t\t[mentions],\n\t);\n\n\tconst onUserMentionClick = useCallback(\n\t\t({ username }: UserMention) => {\n\t\t\tif (!username) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn (event: UIEvent): void => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\topenUserCard(event, username);\n\t\t\t};\n\t\t},\n\t\t[openUserCard],\n\t);\n\n\tconst goToRoom = useGoToRoom();\n\n\tconst { isEmbedded, isMobile } = useLayout();\n\n\tconst resolveChannelMention = useCallback((mention: string) => channels?.find(({ name }) => name === mention), [channels]);\n\n\tconst router = useRouter();\n\n\tconst onChannelMentionClick = useCallback(\n\t\t({ _id: rid }: ChannelMention) =>\n\t\t\t(event: UIEvent): void => {\n\t\t\t\tif (isEmbedded) {\n\t\t\t\t\tfireGlobalEvent('click-mention-link', {\n\t\t\t\t\t\tpath: router.buildRoutePath({\n\t\t\t\t\t\t\tpattern: '/channel/:name/:tab?/:context?',\n\t\t\t\t\t\t\tparams: { name: rid },\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tchannel: rid,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tgoToRoom(rid);\n\t\t\t},\n\t\t[router, isEmbedded, goToRoom],\n\t);\n\n\treturn (\n\t\t<MarkupInteractionContext.Provider\n\t\t\tvalue={{\n\t\t\t\tdetectEmoji,\n\t\t\t\thighlightRegex,\n\t\t\t\tmarkRegex,\n\t\t\t\tresolveUserMention,\n\t\t\t\tonUserMentionClick,\n\t\t\t\tresolveChannelMention,\n\t\t\t\tonChannelMentionClick,\n\t\t\t\tconvertAsciiToEmoji,\n\t\t\t\tuseEmoji,\n\t\t\t\tuseRealName,\n\t\t\t\tisMobile,\n\t\t\t\townUserId,\n\t\t\t\tshowMentionSymbol,\n\t\t\t\ttriggerProps,\n\t\t\t\tenableTimestamp,\n\t\t\t\tlanguage: userLanguage,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</MarkupInteractionContext.Provider>\n\t);\n};\n\nexport default memo(GazzodownText);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/GazzodownText.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/components/GazzodownText.tsx","inputSourceMap":{"version":3,"file":"client/components/GazzodownText.tsx","sourceRoot":"","sources":["client/components/GazzodownText.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { useLocalStorage } from '@rocket.chat/fuselage-hooks';\nimport type { ChannelMention, UserMention } from '@rocket.chat/gazzodown';\nimport { MarkupInteractionContext } from '@rocket.chat/gazzodown';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { useFeaturePreview } from '@rocket.chat/ui-client';\nimport { useLayout, useRouter, useSetting, useUserPreference, useUserId } from '@rocket.chat/ui-contexts';\nimport type { UIEvent } from 'react';\nimport React, { useCallback, memo, useMemo } from 'react';\n\nimport { detectEmoji } from '../lib/utils/detectEmoji';\nimport { fireGlobalEvent } from '../lib/utils/fireGlobalEvent';\nimport { useMessageListHighlights } from './message/list/MessageListContext';\nimport { useUserCard } from '../views/room/contexts/UserCardContext';\nimport { useGoToRoom } from '../views/room/hooks/useGoToRoom';\n\ntype GazzodownTextProps = {\n\tchildren: JSX.Element;\n\tmentions?: {\n\t\ttype?: 'user' | 'team';\n\t\t_id: string;\n\t\tusername?: string;\n\t\tname?: string;\n\t}[];\n\tchannels?: Pick<IRoom, '_id' | 'name'>[];\n\tsearchText?: string;\n};\n\nconst GazzodownText = ({ mentions, channels, searchText, children }: GazzodownTextProps) => {\n\tconst enableTimestamp = useFeaturePreview('enable-timestamp-message-parser');\n\tconst [userLanguage] = useLocalStorage('userLanguage', 'en');\n\n\tconst highlights = useMessageListHighlights();\n\tconst { triggerProps, openUserCard } = useUserCard();\n\n\tconst highlightRegex = useMemo(() => {\n\t\tif (!highlights?.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst alternatives = highlights.map(({ highlight }) => escapeRegExp(highlight)).join('|');\n\t\tconst expression = `(?=^|\\\\b|[\\\\s\\\\n\\\\r\\\\t.,،'\\\\\\\"\\\\+!?:-])(${alternatives})(?=$|\\\\b|[\\\\s\\\\n\\\\r\\\\t.,،'\\\\\\\"\\\\+!?:-])`;\n\n\t\treturn (): RegExp => new RegExp(expression, 'gmi');\n\t}, [highlights]);\n\n\tconst markRegex = useMemo(() => {\n\t\tif (!searchText) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn (): RegExp => new RegExp(`(${searchText})(?![^<]*>)`, 'gi');\n\t}, [searchText]);\n\n\tconst convertAsciiToEmoji = useUserPreference<boolean>('convertAsciiEmoji', true);\n\tconst useEmoji = Boolean(useUserPreference('useEmojis'));\n\tconst useRealName = Boolean(useSetting('UI_Use_Real_Name'));\n\tconst ownUserId = useUserId();\n\tconst showMentionSymbol = Boolean(useUserPreference<boolean>('mentionsWithSymbol'));\n\n\tconst resolveUserMention = useCallback(\n\t\t(mention: string) => {\n\t\t\tif (mention === 'all' || mention === 'here') {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst filterUser = ({ username, type }: UserMention) => (!type || type === 'user') && username === mention;\n\t\t\tconst filterTeam = ({ name, type }: UserMention) => type === 'team' && name === mention;\n\n\t\t\treturn mentions?.find((mention) => filterUser(mention) || filterTeam(mention));\n\t\t},\n\t\t[mentions],\n\t);\n\n\tconst onUserMentionClick = useCallback(\n\t\t({ username }: UserMention) => {\n\t\t\tif (!username) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn (event: UIEvent): void => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\topenUserCard(event, username);\n\t\t\t};\n\t\t},\n\t\t[openUserCard],\n\t);\n\n\tconst goToRoom = useGoToRoom();\n\n\tconst { isEmbedded, isMobile } = useLayout();\n\n\tconst resolveChannelMention = useCallback((mention: string) => channels?.find(({ name }) => name === mention), [channels]);\n\n\tconst router = useRouter();\n\n\tconst onChannelMentionClick = useCallback(\n\t\t({ _id: rid }: ChannelMention) =>\n\t\t\t(event: UIEvent): void => {\n\t\t\t\tif (isEmbedded) {\n\t\t\t\t\tfireGlobalEvent('click-mention-link', {\n\t\t\t\t\t\tpath: router.buildRoutePath({\n\t\t\t\t\t\t\tpattern: '/channel/:name/:tab?/:context?',\n\t\t\t\t\t\t\tparams: { name: rid },\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tchannel: rid,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tgoToRoom(rid);\n\t\t\t},\n\t\t[router, isEmbedded, goToRoom],\n\t);\n\n\treturn (\n\t\t<MarkupInteractionContext.Provider\n\t\t\tvalue={{\n\t\t\t\tdetectEmoji,\n\t\t\t\thighlightRegex,\n\t\t\t\tmarkRegex,\n\t\t\t\tresolveUserMention,\n\t\t\t\tonUserMentionClick,\n\t\t\t\tresolveChannelMention,\n\t\t\t\tonChannelMentionClick,\n\t\t\t\tconvertAsciiToEmoji,\n\t\t\t\tuseEmoji,\n\t\t\t\tuseRealName,\n\t\t\t\tisMobile,\n\t\t\t\townUserId,\n\t\t\t\tshowMentionSymbol,\n\t\t\t\ttriggerProps,\n\t\t\t\tenableTimestamp,\n\t\t\t\tlanguage: userLanguage,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</MarkupInteractionContext.Provider>\n\t);\n};\n\nexport default memo(GazzodownText);\n"]}}},"code":"let useLocalStorage;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useLocalStorage(v) {\n    useLocalStorage = v;\n  }\n}, 0);\nlet MarkupInteractionContext;\nmodule.link(\"@rocket.chat/gazzodown\", {\n  MarkupInteractionContext(v) {\n    MarkupInteractionContext = v;\n  }\n}, 1);\nlet escapeRegExp;\nmodule.link(\"@rocket.chat/string-helpers\", {\n  escapeRegExp(v) {\n    escapeRegExp = v;\n  }\n}, 2);\nlet useFeaturePreview;\nmodule.link(\"@rocket.chat/ui-client\", {\n  useFeaturePreview(v) {\n    useFeaturePreview = v;\n  }\n}, 3);\nlet useLayout, useRouter, useSetting, useUserPreference, useUserId;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useLayout(v) {\n    useLayout = v;\n  },\n  useRouter(v) {\n    useRouter = v;\n  },\n  useSetting(v) {\n    useSetting = v;\n  },\n  useUserPreference(v) {\n    useUserPreference = v;\n  },\n  useUserId(v) {\n    useUserId = v;\n  }\n}, 4);\nlet React, useCallback, memo, useMemo;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  },\n  memo(v) {\n    memo = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  }\n}, 5);\nlet detectEmoji;\nmodule.link(\"../lib/utils/detectEmoji\", {\n  detectEmoji(v) {\n    detectEmoji = v;\n  }\n}, 6);\nlet fireGlobalEvent;\nmodule.link(\"../lib/utils/fireGlobalEvent\", {\n  fireGlobalEvent(v) {\n    fireGlobalEvent = v;\n  }\n}, 7);\nlet useMessageListHighlights;\nmodule.link(\"./message/list/MessageListContext\", {\n  useMessageListHighlights(v) {\n    useMessageListHighlights = v;\n  }\n}, 8);\nlet useUserCard;\nmodule.link(\"../views/room/contexts/UserCardContext\", {\n  useUserCard(v) {\n    useUserCard = v;\n  }\n}, 9);\nlet useGoToRoom;\nmodule.link(\"../views/room/hooks/useGoToRoom\", {\n  useGoToRoom(v) {\n    useGoToRoom = v;\n  }\n}, 10);\nconst GazzodownText = _ref => {\n  let {\n    mentions,\n    channels,\n    searchText,\n    children\n  } = _ref;\n  const enableTimestamp = useFeaturePreview('enable-timestamp-message-parser');\n  const [userLanguage] = useLocalStorage('userLanguage', 'en');\n  const highlights = useMessageListHighlights();\n  const {\n    triggerProps,\n    openUserCard\n  } = useUserCard();\n  const highlightRegex = useMemo(() => {\n    if (!(highlights !== null && highlights !== void 0 && highlights.length)) {\n      return;\n    }\n    const alternatives = highlights.map(_ref2 => {\n      let {\n        highlight\n      } = _ref2;\n      return escapeRegExp(highlight);\n    }).join('|');\n    const expression = \"(?=^|\\\\b|[\\\\s\\\\n\\\\r\\\\t.,\\u060C'\\\\\\\"\\\\+!?:-])(\".concat(alternatives, \")(?=$|\\\\b|[\\\\s\\\\n\\\\r\\\\t.,\\u060C'\\\\\\\"\\\\+!?:-])\");\n    return () => new RegExp(expression, 'gmi');\n  }, [highlights]);\n  const markRegex = useMemo(() => {\n    if (!searchText) {\n      return;\n    }\n    return () => new RegExp(\"(\".concat(searchText, \")(?![^<]*>)\"), 'gi');\n  }, [searchText]);\n  const convertAsciiToEmoji = useUserPreference('convertAsciiEmoji', true);\n  const useEmoji = Boolean(useUserPreference('useEmojis'));\n  const useRealName = Boolean(useSetting('UI_Use_Real_Name'));\n  const ownUserId = useUserId();\n  const showMentionSymbol = Boolean(useUserPreference('mentionsWithSymbol'));\n  const resolveUserMention = useCallback(mention => {\n    if (mention === 'all' || mention === 'here') {\n      return undefined;\n    }\n    const filterUser = _ref3 => {\n      let {\n        username,\n        type\n      } = _ref3;\n      return (!type || type === 'user') && username === mention;\n    };\n    const filterTeam = _ref4 => {\n      let {\n        name,\n        type\n      } = _ref4;\n      return type === 'team' && name === mention;\n    };\n    return mentions === null || mentions === void 0 ? void 0 : mentions.find(mention => filterUser(mention) || filterTeam(mention));\n  }, [mentions]);\n  const onUserMentionClick = useCallback(_ref5 => {\n    let {\n      username\n    } = _ref5;\n    if (!username) {\n      return;\n    }\n    return event => {\n      event.stopPropagation();\n      openUserCard(event, username);\n    };\n  }, [openUserCard]);\n  const goToRoom = useGoToRoom();\n  const {\n    isEmbedded,\n    isMobile\n  } = useLayout();\n  const resolveChannelMention = useCallback(mention => channels === null || channels === void 0 ? void 0 : channels.find(_ref6 => {\n    let {\n      name\n    } = _ref6;\n    return name === mention;\n  }), [channels]);\n  const router = useRouter();\n  const onChannelMentionClick = useCallback(_ref7 => {\n    let {\n      _id: rid\n    } = _ref7;\n    return event => {\n      if (isEmbedded) {\n        fireGlobalEvent('click-mention-link', {\n          path: router.buildRoutePath({\n            pattern: '/channel/:name/:tab?/:context?',\n            params: {\n              name: rid\n            }\n          }),\n          channel: rid\n        });\n      }\n      event.stopPropagation();\n      goToRoom(rid);\n    };\n  }, [router, isEmbedded, goToRoom]);\n  return /*#__PURE__*/React.createElement(MarkupInteractionContext.Provider, {\n    value: {\n      detectEmoji,\n      highlightRegex,\n      markRegex,\n      resolveUserMention,\n      onUserMentionClick,\n      resolveChannelMention,\n      onChannelMentionClick,\n      convertAsciiToEmoji,\n      useEmoji,\n      useRealName,\n      isMobile,\n      ownUserId,\n      showMentionSymbol,\n      triggerProps,\n      enableTimestamp,\n      language: userLanguage\n    }\n  }, children);\n};\nmodule.exportDefault( /*#__PURE__*/memo(GazzodownText));","map":{"version":3,"names":["useLocalStorage","module","link","v","MarkupInteractionContext","escapeRegExp","useFeaturePreview","useLayout","useRouter","useSetting","useUserPreference","useUserId","React","useCallback","memo","useMemo","default","detectEmoji","fireGlobalEvent","useMessageListHighlights","useUserCard","useGoToRoom","GazzodownText","_ref","mentions","channels","searchText","children","enableTimestamp","userLanguage","highlights","triggerProps","openUserCard","highlightRegex","length","alternatives","map","_ref2","highlight","join","expression","concat","RegExp","markRegex","convertAsciiToEmoji","useEmoji","Boolean","useRealName","ownUserId","showMentionSymbol","resolveUserMention","mention","undefined","filterUser","_ref3","username","type","filterTeam","_ref4","name","find","onUserMentionClick","_ref5","event","stopPropagation","goToRoom","isEmbedded","isMobile","resolveChannelMention","_ref6","router","onChannelMentionClick","_ref7","_id","rid","path","buildRoutePath","pattern","params","channel","createElement","Provider","value","language","exportDefault"],"sources":["client/components/GazzodownText.tsx"],"sourcesContent":["import type { IRoom } from '@rocket.chat/core-typings';\nimport { useLocalStorage } from '@rocket.chat/fuselage-hooks';\nimport type { ChannelMention, UserMention } from '@rocket.chat/gazzodown';\nimport { MarkupInteractionContext } from '@rocket.chat/gazzodown';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\nimport { useFeaturePreview } from '@rocket.chat/ui-client';\nimport { useLayout, useRouter, useSetting, useUserPreference, useUserId } from '@rocket.chat/ui-contexts';\nimport type { UIEvent } from 'react';\nimport React, { useCallback, memo, useMemo } from 'react';\n\nimport { detectEmoji } from '../lib/utils/detectEmoji';\nimport { fireGlobalEvent } from '../lib/utils/fireGlobalEvent';\nimport { useMessageListHighlights } from './message/list/MessageListContext';\nimport { useUserCard } from '../views/room/contexts/UserCardContext';\nimport { useGoToRoom } from '../views/room/hooks/useGoToRoom';\n\ntype GazzodownTextProps = {\n\tchildren: JSX.Element;\n\tmentions?: {\n\t\ttype?: 'user' | 'team';\n\t\t_id: string;\n\t\tusername?: string;\n\t\tname?: string;\n\t}[];\n\tchannels?: Pick<IRoom, '_id' | 'name'>[];\n\tsearchText?: string;\n};\n\nconst GazzodownText = ({ mentions, channels, searchText, children }: GazzodownTextProps) => {\n\tconst enableTimestamp = useFeaturePreview('enable-timestamp-message-parser');\n\tconst [userLanguage] = useLocalStorage('userLanguage', 'en');\n\n\tconst highlights = useMessageListHighlights();\n\tconst { triggerProps, openUserCard } = useUserCard();\n\n\tconst highlightRegex = useMemo(() => {\n\t\tif (!highlights?.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst alternatives = highlights.map(({ highlight }) => escapeRegExp(highlight)).join('|');\n\t\tconst expression = `(?=^|\\\\b|[\\\\s\\\\n\\\\r\\\\t.,،'\\\\\\\"\\\\+!?:-])(${alternatives})(?=$|\\\\b|[\\\\s\\\\n\\\\r\\\\t.,،'\\\\\\\"\\\\+!?:-])`;\n\n\t\treturn (): RegExp => new RegExp(expression, 'gmi');\n\t}, [highlights]);\n\n\tconst markRegex = useMemo(() => {\n\t\tif (!searchText) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn (): RegExp => new RegExp(`(${searchText})(?![^<]*>)`, 'gi');\n\t}, [searchText]);\n\n\tconst convertAsciiToEmoji = useUserPreference<boolean>('convertAsciiEmoji', true);\n\tconst useEmoji = Boolean(useUserPreference('useEmojis'));\n\tconst useRealName = Boolean(useSetting('UI_Use_Real_Name'));\n\tconst ownUserId = useUserId();\n\tconst showMentionSymbol = Boolean(useUserPreference<boolean>('mentionsWithSymbol'));\n\n\tconst resolveUserMention = useCallback(\n\t\t(mention: string) => {\n\t\t\tif (mention === 'all' || mention === 'here') {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst filterUser = ({ username, type }: UserMention) => (!type || type === 'user') && username === mention;\n\t\t\tconst filterTeam = ({ name, type }: UserMention) => type === 'team' && name === mention;\n\n\t\t\treturn mentions?.find((mention) => filterUser(mention) || filterTeam(mention));\n\t\t},\n\t\t[mentions],\n\t);\n\n\tconst onUserMentionClick = useCallback(\n\t\t({ username }: UserMention) => {\n\t\t\tif (!username) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn (event: UIEvent): void => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\topenUserCard(event, username);\n\t\t\t};\n\t\t},\n\t\t[openUserCard],\n\t);\n\n\tconst goToRoom = useGoToRoom();\n\n\tconst { isEmbedded, isMobile } = useLayout();\n\n\tconst resolveChannelMention = useCallback((mention: string) => channels?.find(({ name }) => name === mention), [channels]);\n\n\tconst router = useRouter();\n\n\tconst onChannelMentionClick = useCallback(\n\t\t({ _id: rid }: ChannelMention) =>\n\t\t\t(event: UIEvent): void => {\n\t\t\t\tif (isEmbedded) {\n\t\t\t\t\tfireGlobalEvent('click-mention-link', {\n\t\t\t\t\t\tpath: router.buildRoutePath({\n\t\t\t\t\t\t\tpattern: '/channel/:name/:tab?/:context?',\n\t\t\t\t\t\t\tparams: { name: rid },\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tchannel: rid,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tgoToRoom(rid);\n\t\t\t},\n\t\t[router, isEmbedded, goToRoom],\n\t);\n\n\treturn (\n\t\t<MarkupInteractionContext.Provider\n\t\t\tvalue={{\n\t\t\t\tdetectEmoji,\n\t\t\t\thighlightRegex,\n\t\t\t\tmarkRegex,\n\t\t\t\tresolveUserMention,\n\t\t\t\tonUserMentionClick,\n\t\t\t\tresolveChannelMention,\n\t\t\t\tonChannelMentionClick,\n\t\t\t\tconvertAsciiToEmoji,\n\t\t\t\tuseEmoji,\n\t\t\t\tuseRealName,\n\t\t\t\tisMobile,\n\t\t\t\townUserId,\n\t\t\t\tshowMentionSymbol,\n\t\t\t\ttriggerProps,\n\t\t\t\tenableTimestamp,\n\t\t\t\tlanguage: userLanguage,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</MarkupInteractionContext.Provider>\n\t);\n};\n\nexport default memo(GazzodownText);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"99aca42e62b925027e6e9863eed929f1acba04b8"}
