{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/hooks/roomActions/useDeleteRoom.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/hooks/roomActions/useDeleteRoom.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/hooks/roomActions/useDeleteRoom.tsx","inputSourceMap":{"version":3,"file":"client/views/hooks/roomActions/useDeleteRoom.tsx","sourceRoot":"","sources":["client/views/hooks/roomActions/useDeleteRoom.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IRoom, RoomAdminFieldsType } from '@rocket.chat/core-typings';\nimport { isRoomFederated } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useToastMessageDispatch, useRouter, usePermission, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useMutation, useQuery } from '@tanstack/react-query';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport GenericModal from '../../../components/GenericModal';\nimport DeleteTeamModal from '../../teams/contextualBar/info/DeleteTeam';\n\nexport const useDeleteRoom = (room: IRoom | Pick<IRoom, RoomAdminFieldsType>, { reload }: { reload?: () => void } = {}) => {\n\tconst { t } = useTranslation();\n\tconst router = useRouter();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\t// eslint-disable-next-line no-nested-ternary\n\tconst roomType = 'prid' in room ? 'discussion' : room.teamId && room.teamMain ? 'team' : 'channel';\n\tconst isAdminRoute = router.getRouteName() === 'admin-rooms';\n\n\tconst deleteRoomEndpoint = useEndpoint('POST', '/v1/rooms.delete');\n\tconst deleteTeamEndpoint = useEndpoint('POST', '/v1/teams.delete');\n\tconst teamsInfoEndpoint = useEndpoint('GET', '/v1/teams.info');\n\n\tconst teamId = room.teamId || '';\n\tconst { data: teamInfoData } = useQuery(['teamId', teamId], async () => teamsInfoEndpoint({ teamId }), {\n\t\tkeepPreviousData: true,\n\t\tretry: false,\n\t\tenabled: room.teamId !== '',\n\t});\n\n\tconst hasPermissionToDeleteRoom = usePermission(`delete-${room.t}`, room._id);\n\tconst hasPermissionToDeleteTeamRoom = usePermission(`delete-team-${room.t === 'c' ? 'channel' : 'group'}`, teamInfoData?.teamInfo.roomId);\n\tconst isTeamRoom = room.teamId;\n\tconst canDeleteRoom = isRoomFederated(room) ? false : hasPermissionToDeleteRoom && (!isTeamRoom || hasPermissionToDeleteTeamRoom);\n\n\tconst deleteRoomMutation = useMutation({\n\t\tmutationFn: deleteRoomEndpoint,\n\t\tonSuccess: () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Deleted_roomType', { roomName: room.name, roomType }) });\n\t\t\tif (isAdminRoute) {\n\t\t\t\treturn router.navigate('/admin/rooms');\n\t\t\t}\n\n\t\t\treturn router.navigate('/home');\n\t\t},\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tsetModal(null);\n\t\t\treload?.();\n\t\t},\n\t});\n\n\tconst deleteTeamMutation = useMutation({\n\t\tmutationFn: deleteTeamEndpoint,\n\t\tonSuccess: () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Team_has_been_deleted') });\n\t\t\tif (isAdminRoute) {\n\t\t\t\treturn router.navigate('/admin/rooms');\n\t\t\t}\n\n\t\t\treturn router.navigate('/home');\n\t\t},\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tsetModal(null);\n\t\t\treload?.();\n\t\t},\n\t});\n\n\tconst isDeleting = deleteTeamMutation.isLoading || deleteRoomMutation.isLoading;\n\n\tconst handleDelete = useMutableCallback(() => {\n\t\tconst handleDeleteTeam = async (roomsToRemove: IRoom['_id'][]) => {\n\t\t\tif (!room.teamId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdeleteTeamMutation.mutateAsync({ teamId: room.teamId, ...(roomsToRemove.length && { roomsToRemove }) });\n\t\t};\n\n\t\tif (room.teamMain && room.teamId) {\n\t\t\treturn setModal(<DeleteTeamModal onConfirm={handleDeleteTeam} onCancel={(): void => setModal(null)} teamId={room.teamId} />);\n\t\t}\n\n\t\tconst handleDeleteRoom = async () => {\n\t\t\tdeleteRoomMutation.mutateAsync({ roomId: room._id });\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal\n\t\t\t\ttitle={t('Delete_roomType', { roomType })}\n\t\t\t\tvariant='danger'\n\t\t\t\tonConfirm={handleDeleteRoom}\n\t\t\t\tonCancel={(): void => setModal(null)}\n\t\t\t\tconfirmText={t('Yes_delete_it')}\n\t\t\t>\n\t\t\t\t{t('Delete_Room_Warning', { roomType })}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\treturn { handleDelete, canDeleteRoom, isDeleting };\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/hooks/roomActions/useDeleteRoom.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/hooks/roomActions/useDeleteRoom.tsx","inputSourceMap":{"version":3,"file":"client/views/hooks/roomActions/useDeleteRoom.tsx","sourceRoot":"","sources":["client/views/hooks/roomActions/useDeleteRoom.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IRoom, RoomAdminFieldsType } from '@rocket.chat/core-typings';\nimport { isRoomFederated } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useToastMessageDispatch, useRouter, usePermission, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useMutation, useQuery } from '@tanstack/react-query';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport GenericModal from '../../../components/GenericModal';\nimport DeleteTeamModal from '../../teams/contextualBar/info/DeleteTeam';\n\nexport const useDeleteRoom = (room: IRoom | Pick<IRoom, RoomAdminFieldsType>, { reload }: { reload?: () => void } = {}) => {\n\tconst { t } = useTranslation();\n\tconst router = useRouter();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\t// eslint-disable-next-line no-nested-ternary\n\tconst roomType = 'prid' in room ? 'discussion' : room.teamId && room.teamMain ? 'team' : 'channel';\n\tconst isAdminRoute = router.getRouteName() === 'admin-rooms';\n\n\tconst deleteRoomEndpoint = useEndpoint('POST', '/v1/rooms.delete');\n\tconst deleteTeamEndpoint = useEndpoint('POST', '/v1/teams.delete');\n\tconst teamsInfoEndpoint = useEndpoint('GET', '/v1/teams.info');\n\n\tconst teamId = room.teamId || '';\n\tconst { data: teamInfoData } = useQuery(['teamId', teamId], async () => teamsInfoEndpoint({ teamId }), {\n\t\tkeepPreviousData: true,\n\t\tretry: false,\n\t\tenabled: room.teamId !== '',\n\t});\n\n\tconst hasPermissionToDeleteRoom = usePermission(`delete-${room.t}`, room._id);\n\tconst hasPermissionToDeleteTeamRoom = usePermission(`delete-team-${room.t === 'c' ? 'channel' : 'group'}`, teamInfoData?.teamInfo.roomId);\n\tconst isTeamRoom = room.teamId;\n\tconst canDeleteRoom = isRoomFederated(room) ? false : hasPermissionToDeleteRoom && (!isTeamRoom || hasPermissionToDeleteTeamRoom);\n\n\tconst deleteRoomMutation = useMutation({\n\t\tmutationFn: deleteRoomEndpoint,\n\t\tonSuccess: () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Deleted_roomType', { roomName: room.name, roomType }) });\n\t\t\tif (isAdminRoute) {\n\t\t\t\treturn router.navigate('/admin/rooms');\n\t\t\t}\n\n\t\t\treturn router.navigate('/home');\n\t\t},\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tsetModal(null);\n\t\t\treload?.();\n\t\t},\n\t});\n\n\tconst deleteTeamMutation = useMutation({\n\t\tmutationFn: deleteTeamEndpoint,\n\t\tonSuccess: () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Team_has_been_deleted') });\n\t\t\tif (isAdminRoute) {\n\t\t\t\treturn router.navigate('/admin/rooms');\n\t\t\t}\n\n\t\t\treturn router.navigate('/home');\n\t\t},\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tsetModal(null);\n\t\t\treload?.();\n\t\t},\n\t});\n\n\tconst isDeleting = deleteTeamMutation.isLoading || deleteRoomMutation.isLoading;\n\n\tconst handleDelete = useMutableCallback(() => {\n\t\tconst handleDeleteTeam = async (roomsToRemove: IRoom['_id'][]) => {\n\t\t\tif (!room.teamId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdeleteTeamMutation.mutateAsync({ teamId: room.teamId, ...(roomsToRemove.length && { roomsToRemove }) });\n\t\t};\n\n\t\tif (room.teamMain && room.teamId) {\n\t\t\treturn setModal(<DeleteTeamModal onConfirm={handleDeleteTeam} onCancel={(): void => setModal(null)} teamId={room.teamId} />);\n\t\t}\n\n\t\tconst handleDeleteRoom = async () => {\n\t\t\tdeleteRoomMutation.mutateAsync({ roomId: room._id });\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal\n\t\t\t\ttitle={t('Delete_roomType', { roomType })}\n\t\t\t\tvariant='danger'\n\t\t\t\tonConfirm={handleDeleteRoom}\n\t\t\t\tonCancel={(): void => setModal(null)}\n\t\t\t\tconfirmText={t('Yes_delete_it')}\n\t\t\t>\n\t\t\t\t{t('Delete_Room_Warning', { roomType })}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\treturn { handleDelete, canDeleteRoom, isDeleting };\n};\n"]}}},"code":"let _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 0);\nmodule.export({\n  useDeleteRoom: () => useDeleteRoom\n});\nlet isRoomFederated;\nmodule.link(\"@rocket.chat/core-typings\", {\n  isRoomFederated(v) {\n    isRoomFederated = v;\n  }\n}, 0);\nlet useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback(v) {\n    useMutableCallback = v;\n  }\n}, 1);\nlet useSetModal, useToastMessageDispatch, useRouter, usePermission, useEndpoint;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useSetModal(v) {\n    useSetModal = v;\n  },\n  useToastMessageDispatch(v) {\n    useToastMessageDispatch = v;\n  },\n  useRouter(v) {\n    useRouter = v;\n  },\n  usePermission(v) {\n    usePermission = v;\n  },\n  useEndpoint(v) {\n    useEndpoint = v;\n  }\n}, 2);\nlet useMutation, useQuery;\nmodule.link(\"@tanstack/react-query\", {\n  useMutation(v) {\n    useMutation = v;\n  },\n  useQuery(v) {\n    useQuery = v;\n  }\n}, 3);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n}, 4);\nlet useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 5);\nlet GenericModal;\nmodule.link(\"../../../components/GenericModal\", {\n  default(v) {\n    GenericModal = v;\n  }\n}, 6);\nlet DeleteTeamModal;\nmodule.link(\"../../teams/contextualBar/info/DeleteTeam\", {\n  default(v) {\n    DeleteTeamModal = v;\n  }\n}, 7);\nconst useDeleteRoom = function (room) {\n  let {\n    reload\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    t\n  } = useTranslation();\n  const router = useRouter();\n  const setModal = useSetModal();\n  const dispatchToastMessage = useToastMessageDispatch();\n  // eslint-disable-next-line no-nested-ternary\n  const roomType = 'prid' in room ? 'discussion' : room.teamId && room.teamMain ? 'team' : 'channel';\n  const isAdminRoute = router.getRouteName() === 'admin-rooms';\n  const deleteRoomEndpoint = useEndpoint('POST', '/v1/rooms.delete');\n  const deleteTeamEndpoint = useEndpoint('POST', '/v1/teams.delete');\n  const teamsInfoEndpoint = useEndpoint('GET', '/v1/teams.info');\n  const teamId = room.teamId || '';\n  const {\n    data: teamInfoData\n  } = useQuery(['teamId', teamId], async () => teamsInfoEndpoint({\n    teamId\n  }), {\n    keepPreviousData: true,\n    retry: false,\n    enabled: room.teamId !== ''\n  });\n  const hasPermissionToDeleteRoom = usePermission(\"delete-\".concat(room.t), room._id);\n  const hasPermissionToDeleteTeamRoom = usePermission(\"delete-team-\".concat(room.t === 'c' ? 'channel' : 'group'), teamInfoData === null || teamInfoData === void 0 ? void 0 : teamInfoData.teamInfo.roomId);\n  const isTeamRoom = room.teamId;\n  const canDeleteRoom = isRoomFederated(room) ? false : hasPermissionToDeleteRoom && (!isTeamRoom || hasPermissionToDeleteTeamRoom);\n  const deleteRoomMutation = useMutation({\n    mutationFn: deleteRoomEndpoint,\n    onSuccess: () => {\n      dispatchToastMessage({\n        type: 'success',\n        message: t('Deleted_roomType', {\n          roomName: room.name,\n          roomType\n        })\n      });\n      if (isAdminRoute) {\n        return router.navigate('/admin/rooms');\n      }\n      return router.navigate('/home');\n    },\n    onError: error => {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    },\n    onSettled: () => {\n      setModal(null);\n      reload === null || reload === void 0 ? void 0 : reload();\n    }\n  });\n  const deleteTeamMutation = useMutation({\n    mutationFn: deleteTeamEndpoint,\n    onSuccess: () => {\n      dispatchToastMessage({\n        type: 'success',\n        message: t('Team_has_been_deleted')\n      });\n      if (isAdminRoute) {\n        return router.navigate('/admin/rooms');\n      }\n      return router.navigate('/home');\n    },\n    onError: error => {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    },\n    onSettled: () => {\n      setModal(null);\n      reload === null || reload === void 0 ? void 0 : reload();\n    }\n  });\n  const isDeleting = deleteTeamMutation.isLoading || deleteRoomMutation.isLoading;\n  const handleDelete = useMutableCallback(() => {\n    const handleDeleteTeam = async roomsToRemove => {\n      if (!room.teamId) {\n        return;\n      }\n      deleteTeamMutation.mutateAsync(_objectSpread({\n        teamId: room.teamId\n      }, roomsToRemove.length && {\n        roomsToRemove\n      }));\n    };\n    if (room.teamMain && room.teamId) {\n      return setModal( /*#__PURE__*/React.createElement(DeleteTeamModal, {\n        onConfirm: handleDeleteTeam,\n        onCancel: () => setModal(null),\n        teamId: room.teamId\n      }));\n    }\n    const handleDeleteRoom = async () => {\n      deleteRoomMutation.mutateAsync({\n        roomId: room._id\n      });\n    };\n    setModal( /*#__PURE__*/React.createElement(GenericModal, {\n      title: t('Delete_roomType', {\n        roomType\n      }),\n      variant: \"danger\",\n      onConfirm: handleDeleteRoom,\n      onCancel: () => setModal(null),\n      confirmText: t('Yes_delete_it')\n    }, t('Delete_Room_Warning', {\n      roomType\n    })));\n  });\n  return {\n    handleDelete,\n    canDeleteRoom,\n    isDeleting\n  };\n};","map":{"version":3,"names":["_objectSpread","module","link","default","v","export","useDeleteRoom","isRoomFederated","useMutableCallback","useSetModal","useToastMessageDispatch","useRouter","usePermission","useEndpoint","useMutation","useQuery","React","useTranslation","GenericModal","DeleteTeamModal","room","reload","arguments","length","undefined","t","router","setModal","dispatchToastMessage","roomType","teamId","teamMain","isAdminRoute","getRouteName","deleteRoomEndpoint","deleteTeamEndpoint","teamsInfoEndpoint","data","teamInfoData","keepPreviousData","retry","enabled","hasPermissionToDeleteRoom","concat","_id","hasPermissionToDeleteTeamRoom","teamInfo","roomId","isTeamRoom","canDeleteRoom","deleteRoomMutation","mutationFn","onSuccess","type","message","roomName","name","navigate","onError","error","onSettled","deleteTeamMutation","isDeleting","isLoading","handleDelete","handleDeleteTeam","roomsToRemove","mutateAsync","createElement","onConfirm","onCancel","handleDeleteRoom","title","variant","confirmText"],"sources":["client/views/hooks/roomActions/useDeleteRoom.tsx"],"sourcesContent":["import type { IRoom, RoomAdminFieldsType } from '@rocket.chat/core-typings';\nimport { isRoomFederated } from '@rocket.chat/core-typings';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useSetModal, useToastMessageDispatch, useRouter, usePermission, useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useMutation, useQuery } from '@tanstack/react-query';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport GenericModal from '../../../components/GenericModal';\nimport DeleteTeamModal from '../../teams/contextualBar/info/DeleteTeam';\n\nexport const useDeleteRoom = (room: IRoom | Pick<IRoom, RoomAdminFieldsType>, { reload }: { reload?: () => void } = {}) => {\n\tconst { t } = useTranslation();\n\tconst router = useRouter();\n\tconst setModal = useSetModal();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\t// eslint-disable-next-line no-nested-ternary\n\tconst roomType = 'prid' in room ? 'discussion' : room.teamId && room.teamMain ? 'team' : 'channel';\n\tconst isAdminRoute = router.getRouteName() === 'admin-rooms';\n\n\tconst deleteRoomEndpoint = useEndpoint('POST', '/v1/rooms.delete');\n\tconst deleteTeamEndpoint = useEndpoint('POST', '/v1/teams.delete');\n\tconst teamsInfoEndpoint = useEndpoint('GET', '/v1/teams.info');\n\n\tconst teamId = room.teamId || '';\n\tconst { data: teamInfoData } = useQuery(['teamId', teamId], async () => teamsInfoEndpoint({ teamId }), {\n\t\tkeepPreviousData: true,\n\t\tretry: false,\n\t\tenabled: room.teamId !== '',\n\t});\n\n\tconst hasPermissionToDeleteRoom = usePermission(`delete-${room.t}`, room._id);\n\tconst hasPermissionToDeleteTeamRoom = usePermission(`delete-team-${room.t === 'c' ? 'channel' : 'group'}`, teamInfoData?.teamInfo.roomId);\n\tconst isTeamRoom = room.teamId;\n\tconst canDeleteRoom = isRoomFederated(room) ? false : hasPermissionToDeleteRoom && (!isTeamRoom || hasPermissionToDeleteTeamRoom);\n\n\tconst deleteRoomMutation = useMutation({\n\t\tmutationFn: deleteRoomEndpoint,\n\t\tonSuccess: () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Deleted_roomType', { roomName: room.name, roomType }) });\n\t\t\tif (isAdminRoute) {\n\t\t\t\treturn router.navigate('/admin/rooms');\n\t\t\t}\n\n\t\t\treturn router.navigate('/home');\n\t\t},\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tsetModal(null);\n\t\t\treload?.();\n\t\t},\n\t});\n\n\tconst deleteTeamMutation = useMutation({\n\t\tmutationFn: deleteTeamEndpoint,\n\t\tonSuccess: () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Team_has_been_deleted') });\n\t\t\tif (isAdminRoute) {\n\t\t\t\treturn router.navigate('/admin/rooms');\n\t\t\t}\n\n\t\t\treturn router.navigate('/home');\n\t\t},\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tsetModal(null);\n\t\t\treload?.();\n\t\t},\n\t});\n\n\tconst isDeleting = deleteTeamMutation.isLoading || deleteRoomMutation.isLoading;\n\n\tconst handleDelete = useMutableCallback(() => {\n\t\tconst handleDeleteTeam = async (roomsToRemove: IRoom['_id'][]) => {\n\t\t\tif (!room.teamId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdeleteTeamMutation.mutateAsync({ teamId: room.teamId, ...(roomsToRemove.length && { roomsToRemove }) });\n\t\t};\n\n\t\tif (room.teamMain && room.teamId) {\n\t\t\treturn setModal(<DeleteTeamModal onConfirm={handleDeleteTeam} onCancel={(): void => setModal(null)} teamId={room.teamId} />);\n\t\t}\n\n\t\tconst handleDeleteRoom = async () => {\n\t\t\tdeleteRoomMutation.mutateAsync({ roomId: room._id });\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal\n\t\t\t\ttitle={t('Delete_roomType', { roomType })}\n\t\t\t\tvariant='danger'\n\t\t\t\tonConfirm={handleDeleteRoom}\n\t\t\t\tonCancel={(): void => setModal(null)}\n\t\t\t\tconfirmText={t('Yes_delete_it')}\n\t\t\t>\n\t\t\t\t{t('Delete_Room_Warning', { roomType })}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\treturn { handleDelete, canDeleteRoom, isDeleting };\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"b0dc57f798eec9d956a3ca8d0430c8cc32533c86"}
