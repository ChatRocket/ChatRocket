{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/meet/MeetPage.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/meet/MeetPage.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/meet/MeetPage.tsx","inputSourceMap":{"version":3,"file":"client/views/meet/MeetPage.tsx","sourceRoot":"","sources":["client/views/meet/MeetPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Button, Box, Flex } from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport { useRouteParameter, useSearchParameter, useTranslation } from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport React, { useEffect, useState, useCallback } from 'react';\n\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\nimport { useEmbeddedLayout } from '../../hooks/useEmbeddedLayout';\nimport NotFoundPage from '../notFound/NotFoundPage';\nimport PageLoading from '../root/PageLoading';\nimport CallPage from './CallPage';\nimport './styles.css';\n\nconst MeetPage = () => {\n\tconst t = useTranslation();\n\tconst [isRoomMember, setIsRoomMember] = useState(false);\n\tconst [status, setStatus] = useState(null);\n\tconst [visitorId, setVisitorId] = useState(null);\n\tconst roomId = useRouteParameter('rid');\n\tconst visitorToken = useSearchParameter('token');\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\tconst [visitorName, setVisitorName] = useState('');\n\tconst [agentName, setAgentName] = useState('');\n\tconst [callStartTime, setCallStartTime] = useState(undefined);\n\n\tconst isMobileDevice = (): boolean => window.innerWidth <= 450;\n\tconst closeCallTab = (): void => window.close();\n\n\tconst setupCallForVisitor = useCallback(async () => {\n\t\tif (!visitorToken || !roomId) {\n\t\t\tthrow new Error('Missing parameters');\n\t\t}\n\n\t\tconst room = (await sdk.rest.get('/v1/livechat/room', {\n\t\t\ttoken: visitorToken,\n\t\t\trid: roomId,\n\t\t})) as any;\n\t\tif (room?.room?.v?.token === visitorToken) {\n\t\t\tsetVisitorId(room.room.v._id);\n\t\t\tsetVisitorName(room.room.fname);\n\t\t\troom?.room?.responseBy?.username ? setAgentName(room.room.responseBy.username) : setAgentName(room.room.servedBy.username);\n\t\t\tsetStatus(room?.room?.callStatus || 'ended');\n\t\t\tsetCallStartTime(room.room.webRtcCallStartTime);\n\t\t\treturn setIsRoomMember(true);\n\t\t}\n\t}, [visitorToken, roomId]);\n\n\tconst setupCallForAgent = useCallback(async () => {\n\t\tif (!roomId) {\n\t\t\tthrow new Error('Missing parameters');\n\t\t}\n\n\t\tconst room = (await sdk.rest.get('/v1/rooms.info', { roomId })) as any;\n\t\tif (room?.room?.servedBy?._id === Meteor.userId()) {\n\t\t\tsetVisitorName(room.room.fname);\n\t\t\troom?.room?.responseBy?.username ? setAgentName(room.room.responseBy.username) : setAgentName(room.room.servedBy.username);\n\t\t\tsetStatus(room?.room?.callStatus || 'ended');\n\t\t\tsetCallStartTime(room.room.webRtcCallStartTime);\n\t\t\treturn setIsRoomMember(true);\n\t\t}\n\t}, [roomId]);\n\n\tuseEffect(() => {\n\t\tif (visitorToken) {\n\t\t\tsetupCallForVisitor();\n\t\t\treturn;\n\t\t}\n\t\tsetupCallForAgent();\n\t}, [setupCallForAgent, setupCallForVisitor, visitorToken]);\n\n\tif (status === null) {\n\t\treturn <PageLoading />;\n\t}\n\n\tif (!isRoomMember) {\n\t\treturn <NotFoundPage />;\n\t}\n\n\tif (status === 'ended') {\n\t\treturn (\n\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<UserAvatar username={visitorToken ? visitorName : agentName} size={isMobileDevice() ? 'x32' : 'x48'} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\ttop: isMobileDevice() ? '30%' : '20%',\n\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<UserAvatar username={visitorToken ? agentName : visitorName} size='x124' />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<p style={{ color: 'white', fontSize: 16, margin: 15 }}>Call Ended!</p>\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\t\tfontSize: isMobileDevice() ? 15 : 22,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{visitorToken ? agentName : visitorName}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box position='absolute' alignItems='center' style={{ bottom: '20%' }}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ticon='cross'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={t('Close_Window')}\n\t\t\t\t\t\t\tonClick={closeCallTab}\n\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\tborderColor='extra-dark'\n\t\t\t\t\t\t></Button>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Flex.Container>\n\t\t);\n\t}\n\n\treturn (\n\t\t<CallPage\n\t\t\troomId={roomId}\n\t\t\tstatus={status}\n\t\t\tvisitorToken={visitorToken}\n\t\t\tvisitorId={visitorId}\n\t\t\tsetStatus={setStatus}\n\t\t\tvisitorName={visitorName}\n\t\t\tagentName={agentName}\n\t\t\tisLayoutEmbedded={isLayoutEmbedded}\n\t\t\tcallStartTime={callStartTime}\n\t\t/>\n\t);\n};\n\nexport default MeetPage;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/meet/MeetPage.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/meet/MeetPage.tsx","inputSourceMap":{"version":3,"file":"client/views/meet/MeetPage.tsx","sourceRoot":"","sources":["client/views/meet/MeetPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Button, Box, Flex } from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport { useRouteParameter, useSearchParameter, useTranslation } from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport React, { useEffect, useState, useCallback } from 'react';\n\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\nimport { useEmbeddedLayout } from '../../hooks/useEmbeddedLayout';\nimport NotFoundPage from '../notFound/NotFoundPage';\nimport PageLoading from '../root/PageLoading';\nimport CallPage from './CallPage';\nimport './styles.css';\n\nconst MeetPage = () => {\n\tconst t = useTranslation();\n\tconst [isRoomMember, setIsRoomMember] = useState(false);\n\tconst [status, setStatus] = useState(null);\n\tconst [visitorId, setVisitorId] = useState(null);\n\tconst roomId = useRouteParameter('rid');\n\tconst visitorToken = useSearchParameter('token');\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\tconst [visitorName, setVisitorName] = useState('');\n\tconst [agentName, setAgentName] = useState('');\n\tconst [callStartTime, setCallStartTime] = useState(undefined);\n\n\tconst isMobileDevice = (): boolean => window.innerWidth <= 450;\n\tconst closeCallTab = (): void => window.close();\n\n\tconst setupCallForVisitor = useCallback(async () => {\n\t\tif (!visitorToken || !roomId) {\n\t\t\tthrow new Error('Missing parameters');\n\t\t}\n\n\t\tconst room = (await sdk.rest.get('/v1/livechat/room', {\n\t\t\ttoken: visitorToken,\n\t\t\trid: roomId,\n\t\t})) as any;\n\t\tif (room?.room?.v?.token === visitorToken) {\n\t\t\tsetVisitorId(room.room.v._id);\n\t\t\tsetVisitorName(room.room.fname);\n\t\t\troom?.room?.responseBy?.username ? setAgentName(room.room.responseBy.username) : setAgentName(room.room.servedBy.username);\n\t\t\tsetStatus(room?.room?.callStatus || 'ended');\n\t\t\tsetCallStartTime(room.room.webRtcCallStartTime);\n\t\t\treturn setIsRoomMember(true);\n\t\t}\n\t}, [visitorToken, roomId]);\n\n\tconst setupCallForAgent = useCallback(async () => {\n\t\tif (!roomId) {\n\t\t\tthrow new Error('Missing parameters');\n\t\t}\n\n\t\tconst room = (await sdk.rest.get('/v1/rooms.info', { roomId })) as any;\n\t\tif (room?.room?.servedBy?._id === Meteor.userId()) {\n\t\t\tsetVisitorName(room.room.fname);\n\t\t\troom?.room?.responseBy?.username ? setAgentName(room.room.responseBy.username) : setAgentName(room.room.servedBy.username);\n\t\t\tsetStatus(room?.room?.callStatus || 'ended');\n\t\t\tsetCallStartTime(room.room.webRtcCallStartTime);\n\t\t\treturn setIsRoomMember(true);\n\t\t}\n\t}, [roomId]);\n\n\tuseEffect(() => {\n\t\tif (visitorToken) {\n\t\t\tsetupCallForVisitor();\n\t\t\treturn;\n\t\t}\n\t\tsetupCallForAgent();\n\t}, [setupCallForAgent, setupCallForVisitor, visitorToken]);\n\n\tif (status === null) {\n\t\treturn <PageLoading />;\n\t}\n\n\tif (!isRoomMember) {\n\t\treturn <NotFoundPage />;\n\t}\n\n\tif (status === 'ended') {\n\t\treturn (\n\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<UserAvatar username={visitorToken ? visitorName : agentName} size={isMobileDevice() ? 'x32' : 'x48'} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\ttop: isMobileDevice() ? '30%' : '20%',\n\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<UserAvatar username={visitorToken ? agentName : visitorName} size='x124' />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<p style={{ color: 'white', fontSize: 16, margin: 15 }}>Call Ended!</p>\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\t\tfontSize: isMobileDevice() ? 15 : 22,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{visitorToken ? agentName : visitorName}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box position='absolute' alignItems='center' style={{ bottom: '20%' }}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ticon='cross'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={t('Close_Window')}\n\t\t\t\t\t\t\tonClick={closeCallTab}\n\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\tborderColor='extra-dark'\n\t\t\t\t\t\t></Button>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Flex.Container>\n\t\t);\n\t}\n\n\treturn (\n\t\t<CallPage\n\t\t\troomId={roomId}\n\t\t\tstatus={status}\n\t\t\tvisitorToken={visitorToken}\n\t\t\tvisitorId={visitorId}\n\t\t\tsetStatus={setStatus}\n\t\t\tvisitorName={visitorName}\n\t\t\tagentName={agentName}\n\t\t\tisLayoutEmbedded={isLayoutEmbedded}\n\t\t\tcallStartTime={callStartTime}\n\t\t/>\n\t);\n};\n\nexport default MeetPage;\n"]}}},"code":"let Button, Box, Flex;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Button(v) {\n    Button = v;\n  },\n  Box(v) {\n    Box = v;\n  },\n  Flex(v) {\n    Flex = v;\n  }\n}, 0);\nlet UserAvatar;\nmodule.link(\"@rocket.chat/ui-avatar\", {\n  UserAvatar(v) {\n    UserAvatar = v;\n  }\n}, 1);\nlet useRouteParameter, useSearchParameter, useTranslation;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useRouteParameter(v) {\n    useRouteParameter = v;\n  },\n  useSearchParameter(v) {\n    useSearchParameter = v;\n  },\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 2);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n}, 3);\nlet React, useEffect, useState, useCallback;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  },\n  useState(v) {\n    useState = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  }\n}, 4);\nlet sdk;\nmodule.link(\"../../../app/utils/client/lib/SDKClient\", {\n  sdk(v) {\n    sdk = v;\n  }\n}, 5);\nlet useEmbeddedLayout;\nmodule.link(\"../../hooks/useEmbeddedLayout\", {\n  useEmbeddedLayout(v) {\n    useEmbeddedLayout = v;\n  }\n}, 6);\nlet NotFoundPage;\nmodule.link(\"../notFound/NotFoundPage\", {\n  default(v) {\n    NotFoundPage = v;\n  }\n}, 7);\nlet PageLoading;\nmodule.link(\"../root/PageLoading\", {\n  default(v) {\n    PageLoading = v;\n  }\n}, 8);\nlet CallPage;\nmodule.link(\"./CallPage\", {\n  default(v) {\n    CallPage = v;\n  }\n}, 9);\nmodule.link(\"./styles.css\");\nconst MeetPage = () => {\n  const t = useTranslation();\n  const [isRoomMember, setIsRoomMember] = useState(false);\n  const [status, setStatus] = useState(null);\n  const [visitorId, setVisitorId] = useState(null);\n  const roomId = useRouteParameter('rid');\n  const visitorToken = useSearchParameter('token');\n  const isLayoutEmbedded = useEmbeddedLayout();\n  const [visitorName, setVisitorName] = useState('');\n  const [agentName, setAgentName] = useState('');\n  const [callStartTime, setCallStartTime] = useState(undefined);\n  const isMobileDevice = () => window.innerWidth <= 450;\n  const closeCallTab = () => window.close();\n  const setupCallForVisitor = useCallback(async () => {\n    var _room$room, _room$room$v;\n    if (!visitorToken || !roomId) {\n      throw new Error('Missing parameters');\n    }\n    const room = await sdk.rest.get('/v1/livechat/room', {\n      token: visitorToken,\n      rid: roomId\n    });\n    if ((room === null || room === void 0 ? void 0 : (_room$room = room.room) === null || _room$room === void 0 ? void 0 : (_room$room$v = _room$room.v) === null || _room$room$v === void 0 ? void 0 : _room$room$v.token) === visitorToken) {\n      var _room$room2, _room$room2$responseB, _room$room3;\n      setVisitorId(room.room.v._id);\n      setVisitorName(room.room.fname);\n      room !== null && room !== void 0 && (_room$room2 = room.room) !== null && _room$room2 !== void 0 && (_room$room2$responseB = _room$room2.responseBy) !== null && _room$room2$responseB !== void 0 && _room$room2$responseB.username ? setAgentName(room.room.responseBy.username) : setAgentName(room.room.servedBy.username);\n      setStatus((room === null || room === void 0 ? void 0 : (_room$room3 = room.room) === null || _room$room3 === void 0 ? void 0 : _room$room3.callStatus) || 'ended');\n      setCallStartTime(room.room.webRtcCallStartTime);\n      return setIsRoomMember(true);\n    }\n  }, [visitorToken, roomId]);\n  const setupCallForAgent = useCallback(async () => {\n    var _room$room4, _room$room4$servedBy;\n    if (!roomId) {\n      throw new Error('Missing parameters');\n    }\n    const room = await sdk.rest.get('/v1/rooms.info', {\n      roomId\n    });\n    if ((room === null || room === void 0 ? void 0 : (_room$room4 = room.room) === null || _room$room4 === void 0 ? void 0 : (_room$room4$servedBy = _room$room4.servedBy) === null || _room$room4$servedBy === void 0 ? void 0 : _room$room4$servedBy._id) === Meteor.userId()) {\n      var _room$room5, _room$room5$responseB, _room$room6;\n      setVisitorName(room.room.fname);\n      room !== null && room !== void 0 && (_room$room5 = room.room) !== null && _room$room5 !== void 0 && (_room$room5$responseB = _room$room5.responseBy) !== null && _room$room5$responseB !== void 0 && _room$room5$responseB.username ? setAgentName(room.room.responseBy.username) : setAgentName(room.room.servedBy.username);\n      setStatus((room === null || room === void 0 ? void 0 : (_room$room6 = room.room) === null || _room$room6 === void 0 ? void 0 : _room$room6.callStatus) || 'ended');\n      setCallStartTime(room.room.webRtcCallStartTime);\n      return setIsRoomMember(true);\n    }\n  }, [roomId]);\n  useEffect(() => {\n    if (visitorToken) {\n      setupCallForVisitor();\n      return;\n    }\n    setupCallForAgent();\n  }, [setupCallForAgent, setupCallForVisitor, visitorToken]);\n  if (status === null) {\n    return /*#__PURE__*/React.createElement(PageLoading, null);\n  }\n  if (!isRoomMember) {\n    return /*#__PURE__*/React.createElement(NotFoundPage, null);\n  }\n  if (status === 'ended') {\n    return /*#__PURE__*/React.createElement(Flex.Container, {\n      direction: \"column\",\n      justifyContent: \"center\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      width: \"full\",\n      minHeight: \"sh\",\n      alignItems: \"center\",\n      backgroundColor: \"dark\",\n      overflow: \"hidden\",\n      position: \"relative\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      position: \"absolute\",\n      style: {\n        top: '5%',\n        right: '2%'\n      },\n      className: \"Self_Video\",\n      backgroundColor: \"dark\",\n      alignItems: \"center\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      style: {\n        display: 'block',\n        margin: 'auto'\n      }\n    }, /*#__PURE__*/React.createElement(UserAvatar, {\n      username: visitorToken ? visitorName : agentName,\n      size: isMobileDevice() ? 'x32' : 'x48'\n    }))), /*#__PURE__*/React.createElement(Box, {\n      position: \"absolute\",\n      zIndex: 1,\n      style: {\n        top: isMobileDevice() ? '30%' : '20%',\n        display: 'flex',\n        justifyContent: 'center',\n        flexDirection: 'column'\n      },\n      alignItems: \"center\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      style: {\n        display: 'block',\n        margin: 'auto'\n      }\n    }, /*#__PURE__*/React.createElement(UserAvatar, {\n      username: visitorToken ? agentName : visitorName,\n      size: \"x124\"\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        color: 'white',\n        fontSize: 16,\n        margin: 15\n      }\n    }, \"Call Ended!\"), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        color: 'white',\n        fontSize: isMobileDevice() ? 15 : 22\n      }\n    }, visitorToken ? agentName : visitorName)), /*#__PURE__*/React.createElement(Box, {\n      position: \"absolute\",\n      alignItems: \"center\",\n      style: {\n        bottom: '20%'\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      icon: \"cross\",\n      square: true,\n      title: t('Close_Window'),\n      onClick: closeCallTab,\n      backgroundColor: \"dark\",\n      borderColor: \"extra-dark\"\n    }))));\n  }\n  return /*#__PURE__*/React.createElement(CallPage, {\n    roomId: roomId,\n    status: status,\n    visitorToken: visitorToken,\n    visitorId: visitorId,\n    setStatus: setStatus,\n    visitorName: visitorName,\n    agentName: agentName,\n    isLayoutEmbedded: isLayoutEmbedded,\n    callStartTime: callStartTime\n  });\n};\nmodule.exportDefault(MeetPage);","map":{"version":3,"names":["Button","Box","Flex","module","link","v","UserAvatar","useRouteParameter","useSearchParameter","useTranslation","Meteor","React","useEffect","useState","useCallback","default","sdk","useEmbeddedLayout","NotFoundPage","PageLoading","CallPage","MeetPage","t","isRoomMember","setIsRoomMember","status","setStatus","visitorId","setVisitorId","roomId","visitorToken","isLayoutEmbedded","visitorName","setVisitorName","agentName","setAgentName","callStartTime","setCallStartTime","undefined","isMobileDevice","window","innerWidth","closeCallTab","close","setupCallForVisitor","_room$room","_room$room$v","Error","room","rest","get","token","rid","_room$room2","_room$room2$responseB","_room$room3","_id","fname","responseBy","username","servedBy","callStatus","webRtcCallStartTime","setupCallForAgent","_room$room4","_room$room4$servedBy","userId","_room$room5","_room$room5$responseB","_room$room6","createElement","Container","direction","justifyContent","width","minHeight","alignItems","backgroundColor","overflow","position","style","top","right","className","display","margin","size","zIndex","flexDirection","color","fontSize","bottom","icon","square","title","onClick","borderColor","exportDefault"],"sources":["client/views/meet/MeetPage.tsx"],"sourcesContent":["import { Button, Box, Flex } from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport { useRouteParameter, useSearchParameter, useTranslation } from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport React, { useEffect, useState, useCallback } from 'react';\n\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\nimport { useEmbeddedLayout } from '../../hooks/useEmbeddedLayout';\nimport NotFoundPage from '../notFound/NotFoundPage';\nimport PageLoading from '../root/PageLoading';\nimport CallPage from './CallPage';\nimport './styles.css';\n\nconst MeetPage = () => {\n\tconst t = useTranslation();\n\tconst [isRoomMember, setIsRoomMember] = useState(false);\n\tconst [status, setStatus] = useState(null);\n\tconst [visitorId, setVisitorId] = useState(null);\n\tconst roomId = useRouteParameter('rid');\n\tconst visitorToken = useSearchParameter('token');\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\tconst [visitorName, setVisitorName] = useState('');\n\tconst [agentName, setAgentName] = useState('');\n\tconst [callStartTime, setCallStartTime] = useState(undefined);\n\n\tconst isMobileDevice = (): boolean => window.innerWidth <= 450;\n\tconst closeCallTab = (): void => window.close();\n\n\tconst setupCallForVisitor = useCallback(async () => {\n\t\tif (!visitorToken || !roomId) {\n\t\t\tthrow new Error('Missing parameters');\n\t\t}\n\n\t\tconst room = (await sdk.rest.get('/v1/livechat/room', {\n\t\t\ttoken: visitorToken,\n\t\t\trid: roomId,\n\t\t})) as any;\n\t\tif (room?.room?.v?.token === visitorToken) {\n\t\t\tsetVisitorId(room.room.v._id);\n\t\t\tsetVisitorName(room.room.fname);\n\t\t\troom?.room?.responseBy?.username ? setAgentName(room.room.responseBy.username) : setAgentName(room.room.servedBy.username);\n\t\t\tsetStatus(room?.room?.callStatus || 'ended');\n\t\t\tsetCallStartTime(room.room.webRtcCallStartTime);\n\t\t\treturn setIsRoomMember(true);\n\t\t}\n\t}, [visitorToken, roomId]);\n\n\tconst setupCallForAgent = useCallback(async () => {\n\t\tif (!roomId) {\n\t\t\tthrow new Error('Missing parameters');\n\t\t}\n\n\t\tconst room = (await sdk.rest.get('/v1/rooms.info', { roomId })) as any;\n\t\tif (room?.room?.servedBy?._id === Meteor.userId()) {\n\t\t\tsetVisitorName(room.room.fname);\n\t\t\troom?.room?.responseBy?.username ? setAgentName(room.room.responseBy.username) : setAgentName(room.room.servedBy.username);\n\t\t\tsetStatus(room?.room?.callStatus || 'ended');\n\t\t\tsetCallStartTime(room.room.webRtcCallStartTime);\n\t\t\treturn setIsRoomMember(true);\n\t\t}\n\t}, [roomId]);\n\n\tuseEffect(() => {\n\t\tif (visitorToken) {\n\t\t\tsetupCallForVisitor();\n\t\t\treturn;\n\t\t}\n\t\tsetupCallForAgent();\n\t}, [setupCallForAgent, setupCallForVisitor, visitorToken]);\n\n\tif (status === null) {\n\t\treturn <PageLoading />;\n\t}\n\n\tif (!isRoomMember) {\n\t\treturn <NotFoundPage />;\n\t}\n\n\tif (status === 'ended') {\n\t\treturn (\n\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<UserAvatar username={visitorToken ? visitorName : agentName} size={isMobileDevice() ? 'x32' : 'x48'} />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\ttop: isMobileDevice() ? '30%' : '20%',\n\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<UserAvatar username={visitorToken ? agentName : visitorName} size='x124' />\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<p style={{ color: 'white', fontSize: 16, margin: 15 }}>Call Ended!</p>\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\t\tfontSize: isMobileDevice() ? 15 : 22,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{visitorToken ? agentName : visitorName}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box position='absolute' alignItems='center' style={{ bottom: '20%' }}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ticon='cross'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={t('Close_Window')}\n\t\t\t\t\t\t\tonClick={closeCallTab}\n\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\tborderColor='extra-dark'\n\t\t\t\t\t\t></Button>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Flex.Container>\n\t\t);\n\t}\n\n\treturn (\n\t\t<CallPage\n\t\t\troomId={roomId}\n\t\t\tstatus={status}\n\t\t\tvisitorToken={visitorToken}\n\t\t\tvisitorId={visitorId}\n\t\t\tsetStatus={setStatus}\n\t\t\tvisitorName={visitorName}\n\t\t\tagentName={agentName}\n\t\t\tisLayoutEmbedded={isLayoutEmbedded}\n\t\t\tcallStartTime={callStartTime}\n\t\t/>\n\t);\n};\n\nexport default MeetPage;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"17e6c50c76438b88cff205ffbc978c54d9cb00c5"}
