{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/ShareLocation/ShareLocationModal.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/ShareLocation/ShareLocationModal.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/ShareLocation/ShareLocationModal.tsx","inputSourceMap":{"version":3,"file":"client/views/room/ShareLocation/ShareLocationModal.tsx","sourceRoot":"","sources":["client/views/room/ShareLocation/ShareLocationModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, IRoom } from '@rocket.chat/core-typings';\nimport { useEndpoint, useTranslation, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React from 'react';\n\nimport GenericModal from '../../../components/GenericModal';\nimport MapView from '../../../components/message/content/location/MapView';\nimport { getGeolocationPermission } from './getGeolocationPermission';\nimport { getGeolocationPosition } from './getGeolocationPosition';\n\ntype ShareLocationModalProps = {\n\trid: IRoom['_id'];\n\ttmid: IMessage['tmid'];\n\tonClose: () => void;\n};\n\nconst ShareLocationModal = ({ rid, tmid, onClose }: ShareLocationModalProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToast = useToastMessageDispatch();\n\tconst { data: permissionData, isLoading: permissionLoading } = useQuery(['geolocationPermission'], getGeolocationPermission);\n\tconst { data: positionData } = useQuery(['geolocationPosition', permissionData], async () => {\n\t\tif (permissionLoading || permissionData === 'prompt' || permissionData === 'denied') {\n\t\t\treturn;\n\t\t}\n\t\treturn getGeolocationPosition();\n\t});\n\n\tconst queryClient = useQueryClient();\n\n\tconst sendMessage = useEndpoint('POST', '/v1/chat.sendMessage');\n\n\tconst onConfirm = (): void => {\n\t\tif (!positionData) {\n\t\t\tthrow new Error('Failed to load position');\n\t\t}\n\t\ttry {\n\t\t\tsendMessage({\n\t\t\t\tmessage: {\n\t\t\t\t\trid,\n\t\t\t\t\ttmid,\n\t\t\t\t\tlocation: {\n\t\t\t\t\t\ttype: 'Point',\n\t\t\t\t\t\tcoordinates: [positionData.coords.longitude, positionData.coords.latitude],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToast({ type: 'error', message: error });\n\t\t} finally {\n\t\t\tonClose();\n\t\t}\n\t};\n\n\tconst onConfirmRequestLocation = async (): Promise<void> => {\n\t\ttry {\n\t\t\tconst position = await getGeolocationPosition();\n\t\t\tqueryClient.setQueryData(['geolocationPosition', 'granted'], position);\n\t\t\tqueryClient.setQueryData(['geolocationPermission'], 'granted');\n\t\t} catch (e) {\n\t\t\tqueryClient.setQueryData(['geolocationPermission'], () => getGeolocationPermission);\n\t\t}\n\t};\n\n\tif (permissionLoading || permissionData === 'prompt') {\n\t\treturn (\n\t\t\t<GenericModal\n\t\t\t\ttitle={t('You_will_be_asked_for_permissions')}\n\t\t\t\tconfirmText={t('Continue')}\n\t\t\t\tonConfirm={onConfirmRequestLocation}\n\t\t\t\tonClose={onClose}\n\t\t\t\tonCancel={onClose}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (permissionData === 'denied' || !positionData) {\n\t\treturn (\n\t\t\t<GenericModal title={t('Cannot_share_your_location')} confirmText={t('Ok')} onConfirm={onClose} onClose={onClose}>\n\t\t\t\t{t('The_necessary_browser_permissions_for_location_sharing_are_not_granted')}\n\t\t\t</GenericModal>\n\t\t);\n\t}\n\n\treturn (\n\t\t<GenericModal title={t('Share_Location_Title')} confirmText={t('Share')} onConfirm={onConfirm} onClose={onClose} onCancel={onClose}>\n\t\t\t<MapView latitude={positionData.coords.latitude} longitude={positionData.coords.longitude} />\n\t\t</GenericModal>\n\t);\n};\n\nexport default ShareLocationModal;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/ShareLocation/ShareLocationModal.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/ShareLocation/ShareLocationModal.tsx","inputSourceMap":{"version":3,"file":"client/views/room/ShareLocation/ShareLocationModal.tsx","sourceRoot":"","sources":["client/views/room/ShareLocation/ShareLocationModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, IRoom } from '@rocket.chat/core-typings';\nimport { useEndpoint, useTranslation, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React from 'react';\n\nimport GenericModal from '../../../components/GenericModal';\nimport MapView from '../../../components/message/content/location/MapView';\nimport { getGeolocationPermission } from './getGeolocationPermission';\nimport { getGeolocationPosition } from './getGeolocationPosition';\n\ntype ShareLocationModalProps = {\n\trid: IRoom['_id'];\n\ttmid: IMessage['tmid'];\n\tonClose: () => void;\n};\n\nconst ShareLocationModal = ({ rid, tmid, onClose }: ShareLocationModalProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToast = useToastMessageDispatch();\n\tconst { data: permissionData, isLoading: permissionLoading } = useQuery(['geolocationPermission'], getGeolocationPermission);\n\tconst { data: positionData } = useQuery(['geolocationPosition', permissionData], async () => {\n\t\tif (permissionLoading || permissionData === 'prompt' || permissionData === 'denied') {\n\t\t\treturn;\n\t\t}\n\t\treturn getGeolocationPosition();\n\t});\n\n\tconst queryClient = useQueryClient();\n\n\tconst sendMessage = useEndpoint('POST', '/v1/chat.sendMessage');\n\n\tconst onConfirm = (): void => {\n\t\tif (!positionData) {\n\t\t\tthrow new Error('Failed to load position');\n\t\t}\n\t\ttry {\n\t\t\tsendMessage({\n\t\t\t\tmessage: {\n\t\t\t\t\trid,\n\t\t\t\t\ttmid,\n\t\t\t\t\tlocation: {\n\t\t\t\t\t\ttype: 'Point',\n\t\t\t\t\t\tcoordinates: [positionData.coords.longitude, positionData.coords.latitude],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToast({ type: 'error', message: error });\n\t\t} finally {\n\t\t\tonClose();\n\t\t}\n\t};\n\n\tconst onConfirmRequestLocation = async (): Promise<void> => {\n\t\ttry {\n\t\t\tconst position = await getGeolocationPosition();\n\t\t\tqueryClient.setQueryData(['geolocationPosition', 'granted'], position);\n\t\t\tqueryClient.setQueryData(['geolocationPermission'], 'granted');\n\t\t} catch (e) {\n\t\t\tqueryClient.setQueryData(['geolocationPermission'], () => getGeolocationPermission);\n\t\t}\n\t};\n\n\tif (permissionLoading || permissionData === 'prompt') {\n\t\treturn (\n\t\t\t<GenericModal\n\t\t\t\ttitle={t('You_will_be_asked_for_permissions')}\n\t\t\t\tconfirmText={t('Continue')}\n\t\t\t\tonConfirm={onConfirmRequestLocation}\n\t\t\t\tonClose={onClose}\n\t\t\t\tonCancel={onClose}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (permissionData === 'denied' || !positionData) {\n\t\treturn (\n\t\t\t<GenericModal title={t('Cannot_share_your_location')} confirmText={t('Ok')} onConfirm={onClose} onClose={onClose}>\n\t\t\t\t{t('The_necessary_browser_permissions_for_location_sharing_are_not_granted')}\n\t\t\t</GenericModal>\n\t\t);\n\t}\n\n\treturn (\n\t\t<GenericModal title={t('Share_Location_Title')} confirmText={t('Share')} onConfirm={onConfirm} onClose={onClose} onCancel={onClose}>\n\t\t\t<MapView latitude={positionData.coords.latitude} longitude={positionData.coords.longitude} />\n\t\t</GenericModal>\n\t);\n};\n\nexport default ShareLocationModal;\n"]}}},"code":"var _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\nvar useEndpoint, useTranslation, useToastMessageDispatch;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  },\n  useTranslation: function (v) {\n    useTranslation = v;\n  },\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  }\n}, 0);\nvar useQuery, useQueryClient;\nmodule.link(\"@tanstack/react-query\", {\n  useQuery: function (v) {\n    useQuery = v;\n  },\n  useQueryClient: function (v) {\n    useQueryClient = v;\n  }\n}, 1);\nvar React;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  }\n}, 2);\nvar GenericModal;\nmodule.link(\"../../../components/GenericModal\", {\n  \"default\": function (v) {\n    GenericModal = v;\n  }\n}, 3);\nvar MapView;\nmodule.link(\"../../../components/message/content/location/MapView\", {\n  \"default\": function (v) {\n    MapView = v;\n  }\n}, 4);\nvar getGeolocationPermission;\nmodule.link(\"./getGeolocationPermission\", {\n  getGeolocationPermission: function (v) {\n    getGeolocationPermission = v;\n  }\n}, 5);\nvar getGeolocationPosition;\nmodule.link(\"./getGeolocationPosition\", {\n  getGeolocationPosition: function (v) {\n    getGeolocationPosition = v;\n  }\n}, 6);\nvar ShareLocationModal = function (_ref) {\n  var rid = _ref.rid,\n    tmid = _ref.tmid,\n    onClose = _ref.onClose;\n  var t = useTranslation();\n  var dispatchToast = useToastMessageDispatch();\n  var _useQuery = useQuery(['geolocationPermission'], getGeolocationPermission),\n    permissionData = _useQuery.data,\n    permissionLoading = _useQuery.isLoading;\n  var _useQuery2 = useQuery(['geolocationPosition', permissionData], function () {\n      function _callee() {\n        return _regeneratorRuntime.async(function () {\n          function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                if (!(permissionLoading || permissionData === 'prompt' || permissionData === 'denied')) {\n                  _context.next = 2;\n                  break;\n                }\n                return _context.abrupt(\"return\");\n              case 2:\n                return _context.abrupt(\"return\", getGeolocationPosition());\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n          return _callee$;\n        }(), null, null, null, Promise);\n      }\n      return _callee;\n    }()),\n    positionData = _useQuery2.data;\n  var queryClient = useQueryClient();\n  var sendMessage = useEndpoint('POST', '/v1/chat.sendMessage');\n  var onConfirm = function () {\n    if (!positionData) {\n      throw new Error('Failed to load position');\n    }\n    try {\n      sendMessage({\n        message: {\n          rid: rid,\n          tmid: tmid,\n          location: {\n            type: 'Point',\n            coordinates: [positionData.coords.longitude, positionData.coords.latitude]\n          }\n        }\n      });\n    } catch (error) {\n      dispatchToast({\n        type: 'error',\n        message: error\n      });\n    } finally {\n      onClose();\n    }\n  };\n  var onConfirmRequestLocation = function () {\n    function _callee2() {\n      var position;\n      return _regeneratorRuntime.async(function () {\n        function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(getGeolocationPosition());\n            case 3:\n              position = _context2.sent;\n              queryClient.setQueryData(['geolocationPosition', 'granted'], position);\n              queryClient.setQueryData(['geolocationPermission'], 'granted');\n              _context2.next = 11;\n              break;\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](0);\n              queryClient.setQueryData(['geolocationPermission'], function () {\n                return getGeolocationPermission;\n              });\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n        return _callee2$;\n      }(), null, null, [[0, 8]], Promise);\n    }\n    return _callee2;\n  }();\n  if (permissionLoading || permissionData === 'prompt') {\n    return /*#__PURE__*/React.createElement(GenericModal, {\n      title: t('You_will_be_asked_for_permissions'),\n      confirmText: t('Continue'),\n      onConfirm: onConfirmRequestLocation,\n      onClose: onClose,\n      onCancel: onClose\n    });\n  }\n  if (permissionData === 'denied' || !positionData) {\n    return /*#__PURE__*/React.createElement(GenericModal, {\n      title: t('Cannot_share_your_location'),\n      confirmText: t('Ok'),\n      onConfirm: onClose,\n      onClose: onClose\n    }, t('The_necessary_browser_permissions_for_location_sharing_are_not_granted'));\n  }\n  return /*#__PURE__*/React.createElement(GenericModal, {\n    title: t('Share_Location_Title'),\n    confirmText: t('Share'),\n    onConfirm: onConfirm,\n    onClose: onClose,\n    onCancel: onClose\n  }, /*#__PURE__*/React.createElement(MapView, {\n    latitude: positionData.coords.latitude,\n    longitude: positionData.coords.longitude\n  }));\n};\nmodule.exportDefault(ShareLocationModal);","map":{"version":3,"names":["_regeneratorRuntime","module","link","default","v","useEndpoint","useTranslation","useToastMessageDispatch","useQuery","useQueryClient","React","GenericModal","MapView","getGeolocationPermission","getGeolocationPosition","ShareLocationModal","_ref","rid","tmid","onClose","t","dispatchToast","_useQuery","permissionData","data","permissionLoading","isLoading","_useQuery2","_callee","async","_callee$","_context","prev","next","abrupt","stop","Promise","positionData","queryClient","sendMessage","onConfirm","Error","message","location","type","coordinates","coords","longitude","latitude","error","onConfirmRequestLocation","_callee2","position","_callee2$","_context2","awrap","sent","setQueryData","t0","createElement","title","confirmText","onCancel","exportDefault"],"sources":["client/views/room/ShareLocation/ShareLocationModal.tsx"],"sourcesContent":["import type { IMessage, IRoom } from '@rocket.chat/core-typings';\nimport { useEndpoint, useTranslation, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React from 'react';\n\nimport GenericModal from '../../../components/GenericModal';\nimport MapView from '../../../components/message/content/location/MapView';\nimport { getGeolocationPermission } from './getGeolocationPermission';\nimport { getGeolocationPosition } from './getGeolocationPosition';\n\ntype ShareLocationModalProps = {\n\trid: IRoom['_id'];\n\ttmid: IMessage['tmid'];\n\tonClose: () => void;\n};\n\nconst ShareLocationModal = ({ rid, tmid, onClose }: ShareLocationModalProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToast = useToastMessageDispatch();\n\tconst { data: permissionData, isLoading: permissionLoading } = useQuery(['geolocationPermission'], getGeolocationPermission);\n\tconst { data: positionData } = useQuery(['geolocationPosition', permissionData], async () => {\n\t\tif (permissionLoading || permissionData === 'prompt' || permissionData === 'denied') {\n\t\t\treturn;\n\t\t}\n\t\treturn getGeolocationPosition();\n\t});\n\n\tconst queryClient = useQueryClient();\n\n\tconst sendMessage = useEndpoint('POST', '/v1/chat.sendMessage');\n\n\tconst onConfirm = (): void => {\n\t\tif (!positionData) {\n\t\t\tthrow new Error('Failed to load position');\n\t\t}\n\t\ttry {\n\t\t\tsendMessage({\n\t\t\t\tmessage: {\n\t\t\t\t\trid,\n\t\t\t\t\ttmid,\n\t\t\t\t\tlocation: {\n\t\t\t\t\t\ttype: 'Point',\n\t\t\t\t\t\tcoordinates: [positionData.coords.longitude, positionData.coords.latitude],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToast({ type: 'error', message: error });\n\t\t} finally {\n\t\t\tonClose();\n\t\t}\n\t};\n\n\tconst onConfirmRequestLocation = async (): Promise<void> => {\n\t\ttry {\n\t\t\tconst position = await getGeolocationPosition();\n\t\t\tqueryClient.setQueryData(['geolocationPosition', 'granted'], position);\n\t\t\tqueryClient.setQueryData(['geolocationPermission'], 'granted');\n\t\t} catch (e) {\n\t\t\tqueryClient.setQueryData(['geolocationPermission'], () => getGeolocationPermission);\n\t\t}\n\t};\n\n\tif (permissionLoading || permissionData === 'prompt') {\n\t\treturn (\n\t\t\t<GenericModal\n\t\t\t\ttitle={t('You_will_be_asked_for_permissions')}\n\t\t\t\tconfirmText={t('Continue')}\n\t\t\t\tonConfirm={onConfirmRequestLocation}\n\t\t\t\tonClose={onClose}\n\t\t\t\tonCancel={onClose}\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (permissionData === 'denied' || !positionData) {\n\t\treturn (\n\t\t\t<GenericModal title={t('Cannot_share_your_location')} confirmText={t('Ok')} onConfirm={onClose} onClose={onClose}>\n\t\t\t\t{t('The_necessary_browser_permissions_for_location_sharing_are_not_granted')}\n\t\t\t</GenericModal>\n\t\t);\n\t}\n\n\treturn (\n\t\t<GenericModal title={t('Share_Location_Title')} confirmText={t('Share')} onConfirm={onConfirm} onClose={onClose} onCancel={onClose}>\n\t\t\t<MapView latitude={positionData.coords.latitude} longitude={positionData.coords.longitude} />\n\t\t</GenericModal>\n\t);\n};\n\nexport default ShareLocationModal;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"85c3c6faf03eeda3df01f5b0ad7e3159327d9d99"}
