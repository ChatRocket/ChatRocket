{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/cloud/CloudAnnouncementHandler.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/cloud/CloudAnnouncementHandler.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/cloud/CloudAnnouncementHandler.tsx","inputSourceMap":{"version":3,"file":"client/views/cloud/CloudAnnouncementHandler.tsx","sourceRoot":"","sources":["client/views/cloud/CloudAnnouncementHandler.tsx"],"names":[],"mappings":"AAEA,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AAC1C,OAAO,EAAE,cAAc,EAAE,MAAM,eAAe,CAAC;AAE/C,OAAO,EAAE,eAAe,EAAE,MAAM,oCAAoC,CAAC;AACrE,OAAO,EAAE,qBAAqB,EAAE,MAAM,yCAAyC,CAAC;AAIhF,MAAM,wBAAwB,GAAG,CAAC,EAAE,UAAU,GAAG,EAAE,EAAE,OAAO,EAAE,IAAI,EAAiC,EAAE,EAAE;IACtG,MAAM,EAAE,IAAI,EAAE,GAAG,cAAc,EAAE,CAAC;IAElC,SAAS,CAAC,GAAG,EAAE;QACd,MAAM,KAAK,GAAG,8BAA8B,CAAC;QAC7C,IAAI,CAAC,UAAU,EAAE,CAAC;YACjB,OAAO;QACR,CAAC;QAED,KAAK,MAAM,CAAC,QAAQ,EAAE,YAAY,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC;YACnE,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,KAAK,EAAE,YAAY,CAAC,CAAC;QAClD,CAAC;IACF,CAAC,EAAE,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC;IAEvB,MAAM,aAAa,GAAG,qBAAqB,EAAE,CAAC;IAE9C,MAAM,OAAO,GAAG,MAAM,CAAC,EAAE,GAAG,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,0BAA0B,EAAE,CAAC,CAAC;IACrF,OAAO,CAAC,OAAO,GAAG,EAAE,GAAG,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,0BAA0B,EAAE,CAAC;IAE/E,SAAS,CAAC,GAAG,EAAE;QACd,QAAQ,OAAO,EAAE,CAAC;YACjB,KAAK,OAAO,CAAC,CAAC,CAAC;gBACd,aAAa;gBACb,MAAM,SAAS,GAAG,OAAO,CAAC,OAAqC,CAAC;gBAEhE,aAAa,CAAC,QAAQ,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;gBAE3C,OAAO,GAAG,EAAE;oBACX,aAAa,CAAC,WAAW,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;gBACzC,CAAC,CAAC;YACH,CAAC;YAED,KAAK,QAAQ,CAAC,CAAC,CAAC;gBACf,MAAM,UAAU,GAAG,OAAO,CAAC,OAA2B,CAAC;gBAEvD,aAAa,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,GAAG,UAAU,EAAE,CAAC,CAAC;gBAEpD,OAAO,GAAG,EAAE;oBACX,aAAa,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;gBAC9C,CAAC,CAAC;YACH,CAAC;YAED;gBACC,eAAe,CAAC,OAAO,CAAC,CAAC;QAC3B,CAAC;IACF,CAAC,EAAE,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC,CAAC;IAE7B,OAAO,IAAI,CAAC;AACb,CAAC,CAAC;AAEF,eAAe,wBAAwB,CAAC","sourcesContent":["import type { IBanner } from '@rocket.chat/core-typings';\nimport type * as UiKit from '@rocket.chat/ui-kit';\nimport { useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { exhaustiveCheck } from '../../../lib/utils/exhaustiveCheck';\nimport { useUiKitActionManager } from '../../uikit/hooks/useUiKitActionManager';\n\ntype CloudAnnouncementHandlerProps = Pick<IBanner, 'dictionary' | 'surface' | 'view'>;\n\nconst CloudAnnouncementHandler = ({ dictionary = {}, surface, view }: CloudAnnouncementHandlerProps) => {\n\tconst { i18n } = useTranslation();\n\n\tuseEffect(() => {\n\t\tconst appNs = `app-cloud-announcements-core`;\n\t\tif (!dictionary) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const [language, translations] of Object.entries(dictionary)) {\n\t\t\ti18n.addResources(language, appNs, translations);\n\t\t}\n\t}, [i18n, dictionary]);\n\n\tconst actionManager = useUiKitActionManager();\n\n\tconst viewRef = useRef({ ...view, appId: view.appId || 'cloud-announcements-core' });\n\tviewRef.current = { ...view, appId: view.appId || 'cloud-announcements-core' };\n\n\tuseEffect(() => {\n\t\tswitch (surface) {\n\t\t\tcase 'modal': {\n\t\t\t\t// TODO fixme\n\t\t\t\tconst modalView = viewRef.current as unknown as UiKit.ModalView;\n\n\t\t\t\tactionManager.openView('modal', modalView);\n\n\t\t\t\treturn () => {\n\t\t\t\t\tactionManager.disposeView(modalView.id);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'banner': {\n\t\t\t\tconst bannerView = viewRef.current as UiKit.BannerView;\n\n\t\t\t\tactionManager.openView('banner', { ...bannerView });\n\n\t\t\t\treturn () => {\n\t\t\t\t\tactionManager.disposeView(bannerView.viewId);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\texhaustiveCheck(surface);\n\t\t}\n\t}, [actionManager, surface]);\n\n\treturn null;\n};\n\nexport default CloudAnnouncementHandler;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/cloud/CloudAnnouncementHandler.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/cloud/CloudAnnouncementHandler.tsx","inputSourceMap":{"version":3,"file":"client/views/cloud/CloudAnnouncementHandler.tsx","sourceRoot":"","sources":["client/views/cloud/CloudAnnouncementHandler.tsx"],"names":[],"mappings":"AAEA,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AAC1C,OAAO,EAAE,cAAc,EAAE,MAAM,eAAe,CAAC;AAE/C,OAAO,EAAE,eAAe,EAAE,MAAM,oCAAoC,CAAC;AACrE,OAAO,EAAE,qBAAqB,EAAE,MAAM,yCAAyC,CAAC;AAIhF,MAAM,wBAAwB,GAAG,CAAC,EAAE,UAAU,GAAG,EAAE,EAAE,OAAO,EAAE,IAAI,EAAiC,EAAE,EAAE;IACtG,MAAM,EAAE,IAAI,EAAE,GAAG,cAAc,EAAE,CAAC;IAElC,SAAS,CAAC,GAAG,EAAE;QACd,MAAM,KAAK,GAAG,8BAA8B,CAAC;QAC7C,IAAI,CAAC,UAAU,EAAE,CAAC;YACjB,OAAO;QACR,CAAC;QAED,KAAK,MAAM,CAAC,QAAQ,EAAE,YAAY,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC;YACnE,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,KAAK,EAAE,YAAY,CAAC,CAAC;QAClD,CAAC;IACF,CAAC,EAAE,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC;IAEvB,MAAM,aAAa,GAAG,qBAAqB,EAAE,CAAC;IAE9C,MAAM,OAAO,GAAG,MAAM,CAAC,EAAE,GAAG,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,0BAA0B,EAAE,CAAC,CAAC;IACrF,OAAO,CAAC,OAAO,GAAG,EAAE,GAAG,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,0BAA0B,EAAE,CAAC;IAE/E,SAAS,CAAC,GAAG,EAAE;QACd,QAAQ,OAAO,EAAE,CAAC;YACjB,KAAK,OAAO,CAAC,CAAC,CAAC;gBACd,aAAa;gBACb,MAAM,SAAS,GAAG,OAAO,CAAC,OAAqC,CAAC;gBAEhE,aAAa,CAAC,QAAQ,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;gBAE3C,OAAO,GAAG,EAAE;oBACX,aAAa,CAAC,WAAW,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;gBACzC,CAAC,CAAC;YACH,CAAC;YAED,KAAK,QAAQ,CAAC,CAAC,CAAC;gBACf,MAAM,UAAU,GAAG,OAAO,CAAC,OAA2B,CAAC;gBAEvD,aAAa,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,GAAG,UAAU,EAAE,CAAC,CAAC;gBAEpD,OAAO,GAAG,EAAE;oBACX,aAAa,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;gBAC9C,CAAC,CAAC;YACH,CAAC;YAED;gBACC,eAAe,CAAC,OAAO,CAAC,CAAC;QAC3B,CAAC;IACF,CAAC,EAAE,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC,CAAC;IAE7B,OAAO,IAAI,CAAC;AACb,CAAC,CAAC;AAEF,eAAe,wBAAwB,CAAC","sourcesContent":["import type { IBanner } from '@rocket.chat/core-typings';\nimport type * as UiKit from '@rocket.chat/ui-kit';\nimport { useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { exhaustiveCheck } from '../../../lib/utils/exhaustiveCheck';\nimport { useUiKitActionManager } from '../../uikit/hooks/useUiKitActionManager';\n\ntype CloudAnnouncementHandlerProps = Pick<IBanner, 'dictionary' | 'surface' | 'view'>;\n\nconst CloudAnnouncementHandler = ({ dictionary = {}, surface, view }: CloudAnnouncementHandlerProps) => {\n\tconst { i18n } = useTranslation();\n\n\tuseEffect(() => {\n\t\tconst appNs = `app-cloud-announcements-core`;\n\t\tif (!dictionary) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const [language, translations] of Object.entries(dictionary)) {\n\t\t\ti18n.addResources(language, appNs, translations);\n\t\t}\n\t}, [i18n, dictionary]);\n\n\tconst actionManager = useUiKitActionManager();\n\n\tconst viewRef = useRef({ ...view, appId: view.appId || 'cloud-announcements-core' });\n\tviewRef.current = { ...view, appId: view.appId || 'cloud-announcements-core' };\n\n\tuseEffect(() => {\n\t\tswitch (surface) {\n\t\t\tcase 'modal': {\n\t\t\t\t// TODO fixme\n\t\t\t\tconst modalView = viewRef.current as unknown as UiKit.ModalView;\n\n\t\t\t\tactionManager.openView('modal', modalView);\n\n\t\t\t\treturn () => {\n\t\t\t\t\tactionManager.disposeView(modalView.id);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'banner': {\n\t\t\t\tconst bannerView = viewRef.current as UiKit.BannerView;\n\n\t\t\t\tactionManager.openView('banner', { ...bannerView });\n\n\t\t\t\treturn () => {\n\t\t\t\t\tactionManager.disposeView(bannerView.viewId);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\texhaustiveCheck(surface);\n\t\t}\n\t}, [actionManager, surface]);\n\n\treturn null;\n};\n\nexport default CloudAnnouncementHandler;\n"]}}},"code":"var _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 0);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\nvar useEffect, useRef;\nmodule.link(\"react\", {\n  useEffect: function (v) {\n    useEffect = v;\n  },\n  useRef: function (v) {\n    useRef = v;\n  }\n}, 0);\nvar useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 1);\nvar exhaustiveCheck;\nmodule.link(\"../../../lib/utils/exhaustiveCheck\", {\n  exhaustiveCheck: function (v) {\n    exhaustiveCheck = v;\n  }\n}, 2);\nvar useUiKitActionManager;\nmodule.link(\"../../uikit/hooks/useUiKitActionManager\", {\n  useUiKitActionManager: function (v) {\n    useUiKitActionManager = v;\n  }\n}, 3);\nvar CloudAnnouncementHandler = function (_ref) {\n  var _ref$dictionary = _ref.dictionary,\n    dictionary = _ref$dictionary === void 0 ? {} : _ref$dictionary,\n    surface = _ref.surface,\n    view = _ref.view;\n  var _useTranslation = useTranslation(),\n    i18n = _useTranslation.i18n;\n  useEffect(function () {\n    var appNs = \"app-cloud-announcements-core\";\n    if (!dictionary) {\n      return;\n    }\n    for (var _i = 0, _Object$entries = Object.entries(dictionary); _i < _Object$entries.length; _i++) {\n      var _ref2 = _Object$entries[_i];\n      var _ref3 = _slicedToArray(_ref2, 2);\n      var language = _ref3[0];\n      var translations = _ref3[1];\n      i18n.addResources(language, appNs, translations);\n    }\n  }, [i18n, dictionary]);\n  var actionManager = useUiKitActionManager();\n  var viewRef = useRef(_objectSpread(_objectSpread({}, view), {}, {\n    appId: view.appId || 'cloud-announcements-core'\n  }));\n  viewRef.current = _objectSpread(_objectSpread({}, view), {}, {\n    appId: view.appId || 'cloud-announcements-core'\n  });\n  useEffect(function () {\n    switch (surface) {\n      case 'modal':\n        {\n          // TODO fixme\n          var modalView = viewRef.current;\n          actionManager.openView('modal', modalView);\n          return function () {\n            actionManager.disposeView(modalView.id);\n          };\n        }\n      case 'banner':\n        {\n          var bannerView = viewRef.current;\n          actionManager.openView('banner', _objectSpread({}, bannerView));\n          return function () {\n            actionManager.disposeView(bannerView.viewId);\n          };\n        }\n      default:\n        exhaustiveCheck(surface);\n    }\n  }, [actionManager, surface]);\n  return null;\n};\nmodule.exportDefault(CloudAnnouncementHandler);","map":{"version":3,"names":["_objectSpread","module","link","default","v","_slicedToArray","useEffect","useRef","useTranslation","exhaustiveCheck","useUiKitActionManager","CloudAnnouncementHandler","_ref","_ref$dictionary","dictionary","surface","view","_useTranslation","i18n","appNs","_i","_Object$entries","Object","entries","length","_ref2","_ref3","language","translations","addResources","actionManager","viewRef","appId","current","modalView","openView","disposeView","id","bannerView","viewId","exportDefault"],"sources":["client/views/cloud/CloudAnnouncementHandler.tsx"],"sourcesContent":["import type { IBanner } from '@rocket.chat/core-typings';\nimport type * as UiKit from '@rocket.chat/ui-kit';\nimport { useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { exhaustiveCheck } from '../../../lib/utils/exhaustiveCheck';\nimport { useUiKitActionManager } from '../../uikit/hooks/useUiKitActionManager';\n\ntype CloudAnnouncementHandlerProps = Pick<IBanner, 'dictionary' | 'surface' | 'view'>;\n\nconst CloudAnnouncementHandler = ({ dictionary = {}, surface, view }: CloudAnnouncementHandlerProps) => {\n\tconst { i18n } = useTranslation();\n\n\tuseEffect(() => {\n\t\tconst appNs = `app-cloud-announcements-core`;\n\t\tif (!dictionary) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const [language, translations] of Object.entries(dictionary)) {\n\t\t\ti18n.addResources(language, appNs, translations);\n\t\t}\n\t}, [i18n, dictionary]);\n\n\tconst actionManager = useUiKitActionManager();\n\n\tconst viewRef = useRef({ ...view, appId: view.appId || 'cloud-announcements-core' });\n\tviewRef.current = { ...view, appId: view.appId || 'cloud-announcements-core' };\n\n\tuseEffect(() => {\n\t\tswitch (surface) {\n\t\t\tcase 'modal': {\n\t\t\t\t// TODO fixme\n\t\t\t\tconst modalView = viewRef.current as unknown as UiKit.ModalView;\n\n\t\t\t\tactionManager.openView('modal', modalView);\n\n\t\t\t\treturn () => {\n\t\t\t\t\tactionManager.disposeView(modalView.id);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'banner': {\n\t\t\t\tconst bannerView = viewRef.current as UiKit.BannerView;\n\n\t\t\t\tactionManager.openView('banner', { ...bannerView });\n\n\t\t\t\treturn () => {\n\t\t\t\t\tactionManager.disposeView(bannerView.viewId);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\texhaustiveCheck(surface);\n\t\t}\n\t}, [actionManager, surface]);\n\n\treturn null;\n};\n\nexport default CloudAnnouncementHandler;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"fe9ed3a76df938f3119d60d35b0ebc30b826f1a8"}
