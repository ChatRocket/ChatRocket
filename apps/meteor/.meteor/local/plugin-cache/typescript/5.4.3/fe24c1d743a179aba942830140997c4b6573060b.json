{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/agents/AgentsTable/AgentsTable.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/omnichannel/agents/AgentsTable/AgentsTable.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/agents/AgentsTable/AgentsTable.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/agents/AgentsTable/AgentsTable.tsx","sourceRoot":"","sources":["client/views/omnichannel/agents/AgentsTable/AgentsTable.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Pagination } from '@rocket.chat/fuselage';\nimport { useDebouncedValue, useMediaQuery, useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { hashQueryKey } from '@tanstack/react-query';\nimport React, { useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport FilterByText from '../../../../components/FilterByText';\nimport GenericNoResults from '../../../../components/GenericNoResults/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n} from '../../../../components/GenericTable';\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\nimport { useAgentsQuery } from '../hooks/useAgentsQuery';\nimport { useQuery } from '../hooks/useQuery';\nimport AddAgent from './AddAgent';\nimport AgentsTableRow from './AgentsTableRow';\n\n// TODO: missing error state\nconst AgentsTable = () => {\n\tconst { t } = useTranslation();\n\tconst [filter, setFilter] = useState('');\n\n\tconst { sortBy, sortDirection, setSort } = useSort<'name' | 'username' | 'emails.address' | 'statusLivechat'>('name');\n\tconst debouncedFilter = useDebouncedValue(filter, 500);\n\tconst debouncedSort = useDebouncedValue(\n\t\tuseMemo(() => [sortBy, sortDirection], [sortBy, sortDirection]),\n\t\t500,\n\t) as ['name' | 'username' | 'emails.address' | 'statusLivechat', 'asc' | 'desc'];\n\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\n\tconst query = useQuery({ text: debouncedFilter, current, itemsPerPage }, debouncedSort);\n\tconst { data, isSuccess, isLoading, refetch } = useAgentsQuery(query);\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst onHeaderClick = useMutableCallback((id) => {\n\t\tif (sortBy === id) {\n\t\t\tsetSort(id, sortDirection === 'asc' ? 'desc' : 'asc');\n\t\t\treturn;\n\t\t}\n\t\tsetSort(id, 'asc');\n\t});\n\n\tconst mediaQuery = useMediaQuery('(min-width: 1024px)');\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell direction={sortDirection} sort='name' active={sortBy === 'name'} onClick={onHeaderClick}>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t{mediaQuery && (\n\t\t\t\t<GenericTableHeaderCell direction={sortDirection} sort='username' active={sortBy === 'username'} onClick={onHeaderClick}>\n\t\t\t\t\t{t('Username')}\n\t\t\t\t</GenericTableHeaderCell>\n\t\t\t)}\n\t\t\t<GenericTableHeaderCell direction={sortDirection} sort='emails.address' active={sortBy === 'emails.address'} onClick={onHeaderClick}>\n\t\t\t\t{t('Email')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell direction={sortDirection} sort='statusLivechat' active={sortBy === 'statusLivechat'} onClick={onHeaderClick}>\n\t\t\t\t{t('Livechat_status')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell w='x60'>{t('Remove')}</GenericTableHeaderCell>\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<AddAgent reload={refetch} />\n\t\t\t{((isSuccess && data?.users.length > 0) || queryHasChanged) && <FilterByText onChange={setFilter} />}\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingTable headerCells={mediaQuery ? 4 : 3} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data?.users.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t{isSuccess && data.users.length === 0 && !queryHasChanged && (\n\t\t\t\t<GenericNoResults\n\t\t\t\t\ticon='headset'\n\t\t\t\t\ttitle={t('No_agents_yet')}\n\t\t\t\t\tdescription={t('No_agents_yet_description')}\n\t\t\t\t\tlinkHref='https://go.rocket.chat/i/omnichannel-docs'\n\t\t\t\t\tlinkText={t('Learn_more_about_agents')}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isSuccess && data?.users.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable aria-busy={filter !== debouncedFilter} data-qa-id='agents-table'>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody data-qa='GenericTableAgentInfoBody'>\n\t\t\t\t\t\t\t{data?.users.map((user) => (\n\t\t\t\t\t\t\t\t<AgentsTableRow key={user._id} user={user} mediaQuery={mediaQuery} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total || 0}\n\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default AgentsTable;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/agents/AgentsTable/AgentsTable.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/omnichannel/agents/AgentsTable/AgentsTable.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/agents/AgentsTable/AgentsTable.tsx","sourceRoot":"","sources":["client/views/omnichannel/agents/AgentsTable/AgentsTable.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Pagination } from '@rocket.chat/fuselage';\nimport { useDebouncedValue, useMediaQuery, useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { hashQueryKey } from '@tanstack/react-query';\nimport React, { useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport FilterByText from '../../../../components/FilterByText';\nimport GenericNoResults from '../../../../components/GenericNoResults/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n} from '../../../../components/GenericTable';\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\nimport { useAgentsQuery } from '../hooks/useAgentsQuery';\nimport { useQuery } from '../hooks/useQuery';\nimport AddAgent from './AddAgent';\nimport AgentsTableRow from './AgentsTableRow';\n\n// TODO: missing error state\nconst AgentsTable = () => {\n\tconst { t } = useTranslation();\n\tconst [filter, setFilter] = useState('');\n\n\tconst { sortBy, sortDirection, setSort } = useSort<'name' | 'username' | 'emails.address' | 'statusLivechat'>('name');\n\tconst debouncedFilter = useDebouncedValue(filter, 500);\n\tconst debouncedSort = useDebouncedValue(\n\t\tuseMemo(() => [sortBy, sortDirection], [sortBy, sortDirection]),\n\t\t500,\n\t) as ['name' | 'username' | 'emails.address' | 'statusLivechat', 'asc' | 'desc'];\n\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\n\tconst query = useQuery({ text: debouncedFilter, current, itemsPerPage }, debouncedSort);\n\tconst { data, isSuccess, isLoading, refetch } = useAgentsQuery(query);\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst onHeaderClick = useMutableCallback((id) => {\n\t\tif (sortBy === id) {\n\t\t\tsetSort(id, sortDirection === 'asc' ? 'desc' : 'asc');\n\t\t\treturn;\n\t\t}\n\t\tsetSort(id, 'asc');\n\t});\n\n\tconst mediaQuery = useMediaQuery('(min-width: 1024px)');\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell direction={sortDirection} sort='name' active={sortBy === 'name'} onClick={onHeaderClick}>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t{mediaQuery && (\n\t\t\t\t<GenericTableHeaderCell direction={sortDirection} sort='username' active={sortBy === 'username'} onClick={onHeaderClick}>\n\t\t\t\t\t{t('Username')}\n\t\t\t\t</GenericTableHeaderCell>\n\t\t\t)}\n\t\t\t<GenericTableHeaderCell direction={sortDirection} sort='emails.address' active={sortBy === 'emails.address'} onClick={onHeaderClick}>\n\t\t\t\t{t('Email')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell direction={sortDirection} sort='statusLivechat' active={sortBy === 'statusLivechat'} onClick={onHeaderClick}>\n\t\t\t\t{t('Livechat_status')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell w='x60'>{t('Remove')}</GenericTableHeaderCell>\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<AddAgent reload={refetch} />\n\t\t\t{((isSuccess && data?.users.length > 0) || queryHasChanged) && <FilterByText onChange={setFilter} />}\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingTable headerCells={mediaQuery ? 4 : 3} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data?.users.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t{isSuccess && data.users.length === 0 && !queryHasChanged && (\n\t\t\t\t<GenericNoResults\n\t\t\t\t\ticon='headset'\n\t\t\t\t\ttitle={t('No_agents_yet')}\n\t\t\t\t\tdescription={t('No_agents_yet_description')}\n\t\t\t\t\tlinkHref='https://go.rocket.chat/i/omnichannel-docs'\n\t\t\t\t\tlinkText={t('Learn_more_about_agents')}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isSuccess && data?.users.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable aria-busy={filter !== debouncedFilter} data-qa-id='agents-table'>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody data-qa='GenericTableAgentInfoBody'>\n\t\t\t\t\t\t\t{data?.users.map((user) => (\n\t\t\t\t\t\t\t\t<AgentsTableRow key={user._id} user={user} mediaQuery={mediaQuery} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total || 0}\n\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default AgentsTable;\n"]}}},"code":"const _excluded = [\"current\", \"itemsPerPage\", \"setItemsPerPage\", \"setCurrent\"];\nlet _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n}, 1);\nlet Pagination;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Pagination(v) {\n    Pagination = v;\n  }\n}, 0);\nlet useDebouncedValue, useMediaQuery, useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useDebouncedValue(v) {\n    useDebouncedValue = v;\n  },\n  useMediaQuery(v) {\n    useMediaQuery = v;\n  },\n  useMutableCallback(v) {\n    useMutableCallback = v;\n  }\n}, 1);\nlet hashQueryKey;\nmodule.link(\"@tanstack/react-query\", {\n  hashQueryKey(v) {\n    hashQueryKey = v;\n  }\n}, 2);\nlet React, useMemo, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  },\n  useState(v) {\n    useState = v;\n  }\n}, 3);\nlet useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 4);\nlet FilterByText;\nmodule.link(\"../../../../components/FilterByText\", {\n  default(v) {\n    FilterByText = v;\n  }\n}, 5);\nlet GenericNoResults;\nmodule.link(\"../../../../components/GenericNoResults/GenericNoResults\", {\n  default(v) {\n    GenericNoResults = v;\n  }\n}, 6);\nlet GenericTable, GenericTableBody, GenericTableHeader, GenericTableHeaderCell, GenericTableLoadingTable;\nmodule.link(\"../../../../components/GenericTable\", {\n  GenericTable(v) {\n    GenericTable = v;\n  },\n  GenericTableBody(v) {\n    GenericTableBody = v;\n  },\n  GenericTableHeader(v) {\n    GenericTableHeader = v;\n  },\n  GenericTableHeaderCell(v) {\n    GenericTableHeaderCell = v;\n  },\n  GenericTableLoadingTable(v) {\n    GenericTableLoadingTable = v;\n  }\n}, 7);\nlet usePagination;\nmodule.link(\"../../../../components/GenericTable/hooks/usePagination\", {\n  usePagination(v) {\n    usePagination = v;\n  }\n}, 8);\nlet useSort;\nmodule.link(\"../../../../components/GenericTable/hooks/useSort\", {\n  useSort(v) {\n    useSort = v;\n  }\n}, 9);\nlet useAgentsQuery;\nmodule.link(\"../hooks/useAgentsQuery\", {\n  useAgentsQuery(v) {\n    useAgentsQuery = v;\n  }\n}, 10);\nlet useQuery;\nmodule.link(\"../hooks/useQuery\", {\n  useQuery(v) {\n    useQuery = v;\n  }\n}, 11);\nlet AddAgent;\nmodule.link(\"./AddAgent\", {\n  default(v) {\n    AddAgent = v;\n  }\n}, 12);\nlet AgentsTableRow;\nmodule.link(\"./AgentsTableRow\", {\n  default(v) {\n    AgentsTableRow = v;\n  }\n}, 13);\n// TODO: missing error state\nconst AgentsTable = () => {\n  const {\n    t\n  } = useTranslation();\n  const [filter, setFilter] = useState('');\n  const {\n    sortBy,\n    sortDirection,\n    setSort\n  } = useSort('name');\n  const debouncedFilter = useDebouncedValue(filter, 500);\n  const debouncedSort = useDebouncedValue(useMemo(() => [sortBy, sortDirection], [sortBy, sortDirection]), 500);\n  const _usePagination = usePagination(),\n    {\n      current,\n      itemsPerPage,\n      setItemsPerPage,\n      setCurrent\n    } = _usePagination,\n    paginationProps = _objectWithoutProperties(_usePagination, _excluded);\n  const query = useQuery({\n    text: debouncedFilter,\n    current,\n    itemsPerPage\n  }, debouncedSort);\n  const {\n    data,\n    isSuccess,\n    isLoading,\n    refetch\n  } = useAgentsQuery(query);\n  const [defaultQuery] = useState(hashQueryKey([query]));\n  const queryHasChanged = defaultQuery !== hashQueryKey([query]);\n  const onHeaderClick = useMutableCallback(id => {\n    if (sortBy === id) {\n      setSort(id, sortDirection === 'asc' ? 'desc' : 'asc');\n      return;\n    }\n    setSort(id, 'asc');\n  });\n  const mediaQuery = useMediaQuery('(min-width: 1024px)');\n  const headers = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    direction: sortDirection,\n    sort: \"name\",\n    active: sortBy === 'name',\n    onClick: onHeaderClick\n  }, t('Name')), mediaQuery && /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    direction: sortDirection,\n    sort: \"username\",\n    active: sortBy === 'username',\n    onClick: onHeaderClick\n  }, t('Username')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    direction: sortDirection,\n    sort: \"emails.address\",\n    active: sortBy === 'emails.address',\n    onClick: onHeaderClick\n  }, t('Email')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    direction: sortDirection,\n    sort: \"statusLivechat\",\n    active: sortBy === 'statusLivechat',\n    onClick: onHeaderClick\n  }, t('Livechat_status')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    w: \"x60\"\n  }, t('Remove')));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(AddAgent, {\n    reload: refetch\n  }), (isSuccess && (data === null || data === void 0 ? void 0 : data.users.length) > 0 || queryHasChanged) && /*#__PURE__*/React.createElement(FilterByText, {\n    onChange: setFilter\n  }), isLoading && /*#__PURE__*/React.createElement(GenericTable, null, /*#__PURE__*/React.createElement(GenericTableHeader, null, headers), /*#__PURE__*/React.createElement(GenericTableBody, null, /*#__PURE__*/React.createElement(GenericTableLoadingTable, {\n    headerCells: mediaQuery ? 4 : 3\n  }))), isSuccess && (data === null || data === void 0 ? void 0 : data.users.length) === 0 && queryHasChanged && /*#__PURE__*/React.createElement(GenericNoResults, null), isSuccess && data.users.length === 0 && !queryHasChanged && /*#__PURE__*/React.createElement(GenericNoResults, {\n    icon: \"headset\",\n    title: t('No_agents_yet'),\n    description: t('No_agents_yet_description'),\n    linkHref: \"https://go.rocket.chat/i/omnichannel-docs\",\n    linkText: t('Learn_more_about_agents')\n  }), isSuccess && (data === null || data === void 0 ? void 0 : data.users.length) > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GenericTable, {\n    \"aria-busy\": filter !== debouncedFilter,\n    \"data-qa-id\": \"agents-table\"\n  }, /*#__PURE__*/React.createElement(GenericTableHeader, null, headers), /*#__PURE__*/React.createElement(GenericTableBody, {\n    \"data-qa\": \"GenericTableAgentInfoBody\"\n  }, data === null || data === void 0 ? void 0 : data.users.map(user => /*#__PURE__*/React.createElement(AgentsTableRow, {\n    key: user._id,\n    user: user,\n    mediaQuery: mediaQuery\n  })))), /*#__PURE__*/React.createElement(Pagination, _extends({\n    divider: true,\n    current: current,\n    itemsPerPage: itemsPerPage,\n    count: (data === null || data === void 0 ? void 0 : data.total) || 0,\n    onSetItemsPerPage: setItemsPerPage,\n    onSetCurrent: setCurrent\n  }, paginationProps))));\n};\nmodule.exportDefault(AgentsTable);","map":{"version":3,"names":["_extends","module","link","default","v","_objectWithoutProperties","Pagination","useDebouncedValue","useMediaQuery","useMutableCallback","hashQueryKey","React","useMemo","useState","useTranslation","FilterByText","GenericNoResults","GenericTable","GenericTableBody","GenericTableHeader","GenericTableHeaderCell","GenericTableLoadingTable","usePagination","useSort","useAgentsQuery","useQuery","AddAgent","AgentsTableRow","AgentsTable","t","filter","setFilter","sortBy","sortDirection","setSort","debouncedFilter","debouncedSort","_usePagination","current","itemsPerPage","setItemsPerPage","setCurrent","paginationProps","_excluded","query","text","data","isSuccess","isLoading","refetch","defaultQuery","queryHasChanged","onHeaderClick","id","mediaQuery","headers","createElement","Fragment","direction","sort","active","onClick","w","reload","users","length","onChange","headerCells","icon","title","description","linkHref","linkText","map","user","key","_id","divider","count","total","onSetItemsPerPage","onSetCurrent","exportDefault"],"sources":["client/views/omnichannel/agents/AgentsTable/AgentsTable.tsx"],"sourcesContent":["import { Pagination } from '@rocket.chat/fuselage';\nimport { useDebouncedValue, useMediaQuery, useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { hashQueryKey } from '@tanstack/react-query';\nimport React, { useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport FilterByText from '../../../../components/FilterByText';\nimport GenericNoResults from '../../../../components/GenericNoResults/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableBody,\n\tGenericTableHeader,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingTable,\n} from '../../../../components/GenericTable';\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\nimport { useAgentsQuery } from '../hooks/useAgentsQuery';\nimport { useQuery } from '../hooks/useQuery';\nimport AddAgent from './AddAgent';\nimport AgentsTableRow from './AgentsTableRow';\n\n// TODO: missing error state\nconst AgentsTable = () => {\n\tconst { t } = useTranslation();\n\tconst [filter, setFilter] = useState('');\n\n\tconst { sortBy, sortDirection, setSort } = useSort<'name' | 'username' | 'emails.address' | 'statusLivechat'>('name');\n\tconst debouncedFilter = useDebouncedValue(filter, 500);\n\tconst debouncedSort = useDebouncedValue(\n\t\tuseMemo(() => [sortBy, sortDirection], [sortBy, sortDirection]),\n\t\t500,\n\t) as ['name' | 'username' | 'emails.address' | 'statusLivechat', 'asc' | 'desc'];\n\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\n\tconst query = useQuery({ text: debouncedFilter, current, itemsPerPage }, debouncedSort);\n\tconst { data, isSuccess, isLoading, refetch } = useAgentsQuery(query);\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst onHeaderClick = useMutableCallback((id) => {\n\t\tif (sortBy === id) {\n\t\t\tsetSort(id, sortDirection === 'asc' ? 'desc' : 'asc');\n\t\t\treturn;\n\t\t}\n\t\tsetSort(id, 'asc');\n\t});\n\n\tconst mediaQuery = useMediaQuery('(min-width: 1024px)');\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell direction={sortDirection} sort='name' active={sortBy === 'name'} onClick={onHeaderClick}>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t{mediaQuery && (\n\t\t\t\t<GenericTableHeaderCell direction={sortDirection} sort='username' active={sortBy === 'username'} onClick={onHeaderClick}>\n\t\t\t\t\t{t('Username')}\n\t\t\t\t</GenericTableHeaderCell>\n\t\t\t)}\n\t\t\t<GenericTableHeaderCell direction={sortDirection} sort='emails.address' active={sortBy === 'emails.address'} onClick={onHeaderClick}>\n\t\t\t\t{t('Email')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell direction={sortDirection} sort='statusLivechat' active={sortBy === 'statusLivechat'} onClick={onHeaderClick}>\n\t\t\t\t{t('Livechat_status')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell w='x60'>{t('Remove')}</GenericTableHeaderCell>\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<AddAgent reload={refetch} />\n\t\t\t{((isSuccess && data?.users.length > 0) || queryHasChanged) && <FilterByText onChange={setFilter} />}\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingTable headerCells={mediaQuery ? 4 : 3} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data?.users.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t{isSuccess && data.users.length === 0 && !queryHasChanged && (\n\t\t\t\t<GenericNoResults\n\t\t\t\t\ticon='headset'\n\t\t\t\t\ttitle={t('No_agents_yet')}\n\t\t\t\t\tdescription={t('No_agents_yet_description')}\n\t\t\t\t\tlinkHref='https://go.rocket.chat/i/omnichannel-docs'\n\t\t\t\t\tlinkText={t('Learn_more_about_agents')}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isSuccess && data?.users.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable aria-busy={filter !== debouncedFilter} data-qa-id='agents-table'>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody data-qa='GenericTableAgentInfoBody'>\n\t\t\t\t\t\t\t{data?.users.map((user) => (\n\t\t\t\t\t\t\t\t<AgentsTableRow key={user._id} user={user} mediaQuery={mediaQuery} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total || 0}\n\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default AgentsTable;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"fe24c1d743a179aba942830140997c4b6573060b"}
