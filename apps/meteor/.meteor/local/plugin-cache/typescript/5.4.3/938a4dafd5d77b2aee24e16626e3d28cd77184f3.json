{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/livechat/client/lib/chartHandler.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"app/livechat/client/lib/chartHandler.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/livechat/client/lib/chartHandler.ts","inputSourceMap":{"version":3,"file":"app/livechat/client/lib/chartHandler.ts","sourceRoot":"","sources":["app/livechat/client/lib/chartHandler.ts"],"names":[],"mappings":"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","sourcesContent":["import type { ChartItem, Chart as ChartType, ChartConfiguration } from 'chart.js';\n\nimport { t } from '../../../utils/lib/i18n';\n\ntype LineChartConfigOptions = Partial<{\n\tlegends: boolean;\n\tanim: boolean;\n\tdisplayColors: boolean;\n\ttooltipCallbacks: any;\n}>;\n\nconst lineChartConfiguration = ({\n\tlegends = false,\n\tanim = false,\n\ttooltipCallbacks = {},\n}: LineChartConfigOptions): Partial<ChartConfiguration<'line', number, string>['options']> => {\n\tconst config: ChartConfiguration<'line', number, string>['options'] = {\n\t\tlayout: {\n\t\t\tpadding: {\n\t\t\t\ttop: 10,\n\t\t\t\tbottom: 0,\n\t\t\t},\n\t\t},\n\t\tlegend: {\n\t\t\tdisplay: false,\n\t\t},\n\t\tplugins: {\n\t\t\ttooltip: {\n\t\t\t\tusePointStyle: true,\n\t\t\t\tenabled: true,\n\t\t\t\tmode: 'point',\n\t\t\t\tyAlign: 'bottom',\n\t\t\t\tdisplayColors: true,\n\t\t\t\t...tooltipCallbacks,\n\t\t\t},\n\t\t},\n\t\tscales: {\n\t\t\txAxis: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t},\n\t\t\t},\n\t\t\tyAxis: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\thover: {\n\t\t\tintersect: false, // duration of animations when hovering an item\n\t\t\tmode: 'index',\n\t\t},\n\t\tresponsive: true,\n\t\tmaintainAspectRatio: false,\n\t\t...(!anim ? { animation: { duration: 0 } } : {}),\n\t\t...(legends ? { legend: { display: true, labels: { boxWidth: 20, fontSize: 8 } } } : {}),\n\t};\n\n\treturn config;\n};\n\nconst doughnutChartConfiguration = (\n\ttitle: string,\n\ttooltipCallbacks = {},\n): Partial<ChartConfiguration<'doughnut', number, string>['options']> => ({\n\tlayout: {\n\t\tpadding: {\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t},\n\t},\n\tplugins: {\n\t\tlegend: {\n\t\t\tdisplay: true,\n\t\t\tposition: 'right',\n\t\t\tlabels: {\n\t\t\t\tboxWidth: 20,\n\t\t\t},\n\t\t},\n\t\ttitle: {\n\t\t\tdisplay: true,\n\t\t\ttext: title,\n\t\t},\n\t\ttooltip: {\n\t\t\tenabled: true,\n\t\t\tmode: 'point',\n\t\t\tdisplayColors: true, // hide color box\n\t\t\t...tooltipCallbacks,\n\t\t},\n\t},\n\t// animation: {\n\t// \tduration: 0 // general animation time\n\t// },\n\thover: {\n\t\tintersect: true, // duration of animations when hovering an item\n\t},\n\tresponsive: true,\n\tmaintainAspectRatio: false,\n});\n\ntype ChartDataSet = {\n\tlabel: string;\n\tdata: number;\n\tbackgroundColor: string;\n\tborderColor: string;\n\tborderWidth: number;\n\tfill: boolean;\n};\n\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} chartLabel\n * @param {Array(String)} dataLabels\n * @param {Array(Array(Double))} dataPoints\n */\nexport const drawLineChart = async (\n\tchart: HTMLCanvasElement,\n\tchartContext: { destroy: () => void } | undefined,\n\tchartLabels: string[],\n\tdataLabels: string[],\n\tdataSets: number[],\n\toptions: LineChartConfigOptions = {},\n): Promise<ChartType<'line', number, string> | void> => {\n\tif (!chart) {\n\t\tconsole.error('No chart element');\n\t\treturn;\n\t}\n\tif (chartContext) {\n\t\tchartContext.destroy();\n\t}\n\tconst colors = ['#2de0a5', '#ffd21f', '#f5455c', '#cbced1'];\n\n\tconst datasets: ChartDataSet[] = [];\n\n\tchartLabels.forEach((chartLabel: string, index: number) => {\n\t\tdatasets.push({\n\t\t\tlabel: t(chartLabel), // chart label\n\t\t\tdata: dataSets[index], // data points corresponding to data labels, x-axis points\n\t\t\tbackgroundColor: colors[index],\n\t\t\tborderColor: colors[index],\n\t\t\tborderWidth: 3,\n\t\t\tfill: false,\n\t\t});\n\t});\n\tconst chartjs = await import('chart.js/auto');\n\tconst Chart = chartjs.default;\n\treturn new Chart(chart, {\n\t\ttype: 'line',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets,\n\t\t},\n\t\toptions: lineChartConfiguration(options),\n\t});\n};\n\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} dataLabels\n * @param {Array(Double)} dataPoints\n */\nexport const drawDoughnutChart = async (\n\tchart: ChartItem,\n\ttitle: string,\n\tchartContext: { destroy: () => void } | undefined,\n\tdataLabels: string[],\n\tdataPoints: number[],\n): Promise<ChartType> => {\n\tif (!chart) {\n\t\tthrow new Error('No chart element');\n\t}\n\tif (chartContext) {\n\t\tchartContext.destroy();\n\t}\n\tconst chartjs = await import('chart.js/auto');\n\tconst Chart = chartjs.default;\n\treturn new Chart(chart, {\n\t\ttype: 'doughnut',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tdata: dataPoints, // data points corresponding to data labels, x-axis points\n\t\t\t\t\tbackgroundColor: ['#2de0a5', '#cbced1', '#f5455c', '#ffd21f'],\n\t\t\t\t\tborderWidth: 0,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\toptions: doughnutChartConfiguration(title),\n\t}) as ChartType;\n};\n\n/**\n * Update chart\n * @param  {Object} chart [Chart context]\n * @param  {String} label [chart label]\n * @param  {Array(Double)} data  [updated data]\n */\nexport const updateChart = async (c: ChartType, label: string, data: number[]): Promise<void> => {\n\tconst chart = await c;\n\tif (chart.data?.labels?.indexOf(label) === -1) {\n\t\t// insert data\n\t\tchart.data.labels.push(label);\n\t\tchart.data.datasets.forEach((dataset: { data: any[] }, idx: number) => {\n\t\t\tdataset.data.push(data[idx]);\n\t\t});\n\t} else {\n\t\t// update data\n\t\tconst index = chart.data?.labels?.indexOf(label);\n\t\tif (typeof index === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tchart.data.datasets.forEach((dataset: { data: { [x: string]: any } }, idx: number) => {\n\t\t\tdataset.data[index] = data[idx];\n\t\t});\n\t}\n\n\tchart.update();\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/livechat/client/lib/chartHandler.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/livechat/client/lib/chartHandler.ts","inputSourceMap":{"version":3,"file":"app/livechat/client/lib/chartHandler.ts","sourceRoot":"","sources":["app/livechat/client/lib/chartHandler.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,CAAC,EAAE,MAAM,yBAAyB,CAAC;AAS5C,MAAM,sBAAsB,GAAG,CAAC,EAC/B,OAAO,GAAG,KAAK,EACf,IAAI,GAAG,KAAK,EACZ,gBAAgB,GAAG,EAAE,GACG,EAAkE,EAAE;IAC5F,MAAM,MAAM,GAA0D;QACrE,MAAM,EAAE;YACP,OAAO,EAAE;gBACR,GAAG,EAAE,EAAE;gBACP,MAAM,EAAE,CAAC;aACT;SACD;QACD,MAAM,EAAE;YACP,OAAO,EAAE,KAAK;SACd;QACD,OAAO,EAAE;YACR,OAAO,EAAE;gBACR,aAAa,EAAE,IAAI;gBACnB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,OAAO;gBACb,MAAM,EAAE,QAAQ;gBAChB,aAAa,EAAE,IAAI;gBACnB,GAAG,gBAAgB;aACnB;SACD;QACD,MAAM,EAAE;YACP,KAAK,EAAE;gBACN,KAAK,EAAE;oBACN,OAAO,EAAE,KAAK;iBACd;gBACD,IAAI,EAAE;oBACL,OAAO,EAAE,IAAI;oBACb,KAAK,EAAE,qBAAqB;iBAC5B;aACD;YACD,KAAK,EAAE;gBACN,KAAK,EAAE;oBACN,OAAO,EAAE,KAAK;iBACd;gBACD,IAAI,EAAE;oBACL,OAAO,EAAE,IAAI;oBACb,KAAK,EAAE,qBAAqB;iBAC5B;aACD;SACD;QACD,KAAK,EAAE;YACN,SAAS,EAAE,KAAK,EAAE,+CAA+C;YACjE,IAAI,EAAE,OAAO;SACb;QACD,UAAU,EAAE,IAAI;QAChB,mBAAmB,EAAE,KAAK;QAC1B,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,SAAS,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;QAChD,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;KACxF,CAAC;IAEF,OAAO,MAAM,CAAC;AACf,CAAC,CAAC;AAEF,MAAM,0BAA0B,GAAG,CAClC,KAAa,EACb,gBAAgB,GAAG,EAAE,EACgD,EAAE,CAAC,CAAC;IACzE,MAAM,EAAE;QACP,OAAO,EAAE;YACR,GAAG,EAAE,CAAC;YACN,MAAM,EAAE,CAAC;SACT;KACD;IACD,OAAO,EAAE;QACR,MAAM,EAAE;YACP,OAAO,EAAE,IAAI;YACb,QAAQ,EAAE,OAAO;YACjB,MAAM,EAAE;gBACP,QAAQ,EAAE,EAAE;aACZ;SACD;QACD,KAAK,EAAE;YACN,OAAO,EAAE,IAAI;YACb,IAAI,EAAE,KAAK;SACX;QACD,OAAO,EAAE;YACR,OAAO,EAAE,IAAI;YACb,IAAI,EAAE,OAAO;YACb,aAAa,EAAE,IAAI,EAAE,iBAAiB;YACtC,GAAG,gBAAgB;SACnB;KACD;IACD,eAAe;IACf,yCAAyC;IACzC,KAAK;IACL,KAAK,EAAE;QACN,SAAS,EAAE,IAAI,EAAE,+CAA+C;KAChE;IACD,UAAU,EAAE,IAAI;IAChB,mBAAmB,EAAE,KAAK;CAC1B,CAAC,CAAC;AAWH;;;;;;;GAOG;AACH,MAAM,CAAC,MAAM,aAAa,GAAG,KAAK,EACjC,KAAwB,EACxB,YAAiD,EACjD,WAAqB,EACrB,UAAoB,EACpB,QAAkB,EAClB,UAAkC,EAAE,EACgB,EAAE;IACtD,IAAI,CAAC,KAAK,EAAE,CAAC;QACZ,OAAO,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC;QAClC,OAAO;IACR,CAAC;IACD,IAAI,YAAY,EAAE,CAAC;QAClB,YAAY,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IACD,MAAM,MAAM,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;IAE5D,MAAM,QAAQ,GAAmB,EAAE,CAAC;IAEpC,WAAW,CAAC,OAAO,CAAC,CAAC,UAAkB,EAAE,KAAa,EAAE,EAAE;QACzD,QAAQ,CAAC,IAAI,CAAC;YACb,KAAK,EAAE,CAAC,CAAC,UAAU,CAAC,EAAE,cAAc;YACpC,IAAI,EAAE,QAAQ,CAAC,KAAK,CAAC,EAAE,0DAA0D;YACjF,eAAe,EAAE,MAAM,CAAC,KAAK,CAAC;YAC9B,WAAW,EAAE,MAAM,CAAC,KAAK,CAAC;YAC1B,WAAW,EAAE,CAAC;YACd,IAAI,EAAE,KAAK;SACX,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IACH,MAAM,OAAO,GAAG,MAAM,MAAM,CAAC,eAAe,CAAC,CAAC;IAC9C,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC;IAC9B,OAAO,IAAI,KAAK,CAAC,KAAK,EAAE;QACvB,IAAI,EAAE,MAAM;QACZ,IAAI,EAAE;YACL,MAAM,EAAE,UAAU,EAAE,6BAA6B;YACjD,QAAQ;SACR;QACD,OAAO,EAAE,sBAAsB,CAAC,OAAO,CAAC;KACxC,CAAC,CAAC;AACJ,CAAC,CAAC;AAEF;;;;;;GAMG;AACH,MAAM,CAAC,MAAM,iBAAiB,GAAG,KAAK,EACrC,KAAgB,EAChB,KAAa,EACb,YAAiD,EACjD,UAAoB,EACpB,UAAoB,EACC,EAAE;IACvB,IAAI,CAAC,KAAK,EAAE,CAAC;QACZ,MAAM,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC;IACrC,CAAC;IACD,IAAI,YAAY,EAAE,CAAC;QAClB,YAAY,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IACD,MAAM,OAAO,GAAG,MAAM,MAAM,CAAC,eAAe,CAAC,CAAC;IAC9C,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC;IAC9B,OAAO,IAAI,KAAK,CAAC,KAAK,EAAE;QACvB,IAAI,EAAE,UAAU;QAChB,IAAI,EAAE;YACL,MAAM,EAAE,UAAU,EAAE,6BAA6B;YACjD,QAAQ,EAAE;gBACT;oBACC,IAAI,EAAE,UAAU,EAAE,0DAA0D;oBAC5E,eAAe,EAAE,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC;oBAC7D,WAAW,EAAE,CAAC;iBACd;aACD;SACD;QACD,OAAO,EAAE,0BAA0B,CAAC,KAAK,CAAC;KAC1C,CAAc,CAAC;AACjB,CAAC,CAAC;AAEF;;;;;GAKG;AACH,MAAM,CAAC,MAAM,WAAW,GAAG,KAAK,EAAE,CAAY,EAAE,KAAa,EAAE,IAAc,EAAiB,EAAE;IAC/F,MAAM,KAAK,GAAG,MAAM,CAAC,CAAC;IACtB,IAAI,KAAK,CAAC,IAAI,EAAE,MAAM,EAAE,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;QAC/C,cAAc;QACd,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9B,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAwB,EAAE,GAAW,EAAE,EAAE;YACrE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QAC9B,CAAC,CAAC,CAAC;IACJ,CAAC;SAAM,CAAC;QACP,cAAc;QACd,MAAM,KAAK,GAAG,KAAK,CAAC,IAAI,EAAE,MAAM,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;QACjD,IAAI,OAAO,KAAK,KAAK,WAAW,EAAE,CAAC;YAClC,OAAO;QACR,CAAC;QAED,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAuC,EAAE,GAAW,EAAE,EAAE;YACpF,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,KAAK,CAAC,MAAM,EAAE,CAAC;AAChB,CAAC,CAAC","sourcesContent":["import type { ChartItem, Chart as ChartType, ChartConfiguration } from 'chart.js';\n\nimport { t } from '../../../utils/lib/i18n';\n\ntype LineChartConfigOptions = Partial<{\n\tlegends: boolean;\n\tanim: boolean;\n\tdisplayColors: boolean;\n\ttooltipCallbacks: any;\n}>;\n\nconst lineChartConfiguration = ({\n\tlegends = false,\n\tanim = false,\n\ttooltipCallbacks = {},\n}: LineChartConfigOptions): Partial<ChartConfiguration<'line', number, string>['options']> => {\n\tconst config: ChartConfiguration<'line', number, string>['options'] = {\n\t\tlayout: {\n\t\t\tpadding: {\n\t\t\t\ttop: 10,\n\t\t\t\tbottom: 0,\n\t\t\t},\n\t\t},\n\t\tlegend: {\n\t\t\tdisplay: false,\n\t\t},\n\t\tplugins: {\n\t\t\ttooltip: {\n\t\t\t\tusePointStyle: true,\n\t\t\t\tenabled: true,\n\t\t\t\tmode: 'point',\n\t\t\t\tyAlign: 'bottom',\n\t\t\t\tdisplayColors: true,\n\t\t\t\t...tooltipCallbacks,\n\t\t\t},\n\t\t},\n\t\tscales: {\n\t\t\txAxis: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t},\n\t\t\t},\n\t\t\tyAxis: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\thover: {\n\t\t\tintersect: false, // duration of animations when hovering an item\n\t\t\tmode: 'index',\n\t\t},\n\t\tresponsive: true,\n\t\tmaintainAspectRatio: false,\n\t\t...(!anim ? { animation: { duration: 0 } } : {}),\n\t\t...(legends ? { legend: { display: true, labels: { boxWidth: 20, fontSize: 8 } } } : {}),\n\t};\n\n\treturn config;\n};\n\nconst doughnutChartConfiguration = (\n\ttitle: string,\n\ttooltipCallbacks = {},\n): Partial<ChartConfiguration<'doughnut', number, string>['options']> => ({\n\tlayout: {\n\t\tpadding: {\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t},\n\t},\n\tplugins: {\n\t\tlegend: {\n\t\t\tdisplay: true,\n\t\t\tposition: 'right',\n\t\t\tlabels: {\n\t\t\t\tboxWidth: 20,\n\t\t\t},\n\t\t},\n\t\ttitle: {\n\t\t\tdisplay: true,\n\t\t\ttext: title,\n\t\t},\n\t\ttooltip: {\n\t\t\tenabled: true,\n\t\t\tmode: 'point',\n\t\t\tdisplayColors: true, // hide color box\n\t\t\t...tooltipCallbacks,\n\t\t},\n\t},\n\t// animation: {\n\t// \tduration: 0 // general animation time\n\t// },\n\thover: {\n\t\tintersect: true, // duration of animations when hovering an item\n\t},\n\tresponsive: true,\n\tmaintainAspectRatio: false,\n});\n\ntype ChartDataSet = {\n\tlabel: string;\n\tdata: number;\n\tbackgroundColor: string;\n\tborderColor: string;\n\tborderWidth: number;\n\tfill: boolean;\n};\n\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} chartLabel\n * @param {Array(String)} dataLabels\n * @param {Array(Array(Double))} dataPoints\n */\nexport const drawLineChart = async (\n\tchart: HTMLCanvasElement,\n\tchartContext: { destroy: () => void } | undefined,\n\tchartLabels: string[],\n\tdataLabels: string[],\n\tdataSets: number[],\n\toptions: LineChartConfigOptions = {},\n): Promise<ChartType<'line', number, string> | void> => {\n\tif (!chart) {\n\t\tconsole.error('No chart element');\n\t\treturn;\n\t}\n\tif (chartContext) {\n\t\tchartContext.destroy();\n\t}\n\tconst colors = ['#2de0a5', '#ffd21f', '#f5455c', '#cbced1'];\n\n\tconst datasets: ChartDataSet[] = [];\n\n\tchartLabels.forEach((chartLabel: string, index: number) => {\n\t\tdatasets.push({\n\t\t\tlabel: t(chartLabel), // chart label\n\t\t\tdata: dataSets[index], // data points corresponding to data labels, x-axis points\n\t\t\tbackgroundColor: colors[index],\n\t\t\tborderColor: colors[index],\n\t\t\tborderWidth: 3,\n\t\t\tfill: false,\n\t\t});\n\t});\n\tconst chartjs = await import('chart.js/auto');\n\tconst Chart = chartjs.default;\n\treturn new Chart(chart, {\n\t\ttype: 'line',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets,\n\t\t},\n\t\toptions: lineChartConfiguration(options),\n\t});\n};\n\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} dataLabels\n * @param {Array(Double)} dataPoints\n */\nexport const drawDoughnutChart = async (\n\tchart: ChartItem,\n\ttitle: string,\n\tchartContext: { destroy: () => void } | undefined,\n\tdataLabels: string[],\n\tdataPoints: number[],\n): Promise<ChartType> => {\n\tif (!chart) {\n\t\tthrow new Error('No chart element');\n\t}\n\tif (chartContext) {\n\t\tchartContext.destroy();\n\t}\n\tconst chartjs = await import('chart.js/auto');\n\tconst Chart = chartjs.default;\n\treturn new Chart(chart, {\n\t\ttype: 'doughnut',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tdata: dataPoints, // data points corresponding to data labels, x-axis points\n\t\t\t\t\tbackgroundColor: ['#2de0a5', '#cbced1', '#f5455c', '#ffd21f'],\n\t\t\t\t\tborderWidth: 0,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\toptions: doughnutChartConfiguration(title),\n\t}) as ChartType;\n};\n\n/**\n * Update chart\n * @param  {Object} chart [Chart context]\n * @param  {String} label [chart label]\n * @param  {Array(Double)} data  [updated data]\n */\nexport const updateChart = async (c: ChartType, label: string, data: number[]): Promise<void> => {\n\tconst chart = await c;\n\tif (chart.data?.labels?.indexOf(label) === -1) {\n\t\t// insert data\n\t\tchart.data.labels.push(label);\n\t\tchart.data.datasets.forEach((dataset: { data: any[] }, idx: number) => {\n\t\t\tdataset.data.push(data[idx]);\n\t\t});\n\t} else {\n\t\t// update data\n\t\tconst index = chart.data?.labels?.indexOf(label);\n\t\tif (typeof index === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tchart.data.datasets.forEach((dataset: { data: { [x: string]: any } }, idx: number) => {\n\t\t\tdataset.data[index] = data[idx];\n\t\t});\n\t}\n\n\tchart.update();\n};\n"]}}},"code":"var _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\nvar _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 1);\nmodule.export({\n  drawLineChart: function () {\n    return drawLineChart;\n  },\n  drawDoughnutChart: function () {\n    return drawDoughnutChart;\n  },\n  updateChart: function () {\n    return updateChart;\n  }\n});\nvar t;\nmodule.link(\"../../../utils/lib/i18n\", {\n  t: function (v) {\n    t = v;\n  }\n}, 0);\nvar lineChartConfiguration = function (_ref) {\n  var _ref$legends = _ref.legends,\n    legends = _ref$legends === void 0 ? false : _ref$legends,\n    _ref$anim = _ref.anim,\n    anim = _ref$anim === void 0 ? false : _ref$anim,\n    _ref$tooltipCallbacks = _ref.tooltipCallbacks,\n    tooltipCallbacks = _ref$tooltipCallbacks === void 0 ? {} : _ref$tooltipCallbacks;\n  var config = _objectSpread(_objectSpread({\n    layout: {\n      padding: {\n        top: 10,\n        bottom: 0\n      }\n    },\n    legend: {\n      display: false\n    },\n    plugins: {\n      tooltip: _objectSpread({\n        usePointStyle: true,\n        enabled: true,\n        mode: 'point',\n        yAlign: 'bottom',\n        displayColors: true\n      }, tooltipCallbacks)\n    },\n    scales: {\n      xAxis: {\n        title: {\n          display: false\n        },\n        grid: {\n          display: true,\n          color: 'rgba(0, 0, 0, 0.03)'\n        }\n      },\n      yAxis: {\n        title: {\n          display: false\n        },\n        grid: {\n          display: true,\n          color: 'rgba(0, 0, 0, 0.03)'\n        }\n      }\n    },\n    hover: {\n      intersect: false,\n      // duration of animations when hovering an item\n      mode: 'index'\n    },\n    responsive: true,\n    maintainAspectRatio: false\n  }, !anim ? {\n    animation: {\n      duration: 0\n    }\n  } : {}), legends ? {\n    legend: {\n      display: true,\n      labels: {\n        boxWidth: 20,\n        fontSize: 8\n      }\n    }\n  } : {});\n  return config;\n};\nvar doughnutChartConfiguration = function (title) {\n  var tooltipCallbacks = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return {\n    layout: {\n      padding: {\n        top: 0,\n        bottom: 0\n      }\n    },\n    plugins: {\n      legend: {\n        display: true,\n        position: 'right',\n        labels: {\n          boxWidth: 20\n        }\n      },\n      title: {\n        display: true,\n        text: title\n      },\n      tooltip: _objectSpread({\n        enabled: true,\n        mode: 'point',\n        displayColors: true\n      }, tooltipCallbacks)\n    },\n    // animation: {\n    // \tduration: 0 // general animation time\n    // },\n    hover: {\n      intersect: true // duration of animations when hovering an item\n    },\n    responsive: true,\n    maintainAspectRatio: false\n  };\n};\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} chartLabel\n * @param {Array(String)} dataLabels\n * @param {Array(Array(Double))} dataPoints\n */\nvar drawLineChart = function () {\n  function _callee(chart, chartContext, chartLabels, dataLabels, dataSets) {\n    var options,\n      colors,\n      datasets,\n      chartjs,\n      Chart,\n      _args = arguments;\n    return _regeneratorRuntime.async(function () {\n      function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 5 && _args[5] !== undefined ? _args[5] : {};\n            if (chart) {\n              _context.next = 4;\n              break;\n            }\n            console.error('No chart element');\n            return _context.abrupt(\"return\");\n          case 4:\n            if (chartContext) {\n              chartContext.destroy();\n            }\n            colors = ['#2de0a5', '#ffd21f', '#f5455c', '#cbced1'];\n            datasets = [];\n            chartLabels.forEach(function (chartLabel, index) {\n              datasets.push({\n                label: t(chartLabel),\n                // chart label\n                data: dataSets[index],\n                // data points corresponding to data labels, x-axis points\n                backgroundColor: colors[index],\n                borderColor: colors[index],\n                borderWidth: 3,\n                fill: false\n              });\n            });\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(module.dynamicImport('chart.js/auto'));\n          case 10:\n            chartjs = _context.sent;\n            Chart = chartjs.default;\n            return _context.abrupt(\"return\", new Chart(chart, {\n              type: 'line',\n              data: {\n                labels: dataLabels,\n                // data labels, y-axis points\n                datasets: datasets\n              },\n              options: lineChartConfiguration(options)\n            }));\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n      return _callee$;\n    }(), null, null, null, Promise);\n  }\n  return _callee;\n}();\nvar drawDoughnutChart = function () {\n  function _callee2(chart, title, chartContext, dataLabels, dataPoints) {\n    var chartjs, Chart;\n    return _regeneratorRuntime.async(function () {\n      function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            if (chart) {\n              _context2.next = 2;\n              break;\n            }\n            throw new Error('No chart element');\n          case 2:\n            if (chartContext) {\n              chartContext.destroy();\n            }\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(module.dynamicImport('chart.js/auto'));\n          case 5:\n            chartjs = _context2.sent;\n            Chart = chartjs.default;\n            return _context2.abrupt(\"return\", new Chart(chart, {\n              type: 'doughnut',\n              data: {\n                labels: dataLabels,\n                // data labels, y-axis points\n                datasets: [{\n                  data: dataPoints,\n                  // data points corresponding to data labels, x-axis points\n                  backgroundColor: ['#2de0a5', '#cbced1', '#f5455c', '#ffd21f'],\n                  borderWidth: 0\n                }]\n              },\n              options: doughnutChartConfiguration(title)\n            }));\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n      return _callee2$;\n    }(), null, null, null, Promise);\n  }\n  return _callee2;\n}();\nvar updateChart = function () {\n  function _callee3(c, label, data) {\n    var _chart$data, _chart$data$labels;\n    var chart, _chart$data2, _chart$data2$labels, index;\n    return _regeneratorRuntime.async(function () {\n      function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(c);\n          case 2:\n            chart = _context3.sent;\n            if (!(((_chart$data = chart.data) === null || _chart$data === void 0 ? void 0 : (_chart$data$labels = _chart$data.labels) === null || _chart$data$labels === void 0 ? void 0 : _chart$data$labels.indexOf(label)) === -1)) {\n              _context3.next = 8;\n              break;\n            }\n            // insert data\n            chart.data.labels.push(label);\n            chart.data.datasets.forEach(function (dataset, idx) {\n              dataset.data.push(data[idx]);\n            });\n            _context3.next = 12;\n            break;\n          case 8:\n            // update data\n            index = (_chart$data2 = chart.data) === null || _chart$data2 === void 0 ? void 0 : (_chart$data2$labels = _chart$data2.labels) === null || _chart$data2$labels === void 0 ? void 0 : _chart$data2$labels.indexOf(label);\n            if (!(typeof index === 'undefined')) {\n              _context3.next = 11;\n              break;\n            }\n            return _context3.abrupt(\"return\");\n          case 11:\n            chart.data.datasets.forEach(function (dataset, idx) {\n              dataset.data[index] = data[idx];\n            });\n          case 12:\n            chart.update();\n          case 13:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n      return _callee3$;\n    }(), null, null, null, Promise);\n  }\n  return _callee3;\n}();","map":{"version":3,"names":["_regeneratorRuntime","module","link","default","v","_objectSpread","export","drawLineChart","drawDoughnutChart","updateChart","t","lineChartConfiguration","_ref","_ref$legends","legends","_ref$anim","anim","_ref$tooltipCallbacks","tooltipCallbacks","config","layout","padding","top","bottom","legend","display","plugins","tooltip","usePointStyle","enabled","mode","yAlign","displayColors","scales","xAxis","title","grid","color","yAxis","hover","intersect","responsive","maintainAspectRatio","animation","duration","labels","boxWidth","fontSize","doughnutChartConfiguration","arguments","length","undefined","position","text","_callee","chart","chartContext","chartLabels","dataLabels","dataSets","options","colors","datasets","chartjs","Chart","_args","async","_callee$","_context","prev","next","console","error","abrupt","destroy","forEach","chartLabel","index","push","label","data","backgroundColor","borderColor","borderWidth","fill","awrap","dynamicImport","sent","type","stop","Promise","_callee2","dataPoints","_callee2$","_context2","Error","_callee3","c","_chart$data","_chart$data$labels","_chart$data2","_chart$data2$labels","_callee3$","_context3","indexOf","dataset","idx","update"],"sources":["app/livechat/client/lib/chartHandler.ts"],"sourcesContent":["import type { ChartItem, Chart as ChartType, ChartConfiguration } from 'chart.js';\n\nimport { t } from '../../../utils/lib/i18n';\n\ntype LineChartConfigOptions = Partial<{\n\tlegends: boolean;\n\tanim: boolean;\n\tdisplayColors: boolean;\n\ttooltipCallbacks: any;\n}>;\n\nconst lineChartConfiguration = ({\n\tlegends = false,\n\tanim = false,\n\ttooltipCallbacks = {},\n}: LineChartConfigOptions): Partial<ChartConfiguration<'line', number, string>['options']> => {\n\tconst config: ChartConfiguration<'line', number, string>['options'] = {\n\t\tlayout: {\n\t\t\tpadding: {\n\t\t\t\ttop: 10,\n\t\t\t\tbottom: 0,\n\t\t\t},\n\t\t},\n\t\tlegend: {\n\t\t\tdisplay: false,\n\t\t},\n\t\tplugins: {\n\t\t\ttooltip: {\n\t\t\t\tusePointStyle: true,\n\t\t\t\tenabled: true,\n\t\t\t\tmode: 'point',\n\t\t\t\tyAlign: 'bottom',\n\t\t\t\tdisplayColors: true,\n\t\t\t\t...tooltipCallbacks,\n\t\t\t},\n\t\t},\n\t\tscales: {\n\t\t\txAxis: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t},\n\t\t\t},\n\t\t\tyAxis: {\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: false,\n\t\t\t\t},\n\t\t\t\tgrid: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\thover: {\n\t\t\tintersect: false, // duration of animations when hovering an item\n\t\t\tmode: 'index',\n\t\t},\n\t\tresponsive: true,\n\t\tmaintainAspectRatio: false,\n\t\t...(!anim ? { animation: { duration: 0 } } : {}),\n\t\t...(legends ? { legend: { display: true, labels: { boxWidth: 20, fontSize: 8 } } } : {}),\n\t};\n\n\treturn config;\n};\n\nconst doughnutChartConfiguration = (\n\ttitle: string,\n\ttooltipCallbacks = {},\n): Partial<ChartConfiguration<'doughnut', number, string>['options']> => ({\n\tlayout: {\n\t\tpadding: {\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t},\n\t},\n\tplugins: {\n\t\tlegend: {\n\t\t\tdisplay: true,\n\t\t\tposition: 'right',\n\t\t\tlabels: {\n\t\t\t\tboxWidth: 20,\n\t\t\t},\n\t\t},\n\t\ttitle: {\n\t\t\tdisplay: true,\n\t\t\ttext: title,\n\t\t},\n\t\ttooltip: {\n\t\t\tenabled: true,\n\t\t\tmode: 'point',\n\t\t\tdisplayColors: true, // hide color box\n\t\t\t...tooltipCallbacks,\n\t\t},\n\t},\n\t// animation: {\n\t// \tduration: 0 // general animation time\n\t// },\n\thover: {\n\t\tintersect: true, // duration of animations when hovering an item\n\t},\n\tresponsive: true,\n\tmaintainAspectRatio: false,\n});\n\ntype ChartDataSet = {\n\tlabel: string;\n\tdata: number;\n\tbackgroundColor: string;\n\tborderColor: string;\n\tborderWidth: number;\n\tfill: boolean;\n};\n\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} chartLabel\n * @param {Array(String)} dataLabels\n * @param {Array(Array(Double))} dataPoints\n */\nexport const drawLineChart = async (\n\tchart: HTMLCanvasElement,\n\tchartContext: { destroy: () => void } | undefined,\n\tchartLabels: string[],\n\tdataLabels: string[],\n\tdataSets: number[],\n\toptions: LineChartConfigOptions = {},\n): Promise<ChartType<'line', number, string> | void> => {\n\tif (!chart) {\n\t\tconsole.error('No chart element');\n\t\treturn;\n\t}\n\tif (chartContext) {\n\t\tchartContext.destroy();\n\t}\n\tconst colors = ['#2de0a5', '#ffd21f', '#f5455c', '#cbced1'];\n\n\tconst datasets: ChartDataSet[] = [];\n\n\tchartLabels.forEach((chartLabel: string, index: number) => {\n\t\tdatasets.push({\n\t\t\tlabel: t(chartLabel), // chart label\n\t\t\tdata: dataSets[index], // data points corresponding to data labels, x-axis points\n\t\t\tbackgroundColor: colors[index],\n\t\t\tborderColor: colors[index],\n\t\t\tborderWidth: 3,\n\t\t\tfill: false,\n\t\t});\n\t});\n\tconst chartjs = await import('chart.js/auto');\n\tconst Chart = chartjs.default;\n\treturn new Chart(chart, {\n\t\ttype: 'line',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets,\n\t\t},\n\t\toptions: lineChartConfiguration(options),\n\t});\n};\n\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} dataLabels\n * @param {Array(Double)} dataPoints\n */\nexport const drawDoughnutChart = async (\n\tchart: ChartItem,\n\ttitle: string,\n\tchartContext: { destroy: () => void } | undefined,\n\tdataLabels: string[],\n\tdataPoints: number[],\n): Promise<ChartType> => {\n\tif (!chart) {\n\t\tthrow new Error('No chart element');\n\t}\n\tif (chartContext) {\n\t\tchartContext.destroy();\n\t}\n\tconst chartjs = await import('chart.js/auto');\n\tconst Chart = chartjs.default;\n\treturn new Chart(chart, {\n\t\ttype: 'doughnut',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tdata: dataPoints, // data points corresponding to data labels, x-axis points\n\t\t\t\t\tbackgroundColor: ['#2de0a5', '#cbced1', '#f5455c', '#ffd21f'],\n\t\t\t\t\tborderWidth: 0,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\toptions: doughnutChartConfiguration(title),\n\t}) as ChartType;\n};\n\n/**\n * Update chart\n * @param  {Object} chart [Chart context]\n * @param  {String} label [chart label]\n * @param  {Array(Double)} data  [updated data]\n */\nexport const updateChart = async (c: ChartType, label: string, data: number[]): Promise<void> => {\n\tconst chart = await c;\n\tif (chart.data?.labels?.indexOf(label) === -1) {\n\t\t// insert data\n\t\tchart.data.labels.push(label);\n\t\tchart.data.datasets.forEach((dataset: { data: any[] }, idx: number) => {\n\t\t\tdataset.data.push(data[idx]);\n\t\t});\n\t} else {\n\t\t// update data\n\t\tconst index = chart.data?.labels?.indexOf(label);\n\t\tif (typeof index === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tchart.data.datasets.forEach((dataset: { data: { [x: string]: any } }, idx: number) => {\n\t\t\tdataset.data[index] = data[idx];\n\t\t});\n\t}\n\n\tchart.update();\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"938a4dafd5d77b2aee24e16626e3d28cd77184f3"}
