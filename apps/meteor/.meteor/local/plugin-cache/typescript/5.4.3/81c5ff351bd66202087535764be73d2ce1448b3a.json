{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/ImageGallery/ImageGallery.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/components/ImageGallery/ImageGallery.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/ImageGallery/ImageGallery.tsx","inputSourceMap":{"version":3,"file":"client/components/ImageGallery/ImageGallery.tsx","sourceRoot":"","sources":["client/components/ImageGallery/ImageGallery.tsx"],"names":[],"mappings":"AACA,OAAO,EAAE,GAAG,EAAE,MAAM,wBAAwB,CAAC;AAC7C,OAAO,EAAE,GAAG,EAAE,WAAW,EAAE,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,uBAAuB,CAAC;AACxF,OAAO,KAAK,EAAE,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAChD,OAAO,EAAE,UAAU,EAAE,MAAM,YAAY,CAAC;AACxC,OAAO,EAAE,YAAY,EAAE,MAAM,WAAW,CAAC;AACzC,OAAO,EAAE,cAAc,EAAE,MAAM,eAAe,CAAC;AAC/C,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,QAAQ,CAAC;AAE1D,OAAO,EAAE,MAAM,EAAE,WAAW,EAAE,MAAM,cAAc,CAAC;AAEnD,uBAAuB;AACvB,OAAO,mBAAmB,CAAC;AAC3B,OAAO,8CAA8C,CAAC;AACtD,OAAO,0CAA0C,CAAC;AAClD,OAAO,kCAAkC,CAAC;AAE1C,OAAO,EAAE,qBAAqB,EAAE,MAAM,mCAAmC,CAAC;AAE1E,MAAM,WAAW,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;WAqEZ,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC;;;;;;;;;;;;;;;uBAenB,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC;;;;CAIxD,CAAC;AAEF,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAqE,EAAE,EAAE;IAChI,MAAM,EAAE,CAAC,EAAE,GAAG,cAAc,EAAE,CAAC;IAC/B,MAAM,SAAS,GAAG,MAAM,CAAY,IAAI,CAAC,CAAC;IAC1C,MAAM,CAAC,EAAE,aAAa,CAAC,GAAG,QAAQ,EAAe,CAAC;IAClD,MAAM,CAAC,SAAS,EAAE,YAAY,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC9C,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAExD,MAAM,UAAU,GAAG,CAAC,KAAa,EAAE,EAAE;QACpC,IAAI,SAAS,CAAC,OAAO,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC;YACpC,MAAM,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,SAAS,CAAC,OAAO,EAAE,MAAM,CAAC,IAAI,CAAC;YAC7D,YAAY,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC;YAC5B,OAAO,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC;QAC9B,CAAC;IACF,CAAC,CAAC;IAEF,MAAM,YAAY,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IACzC,MAAM,aAAa,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3C,MAAM,YAAY,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;IAExD,MAAM,kBAAkB,GAAG,qBAAqB,EAAE,CAAC;IAEnD,OAAO,YAAY,CAClB,CAAC,UAAU,CAAC,OAAO,CAAC,SAAS,CAC5B;GAAA,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC,CAC3F;IAAA,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CACtE;KAAA,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC,kBAAkB,CAAC,CACvF;MAAA,CAAC,SAAS,KAAK,CAAC,IAAI,CACnB,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAG,CACvH,CACD;MAAA,CAAC,UAAU,CACV,IAAI,CAAC,UAAU,CACf,KAAK,CACL,IAAI,CAAC,OAAO,CACZ,KAAK,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CACrB,mBAAmB,CACnB,OAAO,CAAC,CAAC,aAAa,CAAC,CACvB,QAAQ,CAAC,CAAC,SAAS,KAAK,CAAC,CAAC,EAE3B;MAAA,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAC3G;MAAA,CAAC,UAAU,CACV,IAAI,CAAC,OAAO,CACZ,KAAK,CACL,IAAI,CAAC,OAAO,CACZ,UAAU,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAC/B,SAAS,CAAC,yBAAyB,CACnC,OAAO,CAAC,CAAC,OAAO,CAAC,EAEnB;KAAA,EAAE,WAAW,CACb;KAAA,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS,CAAC,wBAAwB,CAAC,OAAO,CAAC,CAAC,kBAAkB,CAAC,EAC7H;KAAA,CAAC,UAAU,CACV,IAAI,CAAC,cAAc,CACnB,UAAU,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAChC,SAAS,CAAC,wBAAwB,CAClC,OAAO,CAAC,CAAC,kBAAkB,CAAC,EAE7B;KAAA,CAAC,MAAM,CACN,GAAG,CAAC,CAAC,SAAS,CAAC,CACf,UAAU,CAAC,CAAC;YACX,MAAM,EAAE,yBAAyB;YACjC,MAAM,EAAE,yBAAyB;SACjC,CAAC,CACF,QAAQ,CACR,IAAI,CAAC,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,CACxB,kBAAkB,CAAC,oBAAoB,CACvC,kBAAkB,CAClB,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,IAAI,IAAI,OAAO,EAAE,CAAC,CAClE,OAAO,CAAC,CAAC,CAAC,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC,CAC5C,MAAM,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAC1C,wBAAwB,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE;YACpC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,QAAQ,EAAE,CAAC,CAAC,CAAC;YAC5C,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAC5B,CAAC,CAAC,CACF,gBAAgB,CAAC,CAAC,QAAQ,CAAC,CAC3B,YAAY,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAEhC;MAAA,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,CAClD,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CACrB;QAAA,CAAC,GAAG,CAAC,SAAS,CAAC,uBAAuB,CACrC;SAAA,CAAC;;;cAGC,CACF;SAAA,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,kBAAkB,CAAC,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,CAAC,kBAAkB,CAAC,EACxG;SAAA,CAAC,GAAG,CAAC,SAAS,CAAC,oBAAoB,CAClC;UAAA,CAAC,QAAQ,CAAC,YAAY,EACvB;SAAA,EAAE,GAAG,CACN;QAAA,EAAE,GAAG,CACN;OAAA,EAAE,WAAW,CAAC,CACd,CAAC,CACH;KAAA,EAAE,MAAM,CACT;IAAA,EAAE,GAAG,CACN;GAAA,EAAE,GAAG,CACN;EAAA,EAAE,UAAU,CAAC,EACb,QAAQ,CAAC,IAAI,CACb,CAAC;AACH,CAAC,CAAC","sourcesContent":["import type { IUpload } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport { Box, ButtonGroup, IconButton, Palette, Throbber } from '@rocket.chat/fuselage';\nimport React, { useRef, useState } from 'react';\nimport { FocusScope } from 'react-aria';\nimport { createPortal } from 'react-dom';\nimport { useTranslation } from 'react-i18next';\nimport { Keyboard, Navigation, Zoom, A11y } from 'swiper';\nimport type { SwiperClass, SwiperRef } from 'swiper/react';\nimport { Swiper, SwiperSlide } from 'swiper/react';\n\n// Import Swiper styles\nimport 'swiper/swiper.css';\nimport 'swiper/modules/navigation/navigation.min.css';\nimport 'swiper/modules/keyboard/keyboard.min.css';\nimport 'swiper/modules/zoom/zoom.min.css';\n\nimport { usePreventPropagation } from '../../hooks/usePreventPropagation';\n\nconst swiperStyle = css`\n\t.swiper {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\t.swiper-container {\n\t\tposition: absolute;\n\t\tz-index: 99;\n\t\ttop: 0;\n\n\t\toverflow: hidden;\n\n\t\twidth: 100%;\n\t\theight: 100%;\n\n\t\tbackground-color: var(--rcx-color-surface-overlay, rgba(0, 0, 0, 0.6));\n\t}\n\n\t.rcx-swiper-close-button,\n\t.rcx-swiper-prev-button,\n\t.rcx-swiper-next-button {\n\t\tcolor: var(--rcx-color-font-pure-white, #ffffff) !important;\n\t}\n\n\t.rcx-swiper-prev-button,\n\t.rcx-swiper-next-button {\n\t\tposition: absolute;\n\t\tz-index: 10;\n\t\ttop: 50%;\n\n\t\tcursor: pointer;\n\t}\n\n\t.rcx-swiper-prev-button.swiper-button-disabled,\n\t.rcx-swiper-next-button.swiper-button-disabled {\n\t\tcursor: auto;\n\t\tpointer-events: none;\n\n\t\topacity: 0.35;\n\t}\n\n\t.rcx-swiper-prev-button.swiper-button-hidden,\n\t.rcx-swiper-next-button.swiper-button-hidden {\n\t\tcursor: auto;\n\t\tpointer-events: none;\n\n\t\topacity: 0;\n\t}\n\n\t.rcx-swiper-prev-button,\n\t.swiper-rtl .rcx-swiper-next-button {\n\t\tright: auto;\n\t\tleft: 10px;\n\t}\n\n\t.rcx-swiper-next-button,\n\t.swiper-rtl .rcx-swiper-prev-button {\n\t\tright: 10px;\n\t\tleft: auto;\n\t}\n\n\t.rcx-lazy-preloader {\n\t\tposition: absolute;\n\t\tz-index: -1;\n\t\tleft: 50%;\n\t\ttop: 50%;\n\n\t\ttransform: translate(-50%, -50%);\n\n\t\tcolor: ${Palette.text['font-pure-white']};\n\t}\n\n\t.rcx-swiper-controls {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: 0;\n\t\tpadding: 10px;\n\t\tz-index: 2;\n\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\ttransition: background-color 0.2s;\n\t\t&:hover {\n\t\t\tbackground-color: ${Palette.surface['surface-overlay']};\n\t\t\ttransition: background-color 0.2s;\n\t\t}\n\t}\n`;\n\nexport const ImageGallery = ({ images, onClose, loadMore }: { images: IUpload[]; onClose: () => void; loadMore?: () => void }) => {\n\tconst { t } = useTranslation();\n\tconst swiperRef = useRef<SwiperRef>(null);\n\tconst [, setSwiperInst] = useState<SwiperClass>();\n\tconst [zoomScale, setZoomScale] = useState(1);\n\tconst [gridSize, setGridSize] = useState(images.length);\n\n\tconst handleZoom = (ratio: number) => {\n\t\tif (swiperRef.current?.swiper.zoom) {\n\t\t\tconst { scale, in: zoomIn } = swiperRef.current?.swiper.zoom;\n\t\t\tsetZoomScale(scale + ratio);\n\t\t\treturn zoomIn(scale + ratio);\n\t\t}\n\t};\n\n\tconst handleZoomIn = () => handleZoom(1);\n\tconst handleZoomOut = () => handleZoom(-1);\n\tconst handleResize = () => handleZoom(-(zoomScale - 1));\n\n\tconst preventPropagation = usePreventPropagation();\n\n\treturn createPortal(\n\t\t<FocusScope contain autoFocus>\n\t\t\t<Box role='dialog' aria-modal='true' aria-label={t('Image_gallery')} className={swiperStyle}>\n\t\t\t\t<div role='presentation' className='swiper-container' onClick={onClose}>\n\t\t\t\t\t<ButtonGroup role='toolbar' className='rcx-swiper-controls' onClick={preventPropagation}>\n\t\t\t\t\t\t{zoomScale !== 1 && (\n\t\t\t\t\t\t\t<IconButton name='resize' small icon='arrow-collapse' title={t('Resize')} rcx-swiper-zoom-out onClick={handleResize} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tname='zoom-out'\n\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\ticon='h-bar'\n\t\t\t\t\t\t\ttitle={t('Zoom_out')}\n\t\t\t\t\t\t\trcx-swiper-zoom-out\n\t\t\t\t\t\t\tonClick={handleZoomOut}\n\t\t\t\t\t\t\tdisabled={zoomScale === 1}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<IconButton name='zoom-in' small icon='plus' title={t('Zoom_in')} rcx-swiper-zoom-in onClick={handleZoomIn} />\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tname='close'\n\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\ticon='cross'\n\t\t\t\t\t\t\taria-label={t('Close_gallery')}\n\t\t\t\t\t\t\tclassName='rcx-swiper-close-button'\n\t\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t<IconButton icon='chevron-right' aria-label={t('Next_image')} className='rcx-swiper-prev-button' onClick={preventPropagation} />\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\ticon='chevron-left'\n\t\t\t\t\t\taria-label={t('Previous_image')}\n\t\t\t\t\t\tclassName='rcx-swiper-next-button'\n\t\t\t\t\t\tonClick={preventPropagation}\n\t\t\t\t\t/>\n\t\t\t\t\t<Swiper\n\t\t\t\t\t\tref={swiperRef}\n\t\t\t\t\t\tnavigation={{\n\t\t\t\t\t\t\tnextEl: '.rcx-swiper-next-button',\n\t\t\t\t\t\t\tprevEl: '.rcx-swiper-prev-button',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tkeyboard\n\t\t\t\t\t\tzoom={{ toggle: false }}\n\t\t\t\t\t\tlazyPreloaderClass='rcx-lazy-preloader'\n\t\t\t\t\t\trunCallbacksOnInit\n\t\t\t\t\t\tonKeyPress={(_, keyCode) => String(keyCode) === '27' && onClose()}\n\t\t\t\t\t\tmodules={[Navigation, Zoom, Keyboard, A11y]}\n\t\t\t\t\t\tonInit={(swiper) => setSwiperInst(swiper)}\n\t\t\t\t\t\tonSlidesGridLengthChange={(swiper) => {\n\t\t\t\t\t\t\tswiper.slideTo(images.length - gridSize, 0);\n\t\t\t\t\t\t\tsetGridSize(images.length);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonReachBeginning={loadMore}\n\t\t\t\t\t\tinitialSlide={images.length - 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t{[...images].reverse().map(({ _id, path, url }) => (\n\t\t\t\t\t\t\t<SwiperSlide key={_id}>\n\t\t\t\t\t\t\t\t<div className='swiper-zoom-container'>\n\t\t\t\t\t\t\t\t\t{/* eslint-disable-next-line\n\t\t\t\t\t\t\t\t\t\tjsx-a11y/no-noninteractive-element-interactions,\n\t\t\t\t\t\t\t\t\t\tjsx-a11y/click-events-have-key-events\n\t\t\t\t\t\t\t\t\t*/}\n\t\t\t\t\t\t\t\t\t<img src={path || url} loading='lazy' alt='' data-qa-zoom-scale={zoomScale} onClick={preventPropagation} />\n\t\t\t\t\t\t\t\t\t<div className='rcx-lazy-preloader'>\n\t\t\t\t\t\t\t\t\t\t<Throbber inheritColor />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</SwiperSlide>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Swiper>\n\t\t\t\t</div>\n\t\t\t</Box>\n\t\t</FocusScope>,\n\t\tdocument.body,\n\t);\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/ImageGallery/ImageGallery.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/components/ImageGallery/ImageGallery.tsx","inputSourceMap":{"version":3,"file":"client/components/ImageGallery/ImageGallery.tsx","sourceRoot":"","sources":["client/components/ImageGallery/ImageGallery.tsx"],"names":[],"mappings":"AACA,OAAO,EAAE,GAAG,EAAE,MAAM,wBAAwB,CAAC;AAC7C,OAAO,EAAE,GAAG,EAAE,WAAW,EAAE,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,uBAAuB,CAAC;AACxF,OAAO,KAAK,EAAE,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAChD,OAAO,EAAE,UAAU,EAAE,MAAM,YAAY,CAAC;AACxC,OAAO,EAAE,YAAY,EAAE,MAAM,WAAW,CAAC;AACzC,OAAO,EAAE,cAAc,EAAE,MAAM,eAAe,CAAC;AAC/C,OAAO,EAAE,QAAQ,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,QAAQ,CAAC;AAE1D,OAAO,EAAE,MAAM,EAAE,WAAW,EAAE,MAAM,cAAc,CAAC;AAEnD,uBAAuB;AACvB,OAAO,mBAAmB,CAAC;AAC3B,OAAO,8CAA8C,CAAC;AACtD,OAAO,0CAA0C,CAAC;AAClD,OAAO,kCAAkC,CAAC;AAE1C,OAAO,EAAE,qBAAqB,EAAE,MAAM,mCAAmC,CAAC;AAE1E,MAAM,WAAW,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;WAqEZ,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC;;;;;;;;;;;;;;;uBAenB,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC;;;;CAIxD,CAAC;AAEF,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAqE,EAAE,EAAE;IAChI,MAAM,EAAE,CAAC,EAAE,GAAG,cAAc,EAAE,CAAC;IAC/B,MAAM,SAAS,GAAG,MAAM,CAAY,IAAI,CAAC,CAAC;IAC1C,MAAM,CAAC,EAAE,aAAa,CAAC,GAAG,QAAQ,EAAe,CAAC;IAClD,MAAM,CAAC,SAAS,EAAE,YAAY,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC9C,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAExD,MAAM,UAAU,GAAG,CAAC,KAAa,EAAE,EAAE;QACpC,IAAI,SAAS,CAAC,OAAO,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC;YACpC,MAAM,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,SAAS,CAAC,OAAO,EAAE,MAAM,CAAC,IAAI,CAAC;YAC7D,YAAY,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC;YAC5B,OAAO,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC;QAC9B,CAAC;IACF,CAAC,CAAC;IAEF,MAAM,YAAY,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IACzC,MAAM,aAAa,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3C,MAAM,YAAY,GAAG,GAAG,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;IAExD,MAAM,kBAAkB,GAAG,qBAAqB,EAAE,CAAC;IAEnD,OAAO,YAAY,CAClB,CAAC,UAAU,CAAC,OAAO,CAAC,SAAS,CAC5B;GAAA,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC,CAC3F;IAAA,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CACtE;KAAA,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC,kBAAkB,CAAC,CACvF;MAAA,CAAC,SAAS,KAAK,CAAC,IAAI,CACnB,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAG,CACvH,CACD;MAAA,CAAC,UAAU,CACV,IAAI,CAAC,UAAU,CACf,KAAK,CACL,IAAI,CAAC,OAAO,CACZ,KAAK,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CACrB,mBAAmB,CACnB,OAAO,CAAC,CAAC,aAAa,CAAC,CACvB,QAAQ,CAAC,CAAC,SAAS,KAAK,CAAC,CAAC,EAE3B;MAAA,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAC3G;MAAA,CAAC,UAAU,CACV,IAAI,CAAC,OAAO,CACZ,KAAK,CACL,IAAI,CAAC,OAAO,CACZ,UAAU,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAC/B,SAAS,CAAC,yBAAyB,CACnC,OAAO,CAAC,CAAC,OAAO,CAAC,EAEnB;KAAA,EAAE,WAAW,CACb;KAAA,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS,CAAC,wBAAwB,CAAC,OAAO,CAAC,CAAC,kBAAkB,CAAC,EAC7H;KAAA,CAAC,UAAU,CACV,IAAI,CAAC,cAAc,CACnB,UAAU,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAChC,SAAS,CAAC,wBAAwB,CAClC,OAAO,CAAC,CAAC,kBAAkB,CAAC,EAE7B;KAAA,CAAC,MAAM,CACN,GAAG,CAAC,CAAC,SAAS,CAAC,CACf,UAAU,CAAC,CAAC;YACX,MAAM,EAAE,yBAAyB;YACjC,MAAM,EAAE,yBAAyB;SACjC,CAAC,CACF,QAAQ,CACR,IAAI,CAAC,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,CACxB,kBAAkB,CAAC,oBAAoB,CACvC,kBAAkB,CAClB,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,IAAI,IAAI,OAAO,EAAE,CAAC,CAClE,OAAO,CAAC,CAAC,CAAC,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC,CAC5C,MAAM,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAC1C,wBAAwB,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE;YACpC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,QAAQ,EAAE,CAAC,CAAC,CAAC;YAC5C,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAC5B,CAAC,CAAC,CACF,gBAAgB,CAAC,CAAC,QAAQ,CAAC,CAC3B,YAAY,CAAC,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAEhC;MAAA,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,CAClD,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CACrB;QAAA,CAAC,GAAG,CAAC,SAAS,CAAC,uBAAuB,CACrC;SAAA,CAAC;;;cAGC,CACF;SAAA,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,kBAAkB,CAAC,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,CAAC,kBAAkB,CAAC,EACxG;SAAA,CAAC,GAAG,CAAC,SAAS,CAAC,oBAAoB,CAClC;UAAA,CAAC,QAAQ,CAAC,YAAY,EACvB;SAAA,EAAE,GAAG,CACN;QAAA,EAAE,GAAG,CACN;OAAA,EAAE,WAAW,CAAC,CACd,CAAC,CACH;KAAA,EAAE,MAAM,CACT;IAAA,EAAE,GAAG,CACN;GAAA,EAAE,GAAG,CACN;EAAA,EAAE,UAAU,CAAC,EACb,QAAQ,CAAC,IAAI,CACb,CAAC;AACH,CAAC,CAAC","sourcesContent":["import type { IUpload } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport { Box, ButtonGroup, IconButton, Palette, Throbber } from '@rocket.chat/fuselage';\nimport React, { useRef, useState } from 'react';\nimport { FocusScope } from 'react-aria';\nimport { createPortal } from 'react-dom';\nimport { useTranslation } from 'react-i18next';\nimport { Keyboard, Navigation, Zoom, A11y } from 'swiper';\nimport type { SwiperClass, SwiperRef } from 'swiper/react';\nimport { Swiper, SwiperSlide } from 'swiper/react';\n\n// Import Swiper styles\nimport 'swiper/swiper.css';\nimport 'swiper/modules/navigation/navigation.min.css';\nimport 'swiper/modules/keyboard/keyboard.min.css';\nimport 'swiper/modules/zoom/zoom.min.css';\n\nimport { usePreventPropagation } from '../../hooks/usePreventPropagation';\n\nconst swiperStyle = css`\n\t.swiper {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\t.swiper-container {\n\t\tposition: absolute;\n\t\tz-index: 99;\n\t\ttop: 0;\n\n\t\toverflow: hidden;\n\n\t\twidth: 100%;\n\t\theight: 100%;\n\n\t\tbackground-color: var(--rcx-color-surface-overlay, rgba(0, 0, 0, 0.6));\n\t}\n\n\t.rcx-swiper-close-button,\n\t.rcx-swiper-prev-button,\n\t.rcx-swiper-next-button {\n\t\tcolor: var(--rcx-color-font-pure-white, #ffffff) !important;\n\t}\n\n\t.rcx-swiper-prev-button,\n\t.rcx-swiper-next-button {\n\t\tposition: absolute;\n\t\tz-index: 10;\n\t\ttop: 50%;\n\n\t\tcursor: pointer;\n\t}\n\n\t.rcx-swiper-prev-button.swiper-button-disabled,\n\t.rcx-swiper-next-button.swiper-button-disabled {\n\t\tcursor: auto;\n\t\tpointer-events: none;\n\n\t\topacity: 0.35;\n\t}\n\n\t.rcx-swiper-prev-button.swiper-button-hidden,\n\t.rcx-swiper-next-button.swiper-button-hidden {\n\t\tcursor: auto;\n\t\tpointer-events: none;\n\n\t\topacity: 0;\n\t}\n\n\t.rcx-swiper-prev-button,\n\t.swiper-rtl .rcx-swiper-next-button {\n\t\tright: auto;\n\t\tleft: 10px;\n\t}\n\n\t.rcx-swiper-next-button,\n\t.swiper-rtl .rcx-swiper-prev-button {\n\t\tright: 10px;\n\t\tleft: auto;\n\t}\n\n\t.rcx-lazy-preloader {\n\t\tposition: absolute;\n\t\tz-index: -1;\n\t\tleft: 50%;\n\t\ttop: 50%;\n\n\t\ttransform: translate(-50%, -50%);\n\n\t\tcolor: ${Palette.text['font-pure-white']};\n\t}\n\n\t.rcx-swiper-controls {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: 0;\n\t\tpadding: 10px;\n\t\tz-index: 2;\n\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\ttransition: background-color 0.2s;\n\t\t&:hover {\n\t\t\tbackground-color: ${Palette.surface['surface-overlay']};\n\t\t\ttransition: background-color 0.2s;\n\t\t}\n\t}\n`;\n\nexport const ImageGallery = ({ images, onClose, loadMore }: { images: IUpload[]; onClose: () => void; loadMore?: () => void }) => {\n\tconst { t } = useTranslation();\n\tconst swiperRef = useRef<SwiperRef>(null);\n\tconst [, setSwiperInst] = useState<SwiperClass>();\n\tconst [zoomScale, setZoomScale] = useState(1);\n\tconst [gridSize, setGridSize] = useState(images.length);\n\n\tconst handleZoom = (ratio: number) => {\n\t\tif (swiperRef.current?.swiper.zoom) {\n\t\t\tconst { scale, in: zoomIn } = swiperRef.current?.swiper.zoom;\n\t\t\tsetZoomScale(scale + ratio);\n\t\t\treturn zoomIn(scale + ratio);\n\t\t}\n\t};\n\n\tconst handleZoomIn = () => handleZoom(1);\n\tconst handleZoomOut = () => handleZoom(-1);\n\tconst handleResize = () => handleZoom(-(zoomScale - 1));\n\n\tconst preventPropagation = usePreventPropagation();\n\n\treturn createPortal(\n\t\t<FocusScope contain autoFocus>\n\t\t\t<Box role='dialog' aria-modal='true' aria-label={t('Image_gallery')} className={swiperStyle}>\n\t\t\t\t<div role='presentation' className='swiper-container' onClick={onClose}>\n\t\t\t\t\t<ButtonGroup role='toolbar' className='rcx-swiper-controls' onClick={preventPropagation}>\n\t\t\t\t\t\t{zoomScale !== 1 && (\n\t\t\t\t\t\t\t<IconButton name='resize' small icon='arrow-collapse' title={t('Resize')} rcx-swiper-zoom-out onClick={handleResize} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tname='zoom-out'\n\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\ticon='h-bar'\n\t\t\t\t\t\t\ttitle={t('Zoom_out')}\n\t\t\t\t\t\t\trcx-swiper-zoom-out\n\t\t\t\t\t\t\tonClick={handleZoomOut}\n\t\t\t\t\t\t\tdisabled={zoomScale === 1}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<IconButton name='zoom-in' small icon='plus' title={t('Zoom_in')} rcx-swiper-zoom-in onClick={handleZoomIn} />\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tname='close'\n\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\ticon='cross'\n\t\t\t\t\t\t\taria-label={t('Close_gallery')}\n\t\t\t\t\t\t\tclassName='rcx-swiper-close-button'\n\t\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t<IconButton icon='chevron-right' aria-label={t('Next_image')} className='rcx-swiper-prev-button' onClick={preventPropagation} />\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\ticon='chevron-left'\n\t\t\t\t\t\taria-label={t('Previous_image')}\n\t\t\t\t\t\tclassName='rcx-swiper-next-button'\n\t\t\t\t\t\tonClick={preventPropagation}\n\t\t\t\t\t/>\n\t\t\t\t\t<Swiper\n\t\t\t\t\t\tref={swiperRef}\n\t\t\t\t\t\tnavigation={{\n\t\t\t\t\t\t\tnextEl: '.rcx-swiper-next-button',\n\t\t\t\t\t\t\tprevEl: '.rcx-swiper-prev-button',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tkeyboard\n\t\t\t\t\t\tzoom={{ toggle: false }}\n\t\t\t\t\t\tlazyPreloaderClass='rcx-lazy-preloader'\n\t\t\t\t\t\trunCallbacksOnInit\n\t\t\t\t\t\tonKeyPress={(_, keyCode) => String(keyCode) === '27' && onClose()}\n\t\t\t\t\t\tmodules={[Navigation, Zoom, Keyboard, A11y]}\n\t\t\t\t\t\tonInit={(swiper) => setSwiperInst(swiper)}\n\t\t\t\t\t\tonSlidesGridLengthChange={(swiper) => {\n\t\t\t\t\t\t\tswiper.slideTo(images.length - gridSize, 0);\n\t\t\t\t\t\t\tsetGridSize(images.length);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonReachBeginning={loadMore}\n\t\t\t\t\t\tinitialSlide={images.length - 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t{[...images].reverse().map(({ _id, path, url }) => (\n\t\t\t\t\t\t\t<SwiperSlide key={_id}>\n\t\t\t\t\t\t\t\t<div className='swiper-zoom-container'>\n\t\t\t\t\t\t\t\t\t{/* eslint-disable-next-line\n\t\t\t\t\t\t\t\t\t\tjsx-a11y/no-noninteractive-element-interactions,\n\t\t\t\t\t\t\t\t\t\tjsx-a11y/click-events-have-key-events\n\t\t\t\t\t\t\t\t\t*/}\n\t\t\t\t\t\t\t\t\t<img src={path || url} loading='lazy' alt='' data-qa-zoom-scale={zoomScale} onClick={preventPropagation} />\n\t\t\t\t\t\t\t\t\t<div className='rcx-lazy-preloader'>\n\t\t\t\t\t\t\t\t\t\t<Throbber inheritColor />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</SwiperSlide>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Swiper>\n\t\t\t\t</div>\n\t\t\t</Box>\n\t\t</FocusScope>,\n\t\tdocument.body,\n\t);\n};\n"]}}},"code":"var _templateObject;\nlet _taggedTemplateLiteral;\nmodule.link(\"@babel/runtime/helpers/taggedTemplateLiteral\", {\n  default(v) {\n    _taggedTemplateLiteral = v;\n  }\n}, 0);\nmodule.export({\n  ImageGallery: () => ImageGallery\n});\nlet css;\nmodule.link(\"@rocket.chat/css-in-js\", {\n  css(v) {\n    css = v;\n  }\n}, 0);\nlet Box, ButtonGroup, IconButton, Palette, Throbber;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box(v) {\n    Box = v;\n  },\n  ButtonGroup(v) {\n    ButtonGroup = v;\n  },\n  IconButton(v) {\n    IconButton = v;\n  },\n  Palette(v) {\n    Palette = v;\n  },\n  Throbber(v) {\n    Throbber = v;\n  }\n}, 1);\nlet React, useRef, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useRef(v) {\n    useRef = v;\n  },\n  useState(v) {\n    useState = v;\n  }\n}, 2);\nlet FocusScope;\nmodule.link(\"react-aria\", {\n  FocusScope(v) {\n    FocusScope = v;\n  }\n}, 3);\nlet createPortal;\nmodule.link(\"react-dom\", {\n  createPortal(v) {\n    createPortal = v;\n  }\n}, 4);\nlet useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 5);\nlet Keyboard, Navigation, Zoom, A11y;\nmodule.link(\"swiper\", {\n  Keyboard(v) {\n    Keyboard = v;\n  },\n  Navigation(v) {\n    Navigation = v;\n  },\n  Zoom(v) {\n    Zoom = v;\n  },\n  A11y(v) {\n    A11y = v;\n  }\n}, 6);\nlet Swiper, SwiperSlide;\nmodule.link(\"swiper/react\", {\n  Swiper(v) {\n    Swiper = v;\n  },\n  SwiperSlide(v) {\n    SwiperSlide = v;\n  }\n}, 7);\nmodule.link(\"swiper/swiper.css\");\nmodule.link(\"swiper/modules/navigation/navigation.min.css\");\nmodule.link(\"swiper/modules/keyboard/keyboard.min.css\");\nmodule.link(\"swiper/modules/zoom/zoom.min.css\");\nlet usePreventPropagation;\nmodule.link(\"../../hooks/usePreventPropagation\", {\n  usePreventPropagation(v) {\n    usePreventPropagation = v;\n  }\n}, 8);\nconst swiperStyle = css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n\\t.swiper {\\n\\t\\twidth: 100%;\\n\\t\\theight: 100%;\\n\\t}\\n\\t.swiper-container {\\n\\t\\tposition: absolute;\\n\\t\\tz-index: 99;\\n\\t\\ttop: 0;\\n\\n\\t\\toverflow: hidden;\\n\\n\\t\\twidth: 100%;\\n\\t\\theight: 100%;\\n\\n\\t\\tbackground-color: var(--rcx-color-surface-overlay, rgba(0, 0, 0, 0.6));\\n\\t}\\n\\n\\t.rcx-swiper-close-button,\\n\\t.rcx-swiper-prev-button,\\n\\t.rcx-swiper-next-button {\\n\\t\\tcolor: var(--rcx-color-font-pure-white, #ffffff) !important;\\n\\t}\\n\\n\\t.rcx-swiper-prev-button,\\n\\t.rcx-swiper-next-button {\\n\\t\\tposition: absolute;\\n\\t\\tz-index: 10;\\n\\t\\ttop: 50%;\\n\\n\\t\\tcursor: pointer;\\n\\t}\\n\\n\\t.rcx-swiper-prev-button.swiper-button-disabled,\\n\\t.rcx-swiper-next-button.swiper-button-disabled {\\n\\t\\tcursor: auto;\\n\\t\\tpointer-events: none;\\n\\n\\t\\topacity: 0.35;\\n\\t}\\n\\n\\t.rcx-swiper-prev-button.swiper-button-hidden,\\n\\t.rcx-swiper-next-button.swiper-button-hidden {\\n\\t\\tcursor: auto;\\n\\t\\tpointer-events: none;\\n\\n\\t\\topacity: 0;\\n\\t}\\n\\n\\t.rcx-swiper-prev-button,\\n\\t.swiper-rtl .rcx-swiper-next-button {\\n\\t\\tright: auto;\\n\\t\\tleft: 10px;\\n\\t}\\n\\n\\t.rcx-swiper-next-button,\\n\\t.swiper-rtl .rcx-swiper-prev-button {\\n\\t\\tright: 10px;\\n\\t\\tleft: auto;\\n\\t}\\n\\n\\t.rcx-lazy-preloader {\\n\\t\\tposition: absolute;\\n\\t\\tz-index: -1;\\n\\t\\tleft: 50%;\\n\\t\\ttop: 50%;\\n\\n\\t\\ttransform: translate(-50%, -50%);\\n\\n\\t\\tcolor: \", \";\\n\\t}\\n\\n\\t.rcx-swiper-controls {\\n\\t\\tposition: absolute;\\n\\t\\ttop: 0;\\n\\t\\tright: 0;\\n\\t\\tpadding: 10px;\\n\\t\\tz-index: 2;\\n\\n\\t\\twidth: 100%;\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: flex-end;\\n\\t\\ttransition: background-color 0.2s;\\n\\t\\t&:hover {\\n\\t\\t\\tbackground-color: \", \";\\n\\t\\t\\ttransition: background-color 0.2s;\\n\\t\\t}\\n\\t}\\n\"])), Palette.text['font-pure-white'], Palette.surface['surface-overlay']);\nconst ImageGallery = _ref => {\n  let {\n    images,\n    onClose,\n    loadMore\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const swiperRef = useRef(null);\n  const [, setSwiperInst] = useState();\n  const [zoomScale, setZoomScale] = useState(1);\n  const [gridSize, setGridSize] = useState(images.length);\n  const handleZoom = ratio => {\n    var _swiperRef$current;\n    if ((_swiperRef$current = swiperRef.current) !== null && _swiperRef$current !== void 0 && _swiperRef$current.swiper.zoom) {\n      var _swiperRef$current2;\n      const {\n        scale,\n        in: zoomIn\n      } = (_swiperRef$current2 = swiperRef.current) === null || _swiperRef$current2 === void 0 ? void 0 : _swiperRef$current2.swiper.zoom;\n      setZoomScale(scale + ratio);\n      return zoomIn(scale + ratio);\n    }\n  };\n  const handleZoomIn = () => handleZoom(1);\n  const handleZoomOut = () => handleZoom(-1);\n  const handleResize = () => handleZoom(-(zoomScale - 1));\n  const preventPropagation = usePreventPropagation();\n  return /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(FocusScope, {\n    contain: true,\n    autoFocus: true\n  }, /*#__PURE__*/React.createElement(Box, {\n    role: \"dialog\",\n    \"aria-modal\": \"true\",\n    \"aria-label\": t('Image_gallery'),\n    className: swiperStyle\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    role: \"presentation\",\n    className: \"swiper-container\",\n    onClick: onClose\n  }, /*#__PURE__*/React.createElement(ButtonGroup, {\n    role: \"toolbar\",\n    className: \"rcx-swiper-controls\",\n    onClick: preventPropagation\n  }, zoomScale !== 1 && /*#__PURE__*/React.createElement(IconButton, {\n    name: \"resize\",\n    small: true,\n    icon: \"arrow-collapse\",\n    title: t('Resize'),\n    \"rcx-swiper-zoom-out\": true,\n    onClick: handleResize\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    name: \"zoom-out\",\n    small: true,\n    icon: \"h-bar\",\n    title: t('Zoom_out'),\n    \"rcx-swiper-zoom-out\": true,\n    onClick: handleZoomOut,\n    disabled: zoomScale === 1\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    name: \"zoom-in\",\n    small: true,\n    icon: \"plus\",\n    title: t('Zoom_in'),\n    \"rcx-swiper-zoom-in\": true,\n    onClick: handleZoomIn\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    name: \"close\",\n    small: true,\n    icon: \"cross\",\n    \"aria-label\": t('Close_gallery'),\n    className: \"rcx-swiper-close-button\",\n    onClick: onClose\n  })), /*#__PURE__*/React.createElement(IconButton, {\n    icon: \"chevron-right\",\n    \"aria-label\": t('Next_image'),\n    className: \"rcx-swiper-prev-button\",\n    onClick: preventPropagation\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    icon: \"chevron-left\",\n    \"aria-label\": t('Previous_image'),\n    className: \"rcx-swiper-next-button\",\n    onClick: preventPropagation\n  }), /*#__PURE__*/React.createElement(Swiper, {\n    ref: swiperRef,\n    navigation: {\n      nextEl: '.rcx-swiper-next-button',\n      prevEl: '.rcx-swiper-prev-button'\n    },\n    keyboard: true,\n    zoom: {\n      toggle: false\n    },\n    lazyPreloaderClass: \"rcx-lazy-preloader\",\n    runCallbacksOnInit: true,\n    onKeyPress: (_, keyCode) => String(keyCode) === '27' && onClose(),\n    modules: [Navigation, Zoom, Keyboard, A11y],\n    onInit: swiper => setSwiperInst(swiper),\n    onSlidesGridLengthChange: swiper => {\n      swiper.slideTo(images.length - gridSize, 0);\n      setGridSize(images.length);\n    },\n    onReachBeginning: loadMore,\n    initialSlide: images.length - 1\n  }, [...images].reverse().map(_ref2 => {\n    let {\n      _id,\n      path,\n      url\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(SwiperSlide, {\n      key: _id\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"swiper-zoom-container\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: path || url,\n      loading: \"lazy\",\n      alt: \"\",\n      \"data-qa-zoom-scale\": zoomScale,\n      onClick: preventPropagation\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"rcx-lazy-preloader\"\n    }, /*#__PURE__*/React.createElement(Throbber, {\n      inheritColor: true\n    }))));\n  }))))), document.body);\n};","map":{"version":3,"names":["_taggedTemplateLiteral","module","link","default","v","export","ImageGallery","css","Box","ButtonGroup","IconButton","Palette","Throbber","React","useRef","useState","FocusScope","createPortal","useTranslation","Keyboard","Navigation","Zoom","A11y","Swiper","SwiperSlide","usePreventPropagation","swiperStyle","_templateObject","text","surface","_ref","images","onClose","loadMore","t","swiperRef","setSwiperInst","zoomScale","setZoomScale","gridSize","setGridSize","length","handleZoom","ratio","_swiperRef$current","current","swiper","zoom","_swiperRef$current2","scale","in","zoomIn","handleZoomIn","handleZoomOut","handleResize","preventPropagation","createElement","contain","autoFocus","role","className","onClick","name","small","icon","title","disabled","ref","navigation","nextEl","prevEl","keyboard","toggle","lazyPreloaderClass","runCallbacksOnInit","onKeyPress","_","keyCode","String","modules","onInit","onSlidesGridLengthChange","slideTo","onReachBeginning","initialSlide","reverse","map","_ref2","_id","path","url","key","src","loading","alt","inheritColor","document","body"],"sources":["client/components/ImageGallery/ImageGallery.tsx"],"sourcesContent":["import type { IUpload } from '@rocket.chat/core-typings';\nimport { css } from '@rocket.chat/css-in-js';\nimport { Box, ButtonGroup, IconButton, Palette, Throbber } from '@rocket.chat/fuselage';\nimport React, { useRef, useState } from 'react';\nimport { FocusScope } from 'react-aria';\nimport { createPortal } from 'react-dom';\nimport { useTranslation } from 'react-i18next';\nimport { Keyboard, Navigation, Zoom, A11y } from 'swiper';\nimport type { SwiperClass, SwiperRef } from 'swiper/react';\nimport { Swiper, SwiperSlide } from 'swiper/react';\n\n// Import Swiper styles\nimport 'swiper/swiper.css';\nimport 'swiper/modules/navigation/navigation.min.css';\nimport 'swiper/modules/keyboard/keyboard.min.css';\nimport 'swiper/modules/zoom/zoom.min.css';\n\nimport { usePreventPropagation } from '../../hooks/usePreventPropagation';\n\nconst swiperStyle = css`\n\t.swiper {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\t.swiper-container {\n\t\tposition: absolute;\n\t\tz-index: 99;\n\t\ttop: 0;\n\n\t\toverflow: hidden;\n\n\t\twidth: 100%;\n\t\theight: 100%;\n\n\t\tbackground-color: var(--rcx-color-surface-overlay, rgba(0, 0, 0, 0.6));\n\t}\n\n\t.rcx-swiper-close-button,\n\t.rcx-swiper-prev-button,\n\t.rcx-swiper-next-button {\n\t\tcolor: var(--rcx-color-font-pure-white, #ffffff) !important;\n\t}\n\n\t.rcx-swiper-prev-button,\n\t.rcx-swiper-next-button {\n\t\tposition: absolute;\n\t\tz-index: 10;\n\t\ttop: 50%;\n\n\t\tcursor: pointer;\n\t}\n\n\t.rcx-swiper-prev-button.swiper-button-disabled,\n\t.rcx-swiper-next-button.swiper-button-disabled {\n\t\tcursor: auto;\n\t\tpointer-events: none;\n\n\t\topacity: 0.35;\n\t}\n\n\t.rcx-swiper-prev-button.swiper-button-hidden,\n\t.rcx-swiper-next-button.swiper-button-hidden {\n\t\tcursor: auto;\n\t\tpointer-events: none;\n\n\t\topacity: 0;\n\t}\n\n\t.rcx-swiper-prev-button,\n\t.swiper-rtl .rcx-swiper-next-button {\n\t\tright: auto;\n\t\tleft: 10px;\n\t}\n\n\t.rcx-swiper-next-button,\n\t.swiper-rtl .rcx-swiper-prev-button {\n\t\tright: 10px;\n\t\tleft: auto;\n\t}\n\n\t.rcx-lazy-preloader {\n\t\tposition: absolute;\n\t\tz-index: -1;\n\t\tleft: 50%;\n\t\ttop: 50%;\n\n\t\ttransform: translate(-50%, -50%);\n\n\t\tcolor: ${Palette.text['font-pure-white']};\n\t}\n\n\t.rcx-swiper-controls {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: 0;\n\t\tpadding: 10px;\n\t\tz-index: 2;\n\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\ttransition: background-color 0.2s;\n\t\t&:hover {\n\t\t\tbackground-color: ${Palette.surface['surface-overlay']};\n\t\t\ttransition: background-color 0.2s;\n\t\t}\n\t}\n`;\n\nexport const ImageGallery = ({ images, onClose, loadMore }: { images: IUpload[]; onClose: () => void; loadMore?: () => void }) => {\n\tconst { t } = useTranslation();\n\tconst swiperRef = useRef<SwiperRef>(null);\n\tconst [, setSwiperInst] = useState<SwiperClass>();\n\tconst [zoomScale, setZoomScale] = useState(1);\n\tconst [gridSize, setGridSize] = useState(images.length);\n\n\tconst handleZoom = (ratio: number) => {\n\t\tif (swiperRef.current?.swiper.zoom) {\n\t\t\tconst { scale, in: zoomIn } = swiperRef.current?.swiper.zoom;\n\t\t\tsetZoomScale(scale + ratio);\n\t\t\treturn zoomIn(scale + ratio);\n\t\t}\n\t};\n\n\tconst handleZoomIn = () => handleZoom(1);\n\tconst handleZoomOut = () => handleZoom(-1);\n\tconst handleResize = () => handleZoom(-(zoomScale - 1));\n\n\tconst preventPropagation = usePreventPropagation();\n\n\treturn createPortal(\n\t\t<FocusScope contain autoFocus>\n\t\t\t<Box role='dialog' aria-modal='true' aria-label={t('Image_gallery')} className={swiperStyle}>\n\t\t\t\t<div role='presentation' className='swiper-container' onClick={onClose}>\n\t\t\t\t\t<ButtonGroup role='toolbar' className='rcx-swiper-controls' onClick={preventPropagation}>\n\t\t\t\t\t\t{zoomScale !== 1 && (\n\t\t\t\t\t\t\t<IconButton name='resize' small icon='arrow-collapse' title={t('Resize')} rcx-swiper-zoom-out onClick={handleResize} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tname='zoom-out'\n\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\ticon='h-bar'\n\t\t\t\t\t\t\ttitle={t('Zoom_out')}\n\t\t\t\t\t\t\trcx-swiper-zoom-out\n\t\t\t\t\t\t\tonClick={handleZoomOut}\n\t\t\t\t\t\t\tdisabled={zoomScale === 1}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<IconButton name='zoom-in' small icon='plus' title={t('Zoom_in')} rcx-swiper-zoom-in onClick={handleZoomIn} />\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tname='close'\n\t\t\t\t\t\t\tsmall\n\t\t\t\t\t\t\ticon='cross'\n\t\t\t\t\t\t\taria-label={t('Close_gallery')}\n\t\t\t\t\t\t\tclassName='rcx-swiper-close-button'\n\t\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t<IconButton icon='chevron-right' aria-label={t('Next_image')} className='rcx-swiper-prev-button' onClick={preventPropagation} />\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\ticon='chevron-left'\n\t\t\t\t\t\taria-label={t('Previous_image')}\n\t\t\t\t\t\tclassName='rcx-swiper-next-button'\n\t\t\t\t\t\tonClick={preventPropagation}\n\t\t\t\t\t/>\n\t\t\t\t\t<Swiper\n\t\t\t\t\t\tref={swiperRef}\n\t\t\t\t\t\tnavigation={{\n\t\t\t\t\t\t\tnextEl: '.rcx-swiper-next-button',\n\t\t\t\t\t\t\tprevEl: '.rcx-swiper-prev-button',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tkeyboard\n\t\t\t\t\t\tzoom={{ toggle: false }}\n\t\t\t\t\t\tlazyPreloaderClass='rcx-lazy-preloader'\n\t\t\t\t\t\trunCallbacksOnInit\n\t\t\t\t\t\tonKeyPress={(_, keyCode) => String(keyCode) === '27' && onClose()}\n\t\t\t\t\t\tmodules={[Navigation, Zoom, Keyboard, A11y]}\n\t\t\t\t\t\tonInit={(swiper) => setSwiperInst(swiper)}\n\t\t\t\t\t\tonSlidesGridLengthChange={(swiper) => {\n\t\t\t\t\t\t\tswiper.slideTo(images.length - gridSize, 0);\n\t\t\t\t\t\t\tsetGridSize(images.length);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonReachBeginning={loadMore}\n\t\t\t\t\t\tinitialSlide={images.length - 1}\n\t\t\t\t\t>\n\t\t\t\t\t\t{[...images].reverse().map(({ _id, path, url }) => (\n\t\t\t\t\t\t\t<SwiperSlide key={_id}>\n\t\t\t\t\t\t\t\t<div className='swiper-zoom-container'>\n\t\t\t\t\t\t\t\t\t{/* eslint-disable-next-line\n\t\t\t\t\t\t\t\t\t\tjsx-a11y/no-noninteractive-element-interactions,\n\t\t\t\t\t\t\t\t\t\tjsx-a11y/click-events-have-key-events\n\t\t\t\t\t\t\t\t\t*/}\n\t\t\t\t\t\t\t\t\t<img src={path || url} loading='lazy' alt='' data-qa-zoom-scale={zoomScale} onClick={preventPropagation} />\n\t\t\t\t\t\t\t\t\t<div className='rcx-lazy-preloader'>\n\t\t\t\t\t\t\t\t\t\t<Throbber inheritColor />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</SwiperSlide>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Swiper>\n\t\t\t\t</div>\n\t\t\t</Box>\n\t\t</FocusScope>,\n\t\tdocument.body,\n\t);\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"81c5ff351bd66202087535764be73d2ce1448b3a"}
