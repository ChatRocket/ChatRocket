{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/hooks/useUserInfoActions/useUserInfoActions.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/room/hooks/useUserInfoActions/useUserInfoActions.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/hooks/useUserInfoActions/useUserInfoActions.ts","inputSourceMap":{"version":3,"file":"client/views/room/hooks/useUserInfoActions/useUserInfoActions.ts","sourceRoot":"","sources":["client/views/room/hooks/useUserInfoActions/useUserInfoActions.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IRoom, IUser } from '@rocket.chat/core-typings';\nimport type { Icon } from '@rocket.chat/fuselage';\nimport type { GenericMenuItemProps } from '@rocket.chat/ui-client';\nimport { useLayoutHiddenActions } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps } from 'react';\nimport { useMemo } from 'react';\n\nimport { useAddUserAction } from './actions/useAddUserAction';\nimport { useBlockUserAction } from './actions/useBlockUserAction';\nimport { useChangeLeaderAction } from './actions/useChangeLeaderAction';\nimport { useChangeModeratorAction } from './actions/useChangeModeratorAction';\nimport { useChangeOwnerAction } from './actions/useChangeOwnerAction';\nimport { useDirectMessageAction } from './actions/useDirectMessageAction';\nimport { useIgnoreUserAction } from './actions/useIgnoreUserAction';\nimport { useMuteUserAction } from './actions/useMuteUserAction';\nimport { useRedirectModerationConsole } from './actions/useRedirectModerationConsole';\nimport { useRemoveUserAction } from './actions/useRemoveUserAction';\nimport { useReportUser } from './actions/useReportUser';\nimport { useVideoCallAction } from './actions/useVideoCallAction';\nimport { useVoipCallAction } from './actions/useVoipCallAction';\nimport { useEmbeddedLayout } from '../../../../hooks/useEmbeddedLayout';\n\nexport type UserInfoActionType = 'communication' | 'privileges' | 'management' | 'moderation';\n\ntype UserInfoActionWithOnlyIcon = {\n\ttype?: UserInfoActionType;\n\tcontent?: string;\n\ticon: ComponentProps<typeof Icon>['name'];\n\ttitle: string;\n\tvariant?: 'danger';\n\tonClick: () => void;\n};\n\ntype UserInfoActionWithContent = {\n\ttype?: UserInfoActionType;\n\tcontent: string;\n\ticon?: ComponentProps<typeof Icon>['name'];\n\ttitle?: string;\n\tvariant?: 'danger';\n\tonClick: () => void;\n};\n\nexport type UserInfoAction = UserInfoActionWithContent | UserInfoActionWithOnlyIcon;\n\ntype UserMenuAction = {\n\tid: string;\n\ttitle: string;\n\titems: GenericMenuItemProps[];\n}[];\n\ntype UserInfoActionsParams = {\n\tuser: Pick<IUser, '_id' | 'username' | 'name' | 'freeSwitchExtension'>;\n\trid: IRoom['_id'];\n\treload?: () => void;\n\tsize?: number;\n\tisMember?: boolean;\n};\n\nexport const useUserInfoActions = ({\n\tuser,\n\trid,\n\treload,\n\tsize = 2,\n\tisMember,\n}: UserInfoActionsParams): { actions: [string, UserInfoAction][]; menuActions: any | undefined } => {\n\tconst addUser = useAddUserAction(user, rid, reload);\n\tconst blockUser = useBlockUserAction(user, rid);\n\tconst changeLeader = useChangeLeaderAction(user, rid);\n\tconst changeModerator = useChangeModeratorAction(user, rid);\n\tconst openModerationConsole = useRedirectModerationConsole(user._id);\n\tconst changeOwner = useChangeOwnerAction(user, rid);\n\tconst openDirectMessage = useDirectMessageAction(user, rid);\n\tconst ignoreUser = useIgnoreUserAction(user, rid);\n\tconst muteUser = useMuteUserAction(user, rid);\n\tconst removeUser = useRemoveUserAction(user, rid, reload);\n\tconst videoCall = useVideoCallAction(user);\n\tconst voipCall = useVoipCallAction(user);\n\tconst reportUserOption = useReportUser(user);\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\tconst { userToolbox: hiddenActions } = useLayoutHiddenActions();\n\n\tconst userinfoActions = useMemo(\n\t\t() => ({\n\t\t\t...(openDirectMessage && !isLayoutEmbedded && { openDirectMessage }),\n\t\t\t...(videoCall && { videoCall }),\n\t\t\t...(voipCall && { voipCall }),\n\t\t\t...(!isMember && addUser && { addUser }),\n\t\t\t...(isMember && changeOwner && { changeOwner }),\n\t\t\t...(isMember && changeLeader && { changeLeader }),\n\t\t\t...(isMember && changeModerator && { changeModerator }),\n\t\t\t...(isMember && openModerationConsole && { openModerationConsole }),\n\t\t\t...(isMember && ignoreUser && { ignoreUser }),\n\t\t\t...(isMember && muteUser && { muteUser }),\n\t\t\t...(blockUser && { toggleBlock: blockUser }),\n\t\t\t...(reportUserOption && { reportUser: reportUserOption }),\n\t\t\t...(isMember && removeUser && { removeUser }),\n\t\t}),\n\t\t[\n\t\t\topenDirectMessage,\n\t\t\tisLayoutEmbedded,\n\t\t\tvideoCall,\n\t\t\tvoipCall,\n\t\t\tchangeOwner,\n\t\t\tchangeLeader,\n\t\t\tchangeModerator,\n\t\t\tignoreUser,\n\t\t\tmuteUser,\n\t\t\tblockUser,\n\t\t\tremoveUser,\n\t\t\treportUserOption,\n\t\t\topenModerationConsole,\n\t\t\taddUser,\n\t\t\tisMember,\n\t\t],\n\t);\n\n\tconst actionSpread = useMemo(() => {\n\t\tconst entries = Object.entries(userinfoActions).filter(([key]) => !hiddenActions.includes(key));\n\n\t\tconst options = entries.slice(0, size);\n\t\tconst slicedOptions = entries.slice(size, entries.length);\n\n\t\tconst menuActions = slicedOptions.reduce((acc, [_key, item]) => {\n\t\t\tconst group = item.type ? item.type : '';\n\t\t\tconst section = acc.find((section: { id: string }) => section.id === group);\n\n\t\t\tconst newItem = {\n\t\t\t\t...item,\n\t\t\t\tid: item.content || item.title || '',\n\t\t\t\tcontent: item.content || item.title,\n\t\t\t};\n\n\t\t\tif (section) {\n\t\t\t\tsection.items.push(newItem);\n\t\t\t\treturn acc;\n\t\t\t}\n\n\t\t\tconst newSection = { id: group, title: '', items: [newItem] };\n\t\t\tacc.push(newSection);\n\n\t\t\treturn acc;\n\t\t}, [] as UserMenuAction);\n\n\t\treturn { actions: options, menuActions };\n\t}, [size, userinfoActions, hiddenActions]);\n\n\treturn actionSpread;\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/hooks/useUserInfoActions/useUserInfoActions.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/hooks/useUserInfoActions/useUserInfoActions.ts","inputSourceMap":{"version":3,"file":"client/views/room/hooks/useUserInfoActions/useUserInfoActions.ts","sourceRoot":"","sources":["client/views/room/hooks/useUserInfoActions/useUserInfoActions.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IRoom, IUser } from '@rocket.chat/core-typings';\nimport type { Icon } from '@rocket.chat/fuselage';\nimport type { GenericMenuItemProps } from '@rocket.chat/ui-client';\nimport { useLayoutHiddenActions } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps } from 'react';\nimport { useMemo } from 'react';\n\nimport { useAddUserAction } from './actions/useAddUserAction';\nimport { useBlockUserAction } from './actions/useBlockUserAction';\nimport { useChangeLeaderAction } from './actions/useChangeLeaderAction';\nimport { useChangeModeratorAction } from './actions/useChangeModeratorAction';\nimport { useChangeOwnerAction } from './actions/useChangeOwnerAction';\nimport { useDirectMessageAction } from './actions/useDirectMessageAction';\nimport { useIgnoreUserAction } from './actions/useIgnoreUserAction';\nimport { useMuteUserAction } from './actions/useMuteUserAction';\nimport { useRedirectModerationConsole } from './actions/useRedirectModerationConsole';\nimport { useRemoveUserAction } from './actions/useRemoveUserAction';\nimport { useReportUser } from './actions/useReportUser';\nimport { useVideoCallAction } from './actions/useVideoCallAction';\nimport { useVoipCallAction } from './actions/useVoipCallAction';\nimport { useEmbeddedLayout } from '../../../../hooks/useEmbeddedLayout';\n\nexport type UserInfoActionType = 'communication' | 'privileges' | 'management' | 'moderation';\n\ntype UserInfoActionWithOnlyIcon = {\n\ttype?: UserInfoActionType;\n\tcontent?: string;\n\ticon: ComponentProps<typeof Icon>['name'];\n\ttitle: string;\n\tvariant?: 'danger';\n\tonClick: () => void;\n};\n\ntype UserInfoActionWithContent = {\n\ttype?: UserInfoActionType;\n\tcontent: string;\n\ticon?: ComponentProps<typeof Icon>['name'];\n\ttitle?: string;\n\tvariant?: 'danger';\n\tonClick: () => void;\n};\n\nexport type UserInfoAction = UserInfoActionWithContent | UserInfoActionWithOnlyIcon;\n\ntype UserMenuAction = {\n\tid: string;\n\ttitle: string;\n\titems: GenericMenuItemProps[];\n}[];\n\ntype UserInfoActionsParams = {\n\tuser: Pick<IUser, '_id' | 'username' | 'name' | 'freeSwitchExtension'>;\n\trid: IRoom['_id'];\n\treload?: () => void;\n\tsize?: number;\n\tisMember?: boolean;\n};\n\nexport const useUserInfoActions = ({\n\tuser,\n\trid,\n\treload,\n\tsize = 2,\n\tisMember,\n}: UserInfoActionsParams): { actions: [string, UserInfoAction][]; menuActions: any | undefined } => {\n\tconst addUser = useAddUserAction(user, rid, reload);\n\tconst blockUser = useBlockUserAction(user, rid);\n\tconst changeLeader = useChangeLeaderAction(user, rid);\n\tconst changeModerator = useChangeModeratorAction(user, rid);\n\tconst openModerationConsole = useRedirectModerationConsole(user._id);\n\tconst changeOwner = useChangeOwnerAction(user, rid);\n\tconst openDirectMessage = useDirectMessageAction(user, rid);\n\tconst ignoreUser = useIgnoreUserAction(user, rid);\n\tconst muteUser = useMuteUserAction(user, rid);\n\tconst removeUser = useRemoveUserAction(user, rid, reload);\n\tconst videoCall = useVideoCallAction(user);\n\tconst voipCall = useVoipCallAction(user);\n\tconst reportUserOption = useReportUser(user);\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\tconst { userToolbox: hiddenActions } = useLayoutHiddenActions();\n\n\tconst userinfoActions = useMemo(\n\t\t() => ({\n\t\t\t...(openDirectMessage && !isLayoutEmbedded && { openDirectMessage }),\n\t\t\t...(videoCall && { videoCall }),\n\t\t\t...(voipCall && { voipCall }),\n\t\t\t...(!isMember && addUser && { addUser }),\n\t\t\t...(isMember && changeOwner && { changeOwner }),\n\t\t\t...(isMember && changeLeader && { changeLeader }),\n\t\t\t...(isMember && changeModerator && { changeModerator }),\n\t\t\t...(isMember && openModerationConsole && { openModerationConsole }),\n\t\t\t...(isMember && ignoreUser && { ignoreUser }),\n\t\t\t...(isMember && muteUser && { muteUser }),\n\t\t\t...(blockUser && { toggleBlock: blockUser }),\n\t\t\t...(reportUserOption && { reportUser: reportUserOption }),\n\t\t\t...(isMember && removeUser && { removeUser }),\n\t\t}),\n\t\t[\n\t\t\topenDirectMessage,\n\t\t\tisLayoutEmbedded,\n\t\t\tvideoCall,\n\t\t\tvoipCall,\n\t\t\tchangeOwner,\n\t\t\tchangeLeader,\n\t\t\tchangeModerator,\n\t\t\tignoreUser,\n\t\t\tmuteUser,\n\t\t\tblockUser,\n\t\t\tremoveUser,\n\t\t\treportUserOption,\n\t\t\topenModerationConsole,\n\t\t\taddUser,\n\t\t\tisMember,\n\t\t],\n\t);\n\n\tconst actionSpread = useMemo(() => {\n\t\tconst entries = Object.entries(userinfoActions).filter(([key]) => !hiddenActions.includes(key));\n\n\t\tconst options = entries.slice(0, size);\n\t\tconst slicedOptions = entries.slice(size, entries.length);\n\n\t\tconst menuActions = slicedOptions.reduce((acc, [_key, item]) => {\n\t\t\tconst group = item.type ? item.type : '';\n\t\t\tconst section = acc.find((section: { id: string }) => section.id === group);\n\n\t\t\tconst newItem = {\n\t\t\t\t...item,\n\t\t\t\tid: item.content || item.title || '',\n\t\t\t\tcontent: item.content || item.title,\n\t\t\t};\n\n\t\t\tif (section) {\n\t\t\t\tsection.items.push(newItem);\n\t\t\t\treturn acc;\n\t\t\t}\n\n\t\t\tconst newSection = { id: group, title: '', items: [newItem] };\n\t\t\tacc.push(newSection);\n\n\t\t\treturn acc;\n\t\t}, [] as UserMenuAction);\n\n\t\treturn { actions: options, menuActions };\n\t}, [size, userinfoActions, hiddenActions]);\n\n\treturn actionSpread;\n};\n"]}}},"code":"let _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 0);\nmodule.export({\n  useUserInfoActions: () => useUserInfoActions\n});\nlet useLayoutHiddenActions;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useLayoutHiddenActions(v) {\n    useLayoutHiddenActions = v;\n  }\n}, 0);\nlet useMemo;\nmodule.link(\"react\", {\n  useMemo(v) {\n    useMemo = v;\n  }\n}, 1);\nlet useAddUserAction;\nmodule.link(\"./actions/useAddUserAction\", {\n  useAddUserAction(v) {\n    useAddUserAction = v;\n  }\n}, 2);\nlet useBlockUserAction;\nmodule.link(\"./actions/useBlockUserAction\", {\n  useBlockUserAction(v) {\n    useBlockUserAction = v;\n  }\n}, 3);\nlet useChangeLeaderAction;\nmodule.link(\"./actions/useChangeLeaderAction\", {\n  useChangeLeaderAction(v) {\n    useChangeLeaderAction = v;\n  }\n}, 4);\nlet useChangeModeratorAction;\nmodule.link(\"./actions/useChangeModeratorAction\", {\n  useChangeModeratorAction(v) {\n    useChangeModeratorAction = v;\n  }\n}, 5);\nlet useChangeOwnerAction;\nmodule.link(\"./actions/useChangeOwnerAction\", {\n  useChangeOwnerAction(v) {\n    useChangeOwnerAction = v;\n  }\n}, 6);\nlet useDirectMessageAction;\nmodule.link(\"./actions/useDirectMessageAction\", {\n  useDirectMessageAction(v) {\n    useDirectMessageAction = v;\n  }\n}, 7);\nlet useIgnoreUserAction;\nmodule.link(\"./actions/useIgnoreUserAction\", {\n  useIgnoreUserAction(v) {\n    useIgnoreUserAction = v;\n  }\n}, 8);\nlet useMuteUserAction;\nmodule.link(\"./actions/useMuteUserAction\", {\n  useMuteUserAction(v) {\n    useMuteUserAction = v;\n  }\n}, 9);\nlet useRedirectModerationConsole;\nmodule.link(\"./actions/useRedirectModerationConsole\", {\n  useRedirectModerationConsole(v) {\n    useRedirectModerationConsole = v;\n  }\n}, 10);\nlet useRemoveUserAction;\nmodule.link(\"./actions/useRemoveUserAction\", {\n  useRemoveUserAction(v) {\n    useRemoveUserAction = v;\n  }\n}, 11);\nlet useReportUser;\nmodule.link(\"./actions/useReportUser\", {\n  useReportUser(v) {\n    useReportUser = v;\n  }\n}, 12);\nlet useVideoCallAction;\nmodule.link(\"./actions/useVideoCallAction\", {\n  useVideoCallAction(v) {\n    useVideoCallAction = v;\n  }\n}, 13);\nlet useVoipCallAction;\nmodule.link(\"./actions/useVoipCallAction\", {\n  useVoipCallAction(v) {\n    useVoipCallAction = v;\n  }\n}, 14);\nlet useEmbeddedLayout;\nmodule.link(\"../../../../hooks/useEmbeddedLayout\", {\n  useEmbeddedLayout(v) {\n    useEmbeddedLayout = v;\n  }\n}, 15);\nconst useUserInfoActions = _ref => {\n  let {\n    user,\n    rid,\n    reload,\n    size = 2,\n    isMember\n  } = _ref;\n  const addUser = useAddUserAction(user, rid, reload);\n  const blockUser = useBlockUserAction(user, rid);\n  const changeLeader = useChangeLeaderAction(user, rid);\n  const changeModerator = useChangeModeratorAction(user, rid);\n  const openModerationConsole = useRedirectModerationConsole(user._id);\n  const changeOwner = useChangeOwnerAction(user, rid);\n  const openDirectMessage = useDirectMessageAction(user, rid);\n  const ignoreUser = useIgnoreUserAction(user, rid);\n  const muteUser = useMuteUserAction(user, rid);\n  const removeUser = useRemoveUserAction(user, rid, reload);\n  const videoCall = useVideoCallAction(user);\n  const voipCall = useVoipCallAction(user);\n  const reportUserOption = useReportUser(user);\n  const isLayoutEmbedded = useEmbeddedLayout();\n  const {\n    userToolbox: hiddenActions\n  } = useLayoutHiddenActions();\n  const userinfoActions = useMemo(() => _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, openDirectMessage && !isLayoutEmbedded && {\n    openDirectMessage\n  }), videoCall && {\n    videoCall\n  }), voipCall && {\n    voipCall\n  }), !isMember && addUser && {\n    addUser\n  }), isMember && changeOwner && {\n    changeOwner\n  }), isMember && changeLeader && {\n    changeLeader\n  }), isMember && changeModerator && {\n    changeModerator\n  }), isMember && openModerationConsole && {\n    openModerationConsole\n  }), isMember && ignoreUser && {\n    ignoreUser\n  }), isMember && muteUser && {\n    muteUser\n  }), blockUser && {\n    toggleBlock: blockUser\n  }), reportUserOption && {\n    reportUser: reportUserOption\n  }), isMember && removeUser && {\n    removeUser\n  }), [openDirectMessage, isLayoutEmbedded, videoCall, voipCall, changeOwner, changeLeader, changeModerator, ignoreUser, muteUser, blockUser, removeUser, reportUserOption, openModerationConsole, addUser, isMember]);\n  const actionSpread = useMemo(() => {\n    const entries = Object.entries(userinfoActions).filter(_ref2 => {\n      let [key] = _ref2;\n      return !hiddenActions.includes(key);\n    });\n    const options = entries.slice(0, size);\n    const slicedOptions = entries.slice(size, entries.length);\n    const menuActions = slicedOptions.reduce((acc, _ref3) => {\n      let [_key, item] = _ref3;\n      const group = item.type ? item.type : '';\n      const section = acc.find(section => section.id === group);\n      const newItem = _objectSpread(_objectSpread({}, item), {}, {\n        id: item.content || item.title || '',\n        content: item.content || item.title\n      });\n      if (section) {\n        section.items.push(newItem);\n        return acc;\n      }\n      const newSection = {\n        id: group,\n        title: '',\n        items: [newItem]\n      };\n      acc.push(newSection);\n      return acc;\n    }, []);\n    return {\n      actions: options,\n      menuActions\n    };\n  }, [size, userinfoActions, hiddenActions]);\n  return actionSpread;\n};","map":{"version":3,"names":["_objectSpread","module","link","default","v","export","useUserInfoActions","useLayoutHiddenActions","useMemo","useAddUserAction","useBlockUserAction","useChangeLeaderAction","useChangeModeratorAction","useChangeOwnerAction","useDirectMessageAction","useIgnoreUserAction","useMuteUserAction","useRedirectModerationConsole","useRemoveUserAction","useReportUser","useVideoCallAction","useVoipCallAction","useEmbeddedLayout","_ref","user","rid","reload","size","isMember","addUser","blockUser","changeLeader","changeModerator","openModerationConsole","_id","changeOwner","openDirectMessage","ignoreUser","muteUser","removeUser","videoCall","voipCall","reportUserOption","isLayoutEmbedded","userToolbox","hiddenActions","userinfoActions","toggleBlock","reportUser","actionSpread","entries","Object","filter","_ref2","key","includes","options","slice","slicedOptions","length","menuActions","reduce","acc","_ref3","_key","item","group","type","section","find","id","newItem","content","title","items","push","newSection","actions"],"sources":["client/views/room/hooks/useUserInfoActions/useUserInfoActions.ts"],"sourcesContent":["import type { IRoom, IUser } from '@rocket.chat/core-typings';\nimport type { Icon } from '@rocket.chat/fuselage';\nimport type { GenericMenuItemProps } from '@rocket.chat/ui-client';\nimport { useLayoutHiddenActions } from '@rocket.chat/ui-contexts';\nimport type { ComponentProps } from 'react';\nimport { useMemo } from 'react';\n\nimport { useAddUserAction } from './actions/useAddUserAction';\nimport { useBlockUserAction } from './actions/useBlockUserAction';\nimport { useChangeLeaderAction } from './actions/useChangeLeaderAction';\nimport { useChangeModeratorAction } from './actions/useChangeModeratorAction';\nimport { useChangeOwnerAction } from './actions/useChangeOwnerAction';\nimport { useDirectMessageAction } from './actions/useDirectMessageAction';\nimport { useIgnoreUserAction } from './actions/useIgnoreUserAction';\nimport { useMuteUserAction } from './actions/useMuteUserAction';\nimport { useRedirectModerationConsole } from './actions/useRedirectModerationConsole';\nimport { useRemoveUserAction } from './actions/useRemoveUserAction';\nimport { useReportUser } from './actions/useReportUser';\nimport { useVideoCallAction } from './actions/useVideoCallAction';\nimport { useVoipCallAction } from './actions/useVoipCallAction';\nimport { useEmbeddedLayout } from '../../../../hooks/useEmbeddedLayout';\n\nexport type UserInfoActionType = 'communication' | 'privileges' | 'management' | 'moderation';\n\ntype UserInfoActionWithOnlyIcon = {\n\ttype?: UserInfoActionType;\n\tcontent?: string;\n\ticon: ComponentProps<typeof Icon>['name'];\n\ttitle: string;\n\tvariant?: 'danger';\n\tonClick: () => void;\n};\n\ntype UserInfoActionWithContent = {\n\ttype?: UserInfoActionType;\n\tcontent: string;\n\ticon?: ComponentProps<typeof Icon>['name'];\n\ttitle?: string;\n\tvariant?: 'danger';\n\tonClick: () => void;\n};\n\nexport type UserInfoAction = UserInfoActionWithContent | UserInfoActionWithOnlyIcon;\n\ntype UserMenuAction = {\n\tid: string;\n\ttitle: string;\n\titems: GenericMenuItemProps[];\n}[];\n\ntype UserInfoActionsParams = {\n\tuser: Pick<IUser, '_id' | 'username' | 'name' | 'freeSwitchExtension'>;\n\trid: IRoom['_id'];\n\treload?: () => void;\n\tsize?: number;\n\tisMember?: boolean;\n};\n\nexport const useUserInfoActions = ({\n\tuser,\n\trid,\n\treload,\n\tsize = 2,\n\tisMember,\n}: UserInfoActionsParams): { actions: [string, UserInfoAction][]; menuActions: any | undefined } => {\n\tconst addUser = useAddUserAction(user, rid, reload);\n\tconst blockUser = useBlockUserAction(user, rid);\n\tconst changeLeader = useChangeLeaderAction(user, rid);\n\tconst changeModerator = useChangeModeratorAction(user, rid);\n\tconst openModerationConsole = useRedirectModerationConsole(user._id);\n\tconst changeOwner = useChangeOwnerAction(user, rid);\n\tconst openDirectMessage = useDirectMessageAction(user, rid);\n\tconst ignoreUser = useIgnoreUserAction(user, rid);\n\tconst muteUser = useMuteUserAction(user, rid);\n\tconst removeUser = useRemoveUserAction(user, rid, reload);\n\tconst videoCall = useVideoCallAction(user);\n\tconst voipCall = useVoipCallAction(user);\n\tconst reportUserOption = useReportUser(user);\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\tconst { userToolbox: hiddenActions } = useLayoutHiddenActions();\n\n\tconst userinfoActions = useMemo(\n\t\t() => ({\n\t\t\t...(openDirectMessage && !isLayoutEmbedded && { openDirectMessage }),\n\t\t\t...(videoCall && { videoCall }),\n\t\t\t...(voipCall && { voipCall }),\n\t\t\t...(!isMember && addUser && { addUser }),\n\t\t\t...(isMember && changeOwner && { changeOwner }),\n\t\t\t...(isMember && changeLeader && { changeLeader }),\n\t\t\t...(isMember && changeModerator && { changeModerator }),\n\t\t\t...(isMember && openModerationConsole && { openModerationConsole }),\n\t\t\t...(isMember && ignoreUser && { ignoreUser }),\n\t\t\t...(isMember && muteUser && { muteUser }),\n\t\t\t...(blockUser && { toggleBlock: blockUser }),\n\t\t\t...(reportUserOption && { reportUser: reportUserOption }),\n\t\t\t...(isMember && removeUser && { removeUser }),\n\t\t}),\n\t\t[\n\t\t\topenDirectMessage,\n\t\t\tisLayoutEmbedded,\n\t\t\tvideoCall,\n\t\t\tvoipCall,\n\t\t\tchangeOwner,\n\t\t\tchangeLeader,\n\t\t\tchangeModerator,\n\t\t\tignoreUser,\n\t\t\tmuteUser,\n\t\t\tblockUser,\n\t\t\tremoveUser,\n\t\t\treportUserOption,\n\t\t\topenModerationConsole,\n\t\t\taddUser,\n\t\t\tisMember,\n\t\t],\n\t);\n\n\tconst actionSpread = useMemo(() => {\n\t\tconst entries = Object.entries(userinfoActions).filter(([key]) => !hiddenActions.includes(key));\n\n\t\tconst options = entries.slice(0, size);\n\t\tconst slicedOptions = entries.slice(size, entries.length);\n\n\t\tconst menuActions = slicedOptions.reduce((acc, [_key, item]) => {\n\t\t\tconst group = item.type ? item.type : '';\n\t\t\tconst section = acc.find((section: { id: string }) => section.id === group);\n\n\t\t\tconst newItem = {\n\t\t\t\t...item,\n\t\t\t\tid: item.content || item.title || '',\n\t\t\t\tcontent: item.content || item.title,\n\t\t\t};\n\n\t\t\tif (section) {\n\t\t\t\tsection.items.push(newItem);\n\t\t\t\treturn acc;\n\t\t\t}\n\n\t\t\tconst newSection = { id: group, title: '', items: [newItem] };\n\t\t\tacc.push(newSection);\n\n\t\t\treturn acc;\n\t\t}, [] as UserMenuAction);\n\n\t\treturn { actions: options, menuActions };\n\t}, [size, userinfoActions, hiddenActions]);\n\n\treturn actionSpread;\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"1b05a86476089ff29f3fae9aa72638bb0233e821"}
