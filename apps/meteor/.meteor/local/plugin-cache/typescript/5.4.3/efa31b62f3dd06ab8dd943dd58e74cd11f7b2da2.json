{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/providers/UserCardProvider.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/room/providers/UserCardProvider.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/providers/UserCardProvider.tsx","inputSourceMap":{"version":3,"file":"client/views/room/providers/UserCardProvider.tsx","sourceRoot":"","sources":["client/views/room/providers/UserCardProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Popover } from '@rocket.chat/fuselage';\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\nimport type { ComponentProps, ReactNode } from 'react';\nimport React, { Suspense, lazy, useCallback, useMemo, useRef, useState } from 'react';\nimport { useOverlayTrigger } from 'react-aria';\nimport { useOverlayTriggerState } from 'react-stately';\n\nimport { useRoom } from '../contexts/RoomContext';\nimport { useRoomToolbox } from '../contexts/RoomToolboxContext';\nimport { UserCardContext } from '../contexts/UserCardContext';\n\nconst UserCard = lazy(() => import('../UserCard'));\n\nconst UserCardProvider = ({ children }: { children: ReactNode }) => {\n\tconst room = useRoom();\n\tconst [userCardData, setUserCardData] = useState<ComponentProps<typeof UserCard> | null>(null);\n\n\tconst triggerRef = useRef(null);\n\tconst state = useOverlayTriggerState({});\n\tconst { triggerProps, overlayProps } = useOverlayTrigger({ type: 'dialog' }, state, triggerRef);\n\tdelete triggerProps.onPress;\n\n\tconst { openTab } = useRoomToolbox();\n\n\tconst openUserInfo = useEffectEvent((username?: string) => {\n\t\tswitch (room.t) {\n\t\t\tcase 'l':\n\t\t\t\topenTab('room-info', username);\n\t\t\t\tbreak;\n\n\t\t\tcase 'v':\n\t\t\t\topenTab('voip-room-info', username);\n\t\t\t\tbreak;\n\n\t\t\tcase 'd':\n\t\t\t\t(room.uids?.length ?? 0) > 2 ? openTab('user-info-group', username) : openTab('user-info', username);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\topenTab('members-list', username);\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tconst handleSetUserCard = useCallback(\n\t\t(e, username) => {\n\t\t\ttriggerRef.current = e.target;\n\t\t\tstate.open();\n\t\t\tsetUserCardData({\n\t\t\t\tusername,\n\t\t\t\trid: room._id,\n\t\t\t\tonOpenUserInfo: () => openUserInfo(username),\n\t\t\t\tonClose: () => setUserCardData(null),\n\t\t\t});\n\t\t},\n\t\t[openUserInfo, room._id, state],\n\t);\n\n\tconst contextValue = useMemo(\n\t\t() => ({\n\t\t\topenUserCard: handleSetUserCard,\n\t\t\tcloseUserCard: () => setUserCardData(null),\n\t\t\ttriggerProps,\n\t\t\ttriggerRef,\n\t\t\tstate,\n\t\t}),\n\t\t[handleSetUserCard, state, triggerProps],\n\t);\n\n\treturn (\n\t\t<UserCardContext.Provider value={contextValue}>\n\t\t\t{children}\n\t\t\t{state.isOpen && userCardData && (\n\t\t\t\t<Suspense fallback={null}>\n\t\t\t\t\t<Popover placement='top left' triggerRef={triggerRef} state={state}>\n\t\t\t\t\t\t<UserCard {...userCardData} {...overlayProps} />\n\t\t\t\t\t</Popover>\n\t\t\t\t</Suspense>\n\t\t\t)}\n\t\t</UserCardContext.Provider>\n\t);\n};\n\nexport default UserCardProvider;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/providers/UserCardProvider.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/providers/UserCardProvider.tsx","inputSourceMap":{"version":3,"file":"client/views/room/providers/UserCardProvider.tsx","sourceRoot":"","sources":["client/views/room/providers/UserCardProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Popover } from '@rocket.chat/fuselage';\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\nimport type { ComponentProps, ReactNode } from 'react';\nimport React, { Suspense, lazy, useCallback, useMemo, useRef, useState } from 'react';\nimport { useOverlayTrigger } from 'react-aria';\nimport { useOverlayTriggerState } from 'react-stately';\n\nimport { useRoom } from '../contexts/RoomContext';\nimport { useRoomToolbox } from '../contexts/RoomToolboxContext';\nimport { UserCardContext } from '../contexts/UserCardContext';\n\nconst UserCard = lazy(() => import('../UserCard'));\n\nconst UserCardProvider = ({ children }: { children: ReactNode }) => {\n\tconst room = useRoom();\n\tconst [userCardData, setUserCardData] = useState<ComponentProps<typeof UserCard> | null>(null);\n\n\tconst triggerRef = useRef(null);\n\tconst state = useOverlayTriggerState({});\n\tconst { triggerProps, overlayProps } = useOverlayTrigger({ type: 'dialog' }, state, triggerRef);\n\tdelete triggerProps.onPress;\n\n\tconst { openTab } = useRoomToolbox();\n\n\tconst openUserInfo = useEffectEvent((username?: string) => {\n\t\tswitch (room.t) {\n\t\t\tcase 'l':\n\t\t\t\topenTab('room-info', username);\n\t\t\t\tbreak;\n\n\t\t\tcase 'v':\n\t\t\t\topenTab('voip-room-info', username);\n\t\t\t\tbreak;\n\n\t\t\tcase 'd':\n\t\t\t\t(room.uids?.length ?? 0) > 2 ? openTab('user-info-group', username) : openTab('user-info', username);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\topenTab('members-list', username);\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tconst handleSetUserCard = useCallback(\n\t\t(e, username) => {\n\t\t\ttriggerRef.current = e.target;\n\t\t\tstate.open();\n\t\t\tsetUserCardData({\n\t\t\t\tusername,\n\t\t\t\trid: room._id,\n\t\t\t\tonOpenUserInfo: () => openUserInfo(username),\n\t\t\t\tonClose: () => setUserCardData(null),\n\t\t\t});\n\t\t},\n\t\t[openUserInfo, room._id, state],\n\t);\n\n\tconst contextValue = useMemo(\n\t\t() => ({\n\t\t\topenUserCard: handleSetUserCard,\n\t\t\tcloseUserCard: () => setUserCardData(null),\n\t\t\ttriggerProps,\n\t\t\ttriggerRef,\n\t\t\tstate,\n\t\t}),\n\t\t[handleSetUserCard, state, triggerProps],\n\t);\n\n\treturn (\n\t\t<UserCardContext.Provider value={contextValue}>\n\t\t\t{children}\n\t\t\t{state.isOpen && userCardData && (\n\t\t\t\t<Suspense fallback={null}>\n\t\t\t\t\t<Popover placement='top left' triggerRef={triggerRef} state={state}>\n\t\t\t\t\t\t<UserCard {...userCardData} {...overlayProps} />\n\t\t\t\t\t</Popover>\n\t\t\t\t</Suspense>\n\t\t\t)}\n\t\t</UserCardContext.Provider>\n\t);\n};\n\nexport default UserCardProvider;\n"]}}},"code":"let _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet Popover;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Popover(v) {\n    Popover = v;\n  }\n}, 0);\nlet useEffectEvent;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useEffectEvent(v) {\n    useEffectEvent = v;\n  }\n}, 1);\nlet React, Suspense, lazy, useCallback, useMemo, useRef, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  Suspense(v) {\n    Suspense = v;\n  },\n  lazy(v) {\n    lazy = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  },\n  useRef(v) {\n    useRef = v;\n  },\n  useState(v) {\n    useState = v;\n  }\n}, 2);\nlet useOverlayTrigger;\nmodule.link(\"react-aria\", {\n  useOverlayTrigger(v) {\n    useOverlayTrigger = v;\n  }\n}, 3);\nlet useOverlayTriggerState;\nmodule.link(\"react-stately\", {\n  useOverlayTriggerState(v) {\n    useOverlayTriggerState = v;\n  }\n}, 4);\nlet useRoom;\nmodule.link(\"../contexts/RoomContext\", {\n  useRoom(v) {\n    useRoom = v;\n  }\n}, 5);\nlet useRoomToolbox;\nmodule.link(\"../contexts/RoomToolboxContext\", {\n  useRoomToolbox(v) {\n    useRoomToolbox = v;\n  }\n}, 6);\nlet UserCardContext;\nmodule.link(\"../contexts/UserCardContext\", {\n  UserCardContext(v) {\n    UserCardContext = v;\n  }\n}, 7);\nconst UserCard = /*#__PURE__*/lazy(() => module.dynamicImport('../UserCard'));\nconst UserCardProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const room = useRoom();\n  const [userCardData, setUserCardData] = useState(null);\n  const triggerRef = useRef(null);\n  const state = useOverlayTriggerState({});\n  const {\n    triggerProps,\n    overlayProps\n  } = useOverlayTrigger({\n    type: 'dialog'\n  }, state, triggerRef);\n  delete triggerProps.onPress;\n  const {\n    openTab\n  } = useRoomToolbox();\n  const openUserInfo = useEffectEvent(username => {\n    var _room$uids$length, _room$uids;\n    switch (room.t) {\n      case 'l':\n        openTab('room-info', username);\n        break;\n      case 'v':\n        openTab('voip-room-info', username);\n        break;\n      case 'd':\n        ((_room$uids$length = (_room$uids = room.uids) === null || _room$uids === void 0 ? void 0 : _room$uids.length) !== null && _room$uids$length !== void 0 ? _room$uids$length : 0) > 2 ? openTab('user-info-group', username) : openTab('user-info', username);\n        break;\n      default:\n        openTab('members-list', username);\n        break;\n    }\n  });\n  const handleSetUserCard = useCallback((e, username) => {\n    triggerRef.current = e.target;\n    state.open();\n    setUserCardData({\n      username,\n      rid: room._id,\n      onOpenUserInfo: () => openUserInfo(username),\n      onClose: () => setUserCardData(null)\n    });\n  }, [openUserInfo, room._id, state]);\n  const contextValue = useMemo(() => ({\n    openUserCard: handleSetUserCard,\n    closeUserCard: () => setUserCardData(null),\n    triggerProps,\n    triggerRef,\n    state\n  }), [handleSetUserCard, state, triggerProps]);\n  return /*#__PURE__*/React.createElement(UserCardContext.Provider, {\n    value: contextValue\n  }, children, state.isOpen && userCardData && /*#__PURE__*/React.createElement(Suspense, {\n    fallback: null\n  }, /*#__PURE__*/React.createElement(Popover, {\n    placement: \"top left\",\n    triggerRef: triggerRef,\n    state: state\n  }, /*#__PURE__*/React.createElement(UserCard, _extends({}, userCardData, overlayProps)))));\n};\nmodule.exportDefault(UserCardProvider);","map":{"version":3,"names":["_extends","module","link","default","v","Popover","useEffectEvent","React","Suspense","lazy","useCallback","useMemo","useRef","useState","useOverlayTrigger","useOverlayTriggerState","useRoom","useRoomToolbox","UserCardContext","UserCard","dynamicImport","UserCardProvider","_ref","children","room","userCardData","setUserCardData","triggerRef","state","triggerProps","overlayProps","type","onPress","openTab","openUserInfo","username","_room$uids$length","_room$uids","t","uids","length","handleSetUserCard","e","current","target","open","rid","_id","onOpenUserInfo","onClose","contextValue","openUserCard","closeUserCard","createElement","Provider","value","isOpen","fallback","placement","exportDefault"],"sources":["client/views/room/providers/UserCardProvider.tsx"],"sourcesContent":["import { Popover } from '@rocket.chat/fuselage';\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\nimport type { ComponentProps, ReactNode } from 'react';\nimport React, { Suspense, lazy, useCallback, useMemo, useRef, useState } from 'react';\nimport { useOverlayTrigger } from 'react-aria';\nimport { useOverlayTriggerState } from 'react-stately';\n\nimport { useRoom } from '../contexts/RoomContext';\nimport { useRoomToolbox } from '../contexts/RoomToolboxContext';\nimport { UserCardContext } from '../contexts/UserCardContext';\n\nconst UserCard = lazy(() => import('../UserCard'));\n\nconst UserCardProvider = ({ children }: { children: ReactNode }) => {\n\tconst room = useRoom();\n\tconst [userCardData, setUserCardData] = useState<ComponentProps<typeof UserCard> | null>(null);\n\n\tconst triggerRef = useRef(null);\n\tconst state = useOverlayTriggerState({});\n\tconst { triggerProps, overlayProps } = useOverlayTrigger({ type: 'dialog' }, state, triggerRef);\n\tdelete triggerProps.onPress;\n\n\tconst { openTab } = useRoomToolbox();\n\n\tconst openUserInfo = useEffectEvent((username?: string) => {\n\t\tswitch (room.t) {\n\t\t\tcase 'l':\n\t\t\t\topenTab('room-info', username);\n\t\t\t\tbreak;\n\n\t\t\tcase 'v':\n\t\t\t\topenTab('voip-room-info', username);\n\t\t\t\tbreak;\n\n\t\t\tcase 'd':\n\t\t\t\t(room.uids?.length ?? 0) > 2 ? openTab('user-info-group', username) : openTab('user-info', username);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\topenTab('members-list', username);\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tconst handleSetUserCard = useCallback(\n\t\t(e, username) => {\n\t\t\ttriggerRef.current = e.target;\n\t\t\tstate.open();\n\t\t\tsetUserCardData({\n\t\t\t\tusername,\n\t\t\t\trid: room._id,\n\t\t\t\tonOpenUserInfo: () => openUserInfo(username),\n\t\t\t\tonClose: () => setUserCardData(null),\n\t\t\t});\n\t\t},\n\t\t[openUserInfo, room._id, state],\n\t);\n\n\tconst contextValue = useMemo(\n\t\t() => ({\n\t\t\topenUserCard: handleSetUserCard,\n\t\t\tcloseUserCard: () => setUserCardData(null),\n\t\t\ttriggerProps,\n\t\t\ttriggerRef,\n\t\t\tstate,\n\t\t}),\n\t\t[handleSetUserCard, state, triggerProps],\n\t);\n\n\treturn (\n\t\t<UserCardContext.Provider value={contextValue}>\n\t\t\t{children}\n\t\t\t{state.isOpen && userCardData && (\n\t\t\t\t<Suspense fallback={null}>\n\t\t\t\t\t<Popover placement='top left' triggerRef={triggerRef} state={state}>\n\t\t\t\t\t\t<UserCard {...userCardData} {...overlayProps} />\n\t\t\t\t\t</Popover>\n\t\t\t\t</Suspense>\n\t\t\t)}\n\t\t</UserCardContext.Provider>\n\t);\n};\n\nexport default UserCardProvider;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"efa31b62f3dd06ab8dd943dd58e74cd11f7b2da2"}
