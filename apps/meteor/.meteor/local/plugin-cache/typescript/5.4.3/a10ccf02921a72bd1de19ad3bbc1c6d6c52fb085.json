{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","inputSourceMap":{"version":3,"file":"client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","sourceRoot":"","sources":["client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts"],"names":[],"mappings":"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","sourcesContent":["import { useContentBoxSize } from '@rocket.chat/fuselage-hooks';\nimport type { CSSProperties, RefObject } from 'react';\nimport { useEffect, useState } from 'react';\n\nconst shadowStyleBase: CSSProperties = {\n\tposition: 'fixed',\n\ttop: '-10000px',\n\tleft: '-10000px',\n\tresize: 'none',\n\twhiteSpace: 'pre-wrap',\n\twordWrap: 'break-word',\n\twillChange: 'contents',\n};\n\nexport const useAutoGrow = (\n\tref: RefObject<HTMLTextAreaElement>,\n\tshadowRef: RefObject<HTMLDivElement>,\n\thideTextArea?: boolean,\n): {\n\ttextAreaStyle: CSSProperties;\n\tshadowStyle: CSSProperties;\n} => {\n\tconst [style, setStyle] = useState(() => ref.current && window.getComputedStyle(ref.current));\n\n\tuseEffect(() => {\n\t\tconst { current: textarea } = ref;\n\n\t\tif (!textarea) {\n\t\t\treturn;\n\t\t}\n\t\tsetStyle(() => ref.current && window.getComputedStyle(ref.current));\n\t}, [ref]);\n\n\tuseEffect(() => {\n\t\tconst { current: textarea } = ref;\n\n\t\tif (!textarea) {\n\t\t\treturn;\n\t\t}\n\t\tconst updateTextareaSize = () => {\n\t\t\tconst { value } = textarea;\n\t\t\tconst { current: shadow } = shadowRef;\n\t\t\tif (!shadow) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tshadow.innerHTML = value\n\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t.replace(/</g, '&lt;')\n\t\t\t\t.replace(/>/g, '&gt;')\n\t\t\t\t.replace(/\\n$/, '<br/>&nbsp;')\n\t\t\t\t.replace(/\\n/g, '<br/>');\n\t\t};\n\t\tupdateTextareaSize();\n\t\ttextarea.addEventListener('input', updateTextareaSize);\n\t\treturn () => {\n\t\t\ttextarea.removeEventListener('input', updateTextareaSize);\n\t\t};\n\t}, [ref, shadowRef]);\n\n\tconst shadowContentSize = useContentBoxSize(shadowRef);\n\n\tconst composerContentSize = useContentBoxSize(ref);\n\n\treturn {\n\t\ttextAreaStyle: {\n\t\t\t...(hideTextArea && {\n\t\t\t\tvisibility: 'hidden',\n\t\t\t}),\n\t\t\twhiteSpace: 'pre-wrap',\n\t\t\twordWrap: 'break-word',\n\t\t\toverflowWrap: 'break-word',\n\t\t\twillChange: 'contents',\n\t\t\twordBreak: 'normal',\n\t\t\toverflowY: shadowContentSize.blockSize > parseInt(style?.maxHeight || '0') ? 'scroll' : 'hidden',\n\t\t\t...(shadowContentSize.blockSize && {\n\t\t\t\theight: `${shadowContentSize.blockSize}px`,\n\t\t\t}),\n\t\t},\n\t\tshadowStyle: {\n\t\t\t...shadowStyleBase,\n\t\t\tfont: style?.font,\n\t\t\twidth: composerContentSize.inlineSize,\n\t\t\tminHeight: style?.lineHeight,\n\t\t\tlineHeight: style?.lineHeight,\n\t\t},\n\t};\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","inputSourceMap":{"version":3,"file":"client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts","sourceRoot":"","sources":["client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts"],"names":[],"mappings":"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","sourcesContent":["import { useContentBoxSize } from '@rocket.chat/fuselage-hooks';\nimport type { CSSProperties, RefObject } from 'react';\nimport { useEffect, useState } from 'react';\n\nconst shadowStyleBase: CSSProperties = {\n\tposition: 'fixed',\n\ttop: '-10000px',\n\tleft: '-10000px',\n\tresize: 'none',\n\twhiteSpace: 'pre-wrap',\n\twordWrap: 'break-word',\n\twillChange: 'contents',\n};\n\nexport const useAutoGrow = (\n\tref: RefObject<HTMLTextAreaElement>,\n\tshadowRef: RefObject<HTMLDivElement>,\n\thideTextArea?: boolean,\n): {\n\ttextAreaStyle: CSSProperties;\n\tshadowStyle: CSSProperties;\n} => {\n\tconst [style, setStyle] = useState(() => ref.current && window.getComputedStyle(ref.current));\n\n\tuseEffect(() => {\n\t\tconst { current: textarea } = ref;\n\n\t\tif (!textarea) {\n\t\t\treturn;\n\t\t}\n\t\tsetStyle(() => ref.current && window.getComputedStyle(ref.current));\n\t}, [ref]);\n\n\tuseEffect(() => {\n\t\tconst { current: textarea } = ref;\n\n\t\tif (!textarea) {\n\t\t\treturn;\n\t\t}\n\t\tconst updateTextareaSize = () => {\n\t\t\tconst { value } = textarea;\n\t\t\tconst { current: shadow } = shadowRef;\n\t\t\tif (!shadow) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tshadow.innerHTML = value\n\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t.replace(/</g, '&lt;')\n\t\t\t\t.replace(/>/g, '&gt;')\n\t\t\t\t.replace(/\\n$/, '<br/>&nbsp;')\n\t\t\t\t.replace(/\\n/g, '<br/>');\n\t\t};\n\t\tupdateTextareaSize();\n\t\ttextarea.addEventListener('input', updateTextareaSize);\n\t\treturn () => {\n\t\t\ttextarea.removeEventListener('input', updateTextareaSize);\n\t\t};\n\t}, [ref, shadowRef]);\n\n\tconst shadowContentSize = useContentBoxSize(shadowRef);\n\n\tconst composerContentSize = useContentBoxSize(ref);\n\n\treturn {\n\t\ttextAreaStyle: {\n\t\t\t...(hideTextArea && {\n\t\t\t\tvisibility: 'hidden',\n\t\t\t}),\n\t\t\twhiteSpace: 'pre-wrap',\n\t\t\twordWrap: 'break-word',\n\t\t\toverflowWrap: 'break-word',\n\t\t\twillChange: 'contents',\n\t\t\twordBreak: 'normal',\n\t\t\toverflowY: shadowContentSize.blockSize > parseInt(style?.maxHeight || '0') ? 'scroll' : 'hidden',\n\t\t\t...(shadowContentSize.blockSize && {\n\t\t\t\theight: `${shadowContentSize.blockSize}px`,\n\t\t\t}),\n\t\t},\n\t\tshadowStyle: {\n\t\t\t...shadowStyleBase,\n\t\t\tfont: style?.font,\n\t\t\twidth: composerContentSize.inlineSize,\n\t\t\tminHeight: style?.lineHeight,\n\t\t\tlineHeight: style?.lineHeight,\n\t\t},\n\t};\n};\n"]}}},"code":"var _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 0);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\nmodule.export({\n  useAutoGrow: function () {\n    return useAutoGrow;\n  }\n});\nvar useContentBoxSize;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useContentBoxSize: function (v) {\n    useContentBoxSize = v;\n  }\n}, 0);\nvar useEffect, useState;\nmodule.link(\"react\", {\n  useEffect: function (v) {\n    useEffect = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 1);\nvar shadowStyleBase = {\n  position: 'fixed',\n  top: '-10000px',\n  left: '-10000px',\n  resize: 'none',\n  whiteSpace: 'pre-wrap',\n  wordWrap: 'break-word',\n  willChange: 'contents'\n};\nvar useAutoGrow = function (ref, shadowRef, hideTextArea) {\n  var _useState = useState(function () {\n      return ref.current && window.getComputedStyle(ref.current);\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    style = _useState2[0],\n    setStyle = _useState2[1];\n  useEffect(function () {\n    var textarea = ref.current;\n    if (!textarea) {\n      return;\n    }\n    setStyle(function () {\n      return ref.current && window.getComputedStyle(ref.current);\n    });\n  }, [ref]);\n  useEffect(function () {\n    var textarea = ref.current;\n    if (!textarea) {\n      return;\n    }\n    var updateTextareaSize = function () {\n      var value = textarea.value;\n      var shadow = shadowRef.current;\n      if (!shadow) {\n        return;\n      }\n      shadow.innerHTML = value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\n$/, '<br/>&nbsp;').replace(/\\n/g, '<br/>');\n    };\n    updateTextareaSize();\n    textarea.addEventListener('input', updateTextareaSize);\n    return function () {\n      textarea.removeEventListener('input', updateTextareaSize);\n    };\n  }, [ref, shadowRef]);\n  var shadowContentSize = useContentBoxSize(shadowRef);\n  var composerContentSize = useContentBoxSize(ref);\n  return {\n    textAreaStyle: _objectSpread(_objectSpread({}, hideTextArea && {\n      visibility: 'hidden'\n    }), {}, {\n      whiteSpace: 'pre-wrap',\n      wordWrap: 'break-word',\n      overflowWrap: 'break-word',\n      willChange: 'contents',\n      wordBreak: 'normal',\n      overflowY: shadowContentSize.blockSize > parseInt((style === null || style === void 0 ? void 0 : style.maxHeight) || '0') ? 'scroll' : 'hidden'\n    }, shadowContentSize.blockSize && {\n      height: shadowContentSize.blockSize + \"px\"\n    }),\n    shadowStyle: _objectSpread(_objectSpread({}, shadowStyleBase), {}, {\n      font: style === null || style === void 0 ? void 0 : style.font,\n      width: composerContentSize.inlineSize,\n      minHeight: style === null || style === void 0 ? void 0 : style.lineHeight,\n      lineHeight: style === null || style === void 0 ? void 0 : style.lineHeight\n    })\n  };\n};","map":{"version":3,"names":["_objectSpread","module","link","default","v","_slicedToArray","export","useAutoGrow","useContentBoxSize","useEffect","useState","shadowStyleBase","position","top","left","resize","whiteSpace","wordWrap","willChange","ref","shadowRef","hideTextArea","_useState","current","window","getComputedStyle","_useState2","style","setStyle","textarea","updateTextareaSize","value","shadow","innerHTML","replace","addEventListener","removeEventListener","shadowContentSize","composerContentSize","textAreaStyle","visibility","overflowWrap","wordBreak","overflowY","blockSize","parseInt","maxHeight","height","shadowStyle","font","width","inlineSize","minHeight","lineHeight"],"sources":["client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts"],"sourcesContent":["import { useContentBoxSize } from '@rocket.chat/fuselage-hooks';\nimport type { CSSProperties, RefObject } from 'react';\nimport { useEffect, useState } from 'react';\n\nconst shadowStyleBase: CSSProperties = {\n\tposition: 'fixed',\n\ttop: '-10000px',\n\tleft: '-10000px',\n\tresize: 'none',\n\twhiteSpace: 'pre-wrap',\n\twordWrap: 'break-word',\n\twillChange: 'contents',\n};\n\nexport const useAutoGrow = (\n\tref: RefObject<HTMLTextAreaElement>,\n\tshadowRef: RefObject<HTMLDivElement>,\n\thideTextArea?: boolean,\n): {\n\ttextAreaStyle: CSSProperties;\n\tshadowStyle: CSSProperties;\n} => {\n\tconst [style, setStyle] = useState(() => ref.current && window.getComputedStyle(ref.current));\n\n\tuseEffect(() => {\n\t\tconst { current: textarea } = ref;\n\n\t\tif (!textarea) {\n\t\t\treturn;\n\t\t}\n\t\tsetStyle(() => ref.current && window.getComputedStyle(ref.current));\n\t}, [ref]);\n\n\tuseEffect(() => {\n\t\tconst { current: textarea } = ref;\n\n\t\tif (!textarea) {\n\t\t\treturn;\n\t\t}\n\t\tconst updateTextareaSize = () => {\n\t\t\tconst { value } = textarea;\n\t\t\tconst { current: shadow } = shadowRef;\n\t\t\tif (!shadow) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tshadow.innerHTML = value\n\t\t\t\t.replace(/&/g, '&amp;')\n\t\t\t\t.replace(/</g, '&lt;')\n\t\t\t\t.replace(/>/g, '&gt;')\n\t\t\t\t.replace(/\\n$/, '<br/>&nbsp;')\n\t\t\t\t.replace(/\\n/g, '<br/>');\n\t\t};\n\t\tupdateTextareaSize();\n\t\ttextarea.addEventListener('input', updateTextareaSize);\n\t\treturn () => {\n\t\t\ttextarea.removeEventListener('input', updateTextareaSize);\n\t\t};\n\t}, [ref, shadowRef]);\n\n\tconst shadowContentSize = useContentBoxSize(shadowRef);\n\n\tconst composerContentSize = useContentBoxSize(ref);\n\n\treturn {\n\t\ttextAreaStyle: {\n\t\t\t...(hideTextArea && {\n\t\t\t\tvisibility: 'hidden',\n\t\t\t}),\n\t\t\twhiteSpace: 'pre-wrap',\n\t\t\twordWrap: 'break-word',\n\t\t\toverflowWrap: 'break-word',\n\t\t\twillChange: 'contents',\n\t\t\twordBreak: 'normal',\n\t\t\toverflowY: shadowContentSize.blockSize > parseInt(style?.maxHeight || '0') ? 'scroll' : 'hidden',\n\t\t\t...(shadowContentSize.blockSize && {\n\t\t\t\theight: `${shadowContentSize.blockSize}px`,\n\t\t\t}),\n\t\t},\n\t\tshadowStyle: {\n\t\t\t...shadowStyleBase,\n\t\t\tfont: style?.font,\n\t\t\twidth: composerContentSize.inlineSize,\n\t\t\tminHeight: style?.lineHeight,\n\t\t\tlineHeight: style?.lineHeight,\n\t\t},\n\t};\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"a10ccf02921a72bd1de19ad3bbc1c6d6c52fb085"}
