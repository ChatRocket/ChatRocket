{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/meet/CallPage.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/meet/CallPage.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/meet/CallPage.tsx","inputSourceMap":{"version":3,"file":"client/views/meet/CallPage.tsx","sourceRoot":"","sources":["client/views/meet/CallPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, Flex, ButtonGroup, Button, Icon } from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport { useTranslation, useStream } from '@rocket.chat/ui-contexts';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\n\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\nimport { WebRTC } from '../../../app/webrtc/client';\nimport { WEB_RTC_EVENTS } from '../../../app/webrtc/lib/constants';\nimport OngoingCallDuration from './OngoingCallDuration';\nimport './styles.css';\n\ntype CallPageProps = {\n\troomId?: string;\n\tvisitorToken: any;\n\tvisitorId: string | null;\n\tstatus: any;\n\tsetStatus: any;\n\tisLayoutEmbedded: boolean;\n\tvisitorName: any;\n\tagentName: any;\n\tcallStartTime: any;\n};\n\nconst CallPage = ({\n\troomId,\n\tvisitorToken,\n\tvisitorId,\n\tstatus,\n\tsetStatus,\n\tisLayoutEmbedded,\n\tvisitorName,\n\tagentName,\n\tcallStartTime,\n}: CallPageProps) => {\n\tif (!roomId) {\n\t\tthrow new Error('Call Page - no room id');\n\t}\n\tconst [isAgentActive, setIsAgentActive] = useState(false);\n\tconst [isMicOn, setIsMicOn] = useState(false);\n\tconst [isCameraOn, setIsCameraOn] = useState(false);\n\tconst [isRemoteMobileDevice, setIsRemoteMobileDevice] = useState(false);\n\tconst [callInIframe, setCallInIframe] = useState(false);\n\tconst [isRemoteCameraOn, setIsRemoteCameraOn] = useState(false);\n\tconst [isLocalMobileDevice, setIsLocalMobileDevice] = useState(false);\n\n\tlet iconSize = 'x21';\n\tlet buttonSize = 'x40';\n\tconst avatarSize = 'x48';\n\tif (isLayoutEmbedded) {\n\t\ticonSize = 'x19';\n\t\tbuttonSize = 'x35';\n\t}\n\n\tconst subscribeNotifyUser = useStream('notify-user');\n\tconst subscribeNotifyRoom = useStream('notify-room');\n\tconst t = useTranslation();\n\tuseEffect(() => {\n\t\tif (visitorToken) {\n\t\t\tif (!visitorId) {\n\t\t\t\tthrow new Error('Call Page - no visitor id');\n\t\t\t}\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId, visitorId as any);\n\t\t\tconst isMobileDevice = (): boolean => {\n\t\t\t\tif (isLayoutEmbedded) {\n\t\t\t\t\tsetCallInIframe(true);\n\t\t\t\t}\n\t\t\t\tif (window.innerWidth <= 450 && window.innerHeight >= 629 && window.innerHeight <= 900) {\n\t\t\t\t\tsetIsLocalMobileDevice(true);\n\t\t\t\t\twebrtcInstance.media = {\n\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\twidth: { ideal: 440 },\n\t\t\t\t\t\t\theight: { ideal: 580 },\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tconst unsubNotifyUser = subscribeNotifyUser(`${visitorId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (data.room == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\twebrtcInstance.onUserStream(type, data);\n\t\t\t});\n\n\t\t\tconst unsubNotifyRoom = subscribeNotifyRoom(`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus' && data.callStatus === 'ended') {\n\t\t\t\t\twebrtcInstance.stop();\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'getDeviceType') {\n\t\t\t\t\tsdk.publish('notify-room', [\n\t\t\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t\t\t'deviceType',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsdk.publish('notify-room', [\n\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t'deviceType',\n\t\t\t\t{\n\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t},\n\t\t\t]);\n\n\t\t\tsdk.publish('notify-room', [\n\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t'callStatus',\n\t\t\t\t{\n\t\t\t\t\tcallStatus: 'inProgress',\n\t\t\t\t},\n\t\t\t]);\n\n\t\t\treturn () => {\n\t\t\t\tunsubNotifyRoom();\n\t\t\t\tunsubNotifyUser();\n\t\t\t};\n\t\t}\n\n\t\tif (!isAgentActive) {\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId);\n\t\t\tif (status === 'inProgress') {\n\t\t\t\tsdk.publish('notify-room', [`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, 'getDeviceType']);\n\n\t\t\t\twebrtcInstance.startCall({\n\t\t\t\t\taudio: true,\n\t\t\t\t\tvideo: {\n\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tsetIsAgentActive(true);\n\n\t\t\treturn subscribeNotifyRoom(`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus') {\n\t\t\t\t\tswitch (data.callStatus) {\n\t\t\t\t\t\tcase 'ended':\n\t\t\t\t\t\t\twebrtcInstance.stop();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'inProgress':\n\t\t\t\t\t\t\twebrtcInstance.startCall({\n\t\t\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'deviceType' && data.isMobileDevice) {\n\t\t\t\t\tsetIsRemoteMobileDevice(true);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, [isAgentActive, status, setStatus, visitorId, roomId, visitorToken, isLayoutEmbedded, subscribeNotifyUser, subscribeNotifyRoom]);\n\n\tconst toggleButton = (control: any): any => {\n\t\tif (control === 'mic') {\n\t\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken).toggleAudio();\n\t\t\treturn setIsMicOn(!isMicOn);\n\t\t}\n\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken).toggleVideo();\n\t\tsetIsCameraOn(!isCameraOn);\n\t\tsdk.publish('notify-room', [\n\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t'cameraStatus',\n\t\t\t{\n\t\t\t\tisCameraOn: !isCameraOn,\n\t\t\t},\n\t\t]);\n\t};\n\n\tconst closeWindow = (): void => {\n\t\tif (isLayoutEmbedded) {\n\t\t\treturn (parent as any)?.handleIframeClose();\n\t\t}\n\t\treturn window.close();\n\t};\n\n\tconst getCallDuration = (callStartTime: any): any => moment.duration(moment(new Date()).diff(moment(callStartTime))).asSeconds();\n\n\tconst showCallPage = (localAvatar: any, remoteAvatar: any): any => (\n\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t}}\n\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t>\n\t\t\t\t\t<video\n\t\t\t\t\t\tid='localVideo'\n\t\t\t\t\t\tautoPlay\n\t\t\t\t\t\tplaysInline\n\t\t\t\t\t\tmuted\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'block' : 'none',\n\t\t\t\t\t\t}}\n\t\t\t\t\t></video>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'none' : 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar username={localAvatar} size={isLocalMobileDevice || callInIframe ? 'x32' : 'x48'} />\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbottom: '5%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid='mic'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={isMicOn ? t('Mute_microphone') : t('Unmute_microphone')}\n\t\t\t\t\t\t\tonClick={(): any => toggleButton('mic')}\n\t\t\t\t\t\t\tclassName={isMicOn ? 'On' : 'Off'}\n\t\t\t\t\t\t\tsize={Number(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isMicOn ? <Icon name='mic' size={iconSize} /> : <Icon name='mic-off' size={iconSize} />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid='camera'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={isCameraOn ? t('Turn_off_video') : t('Turn_on_video')}\n\t\t\t\t\t\t\tonClick={(): void => toggleButton('camera')}\n\t\t\t\t\t\t\tclassName={isCameraOn ? 'On' : 'Off'}\n\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isCameraOn ? <Icon name='video' size={iconSize} /> : <Icon name='video-off' size={iconSize} />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{isLayoutEmbedded && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\t\tborderColor='stroke-extra-dark'\n\t\t\t\t\t\t\t\tdata-title={t('Expand_view')}\n\t\t\t\t\t\t\t\tonClick={(): void => (parent as any)?.expandCall()}\n\t\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon name='arrow-expand' size={iconSize} color='white' />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Button square danger title={t('End_call')} onClick={closeWindow} size={parseInt(buttonSize)}>\n\t\t\t\t\t\t\t<Icon name='phone-off' size={iconSize} color='white' />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Box>\n\t\t\t\t<video\n\t\t\t\t\tid='remoteVideo'\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: isRemoteMobileDevice ? '45%' : '100%',\n\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\tdisplay: isRemoteCameraOn ? 'block' : 'none',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<track kind='captions' />\n\t\t\t\t</video>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tdisplay={isRemoteCameraOn ? 'none' : 'flex'}\n\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\tflexDirection='column'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: isRemoteMobileDevice || isLocalMobileDevice ? '10%' : '30%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar username={remoteAvatar} size={!callInIframe ? 'x124' : avatarSize} />\n\t\t\t\t\t</Box>\n\n\t\t\t\t\t<Box color='white' fontSize={callInIframe ? 12 : 18} textAlign='center' margin={3}>\n\t\t\t\t\t\t<OngoingCallDuration counter={getCallDuration(callStartTime)} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tfontSize: callInIframe ? 12 : 22,\n\t\t\t\t\t\t\tmargin: callInIframe ? 5 : 9,\n\t\t\t\t\t\t\t...(callInIframe && { marginTop: 0 }),\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{remoteAvatar}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Flex.Container>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{status === 'ringing' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<UserAvatar username={agentName} size={isLocalMobileDevice ? 'x32' : 'x48'} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '20%',\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<UserAvatar username={visitorName} size='x124' />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box color='white' fontSize={16} margin={15}>\n\t\t\t\t\t\t\t\tCalling...\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\t\t\tfontSize: isLocalMobileDevice ? 15 : 22,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{visitorName}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t\t{status === 'declined' && (\n\t\t\t\t<Box minHeight='90%' display='flex' justifyContent='center' alignItems='center' color='white' fontSize='s1'>\n\t\t\t\t\t{t('Call_declined')}\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t\t{status === 'inProgress' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t{visitorToken ? showCallPage(visitorName, agentName) : showCallPage(agentName, visitorName)}\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default CallPage;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/meet/CallPage.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/meet/CallPage.tsx","inputSourceMap":{"version":3,"file":"client/views/meet/CallPage.tsx","sourceRoot":"","sources":["client/views/meet/CallPage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, Flex, ButtonGroup, Button, Icon } from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport { useTranslation, useStream } from '@rocket.chat/ui-contexts';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\n\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\nimport { WebRTC } from '../../../app/webrtc/client';\nimport { WEB_RTC_EVENTS } from '../../../app/webrtc/lib/constants';\nimport OngoingCallDuration from './OngoingCallDuration';\nimport './styles.css';\n\ntype CallPageProps = {\n\troomId?: string;\n\tvisitorToken: any;\n\tvisitorId: string | null;\n\tstatus: any;\n\tsetStatus: any;\n\tisLayoutEmbedded: boolean;\n\tvisitorName: any;\n\tagentName: any;\n\tcallStartTime: any;\n};\n\nconst CallPage = ({\n\troomId,\n\tvisitorToken,\n\tvisitorId,\n\tstatus,\n\tsetStatus,\n\tisLayoutEmbedded,\n\tvisitorName,\n\tagentName,\n\tcallStartTime,\n}: CallPageProps) => {\n\tif (!roomId) {\n\t\tthrow new Error('Call Page - no room id');\n\t}\n\tconst [isAgentActive, setIsAgentActive] = useState(false);\n\tconst [isMicOn, setIsMicOn] = useState(false);\n\tconst [isCameraOn, setIsCameraOn] = useState(false);\n\tconst [isRemoteMobileDevice, setIsRemoteMobileDevice] = useState(false);\n\tconst [callInIframe, setCallInIframe] = useState(false);\n\tconst [isRemoteCameraOn, setIsRemoteCameraOn] = useState(false);\n\tconst [isLocalMobileDevice, setIsLocalMobileDevice] = useState(false);\n\n\tlet iconSize = 'x21';\n\tlet buttonSize = 'x40';\n\tconst avatarSize = 'x48';\n\tif (isLayoutEmbedded) {\n\t\ticonSize = 'x19';\n\t\tbuttonSize = 'x35';\n\t}\n\n\tconst subscribeNotifyUser = useStream('notify-user');\n\tconst subscribeNotifyRoom = useStream('notify-room');\n\tconst t = useTranslation();\n\tuseEffect(() => {\n\t\tif (visitorToken) {\n\t\t\tif (!visitorId) {\n\t\t\t\tthrow new Error('Call Page - no visitor id');\n\t\t\t}\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId, visitorId as any);\n\t\t\tconst isMobileDevice = (): boolean => {\n\t\t\t\tif (isLayoutEmbedded) {\n\t\t\t\t\tsetCallInIframe(true);\n\t\t\t\t}\n\t\t\t\tif (window.innerWidth <= 450 && window.innerHeight >= 629 && window.innerHeight <= 900) {\n\t\t\t\t\tsetIsLocalMobileDevice(true);\n\t\t\t\t\twebrtcInstance.media = {\n\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\twidth: { ideal: 440 },\n\t\t\t\t\t\t\theight: { ideal: 580 },\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tconst unsubNotifyUser = subscribeNotifyUser(`${visitorId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (data.room == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\twebrtcInstance.onUserStream(type, data);\n\t\t\t});\n\n\t\t\tconst unsubNotifyRoom = subscribeNotifyRoom(`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus' && data.callStatus === 'ended') {\n\t\t\t\t\twebrtcInstance.stop();\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'getDeviceType') {\n\t\t\t\t\tsdk.publish('notify-room', [\n\t\t\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t\t\t'deviceType',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsdk.publish('notify-room', [\n\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t'deviceType',\n\t\t\t\t{\n\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t},\n\t\t\t]);\n\n\t\t\tsdk.publish('notify-room', [\n\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t'callStatus',\n\t\t\t\t{\n\t\t\t\t\tcallStatus: 'inProgress',\n\t\t\t\t},\n\t\t\t]);\n\n\t\t\treturn () => {\n\t\t\t\tunsubNotifyRoom();\n\t\t\t\tunsubNotifyUser();\n\t\t\t};\n\t\t}\n\n\t\tif (!isAgentActive) {\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId);\n\t\t\tif (status === 'inProgress') {\n\t\t\t\tsdk.publish('notify-room', [`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, 'getDeviceType']);\n\n\t\t\t\twebrtcInstance.startCall({\n\t\t\t\t\taudio: true,\n\t\t\t\t\tvideo: {\n\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tsetIsAgentActive(true);\n\n\t\t\treturn subscribeNotifyRoom(`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus') {\n\t\t\t\t\tswitch (data.callStatus) {\n\t\t\t\t\t\tcase 'ended':\n\t\t\t\t\t\t\twebrtcInstance.stop();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'inProgress':\n\t\t\t\t\t\t\twebrtcInstance.startCall({\n\t\t\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'deviceType' && data.isMobileDevice) {\n\t\t\t\t\tsetIsRemoteMobileDevice(true);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, [isAgentActive, status, setStatus, visitorId, roomId, visitorToken, isLayoutEmbedded, subscribeNotifyUser, subscribeNotifyRoom]);\n\n\tconst toggleButton = (control: any): any => {\n\t\tif (control === 'mic') {\n\t\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken).toggleAudio();\n\t\t\treturn setIsMicOn(!isMicOn);\n\t\t}\n\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken).toggleVideo();\n\t\tsetIsCameraOn(!isCameraOn);\n\t\tsdk.publish('notify-room', [\n\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t'cameraStatus',\n\t\t\t{\n\t\t\t\tisCameraOn: !isCameraOn,\n\t\t\t},\n\t\t]);\n\t};\n\n\tconst closeWindow = (): void => {\n\t\tif (isLayoutEmbedded) {\n\t\t\treturn (parent as any)?.handleIframeClose();\n\t\t}\n\t\treturn window.close();\n\t};\n\n\tconst getCallDuration = (callStartTime: any): any => moment.duration(moment(new Date()).diff(moment(callStartTime))).asSeconds();\n\n\tconst showCallPage = (localAvatar: any, remoteAvatar: any): any => (\n\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t}}\n\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t>\n\t\t\t\t\t<video\n\t\t\t\t\t\tid='localVideo'\n\t\t\t\t\t\tautoPlay\n\t\t\t\t\t\tplaysInline\n\t\t\t\t\t\tmuted\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'block' : 'none',\n\t\t\t\t\t\t}}\n\t\t\t\t\t></video>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'none' : 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar username={localAvatar} size={isLocalMobileDevice || callInIframe ? 'x32' : 'x48'} />\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbottom: '5%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid='mic'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={isMicOn ? t('Mute_microphone') : t('Unmute_microphone')}\n\t\t\t\t\t\t\tonClick={(): any => toggleButton('mic')}\n\t\t\t\t\t\t\tclassName={isMicOn ? 'On' : 'Off'}\n\t\t\t\t\t\t\tsize={Number(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isMicOn ? <Icon name='mic' size={iconSize} /> : <Icon name='mic-off' size={iconSize} />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid='camera'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={isCameraOn ? t('Turn_off_video') : t('Turn_on_video')}\n\t\t\t\t\t\t\tonClick={(): void => toggleButton('camera')}\n\t\t\t\t\t\t\tclassName={isCameraOn ? 'On' : 'Off'}\n\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isCameraOn ? <Icon name='video' size={iconSize} /> : <Icon name='video-off' size={iconSize} />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{isLayoutEmbedded && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\t\tborderColor='stroke-extra-dark'\n\t\t\t\t\t\t\t\tdata-title={t('Expand_view')}\n\t\t\t\t\t\t\t\tonClick={(): void => (parent as any)?.expandCall()}\n\t\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon name='arrow-expand' size={iconSize} color='white' />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Button square danger title={t('End_call')} onClick={closeWindow} size={parseInt(buttonSize)}>\n\t\t\t\t\t\t\t<Icon name='phone-off' size={iconSize} color='white' />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Box>\n\t\t\t\t<video\n\t\t\t\t\tid='remoteVideo'\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: isRemoteMobileDevice ? '45%' : '100%',\n\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\tdisplay: isRemoteCameraOn ? 'block' : 'none',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<track kind='captions' />\n\t\t\t\t</video>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tdisplay={isRemoteCameraOn ? 'none' : 'flex'}\n\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\tflexDirection='column'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: isRemoteMobileDevice || isLocalMobileDevice ? '10%' : '30%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar username={remoteAvatar} size={!callInIframe ? 'x124' : avatarSize} />\n\t\t\t\t\t</Box>\n\n\t\t\t\t\t<Box color='white' fontSize={callInIframe ? 12 : 18} textAlign='center' margin={3}>\n\t\t\t\t\t\t<OngoingCallDuration counter={getCallDuration(callStartTime)} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tfontSize: callInIframe ? 12 : 22,\n\t\t\t\t\t\t\tmargin: callInIframe ? 5 : 9,\n\t\t\t\t\t\t\t...(callInIframe && { marginTop: 0 }),\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{remoteAvatar}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Flex.Container>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{status === 'ringing' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<UserAvatar username={agentName} size={isLocalMobileDevice ? 'x32' : 'x48'} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '20%',\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<UserAvatar username={visitorName} size='x124' />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box color='white' fontSize={16} margin={15}>\n\t\t\t\t\t\t\t\tCalling...\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\t\t\tfontSize: isLocalMobileDevice ? 15 : 22,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{visitorName}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t\t{status === 'declined' && (\n\t\t\t\t<Box minHeight='90%' display='flex' justifyContent='center' alignItems='center' color='white' fontSize='s1'>\n\t\t\t\t\t{t('Call_declined')}\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t\t{status === 'inProgress' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t{visitorToken ? showCallPage(visitorName, agentName) : showCallPage(agentName, visitorName)}\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default CallPage;\n"]}}},"code":"var _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 0);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\nvar Box, Flex, ButtonGroup, Button, Icon;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box: function (v) {\n    Box = v;\n  },\n  Flex: function (v) {\n    Flex = v;\n  },\n  ButtonGroup: function (v) {\n    ButtonGroup = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  Icon: function (v) {\n    Icon = v;\n  }\n}, 0);\nvar UserAvatar;\nmodule.link(\"@rocket.chat/ui-avatar\", {\n  UserAvatar: function (v) {\n    UserAvatar = v;\n  }\n}, 1);\nvar useTranslation, useStream;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  },\n  useStream: function (v) {\n    useStream = v;\n  }\n}, 2);\nvar moment;\nmodule.link(\"moment\", {\n  \"default\": function (v) {\n    moment = v;\n  }\n}, 3);\nvar React, useEffect, useState;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useEffect: function (v) {\n    useEffect = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 4);\nvar sdk;\nmodule.link(\"../../../app/utils/client/lib/SDKClient\", {\n  sdk: function (v) {\n    sdk = v;\n  }\n}, 5);\nvar WebRTC;\nmodule.link(\"../../../app/webrtc/client\", {\n  WebRTC: function (v) {\n    WebRTC = v;\n  }\n}, 6);\nvar WEB_RTC_EVENTS;\nmodule.link(\"../../../app/webrtc/lib/constants\", {\n  WEB_RTC_EVENTS: function (v) {\n    WEB_RTC_EVENTS = v;\n  }\n}, 7);\nvar OngoingCallDuration;\nmodule.link(\"./OngoingCallDuration\", {\n  \"default\": function (v) {\n    OngoingCallDuration = v;\n  }\n}, 8);\nmodule.link(\"./styles.css\");\nvar CallPage = function (_ref) {\n  var roomId = _ref.roomId,\n    visitorToken = _ref.visitorToken,\n    visitorId = _ref.visitorId,\n    status = _ref.status,\n    setStatus = _ref.setStatus,\n    isLayoutEmbedded = _ref.isLayoutEmbedded,\n    visitorName = _ref.visitorName,\n    agentName = _ref.agentName,\n    callStartTime = _ref.callStartTime;\n  if (!roomId) {\n    throw new Error('Call Page - no room id');\n  }\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isAgentActive = _useState2[0],\n    setIsAgentActive = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isMicOn = _useState4[0],\n    setIsMicOn = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isCameraOn = _useState6[0],\n    setIsCameraOn = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isRemoteMobileDevice = _useState8[0],\n    setIsRemoteMobileDevice = _useState8[1];\n  var _useState9 = useState(false),\n    _useState10 = _slicedToArray(_useState9, 2),\n    callInIframe = _useState10[0],\n    setCallInIframe = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    isRemoteCameraOn = _useState12[0],\n    setIsRemoteCameraOn = _useState12[1];\n  var _useState13 = useState(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    isLocalMobileDevice = _useState14[0],\n    setIsLocalMobileDevice = _useState14[1];\n  var iconSize = 'x21';\n  var buttonSize = 'x40';\n  var avatarSize = 'x48';\n  if (isLayoutEmbedded) {\n    iconSize = 'x19';\n    buttonSize = 'x35';\n  }\n  var subscribeNotifyUser = useStream('notify-user');\n  var subscribeNotifyRoom = useStream('notify-room');\n  var t = useTranslation();\n  useEffect(function () {\n    if (visitorToken) {\n      if (!visitorId) {\n        throw new Error('Call Page - no visitor id');\n      }\n      var webrtcInstance = WebRTC.getInstanceByRoomId(roomId, visitorId);\n      var isMobileDevice = function () {\n        if (isLayoutEmbedded) {\n          setCallInIframe(true);\n        }\n        if (window.innerWidth <= 450 && window.innerHeight >= 629 && window.innerHeight <= 900) {\n          setIsLocalMobileDevice(true);\n          webrtcInstance.media = {\n            audio: true,\n            video: {\n              width: {\n                ideal: 440\n              },\n              height: {\n                ideal: 580\n              }\n            }\n          };\n          return true;\n        }\n        return false;\n      };\n      var unsubNotifyUser = subscribeNotifyUser(visitorId + \"/\" + WEB_RTC_EVENTS.WEB_RTC, function (type, data) {\n        if (data.room == null) {\n          return;\n        }\n        webrtcInstance.onUserStream(type, data);\n      });\n      var unsubNotifyRoom = subscribeNotifyRoom(roomId + \"/\" + WEB_RTC_EVENTS.WEB_RTC, function (type, data) {\n        if (type === 'callStatus' && data.callStatus === 'ended') {\n          webrtcInstance.stop();\n          setStatus(data.callStatus);\n        } else if (type === 'getDeviceType') {\n          sdk.publish('notify-room', [roomId + \"/\" + WEB_RTC_EVENTS.WEB_RTC, 'deviceType', {\n            isMobileDevice: isMobileDevice()\n          }]);\n        } else if (type === 'cameraStatus') {\n          setIsRemoteCameraOn(data.isCameraOn);\n        }\n      });\n      sdk.publish('notify-room', [roomId + \"/\" + WEB_RTC_EVENTS.WEB_RTC, 'deviceType', {\n        isMobileDevice: isMobileDevice()\n      }]);\n      sdk.publish('notify-room', [roomId + \"/\" + WEB_RTC_EVENTS.WEB_RTC, 'callStatus', {\n        callStatus: 'inProgress'\n      }]);\n      return function () {\n        unsubNotifyRoom();\n        unsubNotifyUser();\n      };\n    }\n    if (!isAgentActive) {\n      var _webrtcInstance = WebRTC.getInstanceByRoomId(roomId);\n      if (status === 'inProgress') {\n        sdk.publish('notify-room', [roomId + \"/\" + WEB_RTC_EVENTS.WEB_RTC, 'getDeviceType']);\n        _webrtcInstance.startCall({\n          audio: true,\n          video: {\n            width: {\n              ideal: 1920\n            },\n            height: {\n              ideal: 1080\n            }\n          }\n        });\n      }\n      setIsAgentActive(true);\n      return subscribeNotifyRoom(roomId + \"/\" + WEB_RTC_EVENTS.WEB_RTC, function (type, data) {\n        if (type === 'callStatus') {\n          switch (data.callStatus) {\n            case 'ended':\n              _webrtcInstance.stop();\n              break;\n            case 'inProgress':\n              _webrtcInstance.startCall({\n                audio: true,\n                video: {\n                  width: {\n                    ideal: 1920\n                  },\n                  height: {\n                    ideal: 1080\n                  }\n                }\n              });\n          }\n          setStatus(data.callStatus);\n        } else if (type === 'deviceType' && data.isMobileDevice) {\n          setIsRemoteMobileDevice(true);\n        } else if (type === 'cameraStatus') {\n          setIsRemoteCameraOn(data.isCameraOn);\n        }\n      });\n    }\n  }, [isAgentActive, status, setStatus, visitorId, roomId, visitorToken, isLayoutEmbedded, subscribeNotifyUser, subscribeNotifyRoom]);\n  var toggleButton = function (control) {\n    if (control === 'mic') {\n      WebRTC.getInstanceByRoomId(roomId, visitorToken).toggleAudio();\n      return setIsMicOn(!isMicOn);\n    }\n    WebRTC.getInstanceByRoomId(roomId, visitorToken).toggleVideo();\n    setIsCameraOn(!isCameraOn);\n    sdk.publish('notify-room', [roomId + \"/\" + WEB_RTC_EVENTS.WEB_RTC, 'cameraStatus', {\n      isCameraOn: !isCameraOn\n    }]);\n  };\n  var closeWindow = function () {\n    if (isLayoutEmbedded) {\n      var _parent;\n      return (_parent = parent) === null || _parent === void 0 ? void 0 : _parent.handleIframeClose();\n    }\n    return window.close();\n  };\n  var getCallDuration = function (callStartTime) {\n    return moment.duration(moment(new Date()).diff(moment(callStartTime))).asSeconds();\n  };\n  var showCallPage = function (localAvatar, remoteAvatar) {\n    return /*#__PURE__*/React.createElement(Flex.Container, {\n      direction: \"column\",\n      justifyContent: \"center\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      width: \"full\",\n      minHeight: \"sh\",\n      alignItems: \"center\",\n      backgroundColor: \"dark\",\n      overflow: \"hidden\",\n      position: \"relative\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      position: \"absolute\",\n      zIndex: 1,\n      style: {\n        top: '5%',\n        right: '2%'\n      },\n      className: \"Self_Video\",\n      alignItems: \"center\",\n      backgroundColor: \"dark\"\n    }, /*#__PURE__*/React.createElement(\"video\", {\n      id: \"localVideo\",\n      autoPlay: true,\n      playsInline: true,\n      muted: true,\n      style: {\n        width: '100%',\n        transform: 'scaleX(-1)',\n        display: isCameraOn ? 'block' : 'none'\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      style: {\n        display: isCameraOn ? 'none' : 'block',\n        margin: 'auto'\n      }\n    }, /*#__PURE__*/React.createElement(UserAvatar, {\n      username: localAvatar,\n      size: isLocalMobileDevice || callInIframe ? 'x32' : 'x48'\n    }))), /*#__PURE__*/React.createElement(Box, {\n      position: \"absolute\",\n      zIndex: 1,\n      style: {\n        bottom: '5%'\n      }\n    }, /*#__PURE__*/React.createElement(ButtonGroup, null, /*#__PURE__*/React.createElement(Button, {\n      id: \"mic\",\n      square: true,\n      title: isMicOn ? t('Mute_microphone') : t('Unmute_microphone'),\n      onClick: function () {\n        return toggleButton('mic');\n      },\n      className: isMicOn ? 'On' : 'Off',\n      size: Number(buttonSize)\n    }, isMicOn ? /*#__PURE__*/React.createElement(Icon, {\n      name: \"mic\",\n      size: iconSize\n    }) : /*#__PURE__*/React.createElement(Icon, {\n      name: \"mic-off\",\n      size: iconSize\n    })), /*#__PURE__*/React.createElement(Button, {\n      id: \"camera\",\n      square: true,\n      title: isCameraOn ? t('Turn_off_video') : t('Turn_on_video'),\n      onClick: function () {\n        return toggleButton('camera');\n      },\n      className: isCameraOn ? 'On' : 'Off',\n      size: parseInt(buttonSize)\n    }, isCameraOn ? /*#__PURE__*/React.createElement(Icon, {\n      name: \"video\",\n      size: iconSize\n    }) : /*#__PURE__*/React.createElement(Icon, {\n      name: \"video-off\",\n      size: iconSize\n    })), isLayoutEmbedded && /*#__PURE__*/React.createElement(Button, {\n      square: true,\n      backgroundColor: \"dark\",\n      borderColor: \"stroke-extra-dark\",\n      \"data-title\": t('Expand_view'),\n      onClick: function () {\n        var _parent2;\n        return (_parent2 = parent) === null || _parent2 === void 0 ? void 0 : _parent2.expandCall();\n      },\n      size: parseInt(buttonSize)\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"arrow-expand\",\n      size: iconSize,\n      color: \"white\"\n    })), /*#__PURE__*/React.createElement(Button, {\n      square: true,\n      danger: true,\n      title: t('End_call'),\n      onClick: closeWindow,\n      size: parseInt(buttonSize)\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"phone-off\",\n      size: iconSize,\n      color: \"white\"\n    })))), /*#__PURE__*/React.createElement(\"video\", {\n      id: \"remoteVideo\",\n      autoPlay: true,\n      playsInline: true,\n      style: {\n        width: isRemoteMobileDevice ? '45%' : '100%',\n        transform: 'scaleX(-1)',\n        display: isRemoteCameraOn ? 'block' : 'none'\n      }\n    }, /*#__PURE__*/React.createElement(\"track\", {\n      kind: \"captions\"\n    })), /*#__PURE__*/React.createElement(Box, {\n      position: \"absolute\",\n      zIndex: 1,\n      display: isRemoteCameraOn ? 'none' : 'flex',\n      justifyContent: \"center\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      style: {\n        top: isRemoteMobileDevice || isLocalMobileDevice ? '10%' : '30%'\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      style: {\n        display: 'block',\n        margin: 'auto'\n      }\n    }, /*#__PURE__*/React.createElement(UserAvatar, {\n      username: remoteAvatar,\n      size: !callInIframe ? 'x124' : avatarSize\n    })), /*#__PURE__*/React.createElement(Box, {\n      color: \"white\",\n      fontSize: callInIframe ? 12 : 18,\n      textAlign: \"center\",\n      margin: 3\n    }, /*#__PURE__*/React.createElement(OngoingCallDuration, {\n      counter: getCallDuration(callStartTime)\n    })), /*#__PURE__*/React.createElement(Box, {\n      style: _objectSpread({\n        color: 'white',\n        fontSize: callInIframe ? 12 : 22,\n        margin: callInIframe ? 5 : 9\n      }, callInIframe && {\n        marginTop: 0\n      })\n    }, remoteAvatar))));\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, status === 'ringing' && /*#__PURE__*/React.createElement(Flex.Container, {\n    direction: \"column\",\n    justifyContent: \"center\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    width: \"full\",\n    minHeight: \"sh\",\n    alignItems: \"center\",\n    backgroundColor: \"dark\",\n    overflow: \"hidden\",\n    position: \"relative\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    position: \"absolute\",\n    zIndex: 1,\n    style: {\n      top: '5%',\n      right: '2%'\n    },\n    className: \"Self_Video\",\n    backgroundColor: \"dark\",\n    alignItems: \"center\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    style: {\n      display: 'block',\n      margin: 'auto'\n    }\n  }, /*#__PURE__*/React.createElement(UserAvatar, {\n    username: agentName,\n    size: isLocalMobileDevice ? 'x32' : 'x48'\n  }))), /*#__PURE__*/React.createElement(Box, {\n    position: \"absolute\",\n    zIndex: 1,\n    style: {\n      top: '20%',\n      display: 'flex',\n      justifyContent: 'center',\n      flexDirection: 'column'\n    },\n    alignItems: \"center\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    style: {\n      display: 'block',\n      margin: 'auto'\n    }\n  }, /*#__PURE__*/React.createElement(UserAvatar, {\n    username: visitorName,\n    size: \"x124\"\n  })), /*#__PURE__*/React.createElement(Box, {\n    color: \"white\",\n    fontSize: 16,\n    margin: 15\n  }, \"Calling...\"), /*#__PURE__*/React.createElement(Box, {\n    style: {\n      color: 'white',\n      fontSize: isLocalMobileDevice ? 15 : 22\n    }\n  }, visitorName)))), status === 'declined' && /*#__PURE__*/React.createElement(Box, {\n    minHeight: \"90%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    color: \"white\",\n    fontSize: \"s1\"\n  }, t('Call_declined')), status === 'inProgress' && /*#__PURE__*/React.createElement(Flex.Container, {\n    direction: \"column\",\n    justifyContent: \"center\"\n  }, visitorToken ? showCallPage(visitorName, agentName) : showCallPage(agentName, visitorName)));\n};\nmodule.exportDefault(CallPage);","map":{"version":3,"names":["_objectSpread","module","link","default","v","_slicedToArray","Box","Flex","ButtonGroup","Button","Icon","UserAvatar","useTranslation","useStream","moment","React","useEffect","useState","sdk","WebRTC","WEB_RTC_EVENTS","OngoingCallDuration","CallPage","_ref","roomId","visitorToken","visitorId","status","setStatus","isLayoutEmbedded","visitorName","agentName","callStartTime","Error","_useState","_useState2","isAgentActive","setIsAgentActive","_useState3","_useState4","isMicOn","setIsMicOn","_useState5","_useState6","isCameraOn","setIsCameraOn","_useState7","_useState8","isRemoteMobileDevice","setIsRemoteMobileDevice","_useState9","_useState10","callInIframe","setCallInIframe","_useState11","_useState12","isRemoteCameraOn","setIsRemoteCameraOn","_useState13","_useState14","isLocalMobileDevice","setIsLocalMobileDevice","iconSize","buttonSize","avatarSize","subscribeNotifyUser","subscribeNotifyRoom","t","webrtcInstance","getInstanceByRoomId","isMobileDevice","window","innerWidth","innerHeight","media","audio","video","width","ideal","height","unsubNotifyUser","WEB_RTC","type","data","room","onUserStream","unsubNotifyRoom","callStatus","stop","publish","startCall","toggleButton","control","toggleAudio","toggleVideo","closeWindow","_parent","parent","handleIframeClose","close","getCallDuration","duration","Date","diff","asSeconds","showCallPage","localAvatar","remoteAvatar","createElement","Container","direction","justifyContent","minHeight","alignItems","backgroundColor","overflow","position","zIndex","style","top","right","className","id","autoPlay","playsInline","muted","transform","display","margin","username","size","bottom","square","title","onClick","Number","name","parseInt","borderColor","_parent2","expandCall","color","danger","kind","flexDirection","fontSize","textAlign","counter","marginTop","Fragment","exportDefault"],"sources":["client/views/meet/CallPage.tsx"],"sourcesContent":["import { Box, Flex, ButtonGroup, Button, Icon } from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport { useTranslation, useStream } from '@rocket.chat/ui-contexts';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\n\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\nimport { WebRTC } from '../../../app/webrtc/client';\nimport { WEB_RTC_EVENTS } from '../../../app/webrtc/lib/constants';\nimport OngoingCallDuration from './OngoingCallDuration';\nimport './styles.css';\n\ntype CallPageProps = {\n\troomId?: string;\n\tvisitorToken: any;\n\tvisitorId: string | null;\n\tstatus: any;\n\tsetStatus: any;\n\tisLayoutEmbedded: boolean;\n\tvisitorName: any;\n\tagentName: any;\n\tcallStartTime: any;\n};\n\nconst CallPage = ({\n\troomId,\n\tvisitorToken,\n\tvisitorId,\n\tstatus,\n\tsetStatus,\n\tisLayoutEmbedded,\n\tvisitorName,\n\tagentName,\n\tcallStartTime,\n}: CallPageProps) => {\n\tif (!roomId) {\n\t\tthrow new Error('Call Page - no room id');\n\t}\n\tconst [isAgentActive, setIsAgentActive] = useState(false);\n\tconst [isMicOn, setIsMicOn] = useState(false);\n\tconst [isCameraOn, setIsCameraOn] = useState(false);\n\tconst [isRemoteMobileDevice, setIsRemoteMobileDevice] = useState(false);\n\tconst [callInIframe, setCallInIframe] = useState(false);\n\tconst [isRemoteCameraOn, setIsRemoteCameraOn] = useState(false);\n\tconst [isLocalMobileDevice, setIsLocalMobileDevice] = useState(false);\n\n\tlet iconSize = 'x21';\n\tlet buttonSize = 'x40';\n\tconst avatarSize = 'x48';\n\tif (isLayoutEmbedded) {\n\t\ticonSize = 'x19';\n\t\tbuttonSize = 'x35';\n\t}\n\n\tconst subscribeNotifyUser = useStream('notify-user');\n\tconst subscribeNotifyRoom = useStream('notify-room');\n\tconst t = useTranslation();\n\tuseEffect(() => {\n\t\tif (visitorToken) {\n\t\t\tif (!visitorId) {\n\t\t\t\tthrow new Error('Call Page - no visitor id');\n\t\t\t}\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId, visitorId as any);\n\t\t\tconst isMobileDevice = (): boolean => {\n\t\t\t\tif (isLayoutEmbedded) {\n\t\t\t\t\tsetCallInIframe(true);\n\t\t\t\t}\n\t\t\t\tif (window.innerWidth <= 450 && window.innerHeight >= 629 && window.innerHeight <= 900) {\n\t\t\t\t\tsetIsLocalMobileDevice(true);\n\t\t\t\t\twebrtcInstance.media = {\n\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\twidth: { ideal: 440 },\n\t\t\t\t\t\t\theight: { ideal: 580 },\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tconst unsubNotifyUser = subscribeNotifyUser(`${visitorId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (data.room == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\twebrtcInstance.onUserStream(type, data);\n\t\t\t});\n\n\t\t\tconst unsubNotifyRoom = subscribeNotifyRoom(`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus' && data.callStatus === 'ended') {\n\t\t\t\t\twebrtcInstance.stop();\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'getDeviceType') {\n\t\t\t\t\tsdk.publish('notify-room', [\n\t\t\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t\t\t'deviceType',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsdk.publish('notify-room', [\n\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t'deviceType',\n\t\t\t\t{\n\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t},\n\t\t\t]);\n\n\t\t\tsdk.publish('notify-room', [\n\t\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t\t'callStatus',\n\t\t\t\t{\n\t\t\t\t\tcallStatus: 'inProgress',\n\t\t\t\t},\n\t\t\t]);\n\n\t\t\treturn () => {\n\t\t\t\tunsubNotifyRoom();\n\t\t\t\tunsubNotifyUser();\n\t\t\t};\n\t\t}\n\n\t\tif (!isAgentActive) {\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId);\n\t\t\tif (status === 'inProgress') {\n\t\t\t\tsdk.publish('notify-room', [`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, 'getDeviceType']);\n\n\t\t\t\twebrtcInstance.startCall({\n\t\t\t\t\taudio: true,\n\t\t\t\t\tvideo: {\n\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tsetIsAgentActive(true);\n\n\t\t\treturn subscribeNotifyRoom(`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`, (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus') {\n\t\t\t\t\tswitch (data.callStatus) {\n\t\t\t\t\t\tcase 'ended':\n\t\t\t\t\t\t\twebrtcInstance.stop();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'inProgress':\n\t\t\t\t\t\t\twebrtcInstance.startCall({\n\t\t\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'deviceType' && data.isMobileDevice) {\n\t\t\t\t\tsetIsRemoteMobileDevice(true);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, [isAgentActive, status, setStatus, visitorId, roomId, visitorToken, isLayoutEmbedded, subscribeNotifyUser, subscribeNotifyRoom]);\n\n\tconst toggleButton = (control: any): any => {\n\t\tif (control === 'mic') {\n\t\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken).toggleAudio();\n\t\t\treturn setIsMicOn(!isMicOn);\n\t\t}\n\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken).toggleVideo();\n\t\tsetIsCameraOn(!isCameraOn);\n\t\tsdk.publish('notify-room', [\n\t\t\t`${roomId}/${WEB_RTC_EVENTS.WEB_RTC}`,\n\t\t\t'cameraStatus',\n\t\t\t{\n\t\t\t\tisCameraOn: !isCameraOn,\n\t\t\t},\n\t\t]);\n\t};\n\n\tconst closeWindow = (): void => {\n\t\tif (isLayoutEmbedded) {\n\t\t\treturn (parent as any)?.handleIframeClose();\n\t\t}\n\t\treturn window.close();\n\t};\n\n\tconst getCallDuration = (callStartTime: any): any => moment.duration(moment(new Date()).diff(moment(callStartTime))).asSeconds();\n\n\tconst showCallPage = (localAvatar: any, remoteAvatar: any): any => (\n\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t}}\n\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t>\n\t\t\t\t\t<video\n\t\t\t\t\t\tid='localVideo'\n\t\t\t\t\t\tautoPlay\n\t\t\t\t\t\tplaysInline\n\t\t\t\t\t\tmuted\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'block' : 'none',\n\t\t\t\t\t\t}}\n\t\t\t\t\t></video>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'none' : 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar username={localAvatar} size={isLocalMobileDevice || callInIframe ? 'x32' : 'x48'} />\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbottom: '5%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid='mic'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={isMicOn ? t('Mute_microphone') : t('Unmute_microphone')}\n\t\t\t\t\t\t\tonClick={(): any => toggleButton('mic')}\n\t\t\t\t\t\t\tclassName={isMicOn ? 'On' : 'Off'}\n\t\t\t\t\t\t\tsize={Number(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isMicOn ? <Icon name='mic' size={iconSize} /> : <Icon name='mic-off' size={iconSize} />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid='camera'\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\ttitle={isCameraOn ? t('Turn_off_video') : t('Turn_on_video')}\n\t\t\t\t\t\t\tonClick={(): void => toggleButton('camera')}\n\t\t\t\t\t\t\tclassName={isCameraOn ? 'On' : 'Off'}\n\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{isCameraOn ? <Icon name='video' size={iconSize} /> : <Icon name='video-off' size={iconSize} />}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{isLayoutEmbedded && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\t\tborderColor='stroke-extra-dark'\n\t\t\t\t\t\t\t\tdata-title={t('Expand_view')}\n\t\t\t\t\t\t\t\tonClick={(): void => (parent as any)?.expandCall()}\n\t\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon name='arrow-expand' size={iconSize} color='white' />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Button square danger title={t('End_call')} onClick={closeWindow} size={parseInt(buttonSize)}>\n\t\t\t\t\t\t\t<Icon name='phone-off' size={iconSize} color='white' />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Box>\n\t\t\t\t<video\n\t\t\t\t\tid='remoteVideo'\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: isRemoteMobileDevice ? '45%' : '100%',\n\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\tdisplay: isRemoteCameraOn ? 'block' : 'none',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<track kind='captions' />\n\t\t\t\t</video>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tdisplay={isRemoteCameraOn ? 'none' : 'flex'}\n\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\tflexDirection='column'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: isRemoteMobileDevice || isLocalMobileDevice ? '10%' : '30%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<UserAvatar username={remoteAvatar} size={!callInIframe ? 'x124' : avatarSize} />\n\t\t\t\t\t</Box>\n\n\t\t\t\t\t<Box color='white' fontSize={callInIframe ? 12 : 18} textAlign='center' margin={3}>\n\t\t\t\t\t\t<OngoingCallDuration counter={getCallDuration(callStartTime)} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tfontSize: callInIframe ? 12 : 22,\n\t\t\t\t\t\t\tmargin: callInIframe ? 5 : 9,\n\t\t\t\t\t\t\t...(callInIframe && { marginTop: 0 }),\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{remoteAvatar}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Flex.Container>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{status === 'ringing' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='dark' overflow='hidden' position='relative'>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\t\t\tbackgroundColor='dark'\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<UserAvatar username={agentName} size={isLocalMobileDevice ? 'x32' : 'x48'} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '20%',\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<UserAvatar username={visitorName} size='x124' />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box color='white' fontSize={16} margin={15}>\n\t\t\t\t\t\t\t\tCalling...\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\t\t\tfontSize: isLocalMobileDevice ? 15 : 22,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{visitorName}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t\t{status === 'declined' && (\n\t\t\t\t<Box minHeight='90%' display='flex' justifyContent='center' alignItems='center' color='white' fontSize='s1'>\n\t\t\t\t\t{t('Call_declined')}\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t\t{status === 'inProgress' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t{visitorToken ? showCallPage(visitorName, agentName) : showCallPage(agentName, visitorName)}\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default CallPage;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"5ba3c2c539371e8b18f73339cc5554309cc93ea9"}
