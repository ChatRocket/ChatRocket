{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/contextualBar/Threads/components/ThreadMessageList.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/room/contextualBar/Threads/components/ThreadMessageList.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/contextualBar/Threads/components/ThreadMessageList.tsx","inputSourceMap":{"version":3,"file":"client/views/room/contextualBar/Threads/components/ThreadMessageList.tsx","sourceRoot":"","sources":["client/views/room/contextualBar/Threads/components/ThreadMessageList.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, IThreadMainMessage } from '@rocket.chat/core-typings';\nimport { Box } from '@rocket.chat/fuselage';\nimport { useMergedRefs } from '@rocket.chat/fuselage-hooks';\nimport { useSetting, useUserPreference } from '@rocket.chat/ui-contexts';\nimport { differenceInSeconds } from 'date-fns';\nimport type { ReactElement } from 'react';\nimport React, { Fragment } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { MessageTypes } from '../../../../../../app/ui-utils/client';\nimport { isTruthy } from '../../../../../../lib/isTruthy';\nimport { CustomScrollbars } from '../../../../../components/CustomScrollbars';\nimport { BubbleDate } from '../../../BubbleDate';\nimport { isMessageNewDay } from '../../../MessageList/lib/isMessageNewDay';\nimport MessageListProvider from '../../../MessageList/providers/MessageListProvider';\nimport LoadingMessagesIndicator from '../../../body/LoadingMessagesIndicator';\nimport { useDateScroll } from '../../../hooks/useDateScroll';\nimport { useFirstUnreadMessageId } from '../../../hooks/useFirstUnreadMessageId';\nimport { useMessageListNavigation } from '../../../hooks/useMessageListNavigation';\nimport { useLegacyThreadMessageJump } from '../hooks/useLegacyThreadMessageJump';\nimport { useLegacyThreadMessageListScrolling } from '../hooks/useLegacyThreadMessageListScrolling';\nimport { useLegacyThreadMessages } from '../hooks/useLegacyThreadMessages';\nimport { ThreadMessageItem } from './ThreadMessageItem';\n\nconst isMessageSequential = (current: IMessage, previous: IMessage | undefined, groupingRange: number): boolean => {\n\tif (!previous) {\n\t\treturn false;\n\t}\n\n\tif (MessageTypes.isSystemMessage(current) || MessageTypes.isSystemMessage(previous)) {\n\t\treturn false;\n\t}\n\n\tif (current.groupable === false) {\n\t\treturn false;\n\t}\n\n\tif (current.u._id !== previous.u._id) {\n\t\treturn false;\n\t}\n\n\tif (current.alias !== previous.alias) {\n\t\treturn false;\n\t}\n\treturn differenceInSeconds(current.ts, previous.ts) < groupingRange && !isMessageNewDay(current, previous);\n};\n\ntype ThreadMessageListProps = {\n\tmainMessage: IThreadMainMessage;\n};\n\nconst ThreadMessageList = ({ mainMessage }: ThreadMessageListProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst { innerRef, bubbleRef, listStyle, ...bubbleDate } = useDateScroll();\n\n\tconst { messages, loading } = useLegacyThreadMessages(mainMessage._id);\n\tconst {\n\t\tlistWrapperRef: listWrapperScrollRef,\n\t\tlistRef: listScrollRef,\n\t\tonScroll: handleScroll,\n\t} = useLegacyThreadMessageListScrolling(mainMessage);\n\tconst { parentRef: listJumpRef } = useLegacyThreadMessageJump({ enabled: !loading });\n\n\tconst hideUsernames = useUserPreference<boolean>('hideUsernames');\n\tconst showUserAvatar = !!useUserPreference<boolean>('displayAvatars');\n\tconst firstUnreadMessageId = useFirstUnreadMessageId();\n\tconst messageGroupingPeriod = Number(useSetting('Message_GroupingPeriod'));\n\n\tconst { messageListRef } = useMessageListNavigation();\n\tconst listRef = useMergedRefs<HTMLElement | null>(listScrollRef, messageListRef);\n\n\tconst scrollRef = useMergedRefs<HTMLElement | null>(innerRef, listWrapperScrollRef, listJumpRef);\n\n\treturn (\n\t\t<div className={['thread-list js-scroll-thread', hideUsernames && 'hide-usernames'].filter(isTruthy).join(' ')}>\n\t\t\t<BubbleDate ref={bubbleRef} {...bubbleDate} />\n\t\t\t<CustomScrollbars\n\t\t\t\tref={scrollRef}\n\t\t\t\tonScroll={(args) => {\n\t\t\t\t\thandleScroll(args);\n\t\t\t\t}}\n\t\t\t\tstyle={{ scrollBehavior: 'smooth', overflowX: 'hidden' }}\n\t\t\t>\n\t\t\t\t<Box\n\t\t\t\t\tis='ul'\n\t\t\t\t\tclassName={[listStyle, 'thread']}\n\t\t\t\t\tref={listRef}\n\t\t\t\t\taria-label={t('Thread_message_list')}\n\t\t\t\t\tstyle={{ scrollBehavior: 'smooth', overflowX: 'hidden' }}\n\t\t\t\t>\n\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t<li className='load-more'>\n\t\t\t\t\t\t\t<LoadingMessagesIndicator />\n\t\t\t\t\t\t</li>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<MessageListProvider messageListRef={listJumpRef}>\n\t\t\t\t\t\t\t{[mainMessage, ...messages].map((message, index, { [index - 1]: previous }) => {\n\t\t\t\t\t\t\t\tconst sequential = isMessageSequential(message, previous, messageGroupingPeriod);\n\t\t\t\t\t\t\t\tconst newDay = isMessageNewDay(message, previous);\n\t\t\t\t\t\t\t\tconst shouldShowAsSequential = sequential && !newDay;\n\n\t\t\t\t\t\t\t\tconst firstUnread = firstUnreadMessageId === message._id;\n\t\t\t\t\t\t\t\tconst system = MessageTypes.isSystemMessage(message);\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Fragment key={message._id}>\n\t\t\t\t\t\t\t\t\t\t<ThreadMessageItem\n\t\t\t\t\t\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\t\t\t\t\t\tprevious={previous}\n\t\t\t\t\t\t\t\t\t\t\tsequential={sequential}\n\t\t\t\t\t\t\t\t\t\t\tshouldShowAsSequential={shouldShowAsSequential}\n\t\t\t\t\t\t\t\t\t\t\tshowUserAvatar={showUserAvatar}\n\t\t\t\t\t\t\t\t\t\t\tfirstUnread={firstUnread}\n\t\t\t\t\t\t\t\t\t\t\tsystem={system}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</MessageListProvider>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t</CustomScrollbars>\n\t\t</div>\n\t);\n};\n\nexport default ThreadMessageList;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"production","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/contextualBar/Threads/components/ThreadMessageList.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/contextualBar/Threads/components/ThreadMessageList.tsx","inputSourceMap":{"version":3,"file":"client/views/room/contextualBar/Threads/components/ThreadMessageList.tsx","sourceRoot":"","sources":["client/views/room/contextualBar/Threads/components/ThreadMessageList.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, IThreadMainMessage } from '@rocket.chat/core-typings';\nimport { Box } from '@rocket.chat/fuselage';\nimport { useMergedRefs } from '@rocket.chat/fuselage-hooks';\nimport { useSetting, useUserPreference } from '@rocket.chat/ui-contexts';\nimport { differenceInSeconds } from 'date-fns';\nimport type { ReactElement } from 'react';\nimport React, { Fragment } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { MessageTypes } from '../../../../../../app/ui-utils/client';\nimport { isTruthy } from '../../../../../../lib/isTruthy';\nimport { CustomScrollbars } from '../../../../../components/CustomScrollbars';\nimport { BubbleDate } from '../../../BubbleDate';\nimport { isMessageNewDay } from '../../../MessageList/lib/isMessageNewDay';\nimport MessageListProvider from '../../../MessageList/providers/MessageListProvider';\nimport LoadingMessagesIndicator from '../../../body/LoadingMessagesIndicator';\nimport { useDateScroll } from '../../../hooks/useDateScroll';\nimport { useFirstUnreadMessageId } from '../../../hooks/useFirstUnreadMessageId';\nimport { useMessageListNavigation } from '../../../hooks/useMessageListNavigation';\nimport { useLegacyThreadMessageJump } from '../hooks/useLegacyThreadMessageJump';\nimport { useLegacyThreadMessageListScrolling } from '../hooks/useLegacyThreadMessageListScrolling';\nimport { useLegacyThreadMessages } from '../hooks/useLegacyThreadMessages';\nimport { ThreadMessageItem } from './ThreadMessageItem';\n\nconst isMessageSequential = (current: IMessage, previous: IMessage | undefined, groupingRange: number): boolean => {\n\tif (!previous) {\n\t\treturn false;\n\t}\n\n\tif (MessageTypes.isSystemMessage(current) || MessageTypes.isSystemMessage(previous)) {\n\t\treturn false;\n\t}\n\n\tif (current.groupable === false) {\n\t\treturn false;\n\t}\n\n\tif (current.u._id !== previous.u._id) {\n\t\treturn false;\n\t}\n\n\tif (current.alias !== previous.alias) {\n\t\treturn false;\n\t}\n\treturn differenceInSeconds(current.ts, previous.ts) < groupingRange && !isMessageNewDay(current, previous);\n};\n\ntype ThreadMessageListProps = {\n\tmainMessage: IThreadMainMessage;\n};\n\nconst ThreadMessageList = ({ mainMessage }: ThreadMessageListProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst { innerRef, bubbleRef, listStyle, ...bubbleDate } = useDateScroll();\n\n\tconst { messages, loading } = useLegacyThreadMessages(mainMessage._id);\n\tconst {\n\t\tlistWrapperRef: listWrapperScrollRef,\n\t\tlistRef: listScrollRef,\n\t\tonScroll: handleScroll,\n\t} = useLegacyThreadMessageListScrolling(mainMessage);\n\tconst { parentRef: listJumpRef } = useLegacyThreadMessageJump({ enabled: !loading });\n\n\tconst hideUsernames = useUserPreference<boolean>('hideUsernames');\n\tconst showUserAvatar = !!useUserPreference<boolean>('displayAvatars');\n\tconst firstUnreadMessageId = useFirstUnreadMessageId();\n\tconst messageGroupingPeriod = Number(useSetting('Message_GroupingPeriod'));\n\n\tconst { messageListRef } = useMessageListNavigation();\n\tconst listRef = useMergedRefs<HTMLElement | null>(listScrollRef, messageListRef);\n\n\tconst scrollRef = useMergedRefs<HTMLElement | null>(innerRef, listWrapperScrollRef, listJumpRef);\n\n\treturn (\n\t\t<div className={['thread-list js-scroll-thread', hideUsernames && 'hide-usernames'].filter(isTruthy).join(' ')}>\n\t\t\t<BubbleDate ref={bubbleRef} {...bubbleDate} />\n\t\t\t<CustomScrollbars\n\t\t\t\tref={scrollRef}\n\t\t\t\tonScroll={(args) => {\n\t\t\t\t\thandleScroll(args);\n\t\t\t\t}}\n\t\t\t\tstyle={{ scrollBehavior: 'smooth', overflowX: 'hidden' }}\n\t\t\t>\n\t\t\t\t<Box\n\t\t\t\t\tis='ul'\n\t\t\t\t\tclassName={[listStyle, 'thread']}\n\t\t\t\t\tref={listRef}\n\t\t\t\t\taria-label={t('Thread_message_list')}\n\t\t\t\t\tstyle={{ scrollBehavior: 'smooth', overflowX: 'hidden' }}\n\t\t\t\t>\n\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t<li className='load-more'>\n\t\t\t\t\t\t\t<LoadingMessagesIndicator />\n\t\t\t\t\t\t</li>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<MessageListProvider messageListRef={listJumpRef}>\n\t\t\t\t\t\t\t{[mainMessage, ...messages].map((message, index, { [index - 1]: previous }) => {\n\t\t\t\t\t\t\t\tconst sequential = isMessageSequential(message, previous, messageGroupingPeriod);\n\t\t\t\t\t\t\t\tconst newDay = isMessageNewDay(message, previous);\n\t\t\t\t\t\t\t\tconst shouldShowAsSequential = sequential && !newDay;\n\n\t\t\t\t\t\t\t\tconst firstUnread = firstUnreadMessageId === message._id;\n\t\t\t\t\t\t\t\tconst system = MessageTypes.isSystemMessage(message);\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Fragment key={message._id}>\n\t\t\t\t\t\t\t\t\t\t<ThreadMessageItem\n\t\t\t\t\t\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\t\t\t\t\t\tprevious={previous}\n\t\t\t\t\t\t\t\t\t\t\tsequential={sequential}\n\t\t\t\t\t\t\t\t\t\t\tshouldShowAsSequential={shouldShowAsSequential}\n\t\t\t\t\t\t\t\t\t\t\tshowUserAvatar={showUserAvatar}\n\t\t\t\t\t\t\t\t\t\t\tfirstUnread={firstUnread}\n\t\t\t\t\t\t\t\t\t\t\tsystem={system}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</MessageListProvider>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t</CustomScrollbars>\n\t\t</div>\n\t);\n};\n\nexport default ThreadMessageList;\n"]}}},"code":"var _excluded = [\"innerRef\", \"bubbleRef\", \"listStyle\"];\nvar _toConsumableArray;\nmodule.link(\"@babel/runtime/helpers/toConsumableArray\", {\n  default: function (v) {\n    _toConsumableArray = v;\n  }\n}, 0);\nvar _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 1);\nvar _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 2);\nvar Box;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box: function (v) {\n    Box = v;\n  }\n}, 0);\nvar useMergedRefs;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMergedRefs: function (v) {\n    useMergedRefs = v;\n  }\n}, 1);\nvar useSetting, useUserPreference;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useSetting: function (v) {\n    useSetting = v;\n  },\n  useUserPreference: function (v) {\n    useUserPreference = v;\n  }\n}, 2);\nvar differenceInSeconds;\nmodule.link(\"date-fns\", {\n  differenceInSeconds: function (v) {\n    differenceInSeconds = v;\n  }\n}, 3);\nvar React, Fragment;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Fragment: function (v) {\n    Fragment = v;\n  }\n}, 4);\nvar useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 5);\nvar MessageTypes;\nmodule.link(\"../../../../../../app/ui-utils/client\", {\n  MessageTypes: function (v) {\n    MessageTypes = v;\n  }\n}, 6);\nvar isTruthy;\nmodule.link(\"../../../../../../lib/isTruthy\", {\n  isTruthy: function (v) {\n    isTruthy = v;\n  }\n}, 7);\nvar CustomScrollbars;\nmodule.link(\"../../../../../components/CustomScrollbars\", {\n  CustomScrollbars: function (v) {\n    CustomScrollbars = v;\n  }\n}, 8);\nvar BubbleDate;\nmodule.link(\"../../../BubbleDate\", {\n  BubbleDate: function (v) {\n    BubbleDate = v;\n  }\n}, 9);\nvar isMessageNewDay;\nmodule.link(\"../../../MessageList/lib/isMessageNewDay\", {\n  isMessageNewDay: function (v) {\n    isMessageNewDay = v;\n  }\n}, 10);\nvar MessageListProvider;\nmodule.link(\"../../../MessageList/providers/MessageListProvider\", {\n  \"default\": function (v) {\n    MessageListProvider = v;\n  }\n}, 11);\nvar LoadingMessagesIndicator;\nmodule.link(\"../../../body/LoadingMessagesIndicator\", {\n  \"default\": function (v) {\n    LoadingMessagesIndicator = v;\n  }\n}, 12);\nvar useDateScroll;\nmodule.link(\"../../../hooks/useDateScroll\", {\n  useDateScroll: function (v) {\n    useDateScroll = v;\n  }\n}, 13);\nvar useFirstUnreadMessageId;\nmodule.link(\"../../../hooks/useFirstUnreadMessageId\", {\n  useFirstUnreadMessageId: function (v) {\n    useFirstUnreadMessageId = v;\n  }\n}, 14);\nvar useMessageListNavigation;\nmodule.link(\"../../../hooks/useMessageListNavigation\", {\n  useMessageListNavigation: function (v) {\n    useMessageListNavigation = v;\n  }\n}, 15);\nvar useLegacyThreadMessageJump;\nmodule.link(\"../hooks/useLegacyThreadMessageJump\", {\n  useLegacyThreadMessageJump: function (v) {\n    useLegacyThreadMessageJump = v;\n  }\n}, 16);\nvar useLegacyThreadMessageListScrolling;\nmodule.link(\"../hooks/useLegacyThreadMessageListScrolling\", {\n  useLegacyThreadMessageListScrolling: function (v) {\n    useLegacyThreadMessageListScrolling = v;\n  }\n}, 17);\nvar useLegacyThreadMessages;\nmodule.link(\"../hooks/useLegacyThreadMessages\", {\n  useLegacyThreadMessages: function (v) {\n    useLegacyThreadMessages = v;\n  }\n}, 18);\nvar ThreadMessageItem;\nmodule.link(\"./ThreadMessageItem\", {\n  ThreadMessageItem: function (v) {\n    ThreadMessageItem = v;\n  }\n}, 19);\nvar isMessageSequential = function (current, previous, groupingRange) {\n  if (!previous) {\n    return false;\n  }\n  if (MessageTypes.isSystemMessage(current) || MessageTypes.isSystemMessage(previous)) {\n    return false;\n  }\n  if (current.groupable === false) {\n    return false;\n  }\n  if (current.u._id !== previous.u._id) {\n    return false;\n  }\n  if (current.alias !== previous.alias) {\n    return false;\n  }\n  return differenceInSeconds(current.ts, previous.ts) < groupingRange && !isMessageNewDay(current, previous);\n};\nvar ThreadMessageList = function (_ref) {\n  var mainMessage = _ref.mainMessage;\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var _useDateScroll = useDateScroll(),\n    innerRef = _useDateScroll.innerRef,\n    bubbleRef = _useDateScroll.bubbleRef,\n    listStyle = _useDateScroll.listStyle,\n    bubbleDate = _objectWithoutProperties(_useDateScroll, _excluded);\n  var _useLegacyThreadMessa = useLegacyThreadMessages(mainMessage._id),\n    messages = _useLegacyThreadMessa.messages,\n    loading = _useLegacyThreadMessa.loading;\n  var _useLegacyThreadMessa2 = useLegacyThreadMessageListScrolling(mainMessage),\n    listWrapperScrollRef = _useLegacyThreadMessa2.listWrapperRef,\n    listScrollRef = _useLegacyThreadMessa2.listRef,\n    handleScroll = _useLegacyThreadMessa2.onScroll;\n  var _useLegacyThreadMessa3 = useLegacyThreadMessageJump({\n      enabled: !loading\n    }),\n    listJumpRef = _useLegacyThreadMessa3.parentRef;\n  var hideUsernames = useUserPreference('hideUsernames');\n  var showUserAvatar = !!useUserPreference('displayAvatars');\n  var firstUnreadMessageId = useFirstUnreadMessageId();\n  var messageGroupingPeriod = Number(useSetting('Message_GroupingPeriod'));\n  var _useMessageListNaviga = useMessageListNavigation(),\n    messageListRef = _useMessageListNaviga.messageListRef;\n  var listRef = useMergedRefs(listScrollRef, messageListRef);\n  var scrollRef = useMergedRefs(innerRef, listWrapperScrollRef, listJumpRef);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: ['thread-list js-scroll-thread', hideUsernames && 'hide-usernames'].filter(isTruthy).join(' ')\n  }, /*#__PURE__*/React.createElement(BubbleDate, _extends({\n    ref: bubbleRef\n  }, bubbleDate)), /*#__PURE__*/React.createElement(CustomScrollbars, {\n    ref: scrollRef,\n    onScroll: function (args) {\n      handleScroll(args);\n    },\n    style: {\n      scrollBehavior: 'smooth',\n      overflowX: 'hidden'\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    is: \"ul\",\n    className: [listStyle, 'thread'],\n    ref: listRef,\n    \"aria-label\": t('Thread_message_list'),\n    style: {\n      scrollBehavior: 'smooth',\n      overflowX: 'hidden'\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"li\", {\n    className: \"load-more\"\n  }, /*#__PURE__*/React.createElement(LoadingMessagesIndicator, null)) : /*#__PURE__*/React.createElement(MessageListProvider, {\n    messageListRef: listJumpRef\n  }, [mainMessage].concat(_toConsumableArray(messages)).map(function (message, index, _ref2) {\n    var previous = _ref2[index - 1];\n    var sequential = isMessageSequential(message, previous, messageGroupingPeriod);\n    var newDay = isMessageNewDay(message, previous);\n    var shouldShowAsSequential = sequential && !newDay;\n    var firstUnread = firstUnreadMessageId === message._id;\n    var system = MessageTypes.isSystemMessage(message);\n    return /*#__PURE__*/React.createElement(Fragment, {\n      key: message._id\n    }, /*#__PURE__*/React.createElement(ThreadMessageItem, {\n      message: message,\n      previous: previous,\n      sequential: sequential,\n      shouldShowAsSequential: shouldShowAsSequential,\n      showUserAvatar: showUserAvatar,\n      firstUnread: firstUnread,\n      system: system\n    }));\n  })))));\n};\nmodule.exportDefault(ThreadMessageList);","map":{"version":3,"names":["_toConsumableArray","module","link","default","v","_extends","_objectWithoutProperties","Box","useMergedRefs","useSetting","useUserPreference","differenceInSeconds","React","Fragment","useTranslation","MessageTypes","isTruthy","CustomScrollbars","BubbleDate","isMessageNewDay","MessageListProvider","LoadingMessagesIndicator","useDateScroll","useFirstUnreadMessageId","useMessageListNavigation","useLegacyThreadMessageJump","useLegacyThreadMessageListScrolling","useLegacyThreadMessages","ThreadMessageItem","isMessageSequential","current","previous","groupingRange","isSystemMessage","groupable","u","_id","alias","ts","ThreadMessageList","_ref","mainMessage","_useTranslation","t","_useDateScroll","innerRef","bubbleRef","listStyle","bubbleDate","_excluded","_useLegacyThreadMessa","messages","loading","_useLegacyThreadMessa2","listWrapperScrollRef","listWrapperRef","listScrollRef","listRef","handleScroll","onScroll","_useLegacyThreadMessa3","enabled","listJumpRef","parentRef","hideUsernames","showUserAvatar","firstUnreadMessageId","messageGroupingPeriod","Number","_useMessageListNaviga","messageListRef","scrollRef","createElement","className","filter","join","ref","args","style","scrollBehavior","overflowX","is","concat","map","message","index","_ref2","sequential","newDay","shouldShowAsSequential","firstUnread","system","key","exportDefault"],"sources":["client/views/room/contextualBar/Threads/components/ThreadMessageList.tsx"],"sourcesContent":["import type { IMessage, IThreadMainMessage } from '@rocket.chat/core-typings';\nimport { Box } from '@rocket.chat/fuselage';\nimport { useMergedRefs } from '@rocket.chat/fuselage-hooks';\nimport { useSetting, useUserPreference } from '@rocket.chat/ui-contexts';\nimport { differenceInSeconds } from 'date-fns';\nimport type { ReactElement } from 'react';\nimport React, { Fragment } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { MessageTypes } from '../../../../../../app/ui-utils/client';\nimport { isTruthy } from '../../../../../../lib/isTruthy';\nimport { CustomScrollbars } from '../../../../../components/CustomScrollbars';\nimport { BubbleDate } from '../../../BubbleDate';\nimport { isMessageNewDay } from '../../../MessageList/lib/isMessageNewDay';\nimport MessageListProvider from '../../../MessageList/providers/MessageListProvider';\nimport LoadingMessagesIndicator from '../../../body/LoadingMessagesIndicator';\nimport { useDateScroll } from '../../../hooks/useDateScroll';\nimport { useFirstUnreadMessageId } from '../../../hooks/useFirstUnreadMessageId';\nimport { useMessageListNavigation } from '../../../hooks/useMessageListNavigation';\nimport { useLegacyThreadMessageJump } from '../hooks/useLegacyThreadMessageJump';\nimport { useLegacyThreadMessageListScrolling } from '../hooks/useLegacyThreadMessageListScrolling';\nimport { useLegacyThreadMessages } from '../hooks/useLegacyThreadMessages';\nimport { ThreadMessageItem } from './ThreadMessageItem';\n\nconst isMessageSequential = (current: IMessage, previous: IMessage | undefined, groupingRange: number): boolean => {\n\tif (!previous) {\n\t\treturn false;\n\t}\n\n\tif (MessageTypes.isSystemMessage(current) || MessageTypes.isSystemMessage(previous)) {\n\t\treturn false;\n\t}\n\n\tif (current.groupable === false) {\n\t\treturn false;\n\t}\n\n\tif (current.u._id !== previous.u._id) {\n\t\treturn false;\n\t}\n\n\tif (current.alias !== previous.alias) {\n\t\treturn false;\n\t}\n\treturn differenceInSeconds(current.ts, previous.ts) < groupingRange && !isMessageNewDay(current, previous);\n};\n\ntype ThreadMessageListProps = {\n\tmainMessage: IThreadMainMessage;\n};\n\nconst ThreadMessageList = ({ mainMessage }: ThreadMessageListProps): ReactElement => {\n\tconst { t } = useTranslation();\n\tconst { innerRef, bubbleRef, listStyle, ...bubbleDate } = useDateScroll();\n\n\tconst { messages, loading } = useLegacyThreadMessages(mainMessage._id);\n\tconst {\n\t\tlistWrapperRef: listWrapperScrollRef,\n\t\tlistRef: listScrollRef,\n\t\tonScroll: handleScroll,\n\t} = useLegacyThreadMessageListScrolling(mainMessage);\n\tconst { parentRef: listJumpRef } = useLegacyThreadMessageJump({ enabled: !loading });\n\n\tconst hideUsernames = useUserPreference<boolean>('hideUsernames');\n\tconst showUserAvatar = !!useUserPreference<boolean>('displayAvatars');\n\tconst firstUnreadMessageId = useFirstUnreadMessageId();\n\tconst messageGroupingPeriod = Number(useSetting('Message_GroupingPeriod'));\n\n\tconst { messageListRef } = useMessageListNavigation();\n\tconst listRef = useMergedRefs<HTMLElement | null>(listScrollRef, messageListRef);\n\n\tconst scrollRef = useMergedRefs<HTMLElement | null>(innerRef, listWrapperScrollRef, listJumpRef);\n\n\treturn (\n\t\t<div className={['thread-list js-scroll-thread', hideUsernames && 'hide-usernames'].filter(isTruthy).join(' ')}>\n\t\t\t<BubbleDate ref={bubbleRef} {...bubbleDate} />\n\t\t\t<CustomScrollbars\n\t\t\t\tref={scrollRef}\n\t\t\t\tonScroll={(args) => {\n\t\t\t\t\thandleScroll(args);\n\t\t\t\t}}\n\t\t\t\tstyle={{ scrollBehavior: 'smooth', overflowX: 'hidden' }}\n\t\t\t>\n\t\t\t\t<Box\n\t\t\t\t\tis='ul'\n\t\t\t\t\tclassName={[listStyle, 'thread']}\n\t\t\t\t\tref={listRef}\n\t\t\t\t\taria-label={t('Thread_message_list')}\n\t\t\t\t\tstyle={{ scrollBehavior: 'smooth', overflowX: 'hidden' }}\n\t\t\t\t>\n\t\t\t\t\t{loading ? (\n\t\t\t\t\t\t<li className='load-more'>\n\t\t\t\t\t\t\t<LoadingMessagesIndicator />\n\t\t\t\t\t\t</li>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<MessageListProvider messageListRef={listJumpRef}>\n\t\t\t\t\t\t\t{[mainMessage, ...messages].map((message, index, { [index - 1]: previous }) => {\n\t\t\t\t\t\t\t\tconst sequential = isMessageSequential(message, previous, messageGroupingPeriod);\n\t\t\t\t\t\t\t\tconst newDay = isMessageNewDay(message, previous);\n\t\t\t\t\t\t\t\tconst shouldShowAsSequential = sequential && !newDay;\n\n\t\t\t\t\t\t\t\tconst firstUnread = firstUnreadMessageId === message._id;\n\t\t\t\t\t\t\t\tconst system = MessageTypes.isSystemMessage(message);\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Fragment key={message._id}>\n\t\t\t\t\t\t\t\t\t\t<ThreadMessageItem\n\t\t\t\t\t\t\t\t\t\t\tmessage={message}\n\t\t\t\t\t\t\t\t\t\t\tprevious={previous}\n\t\t\t\t\t\t\t\t\t\t\tsequential={sequential}\n\t\t\t\t\t\t\t\t\t\t\tshouldShowAsSequential={shouldShowAsSequential}\n\t\t\t\t\t\t\t\t\t\t\tshowUserAvatar={showUserAvatar}\n\t\t\t\t\t\t\t\t\t\t\tfirstUnread={firstUnread}\n\t\t\t\t\t\t\t\t\t\t\tsystem={system}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</MessageListProvider>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t</CustomScrollbars>\n\t\t</div>\n\t);\n};\n\nexport default ThreadMessageList;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"c4ee78d925aa5dfa855c0f018b6a0ae167049d24"}
