{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/contacts/ContactTable.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/omnichannel/directory/contacts/ContactTable.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/contacts/ContactTable.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/directory/contacts/ContactTable.tsx","sourceRoot":"","sources":["client/views/omnichannel/directory/contacts/ContactTable.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Pagination, States, StatesAction, StatesActions, StatesIcon, StatesTitle, Box, Button } from '@rocket.chat/fuselage';\nimport { useDebouncedValue, useEffectEvent } from '@rocket.chat/fuselage-hooks';\nimport { useRoute } from '@rocket.chat/ui-contexts';\nimport { hashQueryKey } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport FilterByText from '../../../../components/FilterByText';\nimport GenericNoResults from '../../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableHeader,\n\tGenericTableCell,\n\tGenericTableBody,\n\tGenericTableRow,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingRow,\n} from '../../../../components/GenericTable';\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\nimport { useIsCallReady } from '../../../../contexts/CallContext';\nimport { useFormatDate } from '../../../../hooks/useFormatDate';\nimport { parseOutboundPhoneNumber } from '../../../../lib/voip/parseOutboundPhoneNumber';\nimport { CallDialpadButton } from '../components/CallDialpadButton';\nimport { useCurrentContacts } from './hooks/useCurrentContacts';\n\nfunction ContactTable(): ReactElement {\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\tconst { sortBy, sortDirection, setSort } = useSort<'username' | 'phone' | 'name' | 'visitorEmails.address' | 'lastChat.ts'>('username');\n\tconst isCallReady = useIsCallReady();\n\tconst [term, setTerm] = useState('');\n\n\tconst { t } = useTranslation();\n\n\tconst query = useDebouncedValue(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tterm,\n\t\t\t\tsort: `{ \"${sortBy}\": ${sortDirection === 'asc' ? 1 : -1} }`,\n\t\t\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t\t\t...(current && { offset: current }),\n\t\t\t}),\n\t\t\t[itemsPerPage, current, sortBy, sortDirection, term],\n\t\t),\n\t\t500,\n\t);\n\n\tconst directoryRoute = useRoute('omnichannel-directory');\n\tconst formatDate = useFormatDate();\n\n\tconst onButtonNewClick = useEffectEvent(() =>\n\t\tdirectoryRoute.push({\n\t\t\tpage: 'contacts',\n\t\t\tbar: 'new',\n\t\t}),\n\t);\n\n\tconst onRowClick = useEffectEvent(\n\t\t(id) => (): void =>\n\t\t\tdirectoryRoute.push({\n\t\t\t\tpage: 'contacts',\n\t\t\t\tid,\n\t\t\t\tbar: 'info',\n\t\t\t}),\n\t);\n\n\tconst { data, isLoading, isError, isSuccess, refetch } = useCurrentContacts(query);\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell key='username' direction={sortDirection} active={sortBy === 'username'} onClick={setSort} sort='username'>\n\t\t\t\t{t('Username')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name'>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='phone' direction={sortDirection} active={sortBy === 'phone'} onClick={setSort} sort='phone'>\n\t\t\t\t{t('Phone')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='email'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'visitorEmails.address'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='visitorEmails.address'\n\t\t\t>\n\t\t\t\t{t('Email')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='lastchat'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'lastChat.ts'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='lastChat.ts'\n\t\t\t>\n\t\t\t\t{t('Last_Chat')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='call' width={44} />\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{((isSuccess && data?.visitors.length > 0) || queryHasChanged) && (\n\t\t\t\t<FilterByText value={term} onChange={(event) => setTerm(event.target.value)}>\n\t\t\t\t\t<Button onClick={onButtonNewClick} primary>\n\t\t\t\t\t\t{t('New_contact')}\n\t\t\t\t\t</Button>\n\t\t\t\t</FilterByText>\n\t\t\t)}\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingRow cols={6} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data?.visitors.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t{isSuccess && data?.visitors.length === 0 && !queryHasChanged && (\n\t\t\t\t<GenericNoResults\n\t\t\t\t\ticon='user-plus'\n\t\t\t\t\ttitle={t('No_contacts_yet')}\n\t\t\t\t\tdescription={t('No_contacts_yet_description')}\n\t\t\t\t\tbuttonTitle={t('New_contact')}\n\t\t\t\t\tbuttonAction={onButtonNewClick}\n\t\t\t\t\tlinkHref='https://go.rocket.chat/i/omnichannel-docs'\n\t\t\t\t\tlinkText={t('Learn_more_about_contacts')}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isSuccess && data?.visitors.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{data?.visitors.map(({ _id, username, fname, name, visitorEmails, phone, lastChat }) => {\n\t\t\t\t\t\t\t\tconst phoneNumber = (phone?.length && phone[0].phoneNumber) || '';\n\t\t\t\t\t\t\t\tconst visitorEmail = visitorEmails?.length && visitorEmails[0].address;\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<GenericTableRow\n\t\t\t\t\t\t\t\t\t\taction\n\t\t\t\t\t\t\t\t\t\tkey={_id}\n\t\t\t\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\t\t\t\trole='link'\n\t\t\t\t\t\t\t\t\t\theight='40px'\n\t\t\t\t\t\t\t\t\t\tqa-user-id={_id}\n\t\t\t\t\t\t\t\t\t\trcx-show-call-button-on-hover\n\t\t\t\t\t\t\t\t\t\tonClick={onRowClick(_id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{username}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{parseOutboundPhoneNumber(fname || name)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{parseOutboundPhoneNumber(phoneNumber)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{visitorEmail}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{lastChat && formatDate(lastChat.ts)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell>{isCallReady && <CallDialpadButton phoneNumber={phoneNumber} />}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t</GenericTableRow>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total}\n\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{isError && (\n\t\t\t\t<Box mbs={20}>\n\t\t\t\t\t<States>\n\t\t\t\t\t\t<StatesIcon variation='danger' name='circle-exclamation' />\n\t\t\t\t\t\t<StatesTitle>{t('Connection_error')}</StatesTitle>\n\t\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t\t<StatesAction icon='reload' onClick={() => refetch()}>\n\t\t\t\t\t\t\t\t{t('Reload_page')}\n\t\t\t\t\t\t\t</StatesAction>\n\t\t\t\t\t\t</StatesActions>\n\t\t\t\t\t</States>\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default ContactTable;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/contacts/ContactTable.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/omnichannel/directory/contacts/ContactTable.tsx","inputSourceMap":{"version":3,"file":"client/views/omnichannel/directory/contacts/ContactTable.tsx","sourceRoot":"","sources":["client/views/omnichannel/directory/contacts/ContactTable.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Pagination, States, StatesAction, StatesActions, StatesIcon, StatesTitle, Box, Button } from '@rocket.chat/fuselage';\nimport { useDebouncedValue, useEffectEvent } from '@rocket.chat/fuselage-hooks';\nimport { useRoute } from '@rocket.chat/ui-contexts';\nimport { hashQueryKey } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport FilterByText from '../../../../components/FilterByText';\nimport GenericNoResults from '../../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableHeader,\n\tGenericTableCell,\n\tGenericTableBody,\n\tGenericTableRow,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingRow,\n} from '../../../../components/GenericTable';\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\nimport { useIsCallReady } from '../../../../contexts/CallContext';\nimport { useFormatDate } from '../../../../hooks/useFormatDate';\nimport { parseOutboundPhoneNumber } from '../../../../lib/voip/parseOutboundPhoneNumber';\nimport { CallDialpadButton } from '../components/CallDialpadButton';\nimport { useCurrentContacts } from './hooks/useCurrentContacts';\n\nfunction ContactTable(): ReactElement {\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\tconst { sortBy, sortDirection, setSort } = useSort<'username' | 'phone' | 'name' | 'visitorEmails.address' | 'lastChat.ts'>('username');\n\tconst isCallReady = useIsCallReady();\n\tconst [term, setTerm] = useState('');\n\n\tconst { t } = useTranslation();\n\n\tconst query = useDebouncedValue(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tterm,\n\t\t\t\tsort: `{ \"${sortBy}\": ${sortDirection === 'asc' ? 1 : -1} }`,\n\t\t\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t\t\t...(current && { offset: current }),\n\t\t\t}),\n\t\t\t[itemsPerPage, current, sortBy, sortDirection, term],\n\t\t),\n\t\t500,\n\t);\n\n\tconst directoryRoute = useRoute('omnichannel-directory');\n\tconst formatDate = useFormatDate();\n\n\tconst onButtonNewClick = useEffectEvent(() =>\n\t\tdirectoryRoute.push({\n\t\t\tpage: 'contacts',\n\t\t\tbar: 'new',\n\t\t}),\n\t);\n\n\tconst onRowClick = useEffectEvent(\n\t\t(id) => (): void =>\n\t\t\tdirectoryRoute.push({\n\t\t\t\tpage: 'contacts',\n\t\t\t\tid,\n\t\t\t\tbar: 'info',\n\t\t\t}),\n\t);\n\n\tconst { data, isLoading, isError, isSuccess, refetch } = useCurrentContacts(query);\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell key='username' direction={sortDirection} active={sortBy === 'username'} onClick={setSort} sort='username'>\n\t\t\t\t{t('Username')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name'>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='phone' direction={sortDirection} active={sortBy === 'phone'} onClick={setSort} sort='phone'>\n\t\t\t\t{t('Phone')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='email'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'visitorEmails.address'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='visitorEmails.address'\n\t\t\t>\n\t\t\t\t{t('Email')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='lastchat'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'lastChat.ts'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='lastChat.ts'\n\t\t\t>\n\t\t\t\t{t('Last_Chat')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='call' width={44} />\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{((isSuccess && data?.visitors.length > 0) || queryHasChanged) && (\n\t\t\t\t<FilterByText value={term} onChange={(event) => setTerm(event.target.value)}>\n\t\t\t\t\t<Button onClick={onButtonNewClick} primary>\n\t\t\t\t\t\t{t('New_contact')}\n\t\t\t\t\t</Button>\n\t\t\t\t</FilterByText>\n\t\t\t)}\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingRow cols={6} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data?.visitors.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t{isSuccess && data?.visitors.length === 0 && !queryHasChanged && (\n\t\t\t\t<GenericNoResults\n\t\t\t\t\ticon='user-plus'\n\t\t\t\t\ttitle={t('No_contacts_yet')}\n\t\t\t\t\tdescription={t('No_contacts_yet_description')}\n\t\t\t\t\tbuttonTitle={t('New_contact')}\n\t\t\t\t\tbuttonAction={onButtonNewClick}\n\t\t\t\t\tlinkHref='https://go.rocket.chat/i/omnichannel-docs'\n\t\t\t\t\tlinkText={t('Learn_more_about_contacts')}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isSuccess && data?.visitors.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{data?.visitors.map(({ _id, username, fname, name, visitorEmails, phone, lastChat }) => {\n\t\t\t\t\t\t\t\tconst phoneNumber = (phone?.length && phone[0].phoneNumber) || '';\n\t\t\t\t\t\t\t\tconst visitorEmail = visitorEmails?.length && visitorEmails[0].address;\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<GenericTableRow\n\t\t\t\t\t\t\t\t\t\taction\n\t\t\t\t\t\t\t\t\t\tkey={_id}\n\t\t\t\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\t\t\t\trole='link'\n\t\t\t\t\t\t\t\t\t\theight='40px'\n\t\t\t\t\t\t\t\t\t\tqa-user-id={_id}\n\t\t\t\t\t\t\t\t\t\trcx-show-call-button-on-hover\n\t\t\t\t\t\t\t\t\t\tonClick={onRowClick(_id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{username}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{parseOutboundPhoneNumber(fname || name)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{parseOutboundPhoneNumber(phoneNumber)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{visitorEmail}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{lastChat && formatDate(lastChat.ts)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell>{isCallReady && <CallDialpadButton phoneNumber={phoneNumber} />}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t</GenericTableRow>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total}\n\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{isError && (\n\t\t\t\t<Box mbs={20}>\n\t\t\t\t\t<States>\n\t\t\t\t\t\t<StatesIcon variation='danger' name='circle-exclamation' />\n\t\t\t\t\t\t<StatesTitle>{t('Connection_error')}</StatesTitle>\n\t\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t\t<StatesAction icon='reload' onClick={() => refetch()}>\n\t\t\t\t\t\t\t\t{t('Reload_page')}\n\t\t\t\t\t\t\t</StatesAction>\n\t\t\t\t\t\t</StatesActions>\n\t\t\t\t\t</States>\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default ContactTable;\n"]}}},"code":"const _excluded = [\"current\", \"itemsPerPage\", \"setItemsPerPage\", \"setCurrent\"];\nlet _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 1);\nlet _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n}, 2);\nlet Pagination, States, StatesAction, StatesActions, StatesIcon, StatesTitle, Box, Button;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Pagination(v) {\n    Pagination = v;\n  },\n  States(v) {\n    States = v;\n  },\n  StatesAction(v) {\n    StatesAction = v;\n  },\n  StatesActions(v) {\n    StatesActions = v;\n  },\n  StatesIcon(v) {\n    StatesIcon = v;\n  },\n  StatesTitle(v) {\n    StatesTitle = v;\n  },\n  Box(v) {\n    Box = v;\n  },\n  Button(v) {\n    Button = v;\n  }\n}, 0);\nlet useDebouncedValue, useEffectEvent;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useDebouncedValue(v) {\n    useDebouncedValue = v;\n  },\n  useEffectEvent(v) {\n    useEffectEvent = v;\n  }\n}, 1);\nlet useRoute;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useRoute(v) {\n    useRoute = v;\n  }\n}, 2);\nlet hashQueryKey;\nmodule.link(\"@tanstack/react-query\", {\n  hashQueryKey(v) {\n    hashQueryKey = v;\n  }\n}, 3);\nlet React, useMemo, useState;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useMemo(v) {\n    useMemo = v;\n  },\n  useState(v) {\n    useState = v;\n  }\n}, 4);\nlet useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 5);\nlet FilterByText;\nmodule.link(\"../../../../components/FilterByText\", {\n  default(v) {\n    FilterByText = v;\n  }\n}, 6);\nlet GenericNoResults;\nmodule.link(\"../../../../components/GenericNoResults\", {\n  default(v) {\n    GenericNoResults = v;\n  }\n}, 7);\nlet GenericTable, GenericTableHeader, GenericTableCell, GenericTableBody, GenericTableRow, GenericTableHeaderCell, GenericTableLoadingRow;\nmodule.link(\"../../../../components/GenericTable\", {\n  GenericTable(v) {\n    GenericTable = v;\n  },\n  GenericTableHeader(v) {\n    GenericTableHeader = v;\n  },\n  GenericTableCell(v) {\n    GenericTableCell = v;\n  },\n  GenericTableBody(v) {\n    GenericTableBody = v;\n  },\n  GenericTableRow(v) {\n    GenericTableRow = v;\n  },\n  GenericTableHeaderCell(v) {\n    GenericTableHeaderCell = v;\n  },\n  GenericTableLoadingRow(v) {\n    GenericTableLoadingRow = v;\n  }\n}, 8);\nlet usePagination;\nmodule.link(\"../../../../components/GenericTable/hooks/usePagination\", {\n  usePagination(v) {\n    usePagination = v;\n  }\n}, 9);\nlet useSort;\nmodule.link(\"../../../../components/GenericTable/hooks/useSort\", {\n  useSort(v) {\n    useSort = v;\n  }\n}, 10);\nlet useIsCallReady;\nmodule.link(\"../../../../contexts/CallContext\", {\n  useIsCallReady(v) {\n    useIsCallReady = v;\n  }\n}, 11);\nlet useFormatDate;\nmodule.link(\"../../../../hooks/useFormatDate\", {\n  useFormatDate(v) {\n    useFormatDate = v;\n  }\n}, 12);\nlet parseOutboundPhoneNumber;\nmodule.link(\"../../../../lib/voip/parseOutboundPhoneNumber\", {\n  parseOutboundPhoneNumber(v) {\n    parseOutboundPhoneNumber = v;\n  }\n}, 13);\nlet CallDialpadButton;\nmodule.link(\"../components/CallDialpadButton\", {\n  CallDialpadButton(v) {\n    CallDialpadButton = v;\n  }\n}, 14);\nlet useCurrentContacts;\nmodule.link(\"./hooks/useCurrentContacts\", {\n  useCurrentContacts(v) {\n    useCurrentContacts = v;\n  }\n}, 15);\nfunction ContactTable() {\n  const _usePagination = usePagination(),\n    {\n      current,\n      itemsPerPage,\n      setItemsPerPage,\n      setCurrent\n    } = _usePagination,\n    paginationProps = _objectWithoutProperties(_usePagination, _excluded);\n  const {\n    sortBy,\n    sortDirection,\n    setSort\n  } = useSort('username');\n  const isCallReady = useIsCallReady();\n  const [term, setTerm] = useState('');\n  const {\n    t\n  } = useTranslation();\n  const query = useDebouncedValue(useMemo(() => _objectSpread(_objectSpread({\n    term,\n    sort: \"{ \\\"\".concat(sortBy, \"\\\": \").concat(sortDirection === 'asc' ? 1 : -1, \" }\")\n  }, itemsPerPage && {\n    count: itemsPerPage\n  }), current && {\n    offset: current\n  }), [itemsPerPage, current, sortBy, sortDirection, term]), 500);\n  const directoryRoute = useRoute('omnichannel-directory');\n  const formatDate = useFormatDate();\n  const onButtonNewClick = useEffectEvent(() => directoryRoute.push({\n    page: 'contacts',\n    bar: 'new'\n  }));\n  const onRowClick = useEffectEvent(id => () => directoryRoute.push({\n    page: 'contacts',\n    id,\n    bar: 'info'\n  }));\n  const {\n    data,\n    isLoading,\n    isError,\n    isSuccess,\n    refetch\n  } = useCurrentContacts(query);\n  const [defaultQuery] = useState(hashQueryKey([query]));\n  const queryHasChanged = defaultQuery !== hashQueryKey([query]);\n  const headers = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"username\",\n    direction: sortDirection,\n    active: sortBy === 'username',\n    onClick: setSort,\n    sort: \"username\"\n  }, t('Username')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"name\",\n    direction: sortDirection,\n    active: sortBy === 'name',\n    onClick: setSort,\n    sort: \"name\"\n  }, t('Name')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"phone\",\n    direction: sortDirection,\n    active: sortBy === 'phone',\n    onClick: setSort,\n    sort: \"phone\"\n  }, t('Phone')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"email\",\n    direction: sortDirection,\n    active: sortBy === 'visitorEmails.address',\n    onClick: setSort,\n    sort: \"visitorEmails.address\"\n  }, t('Email')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"lastchat\",\n    direction: sortDirection,\n    active: sortBy === 'lastChat.ts',\n    onClick: setSort,\n    sort: \"lastChat.ts\"\n  }, t('Last_Chat')), /*#__PURE__*/React.createElement(GenericTableHeaderCell, {\n    key: \"call\",\n    width: 44\n  }));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, (isSuccess && (data === null || data === void 0 ? void 0 : data.visitors.length) > 0 || queryHasChanged) && /*#__PURE__*/React.createElement(FilterByText, {\n    value: term,\n    onChange: event => setTerm(event.target.value)\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onButtonNewClick,\n    primary: true\n  }, t('New_contact'))), isLoading && /*#__PURE__*/React.createElement(GenericTable, null, /*#__PURE__*/React.createElement(GenericTableHeader, null, headers), /*#__PURE__*/React.createElement(GenericTableBody, null, /*#__PURE__*/React.createElement(GenericTableLoadingRow, {\n    cols: 6\n  }))), isSuccess && (data === null || data === void 0 ? void 0 : data.visitors.length) === 0 && queryHasChanged && /*#__PURE__*/React.createElement(GenericNoResults, null), isSuccess && (data === null || data === void 0 ? void 0 : data.visitors.length) === 0 && !queryHasChanged && /*#__PURE__*/React.createElement(GenericNoResults, {\n    icon: \"user-plus\",\n    title: t('No_contacts_yet'),\n    description: t('No_contacts_yet_description'),\n    buttonTitle: t('New_contact'),\n    buttonAction: onButtonNewClick,\n    linkHref: \"https://go.rocket.chat/i/omnichannel-docs\",\n    linkText: t('Learn_more_about_contacts')\n  }), isSuccess && (data === null || data === void 0 ? void 0 : data.visitors.length) > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(GenericTable, null, /*#__PURE__*/React.createElement(GenericTableHeader, null, headers), /*#__PURE__*/React.createElement(GenericTableBody, null, data === null || data === void 0 ? void 0 : data.visitors.map(_ref => {\n    let {\n      _id,\n      username,\n      fname,\n      name,\n      visitorEmails,\n      phone,\n      lastChat\n    } = _ref;\n    const phoneNumber = (phone === null || phone === void 0 ? void 0 : phone.length) && phone[0].phoneNumber || '';\n    const visitorEmail = (visitorEmails === null || visitorEmails === void 0 ? void 0 : visitorEmails.length) && visitorEmails[0].address;\n    return /*#__PURE__*/React.createElement(GenericTableRow, {\n      action: true,\n      key: _id,\n      tabIndex: 0,\n      role: \"link\",\n      height: \"40px\",\n      \"qa-user-id\": _id,\n      \"rcx-show-call-button-on-hover\": true,\n      onClick: onRowClick(_id)\n    }, /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true\n    }, username), /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true\n    }, parseOutboundPhoneNumber(fname || name)), /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true\n    }, parseOutboundPhoneNumber(phoneNumber)), /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true\n    }, visitorEmail), /*#__PURE__*/React.createElement(GenericTableCell, {\n      withTruncatedText: true\n    }, lastChat && formatDate(lastChat.ts)), /*#__PURE__*/React.createElement(GenericTableCell, null, isCallReady && /*#__PURE__*/React.createElement(CallDialpadButton, {\n      phoneNumber: phoneNumber\n    })));\n  }))), /*#__PURE__*/React.createElement(Pagination, _extends({\n    divider: true,\n    current: current,\n    itemsPerPage: itemsPerPage,\n    count: data === null || data === void 0 ? void 0 : data.total,\n    onSetItemsPerPage: setItemsPerPage,\n    onSetCurrent: setCurrent\n  }, paginationProps))), isError && /*#__PURE__*/React.createElement(Box, {\n    mbs: 20\n  }, /*#__PURE__*/React.createElement(States, null, /*#__PURE__*/React.createElement(StatesIcon, {\n    variation: \"danger\",\n    name: \"circle-exclamation\"\n  }), /*#__PURE__*/React.createElement(StatesTitle, null, t('Connection_error')), /*#__PURE__*/React.createElement(StatesActions, null, /*#__PURE__*/React.createElement(StatesAction, {\n    icon: \"reload\",\n    onClick: () => refetch()\n  }, t('Reload_page'))))));\n}\nmodule.exportDefault(ContactTable);","map":{"version":3,"names":["_extends","module","link","default","v","_objectSpread","_objectWithoutProperties","Pagination","States","StatesAction","StatesActions","StatesIcon","StatesTitle","Box","Button","useDebouncedValue","useEffectEvent","useRoute","hashQueryKey","React","useMemo","useState","useTranslation","FilterByText","GenericNoResults","GenericTable","GenericTableHeader","GenericTableCell","GenericTableBody","GenericTableRow","GenericTableHeaderCell","GenericTableLoadingRow","usePagination","useSort","useIsCallReady","useFormatDate","parseOutboundPhoneNumber","CallDialpadButton","useCurrentContacts","ContactTable","_usePagination","current","itemsPerPage","setItemsPerPage","setCurrent","paginationProps","_excluded","sortBy","sortDirection","setSort","isCallReady","term","setTerm","t","query","sort","concat","count","offset","directoryRoute","formatDate","onButtonNewClick","push","page","bar","onRowClick","id","data","isLoading","isError","isSuccess","refetch","defaultQuery","queryHasChanged","headers","createElement","Fragment","key","direction","active","onClick","width","visitors","length","value","onChange","event","target","primary","cols","icon","title","description","buttonTitle","buttonAction","linkHref","linkText","map","_ref","_id","username","fname","name","visitorEmails","phone","lastChat","phoneNumber","visitorEmail","address","action","tabIndex","role","height","withTruncatedText","ts","divider","total","onSetItemsPerPage","onSetCurrent","mbs","variation","exportDefault"],"sources":["client/views/omnichannel/directory/contacts/ContactTable.tsx"],"sourcesContent":["import { Pagination, States, StatesAction, StatesActions, StatesIcon, StatesTitle, Box, Button } from '@rocket.chat/fuselage';\nimport { useDebouncedValue, useEffectEvent } from '@rocket.chat/fuselage-hooks';\nimport { useRoute } from '@rocket.chat/ui-contexts';\nimport { hashQueryKey } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport FilterByText from '../../../../components/FilterByText';\nimport GenericNoResults from '../../../../components/GenericNoResults';\nimport {\n\tGenericTable,\n\tGenericTableHeader,\n\tGenericTableCell,\n\tGenericTableBody,\n\tGenericTableRow,\n\tGenericTableHeaderCell,\n\tGenericTableLoadingRow,\n} from '../../../../components/GenericTable';\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\nimport { useIsCallReady } from '../../../../contexts/CallContext';\nimport { useFormatDate } from '../../../../hooks/useFormatDate';\nimport { parseOutboundPhoneNumber } from '../../../../lib/voip/parseOutboundPhoneNumber';\nimport { CallDialpadButton } from '../components/CallDialpadButton';\nimport { useCurrentContacts } from './hooks/useCurrentContacts';\n\nfunction ContactTable(): ReactElement {\n\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\n\tconst { sortBy, sortDirection, setSort } = useSort<'username' | 'phone' | 'name' | 'visitorEmails.address' | 'lastChat.ts'>('username');\n\tconst isCallReady = useIsCallReady();\n\tconst [term, setTerm] = useState('');\n\n\tconst { t } = useTranslation();\n\n\tconst query = useDebouncedValue(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tterm,\n\t\t\t\tsort: `{ \"${sortBy}\": ${sortDirection === 'asc' ? 1 : -1} }`,\n\t\t\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t\t\t...(current && { offset: current }),\n\t\t\t}),\n\t\t\t[itemsPerPage, current, sortBy, sortDirection, term],\n\t\t),\n\t\t500,\n\t);\n\n\tconst directoryRoute = useRoute('omnichannel-directory');\n\tconst formatDate = useFormatDate();\n\n\tconst onButtonNewClick = useEffectEvent(() =>\n\t\tdirectoryRoute.push({\n\t\t\tpage: 'contacts',\n\t\t\tbar: 'new',\n\t\t}),\n\t);\n\n\tconst onRowClick = useEffectEvent(\n\t\t(id) => (): void =>\n\t\t\tdirectoryRoute.push({\n\t\t\t\tpage: 'contacts',\n\t\t\t\tid,\n\t\t\t\tbar: 'info',\n\t\t\t}),\n\t);\n\n\tconst { data, isLoading, isError, isSuccess, refetch } = useCurrentContacts(query);\n\n\tconst [defaultQuery] = useState(hashQueryKey([query]));\n\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\n\n\tconst headers = (\n\t\t<>\n\t\t\t<GenericTableHeaderCell key='username' direction={sortDirection} active={sortBy === 'username'} onClick={setSort} sort='username'>\n\t\t\t\t{t('Username')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name'>\n\t\t\t\t{t('Name')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='phone' direction={sortDirection} active={sortBy === 'phone'} onClick={setSort} sort='phone'>\n\t\t\t\t{t('Phone')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='email'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'visitorEmails.address'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='visitorEmails.address'\n\t\t\t>\n\t\t\t\t{t('Email')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell\n\t\t\t\tkey='lastchat'\n\t\t\t\tdirection={sortDirection}\n\t\t\t\tactive={sortBy === 'lastChat.ts'}\n\t\t\t\tonClick={setSort}\n\t\t\t\tsort='lastChat.ts'\n\t\t\t>\n\t\t\t\t{t('Last_Chat')}\n\t\t\t</GenericTableHeaderCell>\n\t\t\t<GenericTableHeaderCell key='call' width={44} />\n\t\t</>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{((isSuccess && data?.visitors.length > 0) || queryHasChanged) && (\n\t\t\t\t<FilterByText value={term} onChange={(event) => setTerm(event.target.value)}>\n\t\t\t\t\t<Button onClick={onButtonNewClick} primary>\n\t\t\t\t\t\t{t('New_contact')}\n\t\t\t\t\t</Button>\n\t\t\t\t</FilterByText>\n\t\t\t)}\n\t\t\t{isLoading && (\n\t\t\t\t<GenericTable>\n\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t<GenericTableLoadingRow cols={6} />\n\t\t\t\t\t</GenericTableBody>\n\t\t\t\t</GenericTable>\n\t\t\t)}\n\t\t\t{isSuccess && data?.visitors.length === 0 && queryHasChanged && <GenericNoResults />}\n\t\t\t{isSuccess && data?.visitors.length === 0 && !queryHasChanged && (\n\t\t\t\t<GenericNoResults\n\t\t\t\t\ticon='user-plus'\n\t\t\t\t\ttitle={t('No_contacts_yet')}\n\t\t\t\t\tdescription={t('No_contacts_yet_description')}\n\t\t\t\t\tbuttonTitle={t('New_contact')}\n\t\t\t\t\tbuttonAction={onButtonNewClick}\n\t\t\t\t\tlinkHref='https://go.rocket.chat/i/omnichannel-docs'\n\t\t\t\t\tlinkText={t('Learn_more_about_contacts')}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{isSuccess && data?.visitors.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable>\n\t\t\t\t\t\t<GenericTableHeader>{headers}</GenericTableHeader>\n\t\t\t\t\t\t<GenericTableBody>\n\t\t\t\t\t\t\t{data?.visitors.map(({ _id, username, fname, name, visitorEmails, phone, lastChat }) => {\n\t\t\t\t\t\t\t\tconst phoneNumber = (phone?.length && phone[0].phoneNumber) || '';\n\t\t\t\t\t\t\t\tconst visitorEmail = visitorEmails?.length && visitorEmails[0].address;\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<GenericTableRow\n\t\t\t\t\t\t\t\t\t\taction\n\t\t\t\t\t\t\t\t\t\tkey={_id}\n\t\t\t\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\t\t\t\trole='link'\n\t\t\t\t\t\t\t\t\t\theight='40px'\n\t\t\t\t\t\t\t\t\t\tqa-user-id={_id}\n\t\t\t\t\t\t\t\t\t\trcx-show-call-button-on-hover\n\t\t\t\t\t\t\t\t\t\tonClick={onRowClick(_id)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{username}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{parseOutboundPhoneNumber(fname || name)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{parseOutboundPhoneNumber(phoneNumber)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{visitorEmail}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell withTruncatedText>{lastChat && formatDate(lastChat.ts)}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t\t<GenericTableCell>{isCallReady && <CallDialpadButton phoneNumber={phoneNumber} />}</GenericTableCell>\n\t\t\t\t\t\t\t\t\t</GenericTableRow>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</GenericTableBody>\n\t\t\t\t\t</GenericTable>\n\t\t\t\t\t<Pagination\n\t\t\t\t\t\tdivider\n\t\t\t\t\t\tcurrent={current}\n\t\t\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\t\t\tcount={data?.total}\n\t\t\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\t\t\t{...paginationProps}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{isError && (\n\t\t\t\t<Box mbs={20}>\n\t\t\t\t\t<States>\n\t\t\t\t\t\t<StatesIcon variation='danger' name='circle-exclamation' />\n\t\t\t\t\t\t<StatesTitle>{t('Connection_error')}</StatesTitle>\n\t\t\t\t\t\t<StatesActions>\n\t\t\t\t\t\t\t<StatesAction icon='reload' onClick={() => refetch()}>\n\t\t\t\t\t\t\t\t{t('Reload_page')}\n\t\t\t\t\t\t\t</StatesAction>\n\t\t\t\t\t\t</StatesActions>\n\t\t\t\t\t</States>\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default ContactTable;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"7cc24277a748fb639ae7391001d046590b9b7f7c"}
