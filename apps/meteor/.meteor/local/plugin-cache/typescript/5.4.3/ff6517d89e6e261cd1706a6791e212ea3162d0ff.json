{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/message/toolbar/MessageToolbar.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/components/message/toolbar/MessageToolbar.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/message/toolbar/MessageToolbar.tsx","inputSourceMap":{"version":3,"file":"client/components/message/toolbar/MessageToolbar.tsx","sourceRoot":"","sources":["client/components/message/toolbar/MessageToolbar.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useToolbar } from '@react-aria/toolbar';\nimport type { IMessage, IRoom, ISubscription, ITranslatedMessage } from '@rocket.chat/core-typings';\nimport { isThreadMessage, isRoomFederated, isVideoConfMessage, isE2EEMessage } from '@rocket.chat/core-typings';\nimport { MessageToolbar as FuselageMessageToolbar, MessageToolbarItem } from '@rocket.chat/fuselage';\nimport { useFeaturePreview } from '@rocket.chat/ui-client';\nimport { useUser, useSettings, useTranslation, useMethod, useLayoutHiddenActions } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React, { memo, useMemo, useRef } from 'react';\n\nimport type { MessageActionContext } from '../../../../app/ui-utils/client/lib/MessageAction';\nimport { MessageAction } from '../../../../app/ui-utils/client/lib/MessageAction';\nimport { useEmojiPickerData } from '../../../contexts/EmojiPickerContext';\nimport { useMessageActionAppsActionButtons } from '../../../hooks/useAppActionButtons';\nimport { useEmbeddedLayout } from '../../../hooks/useEmbeddedLayout';\nimport EmojiElement from '../../../views/composer/EmojiPicker/EmojiElement';\nimport { useIsSelecting } from '../../../views/room/MessageList/contexts/SelectedMessagesContext';\nimport { useAutoTranslate } from '../../../views/room/MessageList/hooks/useAutoTranslate';\nimport { useChat } from '../../../views/room/contexts/ChatContext';\nimport { useRoomToolbox } from '../../../views/room/contexts/RoomToolboxContext';\nimport MessageActionMenu from './MessageActionMenu';\nimport MessageToolbarStarsActionMenu from './MessageToolbarStarsActionMenu';\nimport { useWebDAVMessageAction } from './useWebDAVMessageAction';\n\nconst getMessageContext = (message: IMessage, room: IRoom, context?: MessageActionContext): MessageActionContext => {\n\tif (context) {\n\t\treturn context;\n\t}\n\n\tif (isVideoConfMessage(message)) {\n\t\treturn 'videoconf';\n\t}\n\n\tif (isRoomFederated(room)) {\n\t\treturn 'federated';\n\t}\n\n\tif (isThreadMessage(message)) {\n\t\treturn 'threads';\n\t}\n\n\treturn 'message';\n};\n\ntype MessageToolbarProps = {\n\tmessage: IMessage & Partial<ITranslatedMessage>;\n\tmessageContext?: MessageActionContext;\n\troom: IRoom;\n\tsubscription?: ISubscription;\n\tonChangeMenuVisibility: (visible: boolean) => void;\n} & ComponentProps<typeof FuselageMessageToolbar>;\n\nconst MessageToolbar = ({\n\tmessage,\n\tmessageContext,\n\troom,\n\tsubscription,\n\tonChangeMenuVisibility,\n\t...props\n}: MessageToolbarProps): ReactElement | null => {\n\tconst t = useTranslation();\n\tconst user = useUser() ?? undefined;\n\tconst settings = useSettings();\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\n\tconst toolbarRef = useRef(null);\n\tconst { toolbarProps } = useToolbar(props, toolbarRef);\n\n\tconst quickReactionsEnabled = useFeaturePreview('quickReactions');\n\n\tconst setReaction = useMethod('setReaction');\n\n\tconst context = getMessageContext(message, room, messageContext);\n\n\tconst mapSettings = useMemo(() => Object.fromEntries(settings.map((setting) => [setting._id, setting.value])), [settings]);\n\n\tconst chat = useChat();\n\tconst { quickReactions, addRecentEmoji } = useEmojiPickerData();\n\n\tconst actionButtonApps = useMessageActionAppsActionButtons(context);\n\n\tconst starsAction = useMessageActionAppsActionButtons(context, 'ai');\n\n\tconst { messageToolbox: hiddenActions } = useLayoutHiddenActions();\n\n\t// TODO: move this to another place\n\tuseWebDAVMessageAction();\n\n\tconst actionsQueryResult = useQuery(['rooms', room._id, 'messages', message._id, 'actions'] as const, async () => {\n\t\tconst props = { message, room, user, subscription, settings: mapSettings, chat };\n\n\t\tconst toolboxItems = await MessageAction.getAll(props, context, 'message');\n\t\tconst menuItems = await MessageAction.getAll(props, context, 'menu');\n\n\t\treturn {\n\t\t\tmessage: toolboxItems.filter((action) => !hiddenActions.includes(action.id)),\n\t\t\tmenu: menuItems.filter((action) => !(isLayoutEmbedded && action.id === 'reply-directly') && !hiddenActions.includes(action.id)),\n\t\t};\n\t});\n\n\tconst toolbox = useRoomToolbox();\n\n\tconst selecting = useIsSelecting();\n\n\tconst autoTranslateOptions = useAutoTranslate(subscription);\n\n\tif (selecting || (!actionsQueryResult.data?.message.length && !actionsQueryResult.data?.menu.length)) {\n\t\treturn null;\n\t}\n\n\tconst isReactionAllowed = actionsQueryResult.data?.message.find(({ id }) => id === 'reaction-message');\n\n\tconst handleSetReaction = (emoji: string) => {\n\t\tsetReaction(`:${emoji}:`, message._id);\n\t\taddRecentEmoji(emoji);\n\t};\n\n\treturn (\n\t\t<FuselageMessageToolbar ref={toolbarRef} {...toolbarProps} aria-label={t('Message_actions')} {...props}>\n\t\t\t{quickReactionsEnabled &&\n\t\t\t\tisReactionAllowed &&\n\t\t\t\tquickReactions.slice(0, 3).map(({ emoji, image }) => {\n\t\t\t\t\treturn <EmojiElement small key={emoji} title={emoji} emoji={emoji} image={image} onClick={() => handleSetReaction(emoji)} />;\n\t\t\t\t})}\n\t\t\t{actionsQueryResult.isSuccess &&\n\t\t\t\tactionsQueryResult.data.message.map((action) => (\n\t\t\t\t\t<MessageToolbarItem\n\t\t\t\t\t\tonClick={(e): void => action.action(e, { message, tabbar: toolbox, room, chat, autoTranslateOptions })}\n\t\t\t\t\t\tkey={action.id}\n\t\t\t\t\t\ticon={action.icon}\n\t\t\t\t\t\ttitle={\n\t\t\t\t\t\t\taction?.disabled?.({ message, room, user, subscription, settings: mapSettings, chat, context })\n\t\t\t\t\t\t\t\t? t('Action_not_available_encrypted_content', { action: t(action.label) })\n\t\t\t\t\t\t\t\t: t(action.label)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdata-qa-id={action.label}\n\t\t\t\t\t\tdata-qa-type='message-action-menu'\n\t\t\t\t\t\tdisabled={action?.disabled?.({ message, room, user, subscription, settings: mapSettings, chat, context })}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t{starsAction.data && starsAction.data.length > 0 && (\n\t\t\t\t<MessageToolbarStarsActionMenu\n\t\t\t\t\toptions={starsAction.data.map((action) => ({\n\t\t\t\t\t\t...action,\n\t\t\t\t\t\taction: (e) => action.action(e, { message, tabbar: toolbox, room, chat, autoTranslateOptions }),\n\t\t\t\t\t}))}\n\t\t\t\t\tonChangeMenuVisibility={onChangeMenuVisibility}\n\t\t\t\t\tdata-qa-type='message-action-stars-menu-options'\n\t\t\t\t\tcontext={{ message, room, user, subscription, settings: mapSettings, chat, context }}\n\t\t\t\t\tisMessageEncrypted={isE2EEMessage(message)}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{actionsQueryResult.isSuccess && actionsQueryResult.data.menu.length > 0 && (\n\t\t\t\t<MessageActionMenu\n\t\t\t\t\toptions={[...actionsQueryResult.data?.menu, ...(actionButtonApps.data ?? [])].filter(Boolean).map((action) => ({\n\t\t\t\t\t\t...action,\n\t\t\t\t\t\taction: (e) => action.action(e, { message, tabbar: toolbox, room, chat, autoTranslateOptions }),\n\t\t\t\t\t}))}\n\t\t\t\t\tonChangeMenuVisibility={onChangeMenuVisibility}\n\t\t\t\t\tdata-qa-type='message-action-menu-options'\n\t\t\t\t\tcontext={{ message, room, user, subscription, settings: mapSettings, chat, context }}\n\t\t\t\t\tisMessageEncrypted={isE2EEMessage(message)}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</FuselageMessageToolbar>\n\t);\n};\n\nexport default memo(MessageToolbar);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/message/toolbar/MessageToolbar.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/components/message/toolbar/MessageToolbar.tsx","inputSourceMap":{"version":3,"file":"client/components/message/toolbar/MessageToolbar.tsx","sourceRoot":"","sources":["client/components/message/toolbar/MessageToolbar.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useToolbar } from '@react-aria/toolbar';\nimport type { IMessage, IRoom, ISubscription, ITranslatedMessage } from '@rocket.chat/core-typings';\nimport { isThreadMessage, isRoomFederated, isVideoConfMessage, isE2EEMessage } from '@rocket.chat/core-typings';\nimport { MessageToolbar as FuselageMessageToolbar, MessageToolbarItem } from '@rocket.chat/fuselage';\nimport { useFeaturePreview } from '@rocket.chat/ui-client';\nimport { useUser, useSettings, useTranslation, useMethod, useLayoutHiddenActions } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React, { memo, useMemo, useRef } from 'react';\n\nimport type { MessageActionContext } from '../../../../app/ui-utils/client/lib/MessageAction';\nimport { MessageAction } from '../../../../app/ui-utils/client/lib/MessageAction';\nimport { useEmojiPickerData } from '../../../contexts/EmojiPickerContext';\nimport { useMessageActionAppsActionButtons } from '../../../hooks/useAppActionButtons';\nimport { useEmbeddedLayout } from '../../../hooks/useEmbeddedLayout';\nimport EmojiElement from '../../../views/composer/EmojiPicker/EmojiElement';\nimport { useIsSelecting } from '../../../views/room/MessageList/contexts/SelectedMessagesContext';\nimport { useAutoTranslate } from '../../../views/room/MessageList/hooks/useAutoTranslate';\nimport { useChat } from '../../../views/room/contexts/ChatContext';\nimport { useRoomToolbox } from '../../../views/room/contexts/RoomToolboxContext';\nimport MessageActionMenu from './MessageActionMenu';\nimport MessageToolbarStarsActionMenu from './MessageToolbarStarsActionMenu';\nimport { useWebDAVMessageAction } from './useWebDAVMessageAction';\n\nconst getMessageContext = (message: IMessage, room: IRoom, context?: MessageActionContext): MessageActionContext => {\n\tif (context) {\n\t\treturn context;\n\t}\n\n\tif (isVideoConfMessage(message)) {\n\t\treturn 'videoconf';\n\t}\n\n\tif (isRoomFederated(room)) {\n\t\treturn 'federated';\n\t}\n\n\tif (isThreadMessage(message)) {\n\t\treturn 'threads';\n\t}\n\n\treturn 'message';\n};\n\ntype MessageToolbarProps = {\n\tmessage: IMessage & Partial<ITranslatedMessage>;\n\tmessageContext?: MessageActionContext;\n\troom: IRoom;\n\tsubscription?: ISubscription;\n\tonChangeMenuVisibility: (visible: boolean) => void;\n} & ComponentProps<typeof FuselageMessageToolbar>;\n\nconst MessageToolbar = ({\n\tmessage,\n\tmessageContext,\n\troom,\n\tsubscription,\n\tonChangeMenuVisibility,\n\t...props\n}: MessageToolbarProps): ReactElement | null => {\n\tconst t = useTranslation();\n\tconst user = useUser() ?? undefined;\n\tconst settings = useSettings();\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\n\tconst toolbarRef = useRef(null);\n\tconst { toolbarProps } = useToolbar(props, toolbarRef);\n\n\tconst quickReactionsEnabled = useFeaturePreview('quickReactions');\n\n\tconst setReaction = useMethod('setReaction');\n\n\tconst context = getMessageContext(message, room, messageContext);\n\n\tconst mapSettings = useMemo(() => Object.fromEntries(settings.map((setting) => [setting._id, setting.value])), [settings]);\n\n\tconst chat = useChat();\n\tconst { quickReactions, addRecentEmoji } = useEmojiPickerData();\n\n\tconst actionButtonApps = useMessageActionAppsActionButtons(context);\n\n\tconst starsAction = useMessageActionAppsActionButtons(context, 'ai');\n\n\tconst { messageToolbox: hiddenActions } = useLayoutHiddenActions();\n\n\t// TODO: move this to another place\n\tuseWebDAVMessageAction();\n\n\tconst actionsQueryResult = useQuery(['rooms', room._id, 'messages', message._id, 'actions'] as const, async () => {\n\t\tconst props = { message, room, user, subscription, settings: mapSettings, chat };\n\n\t\tconst toolboxItems = await MessageAction.getAll(props, context, 'message');\n\t\tconst menuItems = await MessageAction.getAll(props, context, 'menu');\n\n\t\treturn {\n\t\t\tmessage: toolboxItems.filter((action) => !hiddenActions.includes(action.id)),\n\t\t\tmenu: menuItems.filter((action) => !(isLayoutEmbedded && action.id === 'reply-directly') && !hiddenActions.includes(action.id)),\n\t\t};\n\t});\n\n\tconst toolbox = useRoomToolbox();\n\n\tconst selecting = useIsSelecting();\n\n\tconst autoTranslateOptions = useAutoTranslate(subscription);\n\n\tif (selecting || (!actionsQueryResult.data?.message.length && !actionsQueryResult.data?.menu.length)) {\n\t\treturn null;\n\t}\n\n\tconst isReactionAllowed = actionsQueryResult.data?.message.find(({ id }) => id === 'reaction-message');\n\n\tconst handleSetReaction = (emoji: string) => {\n\t\tsetReaction(`:${emoji}:`, message._id);\n\t\taddRecentEmoji(emoji);\n\t};\n\n\treturn (\n\t\t<FuselageMessageToolbar ref={toolbarRef} {...toolbarProps} aria-label={t('Message_actions')} {...props}>\n\t\t\t{quickReactionsEnabled &&\n\t\t\t\tisReactionAllowed &&\n\t\t\t\tquickReactions.slice(0, 3).map(({ emoji, image }) => {\n\t\t\t\t\treturn <EmojiElement small key={emoji} title={emoji} emoji={emoji} image={image} onClick={() => handleSetReaction(emoji)} />;\n\t\t\t\t})}\n\t\t\t{actionsQueryResult.isSuccess &&\n\t\t\t\tactionsQueryResult.data.message.map((action) => (\n\t\t\t\t\t<MessageToolbarItem\n\t\t\t\t\t\tonClick={(e): void => action.action(e, { message, tabbar: toolbox, room, chat, autoTranslateOptions })}\n\t\t\t\t\t\tkey={action.id}\n\t\t\t\t\t\ticon={action.icon}\n\t\t\t\t\t\ttitle={\n\t\t\t\t\t\t\taction?.disabled?.({ message, room, user, subscription, settings: mapSettings, chat, context })\n\t\t\t\t\t\t\t\t? t('Action_not_available_encrypted_content', { action: t(action.label) })\n\t\t\t\t\t\t\t\t: t(action.label)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdata-qa-id={action.label}\n\t\t\t\t\t\tdata-qa-type='message-action-menu'\n\t\t\t\t\t\tdisabled={action?.disabled?.({ message, room, user, subscription, settings: mapSettings, chat, context })}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t{starsAction.data && starsAction.data.length > 0 && (\n\t\t\t\t<MessageToolbarStarsActionMenu\n\t\t\t\t\toptions={starsAction.data.map((action) => ({\n\t\t\t\t\t\t...action,\n\t\t\t\t\t\taction: (e) => action.action(e, { message, tabbar: toolbox, room, chat, autoTranslateOptions }),\n\t\t\t\t\t}))}\n\t\t\t\t\tonChangeMenuVisibility={onChangeMenuVisibility}\n\t\t\t\t\tdata-qa-type='message-action-stars-menu-options'\n\t\t\t\t\tcontext={{ message, room, user, subscription, settings: mapSettings, chat, context }}\n\t\t\t\t\tisMessageEncrypted={isE2EEMessage(message)}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{actionsQueryResult.isSuccess && actionsQueryResult.data.menu.length > 0 && (\n\t\t\t\t<MessageActionMenu\n\t\t\t\t\toptions={[...actionsQueryResult.data?.menu, ...(actionButtonApps.data ?? [])].filter(Boolean).map((action) => ({\n\t\t\t\t\t\t...action,\n\t\t\t\t\t\taction: (e) => action.action(e, { message, tabbar: toolbox, room, chat, autoTranslateOptions }),\n\t\t\t\t\t}))}\n\t\t\t\t\tonChangeMenuVisibility={onChangeMenuVisibility}\n\t\t\t\t\tdata-qa-type='message-action-menu-options'\n\t\t\t\t\tcontext={{ message, room, user, subscription, settings: mapSettings, chat, context }}\n\t\t\t\t\tisMessageEncrypted={isE2EEMessage(message)}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</FuselageMessageToolbar>\n\t);\n};\n\nexport default memo(MessageToolbar);\n"]}}},"code":"var _excluded = [\"message\", \"messageContext\", \"room\", \"subscription\", \"onChangeMenuVisibility\"];\nvar _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 0);\nvar _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 1);\nvar _toConsumableArray;\nmodule.link(\"@babel/runtime/helpers/toConsumableArray\", {\n  default: function (v) {\n    _toConsumableArray = v;\n  }\n}, 2);\nvar _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 3);\nvar _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 4);\nvar useToolbar;\nmodule.link(\"@react-aria/toolbar\", {\n  useToolbar: function (v) {\n    useToolbar = v;\n  }\n}, 0);\nvar isThreadMessage, isRoomFederated, isVideoConfMessage, isE2EEMessage;\nmodule.link(\"@rocket.chat/core-typings\", {\n  isThreadMessage: function (v) {\n    isThreadMessage = v;\n  },\n  isRoomFederated: function (v) {\n    isRoomFederated = v;\n  },\n  isVideoConfMessage: function (v) {\n    isVideoConfMessage = v;\n  },\n  isE2EEMessage: function (v) {\n    isE2EEMessage = v;\n  }\n}, 1);\nvar FuselageMessageToolbar, MessageToolbarItem;\nmodule.link(\"@rocket.chat/fuselage\", {\n  MessageToolbar: function (v) {\n    FuselageMessageToolbar = v;\n  },\n  MessageToolbarItem: function (v) {\n    MessageToolbarItem = v;\n  }\n}, 2);\nvar useFeaturePreview;\nmodule.link(\"@rocket.chat/ui-client\", {\n  useFeaturePreview: function (v) {\n    useFeaturePreview = v;\n  }\n}, 3);\nvar useUser, useSettings, useTranslation, useMethod, useLayoutHiddenActions;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useUser: function (v) {\n    useUser = v;\n  },\n  useSettings: function (v) {\n    useSettings = v;\n  },\n  useTranslation: function (v) {\n    useTranslation = v;\n  },\n  useMethod: function (v) {\n    useMethod = v;\n  },\n  useLayoutHiddenActions: function (v) {\n    useLayoutHiddenActions = v;\n  }\n}, 4);\nvar useQuery;\nmodule.link(\"@tanstack/react-query\", {\n  useQuery: function (v) {\n    useQuery = v;\n  }\n}, 5);\nvar React, memo, useMemo, useRef;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  memo: function (v) {\n    memo = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useRef: function (v) {\n    useRef = v;\n  }\n}, 6);\nvar MessageAction;\nmodule.link(\"../../../../app/ui-utils/client/lib/MessageAction\", {\n  MessageAction: function (v) {\n    MessageAction = v;\n  }\n}, 7);\nvar useEmojiPickerData;\nmodule.link(\"../../../contexts/EmojiPickerContext\", {\n  useEmojiPickerData: function (v) {\n    useEmojiPickerData = v;\n  }\n}, 8);\nvar useMessageActionAppsActionButtons;\nmodule.link(\"../../../hooks/useAppActionButtons\", {\n  useMessageActionAppsActionButtons: function (v) {\n    useMessageActionAppsActionButtons = v;\n  }\n}, 9);\nvar useEmbeddedLayout;\nmodule.link(\"../../../hooks/useEmbeddedLayout\", {\n  useEmbeddedLayout: function (v) {\n    useEmbeddedLayout = v;\n  }\n}, 10);\nvar EmojiElement;\nmodule.link(\"../../../views/composer/EmojiPicker/EmojiElement\", {\n  \"default\": function (v) {\n    EmojiElement = v;\n  }\n}, 11);\nvar useIsSelecting;\nmodule.link(\"../../../views/room/MessageList/contexts/SelectedMessagesContext\", {\n  useIsSelecting: function (v) {\n    useIsSelecting = v;\n  }\n}, 12);\nvar useAutoTranslate;\nmodule.link(\"../../../views/room/MessageList/hooks/useAutoTranslate\", {\n  useAutoTranslate: function (v) {\n    useAutoTranslate = v;\n  }\n}, 13);\nvar useChat;\nmodule.link(\"../../../views/room/contexts/ChatContext\", {\n  useChat: function (v) {\n    useChat = v;\n  }\n}, 14);\nvar useRoomToolbox;\nmodule.link(\"../../../views/room/contexts/RoomToolboxContext\", {\n  useRoomToolbox: function (v) {\n    useRoomToolbox = v;\n  }\n}, 15);\nvar MessageActionMenu;\nmodule.link(\"./MessageActionMenu\", {\n  \"default\": function (v) {\n    MessageActionMenu = v;\n  }\n}, 16);\nvar MessageToolbarStarsActionMenu;\nmodule.link(\"./MessageToolbarStarsActionMenu\", {\n  \"default\": function (v) {\n    MessageToolbarStarsActionMenu = v;\n  }\n}, 17);\nvar useWebDAVMessageAction;\nmodule.link(\"./useWebDAVMessageAction\", {\n  useWebDAVMessageAction: function (v) {\n    useWebDAVMessageAction = v;\n  }\n}, 18);\nvar getMessageContext = function (message, room, context) {\n  if (context) {\n    return context;\n  }\n  if (isVideoConfMessage(message)) {\n    return 'videoconf';\n  }\n  if (isRoomFederated(room)) {\n    return 'federated';\n  }\n  if (isThreadMessage(message)) {\n    return 'threads';\n  }\n  return 'message';\n};\nvar MessageToolbar = function (_ref) {\n  var _useUser, _actionsQueryResult$d, _actionsQueryResult$d2, _actionsQueryResult$d3, _actionsQueryResult$d4, _actionButtonApps$dat;\n  var message = _ref.message,\n    messageContext = _ref.messageContext,\n    room = _ref.room,\n    subscription = _ref.subscription,\n    onChangeMenuVisibility = _ref.onChangeMenuVisibility,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var t = useTranslation();\n  var user = (_useUser = useUser()) !== null && _useUser !== void 0 ? _useUser : undefined;\n  var settings = useSettings();\n  var isLayoutEmbedded = useEmbeddedLayout();\n  var toolbarRef = useRef(null);\n  var _useToolbar = useToolbar(props, toolbarRef),\n    toolbarProps = _useToolbar.toolbarProps;\n  var quickReactionsEnabled = useFeaturePreview('quickReactions');\n  var setReaction = useMethod('setReaction');\n  var context = getMessageContext(message, room, messageContext);\n  var mapSettings = useMemo(function () {\n    return Object.fromEntries(settings.map(function (setting) {\n      return [setting._id, setting.value];\n    }));\n  }, [settings]);\n  var chat = useChat();\n  var _useEmojiPickerData = useEmojiPickerData(),\n    quickReactions = _useEmojiPickerData.quickReactions,\n    addRecentEmoji = _useEmojiPickerData.addRecentEmoji;\n  var actionButtonApps = useMessageActionAppsActionButtons(context);\n  var starsAction = useMessageActionAppsActionButtons(context, 'ai');\n  var _useLayoutHiddenActio = useLayoutHiddenActions(),\n    hiddenActions = _useLayoutHiddenActio.messageToolbox;\n  // TODO: move this to another place\n  useWebDAVMessageAction();\n  var actionsQueryResult = useQuery(['rooms', room._id, 'messages', message._id, 'actions'], function () {\n    function _callee() {\n      var props, toolboxItems, menuItems;\n      return _regeneratorRuntime.async(function () {\n        function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              props = {\n                message: message,\n                room: room,\n                user: user,\n                subscription: subscription,\n                settings: mapSettings,\n                chat: chat\n              };\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(MessageAction.getAll(props, context, 'message'));\n            case 3:\n              toolboxItems = _context.sent;\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(MessageAction.getAll(props, context, 'menu'));\n            case 6:\n              menuItems = _context.sent;\n              return _context.abrupt(\"return\", {\n                message: toolboxItems.filter(function (action) {\n                  return !hiddenActions.includes(action.id);\n                }),\n                menu: menuItems.filter(function (action) {\n                  return !(isLayoutEmbedded && action.id === 'reply-directly') && !hiddenActions.includes(action.id);\n                })\n              });\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n        return _callee$;\n      }(), null, null, null, Promise);\n    }\n    return _callee;\n  }());\n  var toolbox = useRoomToolbox();\n  var selecting = useIsSelecting();\n  var autoTranslateOptions = useAutoTranslate(subscription);\n  if (selecting || !((_actionsQueryResult$d = actionsQueryResult.data) !== null && _actionsQueryResult$d !== void 0 && _actionsQueryResult$d.message.length) && !((_actionsQueryResult$d2 = actionsQueryResult.data) !== null && _actionsQueryResult$d2 !== void 0 && _actionsQueryResult$d2.menu.length)) {\n    return null;\n  }\n  var isReactionAllowed = (_actionsQueryResult$d3 = actionsQueryResult.data) === null || _actionsQueryResult$d3 === void 0 ? void 0 : _actionsQueryResult$d3.message.find(function (_ref2) {\n    var id = _ref2.id;\n    return id === 'reaction-message';\n  });\n  var handleSetReaction = function (emoji) {\n    setReaction(\":\" + emoji + \":\", message._id);\n    addRecentEmoji(emoji);\n  };\n  return /*#__PURE__*/React.createElement(FuselageMessageToolbar, _extends({\n    ref: toolbarRef\n  }, toolbarProps, {\n    \"aria-label\": t('Message_actions')\n  }, props), quickReactionsEnabled && isReactionAllowed && quickReactions.slice(0, 3).map(function (_ref3) {\n    var emoji = _ref3.emoji,\n      image = _ref3.image;\n    return /*#__PURE__*/React.createElement(EmojiElement, {\n      small: true,\n      key: emoji,\n      title: emoji,\n      emoji: emoji,\n      image: image,\n      onClick: function () {\n        return handleSetReaction(emoji);\n      }\n    });\n  }), actionsQueryResult.isSuccess && actionsQueryResult.data.message.map(function (action) {\n    var _action$disabled, _action$disabled2;\n    return /*#__PURE__*/React.createElement(MessageToolbarItem, {\n      onClick: function (e) {\n        return action.action(e, {\n          message: message,\n          tabbar: toolbox,\n          room: room,\n          chat: chat,\n          autoTranslateOptions: autoTranslateOptions\n        });\n      },\n      key: action.id,\n      icon: action.icon,\n      title: action !== null && action !== void 0 && (_action$disabled = action.disabled) !== null && _action$disabled !== void 0 && _action$disabled.call(action, {\n        message: message,\n        room: room,\n        user: user,\n        subscription: subscription,\n        settings: mapSettings,\n        chat: chat,\n        context: context\n      }) ? t('Action_not_available_encrypted_content', {\n        action: t(action.label)\n      }) : t(action.label),\n      \"data-qa-id\": action.label,\n      \"data-qa-type\": \"message-action-menu\",\n      disabled: action === null || action === void 0 ? void 0 : (_action$disabled2 = action.disabled) === null || _action$disabled2 === void 0 ? void 0 : _action$disabled2.call(action, {\n        message: message,\n        room: room,\n        user: user,\n        subscription: subscription,\n        settings: mapSettings,\n        chat: chat,\n        context: context\n      })\n    });\n  }), starsAction.data && starsAction.data.length > 0 && /*#__PURE__*/React.createElement(MessageToolbarStarsActionMenu, {\n    options: starsAction.data.map(function (action) {\n      return _objectSpread(_objectSpread({}, action), {}, {\n        action: function (e) {\n          return action.action(e, {\n            message: message,\n            tabbar: toolbox,\n            room: room,\n            chat: chat,\n            autoTranslateOptions: autoTranslateOptions\n          });\n        }\n      });\n    }),\n    onChangeMenuVisibility: onChangeMenuVisibility,\n    \"data-qa-type\": \"message-action-stars-menu-options\",\n    context: {\n      message: message,\n      room: room,\n      user: user,\n      subscription: subscription,\n      settings: mapSettings,\n      chat: chat,\n      context: context\n    },\n    isMessageEncrypted: isE2EEMessage(message)\n  }), actionsQueryResult.isSuccess && actionsQueryResult.data.menu.length > 0 && /*#__PURE__*/React.createElement(MessageActionMenu, {\n    options: [].concat(_toConsumableArray((_actionsQueryResult$d4 = actionsQueryResult.data) === null || _actionsQueryResult$d4 === void 0 ? void 0 : _actionsQueryResult$d4.menu), _toConsumableArray((_actionButtonApps$dat = actionButtonApps.data) !== null && _actionButtonApps$dat !== void 0 ? _actionButtonApps$dat : [])).filter(Boolean).map(function (action) {\n      return _objectSpread(_objectSpread({}, action), {}, {\n        action: function (e) {\n          return action.action(e, {\n            message: message,\n            tabbar: toolbox,\n            room: room,\n            chat: chat,\n            autoTranslateOptions: autoTranslateOptions\n          });\n        }\n      });\n    }),\n    onChangeMenuVisibility: onChangeMenuVisibility,\n    \"data-qa-type\": \"message-action-menu-options\",\n    context: {\n      message: message,\n      room: room,\n      user: user,\n      subscription: subscription,\n      settings: mapSettings,\n      chat: chat,\n      context: context\n    },\n    isMessageEncrypted: isE2EEMessage(message)\n  }));\n};\nmodule.exportDefault( /*#__PURE__*/memo(MessageToolbar));","map":{"version":3,"names":["_regeneratorRuntime","module","link","default","v","_extends","_toConsumableArray","_objectSpread","_objectWithoutProperties","useToolbar","isThreadMessage","isRoomFederated","isVideoConfMessage","isE2EEMessage","FuselageMessageToolbar","MessageToolbarItem","MessageToolbar","useFeaturePreview","useUser","useSettings","useTranslation","useMethod","useLayoutHiddenActions","useQuery","React","memo","useMemo","useRef","MessageAction","useEmojiPickerData","useMessageActionAppsActionButtons","useEmbeddedLayout","EmojiElement","useIsSelecting","useAutoTranslate","useChat","useRoomToolbox","MessageActionMenu","MessageToolbarStarsActionMenu","useWebDAVMessageAction","getMessageContext","message","room","context","_ref","_useUser","_actionsQueryResult$d","_actionsQueryResult$d2","_actionsQueryResult$d3","_actionsQueryResult$d4","_actionButtonApps$dat","messageContext","subscription","onChangeMenuVisibility","props","_excluded","t","user","undefined","settings","isLayoutEmbedded","toolbarRef","_useToolbar","toolbarProps","quickReactionsEnabled","setReaction","mapSettings","Object","fromEntries","map","setting","_id","value","chat","_useEmojiPickerData","quickReactions","addRecentEmoji","actionButtonApps","starsAction","_useLayoutHiddenActio","hiddenActions","messageToolbox","actionsQueryResult","_callee","toolboxItems","menuItems","async","_callee$","_context","prev","next","awrap","getAll","sent","abrupt","filter","action","includes","id","menu","stop","Promise","toolbox","selecting","autoTranslateOptions","data","length","isReactionAllowed","find","_ref2","handleSetReaction","emoji","createElement","ref","slice","_ref3","image","small","key","title","onClick","isSuccess","_action$disabled","_action$disabled2","e","tabbar","icon","disabled","call","label","options","isMessageEncrypted","concat","Boolean","exportDefault"],"sources":["client/components/message/toolbar/MessageToolbar.tsx"],"sourcesContent":["import { useToolbar } from '@react-aria/toolbar';\nimport type { IMessage, IRoom, ISubscription, ITranslatedMessage } from '@rocket.chat/core-typings';\nimport { isThreadMessage, isRoomFederated, isVideoConfMessage, isE2EEMessage } from '@rocket.chat/core-typings';\nimport { MessageToolbar as FuselageMessageToolbar, MessageToolbarItem } from '@rocket.chat/fuselage';\nimport { useFeaturePreview } from '@rocket.chat/ui-client';\nimport { useUser, useSettings, useTranslation, useMethod, useLayoutHiddenActions } from '@rocket.chat/ui-contexts';\nimport { useQuery } from '@tanstack/react-query';\nimport type { ComponentProps, ReactElement } from 'react';\nimport React, { memo, useMemo, useRef } from 'react';\n\nimport type { MessageActionContext } from '../../../../app/ui-utils/client/lib/MessageAction';\nimport { MessageAction } from '../../../../app/ui-utils/client/lib/MessageAction';\nimport { useEmojiPickerData } from '../../../contexts/EmojiPickerContext';\nimport { useMessageActionAppsActionButtons } from '../../../hooks/useAppActionButtons';\nimport { useEmbeddedLayout } from '../../../hooks/useEmbeddedLayout';\nimport EmojiElement from '../../../views/composer/EmojiPicker/EmojiElement';\nimport { useIsSelecting } from '../../../views/room/MessageList/contexts/SelectedMessagesContext';\nimport { useAutoTranslate } from '../../../views/room/MessageList/hooks/useAutoTranslate';\nimport { useChat } from '../../../views/room/contexts/ChatContext';\nimport { useRoomToolbox } from '../../../views/room/contexts/RoomToolboxContext';\nimport MessageActionMenu from './MessageActionMenu';\nimport MessageToolbarStarsActionMenu from './MessageToolbarStarsActionMenu';\nimport { useWebDAVMessageAction } from './useWebDAVMessageAction';\n\nconst getMessageContext = (message: IMessage, room: IRoom, context?: MessageActionContext): MessageActionContext => {\n\tif (context) {\n\t\treturn context;\n\t}\n\n\tif (isVideoConfMessage(message)) {\n\t\treturn 'videoconf';\n\t}\n\n\tif (isRoomFederated(room)) {\n\t\treturn 'federated';\n\t}\n\n\tif (isThreadMessage(message)) {\n\t\treturn 'threads';\n\t}\n\n\treturn 'message';\n};\n\ntype MessageToolbarProps = {\n\tmessage: IMessage & Partial<ITranslatedMessage>;\n\tmessageContext?: MessageActionContext;\n\troom: IRoom;\n\tsubscription?: ISubscription;\n\tonChangeMenuVisibility: (visible: boolean) => void;\n} & ComponentProps<typeof FuselageMessageToolbar>;\n\nconst MessageToolbar = ({\n\tmessage,\n\tmessageContext,\n\troom,\n\tsubscription,\n\tonChangeMenuVisibility,\n\t...props\n}: MessageToolbarProps): ReactElement | null => {\n\tconst t = useTranslation();\n\tconst user = useUser() ?? undefined;\n\tconst settings = useSettings();\n\tconst isLayoutEmbedded = useEmbeddedLayout();\n\n\tconst toolbarRef = useRef(null);\n\tconst { toolbarProps } = useToolbar(props, toolbarRef);\n\n\tconst quickReactionsEnabled = useFeaturePreview('quickReactions');\n\n\tconst setReaction = useMethod('setReaction');\n\n\tconst context = getMessageContext(message, room, messageContext);\n\n\tconst mapSettings = useMemo(() => Object.fromEntries(settings.map((setting) => [setting._id, setting.value])), [settings]);\n\n\tconst chat = useChat();\n\tconst { quickReactions, addRecentEmoji } = useEmojiPickerData();\n\n\tconst actionButtonApps = useMessageActionAppsActionButtons(context);\n\n\tconst starsAction = useMessageActionAppsActionButtons(context, 'ai');\n\n\tconst { messageToolbox: hiddenActions } = useLayoutHiddenActions();\n\n\t// TODO: move this to another place\n\tuseWebDAVMessageAction();\n\n\tconst actionsQueryResult = useQuery(['rooms', room._id, 'messages', message._id, 'actions'] as const, async () => {\n\t\tconst props = { message, room, user, subscription, settings: mapSettings, chat };\n\n\t\tconst toolboxItems = await MessageAction.getAll(props, context, 'message');\n\t\tconst menuItems = await MessageAction.getAll(props, context, 'menu');\n\n\t\treturn {\n\t\t\tmessage: toolboxItems.filter((action) => !hiddenActions.includes(action.id)),\n\t\t\tmenu: menuItems.filter((action) => !(isLayoutEmbedded && action.id === 'reply-directly') && !hiddenActions.includes(action.id)),\n\t\t};\n\t});\n\n\tconst toolbox = useRoomToolbox();\n\n\tconst selecting = useIsSelecting();\n\n\tconst autoTranslateOptions = useAutoTranslate(subscription);\n\n\tif (selecting || (!actionsQueryResult.data?.message.length && !actionsQueryResult.data?.menu.length)) {\n\t\treturn null;\n\t}\n\n\tconst isReactionAllowed = actionsQueryResult.data?.message.find(({ id }) => id === 'reaction-message');\n\n\tconst handleSetReaction = (emoji: string) => {\n\t\tsetReaction(`:${emoji}:`, message._id);\n\t\taddRecentEmoji(emoji);\n\t};\n\n\treturn (\n\t\t<FuselageMessageToolbar ref={toolbarRef} {...toolbarProps} aria-label={t('Message_actions')} {...props}>\n\t\t\t{quickReactionsEnabled &&\n\t\t\t\tisReactionAllowed &&\n\t\t\t\tquickReactions.slice(0, 3).map(({ emoji, image }) => {\n\t\t\t\t\treturn <EmojiElement small key={emoji} title={emoji} emoji={emoji} image={image} onClick={() => handleSetReaction(emoji)} />;\n\t\t\t\t})}\n\t\t\t{actionsQueryResult.isSuccess &&\n\t\t\t\tactionsQueryResult.data.message.map((action) => (\n\t\t\t\t\t<MessageToolbarItem\n\t\t\t\t\t\tonClick={(e): void => action.action(e, { message, tabbar: toolbox, room, chat, autoTranslateOptions })}\n\t\t\t\t\t\tkey={action.id}\n\t\t\t\t\t\ticon={action.icon}\n\t\t\t\t\t\ttitle={\n\t\t\t\t\t\t\taction?.disabled?.({ message, room, user, subscription, settings: mapSettings, chat, context })\n\t\t\t\t\t\t\t\t? t('Action_not_available_encrypted_content', { action: t(action.label) })\n\t\t\t\t\t\t\t\t: t(action.label)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdata-qa-id={action.label}\n\t\t\t\t\t\tdata-qa-type='message-action-menu'\n\t\t\t\t\t\tdisabled={action?.disabled?.({ message, room, user, subscription, settings: mapSettings, chat, context })}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t{starsAction.data && starsAction.data.length > 0 && (\n\t\t\t\t<MessageToolbarStarsActionMenu\n\t\t\t\t\toptions={starsAction.data.map((action) => ({\n\t\t\t\t\t\t...action,\n\t\t\t\t\t\taction: (e) => action.action(e, { message, tabbar: toolbox, room, chat, autoTranslateOptions }),\n\t\t\t\t\t}))}\n\t\t\t\t\tonChangeMenuVisibility={onChangeMenuVisibility}\n\t\t\t\t\tdata-qa-type='message-action-stars-menu-options'\n\t\t\t\t\tcontext={{ message, room, user, subscription, settings: mapSettings, chat, context }}\n\t\t\t\t\tisMessageEncrypted={isE2EEMessage(message)}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t{actionsQueryResult.isSuccess && actionsQueryResult.data.menu.length > 0 && (\n\t\t\t\t<MessageActionMenu\n\t\t\t\t\toptions={[...actionsQueryResult.data?.menu, ...(actionButtonApps.data ?? [])].filter(Boolean).map((action) => ({\n\t\t\t\t\t\t...action,\n\t\t\t\t\t\taction: (e) => action.action(e, { message, tabbar: toolbox, room, chat, autoTranslateOptions }),\n\t\t\t\t\t}))}\n\t\t\t\t\tonChangeMenuVisibility={onChangeMenuVisibility}\n\t\t\t\t\tdata-qa-type='message-action-menu-options'\n\t\t\t\t\tcontext={{ message, room, user, subscription, settings: mapSettings, chat, context }}\n\t\t\t\t\tisMessageEncrypted={isE2EEMessage(message)}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</FuselageMessageToolbar>\n\t);\n};\n\nexport default memo(MessageToolbar);\n"],"mappings":";AAAA,IAAAA,mBAAqB;AAAAC,MAAM,CAAAC,IAAA,6BAAsB;EAAAC,OAAA,WAAAA,CAAAC,CAAA;IAAAJ,mBAAA,GAAAI,CAAA;EAAA;AAAA;AAAA,IAAAC,QAAA;AAAAJ,MAAA,CAAAC,IAAA;EAAAC,OAAA,WAAAA,CAAAC,CAAA;IAAAC,QAAA,GAAAD,CAAA;EAAA;AAAA;AAAA,IAAAE,kBAAA;AAAAL,MAAA,CAAAC,IAAA;EAAAC,OAAA,WAAAA,CAAAC,CAAA;IAAAE,kBAAA,GAAAF,CAAA;EAAA;AAAA;AAAA,IAAAG,aAAA;AAAAN,MAAA,CAAAC,IAAA;EAAAC,OAAA,WAAAA,CAAAC,CAAA;IAAAG,aAAA,GAAAH,CAAA;EAAA;AAAA;AAAA,IAAAI,wBAAA;AAAAP,MAAA,CAAAC,IAAA;EAAAC,OAAA,WAAAA,CAAAC,CAAA;IAAAI,wBAAA,GAAAJ,CAAA;EAAA;AAAA;AAAjD,IAAAK,UAAS;AAAAR,MAAY,CAAAC,IAAA,CAAM,qBAAqB,EAAC;EAAAO,UAAA,WAAAA,CAAAL,CAAA;IAAAK,UAAA,GAAAL,CAAA;EAAA;AAAA;AAAA,IAAAM,eAAA,EAAAC,eAAA,EAAAC,kBAAA,EAAAC,aAAA;AAAAZ,MAAA,CAAAC,IAAA;EAAAQ,eAAA,WAAAA,CAAAN,CAAA;IAAAM,eAAA,GAAAN,CAAA;EAAA;EAAAO,eAAA,WAAAA,CAAAP,CAAA;IAAAO,eAAA,GAAAP,CAAA;EAAA;EAAAQ,kBAAA,WAAAA,CAAAR,CAAA;IAAAQ,kBAAA,GAAAR,CAAA;EAAA;EAAAS,aAAA,WAAAA,CAAAT,CAAA;IAAAS,aAAA,GAAAT,CAAA;EAAA;AAAA;AAAA,IAAAU,sBAAA,EAAAC,kBAAA;AAAAd,MAAA,CAAAC,IAAA;EAAAc,cAAA,WAAAA,CAAAZ,CAAA;IAAAU,sBAAA,GAAAV,CAAA;EAAA;EAAAW,kBAAA,WAAAA,CAAAX,CAAA;IAAAW,kBAAA,GAAAX,CAAA;EAAA;AAAA;AAAA,IAAAa,iBAAA;AAAAhB,MAAA,CAAAC,IAAA;EAAAe,iBAAA,WAAAA,CAAAb,CAAA;IAAAa,iBAAA,GAAAb,CAAA;EAAA;AAAA;AAAA,IAAAc,OAAA,EAAAC,WAAA,EAAAC,cAAA,EAAAC,SAAA,EAAAC,sBAAA;AAAArB,MAAA,CAAAC,IAAA;EAAAgB,OAAA,WAAAA,CAAAd,CAAA;IAAAc,OAAA,GAAAd,CAAA;EAAA;EAAAe,WAAA,WAAAA,CAAAf,CAAA;IAAAe,WAAA,GAAAf,CAAA;EAAA;EAAAgB,cAAA,WAAAA,CAAAhB,CAAA;IAAAgB,cAAA,GAAAhB,CAAA;EAAA;EAAAiB,SAAA,WAAAA,CAAAjB,CAAA;IAAAiB,SAAA,GAAAjB,CAAA;EAAA;EAAAkB,sBAAA,WAAAA,CAAAlB,CAAA;IAAAkB,sBAAA,GAAAlB,CAAA;EAAA;AAAA;AAAA,IAAAmB,QAAA;AAAAtB,MAAA,CAAAC,IAAA;EAAAqB,QAAA,WAAAA,CAAAnB,CAAA;IAAAmB,QAAA,GAAAnB,CAAA;EAAA;AAAA;AAAA,IAAAoB,KAAA,EAAAC,IAAA,EAAAC,OAAA,EAAAC,MAAA;AAAA1B,MAAA,CAAAC,IAAA;EAAA,oBAAAC,CAAAC,CAAA;IAAAoB,KAAA,GAAApB,CAAA;EAAA;EAAAqB,IAAA,WAAAA,CAAArB,CAAA;IAAAqB,IAAA,GAAArB,CAAA;EAAA;EAAAsB,OAAA,WAAAA,CAAAtB,CAAA;IAAAsB,OAAA,GAAAtB,CAAA;EAAA;EAAAuB,MAAA,WAAAA,CAAAvB,CAAA;IAAAuB,MAAA,GAAAvB,CAAA;EAAA;AAAA;AAAA,IAAAwB,aAAA;AAAA3B,MAAA,CAAAC,IAAA;EAAA0B,aAAA,WAAAA,CAAAxB,CAAA;IAAAwB,aAAA,GAAAxB,CAAA;EAAA;AAAA;AAAA,IAAAyB,kBAAA;AAAA5B,MAAA,CAAAC,IAAA;EAAA2B,kBAAA,WAAAA,CAAAzB,CAAA;IAAAyB,kBAAA,GAAAzB,CAAA;EAAA;AAAA;AAAA,IAAA0B,iCAAA;AAAA7B,MAAA,CAAAC,IAAA;EAAA4B,iCAAA,WAAAA,CAAA1B,CAAA;IAAA0B,iCAAA,GAAA1B,CAAA;EAAA;AAAA;AAAA,IAAA2B,iBAAA;AAAA9B,MAAA,CAAAC,IAAA;EAAA6B,iBAAA,WAAAA,CAAA3B,CAAA;IAAA2B,iBAAA,GAAA3B,CAAA;EAAA;AAAA;AAAA,IAAA4B,YAAA;AAAA/B,MAAA,CAAAC,IAAA;EAAA,oBAAAC,CAAAC,CAAA;IAAA4B,YAAA,GAAA5B,CAAA;EAAA;AAAA;AAAA,IAAA6B,cAAA;AAAAhC,MAAA,CAAAC,IAAA;EAAA+B,cAAA,WAAAA,CAAA7B,CAAA;IAAA6B,cAAA,GAAA7B,CAAA;EAAA;AAAA;AAAA,IAAA8B,gBAAA;AAAAjC,MAAA,CAAAC,IAAA;EAAAgC,gBAAA,WAAAA,CAAA9B,CAAA;IAAA8B,gBAAA,GAAA9B,CAAA;EAAA;AAAA;AAAA,IAAA+B,OAAA;AAAAlC,MAAA,CAAAC,IAAA;EAAAiC,OAAA,WAAAA,CAAA/B,CAAA;IAAA+B,OAAA,GAAA/B,CAAA;EAAA;AAAA;AAAA,IAAAgC,cAAA;AAAAnC,MAAA,CAAAC,IAAA;EAAAkC,cAAA,WAAAA,CAAAhC,CAAA;IAAAgC,cAAA,GAAAhC,CAAA;EAAA;AAAA;AAAA,IAAAiC,iBAAA;AAAApC,MAAA,CAAAC,IAAA;EAAA,oBAAAC,CAAAC,CAAA;IAAAiC,iBAAA,GAAAjC,CAAA;EAAA;AAAA;AAAA,IAAAkC,6BAAA;AAAArC,MAAA,CAAAC,IAAA;EAAA,oBAAAC,CAAAC,CAAA;IAAAkC,6BAAA,GAAAlC,CAAA;EAAA;AAAA;AAAA,IAAAmC,sBAAA;AAAAtC,MAAA,CAAAC,IAAA;EAAAqC,sBAAA,WAAAA,CAAAnC,CAAA;IAAAmC,sBAAA,GAAAnC,CAAA;EAAA;AAAA;AAwBjD,IAAMoC,iBAAiB,GAAG,SAAAA,CAACC,OAAiB,EAAEC,IAAW,EAAEC,OAA8B,EAA0B;EAClH,IAAIA,OAAO,EAAE;IACZ,OAAOA,OAAO;EACf;EAEA,IAAI/B,kBAAkB,CAAC6B,OAAO,CAAC,EAAE;IAChC,OAAO,WAAW;EACnB;EAEA,IAAI9B,eAAe,CAAC+B,IAAI,CAAC,EAAE;IAC1B,OAAO,WAAW;EACnB;EAEA,IAAIhC,eAAe,CAAC+B,OAAO,CAAC,EAAE;IAC7B,OAAO,SAAS;EACjB;EAEA,OAAO,SAAS;AACjB,CAAC;AAUD,IAAMzB,cAAc,GAAG,SAAAA,CAAA4B,IAAA,EAOwB;EAAA,IAAAC,QAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,qBAAA;EAAA,IAN9CT,OAAO,GAAAG,IAAA,CAAPH,OAAO;IACPU,cAAc,GAAAP,IAAA,CAAdO,cAAc;IACdT,IAAI,GAAAE,IAAA,CAAJF,IAAI;IACJU,YAAY,GAAAR,IAAA,CAAZQ,YAAY;IACZC,sBAAsB,GAAAT,IAAA,CAAtBS,sBAAsB;IACnBC,KAAK,GAAA9C,wBAAA,CAAAoC,IAAA,EAAAW,SAAA;EAER,IAAMC,CAAC,GAAGpC,cAAc,EAAE;EAC1B,IAAMqC,IAAI,IAAAZ,QAAA,GAAG3B,OAAO,EAAE,cAAA2B,QAAA,cAAAA,QAAA,GAAIa,SAAS;EACnC,IAAMC,QAAQ,GAAGxC,WAAW,EAAE;EAC9B,IAAMyC,gBAAgB,GAAG7B,iBAAiB,EAAE;EAE5C,IAAM8B,UAAU,GAAGlC,MAAM,CAAC,IAAI,CAAC;EAC/B,IAAAmC,WAAA,GAAyBrD,UAAU,CAAC6C,KAAK,EAAEO,UAAU,CAAC;IAA9CE,YAAY,GAAAD,WAAA,CAAZC,YAAY;EAEpB,IAAMC,qBAAqB,GAAG/C,iBAAiB,CAAC,gBAAgB,CAAC;EAEjE,IAAMgD,WAAW,GAAG5C,SAAS,CAAC,aAAa,CAAC;EAE5C,IAAMsB,OAAO,GAAGH,iBAAiB,CAACC,OAAO,EAAEC,IAAI,EAAES,cAAc,CAAC;EAEhE,IAAMe,WAAW,GAAGxC,OAAO,CAAC;IAAA,OAAMyC,MAAM,CAACC,WAAW,CAACT,QAAQ,CAACU,GAAG,CAAC,UAACC,OAAO;MAAA,OAAK,CAACA,OAAO,CAACC,GAAG,EAAED,OAAO,CAACE,KAAK,CAAC;IAAA,EAAC,CAAC;EAAA,GAAE,CAACb,QAAQ,CAAC,CAAC;EAE1H,IAAMc,IAAI,GAAGtC,OAAO,EAAE;EACtB,IAAAuC,mBAAA,GAA2C7C,kBAAkB,EAAE;IAAvD8C,cAAc,GAAAD,mBAAA,CAAdC,cAAc;IAAEC,cAAc,GAAAF,mBAAA,CAAdE,cAAc;EAEtC,IAAMC,gBAAgB,GAAG/C,iCAAiC,CAACa,OAAO,CAAC;EAEnE,IAAMmC,WAAW,GAAGhD,iCAAiC,CAACa,OAAO,EAAE,IAAI,CAAC;EAEpE,IAAAoC,qBAAA,GAA0CzD,sBAAsB,EAAE;IAA1C0D,aAAa,GAAAD,qBAAA,CAA7BE,cAAc;EAEtB;EACA1C,sBAAsB,EAAE;EAExB,IAAM2C,kBAAkB,GAAG3D,QAAQ,CAAC,CAAC,OAAO,EAAEmB,IAAI,CAAC6B,GAAG,EAAE,UAAU,EAAE9B,OAAO,CAAC8B,GAAG,EAAE,SAAS,CAAU;IAAE,SAAAY,QAAA;MAAA,IAAA7B,KAAA,EAAA8B,YAAA,EAAAC,SAAA;MAAA,OAAArF,mBAAA,CAAAsF,KAAA;QAAA,SAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAC/FpC,KAAK,GAAG;gBAAEb,OAAO,EAAPA,OAAO;gBAAEC,IAAI,EAAJA,IAAI;gBAAEe,IAAI,EAAJA,IAAI;gBAAEL,YAAY,EAAZA,YAAY;gBAAEO,QAAQ,EAAEO,WAAW;gBAAEO,IAAI,EAAJA;cAAI,CAAE;cAAAe,QAAA,CAAAE,IAAA;cAAA,OAAA1F,mBAAA,CAAA2F,KAAA,CAErD/D,aAAa,CAACgE,MAAM,CAACtC,KAAK,EAAEX,OAAO,EAAE,SAAS,CAAC;YAAA;cAApEyC,YAAY,GAAAI,QAAA,CAAAK,IAAA;cAAAL,QAAA,CAAAE,IAAA;cAAA,OAAA1F,mBAAA,CAAA2F,KAAA,CACM/D,aAAa,CAACgE,MAAM,CAACtC,KAAK,EAAEX,OAAO,EAAE,MAAM,CAAC;YAAA;cAA9D0C,SAAS,GAAAG,QAAA,CAAAK,IAAA;cAAA,OAAAL,QAAA,CAAAM,MAAA,WAER;gBACNrD,OAAO,EAAE2C,YAAY,CAACW,MAAM,CAAC,UAACC,MAAM;kBAAA,OAAK,CAAChB,aAAa,CAACiB,QAAQ,CAACD,MAAM,CAACE,EAAE,CAAC;gBAAA,EAAC;gBAC5EC,IAAI,EAAEd,SAAS,CAACU,MAAM,CAAC,UAACC,MAAM;kBAAA,OAAK,EAAEpC,gBAAgB,IAAIoC,MAAM,CAACE,EAAE,KAAK,gBAAgB,CAAC,IAAI,CAAClB,aAAa,CAACiB,QAAQ,CAACD,MAAM,CAACE,EAAE,CAAC;gBAAA;eAC9H;YAAA;YAAA;cAAA,OAAAV,QAAA,CAAAY,IAAA;UAAA;QAAA;QAAA,OAAAb,QAAA;MAAA,uBAAAc,OAAA;IAAA;IACD,OAAAlB,OAAA;EAAA,IAAC;EAEF,IAAMmB,OAAO,GAAGlE,cAAc,EAAE;EAEhC,IAAMmE,SAAS,GAAGtE,cAAc,EAAE;EAElC,IAAMuE,oBAAoB,GAAGtE,gBAAgB,CAACkB,YAAY,CAAC;EAE3D,IAAImD,SAAS,IAAK,GAAAzD,qBAAA,GAACoC,kBAAkB,CAACuB,IAAI,cAAA3D,qBAAA,eAAvBA,qBAAA,CAAyBL,OAAO,CAACiE,MAAM,KAAI,GAAA3D,sBAAA,GAACmC,kBAAkB,CAACuB,IAAI,cAAA1D,sBAAA,eAAvBA,sBAAA,CAAyBoD,IAAI,CAACO,MAAM,CAAC,EAAE;IACrG,OAAO,IAAI;EACZ;EAEA,IAAMC,iBAAiB,IAAA3D,sBAAA,GAAGkC,kBAAkB,CAACuB,IAAI,cAAAzD,sBAAA,uBAAvBA,sBAAA,CAAyBP,OAAO,CAACmE,IAAI,CAAC,UAAAC,KAAA;IAAA,IAAGX,EAAE,GAAAW,KAAA,CAAFX,EAAE;IAAA,OAAOA,EAAE,KAAK,kBAAkB;EAAA,EAAC;EAEtG,IAAMY,iBAAiB,GAAG,SAAAA,CAACC,KAAa,EAAI;IAC3C9C,WAAW,OAAK8C,KAAK,QAAKtE,OAAO,CAAC8B,GAAG,CAAC;IACtCK,cAAc,CAACmC,KAAK,CAAC;EACtB,CAAC;EAED,oBACCvF,KAAA,CAAAwF,aAAA,CAAClG,sBAAsB,EAAAT,QAAA;IAAC4G,GAAG,EAAEpD;EAAW,GAAKE,YAAY;IAAE,cAAYP,CAAC,CAAC,iBAAiB;EAAE,GAAKF,KAAK,GACpGU,qBAAqB,IACrB2C,iBAAiB,IACjBhC,cAAc,CAACuC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC7C,GAAG,CAAC,UAAA8C,KAAA,EAAqB;IAAA,IAAlBJ,KAAK,GAAAI,KAAA,CAALJ,KAAK;MAAEK,KAAK,GAAAD,KAAA,CAALC,KAAK;IAC7C,oBAAO5F,KAAA,CAAAwF,aAAA,CAAChF,YAAY;MAACqF,KAAK;MAACC,GAAG,EAAEP,KAAM;MAACQ,KAAK,EAAER,KAAM;MAACA,KAAK,EAAEA,KAAM;MAACK,KAAK,EAAEA,KAAM;MAACI,OAAO,EAAE,SAAAA,CAAA;QAAA,OAAMV,iBAAiB,CAACC,KAAK,CAAC;MAAA;IAAC,EAAG;EAC7H,CAAC,CAAC,EACF7B,kBAAkB,CAACuC,SAAS,IAC5BvC,kBAAkB,CAACuB,IAAI,CAAChE,OAAO,CAAC4B,GAAG,CAAC,UAAC2B,MAAM;IAAA,IAAA0B,gBAAA,EAAAC,iBAAA;IAAA,oBAC1CnG,KAAA,CAAAwF,aAAA,CAACjG,kBAAkB;MAClByG,OAAO,EAAE,SAAAA,CAACI,CAAC;QAAA,OAAW5B,MAAM,CAACA,MAAM,CAAC4B,CAAC,EAAE;UAAEnF,OAAO,EAAPA,OAAO;UAAEoF,MAAM,EAAEvB,OAAO;UAAE5D,IAAI,EAAJA,IAAI;UAAE+B,IAAI,EAAJA,IAAI;UAAE+B,oBAAoB,EAApBA;QAAoB,CAAE,CAAC;MAAA,CAAC;MACvGc,GAAG,EAAEtB,MAAM,CAACE,EAAG;MACf4B,IAAI,EAAE9B,MAAM,CAAC8B,IAAK;MAClBP,KAAK,EACJvB,MAAM,aAANA,MAAM,gBAAA0B,gBAAA,GAAN1B,MAAM,CAAE+B,QAAQ,cAAAL,gBAAA,eAAhBA,gBAAA,CAAAM,IAAA,CAAAhC,MAAM,EAAa;QAAEvD,OAAO,EAAPA,OAAO;QAAEC,IAAI,EAAJA,IAAI;QAAEe,IAAI,EAAJA,IAAI;QAAEL,YAAY,EAAZA,YAAY;QAAEO,QAAQ,EAAEO,WAAW;QAAEO,IAAI,EAAJA,IAAI;QAAE9B,OAAO,EAAPA;MAAO,CAAE,CAAC,GAC5Fa,CAAC,CAAC,wCAAwC,EAAE;QAAEwC,MAAM,EAAExC,CAAC,CAACwC,MAAM,CAACiC,KAAK;MAAC,CAAE,CAAC,GACxEzE,CAAC,CAACwC,MAAM,CAACiC,KAAK,CACjB;MACD,cAAYjC,MAAM,CAACiC,KAAM;MACzB,gBAAa,qBAAqB;MAClCF,QAAQ,EAAE/B,MAAM,aAANA,MAAM,wBAAA2B,iBAAA,GAAN3B,MAAM,CAAE+B,QAAQ,cAAAJ,iBAAA,uBAAhBA,iBAAA,CAAAK,IAAA,CAAAhC,MAAM,EAAa;QAAEvD,OAAO,EAAPA,OAAO;QAAEC,IAAI,EAAJA,IAAI;QAAEe,IAAI,EAAJA,IAAI;QAAEL,YAAY,EAAZA,YAAY;QAAEO,QAAQ,EAAEO,WAAW;QAAEO,IAAI,EAAJA,IAAI;QAAE9B,OAAO,EAAPA;MAAO,CAAE;IAAE,EACzG;EAAA,CACF,CAAC,EACFmC,WAAW,CAAC2B,IAAI,IAAI3B,WAAW,CAAC2B,IAAI,CAACC,MAAM,GAAG,CAAC,iBAC/ClF,KAAA,CAAAwF,aAAA,CAAC1E,6BAA6B;IAC7B4F,OAAO,EAAEpD,WAAW,CAAC2B,IAAI,CAACpC,GAAG,CAAC,UAAC2B,MAAM;MAAA,OAAAzF,aAAA,CAAAA,aAAA,KACjCyF,MAAM;QACTA,MAAM,EAAE,SAAAA,CAAC4B,CAAC;UAAA,OAAK5B,MAAM,CAACA,MAAM,CAAC4B,CAAC,EAAE;YAAEnF,OAAO,EAAPA,OAAO;YAAEoF,MAAM,EAAEvB,OAAO;YAAE5D,IAAI,EAAJA,IAAI;YAAE+B,IAAI,EAAJA,IAAI;YAAE+B,oBAAoB,EAApBA;UAAoB,CAAE,CAAC;QAAA;MAAA;IAAA,CAC9F,CAAE;IACJnD,sBAAsB,EAAEA,sBAAuB;IAC/C,gBAAa,mCAAmC;IAChDV,OAAO,EAAE;MAAEF,OAAO,EAAPA,OAAO;MAAEC,IAAI,EAAJA,IAAI;MAAEe,IAAI,EAAJA,IAAI;MAAEL,YAAY,EAAZA,YAAY;MAAEO,QAAQ,EAAEO,WAAW;MAAEO,IAAI,EAAJA,IAAI;MAAE9B,OAAO,EAAPA;IAAO,CAAG;IACrFwF,kBAAkB,EAAEtH,aAAa,CAAC4B,OAAO;EAAE,EAE5C,EAEAyC,kBAAkB,CAACuC,SAAS,IAAIvC,kBAAkB,CAACuB,IAAI,CAACN,IAAI,CAACO,MAAM,GAAG,CAAC,iBACvElF,KAAA,CAAAwF,aAAA,CAAC3E,iBAAiB;IACjB6F,OAAO,EAAE,GAAAE,MAAA,CAAA9H,kBAAA,EAAA2C,sBAAA,GAAIiC,kBAAkB,CAACuB,IAAI,cAAAxD,sBAAA,uBAAvBA,sBAAA,CAAyBkD,IAAI,GAAA7F,kBAAA,EAAA4C,qBAAA,GAAM2B,gBAAgB,CAAC4B,IAAI,cAAAvD,qBAAA,cAAAA,qBAAA,GAAI,EAAE,GAAG6C,MAAM,CAACsC,OAAO,CAAC,CAAChE,GAAG,CAAC,UAAC2B,MAAM;MAAA,OAAAzF,aAAA,CAAAA,aAAA,KACrGyF,MAAM;QACTA,MAAM,EAAE,SAAAA,CAAC4B,CAAC;UAAA,OAAK5B,MAAM,CAACA,MAAM,CAAC4B,CAAC,EAAE;YAAEnF,OAAO,EAAPA,OAAO;YAAEoF,MAAM,EAAEvB,OAAO;YAAE5D,IAAI,EAAJA,IAAI;YAAE+B,IAAI,EAAJA,IAAI;YAAE+B,oBAAoB,EAApBA;UAAoB,CAAE,CAAC;QAAA;MAAA;IAAA,CAC9F,CAAE;IACJnD,sBAAsB,EAAEA,sBAAuB;IAC/C,gBAAa,6BAA6B;IAC1CV,OAAO,EAAE;MAAEF,OAAO,EAAPA,OAAO;MAAEC,IAAI,EAAJA,IAAI;MAAEe,IAAI,EAAJA,IAAI;MAAEL,YAAY,EAAZA,YAAY;MAAEO,QAAQ,EAAEO,WAAW;MAAEO,IAAI,EAAJA,IAAI;MAAE9B,OAAO,EAAPA;IAAO,CAAG;IACrFwF,kBAAkB,EAAEtH,aAAa,CAAC4B,OAAO;EAAE,EAGtB,CAAC;AAE3B,CAAC;AAvKDxC,MAAA,CAAOqI,aAAY,eAyKJ7G,IAAI,CAACT,cAAc,CAzKb","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"ff6517d89e6e261cd1706a6791e212ea3162d0ff"}
