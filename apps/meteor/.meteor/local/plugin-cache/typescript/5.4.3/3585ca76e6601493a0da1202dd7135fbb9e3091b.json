{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebarv2/RoomList/useSidebarListNavigation.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/sidebarv2/RoomList/useSidebarListNavigation.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebarv2/RoomList/useSidebarListNavigation.ts","inputSourceMap":{"version":3,"file":"client/sidebarv2/RoomList/useSidebarListNavigation.ts","sourceRoot":"","sources":["client/sidebarv2/RoomList/useSidebarListNavigation.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AACpD,OAAO,EAAE,WAAW,EAAE,MAAM,OAAO,CAAC;AAEpC,MAAM,UAAU,GAAG,CAAC,IAAiB,EAAE,EAAE,CAAE,IAAoB,CAAC,SAAS,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAC;AAC1G,MAAM,cAAc,GAAG,CAAC,IAAiB,EAAE,EAAE,CAAE,IAAoB,CAAC,SAAS,CAAC,QAAQ,CAAC,2BAA2B,CAAC,CAAC;AAEpH;;;GAGG;AACH,MAAM,CAAC,MAAM,wBAAwB,GAAG,GAAG,EAAE;IAC5C,MAAM,uBAAuB,GAAG,eAAe,EAAE,CAAC;IAElD,MAAM,cAAc,GAAG,WAAW,CACjC,CAAC,IAAwB,EAAE,EAAE;QAC5B,IAAI,eAAe,GAAuB,IAAI,CAAC;QAE/C,IAAI,CAAC,IAAI,EAAE,CAAC;YACX,OAAO;QACR,CAAC;QAED,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,EAAE;YACtC,IAAI,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;gBACf,OAAO;YACR,CAAC;YAED,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC;gBAC3B,OAAO;YACR,CAAC;YAED,IAAI,CAAC,CAAC,GAAG,KAAK,KAAK,EAAE,CAAC;gBACrB,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;gBAEpB,IAAI,CAAC,CAAC,QAAQ,EAAE,CAAC;oBAChB,uBAAuB,CAAC,aAAa,CAAC;wBACrC,MAAM,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;qBAC5D,CAAC,CAAC;gBACJ,CAAC;qBAAM,IAAI,cAAc,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC;oBACrC,uBAAuB,CAAC,SAAS,CAAC;wBACjC,MAAM,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;qBAC5D,CAAC,CAAC;gBACJ,CAAC;qBAAM,CAAC;oBACP,uBAAuB,CAAC,SAAS,CAAC;wBACjC,MAAM,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC;qBACnC,CAAC,CAAC;gBACJ,CAAC;YACF,CAAC;YAED,IAAI,CAAC,CAAC,GAAG,KAAK,SAAS,IAAI,CAAC,CAAC,GAAG,KAAK,WAAW,EAAE,CAAC;gBAClD,IAAI,CAAC,CAAC,GAAG,KAAK,SAAS,EAAE,CAAC;oBACzB,uBAAuB,CAAC,aAAa,CAAC,EAAE,MAAM,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC/E,CAAC;gBAED,IAAI,CAAC,CAAC,GAAG,KAAK,WAAW,EAAE,CAAC;oBAC3B,uBAAuB,CAAC,SAAS,CAAC,EAAE,MAAM,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC3E,CAAC;gBAED,eAAe,GAAG,QAAQ,CAAC,aAA4B,CAAC;YACzD,CAAC;QACF,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gBAAgB,CACpB,MAAM,EACN,CAAC,CAAC,EAAE,EAAE;YACL,IACC,CAAE,CAAC,CAAC,aAA6B,EAAE,SAAS,CAAC,QAAQ,CAAC,eAAe,CAAC;gBACtE,CAAC,CAAC,CAAC,CAAC,aAAa,YAAY,WAAW,IAAI,CAAC,CAAC,aAAa,YAAY,WAAW,CAAC,EAClF,CAAC;gBACF,OAAO;YACR,CAAC;YAED,IAAI,CAAC,CAAC,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;gBACpE,eAAe,GAAG,CAAC,CAAC,MAAqB,CAAC;YAC3C,CAAC;QACF,CAAC,EACD,EAAE,OAAO,EAAE,IAAI,EAAE,CACjB,CAAC;QAEF,IAAI,CAAC,gBAAgB,CACpB,OAAO,EACP,CAAC,CAAC,EAAE,EAAE;YACL,MAAM,mBAAmB,GAAI,CAAC,CAAC,MAAsB,EAAE,SAAS,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;YAC3F,IAAI,CAAC,mBAAmB,IAAI,CAAC,CAAC,CAAC,CAAC,aAAa,YAAY,WAAW,IAAI,CAAC,CAAC,aAAa,YAAY,WAAW,CAAC,EAAE,CAAC;gBACjH,OAAO;YACR,CAAC;YAED,IAAI,eAAe,IAAI,CAAC,CAAC,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAqB,CAAC,EAAE,CAAC;gBAC7G,eAAe,EAAE,KAAK,EAAE,CAAC;YAC1B,CAAC;QACF,CAAC,EACD,EAAE,OAAO,EAAE,IAAI,EAAE,CACjB,CAAC;IACH,CAAC,EACD,CAAC,uBAAuB,CAAC,CACzB,CAAC;IAEF,OAAO,EAAE,cAAc,EAAE,CAAC;AAC3B,CAAC,CAAC","sourcesContent":["import { useFocusManager } from '@react-aria/focus';\nimport { useCallback } from 'react';\n\nconst isListItem = (node: EventTarget) => (node as HTMLElement).classList.contains('rcx-sidebar-v2-item');\nconst isListItemMenu = (node: EventTarget) => (node as HTMLElement).classList.contains('rcx-sidebar-v2-item__menu');\n\n/**\n * Custom hook to provide the sidebar navigation by keyboard.\n * @param ref - A ref to the message list DOM element.\n */\nexport const useSidebarListNavigation = () => {\n\tconst sidebarListFocusManager = useFocusManager();\n\n\tconst sidebarListRef = useCallback(\n\t\t(node: HTMLElement | null) => {\n\t\t\tlet lastItemFocused: HTMLElement | null = null;\n\n\t\t\tif (!node) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnode.addEventListener('keydown', (e) => {\n\t\t\t\tif (!e.target) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!isListItem(e.target)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.key === 'Tab') {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\tsidebarListFocusManager.focusPrevious({\n\t\t\t\t\t\t\taccept: (node) => !isListItem(node) && !isListItemMenu(node),\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (isListItemMenu(e.target)) {\n\t\t\t\t\t\tsidebarListFocusManager.focusNext({\n\t\t\t\t\t\t\taccept: (node) => !isListItem(node) && !isListItemMenu(node),\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsidebarListFocusManager.focusNext({\n\t\t\t\t\t\t\taccept: (node) => !isListItem(node),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (e.key === 'ArrowUp' || e.key === 'ArrowDown') {\n\t\t\t\t\tif (e.key === 'ArrowUp') {\n\t\t\t\t\t\tsidebarListFocusManager.focusPrevious({ accept: (node) => isListItem(node) });\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e.key === 'ArrowDown') {\n\t\t\t\t\t\tsidebarListFocusManager.focusNext({ accept: (node) => isListItem(node) });\n\t\t\t\t\t}\n\n\t\t\t\t\tlastItemFocused = document.activeElement as HTMLElement;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.addEventListener(\n\t\t\t\t'blur',\n\t\t\t\t(e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!(e.relatedTarget as HTMLElement)?.classList.contains('focus-visible') ||\n\t\t\t\t\t\t!(e.currentTarget instanceof HTMLElement && e.relatedTarget instanceof HTMLElement)\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!e.currentTarget.contains(e.relatedTarget) && !lastItemFocused) {\n\t\t\t\t\t\tlastItemFocused = e.target as HTMLElement;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ capture: true },\n\t\t\t);\n\n\t\t\tnode.addEventListener(\n\t\t\t\t'focus',\n\t\t\t\t(e) => {\n\t\t\t\t\tconst triggeredByKeyboard = (e.target as HTMLElement)?.classList.contains('focus-visible');\n\t\t\t\t\tif (!triggeredByKeyboard || !(e.currentTarget instanceof HTMLElement && e.relatedTarget instanceof HTMLElement)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (lastItemFocused && !e.currentTarget.contains(e.relatedTarget) && node.contains(e.target as HTMLElement)) {\n\t\t\t\t\t\tlastItemFocused?.focus();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ capture: true },\n\t\t\t);\n\t\t},\n\t\t[sidebarListFocusManager],\n\t);\n\n\treturn { sidebarListRef };\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/sidebarv2/RoomList/useSidebarListNavigation.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/sidebarv2/RoomList/useSidebarListNavigation.ts","inputSourceMap":{"version":3,"file":"client/sidebarv2/RoomList/useSidebarListNavigation.ts","sourceRoot":"","sources":["client/sidebarv2/RoomList/useSidebarListNavigation.ts"],"names":[],"mappings":"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","sourcesContent":["import { useFocusManager } from '@react-aria/focus';\nimport { useCallback } from 'react';\n\nconst isListItem = (node: EventTarget) => (node as HTMLElement).classList.contains('rcx-sidebar-v2-item');\nconst isListItemMenu = (node: EventTarget) => (node as HTMLElement).classList.contains('rcx-sidebar-v2-item__menu');\n\n/**\n * Custom hook to provide the sidebar navigation by keyboard.\n * @param ref - A ref to the message list DOM element.\n */\nexport const useSidebarListNavigation = () => {\n\tconst sidebarListFocusManager = useFocusManager();\n\n\tconst sidebarListRef = useCallback(\n\t\t(node: HTMLElement | null) => {\n\t\t\tlet lastItemFocused: HTMLElement | null = null;\n\n\t\t\tif (!node) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnode.addEventListener('keydown', (e) => {\n\t\t\t\tif (!e.target) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!isListItem(e.target)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.key === 'Tab') {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\tsidebarListFocusManager.focusPrevious({\n\t\t\t\t\t\t\taccept: (node) => !isListItem(node) && !isListItemMenu(node),\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (isListItemMenu(e.target)) {\n\t\t\t\t\t\tsidebarListFocusManager.focusNext({\n\t\t\t\t\t\t\taccept: (node) => !isListItem(node) && !isListItemMenu(node),\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsidebarListFocusManager.focusNext({\n\t\t\t\t\t\t\taccept: (node) => !isListItem(node),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (e.key === 'ArrowUp' || e.key === 'ArrowDown') {\n\t\t\t\t\tif (e.key === 'ArrowUp') {\n\t\t\t\t\t\tsidebarListFocusManager.focusPrevious({ accept: (node) => isListItem(node) });\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e.key === 'ArrowDown') {\n\t\t\t\t\t\tsidebarListFocusManager.focusNext({ accept: (node) => isListItem(node) });\n\t\t\t\t\t}\n\n\t\t\t\t\tlastItemFocused = document.activeElement as HTMLElement;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.addEventListener(\n\t\t\t\t'blur',\n\t\t\t\t(e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!(e.relatedTarget as HTMLElement)?.classList.contains('focus-visible') ||\n\t\t\t\t\t\t!(e.currentTarget instanceof HTMLElement && e.relatedTarget instanceof HTMLElement)\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!e.currentTarget.contains(e.relatedTarget) && !lastItemFocused) {\n\t\t\t\t\t\tlastItemFocused = e.target as HTMLElement;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ capture: true },\n\t\t\t);\n\n\t\t\tnode.addEventListener(\n\t\t\t\t'focus',\n\t\t\t\t(e) => {\n\t\t\t\t\tconst triggeredByKeyboard = (e.target as HTMLElement)?.classList.contains('focus-visible');\n\t\t\t\t\tif (!triggeredByKeyboard || !(e.currentTarget instanceof HTMLElement && e.relatedTarget instanceof HTMLElement)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (lastItemFocused && !e.currentTarget.contains(e.relatedTarget) && node.contains(e.target as HTMLElement)) {\n\t\t\t\t\t\tlastItemFocused?.focus();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ capture: true },\n\t\t\t);\n\t\t},\n\t\t[sidebarListFocusManager],\n\t);\n\n\treturn { sidebarListRef };\n};\n"]}}},"code":"module.export({\n  useSidebarListNavigation: () => useSidebarListNavigation\n});\nlet useFocusManager;\nmodule.link(\"@react-aria/focus\", {\n  useFocusManager(v) {\n    useFocusManager = v;\n  }\n}, 0);\nlet useCallback;\nmodule.link(\"react\", {\n  useCallback(v) {\n    useCallback = v;\n  }\n}, 1);\nconst isListItem = node => node.classList.contains('rcx-sidebar-v2-item');\nconst isListItemMenu = node => node.classList.contains('rcx-sidebar-v2-item__menu');\n/**\n * Custom hook to provide the sidebar navigation by keyboard.\n * @param ref - A ref to the message list DOM element.\n */\nconst useSidebarListNavigation = () => {\n  const sidebarListFocusManager = useFocusManager();\n  const sidebarListRef = useCallback(node => {\n    let lastItemFocused = null;\n    if (!node) {\n      return;\n    }\n    node.addEventListener('keydown', e => {\n      if (!e.target) {\n        return;\n      }\n      if (!isListItem(e.target)) {\n        return;\n      }\n      if (e.key === 'Tab') {\n        e.preventDefault();\n        e.stopPropagation();\n        if (e.shiftKey) {\n          sidebarListFocusManager.focusPrevious({\n            accept: node => !isListItem(node) && !isListItemMenu(node)\n          });\n        } else if (isListItemMenu(e.target)) {\n          sidebarListFocusManager.focusNext({\n            accept: node => !isListItem(node) && !isListItemMenu(node)\n          });\n        } else {\n          sidebarListFocusManager.focusNext({\n            accept: node => !isListItem(node)\n          });\n        }\n      }\n      if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {\n        if (e.key === 'ArrowUp') {\n          sidebarListFocusManager.focusPrevious({\n            accept: node => isListItem(node)\n          });\n        }\n        if (e.key === 'ArrowDown') {\n          sidebarListFocusManager.focusNext({\n            accept: node => isListItem(node)\n          });\n        }\n        lastItemFocused = document.activeElement;\n      }\n    });\n    node.addEventListener('blur', e => {\n      var _e$relatedTarget;\n      if (!((_e$relatedTarget = e.relatedTarget) !== null && _e$relatedTarget !== void 0 && _e$relatedTarget.classList.contains('focus-visible')) || !(e.currentTarget instanceof HTMLElement && e.relatedTarget instanceof HTMLElement)) {\n        return;\n      }\n      if (!e.currentTarget.contains(e.relatedTarget) && !lastItemFocused) {\n        lastItemFocused = e.target;\n      }\n    }, {\n      capture: true\n    });\n    node.addEventListener('focus', e => {\n      var _e$target;\n      const triggeredByKeyboard = (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.classList.contains('focus-visible');\n      if (!triggeredByKeyboard || !(e.currentTarget instanceof HTMLElement && e.relatedTarget instanceof HTMLElement)) {\n        return;\n      }\n      if (lastItemFocused && !e.currentTarget.contains(e.relatedTarget) && node.contains(e.target)) {\n        var _lastItemFocused;\n        (_lastItemFocused = lastItemFocused) === null || _lastItemFocused === void 0 ? void 0 : _lastItemFocused.focus();\n      }\n    }, {\n      capture: true\n    });\n  }, [sidebarListFocusManager]);\n  return {\n    sidebarListRef\n  };\n};","map":{"version":3,"names":["module","export","useSidebarListNavigation","useFocusManager","link","v","useCallback","isListItem","node","classList","contains","isListItemMenu","sidebarListFocusManager","sidebarListRef","lastItemFocused","addEventListener","e","target","key","preventDefault","stopPropagation","shiftKey","focusPrevious","accept","focusNext","document","activeElement","_e$relatedTarget","relatedTarget","currentTarget","HTMLElement","capture","_e$target","triggeredByKeyboard","_lastItemFocused","focus"],"sources":["client/sidebarv2/RoomList/useSidebarListNavigation.ts"],"sourcesContent":["import { useFocusManager } from '@react-aria/focus';\nimport { useCallback } from 'react';\n\nconst isListItem = (node: EventTarget) => (node as HTMLElement).classList.contains('rcx-sidebar-v2-item');\nconst isListItemMenu = (node: EventTarget) => (node as HTMLElement).classList.contains('rcx-sidebar-v2-item__menu');\n\n/**\n * Custom hook to provide the sidebar navigation by keyboard.\n * @param ref - A ref to the message list DOM element.\n */\nexport const useSidebarListNavigation = () => {\n\tconst sidebarListFocusManager = useFocusManager();\n\n\tconst sidebarListRef = useCallback(\n\t\t(node: HTMLElement | null) => {\n\t\t\tlet lastItemFocused: HTMLElement | null = null;\n\n\t\t\tif (!node) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnode.addEventListener('keydown', (e) => {\n\t\t\t\tif (!e.target) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!isListItem(e.target)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.key === 'Tab') {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\tsidebarListFocusManager.focusPrevious({\n\t\t\t\t\t\t\taccept: (node) => !isListItem(node) && !isListItemMenu(node),\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (isListItemMenu(e.target)) {\n\t\t\t\t\t\tsidebarListFocusManager.focusNext({\n\t\t\t\t\t\t\taccept: (node) => !isListItem(node) && !isListItemMenu(node),\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsidebarListFocusManager.focusNext({\n\t\t\t\t\t\t\taccept: (node) => !isListItem(node),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (e.key === 'ArrowUp' || e.key === 'ArrowDown') {\n\t\t\t\t\tif (e.key === 'ArrowUp') {\n\t\t\t\t\t\tsidebarListFocusManager.focusPrevious({ accept: (node) => isListItem(node) });\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e.key === 'ArrowDown') {\n\t\t\t\t\t\tsidebarListFocusManager.focusNext({ accept: (node) => isListItem(node) });\n\t\t\t\t\t}\n\n\t\t\t\t\tlastItemFocused = document.activeElement as HTMLElement;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tnode.addEventListener(\n\t\t\t\t'blur',\n\t\t\t\t(e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!(e.relatedTarget as HTMLElement)?.classList.contains('focus-visible') ||\n\t\t\t\t\t\t!(e.currentTarget instanceof HTMLElement && e.relatedTarget instanceof HTMLElement)\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!e.currentTarget.contains(e.relatedTarget) && !lastItemFocused) {\n\t\t\t\t\t\tlastItemFocused = e.target as HTMLElement;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ capture: true },\n\t\t\t);\n\n\t\t\tnode.addEventListener(\n\t\t\t\t'focus',\n\t\t\t\t(e) => {\n\t\t\t\t\tconst triggeredByKeyboard = (e.target as HTMLElement)?.classList.contains('focus-visible');\n\t\t\t\t\tif (!triggeredByKeyboard || !(e.currentTarget instanceof HTMLElement && e.relatedTarget instanceof HTMLElement)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (lastItemFocused && !e.currentTarget.contains(e.relatedTarget) && node.contains(e.target as HTMLElement)) {\n\t\t\t\t\t\tlastItemFocused?.focus();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ capture: true },\n\t\t\t);\n\t\t},\n\t\t[sidebarListFocusManager],\n\t);\n\n\treturn { sidebarListRef };\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"3585ca76e6601493a0da1202dd7135fbb9e3091b"}
