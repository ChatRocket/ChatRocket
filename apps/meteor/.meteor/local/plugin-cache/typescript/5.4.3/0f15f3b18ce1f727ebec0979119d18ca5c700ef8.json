{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/AppDetailsPage/tabs/AppRequests/AppRequests.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/marketplace/AppDetailsPage/tabs/AppRequests/AppRequests.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/AppDetailsPage/tabs/AppRequests/AppRequests.tsx","inputSourceMap":{"version":3,"file":"client/views/marketplace/AppDetailsPage/tabs/AppRequests/AppRequests.tsx","sourceRoot":"","sources":["client/views/marketplace/AppDetailsPage/tabs/AppRequests/AppRequests.tsx"],"names":[],"mappings":"AACA,OAAO,EAAE,GAAG,EAAE,UAAU,EAAE,MAAM,EAAE,cAAc,EAAE,WAAW,EAAE,MAAM,uBAAuB,CAAC;AAC7F,OAAO,EAAE,WAAW,EAAE,MAAM,0BAA0B,CAAC;AACvD,OAAO,EAAE,WAAW,EAAE,MAAM,uBAAuB,CAAC;AAEpD,OAAO,KAAK,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AACnD,OAAO,EAAE,cAAc,EAAE,MAAM,eAAe,CAAC;AAE/C,OAAO,EAAE,aAAa,EAAE,MAAM,6CAA6C,CAAC;AAC5E,OAAO,EAAE,WAAW,EAAE,MAAM,gCAAgC,CAAC;AAC7D,OAAO,EAAE,cAAc,EAAE,MAAM,+BAA+B,CAAC;AAC/D,OAAO,cAAc,MAAM,kBAAkB,CAAC;AAC9C,OAAO,kBAAkB,MAAM,sBAAsB,CAAC;AAItD,MAAM,WAAW,GAAG,CAAC,EAAE,EAAE,EAAE,WAAW,EAA2C,EAAgB,EAAE;IAClG,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAe,EAAE,CAAC,CAAC;IACrD,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,QAAQ,CAAS,CAAC,CAAC,CAAC;IAEhD,MAAM,oBAAoB,GAAG,cAAc,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;IAC/D,MAAM,EAAE,CAAC,EAAE,GAAG,cAAc,EAAE,CAAC;IAE/B,MAAM,iBAAiB,GAAG,CAAC,kBAAgD,EAAE,EAAE,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;IAC7G,MAAM,YAAY,GAAG,CAAC,kBAA0C,EAAE,EAAE,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC;IAEnG,MAAM,UAAU,GAAG,aAAa,EAAE,CAAC;IACnC,MAAM,QAAQ,GAAG,WAAW,CAAC,MAAM,EAAE,8BAA8B,CAAC,CAAC;IACrE,MAAM,qBAAqB,GAAG,WAAW,CAAC;QACzC,WAAW,EAAE,CAAC,2BAA2B,CAAC;QAC1C,UAAU,EAAE,CAAC,cAA6B,EAAE,EAAE,CAAC,QAAQ,CAAC,EAAE,cAAc,EAAE,CAAC;QAC3E,KAAK,EAAE,KAAK;KACZ,CAAC,CAAC;IACH,SAAS,CAAC,GAAG,EAAE;QACd,OAAO,GAAG,EAAE;YACX,IAAI,WAAW,IAAI,oBAAoB,CAAC,SAAS,EAAE,CAAC;gBACnD,MAAM,cAAc,GAAG,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;gBAEtG,IAAI,cAAc,CAAC,MAAM,EAAE,CAAC;oBAC3B,qBAAqB,CAAC,MAAM,CAAC,cAAc,EAAE;wBAC5C,SAAS,EAAE,GAAG,EAAE;4BACf,WAAW,CAAC,cAAc,CAAC,EAAE,QAAQ,EAAE,CAAC,oBAAoB,CAAC,EAAE,CAAC,CAAC;4BACjE,UAAU,EAAE,CAAC;wBACd,CAAC;qBACD,CAAC,CAAC;gBACJ,CAAC;YACF,CAAC;QACF,CAAC,CAAC;QACF,uDAAuD;IACxD,CAAC,EAAE,CAAC,WAAW,EAAE,oBAAoB,CAAC,SAAS,EAAE,oBAAoB,EAAE,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC;IAE1F,IAAI,oBAAoB,CAAC,SAAS,EAAE,CAAC;QACpC,OAAO,CACN,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CACzD;IAAA,CAAC,kBAAkB,CAAC,AAAD,EACpB;GAAA,EAAE,GAAG,CAAC,CACN,CAAC;IACH,CAAC;IAED,OAAO,CACN,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,aAAa,CAAC,QAAQ,CAClD;GAAA,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,GAAG,CACtE;IAAA,CAAC,oBAAoB,CAAC,SAAS,IAAI,oBAAoB,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC,CAC3E,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,CAC/C,CAAC,cAAc,CACd,GAAG,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAChB,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CACnB,IAAI,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAC7B,WAAW,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CACjC,OAAO,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,CACzB,QAAQ,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,EACpC,CACF,CAAC,CACF,CAAC,CAAC,CAAC,CACH,CAAC,MAAM,CACN;MAAA,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,EAAE,WAAW,CAC5C;MAAA,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,2BAA2B,CAAC,CAAC,EAAE,cAAc,CACjE;KAAA,EAAE,MAAM,CAAC,CACT,CACF;GAAA,EAAE,GAAG,CACL;GAAA,CAAC,oBAAoB,CAAC,SAAS,IAAI,oBAAoB,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,IAAI,CAC5E,CAAC,UAAU,CACV,OAAO,CACP,KAAK,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAC5C,YAAY,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CACnD,OAAO,CAAC,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAC/C,iBAAiB,CAAC,CAAC,iBAAiB,CAAC,CACrC,YAAY,CAAC,CAAC,YAAY,CAAC,EAC1B,CACF,CACF;EAAA,EAAE,GAAG,CAAC,CACN,CAAC;AACH,CAAC,CAAC;AAEF,eAAe,WAAW,CAAC","sourcesContent":["import type { App } from '@rocket.chat/core-typings';\nimport { Box, Pagination, States, StatesSubtitle, StatesTitle } from '@rocket.chat/fuselage';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useMutation } from '@tanstack/react-query';\nimport type { ReactElement, SetStateAction } from 'react';\nimport React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useAppsReload } from '../../../../../contexts/hooks/useAppsReload';\nimport { queryClient } from '../../../../../lib/queryClient';\nimport { useAppRequests } from '../../../hooks/useAppRequests';\nimport AppRequestItem from './AppRequestItem';\nimport AppRequestsLoading from './AppRequestsLoading';\n\ntype itemsPerPage = 25 | 50 | 100;\n\nconst AppRequests = ({ id, isAdminUser }: { id: App['id']; isAdminUser: boolean }): ReactElement => {\n\tconst [limit, setLimit] = useState<itemsPerPage>(25);\n\tconst [offset, setOffset] = useState<number>(0);\n\n\tconst paginatedAppRequests = useAppRequests(id, limit, offset);\n\tconst { t } = useTranslation();\n\n\tconst onSetItemsPerPage = (itemsPerPageOption: SetStateAction<itemsPerPage>) => setLimit(itemsPerPageOption);\n\tconst onSetCurrent = (currentItemsOption: SetStateAction<number>) => setOffset(currentItemsOption);\n\n\tconst reloadApps = useAppsReload();\n\tconst markSeen = useEndpoint('POST', '/apps/app-request/markAsSeen');\n\tconst markAppRequestsAsSeen = useMutation({\n\t\tmutationKey: ['mark-app-requests-as-seen'],\n\t\tmutationFn: (unseenRequests: Array<string>) => markSeen({ unseenRequests }),\n\t\tretry: false,\n\t});\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (isAdminUser && paginatedAppRequests.isSuccess) {\n\t\t\t\tconst unseenRequests = paginatedAppRequests.data.data.filter(({ seen }) => !seen).map(({ id }) => id);\n\n\t\t\t\tif (unseenRequests.length) {\n\t\t\t\t\tmarkAppRequestsAsSeen.mutate(unseenRequests, {\n\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\tqueryClient.refetchQueries({ queryKey: ['app-requests-stats'] });\n\t\t\t\t\t\t\treloadApps();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [isAdminUser, paginatedAppRequests.isSuccess, paginatedAppRequests?.data, reloadApps]);\n\n\tif (paginatedAppRequests.isLoading) {\n\t\treturn (\n\t\t\t<Box w='full' maxWidth='x608' marginInline='auto' pbs={36}>\n\t\t\t\t<AppRequestsLoading />\n\t\t\t</Box>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Box h='full' display='flex' flexDirection='column'>\n\t\t\t<Box w='full' maxWidth='x608' marginInline='auto' pbs={36} flexGrow='1'>\n\t\t\t\t{paginatedAppRequests.isSuccess && paginatedAppRequests.data.data?.length ? (\n\t\t\t\t\tpaginatedAppRequests.data.data.map((request) => (\n\t\t\t\t\t\t<AppRequestItem\n\t\t\t\t\t\t\tkey={request.id}\n\t\t\t\t\t\t\tseen={request.seen}\n\t\t\t\t\t\t\tname={request.requester.name}\n\t\t\t\t\t\t\tcreatedDate={request.createdDate}\n\t\t\t\t\t\t\tmessage={request.message}\n\t\t\t\t\t\t\tusername={request.requester.username}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))\n\t\t\t\t) : (\n\t\t\t\t\t<States>\n\t\t\t\t\t\t<StatesTitle>{t('No_requests')}</StatesTitle>\n\t\t\t\t\t\t<StatesSubtitle>{t('App_requests_by_workspace')}</StatesSubtitle>\n\t\t\t\t\t</States>\n\t\t\t\t)}\n\t\t\t</Box>\n\t\t\t{paginatedAppRequests.isSuccess && paginatedAppRequests.data.data?.length && (\n\t\t\t\t<Pagination\n\t\t\t\t\tdivider\n\t\t\t\t\tcount={paginatedAppRequests.data.meta.total}\n\t\t\t\t\titemsPerPage={paginatedAppRequests.data.meta.limit}\n\t\t\t\t\tcurrent={paginatedAppRequests.data.meta.offset}\n\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Box>\n\t);\n};\n\nexport default AppRequests;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"production","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/AppDetailsPage/tabs/AppRequests/AppRequests.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/marketplace/AppDetailsPage/tabs/AppRequests/AppRequests.tsx","inputSourceMap":{"version":3,"file":"client/views/marketplace/AppDetailsPage/tabs/AppRequests/AppRequests.tsx","sourceRoot":"","sources":["client/views/marketplace/AppDetailsPage/tabs/AppRequests/AppRequests.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { App } from '@rocket.chat/core-typings';\nimport { Box, Pagination, States, StatesSubtitle, StatesTitle } from '@rocket.chat/fuselage';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useMutation } from '@tanstack/react-query';\nimport type { ReactElement, SetStateAction } from 'react';\nimport React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useAppsReload } from '../../../../../contexts/hooks/useAppsReload';\nimport { queryClient } from '../../../../../lib/queryClient';\nimport { useAppRequests } from '../../../hooks/useAppRequests';\nimport AppRequestItem from './AppRequestItem';\nimport AppRequestsLoading from './AppRequestsLoading';\n\ntype itemsPerPage = 25 | 50 | 100;\n\nconst AppRequests = ({ id, isAdminUser }: { id: App['id']; isAdminUser: boolean }): ReactElement => {\n\tconst [limit, setLimit] = useState<itemsPerPage>(25);\n\tconst [offset, setOffset] = useState<number>(0);\n\n\tconst paginatedAppRequests = useAppRequests(id, limit, offset);\n\tconst { t } = useTranslation();\n\n\tconst onSetItemsPerPage = (itemsPerPageOption: SetStateAction<itemsPerPage>) => setLimit(itemsPerPageOption);\n\tconst onSetCurrent = (currentItemsOption: SetStateAction<number>) => setOffset(currentItemsOption);\n\n\tconst reloadApps = useAppsReload();\n\tconst markSeen = useEndpoint('POST', '/apps/app-request/markAsSeen');\n\tconst markAppRequestsAsSeen = useMutation({\n\t\tmutationKey: ['mark-app-requests-as-seen'],\n\t\tmutationFn: (unseenRequests: Array<string>) => markSeen({ unseenRequests }),\n\t\tretry: false,\n\t});\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (isAdminUser && paginatedAppRequests.isSuccess) {\n\t\t\t\tconst unseenRequests = paginatedAppRequests.data.data.filter(({ seen }) => !seen).map(({ id }) => id);\n\n\t\t\t\tif (unseenRequests.length) {\n\t\t\t\t\tmarkAppRequestsAsSeen.mutate(unseenRequests, {\n\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\tqueryClient.refetchQueries({ queryKey: ['app-requests-stats'] });\n\t\t\t\t\t\t\treloadApps();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [isAdminUser, paginatedAppRequests.isSuccess, paginatedAppRequests?.data, reloadApps]);\n\n\tif (paginatedAppRequests.isLoading) {\n\t\treturn (\n\t\t\t<Box w='full' maxWidth='x608' marginInline='auto' pbs={36}>\n\t\t\t\t<AppRequestsLoading />\n\t\t\t</Box>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Box h='full' display='flex' flexDirection='column'>\n\t\t\t<Box w='full' maxWidth='x608' marginInline='auto' pbs={36} flexGrow='1'>\n\t\t\t\t{paginatedAppRequests.isSuccess && paginatedAppRequests.data.data?.length ? (\n\t\t\t\t\tpaginatedAppRequests.data.data.map((request) => (\n\t\t\t\t\t\t<AppRequestItem\n\t\t\t\t\t\t\tkey={request.id}\n\t\t\t\t\t\t\tseen={request.seen}\n\t\t\t\t\t\t\tname={request.requester.name}\n\t\t\t\t\t\t\tcreatedDate={request.createdDate}\n\t\t\t\t\t\t\tmessage={request.message}\n\t\t\t\t\t\t\tusername={request.requester.username}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))\n\t\t\t\t) : (\n\t\t\t\t\t<States>\n\t\t\t\t\t\t<StatesTitle>{t('No_requests')}</StatesTitle>\n\t\t\t\t\t\t<StatesSubtitle>{t('App_requests_by_workspace')}</StatesSubtitle>\n\t\t\t\t\t</States>\n\t\t\t\t)}\n\t\t\t</Box>\n\t\t\t{paginatedAppRequests.isSuccess && paginatedAppRequests.data.data?.length && (\n\t\t\t\t<Pagination\n\t\t\t\t\tdivider\n\t\t\t\t\tcount={paginatedAppRequests.data.meta.total}\n\t\t\t\t\titemsPerPage={paginatedAppRequests.data.meta.limit}\n\t\t\t\t\tcurrent={paginatedAppRequests.data.meta.offset}\n\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Box>\n\t);\n};\n\nexport default AppRequests;\n"]}}},"code":"var _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 0);\nvar Box, Pagination, States, StatesSubtitle, StatesTitle;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box: function (v) {\n    Box = v;\n  },\n  Pagination: function (v) {\n    Pagination = v;\n  },\n  States: function (v) {\n    States = v;\n  },\n  StatesSubtitle: function (v) {\n    StatesSubtitle = v;\n  },\n  StatesTitle: function (v) {\n    StatesTitle = v;\n  }\n}, 0);\nvar useEndpoint;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  }\n}, 1);\nvar useMutation;\nmodule.link(\"@tanstack/react-query\", {\n  useMutation: function (v) {\n    useMutation = v;\n  }\n}, 2);\nvar React, useState, useEffect;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useState: function (v) {\n    useState = v;\n  },\n  useEffect: function (v) {\n    useEffect = v;\n  }\n}, 3);\nvar useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation: function (v) {\n    useTranslation = v;\n  }\n}, 4);\nvar useAppsReload;\nmodule.link(\"../../../../../contexts/hooks/useAppsReload\", {\n  useAppsReload: function (v) {\n    useAppsReload = v;\n  }\n}, 5);\nvar queryClient;\nmodule.link(\"../../../../../lib/queryClient\", {\n  queryClient: function (v) {\n    queryClient = v;\n  }\n}, 6);\nvar useAppRequests;\nmodule.link(\"../../../hooks/useAppRequests\", {\n  useAppRequests: function (v) {\n    useAppRequests = v;\n  }\n}, 7);\nvar AppRequestItem;\nmodule.link(\"./AppRequestItem\", {\n  \"default\": function (v) {\n    AppRequestItem = v;\n  }\n}, 8);\nvar AppRequestsLoading;\nmodule.link(\"./AppRequestsLoading\", {\n  \"default\": function (v) {\n    AppRequestsLoading = v;\n  }\n}, 9);\nvar AppRequests = function (_ref) {\n  var _paginatedAppRequests, _paginatedAppRequests2;\n  var id = _ref.id,\n    isAdminUser = _ref.isAdminUser;\n  var _useState = useState(25),\n    _useState2 = _slicedToArray(_useState, 2),\n    limit = _useState2[0],\n    setLimit = _useState2[1];\n  var _useState3 = useState(0),\n    _useState4 = _slicedToArray(_useState3, 2),\n    offset = _useState4[0],\n    setOffset = _useState4[1];\n  var paginatedAppRequests = useAppRequests(id, limit, offset);\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var onSetItemsPerPage = function (itemsPerPageOption) {\n    return setLimit(itemsPerPageOption);\n  };\n  var onSetCurrent = function (currentItemsOption) {\n    return setOffset(currentItemsOption);\n  };\n  var reloadApps = useAppsReload();\n  var markSeen = useEndpoint('POST', '/apps/app-request/markAsSeen');\n  var markAppRequestsAsSeen = useMutation({\n    mutationKey: ['mark-app-requests-as-seen'],\n    mutationFn: function (unseenRequests) {\n      return markSeen({\n        unseenRequests: unseenRequests\n      });\n    },\n    retry: false\n  });\n  useEffect(function () {\n    return function () {\n      if (isAdminUser && paginatedAppRequests.isSuccess) {\n        var unseenRequests = paginatedAppRequests.data.data.filter(function (_ref2) {\n          var seen = _ref2.seen;\n          return !seen;\n        }).map(function (_ref3) {\n          var id = _ref3.id;\n          return id;\n        });\n        if (unseenRequests.length) {\n          markAppRequestsAsSeen.mutate(unseenRequests, {\n            onSuccess: function () {\n              queryClient.refetchQueries({\n                queryKey: ['app-requests-stats']\n              });\n              reloadApps();\n            }\n          });\n        }\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isAdminUser, paginatedAppRequests.isSuccess, paginatedAppRequests === null || paginatedAppRequests === void 0 ? void 0 : paginatedAppRequests.data, reloadApps]);\n  if (paginatedAppRequests.isLoading) {\n    return /*#__PURE__*/React.createElement(Box, {\n      w: \"full\",\n      maxWidth: \"x608\",\n      marginInline: \"auto\",\n      pbs: 36\n    }, /*#__PURE__*/React.createElement(AppRequestsLoading, null));\n  }\n  return /*#__PURE__*/React.createElement(Box, {\n    h: \"full\",\n    display: \"flex\",\n    flexDirection: \"column\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    w: \"full\",\n    maxWidth: \"x608\",\n    marginInline: \"auto\",\n    pbs: 36,\n    flexGrow: \"1\"\n  }, paginatedAppRequests.isSuccess && (_paginatedAppRequests = paginatedAppRequests.data.data) !== null && _paginatedAppRequests !== void 0 && _paginatedAppRequests.length ? paginatedAppRequests.data.data.map(function (request) {\n    return /*#__PURE__*/React.createElement(AppRequestItem, {\n      key: request.id,\n      seen: request.seen,\n      name: request.requester.name,\n      createdDate: request.createdDate,\n      message: request.message,\n      username: request.requester.username\n    });\n  }) : /*#__PURE__*/React.createElement(States, null, /*#__PURE__*/React.createElement(StatesTitle, null, t('No_requests')), /*#__PURE__*/React.createElement(StatesSubtitle, null, t('App_requests_by_workspace')))), paginatedAppRequests.isSuccess && ((_paginatedAppRequests2 = paginatedAppRequests.data.data) === null || _paginatedAppRequests2 === void 0 ? void 0 : _paginatedAppRequests2.length) && /*#__PURE__*/React.createElement(Pagination, {\n    divider: true,\n    count: paginatedAppRequests.data.meta.total,\n    itemsPerPage: paginatedAppRequests.data.meta.limit,\n    current: paginatedAppRequests.data.meta.offset,\n    onSetItemsPerPage: onSetItemsPerPage,\n    onSetCurrent: onSetCurrent\n  }));\n};\nmodule.exportDefault(AppRequests);","map":{"version":3,"names":["_slicedToArray","module","link","default","v","Box","Pagination","States","StatesSubtitle","StatesTitle","useEndpoint","useMutation","React","useState","useEffect","useTranslation","useAppsReload","queryClient","useAppRequests","AppRequestItem","AppRequestsLoading","AppRequests","_ref","_paginatedAppRequests","_paginatedAppRequests2","id","isAdminUser","_useState","_useState2","limit","setLimit","_useState3","_useState4","offset","setOffset","paginatedAppRequests","_useTranslation","t","onSetItemsPerPage","itemsPerPageOption","onSetCurrent","currentItemsOption","reloadApps","markSeen","markAppRequestsAsSeen","mutationKey","mutationFn","unseenRequests","retry","isSuccess","data","filter","_ref2","seen","map","_ref3","length","mutate","onSuccess","refetchQueries","queryKey","isLoading","createElement","w","maxWidth","marginInline","pbs","h","display","flexDirection","flexGrow","request","key","name","requester","createdDate","message","username","divider","count","meta","total","itemsPerPage","current","exportDefault"],"sources":["client/views/marketplace/AppDetailsPage/tabs/AppRequests/AppRequests.tsx"],"sourcesContent":["import type { App } from '@rocket.chat/core-typings';\nimport { Box, Pagination, States, StatesSubtitle, StatesTitle } from '@rocket.chat/fuselage';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useMutation } from '@tanstack/react-query';\nimport type { ReactElement, SetStateAction } from 'react';\nimport React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport { useAppsReload } from '../../../../../contexts/hooks/useAppsReload';\nimport { queryClient } from '../../../../../lib/queryClient';\nimport { useAppRequests } from '../../../hooks/useAppRequests';\nimport AppRequestItem from './AppRequestItem';\nimport AppRequestsLoading from './AppRequestsLoading';\n\ntype itemsPerPage = 25 | 50 | 100;\n\nconst AppRequests = ({ id, isAdminUser }: { id: App['id']; isAdminUser: boolean }): ReactElement => {\n\tconst [limit, setLimit] = useState<itemsPerPage>(25);\n\tconst [offset, setOffset] = useState<number>(0);\n\n\tconst paginatedAppRequests = useAppRequests(id, limit, offset);\n\tconst { t } = useTranslation();\n\n\tconst onSetItemsPerPage = (itemsPerPageOption: SetStateAction<itemsPerPage>) => setLimit(itemsPerPageOption);\n\tconst onSetCurrent = (currentItemsOption: SetStateAction<number>) => setOffset(currentItemsOption);\n\n\tconst reloadApps = useAppsReload();\n\tconst markSeen = useEndpoint('POST', '/apps/app-request/markAsSeen');\n\tconst markAppRequestsAsSeen = useMutation({\n\t\tmutationKey: ['mark-app-requests-as-seen'],\n\t\tmutationFn: (unseenRequests: Array<string>) => markSeen({ unseenRequests }),\n\t\tretry: false,\n\t});\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (isAdminUser && paginatedAppRequests.isSuccess) {\n\t\t\t\tconst unseenRequests = paginatedAppRequests.data.data.filter(({ seen }) => !seen).map(({ id }) => id);\n\n\t\t\t\tif (unseenRequests.length) {\n\t\t\t\t\tmarkAppRequestsAsSeen.mutate(unseenRequests, {\n\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\tqueryClient.refetchQueries({ queryKey: ['app-requests-stats'] });\n\t\t\t\t\t\t\treloadApps();\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [isAdminUser, paginatedAppRequests.isSuccess, paginatedAppRequests?.data, reloadApps]);\n\n\tif (paginatedAppRequests.isLoading) {\n\t\treturn (\n\t\t\t<Box w='full' maxWidth='x608' marginInline='auto' pbs={36}>\n\t\t\t\t<AppRequestsLoading />\n\t\t\t</Box>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Box h='full' display='flex' flexDirection='column'>\n\t\t\t<Box w='full' maxWidth='x608' marginInline='auto' pbs={36} flexGrow='1'>\n\t\t\t\t{paginatedAppRequests.isSuccess && paginatedAppRequests.data.data?.length ? (\n\t\t\t\t\tpaginatedAppRequests.data.data.map((request) => (\n\t\t\t\t\t\t<AppRequestItem\n\t\t\t\t\t\t\tkey={request.id}\n\t\t\t\t\t\t\tseen={request.seen}\n\t\t\t\t\t\t\tname={request.requester.name}\n\t\t\t\t\t\t\tcreatedDate={request.createdDate}\n\t\t\t\t\t\t\tmessage={request.message}\n\t\t\t\t\t\t\tusername={request.requester.username}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))\n\t\t\t\t) : (\n\t\t\t\t\t<States>\n\t\t\t\t\t\t<StatesTitle>{t('No_requests')}</StatesTitle>\n\t\t\t\t\t\t<StatesSubtitle>{t('App_requests_by_workspace')}</StatesSubtitle>\n\t\t\t\t\t</States>\n\t\t\t\t)}\n\t\t\t</Box>\n\t\t\t{paginatedAppRequests.isSuccess && paginatedAppRequests.data.data?.length && (\n\t\t\t\t<Pagination\n\t\t\t\t\tdivider\n\t\t\t\t\tcount={paginatedAppRequests.data.meta.total}\n\t\t\t\t\titemsPerPage={paginatedAppRequests.data.meta.limit}\n\t\t\t\t\tcurrent={paginatedAppRequests.data.meta.offset}\n\t\t\t\t\tonSetItemsPerPage={onSetItemsPerPage}\n\t\t\t\t\tonSetCurrent={onSetCurrent}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Box>\n\t);\n};\n\nexport default AppRequests;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"0f15f3b18ce1f727ebec0979119d18ca5c700ef8"}
