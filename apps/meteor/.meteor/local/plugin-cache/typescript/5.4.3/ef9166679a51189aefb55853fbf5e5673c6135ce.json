{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/modals/ForwardMessageModal/ForwardMessageModal.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/room/modals/ForwardMessageModal/ForwardMessageModal.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/modals/ForwardMessageModal/ForwardMessageModal.tsx","inputSourceMap":{"version":3,"file":"client/views/room/modals/ForwardMessageModal/ForwardMessageModal.tsx","sourceRoot":"","sources":["client/views/room/modals/ForwardMessageModal/ForwardMessageModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, MessageQuoteAttachment } from '@rocket.chat/core-typings';\nimport { Modal, Field, FieldGroup, FieldLabel, FieldRow, FieldHint, ButtonGroup, Button } from '@rocket.chat/fuselage';\nimport { useClipboard, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation, useEndpoint, useToastMessageDispatch, useUserAvatarPath } from '@rocket.chat/ui-contexts';\nimport { useMutation } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { memo } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport UserAndRoomAutoCompleteMultiple from '../../../../components/UserAndRoomAutoCompleteMultiple';\nimport { QuoteAttachment } from '../../../../components/message/content/attachments/QuoteAttachment';\nimport { useUserDisplayName } from '../../../../hooks/useUserDisplayName';\nimport { prependReplies } from '../../../../lib/utils/prependReplies';\n\ntype ForwardMessageProps = {\n\tonClose: () => void;\n\tpermalink: string;\n\tmessage: IMessage;\n};\n\nconst ForwardMessageModal = ({ onClose, permalink, message }: ForwardMessageProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst getUserAvatarPath = useUserAvatarPath();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst { copy, hasCopied } = useClipboard(permalink);\n\tconst usersAndRoomsField = useUniqueId();\n\n\tconst { control, watch } = useForm({\n\t\tdefaultValues: {\n\t\t\trooms: [],\n\t\t},\n\t});\n\n\tconst rooms = watch('rooms');\n\tconst sendMessage = useEndpoint('POST', '/v1/chat.postMessage');\n\n\tconst sendMessageMutation = useMutation({\n\t\tmutationFn: async () => {\n\t\t\tconst optionalMessage = '';\n\t\t\tconst curMsg = await prependReplies(optionalMessage, [message]);\n\t\t\tconst sendPayload = {\n\t\t\t\troomId: rooms,\n\t\t\t\ttext: curMsg,\n\t\t\t};\n\n\t\t\treturn sendMessage(sendPayload);\n\t\t},\n\t\tonSuccess: () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Message_has_been_forwarded') });\n\t\t},\n\t\tonError: (error: any) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tonClose();\n\t\t},\n\t});\n\n\tconst avatarUrl = getUserAvatarPath(message.u.username);\n\n\tconst displayName = useUserDisplayName(message.u);\n\n\tconst attachment = {\n\t\tauthor_name: String(displayName),\n\t\tauthor_link: '',\n\t\tauthor_icon: avatarUrl,\n\t\tmessage_link: '',\n\t\ttext: message.msg,\n\t\tattachments: message.attachments as MessageQuoteAttachment[],\n\t\tmd: message.md,\n\t};\n\n\tconst handleCopy = (): void => {\n\t\tif (!hasCopied) {\n\t\t\tcopy();\n\t\t}\n\t};\n\n\treturn (\n\t\t<Modal>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Title>{t('Forward_message')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onClose} title={t('Close')} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel htmlFor={usersAndRoomsField}>{t('Person_Or_Channel')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tname='rooms'\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\trender={({ field: { name, value, onChange } }): ReactElement => (\n\t\t\t\t\t\t\t\t\t<UserAndRoomAutoCompleteMultiple\n\t\t\t\t\t\t\t\t\t\tid={usersAndRoomsField}\n\t\t\t\t\t\t\t\t\t\taria-describedby={`${usersAndRoomsField}-hint`}\n\t\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t{!rooms.length && (\n\t\t\t\t\t\t\t<FieldHint id={`${usersAndRoomsField}-hint`}>{t('Select_atleast_one_channel_to_forward_the_messsage_to')}</FieldHint>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<QuoteAttachment attachment={attachment} />\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button onClick={handleCopy} disabled={hasCopied}>\n\t\t\t\t\t\t{hasCopied ? t('Copied') : t('Copy_Link')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button disabled={!rooms.length} loading={sendMessageMutation.isLoading} onClick={() => sendMessageMutation.mutate()} primary>\n\t\t\t\t\t\t{t('Forward')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default memo(ForwardMessageModal);\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/modals/ForwardMessageModal/ForwardMessageModal.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/modals/ForwardMessageModal/ForwardMessageModal.tsx","inputSourceMap":{"version":3,"file":"client/views/room/modals/ForwardMessageModal/ForwardMessageModal.tsx","sourceRoot":"","sources":["client/views/room/modals/ForwardMessageModal/ForwardMessageModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, MessageQuoteAttachment } from '@rocket.chat/core-typings';\nimport { Modal, Field, FieldGroup, FieldLabel, FieldRow, FieldHint, ButtonGroup, Button } from '@rocket.chat/fuselage';\nimport { useClipboard, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation, useEndpoint, useToastMessageDispatch, useUserAvatarPath } from '@rocket.chat/ui-contexts';\nimport { useMutation } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { memo } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport UserAndRoomAutoCompleteMultiple from '../../../../components/UserAndRoomAutoCompleteMultiple';\nimport { QuoteAttachment } from '../../../../components/message/content/attachments/QuoteAttachment';\nimport { useUserDisplayName } from '../../../../hooks/useUserDisplayName';\nimport { prependReplies } from '../../../../lib/utils/prependReplies';\n\ntype ForwardMessageProps = {\n\tonClose: () => void;\n\tpermalink: string;\n\tmessage: IMessage;\n};\n\nconst ForwardMessageModal = ({ onClose, permalink, message }: ForwardMessageProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst getUserAvatarPath = useUserAvatarPath();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst { copy, hasCopied } = useClipboard(permalink);\n\tconst usersAndRoomsField = useUniqueId();\n\n\tconst { control, watch } = useForm({\n\t\tdefaultValues: {\n\t\t\trooms: [],\n\t\t},\n\t});\n\n\tconst rooms = watch('rooms');\n\tconst sendMessage = useEndpoint('POST', '/v1/chat.postMessage');\n\n\tconst sendMessageMutation = useMutation({\n\t\tmutationFn: async () => {\n\t\t\tconst optionalMessage = '';\n\t\t\tconst curMsg = await prependReplies(optionalMessage, [message]);\n\t\t\tconst sendPayload = {\n\t\t\t\troomId: rooms,\n\t\t\t\ttext: curMsg,\n\t\t\t};\n\n\t\t\treturn sendMessage(sendPayload);\n\t\t},\n\t\tonSuccess: () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Message_has_been_forwarded') });\n\t\t},\n\t\tonError: (error: any) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tonClose();\n\t\t},\n\t});\n\n\tconst avatarUrl = getUserAvatarPath(message.u.username);\n\n\tconst displayName = useUserDisplayName(message.u);\n\n\tconst attachment = {\n\t\tauthor_name: String(displayName),\n\t\tauthor_link: '',\n\t\tauthor_icon: avatarUrl,\n\t\tmessage_link: '',\n\t\ttext: message.msg,\n\t\tattachments: message.attachments as MessageQuoteAttachment[],\n\t\tmd: message.md,\n\t};\n\n\tconst handleCopy = (): void => {\n\t\tif (!hasCopied) {\n\t\t\tcopy();\n\t\t}\n\t};\n\n\treturn (\n\t\t<Modal>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Title>{t('Forward_message')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onClose} title={t('Close')} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel htmlFor={usersAndRoomsField}>{t('Person_Or_Channel')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tname='rooms'\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\trender={({ field: { name, value, onChange } }): ReactElement => (\n\t\t\t\t\t\t\t\t\t<UserAndRoomAutoCompleteMultiple\n\t\t\t\t\t\t\t\t\t\tid={usersAndRoomsField}\n\t\t\t\t\t\t\t\t\t\taria-describedby={`${usersAndRoomsField}-hint`}\n\t\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t{!rooms.length && (\n\t\t\t\t\t\t\t<FieldHint id={`${usersAndRoomsField}-hint`}>{t('Select_atleast_one_channel_to_forward_the_messsage_to')}</FieldHint>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<QuoteAttachment attachment={attachment} />\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button onClick={handleCopy} disabled={hasCopied}>\n\t\t\t\t\t\t{hasCopied ? t('Copied') : t('Copy_Link')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button disabled={!rooms.length} loading={sendMessageMutation.isLoading} onClick={() => sendMessageMutation.mutate()} primary>\n\t\t\t\t\t\t{t('Forward')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default memo(ForwardMessageModal);\n"]}}},"code":"let Modal, Field, FieldGroup, FieldLabel, FieldRow, FieldHint, ButtonGroup, Button;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Modal(v) {\n    Modal = v;\n  },\n  Field(v) {\n    Field = v;\n  },\n  FieldGroup(v) {\n    FieldGroup = v;\n  },\n  FieldLabel(v) {\n    FieldLabel = v;\n  },\n  FieldRow(v) {\n    FieldRow = v;\n  },\n  FieldHint(v) {\n    FieldHint = v;\n  },\n  ButtonGroup(v) {\n    ButtonGroup = v;\n  },\n  Button(v) {\n    Button = v;\n  }\n}, 0);\nlet useClipboard, useUniqueId;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useClipboard(v) {\n    useClipboard = v;\n  },\n  useUniqueId(v) {\n    useUniqueId = v;\n  }\n}, 1);\nlet useTranslation, useEndpoint, useToastMessageDispatch, useUserAvatarPath;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useTranslation(v) {\n    useTranslation = v;\n  },\n  useEndpoint(v) {\n    useEndpoint = v;\n  },\n  useToastMessageDispatch(v) {\n    useToastMessageDispatch = v;\n  },\n  useUserAvatarPath(v) {\n    useUserAvatarPath = v;\n  }\n}, 2);\nlet useMutation;\nmodule.link(\"@tanstack/react-query\", {\n  useMutation(v) {\n    useMutation = v;\n  }\n}, 3);\nlet React, memo;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  memo(v) {\n    memo = v;\n  }\n}, 4);\nlet useForm, Controller;\nmodule.link(\"react-hook-form\", {\n  useForm(v) {\n    useForm = v;\n  },\n  Controller(v) {\n    Controller = v;\n  }\n}, 5);\nlet UserAndRoomAutoCompleteMultiple;\nmodule.link(\"../../../../components/UserAndRoomAutoCompleteMultiple\", {\n  default(v) {\n    UserAndRoomAutoCompleteMultiple = v;\n  }\n}, 6);\nlet QuoteAttachment;\nmodule.link(\"../../../../components/message/content/attachments/QuoteAttachment\", {\n  QuoteAttachment(v) {\n    QuoteAttachment = v;\n  }\n}, 7);\nlet useUserDisplayName;\nmodule.link(\"../../../../hooks/useUserDisplayName\", {\n  useUserDisplayName(v) {\n    useUserDisplayName = v;\n  }\n}, 8);\nlet prependReplies;\nmodule.link(\"../../../../lib/utils/prependReplies\", {\n  prependReplies(v) {\n    prependReplies = v;\n  }\n}, 9);\nconst ForwardMessageModal = _ref => {\n  let {\n    onClose,\n    permalink,\n    message\n  } = _ref;\n  const t = useTranslation();\n  const getUserAvatarPath = useUserAvatarPath();\n  const dispatchToastMessage = useToastMessageDispatch();\n  const {\n    copy,\n    hasCopied\n  } = useClipboard(permalink);\n  const usersAndRoomsField = useUniqueId();\n  const {\n    control,\n    watch\n  } = useForm({\n    defaultValues: {\n      rooms: []\n    }\n  });\n  const rooms = watch('rooms');\n  const sendMessage = useEndpoint('POST', '/v1/chat.postMessage');\n  const sendMessageMutation = useMutation({\n    mutationFn: async () => {\n      const optionalMessage = '';\n      const curMsg = await prependReplies(optionalMessage, [message]);\n      const sendPayload = {\n        roomId: rooms,\n        text: curMsg\n      };\n      return sendMessage(sendPayload);\n    },\n    onSuccess: () => {\n      dispatchToastMessage({\n        type: 'success',\n        message: t('Message_has_been_forwarded')\n      });\n    },\n    onError: error => {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    },\n    onSettled: () => {\n      onClose();\n    }\n  });\n  const avatarUrl = getUserAvatarPath(message.u.username);\n  const displayName = useUserDisplayName(message.u);\n  const attachment = {\n    author_name: String(displayName),\n    author_link: '',\n    author_icon: avatarUrl,\n    message_link: '',\n    text: message.msg,\n    attachments: message.attachments,\n    md: message.md\n  };\n  const handleCopy = () => {\n    if (!hasCopied) {\n      copy();\n    }\n  };\n  return /*#__PURE__*/React.createElement(Modal, null, /*#__PURE__*/React.createElement(Modal.Header, null, /*#__PURE__*/React.createElement(Modal.Title, null, t('Forward_message')), /*#__PURE__*/React.createElement(Modal.Close, {\n    onClick: onClose,\n    title: t('Close')\n  })), /*#__PURE__*/React.createElement(Modal.Content, null, /*#__PURE__*/React.createElement(FieldGroup, null, /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(FieldLabel, {\n    htmlFor: usersAndRoomsField\n  }, t('Person_Or_Channel')), /*#__PURE__*/React.createElement(FieldRow, null, /*#__PURE__*/React.createElement(Controller, {\n    name: \"rooms\",\n    control: control,\n    render: _ref2 => {\n      let {\n        field: {\n          name,\n          value,\n          onChange\n        }\n      } = _ref2;\n      return /*#__PURE__*/React.createElement(UserAndRoomAutoCompleteMultiple, {\n        id: usersAndRoomsField,\n        \"aria-describedby\": \"\".concat(usersAndRoomsField, \"-hint\"),\n        name: name,\n        value: value,\n        onChange: onChange\n      });\n    }\n  })), !rooms.length && /*#__PURE__*/React.createElement(FieldHint, {\n    id: \"\".concat(usersAndRoomsField, \"-hint\")\n  }, t('Select_atleast_one_channel_to_forward_the_messsage_to'))), /*#__PURE__*/React.createElement(Field, null, /*#__PURE__*/React.createElement(QuoteAttachment, {\n    attachment: attachment\n  })))), /*#__PURE__*/React.createElement(Modal.Footer, null, /*#__PURE__*/React.createElement(ButtonGroup, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleCopy,\n    disabled: hasCopied\n  }, hasCopied ? t('Copied') : t('Copy_Link')), /*#__PURE__*/React.createElement(Button, {\n    disabled: !rooms.length,\n    loading: sendMessageMutation.isLoading,\n    onClick: () => sendMessageMutation.mutate(),\n    primary: true\n  }, t('Forward')))));\n};\nmodule.exportDefault( /*#__PURE__*/memo(ForwardMessageModal));","map":{"version":3,"names":["Modal","Field","FieldGroup","FieldLabel","FieldRow","FieldHint","ButtonGroup","Button","module","link","v","useClipboard","useUniqueId","useTranslation","useEndpoint","useToastMessageDispatch","useUserAvatarPath","useMutation","React","memo","default","useForm","Controller","UserAndRoomAutoCompleteMultiple","QuoteAttachment","useUserDisplayName","prependReplies","ForwardMessageModal","_ref","onClose","permalink","message","t","getUserAvatarPath","dispatchToastMessage","copy","hasCopied","usersAndRoomsField","control","watch","defaultValues","rooms","sendMessage","sendMessageMutation","mutationFn","optionalMessage","curMsg","sendPayload","roomId","text","onSuccess","type","onError","error","onSettled","avatarUrl","u","username","displayName","attachment","author_name","String","author_link","author_icon","message_link","msg","attachments","md","handleCopy","createElement","Header","Title","Close","onClick","title","Content","htmlFor","name","render","_ref2","field","value","onChange","id","concat","length","Footer","disabled","loading","isLoading","mutate","primary","exportDefault"],"sources":["client/views/room/modals/ForwardMessageModal/ForwardMessageModal.tsx"],"sourcesContent":["import type { IMessage, MessageQuoteAttachment } from '@rocket.chat/core-typings';\nimport { Modal, Field, FieldGroup, FieldLabel, FieldRow, FieldHint, ButtonGroup, Button } from '@rocket.chat/fuselage';\nimport { useClipboard, useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport { useTranslation, useEndpoint, useToastMessageDispatch, useUserAvatarPath } from '@rocket.chat/ui-contexts';\nimport { useMutation } from '@tanstack/react-query';\nimport type { ReactElement } from 'react';\nimport React, { memo } from 'react';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport UserAndRoomAutoCompleteMultiple from '../../../../components/UserAndRoomAutoCompleteMultiple';\nimport { QuoteAttachment } from '../../../../components/message/content/attachments/QuoteAttachment';\nimport { useUserDisplayName } from '../../../../hooks/useUserDisplayName';\nimport { prependReplies } from '../../../../lib/utils/prependReplies';\n\ntype ForwardMessageProps = {\n\tonClose: () => void;\n\tpermalink: string;\n\tmessage: IMessage;\n};\n\nconst ForwardMessageModal = ({ onClose, permalink, message }: ForwardMessageProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst getUserAvatarPath = useUserAvatarPath();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst { copy, hasCopied } = useClipboard(permalink);\n\tconst usersAndRoomsField = useUniqueId();\n\n\tconst { control, watch } = useForm({\n\t\tdefaultValues: {\n\t\t\trooms: [],\n\t\t},\n\t});\n\n\tconst rooms = watch('rooms');\n\tconst sendMessage = useEndpoint('POST', '/v1/chat.postMessage');\n\n\tconst sendMessageMutation = useMutation({\n\t\tmutationFn: async () => {\n\t\t\tconst optionalMessage = '';\n\t\t\tconst curMsg = await prependReplies(optionalMessage, [message]);\n\t\t\tconst sendPayload = {\n\t\t\t\troomId: rooms,\n\t\t\t\ttext: curMsg,\n\t\t\t};\n\n\t\t\treturn sendMessage(sendPayload);\n\t\t},\n\t\tonSuccess: () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Message_has_been_forwarded') });\n\t\t},\n\t\tonError: (error: any) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tonClose();\n\t\t},\n\t});\n\n\tconst avatarUrl = getUserAvatarPath(message.u.username);\n\n\tconst displayName = useUserDisplayName(message.u);\n\n\tconst attachment = {\n\t\tauthor_name: String(displayName),\n\t\tauthor_link: '',\n\t\tauthor_icon: avatarUrl,\n\t\tmessage_link: '',\n\t\ttext: message.msg,\n\t\tattachments: message.attachments as MessageQuoteAttachment[],\n\t\tmd: message.md,\n\t};\n\n\tconst handleCopy = (): void => {\n\t\tif (!hasCopied) {\n\t\t\tcopy();\n\t\t}\n\t};\n\n\treturn (\n\t\t<Modal>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Title>{t('Forward_message')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onClose} title={t('Close')} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<FieldLabel htmlFor={usersAndRoomsField}>{t('Person_Or_Channel')}</FieldLabel>\n\t\t\t\t\t\t<FieldRow>\n\t\t\t\t\t\t\t<Controller\n\t\t\t\t\t\t\t\tname='rooms'\n\t\t\t\t\t\t\t\tcontrol={control}\n\t\t\t\t\t\t\t\trender={({ field: { name, value, onChange } }): ReactElement => (\n\t\t\t\t\t\t\t\t\t<UserAndRoomAutoCompleteMultiple\n\t\t\t\t\t\t\t\t\t\tid={usersAndRoomsField}\n\t\t\t\t\t\t\t\t\t\taria-describedby={`${usersAndRoomsField}-hint`}\n\t\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FieldRow>\n\t\t\t\t\t\t{!rooms.length && (\n\t\t\t\t\t\t\t<FieldHint id={`${usersAndRoomsField}-hint`}>{t('Select_atleast_one_channel_to_forward_the_messsage_to')}</FieldHint>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<QuoteAttachment attachment={attachment} />\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button onClick={handleCopy} disabled={hasCopied}>\n\t\t\t\t\t\t{hasCopied ? t('Copied') : t('Copy_Link')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button disabled={!rooms.length} loading={sendMessageMutation.isLoading} onClick={() => sendMessageMutation.mutate()} primary>\n\t\t\t\t\t\t{t('Forward')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default memo(ForwardMessageModal);\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"ef9166679a51189aefb55853fbf5e5673c6135ce"}
