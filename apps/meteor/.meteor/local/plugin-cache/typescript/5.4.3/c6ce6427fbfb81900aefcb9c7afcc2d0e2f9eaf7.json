{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/message/hooks/useNormalizedMessage.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/components/message/hooks/useNormalizedMessage.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/message/hooks/useNormalizedMessage.ts","inputSourceMap":{"version":3,"file":"client/components/message/hooks/useNormalizedMessage.ts","sourceRoot":"","sources":["client/components/message/hooks/useNormalizedMessage.ts"],"names":[],"mappings":"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","sourcesContent":["import { Base64 } from '@rocket.chat/base64';\nimport type { IMessage, MessageAttachment } from '@rocket.chat/core-typings';\nimport {\n\tisFileImageAttachment,\n\tisFileAttachment,\n\tisFileAudioAttachment,\n\tisFileVideoAttachment,\n\tisQuoteAttachment,\n} from '@rocket.chat/core-typings';\nimport type { Options } from '@rocket.chat/message-parser';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport { useMemo } from 'react';\n\nimport { useSubscriptionFromMessageQuery } from './useSubscriptionFromMessageQuery';\nimport type { MessageWithMdEnforced } from '../../../lib/parseMessageTextToAstMarkdown';\nimport { parseMessageTextToAstMarkdown } from '../../../lib/parseMessageTextToAstMarkdown';\nimport { useAutoLinkDomains } from '../../../views/room/MessageList/hooks/useAutoLinkDomains';\nimport { useAutoTranslate } from '../../../views/room/MessageList/hooks/useAutoTranslate';\nimport { useKatex } from '../../../views/room/MessageList/hooks/useKatex';\n\nconst normalizeAttachments = (attachments: MessageAttachment[], name?: string, type?: string): MessageAttachment[] => {\n\tif (name) {\n\t\tname = String.fromCharCode(...new TextEncoder().encode(name));\n\t}\n\n\treturn attachments.map((attachment) => {\n\t\tif (isQuoteAttachment(attachment) && attachment.attachments) {\n\t\t\tattachment.attachments = normalizeAttachments(attachment.attachments);\n\t\t\treturn attachment;\n\t\t}\n\n\t\tif (!attachment.encryption) {\n\t\t\treturn attachment;\n\t\t}\n\n\t\tconst key = Base64.encode(\n\t\t\tJSON.stringify({\n\t\t\t\t...attachment.encryption,\n\t\t\t\tname,\n\t\t\t\ttype,\n\t\t\t}),\n\t\t);\n\n\t\tif (isFileAttachment(attachment)) {\n\t\t\tif (attachment.title_link && !attachment.title_link.startsWith('/file-decrypt/')) {\n\t\t\t\tattachment.title_link = `/file-decrypt${attachment.title_link}?key=${key}`;\n\t\t\t}\n\t\t\tif (isFileImageAttachment(attachment) && !attachment.image_url.startsWith('/file-decrypt/')) {\n\t\t\t\tattachment.image_url = `/file-decrypt${attachment.image_url}?key=${key}`;\n\t\t\t}\n\t\t\tif (isFileAudioAttachment(attachment) && !attachment.audio_url.startsWith('/file-decrypt/')) {\n\t\t\t\tattachment.audio_url = `/file-decrypt${attachment.audio_url}?key=${key}`;\n\t\t\t}\n\t\t\tif (isFileVideoAttachment(attachment) && !attachment.video_url.startsWith('/file-decrypt/')) {\n\t\t\t\tattachment.video_url = `/file-decrypt${attachment.video_url}?key=${key}`;\n\t\t\t}\n\t\t}\n\n\t\treturn attachment;\n\t});\n};\n\nexport const useNormalizedMessage = <TMessage extends IMessage>(message: TMessage): MessageWithMdEnforced => {\n\tconst { katexEnabled, katexDollarSyntaxEnabled, katexParenthesisSyntaxEnabled } = useKatex();\n\tconst customDomains = useAutoLinkDomains();\n\tconst subscription = useSubscriptionFromMessageQuery(message).data ?? undefined;\n\tconst autoTranslateOptions = useAutoTranslate(subscription);\n\tconst showColors = useSetting<boolean>('HexColorPreview_Enabled');\n\n\treturn useMemo(() => {\n\t\tconst parseOptions: Options = {\n\t\t\tcolors: showColors,\n\t\t\temoticons: true,\n\t\t\tcustomDomains,\n\t\t\t...(katexEnabled && {\n\t\t\t\tkatex: {\n\t\t\t\t\tdollarSyntax: katexDollarSyntaxEnabled,\n\t\t\t\t\tparenthesisSyntax: katexParenthesisSyntaxEnabled,\n\t\t\t\t},\n\t\t\t}),\n\t\t};\n\n\t\tconst normalizedMessage = parseMessageTextToAstMarkdown(message, parseOptions, autoTranslateOptions);\n\n\t\tif (normalizedMessage.attachments) {\n\t\t\tnormalizedMessage.attachments = normalizeAttachments(\n\t\t\t\tnormalizedMessage.attachments,\n\t\t\t\tnormalizedMessage.file?.name,\n\t\t\t\tnormalizedMessage.file?.type,\n\t\t\t);\n\t\t}\n\n\t\treturn normalizedMessage;\n\t}, [showColors, customDomains, katexEnabled, katexDollarSyntaxEnabled, katexParenthesisSyntaxEnabled, message, autoTranslateOptions]);\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/components/message/hooks/useNormalizedMessage.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/components/message/hooks/useNormalizedMessage.ts","inputSourceMap":{"version":3,"file":"client/components/message/hooks/useNormalizedMessage.ts","sourceRoot":"","sources":["client/components/message/hooks/useNormalizedMessage.ts"],"names":[],"mappings":"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","sourcesContent":["import { Base64 } from '@rocket.chat/base64';\nimport type { IMessage, MessageAttachment } from '@rocket.chat/core-typings';\nimport {\n\tisFileImageAttachment,\n\tisFileAttachment,\n\tisFileAudioAttachment,\n\tisFileVideoAttachment,\n\tisQuoteAttachment,\n} from '@rocket.chat/core-typings';\nimport type { Options } from '@rocket.chat/message-parser';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport { useMemo } from 'react';\n\nimport { useSubscriptionFromMessageQuery } from './useSubscriptionFromMessageQuery';\nimport type { MessageWithMdEnforced } from '../../../lib/parseMessageTextToAstMarkdown';\nimport { parseMessageTextToAstMarkdown } from '../../../lib/parseMessageTextToAstMarkdown';\nimport { useAutoLinkDomains } from '../../../views/room/MessageList/hooks/useAutoLinkDomains';\nimport { useAutoTranslate } from '../../../views/room/MessageList/hooks/useAutoTranslate';\nimport { useKatex } from '../../../views/room/MessageList/hooks/useKatex';\n\nconst normalizeAttachments = (attachments: MessageAttachment[], name?: string, type?: string): MessageAttachment[] => {\n\tif (name) {\n\t\tname = String.fromCharCode(...new TextEncoder().encode(name));\n\t}\n\n\treturn attachments.map((attachment) => {\n\t\tif (isQuoteAttachment(attachment) && attachment.attachments) {\n\t\t\tattachment.attachments = normalizeAttachments(attachment.attachments);\n\t\t\treturn attachment;\n\t\t}\n\n\t\tif (!attachment.encryption) {\n\t\t\treturn attachment;\n\t\t}\n\n\t\tconst key = Base64.encode(\n\t\t\tJSON.stringify({\n\t\t\t\t...attachment.encryption,\n\t\t\t\tname,\n\t\t\t\ttype,\n\t\t\t}),\n\t\t);\n\n\t\tif (isFileAttachment(attachment)) {\n\t\t\tif (attachment.title_link && !attachment.title_link.startsWith('/file-decrypt/')) {\n\t\t\t\tattachment.title_link = `/file-decrypt${attachment.title_link}?key=${key}`;\n\t\t\t}\n\t\t\tif (isFileImageAttachment(attachment) && !attachment.image_url.startsWith('/file-decrypt/')) {\n\t\t\t\tattachment.image_url = `/file-decrypt${attachment.image_url}?key=${key}`;\n\t\t\t}\n\t\t\tif (isFileAudioAttachment(attachment) && !attachment.audio_url.startsWith('/file-decrypt/')) {\n\t\t\t\tattachment.audio_url = `/file-decrypt${attachment.audio_url}?key=${key}`;\n\t\t\t}\n\t\t\tif (isFileVideoAttachment(attachment) && !attachment.video_url.startsWith('/file-decrypt/')) {\n\t\t\t\tattachment.video_url = `/file-decrypt${attachment.video_url}?key=${key}`;\n\t\t\t}\n\t\t}\n\n\t\treturn attachment;\n\t});\n};\n\nexport const useNormalizedMessage = <TMessage extends IMessage>(message: TMessage): MessageWithMdEnforced => {\n\tconst { katexEnabled, katexDollarSyntaxEnabled, katexParenthesisSyntaxEnabled } = useKatex();\n\tconst customDomains = useAutoLinkDomains();\n\tconst subscription = useSubscriptionFromMessageQuery(message).data ?? undefined;\n\tconst autoTranslateOptions = useAutoTranslate(subscription);\n\tconst showColors = useSetting<boolean>('HexColorPreview_Enabled');\n\n\treturn useMemo(() => {\n\t\tconst parseOptions: Options = {\n\t\t\tcolors: showColors,\n\t\t\temoticons: true,\n\t\t\tcustomDomains,\n\t\t\t...(katexEnabled && {\n\t\t\t\tkatex: {\n\t\t\t\t\tdollarSyntax: katexDollarSyntaxEnabled,\n\t\t\t\t\tparenthesisSyntax: katexParenthesisSyntaxEnabled,\n\t\t\t\t},\n\t\t\t}),\n\t\t};\n\n\t\tconst normalizedMessage = parseMessageTextToAstMarkdown(message, parseOptions, autoTranslateOptions);\n\n\t\tif (normalizedMessage.attachments) {\n\t\t\tnormalizedMessage.attachments = normalizeAttachments(\n\t\t\t\tnormalizedMessage.attachments,\n\t\t\t\tnormalizedMessage.file?.name,\n\t\t\t\tnormalizedMessage.file?.type,\n\t\t\t);\n\t\t}\n\n\t\treturn normalizedMessage;\n\t}, [showColors, customDomains, katexEnabled, katexDollarSyntaxEnabled, katexParenthesisSyntaxEnabled, message, autoTranslateOptions]);\n};\n"]}}},"code":"let _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 0);\nmodule.export({\n  useNormalizedMessage: () => useNormalizedMessage\n});\nlet Base64;\nmodule.link(\"@rocket.chat/base64\", {\n  Base64(v) {\n    Base64 = v;\n  }\n}, 0);\nlet isFileImageAttachment, isFileAttachment, isFileAudioAttachment, isFileVideoAttachment, isQuoteAttachment;\nmodule.link(\"@rocket.chat/core-typings\", {\n  isFileImageAttachment(v) {\n    isFileImageAttachment = v;\n  },\n  isFileAttachment(v) {\n    isFileAttachment = v;\n  },\n  isFileAudioAttachment(v) {\n    isFileAudioAttachment = v;\n  },\n  isFileVideoAttachment(v) {\n    isFileVideoAttachment = v;\n  },\n  isQuoteAttachment(v) {\n    isQuoteAttachment = v;\n  }\n}, 1);\nlet useSetting;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useSetting(v) {\n    useSetting = v;\n  }\n}, 2);\nlet useMemo;\nmodule.link(\"react\", {\n  useMemo(v) {\n    useMemo = v;\n  }\n}, 3);\nlet useSubscriptionFromMessageQuery;\nmodule.link(\"./useSubscriptionFromMessageQuery\", {\n  useSubscriptionFromMessageQuery(v) {\n    useSubscriptionFromMessageQuery = v;\n  }\n}, 4);\nlet parseMessageTextToAstMarkdown;\nmodule.link(\"../../../lib/parseMessageTextToAstMarkdown\", {\n  parseMessageTextToAstMarkdown(v) {\n    parseMessageTextToAstMarkdown = v;\n  }\n}, 5);\nlet useAutoLinkDomains;\nmodule.link(\"../../../views/room/MessageList/hooks/useAutoLinkDomains\", {\n  useAutoLinkDomains(v) {\n    useAutoLinkDomains = v;\n  }\n}, 6);\nlet useAutoTranslate;\nmodule.link(\"../../../views/room/MessageList/hooks/useAutoTranslate\", {\n  useAutoTranslate(v) {\n    useAutoTranslate = v;\n  }\n}, 7);\nlet useKatex;\nmodule.link(\"../../../views/room/MessageList/hooks/useKatex\", {\n  useKatex(v) {\n    useKatex = v;\n  }\n}, 8);\nconst normalizeAttachments = (attachments, name, type) => {\n  if (name) {\n    name = String.fromCharCode(...new TextEncoder().encode(name));\n  }\n  return attachments.map(attachment => {\n    if (isQuoteAttachment(attachment) && attachment.attachments) {\n      attachment.attachments = normalizeAttachments(attachment.attachments);\n      return attachment;\n    }\n    if (!attachment.encryption) {\n      return attachment;\n    }\n    const key = Base64.encode(JSON.stringify(_objectSpread(_objectSpread({}, attachment.encryption), {}, {\n      name,\n      type\n    })));\n    if (isFileAttachment(attachment)) {\n      if (attachment.title_link && !attachment.title_link.startsWith('/file-decrypt/')) {\n        attachment.title_link = \"/file-decrypt\".concat(attachment.title_link, \"?key=\").concat(key);\n      }\n      if (isFileImageAttachment(attachment) && !attachment.image_url.startsWith('/file-decrypt/')) {\n        attachment.image_url = \"/file-decrypt\".concat(attachment.image_url, \"?key=\").concat(key);\n      }\n      if (isFileAudioAttachment(attachment) && !attachment.audio_url.startsWith('/file-decrypt/')) {\n        attachment.audio_url = \"/file-decrypt\".concat(attachment.audio_url, \"?key=\").concat(key);\n      }\n      if (isFileVideoAttachment(attachment) && !attachment.video_url.startsWith('/file-decrypt/')) {\n        attachment.video_url = \"/file-decrypt\".concat(attachment.video_url, \"?key=\").concat(key);\n      }\n    }\n    return attachment;\n  });\n};\nconst useNormalizedMessage = message => {\n  var _useSubscriptionFromM;\n  const {\n    katexEnabled,\n    katexDollarSyntaxEnabled,\n    katexParenthesisSyntaxEnabled\n  } = useKatex();\n  const customDomains = useAutoLinkDomains();\n  const subscription = (_useSubscriptionFromM = useSubscriptionFromMessageQuery(message).data) !== null && _useSubscriptionFromM !== void 0 ? _useSubscriptionFromM : undefined;\n  const autoTranslateOptions = useAutoTranslate(subscription);\n  const showColors = useSetting('HexColorPreview_Enabled');\n  return useMemo(() => {\n    const parseOptions = _objectSpread({\n      colors: showColors,\n      emoticons: true,\n      customDomains\n    }, katexEnabled && {\n      katex: {\n        dollarSyntax: katexDollarSyntaxEnabled,\n        parenthesisSyntax: katexParenthesisSyntaxEnabled\n      }\n    });\n    const normalizedMessage = parseMessageTextToAstMarkdown(message, parseOptions, autoTranslateOptions);\n    if (normalizedMessage.attachments) {\n      var _normalizedMessage$fi, _normalizedMessage$fi2;\n      normalizedMessage.attachments = normalizeAttachments(normalizedMessage.attachments, (_normalizedMessage$fi = normalizedMessage.file) === null || _normalizedMessage$fi === void 0 ? void 0 : _normalizedMessage$fi.name, (_normalizedMessage$fi2 = normalizedMessage.file) === null || _normalizedMessage$fi2 === void 0 ? void 0 : _normalizedMessage$fi2.type);\n    }\n    return normalizedMessage;\n  }, [showColors, customDomains, katexEnabled, katexDollarSyntaxEnabled, katexParenthesisSyntaxEnabled, message, autoTranslateOptions]);\n};","map":{"version":3,"names":["_objectSpread","module","link","default","v","export","useNormalizedMessage","Base64","isFileImageAttachment","isFileAttachment","isFileAudioAttachment","isFileVideoAttachment","isQuoteAttachment","useSetting","useMemo","useSubscriptionFromMessageQuery","parseMessageTextToAstMarkdown","useAutoLinkDomains","useAutoTranslate","useKatex","normalizeAttachments","attachments","name","type","String","fromCharCode","TextEncoder","encode","map","attachment","encryption","key","JSON","stringify","title_link","startsWith","concat","image_url","audio_url","video_url","message","_useSubscriptionFromM","katexEnabled","katexDollarSyntaxEnabled","katexParenthesisSyntaxEnabled","customDomains","subscription","data","undefined","autoTranslateOptions","showColors","parseOptions","colors","emoticons","katex","dollarSyntax","parenthesisSyntax","normalizedMessage","_normalizedMessage$fi","_normalizedMessage$fi2","file"],"sources":["client/components/message/hooks/useNormalizedMessage.ts"],"sourcesContent":["import { Base64 } from '@rocket.chat/base64';\nimport type { IMessage, MessageAttachment } from '@rocket.chat/core-typings';\nimport {\n\tisFileImageAttachment,\n\tisFileAttachment,\n\tisFileAudioAttachment,\n\tisFileVideoAttachment,\n\tisQuoteAttachment,\n} from '@rocket.chat/core-typings';\nimport type { Options } from '@rocket.chat/message-parser';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport { useMemo } from 'react';\n\nimport { useSubscriptionFromMessageQuery } from './useSubscriptionFromMessageQuery';\nimport type { MessageWithMdEnforced } from '../../../lib/parseMessageTextToAstMarkdown';\nimport { parseMessageTextToAstMarkdown } from '../../../lib/parseMessageTextToAstMarkdown';\nimport { useAutoLinkDomains } from '../../../views/room/MessageList/hooks/useAutoLinkDomains';\nimport { useAutoTranslate } from '../../../views/room/MessageList/hooks/useAutoTranslate';\nimport { useKatex } from '../../../views/room/MessageList/hooks/useKatex';\n\nconst normalizeAttachments = (attachments: MessageAttachment[], name?: string, type?: string): MessageAttachment[] => {\n\tif (name) {\n\t\tname = String.fromCharCode(...new TextEncoder().encode(name));\n\t}\n\n\treturn attachments.map((attachment) => {\n\t\tif (isQuoteAttachment(attachment) && attachment.attachments) {\n\t\t\tattachment.attachments = normalizeAttachments(attachment.attachments);\n\t\t\treturn attachment;\n\t\t}\n\n\t\tif (!attachment.encryption) {\n\t\t\treturn attachment;\n\t\t}\n\n\t\tconst key = Base64.encode(\n\t\t\tJSON.stringify({\n\t\t\t\t...attachment.encryption,\n\t\t\t\tname,\n\t\t\t\ttype,\n\t\t\t}),\n\t\t);\n\n\t\tif (isFileAttachment(attachment)) {\n\t\t\tif (attachment.title_link && !attachment.title_link.startsWith('/file-decrypt/')) {\n\t\t\t\tattachment.title_link = `/file-decrypt${attachment.title_link}?key=${key}`;\n\t\t\t}\n\t\t\tif (isFileImageAttachment(attachment) && !attachment.image_url.startsWith('/file-decrypt/')) {\n\t\t\t\tattachment.image_url = `/file-decrypt${attachment.image_url}?key=${key}`;\n\t\t\t}\n\t\t\tif (isFileAudioAttachment(attachment) && !attachment.audio_url.startsWith('/file-decrypt/')) {\n\t\t\t\tattachment.audio_url = `/file-decrypt${attachment.audio_url}?key=${key}`;\n\t\t\t}\n\t\t\tif (isFileVideoAttachment(attachment) && !attachment.video_url.startsWith('/file-decrypt/')) {\n\t\t\t\tattachment.video_url = `/file-decrypt${attachment.video_url}?key=${key}`;\n\t\t\t}\n\t\t}\n\n\t\treturn attachment;\n\t});\n};\n\nexport const useNormalizedMessage = <TMessage extends IMessage>(message: TMessage): MessageWithMdEnforced => {\n\tconst { katexEnabled, katexDollarSyntaxEnabled, katexParenthesisSyntaxEnabled } = useKatex();\n\tconst customDomains = useAutoLinkDomains();\n\tconst subscription = useSubscriptionFromMessageQuery(message).data ?? undefined;\n\tconst autoTranslateOptions = useAutoTranslate(subscription);\n\tconst showColors = useSetting<boolean>('HexColorPreview_Enabled');\n\n\treturn useMemo(() => {\n\t\tconst parseOptions: Options = {\n\t\t\tcolors: showColors,\n\t\t\temoticons: true,\n\t\t\tcustomDomains,\n\t\t\t...(katexEnabled && {\n\t\t\t\tkatex: {\n\t\t\t\t\tdollarSyntax: katexDollarSyntaxEnabled,\n\t\t\t\t\tparenthesisSyntax: katexParenthesisSyntaxEnabled,\n\t\t\t\t},\n\t\t\t}),\n\t\t};\n\n\t\tconst normalizedMessage = parseMessageTextToAstMarkdown(message, parseOptions, autoTranslateOptions);\n\n\t\tif (normalizedMessage.attachments) {\n\t\t\tnormalizedMessage.attachments = normalizeAttachments(\n\t\t\t\tnormalizedMessage.attachments,\n\t\t\t\tnormalizedMessage.file?.name,\n\t\t\t\tnormalizedMessage.file?.type,\n\t\t\t);\n\t\t}\n\n\t\treturn normalizedMessage;\n\t}, [showColors, customDomains, katexEnabled, katexDollarSyntaxEnabled, katexParenthesisSyntaxEnabled, message, autoTranslateOptions]);\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"c6ce6427fbfb81900aefcb9c7afcc2d0e2f9eaf7"}
