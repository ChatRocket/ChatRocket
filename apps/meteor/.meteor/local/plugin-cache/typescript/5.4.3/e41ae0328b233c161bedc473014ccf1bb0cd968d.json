{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/moderation/helpers/ContextMessage.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/admin/moderation/helpers/ContextMessage.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/moderation/helpers/ContextMessage.tsx","inputSourceMap":{"version":3,"file":"client/views/admin/moderation/helpers/ContextMessage.tsx","sourceRoot":"","sources":["client/views/admin/moderation/helpers/ContextMessage.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, MessageReport, MessageAttachment } from '@rocket.chat/core-typings';\nimport { isE2EEMessage, isQuoteAttachment } from '@rocket.chat/core-typings';\nimport { Message, MessageName, MessageToolbarItem, MessageToolbarWrapper, MessageUsername } from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport ReportReasonCollapsible from './ReportReasonCollapsible';\nimport MessageContentBody from '../../../../components/message/MessageContentBody';\nimport Attachments from '../../../../components/message/content/Attachments';\nimport UiKitMessageBlock from '../../../../components/message/uikit/UiKitMessageBlock';\nimport { useFormatDate } from '../../../../hooks/useFormatDate';\nimport { useFormatDateAndTime } from '../../../../hooks/useFormatDateAndTime';\nimport { useFormatTime } from '../../../../hooks/useFormatTime';\nimport { useUserDisplayName } from '../../../../hooks/useUserDisplayName';\nimport MessageReportInfo from '../MessageReportInfo';\nimport useDeleteMessage from '../hooks/useDeleteMessage';\nimport { useDismissMessageAction } from '../hooks/useDismissMessageAction';\n\nconst ContextMessage = ({\n\tmessage,\n\troom,\n\tdeleted,\n\tonRedirect,\n\tonChange,\n}: {\n\tmessage: any;\n\troom: MessageReport['room'];\n\tdeleted: boolean;\n\tonRedirect: (id: IMessage['_id']) => void;\n\tonChange: () => void;\n}): JSX.Element => {\n\tconst { t } = useTranslation();\n\n\tconst isEncryptedMessage = isE2EEMessage(message);\n\n\tconst deleteMessage = useDeleteMessage(message._id, message.rid, onChange);\n\tconst dismissMsgReport = useDismissMessageAction(message._id);\n\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst formatTime = useFormatTime();\n\tconst formatDate = useFormatDate();\n\tconst useRealName = Boolean(useSetting('UI_Use_Real_Name'));\n\n\tconst name = message.u.name || '';\n\tconst username = message.u.username || '';\n\n\tconst displayName = useUserDisplayName({ name, username });\n\n\tconst quotes = message?.attachments?.filter(isQuoteAttachment) || [];\n\n\tconst attachments = message?.attachments?.filter((attachment: MessageAttachment) => !isQuoteAttachment(attachment)) || [];\n\n\treturn (\n\t\t<>\n\t\t\t<Message.Divider>{formatDate(message._updatedAt)}</Message.Divider>\n\t\t\t<Message>\n\t\t\t\t<Message.LeftContainer>\n\t\t\t\t\t<UserAvatar username={message.u.username} />\n\t\t\t\t</Message.LeftContainer>\n\t\t\t\t<Message.Container>\n\t\t\t\t\t<Message.Header>\n\t\t\t\t\t\t<MessageName>{displayName}</MessageName>\n\t\t\t\t\t\t<>{useRealName && <MessageUsername>&nbsp;{`@${message.u.username}`}</MessageUsername>}</>\n\t\t\t\t\t\t<Message.Timestamp title={formatDateAndTime(message._updatedAt)}>\n\t\t\t\t\t\t\t{formatTime(message._updatedAt !== message.ts ? message._updatedAt : message.ts)}\n\t\t\t\t\t\t\t{message._updatedAt !== message.ts && ` (${t('edited')})`}\n\t\t\t\t\t\t</Message.Timestamp>\n\t\t\t\t\t\t<Message.Role>{room.name || room.fname || 'DM'}</Message.Role>\n\t\t\t\t\t</Message.Header>\n\t\t\t\t\t<Message.Body>\n\t\t\t\t\t\t{!!quotes?.length && <Attachments attachments={quotes} />}\n\t\t\t\t\t\t{!message.blocks?.length && !!message.md?.length ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{(!isEncryptedMessage || message.e2e === 'done') && (\n\t\t\t\t\t\t\t\t\t<MessageContentBody md={message.md} mentions={message.mentions} channels={message.channels} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{message.e2e === 'pending' && t('E2E_message_encrypted_placeholder')}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tmessage.msg\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{!!attachments && <Attachments id={message.files?.[0]?._id} attachments={attachments} />}\n\t\t\t\t\t\t{message.blocks && <UiKitMessageBlock rid={message.rid} mid={message._id} blocks={message.blocks} />}\n\t\t\t\t\t</Message.Body>\n\t\t\t\t\t<ReportReasonCollapsible>\n\t\t\t\t\t\t<MessageReportInfo msgId={message._id} />\n\t\t\t\t\t</ReportReasonCollapsible>\n\t\t\t\t</Message.Container>\n\t\t\t\t<MessageToolbarWrapper>\n\t\t\t\t\t<Message.Toolbar>\n\t\t\t\t\t\t<MessageToolbarItem\n\t\t\t\t\t\t\ticon='checkmark-circled'\n\t\t\t\t\t\t\ttitle={t('Moderation_Dismiss_reports')}\n\t\t\t\t\t\t\tonClick={() => dismissMsgReport.action()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<MessageToolbarItem icon='arrow-forward' title={t('Moderation_Go_to_message')} onClick={() => onRedirect(message._id)} />\n\t\t\t\t\t\t<MessageToolbarItem disabled={deleted} icon='trash' title={t('Moderation_Delete_message')} onClick={() => deleteMessage()} />\n\t\t\t\t\t</Message.Toolbar>\n\t\t\t\t</MessageToolbarWrapper>\n\t\t\t</Message>\n\t\t</>\n\t);\n};\n\nexport default ContextMessage;\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/admin/moderation/helpers/ContextMessage.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/admin/moderation/helpers/ContextMessage.tsx","inputSourceMap":{"version":3,"file":"client/views/admin/moderation/helpers/ContextMessage.tsx","sourceRoot":"","sources":["client/views/admin/moderation/helpers/ContextMessage.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { IMessage, MessageReport, MessageAttachment } from '@rocket.chat/core-typings';\nimport { isE2EEMessage, isQuoteAttachment } from '@rocket.chat/core-typings';\nimport { Message, MessageName, MessageToolbarItem, MessageToolbarWrapper, MessageUsername } from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport ReportReasonCollapsible from './ReportReasonCollapsible';\nimport MessageContentBody from '../../../../components/message/MessageContentBody';\nimport Attachments from '../../../../components/message/content/Attachments';\nimport UiKitMessageBlock from '../../../../components/message/uikit/UiKitMessageBlock';\nimport { useFormatDate } from '../../../../hooks/useFormatDate';\nimport { useFormatDateAndTime } from '../../../../hooks/useFormatDateAndTime';\nimport { useFormatTime } from '../../../../hooks/useFormatTime';\nimport { useUserDisplayName } from '../../../../hooks/useUserDisplayName';\nimport MessageReportInfo from '../MessageReportInfo';\nimport useDeleteMessage from '../hooks/useDeleteMessage';\nimport { useDismissMessageAction } from '../hooks/useDismissMessageAction';\n\nconst ContextMessage = ({\n\tmessage,\n\troom,\n\tdeleted,\n\tonRedirect,\n\tonChange,\n}: {\n\tmessage: any;\n\troom: MessageReport['room'];\n\tdeleted: boolean;\n\tonRedirect: (id: IMessage['_id']) => void;\n\tonChange: () => void;\n}): JSX.Element => {\n\tconst { t } = useTranslation();\n\n\tconst isEncryptedMessage = isE2EEMessage(message);\n\n\tconst deleteMessage = useDeleteMessage(message._id, message.rid, onChange);\n\tconst dismissMsgReport = useDismissMessageAction(message._id);\n\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst formatTime = useFormatTime();\n\tconst formatDate = useFormatDate();\n\tconst useRealName = Boolean(useSetting('UI_Use_Real_Name'));\n\n\tconst name = message.u.name || '';\n\tconst username = message.u.username || '';\n\n\tconst displayName = useUserDisplayName({ name, username });\n\n\tconst quotes = message?.attachments?.filter(isQuoteAttachment) || [];\n\n\tconst attachments = message?.attachments?.filter((attachment: MessageAttachment) => !isQuoteAttachment(attachment)) || [];\n\n\treturn (\n\t\t<>\n\t\t\t<Message.Divider>{formatDate(message._updatedAt)}</Message.Divider>\n\t\t\t<Message>\n\t\t\t\t<Message.LeftContainer>\n\t\t\t\t\t<UserAvatar username={message.u.username} />\n\t\t\t\t</Message.LeftContainer>\n\t\t\t\t<Message.Container>\n\t\t\t\t\t<Message.Header>\n\t\t\t\t\t\t<MessageName>{displayName}</MessageName>\n\t\t\t\t\t\t<>{useRealName && <MessageUsername>&nbsp;{`@${message.u.username}`}</MessageUsername>}</>\n\t\t\t\t\t\t<Message.Timestamp title={formatDateAndTime(message._updatedAt)}>\n\t\t\t\t\t\t\t{formatTime(message._updatedAt !== message.ts ? message._updatedAt : message.ts)}\n\t\t\t\t\t\t\t{message._updatedAt !== message.ts && ` (${t('edited')})`}\n\t\t\t\t\t\t</Message.Timestamp>\n\t\t\t\t\t\t<Message.Role>{room.name || room.fname || 'DM'}</Message.Role>\n\t\t\t\t\t</Message.Header>\n\t\t\t\t\t<Message.Body>\n\t\t\t\t\t\t{!!quotes?.length && <Attachments attachments={quotes} />}\n\t\t\t\t\t\t{!message.blocks?.length && !!message.md?.length ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{(!isEncryptedMessage || message.e2e === 'done') && (\n\t\t\t\t\t\t\t\t\t<MessageContentBody md={message.md} mentions={message.mentions} channels={message.channels} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{message.e2e === 'pending' && t('E2E_message_encrypted_placeholder')}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tmessage.msg\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{!!attachments && <Attachments id={message.files?.[0]?._id} attachments={attachments} />}\n\t\t\t\t\t\t{message.blocks && <UiKitMessageBlock rid={message.rid} mid={message._id} blocks={message.blocks} />}\n\t\t\t\t\t</Message.Body>\n\t\t\t\t\t<ReportReasonCollapsible>\n\t\t\t\t\t\t<MessageReportInfo msgId={message._id} />\n\t\t\t\t\t</ReportReasonCollapsible>\n\t\t\t\t</Message.Container>\n\t\t\t\t<MessageToolbarWrapper>\n\t\t\t\t\t<Message.Toolbar>\n\t\t\t\t\t\t<MessageToolbarItem\n\t\t\t\t\t\t\ticon='checkmark-circled'\n\t\t\t\t\t\t\ttitle={t('Moderation_Dismiss_reports')}\n\t\t\t\t\t\t\tonClick={() => dismissMsgReport.action()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<MessageToolbarItem icon='arrow-forward' title={t('Moderation_Go_to_message')} onClick={() => onRedirect(message._id)} />\n\t\t\t\t\t\t<MessageToolbarItem disabled={deleted} icon='trash' title={t('Moderation_Delete_message')} onClick={() => deleteMessage()} />\n\t\t\t\t\t</Message.Toolbar>\n\t\t\t\t</MessageToolbarWrapper>\n\t\t\t</Message>\n\t\t</>\n\t);\n};\n\nexport default ContextMessage;\n"]}}},"code":"let isE2EEMessage, isQuoteAttachment;\nmodule.link(\"@rocket.chat/core-typings\", {\n  isE2EEMessage(v) {\n    isE2EEMessage = v;\n  },\n  isQuoteAttachment(v) {\n    isQuoteAttachment = v;\n  }\n}, 0);\nlet Message, MessageName, MessageToolbarItem, MessageToolbarWrapper, MessageUsername;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Message(v) {\n    Message = v;\n  },\n  MessageName(v) {\n    MessageName = v;\n  },\n  MessageToolbarItem(v) {\n    MessageToolbarItem = v;\n  },\n  MessageToolbarWrapper(v) {\n    MessageToolbarWrapper = v;\n  },\n  MessageUsername(v) {\n    MessageUsername = v;\n  }\n}, 1);\nlet UserAvatar;\nmodule.link(\"@rocket.chat/ui-avatar\", {\n  UserAvatar(v) {\n    UserAvatar = v;\n  }\n}, 2);\nlet useSetting;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useSetting(v) {\n    useSetting = v;\n  }\n}, 3);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n}, 4);\nlet useTranslation;\nmodule.link(\"react-i18next\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 5);\nlet ReportReasonCollapsible;\nmodule.link(\"./ReportReasonCollapsible\", {\n  default(v) {\n    ReportReasonCollapsible = v;\n  }\n}, 6);\nlet MessageContentBody;\nmodule.link(\"../../../../components/message/MessageContentBody\", {\n  default(v) {\n    MessageContentBody = v;\n  }\n}, 7);\nlet Attachments;\nmodule.link(\"../../../../components/message/content/Attachments\", {\n  default(v) {\n    Attachments = v;\n  }\n}, 8);\nlet UiKitMessageBlock;\nmodule.link(\"../../../../components/message/uikit/UiKitMessageBlock\", {\n  default(v) {\n    UiKitMessageBlock = v;\n  }\n}, 9);\nlet useFormatDate;\nmodule.link(\"../../../../hooks/useFormatDate\", {\n  useFormatDate(v) {\n    useFormatDate = v;\n  }\n}, 10);\nlet useFormatDateAndTime;\nmodule.link(\"../../../../hooks/useFormatDateAndTime\", {\n  useFormatDateAndTime(v) {\n    useFormatDateAndTime = v;\n  }\n}, 11);\nlet useFormatTime;\nmodule.link(\"../../../../hooks/useFormatTime\", {\n  useFormatTime(v) {\n    useFormatTime = v;\n  }\n}, 12);\nlet useUserDisplayName;\nmodule.link(\"../../../../hooks/useUserDisplayName\", {\n  useUserDisplayName(v) {\n    useUserDisplayName = v;\n  }\n}, 13);\nlet MessageReportInfo;\nmodule.link(\"../MessageReportInfo\", {\n  default(v) {\n    MessageReportInfo = v;\n  }\n}, 14);\nlet useDeleteMessage;\nmodule.link(\"../hooks/useDeleteMessage\", {\n  default(v) {\n    useDeleteMessage = v;\n  }\n}, 15);\nlet useDismissMessageAction;\nmodule.link(\"../hooks/useDismissMessageAction\", {\n  useDismissMessageAction(v) {\n    useDismissMessageAction = v;\n  }\n}, 16);\nconst ContextMessage = _ref => {\n  var _message$attachments, _message$attachments2, _message$blocks, _message$md, _message$files, _message$files$;\n  let {\n    message,\n    room,\n    deleted,\n    onRedirect,\n    onChange\n  } = _ref;\n  const {\n    t\n  } = useTranslation();\n  const isEncryptedMessage = isE2EEMessage(message);\n  const deleteMessage = useDeleteMessage(message._id, message.rid, onChange);\n  const dismissMsgReport = useDismissMessageAction(message._id);\n  const formatDateAndTime = useFormatDateAndTime();\n  const formatTime = useFormatTime();\n  const formatDate = useFormatDate();\n  const useRealName = Boolean(useSetting('UI_Use_Real_Name'));\n  const name = message.u.name || '';\n  const username = message.u.username || '';\n  const displayName = useUserDisplayName({\n    name,\n    username\n  });\n  const quotes = (message === null || message === void 0 ? void 0 : (_message$attachments = message.attachments) === null || _message$attachments === void 0 ? void 0 : _message$attachments.filter(isQuoteAttachment)) || [];\n  const attachments = (message === null || message === void 0 ? void 0 : (_message$attachments2 = message.attachments) === null || _message$attachments2 === void 0 ? void 0 : _message$attachments2.filter(attachment => !isQuoteAttachment(attachment))) || [];\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Message.Divider, null, formatDate(message._updatedAt)), /*#__PURE__*/React.createElement(Message, null, /*#__PURE__*/React.createElement(Message.LeftContainer, null, /*#__PURE__*/React.createElement(UserAvatar, {\n    username: message.u.username\n  })), /*#__PURE__*/React.createElement(Message.Container, null, /*#__PURE__*/React.createElement(Message.Header, null, /*#__PURE__*/React.createElement(MessageName, null, displayName), /*#__PURE__*/React.createElement(React.Fragment, null, useRealName && /*#__PURE__*/React.createElement(MessageUsername, null, \"\\xA0\", \"@\".concat(message.u.username))), /*#__PURE__*/React.createElement(Message.Timestamp, {\n    title: formatDateAndTime(message._updatedAt)\n  }, formatTime(message._updatedAt !== message.ts ? message._updatedAt : message.ts), message._updatedAt !== message.ts && \" (\".concat(t('edited'), \")\")), /*#__PURE__*/React.createElement(Message.Role, null, room.name || room.fname || 'DM')), /*#__PURE__*/React.createElement(Message.Body, null, !!(quotes !== null && quotes !== void 0 && quotes.length) && /*#__PURE__*/React.createElement(Attachments, {\n    attachments: quotes\n  }), !((_message$blocks = message.blocks) !== null && _message$blocks !== void 0 && _message$blocks.length) && !!((_message$md = message.md) !== null && _message$md !== void 0 && _message$md.length) ? /*#__PURE__*/React.createElement(React.Fragment, null, (!isEncryptedMessage || message.e2e === 'done') && /*#__PURE__*/React.createElement(MessageContentBody, {\n    md: message.md,\n    mentions: message.mentions,\n    channels: message.channels\n  }), message.e2e === 'pending' && t('E2E_message_encrypted_placeholder')) : message.msg, !!attachments && /*#__PURE__*/React.createElement(Attachments, {\n    id: (_message$files = message.files) === null || _message$files === void 0 ? void 0 : (_message$files$ = _message$files[0]) === null || _message$files$ === void 0 ? void 0 : _message$files$._id,\n    attachments: attachments\n  }), message.blocks && /*#__PURE__*/React.createElement(UiKitMessageBlock, {\n    rid: message.rid,\n    mid: message._id,\n    blocks: message.blocks\n  })), /*#__PURE__*/React.createElement(ReportReasonCollapsible, null, /*#__PURE__*/React.createElement(MessageReportInfo, {\n    msgId: message._id\n  }))), /*#__PURE__*/React.createElement(MessageToolbarWrapper, null, /*#__PURE__*/React.createElement(Message.Toolbar, null, /*#__PURE__*/React.createElement(MessageToolbarItem, {\n    icon: \"checkmark-circled\",\n    title: t('Moderation_Dismiss_reports'),\n    onClick: () => dismissMsgReport.action()\n  }), /*#__PURE__*/React.createElement(MessageToolbarItem, {\n    icon: \"arrow-forward\",\n    title: t('Moderation_Go_to_message'),\n    onClick: () => onRedirect(message._id)\n  }), /*#__PURE__*/React.createElement(MessageToolbarItem, {\n    disabled: deleted,\n    icon: \"trash\",\n    title: t('Moderation_Delete_message'),\n    onClick: () => deleteMessage()\n  })))));\n};\nmodule.exportDefault(ContextMessage);","map":{"version":3,"names":["isE2EEMessage","isQuoteAttachment","module","link","v","Message","MessageName","MessageToolbarItem","MessageToolbarWrapper","MessageUsername","UserAvatar","useSetting","React","default","useTranslation","ReportReasonCollapsible","MessageContentBody","Attachments","UiKitMessageBlock","useFormatDate","useFormatDateAndTime","useFormatTime","useUserDisplayName","MessageReportInfo","useDeleteMessage","useDismissMessageAction","ContextMessage","_ref","_message$attachments","_message$attachments2","_message$blocks","_message$md","_message$files","_message$files$","message","room","deleted","onRedirect","onChange","t","isEncryptedMessage","deleteMessage","_id","rid","dismissMsgReport","formatDateAndTime","formatTime","formatDate","useRealName","Boolean","name","u","username","displayName","quotes","attachments","filter","attachment","createElement","Fragment","Divider","_updatedAt","LeftContainer","Container","Header","concat","Timestamp","title","ts","Role","fname","Body","length","blocks","md","e2e","mentions","channels","msg","id","files","mid","msgId","Toolbar","icon","onClick","action","disabled","exportDefault"],"sources":["client/views/admin/moderation/helpers/ContextMessage.tsx"],"sourcesContent":["import type { IMessage, MessageReport, MessageAttachment } from '@rocket.chat/core-typings';\nimport { isE2EEMessage, isQuoteAttachment } from '@rocket.chat/core-typings';\nimport { Message, MessageName, MessageToolbarItem, MessageToolbarWrapper, MessageUsername } from '@rocket.chat/fuselage';\nimport { UserAvatar } from '@rocket.chat/ui-avatar';\nimport { useSetting } from '@rocket.chat/ui-contexts';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nimport ReportReasonCollapsible from './ReportReasonCollapsible';\nimport MessageContentBody from '../../../../components/message/MessageContentBody';\nimport Attachments from '../../../../components/message/content/Attachments';\nimport UiKitMessageBlock from '../../../../components/message/uikit/UiKitMessageBlock';\nimport { useFormatDate } from '../../../../hooks/useFormatDate';\nimport { useFormatDateAndTime } from '../../../../hooks/useFormatDateAndTime';\nimport { useFormatTime } from '../../../../hooks/useFormatTime';\nimport { useUserDisplayName } from '../../../../hooks/useUserDisplayName';\nimport MessageReportInfo from '../MessageReportInfo';\nimport useDeleteMessage from '../hooks/useDeleteMessage';\nimport { useDismissMessageAction } from '../hooks/useDismissMessageAction';\n\nconst ContextMessage = ({\n\tmessage,\n\troom,\n\tdeleted,\n\tonRedirect,\n\tonChange,\n}: {\n\tmessage: any;\n\troom: MessageReport['room'];\n\tdeleted: boolean;\n\tonRedirect: (id: IMessage['_id']) => void;\n\tonChange: () => void;\n}): JSX.Element => {\n\tconst { t } = useTranslation();\n\n\tconst isEncryptedMessage = isE2EEMessage(message);\n\n\tconst deleteMessage = useDeleteMessage(message._id, message.rid, onChange);\n\tconst dismissMsgReport = useDismissMessageAction(message._id);\n\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst formatTime = useFormatTime();\n\tconst formatDate = useFormatDate();\n\tconst useRealName = Boolean(useSetting('UI_Use_Real_Name'));\n\n\tconst name = message.u.name || '';\n\tconst username = message.u.username || '';\n\n\tconst displayName = useUserDisplayName({ name, username });\n\n\tconst quotes = message?.attachments?.filter(isQuoteAttachment) || [];\n\n\tconst attachments = message?.attachments?.filter((attachment: MessageAttachment) => !isQuoteAttachment(attachment)) || [];\n\n\treturn (\n\t\t<>\n\t\t\t<Message.Divider>{formatDate(message._updatedAt)}</Message.Divider>\n\t\t\t<Message>\n\t\t\t\t<Message.LeftContainer>\n\t\t\t\t\t<UserAvatar username={message.u.username} />\n\t\t\t\t</Message.LeftContainer>\n\t\t\t\t<Message.Container>\n\t\t\t\t\t<Message.Header>\n\t\t\t\t\t\t<MessageName>{displayName}</MessageName>\n\t\t\t\t\t\t<>{useRealName && <MessageUsername>&nbsp;{`@${message.u.username}`}</MessageUsername>}</>\n\t\t\t\t\t\t<Message.Timestamp title={formatDateAndTime(message._updatedAt)}>\n\t\t\t\t\t\t\t{formatTime(message._updatedAt !== message.ts ? message._updatedAt : message.ts)}\n\t\t\t\t\t\t\t{message._updatedAt !== message.ts && ` (${t('edited')})`}\n\t\t\t\t\t\t</Message.Timestamp>\n\t\t\t\t\t\t<Message.Role>{room.name || room.fname || 'DM'}</Message.Role>\n\t\t\t\t\t</Message.Header>\n\t\t\t\t\t<Message.Body>\n\t\t\t\t\t\t{!!quotes?.length && <Attachments attachments={quotes} />}\n\t\t\t\t\t\t{!message.blocks?.length && !!message.md?.length ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{(!isEncryptedMessage || message.e2e === 'done') && (\n\t\t\t\t\t\t\t\t\t<MessageContentBody md={message.md} mentions={message.mentions} channels={message.channels} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{message.e2e === 'pending' && t('E2E_message_encrypted_placeholder')}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tmessage.msg\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{!!attachments && <Attachments id={message.files?.[0]?._id} attachments={attachments} />}\n\t\t\t\t\t\t{message.blocks && <UiKitMessageBlock rid={message.rid} mid={message._id} blocks={message.blocks} />}\n\t\t\t\t\t</Message.Body>\n\t\t\t\t\t<ReportReasonCollapsible>\n\t\t\t\t\t\t<MessageReportInfo msgId={message._id} />\n\t\t\t\t\t</ReportReasonCollapsible>\n\t\t\t\t</Message.Container>\n\t\t\t\t<MessageToolbarWrapper>\n\t\t\t\t\t<Message.Toolbar>\n\t\t\t\t\t\t<MessageToolbarItem\n\t\t\t\t\t\t\ticon='checkmark-circled'\n\t\t\t\t\t\t\ttitle={t('Moderation_Dismiss_reports')}\n\t\t\t\t\t\t\tonClick={() => dismissMsgReport.action()}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<MessageToolbarItem icon='arrow-forward' title={t('Moderation_Go_to_message')} onClick={() => onRedirect(message._id)} />\n\t\t\t\t\t\t<MessageToolbarItem disabled={deleted} icon='trash' title={t('Moderation_Delete_message')} onClick={() => deleteMessage()} />\n\t\t\t\t\t</Message.Toolbar>\n\t\t\t\t</MessageToolbarWrapper>\n\t\t\t</Message>\n\t\t</>\n\t);\n};\n\nexport default ContextMessage;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"e41ae0328b233c161bedc473014ccf1bb0cd968d"}
