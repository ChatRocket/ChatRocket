{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/Header/Omnichannel/QuickActions/hooks/useQuickActions.tsx","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/room/Header/Omnichannel/QuickActions/hooks/useQuickActions.tsx","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/Header/Omnichannel/QuickActions/hooks/useQuickActions.tsx","inputSourceMap":{"version":3,"file":"client/views/room/Header/Omnichannel/QuickActions/hooks/useQuickActions.tsx","sourceRoot":"","sources":["client/views/room/Header/Omnichannel/QuickActions/hooks/useQuickActions.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport {\n\tuseSetModal,\n\tuseToastMessageDispatch,\n\tuseUserId,\n\tuseSetting,\n\tusePermission,\n\tuseRole,\n\tuseEndpoint,\n\tuseMethod,\n\tuseTranslation,\n\tuseRouter,\n\tuseUserSubscription,\n} from '@rocket.chat/ui-contexts';\nimport React, { useCallback, useState, useEffect } from 'react';\n\nimport PlaceChatOnHoldModal from '../../../../../../../app/livechat-enterprise/client/components/modals/PlaceChatOnHoldModal';\nimport { LivechatInquiry } from '../../../../../../../app/livechat/client/collections/LivechatInquiry';\nimport { LegacyRoomManager } from '../../../../../../../app/ui-utils/client';\nimport CloseChatModal from '../../../../../../components/Omnichannel/modals/CloseChatModal';\nimport CloseChatModalData from '../../../../../../components/Omnichannel/modals/CloseChatModalData';\nimport ForwardChatModal from '../../../../../../components/Omnichannel/modals/ForwardChatModal';\nimport ReturnChatQueueModal from '../../../../../../components/Omnichannel/modals/ReturnChatQueueModal';\nimport TranscriptModal from '../../../../../../components/Omnichannel/modals/TranscriptModal';\nimport { useIsRoomOverMacLimit } from '../../../../../../hooks/omnichannel/useIsRoomOverMacLimit';\nimport { useOmnichannelRouteConfig } from '../../../../../../hooks/omnichannel/useOmnichannelRouteConfig';\nimport { useHasLicenseModule } from '../../../../../../hooks/useHasLicenseModule';\nimport { quickActionHooks } from '../../../../../../ui';\nimport { useOmnichannelRoom } from '../../../../contexts/RoomContext';\nimport type { QuickActionsActionConfig } from '../../../../lib/quickActions';\nimport { QuickActionsEnum } from '../../../../lib/quickActions';\nimport { usePutChatOnHoldMutation } from './usePutChatOnHoldMutation';\nimport { useReturnChatToQueueMutation } from './useReturnChatToQueueMutation';\n\nexport const useQuickActions = (): {\n\tquickActions: QuickActionsActionConfig[];\n\tactionDefault: (actionId: string) => void;\n} => {\n\tconst room = useOmnichannelRoom();\n\tconst setModal = useSetModal();\n\tconst router = useRouter();\n\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst [onHoldModalActive, setOnHoldModalActive] = useState(false);\n\n\tconst visitorRoomId = room.v._id;\n\tconst rid = room._id;\n\tconst uid = useUserId();\n\tconst subscription = useUserSubscription(rid);\n\tconst roomLastMessage = room.lastMessage;\n\n\tconst getVisitorInfo = useEndpoint('GET', '/v1/livechat/visitors.info');\n\n\tconst getVisitorEmail = useMutableCallback(async () => {\n\t\tif (!visitorRoomId) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tvisitor: { visitorEmails },\n\t\t} = await getVisitorInfo({ visitorId: visitorRoomId });\n\n\t\tif (visitorEmails?.length && visitorEmails[0].address) {\n\t\t\treturn visitorEmails[0].address;\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tif (onHoldModalActive && roomLastMessage?.token) {\n\t\t\tsetModal(null);\n\t\t}\n\t}, [roomLastMessage, onHoldModalActive, setModal]);\n\n\tconst closeModal = useCallback(() => setModal(null), [setModal]);\n\n\tconst requestTranscript = useEndpoint('POST', '/v1/livechat/transcript/:rid', { rid });\n\n\tconst handleRequestTranscript = useCallback(\n\t\tasync (email: string, subject: string) => {\n\t\t\ttry {\n\t\t\t\tawait requestTranscript({ email, subject });\n\t\t\t\tcloseModal();\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'success',\n\t\t\t\t\tmessage: t('Livechat_email_transcript_has_been_requested'),\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[closeModal, dispatchToastMessage, requestTranscript, t],\n\t);\n\n\tconst sendTranscriptPDF = useEndpoint('POST', '/v1/omnichannel/:rid/request-transcript', { rid });\n\n\tconst handleSendTranscriptPDF = useCallback(async () => {\n\t\ttry {\n\t\t\tawait sendTranscriptPDF();\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Livechat_transcript_has_been_requested'),\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [dispatchToastMessage, sendTranscriptPDF, t]);\n\n\tconst sendTranscript = useMethod('livechat:sendTranscript');\n\n\tconst handleSendTranscript = useCallback(\n\t\tasync (email: string, subject: string, token: string) => {\n\t\t\ttry {\n\t\t\t\tawait sendTranscript(token, rid, email, subject);\n\t\t\t\tcloseModal();\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[closeModal, dispatchToastMessage, rid, sendTranscript],\n\t);\n\n\tconst discardTranscript = useEndpoint('DELETE', '/v1/livechat/transcript/:rid', { rid });\n\n\tconst handleDiscardTranscript = useCallback(async () => {\n\t\ttry {\n\t\t\tawait discardTranscript();\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Livechat_transcript_request_has_been_canceled'),\n\t\t\t});\n\t\t\tcloseModal();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [closeModal, discardTranscript, dispatchToastMessage, t]);\n\n\tconst forwardChat = useEndpoint('POST', '/v1/livechat/room.forward');\n\n\tconst handleForwardChat = useCallback(\n\t\tasync (departmentId?: string, userId?: string, comment?: string) => {\n\t\t\tif (departmentId && userId) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst transferData: {\n\t\t\t\troomId: string;\n\t\t\t\tclientAction: boolean;\n\t\t\t\tcomment?: string;\n\t\t\t\tdepartmentId?: string;\n\t\t\t\tuserId?: string;\n\t\t\t} = {\n\t\t\t\troomId: rid,\n\t\t\t\tcomment,\n\t\t\t\tclientAction: true,\n\t\t\t};\n\n\t\t\tif (departmentId) {\n\t\t\t\ttransferData.departmentId = departmentId;\n\t\t\t}\n\t\t\tif (userId) {\n\t\t\t\ttransferData.userId = userId;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait forwardChat(transferData);\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Transferred') });\n\t\t\t\trouter.navigate('/home');\n\t\t\t\tLegacyRoomManager.close(room.t + rid);\n\t\t\t\tcloseModal();\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[closeModal, dispatchToastMessage, forwardChat, room.t, rid, router, t],\n\t);\n\n\tconst closeChat = useEndpoint('POST', '/v1/livechat/room.closeByUser');\n\n\tconst handleClose = useCallback(\n\t\tasync (\n\t\t\tcomment?: string,\n\t\t\ttags?: string[],\n\t\t\tpreferences?: { omnichannelTranscriptPDF: boolean; omnichannelTranscriptEmail: boolean },\n\t\t\trequestData?: { email: string; subject: string },\n\t\t) => {\n\t\t\ttry {\n\t\t\t\tawait closeChat({\n\t\t\t\t\trid,\n\t\t\t\t\t...(comment && { comment }),\n\t\t\t\t\t...(tags && { tags }),\n\t\t\t\t\t...(preferences?.omnichannelTranscriptPDF && { generateTranscriptPdf: true }),\n\t\t\t\t\t...(preferences?.omnichannelTranscriptEmail && requestData\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\ttranscriptEmail: {\n\t\t\t\t\t\t\t\t\tsendToVisitor: preferences?.omnichannelTranscriptEmail,\n\t\t\t\t\t\t\t\t\trequestData,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: { transcriptEmail: { sendToVisitor: false } }),\n\t\t\t\t});\n\t\t\t\tLivechatInquiry.remove({ rid });\n\t\t\t\tcloseModal();\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Chat_closed_successfully') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[closeChat, closeModal, dispatchToastMessage, rid, t],\n\t);\n\n\tconst returnChatToQueueMutation = useReturnChatToQueueMutation({\n\t\tonSuccess: () => {\n\t\t\tLegacyRoomManager.close(room.t + rid);\n\t\t\trouter.navigate('/home');\n\t\t},\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tcloseModal();\n\t\t},\n\t});\n\n\tconst putChatOnHoldMutation = usePutChatOnHoldMutation({\n\t\tonSuccess: () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Chat_On_Hold_Successfully') });\n\t\t},\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tcloseModal();\n\t\t},\n\t});\n\n\tconst handleAction = useMutableCallback(async (id: string) => {\n\t\tswitch (id) {\n\t\t\tcase QuickActionsEnum.MoveQueue:\n\t\t\t\tsetModal(\n\t\t\t\t\t<ReturnChatQueueModal\n\t\t\t\t\t\tonMoveChat={(): void => returnChatToQueueMutation.mutate(rid)}\n\t\t\t\t\t\tonCancel={(): void => {\n\t\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>,\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.TranscriptPDF:\n\t\t\t\thandleSendTranscriptPDF();\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.TranscriptEmail:\n\t\t\t\tconst visitorEmail = await getVisitorEmail();\n\n\t\t\t\tif (!visitorEmail) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Customer_without_registered_email') });\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tsetModal(\n\t\t\t\t\t<TranscriptModal\n\t\t\t\t\t\troom={room}\n\t\t\t\t\t\temail={visitorEmail}\n\t\t\t\t\t\tonRequest={handleRequestTranscript}\n\t\t\t\t\t\tonSend={handleSendTranscript}\n\t\t\t\t\t\tonDiscard={handleDiscardTranscript}\n\t\t\t\t\t\tonCancel={closeModal}\n\t\t\t\t\t/>,\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.ChatForward:\n\t\t\t\tsetModal(<ForwardChatModal room={room} onForward={handleForwardChat} onCancel={closeModal} />);\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.CloseChat:\n\t\t\t\tconst email = await getVisitorEmail();\n\t\t\t\tsetModal(\n\t\t\t\t\troom.departmentId ? (\n\t\t\t\t\t\t<CloseChatModalData visitorEmail={email} departmentId={room.departmentId} onConfirm={handleClose} onCancel={closeModal} />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<CloseChatModal visitorEmail={email} onConfirm={handleClose} onCancel={closeModal} />\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.OnHoldChat:\n\t\t\t\tsetModal(\n\t\t\t\t\t<PlaceChatOnHoldModal\n\t\t\t\t\t\tonOnHoldChat={(): void => putChatOnHoldMutation.mutate(rid)}\n\t\t\t\t\t\tonCancel={(): void => {\n\t\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t\t\tsetOnHoldModalActive(false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>,\n\t\t\t\t);\n\t\t\t\tsetOnHoldModalActive(true);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tconst omnichannelRouteConfig = useOmnichannelRouteConfig();\n\n\tconst manualOnHoldAllowed = useSetting('Livechat_allow_manual_on_hold');\n\n\tconst hasManagerRole = useRole('livechat-manager');\n\tconst hasMonitorRole = useRole('livechat-monitor');\n\n\tconst roomOpen = room?.open && (room.u?._id === uid || hasManagerRole || hasMonitorRole) && room?.lastMessage?.t !== 'livechat-close';\n\tconst canMoveQueue = !!omnichannelRouteConfig?.returnQueue && room?.u !== undefined;\n\tconst canForwardGuest = usePermission('transfer-livechat-guest');\n\tconst canSendTranscriptEmail = usePermission('send-omnichannel-chat-transcript');\n\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\n\tconst canSendTranscriptPDF = usePermission('request-pdf-transcript');\n\tconst canCloseRoom = usePermission('close-livechat-room');\n\tconst canCloseOthersRoom = usePermission('close-others-livechat-room');\n\tconst restrictedOnHold = useSetting('Livechat_allow_manual_on_hold_upon_agent_engagement_only');\n\tconst canRoomBePlacedOnHold = !room.onHold && room.u;\n\tconst canAgentPlaceOnHold = !room.lastMessage?.token;\n\tconst canPlaceChatOnHold = Boolean(manualOnHoldAllowed && canRoomBePlacedOnHold && (!restrictedOnHold || canAgentPlaceOnHold));\n\tconst isRoomOverMacLimit = useIsRoomOverMacLimit(room);\n\n\tconst hasPermissionButtons = (id: string): boolean => {\n\t\tswitch (id) {\n\t\t\tcase QuickActionsEnum.MoveQueue:\n\t\t\t\treturn !isRoomOverMacLimit && !!roomOpen && canMoveQueue;\n\t\t\tcase QuickActionsEnum.ChatForward:\n\t\t\t\treturn !isRoomOverMacLimit && !!roomOpen && canForwardGuest;\n\t\t\tcase QuickActionsEnum.Transcript:\n\t\t\t\treturn !isRoomOverMacLimit && (canSendTranscriptEmail || (hasLicense && canSendTranscriptPDF));\n\t\t\tcase QuickActionsEnum.TranscriptEmail:\n\t\t\t\treturn !isRoomOverMacLimit && canSendTranscriptEmail;\n\t\t\tcase QuickActionsEnum.TranscriptPDF:\n\t\t\t\treturn hasLicense && !isRoomOverMacLimit && canSendTranscriptPDF;\n\t\t\tcase QuickActionsEnum.CloseChat:\n\t\t\t\treturn (subscription && (canCloseRoom || canCloseOthersRoom)) || (!!roomOpen && canCloseOthersRoom);\n\t\t\tcase QuickActionsEnum.OnHoldChat:\n\t\t\t\treturn !!roomOpen && canPlaceChatOnHold;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn false;\n\t};\n\n\tconst quickActions = quickActionHooks\n\t\t.map((quickActionHook) => quickActionHook())\n\t\t.filter((quickAction): quickAction is QuickActionsActionConfig => !!quickAction)\n\t\t.filter((action) => {\n\t\t\tconst { options, id } = action;\n\t\t\tif (options) {\n\t\t\t\taction.options = options.filter(({ id }) => hasPermissionButtons(id));\n\t\t\t}\n\n\t\t\treturn hasPermissionButtons(id);\n\t\t})\n\t\t.sort((a, b) => (a.order ?? 0) - (b.order ?? 0));\n\n\tconst actionDefault = useMutableCallback((actionId: string) => {\n\t\thandleAction(actionId);\n\t});\n\n\treturn { quickActions, actionDefault };\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/room/Header/Omnichannel/QuickActions/hooks/useQuickActions.tsx","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/room/Header/Omnichannel/QuickActions/hooks/useQuickActions.tsx","inputSourceMap":{"version":3,"file":"client/views/room/Header/Omnichannel/QuickActions/hooks/useQuickActions.tsx","sourceRoot":"","sources":["client/views/room/Header/Omnichannel/QuickActions/hooks/useQuickActions.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport {\n\tuseSetModal,\n\tuseToastMessageDispatch,\n\tuseUserId,\n\tuseSetting,\n\tusePermission,\n\tuseRole,\n\tuseEndpoint,\n\tuseMethod,\n\tuseTranslation,\n\tuseRouter,\n\tuseUserSubscription,\n} from '@rocket.chat/ui-contexts';\nimport React, { useCallback, useState, useEffect } from 'react';\n\nimport PlaceChatOnHoldModal from '../../../../../../../app/livechat-enterprise/client/components/modals/PlaceChatOnHoldModal';\nimport { LivechatInquiry } from '../../../../../../../app/livechat/client/collections/LivechatInquiry';\nimport { LegacyRoomManager } from '../../../../../../../app/ui-utils/client';\nimport CloseChatModal from '../../../../../../components/Omnichannel/modals/CloseChatModal';\nimport CloseChatModalData from '../../../../../../components/Omnichannel/modals/CloseChatModalData';\nimport ForwardChatModal from '../../../../../../components/Omnichannel/modals/ForwardChatModal';\nimport ReturnChatQueueModal from '../../../../../../components/Omnichannel/modals/ReturnChatQueueModal';\nimport TranscriptModal from '../../../../../../components/Omnichannel/modals/TranscriptModal';\nimport { useIsRoomOverMacLimit } from '../../../../../../hooks/omnichannel/useIsRoomOverMacLimit';\nimport { useOmnichannelRouteConfig } from '../../../../../../hooks/omnichannel/useOmnichannelRouteConfig';\nimport { useHasLicenseModule } from '../../../../../../hooks/useHasLicenseModule';\nimport { quickActionHooks } from '../../../../../../ui';\nimport { useOmnichannelRoom } from '../../../../contexts/RoomContext';\nimport type { QuickActionsActionConfig } from '../../../../lib/quickActions';\nimport { QuickActionsEnum } from '../../../../lib/quickActions';\nimport { usePutChatOnHoldMutation } from './usePutChatOnHoldMutation';\nimport { useReturnChatToQueueMutation } from './useReturnChatToQueueMutation';\n\nexport const useQuickActions = (): {\n\tquickActions: QuickActionsActionConfig[];\n\tactionDefault: (actionId: string) => void;\n} => {\n\tconst room = useOmnichannelRoom();\n\tconst setModal = useSetModal();\n\tconst router = useRouter();\n\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst [onHoldModalActive, setOnHoldModalActive] = useState(false);\n\n\tconst visitorRoomId = room.v._id;\n\tconst rid = room._id;\n\tconst uid = useUserId();\n\tconst subscription = useUserSubscription(rid);\n\tconst roomLastMessage = room.lastMessage;\n\n\tconst getVisitorInfo = useEndpoint('GET', '/v1/livechat/visitors.info');\n\n\tconst getVisitorEmail = useMutableCallback(async () => {\n\t\tif (!visitorRoomId) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tvisitor: { visitorEmails },\n\t\t} = await getVisitorInfo({ visitorId: visitorRoomId });\n\n\t\tif (visitorEmails?.length && visitorEmails[0].address) {\n\t\t\treturn visitorEmails[0].address;\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tif (onHoldModalActive && roomLastMessage?.token) {\n\t\t\tsetModal(null);\n\t\t}\n\t}, [roomLastMessage, onHoldModalActive, setModal]);\n\n\tconst closeModal = useCallback(() => setModal(null), [setModal]);\n\n\tconst requestTranscript = useEndpoint('POST', '/v1/livechat/transcript/:rid', { rid });\n\n\tconst handleRequestTranscript = useCallback(\n\t\tasync (email: string, subject: string) => {\n\t\t\ttry {\n\t\t\t\tawait requestTranscript({ email, subject });\n\t\t\t\tcloseModal();\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'success',\n\t\t\t\t\tmessage: t('Livechat_email_transcript_has_been_requested'),\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[closeModal, dispatchToastMessage, requestTranscript, t],\n\t);\n\n\tconst sendTranscriptPDF = useEndpoint('POST', '/v1/omnichannel/:rid/request-transcript', { rid });\n\n\tconst handleSendTranscriptPDF = useCallback(async () => {\n\t\ttry {\n\t\t\tawait sendTranscriptPDF();\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Livechat_transcript_has_been_requested'),\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [dispatchToastMessage, sendTranscriptPDF, t]);\n\n\tconst sendTranscript = useMethod('livechat:sendTranscript');\n\n\tconst handleSendTranscript = useCallback(\n\t\tasync (email: string, subject: string, token: string) => {\n\t\t\ttry {\n\t\t\t\tawait sendTranscript(token, rid, email, subject);\n\t\t\t\tcloseModal();\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[closeModal, dispatchToastMessage, rid, sendTranscript],\n\t);\n\n\tconst discardTranscript = useEndpoint('DELETE', '/v1/livechat/transcript/:rid', { rid });\n\n\tconst handleDiscardTranscript = useCallback(async () => {\n\t\ttry {\n\t\t\tawait discardTranscript();\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Livechat_transcript_request_has_been_canceled'),\n\t\t\t});\n\t\t\tcloseModal();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [closeModal, discardTranscript, dispatchToastMessage, t]);\n\n\tconst forwardChat = useEndpoint('POST', '/v1/livechat/room.forward');\n\n\tconst handleForwardChat = useCallback(\n\t\tasync (departmentId?: string, userId?: string, comment?: string) => {\n\t\t\tif (departmentId && userId) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst transferData: {\n\t\t\t\troomId: string;\n\t\t\t\tclientAction: boolean;\n\t\t\t\tcomment?: string;\n\t\t\t\tdepartmentId?: string;\n\t\t\t\tuserId?: string;\n\t\t\t} = {\n\t\t\t\troomId: rid,\n\t\t\t\tcomment,\n\t\t\t\tclientAction: true,\n\t\t\t};\n\n\t\t\tif (departmentId) {\n\t\t\t\ttransferData.departmentId = departmentId;\n\t\t\t}\n\t\t\tif (userId) {\n\t\t\t\ttransferData.userId = userId;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait forwardChat(transferData);\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Transferred') });\n\t\t\t\trouter.navigate('/home');\n\t\t\t\tLegacyRoomManager.close(room.t + rid);\n\t\t\t\tcloseModal();\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[closeModal, dispatchToastMessage, forwardChat, room.t, rid, router, t],\n\t);\n\n\tconst closeChat = useEndpoint('POST', '/v1/livechat/room.closeByUser');\n\n\tconst handleClose = useCallback(\n\t\tasync (\n\t\t\tcomment?: string,\n\t\t\ttags?: string[],\n\t\t\tpreferences?: { omnichannelTranscriptPDF: boolean; omnichannelTranscriptEmail: boolean },\n\t\t\trequestData?: { email: string; subject: string },\n\t\t) => {\n\t\t\ttry {\n\t\t\t\tawait closeChat({\n\t\t\t\t\trid,\n\t\t\t\t\t...(comment && { comment }),\n\t\t\t\t\t...(tags && { tags }),\n\t\t\t\t\t...(preferences?.omnichannelTranscriptPDF && { generateTranscriptPdf: true }),\n\t\t\t\t\t...(preferences?.omnichannelTranscriptEmail && requestData\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\ttranscriptEmail: {\n\t\t\t\t\t\t\t\t\tsendToVisitor: preferences?.omnichannelTranscriptEmail,\n\t\t\t\t\t\t\t\t\trequestData,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: { transcriptEmail: { sendToVisitor: false } }),\n\t\t\t\t});\n\t\t\t\tLivechatInquiry.remove({ rid });\n\t\t\t\tcloseModal();\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Chat_closed_successfully') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[closeChat, closeModal, dispatchToastMessage, rid, t],\n\t);\n\n\tconst returnChatToQueueMutation = useReturnChatToQueueMutation({\n\t\tonSuccess: () => {\n\t\t\tLegacyRoomManager.close(room.t + rid);\n\t\t\trouter.navigate('/home');\n\t\t},\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tcloseModal();\n\t\t},\n\t});\n\n\tconst putChatOnHoldMutation = usePutChatOnHoldMutation({\n\t\tonSuccess: () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Chat_On_Hold_Successfully') });\n\t\t},\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tcloseModal();\n\t\t},\n\t});\n\n\tconst handleAction = useMutableCallback(async (id: string) => {\n\t\tswitch (id) {\n\t\t\tcase QuickActionsEnum.MoveQueue:\n\t\t\t\tsetModal(\n\t\t\t\t\t<ReturnChatQueueModal\n\t\t\t\t\t\tonMoveChat={(): void => returnChatToQueueMutation.mutate(rid)}\n\t\t\t\t\t\tonCancel={(): void => {\n\t\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>,\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.TranscriptPDF:\n\t\t\t\thandleSendTranscriptPDF();\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.TranscriptEmail:\n\t\t\t\tconst visitorEmail = await getVisitorEmail();\n\n\t\t\t\tif (!visitorEmail) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Customer_without_registered_email') });\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tsetModal(\n\t\t\t\t\t<TranscriptModal\n\t\t\t\t\t\troom={room}\n\t\t\t\t\t\temail={visitorEmail}\n\t\t\t\t\t\tonRequest={handleRequestTranscript}\n\t\t\t\t\t\tonSend={handleSendTranscript}\n\t\t\t\t\t\tonDiscard={handleDiscardTranscript}\n\t\t\t\t\t\tonCancel={closeModal}\n\t\t\t\t\t/>,\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.ChatForward:\n\t\t\t\tsetModal(<ForwardChatModal room={room} onForward={handleForwardChat} onCancel={closeModal} />);\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.CloseChat:\n\t\t\t\tconst email = await getVisitorEmail();\n\t\t\t\tsetModal(\n\t\t\t\t\troom.departmentId ? (\n\t\t\t\t\t\t<CloseChatModalData visitorEmail={email} departmentId={room.departmentId} onConfirm={handleClose} onCancel={closeModal} />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<CloseChatModal visitorEmail={email} onConfirm={handleClose} onCancel={closeModal} />\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.OnHoldChat:\n\t\t\t\tsetModal(\n\t\t\t\t\t<PlaceChatOnHoldModal\n\t\t\t\t\t\tonOnHoldChat={(): void => putChatOnHoldMutation.mutate(rid)}\n\t\t\t\t\t\tonCancel={(): void => {\n\t\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t\t\tsetOnHoldModalActive(false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>,\n\t\t\t\t);\n\t\t\t\tsetOnHoldModalActive(true);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tconst omnichannelRouteConfig = useOmnichannelRouteConfig();\n\n\tconst manualOnHoldAllowed = useSetting('Livechat_allow_manual_on_hold');\n\n\tconst hasManagerRole = useRole('livechat-manager');\n\tconst hasMonitorRole = useRole('livechat-monitor');\n\n\tconst roomOpen = room?.open && (room.u?._id === uid || hasManagerRole || hasMonitorRole) && room?.lastMessage?.t !== 'livechat-close';\n\tconst canMoveQueue = !!omnichannelRouteConfig?.returnQueue && room?.u !== undefined;\n\tconst canForwardGuest = usePermission('transfer-livechat-guest');\n\tconst canSendTranscriptEmail = usePermission('send-omnichannel-chat-transcript');\n\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\n\tconst canSendTranscriptPDF = usePermission('request-pdf-transcript');\n\tconst canCloseRoom = usePermission('close-livechat-room');\n\tconst canCloseOthersRoom = usePermission('close-others-livechat-room');\n\tconst restrictedOnHold = useSetting('Livechat_allow_manual_on_hold_upon_agent_engagement_only');\n\tconst canRoomBePlacedOnHold = !room.onHold && room.u;\n\tconst canAgentPlaceOnHold = !room.lastMessage?.token;\n\tconst canPlaceChatOnHold = Boolean(manualOnHoldAllowed && canRoomBePlacedOnHold && (!restrictedOnHold || canAgentPlaceOnHold));\n\tconst isRoomOverMacLimit = useIsRoomOverMacLimit(room);\n\n\tconst hasPermissionButtons = (id: string): boolean => {\n\t\tswitch (id) {\n\t\t\tcase QuickActionsEnum.MoveQueue:\n\t\t\t\treturn !isRoomOverMacLimit && !!roomOpen && canMoveQueue;\n\t\t\tcase QuickActionsEnum.ChatForward:\n\t\t\t\treturn !isRoomOverMacLimit && !!roomOpen && canForwardGuest;\n\t\t\tcase QuickActionsEnum.Transcript:\n\t\t\t\treturn !isRoomOverMacLimit && (canSendTranscriptEmail || (hasLicense && canSendTranscriptPDF));\n\t\t\tcase QuickActionsEnum.TranscriptEmail:\n\t\t\t\treturn !isRoomOverMacLimit && canSendTranscriptEmail;\n\t\t\tcase QuickActionsEnum.TranscriptPDF:\n\t\t\t\treturn hasLicense && !isRoomOverMacLimit && canSendTranscriptPDF;\n\t\t\tcase QuickActionsEnum.CloseChat:\n\t\t\t\treturn (subscription && (canCloseRoom || canCloseOthersRoom)) || (!!roomOpen && canCloseOthersRoom);\n\t\t\tcase QuickActionsEnum.OnHoldChat:\n\t\t\t\treturn !!roomOpen && canPlaceChatOnHold;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn false;\n\t};\n\n\tconst quickActions = quickActionHooks\n\t\t.map((quickActionHook) => quickActionHook())\n\t\t.filter((quickAction): quickAction is QuickActionsActionConfig => !!quickAction)\n\t\t.filter((action) => {\n\t\t\tconst { options, id } = action;\n\t\t\tif (options) {\n\t\t\t\taction.options = options.filter(({ id }) => hasPermissionButtons(id));\n\t\t\t}\n\n\t\t\treturn hasPermissionButtons(id);\n\t\t})\n\t\t.sort((a, b) => (a.order ?? 0) - (b.order ?? 0));\n\n\tconst actionDefault = useMutableCallback((actionId: string) => {\n\t\thandleAction(actionId);\n\t});\n\n\treturn { quickActions, actionDefault };\n};\n"]}}},"code":"let _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n}, 0);\nmodule.export({\n  useQuickActions: () => useQuickActions\n});\nlet useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback(v) {\n    useMutableCallback = v;\n  }\n}, 0);\nlet useSetModal, useToastMessageDispatch, useUserId, useSetting, usePermission, useRole, useEndpoint, useMethod, useTranslation, useRouter, useUserSubscription;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useSetModal(v) {\n    useSetModal = v;\n  },\n  useToastMessageDispatch(v) {\n    useToastMessageDispatch = v;\n  },\n  useUserId(v) {\n    useUserId = v;\n  },\n  useSetting(v) {\n    useSetting = v;\n  },\n  usePermission(v) {\n    usePermission = v;\n  },\n  useRole(v) {\n    useRole = v;\n  },\n  useEndpoint(v) {\n    useEndpoint = v;\n  },\n  useMethod(v) {\n    useMethod = v;\n  },\n  useTranslation(v) {\n    useTranslation = v;\n  },\n  useRouter(v) {\n    useRouter = v;\n  },\n  useUserSubscription(v) {\n    useUserSubscription = v;\n  }\n}, 1);\nlet React, useCallback, useState, useEffect;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useCallback(v) {\n    useCallback = v;\n  },\n  useState(v) {\n    useState = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  }\n}, 2);\nlet PlaceChatOnHoldModal;\nmodule.link(\"../../../../../../../app/livechat-enterprise/client/components/modals/PlaceChatOnHoldModal\", {\n  default(v) {\n    PlaceChatOnHoldModal = v;\n  }\n}, 3);\nlet LivechatInquiry;\nmodule.link(\"../../../../../../../app/livechat/client/collections/LivechatInquiry\", {\n  LivechatInquiry(v) {\n    LivechatInquiry = v;\n  }\n}, 4);\nlet LegacyRoomManager;\nmodule.link(\"../../../../../../../app/ui-utils/client\", {\n  LegacyRoomManager(v) {\n    LegacyRoomManager = v;\n  }\n}, 5);\nlet CloseChatModal;\nmodule.link(\"../../../../../../components/Omnichannel/modals/CloseChatModal\", {\n  default(v) {\n    CloseChatModal = v;\n  }\n}, 6);\nlet CloseChatModalData;\nmodule.link(\"../../../../../../components/Omnichannel/modals/CloseChatModalData\", {\n  default(v) {\n    CloseChatModalData = v;\n  }\n}, 7);\nlet ForwardChatModal;\nmodule.link(\"../../../../../../components/Omnichannel/modals/ForwardChatModal\", {\n  default(v) {\n    ForwardChatModal = v;\n  }\n}, 8);\nlet ReturnChatQueueModal;\nmodule.link(\"../../../../../../components/Omnichannel/modals/ReturnChatQueueModal\", {\n  default(v) {\n    ReturnChatQueueModal = v;\n  }\n}, 9);\nlet TranscriptModal;\nmodule.link(\"../../../../../../components/Omnichannel/modals/TranscriptModal\", {\n  default(v) {\n    TranscriptModal = v;\n  }\n}, 10);\nlet useIsRoomOverMacLimit;\nmodule.link(\"../../../../../../hooks/omnichannel/useIsRoomOverMacLimit\", {\n  useIsRoomOverMacLimit(v) {\n    useIsRoomOverMacLimit = v;\n  }\n}, 11);\nlet useOmnichannelRouteConfig;\nmodule.link(\"../../../../../../hooks/omnichannel/useOmnichannelRouteConfig\", {\n  useOmnichannelRouteConfig(v) {\n    useOmnichannelRouteConfig = v;\n  }\n}, 12);\nlet useHasLicenseModule;\nmodule.link(\"../../../../../../hooks/useHasLicenseModule\", {\n  useHasLicenseModule(v) {\n    useHasLicenseModule = v;\n  }\n}, 13);\nlet quickActionHooks;\nmodule.link(\"../../../../../../ui\", {\n  quickActionHooks(v) {\n    quickActionHooks = v;\n  }\n}, 14);\nlet useOmnichannelRoom;\nmodule.link(\"../../../../contexts/RoomContext\", {\n  useOmnichannelRoom(v) {\n    useOmnichannelRoom = v;\n  }\n}, 15);\nlet QuickActionsEnum;\nmodule.link(\"../../../../lib/quickActions\", {\n  QuickActionsEnum(v) {\n    QuickActionsEnum = v;\n  }\n}, 16);\nlet usePutChatOnHoldMutation;\nmodule.link(\"./usePutChatOnHoldMutation\", {\n  usePutChatOnHoldMutation(v) {\n    usePutChatOnHoldMutation = v;\n  }\n}, 17);\nlet useReturnChatToQueueMutation;\nmodule.link(\"./useReturnChatToQueueMutation\", {\n  useReturnChatToQueueMutation(v) {\n    useReturnChatToQueueMutation = v;\n  }\n}, 18);\nconst useQuickActions = () => {\n  var _room$u, _room$lastMessage, _room$lastMessage2;\n  const room = useOmnichannelRoom();\n  const setModal = useSetModal();\n  const router = useRouter();\n  const t = useTranslation();\n  const dispatchToastMessage = useToastMessageDispatch();\n  const [onHoldModalActive, setOnHoldModalActive] = useState(false);\n  const visitorRoomId = room.v._id;\n  const rid = room._id;\n  const uid = useUserId();\n  const subscription = useUserSubscription(rid);\n  const roomLastMessage = room.lastMessage;\n  const getVisitorInfo = useEndpoint('GET', '/v1/livechat/visitors.info');\n  const getVisitorEmail = useMutableCallback(async () => {\n    if (!visitorRoomId) {\n      return;\n    }\n    const {\n      visitor: {\n        visitorEmails\n      }\n    } = await getVisitorInfo({\n      visitorId: visitorRoomId\n    });\n    if (visitorEmails !== null && visitorEmails !== void 0 && visitorEmails.length && visitorEmails[0].address) {\n      return visitorEmails[0].address;\n    }\n  });\n  useEffect(() => {\n    if (onHoldModalActive && roomLastMessage !== null && roomLastMessage !== void 0 && roomLastMessage.token) {\n      setModal(null);\n    }\n  }, [roomLastMessage, onHoldModalActive, setModal]);\n  const closeModal = useCallback(() => setModal(null), [setModal]);\n  const requestTranscript = useEndpoint('POST', '/v1/livechat/transcript/:rid', {\n    rid\n  });\n  const handleRequestTranscript = useCallback(async (email, subject) => {\n    try {\n      await requestTranscript({\n        email,\n        subject\n      });\n      closeModal();\n      dispatchToastMessage({\n        type: 'success',\n        message: t('Livechat_email_transcript_has_been_requested')\n      });\n    } catch (error) {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    }\n  }, [closeModal, dispatchToastMessage, requestTranscript, t]);\n  const sendTranscriptPDF = useEndpoint('POST', '/v1/omnichannel/:rid/request-transcript', {\n    rid\n  });\n  const handleSendTranscriptPDF = useCallback(async () => {\n    try {\n      await sendTranscriptPDF();\n      dispatchToastMessage({\n        type: 'success',\n        message: t('Livechat_transcript_has_been_requested')\n      });\n    } catch (error) {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    }\n  }, [dispatchToastMessage, sendTranscriptPDF, t]);\n  const sendTranscript = useMethod('livechat:sendTranscript');\n  const handleSendTranscript = useCallback(async (email, subject, token) => {\n    try {\n      await sendTranscript(token, rid, email, subject);\n      closeModal();\n    } catch (error) {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    }\n  }, [closeModal, dispatchToastMessage, rid, sendTranscript]);\n  const discardTranscript = useEndpoint('DELETE', '/v1/livechat/transcript/:rid', {\n    rid\n  });\n  const handleDiscardTranscript = useCallback(async () => {\n    try {\n      await discardTranscript();\n      dispatchToastMessage({\n        type: 'success',\n        message: t('Livechat_transcript_request_has_been_canceled')\n      });\n      closeModal();\n    } catch (error) {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    }\n  }, [closeModal, discardTranscript, dispatchToastMessage, t]);\n  const forwardChat = useEndpoint('POST', '/v1/livechat/room.forward');\n  const handleForwardChat = useCallback(async (departmentId, userId, comment) => {\n    if (departmentId && userId) {\n      return;\n    }\n    const transferData = {\n      roomId: rid,\n      comment,\n      clientAction: true\n    };\n    if (departmentId) {\n      transferData.departmentId = departmentId;\n    }\n    if (userId) {\n      transferData.userId = userId;\n    }\n    try {\n      await forwardChat(transferData);\n      dispatchToastMessage({\n        type: 'success',\n        message: t('Transferred')\n      });\n      router.navigate('/home');\n      LegacyRoomManager.close(room.t + rid);\n      closeModal();\n    } catch (error) {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    }\n  }, [closeModal, dispatchToastMessage, forwardChat, room.t, rid, router, t]);\n  const closeChat = useEndpoint('POST', '/v1/livechat/room.closeByUser');\n  const handleClose = useCallback(async (comment, tags, preferences, requestData) => {\n    try {\n      await closeChat(_objectSpread(_objectSpread(_objectSpread(_objectSpread({\n        rid\n      }, comment && {\n        comment\n      }), tags && {\n        tags\n      }), (preferences === null || preferences === void 0 ? void 0 : preferences.omnichannelTranscriptPDF) && {\n        generateTranscriptPdf: true\n      }), preferences !== null && preferences !== void 0 && preferences.omnichannelTranscriptEmail && requestData ? {\n        transcriptEmail: {\n          sendToVisitor: preferences === null || preferences === void 0 ? void 0 : preferences.omnichannelTranscriptEmail,\n          requestData\n        }\n      } : {\n        transcriptEmail: {\n          sendToVisitor: false\n        }\n      }));\n      LivechatInquiry.remove({\n        rid\n      });\n      closeModal();\n      dispatchToastMessage({\n        type: 'success',\n        message: t('Chat_closed_successfully')\n      });\n    } catch (error) {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    }\n  }, [closeChat, closeModal, dispatchToastMessage, rid, t]);\n  const returnChatToQueueMutation = useReturnChatToQueueMutation({\n    onSuccess: () => {\n      LegacyRoomManager.close(room.t + rid);\n      router.navigate('/home');\n    },\n    onError: error => {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    },\n    onSettled: () => {\n      closeModal();\n    }\n  });\n  const putChatOnHoldMutation = usePutChatOnHoldMutation({\n    onSuccess: () => {\n      dispatchToastMessage({\n        type: 'success',\n        message: t('Chat_On_Hold_Successfully')\n      });\n    },\n    onError: error => {\n      dispatchToastMessage({\n        type: 'error',\n        message: error\n      });\n    },\n    onSettled: () => {\n      closeModal();\n    }\n  });\n  const handleAction = useMutableCallback(async id => {\n    switch (id) {\n      case QuickActionsEnum.MoveQueue:\n        setModal( /*#__PURE__*/React.createElement(ReturnChatQueueModal, {\n          onMoveChat: () => returnChatToQueueMutation.mutate(rid),\n          onCancel: () => {\n            closeModal();\n          }\n        }));\n        break;\n      case QuickActionsEnum.TranscriptPDF:\n        handleSendTranscriptPDF();\n        break;\n      case QuickActionsEnum.TranscriptEmail:\n        const visitorEmail = await getVisitorEmail();\n        if (!visitorEmail) {\n          dispatchToastMessage({\n            type: 'error',\n            message: t('Customer_without_registered_email')\n          });\n          break;\n        }\n        setModal( /*#__PURE__*/React.createElement(TranscriptModal, {\n          room: room,\n          email: visitorEmail,\n          onRequest: handleRequestTranscript,\n          onSend: handleSendTranscript,\n          onDiscard: handleDiscardTranscript,\n          onCancel: closeModal\n        }));\n        break;\n      case QuickActionsEnum.ChatForward:\n        setModal( /*#__PURE__*/React.createElement(ForwardChatModal, {\n          room: room,\n          onForward: handleForwardChat,\n          onCancel: closeModal\n        }));\n        break;\n      case QuickActionsEnum.CloseChat:\n        const email = await getVisitorEmail();\n        setModal(room.departmentId ? /*#__PURE__*/React.createElement(CloseChatModalData, {\n          visitorEmail: email,\n          departmentId: room.departmentId,\n          onConfirm: handleClose,\n          onCancel: closeModal\n        }) : /*#__PURE__*/React.createElement(CloseChatModal, {\n          visitorEmail: email,\n          onConfirm: handleClose,\n          onCancel: closeModal\n        }));\n        break;\n      case QuickActionsEnum.OnHoldChat:\n        setModal( /*#__PURE__*/React.createElement(PlaceChatOnHoldModal, {\n          onOnHoldChat: () => putChatOnHoldMutation.mutate(rid),\n          onCancel: () => {\n            closeModal();\n            setOnHoldModalActive(false);\n          }\n        }));\n        setOnHoldModalActive(true);\n        break;\n      default:\n        break;\n    }\n  });\n  const omnichannelRouteConfig = useOmnichannelRouteConfig();\n  const manualOnHoldAllowed = useSetting('Livechat_allow_manual_on_hold');\n  const hasManagerRole = useRole('livechat-manager');\n  const hasMonitorRole = useRole('livechat-monitor');\n  const roomOpen = (room === null || room === void 0 ? void 0 : room.open) && (((_room$u = room.u) === null || _room$u === void 0 ? void 0 : _room$u._id) === uid || hasManagerRole || hasMonitorRole) && (room === null || room === void 0 ? void 0 : (_room$lastMessage = room.lastMessage) === null || _room$lastMessage === void 0 ? void 0 : _room$lastMessage.t) !== 'livechat-close';\n  const canMoveQueue = !!(omnichannelRouteConfig !== null && omnichannelRouteConfig !== void 0 && omnichannelRouteConfig.returnQueue) && (room === null || room === void 0 ? void 0 : room.u) !== undefined;\n  const canForwardGuest = usePermission('transfer-livechat-guest');\n  const canSendTranscriptEmail = usePermission('send-omnichannel-chat-transcript');\n  const hasLicense = useHasLicenseModule('livechat-enterprise');\n  const canSendTranscriptPDF = usePermission('request-pdf-transcript');\n  const canCloseRoom = usePermission('close-livechat-room');\n  const canCloseOthersRoom = usePermission('close-others-livechat-room');\n  const restrictedOnHold = useSetting('Livechat_allow_manual_on_hold_upon_agent_engagement_only');\n  const canRoomBePlacedOnHold = !room.onHold && room.u;\n  const canAgentPlaceOnHold = !((_room$lastMessage2 = room.lastMessage) !== null && _room$lastMessage2 !== void 0 && _room$lastMessage2.token);\n  const canPlaceChatOnHold = Boolean(manualOnHoldAllowed && canRoomBePlacedOnHold && (!restrictedOnHold || canAgentPlaceOnHold));\n  const isRoomOverMacLimit = useIsRoomOverMacLimit(room);\n  const hasPermissionButtons = id => {\n    switch (id) {\n      case QuickActionsEnum.MoveQueue:\n        return !isRoomOverMacLimit && !!roomOpen && canMoveQueue;\n      case QuickActionsEnum.ChatForward:\n        return !isRoomOverMacLimit && !!roomOpen && canForwardGuest;\n      case QuickActionsEnum.Transcript:\n        return !isRoomOverMacLimit && (canSendTranscriptEmail || hasLicense && canSendTranscriptPDF);\n      case QuickActionsEnum.TranscriptEmail:\n        return !isRoomOverMacLimit && canSendTranscriptEmail;\n      case QuickActionsEnum.TranscriptPDF:\n        return hasLicense && !isRoomOverMacLimit && canSendTranscriptPDF;\n      case QuickActionsEnum.CloseChat:\n        return subscription && (canCloseRoom || canCloseOthersRoom) || !!roomOpen && canCloseOthersRoom;\n      case QuickActionsEnum.OnHoldChat:\n        return !!roomOpen && canPlaceChatOnHold;\n      default:\n        break;\n    }\n    return false;\n  };\n  const quickActions = quickActionHooks.map(quickActionHook => quickActionHook()).filter(quickAction => !!quickAction).filter(action => {\n    const {\n      options,\n      id\n    } = action;\n    if (options) {\n      action.options = options.filter(_ref => {\n        let {\n          id\n        } = _ref;\n        return hasPermissionButtons(id);\n      });\n    }\n    return hasPermissionButtons(id);\n  }).sort((a, b) => {\n    var _a$order, _b$order;\n    return ((_a$order = a.order) !== null && _a$order !== void 0 ? _a$order : 0) - ((_b$order = b.order) !== null && _b$order !== void 0 ? _b$order : 0);\n  });\n  const actionDefault = useMutableCallback(actionId => {\n    handleAction(actionId);\n  });\n  return {\n    quickActions,\n    actionDefault\n  };\n};","map":{"version":3,"names":["_objectSpread","module","link","default","v","export","useQuickActions","useMutableCallback","useSetModal","useToastMessageDispatch","useUserId","useSetting","usePermission","useRole","useEndpoint","useMethod","useTranslation","useRouter","useUserSubscription","React","useCallback","useState","useEffect","PlaceChatOnHoldModal","LivechatInquiry","LegacyRoomManager","CloseChatModal","CloseChatModalData","ForwardChatModal","ReturnChatQueueModal","TranscriptModal","useIsRoomOverMacLimit","useOmnichannelRouteConfig","useHasLicenseModule","quickActionHooks","useOmnichannelRoom","QuickActionsEnum","usePutChatOnHoldMutation","useReturnChatToQueueMutation","_room$u","_room$lastMessage","_room$lastMessage2","room","setModal","router","t","dispatchToastMessage","onHoldModalActive","setOnHoldModalActive","visitorRoomId","_id","rid","uid","subscription","roomLastMessage","lastMessage","getVisitorInfo","getVisitorEmail","visitor","visitorEmails","visitorId","length","address","token","closeModal","requestTranscript","handleRequestTranscript","email","subject","type","message","error","sendTranscriptPDF","handleSendTranscriptPDF","sendTranscript","handleSendTranscript","discardTranscript","handleDiscardTranscript","forwardChat","handleForwardChat","departmentId","userId","comment","transferData","roomId","clientAction","navigate","close","closeChat","handleClose","tags","preferences","requestData","omnichannelTranscriptPDF","generateTranscriptPdf","omnichannelTranscriptEmail","transcriptEmail","sendToVisitor","remove","returnChatToQueueMutation","onSuccess","onError","onSettled","putChatOnHoldMutation","handleAction","id","MoveQueue","createElement","onMoveChat","mutate","onCancel","TranscriptPDF","TranscriptEmail","visitorEmail","onRequest","onSend","onDiscard","ChatForward","onForward","CloseChat","onConfirm","OnHoldChat","onOnHoldChat","omnichannelRouteConfig","manualOnHoldAllowed","hasManagerRole","hasMonitorRole","roomOpen","open","u","canMoveQueue","returnQueue","undefined","canForwardGuest","canSendTranscriptEmail","hasLicense","canSendTranscriptPDF","canCloseRoom","canCloseOthersRoom","restrictedOnHold","canRoomBePlacedOnHold","onHold","canAgentPlaceOnHold","canPlaceChatOnHold","Boolean","isRoomOverMacLimit","hasPermissionButtons","Transcript","quickActions","map","quickActionHook","filter","quickAction","action","options","_ref","sort","a","b","_a$order","_b$order","order","actionDefault","actionId"],"sources":["client/views/room/Header/Omnichannel/QuickActions/hooks/useQuickActions.tsx"],"sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport {\n\tuseSetModal,\n\tuseToastMessageDispatch,\n\tuseUserId,\n\tuseSetting,\n\tusePermission,\n\tuseRole,\n\tuseEndpoint,\n\tuseMethod,\n\tuseTranslation,\n\tuseRouter,\n\tuseUserSubscription,\n} from '@rocket.chat/ui-contexts';\nimport React, { useCallback, useState, useEffect } from 'react';\n\nimport PlaceChatOnHoldModal from '../../../../../../../app/livechat-enterprise/client/components/modals/PlaceChatOnHoldModal';\nimport { LivechatInquiry } from '../../../../../../../app/livechat/client/collections/LivechatInquiry';\nimport { LegacyRoomManager } from '../../../../../../../app/ui-utils/client';\nimport CloseChatModal from '../../../../../../components/Omnichannel/modals/CloseChatModal';\nimport CloseChatModalData from '../../../../../../components/Omnichannel/modals/CloseChatModalData';\nimport ForwardChatModal from '../../../../../../components/Omnichannel/modals/ForwardChatModal';\nimport ReturnChatQueueModal from '../../../../../../components/Omnichannel/modals/ReturnChatQueueModal';\nimport TranscriptModal from '../../../../../../components/Omnichannel/modals/TranscriptModal';\nimport { useIsRoomOverMacLimit } from '../../../../../../hooks/omnichannel/useIsRoomOverMacLimit';\nimport { useOmnichannelRouteConfig } from '../../../../../../hooks/omnichannel/useOmnichannelRouteConfig';\nimport { useHasLicenseModule } from '../../../../../../hooks/useHasLicenseModule';\nimport { quickActionHooks } from '../../../../../../ui';\nimport { useOmnichannelRoom } from '../../../../contexts/RoomContext';\nimport type { QuickActionsActionConfig } from '../../../../lib/quickActions';\nimport { QuickActionsEnum } from '../../../../lib/quickActions';\nimport { usePutChatOnHoldMutation } from './usePutChatOnHoldMutation';\nimport { useReturnChatToQueueMutation } from './useReturnChatToQueueMutation';\n\nexport const useQuickActions = (): {\n\tquickActions: QuickActionsActionConfig[];\n\tactionDefault: (actionId: string) => void;\n} => {\n\tconst room = useOmnichannelRoom();\n\tconst setModal = useSetModal();\n\tconst router = useRouter();\n\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst [onHoldModalActive, setOnHoldModalActive] = useState(false);\n\n\tconst visitorRoomId = room.v._id;\n\tconst rid = room._id;\n\tconst uid = useUserId();\n\tconst subscription = useUserSubscription(rid);\n\tconst roomLastMessage = room.lastMessage;\n\n\tconst getVisitorInfo = useEndpoint('GET', '/v1/livechat/visitors.info');\n\n\tconst getVisitorEmail = useMutableCallback(async () => {\n\t\tif (!visitorRoomId) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tvisitor: { visitorEmails },\n\t\t} = await getVisitorInfo({ visitorId: visitorRoomId });\n\n\t\tif (visitorEmails?.length && visitorEmails[0].address) {\n\t\t\treturn visitorEmails[0].address;\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tif (onHoldModalActive && roomLastMessage?.token) {\n\t\t\tsetModal(null);\n\t\t}\n\t}, [roomLastMessage, onHoldModalActive, setModal]);\n\n\tconst closeModal = useCallback(() => setModal(null), [setModal]);\n\n\tconst requestTranscript = useEndpoint('POST', '/v1/livechat/transcript/:rid', { rid });\n\n\tconst handleRequestTranscript = useCallback(\n\t\tasync (email: string, subject: string) => {\n\t\t\ttry {\n\t\t\t\tawait requestTranscript({ email, subject });\n\t\t\t\tcloseModal();\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'success',\n\t\t\t\t\tmessage: t('Livechat_email_transcript_has_been_requested'),\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[closeModal, dispatchToastMessage, requestTranscript, t],\n\t);\n\n\tconst sendTranscriptPDF = useEndpoint('POST', '/v1/omnichannel/:rid/request-transcript', { rid });\n\n\tconst handleSendTranscriptPDF = useCallback(async () => {\n\t\ttry {\n\t\t\tawait sendTranscriptPDF();\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Livechat_transcript_has_been_requested'),\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [dispatchToastMessage, sendTranscriptPDF, t]);\n\n\tconst sendTranscript = useMethod('livechat:sendTranscript');\n\n\tconst handleSendTranscript = useCallback(\n\t\tasync (email: string, subject: string, token: string) => {\n\t\t\ttry {\n\t\t\t\tawait sendTranscript(token, rid, email, subject);\n\t\t\t\tcloseModal();\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[closeModal, dispatchToastMessage, rid, sendTranscript],\n\t);\n\n\tconst discardTranscript = useEndpoint('DELETE', '/v1/livechat/transcript/:rid', { rid });\n\n\tconst handleDiscardTranscript = useCallback(async () => {\n\t\ttry {\n\t\t\tawait discardTranscript();\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Livechat_transcript_request_has_been_canceled'),\n\t\t\t});\n\t\t\tcloseModal();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [closeModal, discardTranscript, dispatchToastMessage, t]);\n\n\tconst forwardChat = useEndpoint('POST', '/v1/livechat/room.forward');\n\n\tconst handleForwardChat = useCallback(\n\t\tasync (departmentId?: string, userId?: string, comment?: string) => {\n\t\t\tif (departmentId && userId) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst transferData: {\n\t\t\t\troomId: string;\n\t\t\t\tclientAction: boolean;\n\t\t\t\tcomment?: string;\n\t\t\t\tdepartmentId?: string;\n\t\t\t\tuserId?: string;\n\t\t\t} = {\n\t\t\t\troomId: rid,\n\t\t\t\tcomment,\n\t\t\t\tclientAction: true,\n\t\t\t};\n\n\t\t\tif (departmentId) {\n\t\t\t\ttransferData.departmentId = departmentId;\n\t\t\t}\n\t\t\tif (userId) {\n\t\t\t\ttransferData.userId = userId;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait forwardChat(transferData);\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Transferred') });\n\t\t\t\trouter.navigate('/home');\n\t\t\t\tLegacyRoomManager.close(room.t + rid);\n\t\t\t\tcloseModal();\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[closeModal, dispatchToastMessage, forwardChat, room.t, rid, router, t],\n\t);\n\n\tconst closeChat = useEndpoint('POST', '/v1/livechat/room.closeByUser');\n\n\tconst handleClose = useCallback(\n\t\tasync (\n\t\t\tcomment?: string,\n\t\t\ttags?: string[],\n\t\t\tpreferences?: { omnichannelTranscriptPDF: boolean; omnichannelTranscriptEmail: boolean },\n\t\t\trequestData?: { email: string; subject: string },\n\t\t) => {\n\t\t\ttry {\n\t\t\t\tawait closeChat({\n\t\t\t\t\trid,\n\t\t\t\t\t...(comment && { comment }),\n\t\t\t\t\t...(tags && { tags }),\n\t\t\t\t\t...(preferences?.omnichannelTranscriptPDF && { generateTranscriptPdf: true }),\n\t\t\t\t\t...(preferences?.omnichannelTranscriptEmail && requestData\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\ttranscriptEmail: {\n\t\t\t\t\t\t\t\t\tsendToVisitor: preferences?.omnichannelTranscriptEmail,\n\t\t\t\t\t\t\t\t\trequestData,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: { transcriptEmail: { sendToVisitor: false } }),\n\t\t\t\t});\n\t\t\t\tLivechatInquiry.remove({ rid });\n\t\t\t\tcloseModal();\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Chat_closed_successfully') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t},\n\t\t[closeChat, closeModal, dispatchToastMessage, rid, t],\n\t);\n\n\tconst returnChatToQueueMutation = useReturnChatToQueueMutation({\n\t\tonSuccess: () => {\n\t\t\tLegacyRoomManager.close(room.t + rid);\n\t\t\trouter.navigate('/home');\n\t\t},\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tcloseModal();\n\t\t},\n\t});\n\n\tconst putChatOnHoldMutation = usePutChatOnHoldMutation({\n\t\tonSuccess: () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Chat_On_Hold_Successfully') });\n\t\t},\n\t\tonError: (error) => {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t},\n\t\tonSettled: () => {\n\t\t\tcloseModal();\n\t\t},\n\t});\n\n\tconst handleAction = useMutableCallback(async (id: string) => {\n\t\tswitch (id) {\n\t\t\tcase QuickActionsEnum.MoveQueue:\n\t\t\t\tsetModal(\n\t\t\t\t\t<ReturnChatQueueModal\n\t\t\t\t\t\tonMoveChat={(): void => returnChatToQueueMutation.mutate(rid)}\n\t\t\t\t\t\tonCancel={(): void => {\n\t\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>,\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.TranscriptPDF:\n\t\t\t\thandleSendTranscriptPDF();\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.TranscriptEmail:\n\t\t\t\tconst visitorEmail = await getVisitorEmail();\n\n\t\t\t\tif (!visitorEmail) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Customer_without_registered_email') });\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tsetModal(\n\t\t\t\t\t<TranscriptModal\n\t\t\t\t\t\troom={room}\n\t\t\t\t\t\temail={visitorEmail}\n\t\t\t\t\t\tonRequest={handleRequestTranscript}\n\t\t\t\t\t\tonSend={handleSendTranscript}\n\t\t\t\t\t\tonDiscard={handleDiscardTranscript}\n\t\t\t\t\t\tonCancel={closeModal}\n\t\t\t\t\t/>,\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.ChatForward:\n\t\t\t\tsetModal(<ForwardChatModal room={room} onForward={handleForwardChat} onCancel={closeModal} />);\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.CloseChat:\n\t\t\t\tconst email = await getVisitorEmail();\n\t\t\t\tsetModal(\n\t\t\t\t\troom.departmentId ? (\n\t\t\t\t\t\t<CloseChatModalData visitorEmail={email} departmentId={room.departmentId} onConfirm={handleClose} onCancel={closeModal} />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<CloseChatModal visitorEmail={email} onConfirm={handleClose} onCancel={closeModal} />\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase QuickActionsEnum.OnHoldChat:\n\t\t\t\tsetModal(\n\t\t\t\t\t<PlaceChatOnHoldModal\n\t\t\t\t\t\tonOnHoldChat={(): void => putChatOnHoldMutation.mutate(rid)}\n\t\t\t\t\t\tonCancel={(): void => {\n\t\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t\t\tsetOnHoldModalActive(false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>,\n\t\t\t\t);\n\t\t\t\tsetOnHoldModalActive(true);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tconst omnichannelRouteConfig = useOmnichannelRouteConfig();\n\n\tconst manualOnHoldAllowed = useSetting('Livechat_allow_manual_on_hold');\n\n\tconst hasManagerRole = useRole('livechat-manager');\n\tconst hasMonitorRole = useRole('livechat-monitor');\n\n\tconst roomOpen = room?.open && (room.u?._id === uid || hasManagerRole || hasMonitorRole) && room?.lastMessage?.t !== 'livechat-close';\n\tconst canMoveQueue = !!omnichannelRouteConfig?.returnQueue && room?.u !== undefined;\n\tconst canForwardGuest = usePermission('transfer-livechat-guest');\n\tconst canSendTranscriptEmail = usePermission('send-omnichannel-chat-transcript');\n\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\n\tconst canSendTranscriptPDF = usePermission('request-pdf-transcript');\n\tconst canCloseRoom = usePermission('close-livechat-room');\n\tconst canCloseOthersRoom = usePermission('close-others-livechat-room');\n\tconst restrictedOnHold = useSetting('Livechat_allow_manual_on_hold_upon_agent_engagement_only');\n\tconst canRoomBePlacedOnHold = !room.onHold && room.u;\n\tconst canAgentPlaceOnHold = !room.lastMessage?.token;\n\tconst canPlaceChatOnHold = Boolean(manualOnHoldAllowed && canRoomBePlacedOnHold && (!restrictedOnHold || canAgentPlaceOnHold));\n\tconst isRoomOverMacLimit = useIsRoomOverMacLimit(room);\n\n\tconst hasPermissionButtons = (id: string): boolean => {\n\t\tswitch (id) {\n\t\t\tcase QuickActionsEnum.MoveQueue:\n\t\t\t\treturn !isRoomOverMacLimit && !!roomOpen && canMoveQueue;\n\t\t\tcase QuickActionsEnum.ChatForward:\n\t\t\t\treturn !isRoomOverMacLimit && !!roomOpen && canForwardGuest;\n\t\t\tcase QuickActionsEnum.Transcript:\n\t\t\t\treturn !isRoomOverMacLimit && (canSendTranscriptEmail || (hasLicense && canSendTranscriptPDF));\n\t\t\tcase QuickActionsEnum.TranscriptEmail:\n\t\t\t\treturn !isRoomOverMacLimit && canSendTranscriptEmail;\n\t\t\tcase QuickActionsEnum.TranscriptPDF:\n\t\t\t\treturn hasLicense && !isRoomOverMacLimit && canSendTranscriptPDF;\n\t\t\tcase QuickActionsEnum.CloseChat:\n\t\t\t\treturn (subscription && (canCloseRoom || canCloseOthersRoom)) || (!!roomOpen && canCloseOthersRoom);\n\t\t\tcase QuickActionsEnum.OnHoldChat:\n\t\t\t\treturn !!roomOpen && canPlaceChatOnHold;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn false;\n\t};\n\n\tconst quickActions = quickActionHooks\n\t\t.map((quickActionHook) => quickActionHook())\n\t\t.filter((quickAction): quickAction is QuickActionsActionConfig => !!quickAction)\n\t\t.filter((action) => {\n\t\t\tconst { options, id } = action;\n\t\t\tif (options) {\n\t\t\t\taction.options = options.filter(({ id }) => hasPermissionButtons(id));\n\t\t\t}\n\n\t\t\treturn hasPermissionButtons(id);\n\t\t})\n\t\t.sort((a, b) => (a.order ?? 0) - (b.order ?? 0));\n\n\tconst actionDefault = useMutableCallback((actionId: string) => {\n\t\thandleAction(actionId);\n\t});\n\n\treturn { quickActions, actionDefault };\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"b740713c5d4e4428f12db3dd5131f1f692b3a710"}
