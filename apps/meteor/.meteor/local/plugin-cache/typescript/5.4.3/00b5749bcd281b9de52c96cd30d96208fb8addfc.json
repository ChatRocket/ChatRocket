{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/hooks/useAppInfo.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/marketplace/hooks/useAppInfo.ts","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/hooks/useAppInfo.ts","inputSourceMap":{"version":3,"file":"client/views/marketplace/hooks/useAppInfo.ts","sourceRoot":"","sources":["client/views/marketplace/hooks/useAppInfo.ts"],"names":[],"mappings":"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","sourcesContent":["import type { App } from '@rocket.chat/core-typings';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useState, useEffect, useContext } from 'react';\n\nimport type { ISettings } from '../../../apps/@types/IOrchestrator';\nimport { AppClientOrchestratorInstance } from '../../../apps/orchestrator';\nimport { AppsContext } from '../../../contexts/AppsContext';\nimport type { AppInfo } from '../definitions/AppInfo';\n\nconst getBundledInApp = async (app: App): Promise<App['bundledIn']> => {\n\tconst { bundledIn = [] } = app;\n\n\treturn Promise.all(\n\t\tbundledIn.map(async (bundle) => {\n\t\t\tconst apps = await AppClientOrchestratorInstance.getAppsOnBundle(bundle.bundleId);\n\t\t\tbundle.apps = apps.slice(0, 4);\n\t\t\treturn bundle;\n\t\t}),\n\t);\n};\n\nexport const useAppInfo = (appId: string, context: string): AppInfo | undefined => {\n\tconst { installedApps, marketplaceApps, privateApps } = useContext(AppsContext);\n\n\tconst [appData, setAppData] = useState<AppInfo>();\n\n\tconst getSettings = useEndpoint('GET', '/apps/:id/settings', { id: appId });\n\tconst getScreenshots = useEndpoint('GET', '/apps/:id/screenshots', { id: appId });\n\tconst getApis = useEndpoint('GET', '/apps/:id/apis', { id: appId });\n\tconst getBundledIn = useEndpoint('GET', '/apps/:id', { id: appId });\n\n\tuseEffect(() => {\n\t\tconst fetchAppInfo = async (): Promise<void> => {\n\t\t\tif ((!marketplaceApps.value?.apps?.length && !installedApps.value?.apps.length && !privateApps.value?.apps.length) || !appId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet appResult: App | undefined;\n\t\t\tconst marketplaceAppsContexts = ['explore', 'premium', 'requested'];\n\n\t\t\tif (marketplaceAppsContexts.includes(context)) appResult = marketplaceApps.value?.apps.find((app) => app.id === appId);\n\n\t\t\tif (context === 'private') appResult = privateApps.value?.apps.find((app) => app.id === appId);\n\n\t\t\tif (context === 'installed') appResult = installedApps.value?.apps.find((app) => app.id === appId);\n\n\t\t\tif (!appResult) return;\n\n\t\t\tconst [settings, apis, screenshots, bundledIn] = await Promise.all([\n\t\t\t\tgetSettings().catch(() => ({\n\t\t\t\t\tsettings: {},\n\t\t\t\t})),\n\t\t\t\tgetApis().catch(() => ({\n\t\t\t\t\tapis: [],\n\t\t\t\t})),\n\t\t\t\tgetScreenshots().catch(() => ({\n\t\t\t\t\tscreenshots: [],\n\t\t\t\t})),\n\t\t\t\tappResult.marketplace === false\n\t\t\t\t\t? []\n\t\t\t\t\t: getBundledIn({\n\t\t\t\t\t\t\tmarketplace: 'true',\n\t\t\t\t\t\t\tupdate: 'true',\n\t\t\t\t\t\t\tappVersion: appId,\n\t\t\t\t\t  })\n\t\t\t\t\t\t\t.then(({ app }: any) => {\n\t\t\t\t\t\t\t\t(appResult as App).tosLink = app.tosLink;\n\t\t\t\t\t\t\t\t(appResult as App).privacyLink = app.privacyLink;\n\t\t\t\t\t\t\t\treturn getBundledInApp(app);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(() => ({\n\t\t\t\t\t\t\t\tsettings: {},\n\t\t\t\t\t\t\t})),\n\t\t\t]);\n\n\t\t\tsetAppData({\n\t\t\t\t...appResult,\n\t\t\t\tbundledIn: bundledIn as App['bundledIn'],\n\t\t\t\tsettings: settings.settings as ISettings,\n\t\t\t\tapis: apis ? apis.apis : [],\n\t\t\t\tscreenshots: screenshots ? screenshots.screenshots : [],\n\t\t\t});\n\t\t};\n\n\t\tfetchAppInfo();\n\t}, [appId, context, getApis, getBundledIn, getScreenshots, getSettings, installedApps, marketplaceApps, privateApps.value?.apps]);\n\n\treturn appData;\n};\n"]},"targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/marketplace/hooks/useAppInfo.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/marketplace/hooks/useAppInfo.ts","inputSourceMap":{"version":3,"file":"client/views/marketplace/hooks/useAppInfo.ts","sourceRoot":"","sources":["client/views/marketplace/hooks/useAppInfo.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,WAAW,EAAE,MAAM,0BAA0B,CAAC;AACvD,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,OAAO,CAAC;AAGxD,OAAO,EAAE,6BAA6B,EAAE,MAAM,4BAA4B,CAAC;AAC3E,OAAO,EAAE,WAAW,EAAE,MAAM,+BAA+B,CAAC;AAG5D,MAAM,eAAe,GAAG,KAAK,EAAE,GAAQ,EAA6B,EAAE;IACrE,MAAM,EAAE,SAAS,GAAG,EAAE,EAAE,GAAG,GAAG,CAAC;IAE/B,OAAO,OAAO,CAAC,GAAG,CACjB,SAAS,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,EAAE,EAAE;QAC9B,MAAM,IAAI,GAAG,MAAM,6BAA6B,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAClF,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC/B,OAAO,MAAM,CAAC;IACf,CAAC,CAAC,CACF,CAAC;AACH,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,UAAU,GAAG,CAAC,KAAa,EAAE,OAAe,EAAuB,EAAE;IACjF,MAAM,EAAE,aAAa,EAAE,eAAe,EAAE,WAAW,EAAE,GAAG,UAAU,CAAC,WAAW,CAAC,CAAC;IAEhF,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,GAAG,QAAQ,EAAW,CAAC;IAElD,MAAM,WAAW,GAAG,WAAW,CAAC,KAAK,EAAE,oBAAoB,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;IAC5E,MAAM,cAAc,GAAG,WAAW,CAAC,KAAK,EAAE,uBAAuB,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;IAClF,MAAM,OAAO,GAAG,WAAW,CAAC,KAAK,EAAE,gBAAgB,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;IACpE,MAAM,YAAY,GAAG,WAAW,CAAC,KAAK,EAAE,WAAW,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;IAEpE,SAAS,CAAC,GAAG,EAAE;QACd,MAAM,YAAY,GAAG,KAAK,IAAmB,EAAE;YAC9C,IAAI,CAAC,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,EAAE,MAAM,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;gBAC9H,OAAO;YACR,CAAC;YAED,IAAI,SAA0B,CAAC;YAC/B,MAAM,uBAAuB,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,WAAW,CAAC,CAAC;YAEpE,IAAI,uBAAuB,CAAC,QAAQ,CAAC,OAAO,CAAC;gBAAE,SAAS,GAAG,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC;YAEvH,IAAI,OAAO,KAAK,SAAS;gBAAE,SAAS,GAAG,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC;YAE/F,IAAI,OAAO,KAAK,WAAW;gBAAE,SAAS,GAAG,aAAa,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC;YAEnG,IAAI,CAAC,SAAS;gBAAE,OAAO;YAEvB,MAAM,CAAC,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,SAAS,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;gBAClE,WAAW,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;oBAC1B,QAAQ,EAAE,EAAE;iBACZ,CAAC,CAAC;gBACH,OAAO,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;oBACtB,IAAI,EAAE,EAAE;iBACR,CAAC,CAAC;gBACH,cAAc,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;oBAC7B,WAAW,EAAE,EAAE;iBACf,CAAC,CAAC;gBACH,SAAS,CAAC,WAAW,KAAK,KAAK;oBAC9B,CAAC,CAAC,EAAE;oBACJ,CAAC,CAAC,YAAY,CAAC;wBACb,WAAW,EAAE,MAAM;wBACnB,MAAM,EAAE,MAAM;wBACd,UAAU,EAAE,KAAK;qBAChB,CAAC;yBACD,IAAI,CAAC,CAAC,EAAE,GAAG,EAAO,EAAE,EAAE;wBACrB,SAAiB,CAAC,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC;wBACxC,SAAiB,CAAC,WAAW,GAAG,GAAG,CAAC,WAAW,CAAC;wBACjD,OAAO,eAAe,CAAC,GAAG,CAAC,CAAC;oBAC7B,CAAC,CAAC;yBACD,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;wBACb,QAAQ,EAAE,EAAE;qBACZ,CAAC,CAAC;aACN,CAAC,CAAC;YAEH,UAAU,CAAC;gBACV,GAAG,SAAS;gBACZ,SAAS,EAAE,SAA6B;gBACxC,QAAQ,EAAE,QAAQ,CAAC,QAAqB;gBACxC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;gBAC3B,WAAW,EAAE,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE;aACvD,CAAC,CAAC;QACJ,CAAC,CAAC;QAEF,YAAY,EAAE,CAAC;IAChB,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,YAAY,EAAE,cAAc,EAAE,WAAW,EAAE,aAAa,EAAE,eAAe,EAAE,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;IAElI,OAAO,OAAO,CAAC;AAChB,CAAC,CAAC","sourcesContent":["import type { App } from '@rocket.chat/core-typings';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useState, useEffect, useContext } from 'react';\n\nimport type { ISettings } from '../../../apps/@types/IOrchestrator';\nimport { AppClientOrchestratorInstance } from '../../../apps/orchestrator';\nimport { AppsContext } from '../../../contexts/AppsContext';\nimport type { AppInfo } from '../definitions/AppInfo';\n\nconst getBundledInApp = async (app: App): Promise<App['bundledIn']> => {\n\tconst { bundledIn = [] } = app;\n\n\treturn Promise.all(\n\t\tbundledIn.map(async (bundle) => {\n\t\t\tconst apps = await AppClientOrchestratorInstance.getAppsOnBundle(bundle.bundleId);\n\t\t\tbundle.apps = apps.slice(0, 4);\n\t\t\treturn bundle;\n\t\t}),\n\t);\n};\n\nexport const useAppInfo = (appId: string, context: string): AppInfo | undefined => {\n\tconst { installedApps, marketplaceApps, privateApps } = useContext(AppsContext);\n\n\tconst [appData, setAppData] = useState<AppInfo>();\n\n\tconst getSettings = useEndpoint('GET', '/apps/:id/settings', { id: appId });\n\tconst getScreenshots = useEndpoint('GET', '/apps/:id/screenshots', { id: appId });\n\tconst getApis = useEndpoint('GET', '/apps/:id/apis', { id: appId });\n\tconst getBundledIn = useEndpoint('GET', '/apps/:id', { id: appId });\n\n\tuseEffect(() => {\n\t\tconst fetchAppInfo = async (): Promise<void> => {\n\t\t\tif ((!marketplaceApps.value?.apps?.length && !installedApps.value?.apps.length && !privateApps.value?.apps.length) || !appId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet appResult: App | undefined;\n\t\t\tconst marketplaceAppsContexts = ['explore', 'premium', 'requested'];\n\n\t\t\tif (marketplaceAppsContexts.includes(context)) appResult = marketplaceApps.value?.apps.find((app) => app.id === appId);\n\n\t\t\tif (context === 'private') appResult = privateApps.value?.apps.find((app) => app.id === appId);\n\n\t\t\tif (context === 'installed') appResult = installedApps.value?.apps.find((app) => app.id === appId);\n\n\t\t\tif (!appResult) return;\n\n\t\t\tconst [settings, apis, screenshots, bundledIn] = await Promise.all([\n\t\t\t\tgetSettings().catch(() => ({\n\t\t\t\t\tsettings: {},\n\t\t\t\t})),\n\t\t\t\tgetApis().catch(() => ({\n\t\t\t\t\tapis: [],\n\t\t\t\t})),\n\t\t\t\tgetScreenshots().catch(() => ({\n\t\t\t\t\tscreenshots: [],\n\t\t\t\t})),\n\t\t\t\tappResult.marketplace === false\n\t\t\t\t\t? []\n\t\t\t\t\t: getBundledIn({\n\t\t\t\t\t\t\tmarketplace: 'true',\n\t\t\t\t\t\t\tupdate: 'true',\n\t\t\t\t\t\t\tappVersion: appId,\n\t\t\t\t\t  })\n\t\t\t\t\t\t\t.then(({ app }: any) => {\n\t\t\t\t\t\t\t\t(appResult as App).tosLink = app.tosLink;\n\t\t\t\t\t\t\t\t(appResult as App).privacyLink = app.privacyLink;\n\t\t\t\t\t\t\t\treturn getBundledInApp(app);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(() => ({\n\t\t\t\t\t\t\t\tsettings: {},\n\t\t\t\t\t\t\t})),\n\t\t\t]);\n\n\t\t\tsetAppData({\n\t\t\t\t...appResult,\n\t\t\t\tbundledIn: bundledIn as App['bundledIn'],\n\t\t\t\tsettings: settings.settings as ISettings,\n\t\t\t\tapis: apis ? apis.apis : [],\n\t\t\t\tscreenshots: screenshots ? screenshots.screenshots : [],\n\t\t\t});\n\t\t};\n\n\t\tfetchAppInfo();\n\t}, [appId, context, getApis, getBundledIn, getScreenshots, getSettings, installedApps, marketplaceApps, privateApps.value?.apps]);\n\n\treturn appData;\n};\n"]}}},"code":"var _objectSpread;\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 0);\nvar _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\nvar _regeneratorRuntime;\nmodule.link(\"@babel/runtime/regenerator\", {\n  default: function (v) {\n    _regeneratorRuntime = v;\n  }\n}, 2);\nmodule.export({\n  useAppInfo: function () {\n    return useAppInfo;\n  }\n});\nvar useEndpoint;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useEndpoint: function (v) {\n    useEndpoint = v;\n  }\n}, 0);\nvar useState, useEffect, useContext;\nmodule.link(\"react\", {\n  useState: function (v) {\n    useState = v;\n  },\n  useEffect: function (v) {\n    useEffect = v;\n  },\n  useContext: function (v) {\n    useContext = v;\n  }\n}, 1);\nvar AppClientOrchestratorInstance;\nmodule.link(\"../../../apps/orchestrator\", {\n  AppClientOrchestratorInstance: function (v) {\n    AppClientOrchestratorInstance = v;\n  }\n}, 2);\nvar AppsContext;\nmodule.link(\"../../../contexts/AppsContext\", {\n  AppsContext: function (v) {\n    AppsContext = v;\n  }\n}, 3);\nvar getBundledInApp = function () {\n  function _callee2(app) {\n    var _app$bundledIn, bundledIn;\n    return _regeneratorRuntime.async(function () {\n      function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _app$bundledIn = app.bundledIn, bundledIn = _app$bundledIn === void 0 ? [] : _app$bundledIn;\n            return _context2.abrupt(\"return\", Promise.all(bundledIn.map(function () {\n              function _callee(bundle) {\n                var apps;\n                return _regeneratorRuntime.async(function () {\n                  function _callee$(_context) {\n                    while (1) switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return _regeneratorRuntime.awrap(AppClientOrchestratorInstance.getAppsOnBundle(bundle.bundleId));\n                      case 2:\n                        apps = _context.sent;\n                        bundle.apps = apps.slice(0, 4);\n                        return _context.abrupt(\"return\", bundle);\n                      case 5:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                  return _callee$;\n                }(), null, null, null, Promise);\n              }\n              return _callee;\n            }())));\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n      return _callee2$;\n    }(), null, null, null, Promise);\n  }\n  return _callee2;\n}();\nvar useAppInfo = function (appId, context) {\n  var _privateApps$value3;\n  var _useContext = useContext(AppsContext),\n    installedApps = _useContext.installedApps,\n    marketplaceApps = _useContext.marketplaceApps,\n    privateApps = _useContext.privateApps;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    appData = _useState2[0],\n    setAppData = _useState2[1];\n  var getSettings = useEndpoint('GET', '/apps/:id/settings', {\n    id: appId\n  });\n  var getScreenshots = useEndpoint('GET', '/apps/:id/screenshots', {\n    id: appId\n  });\n  var getApis = useEndpoint('GET', '/apps/:id/apis', {\n    id: appId\n  });\n  var getBundledIn = useEndpoint('GET', '/apps/:id', {\n    id: appId\n  });\n  useEffect(function () {\n    var fetchAppInfo = function () {\n      function _callee3() {\n        var _marketplaceApps$valu, _marketplaceApps$valu2, _installedApps$value, _privateApps$value, _marketplaceApps$valu3, _privateApps$value2, _installedApps$value2;\n        var appResult, marketplaceAppsContexts, _await$Promise$all, _await$Promise$all2, settings, apis, screenshots, bundledIn;\n        return _regeneratorRuntime.async(function () {\n          function _callee3$(_context3) {\n            while (1) switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(!((_marketplaceApps$valu = marketplaceApps.value) !== null && _marketplaceApps$valu !== void 0 && (_marketplaceApps$valu2 = _marketplaceApps$valu.apps) !== null && _marketplaceApps$valu2 !== void 0 && _marketplaceApps$valu2.length) && !((_installedApps$value = installedApps.value) !== null && _installedApps$value !== void 0 && _installedApps$value.apps.length) && !((_privateApps$value = privateApps.value) !== null && _privateApps$value !== void 0 && _privateApps$value.apps.length) || !appId)) {\n                  _context3.next = 2;\n                  break;\n                }\n                return _context3.abrupt(\"return\");\n              case 2:\n                marketplaceAppsContexts = ['explore', 'premium', 'requested'];\n                if (marketplaceAppsContexts.includes(context)) appResult = (_marketplaceApps$valu3 = marketplaceApps.value) === null || _marketplaceApps$valu3 === void 0 ? void 0 : _marketplaceApps$valu3.apps.find(function (app) {\n                  return app.id === appId;\n                });\n                if (context === 'private') appResult = (_privateApps$value2 = privateApps.value) === null || _privateApps$value2 === void 0 ? void 0 : _privateApps$value2.apps.find(function (app) {\n                  return app.id === appId;\n                });\n                if (context === 'installed') appResult = (_installedApps$value2 = installedApps.value) === null || _installedApps$value2 === void 0 ? void 0 : _installedApps$value2.apps.find(function (app) {\n                  return app.id === appId;\n                });\n                if (appResult) {\n                  _context3.next = 8;\n                  break;\n                }\n                return _context3.abrupt(\"return\");\n              case 8:\n                _context3.next = 10;\n                return _regeneratorRuntime.awrap(Promise.all([getSettings().catch(function () {\n                  return {\n                    settings: {}\n                  };\n                }), getApis().catch(function () {\n                  return {\n                    apis: []\n                  };\n                }), getScreenshots().catch(function () {\n                  return {\n                    screenshots: []\n                  };\n                }), appResult.marketplace === false ? [] : getBundledIn({\n                  marketplace: 'true',\n                  update: 'true',\n                  appVersion: appId\n                }).then(function (_ref) {\n                  var app = _ref.app;\n                  appResult.tosLink = app.tosLink;\n                  appResult.privacyLink = app.privacyLink;\n                  return getBundledInApp(app);\n                }).catch(function () {\n                  return {\n                    settings: {}\n                  };\n                })]));\n              case 10:\n                _await$Promise$all = _context3.sent;\n                _await$Promise$all2 = _slicedToArray(_await$Promise$all, 4);\n                settings = _await$Promise$all2[0];\n                apis = _await$Promise$all2[1];\n                screenshots = _await$Promise$all2[2];\n                bundledIn = _await$Promise$all2[3];\n                setAppData(_objectSpread(_objectSpread({}, appResult), {}, {\n                  bundledIn: bundledIn,\n                  settings: settings.settings,\n                  apis: apis ? apis.apis : [],\n                  screenshots: screenshots ? screenshots.screenshots : []\n                }));\n              case 17:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n          return _callee3$;\n        }(), null, null, null, Promise);\n      }\n      return _callee3;\n    }();\n    fetchAppInfo();\n  }, [appId, context, getApis, getBundledIn, getScreenshots, getSettings, installedApps, marketplaceApps, (_privateApps$value3 = privateApps.value) === null || _privateApps$value3 === void 0 ? void 0 : _privateApps$value3.apps]);\n  return appData;\n};","map":{"version":3,"names":["_objectSpread","module","link","default","v","_slicedToArray","_regeneratorRuntime","export","useAppInfo","useEndpoint","useState","useEffect","useContext","AppClientOrchestratorInstance","AppsContext","getBundledInApp","_callee2","app","_app$bundledIn","bundledIn","async","_callee2$","_context2","prev","next","abrupt","Promise","all","map","_callee","bundle","apps","_callee$","_context","awrap","getAppsOnBundle","bundleId","sent","slice","stop","appId","context","_privateApps$value3","_useContext","installedApps","marketplaceApps","privateApps","_useState","_useState2","appData","setAppData","getSettings","id","getScreenshots","getApis","getBundledIn","fetchAppInfo","_callee3","_marketplaceApps$valu","_marketplaceApps$valu2","_installedApps$value","_privateApps$value","_marketplaceApps$valu3","_privateApps$value2","_installedApps$value2","appResult","marketplaceAppsContexts","_await$Promise$all","_await$Promise$all2","settings","apis","screenshots","_callee3$","_context3","value","length","includes","find","catch","marketplace","update","appVersion","then","_ref","tosLink","privacyLink"],"sources":["client/views/marketplace/hooks/useAppInfo.ts"],"sourcesContent":["import type { App } from '@rocket.chat/core-typings';\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\nimport { useState, useEffect, useContext } from 'react';\n\nimport type { ISettings } from '../../../apps/@types/IOrchestrator';\nimport { AppClientOrchestratorInstance } from '../../../apps/orchestrator';\nimport { AppsContext } from '../../../contexts/AppsContext';\nimport type { AppInfo } from '../definitions/AppInfo';\n\nconst getBundledInApp = async (app: App): Promise<App['bundledIn']> => {\n\tconst { bundledIn = [] } = app;\n\n\treturn Promise.all(\n\t\tbundledIn.map(async (bundle) => {\n\t\t\tconst apps = await AppClientOrchestratorInstance.getAppsOnBundle(bundle.bundleId);\n\t\t\tbundle.apps = apps.slice(0, 4);\n\t\t\treturn bundle;\n\t\t}),\n\t);\n};\n\nexport const useAppInfo = (appId: string, context: string): AppInfo | undefined => {\n\tconst { installedApps, marketplaceApps, privateApps } = useContext(AppsContext);\n\n\tconst [appData, setAppData] = useState<AppInfo>();\n\n\tconst getSettings = useEndpoint('GET', '/apps/:id/settings', { id: appId });\n\tconst getScreenshots = useEndpoint('GET', '/apps/:id/screenshots', { id: appId });\n\tconst getApis = useEndpoint('GET', '/apps/:id/apis', { id: appId });\n\tconst getBundledIn = useEndpoint('GET', '/apps/:id', { id: appId });\n\n\tuseEffect(() => {\n\t\tconst fetchAppInfo = async (): Promise<void> => {\n\t\t\tif ((!marketplaceApps.value?.apps?.length && !installedApps.value?.apps.length && !privateApps.value?.apps.length) || !appId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet appResult: App | undefined;\n\t\t\tconst marketplaceAppsContexts = ['explore', 'premium', 'requested'];\n\n\t\t\tif (marketplaceAppsContexts.includes(context)) appResult = marketplaceApps.value?.apps.find((app) => app.id === appId);\n\n\t\t\tif (context === 'private') appResult = privateApps.value?.apps.find((app) => app.id === appId);\n\n\t\t\tif (context === 'installed') appResult = installedApps.value?.apps.find((app) => app.id === appId);\n\n\t\t\tif (!appResult) return;\n\n\t\t\tconst [settings, apis, screenshots, bundledIn] = await Promise.all([\n\t\t\t\tgetSettings().catch(() => ({\n\t\t\t\t\tsettings: {},\n\t\t\t\t})),\n\t\t\t\tgetApis().catch(() => ({\n\t\t\t\t\tapis: [],\n\t\t\t\t})),\n\t\t\t\tgetScreenshots().catch(() => ({\n\t\t\t\t\tscreenshots: [],\n\t\t\t\t})),\n\t\t\t\tappResult.marketplace === false\n\t\t\t\t\t? []\n\t\t\t\t\t: getBundledIn({\n\t\t\t\t\t\t\tmarketplace: 'true',\n\t\t\t\t\t\t\tupdate: 'true',\n\t\t\t\t\t\t\tappVersion: appId,\n\t\t\t\t\t  })\n\t\t\t\t\t\t\t.then(({ app }: any) => {\n\t\t\t\t\t\t\t\t(appResult as App).tosLink = app.tosLink;\n\t\t\t\t\t\t\t\t(appResult as App).privacyLink = app.privacyLink;\n\t\t\t\t\t\t\t\treturn getBundledInApp(app);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(() => ({\n\t\t\t\t\t\t\t\tsettings: {},\n\t\t\t\t\t\t\t})),\n\t\t\t]);\n\n\t\t\tsetAppData({\n\t\t\t\t...appResult,\n\t\t\t\tbundledIn: bundledIn as App['bundledIn'],\n\t\t\t\tsettings: settings.settings as ISettings,\n\t\t\t\tapis: apis ? apis.apis : [],\n\t\t\t\tscreenshots: screenshots ? screenshots.screenshots : [],\n\t\t\t});\n\t\t};\n\n\t\tfetchAppInfo();\n\t}, [appId, context, getApis, getBundledIn, getScreenshots, getSettings, installedApps, marketplaceApps, privateApps.value?.apps]);\n\n\treturn appData;\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"00b5749bcd281b9de52c96cd30d96208fb8addfc"}
