{"code":"function module(e,t,a){let l,n,i,r,o,c,s,u,d,m,g,p,h,f,E,k,v,_;a.link(\"@rocket.chat/fuselage\",{Accordion(e){l=e},Box(e){n=e},Button(e){i=e},ButtonGroup(e){r=e}},0),a.link(\"@rocket.chat/fuselage-hooks\",{useEffectEvent(e){o=e}},1),a.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){c=e},useSettingsDispatch(e){s=e},useSettings(e){u=e}},2),a.link(\"react\",{default(e){d=e},useMemo(e){m=e},memo(e){g=e}},3),a.link(\"react-i18next\",{useTranslation(e){p=e}},4),a.link(\"../../../../components/Page\",{Page(e){h=e},PageHeader(e){f=e},PageScrollableContentWithShadow(e){E=e},PageFooter(e){k=e}},5),a.link(\"../../EditableSettingsContext\",{useEditableSettingsDispatch(e){v=e},useEditableSettings(e){_=e}},6),a.exportDefault(g(e=>{let{children:t,headerButtons:a,onClickBack:g,_id:S,i18nLabel:y,i18nDescription:x,tabs:D,isCustom:b=!1}=e,{t:B,i18n:C}=p(),P=s(),w=c(),M=_(m(()=>({group:S,changed:!0}),[S])),N=u(m(()=>({_id:M.map(e=>{let{_id:t}=e;return t})}),[M])),T=e=>\"color\"===e.type,W=o(async()=>{let e=M.map(e=>T(e)?{_id:e._id,value:e.value,editor:e.editor}:{_id:e._id,value:e.value});if(0!==e.length)try{await P(e),w({type:\"success\",message:B(\"Settings_updated\")})}catch(e){w({type:\"error\",message:e})}}),A=v(),F=o(()=>{let e=M.map(e=>{let{_id:t}=e;return N.find(e=>e._id===t)}).map(e=>e?T(e)?{_id:e._id,value:e.value,editor:e.editor,changed:!1}:{_id:e._id,value:e.value,changed:!1}:void 0).filter(Boolean);A(e)});if(!S)return d.createElement(h,null,t);let G=e=>void 0!==e;return d.createElement(h,{is:\"form\",action:\"#\",method:\"post\",onSubmit:e=>{e.preventDefault(),W()}},d.createElement(f,{onClickBack:g,title:y&&G(y)&&B(y)},d.createElement(r,null,a)),D,b?t:d.createElement(E,null,d.createElement(n,{marginBlock:\"none\",marginInline:\"auto\",width:\"full\",maxWidth:\"x580\"},x&&G(x)&&C.exists(x)&&d.createElement(n,{is:\"p\",color:\"hint\",fontScale:\"p2\"},B(x)),d.createElement(l,{className:\"page-settings\"},t))),d.createElement(k,{isDirty:0!==M.length},d.createElement(r,null,M.length>0&&d.createElement(i,{type:\"reset\",onClick:e=>{e.preventDefault(),F()}},B(\"Cancel\")),d.createElement(i,{children:B(\"Save_changes\"),className:\"save\",disabled:0===M.length,primary:!0,type:\"submit\",onClick:e=>{e.preventDefault(),W()}}))))}))}","map":"{\"version\":3,\"sources\":[\"client/views/admin/settings/SettingsGroupPage/SettingsGroupPage.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ISetting, ISettingColor } from '@rocket.chat/core-typings';\\nimport { Accordion, Box, Button, ButtonGroup } from '@rocket.chat/fuselage';\\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useToastMessageDispatch, useSettingsDispatch, useSettings } from '@rocket.chat/ui-contexts';\\nimport type { ReactNode, FormEvent, MouseEvent } from 'react';\\nimport React, { useMemo, memo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { Page, PageHeader, PageScrollableContentWithShadow, PageFooter } from '../../../../components/Page';\\nimport type { EditableSetting } from '../../EditableSettingsContext';\\nimport { useEditableSettingsDispatch, useEditableSettings } from '../../EditableSettingsContext';\\n\\ntype SettingsGroupPageProps = {\\n\\tchildren: ReactNode;\\n\\theaderButtons?: ReactNode;\\n\\tonClickBack?: () => void;\\n\\t_id: string;\\n\\ti18nLabel: string;\\n\\ti18nDescription?: string;\\n\\ttabs?: ReactNode;\\n\\tisCustom?: boolean;\\n};\\n\\nconst SettingsGroupPage = ({\\n\\tchildren = undefined,\\n\\theaderButtons = undefined,\\n\\tonClickBack,\\n\\t_id,\\n\\ti18nLabel,\\n\\ti18nDescription = undefined,\\n\\ttabs = undefined,\\n\\tisCustom = false,\\n}: SettingsGroupPageProps) => {\\n\\tconst { t, i18n } = useTranslation();\\n\\tconst dispatch = useSettingsDispatch();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst changedEditableSettings = useEditableSettings(\\n\\t\\tuseMemo(\\n\\t\\t\\t() => ({\\n\\t\\t\\t\\tgroup: _id,\\n\\t\\t\\t\\tchanged: true,\\n\\t\\t\\t}),\\n\\t\\t\\t[_id],\\n\\t\\t),\\n\\t);\\n\\n\\tconst originalSettings = useSettings(\\n\\t\\tuseMemo(\\n\\t\\t\\t() => ({\\n\\t\\t\\t\\t_id: changedEditableSettings.map(({ _id }) => _id),\\n\\t\\t\\t}),\\n\\t\\t\\t[changedEditableSettings],\\n\\t\\t),\\n\\t);\\n\\n\\tconst isColorSetting = (setting: ISetting): setting is ISettingColor => setting.type === 'color';\\n\\n\\tconst save = useEffectEvent(async () => {\\n\\t\\tconst changes = changedEditableSettings.map((setting) => {\\n\\t\\t\\tif (isColorSetting(setting)) {\\n\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t_id: setting._id,\\n\\t\\t\\t\\t\\tvalue: setting.value,\\n\\t\\t\\t\\t\\teditor: setting.editor,\\n\\t\\t\\t\\t};\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\t_id: setting._id,\\n\\t\\t\\t\\tvalue: setting.value,\\n\\t\\t\\t};\\n\\t\\t});\\n\\n\\t\\tif (changes.length === 0) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\ttry {\\n\\t\\t\\tawait dispatch(changes);\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Settings_updated') });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t});\\n\\n\\tconst dispatchToEditing = useEditableSettingsDispatch();\\n\\n\\tconst cancel = useEffectEvent(() => {\\n\\t\\tconst settingsToDispatch = changedEditableSettings\\n\\t\\t\\t.map(({ _id }) => originalSettings.find((setting) => setting._id === _id))\\n\\t\\t\\t.map((setting) => {\\n\\t\\t\\t\\tif (!setting) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (isColorSetting(setting)) {\\n\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\t_id: setting._id,\\n\\t\\t\\t\\t\\t\\tvalue: setting.value,\\n\\t\\t\\t\\t\\t\\teditor: setting.editor,\\n\\t\\t\\t\\t\\t\\tchanged: false,\\n\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t_id: setting._id,\\n\\t\\t\\t\\t\\tvalue: setting.value,\\n\\t\\t\\t\\t\\tchanged: false,\\n\\t\\t\\t\\t};\\n\\t\\t\\t})\\n\\t\\t\\t.filter(Boolean);\\n\\t\\tdispatchToEditing(settingsToDispatch as Partial<EditableSetting>[]);\\n\\t});\\n\\n\\tconst handleSubmit = (event: FormEvent<HTMLFormElement>): void => {\\n\\t\\tevent.preventDefault();\\n\\t\\tsave();\\n\\t};\\n\\n\\tconst handleCancelClick = (event: MouseEvent<HTMLOrSVGElement>): void => {\\n\\t\\tevent.preventDefault();\\n\\t\\tcancel();\\n\\t};\\n\\n\\tconst handleSaveClick = (event: MouseEvent<HTMLOrSVGElement>): void => {\\n\\t\\tevent.preventDefault();\\n\\t\\tsave();\\n\\t};\\n\\n\\tif (!_id) {\\n\\t\\treturn <Page>{children}</Page>;\\n\\t}\\n\\n\\tconst isTranslationKey = (key: string): key is TranslationKey => (key as TranslationKey) !== undefined;\\n\\n\\treturn (\\n\\t\\t<Page is='form' action='#' method='post' onSubmit={handleSubmit}>\\n\\t\\t\\t<PageHeader onClickBack={onClickBack} title={i18nLabel && isTranslationKey(i18nLabel) && t(i18nLabel)}>\\n\\t\\t\\t\\t<ButtonGroup>{headerButtons}</ButtonGroup>\\n\\t\\t\\t</PageHeader>\\n\\t\\t\\t{tabs}\\n\\t\\t\\t{isCustom ? (\\n\\t\\t\\t\\tchildren\\n\\t\\t\\t) : (\\n\\t\\t\\t\\t<PageScrollableContentWithShadow>\\n\\t\\t\\t\\t\\t<Box marginBlock='none' marginInline='auto' width='full' maxWidth='x580'>\\n\\t\\t\\t\\t\\t\\t{i18nDescription && isTranslationKey(i18nDescription) && i18n.exists(i18nDescription) && (\\n\\t\\t\\t\\t\\t\\t\\t<Box is='p' color='hint' fontScale='p2'>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t(i18nDescription)}\\n\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t)}\\n\\n\\t\\t\\t\\t\\t\\t<Accordion className='page-settings'>{children}</Accordion>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t</PageScrollableContentWithShadow>\\n\\t\\t\\t)}\\n\\t\\t\\t<PageFooter isDirty={!(changedEditableSettings.length === 0)}>\\n\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t{changedEditableSettings.length > 0 && (\\n\\t\\t\\t\\t\\t\\t<Button type='reset' onClick={handleCancelClick}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Cancel')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t<Button\\n\\t\\t\\t\\t\\t\\tchildren={t('Save_changes')}\\n\\t\\t\\t\\t\\t\\tclassName='save'\\n\\t\\t\\t\\t\\t\\tdisabled={changedEditableSettings.length === 0}\\n\\t\\t\\t\\t\\t\\tprimary\\n\\t\\t\\t\\t\\t\\ttype='submit'\\n\\t\\t\\t\\t\\t\\tonClick={handleSaveClick}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</PageFooter>\\n\\t\\t</Page>\\n\\t);\\n};\\n\\nexport default memo(SettingsGroupPage);\\n\",null],\"names\":[\"Accordion\",\"Box\",\"Button\",\"ButtonGroup\",\"useEffectEvent\",\"useToastMessageDispatch\",\"useSettingsDispatch\",\"useSettings\",\"React\",\"useMemo\",\"memo\",\"useTranslation\",\"Page\",\"PageHeader\",\"PageScrollableContentWithShadow\",\"PageFooter\",\"useEditableSettingsDispatch\",\"useEditableSettings\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"children\",\"headerButtons\",\"onClickBack\",\"_id\",\"i18nLabel\",\"i18nDescription\",\"tabs\",\"isCustom\",\"t\",\"i18n\",\"dispatch\",\"dispatchToastMessage\",\"changedEditableSettings\",\"group\",\"changed\",\"originalSettings\",\"map\",\"_ref2\",\"isColorSetting\",\"setting\",\"type\",\"save\",\"changes\",\"value\",\"editor\",\"length\",\"message\",\"error\",\"dispatchToEditing\",\"cancel\",\"settingsToDispatch\",\"_ref3\",\"find\",\"filter\",\"Boolean\",\"createElement\",\"isTranslationKey\",\"key\",\"undefined\",\"is\",\"action\",\"method\",\"onSubmit\",\"event\",\"preventDefault\",\"title\",\"marginBlock\",\"marginInline\",\"width\",\"maxWidth\",\"exists\",\"color\",\"fontScale\",\"className\",\"isDirty\",\"onClick\",\"disabled\",\"primary\"],\"mappings\":\"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\"}"}