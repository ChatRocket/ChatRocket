{"code":"function module(e,l,t){let a,n,o,i,r,c,s,m,u,d,g,k,E,f,M,h,T;t.link(\"@rocket.chat/fuselage\",{MessageMetricsItem(e){a=e},MessageBlock(e){n=e},MessageMetrics(e){o=e},MessageMetricsReply(e){i=e},MessageMetricsFollowing(e){r=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){c=e}},1),t.link(\"react\",{default(e){s=e},useCallback(e){m=e}},2),t.link(\"react-i18next\",{useTranslation(e){u=e}},3),t.link(\"../../../hooks/useTimeAgo\",{useTimeAgo(e){d=e}},4),t.link(\"../../../views/room/contextualBar/Threads/hooks/useToggleFollowingThreadMutation\",{useToggleFollowingThreadMutation(e){g=e}},5),t.link(\"../../../views/room/hooks/useGoToThread\",{useGoToThread(e){k=e}},6),t.link(\"../helpers/followSyle\",{followStyle(e){E=e},anchor(e){f=e}},7),t.link(\"../notification/AllMentionNotification\",{default(e){M=e}},8),t.link(\"../notification/MeMentionNotification\",{default(e){h=e}},9),t.link(\"../notification/UnreadMessagesNotification\",{default(e){T=e}},10),t.exportDefault(e=>{let{unread:l,mention:t,all:w,rid:p,mid:b,counter:N,participants:y,following:L,lm:v}=e,{t:x}=u(),F=d(),I=k(),A=c(),C=g({onError:e=>{A({type:\"error\",message:e})}}),R=m(()=>{C.mutate({rid:p,tmid:b,follow:!L})},[L,p,b,C]);return s.createElement(n,{className:E},s.createElement(o,null,s.createElement(i,{\"data-rid\":p,\"data-mid\":b,onClick:()=>I({rid:p,tmid:b})},x(\"Reply\")),s.createElement(a,{title:x(\"Replies\")},s.createElement(a.Icon,{name:\"thread\"}),s.createElement(a.Label,null,N)),!!y&&s.createElement(a,{title:x(\"Participants\")},s.createElement(a.Icon,{name:\"user\"}),s.createElement(a.Label,null,y)),s.createElement(a,{title:null==v?void 0:v.toLocaleString()},s.createElement(a.Icon,{name:\"clock\"}),s.createElement(a.Label,null,F(v))),s.createElement(a,{className:L?void 0:f,\"data-rid\":p},s.createElement(r,{title:x(L?\"Following\":\"Not_following\"),name:L?\"bell\":\"bell-off\",onClick:R})),(t||w||l)&&s.createElement(a,null,s.createElement(a.Label,null,t&&s.createElement(h,null)||w&&s.createElement(M,null)||l&&s.createElement(T,null)))))})}","map":"{\"version\":3,\"sources\":[\"client/components/message/content/ThreadMetrics.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { MessageMetricsItem, MessageBlock, MessageMetrics, MessageMetricsReply, MessageMetricsFollowing } from '@rocket.chat/fuselage';\\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useTimeAgo } from '../../../hooks/useTimeAgo';\\nimport { useToggleFollowingThreadMutation } from '../../../views/room/contextualBar/Threads/hooks/useToggleFollowingThreadMutation';\\nimport { useGoToThread } from '../../../views/room/hooks/useGoToThread';\\nimport { followStyle, anchor } from '../helpers/followSyle';\\nimport AllMentionNotification from '../notification/AllMentionNotification';\\nimport MeMentionNotification from '../notification/MeMentionNotification';\\nimport UnreadMessagesNotification from '../notification/UnreadMessagesNotification';\\n\\ntype ThreadMetricsProps = {\\n\\tunread: boolean;\\n\\tmention: boolean;\\n\\tall: boolean;\\n\\tlm: Date;\\n\\tmid: string;\\n\\trid: string;\\n\\tcounter: number;\\n\\tparticipants: number;\\n\\tfollowing: boolean;\\n};\\n\\nconst ThreadMetrics = ({ unread, mention, all, rid, mid, counter, participants, following, lm }: ThreadMetricsProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst format = useTimeAgo();\\n\\n\\tconst goToThread = useGoToThread();\\n\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst toggleFollowingThreadMutation = useToggleFollowingThreadMutation({\\n\\t\\tonError: (error) => {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t},\\n\\t});\\n\\n\\tconst handleFollow = useCallback(() => {\\n\\t\\ttoggleFollowingThreadMutation.mutate({ rid, tmid: mid, follow: !following });\\n\\t}, [following, rid, mid, toggleFollowingThreadMutation]);\\n\\n\\treturn (\\n\\t\\t<MessageBlock className={followStyle}>\\n\\t\\t\\t<MessageMetrics>\\n\\t\\t\\t\\t<MessageMetricsReply data-rid={rid} data-mid={mid} onClick={() => goToThread({ rid, tmid: mid })}>\\n\\t\\t\\t\\t\\t{t('Reply')}\\n\\t\\t\\t\\t</MessageMetricsReply>\\n\\t\\t\\t\\t<MessageMetricsItem title={t('Replies')}>\\n\\t\\t\\t\\t\\t<MessageMetricsItem.Icon name='thread' />\\n\\t\\t\\t\\t\\t<MessageMetricsItem.Label>{counter}</MessageMetricsItem.Label>\\n\\t\\t\\t\\t</MessageMetricsItem>\\n\\t\\t\\t\\t{!!participants && (\\n\\t\\t\\t\\t\\t<MessageMetricsItem title={t('Participants')}>\\n\\t\\t\\t\\t\\t\\t<MessageMetricsItem.Icon name='user' />\\n\\t\\t\\t\\t\\t\\t<MessageMetricsItem.Label>{participants}</MessageMetricsItem.Label>\\n\\t\\t\\t\\t\\t</MessageMetricsItem>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t<MessageMetricsItem title={lm?.toLocaleString()}>\\n\\t\\t\\t\\t\\t<MessageMetricsItem.Icon name='clock' />\\n\\t\\t\\t\\t\\t<MessageMetricsItem.Label>{format(lm)}</MessageMetricsItem.Label>\\n\\t\\t\\t\\t</MessageMetricsItem>\\n\\t\\t\\t\\t<MessageMetricsItem className={!following ? anchor : undefined} data-rid={rid}>\\n\\t\\t\\t\\t\\t<MessageMetricsFollowing\\n\\t\\t\\t\\t\\t\\ttitle={following ? t('Following') : t('Not_following')}\\n\\t\\t\\t\\t\\t\\tname={following ? 'bell' : 'bell-off'}\\n\\t\\t\\t\\t\\t\\tonClick={handleFollow}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</MessageMetricsItem>\\n\\t\\t\\t\\t{(mention || all || unread) && (\\n\\t\\t\\t\\t\\t<MessageMetricsItem>\\n\\t\\t\\t\\t\\t\\t<MessageMetricsItem.Label>\\n\\t\\t\\t\\t\\t\\t\\t{(mention && <MeMentionNotification />) || (all && <AllMentionNotification />) || (unread && <UnreadMessagesNotification />)}\\n\\t\\t\\t\\t\\t\\t</MessageMetricsItem.Label>\\n\\t\\t\\t\\t\\t</MessageMetricsItem>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</MessageMetrics>\\n\\t\\t</MessageBlock>\\n\\t);\\n};\\n\\nexport default ThreadMetrics;\\n\",null],\"names\":[\"MessageMetricsItem\",\"MessageBlock\",\"MessageMetrics\",\"MessageMetricsReply\",\"MessageMetricsFollowing\",\"useToastMessageDispatch\",\"React\",\"useCallback\",\"useTranslation\",\"useTimeAgo\",\"useToggleFollowingThreadMutation\",\"useGoToThread\",\"followStyle\",\"anchor\",\"AllMentionNotification\",\"MeMentionNotification\",\"UnreadMessagesNotification\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"unread\",\"mention\",\"all\",\"rid\",\"mid\",\"counter\",\"participants\",\"following\",\"lm\",\"t\",\"format\",\"goToThread\",\"dispatchToastMessage\",\"toggleFollowingThreadMutation\",\"onError\",\"error\",\"type\",\"message\",\"handleFollow\",\"mutate\",\"tmid\",\"follow\",\"createElement\",\"className\",\"onClick\",\"title\",\"Icon\",\"name\",\"Label\",\"toLocaleString\",\"undefined\"],\"mappings\":\"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\"}"}