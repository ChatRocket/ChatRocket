{"code":"function module(n,t,e){var i,u,o,c,r,a,l,s,f,m,d,E,k,p,v,h;e.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(n){i=n}},0),e.link(\"@rocket.chat/core-typings\",{UserStatus:function(n){u=n}},0),e.link(\"@rocket.chat/fuselage\",{Button:function(n){o=n},PositionAnimated:function(n){c=n},Options:function(n){r=n},useCursor:function(n){a=n},Box:function(n){l=n}},1),e.link(\"@rocket.chat/ui-contexts\",{useSetting:function(n){s=n}},2),e.link(\"react\",{default:function(n){f=n},useRef:function(n){m=n},useCallback:function(n){d=n},useState:function(n){E=n},useMemo:function(n){k=n},useEffect:function(n){p=n}},3),e.link(\"react-i18next\",{useTranslation:function(n){v=n}},4),e.link(\"./UserStatus\",{UserStatus:function(n){h=n}},5),e.exportDefault(function(n){var t=n.margin,e=n.onChange,S=n.initialStatus,g=void 0===S?u.OFFLINE:S,A=n.optionWidth,O=n.placement,b=v().t,y=E(g),I=i(y,2),F=I[0],N=I[1],U=s(\"Accounts_AllowInvisibleStatusOption\"),w=k(function(){var n=function(n,t){return f.createElement(l,{display:\"flex\",flexDirection:\"row\",alignItems:\"center\"},f.createElement(l,{marginInlineEnd:8},f.createElement(h,{status:n})),t)},t=[[u.ONLINE,n(u.ONLINE,b(\"Online\"))],[u.AWAY,n(u.AWAY,b(\"Away\"))],[u.BUSY,n(u.BUSY,b(\"Busy\"))]];return U&&t.push([u.OFFLINE,n(u.OFFLINE,b(\"Offline\"))]),t},[b,U]),x=a(-1,w,function(n,t){var e=i(n,1)[0],u=i(t,2)[1];N(e),D(),u()}),B=i(x,5),L=B[0],C=B[1],Y=B[2],D=B[3],W=i(B[4],3),_=W[0],K=W[1],T=W[2],q=m(null),M=d(function(){null!=q&&q.current&&(q.current.focus(),T(),q.current.classList.add(\"focus-visible\"))},[T]),P=d(function(n){N(i(n,1)[0]),D(),K()},[K,D]);return p(function(){return e(F)},[F,e]),f.createElement(f.Fragment,null,f.createElement(o,{ref:q,small:!0,square:!0,secondary:!0,onClick:M,onBlur:K,onKeyUp:Y,onKeyDown:C,margin:t,\"aria-label\":b(\"User_status_menu\")},f.createElement(h,{status:F})),f.createElement(c,{width:\"auto\",visible:_,anchor:q,placement:void 0===O?\"bottom-end\":O},f.createElement(r,{width:void 0===A?void 0:A,onSelect:P,options:w,cursor:L})))})}","map":"{\"version\":3,\"sources\":[\"client/components/UserStatusMenu.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { UserStatus as UserStatusType } from '@rocket.chat/core-typings';\\nimport { Button, PositionAnimated, Options, useCursor, Box } from '@rocket.chat/fuselage';\\nimport { useSetting } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ComponentProps } from 'react';\\nimport React, { useRef, useCallback, useState, useMemo, useEffect } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { UserStatus } from './UserStatus';\\n\\ntype UserStatusMenuProps = {\\n\\tmargin: ComponentProps<typeof Box>['margin'];\\n\\tonChange: (type: UserStatusType) => void;\\n\\tinitialStatus?: UserStatusType;\\n\\toptionWidth?: ComponentProps<typeof Box>['width'];\\n\\tplacement?: ComponentProps<typeof PositionAnimated>['placement'];\\n};\\n\\nconst UserStatusMenu = ({\\n\\tmargin,\\n\\tonChange,\\n\\tinitialStatus = UserStatusType.OFFLINE,\\n\\toptionWidth = undefined,\\n\\tplacement = 'bottom-end',\\n}: UserStatusMenuProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst [status, setStatus] = useState(initialStatus);\\n\\tconst allowInvisibleStatus = useSetting('Accounts_AllowInvisibleStatusOption') as boolean;\\n\\n\\tconst options = useMemo(() => {\\n\\t\\tconst renderOption = (status: UserStatusType, label: string): ReactElement => (\\n\\t\\t\\t<Box display='flex' flexDirection='row' alignItems='center'>\\n\\t\\t\\t\\t<Box marginInlineEnd={8}>\\n\\t\\t\\t\\t\\t<UserStatus status={status} />\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t{label}\\n\\t\\t\\t</Box>\\n\\t\\t);\\n\\n\\t\\tconst statuses: Array<[value: UserStatusType, label: ReactElement]> = [\\n\\t\\t\\t[UserStatusType.ONLINE, renderOption(UserStatusType.ONLINE, t('Online'))],\\n\\t\\t\\t[UserStatusType.AWAY, renderOption(UserStatusType.AWAY, t('Away'))],\\n\\t\\t\\t[UserStatusType.BUSY, renderOption(UserStatusType.BUSY, t('Busy'))],\\n\\t\\t];\\n\\n\\t\\tif (allowInvisibleStatus) {\\n\\t\\t\\tstatuses.push([UserStatusType.OFFLINE, renderOption(UserStatusType.OFFLINE, t('Offline'))]);\\n\\t\\t}\\n\\n\\t\\treturn statuses;\\n\\t}, [t, allowInvisibleStatus]);\\n\\n\\tconst [cursor, handleKeyDown, handleKeyUp, reset, [visible, hide, show]] = useCursor(-1, options, ([selected], [, hide]) => {\\n\\t\\tsetStatus(selected);\\n\\t\\treset();\\n\\t\\thide();\\n\\t});\\n\\n\\tconst ref = useRef<HTMLButtonElement>(null);\\n\\tconst onClick = useCallback(() => {\\n\\t\\tif (!ref?.current) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tref.current.focus();\\n\\t\\tshow();\\n\\t\\tref.current.classList.add('focus-visible');\\n\\t}, [show]);\\n\\n\\tconst handleSelection = useCallback(\\n\\t\\t([selected]) => {\\n\\t\\t\\tsetStatus(selected);\\n\\t\\t\\treset();\\n\\t\\t\\thide();\\n\\t\\t},\\n\\t\\t[hide, reset],\\n\\t);\\n\\n\\tuseEffect(() => onChange(status), [status, onChange]);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<Button\\n\\t\\t\\t\\tref={ref}\\n\\t\\t\\t\\tsmall\\n\\t\\t\\t\\tsquare\\n\\t\\t\\t\\tsecondary\\n\\t\\t\\t\\tonClick={onClick}\\n\\t\\t\\t\\tonBlur={hide}\\n\\t\\t\\t\\tonKeyUp={handleKeyUp}\\n\\t\\t\\t\\tonKeyDown={handleKeyDown}\\n\\t\\t\\t\\tmargin={margin}\\n\\t\\t\\t\\taria-label={t('User_status_menu')}\\n\\t\\t\\t>\\n\\t\\t\\t\\t<UserStatus status={status} />\\n\\t\\t\\t</Button>\\n\\t\\t\\t<PositionAnimated width='auto' visible={visible} anchor={ref} placement={placement}>\\n\\t\\t\\t\\t<Options width={optionWidth} onSelect={handleSelection} options={options} cursor={cursor} />\\n\\t\\t\\t</PositionAnimated>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default UserStatusMenu;\\n\",null],\"names\":[\"_slicedToArray\",\"UserStatusType\",\"Button\",\"PositionAnimated\",\"Options\",\"useCursor\",\"Box\",\"useSetting\",\"React\",\"useRef\",\"useCallback\",\"useState\",\"useMemo\",\"useEffect\",\"useTranslation\",\"UserStatus\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"margin\",\"onChange\",\"_ref$initialStatus\",\"initialStatus\",\"OFFLINE\",\"_ref$optionWidth\",\"optionWidth\",\"_ref$placement\",\"placement\",\"t\",\"_useTranslation\",\"_useState\",\"_useState2\",\"status\",\"setStatus\",\"allowInvisibleStatus\",\"options\",\"renderOption\",\"label\",\"createElement\",\"display\",\"flexDirection\",\"alignItems\",\"marginInlineEnd\",\"statuses\",\"ONLINE\",\"AWAY\",\"BUSY\",\"push\",\"_useCursor\",\"_ref2\",\"_ref3\",\"selected\",\"_ref4\",\"hide\",\"_ref5\",\"reset\",\"_useCursor2\",\"cursor\",\"handleKeyDown\",\"handleKeyUp\",\"_useCursor2$\",\"visible\",\"show\",\"ref\",\"onClick\",\"current\",\"focus\",\"classList\",\"add\",\"handleSelection\",\"_ref6\",\"_ref7\",\"Fragment\",\"small\",\"square\",\"secondary\",\"onBlur\",\"onKeyUp\",\"onKeyDown\",\"width\",\"anchor\",\"undefined\",\"onSelect\"],\"mappings\":\"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\"}"}