{"code":"function module(e,l,t){var a;let s,i,n,o,r,u,d,c,m,p,g,k,h,v;t.link(\"@babel/runtime/helpers/taggedTemplateLiteral\",{default(e){s=e}},0),t.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){i=e}},1),t.link(\"@rocket.chat/css-in-js\",{css(e){n=e}},0),t.link(\"@rocket.chat/fuselage\",{Palette(e){o=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useMethod(e){r=e},useSetting(e){u=e},useToastMessageDispatch(e){d=e},useUserId(e){c=e}},2),t.link(\"react\",{default(e){m=e},useCallback(e){p=e},memo(e){g=e}},3),t.link(\"../../../../../hooks/useDecryptedMessage\",{useDecryptedMessage(e){k=e}},4),t.link(\"../../../../../lib/normalizeThreadMessage\",{normalizeThreadMessage(e){h=e}},5),t.link(\"./ThreadListMessage\",{default(e){v=e}},6),t.exportDefault(g(e=>{var l,t,g,f,_,b;let{thread:M,unread:w,unreadUser:D,unreadGroup:x,onClick:y}=e,T=null!==(l=c())&&void 0!==l?l:void 0,j=k(M),I=h(i(i({},M),{},{msg:j})),{name:P=M.u.username}=M.u,U=!!T&&null!==(t=null===(g=M.replies)||void 0===g?void 0:g.includes(T))&&void 0!==t&&t,z=r(\"followMessage\"),C=r(\"unfollowMessage\"),L=d(),N=p(async()=>{try{U?await C({mid:M._id}):await z({mid:M._id})}catch(e){L({type:\"error\",message:e})}},[U,C,M._id,z,L]),S=p(e=>{e.preventDefault(),e.stopPropagation(),N()},[N]),B=null!==(f=u(\"UI_Use_Real_Name\"))&&void 0!==f&&f,E=p(e=>{e.preventDefault(),e.stopPropagation(),y(M._id)},[y,M._id]);return m.createElement(v,{className:n(a||(a=s([\"\\n\t\t\t\tcursor: pointer;\\n\t\t\t\t&:hover,\\n\t\t\t\t&:focus {\\n\t\t\t\t\tbackground: \",\";\\n\t\t\t\t}\\n\t\t\t\tborder-bottom: 1px solid \",\" !important;\\n\t\t\t\"])),o.surface[\"surface-hover\"],o.stroke[\"stroke-extra-light\"]),tabIndex:0,_id:M._id,replies:null!==(_=M.tcount)&&void 0!==_?_:0,tlm:M.tlm,ts:M.ts,participants:null===(b=M.replies)||void 0===b?void 0:b.length,name:B?P:M.u.username,username:M.u.username,unread:w.includes(M._id),mention:D.includes(M._id),all:x.includes(M._id),following:U,\"data-id\":M._id,msg:null!=I?I:\"\",handleFollowButton:S,onClick:E,emoji:null==M?void 0:M.emoji})}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/Threads/components/ThreadListItem.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { css } from '@rocket.chat/css-in-js';\\nimport { Palette } from '@rocket.chat/fuselage';\\nimport { useMethod, useSetting, useToastMessageDispatch, useUserId } from '@rocket.chat/ui-contexts';\\nimport type { MouseEvent, ReactElement } from 'react';\\nimport React, { useCallback, memo } from 'react';\\n\\nimport { useDecryptedMessage } from '../../../../../hooks/useDecryptedMessage';\\nimport { normalizeThreadMessage } from '../../../../../lib/normalizeThreadMessage';\\nimport ThreadListMessage from './ThreadListMessage';\\n\\ntype ThreadListItemProps = {\\n\\tthread: IMessage;\\n\\tunread: string[];\\n\\tunreadUser: string[];\\n\\tunreadGroup: string[];\\n\\tonClick: (tmid: IMessage['_id']) => void;\\n};\\n\\nconst ThreadListItem = ({ thread, unread, unreadUser, unreadGroup, onClick }: ThreadListItemProps): ReactElement => {\\n\\tconst uid = useUserId() ?? undefined;\\n\\tconst decryptedMsg = useDecryptedMessage(thread);\\n\\tconst msg = normalizeThreadMessage({ ...thread, msg: decryptedMsg });\\n\\n\\tconst { name = thread.u.username } = thread.u;\\n\\n\\tconst following = !!uid && (thread.replies?.includes(uid) ?? false);\\n\\n\\tconst followMessage = useMethod('followMessage');\\n\\tconst unfollowMessage = useMethod('unfollowMessage');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst toggleFollowMessage = useCallback(async (): Promise<void> => {\\n\\t\\ttry {\\n\\t\\t\\tif (following) {\\n\\t\\t\\t\\tawait unfollowMessage({ mid: thread._id });\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tawait followMessage({ mid: thread._id });\\n\\t\\t\\t}\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t}, [following, unfollowMessage, thread._id, followMessage, dispatchToastMessage]);\\n\\n\\tconst handleToggleFollowButtonClick = useCallback(\\n\\t\\t(event: MouseEvent<HTMLElement>): void => {\\n\\t\\t\\tevent.preventDefault();\\n\\t\\t\\tevent.stopPropagation();\\n\\t\\t\\ttoggleFollowMessage();\\n\\t\\t},\\n\\t\\t[toggleFollowMessage],\\n\\t);\\n\\n\\tconst showRealNames = (useSetting('UI_Use_Real_Name') as boolean | undefined) ?? false;\\n\\n\\tconst handleListItemClick = useCallback(\\n\\t\\t(event: MouseEvent<HTMLElement>): void => {\\n\\t\\t\\tevent.preventDefault();\\n\\t\\t\\tevent.stopPropagation();\\n\\t\\t\\tonClick(thread._id);\\n\\t\\t},\\n\\t\\t[onClick, thread._id],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<ThreadListMessage\\n\\t\\t\\tclassName={css`\\n\\t\\t\\t\\tcursor: pointer;\\n\\t\\t\\t\\t&:hover,\\n\\t\\t\\t\\t&:focus {\\n\\t\\t\\t\\t\\tbackground: ${Palette.surface['surface-hover']};\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tborder-bottom: 1px solid ${Palette.stroke['stroke-extra-light']} !important;\\n\\t\\t\\t`}\\n\\t\\t\\ttabIndex={0}\\n\\t\\t\\t_id={thread._id}\\n\\t\\t\\treplies={thread.tcount ?? 0}\\n\\t\\t\\ttlm={thread.tlm}\\n\\t\\t\\tts={thread.ts}\\n\\t\\t\\tparticipants={thread.replies?.length}\\n\\t\\t\\tname={showRealNames ? name : thread.u.username}\\n\\t\\t\\tusername={thread.u.username}\\n\\t\\t\\tunread={unread.includes(thread._id)}\\n\\t\\t\\tmention={unreadUser.includes(thread._id)}\\n\\t\\t\\tall={unreadGroup.includes(thread._id)}\\n\\t\\t\\tfollowing={following}\\n\\t\\t\\tdata-id={thread._id}\\n\\t\\t\\tmsg={msg ?? ''}\\n\\t\\t\\thandleFollowButton={handleToggleFollowButtonClick}\\n\\t\\t\\tonClick={handleListItemClick}\\n\\t\\t\\temoji={thread?.emoji}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(ThreadListItem);\\n\",null],\"names\":[\"_taggedTemplateLiteral\",\"_objectSpread\",\"css\",\"Palette\",\"useMethod\",\"useSetting\",\"useToastMessageDispatch\",\"useUserId\",\"React\",\"useCallback\",\"memo\",\"useDecryptedMessage\",\"normalizeThreadMessage\",\"ThreadListMessage\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_useUserId\",\"_thread$replies$inclu\",\"_thread$replies\",\"_useSetting\",\"_thread$tcount\",\"_thread$replies2\",\"thread\",\"unread\",\"unreadUser\",\"unreadGroup\",\"onClick\",\"uid\",\"undefined\",\"decryptedMsg\",\"msg\",\"name\",\"u\",\"username\",\"following\",\"replies\",\"includes\",\"followMessage\",\"unfollowMessage\",\"dispatchToastMessage\",\"toggleFollowMessage\",\"mid\",\"_id\",\"error\",\"type\",\"message\",\"handleToggleFollowButtonClick\",\"event\",\"preventDefault\",\"stopPropagation\",\"showRealNames\",\"handleListItemClick\",\"createElement\",\"className\",\"_templateObject\",\"surface\",\"stroke\",\"tabIndex\",\"tcount\",\"tlm\",\"ts\",\"participants\",\"length\",\"mention\",\"all\",\"handleFollowButton\",\"emoji\"],\"mappings\":\"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\"}"}