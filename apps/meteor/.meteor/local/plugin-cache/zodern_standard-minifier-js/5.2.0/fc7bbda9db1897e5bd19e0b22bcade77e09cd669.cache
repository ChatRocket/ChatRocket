{"code":"function module(e,n,t){var i,o,s,r,u,a,c,l,f,m,d,k,b,U,h,E,p,v,g,x;t.link(\"@babel/runtime/helpers/extends\",{default:function(e){i=e}},0),t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){o=e}},1),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){s=e}},2),t.link(\"@rocket.chat/fuselage-hooks\",{useEffectEvent:function(e){r=e}},0),t.link(\"@rocket.chat/ui-client\",{GenericMenu:function(e){u=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useSetting:function(e){a=e},useRolesDescription:function(e){c=e},useTranslation:function(e){l=e}},2),t.link(\"react\",{default:function(e){f=e},useMemo:function(e){m=e}},3),t.link(\"../../../../lib/getUserDisplayName\",{getUserDisplayName:function(e){d=e}},4),t.link(\"../../../components/LocalTime\",{default:function(e){k=e}},5),t.link(\"../../../components/UserCard\",{UserCard:function(e){b=e},UserCardAction:function(e){U=e},UserCardRole:function(e){h=e},UserCardSkeleton:function(e){E=e}},6),t.link(\"../../../components/UserStatus\",{ReactiveUserStatus:function(e){p=e}},7),t.link(\"../../../hooks/useUserInfoQuery\",{useUserInfoQuery:function(e){v=e}},8),t.link(\"../../hooks/useMemberExists\",{useMemberExists:function(e){g=e}},9),t.link(\"../hooks/useUserInfoActions\",{useUserInfoActions:function(e){x=e}},10),t.exportDefault(function(e){var n,t=e.username,C=e.rid,S=e.onOpenUserInfo,y=e.onClose,I=l(),A=c(),M=!!a(\"UI_Use_Real_Name\"),_=v({username:t}),T=_.data,w=_.isLoading,D=g({roomId:C,username:t}),N=D.data,O=D.refetch,R=D.isSuccess,L=D.isLoading,Q=w||L,q=R&&(null==N?void 0:N.isMember),z=m(function(){var e=Q?void 0:null,n=(null==T?void 0:T.user)||{},i=n._id,o=n.name,s=n.roles,r=void 0===s?e:s,u=n.statusText,a=void 0===u?e:u,c=n.bio,l=void 0===c?e:c,m=n.utcOffset,b=void 0===m?e:m,U=n.nickname,E=n.avatarETag,v=n.freeSwitchExtension;return{_id:i,name:d(o,t,M),username:t,roles:r&&A(r).map(function(e,n){return f.createElement(h,{key:n},e)}),bio:l,etag:E,localTime:b&&Number.isInteger(b)&&f.createElement(k,{utcOffset:b}),status:i&&f.createElement(p,{uid:i}),customStatus:a,nickname:U,freeSwitchExtension:v}},[T,t,M,Q,A]),B=r(function(){S(),y()}),G=x({rid:C,user:{_id:null!==(n=z._id)&&void 0!==n?n:\"\",username:z.username,name:z.name,freeSwitchExtension:z.freeSwitchExtension},size:3,isMember:q,reload:O}),j=G.actions,F=G.menuActions,H=m(function(){return null!=F&&F.length?f.createElement(u,{title:I(\"More\"),key:\"menu\",\"data-qa-id\":\"menu\",sections:F,placement:\"bottom-start\",callbackAction:y}):null},[F,y,I]),J=m(function(){return[].concat(o(j.map(function(e){var n=s(e,2),t=n[0],i=n[1],o=i.content,r=i.title,u=i.icon,a=i.onClick;return f.createElement(U,{key:t,label:o||r,\"aria-label\":o||r,onClick:a,icon:u})})),[H]).filter(Boolean)},[j,H]);return Q?f.createElement(E,null):f.createElement(b,i({},z,{onClose:y,onOpenUserInfo:B,actions:J}))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/UserCard/UserCardWithData.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\\nimport { GenericMenu } from '@rocket.chat/ui-client';\\nimport { useSetting, useRolesDescription, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useMemo } from 'react';\\n\\nimport { getUserDisplayName } from '../../../../lib/getUserDisplayName';\\nimport LocalTime from '../../../components/LocalTime';\\nimport { UserCard, UserCardAction, UserCardRole, UserCardSkeleton } from '../../../components/UserCard';\\nimport { ReactiveUserStatus } from '../../../components/UserStatus';\\nimport { useUserInfoQuery } from '../../../hooks/useUserInfoQuery';\\nimport { useMemberExists } from '../../hooks/useMemberExists';\\nimport { useUserInfoActions } from '../hooks/useUserInfoActions';\\n\\ntype UserCardWithDataProps = {\\n\\tusername: string;\\n\\trid: IRoom['_id'];\\n\\tonOpenUserInfo: () => void;\\n\\tonClose: () => void;\\n};\\n\\nconst UserCardWithData = ({ username, rid, onOpenUserInfo, onClose }: UserCardWithDataProps) => {\\n\\tconst t = useTranslation();\\n\\tconst getRoles = useRolesDescription();\\n\\tconst showRealNames = Boolean(useSetting('UI_Use_Real_Name'));\\n\\n\\tconst { data, isLoading: isUserInfoLoading } = useUserInfoQuery({ username });\\n\\tconst {\\n\\t\\tdata: isMemberData,\\n\\t\\trefetch,\\n\\t\\tisSuccess: membershipCheckSuccess,\\n\\t\\tisLoading: isMembershipStatusLoading,\\n\\t} = useMemberExists({ roomId: rid, username });\\n\\n\\tconst isLoading = isUserInfoLoading || isMembershipStatusLoading;\\n\\tconst isMember = membershipCheckSuccess && isMemberData?.isMember;\\n\\n\\tconst user = useMemo(() => {\\n\\t\\tconst defaultValue = isLoading ? undefined : null;\\n\\n\\t\\tconst {\\n\\t\\t\\t_id,\\n\\t\\t\\tname,\\n\\t\\t\\troles = defaultValue,\\n\\t\\t\\tstatusText = defaultValue,\\n\\t\\t\\tbio = defaultValue,\\n\\t\\t\\tutcOffset = defaultValue,\\n\\t\\t\\tnickname,\\n\\t\\t\\tavatarETag,\\n\\t\\t\\tfreeSwitchExtension,\\n\\t\\t} = data?.user || {};\\n\\n\\t\\treturn {\\n\\t\\t\\t_id,\\n\\t\\t\\tname: getUserDisplayName(name, username, showRealNames),\\n\\t\\t\\tusername,\\n\\t\\t\\troles: roles && getRoles(roles).map((role, index) => <UserCardRole key={index}>{role}</UserCardRole>),\\n\\t\\t\\tbio,\\n\\t\\t\\tetag: avatarETag,\\n\\t\\t\\tlocalTime: utcOffset && Number.isInteger(utcOffset) && <LocalTime utcOffset={utcOffset} />,\\n\\t\\t\\tstatus: _id && <ReactiveUserStatus uid={_id} />,\\n\\t\\t\\tcustomStatus: statusText,\\n\\t\\t\\tnickname,\\n\\t\\t\\tfreeSwitchExtension,\\n\\t\\t};\\n\\t}, [data, username, showRealNames, isLoading, getRoles]);\\n\\n\\tconst handleOpenUserInfo = useEffectEvent(() => {\\n\\t\\tonOpenUserInfo();\\n\\t\\tonClose();\\n\\t});\\n\\n\\tconst { actions: actionsDefinition, menuActions: menuOptions } = useUserInfoActions({\\n\\t\\trid,\\n\\t\\tuser: { _id: user._id ?? '', username: user.username, name: user.name, freeSwitchExtension: user.freeSwitchExtension },\\n\\t\\tsize: 3,\\n\\t\\tisMember,\\n\\t\\treload: refetch,\\n\\t});\\n\\n\\tconst menu = useMemo(() => {\\n\\t\\tif (!menuOptions?.length) {\\n\\t\\t\\treturn null;\\n\\t\\t}\\n\\n\\t\\treturn (\\n\\t\\t\\t<GenericMenu\\n\\t\\t\\t\\ttitle={t('More')}\\n\\t\\t\\t\\tkey='menu'\\n\\t\\t\\t\\tdata-qa-id='menu'\\n\\t\\t\\t\\tsections={menuOptions}\\n\\t\\t\\t\\tplacement='bottom-start'\\n\\t\\t\\t\\tcallbackAction={onClose}\\n\\t\\t\\t/>\\n\\t\\t);\\n\\t}, [menuOptions, onClose, t]);\\n\\n\\tconst actions = useMemo(() => {\\n\\t\\tconst mapAction = ([key, { content, title, icon, onClick }]: any): ReactElement => (\\n\\t\\t\\t<UserCardAction key={key} label={content || title} aria-label={content || title} onClick={onClick} icon={icon} />\\n\\t\\t);\\n\\n\\t\\treturn [...actionsDefinition.map(mapAction), menu].filter(Boolean);\\n\\t}, [actionsDefinition, menu]);\\n\\n\\tif (isLoading) {\\n\\t\\treturn <UserCardSkeleton />;\\n\\t}\\n\\n\\treturn <UserCard {...user} onClose={onClose} onOpenUserInfo={handleOpenUserInfo} actions={actions} />;\\n};\\n\\nexport default UserCardWithData;\\n\",null],\"names\":[\"_extends\",\"_toConsumableArray\",\"_slicedToArray\",\"useEffectEvent\",\"GenericMenu\",\"useSetting\",\"useRolesDescription\",\"useTranslation\",\"React\",\"useMemo\",\"getUserDisplayName\",\"LocalTime\",\"UserCard\",\"UserCardAction\",\"UserCardRole\",\"UserCardSkeleton\",\"ReactiveUserStatus\",\"useUserInfoQuery\",\"useMemberExists\",\"useUserInfoActions\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_user$_id\",\"username\",\"rid\",\"onOpenUserInfo\",\"onClose\",\"t\",\"getRoles\",\"showRealNames\",\"Boolean\",\"_useUserInfoQuery\",\"data\",\"isUserInfoLoading\",\"isLoading\",\"_useMemberExists\",\"roomId\",\"isMemberData\",\"refetch\",\"membershipCheckSuccess\",\"isSuccess\",\"isMembershipStatusLoading\",\"isMember\",\"user\",\"defaultValue\",\"undefined\",\"_ref2\",\"_id\",\"name\",\"_ref2$roles\",\"roles\",\"_ref2$statusText\",\"statusText\",\"_ref2$bio\",\"bio\",\"_ref2$utcOffset\",\"utcOffset\",\"nickname\",\"avatarETag\",\"freeSwitchExtension\",\"map\",\"role\",\"index\",\"createElement\",\"key\",\"etag\",\"localTime\",\"Number\",\"isInteger\",\"status\",\"uid\",\"customStatus\",\"handleOpenUserInfo\",\"_useUserInfoActions\",\"size\",\"reload\",\"actionsDefinition\",\"actions\",\"menuOptions\",\"menuActions\",\"menu\",\"length\",\"title\",\"sections\",\"placement\",\"callbackAction\",\"concat\",\"_ref3\",\"_ref4\",\"_ref4$\",\"content\",\"icon\",\"onClick\",\"label\",\"filter\"],\"mappings\":\"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\"}"}