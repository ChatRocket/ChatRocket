{"code":"function module(e,t,n){let a,l,s,o,i,r,u,c,d;n.link(\"@rocket.chat/fuselage\",{Box(e){a=e},Button(e){l=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){s=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){o=e},useTranslation(e){i=e}},2),n.link(\"react\",{default(e){r=e},useState(e){u=e}},3),n.link(\"../../../../components/AutoCompleteAgent\",{default(e){c=e}},4),n.link(\"../../../../hooks/useEndpointAction\",{useEndpointAction(e){d=e}},5),n.exportDefault(function(e){let{agentList:t,onAdd:n}=e,k=i(),[m,g]=u(\"\"),f=d(\"GET\",\"/v1/livechat/users/agent/:_id\",{keys:{_id:m}}),h=o(),p=s(e=>g(e)),y=s(async()=>{if(!m)return;let{user:{_id:e,username:a,name:l}}=await f();t.some(t=>{let{agentId:n}=t;return n===e})?h({type:\"error\",message:k(\"This_agent_was_already_selected\")}):(g(\"\"),n({agentId:e,username:null!=a?a:\"\",name:l,count:0,order:0}))});return r.createElement(a,{display:\"flex\",alignItems:\"center\"},r.createElement(c,{value:m,onChange:p}),r.createElement(l,{disabled:!m,onClick:y,mis:8,primary:!0},k(\"Add\")))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/departments/DepartmentAgentsTable/AddAgent.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Button } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\\nimport React, { useState } from 'react';\\n\\nimport AutoCompleteAgent from '../../../../components/AutoCompleteAgent';\\nimport { useEndpointAction } from '../../../../hooks/useEndpointAction';\\nimport type { IDepartmentAgent } from '../EditDepartment';\\n\\nfunction AddAgent({ agentList, onAdd }: { agentList: IDepartmentAgent[]; onAdd: (agent: IDepartmentAgent) => void }) {\\n\\tconst t = useTranslation();\\n\\n\\tconst [userId, setUserId] = useState('');\\n\\n\\tconst getAgent = useEndpointAction('GET', '/v1/livechat/users/agent/:_id', { keys: { _id: userId } });\\n\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst handleAgent = useMutableCallback((e) => setUserId(e));\\n\\n\\tconst handleSave = useMutableCallback(async () => {\\n\\t\\tif (!userId) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst {\\n\\t\\t\\tuser: { _id, username, name },\\n\\t\\t} = await getAgent();\\n\\n\\t\\tif (!agentList.some(({ agentId }) => agentId === _id)) {\\n\\t\\t\\tsetUserId('');\\n\\t\\t\\tonAdd({ agentId: _id, username: username ?? '', name, count: 0, order: 0 });\\n\\t\\t} else {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: t('This_agent_was_already_selected') });\\n\\t\\t}\\n\\t});\\n\\n\\treturn (\\n\\t\\t<Box display='flex' alignItems='center'>\\n\\t\\t\\t<AutoCompleteAgent value={userId} onChange={handleAgent} />\\n\\t\\t\\t<Button disabled={!userId} onClick={handleSave} mis={8} primary>\\n\\t\\t\\t\\t{t('Add')}\\n\\t\\t\\t</Button>\\n\\t\\t</Box>\\n\\t);\\n}\\n\\nexport default AddAgent;\\n\",null],\"names\":[\"Box\",\"Button\",\"useMutableCallback\",\"useToastMessageDispatch\",\"useTranslation\",\"React\",\"useState\",\"AutoCompleteAgent\",\"useEndpointAction\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"agentList\",\"onAdd\",\"t\",\"userId\",\"setUserId\",\"getAgent\",\"keys\",\"_id\",\"dispatchToastMessage\",\"handleAgent\",\"e\",\"handleSave\",\"user\",\"username\",\"name\",\"some\",\"_ref2\",\"agentId\",\"type\",\"message\",\"count\",\"order\",\"createElement\",\"display\",\"alignItems\",\"value\",\"onChange\",\"disabled\",\"onClick\",\"mis\",\"primary\"],\"mappings\":\"2BAAAA,EAAOC,EAA6CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAtCC,EAAQC,IAAA,CAAA,wBAA6B,CAACV,IAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,OAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,8BAAA,CAAAR,mBAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2BAAA,CAAAP,wBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,eAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAN,EAAAM,CAAA,EAAAL,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2CAAA,CAAAE,QAAAD,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,sCAAA,CAAAF,kBAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAApDF,EAAOI,aAAa,CASpB,SAAiBC,CAAA,EAAkG,GAAjG,CAAEC,UAAAA,CAAS,CAAEC,MAAAA,CAAAA,CAAoF,CAAAF,EAC5GG,EAAIb,IAEJ,CAACc,EAAQC,EAAU,CAAGb,EAAS,IAE/Bc,EAAWZ,EAAkB,MAAO,gCAAiC,CAAEa,KAAM,CAAEC,IAAKJ,CAAM,CAAE,GAE5FK,EAAuBpB,IAEvBqB,EAActB,EAAoBuB,GAAMN,EAAUM,IAElDC,EAAaxB,EAAmB,UACrC,GAAI,CAACgB,EACJ,OAGD,GAAM,CACLS,KAAM,CAAEL,IAAAA,CAAG,CAAEM,SAAAA,CAAQ,CAAEC,KAAAA,CAAAA,CAAI,CAC3B,CAAG,MAAMT,IAELL,EAAUe,IAAI,CAACC,IAAA,GAAC,CAAEC,QAAAA,CAAAA,CAAS,CAAAD,EAAA,OAAKC,IAAYV,CAAG,GAInDC,EAAqB,CAAEU,KAAM,QAASC,QAASjB,EAAE,kCAAkC,IAHnFE,EAAU,IACVH,EAAM,CAAEgB,QAASV,EAAKM,SAAUA,MAAAA,EAAAA,EAAY,GAAIC,KAAAA,EAAMM,MAAO,EAAGC,MAAO,CAAC,GAI1E,GAEA,OACC/B,EAAAgC,aAAA,CAACrC,EAAG,CAACsC,QAAQ,OAAOC,WAAW,QAAQ,EACtClC,EAAAgC,aAAA,CAAC9B,EAAiB,CAACiC,MAAOtB,EAAQuB,SAAUjB,CAAY,GACxDnB,EAAAgC,aAAA,CAACpC,EAAM,CAACyC,SAAU,CAACxB,EAAQyB,QAASjB,EAAYkB,IAAK,EAAGC,QAAO,CAAA,CAAA,EAC7D5B,EAAE,QAIP\"}"}