{"code":"function module(e,l,o){let t,n,a,i,r,s,O;o.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){t=e}},0),o.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){n=e}},0),o.link(\"react\",{default(e){a=e},useState(e){i=e},useCallback(e){r=e}},1),o.link(\"./ModalSteps/FirstStep\",{default(e){s=e}},2),o.link(\"./ModalSteps/SecondStep\",{default(e){O=e}},3);let d={LIST_ROOMS:\"LIST_ROOMS\",CONFIRM_CONVERT:\"CONFIRM_CONVERT\"};o.exportDefault(e=>{let{onClose:l,onCancel:o,onConfirm:C,rooms:R,currentStep:u=(null==R?void 0:R.length)===0?d.CONFIRM_CONVERT:d.LIST_ROOMS}=e,[c,S]=i(u),[m,_]=i({}),f=n(()=>S(d.CONFIRM_CONVERT)),M=n(()=>S(d.LIST_ROOMS)),g=r(e=>{_(l=>l[e._id]?(delete l[e._id],t({},l)):t(t({},l),{},{[e._id]:e}))},[]),N=n(()=>{if(0===Object.values(m).filter(Boolean).length&&R)return _(Object.fromEntries(R.map(e=>[e._id,e])));_({})});return c===d.CONFIRM_CONVERT?a.createElement(O,{onConfirm:C,onClose:l,onCancel:R&&R.length>0?M:o,deletedRooms:m,rooms:R}):a.createElement(s,{onConfirm:f,onClose:l,onCancel:o,rooms:R,selectedRooms:m,onToggleAllRooms:N,onChangeRoomSelection:g,eligibleRoomsLength:null==R?void 0:R.length})})}","map":"{\"version\":3,\"sources\":[\"client/views/teams/ConvertToChannelModal/BaseConvertToChannelModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, Serialized } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport React, { useState, useCallback } from 'react';\\n\\nimport FirstStep from './ModalSteps/FirstStep';\\nimport SecondStep from './ModalSteps/SecondStep';\\n\\nconst STEPS = {\\n\\tLIST_ROOMS: 'LIST_ROOMS',\\n\\tCONFIRM_CONVERT: 'CONFIRM_CONVERT',\\n};\\n\\ntype BaseConvertToChannelModalProps = {\\n\\tonClose: () => void;\\n\\tonCancel: () => void;\\n\\tonConfirm: (deletedRooms: { [key: string]: Serialized<IRoom> }) => void;\\n\\tcurrentStep?: string;\\n\\trooms?: (Serialized<IRoom> & { isLastOwner?: boolean })[];\\n};\\n\\nconst BaseConvertToChannelModal = ({\\n\\tonClose,\\n\\tonCancel,\\n\\tonConfirm,\\n\\trooms,\\n\\tcurrentStep = rooms?.length === 0 ? STEPS.CONFIRM_CONVERT : STEPS.LIST_ROOMS,\\n}: BaseConvertToChannelModalProps) => {\\n\\tconst [step, setStep] = useState(currentStep);\\n\\tconst [selectedRooms, setSelectedRooms] = useState<{ [key: string]: Serialized<IRoom> }>({});\\n\\n\\tconst onContinue = useMutableCallback(() => setStep(STEPS.CONFIRM_CONVERT));\\n\\tconst onReturn = useMutableCallback(() => setStep(STEPS.LIST_ROOMS));\\n\\n\\tconst eligibleRooms = rooms;\\n\\n\\tconst onChangeRoomSelection = useCallback((room) => {\\n\\t\\tsetSelectedRooms((selectedRooms) => {\\n\\t\\t\\tif (selectedRooms[room._id]) {\\n\\t\\t\\t\\tdelete selectedRooms[room._id];\\n\\t\\t\\t\\treturn { ...selectedRooms };\\n\\t\\t\\t}\\n\\t\\t\\treturn { ...selectedRooms, [room._id]: room };\\n\\t\\t});\\n\\t}, []);\\n\\n\\tconst onToggleAllRooms = useMutableCallback(() => {\\n\\t\\tif (Object.values(selectedRooms).filter(Boolean).length === 0 && eligibleRooms) {\\n\\t\\t\\treturn setSelectedRooms(Object.fromEntries(eligibleRooms.map((room) => [room._id, room])));\\n\\t\\t}\\n\\t\\tsetSelectedRooms({});\\n\\t});\\n\\n\\tif (step === STEPS.CONFIRM_CONVERT) {\\n\\t\\treturn (\\n\\t\\t\\t<SecondStep\\n\\t\\t\\t\\tonConfirm={onConfirm}\\n\\t\\t\\t\\tonClose={onClose}\\n\\t\\t\\t\\tonCancel={rooms && rooms.length > 0 ? onReturn : onCancel}\\n\\t\\t\\t\\tdeletedRooms={selectedRooms}\\n\\t\\t\\t\\trooms={rooms}\\n\\t\\t\\t/>\\n\\t\\t);\\n\\t}\\n\\n\\treturn (\\n\\t\\t<FirstStep\\n\\t\\t\\tonConfirm={onContinue}\\n\\t\\t\\tonClose={onClose}\\n\\t\\t\\tonCancel={onCancel}\\n\\t\\t\\trooms={rooms}\\n\\t\\t\\tselectedRooms={selectedRooms}\\n\\t\\t\\tonToggleAllRooms={onToggleAllRooms}\\n\\t\\t\\tonChangeRoomSelection={onChangeRoomSelection}\\n\\t\\t\\teligibleRoomsLength={eligibleRooms?.length}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default BaseConvertToChannelModal;\\n\",null],\"names\":[\"_objectSpread\",\"useMutableCallback\",\"React\",\"useState\",\"useCallback\",\"FirstStep\",\"SecondStep\",\"module\",\"link\",\"default\",\"v\",\"STEPS\",\"LIST_ROOMS\",\"CONFIRM_CONVERT\",\"exportDefault\",\"_ref\",\"onClose\",\"onCancel\",\"onConfirm\",\"rooms\",\"currentStep\",\"length\",\"step\",\"setStep\",\"selectedRooms\",\"setSelectedRooms\",\"onContinue\",\"onReturn\",\"onChangeRoomSelection\",\"room\",\"_id\",\"onToggleAllRooms\",\"Object\",\"values\",\"filter\",\"Boolean\",\"fromEntries\",\"eligibleRooms\",\"map\",\"createElement\",\"deletedRooms\",\"eligibleRoomsLength\"],\"mappings\":\"2BACAA,EAAAC,EAAiEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAxDC,EAAAC,IAAoB,CAAA,uCAAoC,CAAAC,QAAAC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAxDH,EAAoBC,IAAA,CAAM,8BAA8B,CAAAP,mBAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,SAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,YAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yBAAA,CAAAC,QAAAC,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0BAAA,CAAAC,QAAAC,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAMjE,IAAMC,EAAQ,CACbC,WAAY,aACZC,gBAAiB,mBARlBN,EAAOO,aAAE,CAmByBC,IAMG,GANF,CAClCC,QAAAA,CAAO,CACPC,SAAAA,CAAQ,CACRC,UAAAA,CAAS,CACTC,MAAAA,CAAK,CACLC,YAAAA,EAAc,AAAAD,CAAAA,MAAAA,EAAK,KAAA,EAALA,EAAOE,MAAM,AAANA,IAAW,EAAIV,EAAME,eAAe,CAAGF,EAAMC,UAAAA,CAClC,CAAAG,EAC1B,CAACO,EAAMC,EAAQ,CAAGpB,EAASiB,GAC3B,CAACI,EAAeC,EAAiB,CAAGtB,EAA+C,CAAA,GAEnFuB,EAAazB,EAAmB,IAAMsB,EAAQZ,EAAME,eAAe,GACnEc,EAAW1B,EAAmB,IAAMsB,EAAQZ,EAAMC,UAAU,GAI5DgB,EAAwBxB,EAAayB,IAC1CJ,EAAkBD,GACjB,AAAIA,CAAa,CAACK,EAAKC,GAAG,CAAC,EAC1B,OAAON,CAAa,CAACK,EAAKC,GAAG,CAAC,CAC9B9B,EAAA,CAAA,EAAYwB,IAEbxB,EAAAA,EAAA,CAAA,EAAYwB,GAAa,CAAA,EAAA,CAAE,CAACK,EAAKC,GAAG,CAAA,CAAGD,CAAI,GAE7C,EAAG,EAAE,EAECE,EAAmB9B,EAAmB,KAC3C,GAAI+B,AAAwD,IAAxDA,OAAOC,MAAM,CAACT,GAAeU,MAAM,CAACC,SAASd,MAAM,EAblCF,EAcpB,OAAOM,EAAiBO,OAAOI,WAAW,CAACC,AAdvBlB,EAcqCmB,GAAG,CAAET,GAAS,CAACA,EAAKC,GAAG,CAAED,EAAK,IAExFJ,EAAiB,CAAA,EAClB,UAEA,AAAIH,IAASX,EAAME,eAAe,CAEhCX,EAAAqC,aAAA,CAACjC,EAAU,CACVY,UAAWA,EACXF,QAASA,EACTC,SAAUE,GAASA,EAAME,MAAM,CAAG,EAAIM,EAAWV,EACjDuB,aAAchB,EACdL,MAAOA,CAAM,GAMfjB,EAAAqC,aAAA,CAAClC,EAAS,CACTa,UAAWQ,EACXV,QAASA,EACTC,SAAUA,EACVE,MAAOA,EACPK,cAAeA,EACfO,iBAAkBA,EAClBH,sBAAuBA,EACvBa,oBAAqBJ,MAxCDlB,EAwCc,KAAA,EAAbkB,AAxCDlB,EAwCgBE,MAAAA,AAAO,EAG9C\"}"}