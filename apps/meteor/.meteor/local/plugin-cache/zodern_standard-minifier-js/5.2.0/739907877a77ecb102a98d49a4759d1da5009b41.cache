{"code":"function module(e,t,n){let l,a,r,o,c,i,_,s,u,m,E,T,C,R,p;n.link(\"@rocket.chat/fuselage\",{Box(e){l=e},Button(e){a=e},Callout(e){r=e},Throbber(e){o=e}},0),n.link(\"react\",{default(e){c=e}},1),n.link(\"react-i18next\",{useTranslation(e){i=e}},2),n.link(\"../../../../../app/otr/lib/OtrRoomState\",{OtrRoomState(e){_=e}},3),n.link(\"../../../../components/Contextualbar\",{ContextualbarHeader(e){s=e},ContextualbarIcon(e){u=e},ContextualbarTitle(e){m=e},ContextualbarClose(e){E=e},ContextualbarScrollableContent(e){T=e}},4),n.link(\"../../contexts/RoomContext\",{useRoom(e){C=e}},5),n.link(\"./components/OTREstablished\",{default(e){R=e}},6),n.link(\"./components/OTRStates\",{default(e){p=e}},7),n.exportDefault(e=>{let{isOnline:t,onClickClose:n,onClickStart:O,onClickEnd:b,onClickRefresh:h,otrState:d,peerUsername:k}=e,{t:S}=i(),f=C();return c.createElement(c.Fragment,null,c.createElement(s,null,c.createElement(u,{name:\"stopwatch\"}),c.createElement(m,null,S(\"OTR\")),n&&c.createElement(E,{onClick:n})),c.createElement(T,{p:24,color:\"default\"},c.createElement(l,{fontScale:\"h4\"},S(\"Off_the_record_conversation\")),f.encrypted?c.createElement(r,{title:S(\"OTR_not_available\"),type:\"warning\"},S(\"OTR_not_available_e2ee\")):t?(()=>{switch(d){case _.NOT_STARTED:return c.createElement(a,{onClick:O,primary:!0},S(\"Start_OTR\"));case _.ESTABLISHING:return c.createElement(l,null,c.createElement(l,{fontScale:\"p2\"},S(\"Please_wait_while_OTR_is_being_established\")),c.createElement(l,{mb:16},c.createElement(o,null)));case _.ESTABLISHED:return c.createElement(R,{onClickEnd:b,onClickRefresh:h});case _.DECLINED:return c.createElement(p,{title:S(\"OTR_Chat_Declined_Title\"),description:S(\"OTR_Chat_Declined_Description\",k||\"\"),icon:\"cross\",onClickStart:O});case _.TIMEOUT:return c.createElement(p,{title:S(\"OTR_Chat_Timeout_Title\"),description:S(\"OTR_Chat_Timeout_Description\",k||\"\"),icon:\"clock\",onClickStart:O});default:return c.createElement(p,{title:S(\"OTR_Chat_Error_Title\"),description:S(\"OTR_Chat_Error_Description\"),icon:\"warning\",onClickStart:O})}})():c.createElement(l,{fontScale:\"p2m\"},S(\"OTR_is_only_available_when_both_users_are_online\"))))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/OTR/OTR.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { Box, Button, Callout, Throbber } from '@rocket.chat/fuselage';\\nimport type { MouseEventHandler, ReactElement } from 'react';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { OtrRoomState } from '../../../../../app/otr/lib/OtrRoomState';\\nimport {\\n\\tContextualbarHeader,\\n\\tContextualbarIcon,\\n\\tContextualbarTitle,\\n\\tContextualbarClose,\\n\\tContextualbarScrollableContent,\\n} from '../../../../components/Contextualbar';\\nimport { useRoom } from '../../contexts/RoomContext';\\nimport OTREstablished from './components/OTREstablished';\\nimport OTRStates from './components/OTRStates';\\n\\ntype OTRProps = {\\n\\tisOnline: boolean;\\n\\tonClickClose: MouseEventHandler<HTMLOrSVGElement>;\\n\\tonClickStart: () => void;\\n\\tonClickEnd: () => void;\\n\\tonClickRefresh: () => void;\\n\\totrState: string;\\n\\tpeerUsername: IUser['username'];\\n};\\n\\nconst OTR = ({ isOnline, onClickClose, onClickStart, onClickEnd, onClickRefresh, otrState, peerUsername }: OTRProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst room = useRoom();\\n\\n\\tconst renderOTRState = (): ReactElement => {\\n\\t\\tswitch (otrState) {\\n\\t\\t\\tcase OtrRoomState.NOT_STARTED:\\n\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t<Button onClick={onClickStart} primary>\\n\\t\\t\\t\\t\\t\\t{t('Start_OTR')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t);\\n\\t\\t\\tcase OtrRoomState.ESTABLISHING:\\n\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t<Box>\\n\\t\\t\\t\\t\\t\\t<Box fontScale='p2'>{t('Please_wait_while_OTR_is_being_established')}</Box>\\n\\t\\t\\t\\t\\t\\t<Box mb={16}>\\n\\t\\t\\t\\t\\t\\t\\t<Throbber />\\n\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t);\\n\\t\\t\\tcase OtrRoomState.ESTABLISHED:\\n\\t\\t\\t\\treturn <OTREstablished onClickEnd={onClickEnd} onClickRefresh={onClickRefresh} />;\\n\\t\\t\\tcase OtrRoomState.DECLINED:\\n\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t<OTRStates\\n\\t\\t\\t\\t\\t\\ttitle={t('OTR_Chat_Declined_Title')}\\n\\t\\t\\t\\t\\t\\tdescription={t('OTR_Chat_Declined_Description', peerUsername || '')}\\n\\t\\t\\t\\t\\t\\ticon='cross'\\n\\t\\t\\t\\t\\t\\tonClickStart={onClickStart}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t);\\n\\t\\t\\tcase OtrRoomState.TIMEOUT:\\n\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t<OTRStates\\n\\t\\t\\t\\t\\t\\ttitle={t('OTR_Chat_Timeout_Title')}\\n\\t\\t\\t\\t\\t\\tdescription={t('OTR_Chat_Timeout_Description', peerUsername || '')}\\n\\t\\t\\t\\t\\t\\ticon='clock'\\n\\t\\t\\t\\t\\t\\tonClickStart={onClickStart}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t);\\n\\t\\t\\tdefault:\\n\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t<OTRStates\\n\\t\\t\\t\\t\\t\\ttitle={t('OTR_Chat_Error_Title')}\\n\\t\\t\\t\\t\\t\\tdescription={t('OTR_Chat_Error_Description')}\\n\\t\\t\\t\\t\\t\\ticon='warning'\\n\\t\\t\\t\\t\\t\\tonClickStart={onClickStart}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t);\\n\\t\\t}\\n\\t};\\n\\n\\tconst renderOTRBody = (): ReactElement => {\\n\\t\\tif (room.encrypted) {\\n\\t\\t\\treturn (\\n\\t\\t\\t\\t<Callout title={t('OTR_not_available')} type='warning'>\\n\\t\\t\\t\\t\\t{t('OTR_not_available_e2ee')}\\n\\t\\t\\t\\t</Callout>\\n\\t\\t\\t);\\n\\t\\t}\\n\\n\\t\\tif (!isOnline) {\\n\\t\\t\\treturn <Box fontScale='p2m'>{t('OTR_is_only_available_when_both_users_are_online')}</Box>;\\n\\t\\t}\\n\\n\\t\\treturn renderOTRState();\\n\\t};\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<ContextualbarHeader>\\n\\t\\t\\t\\t<ContextualbarIcon name='stopwatch' />\\n\\t\\t\\t\\t<ContextualbarTitle>{t('OTR')}</ContextualbarTitle>\\n\\t\\t\\t\\t{onClickClose && <ContextualbarClose onClick={onClickClose} />}\\n\\t\\t\\t</ContextualbarHeader>\\n\\t\\t\\t<ContextualbarScrollableContent p={24} color='default'>\\n\\t\\t\\t\\t<Box fontScale='h4'>{t('Off_the_record_conversation')}</Box>\\n\\t\\t\\t\\t{renderOTRBody()}\\n\\t\\t\\t</ContextualbarScrollableContent>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default OTR;\\n\",null],\"names\":[\"Box\",\"Button\",\"Callout\",\"Throbber\",\"React\",\"useTranslation\",\"OtrRoomState\",\"ContextualbarHeader\",\"ContextualbarIcon\",\"ContextualbarTitle\",\"ContextualbarClose\",\"ContextualbarScrollableContent\",\"useRoom\",\"OTREstablished\",\"OTRStates\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"isOnline\",\"onClickClose\",\"onClickStart\",\"onClickEnd\",\"onClickRefresh\",\"otrState\",\"peerUsername\",\"t\",\"room\",\"createElement\",\"Fragment\",\"name\",\"onClick\",\"p\",\"color\",\"fontScale\",\"encrypted\",\"title\",\"type\",\"renderOTRState\",\"NOT_STARTED\",\"primary\",\"ESTABLISHING\",\"mb\",\"ESTABLISHED\",\"DECLINED\",\"description\",\"icon\",\"TIMEOUT\"],\"mappings\":\"2BACAA,EAAOC,EAAOC,EAAQC,EAAiDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAxCC,EAAQC,IAAE,CAAA,wBAAM,CAAAhB,IAAwBiB,CAAA,EAAAjB,EAAAiB,CAAA,EAAAhB,OAAAgB,CAAA,EAAAhB,EAAAgB,CAAA,EAAAf,QAAAe,CAAA,EAAAf,EAAAe,CAAA,EAAAd,SAAAc,CAAA,EAAAd,EAAAc,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gBAAA,CAAAX,eAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,0CAAA,CAAAV,aAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,uCAAA,CAAAT,oBAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,kBAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,mBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,mBAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,+BAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,6BAAA,CAAAJ,QAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,8BAAA,CAAAE,QAAAD,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,yBAAA,CAAAE,QAAAD,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAAvEF,EAAOI,aAAa,CA2BRC,IAAyH,GAAxH,CAAEC,SAAAA,CAAQ,CAAEC,aAAAA,CAAY,CAAEC,aAAAA,CAAY,CAAEC,WAAAA,CAAU,CAAEC,eAAAA,CAAc,CAAEC,SAAAA,CAAQ,CAAEC,aAAAA,CAAAA,CAAwB,CAAAP,EAC5G,CAAEQ,EAAAA,CAAAA,CAAG,CAAGvB,IACRwB,EAAOjB,IAmEb,OACCR,EAAA0B,aAAA,CAAA1B,EAAA2B,QAAA,CAAA,KACC3B,EAAA0B,aAAA,CAACvB,EAAmB,KACnBH,EAAA0B,aAAA,CAACtB,EAAiB,CAACwB,KAAK,WAAW,GACnC5B,EAAA0B,aAAA,CAACrB,EAAkB,KAAEmB,EAAE,QACtBN,GAAgBlB,EAAA0B,aAAA,CAACpB,EAAkB,CAACuB,QAASX,CAAa,IAE5DlB,EAAA0B,aAAA,CAACnB,EAA8B,CAACuB,EAAG,GAAIC,MAAM,SAAS,EACrD/B,EAAA0B,aAAA,CAAC9B,EAAG,CAACoC,UAAU,IAAI,EAAER,EAAE,gCAvBzB,AAAIC,EAAKQ,SAAS,CAEhBjC,EAAA0B,aAAA,CAAC5B,EAAO,CAACoC,MAAOV,EAAE,qBAAsBW,KAAK,SAAS,EACpDX,EAAE,2BAKDP,EAIEmB,AA9DeA,CAAAA,KACtB,OAAQd,GACP,KAAKpB,EAAamC,WAAW,CAC5B,OACCrC,EAAA0B,aAAA,CAAC7B,EAAM,CAACgC,QAASV,EAAcmB,QAAO,CAAA,CAAA,EACpCd,EAAE,aAGN,MAAKtB,EAAaqC,YAAY,CAC7B,OACCvC,EAAA0B,aAAA,CAAC9B,EAAG,KACHI,EAAA0B,aAAA,CAAC9B,EAAG,CAACoC,UAAU,IAAI,EAAER,EAAE,+CACvBxB,EAAA0B,aAAA,CAAC9B,EAAG,CAAC4C,GAAI,EAAG,EACXxC,EAAA0B,aAAA,CAAC3B,EAAQ,OAIb,MAAKG,EAAauC,WAAW,CAC5B,OAAOzC,EAAA0B,aAAA,CAACjB,EAAc,CAACW,WAAYA,EAAYC,eAAgBA,CAAe,EAC/E,MAAKnB,EAAawC,QAAQ,CACzB,OACC1C,EAAA0B,aAAA,CAAChB,EAAS,CACTwB,MAAOV,EAAE,2BACTmB,YAAanB,EAAE,gCAAiCD,GAAgB,IAChEqB,KAAK,QACLzB,aAAcA,CAAa,EAG9B,MAAKjB,EAAa2C,OAAO,CACxB,OACC7C,EAAA0B,aAAA,CAAChB,EAAS,CACTwB,MAAOV,EAAE,0BACTmB,YAAanB,EAAE,+BAAgCD,GAAgB,IAC/DqB,KAAK,QACLzB,aAAcA,CAAa,EAG9B,SACC,OACCnB,EAAA0B,aAAA,CAAChB,EAAS,CACTwB,MAAOV,EAAE,wBACTmB,YAAanB,EAAE,8BACfoB,KAAK,UACLzB,aAAcA,CAAa,EAG/B,CACD,CAAA,IAYSnB,EAAA0B,aAAA,CAAC9B,EAAG,CAACoC,UAAU,KAAK,EAAER,EAAE,sDAmBlC\"}"}