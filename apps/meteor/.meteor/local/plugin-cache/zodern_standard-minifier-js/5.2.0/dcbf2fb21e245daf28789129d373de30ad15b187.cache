{"code":"function module(e,i,n){n.link(\"@babel/runtime/regenerator\",{default:function(e){t=e}},0),n.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){a=e}},1),n.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){o=e}},2),n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){r=e}},3),n.link(\"@rocket.chat/fuselage-hooks\",{useSafely:function(e){u=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useUser:function(e){l=e},useSetting:function(e){c=e},usePermission:function(e){s=e},useMethod:function(e){f=e},useEndpoint:function(e){v=e},useStream:function(e){d=e}},1),n.link(\"@tanstack/react-query\",{useQuery:function(e){h=e},useQueryClient:function(e){m=e}},2),n.link(\"react\",{default:function(e){p=e},useState:function(e){b=e},useEffect:function(e){g=e},useMemo:function(e){k=e},useCallback:function(e){_=e},memo:function(e){L=e},useRef:function(e){y=e}},3),n.link(\"../../app/livechat/client/collections/LivechatInquiry\",{LivechatInquiry:function(e){C=e}},4),n.link(\"../../app/livechat/client/lib/stream/queueManager\",{initializeLivechatInquiryStream:function(e){A=e}},5),n.link(\"../../app/livechat/lib/inquiries\",{getOmniChatSortQuery:function(e){S=e}},6),n.link(\"../../app/ui/client/lib/KonchatNotification\",{KonchatNotification:function(e){q=e}},7),n.link(\"../../lib/ClientLogger\",{ClientLogger:function(e){w=e}},8),n.link(\"../contexts/OmnichannelContext\",{OmnichannelContext:function(e){O=e}},9),n.link(\"../hooks/useHasLicenseModule\",{useHasLicenseModule:function(e){E=e}},10),n.link(\"../hooks/useReactiveValue\",{useReactiveValue:function(e){x=e}},11),n.link(\"../hooks/useShouldPreventAction\",{useShouldPreventAction:function(e){M=e}},12);var t,a,o,r,u,l,c,s,f,v,d,h,m,p,b,g,k,_,L,y,C,A,S,q,w,O,E,x,M,P={inquiries:{enabled:!1},enabled:!1,isEnterprise:!1,agentAvailable:!1,showOmnichannelQueueLink:!1,isOverMacLimit:!1,livechatPriorities:{enabled:!1,data:[],isLoading:!1,isError:!1}};n.exportDefault(L(function(e){var i,n=e.children,L=c(\"Livechat_enabled\"),Q=c(\"Livechat_Routing_Method\"),R=c(\"Livechat_show_queue_list_link\"),I=null!==(i=c(\"Livechat_guest_pool_max_number_incoming_livechats_displayed\"))&&void 0!==i?i:0,T=c(\"Omnichannel_sorting_mechanism\"),N=y(new w(\"OmnichannelProvider\")),D=s(\"view-l-room\"),H=s(\"view-livechat-queue\"),K=l(),V=(null==K?void 0:K.statusLivechat)===\"available\",j=f(\"livechat:getRoutingConfig\"),z=u(b(void 0)),G=r(z,2),J=G[0],U=G[1],W=b(new Set),B=r(W,2),F=B[0],X=B[1],Y=D&&L,Z=c(\"WebRTC_Servers\"),$=!0===E(\"livechat-enterprise\"),ee=v(\"GET\",\"/v1/livechat/priorities\"),ei=d(\"notify-logged\"),en=m(),et=$&&Y,ea=Y&&!!K&&!!J,eo=h([\"/v1/livechat/priorities\"],function(){return ee({sort:JSON.stringify({sortItem:1})})},{staleTime:1/0,enabled:et}),er=eo.data,eu=(er=void 0===er?{}:er).priorities,el=void 0===eu?[]:eu,ec=eo.isInitialLoading,es=eo.isError,ef=M(\"monthlyActiveContacts\");g(function(){if(et)return ei(\"omnichannel.priority-changed\",function(){en.invalidateQueries([\"/v1/livechat/priorities\"])})},[et,en,ei]),g(function(){Y&&(!Q&&Q||t.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.awrap(j());case 3:U(e.sent),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N.current.error(\"update() error in routeConfig \"+e.t0);case 10:case\"end\":return e.stop()}},null,null,[[0,7]],Promise))},[Y,j,Z,Q,U,!0]);var ev=ea&&H&&!!J&&J.showQueue&&!J.autoAssignAgent&&V,ed=d(\"notify-user\");g(function(){if(ev&&(A(null==K?void 0:K._id),null!=K&&K._id))return ed(K._id+\"/departmentAgentData\",function(){A(null==K?void 0:K._id)})},[ev,ed,null==K?void 0:K._id]);var eh=x(_(function(){if(ev)return C.find({status:\"queued\"},{sort:S(T),limit:I}).fetch()},[ev,I,T]));null==eh||eh.map(function(e){var i=e.rid;if(!F.has(i))return X(function(e){return new Set([].concat(o(e),[i]))}),q.newRoom(i)});var em=k(function(){if(!ea)return P;var e={enabled:et,data:el,isLoading:ec,isError:es};return ev?a(a({},P),{},{enabled:!0,isEnterprise:$,agentAvailable:V,voipCallAvailable:!0,routeConfig:J,inquiries:eh?{enabled:!0,queue:eh}:{enabled:!1},showOmnichannelQueueLink:R&&!!V,livechatPriorities:e,isOverMacLimit:ef}):a(a({},P),{},{enabled:!0,isEnterprise:$,agentAvailable:V,voipCallAvailable:!0,routeConfig:J,livechatPriorities:e,isOverMacLimit:ef})},[ea,et,el,ec,es,ev,$,V,!0,J,eh,R,ef]);return p.createElement(O.Provider,{children:n,value:em})}))}","map":"{\"version\":3,\"sources\":[\"client/providers/OmnichannelProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type {\\n\\tIOmnichannelAgent,\\n\\tOmichannelRoutingConfig,\\n\\tOmnichannelSortingMechanismSettingType,\\n\\tILivechatInquiryRecord,\\n} from '@rocket.chat/core-typings';\\nimport { useSafely } from '@rocket.chat/fuselage-hooks';\\nimport { useUser, useSetting, usePermission, useMethod, useEndpoint, useStream } from '@rocket.chat/ui-contexts';\\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\\nimport type { ReactNode } from 'react';\\nimport React, { useState, useEffect, useMemo, useCallback, memo, useRef } from 'react';\\n\\nimport { LivechatInquiry } from '../../app/livechat/client/collections/LivechatInquiry';\\nimport { initializeLivechatInquiryStream } from '../../app/livechat/client/lib/stream/queueManager';\\nimport { getOmniChatSortQuery } from '../../app/livechat/lib/inquiries';\\nimport { KonchatNotification } from '../../app/ui/client/lib/KonchatNotification';\\nimport { ClientLogger } from '../../lib/ClientLogger';\\nimport type { OmnichannelContextValue } from '../contexts/OmnichannelContext';\\nimport { OmnichannelContext } from '../contexts/OmnichannelContext';\\nimport { useHasLicenseModule } from '../hooks/useHasLicenseModule';\\nimport { useReactiveValue } from '../hooks/useReactiveValue';\\nimport { useShouldPreventAction } from '../hooks/useShouldPreventAction';\\n\\nconst emptyContextValue: OmnichannelContextValue = {\\n\\tinquiries: { enabled: false },\\n\\tenabled: false,\\n\\tisEnterprise: false,\\n\\tagentAvailable: false,\\n\\tshowOmnichannelQueueLink: false,\\n\\tisOverMacLimit: false,\\n\\tlivechatPriorities: {\\n\\t\\tenabled: false,\\n\\t\\tdata: [],\\n\\t\\tisLoading: false,\\n\\t\\tisError: false,\\n\\t},\\n};\\n\\ntype OmnichannelProviderProps = {\\n\\tchildren?: ReactNode;\\n};\\n\\nconst OmnichannelProvider = ({ children }: OmnichannelProviderProps) => {\\n\\tconst omniChannelEnabled = useSetting('Livechat_enabled') as boolean;\\n\\tconst omnichannelRouting = useSetting('Livechat_Routing_Method');\\n\\tconst showOmnichannelQueueLink = useSetting('Livechat_show_queue_list_link') as boolean;\\n\\tconst omnichannelPoolMaxIncoming = useSetting<number>('Livechat_guest_pool_max_number_incoming_livechats_displayed') ?? 0;\\n\\tconst omnichannelSortingMechanism = useSetting('Omnichannel_sorting_mechanism') as OmnichannelSortingMechanismSettingType;\\n\\n\\tconst loggerRef = useRef(new ClientLogger('OmnichannelProvider'));\\n\\tconst hasAccess = usePermission('view-l-room');\\n\\tconst canViewOmnichannelQueue = usePermission('view-livechat-queue');\\n\\tconst user = useUser() as IOmnichannelAgent;\\n\\n\\tconst agentAvailable = user?.statusLivechat === 'available';\\n\\tconst voipCallAvailable = true; // TODO: use backend check;\\n\\n\\tconst getRoutingConfig = useMethod('livechat:getRoutingConfig');\\n\\n\\tconst [routeConfig, setRouteConfig] = useSafely(useState<OmichannelRoutingConfig | undefined>(undefined));\\n\\tconst [queueNotification, setQueueNotification] = useState(new Set());\\n\\n\\tconst accessible = hasAccess && omniChannelEnabled;\\n\\tconst iceServersSetting: any = useSetting('WebRTC_Servers');\\n\\tconst isEnterprise = useHasLicenseModule('livechat-enterprise') === true;\\n\\n\\tconst getPriorities = useEndpoint('GET', '/v1/livechat/priorities');\\n\\tconst subscribe = useStream('notify-logged');\\n\\tconst queryClient = useQueryClient();\\n\\tconst isPrioritiesEnabled = isEnterprise && accessible;\\n\\tconst enabled = accessible && !!user && !!routeConfig;\\n\\n\\tconst {\\n\\t\\tdata: { priorities = [] } = {},\\n\\t\\tisInitialLoading: isLoadingPriorities,\\n\\t\\tisError: isErrorPriorities,\\n\\t} = useQuery(['/v1/livechat/priorities'], () => getPriorities({ sort: JSON.stringify({ sortItem: 1 }) }), {\\n\\t\\tstaleTime: Infinity,\\n\\t\\tenabled: isPrioritiesEnabled,\\n\\t});\\n\\n\\tconst isOverMacLimit = useShouldPreventAction('monthlyActiveContacts');\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!isPrioritiesEnabled) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\treturn subscribe('omnichannel.priority-changed', () => {\\n\\t\\t\\tqueryClient.invalidateQueries(['/v1/livechat/priorities']);\\n\\t\\t});\\n\\t}, [isPrioritiesEnabled, queryClient, subscribe]);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!accessible) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst update = async (): Promise<void> => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst routeConfig = await getRoutingConfig();\\n\\t\\t\\t\\tsetRouteConfig(routeConfig);\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tloggerRef.current.error(`update() error in routeConfig ${error}`);\\n\\t\\t\\t}\\n\\t\\t};\\n\\n\\t\\tif (omnichannelRouting || !omnichannelRouting) {\\n\\t\\t\\tupdate();\\n\\t\\t}\\n\\t}, [accessible, getRoutingConfig, iceServersSetting, omnichannelRouting, setRouteConfig, voipCallAvailable]);\\n\\n\\tconst manuallySelected =\\n\\t\\tenabled && canViewOmnichannelQueue && !!routeConfig && routeConfig.showQueue && !routeConfig.autoAssignAgent && agentAvailable;\\n\\n\\tconst streamNotifyUser = useStream('notify-user');\\n\\tuseEffect(() => {\\n\\t\\tif (!manuallySelected) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst handleDepartmentAgentData = (): void => {\\n\\t\\t\\tinitializeLivechatInquiryStream(user?._id);\\n\\t\\t};\\n\\n\\t\\tinitializeLivechatInquiryStream(user?._id);\\n\\t\\tif (!user?._id) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\treturn streamNotifyUser(`${user._id}/departmentAgentData`, handleDepartmentAgentData);\\n\\t}, [manuallySelected, streamNotifyUser, user?._id]);\\n\\n\\tconst queue = useReactiveValue<ILivechatInquiryRecord[] | undefined>(\\n\\t\\tuseCallback(() => {\\n\\t\\t\\tif (!manuallySelected) {\\n\\t\\t\\t\\treturn undefined;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn LivechatInquiry.find(\\n\\t\\t\\t\\t{ status: 'queued' },\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tsort: getOmniChatSortQuery(omnichannelSortingMechanism),\\n\\t\\t\\t\\t\\tlimit: omnichannelPoolMaxIncoming,\\n\\t\\t\\t\\t},\\n\\t\\t\\t).fetch();\\n\\t\\t}, [manuallySelected, omnichannelPoolMaxIncoming, omnichannelSortingMechanism]),\\n\\t);\\n\\n\\tqueue?.map(({ rid }) => {\\n\\t\\tif (queueNotification.has(rid)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tsetQueueNotification((prev) => new Set([...prev, rid]));\\n\\t\\treturn KonchatNotification.newRoom(rid);\\n\\t});\\n\\n\\tconst contextValue = useMemo<OmnichannelContextValue>(() => {\\n\\t\\tif (!enabled) {\\n\\t\\t\\treturn emptyContextValue;\\n\\t\\t}\\n\\n\\t\\tconst livechatPriorities = {\\n\\t\\t\\tenabled: isPrioritiesEnabled,\\n\\t\\t\\tdata: priorities,\\n\\t\\t\\tisLoading: isLoadingPriorities,\\n\\t\\t\\tisError: isErrorPriorities,\\n\\t\\t};\\n\\n\\t\\tif (!manuallySelected) {\\n\\t\\t\\treturn {\\n\\t\\t\\t\\t...emptyContextValue,\\n\\t\\t\\t\\tenabled: true,\\n\\t\\t\\t\\tisEnterprise,\\n\\t\\t\\t\\tagentAvailable,\\n\\t\\t\\t\\tvoipCallAvailable,\\n\\t\\t\\t\\trouteConfig,\\n\\t\\t\\t\\tlivechatPriorities,\\n\\t\\t\\t\\tisOverMacLimit,\\n\\t\\t\\t};\\n\\t\\t}\\n\\n\\t\\treturn {\\n\\t\\t\\t...emptyContextValue,\\n\\t\\t\\tenabled: true,\\n\\t\\t\\tisEnterprise,\\n\\t\\t\\tagentAvailable,\\n\\t\\t\\tvoipCallAvailable,\\n\\t\\t\\trouteConfig,\\n\\t\\t\\tinquiries: queue\\n\\t\\t\\t\\t? {\\n\\t\\t\\t\\t\\t\\tenabled: true,\\n\\t\\t\\t\\t\\t\\tqueue,\\n\\t\\t\\t\\t  }\\n\\t\\t\\t\\t: { enabled: false },\\n\\t\\t\\tshowOmnichannelQueueLink: showOmnichannelQueueLink && !!agentAvailable,\\n\\t\\t\\tlivechatPriorities,\\n\\t\\t\\tisOverMacLimit,\\n\\t\\t};\\n\\t}, [\\n\\t\\tenabled,\\n\\t\\tisPrioritiesEnabled,\\n\\t\\tpriorities,\\n\\t\\tisLoadingPriorities,\\n\\t\\tisErrorPriorities,\\n\\t\\tmanuallySelected,\\n\\t\\tisEnterprise,\\n\\t\\tagentAvailable,\\n\\t\\tvoipCallAvailable,\\n\\t\\trouteConfig,\\n\\t\\tqueue,\\n\\t\\tshowOmnichannelQueueLink,\\n\\t\\tisOverMacLimit,\\n\\t]);\\n\\n\\treturn <OmnichannelContext.Provider children={children} value={contextValue} />;\\n};\\n\\nexport default memo<typeof OmnichannelProvider>(OmnichannelProvider);\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_objectSpread\",\"_toConsumableArray\",\"_slicedToArray\",\"useSafely\",\"useUser\",\"useSetting\",\"usePermission\",\"useMethod\",\"useEndpoint\",\"useStream\",\"useQuery\",\"useQueryClient\",\"React\",\"useState\",\"useEffect\",\"useMemo\",\"useCallback\",\"memo\",\"useRef\",\"LivechatInquiry\",\"initializeLivechatInquiryStream\",\"getOmniChatSortQuery\",\"KonchatNotification\",\"ClientLogger\",\"OmnichannelContext\",\"useHasLicenseModule\",\"useReactiveValue\",\"useShouldPreventAction\",\"emptyContextValue\",\"inquiries\",\"enabled\",\"isEnterprise\",\"agentAvailable\",\"showOmnichannelQueueLink\",\"isOverMacLimit\",\"livechatPriorities\",\"data\",\"isLoading\",\"isError\",\"exportDefault\",\"_ref\",\"_useSetting\",\"children\",\"omniChannelEnabled\",\"omnichannelRouting\",\"omnichannelPoolMaxIncoming\",\"omnichannelSortingMechanism\",\"loggerRef\",\"hasAccess\",\"canViewOmnichannelQueue\",\"user\",\"statusLivechat\",\"getRoutingConfig\",\"_useSafely\",\"undefined\",\"_useSafely2\",\"routeConfig\",\"setRouteConfig\",\"_useState\",\"Set\",\"_useState2\",\"queueNotification\",\"setQueueNotification\",\"accessible\",\"iceServersSetting\",\"getPriorities\",\"subscribe\",\"queryClient\",\"isPrioritiesEnabled\",\"_useQuery\",\"sort\",\"JSON\",\"stringify\",\"sortItem\",\"staleTime\",\"Infinity\",\"_useQuery$data\",\"_useQuery$data$priori\",\"priorities\",\"isLoadingPriorities\",\"isInitialLoading\",\"isErrorPriorities\",\"invalidateQueries\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"sent\",\"t0\",\"current\",\"error\",\"stop\",\"Promise\",\"manuallySelected\",\"showQueue\",\"autoAssignAgent\",\"streamNotifyUser\",\"_id\",\"queue\",\"find\",\"status\",\"limit\",\"fetch\",\"map\",\"_ref2\",\"rid\",\"has\",\"concat\",\"newRoom\",\"contextValue\",\"voipCallAvailable\",\"createElement\",\"Provider\",\"value\"],\"mappings\":\"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\"}"}