{"code":"function module(e,t,a){let l,i,n,u,o,r,d,m,p;a.link(\"react\",{default(e){l=e},lazy(e){i=e}},0),a.link(\"../../app/authorization/client\",{hasAllPermission(e){n=e}},1),a.link(\"../lib/appLayout\",{appLayout(e){u=e}},2),a.link(\"../lib/onToggledFeature\",{onToggledFeature(e){o=e}},3),a.link(\"../providers/RouterProvider\",{router(e){r=e}},4),a.link(\"../views/notAuthorized/NotAuthorizedPage\",{default(e){d=e}},5),a.link(\"../views/root/MainLayout\",{default(e){m=e}},6);let c=i(()=>a.dynamicImport(\"../views/audit/AuditPage\")),g=i(()=>a.dynamicImport(\"../views/audit/AuditLogPage\")),s=e=>{let{children:t,permission:a}=e,i=n(a);return l.createElement(l.Fragment,null,i?t:l.createElement(d,null))};o(\"auditing\",{up:()=>{p=r.defineRoutes([{path:\"/audit/:tab?\",id:\"audit-home\",element:u.wrap(l.createElement(m,null,l.createElement(s,{permission:\"can-audit\"},l.createElement(c,null))))},{path:\"/audit-log\",id:\"audit-log\",element:u.wrap(l.createElement(m,null,l.createElement(s,{permission:\"can-audit-log\"},l.createElement(g,null))))}])},down:()=>{p()}})}","map":"{\"version\":3,\"sources\":[\"client/startup/audit.tsx\",\"<anon>\"],\"sourcesContent\":[\"import React, { lazy } from 'react';\\n\\nimport { hasAllPermission } from '../../app/authorization/client';\\nimport { appLayout } from '../lib/appLayout';\\nimport { onToggledFeature } from '../lib/onToggledFeature';\\nimport { router } from '../providers/RouterProvider';\\nimport NotAuthorizedPage from '../views/notAuthorized/NotAuthorizedPage';\\nimport MainLayout from '../views/root/MainLayout';\\n\\nconst AuditPage = lazy(() => import('../views/audit/AuditPage'));\\nconst AuditLogPage = lazy(() => import('../views/audit/AuditLogPage'));\\n\\ndeclare module '@rocket.chat/ui-contexts' {\\n\\tinterface IRouterPaths {\\n\\t\\t'audit-home': {\\n\\t\\t\\tpathname: '/audit';\\n\\t\\t\\tpattern: '/audit/:tab?';\\n\\t\\t};\\n\\t\\t'audit-log': {\\n\\t\\t\\tpathname: '/audit-log';\\n\\t\\t\\tpattern: '/audit-log';\\n\\t\\t};\\n\\t}\\n}\\n\\nconst PermissionGuard = ({ children, permission }: { children: React.ReactNode; permission: string }) => {\\n\\tconst canView = hasAllPermission(permission);\\n\\n\\treturn <>{canView ? children : <NotAuthorizedPage />}</>;\\n};\\n\\nlet unregisterAuditRoutes: () => void;\\n\\nonToggledFeature('auditing', {\\n\\tup: () => {\\n\\t\\tunregisterAuditRoutes = router.defineRoutes([\\n\\t\\t\\t{\\n\\t\\t\\t\\tpath: '/audit/:tab?',\\n\\t\\t\\t\\tid: 'audit-home',\\n\\t\\t\\t\\telement: appLayout.wrap(\\n\\t\\t\\t\\t\\t<MainLayout>\\n\\t\\t\\t\\t\\t\\t<PermissionGuard permission='can-audit'>\\n\\t\\t\\t\\t\\t\\t\\t<AuditPage />\\n\\t\\t\\t\\t\\t\\t</PermissionGuard>\\n\\t\\t\\t\\t\\t</MainLayout>,\\n\\t\\t\\t\\t),\\n\\t\\t\\t},\\n\\t\\t\\t{\\n\\t\\t\\t\\tpath: '/audit-log',\\n\\t\\t\\t\\tid: 'audit-log',\\n\\t\\t\\t\\telement: appLayout.wrap(\\n\\t\\t\\t\\t\\t<MainLayout>\\n\\t\\t\\t\\t\\t\\t<PermissionGuard permission='can-audit-log'>\\n\\t\\t\\t\\t\\t\\t\\t<AuditLogPage />\\n\\t\\t\\t\\t\\t\\t</PermissionGuard>\\n\\t\\t\\t\\t\\t</MainLayout>,\\n\\t\\t\\t\\t),\\n\\t\\t\\t},\\n\\t\\t]);\\n\\t},\\n\\tdown: () => {\\n\\t\\tunregisterAuditRoutes();\\n\\t},\\n});\\n\",null],\"names\":[\"React\",\"lazy\",\"hasAllPermission\",\"appLayout\",\"onToggledFeature\",\"router\",\"NotAuthorizedPage\",\"MainLayout\",\"unregisterAuditRoutes\",\"module\",\"link\",\"default\",\"v\",\"AuditPage\",\"dynamicImport\",\"AuditLogPage\",\"PermissionGuard\",\"_ref\",\"children\",\"permission\",\"canView\",\"createElement\",\"Fragment\",\"up\",\"defineRoutes\",\"path\",\"id\",\"element\",\"wrap\",\"down\"],\"mappings\":\"2BAAAA,EAAOC,EAA6BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EA+BhCC,EA/BUC,EAAQC,IAAA,CAAA,QAAa,CAACC,QAAAC,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,KAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iCAAA,CAAAR,iBAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,mBAAA,CAAAP,UAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0BAAA,CAAAN,iBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAL,OAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAAC,QAAAC,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAC,QAAAC,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GASpC,IAAMC,EAAYZ,EAAK,IAAMQ,EAAAK,aAAA,CAAO,6BAC9BC,EAAed,EAAK,IAAMQ,EAAAK,aAAA,CAAO,gCAejCE,EAAkBC,IAAgF,GAA/E,CAAEC,SAAAA,CAAQ,CAAEC,WAAAA,CAAAA,CAA+D,CAAAF,EAC7FG,EAAUlB,EAAiBiB,GAEjC,OAAOnB,EAAAqB,aAAA,CAAArB,EAAAsB,QAAA,CAAA,KAAGF,EAAUF,EAAWlB,EAAAqB,aAAA,CAACf,EAAiB,MAClD,EAIAF,EAAiB,WAAY,CAC5BmB,GAAIA,KACHf,EAAwBH,EAAOmB,YAAY,CAAC,CAC3C,CACCC,KAAM,eACNC,GAAI,aACJC,QAASxB,EAAUyB,IAAI,CACtB5B,EAAAqB,aAAA,CAACd,EAAU,KACVP,EAAAqB,aAAA,CAACL,EAAe,CAACG,WAAW,WAAW,EACtCnB,EAAAqB,aAAA,CAACR,EAAS,UAKd,CACCY,KAAM,aACNC,GAAI,YACJC,QAASxB,EAAUyB,IAAI,CACtB5B,EAAAqB,aAAA,CAACd,EAAU,KACVP,EAAAqB,aAAA,CAACL,EAAe,CAACG,WAAW,eAAe,EAC1CnB,EAAAqB,aAAA,CAACN,EAAY,UAKjB,CACF,EACAc,KAAMA,KACLrB,GACD\"}"}