{"code":"function module(e,n,r){r.link(\"@babel/runtime/regenerator\",{default:function(e){t=e}},0),r.export({useChangeRole:function(){return c}}),r.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){a=e}},0),r.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){u=e}},1);var t,a,u,c=function(e){var n=e.onGrant,r=e.onRemove,c=e.permissionId,o=u();return a(function(e,a){return t.async(function(u){for(;;)switch(u.prev=u.next){case 0:if(u.prev=0,!a){u.next=6;break}return u.next=4,t.awrap(r(c,e));case 4:u.next=8;break;case 6:return u.next=8,t.awrap(n(c,e));case 8:return u.abrupt(\"return\",!a);case 11:u.prev=11,u.t0=u.catch(0),o({type:\"error\",message:u.t0});case 14:return u.abrupt(\"return\",a);case 15:case\"end\":return u.stop()}},null,null,[[0,11]],Promise)})}}","map":"{\"version\":3,\"sources\":[\"client/views/admin/permissions/hooks/useChangeRole.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRole, IPermission } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\n\\nexport const useChangeRole = ({\\n\\tonGrant,\\n\\tonRemove,\\n\\tpermissionId,\\n}: {\\n\\tonGrant: (permissionId: IPermission['_id'], roleId: IRole['_id']) => Promise<void>;\\n\\tonRemove: (permissionId: IPermission['_id'], roleId: IRole['_id']) => Promise<void>;\\n\\tpermissionId: IPermission['_id'];\\n}): ((roleId: IRole['_id'], granted: boolean) => Promise<boolean>) => {\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\treturn useMutableCallback(async (roleId, granted) => {\\n\\t\\ttry {\\n\\t\\t\\tif (granted) {\\n\\t\\t\\t\\tawait onRemove(permissionId, roleId);\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tawait onGrant(permissionId, roleId);\\n\\t\\t\\t}\\n\\t\\t\\treturn !granted;\\n\\t\\t} catch (error: unknown) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t\\treturn granted;\\n\\t});\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"export\",\"useChangeRole\",\"useMutableCallback\",\"useToastMessageDispatch\",\"_ref\",\"onGrant\",\"onRemove\",\"permissionId\",\"dispatchToastMessage\",\"roleId\",\"granted\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"abrupt\",\"t0\",\"type\",\"message\",\"stop\",\"Promise\"],\"mappings\":\"uBACSA,EAAoBC,IAAM,CAAA,6BAA8B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAjEH,EAAOK,MAAE,CAAA,CAAAC,cAAoB,WAAM,OAAAA,CAAA,CAAA,GAA8BN,EAAAC,IAAA,CAAA,8BAAA,CAAAM,mBAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAO,wBAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAG1D,IAHPC,EAAiEG,EAAAC,EAGpDF,EAAgB,SAAAG,CAAA,EAQwC,IAPpEC,EAAOD,EAAPC,OAAO,CACPC,EAAQF,EAARE,QAAQ,CACRC,EAAYH,EAAZG,YAAY,CAMNC,EAAuBL,IAE7B,OAAOD,EAAmB,SAAOO,CAAM,CAAEC,CAAO,EAAA,OAAAX,EAAAY,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,EAAA,CAE1CH,EAAO,CAAAE,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAE,IAAA,CAAA,EAAAf,EAAAgB,KAAA,CACJT,EAASC,EAAcE,GAAO,MAAA,EAAAG,EAAAE,IAAA,CAAA,EAAA,KAAA,MAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAAf,EAAAgB,KAAA,CAE9BV,EAAQE,EAAcE,GAAO,MAAA,EAAA,OAAAG,EAAAI,MAAA,CAAA,SAE7B,CAACN,EAAO,MAAA,GAAAE,EAAAC,IAAA,CAAA,GAAAD,EAAAK,EAAA,CAAAL,EAAA,KAAA,CAAA,GAEfJ,EAAqB,CAAEU,KAAM,QAASC,QAAOP,EAAAK,EAAAA,AAAO,EAAI,MAAA,GAAA,OAAAL,EAAAI,MAAA,CAAA,SAElDN,EAAO,MAAA,GAAA,IAAA,MAAA,OAAAE,EAAAQ,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,GAAA,CAAA,CAAAC,QAAA,EAEhB\"}"}