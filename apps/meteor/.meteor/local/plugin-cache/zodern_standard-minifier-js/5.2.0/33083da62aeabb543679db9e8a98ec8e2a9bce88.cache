{"code":"function module(e,n,t){var o,i,r,s,a,u,c,l,f,d,m;t.link(\"@babel/runtime/regenerator\",{default:function(e){o=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){i=e},useRouter:function(e){r=e},useSetModal:function(e){s=e},useToastMessageDispatch:function(e){a=e},useRouteParameter:function(e){u=e}},0),t.link(\"@tanstack/react-query\",{useMutation:function(e){c=e},useQueryClient:function(e){l=e}},1),t.link(\"react\",{default:function(e){f=e}},2),t.link(\"react-i18next\",{useTranslation:function(e){d=e}},3),t.link(\"../../../../components/GenericModal\",{default:function(e){m=e}},4),t.exportDefault(function(e,n){var t=d().t,p=s(),_=a(),k=r(),v=u(\"tab\"),M=l(),y=i(\"POST\",\"/v1/moderation.dismissReports\"),g=i(\"POST\",\"/v1/moderation.dismissUserReports\"),x=c({mutationFn:n?g:y,onError:function(e){_({type:\"error\",message:e})},onSuccess:function(){_({type:\"success\",message:t(\"Moderation_Reports_all_dismissed\")})}}),D=function(){p(f.createElement(m,{title:t(\"Moderation_Dismiss_all_reports\"),confirmText:t(\"Moderation_Dismiss_all_reports\"),variant:\"danger\",onConfirm:function(){return o.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.awrap(x.mutateAsync({userId:e}));case 2:M.invalidateQueries({queryKey:[\"moderation\",\"userReports\"]}),p(),k.navigate(\"/admin/moderation/\"+v,{replace:!0});case 5:case\"end\":return n.stop()}},null,null,null,Promise)},onCancel:function(){return p()}},t(\"Moderation_Dismiss_all_reports_confirm\")))};return{id:\"approve\",content:t(\"Moderation_Dismiss_reports\"),icon:\"circle-check\",onClick:function(){return D()}}})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/moderation/hooks/useDismissUserAction.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { GenericMenuItemProps } from '@rocket.chat/ui-client';\\nimport { useEndpoint, useRouter, useSetModal, useToastMessageDispatch, useRouteParameter } from '@rocket.chat/ui-contexts';\\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport GenericModal from '../../../../components/GenericModal';\\n\\nconst useDismissUserAction = (userId: string, isUserReport?: boolean): GenericMenuItemProps => {\\n\\tconst { t } = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst moderationRoute = useRouter();\\n\\tconst tab = useRouteParameter('tab');\\n\\tconst queryClient = useQueryClient();\\n\\n\\tconst dismissMsgReports = useEndpoint('POST', '/v1/moderation.dismissReports');\\n\\n\\tconst dismissUserReports = useEndpoint('POST', '/v1/moderation.dismissUserReports');\\n\\n\\tconst dismissUser = isUserReport ? dismissUserReports : dismissMsgReports;\\n\\n\\tconst handleDismissUser = useMutation({\\n\\t\\tmutationFn: dismissUser,\\n\\t\\tonError: (error) => {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t},\\n\\t\\tonSuccess: () => {\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Moderation_Reports_all_dismissed') });\\n\\t\\t},\\n\\t});\\n\\n\\tconst onDismissUser = async () => {\\n\\t\\tawait handleDismissUser.mutateAsync({ userId });\\n\\t\\tqueryClient.invalidateQueries({ queryKey: ['moderation', 'userReports'] });\\n\\t\\tsetModal();\\n\\t\\tmoderationRoute.navigate(`/admin/moderation/${tab}`, { replace: true });\\n\\t};\\n\\n\\tconst confirmDismissUser = (): void => {\\n\\t\\tsetModal(\\n\\t\\t\\t<GenericModal\\n\\t\\t\\t\\ttitle={t('Moderation_Dismiss_all_reports')}\\n\\t\\t\\t\\tconfirmText={t('Moderation_Dismiss_all_reports')}\\n\\t\\t\\t\\tvariant='danger'\\n\\t\\t\\t\\tonConfirm={() => onDismissUser()}\\n\\t\\t\\t\\tonCancel={() => setModal()}\\n\\t\\t\\t>\\n\\t\\t\\t\\t{t('Moderation_Dismiss_all_reports_confirm')}\\n\\t\\t\\t</GenericModal>,\\n\\t\\t);\\n\\t};\\n\\n\\treturn {\\n\\t\\tid: 'approve',\\n\\t\\tcontent: t('Moderation_Dismiss_reports'),\\n\\t\\ticon: 'circle-check',\\n\\t\\tonClick: () => confirmDismissUser(),\\n\\t};\\n};\\n\\nexport default useDismissUserAction;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"useEndpoint\",\"useRouter\",\"useSetModal\",\"useToastMessageDispatch\",\"useRouteParameter\",\"useMutation\",\"useQueryClient\",\"React\",\"useTranslation\",\"GenericModal\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"userId\",\"isUserReport\",\"t\",\"_useTranslation\",\"setModal\",\"dispatchToastMessage\",\"moderationRoute\",\"tab\",\"queryClient\",\"dismissMsgReports\",\"dismissUserReports\",\"handleDismissUser\",\"mutationFn\",\"onError\",\"error\",\"type\",\"message\",\"onSuccess\",\"confirmDismissUser\",\"createElement\",\"title\",\"confirmText\",\"variant\",\"onConfirm\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"mutateAsync\",\"invalidateQueries\",\"queryKey\",\"navigate\",\"replace\",\"stop\",\"Promise\",\"onCancel\",\"id\",\"content\",\"icon\",\"onClick\"],\"mappings\":\"uBAQA,IAPAA,EAAAC,EAASC,EAAaC,EAAWC,EAAaC,EAA6EC,EAAAC,EAAAC,EAAAC,EAAAC,EAArGC,EAASC,IAAE,CAAA,6BAAa,CAAAC,QAAyB,SAAAC,CAAA,EAAAd,EAAyBc,CAAA,CAAA,EAAA,GAAzBH,EAAAC,IAAmB,CAAA,2BAAM,CAAAX,YAA2B,SAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,UAAA,SAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,YAAA,SAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,wBAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,kBAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAN,YAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,eAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAH,eAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sCAAA,CAAA,QAAA,SAAAE,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA3HH,EAAOI,aAAa,CAOS,SAACC,CAAc,CAAEC,CAAsB,EACnE,IAAQC,EAACC,AAAKV,IAANS,CAAC,CACHE,EAAWjB,IACXkB,EAAuBjB,IACvBkB,EAAkBpB,IAClBqB,EAAMlB,EAAkB,OACxBmB,EAAcjB,IAEdkB,EAAoBxB,EAAY,OAAQ,iCAExCyB,EAAqBzB,EAAY,OAAQ,qCAIzC0B,EAAoBrB,EAAY,CACrCsB,WAHmBX,EAAeS,EAAqBD,EAIvDI,QAAS,SAACC,CAAK,EACdT,EAAqB,CAAEU,KAAM,QAASC,QAASF,CAAK,EACrD,EACAG,UAAW,WACVZ,EAAqB,CAAEU,KAAM,UAAWC,QAASd,EAAE,mCAAmC,EACvF,IAUKgB,EAAqB,WAC1Bd,EACCZ,EAAA2B,aAAA,CAACzB,EAAY,CACZ0B,MAAOlB,EAAE,kCACTmB,YAAanB,EAAE,kCACfoB,QAAQ,SACRC,UAAW,WAAA,OAbQvC,EAAAwC,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAA3C,EAAA4C,KAAA,CACfjB,EAAkBkB,WAAW,CAAC,CAAE7B,OAAAA,CAAM,GAAG,MAAA,EAC/CQ,EAAYsB,iBAAiB,CAAC,CAAEC,SAAU,CAAC,aAAc,cAAa,AAAC,GACvE3B,IACAE,EAAgB0B,QAAQ,CAAA,qBAAsBzB,EAAO,CAAE0B,QAAS,CAAA,CAAI,EAAI,MAAA,EAAA,IAAA,MAAA,OAAAR,EAAAS,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAStC,EAChCC,SAAU,WAAA,OAAMhC,GAAU,CAAC,EAE1BF,EAAE,2CAGN,EAEA,MAAO,CACNmC,GAAI,UACJC,QAASpC,EAAE,8BACXqC,KAAM,eACNC,QAAS,WAAA,OAAMtB,GAAoB,EAErC\"}"}