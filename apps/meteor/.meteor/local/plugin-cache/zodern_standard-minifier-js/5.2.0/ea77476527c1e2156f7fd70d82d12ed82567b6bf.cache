{"code":"function module(e,n,t){var a,o,c,l,r,i,u,s,f,m,h,d,b,g,p,T,x,S,k;t.link(\"@babel/runtime/helpers/extends\",{default:function(e){a=e}},0),t.link(\"@rocket.chat/fuselage\",{Box:function(e){o=e},Field:function(e){c=e},FieldLabel:function(e){l=e},FieldHint:function(e){r=e},Icon:function(e){i=e},TextInput:function(e){u=e},ToggleSwitch:function(e){s=e},Callout:function(e){f=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedCallback:function(e){m=e},useMutableCallback:function(e){h=e},useUniqueId:function(e){d=e}},1),t.link(\"react\",{default:function(e){b=e},useEffect:function(e){g=e}},2),t.link(\"react-hook-form\",{useForm:function(e){p=e},useWatch:function(e){T=e}},3),t.link(\"react-i18next\",{useTranslation:function(e){x=e}},4),t.link(\"../../../../../lib/getRoomTypeTranslation\",{getRoomTypeTranslation:function(e){S=e}},5),t.link(\"../../../contexts/RoomContext\",{useRoom:function(e){k=e}},6),t.exportDefault(function(e){var n=e.provider,t=e.onSearch,E=p({defaultValues:{searchText:\"\",globalSearch:!1}}),_=E.handleSubmit,y=E.register,v=E.setFocus,C=E.control,F=k();g(function(){v(\"searchText\")},[v]);var R=m(h(t),300),w=_(function(e){var n=e.searchText,a=e.globalSearch;R.cancel(),t({searchText:n,globalSearch:a})}),I=T({control:C,name:\"searchText\"}),M=T({control:C,name:\"globalSearch\"});g(function(){R({searchText:I,globalSearch:M})},[R,I,M]);var L=n.settings.GlobalSearchEnabled,D=d(),G=x().t;return b.createElement(o,{is:\"form\",onSubmit:w,w:\"full\"},b.createElement(c,null,b.createElement(u,a({addon:b.createElement(i,{name:\"magnifier\",size:\"x20\"}),placeholder:G(\"Search_Messages\"),\"aria-label\":G(\"Search_Messages\"),autoComplete:\"off\"},y(\"searchText\"))),n.description&&b.createElement(r,{dangerouslySetInnerHTML:{__html:G(n.description)}})),L&&b.createElement(c,null,b.createElement(l,{htmlFor:D},G(\"Global_Search\")),b.createElement(s,a({id:D},y(\"globalSearch\")))),F.encrypted&&b.createElement(f,{type:\"warning\",mbs:12,icon:\"circle-exclamation\"},b.createElement(o,{fontScale:\"p2b\"},G(\"Encrypted_RoomType\",{roomType:S(F).toLowerCase()})),G(\"Encrypted_content_cannot_be_searched\")))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/MessageSearchTab/components/MessageSearchForm.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessageSearchProvider } from '@rocket.chat/core-typings';\\nimport { Box, Field, FieldLabel, FieldHint, Icon, TextInput, ToggleSwitch, Callout } from '@rocket.chat/fuselage';\\nimport { useDebouncedCallback, useMutableCallback, useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport React, { useEffect } from 'react';\\nimport { useForm, useWatch } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { getRoomTypeTranslation } from '../../../../../lib/getRoomTypeTranslation';\\nimport { useRoom } from '../../../contexts/RoomContext';\\n\\ntype MessageSearchFormProps = {\\n\\tprovider: IMessageSearchProvider;\\n\\tonSearch: (params: { searchText: string; globalSearch: boolean }) => void;\\n};\\n\\nconst MessageSearchForm = ({ provider, onSearch }: MessageSearchFormProps) => {\\n\\tconst { handleSubmit, register, setFocus, control } = useForm({\\n\\t\\tdefaultValues: {\\n\\t\\t\\tsearchText: '',\\n\\t\\t\\tglobalSearch: false,\\n\\t\\t},\\n\\t});\\n\\n\\tconst room = useRoom();\\n\\n\\tuseEffect(() => {\\n\\t\\tsetFocus('searchText');\\n\\t}, [setFocus]);\\n\\n\\tconst debouncedOnSearch = useDebouncedCallback(useMutableCallback(onSearch), 300);\\n\\n\\tconst submitHandler = handleSubmit(({ searchText, globalSearch }) => {\\n\\t\\tdebouncedOnSearch.cancel();\\n\\t\\tonSearch({ searchText, globalSearch });\\n\\t});\\n\\n\\tconst searchText = useWatch({ control, name: 'searchText' });\\n\\tconst globalSearch = useWatch({ control, name: 'globalSearch' });\\n\\n\\tuseEffect(() => {\\n\\t\\tdebouncedOnSearch({ searchText, globalSearch });\\n\\t}, [debouncedOnSearch, searchText, globalSearch]);\\n\\n\\tconst globalSearchEnabled = provider.settings.GlobalSearchEnabled;\\n\\tconst globalSearchToggleId = useUniqueId();\\n\\n\\tconst { t } = useTranslation();\\n\\n\\treturn (\\n\\t\\t<Box is='form' onSubmit={submitHandler} w='full'>\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<TextInput\\n\\t\\t\\t\\t\\taddon={<Icon name='magnifier' size='x20' />}\\n\\t\\t\\t\\t\\tplaceholder={t('Search_Messages')}\\n\\t\\t\\t\\t\\taria-label={t('Search_Messages')}\\n\\t\\t\\t\\t\\tautoComplete='off'\\n\\t\\t\\t\\t\\t{...register('searchText')}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t\\t{provider.description && <FieldHint dangerouslySetInnerHTML={{ __html: t(provider.description as TranslationKey) }} />}\\n\\t\\t\\t</Field>\\n\\t\\t\\t{globalSearchEnabled && (\\n\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t<FieldLabel htmlFor={globalSearchToggleId}>{t('Global_Search')}</FieldLabel>\\n\\t\\t\\t\\t\\t<ToggleSwitch id={globalSearchToggleId} {...register('globalSearch')} />\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t)}\\n\\t\\t\\t{room.encrypted && (\\n\\t\\t\\t\\t<Callout type='warning' mbs={12} icon='circle-exclamation'>\\n\\t\\t\\t\\t\\t<Box fontScale='p2b'>{t('Encrypted_RoomType', { roomType: getRoomTypeTranslation(room).toLowerCase() })}</Box>\\n\\t\\t\\t\\t\\t{t('Encrypted_content_cannot_be_searched')}\\n\\t\\t\\t\\t</Callout>\\n\\t\\t\\t)}\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default MessageSearchForm;\\n\",null],\"names\":[\"_extends\",\"Box\",\"Field\",\"FieldLabel\",\"FieldHint\",\"Icon\",\"TextInput\",\"ToggleSwitch\",\"Callout\",\"useDebouncedCallback\",\"useMutableCallback\",\"useUniqueId\",\"React\",\"useEffect\",\"useForm\",\"useWatch\",\"useTranslation\",\"getRoomTypeTranslation\",\"useRoom\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"provider\",\"onSearch\",\"_useForm\",\"defaultValues\",\"searchText\",\"globalSearch\",\"handleSubmit\",\"register\",\"setFocus\",\"control\",\"room\",\"debouncedOnSearch\",\"submitHandler\",\"_ref2\",\"cancel\",\"name\",\"globalSearchEnabled\",\"settings\",\"GlobalSearchEnabled\",\"globalSearchToggleId\",\"t\",\"_useTranslation\",\"createElement\",\"is\",\"onSubmit\",\"w\",\"addon\",\"size\",\"placeholder\",\"autoComplete\",\"description\",\"dangerouslySetInnerHTML\",\"__html\",\"htmlFor\",\"id\",\"encrypted\",\"type\",\"mbs\",\"icon\",\"fontScale\",\"roomType\",\"toLowerCase\"],\"mappings\":\"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\"}"}