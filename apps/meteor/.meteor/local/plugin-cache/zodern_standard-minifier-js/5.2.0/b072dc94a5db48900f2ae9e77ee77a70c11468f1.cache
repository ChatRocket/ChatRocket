{"code":"function module(e,n,t){var l,i,o,a,u,r,c,s,m,f,d,E,k,v,C;t.link(\"@rocket.chat/fuselage\",{Button:function(e){l=e},Modal:function(e){i=e},Field:function(e){o=e},FieldGroup:function(e){a=e},FieldLabel:function(e){u=e},FieldRow:function(e){r=e},TextInput:function(e){c=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId:function(e){s=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){m=e},useEndpoint:function(e){f=e},useUser:function(e){d=e}},2),t.link(\"@tanstack/react-query\",{useMutation:function(e){E=e},useQueryClient:function(e){k=e}},3),t.link(\"react\",{default:function(e){v=e}},4),t.link(\"react-i18next\",{useTranslation:function(e){C=e}},5),t.exportDefault(function(e){var n=e.name,t=e.extension,g=e.username,p=e.onClose,x=C().t,F=m(),h=k(),b=d(),y=f(\"POST\",\"/v1/voip-freeswitch.extension.assign\"),T=s(),M=s(),Q=s(),R=E({mutationFn:function(e){return y({username:e})},onSuccess:function(){F({type:\"success\",message:x(\"Extension_removed\")}),h.invalidateQueries([\"users.list\"]),(null==b?void 0:b.username)===g&&h.invalidateQueries([\"voip-client\"]),p()},onError:function(e){F({type:\"error\",message:e}),p()}});return v.createElement(i,{\"aria-labelledby\":T},v.createElement(i.Header,null,v.createElement(i.Title,{id:T},x(\"Remove_extension\")),v.createElement(i.Close,{\"aria-label\":x(\"Close\"),onClick:p})),v.createElement(i.Content,null,v.createElement(a,null,v.createElement(o,null,v.createElement(u,{htmlFor:M},x(\"User\")),v.createElement(r,null,v.createElement(c,{disabled:!0,id:M,value:n}))),v.createElement(o,null,v.createElement(u,{htmlFor:Q},x(\"Extension\")),v.createElement(r,null,v.createElement(c,{disabled:!0,id:Q,value:t}))))),v.createElement(i.Footer,null,v.createElement(i.FooterControllers,null,v.createElement(l,{onClick:p},x(\"Cancel\")),v.createElement(l,{danger:!0,onClick:function(){return R.mutate(g)},loading:R.isLoading},x(\"Remove\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/users/voip/RemoveExtensionModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Button, Modal, Field, FieldGroup, FieldLabel, FieldRow, TextInput } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useEndpoint, useUser } from '@rocket.chat/ui-contexts';\\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\ntype RemoveExtensionModalProps = {\\n\\tname: string;\\n\\textension: string;\\n\\tusername: string;\\n\\tonClose: () => void;\\n};\\n\\nconst RemoveExtensionModal = ({ name, extension, username, onClose }: RemoveExtensionModalProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst queryClient = useQueryClient();\\n\\n\\tconst loggedUser = useUser();\\n\\n\\tconst removeExtension = useEndpoint('POST', '/v1/voip-freeswitch.extension.assign');\\n\\n\\tconst modalTitleId = useUniqueId();\\n\\tconst userFieldId = useUniqueId();\\n\\tconst freeExtensionNumberId = useUniqueId();\\n\\n\\tconst handleRemoveExtension = useMutation({\\n\\t\\tmutationFn: (username: string) => removeExtension({ username }),\\n\\t\\tonSuccess: () => {\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Extension_removed') });\\n\\n\\t\\t\\tqueryClient.invalidateQueries(['users.list']);\\n\\t\\t\\tif (loggedUser?.username === username) {\\n\\t\\t\\t\\tqueryClient.invalidateQueries(['voip-client']);\\n\\t\\t\\t}\\n\\n\\t\\t\\tonClose();\\n\\t\\t},\\n\\t\\tonError: (error) => {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\tonClose();\\n\\t\\t},\\n\\t});\\n\\n\\treturn (\\n\\t\\t<Modal aria-labelledby={modalTitleId}>\\n\\t\\t\\t<Modal.Header>\\n\\t\\t\\t\\t<Modal.Title id={modalTitleId}>{t('Remove_extension')}</Modal.Title>\\n\\t\\t\\t\\t<Modal.Close aria-label={t('Close')} onClick={onClose} />\\n\\t\\t\\t</Modal.Header>\\n\\t\\t\\t<Modal.Content>\\n\\t\\t\\t\\t<FieldGroup>\\n\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t<FieldLabel htmlFor={userFieldId}>{t('User')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<TextInput disabled id={userFieldId} value={name} />\\n\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t</Field>\\n\\n\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t<FieldLabel htmlFor={freeExtensionNumberId}>{t('Extension')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<TextInput disabled id={freeExtensionNumberId} value={extension} />\\n\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t</FieldGroup>\\n\\t\\t\\t</Modal.Content>\\n\\t\\t\\t<Modal.Footer>\\n\\t\\t\\t\\t<Modal.FooterControllers>\\n\\t\\t\\t\\t\\t<Button onClick={onClose}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button danger onClick={() => handleRemoveExtension.mutate(username)} loading={handleRemoveExtension.isLoading}>\\n\\t\\t\\t\\t\\t\\t{t('Remove')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</Modal.FooterControllers>\\n\\t\\t\\t</Modal.Footer>\\n\\t\\t</Modal>\\n\\t);\\n};\\n\\nexport default RemoveExtensionModal;\\n\",null],\"names\":[\"Button\",\"Modal\",\"Field\",\"FieldGroup\",\"FieldLabel\",\"FieldRow\",\"TextInput\",\"useUniqueId\",\"useToastMessageDispatch\",\"useEndpoint\",\"useUser\",\"useMutation\",\"useQueryClient\",\"React\",\"useTranslation\",\"module\",\"link\",\"v\",\"exportDefault\",\"_ref\",\"name\",\"extension\",\"username\",\"onClose\",\"t\",\"_useTranslation\",\"dispatchToastMessage\",\"queryClient\",\"loggedUser\",\"removeExtension\",\"modalTitleId\",\"userFieldId\",\"freeExtensionNumberId\",\"handleRemoveExtension\",\"mutationFn\",\"onSuccess\",\"type\",\"message\",\"invalidateQueries\",\"onError\",\"error\",\"createElement\",\"Header\",\"Title\",\"id\",\"Close\",\"onClick\",\"Content\",\"htmlFor\",\"disabled\",\"value\",\"Footer\",\"FooterControllers\",\"danger\",\"mutate\",\"loading\",\"isLoading\"],\"mappings\":\"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\"}"}