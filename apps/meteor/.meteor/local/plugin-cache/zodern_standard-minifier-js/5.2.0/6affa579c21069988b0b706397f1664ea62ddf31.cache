{"code":"function module(e,t,i){let o,s,n,a,c,l,u,r,d,h,A,p,k,m,g,b,C,M,f;i.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){o=e}},0),i.link(\"@rocket.chat/ui-client\",{GenericMenu(e){s=e}},0),i.link(\"@rocket.chat/ui-composer\",{MessageComposerAction(e){n=e},MessageComposerActionsDivider(e){a=e}},1),i.link(\"@rocket.chat/ui-contexts\",{useTranslation(e){c=e},useLayoutHiddenActions(e){l=e}},2),i.link(\"react\",{default(e){u=e},memo(e){r=e}},3),i.link(\"../../../../../../app/ui-utils/client\",{messageBox(e){d=e}},4),i.link(\"../../../../../../lib/isTruthy\",{isTruthy(e){h=e}},5),i.link(\"../../../../../hooks/useAppActionButtons\",{useMessageboxAppsActionButtons(e){A=e}},6),i.link(\"../../../contexts/ChatContext\",{useChat(e){p=e}},7),i.link(\"../../../contexts/RoomContext\",{useRoom(e){k=e}},8),i.link(\"./hooks/useAudioMessageAction\",{useAudioMessageAction(e){m=e}},9),i.link(\"./hooks/useCreateDiscussionAction\",{useCreateDiscussionAction(e){g=e}},10),i.link(\"./hooks/useFileUploadAction\",{useFileUploadAction(e){b=e}},11),i.link(\"./hooks/useShareLocationAction\",{useShareLocationAction(e){C=e}},12),i.link(\"./hooks/useVideoMessageAction\",{useVideoMessageAction(e){M=e}},13),i.link(\"./hooks/useWebdavActions\",{useWebdavActions(e){f=e}},14);let v=(e,t)=>!t||e.includes(t.id);i.exportDefault(r(e=>{let{canSend:t,typing:i,isRecording:r,rid:x,tmid:w,variant:D=\"large\",isMicrophoneDenied:E}=e,S=c(),y=p();if(!y)throw Error(\"useChat must be used within a ChatProvider\");let L=k(),T=m(!t||i||r||E,E),U=M(!t||i||r),B=b(!t||i||r),F=f(),j=g(L),q=C(L,w),R=A(),{composerToolbox:V}=l(),W=o(o(o(o(o(o({},!v(V,T)&&{audioMessageAction:T}),!v(V,U)&&{videoMessageAction:U}),!v(V,B)&&{fileUploadAction:B}),!v(V,j)&&{createDiscussionAction:j}),!v(V,q)&&{shareLocationAction:q}),!V.includes(\"webdav-add\")&&{webdavActions:F}),_=[],G=[],H=[];G.push(W.createDiscussionAction),\"small\"===D?(_.push(W.audioMessageAction),G.push(W.videoMessageAction,W.fileUploadAction)):_.push(W.audioMessageAction,W.videoMessageAction,W.fileUploadAction),W.webdavActions&&G.push(...W.webdavActions),H.push(W.shareLocationAction);let O=o(o({},R.isSuccess&&R.data.length>0&&{Apps:R.data}),d.actions.get()),P=Object.entries(O).map(e=>{let[t,i]=e,o=i.filter(e=>!V.includes(e.id)).map(e=>({id:e.id,icon:e.icon,content:S(e.label),onClick:t=>e.action({rid:x,tmid:w,event:t,chat:y}),gap:!e.icon}));return{title:S(t),items:o||[]}}),z=G.filter(h),I=H.filter(h),J=e=>{let{id:t,icon:i,content:o,disabled:s,onClick:a}=e;if(i)return u.createElement(n,{key:t,icon:i,\"data-qa-id\":t,title:o,disabled:s,onClick:a})};return u.createElement(u.Fragment,null,u.createElement(a,null),_.map(e=>e&&J(e)),u.createElement(s,{disabled:r,\"data-qa-id\":\"menu-more-actions\",detached:!0,icon:\"plus\",sections:[{title:S(\"Create_new\"),items:z},{title:S(\"Share\"),items:I},...P],title:S(\"More_actions\")}))}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/messageBox/MessageBoxActionsToolbar/MessageBoxActionsToolbar.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, IMessage } from '@rocket.chat/core-typings';\\nimport type { Icon } from '@rocket.chat/fuselage';\\nimport { GenericMenu } from '@rocket.chat/ui-client';\\nimport type { GenericMenuItemProps } from '@rocket.chat/ui-client';\\nimport { MessageComposerAction, MessageComposerActionsDivider } from '@rocket.chat/ui-composer';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useTranslation, useLayoutHiddenActions } from '@rocket.chat/ui-contexts';\\nimport type { ComponentProps, MouseEvent } from 'react';\\nimport React, { memo } from 'react';\\n\\nimport { messageBox } from '../../../../../../app/ui-utils/client';\\nimport { isTruthy } from '../../../../../../lib/isTruthy';\\nimport { useMessageboxAppsActionButtons } from '../../../../../hooks/useAppActionButtons';\\nimport { useChat } from '../../../contexts/ChatContext';\\nimport { useRoom } from '../../../contexts/RoomContext';\\nimport { useAudioMessageAction } from './hooks/useAudioMessageAction';\\nimport { useCreateDiscussionAction } from './hooks/useCreateDiscussionAction';\\nimport { useFileUploadAction } from './hooks/useFileUploadAction';\\nimport { useShareLocationAction } from './hooks/useShareLocationAction';\\nimport { useVideoMessageAction } from './hooks/useVideoMessageAction';\\nimport { useWebdavActions } from './hooks/useWebdavActions';\\n\\ntype MessageBoxActionsToolbarProps = {\\n\\tcanSend: boolean;\\n\\ttyping: boolean;\\n\\tisMicrophoneDenied: boolean;\\n\\tvariant: 'small' | 'large';\\n\\tisRecording: boolean;\\n\\trid: IRoom['_id'];\\n\\ttmid?: IMessage['_id'];\\n};\\n\\nconst isHidden = (hiddenActions: Array<string>, action: GenericMenuItemProps) => {\\n\\tif (!action) {\\n\\t\\treturn true;\\n\\t}\\n\\treturn hiddenActions.includes(action.id);\\n};\\n\\nconst MessageBoxActionsToolbar = ({\\n\\tcanSend,\\n\\ttyping,\\n\\tisRecording,\\n\\trid,\\n\\ttmid,\\n\\tvariant = 'large',\\n\\tisMicrophoneDenied,\\n}: MessageBoxActionsToolbarProps) => {\\n\\tconst t = useTranslation();\\n\\tconst chatContext = useChat();\\n\\n\\tif (!chatContext) {\\n\\t\\tthrow new Error('useChat must be used within a ChatProvider');\\n\\t}\\n\\n\\tconst room = useRoom();\\n\\n\\tconst audioMessageAction = useAudioMessageAction(!canSend || typing || isRecording || isMicrophoneDenied, isMicrophoneDenied);\\n\\tconst videoMessageAction = useVideoMessageAction(!canSend || typing || isRecording);\\n\\tconst fileUploadAction = useFileUploadAction(!canSend || typing || isRecording);\\n\\tconst webdavActions = useWebdavActions();\\n\\tconst createDiscussionAction = useCreateDiscussionAction(room);\\n\\tconst shareLocationAction = useShareLocationAction(room, tmid);\\n\\n\\tconst apps = useMessageboxAppsActionButtons();\\n\\tconst { composerToolbox: hiddenActions } = useLayoutHiddenActions();\\n\\n\\tconst allActions = {\\n\\t\\t...(!isHidden(hiddenActions, audioMessageAction) && { audioMessageAction }),\\n\\t\\t...(!isHidden(hiddenActions, videoMessageAction) && { videoMessageAction }),\\n\\t\\t...(!isHidden(hiddenActions, fileUploadAction) && { fileUploadAction }),\\n\\t\\t...(!isHidden(hiddenActions, createDiscussionAction) && { createDiscussionAction }),\\n\\t\\t...(!isHidden(hiddenActions, shareLocationAction) && { shareLocationAction }),\\n\\t\\t...(!hiddenActions.includes('webdav-add') && { webdavActions }),\\n\\t};\\n\\n\\tconst featured = [];\\n\\tconst createNew = [];\\n\\tconst share = [];\\n\\n\\tcreateNew.push(allActions.createDiscussionAction);\\n\\n\\tif (variant === 'small') {\\n\\t\\tfeatured.push(allActions.audioMessageAction);\\n\\t\\tcreateNew.push(allActions.videoMessageAction, allActions.fileUploadAction);\\n\\t} else {\\n\\t\\tfeatured.push(allActions.audioMessageAction, allActions.videoMessageAction, allActions.fileUploadAction);\\n\\t}\\n\\n\\tif (allActions.webdavActions) {\\n\\t\\tcreateNew.push(...allActions.webdavActions);\\n\\t}\\n\\n\\tshare.push(allActions.shareLocationAction);\\n\\n\\tconst groups = {\\n\\t\\t...(apps.isSuccess &&\\n\\t\\t\\tapps.data.length > 0 && {\\n\\t\\t\\t\\tApps: apps.data,\\n\\t\\t\\t}),\\n\\t\\t...messageBox.actions.get(),\\n\\t};\\n\\n\\tconst messageBoxActions = Object.entries(groups).map(([name, group]) => {\\n\\t\\tconst items: GenericMenuItemProps[] = group\\n\\t\\t\\t.filter((item) => !hiddenActions.includes(item.id))\\n\\t\\t\\t.map((item) => ({\\n\\t\\t\\t\\tid: item.id,\\n\\t\\t\\t\\ticon: item.icon as ComponentProps<typeof Icon>['name'],\\n\\t\\t\\t\\tcontent: t(item.label),\\n\\t\\t\\t\\tonClick: (event?: MouseEvent<HTMLElement>) =>\\n\\t\\t\\t\\t\\titem.action({\\n\\t\\t\\t\\t\\t\\trid,\\n\\t\\t\\t\\t\\t\\ttmid,\\n\\t\\t\\t\\t\\t\\tevent: event as unknown as Event,\\n\\t\\t\\t\\t\\t\\tchat: chatContext,\\n\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\tgap: Boolean(!item.icon),\\n\\t\\t\\t}));\\n\\n\\t\\treturn {\\n\\t\\t\\ttitle: t(name as TranslationKey),\\n\\t\\t\\titems: items || [],\\n\\t\\t};\\n\\t});\\n\\n\\tconst createNewFiltered = createNew.filter(isTruthy);\\n\\tconst shareFiltered = share.filter(isTruthy);\\n\\n\\tconst renderAction = ({ id, icon, content, disabled, onClick }: GenericMenuItemProps) => {\\n\\t\\tif (!icon) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\treturn <MessageComposerAction key={id} icon={icon} data-qa-id={id} title={content as string} disabled={disabled} onClick={onClick} />;\\n\\t};\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<MessageComposerActionsDivider />\\n\\t\\t\\t{featured.map((action) => action && renderAction(action))}\\n\\t\\t\\t<GenericMenu\\n\\t\\t\\t\\tdisabled={isRecording}\\n\\t\\t\\t\\tdata-qa-id='menu-more-actions'\\n\\t\\t\\t\\tdetached\\n\\t\\t\\t\\ticon='plus'\\n\\t\\t\\t\\tsections={[{ title: t('Create_new'), items: createNewFiltered }, { title: t('Share'), items: shareFiltered }, ...messageBoxActions]}\\n\\t\\t\\t\\ttitle={t('More_actions')}\\n\\t\\t\\t/>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default memo(MessageBoxActionsToolbar);\\n\",null],\"names\":[\"_objectSpread\",\"GenericMenu\",\"MessageComposerAction\",\"MessageComposerActionsDivider\",\"useTranslation\",\"useLayoutHiddenActions\",\"React\",\"memo\",\"messageBox\",\"isTruthy\",\"useMessageboxAppsActionButtons\",\"useChat\",\"useRoom\",\"useAudioMessageAction\",\"useCreateDiscussionAction\",\"useFileUploadAction\",\"useShareLocationAction\",\"useVideoMessageAction\",\"useWebdavActions\",\"module\",\"link\",\"default\",\"v\",\"isHidden\",\"hiddenActions\",\"action\",\"includes\",\"id\",\"exportDefault\",\"_ref\",\"canSend\",\"typing\",\"isRecording\",\"rid\",\"tmid\",\"variant\",\"isMicrophoneDenied\",\"t\",\"chatContext\",\"Error\",\"room\",\"audioMessageAction\",\"videoMessageAction\",\"fileUploadAction\",\"webdavActions\",\"createDiscussionAction\",\"shareLocationAction\",\"apps\",\"composerToolbox\",\"allActions\",\"featured\",\"createNew\",\"share\",\"push\",\"groups\",\"isSuccess\",\"data\",\"length\",\"Apps\",\"actions\",\"get\",\"messageBoxActions\",\"Object\",\"entries\",\"map\",\"_ref2\",\"name\",\"group\",\"items\",\"filter\",\"item\",\"icon\",\"content\",\"label\",\"onClick\",\"event\",\"chat\",\"gap\",\"title\",\"createNewFiltered\",\"shareFiltered\",\"renderAction\",\"_ref3\",\"disabled\",\"createElement\",\"key\",\"Fragment\",\"detached\",\"sections\"],\"mappings\":\"2BAEAA,EAAAC,EAAqDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA5CC,EAAaC,IAAM,CAAA,uCAAyB,CAAAC,QAAAC,CAAA,EAAAtB,EAAAsB,CAAA,CAAA,EAAA,GAA5CH,EAAaC,IAAA,CAAM,yBAAyB,CAAAnB,YAAAqB,CAAA,EAAArB,EAAAqB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAlB,sBAAAoB,CAAA,EAAApB,EAAAoB,CAAA,EAAAnB,8BAAAmB,CAAA,EAAAnB,EAAAmB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAhB,eAAAkB,CAAA,EAAAlB,EAAAkB,CAAA,EAAAjB,uBAAAiB,CAAA,EAAAjB,EAAAiB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAhB,EAAAgB,CAAA,EAAAf,KAAAe,CAAA,EAAAf,EAAAe,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wCAAA,CAAAZ,WAAAc,CAAA,EAAAd,EAAAc,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iCAAA,CAAAX,SAAAa,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAAV,+BAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gCAAA,CAAAT,QAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gCAAA,CAAAR,QAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gCAAA,CAAAP,sBAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oCAAA,CAAAN,0BAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,IAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAL,oBAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,IAAAH,EAAAC,IAAA,CAAA,iCAAA,CAAAJ,uBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,IAAAH,EAAAC,IAAA,CAAA,gCAAA,CAAAH,sBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,IAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAF,iBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,IA8BrD,IAAMC,EAAWA,CAACC,EAA8BC,IAC/C,CAAKA,GAGED,EAAcE,QAAQ,CAACD,EAAOE,EAAE,EAlCxCR,EAAOS,aAAa,CAuJLrB,EAlHkBsB,IAQG,GARF,CACjCC,QAAAA,CAAO,CACPC,OAAAA,CAAM,CACNC,YAAAA,CAAW,CACXC,IAAAA,CAAG,CACHC,KAAAA,CAAI,CACJC,QAAAA,EAAU,OAAO,CACjBC,mBAAAA,CAAAA,CAC+B,CAAAP,EACzBQ,EAAIjC,IACJkC,EAAc3B,IAEpB,GAAI,CAAC2B,EACJ,MAAM,AAAIC,MAAM,8CAGjB,IAAMC,EAAO5B,IAEP6B,EAAqB5B,EAAsB,CAACiB,GAAWC,GAAUC,GAAeI,EAAoBA,GACpGM,EAAqBzB,EAAsB,CAACa,GAAWC,GAAUC,GACjEW,EAAmB5B,EAAoB,CAACe,GAAWC,GAAUC,GAC7DY,EAAgB1B,IAChB2B,EAAyB/B,EAA0B0B,GACnDM,EAAsB9B,EAAuBwB,EAAMN,GAEnDa,EAAOrC,IACP,CAAEsC,gBAAiBxB,CAAAA,CAAe,CAAGnB,IAErC4C,EAAUjD,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAA,CAAA,EACX,CAACuB,EAASC,EAAeiB,IAAuB,CAAEA,mBAAAA,CAAkB,GACpE,CAAClB,EAASC,EAAekB,IAAuB,CAAEA,mBAAAA,CAAkB,GACpE,CAACnB,EAASC,EAAemB,IAAqB,CAAEA,iBAAAA,CAAgB,GAChE,CAACpB,EAASC,EAAeqB,IAA2B,CAAEA,uBAAAA,CAAsB,GAC5E,CAACtB,EAASC,EAAesB,IAAwB,CAAEA,oBAAAA,CAAmB,GACtE,CAACtB,EAAcE,QAAQ,CAAC,eAAiB,CAAEkB,cAAAA,CAAa,GAGvDM,EAAW,EAAE,CACbC,EAAY,EAAE,CACdC,EAAQ,EAAE,CAEhBD,EAAUE,IAAI,CAACJ,EAAWJ,sBAAsB,EAE5CV,AAAY,UAAZA,GACHe,EAASG,IAAI,CAACJ,EAAWR,kBAAkB,EAC3CU,EAAUE,IAAI,CAACJ,EAAWP,kBAAkB,CAAEO,EAAWN,gBAAgB,GAEzEO,EAASG,IAAI,CAACJ,EAAWR,kBAAkB,CAAEQ,EAAWP,kBAAkB,CAAEO,EAAWN,gBAAgB,EAGpGM,EAAWL,aAAa,EAC3BO,EAAUE,IAAI,IAAIJ,EAAWL,aAAa,EAG3CQ,EAAMC,IAAI,CAACJ,EAAWH,mBAAmB,EAEzC,IAAMQ,EAAMtD,EAAAA,EAAA,CAAA,EACP+C,EAAKQ,SAAS,EACjBR,EAAKS,IAAI,CAACC,MAAM,CAAG,GAAK,CACvBC,KAAMX,EAAKS,IAAAA,GAEVhD,EAAWmD,OAAO,CAACC,GAAG,IAGpBC,EAAoBC,OAAOC,OAAO,CAACT,GAAQU,GAAG,CAACC,IAAkB,GAAjB,CAACC,EAAMC,EAAM,CAAAF,EAC5DG,EAAgCD,EACpCE,MAAM,CAAEC,GAAS,CAAC9C,EAAcE,QAAQ,CAAC4C,EAAK3C,EAAE,GAChDqC,GAAG,CAAEM,GAAU,CAAA,CACf3C,GAAI2C,EAAK3C,EAAE,CACX4C,KAAMD,EAAKC,IAA2C,CACtDC,QAASnC,EAAEiC,EAAKG,KAAK,EACrBC,QAAUC,GACTL,EAAK7C,MAAM,CAAC,CACXQ,IAAAA,EACAC,KAAAA,EACAyC,MAAOA,EACPC,KAAMtC,IAERuC,IAAa,CAACP,EAAKC,IAAI,IAGzB,MAAO,CACNO,MAAOzC,EAAE6B,GACTE,MAAOA,GAAS,EAAA,CAElB,GAEMW,EAAoB5B,EAAUkB,MAAM,CAAC5D,GACrCuE,EAAgB5B,EAAMiB,MAAM,CAAC5D,GAE7BwE,EAAeC,IAAmE,GAAlE,CAAEvD,GAAAA,CAAE,CAAE4C,KAAAA,CAAI,CAAEC,QAAAA,CAAO,CAAEW,SAAAA,CAAQ,CAAET,QAAAA,CAAAA,CAA+B,CAAAQ,EACnF,GAAKX,EAIL,OAAOjE,EAAA8E,aAAA,CAAClF,EAAqB,CAACmF,IAAK1D,EAAI4C,KAAMA,EAAM,aAAY5C,EAAImD,MAAON,EAAmBW,SAAUA,EAAUT,QAASA,CAAQ,EACnI,EAEA,OACCpE,EAAA8E,aAAA,CAAA9E,EAAAgF,QAAA,CAAA,KACChF,EAAA8E,aAAA,CAACjF,EAA6B,MAC7B+C,EAASc,GAAG,CAAEvC,GAAWA,GAAUwD,EAAaxD,IACjDnB,EAAA8E,aAAA,CAACnF,EAAW,CACXkF,SAAUnD,EACV,aAAW,oBACXuD,SAAQ,CAAA,EACRhB,KAAK,OACLiB,SAAU,CAAC,CAAEV,MAAOzC,EAAE,cAAe+B,MAAOW,CAAiB,EAAI,CAAED,MAAOzC,EAAE,SAAU+B,MAAOY,CAAa,KAAOnB,EAAmB,CACpIiB,MAAOzC,EAAE,eAAgB,GAI7B\"}"}