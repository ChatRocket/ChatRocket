{"code":"function module(n,e,t){t.link(\"@babel/runtime/helpers/extends\",{default:function(n){i=n}},0),t.link(\"@babel/runtime/regenerator\",{default:function(n){a=n}},1),t.export({ComposerOmnichannelInquiry:function(){return p}}),t.link(\"@rocket.chat/ui-composer\",{MessageFooterCallout:function(n){o=n},MessageFooterCalloutAction:function(n){u=n},MessageFooterCalloutContent:function(n){r=n}},0),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(n){c=n},useMethod:function(n){s=n},useToastMessageDispatch:function(n){l=n},useTranslation:function(n){f=n},useUser:function(n){d=n}},1),t.link(\"@tanstack/react-query\",{useQuery:function(n){m=n}},2),t.link(\"react\",{default:function(n){k=n},useMemo:function(n){_=n}},3),t.link(\"../../../../hooks/omnichannel/useOmnichannelAgentAvailable\",{useOmnichannelAgentAvailable:function(n){h=n}},4),t.link(\"../../contexts/RoomContext\",{useOmnichannelRoom:function(n){v=n}},5);var i,a,o,u,r,c,s,l,f,d,m,k,_,h,v,p=function(){var n=f(),e=l(),t=d(),p=h(),b=v(),g=c(\"GET\",\"/v1/livechat/inquiries.getOne\"),x=m([\"inquire\",b._id],function(){return g({roomId:b._id})}),y=s(\"livechat:takeInquiry\"),q=_(function(){return(null==t?void 0:t.status)===\"offline\"?n(\"You_cant_take_chats_offline\"):p?void 0:n(\"You_cant_take_chats_unavailable\")},[p,n,null==t?void 0:t.status]);return k.createElement(o,{\"aria-busy\":x.isLoading},k.createElement(r,null,n(\"you_are_in_preview_mode_of_incoming_livechat\")),k.createElement(u,i({},q&&{title:q},{disabled:x.isLoading||(null==t?void 0:t.status)===\"offline\"||!p,onClick:function(){return a.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(x.isSuccess){n.next=2;break}return n.abrupt(\"return\");case 2:if(x.data.inquiry){n.next=4;break}return n.abrupt(\"return\");case 4:return n.prev=4,n.next=7,a.awrap(y(x.data.inquiry._id,{clientAction:!0}));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(4),e({type:\"error\",message:n.t0});case 12:case\"end\":return n.stop()}},null,null,[[4,9]],Promise)}}),n(\"Take_it\")))}}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/ComposerOmnichannel/ComposerOmnichannelInquiry.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { MessageFooterCallout, MessageFooterCalloutAction, MessageFooterCalloutContent } from '@rocket.chat/ui-composer';\\nimport { useEndpoint, useMethod, useToastMessageDispatch, useTranslation, useUser } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React, { useMemo } from 'react';\\n\\nimport { useOmnichannelAgentAvailable } from '../../../../hooks/omnichannel/useOmnichannelAgentAvailable';\\nimport { useOmnichannelRoom } from '../../contexts/RoomContext';\\n\\nexport const ComposerOmnichannelInquiry = (): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst user = useUser();\\n\\tconst agentAvailable = useOmnichannelAgentAvailable();\\n\\tconst room = useOmnichannelRoom();\\n\\tconst getInquire = useEndpoint('GET', `/v1/livechat/inquiries.getOne`);\\n\\tconst result = useQuery(['inquire', room._id], () =>\\n\\t\\tgetInquire({\\n\\t\\t\\troomId: room._id,\\n\\t\\t}),\\n\\t);\\n\\n\\tconst takeInquiry = useMethod('livechat:takeInquiry');\\n\\n\\tconst handleTakeInquiry = async (): Promise<void> => {\\n\\t\\tif (!result.isSuccess) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tif (!result.data.inquiry) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\ttry {\\n\\t\\t\\tawait takeInquiry(result.data.inquiry._id, { clientAction: true });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t};\\n\\n\\tconst title = useMemo(() => {\\n\\t\\tif (user?.status === 'offline') {\\n\\t\\t\\treturn t('You_cant_take_chats_offline');\\n\\t\\t}\\n\\n\\t\\tif (!agentAvailable) {\\n\\t\\t\\treturn t('You_cant_take_chats_unavailable');\\n\\t\\t}\\n\\t}, [agentAvailable, t, user?.status]);\\n\\n\\treturn (\\n\\t\\t<MessageFooterCallout aria-busy={result.isLoading}>\\n\\t\\t\\t<MessageFooterCalloutContent>{t('you_are_in_preview_mode_of_incoming_livechat')}</MessageFooterCalloutContent>\\n\\t\\t\\t<MessageFooterCalloutAction\\n\\t\\t\\t\\t{...(title && { title })}\\n\\t\\t\\t\\tdisabled={result.isLoading || user?.status === 'offline' || !agentAvailable}\\n\\t\\t\\t\\tonClick={handleTakeInquiry}\\n\\t\\t\\t>\\n\\t\\t\\t\\t{t('Take_it')}\\n\\t\\t\\t</MessageFooterCalloutAction>\\n\\t\\t</MessageFooterCallout>\\n\\t);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_extends\",\"_regeneratorRuntime\",\"export\",\"ComposerOmnichannelInquiry\",\"MessageFooterCallout\",\"MessageFooterCalloutAction\",\"MessageFooterCalloutContent\",\"useEndpoint\",\"useMethod\",\"useToastMessageDispatch\",\"useTranslation\",\"useUser\",\"useQuery\",\"React\",\"useMemo\",\"useOmnichannelAgentAvailable\",\"useOmnichannelRoom\",\"t\",\"dispatchToastMessage\",\"user\",\"agentAvailable\",\"room\",\"getInquire\",\"result\",\"_id\",\"roomId\",\"takeInquiry\",\"title\",\"status\",\"createElement\",\"isLoading\",\"disabled\",\"onClick\",\"async\",\"_context\",\"prev\",\"next\",\"isSuccess\",\"abrupt\",\"data\",\"inquiry\",\"awrap\",\"clientAction\",\"t0\",\"type\",\"message\",\"stop\",\"Promise\"],\"mappings\":\"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\"}"}