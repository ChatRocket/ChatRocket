{"code":"function module(n,e,t){t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(n){o=n}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(n){l=n}},1),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(n){i=n}},0),t.link(\"react\",{default:function(n){r=n},useState:function(n){u=n},useCallback:function(n){a=n},useMemo:function(n){c=n}},1),t.link(\"./LeaveTeamModalChannels\",{default:function(n){f=n}},2),t.link(\"./LeaveTeamModalConfirmation\",{default:function(n){s=n}},3);var o,l,i,r,u,a,c,f,s,m={LIST_ROOMS:\"LIST_ROOMS\",CONFIRM_LEAVE:\"CONFIRM_LEAVE\"};t.exportDefault(function(n){var e=n.rooms,t=n.onCancel,d=n.onConfirm,C=c(function(){return e},[e]),O=u(0===C.length?m.CONFIRM_LEAVE:m.LIST_ROOMS),L=l(O,2),R=L[0],E=L[1],M=u({}),_=l(M,2),h=_[0],b=_[1],g=e.filter(function(n){return n.isLastOwner}),S=a(function(){return E(m.CONFIRM_LEAVE)},[]),k=a(function(){return E(m.LIST_ROOMS)},[]),I=a(function(n){b(function(e){var t;return e[n._id]?(delete e[n._id],o({},e)):o(o({},e),{},((t={})[n._id]=n,t))})},[]),T=i(function(){b(function(n){return 0===Object.values(n).filter(Boolean).length?Object.fromEntries(e.filter(function(n){return!n.isLastOwner}).map(function(n){return[n._id,n]})):{}})});return R===m.CONFIRM_LEAVE?r.createElement(s,{selectedRooms:h,onConfirm:d,onClose:t,onCancel:e.length>0?k:void 0}):r.createElement(f,{rooms:e,onCancel:t,eligibleRoomsLength:e.length-g.length,selectedRooms:h,onToggleAllRooms:T,onConfirm:S,onChangeRoomSelection:I})})}","map":"{\"version\":3,\"sources\":[\"client/views/teams/contextualBar/info/LeaveTeam/LeaveTeamModal/LeaveTeamModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, Serialized } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport type { ReactElement } from 'react';\\nimport React, { useState, useCallback, useMemo } from 'react';\\n\\nimport LeaveTeamModalChannels from './LeaveTeamModalChannels';\\nimport LeaveTeamModalConfirmation from './LeaveTeamModalConfirmation';\\n\\nconst LEAVE_TEAM_STEPS = {\\n\\tLIST_ROOMS: 'LIST_ROOMS',\\n\\tCONFIRM_LEAVE: 'CONFIRM_LEAVE',\\n} as const;\\n\\ntype LeaveTeamModalProps = {\\n\\trooms: (Serialized<IRoom> & { isLastOwner?: boolean })[];\\n\\tonCancel: () => void;\\n\\tonConfirm: () => void;\\n};\\n\\nconst LeaveTeamModal = ({ rooms, onCancel, onConfirm }: LeaveTeamModalProps): ReactElement => {\\n\\tconst memoizedRooms = useMemo(() => rooms, [rooms]);\\n\\tconst [step, setStep] = useState(memoizedRooms.length === 0 ? LEAVE_TEAM_STEPS.CONFIRM_LEAVE : LEAVE_TEAM_STEPS.LIST_ROOMS);\\n\\n\\tconst [selectedRooms, setSelectedRooms] = useState<{ [key: string]: Serialized<IRoom> & { isLastOwner?: boolean } }>({});\\n\\tconst lastOwnerRooms = rooms.filter(({ isLastOwner }) => isLastOwner);\\n\\n\\tconst handleContinue = useCallback(() => setStep(LEAVE_TEAM_STEPS.CONFIRM_LEAVE), []);\\n\\tconst handleReturn = useCallback(() => setStep(LEAVE_TEAM_STEPS.LIST_ROOMS), []);\\n\\n\\tconst onChangeRoomSelection = useCallback((room) => {\\n\\t\\tsetSelectedRooms((selectedRooms) => {\\n\\t\\t\\tif (selectedRooms[room._id]) {\\n\\t\\t\\t\\tdelete selectedRooms[room._id];\\n\\t\\t\\t\\treturn { ...selectedRooms };\\n\\t\\t\\t}\\n\\t\\t\\treturn { ...selectedRooms, [room._id]: room };\\n\\t\\t});\\n\\t}, []);\\n\\n\\tconst onToggleAllRooms = useMutableCallback(() => {\\n\\t\\tsetSelectedRooms((selectedRooms) => {\\n\\t\\t\\tif (Object.values(selectedRooms).filter(Boolean).length === 0) {\\n\\t\\t\\t\\treturn Object.fromEntries(rooms.filter(({ isLastOwner }) => !isLastOwner).map((room) => [room._id, room]));\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn {};\\n\\t\\t});\\n\\t});\\n\\n\\tif (step === LEAVE_TEAM_STEPS.CONFIRM_LEAVE) {\\n\\t\\treturn (\\n\\t\\t\\t<LeaveTeamModalConfirmation\\n\\t\\t\\t\\tselectedRooms={selectedRooms}\\n\\t\\t\\t\\tonConfirm={onConfirm}\\n\\t\\t\\t\\tonClose={onCancel}\\n\\t\\t\\t\\tonCancel={rooms.length > 0 ? handleReturn : undefined}\\n\\t\\t\\t/>\\n\\t\\t);\\n\\t}\\n\\n\\treturn (\\n\\t\\t<LeaveTeamModalChannels\\n\\t\\t\\trooms={rooms}\\n\\t\\t\\tonCancel={onCancel}\\n\\t\\t\\teligibleRoomsLength={rooms.length - lastOwnerRooms.length}\\n\\t\\t\\tselectedRooms={selectedRooms}\\n\\t\\t\\tonToggleAllRooms={onToggleAllRooms}\\n\\t\\t\\tonConfirm={handleContinue}\\n\\t\\t\\tonChangeRoomSelection={onChangeRoomSelection}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default LeaveTeamModal;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"_slicedToArray\",\"useMutableCallback\",\"React\",\"useState\",\"useCallback\",\"useMemo\",\"LeaveTeamModalChannels\",\"LeaveTeamModalConfirmation\",\"LEAVE_TEAM_STEPS\",\"LIST_ROOMS\",\"CONFIRM_LEAVE\",\"exportDefault\",\"_ref\",\"rooms\",\"onCancel\",\"onConfirm\",\"memoizedRooms\",\"_useState\",\"length\",\"_useState2\",\"step\",\"setStep\",\"_useState3\",\"_useState4\",\"selectedRooms\",\"setSelectedRooms\",\"lastOwnerRooms\",\"filter\",\"_ref2\",\"isLastOwner\",\"handleContinue\",\"handleReturn\",\"onChangeRoomSelection\",\"room\",\"_objectSpread2\",\"_id\",\"onToggleAllRooms\",\"Object\",\"values\",\"Boolean\",\"fromEntries\",\"_ref3\",\"map\",\"createElement\",\"onClose\",\"undefined\",\"eligibleRoomsLength\"],\"mappings\":\"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\"}"}