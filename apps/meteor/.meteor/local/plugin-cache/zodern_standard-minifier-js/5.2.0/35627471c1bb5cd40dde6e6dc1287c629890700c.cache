{"code":"function module(e,t,l){let a,n,o,c,r,s,i,m,u,d,h,b,f,p,g,k,E,T,x;l.link(\"@babel/runtime/helpers/extends\",{default(e){a=e}},0),l.link(\"@rocket.chat/fuselage\",{Box(e){n=e},Field(e){o=e},FieldLabel(e){c=e},FieldHint(e){r=e},Icon(e){s=e},TextInput(e){i=e},ToggleSwitch(e){m=e},Callout(e){u=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedCallback(e){d=e},useMutableCallback(e){h=e},useUniqueId(e){b=e}},1),l.link(\"react\",{default(e){f=e},useEffect(e){p=e}},2),l.link(\"react-hook-form\",{useForm(e){g=e},useWatch(e){k=e}},3),l.link(\"react-i18next\",{useTranslation(e){E=e}},4),l.link(\"../../../../../lib/getRoomTypeTranslation\",{getRoomTypeTranslation(e){T=e}},5),l.link(\"../../../contexts/RoomContext\",{useRoom(e){x=e}},6),l.exportDefault(e=>{let{provider:t,onSearch:l}=e,{handleSubmit:S,register:_,setFocus:y,control:C}=g({defaultValues:{searchText:\"\",globalSearch:!1}}),F=x();p(()=>{y(\"searchText\")},[y]);let R=d(h(l),300),w=S(e=>{let{searchText:t,globalSearch:a}=e;R.cancel(),l({searchText:t,globalSearch:a})}),I=k({control:C,name:\"searchText\"}),M=k({control:C,name:\"globalSearch\"});p(()=>{R({searchText:I,globalSearch:M})},[R,I,M]);let L=t.settings.GlobalSearchEnabled,D=b(),{t:G}=E();return f.createElement(n,{is:\"form\",onSubmit:w,w:\"full\"},f.createElement(o,null,f.createElement(i,a({addon:f.createElement(s,{name:\"magnifier\",size:\"x20\"}),placeholder:G(\"Search_Messages\"),\"aria-label\":G(\"Search_Messages\"),autoComplete:\"off\"},_(\"searchText\"))),t.description&&f.createElement(r,{dangerouslySetInnerHTML:{__html:G(t.description)}})),L&&f.createElement(o,null,f.createElement(c,{htmlFor:D},G(\"Global_Search\")),f.createElement(m,a({id:D},_(\"globalSearch\")))),F.encrypted&&f.createElement(u,{type:\"warning\",mbs:12,icon:\"circle-exclamation\"},f.createElement(n,{fontScale:\"p2b\"},G(\"Encrypted_RoomType\",{roomType:T(F).toLowerCase()})),G(\"Encrypted_content_cannot_be_searched\")))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/MessageSearchTab/components/MessageSearchForm.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessageSearchProvider } from '@rocket.chat/core-typings';\\nimport { Box, Field, FieldLabel, FieldHint, Icon, TextInput, ToggleSwitch, Callout } from '@rocket.chat/fuselage';\\nimport { useDebouncedCallback, useMutableCallback, useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport React, { useEffect } from 'react';\\nimport { useForm, useWatch } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { getRoomTypeTranslation } from '../../../../../lib/getRoomTypeTranslation';\\nimport { useRoom } from '../../../contexts/RoomContext';\\n\\ntype MessageSearchFormProps = {\\n\\tprovider: IMessageSearchProvider;\\n\\tonSearch: (params: { searchText: string; globalSearch: boolean }) => void;\\n};\\n\\nconst MessageSearchForm = ({ provider, onSearch }: MessageSearchFormProps) => {\\n\\tconst { handleSubmit, register, setFocus, control } = useForm({\\n\\t\\tdefaultValues: {\\n\\t\\t\\tsearchText: '',\\n\\t\\t\\tglobalSearch: false,\\n\\t\\t},\\n\\t});\\n\\n\\tconst room = useRoom();\\n\\n\\tuseEffect(() => {\\n\\t\\tsetFocus('searchText');\\n\\t}, [setFocus]);\\n\\n\\tconst debouncedOnSearch = useDebouncedCallback(useMutableCallback(onSearch), 300);\\n\\n\\tconst submitHandler = handleSubmit(({ searchText, globalSearch }) => {\\n\\t\\tdebouncedOnSearch.cancel();\\n\\t\\tonSearch({ searchText, globalSearch });\\n\\t});\\n\\n\\tconst searchText = useWatch({ control, name: 'searchText' });\\n\\tconst globalSearch = useWatch({ control, name: 'globalSearch' });\\n\\n\\tuseEffect(() => {\\n\\t\\tdebouncedOnSearch({ searchText, globalSearch });\\n\\t}, [debouncedOnSearch, searchText, globalSearch]);\\n\\n\\tconst globalSearchEnabled = provider.settings.GlobalSearchEnabled;\\n\\tconst globalSearchToggleId = useUniqueId();\\n\\n\\tconst { t } = useTranslation();\\n\\n\\treturn (\\n\\t\\t<Box is='form' onSubmit={submitHandler} w='full'>\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<TextInput\\n\\t\\t\\t\\t\\taddon={<Icon name='magnifier' size='x20' />}\\n\\t\\t\\t\\t\\tplaceholder={t('Search_Messages')}\\n\\t\\t\\t\\t\\taria-label={t('Search_Messages')}\\n\\t\\t\\t\\t\\tautoComplete='off'\\n\\t\\t\\t\\t\\t{...register('searchText')}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t\\t{provider.description && <FieldHint dangerouslySetInnerHTML={{ __html: t(provider.description as TranslationKey) }} />}\\n\\t\\t\\t</Field>\\n\\t\\t\\t{globalSearchEnabled && (\\n\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t<FieldLabel htmlFor={globalSearchToggleId}>{t('Global_Search')}</FieldLabel>\\n\\t\\t\\t\\t\\t<ToggleSwitch id={globalSearchToggleId} {...register('globalSearch')} />\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t)}\\n\\t\\t\\t{room.encrypted && (\\n\\t\\t\\t\\t<Callout type='warning' mbs={12} icon='circle-exclamation'>\\n\\t\\t\\t\\t\\t<Box fontScale='p2b'>{t('Encrypted_RoomType', { roomType: getRoomTypeTranslation(room).toLowerCase() })}</Box>\\n\\t\\t\\t\\t\\t{t('Encrypted_content_cannot_be_searched')}\\n\\t\\t\\t\\t</Callout>\\n\\t\\t\\t)}\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default MessageSearchForm;\\n\",null],\"names\":[\"_extends\",\"Box\",\"Field\",\"FieldLabel\",\"FieldHint\",\"Icon\",\"TextInput\",\"ToggleSwitch\",\"Callout\",\"useDebouncedCallback\",\"useMutableCallback\",\"useUniqueId\",\"React\",\"useEffect\",\"useForm\",\"useWatch\",\"useTranslation\",\"getRoomTypeTranslation\",\"useRoom\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"provider\",\"onSearch\",\"handleSubmit\",\"register\",\"setFocus\",\"control\",\"defaultValues\",\"searchText\",\"globalSearch\",\"room\",\"debouncedOnSearch\",\"submitHandler\",\"_ref2\",\"cancel\",\"name\",\"globalSearchEnabled\",\"settings\",\"GlobalSearchEnabled\",\"globalSearchToggleId\",\"t\",\"createElement\",\"is\",\"onSubmit\",\"w\",\"addon\",\"size\",\"placeholder\",\"autoComplete\",\"description\",\"dangerouslySetInnerHTML\",\"__html\",\"htmlFor\",\"id\",\"encrypted\",\"type\",\"mbs\",\"icon\",\"fontScale\",\"roomType\",\"toLowerCase\"],\"mappings\":\"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\"}"}