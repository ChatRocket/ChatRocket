{"code":"function module(s,t,o){let n;o.link(\"./OTRRoom\",{OTRRoom(s){n=s}},0),o.exportDefault(new class s{constructor(){this.instancesByRoomId=void 0,this.instancesByRoomId={}}getInstanceByRoomId(s,t){if(this.instancesByRoomId[t])return this.instancesByRoomId[t];let o=n.create(s,t);if(o)return this.instancesByRoomId[t]=o,this.instancesByRoomId[t]}closeAllInstances(){Object.values(this.instancesByRoomId).forEach(s=>{s.softReset()}),this.instancesByRoomId={}}})}","map":"{\"version\":3,\"sources\":[\"app/otr/client/OTR.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, IUser } from '@rocket.chat/core-typings';\\n\\nimport type { IOTR } from '../lib/IOTR';\\nimport { OTRRoom } from './OTRRoom';\\n\\nclass OTR implements IOTR {\\n\\tprivate instancesByRoomId: { [rid: string]: OTRRoom };\\n\\n\\tconstructor() {\\n\\t\\tthis.instancesByRoomId = {};\\n\\t}\\n\\n\\tgetInstanceByRoomId(uid: IUser['_id'], rid: IRoom['_id']): OTRRoom | undefined {\\n\\t\\tif (this.instancesByRoomId[rid]) {\\n\\t\\t\\treturn this.instancesByRoomId[rid];\\n\\t\\t}\\n\\n\\t\\tconst otrRoom = OTRRoom.create(uid, rid);\\n\\n\\t\\tif (!otrRoom) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\tthis.instancesByRoomId[rid] = otrRoom;\\n\\t\\treturn this.instancesByRoomId[rid];\\n\\t}\\n\\n\\tcloseAllInstances(): void {\\n\\t\\t// Resets state, but doesnt emit events\\n\\t\\t// Other party should receive event and fire events\\n\\t\\tObject.values(this.instancesByRoomId).forEach((instance) => {\\n\\t\\t\\tinstance.softReset();\\n\\t\\t});\\n\\n\\t\\tthis.instancesByRoomId = {};\\n\\t}\\n}\\n\\nexport default new OTR();\\n\",null],\"names\":[\"OTRRoom\",\"module\",\"link\",\"v\",\"exportDefault\",\"OTR\",\"constructor\",\"instancesByRoomId\",\"getInstanceByRoomId\",\"uid\",\"rid\",\"otrRoom\",\"create\",\"closeAllInstances\",\"Object\",\"values\",\"forEach\",\"instance\",\"softReset\"],\"mappings\":\"uBAGA,IAAAA,EAASC,EAASC,IAAA,CAAM,YAAY,CAAAF,QAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAApCF,EAAOG,aAAW,CAmCH,IAjCf,MAAMC,EAGLC,aAAA,CAAA,IAAA,CAFQC,iBAAiB,CAAA,KAAA,EAGxB,IAAI,CAACA,iBAAiB,CAAG,CAAA,CAC1B,CAEAC,oBAAoBC,CAAiB,CAAEC,CAAiB,CAAA,CACvD,GAAI,IAAI,CAACH,iBAAiB,CAACG,EAAI,CAC9B,OAAO,IAAI,CAACH,iBAAiB,CAACG,EAAI,CAGnC,IAAMC,EAAUX,EAAQY,MAAM,CAACH,EAAKC,GAEpC,GAAKC,EAKL,OADA,IAAI,CAACJ,iBAAiB,CAACG,EAAI,CAAGC,EACvB,IAAI,CAACJ,iBAAiB,CAACG,EAAI,AACnC,CAEAG,mBAAiB,CAGhBC,OAAOC,MAAM,CAAC,IAAI,CAACR,iBAAiB,EAAES,OAAO,CAAEC,IAC9CA,EAASC,SAAS,EACnB,GAEA,IAAI,CAACX,iBAAiB,CAAG,CAAA,CAC1B\"}"}