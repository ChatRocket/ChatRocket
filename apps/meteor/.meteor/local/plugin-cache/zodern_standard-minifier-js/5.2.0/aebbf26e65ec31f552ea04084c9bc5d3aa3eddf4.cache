{"code":"function module(e,t,i){let n,s,r,l,o;i.export({useUserBanners:()=>a}),i.link(\"@rocket.chat/ui-contexts\",{useUser(e){n=e}},0),i.link(\"react\",{useEffect(e){s=e}},1),i.link(\"react-i18next\",{useTranslation(e){r=e}},2),i.link(\"../../../lib/banners\",{\"*\"(e){l=e}},3),i.link(\"./useDismissUserBannerMutation\",{useDismissUserBannerMutation(e){o=e}},4);let a=()=>{let e=n(),{t,i18n:i}=r(),{mutate:a}=o();s(()=>{if(!(null!=e&&e.banners)||0===Object.keys(e.banners).length)return;let n=Object.values(e.banners).filter(e=>!0!==e.read).sort((e,t)=>t.priority-e.priority)[0];n&&l.open({id:n.id,title:i.exists(n.title)?t(n.title):n.title,text:i.exists(n.text)?t(n.text,n.textArguments):n.text,modifiers:n.modifiers,action(){n.link&&window.open(n.link,\"_system\")},onClose(){a({id:n.id})}})},[a,i,t,null==e?void 0:e.banners])}}","map":"{\"version\":3,\"sources\":[\"client/views/banners/hooks/useUserBanners.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useUser } from '@rocket.chat/ui-contexts';\\nimport { useEffect } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport * as banners from '../../../lib/banners';\\nimport { useDismissUserBannerMutation } from './useDismissUserBannerMutation';\\n\\nexport const useUserBanners = () => {\\n\\tconst user = useUser();\\n\\n\\tconst { t, i18n } = useTranslation();\\n\\tconst { mutate: dismissUserBanner } = useDismissUserBannerMutation();\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!user?.banners || Object.keys(user.banners).length === 0) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst firstBanner = Object.values(user.banners)\\n\\t\\t\\t.filter((b) => b.read !== true)\\n\\t\\t\\t.sort((a, b) => b.priority - a.priority)[0];\\n\\n\\t\\tif (!firstBanner) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tbanners.open({\\n\\t\\t\\tid: firstBanner.id,\\n\\t\\t\\ttitle: i18n.exists(firstBanner.title) ? t(firstBanner.title) : firstBanner.title,\\n\\t\\t\\ttext: i18n.exists(firstBanner.text) ? t(firstBanner.text, firstBanner.textArguments) : firstBanner.text,\\n\\t\\t\\tmodifiers: firstBanner.modifiers,\\n\\t\\t\\taction() {\\n\\t\\t\\t\\tif (firstBanner.link) {\\n\\t\\t\\t\\t\\twindow.open(firstBanner.link, '_system');\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\tonClose() {\\n\\t\\t\\t\\tdismissUserBanner({ id: firstBanner.id });\\n\\t\\t\\t},\\n\\t\\t});\\n\\t}, [dismissUserBanner, i18n, t, user?.banners]);\\n};\\n\",null],\"names\":[\"useUser\",\"useEffect\",\"useTranslation\",\"banners\",\"useDismissUserBannerMutation\",\"module\",\"export\",\"useUserBanners\",\"link\",\"v\",\"user\",\"t\",\"i18n\",\"mutate\",\"dismissUserBanner\",\"Object\",\"keys\",\"length\",\"firstBanner\",\"values\",\"filter\",\"b\",\"read\",\"sort\",\"a\",\"priority\",\"open\",\"id\",\"title\",\"exists\",\"text\",\"textArguments\",\"modifiers\",\"action\",\"window\",\"onClose\"],\"mappings\":\"2BAAmDA,EAAAC,EAAAC,EAAAC,EAAAC,EAAnDC,EAAOC,MAAE,CAAA,CAAAC,eAAeA,IAAAA,CAAA,GAA2BF,EAAAG,IAAA,CAAA,2BAAA,CAAAR,QAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAP,UAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,gBAAA,CAAAN,eAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,uBAAA,CAAA,IAAAC,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,iCAAA,CAAAJ,6BAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAO5C,IAAMF,EAAiBA,KAC7B,IAAMG,EAAOV,IAEP,CAAEW,CAAC,CAAEC,KAAAA,CAAAA,CAAM,CAAGV,IACd,CAAEW,OAAQC,CAAAA,CAAmB,CAAGV,IAEtCH,EAAU,KACT,GAAI,CAACS,CAAAA,MAAAA,GAAAA,EAAMP,OAAO,AAAPA,GAAWY,AAAqC,IAArCA,OAAOC,IAAI,CAACN,EAAKP,OAAO,EAAEc,MAAM,CACrD,OAGD,IAAMC,EAAcH,OAAOI,MAAM,CAACT,EAAKP,OAAO,EAC5CiB,MAAM,CAAEC,GAAMA,AAAW,CAAA,IAAXA,EAAEC,IAAI,EACpBC,IAAI,CAAC,CAACC,EAAGH,IAAMA,EAAEI,QAAQ,CAAGD,EAAEC,QAAQ,CAAC,CAAC,EAAE,CAEvCP,GAILf,EAAQuB,IAAI,CAAC,CACZC,GAAIT,EAAYS,EAAE,CAClBC,MAAOhB,EAAKiB,MAAM,CAACX,EAAYU,KAAK,EAAIjB,EAAEO,EAAYU,KAAK,EAAIV,EAAYU,KAAK,CAChFE,KAAMlB,EAAKiB,MAAM,CAACX,EAAYY,IAAI,EAAInB,EAAEO,EAAYY,IAAI,CAAEZ,EAAYa,aAAa,EAAIb,EAAYY,IAAI,CACvGE,UAAWd,EAAYc,SAAS,CAChCC,SACKf,EAAYV,IAAI,EACnB0B,OAAOR,IAAI,CAACR,EAAYV,IAAI,CAAE,UAEhC,EACA2B,UACCrB,EAAkB,CAAEa,GAAIT,EAAYS,EAAAA,AAAE,EACvC,GAEF,EAAG,CAACb,EAAmBF,EAAMD,EAAGD,MAAAA,EAAI,KAAA,EAAJA,EAAMP,OAAO,CAAC,CAC/C\"}"}