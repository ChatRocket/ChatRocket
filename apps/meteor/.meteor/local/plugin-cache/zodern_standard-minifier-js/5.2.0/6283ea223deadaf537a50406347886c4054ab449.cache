{"code":"function module(e,t,n){n.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),n.export({useAddMatrixUsers:function(){return f}}),n.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){a=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useSetModal:function(e){s=e},useToastMessageDispatch:function(e){u=e},useEndpoint:function(e){i=e}},1),n.link(\"@tanstack/react-query\",{useMutation:function(e){c=e}},2),n.link(\"react\",{default:function(e){o=e}},3),n.link(\"./AddMatrixUsersModal\",{default:function(e){l=e}},4);var r,a,s,u,i,c,o,l,f=function(){var e=s(),t=u(),n=a(function(){return e(null)}),f=i(\"GET\",\"/v1/federation/matrixIds.verify\");return c(function(a){var s,u,i,c,d;return r.async(function(k){for(;;)switch(k.prev=k.next){case 0:if(s=a.users,u=a.handleSave,k.prev=1,i=new Map,!((c=s.filter(function(e){return e.startsWith(\"@\")})).length>0)){k.next=10;break}return k.next=7,r.awrap(f({matrixIds:c}));case 7:d=k.sent.results,i=new Map(Object.entries(d));case 10:e(o.createElement(l,{completeUserList:s,onClose:n,onSave:u,matrixIdVerifiedStatus:i})),k.next=16;break;case 13:k.prev=13,k.t0=k.catch(1),t({type:\"error\",message:k.t0});case 16:case\"end\":return k.stop()}},null,null,[[1,13]],Promise)})}}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/RoomMembers/AddUsers/AddMatrixUsers/useAddMatrixUsers.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useSetModal, useToastMessageDispatch, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useMutation } from '@tanstack/react-query';\\nimport React from 'react';\\n\\nimport AddMatrixUsersModal from './AddMatrixUsersModal';\\n\\nexport type useAddMatrixUsersProps = {\\n\\thandleSave: (args_0: any) => Promise<void>;\\n\\tusers: string[];\\n};\\n\\nexport const useAddMatrixUsers = () => {\\n\\tconst setModal = useSetModal();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst handleClose = useMutableCallback(() => setModal(null));\\n\\tconst dispatchVerifyEndpoint = useEndpoint('GET', '/v1/federation/matrixIds.verify');\\n\\n\\treturn useMutation(async ({ users, handleSave }: useAddMatrixUsersProps) => {\\n\\t\\ttry {\\n\\t\\t\\tlet matrixIdVerificationMap = new Map();\\n\\t\\t\\tconst matrixIds = users.filter((user) => user.startsWith('@'));\\n\\t\\t\\tif (matrixIds.length > 0) {\\n\\t\\t\\t\\tconst matrixIdsVerificationResponse = await dispatchVerifyEndpoint({ matrixIds });\\n\\t\\t\\t\\tconst { results: matrixIdsVerificationResults } = matrixIdsVerificationResponse;\\n\\t\\t\\t\\tmatrixIdVerificationMap = new Map(Object.entries(matrixIdsVerificationResults));\\n\\t\\t\\t}\\n\\n\\t\\t\\tsetModal(\\n\\t\\t\\t\\t<AddMatrixUsersModal\\n\\t\\t\\t\\t\\tcompleteUserList={users}\\n\\t\\t\\t\\t\\tonClose={handleClose}\\n\\t\\t\\t\\t\\tonSave={handleSave}\\n\\t\\t\\t\\t\\tmatrixIdVerifiedStatus={matrixIdVerificationMap as Map<string, string>}\\n\\t\\t\\t\\t/>,\\n\\t\\t\\t);\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error as Error });\\n\\t\\t}\\n\\t});\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"export\",\"useAddMatrixUsers\",\"useMutableCallback\",\"useSetModal\",\"useToastMessageDispatch\",\"useEndpoint\",\"useMutation\",\"React\",\"AddMatrixUsersModal\",\"setModal\",\"dispatchToastMessage\",\"handleClose\",\"dispatchVerifyEndpoint\",\"_ref\",\"users\",\"handleSave\",\"matrixIdVerificationMap\",\"matrixIds\",\"matrixIdsVerificationResults\",\"async\",\"_context\",\"prev\",\"next\",\"Map\",\"filter\",\"user\",\"startsWith\",\"length\",\"awrap\",\"matrixIdsVerificationResponse\",\"sent\",\"results\",\"Object\",\"entries\",\"createElement\",\"completeUserList\",\"onClose\",\"onSave\",\"matrixIdVerifiedStatus\",\"t0\",\"type\",\"message\",\"stop\",\"Promise\"],\"mappings\":\"uBAASA,EAAoBC,IAAM,CAAA,6BAA8B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAjEH,EAAOK,MAAE,CAAA,CAAAC,kBAAoB,WAAM,OAAAA,CAA8B,CAAA,GAAAN,EAAAC,IAAA,CAAA,8BAAA,CAAAM,mBAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAO,YAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,EAAAM,wBAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,EAAAO,YAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAU,YAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAS,EAAAT,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAA,QAAA,SAAAE,CAAA,EAAAU,EAAAV,CAAA,CAAA,EAAA,GAY1D,IAZPC,EAAiEG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAYpDP,EAAoB,WAChC,IAAMQ,EAAWN,IACXO,EAAuBN,IACvBO,EAAcT,EAAmB,WAAA,OAAMO,EAAS,KAAK,GACrDG,EAAyBP,EAAY,MAAO,mCAElD,OAAOC,EAAY,SAAAO,CAAA,EAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAnB,EAAAoB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAG6C,GAHpCR,EAAKD,EAALC,KAAK,CAAEC,EAAUF,EAAVE,UAAU,CAAAK,EAAAC,IAAA,CAAA,EAEvCL,EAA0B,IAAIO,IAC4B,CAC1DN,CAAAA,AADEA,CAAAA,EAAYH,EAAMU,MAAM,CAAC,SAACC,CAAI,EAAA,OAAKA,EAAKC,UAAU,CAAC,IAAI,EAAA,EAC/CC,MAAM,CAAG,CAAA,EAAC,CAAAP,EAAAE,IAAA,CAAA,GAAA,KAAA,CAAA,OAAAF,EAAAE,IAAA,CAAA,EAAAvB,EAAA6B,KAAA,CACqBhB,EAAuB,CAAEK,UAAAA,CAAS,GAAG,MAAA,EAChEC,EAAiCW,AADfT,EAAAU,IAAA,CAC3BC,OAAO,CACff,EAA0B,IAAIO,IAAIS,OAAOC,OAAO,CAACf,GAA+B,MAAA,GAGjFT,EACCF,EAAA2B,aAAA,CAAC1B,EAAmB,CACnB2B,iBAAkBrB,EAClBsB,QAASzB,EACT0B,OAAQtB,EACRuB,uBAAwBtB,CAA+C,IAEvEI,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,GAAAF,EAAAC,IAAA,CAAA,GAAAD,EAAAmB,EAAA,CAAAnB,EAAA,KAAA,CAAA,GAEFV,EAAqB,CAAE8B,KAAM,QAASC,QAAOrB,EAAAmB,EAAAA,AAAgB,EAAI,MAAA,GAAA,IAAA,MAAA,OAAAnB,EAAAsB,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,GAAA,CAAA,CAAAC,QAAA,EAGpE\"}"}