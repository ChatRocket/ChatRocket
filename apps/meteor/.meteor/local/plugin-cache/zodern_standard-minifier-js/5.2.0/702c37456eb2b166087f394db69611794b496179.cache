{"code":"function module(e,r,n){n.link(\"@babel/runtime/regenerator\",{default:function(e){t=e}},0),n.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){a=e}},1),n.export({normalizeDepartments:function(){return u}});var t,a,u=function(e,r,n){var u;return t.async(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(!r||\"all\"===r||e.some(function(e){return e._id===r}))){c.next=3;break}return c.abrupt(\"return\",e);case 3:return c.prev=3,c.next=6,t.awrap(n({}));case 6:return u=c.sent.department,c.abrupt(\"return\",u?[].concat(a(e),[{_id:u._id,label:u.name,value:u._id}]):e);case 11:return c.prev=11,c.t0=c.catch(3),c.abrupt(\"return\",e);case 14:case\"end\":return c.stop()}},null,null,[[3,11]],Promise)}}","map":"{\"version\":3,\"sources\":[\"client/components/Omnichannel/utils/normalizeDepartments.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { EndpointFunction } from '@rocket.chat/ui-contexts';\\n\\nimport type { DepartmentListItem } from '../Definitions/DepartmentsDefinitions';\\n\\nexport const normalizeDepartments = async (\\n\\tdepartments: DepartmentListItem[],\\n\\tselectedDepartment: string,\\n\\tgetDepartment: EndpointFunction<'GET', '/v1/livechat/department/:_id'>,\\n): Promise<DepartmentListItem[]> => {\\n\\tconst isSelectedDepartmentAlreadyOnList = () => departments.some((department) => department._id === selectedDepartment);\\n\\tif (!selectedDepartment || selectedDepartment === 'all' || isSelectedDepartmentAlreadyOnList()) {\\n\\t\\treturn departments;\\n\\t}\\n\\n\\ttry {\\n\\t\\tconst { department: missingDepartment } = await getDepartment({});\\n\\n\\t\\treturn missingDepartment\\n\\t\\t\\t? [...departments, { _id: missingDepartment._id, label: missingDepartment.name, value: missingDepartment._id }]\\n\\t\\t\\t: departments;\\n\\t} catch {\\n\\t\\treturn departments;\\n\\t}\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_toConsumableArray\",\"export\",\"normalizeDepartments\",\"departments\",\"selectedDepartment\",\"getDepartment\",\"missingDepartment\",\"async\",\"_context\",\"prev\",\"next\",\"some\",\"department\",\"_id\",\"abrupt\",\"awrap\",\"_await$getDepartment\",\"sent\",\"concat\",\"label\",\"name\",\"value\",\"t0\",\"stop\",\"Promise\"],\"mappings\":\"uBAIaA,EAAAC,IAAoB,CAAG,6BAEnC,CAAAC,QAA0B,SAC1BC,CAAA,EAAAC,EACkCD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAJnCH,EAAOM,MAAM,CAAA,CAAAC,qBAAuB,WACnC,OAAiCA,CACP,CAAA,GAFpB,IAAPH,EAImCC,EAJtBE,EAAuB,SACnCC,CAAiC,CACjCC,CAA0B,CAC1BC,CAAsE,EAAA,IAAAC,EAAA,OAAAP,EAAAQ,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAEiD,GAAA,CACnH,CAAA,CAACN,GAAsBA,AAAuB,QAAvBA,GADqBD,EAAYQ,IAAI,CAAC,SAACC,CAAU,EAAA,OAAKA,EAAWC,GAAG,GAAKT,CAAkB,EAC1B,EAAE,CAAAI,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAM,MAAA,CAAA,SACtFX,EAAW,MAAA,EAAA,OAAAK,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAAX,EAAAgB,KAAA,CAI8BV,EAAc,CAAA,GAAG,MAAA,EAA/C,OAAEC,EAAiBU,AAA4BR,EAAAS,IAAA,CAAzDL,UAAU,CAAAJ,EAAAM,MAAA,CAAA,SAEXR,EAAiB,EAAA,CAAAY,MAAA,CAAAlB,EACjBG,GAAW,CAAE,CAAEU,IAAKP,EAAkBO,GAAG,CAAEM,MAAOb,EAAkBc,IAAI,CAAEC,MAAOf,EAAkBO,GAAAA,AAAG,EAAE,EAC5GV,EAAW,MAAA,GAAA,OAAAK,EAAAC,IAAA,CAAA,GAAAD,EAAAc,EAAA,CAAAd,EAAA,KAAA,CAAA,GAAAA,EAAAM,MAAA,CAAA,SAEPX,EAAW,MAAA,GAAA,IAAA,MAAA,OAAAK,EAAAe,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,GAAA,CAAA,CAAAC,QAAA\"}"}