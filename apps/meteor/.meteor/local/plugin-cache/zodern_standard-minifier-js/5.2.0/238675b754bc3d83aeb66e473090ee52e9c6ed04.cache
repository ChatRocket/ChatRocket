{"code":"function module(e,t,n){var l,i,o,r,a,u,c,f,s,m,d,p,E,_,y,F,g,h,k,x,C;n.link(\"@babel/runtime/helpers/extends\",{default:function(e){l=e}},0),n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){i=e}},1),n.link(\"@rocket.chat/fuselage\",{Modal:function(e){o=e},Box:function(e){r=e},Field:function(e){a=e},FieldGroup:function(e){u=e},FieldLabel:function(e){c=e},FieldRow:function(e){f=e},FieldError:function(e){s=e},TextInput:function(e){m=e},Button:function(e){d=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useAutoFocus:function(e){p=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){E=e},useTranslation:function(e){_=e},useSetting:function(e){y=e}},2),n.link(\"filesize\",{default:function(e){F=e}},3),n.link(\"react\",{default:function(e){g=e},memo:function(e){h=e},useState:function(e){k=e},useEffect:function(e){x=e}},4),n.link(\"./FilePreview\",{default:function(e){C=e}},5),n.exportDefault(h(function(e){var t=e.onClose,n=e.file,h=e.fileName,v=e.fileDescription,b=e.onSubmit,T=e.invalidContentType,U=e.showDescription,D=void 0===U||U,w=k(h),z=i(w,2),S=z[0],M=z[1],A=k(v||\"\"),R=i(A,2),q=R[0],B=R[1],H=_(),N=E(),j=y(\"FileUpload_MaxFileSize\"),G=p(),I=function(e){return(e.preventDefault(),S)?j>-1&&(n.size||0)>j?(t(),N({type:\"error\",message:H(\"File_exceeds_allowed_size_of_bytes\",{size:F(j)})})):void b(S,q):N({type:\"error\",message:H(\"Required_field\",{field:H(\"Upload_file_name\")})})};return x(function(){if(T){N({type:\"error\",message:H(\"FileUpload_MediaType_NotAccepted__type__\",{type:n.type})}),t();return}0===n.size&&(N({type:\"error\",message:H(\"FileUpload_File_Empty\")}),t())},[n,N,T,H,t]),g.createElement(o,{wrapperFunction:function(e){return g.createElement(r,l({is:\"form\",onSubmit:I},e))}},g.createElement(r,{display:\"flex\",flexDirection:\"column\",height:\"100%\"},g.createElement(o.Header,null,g.createElement(o.Title,null,H(\"FileUpload\")),g.createElement(o.Close,{onClick:t})),g.createElement(o.Content,null,g.createElement(r,{display:\"flex\",maxHeight:\"x360\",w:\"full\",justifyContent:\"center\",alignContent:\"center\",mbe:16},g.createElement(C,{file:n})),g.createElement(u,null,g.createElement(a,null,g.createElement(c,null,H(\"Upload_file_name\")),g.createElement(f,null,g.createElement(m,{value:S,onChange:function(e){M(e.currentTarget.value)}})),!S&&g.createElement(s,null,H(\"Required_field\",{field:H(\"Upload_file_name\")}))),D&&g.createElement(a,null,g.createElement(c,null,H(\"Upload_file_description\")),g.createElement(f,null,g.createElement(m,{value:q,onChange:function(e){B(e.currentTarget.value)},placeholder:H(\"Description\"),ref:G}))))),g.createElement(o.Footer,null,g.createElement(o.FooterControllers,null,g.createElement(d,{secondary:!0,onClick:t},H(\"Cancel\")),g.createElement(d,{primary:!0,type:\"submit\"},H(\"Send\"))))))}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/modals/FileUploadModal/FileUploadModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Modal, Box, Field, FieldGroup, FieldLabel, FieldRow, FieldError, TextInput, Button } from '@rocket.chat/fuselage';\\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useTranslation, useSetting } from '@rocket.chat/ui-contexts';\\nimport fileSize from 'filesize';\\nimport type { ReactElement, ChangeEvent, FormEventHandler, ComponentProps } from 'react';\\nimport React, { memo, useState, useEffect } from 'react';\\n\\nimport FilePreview from './FilePreview';\\n\\ntype FileUploadModalProps = {\\n\\tonClose: () => void;\\n\\tonSubmit: (name: string, description?: string) => void;\\n\\tfile: File;\\n\\tfileName: string;\\n\\tfileDescription?: string;\\n\\tinvalidContentType: boolean;\\n\\tshowDescription?: boolean;\\n};\\n\\nconst FileUploadModal = ({\\n\\tonClose,\\n\\tfile,\\n\\tfileName,\\n\\tfileDescription,\\n\\tonSubmit,\\n\\tinvalidContentType,\\n\\tshowDescription = true,\\n}: FileUploadModalProps): ReactElement => {\\n\\tconst [name, setName] = useState<string>(fileName);\\n\\tconst [description, setDescription] = useState<string>(fileDescription || '');\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst maxFileSize = useSetting('FileUpload_MaxFileSize') as number;\\n\\n\\tconst ref = useAutoFocus<HTMLInputElement>();\\n\\n\\tconst handleName = (e: ChangeEvent<HTMLInputElement>): void => {\\n\\t\\tsetName(e.currentTarget.value);\\n\\t};\\n\\n\\tconst handleDescription = (e: ChangeEvent<HTMLInputElement>): void => {\\n\\t\\tsetDescription(e.currentTarget.value);\\n\\t};\\n\\n\\tconst handleSubmit: FormEventHandler<HTMLFormElement> = (e): void => {\\n\\t\\te.preventDefault();\\n\\t\\tif (!name) {\\n\\t\\t\\treturn dispatchToastMessage({\\n\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\tmessage: t('Required_field', { field: t('Upload_file_name') }),\\n\\t\\t\\t});\\n\\t\\t}\\n\\n\\t\\t// -1 maxFileSize means there is no limit\\n\\t\\tif (maxFileSize > -1 && (file.size || 0) > maxFileSize) {\\n\\t\\t\\tonClose();\\n\\t\\t\\treturn dispatchToastMessage({\\n\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\tmessage: t('File_exceeds_allowed_size_of_bytes', { size: fileSize(maxFileSize) }),\\n\\t\\t\\t});\\n\\t\\t}\\n\\n\\t\\tonSubmit(name, description);\\n\\t};\\n\\n\\tuseEffect(() => {\\n\\t\\tif (invalidContentType) {\\n\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\tmessage: t('FileUpload_MediaType_NotAccepted__type__', { type: file.type }),\\n\\t\\t\\t});\\n\\t\\t\\tonClose();\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (file.size === 0) {\\n\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\tmessage: t('FileUpload_File_Empty'),\\n\\t\\t\\t});\\n\\t\\t\\tonClose();\\n\\t\\t}\\n\\t}, [file, dispatchToastMessage, invalidContentType, t, onClose]);\\n\\n\\treturn (\\n\\t\\t<Modal wrapperFunction={(props: ComponentProps<typeof Box>) => <Box is='form' onSubmit={handleSubmit} {...props} />}>\\n\\t\\t\\t<Box display='flex' flexDirection='column' height='100%'>\\n\\t\\t\\t\\t<Modal.Header>\\n\\t\\t\\t\\t\\t<Modal.Title>{t('FileUpload')}</Modal.Title>\\n\\t\\t\\t\\t\\t<Modal.Close onClick={onClose} />\\n\\t\\t\\t\\t</Modal.Header>\\n\\t\\t\\t\\t<Modal.Content>\\n\\t\\t\\t\\t\\t<Box display='flex' maxHeight='x360' w='full' justifyContent='center' alignContent='center' mbe={16}>\\n\\t\\t\\t\\t\\t\\t<FilePreview file={file} />\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t<FieldGroup>\\n\\t\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t\\t<FieldLabel>{t('Upload_file_name')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t<TextInput value={name} onChange={handleName} />\\n\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t{!name && <FieldError>{t('Required_field', { field: t('Upload_file_name') })}</FieldError>}\\n\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t{showDescription && (\\n\\t\\t\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t\\t\\t<FieldLabel>{t('Upload_file_description')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<TextInput value={description} onChange={handleDescription} placeholder={t('Description')} ref={ref} />\\n\\t\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</FieldGroup>\\n\\t\\t\\t\\t</Modal.Content>\\n\\t\\t\\t\\t<Modal.Footer>\\n\\t\\t\\t\\t\\t<Modal.FooterControllers>\\n\\t\\t\\t\\t\\t\\t<Button secondary onClick={onClose}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Cancel')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t\\t<Button primary type='submit'>\\n\\t\\t\\t\\t\\t\\t\\t{t('Send')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t</Modal.FooterControllers>\\n\\t\\t\\t\\t</Modal.Footer>\\n\\t\\t\\t</Box>\\n\\t\\t</Modal>\\n\\t);\\n};\\n\\nexport default memo(FileUploadModal);\\n\",null],\"names\":[\"_extends\",\"_slicedToArray\",\"Modal\",\"Box\",\"Field\",\"FieldGroup\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"TextInput\",\"Button\",\"useAutoFocus\",\"useToastMessageDispatch\",\"useTranslation\",\"useSetting\",\"fileSize\",\"React\",\"memo\",\"useState\",\"useEffect\",\"FilePreview\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"onClose\",\"file\",\"fileName\",\"fileDescription\",\"onSubmit\",\"invalidContentType\",\"_ref$showDescription\",\"showDescription\",\"_useState\",\"_useState2\",\"name\",\"setName\",\"_useState3\",\"_useState4\",\"description\",\"setDescription\",\"t\",\"dispatchToastMessage\",\"maxFileSize\",\"ref\",\"handleSubmit\",\"e\",\"preventDefault\",\"size\",\"type\",\"message\",\"field\",\"createElement\",\"wrapperFunction\",\"props\",\"is\",\"display\",\"flexDirection\",\"height\",\"Header\",\"Title\",\"Close\",\"onClick\",\"Content\",\"maxHeight\",\"w\",\"justifyContent\",\"alignContent\",\"mbe\",\"value\",\"onChange\",\"currentTarget\",\"placeholder\",\"Footer\",\"FooterControllers\",\"secondary\",\"primary\"],\"mappings\":\"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\"}"}