{"code":"function module(n,e,o){var i,t,u,l,c,r,a,f,d,s,p,m;o.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(n){i=n}},0),o.link(\"@rocket.chat/ui-contexts\",{useCustomSound:function(n){t=n}},0),o.link(\"@rocket.chat/ui-video-conf\",{VideoConfPopupBackdrop:function(n){u=n}},1),o.link(\"react\",{default:function(n){l=n},useEffect:function(n){c=n},useMemo:function(n){r=n}},2),o.link(\"react-aria\",{FocusScope:function(n){a=n}},3),o.link(\"../../../../../contexts/VideoConfContext\",{useVideoConfIsCalling:function(n){f=n},useVideoConfIsRinging:function(n){d=n},useVideoConfIncomingCalls:function(n){s=n}},4),o.link(\"../../../../../portals/VideoConfPopupPortal\",{default:function(n){p=n}},5),o.link(\"./VideoConfPopup\",{default:function(n){m=n}},6),o.exportDefault(function(n){var e=n.children,o=t(),g=s(),C=d(),k=f(),v=r(function(){return g.filter(function(n){return!n.dismissed}).map(function(n){return{id:n.callId,rid:n.rid,isReceiving:!0}})},[g]);return c(function(){return C&&o.play(\"ringtone\",{loop:!0}),k&&o.play(\"dialtone\",{loop:!0}),function(){o.stop(\"ringtone\"),o.stop(\"dialtone\")}},[o,C,k]),l.createElement(l.Fragment,null,(e||(null==v?void 0:v.length)>0)&&l.createElement(p,null,l.createElement(a,{autoFocus:!0,contain:!0,restoreFocus:!0},l.createElement(u,null,(e?[e].concat(i(v)):v).map(function(n){var e=n.id,o=n.rid,i=n.isReceiving,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return l.createElement(m,{key:e,id:e,rid:o,isReceiving:i,isCalling:k,position:10*t})})))))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/VideoConference/VideoConfPopups/VideoConfPopups.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useCustomSound } from '@rocket.chat/ui-contexts';\\nimport { VideoConfPopupBackdrop } from '@rocket.chat/ui-video-conf';\\nimport type { ReactElement } from 'react';\\nimport React, { useEffect, useMemo } from 'react';\\nimport { FocusScope } from 'react-aria';\\n\\nimport type { VideoConfPopupPayload } from '../../../../../contexts/VideoConfContext';\\nimport { useVideoConfIsCalling, useVideoConfIsRinging, useVideoConfIncomingCalls } from '../../../../../contexts/VideoConfContext';\\nimport VideoConfPopupPortal from '../../../../../portals/VideoConfPopupPortal';\\nimport VideoConfPopup from './VideoConfPopup';\\n\\nconst VideoConfPopups = ({ children }: { children?: VideoConfPopupPayload }): ReactElement => {\\n\\tconst customSound = useCustomSound();\\n\\tconst incomingCalls = useVideoConfIncomingCalls();\\n\\tconst isRinging = useVideoConfIsRinging();\\n\\tconst isCalling = useVideoConfIsCalling();\\n\\n\\tconst popups = useMemo(\\n\\t\\t() =>\\n\\t\\t\\tincomingCalls\\n\\t\\t\\t\\t.filter((incomingCall) => !incomingCall.dismissed)\\n\\t\\t\\t\\t.map((incomingCall) => ({ id: incomingCall.callId, rid: incomingCall.rid, isReceiving: true })),\\n\\t\\t[incomingCalls],\\n\\t);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (isRinging) {\\n\\t\\t\\tcustomSound.play('ringtone', { loop: true });\\n\\t\\t}\\n\\n\\t\\tif (isCalling) {\\n\\t\\t\\tcustomSound.play('dialtone', { loop: true });\\n\\t\\t}\\n\\n\\t\\treturn (): void => {\\n\\t\\t\\tcustomSound.stop('ringtone');\\n\\t\\t\\tcustomSound.stop('dialtone');\\n\\t\\t};\\n\\t}, [customSound, isRinging, isCalling]);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t{(children || popups?.length > 0) && (\\n\\t\\t\\t\\t<VideoConfPopupPortal>\\n\\t\\t\\t\\t\\t<FocusScope autoFocus contain restoreFocus>\\n\\t\\t\\t\\t\\t\\t<VideoConfPopupBackdrop>\\n\\t\\t\\t\\t\\t\\t\\t{(children ? [children, ...popups] : popups).map(({ id, rid, isReceiving }, index = 1) => (\\n\\t\\t\\t\\t\\t\\t\\t\\t<VideoConfPopup key={id} id={id} rid={rid} isReceiving={isReceiving} isCalling={isCalling} position={index * 10} />\\n\\t\\t\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t\\t\\t</VideoConfPopupBackdrop>\\n\\t\\t\\t\\t\\t</FocusScope>\\n\\t\\t\\t\\t</VideoConfPopupPortal>\\n\\t\\t\\t)}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default VideoConfPopups;\\n\",null],\"names\":[\"_toConsumableArray\",\"useCustomSound\",\"VideoConfPopupBackdrop\",\"React\",\"useEffect\",\"useMemo\",\"FocusScope\",\"useVideoConfIsCalling\",\"useVideoConfIsRinging\",\"useVideoConfIncomingCalls\",\"VideoConfPopupPortal\",\"VideoConfPopup\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"children\",\"customSound\",\"incomingCalls\",\"isRinging\",\"isCalling\",\"popups\",\"filter\",\"incomingCall\",\"dismissed\",\"map\",\"id\",\"callId\",\"rid\",\"isReceiving\",\"play\",\"loop\",\"stop\",\"createElement\",\"Fragment\",\"length\",\"autoFocus\",\"contain\",\"restoreFocus\",\"concat\",\"_ref2\",\"index\",\"arguments\",\"undefined\",\"key\",\"position\"],\"mappings\":\"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\"}"}