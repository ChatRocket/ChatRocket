{"code":"function module(e,l,u){let n,t,r,s,a,o,i,c;u.link(\"@rocket.chat/ui-contexts\",{useUserId(e){n=e},useSetting(e){t=e}},0),u.link(\"react\",{default(e){r=e},useCallback(e){s=e}},1),u.link(\"../../../hooks/useReactiveValue\",{useReactiveValue(e){a=e}},2),u.link(\"../../../hooks/useUserInfoQuery\",{useUserInfoQuery(e){o=e}},3),u.link(\"./PasswordChangeCheck\",{default(e){i=e}},4),u.link(\"./RegisterUsername\",{default(e){c=e}},5),u.exportDefault(e=>{var l;let{children:u}=e,d=n(),{data:k,isLoading:f}=o({userId:d||\"\"}),v=null!==(l=t(\"Accounts_AllowAnonymousRead\"))&&void 0!==l&&l,m=a(s(()=>{var e;let l=!!(null!=k&&k.user),u=!!(null!=k&&null!==(e=k.user)&&void 0!==e&&e.username);return d?!l||!u:!v},[null==k?void 0:k.user,d,v]));return!f&&m?r.createElement(c,null):r.createElement(i,null,u)})}","map":"{\"version\":3,\"sources\":[\"client/views/root/MainLayout/UsernameCheck.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useUserId, useSetting } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ReactNode } from 'react';\\nimport React, { useCallback } from 'react';\\n\\nimport { useReactiveValue } from '../../../hooks/useReactiveValue';\\nimport { useUserInfoQuery } from '../../../hooks/useUserInfoQuery';\\nimport PasswordChangeCheck from './PasswordChangeCheck';\\nimport RegisterUsername from './RegisterUsername';\\n\\nconst UsernameCheck = ({ children }: { children: ReactNode }): ReactElement => {\\n\\tconst userId = useUserId();\\n\\tconst { data: userData, isLoading } = useUserInfoQuery({ userId: userId || '' });\\n\\n\\tconst allowAnonymousRead = useSetting<boolean>('Accounts_AllowAnonymousRead') ?? false;\\n\\n\\tconst shouldRegisterUsername = useReactiveValue(\\n\\t\\tuseCallback(() => {\\n\\t\\t\\tconst hasUserInCollection = !!userData?.user;\\n\\t\\t\\tconst hasUsername = !!userData?.user?.username;\\n\\n\\t\\t\\tif (!userId) {\\n\\t\\t\\t\\treturn !allowAnonymousRead;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (!hasUserInCollection) {\\n\\t\\t\\t\\treturn true;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn !hasUsername;\\n\\t\\t}, [userData?.user, userId, allowAnonymousRead]),\\n\\t);\\n\\n\\tif (!isLoading && shouldRegisterUsername) {\\n\\t\\treturn <RegisterUsername />;\\n\\t}\\n\\n\\treturn <PasswordChangeCheck>{children}</PasswordChangeCheck>;\\n};\\n\\nexport default UsernameCheck;\\n\",null],\"names\":[\"useUserId\",\"useSetting\",\"React\",\"useCallback\",\"useReactiveValue\",\"useUserInfoQuery\",\"PasswordChangeCheck\",\"RegisterUsername\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"_useSetting\",\"children\",\"userId\",\"data\",\"userData\",\"isLoading\",\"allowAnonymousRead\",\"shouldRegisterUsername\",\"_userData$user\",\"hasUserInCollection\",\"user\",\"hasUsername\",\"username\",\"createElement\"],\"mappings\":\"2BAAAA,EAASC,EAAwDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA7CC,EAAYC,IAAA,CAAA,2BAAgC,CAACT,UAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,WAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,YAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kCAAA,CAAAL,iBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kCAAA,CAAAJ,iBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wBAAA,CAAAE,QAAAD,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,qBAAA,CAAAE,QAAAD,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAAjEF,EAAOI,aAAa,CASEC,IAAwD,IAAAC,EAAA,GAAvD,CAAEC,SAAAA,CAAAA,CAAmC,CAAAF,EACrDG,EAAShB,IACT,CAAEiB,KAAMC,CAAQ,CAAEC,UAAAA,CAAAA,CAAW,CAAGd,EAAiB,CAAEW,OAAQA,GAAU,EAAE,GAEvEI,EAAkB,AAAqD,OAArDN,CAAAA,EAAGb,EAAoB,8BAA6B,GAACa,AAAA,KAAA,IAAAA,GAAAA,EAEvEO,EAAyBjB,EAC9BD,EAAY,KAAK,IAAAmB,EAChB,IAAMC,EAAsB,CAAC,CAACL,CAAAA,MAAAA,GAAAA,EAAUM,IAAI,AAAJA,EAClCC,EAAc,CAAC,CAACP,CAAAA,MAAAA,GAAQ,AAAM,OAANI,CAAAA,EAARJ,EAAUM,IAAI,AAAJA,GAAIF,AAAA,KAAA,IAAAA,GAAdA,EAAgBI,QAAQ,AAARA,SAEtC,AAAKV,GAIAO,GAIE,CAACE,EAPA,CAACL,CAQV,EAAG,CAACF,MAAAA,EAAQ,KAAA,EAARA,EAAUM,IAAI,CAAER,EAAQI,EAAmB,SAGhD,AAAI,CAACD,GAAaE,EACVnB,EAAAyB,aAAA,CAACpB,EAAgB,MAGlBL,EAAAyB,aAAA,CAACrB,EAAmB,KAAES,EAC9B\"}"}