{"code":"function module(e,t,a){let r,n,i;a.export({useClearUnreadAllMessagesMutation:()=>l}),a.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){r=e}},0),a.link(\"@tanstack/react-query\",{useMutation(e){n=e}},1),a.link(\"../../../../app/models/client\",{ChatSubscription(e){i=e}},2);let l=e=>{let t=r(\"POST\",\"/v1/subscriptions.read\");return n(async()=>{let e=i.find({open:!0},{fields:{unread:1,alert:1,rid:1,t:1,name:1,ls:1}}).map(e=>e.alert||e.unread>0?t({rid:e.rid,readThreads:!0}):Promise.resolve());await Promise.all(e)},e)}}","map":"{\"version\":3,\"sources\":[\"client/views/root/hooks/useClearUnreadAllMessagesMutation.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport type { UseMutationOptions } from '@tanstack/react-query';\\nimport { useMutation } from '@tanstack/react-query';\\n\\nimport { ChatSubscription } from '../../../../app/models/client';\\n\\nexport const useClearUnreadAllMessagesMutation = (options?: Omit<UseMutationOptions<void, unknown, void, unknown>, 'mutationFn'>) => {\\n\\tconst readSubscription = useEndpoint('POST', '/v1/subscriptions.read');\\n\\n\\treturn useMutation(async () => {\\n\\t\\tconst promises = ChatSubscription.find(\\n\\t\\t\\t{\\n\\t\\t\\t\\topen: true,\\n\\t\\t\\t},\\n\\t\\t\\t{\\n\\t\\t\\t\\tfields: {\\n\\t\\t\\t\\t\\tunread: 1,\\n\\t\\t\\t\\t\\talert: 1,\\n\\t\\t\\t\\t\\trid: 1,\\n\\t\\t\\t\\t\\tt: 1,\\n\\t\\t\\t\\t\\tname: 1,\\n\\t\\t\\t\\t\\tls: 1,\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t).map((subscription) => {\\n\\t\\t\\tif (subscription.alert || subscription.unread > 0) {\\n\\t\\t\\t\\treturn readSubscription({ rid: subscription.rid, readThreads: true });\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn Promise.resolve();\\n\\t\\t});\\n\\n\\t\\tawait Promise.all(promises);\\n\\t}, options);\\n};\\n\",null],\"names\":[\"useEndpoint\",\"useMutation\",\"ChatSubscription\",\"module\",\"export\",\"useClearUnreadAllMessagesMutation\",\"link\",\"v\",\"options\",\"readSubscription\",\"promises\",\"find\",\"open\",\"fields\",\"unread\",\"alert\",\"rid\",\"t\",\"name\",\"ls\",\"map\",\"subscription\",\"readThreads\",\"Promise\",\"resolve\",\"all\"],\"mappings\":\"2BAAuDA,EAAAC,EAAAC,EAAvDC,EAAOC,MAAE,CAAA,CAAAC,kCAAmBA,IAAAA,CAA2B,GAAAF,EAAAG,IAAA,CAAA,2BAAA,CAAAN,YAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,wBAAA,CAAAL,YAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,gCAAA,CAAAJ,iBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAMhD,IAAMF,EAAqCG,IACjD,IAAMC,EAAmBT,EAAY,OAAQ,0BAE7C,OAAOC,EAAY,UAClB,IAAMS,EAAWR,EAAiBS,IAAI,CACrC,CACCC,KAAM,CAAA,GAEP,CACCC,OAAQ,CACPC,OAAQ,EACRC,MAAO,EACPC,IAAK,EACLC,EAAG,EACHC,KAAM,EACNC,GAAI,KAGLC,GAAG,CAAEC,GACN,AAAIA,EAAaN,KAAK,EAAIM,EAAaP,MAAM,CAAG,EACxCL,EAAiB,CAAEO,IAAKK,EAAaL,GAAG,CAAEM,YAAa,CAAA,CAAI,GAG5DC,QAAQC,OAAO,GAGvB,OAAMD,QAAQE,GAAG,CAACf,EACnB,EAAGF,EACJ\"}"}