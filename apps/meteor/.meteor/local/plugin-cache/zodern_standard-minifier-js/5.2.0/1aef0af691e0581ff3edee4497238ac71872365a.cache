{"code":"function module(e,i,l){let t,s,n,o,a,r,c;l.export({usePermissionsAndRoles:()=>u}),l.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){t=e}},0),l.link(\"@rocket.chat/string-helpers\",{escapeRegExp(e){s=e}},1),l.link(\"react\",{useCallback(e){n=e}},2),l.link(\"../../../../../app/authorization/lib\",{CONSTANTS(e){o=e}},3),l.link(\"../../../../../app/models/client\",{ChatPermissions(e){a=e},Roles(e){r=e}},4),l.link(\"../../../../hooks/useReactiveValue\",{useReactiveValue(e){c=e}},5);let u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"permissions\",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,d=n(()=>{let l=RegExp(s(i),\"i\");return{level:\"permissions\"===e?{$ne:o.SETTINGS_LEVEL}:o.SETTINGS_LEVEL,_id:l}},[e,i]),h=n(()=>a.find(d(),{sort:{_id:1},skip:u,limit:l}),[l,u,d]),k=n(()=>a.find(d()).count(),[d]),p=c(h),f=c(k),g=t(()=>r.find().fetch()),E=c(g);return{permissions:p.fetch(),total:f,roleList:E,reload:g}}}","map":"{\"version\":3,\"sources\":[\"client/views/admin/permissions/hooks/usePermissionsAndRoles.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRole, IPermission } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\\nimport type { Mongo } from 'meteor/mongo';\\nimport { useCallback } from 'react';\\n\\nimport { CONSTANTS } from '../../../../../app/authorization/lib';\\nimport { ChatPermissions, Roles } from '../../../../../app/models/client';\\nimport { useReactiveValue } from '../../../../hooks/useReactiveValue';\\n\\nexport const usePermissionsAndRoles = (\\n\\ttype = 'permissions',\\n\\tfilter = '',\\n\\tlimit = 25,\\n\\tskip = 0,\\n): { permissions: IPermission[]; total: number; roleList: IRole[]; reload: () => void } => {\\n\\tconst getFilter = useCallback((): Mongo.Selector<IPermission> => {\\n\\t\\tconst filterRegExp = new RegExp(escapeRegExp(filter), 'i');\\n\\n\\t\\treturn {\\n\\t\\t\\tlevel: type === 'permissions' ? { $ne: CONSTANTS.SETTINGS_LEVEL } : CONSTANTS.SETTINGS_LEVEL,\\n\\t\\t\\t_id: filterRegExp,\\n\\t\\t};\\n\\t}, [type, filter]);\\n\\n\\tconst getPermissions = useCallback(\\n\\t\\t() =>\\n\\t\\t\\tChatPermissions.find(getFilter(), {\\n\\t\\t\\t\\tsort: {\\n\\t\\t\\t\\t\\t_id: 1,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tskip,\\n\\t\\t\\t\\tlimit,\\n\\t\\t\\t}),\\n\\t\\t[limit, skip, getFilter],\\n\\t);\\n\\tconst getTotalPermissions = useCallback(() => ChatPermissions.find(getFilter()).count(), [getFilter]);\\n\\n\\tconst permissions = useReactiveValue(getPermissions);\\n\\tconst permissionsTotal = useReactiveValue(getTotalPermissions);\\n\\tconst getRoles = useMutableCallback(() => Roles.find().fetch());\\n\\tconst roles = useReactiveValue(getRoles);\\n\\n\\treturn { permissions: permissions.fetch(), total: permissionsTotal, roleList: roles, reload: getRoles };\\n};\\n\",null],\"names\":[\"useMutableCallback\",\"escapeRegExp\",\"useCallback\",\"CONSTANTS\",\"ChatPermissions\",\"Roles\",\"useReactiveValue\",\"module\",\"export\",\"usePermissionsAndRoles\",\"link\",\"v\",\"type\",\"arguments\",\"length\",\"undefined\",\"filter\",\"limit\",\"skip\",\"getFilter\",\"filterRegExp\",\"RegExp\",\"level\",\"$ne\",\"SETTINGS_LEVEL\",\"_id\",\"getPermissions\",\"find\",\"sort\",\"getTotalPermissions\",\"count\",\"permissions\",\"permissionsTotal\",\"getRoles\",\"fetch\",\"roles\",\"total\",\"roleList\",\"reload\"],\"mappings\":\"2BACiEA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAjEC,EAAOC,MAAE,CAAA,CAAAC,uBAA0BA,IAAAA,CAA6B,GAACF,EAAAG,IAAA,CAAA,8BAAA,CAAAV,mBAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,8BAAA,CAAAT,aAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAR,YAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,uCAAA,CAAAP,UAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,mCAAA,CAAAN,gBAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,MAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,qCAAA,CAAAJ,iBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAS1D,IAAMF,EAAyB,WAKoD,IAJzFG,EAAIC,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,cACPG,EAAMH,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,GACTI,EAAKJ,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,GACRK,EAAIL,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,EAEDM,EAAYjB,EAAY,KAC7B,IAAMkB,EAAe,AAAIC,OAAOpB,EAAae,GAAS,KAEtD,MAAO,CACNM,MAAOV,AAAS,gBAATA,EAAyB,CAAEW,IAAKpB,EAAUqB,cAAAA,AAAc,EAAKrB,EAAUqB,cAAc,CAC5FC,IAAKL,EAEP,EAAG,CAACR,EAAMI,EAAO,EAEXU,EAAiBxB,EACtB,IACCE,EAAgBuB,IAAI,CAACR,IAAa,CACjCS,KAAM,CACLH,IAAK,GAENP,KAAAA,EACAD,MAAAA,IAEF,CAACA,EAAOC,EAAMC,EAAU,EAEnBU,EAAsB3B,EAAY,IAAME,EAAgBuB,IAAI,CAACR,KAAaW,KAAK,GAAI,CAACX,EAAU,EAE9FY,EAAczB,EAAiBoB,GAC/BM,EAAmB1B,EAAiBuB,GACpCI,EAAWjC,EAAmB,IAAMK,EAAMsB,IAAI,GAAGO,KAAK,IACtDC,EAAQ7B,EAAiB2B,GAE/B,MAAO,CAAEF,YAAaA,EAAYG,KAAK,GAAIE,MAAOJ,EAAkBK,SAAUF,EAAOG,OAAQL,CAAQ,CACtG\"}"}