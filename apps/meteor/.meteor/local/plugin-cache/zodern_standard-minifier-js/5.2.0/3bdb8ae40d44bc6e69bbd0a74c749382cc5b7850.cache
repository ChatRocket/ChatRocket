{"code":"function module(t,e,n){n.export({useSidebarListNavigation:function(){return o}}),n.link(\"@react-aria/focus\",{useFocusManager:function(t){r=t}},0),n.link(\"react\",{useCallback:function(t){a=t}},1);var r,a,c=function(t){return t.classList.contains(\"rcx-sidebar-v2-item\")},i=function(t){return t.classList.contains(\"rcx-sidebar-v2-item__menu\")},o=function(){var t=r();return{sidebarListRef:a(function(e){var n=null;e&&(e.addEventListener(\"keydown\",function(e){e.target&&c(e.target)&&(\"Tab\"===e.key&&(e.preventDefault(),e.stopPropagation(),e.shiftKey?t.focusPrevious({accept:function(t){return!c(t)&&!i(t)}}):i(e.target)?t.focusNext({accept:function(t){return!c(t)&&!i(t)}}):t.focusNext({accept:function(t){return!c(t)}})),(\"ArrowUp\"===e.key||\"ArrowDown\"===e.key)&&(\"ArrowUp\"===e.key&&t.focusPrevious({accept:function(t){return c(t)}}),\"ArrowDown\"===e.key&&t.focusNext({accept:function(t){return c(t)}}),n=document.activeElement))}),e.addEventListener(\"blur\",function(t){var e;null!==(e=t.relatedTarget)&&void 0!==e&&e.classList.contains(\"focus-visible\")&&t.currentTarget instanceof HTMLElement&&t.relatedTarget instanceof HTMLElement&&(t.currentTarget.contains(t.relatedTarget)||n||(n=t.target))},{capture:!0}),e.addEventListener(\"focus\",function(t){var r,a;(null===(r=t.target)||void 0===r?void 0:r.classList.contains(\"focus-visible\"))&&t.currentTarget instanceof HTMLElement&&t.relatedTarget instanceof HTMLElement&&n&&!t.currentTarget.contains(t.relatedTarget)&&e.contains(t.target)&&(null===(a=n)||void 0===a||a.focus())},{capture:!0}))},[t])}}}","map":"{\"version\":3,\"sources\":[\"client/sidebarv2/RoomList/useSidebarListNavigation.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useFocusManager } from '@react-aria/focus';\\nimport { useCallback } from 'react';\\n\\nconst isListItem = (node: EventTarget) => (node as HTMLElement).classList.contains('rcx-sidebar-v2-item');\\nconst isListItemMenu = (node: EventTarget) => (node as HTMLElement).classList.contains('rcx-sidebar-v2-item__menu');\\n\\n/**\\n * Custom hook to provide the sidebar navigation by keyboard.\\n * @param ref - A ref to the message list DOM element.\\n */\\nexport const useSidebarListNavigation = () => {\\n\\tconst sidebarListFocusManager = useFocusManager();\\n\\n\\tconst sidebarListRef = useCallback(\\n\\t\\t(node: HTMLElement | null) => {\\n\\t\\t\\tlet lastItemFocused: HTMLElement | null = null;\\n\\n\\t\\t\\tif (!node) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tnode.addEventListener('keydown', (e) => {\\n\\t\\t\\t\\tif (!e.target) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (!isListItem(e.target)) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (e.key === 'Tab') {\\n\\t\\t\\t\\t\\te.preventDefault();\\n\\t\\t\\t\\t\\te.stopPropagation();\\n\\n\\t\\t\\t\\t\\tif (e.shiftKey) {\\n\\t\\t\\t\\t\\t\\tsidebarListFocusManager.focusPrevious({\\n\\t\\t\\t\\t\\t\\t\\taccept: (node) => !isListItem(node) && !isListItemMenu(node),\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t} else if (isListItemMenu(e.target)) {\\n\\t\\t\\t\\t\\t\\tsidebarListFocusManager.focusNext({\\n\\t\\t\\t\\t\\t\\t\\taccept: (node) => !isListItem(node) && !isListItemMenu(node),\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tsidebarListFocusManager.focusNext({\\n\\t\\t\\t\\t\\t\\t\\taccept: (node) => !isListItem(node),\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (e.key === 'ArrowUp' || e.key === 'ArrowDown') {\\n\\t\\t\\t\\t\\tif (e.key === 'ArrowUp') {\\n\\t\\t\\t\\t\\t\\tsidebarListFocusManager.focusPrevious({ accept: (node) => isListItem(node) });\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tif (e.key === 'ArrowDown') {\\n\\t\\t\\t\\t\\t\\tsidebarListFocusManager.focusNext({ accept: (node) => isListItem(node) });\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tlastItemFocused = document.activeElement as HTMLElement;\\n\\t\\t\\t\\t}\\n\\t\\t\\t});\\n\\n\\t\\t\\tnode.addEventListener(\\n\\t\\t\\t\\t'blur',\\n\\t\\t\\t\\t(e) => {\\n\\t\\t\\t\\t\\tif (\\n\\t\\t\\t\\t\\t\\t!(e.relatedTarget as HTMLElement)?.classList.contains('focus-visible') ||\\n\\t\\t\\t\\t\\t\\t!(e.currentTarget instanceof HTMLElement && e.relatedTarget instanceof HTMLElement)\\n\\t\\t\\t\\t\\t) {\\n\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tif (!e.currentTarget.contains(e.relatedTarget) && !lastItemFocused) {\\n\\t\\t\\t\\t\\t\\tlastItemFocused = e.target as HTMLElement;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{ capture: true },\\n\\t\\t\\t);\\n\\n\\t\\t\\tnode.addEventListener(\\n\\t\\t\\t\\t'focus',\\n\\t\\t\\t\\t(e) => {\\n\\t\\t\\t\\t\\tconst triggeredByKeyboard = (e.target as HTMLElement)?.classList.contains('focus-visible');\\n\\t\\t\\t\\t\\tif (!triggeredByKeyboard || !(e.currentTarget instanceof HTMLElement && e.relatedTarget instanceof HTMLElement)) {\\n\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tif (lastItemFocused && !e.currentTarget.contains(e.relatedTarget) && node.contains(e.target as HTMLElement)) {\\n\\t\\t\\t\\t\\t\\tlastItemFocused?.focus();\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{ capture: true },\\n\\t\\t\\t);\\n\\t\\t},\\n\\t\\t[sidebarListFocusManager],\\n\\t);\\n\\n\\treturn { sidebarListRef };\\n};\\n\",null],\"names\":[\"module\",\"export\",\"useSidebarListNavigation\",\"link\",\"useFocusManager\",\"v\",\"useCallback\",\"isListItem\",\"node\",\"classList\",\"contains\",\"isListItemMenu\",\"sidebarListFocusManager\",\"sidebarListRef\",\"lastItemFocused\",\"addEventListener\",\"e\",\"target\",\"key\",\"preventDefault\",\"stopPropagation\",\"shiftKey\",\"focusPrevious\",\"accept\",\"focusNext\",\"document\",\"activeElement\",\"_e$relatedTarget\",\"relatedTarget\",\"currentTarget\",\"HTMLElement\",\"capture\",\"_e$target\",\"_lastItemFocused\",\"focus\"],\"mappings\":\"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\"}"}