{"code":"function module(e,t,l){let n,a,r,i,u,o,s,c,d,m,p,h;let k=[\"id\",\"type\",\"i18nLabel\",\"i18nDescription\",\"values\",\"value\",\"packageValue\"];l.link(\"@babel/runtime/helpers/extends\",{default(e){n=e}},0),l.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){a=e}},1),l.link(\"@rocket.chat/ui-contexts\",{useRouteParameter(e){r=e},useTranslation(e){i=e}},0),l.link(\"react\",{default(e){u=e},useMemo(e){o=e},useCallback(e){s=e}},1),l.link(\"react-hook-form\",{Controller(e){c=e},useFormContext(e){d=e}},2),l.link(\"../../../../../../ee/lib/misc/Utilities\",{Utilities(e){m=e}},3),l.link(\"../../../../../components/MarkdownText\",{default(e){p=e}},4),l.link(\"../../../../admin/settings/Setting/MemoizedSetting\",{default(e){h=e}},5);let f=e=>{let t=i(),l=s(function(l){if(!l)return\"\";let n=m.getI18nKeyForApp(l,e);for(var a=arguments.length,r=Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];return t.has(n)?t(n,...r):t.has(l)?t(l,...r):l},[t,e]);return Object.assign(l,{has:s(l=>!!l&&(t.has(m.getI18nKeyForApp(l,e))||t.has(l)),[t,e])})};l.exportDefault(e=>{let t,{id:l,type:i,i18nLabel:s,i18nDescription:m,values:b,value:g,packageValue:v}=e,x=a(e,k),y=r(\"id\"),C=f(y||\"\"),V=s&&C(s)||l||C(l),A=o(()=>m&&u.createElement(p,{content:C(m)}),[m,C]),{control:E}=d();return null!=b&&b.length&&(t=b.map(e=>{let{key:t,i18nLabel:l}=e;return l?{key:t,i18nLabel:C(l)}:e})),u.createElement(c,{defaultValue:g||v,name:l,control:E,render:e=>{let{field:{onChange:a,value:r}}=e;return u.createElement(h,n({packageValue:v,type:i,label:V,hint:A,_id:l},t&&{values:t},x,{onChangeValue:a,value:r}))}})})}","map":"{\"version\":3,\"sources\":[\"client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSetting.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ISettingSelectValue } from '@rocket.chat/apps-engine/definition/settings';\\nimport type { ISetting } from '@rocket.chat/apps-engine/definition/settings/ISetting';\\nimport { useRouteParameter, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useMemo, useCallback } from 'react';\\nimport { Controller, useFormContext } from 'react-hook-form';\\n\\nimport { Utilities } from '../../../../../../ee/lib/misc/Utilities';\\nimport MarkdownText from '../../../../../components/MarkdownText';\\nimport MemoizedSetting from '../../../../admin/settings/Setting/MemoizedSetting';\\n\\ntype AppTranslationFunction = {\\n\\t(key: string, ...replaces: unknown[]): string;\\n\\thas: (key: string | undefined) => boolean;\\n};\\n\\nconst useAppTranslation = (appId: string): AppTranslationFunction => {\\n\\tconst t = useTranslation();\\n\\n\\tconst tApp = useCallback(\\n\\t\\t(key: string, ...args: unknown[]) => {\\n\\t\\t\\tif (!key) {\\n\\t\\t\\t\\treturn '';\\n\\t\\t\\t}\\n\\t\\t\\tconst appKey = Utilities.getI18nKeyForApp(key, appId);\\n\\n\\t\\t\\tif (t.has(appKey)) {\\n\\t\\t\\t\\treturn t(appKey, ...args);\\n\\t\\t\\t}\\n\\t\\t\\tif (t.has(key)) {\\n\\t\\t\\t\\treturn t(key, ...args);\\n\\t\\t\\t}\\n\\t\\t\\treturn key;\\n\\t\\t},\\n\\t\\t[t, appId],\\n\\t);\\n\\n\\treturn Object.assign(tApp, {\\n\\t\\thas: useCallback(\\n\\t\\t\\t(key: string | undefined) => {\\n\\t\\t\\t\\tif (!key) {\\n\\t\\t\\t\\t\\treturn false;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn t.has(Utilities.getI18nKeyForApp(key, appId)) || t.has(key);\\n\\t\\t\\t},\\n\\t\\t\\t[t, appId],\\n\\t\\t),\\n\\t});\\n};\\n\\nconst AppSetting = ({ id, type, i18nLabel, i18nDescription, values, value, packageValue, ...props }: ISetting): ReactElement => {\\n\\tconst appId = useRouteParameter('id');\\n\\tconst tApp = useAppTranslation(appId || '');\\n\\n\\tconst label = (i18nLabel && tApp(i18nLabel)) || id || tApp(id);\\n\\tconst hint = useMemo(() => i18nDescription && <MarkdownText content={tApp(i18nDescription)} />, [i18nDescription, tApp]);\\n\\n\\tconst { control } = useFormContext();\\n\\n\\tlet translatedValues: ISettingSelectValue[];\\n\\tif (values?.length) {\\n\\t\\ttranslatedValues = values.map((selectFieldEntry) => {\\n\\t\\t\\tconst { key, i18nLabel } = selectFieldEntry;\\n\\n\\t\\t\\tif (!i18nLabel) {\\n\\t\\t\\t\\treturn selectFieldEntry;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\tkey,\\n\\t\\t\\t\\ti18nLabel: tApp(i18nLabel),\\n\\t\\t\\t};\\n\\t\\t});\\n\\t}\\n\\n\\treturn (\\n\\t\\t<Controller\\n\\t\\t\\tdefaultValue={value || packageValue}\\n\\t\\t\\tname={id}\\n\\t\\t\\tcontrol={control}\\n\\t\\t\\trender={({ field: { onChange, value } }) => (\\n\\t\\t\\t\\t<MemoizedSetting\\n\\t\\t\\t\\t\\tpackageValue={packageValue}\\n\\t\\t\\t\\t\\ttype={type}\\n\\t\\t\\t\\t\\tlabel={label}\\n\\t\\t\\t\\t\\thint={hint}\\n\\t\\t\\t\\t\\t_id={id}\\n\\t\\t\\t\\t\\t{...(translatedValues && { values: translatedValues })}\\n\\t\\t\\t\\t\\t{...props}\\n\\t\\t\\t\\t\\tonChangeValue={onChange}\\n\\t\\t\\t\\t\\tvalue={value}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default AppSetting;\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"useRouteParameter\",\"useTranslation\",\"React\",\"useMemo\",\"useCallback\",\"Controller\",\"useFormContext\",\"Utilities\",\"MarkdownText\",\"MemoizedSetting\",\"module\",\"link\",\"default\",\"v\",\"useAppTranslation\",\"appId\",\"t\",\"tApp\",\"key\",\"appKey\",\"getI18nKeyForApp\",\"_len\",\"arguments\",\"length\",\"args\",\"Array\",\"_key\",\"has\",\"Object\",\"assign\",\"exportDefault\",\"_ref\",\"translatedValues\",\"id\",\"type\",\"i18nLabel\",\"i18nDescription\",\"values\",\"value\",\"packageValue\",\"props\",\"_excluded\",\"label\",\"hint\",\"createElement\",\"content\",\"control\",\"map\",\"selectFieldEntry\",\"defaultValue\",\"name\",\"render\",\"_ref2\",\"field\",\"onChange\",\"_id\",\"onChangeValue\"],\"mappings\":\"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\"}"}