{"code":"function module(n,e,t){var o,a,r,i,u,l,c,f,s,m,k,p,d;t.link(\"@rocket.chat/fuselage\",{Box:function(n){o=n}},0),t.link(\"@rocket.chat/ui-contexts\",{useRoute:function(n){a=n},useRouteParameter:function(n){r=n},useSearchParameter:function(n){i=n},useTranslation:function(n){u=n}},1),t.link(\"react\",{default:function(n){l=n},useMemo:function(n){c=n}},2),t.link(\"../../../components/Contextualbar\",{Contextualbar:function(n){f=n}},3),t.link(\"../../../hooks/useAsyncState\",{AsyncStatePhase:function(n){s=n}},4),t.link(\"../../../hooks/useEndpointData\",{useEndpointData:function(n){m=n}},5),t.link(\"./calls/Call\",{default:function(n){k=n}},6),t.link(\"./calls/contextualBar/VoipInfo\",{VoipInfo:function(n){p=n}},7),t.link(\"./components/FormSkeleton\",{FormSkeleton:function(n){d=n}},8),t.exportDefault(function(){var n=a(\"omnichannel-directory\"),e=r(\"bar\")||\"info\",t=r(\"id\"),h=i(\"token\"),E=u(),v=c(function(){return{rid:t||\"\",token:h||\"\"}},[t,h]),x=m(\"/v1/voip/room\",{params:v}),C=x.value,S=x.phase,b=x.error;if(\"view\"===e&&t)return l.createElement(k,{rid:t});if(S===s.LOADING)return l.createElement(o,{pi:24},l.createElement(d,null));if(b||!C||!C.room)return l.createElement(o,{mbs:16},E(\"Room_not_found\"));var D=C.room;return l.createElement(f,null,\"info\"===e&&l.createElement(p,{room:D,onClickClose:function(){n.push({page:\"calls\"})}}))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/directory/CallsContextualBarDirectory.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IVoipRoom } from '@rocket.chat/core-typings';\\nimport { Box } from '@rocket.chat/fuselage';\\nimport { useRoute, useRouteParameter, useSearchParameter, useTranslation } from '@rocket.chat/ui-contexts';\\nimport React, { useMemo } from 'react';\\n\\nimport { Contextualbar } from '../../../components/Contextualbar';\\nimport { AsyncStatePhase } from '../../../hooks/useAsyncState';\\nimport { useEndpointData } from '../../../hooks/useEndpointData';\\nimport Call from './calls/Call';\\nimport { VoipInfo } from './calls/contextualBar/VoipInfo';\\nimport { FormSkeleton } from './components/FormSkeleton';\\n\\nconst CallsContextualBarDirectory = () => {\\n\\tconst directoryRoute = useRoute('omnichannel-directory');\\n\\n\\tconst bar = useRouteParameter('bar') || 'info';\\n\\tconst id = useRouteParameter('id');\\n\\tconst token = useSearchParameter('token');\\n\\n\\tconst t = useTranslation();\\n\\n\\tconst handleClose = (): void => {\\n\\t\\tdirectoryRoute.push({ page: 'calls' });\\n\\t};\\n\\n\\tconst query = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\trid: id || '',\\n\\t\\t\\ttoken: token || '',\\n\\t\\t}),\\n\\t\\t[id, token],\\n\\t);\\n\\n\\tconst { value: data, phase: state, error } = useEndpointData(`/v1/voip/room`, { params: query });\\n\\n\\tif (bar === 'view' && id) {\\n\\t\\treturn <Call rid={id} />;\\n\\t}\\n\\n\\tif (state === AsyncStatePhase.LOADING) {\\n\\t\\treturn (\\n\\t\\t\\t<Box pi={24}>\\n\\t\\t\\t\\t<FormSkeleton />\\n\\t\\t\\t</Box>\\n\\t\\t);\\n\\t}\\n\\n\\tif (error || !data || !data.room) {\\n\\t\\treturn <Box mbs={16}>{t('Room_not_found')}</Box>;\\n\\t}\\n\\n\\tconst room = data.room as unknown as IVoipRoom; // TODO Check why types are incompatible even though the endpoint returns an IVoipRooms\\n\\n\\treturn <Contextualbar>{bar === 'info' && <VoipInfo room={room} onClickClose={handleClose} />}</Contextualbar>;\\n};\\n\\nexport default CallsContextualBarDirectory;\\n\",null],\"names\":[\"Box\",\"useRoute\",\"useRouteParameter\",\"useSearchParameter\",\"useTranslation\",\"React\",\"useMemo\",\"Contextualbar\",\"AsyncStatePhase\",\"useEndpointData\",\"Call\",\"VoipInfo\",\"FormSkeleton\",\"module\",\"link\",\"v\",\"exportDefault\",\"directoryRoute\",\"bar\",\"id\",\"token\",\"t\",\"query\",\"rid\",\"_useEndpointData\",\"params\",\"data\",\"value\",\"state\",\"phase\",\"error\",\"createElement\",\"LOADING\",\"pi\",\"room\",\"mbs\",\"onClickClose\",\"push\",\"page\"],\"mappings\":\"uBAYA,IAXAA,EAA4CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAArCC,EAAOC,IAAA,CAAM,wBAAwB,CAAAd,IAAA,SAAAe,CAAA,EAAAf,EAAAe,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2BAAA,CAAAb,SAAA,SAAAc,CAAA,EAAAd,EAAAc,CAAA,EAAAb,kBAAA,SAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,mBAAA,SAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,eAAA,SAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAC,CAAA,EAAAV,EAAAU,CAAA,EAAAT,QAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,oCAAA,CAAAP,cAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,+BAAA,CAAAN,gBAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iCAAA,CAAAL,gBAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,eAAA,CAAA,QAAA,SAAAC,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iCAAA,CAAAH,SAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,4BAAA,CAAAF,aAAA,SAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAA5CF,EAAOG,aAAa,CAWgB,WACnC,IAAMC,EAAiBhB,EAAS,yBAE1BiB,EAAMhB,EAAkB,QAAU,OAClCiB,EAAKjB,EAAkB,MACvBkB,EAAQjB,EAAmB,SAE3BkB,EAAIjB,IAMJkB,EAAQhB,EACb,WAAA,MAAO,CACNiB,IAAKJ,GAAM,GACXC,MAAOA,GAAS,GAChB,EACD,CAACD,EAAIC,EAAM,EAGZI,EAA6Cf,EAAe,gBAAkB,CAAEgB,OAAQH,CAAK,GAA9EI,EAAIF,EAAXG,KAAK,CAAeC,EAAKJ,EAAZK,KAAK,CAASC,EAAKN,EAALM,KAAK,CAExC,GAAIZ,AAAQ,SAARA,GAAkBC,EACrB,OAAOd,EAAA0B,aAAA,CAACrB,EAAI,CAACa,IAAKJ,CAAG,GAGtB,GAAIS,IAAUpB,EAAgBwB,OAAO,CACpC,OACC3B,EAAA0B,aAAA,CAAC/B,EAAG,CAACiC,GAAI,EAAG,EACX5B,EAAA0B,aAAA,CAACnB,EAAY,OAKhB,GAAIkB,GAAS,CAACJ,GAAQ,CAACA,EAAKQ,IAAI,CAC/B,OAAO7B,EAAA0B,aAAA,CAAC/B,EAAG,CAACmC,IAAK,EAAG,EAAEd,EAAE,mBAGzB,IAAMa,EAAOR,EAAKQ,IAA4B,CAE9C,OAAO7B,EAAA0B,aAAA,CAACxB,EAAa,KAAEW,AAAQ,SAARA,GAAkBb,EAAA0B,aAAA,CAACpB,EAAQ,CAACuB,KAAMA,EAAME,aAhC3C,WACnBnB,EAAeoB,IAAI,CAAC,CAAEC,KAAM,OAAO,EACpC,CA8ByF,GAC1F\"}"}