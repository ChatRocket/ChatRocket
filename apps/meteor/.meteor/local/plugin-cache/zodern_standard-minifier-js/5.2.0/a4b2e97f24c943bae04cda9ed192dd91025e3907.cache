{"code":"function module(e,t,r){let n,s;r.export({useAsyncImage:()=>a}),r.link(\"react\",{useEffect(e){n=e}},0),r.link(\"../../../../../hooks/useAsyncState\",{useAsyncState(e){s=e}},1);let a=e=>{let{value:t,resolve:r,reject:a,reset:c}=s();return n(()=>{if(c(),!e)return;let t=new Image;t.addEventListener(\"load\",()=>{r(t.src)}),t.addEventListener(\"error\",e=>{a(e.error)}),t.src=e},[e,r,a,c]),t}}","map":"{\"version\":3,\"sources\":[\"client/components/message/content/location/hooks/useAsyncImage.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useEffect } from 'react';\\n\\nimport { useAsyncState } from '../../../../../hooks/useAsyncState';\\n\\nexport const useAsyncImage = (src: string | undefined): string | undefined => {\\n\\tconst { value, resolve, reject, reset } = useAsyncState<string>();\\n\\n\\tuseEffect(() => {\\n\\t\\treset();\\n\\n\\t\\tif (!src) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst image = new Image();\\n\\t\\timage.addEventListener('load', () => {\\n\\t\\t\\tresolve(image.src);\\n\\t\\t});\\n\\t\\timage.addEventListener('error', (e) => {\\n\\t\\t\\treject(e.error);\\n\\t\\t});\\n\\t\\timage.src = src;\\n\\t}, [src, resolve, reject, reset]);\\n\\n\\treturn value;\\n};\\n\",null],\"names\":[\"useEffect\",\"useAsyncState\",\"module\",\"export\",\"useAsyncImage\",\"link\",\"v\",\"src\",\"value\",\"resolve\",\"reject\",\"reset\",\"image\",\"Image\",\"addEventListener\",\"e\",\"error\"],\"mappings\":\"2BAAkCA,EAAAC,EAAlCC,EAAOC,MAAE,CAAA,CAAAC,cAAiBA,IAAOA,CAAC,GAAAF,EAAAG,IAAA,CAAA,QAAA,CAAAL,UAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,qCAAA,CAAAJ,cAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAI3B,IAAMF,EAAiBG,IAC7B,GAAM,CAAEC,MAAAA,CAAK,CAAEC,QAAAA,CAAO,CAAEC,OAAAA,CAAM,CAAEC,MAAAA,CAAAA,CAAO,CAAGV,IAmB1C,OAjBAD,EAAU,KAGT,GAFAW,IAEI,CAACJ,EACJ,OAGD,IAAMK,EAAQ,IAAIC,MAClBD,EAAME,gBAAgB,CAAC,OAAQ,KAC9BL,EAAQG,EAAML,GAAG,CAClB,GACAK,EAAME,gBAAgB,CAAC,QAAUC,IAChCL,EAAOK,EAAEC,KAAK,CACf,GACAJ,EAAML,GAAG,CAAGA,CACb,EAAG,CAACA,EAAKE,EAASC,EAAQC,EAAM,EAEzBH,CACR\"}"}