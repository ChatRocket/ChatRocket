{"code":"function module(e,t,n){let r,l,u;n.export({useSingleFileInput:()=>i}),n.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){r=e}},0),n.link(\"react\",{useRef(e){l=e},useEffect(e){u=e}},1);let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"image/*\",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"image\",i=l();u(()=>{let e=document.createElement(\"input\");return e.setAttribute(\"type\",\"file\"),e.setAttribute(\"style\",\"display: none\"),document.body.appendChild(e),i.current=e,()=>{i.current=void 0,e.remove()}},[]),u(()=>{let e=i.current;e&&e.setAttribute(\"accept\",t)},[t]),u(()=>{let t=i.current;if(!t)return;let r=()=>{var r;if(!(null!=t&&null!==(r=t.files)&&void 0!==r&&r.length))return;let l=new FormData;l.append(n,t.files[0]),e(t.files[0],l)};return t.addEventListener(\"change\",r,!1),()=>{t.removeEventListener(\"change\",r,!1)}},[n,t,e]);let c=r(()=>{var e;return null==i?void 0:null===(e=i.current)||void 0===e?void 0:e.click()}),a=r(()=>{i.current&&(i.current.value=\"\")});return[c,a]}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useSingleFileInput.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useRef, useEffect } from 'react';\\n\\nexport const useSingleFileInput = (\\n\\tonSetFile: (file: FileList[number], formData: FormData) => void,\\n\\tfileType = 'image/*',\\n\\tfileField = 'image',\\n): [onClick: () => void, reset: () => void] => {\\n\\tconst ref = useRef<HTMLInputElement>();\\n\\n\\tuseEffect(() => {\\n\\t\\tconst fileInput = document.createElement('input');\\n\\t\\tfileInput.setAttribute('type', 'file');\\n\\t\\tfileInput.setAttribute('style', 'display: none');\\n\\t\\tdocument.body.appendChild(fileInput);\\n\\t\\tref.current = fileInput;\\n\\n\\t\\treturn (): void => {\\n\\t\\t\\tref.current = undefined;\\n\\t\\t\\tfileInput.remove();\\n\\t\\t};\\n\\t}, []);\\n\\n\\tuseEffect(() => {\\n\\t\\tconst fileInput = ref.current;\\n\\t\\tif (!fileInput) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tfileInput.setAttribute('accept', fileType);\\n\\t}, [fileType]);\\n\\n\\tuseEffect(() => {\\n\\t\\tconst fileInput = ref.current;\\n\\t\\tif (!fileInput) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst handleFiles = (): void => {\\n\\t\\t\\tif (!fileInput?.files?.length) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tconst formData = new FormData();\\n\\t\\t\\tformData.append(fileField, fileInput.files[0]);\\n\\t\\t\\tonSetFile(fileInput.files[0], formData);\\n\\t\\t};\\n\\n\\t\\tfileInput.addEventListener('change', handleFiles, false);\\n\\n\\t\\treturn (): void => {\\n\\t\\t\\tfileInput.removeEventListener('change', handleFiles, false);\\n\\t\\t};\\n\\t}, [fileField, fileType, onSetFile]);\\n\\n\\tconst onClick = useMutableCallback(() => ref?.current?.click());\\n\\tconst reset = useMutableCallback(() => {\\n\\t\\tif (ref.current) {\\n\\t\\t\\tref.current.value = '';\\n\\t\\t}\\n\\t});\\n\\treturn [onClick, reset];\\n};\\n\",null],\"names\":[\"useMutableCallback\",\"useRef\",\"useEffect\",\"module\",\"export\",\"useSingleFileInput\",\"link\",\"v\",\"onSetFile\",\"fileType\",\"arguments\",\"length\",\"undefined\",\"fileField\",\"ref\",\"fileInput\",\"document\",\"createElement\",\"setAttribute\",\"body\",\"appendChild\",\"current\",\"remove\",\"handleFiles\",\"_fileInput$files\",\"files\",\"formData\",\"FormData\",\"append\",\"addEventListener\",\"removeEventListener\",\"onClick\",\"_ref$current\",\"click\",\"reset\",\"value\"],\"mappings\":\"2BAAmCA,EAA8BC,EAAAC,EAAjEC,EAAOC,MAAE,CAAA,CAAAC,mBAAoBA,IAAMA,CAAA,GAA8BF,EAAAG,IAAA,CAAA,8BAAA,CAAAN,mBAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAL,OAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,UAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAG1D,IAAMF,EAAqB,SACjCG,CAA+D,EAGlB,IAF7CC,EAAQC,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,UACXG,EAASH,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,QAENI,EAAMb,IAEZC,EAAU,KACT,IAAMa,EAAYC,SAASC,aAAa,CAAC,SAMzC,OALAF,EAAUG,YAAY,CAAC,OAAQ,QAC/BH,EAAUG,YAAY,CAAC,QAAS,iBAChCF,SAASG,IAAI,CAACC,WAAW,CAACL,GAC1BD,EAAIO,OAAO,CAAGN,EAEP,KACND,EAAIO,OAAO,CAAGT,KAAAA,EACdG,EAAUO,MAAM,EACjB,CACD,EAAG,EAAE,EAELpB,EAAU,KACT,IAAMa,EAAYD,EAAIO,OAAO,CACxBN,GAILA,EAAUG,YAAY,CAAC,SAAUT,EAClC,EAAG,CAACA,EAAS,EAEbP,EAAU,KACT,IAAMa,EAAYD,EAAIO,OAAO,CAC7B,GAAI,CAACN,EACJ,OAGD,IAAMQ,EAAcA,KAAW,IAAAC,EAC9B,GAAI,CAACT,CAAAA,MAAAA,GAAS,AAAO,OAAPS,CAAAA,EAATT,EAAWU,KAAK,AAALA,GAAKD,AAAA,KAAA,IAAAA,GAAhBA,EAAkBb,MAAM,AAANA,EACtB,OAED,IAAMe,EAAW,IAAIC,SACrBD,EAASE,MAAM,CAACf,EAAWE,EAAUU,KAAK,CAAC,EAAE,EAC7CjB,EAAUO,EAAUU,KAAK,CAAC,EAAE,CAAEC,EAC/B,EAIA,OAFAX,EAAUc,gBAAgB,CAAC,SAAUN,EAAa,CAAA,GAE3C,KACNR,EAAUe,mBAAmB,CAAC,SAAUP,EAAa,CAAA,EACtD,CACD,EAAG,CAACV,EAAWJ,EAAUD,EAAU,EAEnC,IAAMuB,EAAU/B,EAAmB,KAAA,IAAAgC,EAAA,OAAMlB,MAAAA,EAAG,KAAA,EAAA,AAAS,OAATkB,CAAAA,EAAHlB,EAAKO,OAAO,AAAPA,GAAOW,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAZA,EAAcC,KAAK,EAAE,GACxDC,EAAQlC,EAAmB,KAC5Bc,EAAIO,OAAO,EACdP,CAAAA,EAAIO,OAAO,CAACc,KAAK,CAAG,EAAA,CAEtB,GACA,MAAO,CAACJ,EAASG,EAAM,AACxB\"}"}