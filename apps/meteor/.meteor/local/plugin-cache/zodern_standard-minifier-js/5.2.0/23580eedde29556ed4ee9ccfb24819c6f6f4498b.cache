{"code":"function module(e,t,i){let r,a,o,s;i.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){r=e}},0),i.export({useRegistrationStatus:()=>u}),i.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){a=e},usePermission(e){o=e}},0),i.link(\"@tanstack/react-query\",{useQuery(e){s=e}},1);let u=()=>{var e,t;let i=a(\"GET\",\"/v1/cloud.registrationStatus\"),u=o(\"manage-cloud\"),n=s([\"getRegistrationStatus\"],()=>{if(!u)throw Error(\"unauthorized api call\");return i()},{keepPreviousData:!0,staleTime:1/0});return r({isRegistered:!n.isLoading&&(null===(e=n.data)||void 0===e?void 0:null===(t=e.registrationStatus)||void 0===t?void 0:t.workspaceRegistered)},n)}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useRegistrationStatus.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { OperationResult } from '@rocket.chat/rest-typings';\\nimport { useEndpoint, usePermission } from '@rocket.chat/ui-contexts';\\nimport type { UseQueryResult } from '@tanstack/react-query';\\nimport { useQuery } from '@tanstack/react-query';\\n\\ntype useRegistrationStatusReturnType = {\\n\\tisRegistered?: boolean;\\n} & UseQueryResult<OperationResult<'GET', '/v1/cloud.registrationStatus'>>;\\n\\nexport const useRegistrationStatus = (): useRegistrationStatusReturnType => {\\n\\tconst getRegistrationStatus = useEndpoint('GET', '/v1/cloud.registrationStatus');\\n\\tconst canViewregistrationStatus = usePermission('manage-cloud');\\n\\n\\tconst queryResult = useQuery(\\n\\t\\t['getRegistrationStatus'],\\n\\t\\t() => {\\n\\t\\t\\tif (!canViewregistrationStatus) {\\n\\t\\t\\t\\tthrow new Error('unauthorized api call');\\n\\t\\t\\t}\\n\\t\\t\\treturn getRegistrationStatus();\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tkeepPreviousData: true,\\n\\t\\t\\tstaleTime: Infinity,\\n\\t\\t},\\n\\t);\\n\\n\\treturn { isRegistered: !queryResult.isLoading && queryResult.data?.registrationStatus?.workspaceRegistered, ...queryResult };\\n};\\n\",null],\"names\":[\"_objectSpread\",\"useEndpoint\",\"usePermission\",\"useQuery\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useRegistrationStatus\",\"_queryResult$data\",\"_queryResult$data$reg\",\"getRegistrationStatus\",\"canViewregistrationStatus\",\"queryResult\",\"Error\",\"keepPreviousData\",\"staleTime\",\"Infinity\",\"isRegistered\",\"isLoading\",\"data\",\"registrationStatus\",\"workspaceRegistered\"],\"mappings\":\"2BACAA,EAAqEC,EAACC,EAAAC,EAA7DC,EAAaC,IAAA,CAAA,uCAA+C,CAACC,QAAAC,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAtEH,EAAOI,MAAE,CAAA,CAAAC,sBAA4BA,IAAAA,CAAM,GAA2BL,EAAAC,IAAA,CAAA,2BAAA,CAAAJ,YAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,cAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAF,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAQ/D,IAAME,EAAwBA,KAAsC,IAAAC,EAAAC,EAC1E,IAAMC,EAAwBX,EAAY,MAAO,gCAC3CY,EAA4BX,EAAc,gBAE1CY,EAAcX,EACnB,CAAC,wBAAwB,CACzB,KACC,GAAI,CAACU,EACJ,MAAM,AAAIE,MAAM,yBAEjB,OAAOH,GACR,EACA,CACCI,iBAAkB,CAAA,EAClBC,UAAWC,MAIb,OAAAlB,EAAA,CAASmB,aAAc,CAACL,EAAYM,SAAS,EAAA,CAAA,AAAoB,OAApBV,CAAAA,EAAII,EAAYO,IAAI,AAAJA,GAAIX,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAA,AAAoB,OAApBC,CAAAA,EAAhBD,EAAkBY,kBAAkB,AAAlBA,GAAkBX,AAAA,KAAA,IAAAA,EAAA,KAAA,EAApCA,EAAsCY,mBAAmB,AAAnBA,CAAmB,EAAKT,EAChH\"}"}