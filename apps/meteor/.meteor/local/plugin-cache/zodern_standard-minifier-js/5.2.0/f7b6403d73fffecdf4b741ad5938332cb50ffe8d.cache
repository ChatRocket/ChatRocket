{"code":"function module(e,n,t){var l,u,i,o,a,r,s,c,f,d,m;t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){l=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){u=e}},1),t.link(\"@rocket.chat/fuselage\",{PaginatedSelectFiltered:function(e){i=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue:function(e){o=e}},1),t.link(\"react\",{default:function(e){a=e},memo:function(e){r=e},useMemo:function(e){s=e},useState:function(e){c=e}},2),t.link(\"../hooks/lists/useRecordList\",{useRecordList:function(e){f=e}},3),t.link(\"../lib/asyncState\",{AsyncStatePhase:function(e){d=e}},4),t.link(\"./Omnichannel/hooks/useAvailableAgentsList\",{useAvailableAgentsList:function(e){m=e}},5),t.exportDefault(r(function(e){var n=e.value,t=e.currentExtension,r=e.onChange,v=e.haveAll,h=void 0!==v&&v,k=c(\"\"),b=u(k,2),p=b[0],A=b[1],g=o(p,500),L=m(s(function(){return{text:g,includeExtension:t,haveAll:h}},[t,g,h])),S=L.itemsList,x=L.loadMoreItems,C=f(S),y=C.phase,D=C.items,E=C.itemCount,M=D.sort(function(e,t){var l,u;return\"all\"===n?-1:null!=e&&null!==(l=e.username)&&void 0!==l&&l.localeCompare((null==t?void 0:t.username)||\"\")?1:null!=t&&null!==(u=t.username)&&void 0!==u&&u.localeCompare((null==t?void 0:t.username)||\"\")?-1:0}).map(function(e){return l(l({},e),{},{label:(null==e?void 0:e.username)||\"\",value:(null==e?void 0:e.username)||\"\"})});return a.createElement(i,{value:n,onChange:void 0===r?function(){}:r,flexShrink:0,filter:p,setFilter:A,options:M,endReached:y===d.LOADING?function(){}:function(e){return x(e,Math.min(50,E))}})}))}","map":"{\"version\":3,\"sources\":[\"client/components/AutoCompleteAgentWithoutExtension.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatAgent } from '@rocket.chat/core-typings';\\nimport { PaginatedSelectFiltered } from '@rocket.chat/fuselage';\\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\\nimport React, { memo, useMemo, useState } from 'react';\\n\\nimport { useRecordList } from '../hooks/lists/useRecordList';\\nimport { AsyncStatePhase } from '../lib/asyncState';\\nimport { useAvailableAgentsList } from './Omnichannel/hooks/useAvailableAgentsList';\\n\\ntype AutoCompleteAgentProps = {\\n\\tonChange: (value: string) => void;\\n\\thaveAll?: boolean;\\n\\tvalue?: string;\\n\\tcurrentExtension?: string;\\n};\\n\\nconst AutoCompleteAgentWithoutExtension = (props: AutoCompleteAgentProps) => {\\n\\tconst { value, currentExtension, onChange = (): void => undefined, haveAll = false } = props;\\n\\tconst [agentsFilter, setAgentsFilter] = useState<string | number | undefined>('');\\n\\n\\tconst debouncedAgentsFilter = useDebouncedValue(agentsFilter as string, 500);\\n\\n\\tconst { itemsList: AgentsList, loadMoreItems: loadMoreAgents } = useAvailableAgentsList(\\n\\t\\tuseMemo(\\n\\t\\t\\t() => ({ text: debouncedAgentsFilter, includeExtension: currentExtension, haveAll }),\\n\\t\\t\\t[currentExtension, debouncedAgentsFilter, haveAll],\\n\\t\\t),\\n\\t);\\n\\tconst { phase: agentsPhase, items: agentsItems, itemCount: agentsTotal } = useRecordList(AgentsList);\\n\\tconst sortedByName = agentsItems\\n\\t\\t.sort((a, b) => {\\n\\t\\t\\tif (value === 'all') {\\n\\t\\t\\t\\treturn -1;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (a?.username?.localeCompare(b?.username || '')) {\\n\\t\\t\\t\\treturn 1;\\n\\t\\t\\t}\\n\\t\\t\\tif (b?.username?.localeCompare(b?.username || '')) {\\n\\t\\t\\t\\treturn -1;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn 0;\\n\\t\\t})\\n\\t\\t.map((agent): ILivechatAgent & { label: string; value: string } => ({\\n\\t\\t\\t...agent,\\n\\t\\t\\tlabel: agent?.username || '',\\n\\t\\t\\tvalue: agent?.username || '',\\n\\t\\t}));\\n\\n\\treturn (\\n\\t\\t<PaginatedSelectFiltered\\n\\t\\t\\tvalue={value}\\n\\t\\t\\tonChange={onChange}\\n\\t\\t\\tflexShrink={0}\\n\\t\\t\\tfilter={agentsFilter as string | undefined}\\n\\t\\t\\tsetFilter={setAgentsFilter}\\n\\t\\t\\toptions={sortedByName}\\n\\t\\t\\tendReached={\\n\\t\\t\\t\\tagentsPhase === AsyncStatePhase.LOADING ? (): void => undefined : (start): void => loadMoreAgents(start, Math.min(50, agentsTotal))\\n\\t\\t\\t}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(AutoCompleteAgentWithoutExtension);\\n\",null],\"names\":[\"_objectSpread\",\"_slicedToArray\",\"PaginatedSelectFiltered\",\"useDebouncedValue\",\"React\",\"memo\",\"useMemo\",\"useState\",\"useRecordList\",\"AsyncStatePhase\",\"useAvailableAgentsList\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"props\",\"value\",\"currentExtension\",\"_props$onChange\",\"onChange\",\"_props$haveAll\",\"haveAll\",\"_useState\",\"_useState2\",\"agentsFilter\",\"setAgentsFilter\",\"debouncedAgentsFilter\",\"_useAvailableAgentsLi\",\"text\",\"includeExtension\",\"AgentsList\",\"itemsList\",\"loadMoreAgents\",\"loadMoreItems\",\"_useRecordList\",\"agentsPhase\",\"phase\",\"agentsItems\",\"items\",\"agentsTotal\",\"itemCount\",\"sortedByName\",\"sort\",\"a\",\"b\",\"_a$username\",\"_b$username\",\"username\",\"localeCompare\",\"map\",\"agent\",\"label\",\"createElement\",\"flexShrink\",\"filter\",\"setFilter\",\"options\",\"endReached\",\"LOADING\",\"start\",\"Math\",\"min\"],\"mappings\":\"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\"}"}