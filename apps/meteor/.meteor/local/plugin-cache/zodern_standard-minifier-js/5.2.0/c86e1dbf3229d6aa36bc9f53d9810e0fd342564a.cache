{"code":"function module(e,t,n){let l,s,a,o,r,u,i,c,m,h,d,g,_,f,k,p,C,y,E;let A=[\"_id\",\"onClickBack\"];n.link(\"@babel/runtime/helpers/extends\",{default(e){l=e}},0),n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){s=e}},1),n.link(\"@rocket.chat/fuselage\",{Button(e){a=e}},0),n.link(\"@rocket.chat/string-helpers\",{capitalize(e){o=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){r=e},useAbsoluteUrl(e){u=e},useMethod(e){i=e},useTranslation(e){c=e},useSetModal(e){m=e}},2),n.link(\"react\",{default(e){h=e},memo(e){d=e},useEffect(e){g=e},useState(e){_=e}},3),n.link(\"../../../../../../lib/utils/stringUtils\",{strRight(e){f=e}},4),n.link(\"../../../../../components/GenericModal\",{default(e){k=e}},5),n.link(\"../../../EditableSettingsContext\",{useEditableSettingsGroupSections(e){p=e}},6),n.link(\"../../SettingsGroupPage\",{default(e){C=e}},7),n.link(\"../../SettingsSection\",{default(e){y=e}},8),n.link(\"./CreateOAuthModal\",{default(e){E=e}},9),n.exportDefault(d(function(e){let{_id:t,onClickBack:n}=e,d=s(e,A),b=p(t),S=1===b.length,O=c(),[v,M]=_(b),w=e=>e&&/^Custom OAuth:\\s.+/.test(e),x=u(),B=e=>{let t=f(e,\"Custom OAuth: \").toLowerCase();return x(\"_oauth/\".concat(t))},R=r(),T=i(\"refreshOAuthService\"),D=i(\"addOAuthService\"),G=i(\"removeOAuthService\"),I=m(),L=async()=>{R({type:\"info\",message:O(\"Refreshing\")});try{await T(),R({type:\"success\",message:O(\"Done\")})}catch(e){R({type:\"error\",message:e})}};g(()=>{M(b)},[b]);let N=e=>()=>{let t=async()=>{try{await G(e),R({type:\"success\",message:O(\"Custom_OAuth_has_been_removed\")}),M(v.filter(t=>t!==\"Custom OAuth: \".concat(o(e))))}catch(e){R({type:\"error\",message:e})}finally{I(null)}};I(h.createElement(k,{onClose:()=>I(null),onCancel:()=>I(null),title:O(\"Are_you_sure\"),variant:\"danger\",confirmText:O(\"Yes_delete_it\"),onConfirm:t}))};return h.createElement(C,l({_id:t},d,{onClickBack:n,headerButtons:h.createElement(h.Fragment,null,h.createElement(a,{onClick:L},O(\"Refresh_oauth_services\")),h.createElement(a,{onClick:()=>{let e=async e=>{try{await D(e),R({type:\"success\",message:O(\"Custom_OAuth_has_been_added\")})}catch(e){R({type:\"error\",message:e})}finally{I(null)}};I(h.createElement(E,{onConfirm:e,onClose:()=>I(null)}))}},O(\"Add_custom_oauth\")))}),v.map(e=>{if(w(e)){let n=f(e,\"Custom OAuth: \").toLowerCase(),l=N(n);return h.createElement(y,{key:e,groupId:t,help:h.createElement(\"span\",{dangerouslySetInnerHTML:{__html:O(\"Custom_oauth_helper\",B(e))}}),sectionName:e,solo:S},h.createElement(\"div\",{className:\"submit\"},h.createElement(a,{secondary:!0,danger:!0,onClick:l},O(\"Remove_custom_oauth\"))))}return h.createElement(y,{key:e,groupId:t,sectionName:e,solo:S})}))}))}","map":"{\"version\":3,\"sources\":[\"client/views/admin/settings/groups/OAuthGroupPage/OAuthGroupPage.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ISetting } from '@rocket.chat/core-typings';\\nimport { Button } from '@rocket.chat/fuselage';\\nimport { capitalize } from '@rocket.chat/string-helpers';\\nimport { useToastMessageDispatch, useAbsoluteUrl, useMethod, useTranslation, useSetModal } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { memo, useEffect, useState } from 'react';\\n\\nimport { strRight } from '../../../../../../lib/utils/stringUtils';\\nimport GenericModal from '../../../../../components/GenericModal';\\nimport { useEditableSettingsGroupSections } from '../../../EditableSettingsContext';\\nimport SettingsGroupPage from '../../SettingsGroupPage';\\nimport SettingsSection from '../../SettingsSection';\\nimport CreateOAuthModal from './CreateOAuthModal';\\n\\ntype OAuthGroupPageProps = ISetting & {\\n\\tonClickBack?: () => void;\\n};\\n\\nfunction OAuthGroupPage({ _id, onClickBack, ...group }: OAuthGroupPageProps): ReactElement {\\n\\tconst sections = useEditableSettingsGroupSections(_id);\\n\\tconst solo = sections.length === 1;\\n\\tconst t = useTranslation();\\n\\n\\tconst [settingSections, setSettingSections] = useState(sections);\\n\\n\\tconst sectionIsCustomOAuth = (sectionName: string): string | boolean => sectionName && /^Custom OAuth:\\\\s.+/.test(sectionName);\\n\\n\\tconst getAbsoluteUrl = useAbsoluteUrl();\\n\\n\\tconst callbackURL = (sectionName: string): string => {\\n\\t\\tconst id = strRight(sectionName, 'Custom OAuth: ').toLowerCase();\\n\\t\\treturn getAbsoluteUrl(`_oauth/${id}`);\\n\\t};\\n\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst refreshOAuthService = useMethod('refreshOAuthService');\\n\\tconst addOAuthService = useMethod('addOAuthService');\\n\\tconst removeOAuthService = useMethod('removeOAuthService');\\n\\tconst setModal = useSetModal();\\n\\n\\tconst handleRefreshOAuthServicesButtonClick = async (): Promise<void> => {\\n\\t\\tdispatchToastMessage({ type: 'info', message: t('Refreshing') });\\n\\t\\ttry {\\n\\t\\t\\tawait refreshOAuthService();\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Done') });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t};\\n\\n\\tconst handleAddCustomOAuthButtonClick = (): void => {\\n\\t\\tconst onConfirm = async (text: string): Promise<void> => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tawait addOAuthService(text);\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Custom_OAuth_has_been_added') });\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t} finally {\\n\\t\\t\\t\\tsetModal(null);\\n\\t\\t\\t}\\n\\t\\t};\\n\\t\\tsetModal(<CreateOAuthModal onConfirm={onConfirm} onClose={(): void => setModal(null)} />);\\n\\t};\\n\\n\\tuseEffect(() => {\\n\\t\\tsetSettingSections(sections);\\n\\t}, [sections]);\\n\\n\\tconst removeCustomOauthFactory =\\n\\t\\t(id: string): (() => void) =>\\n\\t\\t(): void => {\\n\\t\\t\\tconst handleConfirm = async (): Promise<void> => {\\n\\t\\t\\t\\ttry {\\n\\t\\t\\t\\t\\tawait removeOAuthService(id);\\n\\t\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Custom_OAuth_has_been_removed') });\\n\\t\\t\\t\\t\\tsetSettingSections(settingSections.filter((section) => section !== `Custom OAuth: ${capitalize(id)}`));\\n\\t\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t\\t} finally {\\n\\t\\t\\t\\t\\tsetModal(null);\\n\\t\\t\\t\\t}\\n\\t\\t\\t};\\n\\n\\t\\t\\tsetModal(\\n\\t\\t\\t\\t<GenericModal\\n\\t\\t\\t\\t\\tonClose={() => setModal(null)}\\n\\t\\t\\t\\t\\tonCancel={() => setModal(null)}\\n\\t\\t\\t\\t\\ttitle={t('Are_you_sure')}\\n\\t\\t\\t\\t\\tvariant='danger'\\n\\t\\t\\t\\t\\tconfirmText={t('Yes_delete_it')}\\n\\t\\t\\t\\t\\tonConfirm={handleConfirm}\\n\\t\\t\\t\\t/>,\\n\\t\\t\\t);\\n\\t\\t};\\n\\n\\treturn (\\n\\t\\t<SettingsGroupPage\\n\\t\\t\\t_id={_id}\\n\\t\\t\\t{...group}\\n\\t\\t\\tonClickBack={onClickBack}\\n\\t\\t\\theaderButtons={\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<Button onClick={handleRefreshOAuthServicesButtonClick}>{t('Refresh_oauth_services')}</Button>\\n\\t\\t\\t\\t\\t<Button onClick={handleAddCustomOAuthButtonClick}>{t('Add_custom_oauth')}</Button>\\n\\t\\t\\t\\t</>\\n\\t\\t\\t}\\n\\t\\t>\\n\\t\\t\\t{settingSections.map((sectionName) => {\\n\\t\\t\\t\\tif (sectionIsCustomOAuth(sectionName)) {\\n\\t\\t\\t\\t\\tconst id = strRight(sectionName, 'Custom OAuth: ').toLowerCase();\\n\\n\\t\\t\\t\\t\\tconst handleRemoveCustomOAuthButtonClick = removeCustomOauthFactory(id);\\n\\n\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\t<SettingsSection\\n\\t\\t\\t\\t\\t\\t\\tkey={sectionName}\\n\\t\\t\\t\\t\\t\\t\\tgroupId={_id}\\n\\t\\t\\t\\t\\t\\t\\thelp={\\n\\t\\t\\t\\t\\t\\t\\t\\t<span\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tdangerouslySetInnerHTML={{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t__html: t('Custom_oauth_helper', callbackURL(sectionName)),\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\tsectionName={sectionName}\\n\\t\\t\\t\\t\\t\\t\\tsolo={solo}\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t<div className='submit'>\\n\\t\\t\\t\\t\\t\\t\\t\\t<Button secondary danger onClick={handleRemoveCustomOAuthButtonClick}>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{t('Remove_custom_oauth')}\\n\\t\\t\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</SettingsSection>\\n\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn <SettingsSection key={sectionName} groupId={_id} sectionName={sectionName} solo={solo} />;\\n\\t\\t\\t})}\\n\\t\\t</SettingsGroupPage>\\n\\t);\\n}\\n\\nexport default memo(OAuthGroupPage);\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"Button\",\"capitalize\",\"useToastMessageDispatch\",\"useAbsoluteUrl\",\"useMethod\",\"useTranslation\",\"useSetModal\",\"React\",\"memo\",\"useEffect\",\"useState\",\"strRight\",\"GenericModal\",\"useEditableSettingsGroupSections\",\"SettingsGroupPage\",\"SettingsSection\",\"CreateOAuthModal\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_id\",\"onClickBack\",\"group\",\"_excluded\",\"sections\",\"solo\",\"length\",\"t\",\"settingSections\",\"setSettingSections\",\"sectionIsCustomOAuth\",\"sectionName\",\"test\",\"getAbsoluteUrl\",\"callbackURL\",\"id\",\"toLowerCase\",\"concat\",\"dispatchToastMessage\",\"refreshOAuthService\",\"addOAuthService\",\"removeOAuthService\",\"setModal\",\"handleRefreshOAuthServicesButtonClick\",\"type\",\"message\",\"error\",\"removeCustomOauthFactory\",\"handleConfirm\",\"filter\",\"section\",\"createElement\",\"onClose\",\"onCancel\",\"title\",\"variant\",\"confirmText\",\"onConfirm\",\"headerButtons\",\"Fragment\",\"onClick\",\"handleAddCustomOAuthButtonClick\",\"text\",\"map\",\"handleRemoveCustomOAuthButtonClick\",\"key\",\"groupId\",\"help\",\"dangerouslySetInnerHTML\",\"__html\",\"className\",\"secondary\",\"danger\"],\"mappings\":\"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\"}"}