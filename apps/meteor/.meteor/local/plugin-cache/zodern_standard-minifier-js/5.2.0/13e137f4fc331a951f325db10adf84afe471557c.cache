{"code":"function module(e,t,n){let o,l,a,i,r,u,s,c,d,m,k,h,R,f,v,p;n.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){o=e}},0),n.export({RoomTopic:()=>_}),n.link(\"@rocket.chat/core-typings\",{isTeamRoom(e){l=e}},0),n.link(\"@rocket.chat/fuselage\",{Box(e){a=e}},1),n.link(\"@rocket.chat/ui-client\",{RoomBanner(e){i=e},RoomBannerContent(e){r=e}},2),n.link(\"@rocket.chat/ui-contexts\",{useSetting(e){u=e},useUserId(e){s=e},useTranslation(e){c=e},useRouter(e){d=e}},3),n.link(\"react\",{default(e){m=e}},4),n.link(\"../../../../app/models/client\",{RoomRoles(e){k=e}},5),n.link(\"../../../components/MarkdownText\",{default(e){h=e}},6),n.link(\"../../../hooks/usePresence\",{usePresence(e){R=e}},7),n.link(\"../../../hooks/useReactiveQuery\",{useReactiveQuery(e){f=e}},8),n.link(\"../HeaderV2/RoomLeader\",{default(e){v=e}},9),n.link(\"../contextualBar/Info/hooks/useCanEditRoom\",{useCanEditRoom(e){p=e}},10);let _=e=>{var t,n,_;let{room:x,user:E}=e,T=c(),g=p(x),B=s(),b=null===(t=x.uids)||void 0===t?void 0:t.filter(e=>e!==B).shift(),y=R(b),C=u(\"UI_Use_Real_Name\"),I=d(),P=I.getLocationPathname(),U=l(x)?\"\".concat(P,\"/team-info\"):\"\".concat(P,\"/channel-settings\"),{data:j}=f([\"rooms\",x._id,\"leader\",{not:null==E?void 0:E._id}],()=>{let e=k.findOne({rid:x._id,roles:\"leader\",\"u._id\":{$ne:null==E?void 0:E._id}});return e?o(o({},e.u),{},{name:C&&e.u.name||e.u.username}):null}),w=\"d\"===x.t&&(null!==(n=null===(_=x.uids)||void 0===_?void 0:_.length)&&void 0!==n?n:0)<3?null==y?void 0:y.statusText:x.topic;return w||j?m.createElement(i,{className:\"rcx-header-section\",role:\"note\"},m.createElement(r,null,j&&!w&&g?m.createElement(a,{is:\"a\",href:U},T(\"Add_topic\")):m.createElement(h,{parseEmoji:!0,variant:\"inlineWithoutBreaks\",withTruncatedText:!0,content:w})),j&&m.createElement(v,j)):null}}","map":"{\"version\":3,\"sources\":[\"client/views/room/body/RoomTopic.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, IUser } from '@rocket.chat/core-typings';\\nimport { isTeamRoom } from '@rocket.chat/core-typings';\\nimport { Box } from '@rocket.chat/fuselage';\\nimport { RoomBanner, RoomBannerContent } from '@rocket.chat/ui-client';\\nimport { useSetting, useUserId, useTranslation, useRouter } from '@rocket.chat/ui-contexts';\\nimport React from 'react';\\n\\nimport { RoomRoles } from '../../../../app/models/client';\\nimport MarkdownText from '../../../components/MarkdownText';\\nimport { usePresence } from '../../../hooks/usePresence';\\nimport { useReactiveQuery } from '../../../hooks/useReactiveQuery';\\nimport RoomLeader from '../HeaderV2/RoomLeader';\\nimport { useCanEditRoom } from '../contextualBar/Info/hooks/useCanEditRoom';\\n\\ntype RoomTopicProps = {\\n\\troom: IRoom;\\n\\tuser: IUser | null;\\n};\\n\\nexport const RoomTopic = ({ room, user }: RoomTopicProps) => {\\n\\tconst t = useTranslation();\\n\\tconst canEdit = useCanEditRoom(room);\\n\\tconst userId = useUserId();\\n\\tconst directUserId = room.uids?.filter((uid) => uid !== userId).shift();\\n\\tconst directUserData = usePresence(directUserId);\\n\\tconst useRealName = useSetting('UI_Use_Real_Name') as boolean;\\n\\tconst router = useRouter();\\n\\n\\tconst currentRoute = router.getLocationPathname();\\n\\tconst href = isTeamRoom(room) ? `${currentRoute}/team-info` : `${currentRoute}/channel-settings`;\\n\\n\\tconst { data: roomLeader } = useReactiveQuery(['rooms', room._id, 'leader', { not: user?._id }], () => {\\n\\t\\tconst leaderRoomRole = RoomRoles.findOne({\\n\\t\\t\\t'rid': room._id,\\n\\t\\t\\t'roles': 'leader',\\n\\t\\t\\t'u._id': { $ne: user?._id },\\n\\t\\t});\\n\\n\\t\\tif (!leaderRoomRole) {\\n\\t\\t\\treturn null;\\n\\t\\t}\\n\\n\\t\\treturn {\\n\\t\\t\\t...leaderRoomRole.u,\\n\\t\\t\\tname: useRealName ? leaderRoomRole.u.name || leaderRoomRole.u.username : leaderRoomRole.u.username,\\n\\t\\t};\\n\\t});\\n\\n\\tconst topic = room.t === 'd' && (room.uids?.length ?? 0) < 3 ? directUserData?.statusText : room.topic;\\n\\n\\tif (!topic && !roomLeader) return null;\\n\\n\\treturn (\\n\\t\\t<RoomBanner className='rcx-header-section' role='note'>\\n\\t\\t\\t<RoomBannerContent>\\n\\t\\t\\t\\t{roomLeader && !topic && canEdit ? (\\n\\t\\t\\t\\t\\t<Box is='a' href={href}>\\n\\t\\t\\t\\t\\t\\t{t('Add_topic')}\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t) : (\\n\\t\\t\\t\\t\\t<MarkdownText parseEmoji={true} variant='inlineWithoutBreaks' withTruncatedText content={topic} />\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</RoomBannerContent>\\n\\t\\t\\t{roomLeader && <RoomLeader {...roomLeader} />}\\n\\t\\t</RoomBanner>\\n\\t);\\n};\\n\",null],\"names\":[\"_objectSpread\",\"isTeamRoom\",\"Box\",\"RoomBanner\",\"RoomBannerContent\",\"useSetting\",\"useUserId\",\"useTranslation\",\"useRouter\",\"React\",\"RoomRoles\",\"MarkdownText\",\"usePresence\",\"useReactiveQuery\",\"RoomLeader\",\"useCanEditRoom\",\"module\",\"link\",\"default\",\"v\",\"export\",\"RoomTopic\",\"_ref\",\"_room$uids\",\"_room$uids$length\",\"_room$uids2\",\"room\",\"user\",\"t\",\"canEdit\",\"userId\",\"directUserId\",\"uids\",\"filter\",\"uid\",\"shift\",\"directUserData\",\"useRealName\",\"router\",\"currentRoute\",\"getLocationPathname\",\"href\",\"concat\",\"data\",\"roomLeader\",\"_id\",\"not\",\"leaderRoomRole\",\"findOne\",\"$ne\",\"u\",\"name\",\"username\",\"topic\",\"length\",\"statusText\",\"createElement\",\"className\",\"role\",\"is\",\"parseEmoji\",\"variant\",\"withTruncatedText\",\"content\"],\"mappings\":\"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\"}"}