{"code":"function module(t,a,e){let o,l;e.link(\"@babel/runtime/helpers/objectSpread2\",{default(t){o=t}},0),e.export({drawLineChart:()=>n,drawDoughnutChart:()=>r,updateChart:()=>s}),e.link(\"../../../utils/lib/i18n\",{t(t){l=t}},0);let i=t=>{let{legends:a=!1,anim:e=!1,tooltipCallbacks:l={}}=t,i=o(o({layout:{padding:{top:10,bottom:0}},legend:{display:!1},plugins:{tooltip:o({usePointStyle:!0,enabled:!0,mode:\"point\",yAlign:\"bottom\",displayColors:!0},l)},scales:{xAxis:{title:{display:!1},grid:{display:!0,color:\"rgba(0, 0, 0, 0.03)\"}},yAxis:{title:{display:!1},grid:{display:!0,color:\"rgba(0, 0, 0, 0.03)\"}}},hover:{intersect:!1,mode:\"index\"},responsive:!0,maintainAspectRatio:!1},e?{}:{animation:{duration:0}}),a?{legend:{display:!0,labels:{boxWidth:20,fontSize:8}}}:{});return i},d=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{layout:{padding:{top:0,bottom:0}},plugins:{legend:{display:!0,position:\"right\",labels:{boxWidth:20}},title:{display:!0,text:t},tooltip:o({enabled:!0,mode:\"point\",displayColors:!0},a)},hover:{intersect:!0},responsive:!0,maintainAspectRatio:!1}},n=async function(t,a,o,d,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!t)throw Error(\"No chart element\");null==a||a.destroy();let s=[\"#2de0a5\",\"#ffd21f\",\"#f5455c\",\"#cbced1\"],p=[];o.forEach((t,a)=>{p.push({label:l(t),data:n[a],backgroundColor:s[a],borderColor:s[a],borderWidth:3,fill:!1})});let{default:u}=await e.dynamicImport(\"chart.js/auto\");return new u(t,{type:\"line\",data:{labels:d,datasets:p},options:i(r)})},r=async(t,a,o,l,i)=>{if(!t)throw Error(\"No chart element\");null==o||o.destroy();let{default:n}=await e.dynamicImport(\"chart.js/auto\");return new n(t,{type:\"doughnut\",data:{labels:l,datasets:[{data:i,backgroundColor:[\"#2de0a5\",\"#cbced1\",\"#f5455c\",\"#ffd21f\"],borderWidth:0}]},options:d(a)})},s=async(t,a,e)=>{var o,l,i,d;if((null===(o=t.data)||void 0===o?void 0:null===(l=o.labels)||void 0===l?void 0:l.indexOf(a))===-1)t.data.labels.push(a),t.data.datasets.forEach((t,a)=>{t.data.push(e[a])});else{let o=null===(i=t.data)||void 0===i?void 0:null===(d=i.labels)||void 0===d?void 0:d.indexOf(a);if(void 0===o)return;t.data.datasets.forEach((t,a)=>{t.data[o]=e[a]})}t.update()}}","map":"{\"version\":3,\"sources\":[\"app/livechat/client/lib/chartHandler.ts\",\"<anon>\"],\"sourcesContent\":[\"import type * as chartjs from 'chart.js';\\n\\nimport { t } from '../../../utils/lib/i18n';\\n\\ntype LineChartConfigOptions = Partial<{\\n\\tlegends: boolean;\\n\\tanim: boolean;\\n\\tdisplayColors: boolean;\\n\\tsmallTicks: boolean;\\n\\ttooltipCallbacks: any;\\n}>;\\n\\nconst lineChartConfiguration = ({\\n\\tlegends = false,\\n\\tanim = false,\\n\\ttooltipCallbacks = {},\\n}: LineChartConfigOptions): Partial<chartjs.ChartConfiguration<'line', number, string>['options']> => {\\n\\tconst config: chartjs.ChartConfiguration<'line', number, string>['options'] = {\\n\\t\\tlayout: {\\n\\t\\t\\tpadding: {\\n\\t\\t\\t\\ttop: 10,\\n\\t\\t\\t\\tbottom: 0,\\n\\t\\t\\t},\\n\\t\\t},\\n\\t\\tlegend: {\\n\\t\\t\\tdisplay: false,\\n\\t\\t},\\n\\t\\tplugins: {\\n\\t\\t\\ttooltip: {\\n\\t\\t\\t\\tusePointStyle: true,\\n\\t\\t\\t\\tenabled: true,\\n\\t\\t\\t\\tmode: 'point',\\n\\t\\t\\t\\tyAlign: 'bottom',\\n\\t\\t\\t\\tdisplayColors: true,\\n\\t\\t\\t\\t...tooltipCallbacks,\\n\\t\\t\\t},\\n\\t\\t},\\n\\t\\tscales: {\\n\\t\\t\\txAxis: {\\n\\t\\t\\t\\ttitle: {\\n\\t\\t\\t\\t\\tdisplay: false,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgrid: {\\n\\t\\t\\t\\t\\tdisplay: true,\\n\\t\\t\\t\\t\\tcolor: 'rgba(0, 0, 0, 0.03)',\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t\\tyAxis: {\\n\\t\\t\\t\\ttitle: {\\n\\t\\t\\t\\t\\tdisplay: false,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgrid: {\\n\\t\\t\\t\\t\\tdisplay: true,\\n\\t\\t\\t\\t\\tcolor: 'rgba(0, 0, 0, 0.03)',\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t},\\n\\t\\thover: {\\n\\t\\t\\tintersect: false, // duration of animations when hovering an item\\n\\t\\t\\tmode: 'index',\\n\\t\\t},\\n\\t\\tresponsive: true,\\n\\t\\tmaintainAspectRatio: false,\\n\\t\\t...(!anim ? { animation: { duration: 0 } } : {}),\\n\\t\\t...(legends ? { legend: { display: true, labels: { boxWidth: 20, fontSize: 8 } } } : {}),\\n\\t};\\n\\n\\treturn config;\\n};\\n\\nconst doughnutChartConfiguration = (\\n\\ttitle: string,\\n\\ttooltipCallbacks = {},\\n): Partial<chartjs.ChartConfiguration<'doughnut', number, string>['options']> => ({\\n\\tlayout: {\\n\\t\\tpadding: {\\n\\t\\t\\ttop: 0,\\n\\t\\t\\tbottom: 0,\\n\\t\\t},\\n\\t},\\n\\tplugins: {\\n\\t\\tlegend: {\\n\\t\\t\\tdisplay: true,\\n\\t\\t\\tposition: 'right',\\n\\t\\t\\tlabels: {\\n\\t\\t\\t\\tboxWidth: 20,\\n\\t\\t\\t},\\n\\t\\t},\\n\\t\\ttitle: {\\n\\t\\t\\tdisplay: true,\\n\\t\\t\\ttext: title,\\n\\t\\t},\\n\\t\\ttooltip: {\\n\\t\\t\\tenabled: true,\\n\\t\\t\\tmode: 'point',\\n\\t\\t\\tdisplayColors: true, // hide color box\\n\\t\\t\\t...tooltipCallbacks,\\n\\t\\t},\\n\\t},\\n\\t// animation: {\\n\\t// \\tduration: 0 // general animation time\\n\\t// },\\n\\thover: {\\n\\t\\tintersect: true, // duration of animations when hovering an item\\n\\t},\\n\\tresponsive: true,\\n\\tmaintainAspectRatio: false,\\n});\\n\\ntype ChartDataSet = {\\n\\tlabel: string;\\n\\tdata: number[];\\n\\tbackgroundColor: string;\\n\\tborderColor: string;\\n\\tborderWidth: number;\\n\\tfill: boolean;\\n};\\n\\nexport const drawLineChart = async (\\n\\tchart: HTMLCanvasElement,\\n\\tchartContext: chartjs.Chart<'line'> | undefined,\\n\\tchartLabels: string[],\\n\\tdataLabels: string[],\\n\\tdataSets: number[][],\\n\\toptions: LineChartConfigOptions = {},\\n) => {\\n\\tif (!chart) {\\n\\t\\tthrow new Error('No chart element');\\n\\t}\\n\\tchartContext?.destroy();\\n\\n\\tconst colors = ['#2de0a5', '#ffd21f', '#f5455c', '#cbced1'];\\n\\n\\tconst datasets: ChartDataSet[] = [];\\n\\n\\tchartLabels.forEach((chartLabel: string, index: number) => {\\n\\t\\tdatasets.push({\\n\\t\\t\\tlabel: t(chartLabel), // chart label\\n\\t\\t\\tdata: dataSets[index], // data points corresponding to data labels, x-axis points\\n\\t\\t\\tbackgroundColor: colors[index],\\n\\t\\t\\tborderColor: colors[index],\\n\\t\\t\\tborderWidth: 3,\\n\\t\\t\\tfill: false,\\n\\t\\t});\\n\\t});\\n\\n\\tconst { default: Chart } = await import('chart.js/auto');\\n\\treturn new Chart(chart, {\\n\\t\\ttype: 'line',\\n\\t\\tdata: {\\n\\t\\t\\tlabels: dataLabels, // data labels, y-axis points\\n\\t\\t\\tdatasets,\\n\\t\\t},\\n\\t\\toptions: lineChartConfiguration(options),\\n\\t});\\n};\\n\\nexport const drawDoughnutChart = async (\\n\\tchart: chartjs.ChartItem,\\n\\ttitle: string,\\n\\tchartContext: chartjs.Chart<'doughnut'> | undefined,\\n\\tdataLabels: string[],\\n\\tdataPoints: number[],\\n) => {\\n\\tif (!chart) {\\n\\t\\tthrow new Error('No chart element');\\n\\t}\\n\\tchartContext?.destroy();\\n\\n\\tconst { default: Chart } = await import('chart.js/auto');\\n\\treturn new Chart(chart, {\\n\\t\\ttype: 'doughnut',\\n\\t\\tdata: {\\n\\t\\t\\tlabels: dataLabels, // data labels, y-axis points\\n\\t\\t\\tdatasets: [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tdata: dataPoints, // data points corresponding to data labels, x-axis points\\n\\t\\t\\t\\t\\tbackgroundColor: ['#2de0a5', '#cbced1', '#f5455c', '#ffd21f'],\\n\\t\\t\\t\\t\\tborderWidth: 0,\\n\\t\\t\\t\\t},\\n\\t\\t\\t],\\n\\t\\t},\\n\\t\\toptions: doughnutChartConfiguration(title),\\n\\t});\\n};\\n\\nexport const updateChart = async <TChartType extends chartjs.ChartType>(\\n\\tchart: chartjs.Chart<TChartType>,\\n\\tlabel: string,\\n\\tdata: chartjs.DefaultDataPoint<TChartType>,\\n): Promise<void> => {\\n\\tif (chart.data?.labels?.indexOf(label) === -1) {\\n\\t\\t// insert data\\n\\t\\tchart.data.labels.push(label);\\n\\t\\tchart.data.datasets.forEach((dataset: { data: any[] }, idx: number) => {\\n\\t\\t\\tdataset.data.push(data[idx]);\\n\\t\\t});\\n\\t} else {\\n\\t\\t// update data\\n\\t\\tconst index = chart.data?.labels?.indexOf(label);\\n\\t\\tif (typeof index === 'undefined') {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tchart.data.datasets.forEach((dataset: { data: { [x: string]: any } }, idx: number) => {\\n\\t\\t\\tdataset.data[index] = data[idx];\\n\\t\\t});\\n\\t}\\n\\n\\tchart.update();\\n};\\n\",null],\"names\":[\"_objectSpread\",\"t\",\"module\",\"link\",\"default\",\"v\",\"export\",\"drawLineChart\",\"drawDoughnutChart\",\"updateChart\",\"lineChartConfiguration\",\"_ref\",\"legends\",\"anim\",\"tooltipCallbacks\",\"config\",\"layout\",\"padding\",\"top\",\"bottom\",\"legend\",\"display\",\"plugins\",\"tooltip\",\"usePointStyle\",\"enabled\",\"mode\",\"yAlign\",\"displayColors\",\"scales\",\"xAxis\",\"title\",\"grid\",\"color\",\"yAxis\",\"hover\",\"intersect\",\"responsive\",\"maintainAspectRatio\",\"animation\",\"duration\",\"labels\",\"boxWidth\",\"fontSize\",\"doughnutChartConfiguration\",\"arguments\",\"length\",\"undefined\",\"position\",\"text\",\"chart\",\"chartContext\",\"chartLabels\",\"dataLabels\",\"dataSets\",\"options\",\"Error\",\"destroy\",\"colors\",\"datasets\",\"forEach\",\"chartLabel\",\"index\",\"push\",\"label\",\"data\",\"backgroundColor\",\"borderColor\",\"borderWidth\",\"fill\",\"Chart\",\"dynamicImport\",\"type\",\"dataPoints\",\"_chart$data\",\"_chart$data$labels\",\"_chart$data2\",\"_chart$data2$labels\",\"indexOf\",\"dataset\",\"idx\",\"update\"],\"mappings\":\"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\"}"}