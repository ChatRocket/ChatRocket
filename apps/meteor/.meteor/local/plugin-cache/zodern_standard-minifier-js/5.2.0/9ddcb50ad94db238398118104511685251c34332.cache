{"code":"function module(e,t,o){let n,d,i,l,a,s,r;o.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),o.export({useVideoConfList:()=>c}),o.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){d=e}},0),o.link(\"react\",{useCallback(e){i=e},useState(e){l=e}},1),o.link(\"../../../../../hooks/lists/useScrollableRecordList\",{useScrollableRecordList(e){a=e}},2),o.link(\"../../../../../hooks/useComponentDidUpdate\",{useComponentDidUpdate(e){s=e}},3),o.link(\"./VideoConfRecordList\",{VideoConfRecordList(e){r=e}},4);let c=e=>{let t=d(\"GET\",\"/v1/video-conference.list\"),[o,c]=l(()=>new r),u=i(()=>c(new r),[]);s(()=>{e&&u()},[e,u]);let p=i(async(o,d)=>{let{data:i,total:l}=await t({roomId:e.roomId});return{items:i.map(e=>n(n({},e),{},{_updatedAt:new Date(e._updatedAt),createdAt:new Date(e.createdAt),endedAt:e.endedAt?new Date(e.endedAt):void 0})),itemCount:l}},[t,e]),{loadMoreItems:k,initialItemCount:m}=a(o,p);return{reload:u,videoConfList:o,loadMoreItems:k,initialItemCount:m}}}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/VideoConference/VideoConfList/useVideoConfList.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useState } from 'react';\\n\\nimport { useScrollableRecordList } from '../../../../../hooks/lists/useScrollableRecordList';\\nimport { useComponentDidUpdate } from '../../../../../hooks/useComponentDidUpdate';\\nimport { VideoConfRecordList } from './VideoConfRecordList';\\n\\nexport const useVideoConfList = (options: {\\n\\troomId: IRoom['_id'];\\n}): {\\n\\tvideoConfList: VideoConfRecordList;\\n\\tinitialItemCount: number;\\n\\treload: () => void;\\n\\tloadMoreItems: (start: number, end: number) => void;\\n} => {\\n\\tconst getVideoConfs = useEndpoint('GET', '/v1/video-conference.list');\\n\\tconst [videoConfList, setVideoConfList] = useState(() => new VideoConfRecordList());\\n\\tconst reload = useCallback(() => setVideoConfList(new VideoConfRecordList()), []);\\n\\n\\tuseComponentDidUpdate(() => {\\n\\t\\toptions && reload();\\n\\t}, [options, reload]);\\n\\n\\tconst fetchData = useCallback(\\n\\t\\tasync (_start, _end) => {\\n\\t\\t\\tconst { data, total } = await getVideoConfs({\\n\\t\\t\\t\\troomId: options.roomId,\\n\\t\\t\\t});\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\titems: data.map((videoConf: any) => ({\\n\\t\\t\\t\\t\\t...videoConf,\\n\\t\\t\\t\\t\\t_updatedAt: new Date(videoConf._updatedAt),\\n\\t\\t\\t\\t\\tcreatedAt: new Date(videoConf.createdAt),\\n\\t\\t\\t\\t\\tendedAt: videoConf.endedAt ? new Date(videoConf.endedAt) : undefined,\\n\\t\\t\\t\\t})),\\n\\t\\t\\t\\titemCount: total,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t[getVideoConfs, options],\\n\\t);\\n\\n\\tconst { loadMoreItems, initialItemCount } = useScrollableRecordList(videoConfList, fetchData);\\n\\n\\treturn {\\n\\t\\treload,\\n\\t\\tvideoConfList,\\n\\t\\tloadMoreItems,\\n\\t\\tinitialItemCount,\\n\\t};\\n};\\n\",null],\"names\":[\"_objectSpread\",\"useEndpoint\",\"useCallback\",\"useState\",\"useScrollableRecordList\",\"useComponentDidUpdate\",\"VideoConfRecordList\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useVideoConfList\",\"options\",\"getVideoConfs\",\"videoConfList\",\"setVideoConfList\",\"reload\",\"fetchData\",\"_start\",\"_end\",\"data\",\"total\",\"roomId\",\"items\",\"map\",\"videoConf\",\"_updatedAt\",\"Date\",\"createdAt\",\"endedAt\",\"undefined\",\"itemCount\",\"loadMoreItems\",\"initialItemCount\"],\"mappings\":\"2BACAA,EAAuDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9CC,EAAaC,IAAM,CAAA,uCAA2B,CAAAC,QAAAC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAvDH,EAAOI,MAAE,CAAA,CAAAC,iBAAmBA,IAAAA,CAAA,GAA2BL,EAAAC,IAAA,CAAA,2BAAA,CAAAP,YAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAN,YAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qDAAA,CAAAJ,wBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6CAAA,CAAAH,sBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAF,oBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAOhD,IAAME,EAAoBC,IAQhC,IAAMC,EAAgBb,EAAY,MAAO,6BACnC,CAACc,EAAeC,EAAiB,CAAGb,EAAS,IAAM,IAAIG,GACvDW,EAASf,EAAY,IAAMc,EAAiB,IAAIV,GAAwB,EAAE,EAEhFD,EAAsB,KACrBQ,GAAWI,GACZ,EAAG,CAACJ,EAASI,EAAO,EAEpB,IAAMC,EAAYhB,EACjB,MAAOiB,EAAQC,KACd,GAAM,CAAEC,KAAAA,CAAI,CAAEC,MAAAA,CAAAA,CAAO,CAAG,MAAMR,EAAc,CAC3CS,OAAQV,EAAQU,MAAAA,GAGjB,MAAO,CACNC,MAAOH,EAAKI,GAAG,CAAEC,GAAc1B,EAAAA,EAAA,CAAA,EAC3B0B,GAAS,CAAA,EAAA,CACZC,WAAY,IAAIC,KAAKF,EAAUC,UAAU,EACzCE,UAAW,IAAID,KAAKF,EAAUG,SAAS,EACvCC,QAASJ,EAAUI,OAAO,CAAG,IAAIF,KAAKF,EAAUI,OAAO,EAAIC,KAAAA,CAAS,IAErEC,UAAWV,EAEb,EACA,CAACR,EAAeD,EAAQ,EAGnB,CAAEoB,cAAAA,CAAa,CAAEC,iBAAAA,CAAAA,CAAkB,CAAG9B,EAAwBW,EAAeG,GAEnF,MAAO,CACND,OAAAA,EACAF,cAAAA,EACAkB,cAAAA,EACAC,iBAAAA,EAEF\"}"}