{"code":"function module(e,l,i){let t,r;i.export({useLicenseLimitsByBehavior:()=>a}),i.link(\"@rocket.chat/license/src/validation/validateLimit\",{validateWarnLimit(e){t=e}},0),i.link(\"./useLicense\",{useLicense(e){r=e}},1);let a=()=>{let e=r({loadValues:!0});if(e.isLoading||e.isError)return null;let{license:l,limits:i}=e.data;if(!l||!i)return null;let a=Object.keys(i),n=a.map(e=>{var r;let a=null===(r=l.limits[e])||void 0===r?void 0:r.filter(l=>{var r;return t(l.max,null!==(r=i[e].value)&&void 0!==r?r:0,l.behavior)}).reduce((e,l)=>!e||l.max>e.max?l:e,null);if(a&&0!==a.max&&-1!==a.max)return[e,a.behavior]}).filter(Boolean);return n.length?n.reduce((e,l)=>{let[i,t]=l;return e[t]||(e[t]=[]),e[t].push(i),e},{}):null}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useLicenseLimitsByBehavior.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { LicenseBehavior, LicenseLimitKind } from '@rocket.chat/core-typings';\\nimport { validateWarnLimit } from '@rocket.chat/license/src/validation/validateLimit';\\n\\nimport { useLicense } from './useLicense';\\n\\ntype LicenseLimitsByBehavior = Record<LicenseBehavior, LicenseLimitKind[]>;\\n\\nexport const useLicenseLimitsByBehavior = () => {\\n\\tconst result = useLicense({ loadValues: true });\\n\\n\\tif (result.isLoading || result.isError) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\tconst { license, limits } = result.data;\\n\\n\\tif (!license || !limits) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\tconst keyLimits = Object.keys(limits) as Array<keyof typeof limits>;\\n\\n\\t// Get the rule with the highest limit that applies to this key\\n\\tconst rules = keyLimits\\n\\t\\t.map((key) => {\\n\\t\\t\\tconst rule = license.limits[key]\\n\\t\\t\\t\\t?.filter((limit) => validateWarnLimit(limit.max, limits[key].value ?? 0, limit.behavior))\\n\\t\\t\\t\\t.reduce<{ max: number; behavior: LicenseBehavior } | null>(\\n\\t\\t\\t\\t\\t(maxLimit, currentLimit) => (!maxLimit || currentLimit.max > maxLimit.max ? currentLimit : maxLimit),\\n\\t\\t\\t\\t\\tnull,\\n\\t\\t\\t\\t);\\n\\n\\t\\t\\tif (!rule) {\\n\\t\\t\\t\\treturn undefined;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (rule.max === 0) {\\n\\t\\t\\t\\treturn undefined;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (rule.max === -1) {\\n\\t\\t\\t\\treturn undefined;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn [key, rule.behavior];\\n\\t\\t})\\n\\t\\t.filter(Boolean) as Array<[keyof typeof limits, LicenseBehavior]>;\\n\\n\\tif (!rules.length) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\t// Group by behavior\\n\\treturn rules.reduce((acc, [key, behavior]) => {\\n\\t\\tif (!acc[behavior]) {\\n\\t\\t\\tacc[behavior] = [];\\n\\t\\t}\\n\\n\\t\\tacc[behavior].push(key);\\n\\n\\t\\treturn acc;\\n\\t}, {} as LicenseLimitsByBehavior);\\n};\\n\",null],\"names\":[\"validateWarnLimit\",\"useLicense\",\"module\",\"export\",\"useLicenseLimitsByBehavior\",\"link\",\"v\",\"result\",\"loadValues\",\"isLoading\",\"isError\",\"license\",\"limits\",\"data\",\"keyLimits\",\"Object\",\"keys\",\"rules\",\"map\",\"key\",\"_license$limits$key\",\"rule\",\"filter\",\"limit\",\"_limits$key$value\",\"max\",\"value\",\"behavior\",\"reduce\",\"maxLimit\",\"currentLimit\",\"Boolean\",\"length\",\"acc\",\"_ref\",\"push\"],\"mappings\":\"2BACkCA,EAAoDC,EAAtFC,EAAOC,MAAE,CAAA,CAAAC,2BAAyBA,IAAAA,CAAA,GAAoDF,EAAAG,IAAA,CAAA,oDAAA,CAAAL,kBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,eAAA,CAAAJ,WAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAM/E,IAAMF,EAA6BA,KACzC,IAAMG,EAASN,EAAW,CAAEO,WAAY,CAAA,CAAI,GAE5C,GAAID,EAAOE,SAAS,EAAIF,EAAOG,OAAO,CACrC,OAAO,KAGR,GAAM,CAAEC,QAAAA,CAAO,CAAEC,OAAAA,CAAAA,CAAQ,CAAGL,EAAOM,IAAI,CAEvC,GAAI,CAACF,GAAW,CAACC,EAChB,OAAO,KAGR,IAAME,EAAYC,OAAOC,IAAI,CAACJ,GAGxBK,EAAQH,EACZI,GAAG,CAAEC,IAAO,IAAAC,EACZ,IAAMC,EAAI,AAAsB,OAAtBD,CAAAA,EAAGT,EAAQC,MAAM,CAACO,EAAI,AAAD,GAACC,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAnBA,EACVE,MAAM,CAAEC,IAAK,IAAAC,EAAA,OAAKxB,EAAkBuB,EAAME,GAAG,CAAA,AAAmB,OAAnBD,CAAAA,EAAEZ,CAAM,CAACO,EAAI,CAACO,KAAK,AAALA,GAAKF,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAAGD,EAAMI,QAAQ,CAAC,GACvFC,MAAM,CACN,CAACC,EAAUC,IAAkB,CAACD,GAAYC,EAAaL,GAAG,CAAGI,EAASJ,GAAG,CAAGK,EAAeD,EAC3F,MAGF,GAAKR,GAIDA,AAAa,IAAbA,EAAKI,GAAG,EAIRJ,AAAa,KAAbA,EAAKI,GAAG,CAIZ,MAAO,CAACN,EAAKE,EAAKM,QAAQ,CAAC,AAC5B,GACCL,MAAM,CAACS,gBAET,AAAKd,EAAMe,MAAM,CAKVf,EAAMW,MAAM,CAAC,CAACK,EAAGC,KAAqB,GAAnB,CAACf,EAAKQ,EAAS,CAAAO,EAOxC,OANKD,CAAG,CAACN,EAAS,EACjBM,CAAAA,CAAG,CAACN,EAAS,CAAG,EAAE,AAAF,EAGjBM,CAAG,CAACN,EAAS,CAACQ,IAAI,CAAChB,GAEZc,CACR,EAAG,CAAA,GAZK,IAaT\"}"}