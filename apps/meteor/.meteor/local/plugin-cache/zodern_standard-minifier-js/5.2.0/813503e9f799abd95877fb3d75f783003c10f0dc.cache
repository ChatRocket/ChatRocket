{"code":"function module(e,n,t){function r(e){return[\"private\",\"explore\",\"installed\",\"premium\",\"requested\"].includes(e)}t.link(\"@babel/runtime/regenerator\",{default:function(e){u=e}},0),t.export({isMarketplaceRouteContext:function(){return r},useAppsCountQuery:function(){return o},useInvalidateAppsCountQueryCallback:function(){return s}}),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){a=e}},0),t.link(\"@tanstack/react-query\",{useQueryClient:function(e){i=e},useQuery:function(e){c=e}},1),t.link(\"react\",{useCallback:function(e){l=e}},2);var u,a,i,c,l,o=function(e){var n=a(\"GET\",\"/apps/count\");return c([\"apps/count\",e],function(){var t,r,a,i;return u.async(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,u.awrap(n());case 2:return t=c.sent,r=\"private\"===e?t.totalPrivateEnabled:t.totalMarketplaceEnabled,i=-1===(a=\"private\"===e?t.maxPrivateApps:t.maxMarketplaceApps),c.abrupt(\"return\",{hasUnlimitedApps:i,enabled:r,limit:a});case 7:case\"end\":return c.stop()}},null,null,null,Promise)},{staleTime:1e4})},s=function(){var e=i();return l(function(){e.invalidateQueries([\"apps/count\"])},[e])}}","map":"{\"version\":3,\"sources\":[\"client/views/marketplace/hooks/useAppsCountQuery.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQueryClient, useQuery } from '@tanstack/react-query';\\nimport { useCallback } from 'react';\\n\\nexport type MarketplaceRouteContext = 'private' | 'explore' | 'installed' | 'premium' | 'requested' | 'details';\\n\\nexport function isMarketplaceRouteContext(context: string): context is MarketplaceRouteContext {\\n\\treturn ['private', 'explore', 'installed', 'premium', 'requested'].includes(context);\\n}\\n\\nexport const useAppsCountQuery = (context: MarketplaceRouteContext) => {\\n\\tconst getAppsCount = useEndpoint('GET', '/apps/count');\\n\\n\\treturn useQuery(\\n\\t\\t['apps/count', context],\\n\\t\\tasync () => {\\n\\t\\t\\tconst data = await getAppsCount();\\n\\n\\t\\t\\tconst numberOfEnabledApps = context === 'private' ? data.totalPrivateEnabled : data.totalMarketplaceEnabled;\\n\\t\\t\\tconst enabledAppsLimit = context === 'private' ? data.maxPrivateApps : data.maxMarketplaceApps;\\n\\t\\t\\tconst hasUnlimitedApps = enabledAppsLimit === -1;\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\thasUnlimitedApps,\\n\\t\\t\\t\\tenabled: numberOfEnabledApps,\\n\\t\\t\\t\\tlimit: enabledAppsLimit,\\n\\t\\t\\t\\t// tooltip,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t{ staleTime: 10_000 },\\n\\t);\\n};\\n\\nexport const useInvalidateAppsCountQueryCallback = () => {\\n\\tconst queryClient = useQueryClient();\\n\\treturn useCallback(() => {\\n\\t\\tqueryClient.invalidateQueries(['apps/count']);\\n\\t}, [queryClient]);\\n};\\n\",null],\"names\":[\"isMarketplaceRouteContext\",\"context\",\"includes\",\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"export\",\"useAppsCountQuery\",\"useInvalidateAppsCountQueryCallback\",\"useEndpoint\",\"useQueryClient\",\"useQuery\",\"useCallback\",\"getAppsCount\",\"data\",\"numberOfEnabledApps\",\"enabledAppsLimit\",\"hasUnlimitedApps\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"sent\",\"totalPrivateEnabled\",\"totalMarketplaceEnabled\",\"maxPrivateApps\",\"maxMarketplaceApps\",\"abrupt\",\"enabled\",\"limit\",\"stop\",\"Promise\",\"staleTime\",\"queryClient\",\"invalidateQueries\"],\"mappings\":\"uBAMM,SAAUA,EAA0BC,CAAe,EACxD,MAAO,CAAC,UAAW,UAAW,YAAa,UAAW,YAAY,CAACC,QAAQ,CAACD,EAC7E,CARsBE,EAAMC,IAAA,CAAA,6BAA2B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAvDH,EAAOK,MAAE,CAAA,CAAAR,0BAAmB,WAAA,OAA2BA,CAAA,EAAAS,kBAAA,WAAA,OAAAA,CAAA,EAAAC,oCAAA,WAAA,OAAAA,CAAA,CAAA,GAAAP,EAAAC,IAAA,CAAA,2BAAA,CAAAO,YAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAQ,eAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,EAAAO,SAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAU,YAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAUhD,IAVPC,EAAuDI,EAAAC,EAAAC,EAAAC,EAU1CL,EAAoB,SAACR,CAAgC,EACjE,IAAMc,EAAeJ,EAAY,MAAO,eAExC,OAAOE,EACN,CAAC,aAAcZ,EAAQ,CACvB,WAAA,IAAAe,EAAAC,EAAAC,EAAAC,EAAA,OAAAZ,EAAAa,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAAhB,EAAAiB,KAAA,CACoBT,IAAc,MAAA,EAIe,OAJ1CC,EAAIK,EAAAI,IAAA,CAEJR,EAAsBhB,AAAY,YAAZA,EAAwBe,EAAKU,mBAAmB,CAAGV,EAAKW,uBAAuB,CAErGR,EAAmBD,AAAqB,KADxCA,CAAAA,EAAmBjB,AAAY,YAAZA,EAAwBe,EAAKY,cAAc,CAAGZ,EAAKa,kBAAkB,AAAlBA,EAC5BR,EAAAS,MAAA,CAAA,SAEzC,CACNX,iBAAAA,EACAY,QAASd,EACTe,MAAOd,GAEP,MAAA,EAAA,IAAA,MAAA,OAAAG,EAAAY,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEF,CAAEC,UAAW,GAAM,EAErB,EAEazB,EAAsC,WAClD,IAAM0B,EAAcxB,IACpB,OAAOE,EAAY,WAClBsB,EAAYC,iBAAiB,CAAC,CAAC,aAAa,CAC7C,EAAG,CAACD,EAAY,CACjB\"}"}