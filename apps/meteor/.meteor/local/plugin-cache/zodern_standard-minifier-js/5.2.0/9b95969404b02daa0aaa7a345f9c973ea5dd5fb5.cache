{"code":"function module(e,t,n){let l,a,o,r,s,i,u,c,m,E,d,p,h,k,x,b,g,v,C;n.link(\"@babel/runtime/helpers/extends\",{default(e){l=e}},0),n.link(\"@rocket.chat/fuselage\",{Button(e){a=e},Modal(e){o=e},Select(e){r=e},Field(e){s=e},FieldGroup(e){i=e},FieldLabel(e){u=e},FieldRow(e){c=e},Box(e){m=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){E=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){d=e},useEndpoint(e){p=e},useTranslation(e){h=e}},2),n.link(\"react\",{default(e){k=e},useState(e){x=e},useMemo(e){b=e}},3),n.link(\"../../../../../components/AutoCompleteAgentWithoutExtension\",{default(e){g=e}},4),n.link(\"../../../../../hooks/useAsyncState\",{AsyncStatePhase(e){v=e}},5),n.link(\"../../../../../hooks/useEndpointData\",{useEndpointData(e){C=e}},6),n.exportDefault(e=>{var t;let{existingExtension:n,closeModal:f,reload:A}=e,_=h(),y=d(),[F,S]=x(\"\"),[D,M]=x(n||\"\"),T=b(()=>({type:\"available\",userId:F}),[F]),w=p(\"POST\",\"/v1/omnichannel/agent/extension\"),B=E(async e=>{e.preventDefault();try{await w({username:F,extension:D})}catch(e){y({type:\"error\",message:e})}A(),f()}),G=E(e=>S(e)),{value:I,phase:L}=C(\"/v1/omnichannel/extension\",{params:T});return k.createElement(o,{wrapperFunction:e=>k.createElement(m,l({is:\"form\",onSubmit:B},e))},k.createElement(o.Header,null,k.createElement(o.Title,null,_(\"Associate_Agent_to_Extension\")),k.createElement(o.Close,{onClick:f})),k.createElement(o.Content,null,k.createElement(i,null,k.createElement(s,null,k.createElement(u,null,_(\"Agent_Without_Extensions\")),k.createElement(c,null,k.createElement(g,{value:F,onChange:G,currentExtension:D}))),k.createElement(s,null,k.createElement(u,null,_(\"Free_Extension_Numbers\")),k.createElement(c,null,k.createElement(r,{disabled:L===v.LOADING||\"\"===F,options:(null==I?void 0:null===(t=I.extensions)||void 0===t?void 0:t.map(e=>[e,e]))||[],value:D,placeholder:_(\"Select_an_option\"),onChange:e=>M(String(e))}))))),k.createElement(o.Footer,null,k.createElement(o.FooterControllers,null,k.createElement(a,{onClick:f},_(\"Cancel\")),k.createElement(a,{primary:!0,disabled:!F||!D,type:\"submit\"},_(\"Associate\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/settings/groups/VoipGroupPage/AssignAgentModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Button, Modal, Select, Field, FieldGroup, FieldLabel, FieldRow, Box } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\\nimport React, { useState, useMemo } from 'react';\\n\\nimport AutoCompleteAgentWithoutExtension from '../../../../../components/AutoCompleteAgentWithoutExtension';\\nimport { AsyncStatePhase } from '../../../../../hooks/useAsyncState';\\nimport { useEndpointData } from '../../../../../hooks/useEndpointData';\\n\\ntype AssignAgentModalProps = {\\n\\tcloseModal: () => void;\\n\\treload: () => void;\\n\\texistingExtension?: string;\\n};\\n\\nconst AssignAgentModal = ({ existingExtension, closeModal, reload }: AssignAgentModalProps) => {\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst [agent, setAgent] = useState('');\\n\\tconst [extension, setExtension] = useState(existingExtension || '');\\n\\tconst query = useMemo(() => ({ type: 'available' as const, userId: agent }), [agent]);\\n\\n\\tconst assignAgent = useEndpoint('POST', '/v1/omnichannel/agent/extension');\\n\\n\\tconst handleAssignment = useMutableCallback(async (e) => {\\n\\t\\te.preventDefault();\\n\\t\\ttry {\\n\\t\\t\\tawait assignAgent({ username: agent, extension });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t\\treload();\\n\\t\\tcloseModal();\\n\\t});\\n\\tconst handleAgentChange = useMutableCallback((e) => setAgent(e));\\n\\n\\tconst { value: availableExtensions, phase: state } = useEndpointData('/v1/omnichannel/extension', { params: query });\\n\\n\\treturn (\\n\\t\\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleAssignment} {...props} />}>\\n\\t\\t\\t<Modal.Header>\\n\\t\\t\\t\\t<Modal.Title>{t('Associate_Agent_to_Extension')}</Modal.Title>\\n\\t\\t\\t\\t<Modal.Close onClick={closeModal} />\\n\\t\\t\\t</Modal.Header>\\n\\t\\t\\t<Modal.Content>\\n\\t\\t\\t\\t<FieldGroup>\\n\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t<FieldLabel>{t('Agent_Without_Extensions')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<AutoCompleteAgentWithoutExtension value={agent} onChange={handleAgentChange} currentExtension={extension} />\\n\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t<FieldLabel>{t('Free_Extension_Numbers')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<Select\\n\\t\\t\\t\\t\\t\\t\\t\\tdisabled={state === AsyncStatePhase.LOADING || agent === ''}\\n\\t\\t\\t\\t\\t\\t\\t\\toptions={availableExtensions?.extensions?.map((extension) => [extension, extension]) || []}\\n\\t\\t\\t\\t\\t\\t\\t\\tvalue={extension}\\n\\t\\t\\t\\t\\t\\t\\t\\tplaceholder={t('Select_an_option')}\\n\\t\\t\\t\\t\\t\\t\\t\\tonChange={(value) => setExtension(String(value))}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t</FieldGroup>\\n\\t\\t\\t</Modal.Content>\\n\\t\\t\\t<Modal.Footer>\\n\\t\\t\\t\\t<Modal.FooterControllers>\\n\\t\\t\\t\\t\\t<Button onClick={closeModal}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button primary disabled={!agent || !extension} type='submit'>\\n\\t\\t\\t\\t\\t\\t{t('Associate')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</Modal.FooterControllers>\\n\\t\\t\\t</Modal.Footer>\\n\\t\\t</Modal>\\n\\t);\\n};\\n\\nexport default AssignAgentModal;\\n\",null],\"names\":[\"_extends\",\"Button\",\"Modal\",\"Select\",\"Field\",\"FieldGroup\",\"FieldLabel\",\"FieldRow\",\"Box\",\"useMutableCallback\",\"useToastMessageDispatch\",\"useEndpoint\",\"useTranslation\",\"React\",\"useState\",\"useMemo\",\"AutoCompleteAgentWithoutExtension\",\"AsyncStatePhase\",\"useEndpointData\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_availableExtensions$\",\"existingExtension\",\"closeModal\",\"reload\",\"t\",\"dispatchToastMessage\",\"agent\",\"setAgent\",\"extension\",\"setExtension\",\"query\",\"type\",\"userId\",\"assignAgent\",\"handleAssignment\",\"e\",\"preventDefault\",\"username\",\"error\",\"message\",\"handleAgentChange\",\"value\",\"availableExtensions\",\"phase\",\"state\",\"params\",\"createElement\",\"wrapperFunction\",\"props\",\"is\",\"onSubmit\",\"Header\",\"Title\",\"Close\",\"onClick\",\"Content\",\"onChange\",\"currentExtension\",\"disabled\",\"LOADING\",\"options\",\"extensions\",\"map\",\"placeholder\",\"String\",\"Footer\",\"FooterControllers\",\"primary\"],\"mappings\":\"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\"}"}