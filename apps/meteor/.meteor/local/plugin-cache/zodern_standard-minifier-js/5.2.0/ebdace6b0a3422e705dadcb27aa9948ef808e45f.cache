{"code":"function module(e,t,i){var n,r,a,s,o,c,u,d,p,l,v,I,h,f=[\"type\",\"triggerId\"];i.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){n=e}},0),i.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},1),i.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){a=e}},2),i.export({ActionManager:function(){return g}}),i.link(\"@rocket.chat/emitter\",{Emitter:function(e){s=e}},0),i.link(\"@rocket.chat/random\",{Random:function(e){o=e}},1),i.link(\"i18next\",{t:function(e){c=e}},2),i.link(\"react\",{lazy:function(e){u=e}},3),i.link(\"../../../client/lib/banners\",{\"*\":function(e){d=e}},4),i.link(\"../../../client/lib/imperativeModal\",{imperativeModal:function(e){p=e}},5),i.link(\"../../../client/lib/toast\",{dispatchToastMessage:function(e){l=e}},6),i.link(\"../../../lib/utils/exhaustiveCheck\",{exhaustiveCheck:function(e){v=e}},7),i.link(\"../../utils/client/lib/SDKClient\",{sdk:function(e){I=e}},8),i.link(\"./UiKitTriggerTimeoutError\",{UiKitTriggerTimeoutError:function(e){h=e}},9);var w=u(function(){return i.dynamicImport(\"../../../client/views/modal/uikit/UiKitModal\")}),g=function(){function e(e){this.router=void 0,this.events=new s,this.appIdByTriggerId=new Map,this.viewInstances=new Map,this.router=e}var t=e.prototype;return t.invalidateTriggerId=function(e){var t=this.appIdByTriggerId.get(e);return this.appIdByTriggerId.delete(e),t},t.on=function(e,t){return this.events.on(e,t)},t.off=function(e,t){return this.events.off(e,t)},t.notifyBusy=function(){this.events.emit(\"busy\",{busy:!0})},t.notifyIdle=function(){this.events.emit(\"busy\",{busy:!1})},t.generateTriggerId=function(t){var i=this,n=o.id();return this.appIdByTriggerId.set(n,t),setTimeout(function(){return i.invalidateTriggerId(n)},e.TRIGGER_TIMEOUT),n},t.emitInteraction=function(e,t){var i,n=this;return r.async(function(s){for(;;)switch(s.prev=s.next){case 0:return i=this.generateTriggerId(e),s.abrupt(\"return\",this.runWithTimeout(function s(){var s;return r.async(function o(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,r.awrap(I.rest.post(\"/apps/ui.interaction/\"+e,a(a({},t),{},{triggerId:i})));case 3:s=o.sent,n.handleServerInteraction(s);case 5:o.prev=5,o.t0=t.type,o.next=\"viewSubmit\"===o.t0?9:\"viewClosed\"===o.t0?11:13;break;case 9:return s&&![\"errors\",\"modal.update\",\"contextual_bar.update\"].includes(s.type)&&n.disposeView(t.viewId),o.abrupt(\"break\",13);case 11:return s&&\"errors\"!==s.type&&n.disposeView(t.payload.viewId),o.abrupt(\"break\",13);case 13:return o.finish(5);case 14:case\"end\":return o.stop()}},null,null,[[0,,5,14]],Promise)},a({triggerId:i,appId:e},\"viewId\"in t?{viewId:t.viewId}:{})));case 2:case\"end\":return s.stop()}},null,this,null,Promise)},t.runWithTimeout=function(t,i){var n,a,s;return r.async(function(o){for(;;)switch(o.prev=o.next){case 0:return this.notifyBusy(),o.prev=1,a=t(),s=new Promise(function(t,r){n=setTimeout(function(){r(new h(\"Timeout\",i))},e.TRIGGER_TIMEOUT)}),o.next=6,r.awrap(Promise.race([a,s]));case 6:return o.abrupt(\"return\",o.sent);case 9:o.prev=9,o.t0=o.catch(1),o.t0 instanceof h&&(l({type:\"error\",message:c(\"UIKit_Interaction_Timeout\")}),i.viewId&&this.disposeView(i.viewId));case 12:return o.prev=12,n&&clearTimeout(n),this.notifyIdle(),o.finish(12);case 16:case\"end\":return o.stop()}},null,this,[[1,9,12,16]],Promise)},t.handleServerInteraction=function(e){var t=e.triggerId;if(this.invalidateTriggerId(t)){switch(e.type){case\"errors\":var i=e.type,r=e.triggerId,a=e.viewId,s=e.appId,o=e.errors;this.events.emit(e.viewId,{type:i,triggerId:r,viewId:a,appId:s,errors:o});break;case\"modal.open\":var c=e.view;this.openModal(c);break;case\"modal.update\":case\"contextual_bar.update\":var u=e.type,d=e.triggerId,p=e.appId,l=e.view;this.events.emit(l.id,{type:u,triggerId:d,viewId:l.id,appId:p,view:l});break;case\"modal.close\":break;case\"banner.open\":e.type,e.triggerId;var I=n(e,f);this.openBanner(I);break;case\"banner.update\":var h=e.type,w=e.triggerId,g=e.appId,b=e.view;this.events.emit(b.viewId,{type:h,triggerId:w,viewId:b.viewId,appId:g,view:b});break;case\"banner.close\":var m=e.viewId;this.disposeView(m);break;case\"contextual_bar.open\":var y=e.view;this.openContextualBar(y);break;case\"contextual_bar.close\":var T=e.view;this.disposeView(T.id);break;default:v(e)}return e.type}},t.getInteractionPayloadByViewId=function(e){var t;if(!e)throw Error(\"No viewId provided when checking for `user interaction payload`\");return null===(t=this.viewInstances.get(e))||void 0===t?void 0:t.payload},t.openView=function(e,t){switch(e){case\"modal\":this.openModal(t);break;case\"banner\":this.openBanner(t);break;case\"contextual_bar\":this.openContextualBar(t)}},t.openModal=function(e){var t=this,i=p.open({component:w,props:{key:e.id,initialView:e}});this.viewInstances.set(e.id,{close:function(){i.close(),t.viewInstances.delete(e.id)}})},t.openBanner=function(e){d.open(e),this.viewInstances.set(e.viewId,{close:function(){d.closeById(e.viewId)}})},t.openContextualBar=function(e){var t=this;this.viewInstances.set(e.id,{payload:{view:e},close:function(){t.viewInstances.delete(e.id)}});var i=this.router.getRouteName(),n=this.router.getRouteParameters();i&&this.router.navigate({name:i,params:a(a({},n),{},{tab:\"app\",context:e.id})})},t.disposeView=function(e){var t,i=this.viewInstances.get(e);null==i||null===(t=i.close)||void 0===t||t.call(i),this.viewInstances.delete(e)},e}();g.TRIGGER_TIMEOUT=5e3,g.TRIGGER_TIMEOUT_ERROR=\"TRIGGER_TIMEOUT_ERROR\"}","map":"{\"version\":3,\"sources\":[\"app/ui-message/client/ActionManager.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { DistributiveOmit } from '@rocket.chat/core-typings';\\nimport { Emitter } from '@rocket.chat/emitter';\\nimport { Random } from '@rocket.chat/random';\\nimport type { RouterContext, IActionManager } from '@rocket.chat/ui-contexts';\\nimport type * as UiKit from '@rocket.chat/ui-kit';\\nimport { t } from 'i18next';\\nimport type { ContextType } from 'react';\\nimport { lazy } from 'react';\\n\\nimport * as banners from '../../../client/lib/banners';\\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\\nimport { dispatchToastMessage } from '../../../client/lib/toast';\\nimport { exhaustiveCheck } from '../../../lib/utils/exhaustiveCheck';\\nimport { sdk } from '../../utils/client/lib/SDKClient';\\nimport { UiKitTriggerTimeoutError } from './UiKitTriggerTimeoutError';\\n\\nconst UiKitModal = lazy(() => import('../../../client/views/modal/uikit/UiKitModal'));\\n\\nexport class ActionManager implements IActionManager {\\n\\tprotected static TRIGGER_TIMEOUT = 5000;\\n\\n\\tprotected static TRIGGER_TIMEOUT_ERROR = 'TRIGGER_TIMEOUT_ERROR';\\n\\n\\tprotected events = new Emitter<{ busy: { busy: boolean }; [viewId: string]: any }>();\\n\\n\\tprotected appIdByTriggerId = new Map<string, string | undefined>();\\n\\n\\tprotected viewInstances = new Map<\\n\\t\\tstring,\\n\\t\\t{\\n\\t\\t\\tpayload?: {\\n\\t\\t\\t\\tview: UiKit.ContextualBarView;\\n\\t\\t\\t};\\n\\t\\t\\tclose: () => void;\\n\\t\\t}\\n\\t>();\\n\\n\\tpublic constructor(protected router: ContextType<typeof RouterContext>) {}\\n\\n\\tprotected invalidateTriggerId(id: string) {\\n\\t\\tconst appId = this.appIdByTriggerId.get(id);\\n\\t\\tthis.appIdByTriggerId.delete(id);\\n\\t\\treturn appId;\\n\\t}\\n\\n\\tpublic on(viewId: string, listener: (data: any) => void): void;\\n\\n\\tpublic on(eventName: 'busy', listener: ({ busy }: { busy: boolean }) => void): void;\\n\\n\\tpublic on(eventName: string, listener: (data: any) => void) {\\n\\t\\treturn this.events.on(eventName, listener);\\n\\t}\\n\\n\\tpublic off(viewId: string, listener: (data: any) => any): void;\\n\\n\\tpublic off(eventName: 'busy', listener: ({ busy }: { busy: boolean }) => void): void;\\n\\n\\tpublic off(eventName: string, listener: (data: any) => void) {\\n\\t\\treturn this.events.off(eventName, listener);\\n\\t}\\n\\n\\tpublic notifyBusy() {\\n\\t\\tthis.events.emit('busy', { busy: true });\\n\\t}\\n\\n\\tpublic notifyIdle() {\\n\\t\\tthis.events.emit('busy', { busy: false });\\n\\t}\\n\\n\\tpublic generateTriggerId(appId: string | undefined) {\\n\\t\\tconst triggerId = Random.id();\\n\\t\\tthis.appIdByTriggerId.set(triggerId, appId);\\n\\t\\tsetTimeout(() => this.invalidateTriggerId(triggerId), ActionManager.TRIGGER_TIMEOUT);\\n\\t\\treturn triggerId;\\n\\t}\\n\\n\\tpublic async emitInteraction(appId: string, userInteraction: DistributiveOmit<UiKit.UserInteraction, 'triggerId'>) {\\n\\t\\tconst triggerId = this.generateTriggerId(appId);\\n\\n\\t\\treturn this.runWithTimeout(\\n\\t\\t\\tasync () => {\\n\\t\\t\\t\\tlet interaction: UiKit.ServerInteraction | undefined;\\n\\n\\t\\t\\t\\ttry {\\n\\t\\t\\t\\t\\tinteraction = (await sdk.rest.post(`/apps/ui.interaction/${appId}`, {\\n\\t\\t\\t\\t\\t\\t...userInteraction,\\n\\t\\t\\t\\t\\t\\ttriggerId,\\n\\t\\t\\t\\t\\t})) as UiKit.ServerInteraction;\\n\\n\\t\\t\\t\\t\\tthis.handleServerInteraction(interaction);\\n\\t\\t\\t\\t} finally {\\n\\t\\t\\t\\t\\tswitch (userInteraction.type) {\\n\\t\\t\\t\\t\\t\\tcase 'viewSubmit':\\n\\t\\t\\t\\t\\t\\t\\tif (!!interaction && !['errors', 'modal.update', 'contextual_bar.update'].includes(interaction.type))\\n\\t\\t\\t\\t\\t\\t\\t\\tthis.disposeView(userInteraction.viewId);\\n\\t\\t\\t\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\t\\t\\t\\tcase 'viewClosed':\\n\\t\\t\\t\\t\\t\\t\\tif (!!interaction && interaction.type !== 'errors') this.disposeView(userInteraction.payload.viewId);\\n\\t\\t\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\t{ triggerId, appId, ...('viewId' in userInteraction ? { viewId: userInteraction.viewId } : {}) },\\n\\t\\t);\\n\\t}\\n\\n\\tprotected async runWithTimeout<T>(task: () => Promise<T>, details: { triggerId: string; appId: string; viewId?: string }) {\\n\\t\\tthis.notifyBusy();\\n\\n\\t\\tlet timer: ReturnType<typeof setTimeout> | undefined;\\n\\n\\t\\ttry {\\n\\t\\t\\tconst taskPromise = task();\\n\\t\\t\\tconst timeoutPromise = new Promise<T>((_, reject) => {\\n\\t\\t\\t\\ttimer = setTimeout(() => {\\n\\t\\t\\t\\t\\treject(new UiKitTriggerTimeoutError('Timeout', details));\\n\\t\\t\\t\\t}, ActionManager.TRIGGER_TIMEOUT);\\n\\t\\t\\t});\\n\\n\\t\\t\\treturn await Promise.race([taskPromise, timeoutPromise]);\\n\\t\\t} catch (error) {\\n\\t\\t\\tif (error instanceof UiKitTriggerTimeoutError) {\\n\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\t\\tmessage: t('UIKit_Interaction_Timeout'),\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tif (details.viewId) {\\n\\t\\t\\t\\t\\tthis.disposeView(details.viewId);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t} finally {\\n\\t\\t\\tif (timer) clearTimeout(timer);\\n\\t\\t\\tthis.notifyIdle();\\n\\t\\t}\\n\\t}\\n\\n\\tpublic handleServerInteraction(interaction: UiKit.ServerInteraction): UiKit.ServerInteraction['type'] | undefined {\\n\\t\\tconst { triggerId } = interaction;\\n\\n\\t\\tconst appId = this.invalidateTriggerId(triggerId);\\n\\t\\tif (!appId) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tswitch (interaction.type) {\\n\\t\\t\\tcase 'errors': {\\n\\t\\t\\t\\tconst { type, triggerId, viewId, appId, errors } = interaction;\\n\\t\\t\\t\\tthis.events.emit(interaction.viewId, {\\n\\t\\t\\t\\t\\ttype,\\n\\t\\t\\t\\t\\ttriggerId,\\n\\t\\t\\t\\t\\tviewId,\\n\\t\\t\\t\\t\\tappId,\\n\\t\\t\\t\\t\\terrors,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\n\\t\\t\\tcase 'modal.open': {\\n\\t\\t\\t\\tconst { view } = interaction;\\n\\t\\t\\t\\tthis.openModal(view);\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\n\\t\\t\\tcase 'modal.update':\\n\\t\\t\\tcase 'contextual_bar.update': {\\n\\t\\t\\t\\tconst { type, triggerId, appId, view } = interaction;\\n\\t\\t\\t\\tthis.events.emit(view.id, {\\n\\t\\t\\t\\t\\ttype,\\n\\t\\t\\t\\t\\ttriggerId,\\n\\t\\t\\t\\t\\tviewId: view.id,\\n\\t\\t\\t\\t\\tappId,\\n\\t\\t\\t\\t\\tview,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\n\\t\\t\\tcase 'modal.close': {\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\n\\t\\t\\tcase 'banner.open': {\\n\\t\\t\\t\\tconst { type, triggerId, ...view } = interaction;\\n\\t\\t\\t\\tthis.openBanner(view);\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\n\\t\\t\\tcase 'banner.update': {\\n\\t\\t\\t\\tconst { type, triggerId, appId, view } = interaction;\\n\\t\\t\\t\\tthis.events.emit(view.viewId, {\\n\\t\\t\\t\\t\\ttype,\\n\\t\\t\\t\\t\\ttriggerId,\\n\\t\\t\\t\\t\\tviewId: view.viewId,\\n\\t\\t\\t\\t\\tappId,\\n\\t\\t\\t\\t\\tview,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\n\\t\\t\\tcase 'banner.close': {\\n\\t\\t\\t\\tconst { viewId } = interaction;\\n\\t\\t\\t\\tthis.disposeView(viewId);\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\n\\t\\t\\tcase 'contextual_bar.open': {\\n\\t\\t\\t\\tconst { view } = interaction;\\n\\t\\t\\t\\tthis.openContextualBar(view);\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\n\\t\\t\\tcase 'contextual_bar.close': {\\n\\t\\t\\t\\tconst { view } = interaction;\\n\\t\\t\\t\\tthis.disposeView(view.id);\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\n\\t\\t\\tdefault:\\n\\t\\t\\t\\texhaustiveCheck(interaction);\\n\\t\\t}\\n\\n\\t\\treturn interaction.type;\\n\\t}\\n\\n\\tpublic getInteractionPayloadByViewId(viewId: UiKit.ContextualBarView['id']) {\\n\\t\\tif (!viewId) {\\n\\t\\t\\tthrow new Error('No viewId provided when checking for `user interaction payload`');\\n\\t\\t}\\n\\n\\t\\treturn this.viewInstances.get(viewId)?.payload;\\n\\t}\\n\\n\\tpublic openView(surface: 'modal', view: UiKit.ModalView): void;\\n\\n\\tpublic openView(surface: 'banner', view: UiKit.BannerView): void;\\n\\n\\tpublic openView(surface: 'contextual_bar', view: UiKit.ContextualBarView): void;\\n\\n\\tpublic openView(surface: string, view: UiKit.View) {\\n\\t\\tswitch (surface) {\\n\\t\\t\\tcase 'modal':\\n\\t\\t\\t\\tthis.openModal(view as UiKit.ModalView);\\n\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\tcase 'banner':\\n\\t\\t\\t\\tthis.openBanner(view as UiKit.BannerView);\\n\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\tcase 'contextual_bar':\\n\\t\\t\\t\\tthis.openContextualBar(view as UiKit.ContextualBarView);\\n\\t\\t\\t\\tbreak;\\n\\t\\t}\\n\\t}\\n\\n\\tprivate openModal(view: UiKit.ModalView) {\\n\\t\\tconst instance = imperativeModal.open({\\n\\t\\t\\tcomponent: UiKitModal,\\n\\t\\t\\tprops: {\\n\\t\\t\\t\\tkey: view.id,\\n\\t\\t\\t\\tinitialView: view,\\n\\t\\t\\t},\\n\\t\\t});\\n\\n\\t\\tthis.viewInstances.set(view.id, {\\n\\t\\t\\tclose: () => {\\n\\t\\t\\t\\tinstance.close();\\n\\t\\t\\t\\tthis.viewInstances.delete(view.id);\\n\\t\\t\\t},\\n\\t\\t});\\n\\t}\\n\\n\\tprivate openBanner(view: UiKit.BannerView) {\\n\\t\\tbanners.open(view);\\n\\t\\tthis.viewInstances.set(view.viewId, {\\n\\t\\t\\tclose: () => {\\n\\t\\t\\t\\tbanners.closeById(view.viewId);\\n\\t\\t\\t},\\n\\t\\t});\\n\\t}\\n\\n\\tprivate openContextualBar(view: UiKit.ContextualBarView) {\\n\\t\\tthis.viewInstances.set(view.id, {\\n\\t\\t\\tpayload: {\\n\\t\\t\\t\\tview,\\n\\t\\t\\t},\\n\\t\\t\\tclose: () => {\\n\\t\\t\\t\\tthis.viewInstances.delete(view.id);\\n\\t\\t\\t},\\n\\t\\t});\\n\\n\\t\\tconst routeName = this.router.getRouteName();\\n\\t\\tconst routeParams = this.router.getRouteParameters();\\n\\n\\t\\tif (!routeName) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tthis.router.navigate({\\n\\t\\t\\tname: routeName,\\n\\t\\t\\tparams: {\\n\\t\\t\\t\\t...routeParams,\\n\\t\\t\\t\\ttab: 'app',\\n\\t\\t\\t\\tcontext: view.id,\\n\\t\\t\\t},\\n\\t\\t});\\n\\t}\\n\\n\\tpublic disposeView(viewId: UiKit.ModalView['id'] | UiKit.BannerView['viewId'] | UiKit.ContextualBarView['id']) {\\n\\t\\tconst instance = this.viewInstances.get(viewId);\\n\\t\\tinstance?.close?.();\\n\\t\\tthis.viewInstances.delete(viewId);\\n\\t}\\n}\\n\",null],\"names\":[\"_objectWithoutProperties\",\"_regeneratorRuntime\",\"_objectSpread\",\"Emitter\",\"Random\",\"t\",\"lazy\",\"banners\",\"imperativeModal\",\"dispatchToastMessage\",\"exhaustiveCheck\",\"sdk\",\"UiKitTriggerTimeoutError\",\"module\",\"link\",\"default\",\"v\",\"export\",\"ActionManager\",\"UiKitModal\",\"dynamicImport\",\"router\",\"events\",\"appIdByTriggerId\",\"Map\",\"viewInstances\",\"_proto\",\"prototype\",\"invalidateTriggerId\",\"id\",\"appId\",\"get\",\"delete\",\"on\",\"eventName\",\"listener\",\"off\",\"notifyBusy\",\"emit\",\"busy\",\"notifyIdle\",\"generateTriggerId\",\"_this\",\"triggerId\",\"set\",\"setTimeout\",\"TRIGGER_TIMEOUT\",\"emitInteraction\",\"userInteraction\",\"_this2\",\"async\",\"_context2\",\"prev\",\"next\",\"abrupt\",\"runWithTimeout\",\"_callee\",\"interaction\",\"_callee$\",\"_context\",\"awrap\",\"rest\",\"post\",\"sent\",\"handleServerInteraction\",\"t0\",\"type\",\"includes\",\"disposeView\",\"viewId\",\"payload\",\"finish\",\"stop\",\"Promise\",\"task\",\"details\",\"timer\",\"taskPromise\",\"timeoutPromise\",\"_context3\",\"_\",\"reject\",\"race\",\"message\",\"clearTimeout\",\"errors\",\"view\",\"openModal\",\"_excluded\",\"openBanner\",\"openContextualBar\",\"getInteractionPayloadByViewId\",\"_this$viewInstances$g\",\"Error\",\"openView\",\"surface\",\"_this3\",\"instance\",\"open\",\"component\",\"props\",\"key\",\"initialView\",\"close\",\"closeById\",\"_this4\",\"routeName\",\"getRouteName\",\"routeParams\",\"getRouteParameters\",\"navigate\",\"name\",\"params\",\"tab\",\"context\",\"_instance$close\",\"call\",\"TRIGGER_TIMEOUT_ERROR\"],\"mappings\":\"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\"}"}