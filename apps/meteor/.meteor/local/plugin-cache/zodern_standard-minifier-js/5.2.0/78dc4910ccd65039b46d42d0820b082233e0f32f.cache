{"code":"function module(n,e,t){t.link(\"@babel/runtime/regenerator\",{default:function(n){o=n}},0),t.export({useRoomConvertToTeam:function(){return p}}),t.link(\"@rocket.chat/core-typings\",{isRoomFederated:function(n){r=n}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(n){c=n}},1),t.link(\"@rocket.chat/ui-contexts\",{useSetModal:function(n){a=n},useToastMessageDispatch:function(n){u=n},useTranslation:function(n){i=n},useEndpoint:function(n){s=n},usePermission:function(n){l=n}},2),t.link(\"react\",{default:function(n){f=n}},3),t.link(\"../../../../../../components/GenericModal\",{default:function(n){m=n}},4),t.link(\"../useCanEditRoom\",{useCanEditRoom:function(n){d=n}},5);var o,r,c,a,u,i,s,l,f,m,d,p=function(n){var e=i(),t=a(),p=u(),v=d(n),h=l(\"create-team\"),k=!r(n)&&h,C=!n.teamId&&!n.prid&&k&&v,T=s(\"POST\",\"c\"===n.t?\"/v1/channels.convertToTeam\":\"/v1/groups.convertToTeam\"),g=c(function(){var r;return o.async(function(c){for(;;)switch(c.prev=c.next){case 0:r=function r(){return o.async(function r(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.awrap(T(\"c\"===n.t?{channelId:n._id}:{roomId:n._id}));case 3:p({type:\"success\",message:e(\"Room_has_been_converted\")}),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),p({type:\"error\",message:r.t0});case 9:return r.prev=9,t(null),r.finish(9);case 12:case\"end\":return r.stop()}},null,null,[[0,6,9,12]],Promise)},t(f.createElement(m,{title:e(\"Confirmation\"),variant:\"warning\",onClose:function(){return t(null)},onCancel:function(){return t(null)},onConfirm:r,confirmText:e(\"Convert\")},e(\"Converting_channel_to_a_team\")));case 2:case\"end\":return c.stop()}},null,null,null,Promise)});return C?g:null}}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/Info/hooks/actions/useRoomConvertToTeam.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { isRoomFederated } from '@rocket.chat/core-typings';\\nimport type { IRoom } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useSetModal, useToastMessageDispatch, useTranslation, useEndpoint, usePermission } from '@rocket.chat/ui-contexts';\\nimport React from 'react';\\n\\nimport GenericModal from '../../../../../../components/GenericModal';\\nimport { useCanEditRoom } from '../useCanEditRoom';\\n\\nexport const useRoomConvertToTeam = (room: IRoom) => {\\n\\tconst t = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst canEdit = useCanEditRoom(room);\\n\\tconst hasPermissionToConvertRoomToTeam = usePermission('create-team');\\n\\tconst canConvertRoomToTeam = isRoomFederated(room) ? false : hasPermissionToConvertRoomToTeam;\\n\\tconst allowConvertToTeam = !room.teamId && !room.prid && canConvertRoomToTeam && canEdit;\\n\\n\\tconst convertRoomToTeam = useEndpoint('POST', room.t === 'c' ? '/v1/channels.convertToTeam' : '/v1/groups.convertToTeam');\\n\\n\\tconst handleConvertToTeam = useMutableCallback(async () => {\\n\\t\\tconst onConfirm = async () => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tawait convertRoomToTeam(room.t === 'c' ? { channelId: room._id } : { roomId: room._id });\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Room_has_been_converted') });\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t} finally {\\n\\t\\t\\t\\tsetModal(null);\\n\\t\\t\\t}\\n\\t\\t};\\n\\n\\t\\tsetModal(\\n\\t\\t\\t<GenericModal\\n\\t\\t\\t\\ttitle={t('Confirmation')}\\n\\t\\t\\t\\tvariant='warning'\\n\\t\\t\\t\\tonClose={() => setModal(null)}\\n\\t\\t\\t\\tonCancel={() => setModal(null)}\\n\\t\\t\\t\\tonConfirm={onConfirm}\\n\\t\\t\\t\\tconfirmText={t('Convert')}\\n\\t\\t\\t>\\n\\t\\t\\t\\t{t('Converting_channel_to_a_team')}\\n\\t\\t\\t</GenericModal>,\\n\\t\\t);\\n\\t});\\n\\n\\treturn allowConvertToTeam ? handleConvertToTeam : null;\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"export\",\"useRoomConvertToTeam\",\"isRoomFederated\",\"useMutableCallback\",\"useSetModal\",\"useToastMessageDispatch\",\"useTranslation\",\"useEndpoint\",\"usePermission\",\"React\",\"GenericModal\",\"useCanEditRoom\",\"room\",\"t\",\"setModal\",\"dispatchToastMessage\",\"canEdit\",\"hasPermissionToConvertRoomToTeam\",\"canConvertRoomToTeam\",\"allowConvertToTeam\",\"teamId\",\"prid\",\"convertRoomToTeam\",\"handleConvertToTeam\",\"onConfirm\",\"async\",\"_context2\",\"prev\",\"next\",\"_callee\",\"_callee$\",\"_context\",\"awrap\",\"channelId\",\"_id\",\"roomId\",\"type\",\"message\",\"t0\",\"finish\",\"stop\",\"Promise\",\"createElement\",\"title\",\"variant\",\"onClose\",\"onCancel\",\"confirmText\"],\"mappings\":\"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\"}"}