{"code":"function module(e,t,r){let s,n,i,o,a,l,m,c,p,u,d,g,_,f,x,h,E,y,k,$,C,R,I;r.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){s=e}},0),r.link(\"@rocket.chat/core-typings\",{isOmnichannelRoom(e){n=e}},0),r.link(\"@rocket.chat/fuselage-hooks\",{useLocalStorage(e){i=e}},1),r.link(\"@rocket.chat/string-helpers\",{escapeRegExp(e){o=e}},2),r.link(\"@rocket.chat/ui-contexts\",{useMethod(e){a=e},useSetting(e){l=e},useUserPreference(e){m=e}},3),r.link(\"react\",{default(e){c=e},useMemo(e){p=e}},4),r.link(\"react-i18next\",{useTranslation(e){u=e}},5),r.link(\"../../../../app/authorization/client\",{hasAtLeastOnePermission(e){d=e}},6),r.link(\"../../../../app/canned-responses/client/collections/CannedResponse\",{CannedResponse(e){g=e}},7),r.link(\"../../../../app/emoji/client\",{emoji(e){_=e}},8),r.link(\"../../../../app/models/client\",{Subscriptions(e){f=e}},9),r.link(\"../../../../app/ui-message/client/popup/messagePopupConfig\",{usersFromRoomMessages(e){x=e}},10),r.link(\"../../../../app/utils/client\",{slashCommands(e){h=e}},11),r.link(\"../composer/ComposerBoxPopupCannedResponse\",{default(e){E=e}},12),r.link(\"../composer/ComposerBoxPopupEmoji\",{default(e){y=e}},13),r.link(\"../composer/ComposerBoxPopupRoom\",{default(e){k=e}},14),r.link(\"../composer/ComposerBoxPopupSlashCommand\",{default(e){$=e}},15),r.link(\"../composer/ComposerBoxPopupUser\",{default(e){C=e}},16),r.link(\"../contexts/ComposerPopupContext\",{ComposerPopupContext(e){R=e},createMessageBoxPopupConfig(e){I=e}},17),r.exportDefault(e=>{let{children:t,room:r}=e,{_id:v,encrypted:b}=r,F=a(\"spotlight\"),P=l(\"Number_of_users_autocomplete_suggestions\"),S=l(\"Canned_Responses_Enable\"),[j]=i(\"emoji.recent\",[]),w=n(r),L=m(\"useEmojis\"),{t:O,i18n:B}=u(),A=l(\"E2E_Enable\"),M=l(\"E2E_Allow_Unencrypted_Messages\"),V=b&&A&&!M,N=a(\"getSlashCommandPreviews\"),U=p(()=>[I({trigger:\"@\",title:O(\"People\"),getItemsFromLocal:async e=>{let t=e&&RegExp(o(e),\"i\"),r=[],n=x.find(s({ts:{$exists:!0}},e&&{$or:[{username:t},{name:t}]}),{limit:null!=P?P:5,sort:{ts:-1}}).fetch().map(e=>(e.suggestion=!0,e));return(!t||t.test(\"all\"))&&r.push({_id:\"all\",username:\"all\",system:!0,name:O(\"Notify_all_in_this_room\"),sort:4}),(!t||t.test(\"here\"))&&r.push({_id:\"here\",username:\"here\",system:!0,name:O(\"Notify_active_in_this_room\"),sort:4}),[...n,...r]},getItemsFromServer:async e=>{let t=e&&RegExp(o(e),\"i\"),r=x.find(s({ts:{$exists:!0}},e&&{$or:[{username:t},{name:t}]}),{limit:null!=P?P:5,sort:{ts:-1}}).fetch().map(e=>e.username),{users:n=[]}=await F(e,r,{users:!0,mentions:!0},v);return n.map(e=>{let{_id:t,username:r,nickname:s,name:n,status:i,avatarETag:o,outside:a}=e;return{_id:t,username:r,nickname:s,name:n,status:i,avatarETag:o,outside:a,sort:3}})},getValue:e=>e.username,renderItem:e=>{let{item:t}=e;return c.createElement(C,t)}}),I({trigger:\"#\",title:O(\"Channels\"),getItemsFromLocal:async e=>{let t=RegExp(o(e),\"i\"),r=f.find({$and:[{$or:[{fname:t},{name:t}]},{$or:[{federated:{$exists:!1}},{federated:!1}]}],t:{$in:[\"c\",\"p\"]}},{limit:null!=P?P:5,sort:{ls:-1}}).fetch();return r},getItemsFromServer:async e=>{let{rooms:t=[]}=await F(e,[],{rooms:!0,mentions:!0},v);return t},getValue:e=>\"\".concat(e.name||e.fname),renderItem:e=>{let{item:t}=e;return c.createElement(k,t)}}),L&&I({trigger:\":\",title:O(\"Emoji\"),triggerLength:2,getItemsFromLocal:async e=>{let t=RegExp(\"^tone[1-5]:*$\"),r=RegExp(\"tone[1-5]:*$\"),s=RegExp(\"_t(?:o|$)(?:n|$)(?:e|$)(?:[1-5]|$)(?::|$)$\"),n=RegExp(o(e),\"i\"),i=\":\".concat(e),a=j.map(e=>\":\".concat(e,\":\")),l=_.list;return Object.keys(l).map(e=>{let t=l[i];return{_id:e,data:t}}).filter(e=>{let{_id:o}=e;return n.test(o)&&(t.test(o.substring(i.length))||s.test(i)||!r.test(o))}).sort((e,t)=>{let r=e._id===i?2:0,s=t._id===i?2:0,n=e._id.startsWith(i)?1:0,o=t._id.startsWith(i)?1:0,l=r+n,m=s+o;return(a.includes(e._id)&&(l+=a.indexOf(e._id)+1),a.includes(t._id)&&(m+=a.indexOf(t._id)+1),l>m)?-1:l<m?1:0}).slice(0,10)},getItemsFromServer:async()=>[],getValue:e=>\"\".concat(e._id.substring(1)),renderItem:e=>{let{item:t}=e;return c.createElement(y,t)}}),I({title:O(\"Emoji\"),trigger:\"\\\\+:\",prefix:\"+\",suffix:\" \",triggerAnywhere:!1,getItemsFromLocal:async e=>{let t=RegExp(\"^tone[1-5]:*$\"),r=RegExp(\"tone[1-5]:*$\"),s=RegExp(\"_t(?:o|$)(?:n|$)(?:e|$)(?:[1-5]|$)(?::|$)$\"),n=RegExp(o(e),\"i\"),i=\":\".concat(e),a=j.map(e=>\":\".concat(e,\":\")),l=_.list;return Object.keys(l).map(e=>{let t=l[i];return{_id:e,data:t}}).filter(e=>{let{_id:o}=e;return n.test(o)&&(t.test(o.substring(i.length))||s.test(i)||!r.test(o))}).sort((e,t)=>{let r=e._id,s=e._id;return(a.includes(e._id)&&(r=a.indexOf(e._id)+r),a.includes(t._id)&&(s=a.indexOf(t._id)+s),r<s)?-1:r>s?1:0}).slice(0,10)},getItemsFromServer:async()=>[],getValue:e=>\"\".concat(e._id),renderItem:e=>{let{item:t}=e;return c.createElement(y,t)}}),I({title:O(\"Commands\"),trigger:\"/\",suffix:\" \",triggerAnywhere:!1,disabled:V,renderItem:e=>{let{item:t}=e;return c.createElement($,t)},getItemsFromLocal:async e=>Object.keys(h.commands).map(e=>{var t;let r=h.commands[e];return s({_id:e,params:r.params&&B.exists(r.params)?O(r.params):null!==(t=r.params)&&void 0!==t?t:\"\",description:r.description&&B.exists(r.description)?O(r.description):r.description,permission:r.permission},V&&{disabled:V})}).filter(t=>{let r=t._id.indexOf(e)>-1;return!!r&&(!t.permission||d(t.permission,v))}).sort((e,t)=>e._id.localeCompare(t._id)).slice(0,11),getItemsFromServer:async()=>[]}),S&&w&&I({title:O(\"Canned_Responses\"),trigger:\"!\",prefix:\"\",triggerAnywhere:!0,renderItem:e=>{let{item:t}=e;return c.createElement(E,t)},getItemsFromLocal:async e=>{let t=RegExp(e,\"i\");return g.find({shortcut:t},{limit:12,sort:{shortcut:-1}}).fetch().map(e=>({_id:e._id,text:e.text,shortcut:e.shortcut}))},getItemsFromServer:async()=>[],getValue:e=>e.text}),I({matchSelectorRegex:/(?:^)(\\/[\\w\\d\\S]+ )[^]*$/,preview:!0,getItemsFromLocal:async e=>{var t;let{cmd:r,params:s,tmid:n}=e,i=await N({cmd:r,params:s,msg:{rid:v,tmid:n}});return null!==(t=null==i?void 0:i.items.map(e=>({_id:e.id,value:e.value,type:e.type})))&&void 0!==t?t:[]}})].filter(Boolean),[O,B,S,w,j,P,F,v,N,L,V]);return c.createElement(R.Provider,{value:U,children:t})})}","map":"{\"version\":3,\"sources\":[\"client/views/room/providers/ComposerPopupProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { isOmnichannelRoom } from '@rocket.chat/core-typings';\\nimport { useLocalStorage } from '@rocket.chat/fuselage-hooks';\\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\\nimport { useMethod, useSetting, useUserPreference } from '@rocket.chat/ui-contexts';\\nimport React, { useMemo } from 'react';\\nimport type { ReactNode } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { hasAtLeastOnePermission } from '../../../../app/authorization/client';\\nimport { CannedResponse } from '../../../../app/canned-responses/client/collections/CannedResponse';\\nimport { emoji } from '../../../../app/emoji/client';\\nimport { Subscriptions } from '../../../../app/models/client';\\nimport { usersFromRoomMessages } from '../../../../app/ui-message/client/popup/messagePopupConfig';\\nimport { slashCommands } from '../../../../app/utils/client';\\nimport ComposerBoxPopupCannedResponse from '../composer/ComposerBoxPopupCannedResponse';\\nimport type { ComposerBoxPopupEmojiProps } from '../composer/ComposerBoxPopupEmoji';\\nimport ComposerBoxPopupEmoji from '../composer/ComposerBoxPopupEmoji';\\nimport ComposerBoxPopupRoom from '../composer/ComposerBoxPopupRoom';\\nimport type { ComposerBoxPopupRoomProps } from '../composer/ComposerBoxPopupRoom';\\nimport type { ComposerBoxPopupSlashCommandProps } from '../composer/ComposerBoxPopupSlashCommand';\\nimport ComposerBoxPopupSlashCommand from '../composer/ComposerBoxPopupSlashCommand';\\nimport ComposerBoxPopupUser from '../composer/ComposerBoxPopupUser';\\nimport type { ComposerBoxPopupUserProps } from '../composer/ComposerBoxPopupUser';\\nimport type { ComposerPopupContextValue } from '../contexts/ComposerPopupContext';\\nimport { ComposerPopupContext, createMessageBoxPopupConfig } from '../contexts/ComposerPopupContext';\\n\\ntype ComposerPopupProviderProps = {\\n\\tchildren: ReactNode;\\n\\troom: IRoom;\\n};\\n\\nconst ComposerPopupProvider = ({ children, room }: ComposerPopupProviderProps) => {\\n\\tconst { _id: rid, encrypted: isRoomEncrypted } = room;\\n\\tconst userSpotlight = useMethod('spotlight');\\n\\tconst suggestionsCount = useSetting<number>('Number_of_users_autocomplete_suggestions');\\n\\tconst cannedResponseEnabled = useSetting<boolean>('Canned_Responses_Enable');\\n\\tconst [recentEmojis] = useLocalStorage('emoji.recent', []);\\n\\tconst isOmnichannel = isOmnichannelRoom(room);\\n\\tconst useEmoji = useUserPreference('useEmojis');\\n\\tconst { t, i18n } = useTranslation();\\n\\tconst e2eEnabled = useSetting<boolean>('E2E_Enable');\\n\\tconst unencryptedMessagesAllowed = useSetting<boolean>('E2E_Allow_Unencrypted_Messages');\\n\\tconst encrypted = isRoomEncrypted && e2eEnabled && !unencryptedMessagesAllowed;\\n\\n\\tconst call = useMethod('getSlashCommandPreviews');\\n\\tconst value: ComposerPopupContextValue = useMemo(() => {\\n\\t\\treturn [\\n\\t\\t\\tcreateMessageBoxPopupConfig({\\n\\t\\t\\t\\ttrigger: '@',\\n\\t\\t\\t\\ttitle: t('People'),\\n\\t\\t\\t\\tgetItemsFromLocal: async (filter: string) => {\\n\\t\\t\\t\\t\\tconst filterRegex = filter && new RegExp(escapeRegExp(filter), 'i');\\n\\t\\t\\t\\t\\tconst items: ComposerBoxPopupUserProps[] = [];\\n\\n\\t\\t\\t\\t\\tconst users = usersFromRoomMessages\\n\\t\\t\\t\\t\\t\\t.find(\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tts: { $exists: true },\\n\\t\\t\\t\\t\\t\\t\\t\\t...(filter && {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$or: [{ username: filterRegex }, { name: filterRegex }],\\n\\t\\t\\t\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tlimit: suggestionsCount ?? 5,\\n\\t\\t\\t\\t\\t\\t\\t\\tsort: { ts: -1 },\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t.fetch()\\n\\t\\t\\t\\t\\t\\t.map((u) => {\\n\\t\\t\\t\\t\\t\\t\\tu.suggestion = true;\\n\\t\\t\\t\\t\\t\\t\\treturn u;\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\tif (!filterRegex || filterRegex.test('all')) {\\n\\t\\t\\t\\t\\t\\titems.push({\\n\\t\\t\\t\\t\\t\\t\\t_id: 'all',\\n\\t\\t\\t\\t\\t\\t\\tusername: 'all',\\n\\t\\t\\t\\t\\t\\t\\tsystem: true,\\n\\t\\t\\t\\t\\t\\t\\tname: t('Notify_all_in_this_room'),\\n\\t\\t\\t\\t\\t\\t\\tsort: 4,\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tif (!filterRegex || filterRegex.test('here')) {\\n\\t\\t\\t\\t\\t\\titems.push({\\n\\t\\t\\t\\t\\t\\t\\t_id: 'here',\\n\\t\\t\\t\\t\\t\\t\\tusername: 'here',\\n\\t\\t\\t\\t\\t\\t\\tsystem: true,\\n\\t\\t\\t\\t\\t\\t\\tname: t('Notify_active_in_this_room'),\\n\\t\\t\\t\\t\\t\\t\\tsort: 4,\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\treturn [...users, ...items];\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgetItemsFromServer: async (filter: string) => {\\n\\t\\t\\t\\t\\tconst filterRegex = filter && new RegExp(escapeRegExp(filter), 'i');\\n\\t\\t\\t\\t\\tconst usernames = usersFromRoomMessages\\n\\t\\t\\t\\t\\t\\t.find(\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tts: { $exists: true },\\n\\t\\t\\t\\t\\t\\t\\t\\t...(filter && {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$or: [{ username: filterRegex }, { name: filterRegex }],\\n\\t\\t\\t\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tlimit: suggestionsCount ?? 5,\\n\\t\\t\\t\\t\\t\\t\\t\\tsort: { ts: -1 },\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t.fetch()\\n\\t\\t\\t\\t\\t\\t.map((u) => {\\n\\t\\t\\t\\t\\t\\t\\treturn u.username;\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\tconst { users = [] } = await userSpotlight(filter, usernames, { users: true, mentions: true }, rid);\\n\\n\\t\\t\\t\\t\\treturn users.map(({ _id, username, nickname, name, status, avatarETag, outside }) => {\\n\\t\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\t\\t_id,\\n\\t\\t\\t\\t\\t\\t\\tusername,\\n\\t\\t\\t\\t\\t\\t\\tnickname,\\n\\t\\t\\t\\t\\t\\t\\tname,\\n\\t\\t\\t\\t\\t\\t\\tstatus,\\n\\t\\t\\t\\t\\t\\t\\tavatarETag,\\n\\t\\t\\t\\t\\t\\t\\toutside,\\n\\t\\t\\t\\t\\t\\t\\tsort: 3,\\n\\t\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgetValue: (item) => item.username,\\n\\t\\t\\t\\trenderItem: ({ item }) => <ComposerBoxPopupUser {...item} />,\\n\\t\\t\\t}),\\n\\t\\t\\tcreateMessageBoxPopupConfig<ComposerBoxPopupRoomProps>({\\n\\t\\t\\t\\ttrigger: '#',\\n\\t\\t\\t\\ttitle: t('Channels'),\\n\\t\\t\\t\\tgetItemsFromLocal: async (filter: string) => {\\n\\t\\t\\t\\t\\tconst filterRegex = new RegExp(escapeRegExp(filter), 'i');\\n\\t\\t\\t\\t\\tconst records = Subscriptions.find(\\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t$and: [\\n\\t\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$or: [{ fname: filterRegex }, { name: filterRegex }],\\n\\t\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$or: [{ federated: { $exists: false } }, { federated: false }],\\n\\t\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t],\\n\\t\\t\\t\\t\\t\\t\\tt: {\\n\\t\\t\\t\\t\\t\\t\\t\\t$in: ['c', 'p'],\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\tlimit: suggestionsCount ?? 5,\\n\\t\\t\\t\\t\\t\\t\\tsort: {\\n\\t\\t\\t\\t\\t\\t\\t\\tls: -1,\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t).fetch();\\n\\t\\t\\t\\t\\treturn records;\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgetItemsFromServer: async (filter: string) => {\\n\\t\\t\\t\\t\\tconst { rooms = [] } = await userSpotlight(filter, [], { rooms: true, mentions: true }, rid);\\n\\t\\t\\t\\t\\treturn rooms as unknown as ComposerBoxPopupRoomProps[];\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgetValue: (item) => `${item.name || item.fname}`,\\n\\t\\t\\t\\trenderItem: ({ item }) => <ComposerBoxPopupRoom {...item} />,\\n\\t\\t\\t}) as any,\\n\\t\\t\\tuseEmoji &&\\n\\t\\t\\t\\tcreateMessageBoxPopupConfig<ComposerBoxPopupEmojiProps>({\\n\\t\\t\\t\\t\\ttrigger: ':',\\n\\t\\t\\t\\t\\ttitle: t('Emoji'),\\n\\t\\t\\t\\t\\ttriggerLength: 2,\\n\\t\\t\\t\\t\\tgetItemsFromLocal: async (filter: string) => {\\n\\t\\t\\t\\t\\t\\tconst exactFinalTone = new RegExp('^tone[1-5]:*$');\\n\\t\\t\\t\\t\\t\\tconst colorBlind = new RegExp('tone[1-5]:*$');\\n\\t\\t\\t\\t\\t\\tconst seeColor = new RegExp('_t(?:o|$)(?:n|$)(?:e|$)(?:[1-5]|$)(?::|$)$');\\n\\n\\t\\t\\t\\t\\t\\tconst emojiSort = (recents: string[]) => (a: { _id: string }, b: { _id: string }) => {\\n\\t\\t\\t\\t\\t\\t\\tconst aExact = a._id === key ? 2 : 0;\\n\\t\\t\\t\\t\\t\\t\\tconst bExact = b._id === key ? 2 : 0;\\n\\t\\t\\t\\t\\t\\t\\tconst aPartial = a._id.startsWith(key) ? 1 : 0;\\n\\t\\t\\t\\t\\t\\t\\tconst bPartial = b._id.startsWith(key) ? 1 : 0;\\n\\n\\t\\t\\t\\t\\t\\t\\tlet aScore = aExact + aPartial;\\n\\t\\t\\t\\t\\t\\t\\tlet bScore = bExact + bPartial;\\n\\n\\t\\t\\t\\t\\t\\t\\tif (recents.includes(a._id)) {\\n\\t\\t\\t\\t\\t\\t\\t\\taScore += recents.indexOf(a._id) + 1;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\tif (recents.includes(b._id)) {\\n\\t\\t\\t\\t\\t\\t\\t\\tbScore += recents.indexOf(b._id) + 1;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\tif (aScore > bScore) {\\n\\t\\t\\t\\t\\t\\t\\t\\treturn -1;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\tif (aScore < bScore) {\\n\\t\\t\\t\\t\\t\\t\\t\\treturn 1;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\treturn 0;\\n\\t\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t\\t\\tconst filterRegex = new RegExp(escapeRegExp(filter), 'i');\\n\\t\\t\\t\\t\\t\\tconst key = `:${filter}`;\\n\\n\\t\\t\\t\\t\\t\\tconst recents = recentEmojis.map((item) => `:${item}:`);\\n\\n\\t\\t\\t\\t\\t\\tconst collection = emoji.list;\\n\\n\\t\\t\\t\\t\\t\\treturn Object.keys(collection)\\n\\t\\t\\t\\t\\t\\t\\t.map((_id) => {\\n\\t\\t\\t\\t\\t\\t\\t\\tconst data = collection[key];\\n\\t\\t\\t\\t\\t\\t\\t\\treturn { _id, data };\\n\\t\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t\\t.filter(\\n\\t\\t\\t\\t\\t\\t\\t\\t({ _id }) =>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tfilterRegex.test(_id) && (exactFinalTone.test(_id.substring(key.length)) || seeColor.test(key) || !colorBlind.test(_id)),\\n\\t\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t\\t.sort(emojiSort(recents))\\n\\t\\t\\t\\t\\t\\t\\t.slice(0, 10);\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tgetItemsFromServer: async () => {\\n\\t\\t\\t\\t\\t\\treturn [];\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tgetValue: (item) => `${item._id.substring(1)}`,\\n\\t\\t\\t\\t\\trenderItem: ({ item }) => <ComposerBoxPopupEmoji {...item} />,\\n\\t\\t\\t\\t}),\\n\\t\\t\\tcreateMessageBoxPopupConfig<ComposerBoxPopupEmojiProps>({\\n\\t\\t\\t\\ttitle: t('Emoji'),\\n\\t\\t\\t\\ttrigger: '\\\\\\\\+:',\\n\\t\\t\\t\\tprefix: '+',\\n\\t\\t\\t\\tsuffix: ' ',\\n\\t\\t\\t\\ttriggerAnywhere: false,\\n\\t\\t\\t\\tgetItemsFromLocal: async (filter: string) => {\\n\\t\\t\\t\\t\\tconst exactFinalTone = new RegExp('^tone[1-5]:*$');\\n\\t\\t\\t\\t\\tconst colorBlind = new RegExp('tone[1-5]:*$');\\n\\t\\t\\t\\t\\tconst seeColor = new RegExp('_t(?:o|$)(?:n|$)(?:e|$)(?:[1-5]|$)(?::|$)$');\\n\\n\\t\\t\\t\\t\\tconst emojiSort = (recents: string[]) => (a: { _id: string }, b: { _id: string }) => {\\n\\t\\t\\t\\t\\t\\tlet idA = a._id;\\n\\t\\t\\t\\t\\t\\tlet idB = a._id;\\n\\n\\t\\t\\t\\t\\t\\tif (recents.includes(a._id)) {\\n\\t\\t\\t\\t\\t\\t\\tidA = recents.indexOf(a._id) + idA;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\tif (recents.includes(b._id)) {\\n\\t\\t\\t\\t\\t\\t\\tidB = recents.indexOf(b._id) + idB;\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\tif (idA < idB) {\\n\\t\\t\\t\\t\\t\\t\\treturn -1;\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\tif (idA > idB) {\\n\\t\\t\\t\\t\\t\\t\\treturn 1;\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\treturn 0;\\n\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t\\tconst filterRegex = new RegExp(escapeRegExp(filter), 'i');\\n\\t\\t\\t\\t\\tconst key = `:${filter}`;\\n\\n\\t\\t\\t\\t\\tconst recents = recentEmojis.map((item) => `:${item}:`);\\n\\n\\t\\t\\t\\t\\tconst collection = emoji.list;\\n\\n\\t\\t\\t\\t\\treturn Object.keys(collection)\\n\\t\\t\\t\\t\\t\\t.map((_id) => {\\n\\t\\t\\t\\t\\t\\t\\tconst data = collection[key];\\n\\t\\t\\t\\t\\t\\t\\treturn { _id, data };\\n\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t.filter(\\n\\t\\t\\t\\t\\t\\t\\t({ _id }) =>\\n\\t\\t\\t\\t\\t\\t\\t\\tfilterRegex.test(_id) && (exactFinalTone.test(_id.substring(key.length)) || seeColor.test(key) || !colorBlind.test(_id)),\\n\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t.sort(emojiSort(recents))\\n\\t\\t\\t\\t\\t\\t.slice(0, 10);\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgetItemsFromServer: async () => {\\n\\t\\t\\t\\t\\treturn [];\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgetValue: (item) => `${item._id}`,\\n\\t\\t\\t\\trenderItem: ({ item }) => <ComposerBoxPopupEmoji {...item} />,\\n\\t\\t\\t}),\\n\\n\\t\\t\\tcreateMessageBoxPopupConfig<ComposerBoxPopupSlashCommandProps>({\\n\\t\\t\\t\\ttitle: t('Commands'),\\n\\t\\t\\t\\ttrigger: '/',\\n\\t\\t\\t\\tsuffix: ' ',\\n\\t\\t\\t\\ttriggerAnywhere: false,\\n\\t\\t\\t\\tdisabled: encrypted,\\n\\t\\t\\t\\trenderItem: ({ item }) => <ComposerBoxPopupSlashCommand {...item} />,\\n\\t\\t\\t\\tgetItemsFromLocal: async (filter: string) => {\\n\\t\\t\\t\\t\\treturn Object.keys(slashCommands.commands)\\n\\t\\t\\t\\t\\t\\t.map((command) => {\\n\\t\\t\\t\\t\\t\\t\\tconst item = slashCommands.commands[command];\\n\\t\\t\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\t\\t\\t_id: command,\\n\\t\\t\\t\\t\\t\\t\\t\\tparams: item.params && i18n.exists(item.params) ? t(item.params) : item.params ?? '',\\n\\t\\t\\t\\t\\t\\t\\t\\tdescription: item.description && i18n.exists(item.description) ? t(item.description) : item.description,\\n\\t\\t\\t\\t\\t\\t\\t\\tpermission: item.permission,\\n\\t\\t\\t\\t\\t\\t\\t\\t...(encrypted && { disabled: encrypted }),\\n\\t\\t\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t.filter((command) => {\\n\\t\\t\\t\\t\\t\\t\\tconst isMatch = command._id.indexOf(filter) > -1;\\n\\n\\t\\t\\t\\t\\t\\t\\tif (!isMatch) {\\n\\t\\t\\t\\t\\t\\t\\t\\treturn false;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\tif (!command.permission) {\\n\\t\\t\\t\\t\\t\\t\\t\\treturn true;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\treturn hasAtLeastOnePermission(command.permission, rid);\\n\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t.sort((a, b) => a._id.localeCompare(b._id))\\n\\t\\t\\t\\t\\t\\t.slice(0, 11);\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgetItemsFromServer: async () => [],\\n\\t\\t\\t}),\\n\\t\\t\\tcannedResponseEnabled &&\\n\\t\\t\\t\\tisOmnichannel &&\\n\\t\\t\\t\\tcreateMessageBoxPopupConfig<{\\n\\t\\t\\t\\t\\t_id: string;\\n\\t\\t\\t\\t\\ttext: string;\\n\\t\\t\\t\\t\\tshortcut: string;\\n\\t\\t\\t\\t}>({\\n\\t\\t\\t\\t\\ttitle: t('Canned_Responses'),\\n\\t\\t\\t\\t\\ttrigger: '!',\\n\\t\\t\\t\\t\\tprefix: '',\\n\\t\\t\\t\\t\\ttriggerAnywhere: true,\\n\\t\\t\\t\\t\\trenderItem: ({ item }) => <ComposerBoxPopupCannedResponse {...item} />,\\n\\t\\t\\t\\t\\tgetItemsFromLocal: async (filter: string) => {\\n\\t\\t\\t\\t\\t\\tconst exp = new RegExp(filter, 'i');\\n\\t\\t\\t\\t\\t\\treturn CannedResponse.find(\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tshortcut: exp,\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tlimit: 12,\\n\\t\\t\\t\\t\\t\\t\\t\\tsort: {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tshortcut: -1,\\n\\t\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t\\t.fetch()\\n\\t\\t\\t\\t\\t\\t\\t.map((record) => ({\\n\\t\\t\\t\\t\\t\\t\\t\\t_id: record._id,\\n\\t\\t\\t\\t\\t\\t\\t\\ttext: record.text,\\n\\t\\t\\t\\t\\t\\t\\t\\tshortcut: record.shortcut,\\n\\t\\t\\t\\t\\t\\t\\t}));\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tgetItemsFromServer: async () => [],\\n\\t\\t\\t\\t\\tgetValue: (item) => {\\n\\t\\t\\t\\t\\t\\treturn item.text;\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t}),\\n\\t\\t\\tcreateMessageBoxPopupConfig({\\n\\t\\t\\t\\tmatchSelectorRegex: /(?:^)(\\\\/[\\\\w\\\\d\\\\S]+ )[^]*$/,\\n\\t\\t\\t\\tpreview: true,\\n\\t\\t\\t\\tgetItemsFromLocal: async ({ cmd, params, tmid }: { cmd: string; params: string; tmid: string }) => {\\n\\t\\t\\t\\t\\tconst result = await call({ cmd, params, msg: { rid, tmid } });\\n\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\tresult?.items.map((item) => ({\\n\\t\\t\\t\\t\\t\\t\\t_id: item.id,\\n\\t\\t\\t\\t\\t\\t\\tvalue: item.value,\\n\\t\\t\\t\\t\\t\\t\\ttype: item.type,\\n\\t\\t\\t\\t\\t\\t})) ?? []\\n\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t},\\n\\t\\t\\t}),\\n\\t\\t].filter(Boolean);\\n\\t}, [t, i18n, cannedResponseEnabled, isOmnichannel, recentEmojis, suggestionsCount, userSpotlight, rid, call, useEmoji, encrypted]);\\n\\n\\treturn <ComposerPopupContext.Provider value={value} children={children} />;\\n};\\n\\nexport default ComposerPopupProvider;\\n\",null],\"names\":[\"_objectSpread\",\"isOmnichannelRoom\",\"useLocalStorage\",\"escapeRegExp\",\"useMethod\",\"useSetting\",\"useUserPreference\",\"React\",\"useMemo\",\"useTranslation\",\"hasAtLeastOnePermission\",\"CannedResponse\",\"emoji\",\"Subscriptions\",\"usersFromRoomMessages\",\"slashCommands\",\"ComposerBoxPopupCannedResponse\",\"ComposerBoxPopupEmoji\",\"ComposerBoxPopupRoom\",\"ComposerBoxPopupSlashCommand\",\"ComposerBoxPopupUser\",\"ComposerPopupContext\",\"createMessageBoxPopupConfig\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"children\",\"room\",\"_id\",\"rid\",\"encrypted\",\"isRoomEncrypted\",\"userSpotlight\",\"suggestionsCount\",\"cannedResponseEnabled\",\"recentEmojis\",\"isOmnichannel\",\"useEmoji\",\"t\",\"i18n\",\"e2eEnabled\",\"unencryptedMessagesAllowed\",\"call\",\"value\",\"trigger\",\"title\",\"getItemsFromLocal\",\"filter\",\"filterRegex\",\"RegExp\",\"items\",\"users\",\"find\",\"ts\",\"$exists\",\"$or\",\"username\",\"name\",\"limit\",\"sort\",\"fetch\",\"map\",\"u\",\"suggestion\",\"test\",\"push\",\"system\",\"getItemsFromServer\",\"usernames\",\"mentions\",\"_ref2\",\"nickname\",\"status\",\"avatarETag\",\"outside\",\"getValue\",\"item\",\"renderItem\",\"_ref3\",\"createElement\",\"records\",\"$and\",\"fname\",\"federated\",\"$in\",\"ls\",\"rooms\",\"concat\",\"_ref4\",\"triggerLength\",\"exactFinalTone\",\"colorBlind\",\"seeColor\",\"key\",\"recents\",\"collection\",\"list\",\"Object\",\"keys\",\"data\",\"_ref5\",\"substring\",\"length\",\"a\",\"b\",\"aExact\",\"bExact\",\"aPartial\",\"startsWith\",\"bPartial\",\"aScore\",\"bScore\",\"includes\",\"indexOf\",\"slice\",\"_ref6\",\"prefix\",\"suffix\",\"triggerAnywhere\",\"_ref7\",\"idA\",\"idB\",\"_ref8\",\"disabled\",\"_ref9\",\"commands\",\"command\",\"_item$params\",\"params\",\"exists\",\"description\",\"permission\",\"isMatch\",\"localeCompare\",\"_ref10\",\"exp\",\"shortcut\",\"record\",\"text\",\"matchSelectorRegex\",\"preview\",\"_ref11\",\"_result$items$map\",\"cmd\",\"tmid\",\"result\",\"msg\",\"id\",\"type\",\"Boolean\",\"Provider\"],\"mappings\":\"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\"}"}