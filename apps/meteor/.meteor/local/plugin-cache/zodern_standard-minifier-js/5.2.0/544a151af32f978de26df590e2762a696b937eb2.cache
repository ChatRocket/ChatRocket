{"code":"function module(e,s,a){let n,d,t,l,m,o,c,u;a.export({useAppSlashCommands:()=>i}),a.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedCallback(e){n=e}},0),a.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){d=e},useStream(e){t=e},useUserId(e){l=e}},1),a.link(\"@tanstack/react-query\",{useQuery(e){m=e},useQueryClient(e){o=e}},2),a.link(\"react\",{useEffect(e){c=e}},3),a.link(\"../../app/utils/client/slashCommand\",{slashCommands(e){u=e}},4);let i=()=>{let e=o(),s=t(\"apps\"),a=l(),i=n(()=>{e.invalidateQueries([\"apps\",\"slashCommands\"])},100,[]);c(()=>{if(a)return s(\"apps\",e=>{let[s,[a]]=e;[\"command/added\",\"command/updated\",\"command/disabled\",\"command/removed\"].includes(s)&&(\"string\"==typeof a&&delete u.commands[a],i())})},[s,a,i]);let p=d(\"GET\",\"/v1/commands.list\");m([\"apps\",\"slashCommands\"],()=>p(),{enabled:!!a,onSuccess(e){e.commands.forEach(e=>u.add(e))}})}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useAppSlashCommands.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useEndpoint, useStream, useUserId } from '@rocket.chat/ui-contexts';\\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\\nimport { useEffect } from 'react';\\n\\nimport { slashCommands } from '../../app/utils/client/slashCommand';\\n\\nexport const useAppSlashCommands = () => {\\n\\tconst queryClient = useQueryClient();\\n\\n\\tconst apps = useStream('apps');\\n\\tconst uid = useUserId();\\n\\n\\tconst invalidate = useDebouncedCallback(\\n\\t\\t() => {\\n\\t\\t\\tqueryClient.invalidateQueries(['apps', 'slashCommands']);\\n\\t\\t},\\n\\t\\t100,\\n\\t\\t[],\\n\\t);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!uid) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\treturn apps('apps', ([key, [command]]) => {\\n\\t\\t\\tif (['command/added', 'command/updated', 'command/disabled', 'command/removed'].includes(key)) {\\n\\t\\t\\t\\tif (typeof command === 'string') {\\n\\t\\t\\t\\t\\tdelete slashCommands.commands[command];\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tinvalidate();\\n\\t\\t\\t}\\n\\t\\t});\\n\\t}, [apps, uid, invalidate]);\\n\\n\\tconst getSlashCommands = useEndpoint('GET', '/v1/commands.list');\\n\\n\\tuseQuery(['apps', 'slashCommands'], () => getSlashCommands(), {\\n\\t\\tenabled: !!uid,\\n\\t\\tonSuccess(data) {\\n\\t\\t\\tdata.commands.forEach((command) => slashCommands.add(command));\\n\\t\\t},\\n\\t});\\n};\\n\",null],\"names\":[\"useDebouncedCallback\",\"useEndpoint\",\"useStream\",\"useUserId\",\"useQuery\",\"useQueryClient\",\"useEffect\",\"slashCommands\",\"module\",\"export\",\"useAppSlashCommands\",\"link\",\"v\",\"queryClient\",\"apps\",\"uid\",\"invalidate\",\"invalidateQueries\",\"_ref\",\"key\",\"command\",\"includes\",\"commands\",\"getSlashCommands\",\"enabled\",\"onSuccess\",\"data\",\"forEach\",\"add\"],\"mappings\":\"2BAAqCA,EAA8BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAnEC,EAAOC,MAAE,CAAA,CAAAC,oBAAsBA,IAAMA,CAAA,GAA8BF,EAAAG,IAAA,CAAA,8BAAA,CAAAX,qBAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,2BAAA,CAAAV,YAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,UAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,UAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,wBAAA,CAAAP,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,eAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAL,UAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,sCAAA,CAAAJ,cAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAO5D,IAAMF,EAAsBA,KAClC,IAAMG,EAAcR,IAEdS,EAAOZ,EAAU,QACjBa,EAAMZ,IAENa,EAAahB,EAClB,KACCa,EAAYI,iBAAiB,CAAC,CAAC,OAAQ,gBAAgB,CACxD,EACA,IACA,EAAE,EAGHX,EAAU,KACT,GAAKS,EAGL,OAAOD,EAAK,OAAQI,IAAqB,GAApB,CAACC,EAAK,CAACC,EAAQ,CAAC,CAAAF,EAChC,CAAC,gBAAiB,kBAAmB,mBAAoB,kBAAkB,CAACG,QAAQ,CAACF,KACjE,UAAnB,OAAOC,GACV,OAAOb,EAAce,QAAQ,CAACF,EAAQ,CAEvCJ,IAEF,EACD,EAAG,CAACF,EAAMC,EAAKC,EAAW,EAE1B,IAAMO,EAAmBtB,EAAY,MAAO,qBAE5CG,EAAS,CAAC,OAAQ,gBAAgB,CAAE,IAAMmB,IAAoB,CAC7DC,QAAS,CAAC,CAACT,EACXU,UAAUC,CAAI,EACbA,EAAKJ,QAAQ,CAACK,OAAO,CAAEP,GAAYb,EAAcqB,GAAG,CAACR,GACtD,GAEF\"}"}