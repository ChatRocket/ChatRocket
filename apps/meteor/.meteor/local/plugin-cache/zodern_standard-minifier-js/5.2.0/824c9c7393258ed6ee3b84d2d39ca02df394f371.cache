{"code":"function module(e,t,a){let n,r,s,i,o,l;a.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),a.link(\"@rocket.chat/string-helpers\",{escapeHTML(e){r=e}},0),a.link(\"date-fns/formatDistance\",{default(e){s=e}},1),a.link(\"moment\",{default(e){i=e}},2),a.link(\"../../ui-utils/lib/MessageTypes\",{MessageTypes(e){o=e}},3),a.link(\"../../utils/lib/i18n\",{t(e){l=e}},4),o.registerType({id:\"livechat_navigation_history\",system:!0,message:\"New_visitor_navigation\",data:e=>({history:e.navigation?\"\".concat((e.navigation.page.title?\"\".concat(e.navigation.page.title,\" - \"):\"\")+e.navigation.page.location.href):\"\"})}),o.registerType({id:\"livechat_transfer_history\",system:!0,message:\"New_chat_transfer\",data(e){if(!e.transferData)return{transfer:\"\"};let{comment:t}=e.transferData,a=t&&\"\"!==t?\"_with_a_comment\":\"\",r=e.transferData.transferredBy&&(e.transferData.transferredBy.name||e.transferData.transferredBy.username);return{transfer:({agent:()=>{var s,i,o,d;return l(\"Livechat_transfer_to_agent\".concat(a),n({from:r,to:(null==e?void 0:null===(s=e.transferData)||void 0===s?void 0:null===(i=s.transferredTo)||void 0===i?void 0:i.name)||(null==e?void 0:null===(o=e.transferData)||void 0===o?void 0:null===(d=o.transferredTo)||void 0===d?void 0:d.username)||\"\"},t&&{comment:t}))},department:()=>{var s,i;return l(\"Livechat_transfer_to_department\".concat(a),n({from:r,to:(null==e?void 0:null===(s=e.transferData)||void 0===s?void 0:null===(i=s.nextDepartment)||void 0===i?void 0:i.name)||\"\"},t&&{comment:t}))},queue:()=>l(\"Livechat_transfer_return_to_the_queue\".concat(a),n({from:r},t&&{comment:t})),autoTransferUnansweredChatsToAgent:()=>{var a,n,s,i;return l(\"Livechat_transfer_to_agent_auto_transfer_unanswered_chat\",{from:r,to:(null==e?void 0:null===(a=e.transferData)||void 0===a?void 0:null===(n=a.transferredTo)||void 0===n?void 0:n.name)||(null==e?void 0:null===(s=e.transferData)||void 0===s?void 0:null===(i=s.transferredTo)||void 0===i?void 0:i.username)||\"\",duration:t})},autoTransferUnansweredChatsToQueue:()=>l(\"Livechat_transfer_return_to_the_queue_auto_transfer_unanswered_chat\",{from:r,duration:t})})[e.transferData.scope]()}}}),o.registerType({id:\"livechat_transcript_history\",system:!0,message:\"Livechat_chat_transcript_sent\",data(e){if(!e.requestData)return{transcript:\"\"};let{requestData:{type:t,visitor:a,user:n}={type:\"user\"}}=e;return{transcript:({visitor:()=>l(\"Livechat_visitor_transcript_request\",{guest:(null==a?void 0:a.name)||(null==a?void 0:a.username)||\"\"}),user:()=>l(\"Livechat_user_sent_chat_transcript_to_visitor\",{agent:(null==n?void 0:n.name)||(null==n?void 0:n.username)||\"\",guest:(null==a?void 0:a.name)||(null==a?void 0:a.username)||\"\"})})[t]()}}}),o.registerType({id:\"livechat_video_call\",system:!0,message:\"New_videocall_request\"}),o.registerType({id:\"livechat_webrtc_video_call\",message:\"room_changed_type\",data:e=>\"ended\"===e.msg&&e.webRtcCallEndTs&&e.ts?{message:l(\"WebRTC_call_ended_message\",{callDuration:s(new Date(e.webRtcCallEndTs),new Date(e.ts)),endTime:i(e.webRtcCallEndTs).format(\"h:mm A\")})}:\"declined\"===e.msg&&e.webRtcCallEndTs?{message:l(\"WebRTC_call_declined_message\")}:{message:r(e.msg)}}),o.registerType({id:\"omnichannel_placed_chat_on_hold\",system:!0,message:\"Omnichannel_placed_chat_on_hold\",data:e=>({comment:e.comment?e.comment:\"No comment provided\"})}),o.registerType({id:\"omnichannel_on_hold_chat_resumed\",system:!0,message:\"Omnichannel_on_hold_chat_resumed\",data:e=>({comment:e.comment?e.comment:\"No comment provided\"})})}","map":"{\"version\":3,\"sources\":[\"app/livechat/lib/messageTypes.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IOmnichannelSystemMessage } from '@rocket.chat/core-typings';\\nimport { escapeHTML } from '@rocket.chat/string-helpers';\\nimport formatDistance from 'date-fns/formatDistance';\\nimport moment from 'moment';\\n\\nimport { MessageTypes } from '../../ui-utils/lib/MessageTypes';\\nimport { t } from '../../utils/lib/i18n';\\n\\nMessageTypes.registerType({\\n\\tid: 'livechat_navigation_history',\\n\\tsystem: true,\\n\\tmessage: 'New_visitor_navigation',\\n\\tdata(message: IOmnichannelSystemMessage) {\\n\\t\\treturn {\\n\\t\\t\\thistory: message.navigation\\n\\t\\t\\t\\t? `${(message.navigation.page.title ? `${message.navigation.page.title} - ` : '') + message.navigation.page.location.href}`\\n\\t\\t\\t\\t: '',\\n\\t\\t};\\n\\t},\\n});\\n\\nMessageTypes.registerType({\\n\\tid: 'livechat_transfer_history',\\n\\tsystem: true,\\n\\tmessage: 'New_chat_transfer',\\n\\tdata(message: IOmnichannelSystemMessage) {\\n\\t\\tif (!message.transferData) {\\n\\t\\t\\treturn {\\n\\t\\t\\t\\ttransfer: '',\\n\\t\\t\\t};\\n\\t\\t}\\n\\n\\t\\tconst { comment } = message.transferData;\\n\\t\\tconst commentLabel = comment && comment !== '' ? '_with_a_comment' : '';\\n\\t\\tconst from =\\n\\t\\t\\tmessage.transferData.transferredBy && (message.transferData.transferredBy.name || message.transferData.transferredBy.username);\\n\\t\\tconst transferTypes = {\\n\\t\\t\\tagent: (): string =>\\n\\t\\t\\t\\tt(`Livechat_transfer_to_agent${commentLabel}`, {\\n\\t\\t\\t\\t\\tfrom,\\n\\t\\t\\t\\t\\tto: message?.transferData?.transferredTo?.name || message?.transferData?.transferredTo?.username || '',\\n\\t\\t\\t\\t\\t...(comment && { comment }),\\n\\t\\t\\t\\t}),\\n\\t\\t\\tdepartment: (): string =>\\n\\t\\t\\t\\tt(`Livechat_transfer_to_department${commentLabel}`, {\\n\\t\\t\\t\\t\\tfrom,\\n\\t\\t\\t\\t\\tto: message?.transferData?.nextDepartment?.name || '',\\n\\t\\t\\t\\t\\t...(comment && { comment }),\\n\\t\\t\\t\\t}),\\n\\t\\t\\tqueue: (): string =>\\n\\t\\t\\t\\tt(`Livechat_transfer_return_to_the_queue${commentLabel}`, {\\n\\t\\t\\t\\t\\tfrom,\\n\\t\\t\\t\\t\\t...(comment && { comment }),\\n\\t\\t\\t\\t}),\\n\\t\\t\\tautoTransferUnansweredChatsToAgent: (): string =>\\n\\t\\t\\t\\tt(`Livechat_transfer_to_agent_auto_transfer_unanswered_chat`, {\\n\\t\\t\\t\\t\\tfrom,\\n\\t\\t\\t\\t\\tto: message?.transferData?.transferredTo?.name || message?.transferData?.transferredTo?.username || '',\\n\\t\\t\\t\\t\\tduration: comment,\\n\\t\\t\\t\\t}),\\n\\t\\t\\tautoTransferUnansweredChatsToQueue: (): string =>\\n\\t\\t\\t\\tt(`Livechat_transfer_return_to_the_queue_auto_transfer_unanswered_chat`, {\\n\\t\\t\\t\\t\\tfrom,\\n\\t\\t\\t\\t\\tduration: comment,\\n\\t\\t\\t\\t}),\\n\\t\\t};\\n\\t\\treturn {\\n\\t\\t\\ttransfer: transferTypes[message.transferData.scope](),\\n\\t\\t};\\n\\t},\\n});\\n\\nMessageTypes.registerType({\\n\\tid: 'livechat_transcript_history',\\n\\tsystem: true,\\n\\tmessage: 'Livechat_chat_transcript_sent',\\n\\tdata(message: IOmnichannelSystemMessage) {\\n\\t\\tif (!message.requestData) {\\n\\t\\t\\treturn {\\n\\t\\t\\t\\ttranscript: '',\\n\\t\\t\\t};\\n\\t\\t}\\n\\n\\t\\tconst { requestData: { type, visitor, user } = { type: 'user' } } = message;\\n\\t\\tconst requestTypes = {\\n\\t\\t\\tvisitor: (): string =>\\n\\t\\t\\t\\tt('Livechat_visitor_transcript_request', {\\n\\t\\t\\t\\t\\tguest: visitor?.name || visitor?.username || '',\\n\\t\\t\\t\\t}),\\n\\t\\t\\tuser: (): string =>\\n\\t\\t\\t\\tt('Livechat_user_sent_chat_transcript_to_visitor', {\\n\\t\\t\\t\\t\\tagent: user?.name || user?.username || '',\\n\\t\\t\\t\\t\\tguest: visitor?.name || visitor?.username || '',\\n\\t\\t\\t\\t}),\\n\\t\\t};\\n\\n\\t\\treturn {\\n\\t\\t\\ttranscript: requestTypes[type](),\\n\\t\\t};\\n\\t},\\n});\\n\\nMessageTypes.registerType({\\n\\tid: 'livechat_video_call',\\n\\tsystem: true,\\n\\tmessage: 'New_videocall_request',\\n});\\n\\nMessageTypes.registerType({\\n\\tid: 'livechat_webrtc_video_call',\\n\\tmessage: 'room_changed_type',\\n\\tdata(message) {\\n\\t\\tif (message.msg === 'ended' && message.webRtcCallEndTs && message.ts) {\\n\\t\\t\\treturn {\\n\\t\\t\\t\\tmessage: t('WebRTC_call_ended_message', {\\n\\t\\t\\t\\t\\tcallDuration: formatDistance(new Date(message.webRtcCallEndTs), new Date(message.ts)),\\n\\t\\t\\t\\t\\tendTime: moment(message.webRtcCallEndTs).format('h:mm A'),\\n\\t\\t\\t\\t}),\\n\\t\\t\\t};\\n\\t\\t}\\n\\t\\tif (message.msg === 'declined' && message.webRtcCallEndTs) {\\n\\t\\t\\treturn {\\n\\t\\t\\t\\tmessage: t('WebRTC_call_declined_message'),\\n\\t\\t\\t};\\n\\t\\t}\\n\\t\\treturn {\\n\\t\\t\\tmessage: escapeHTML(message.msg),\\n\\t\\t};\\n\\t},\\n});\\n\\nMessageTypes.registerType({\\n\\tid: 'omnichannel_placed_chat_on_hold',\\n\\tsystem: true,\\n\\tmessage: 'Omnichannel_placed_chat_on_hold',\\n\\tdata(message: IOmnichannelSystemMessage) {\\n\\t\\treturn {\\n\\t\\t\\tcomment: message.comment ? message.comment : 'No comment provided',\\n\\t\\t};\\n\\t},\\n});\\n\\nMessageTypes.registerType({\\n\\tid: 'omnichannel_on_hold_chat_resumed',\\n\\tsystem: true,\\n\\tmessage: 'Omnichannel_on_hold_chat_resumed',\\n\\tdata(message: IOmnichannelSystemMessage) {\\n\\t\\treturn {\\n\\t\\t\\tcomment: message.comment ? message.comment : 'No comment provided',\\n\\t\\t};\\n\\t},\\n});\\n\",null],\"names\":[\"_objectSpread\",\"escapeHTML\",\"formatDistance\",\"moment\",\"MessageTypes\",\"t\",\"module\",\"link\",\"default\",\"v\",\"registerType\",\"id\",\"system\",\"message\",\"data\",\"history\",\"navigation\",\"concat\",\"page\",\"title\",\"location\",\"href\",\"transferData\",\"transfer\",\"comment\",\"commentLabel\",\"from\",\"transferredBy\",\"name\",\"username\",\"transferTypes\",\"agent\",\"_message$transferData\",\"_message$transferData2\",\"_message$transferData3\",\"_message$transferData4\",\"to\",\"transferredTo\",\"department\",\"_message$transferData5\",\"_message$transferData6\",\"nextDepartment\",\"queue\",\"autoTransferUnansweredChatsToAgent\",\"_message$transferData7\",\"_message$transferData8\",\"_message$transferData9\",\"_message$transferData10\",\"duration\",\"autoTransferUnansweredChatsToQueue\",\"scope\",\"requestData\",\"transcript\",\"type\",\"visitor\",\"user\",\"requestTypes\",\"guest\",\"msg\",\"webRtcCallEndTs\",\"ts\",\"callDuration\",\"Date\",\"endTime\",\"format\"],\"mappings\":\"2BACAA,EAAAC,EAAyDC,EAAAC,EAAAC,EAAAC,EAAhDC,EAAYC,IAAM,CAAA,uCAA8B,CAAAC,QAAAC,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAhDH,EAAYC,IAAA,CAAM,8BAA8B,CAAAN,WAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0BAAA,CAAAC,QAAAC,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,SAAA,CAAAC,QAAAC,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kCAAA,CAAAH,aAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uBAAA,CAAAF,EAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAOzDL,EAAaM,YAAY,CAAC,CACzBC,GAAI,8BACJC,OAAQ,CAAA,EACRC,QAAS,yBACTC,KAAAA,AAAKD,GACG,CAAA,CACNE,QAASF,EAAQG,UAAU,CAAA,GAAAC,MAAA,CACrB,AAACJ,CAAAA,EAAQG,UAAU,CAACE,IAAI,CAACC,KAAK,CAAA,GAAAF,MAAA,CAAMJ,EAAQG,UAAU,CAACE,IAAI,CAACC,KAAK,CAAA,OAAQ,EAAA,EAAMN,EAAQG,UAAU,CAACE,IAAI,CAACE,QAAQ,CAACC,IAAI,EACvH,OAKNjB,EAAaM,YAAY,CAAC,CACzBC,GAAI,4BACJC,OAAQ,CAAA,EACRC,QAAS,oBACTC,KAAKD,CAAkC,EACtC,GAAI,CAACA,EAAQS,YAAY,CACxB,MAAO,CACNC,SAAU,IAIZ,GAAM,CAAEC,QAAAA,CAAAA,CAAS,CAAGX,EAAQS,YAAY,CAClCG,EAAeD,GAAWA,AAAY,KAAZA,EAAiB,kBAAoB,GAC/DE,EACLb,EAAQS,YAAY,CAACK,aAAa,EAAKd,CAAAA,EAAQS,YAAY,CAACK,aAAa,CAACC,IAAI,EAAIf,EAAQS,YAAY,CAACK,aAAa,CAACE,QAAQ,AAARA,EA+BtH,MAAO,CACNN,SAAUO,AA/BW,CAAA,CACrBC,MAAOA,KAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAA,OACN9B,EAAC,6BAAAY,MAAA,CAA8BQ,GAAYzB,EAAA,CAC1C0B,KAAAA,EACAU,GAAI,AAAAvB,CAAAA,MAAAA,EAAO,KAAA,EAAA,AAAc,OAAdmB,CAAAA,EAAPnB,EAASS,YAAY,AAAZA,GAAYU,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAA,AAAe,OAAfC,CAAAA,EAArBD,EAAuBK,aAAa,AAAbA,GAAaJ,AAAA,KAAA,IAAAA,EAAA,KAAA,EAApCA,EAAsCL,IAAI,AAAJA,GAAQf,CAAAA,MAAAA,EAAO,KAAA,EAAA,AAAc,OAAdqB,CAAAA,EAAPrB,EAASS,YAAY,AAAZA,GAAYY,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAA,AAAe,OAAfC,CAAAA,EAArBD,EAAuBG,aAAa,AAAbA,GAAaF,AAAA,KAAA,IAAAA,EAAA,KAAA,EAApCA,EAAsCN,QAAQ,AAARA,GAAY,EAAE,EAClGL,GAAW,CAAEA,QAAAA,CAAO,GACvB,EACHc,WAAYA,KAAA,IAAAC,EAAAC,EAAA,OACXnC,EAAC,kCAAAY,MAAA,CAAmCQ,GAAYzB,EAAA,CAC/C0B,KAAAA,EACAU,GAAI,AAAAvB,CAAAA,MAAAA,EAAO,KAAA,EAAA,AAAc,OAAd0B,CAAAA,EAAP1B,EAASS,YAAY,AAAZA,GAAYiB,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAA,AAAgB,OAAhBC,CAAAA,EAArBD,EAAuBE,cAAc,AAAdA,GAAcD,AAAA,KAAA,IAAAA,EAAA,KAAA,EAArCA,EAAuCZ,IAAI,AAAJA,GAAQ,EAAE,EACjDJ,GAAW,CAAEA,QAAAA,CAAO,GACvB,EACHkB,MAAOA,IACNrC,EAAC,wCAAAY,MAAA,CAAyCQ,GAAYzB,EAAA,CACrD0B,KAAAA,CAAI,EACAF,GAAW,CAAEA,QAAAA,CAAO,IAE1BmB,mCAAoCA,KAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAA,OACnC1C,EAAC,2DAA6D,CAC7DqB,KAAAA,EACAU,GAAI,AAAAvB,CAAAA,MAAAA,EAAO,KAAA,EAAA,AAAc,OAAd+B,CAAAA,EAAP/B,EAASS,YAAY,AAAZA,GAAYsB,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAA,AAAe,OAAfC,CAAAA,EAArBD,EAAuBP,aAAa,AAAbA,GAAaQ,AAAA,KAAA,IAAAA,EAAA,KAAA,EAApCA,EAAsCjB,IAAI,AAAJA,GAAQf,CAAAA,MAAAA,EAAO,KAAA,EAAA,AAAc,OAAdiC,CAAAA,EAAPjC,EAASS,YAAY,AAAZA,GAAYwB,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAA,AAAe,OAAfC,CAAAA,EAArBD,EAAuBT,aAAa,AAAbA,GAAaU,AAAA,KAAA,IAAAA,EAAA,KAAA,EAApCA,EAAsClB,QAAQ,AAARA,GAAY,GACpGmB,SAAUxB,GACT,EACHyB,mCAAoCA,IACnC5C,EAAC,sEAAwE,CACxEqB,KAAAA,EACAsB,SAAUxB,KAIW,CAACX,EAAQS,YAAY,CAAC4B,KAAK,CAAC,GAErD,IAGD9C,EAAaM,YAAY,CAAC,CACzBC,GAAI,8BACJC,OAAQ,CAAA,EACRC,QAAS,gCACTC,KAAKD,CAAkC,EACtC,GAAI,CAACA,EAAQsC,WAAW,CACvB,MAAO,CACNC,WAAY,IAId,GAAM,CAAED,YAAa,CAAEE,KAAAA,CAAI,CAAEC,QAAAA,CAAO,CAAEC,KAAAA,CAAAA,CAAM,CAAG,CAAEF,KAAM,MAAM,CAAA,CAAI,CAAGxC,EAapE,MAAO,CACNuC,WAAYI,AAbQ,CAAA,CACpBF,QAASA,IACRjD,EAAE,sCAAuC,CACxCoD,MAAO,AAAAH,CAAAA,MAAAA,EAAO,KAAA,EAAPA,EAAS1B,IAAI,AAAJA,GAAQ0B,CAAAA,MAAAA,EAAO,KAAA,EAAPA,EAASzB,QAAQ,AAARA,GAAY,KAE/C0B,KAAMA,IACLlD,EAAE,gDAAiD,CAClD0B,MAAO,AAAAwB,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAM3B,IAAI,AAAJA,GAAQ2B,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAM1B,QAAQ,AAARA,GAAY,GACvC4B,MAAO,AAAAH,CAAAA,MAAAA,EAAO,KAAA,EAAPA,EAAS1B,IAAI,AAAJA,GAAQ0B,CAAAA,MAAAA,EAAO,KAAA,EAAPA,EAASzB,QAAQ,AAARA,GAAY,MAKvB,CAACwB,EAAK,GAEhC,IAGDjD,EAAaM,YAAY,CAAC,CACzBC,GAAI,sBACJC,OAAQ,CAAA,EACRC,QAAS,0BAGVT,EAAaM,YAAY,CAAC,CACzBC,GAAI,6BACJE,QAAS,oBACTC,KAAAA,AAAKD,GACJ,AAAIA,AAAgB,UAAhBA,EAAQ6C,GAAG,EAAgB7C,EAAQ8C,eAAe,EAAI9C,EAAQ+C,EAAE,CAC5D,CACN/C,QAASR,EAAE,4BAA6B,CACvCwD,aAAc3D,EAAe,IAAI4D,KAAKjD,EAAQ8C,eAAe,EAAG,IAAIG,KAAKjD,EAAQ+C,EAAE,GACnFG,QAAS5D,EAAOU,EAAQ8C,eAAe,EAAEK,MAAM,CAAC,aAI/CnD,AAAgB,aAAhBA,EAAQ6C,GAAG,EAAmB7C,EAAQ8C,eAAe,CACjD,CACN9C,QAASR,EAAE,iCAGN,CACNQ,QAASZ,EAAWY,EAAQ6C,GAAG,KAKlCtD,EAAaM,YAAY,CAAC,CACzBC,GAAI,kCACJC,OAAQ,CAAA,EACRC,QAAS,kCACTC,KAAAA,AAAKD,GACG,CAAA,CACNW,QAASX,EAAQW,OAAO,CAAGX,EAAQW,OAAO,CAAG,0BAKhDpB,EAAaM,YAAY,CAAC,CACzBC,GAAI,mCACJC,OAAQ,CAAA,EACRC,QAAS,mCACTC,KAAAA,AAAKD,GACG,CAAA,CACNW,QAASX,EAAQW,OAAO,CAAGX,EAAQW,OAAO,CAAG\"}"}