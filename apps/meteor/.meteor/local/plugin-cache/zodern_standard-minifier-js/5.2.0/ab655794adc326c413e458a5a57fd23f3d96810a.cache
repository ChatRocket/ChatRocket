{"code":"function module(e,t,i){let o,n,l,r,a;i.link(\"meteor/meteor\",{Meteor(e){o=e}},0),i.link(\"../../../client/lib/rooms/roomCoordinator\",{roomCoordinator(e){n=e}},1),i.link(\"../../../client/lib/utils/messageArgs\",{messageArgs(e){l=e}},2),i.link(\"../../ui-utils/client\",{MessageAction(e){r=e}},3),i.link(\"../../utils/client/lib/SDKClient\",{sdk(e){a=e}},4),o.startup(()=>{r.addButton({id:\"reaction-message\",icon:\"add-reaction\",label:\"Add_Reaction\",context:[\"message\",\"message-mobile\",\"threads\",\"federated\",\"videoconf\",\"videoconf-threads\"],action(e,t){let{message:i=l(this).msg,chat:o}=t;null==e||e.stopPropagation(),null==o||o.emojiPicker.open(null==e?void 0:e.currentTarget,e=>a.call(\"setReaction\",\":\".concat(e,\":\"),i._id))},condition(e){let{message:t,user:i,room:o,subscription:l}=e;if(!o||!l||t.private||n.readOnly(o._id,i)&&!o.reactWhenReadOnly)return!1;let r=n.isLivechatRoom(o.t);return!r},order:-3,group:\"message\"})})}","map":"{\"version\":3,\"sources\":[\"app/reactions/client/init.ts\",\"<anon>\"],\"sourcesContent\":[\"import { Meteor } from 'meteor/meteor';\\n\\nimport { roomCoordinator } from '../../../client/lib/rooms/roomCoordinator';\\nimport { messageArgs } from '../../../client/lib/utils/messageArgs';\\nimport { MessageAction } from '../../ui-utils/client';\\nimport { sdk } from '../../utils/client/lib/SDKClient';\\n\\nMeteor.startup(() => {\\n\\tMessageAction.addButton({\\n\\t\\tid: 'reaction-message',\\n\\t\\ticon: 'add-reaction',\\n\\t\\tlabel: 'Add_Reaction',\\n\\t\\tcontext: ['message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\\n\\t\\taction(event, props) {\\n\\t\\t\\tconst { message = messageArgs(this).msg, chat } = props;\\n\\t\\t\\tevent?.stopPropagation();\\n\\t\\t\\tchat?.emojiPicker.open(event?.currentTarget as Element, (emoji) => sdk.call('setReaction', `:${emoji}:`, message._id));\\n\\t\\t},\\n\\t\\tcondition({ message, user, room, subscription }) {\\n\\t\\t\\tif (!room) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (!subscription) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (message.private) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (roomCoordinator.readOnly(room._id, user!) && !room.reactWhenReadOnly) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\t\\t\\tconst isLivechatRoom = roomCoordinator.isLivechatRoom(room.t);\\n\\t\\t\\tif (isLivechatRoom) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn true;\\n\\t\\t},\\n\\t\\torder: -3,\\n\\t\\tgroup: 'message',\\n\\t});\\n});\\n\",null],\"names\":[\"Meteor\",\"roomCoordinator\",\"messageArgs\",\"MessageAction\",\"sdk\",\"module\",\"link\",\"v\",\"startup\",\"addButton\",\"id\",\"icon\",\"label\",\"context\",\"action\",\"event\",\"props\",\"message\",\"msg\",\"chat\",\"stopPropagation\",\"emojiPicker\",\"open\",\"currentTarget\",\"emoji\",\"call\",\"concat\",\"_id\",\"condition\",\"_ref\",\"user\",\"room\",\"subscription\",\"private\",\"readOnly\",\"reactWhenReadOnly\",\"isLivechatRoom\",\"t\",\"order\",\"group\"],\"mappings\":\"2BAAAA,EAAuCC,EAAAC,EAAAC,EAAAC,EAA9BC,EAAQC,IAAA,CAAM,gBAAgB,CAAAN,OAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,4CAAA,CAAAL,gBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wCAAA,CAAAJ,YAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wBAAA,CAAAH,cAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,mCAAA,CAAAF,IAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAOvCP,EAAOQ,OAAO,CAAC,KACdL,EAAcM,SAAS,CAAC,CACvBC,GAAI,mBACJC,KAAM,eACNC,MAAO,eACPC,QAAS,CAAC,UAAW,iBAAkB,UAAW,YAAa,YAAa,oBAAoB,CAChGC,OAAOC,CAAK,CAAEC,CAAK,EAClB,GAAM,CAAEC,QAAAA,EAAUf,EAAY,IAAI,EAAEgB,GAAG,CAAEC,KAAAA,CAAAA,CAAM,CAAGH,CAClDD,OAAAA,GAAAA,EAAOK,eAAe,GACtBD,MAAAA,GAAAA,EAAME,WAAW,CAACC,IAAI,CAACP,MAAAA,EAAK,KAAA,EAALA,EAAOQ,aAAwB,CAAGC,GAAUpB,EAAIqB,IAAI,CAAC,cAAa,IAAAC,MAAA,CAAMF,EAAK,KAAKP,EAAQU,GAAG,EACrH,EACAC,UAASC,CAAA,EAAsC,GAArC,CAAEZ,QAAAA,CAAO,CAAEa,KAAAA,CAAI,CAAEC,KAAAA,CAAI,CAAEC,aAAAA,CAAAA,CAAc,CAAAH,EAC9C,GAAI,CAACE,GAID,CAACC,GAIDf,EAAQgB,OAAO,EAIfhC,EAAgBiC,QAAQ,CAACH,EAAKJ,GAAG,CAAEG,IAAU,CAACC,EAAKI,iBAAiB,CAXvE,MAAO,CAAA,EAcR,IAAMC,EAAiBnC,EAAgBmC,cAAc,CAACL,EAAKM,CAAC,SACxDD,CAKL,EACAE,MAAO,GACPC,MAAO,WAET\"}"}