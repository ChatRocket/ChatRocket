{"code":"function module(e,n,t){let i,a,r,u,l,o;t.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){i=e}},0),t.link(\"react\",{useEffect(e){a=e},useRef(e){r=e}},0),t.link(\"react-i18next\",{useTranslation(e){u=e}},1),t.link(\"../../../lib/utils/exhaustiveCheck\",{exhaustiveCheck(e){l=e}},2),t.link(\"../../uikit/hooks/useUiKitActionManager\",{useUiKitActionManager(e){o=e}},3),t.exportDefault(e=>{let{dictionary:n={},surface:t,view:c}=e,{i18n:s}=u();a(()=>{if(n)for(let[e,t]of Object.entries(n))s.addResources(e,\"app-cloud-announcements-core\",t)},[s,n]);let d=o(),p=r(i(i({},c),{},{appId:c.appId||\"cloud-announcements-core\"}));return p.current=i(i({},c),{},{appId:c.appId||\"cloud-announcements-core\"}),a(()=>{switch(t){case\"modal\":{let e=p.current;return d.openView(\"modal\",e),()=>{d.disposeView(e.id)}}case\"banner\":{let e=p.current;return d.openView(\"banner\",i({},e)),()=>{d.disposeView(e.viewId)}}default:l(t)}},[d,t]),null})}","map":"{\"version\":3,\"sources\":[\"client/views/cloud/CloudAnnouncementHandler.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IBanner } from '@rocket.chat/core-typings';\\nimport type * as UiKit from '@rocket.chat/ui-kit';\\nimport { useEffect, useRef } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { exhaustiveCheck } from '../../../lib/utils/exhaustiveCheck';\\nimport { useUiKitActionManager } from '../../uikit/hooks/useUiKitActionManager';\\n\\ntype CloudAnnouncementHandlerProps = Pick<IBanner, 'dictionary' | 'surface' | 'view'>;\\n\\nconst CloudAnnouncementHandler = ({ dictionary = {}, surface, view }: CloudAnnouncementHandlerProps) => {\\n\\tconst { i18n } = useTranslation();\\n\\n\\tuseEffect(() => {\\n\\t\\tconst appNs = `app-cloud-announcements-core`;\\n\\t\\tif (!dictionary) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tfor (const [language, translations] of Object.entries(dictionary)) {\\n\\t\\t\\ti18n.addResources(language, appNs, translations);\\n\\t\\t}\\n\\t}, [i18n, dictionary]);\\n\\n\\tconst actionManager = useUiKitActionManager();\\n\\n\\tconst viewRef = useRef({ ...view, appId: view.appId || 'cloud-announcements-core' });\\n\\tviewRef.current = { ...view, appId: view.appId || 'cloud-announcements-core' };\\n\\n\\tuseEffect(() => {\\n\\t\\tswitch (surface) {\\n\\t\\t\\tcase 'modal': {\\n\\t\\t\\t\\t// TODO fixme\\n\\t\\t\\t\\tconst modalView = viewRef.current as unknown as UiKit.ModalView;\\n\\n\\t\\t\\t\\tactionManager.openView('modal', modalView);\\n\\n\\t\\t\\t\\treturn () => {\\n\\t\\t\\t\\t\\tactionManager.disposeView(modalView.id);\\n\\t\\t\\t\\t};\\n\\t\\t\\t}\\n\\n\\t\\t\\tcase 'banner': {\\n\\t\\t\\t\\tconst bannerView = viewRef.current as UiKit.BannerView;\\n\\n\\t\\t\\t\\tactionManager.openView('banner', { ...bannerView });\\n\\n\\t\\t\\t\\treturn () => {\\n\\t\\t\\t\\t\\tactionManager.disposeView(bannerView.viewId);\\n\\t\\t\\t\\t};\\n\\t\\t\\t}\\n\\n\\t\\t\\tdefault:\\n\\t\\t\\t\\texhaustiveCheck(surface);\\n\\t\\t}\\n\\t}, [actionManager, surface]);\\n\\n\\treturn null;\\n};\\n\\nexport default CloudAnnouncementHandler;\\n\",null],\"names\":[\"_objectSpread\",\"useEffect\",\"useRef\",\"useTranslation\",\"exhaustiveCheck\",\"useUiKitActionManager\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"dictionary\",\"surface\",\"view\",\"i18n\",\"language\",\"translations\",\"Object\",\"entries\",\"addResources\",\"actionManager\",\"viewRef\",\"appId\",\"current\",\"modalView\",\"openView\",\"disposeView\",\"id\",\"bannerView\",\"viewId\"],\"mappings\":\"2BAEAA,EAAAC,EAASC,EAAiCC,EAAAC,EAAAC,EAAxBC,EAAEC,IAAQ,CAAA,uCAAc,CAAAC,QAAAC,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAtBH,EAAQC,IAAA,CAAA,QAAa,CAACN,UAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,OAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAJ,eAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qCAAA,CAAAH,gBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0CAAA,CAAAF,sBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA1CH,EAAOI,aAAa,CAQaC,IAAsE,GAArE,CAAEC,WAAAA,EAAa,CAAA,CAAE,CAAEC,QAAAA,CAAO,CAAEC,KAAAA,CAAAA,CAAqC,CAAAH,EAC5F,CAAEI,KAAAA,CAAAA,CAAM,CAAGZ,IAEjBF,EAAU,KAET,GAAKW,EAIL,IAAK,GAAM,CAACI,EAAUC,EAAa,GAAIC,OAAOC,OAAO,CAACP,GACrDG,EAAKK,YAAY,CAACJ,EANR,+BAMyBC,EAErC,EAAG,CAACF,EAAMH,EAAW,EAErB,IAAMS,EAAgBhB,IAEhBiB,EAAUpB,EAAMF,EAAAA,EAAA,CAAA,EAAMc,GAAI,CAAA,EAAA,CAAES,MAAOT,EAAKS,KAAK,EAAI,0BAA0B,IA+BjF,OA9BAD,EAAQE,OAAO,CAAAxB,EAAAA,EAAA,CAAA,EAAQc,GAAI,CAAA,EAAA,CAAES,MAAOT,EAAKS,KAAK,EAAI,0BAA0B,GAE5EtB,EAAU,KACT,OAAQY,GACP,IAAK,QAAS,CAEb,IAAMY,EAAYH,EAAQE,OAAqC,CAI/D,OAFAH,EAAcK,QAAQ,CAAC,QAASD,GAEzB,KACNJ,EAAcM,WAAW,CAACF,EAAUG,EAAE,CACvC,CACD,CAEA,IAAK,SAAU,CACd,IAAMC,EAAaP,EAAQE,OAA2B,CAItD,OAFAH,EAAcK,QAAQ,CAAC,SAAQ1B,EAAA,CAAA,EAAO6B,IAE/B,KACNR,EAAcM,WAAW,CAACE,EAAWC,MAAM,CAC5C,CACD,CAEA,QACC1B,EAAgBS,EAClB,CACD,EAAG,CAACQ,EAAeR,EAAQ,EAEpB,IACR\"}"}