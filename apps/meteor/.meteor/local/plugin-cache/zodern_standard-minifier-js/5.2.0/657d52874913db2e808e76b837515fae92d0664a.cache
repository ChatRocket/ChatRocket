{"code":"function module(e,n,t){var i,a,o,l,c;t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){i=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId:function(e){a=e}},0),t.link(\"@rocket.chat/ui-client\",{GenericMenu:function(e){o=e}},1),t.link(\"react\",{default:function(e){l=e}},2),t.link(\"react-i18next\",{useTranslation:function(e){c=e}},3),t.exportDefault(function(e){var n=e.options,t=e.onChangeMenuVisibility,d=e.context,u=e.isMessageEncrypted,s=c().t,r=a(),p=n.reduce(function(e,n){var t,a,o=i(i({variant:\"alert\"===n.color?\"danger\":\"\",id:n.id,icon:n.icon,content:s(n.label),onClick:n.action,type:n.type},n.disabled&&{disabled:null==n?void 0:null===(t=n.disabled)||void 0===t?void 0:t.call(n,d)}),n.disabled&&(null==n?void 0:null===(a=n.disabled)||void 0===a?void 0:a.call(n,d))&&{tooltip:s(\"Action_not_available_encrypted_content\",{action:s(n.label)})}),l=n.type||\"\",c=e.find(function(e){return e.id===l});return c||(c={id:l,title:\"\",items:[]},e.push(c)),c.items.push(o),\"apps\"===l&&u&&(c.items=[{content:s(\"Unavailable\"),id:r,disabled:!0,gap:!1,tooltip:s(\"Action_not_available_encrypted_content\",{action:s(\"Apps\")})}]),e},[]);return l.createElement(o,{onOpenChange:t,detached:!0,icon:\"stars\",title:s(\"AI_Actions\"),\"data-qa-id\":\"menu\",\"data-qa-type\":\"message-action-menu\",sections:p,placement:\"bottom-end\"})})}","map":"{\"version\":3,\"sources\":[\"client/components/message/toolbar/MessageToolbarStarsActionMenu.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { GenericMenu, type GenericMenuItemProps } from '@rocket.chat/ui-client';\\nimport type { MouseEvent, ReactElement } from 'react';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport type { MessageActionConditionProps, MessageActionConfig } from '../../../../app/ui-utils/client/lib/MessageAction';\\n\\ntype MessageActionConfigOption = Omit<MessageActionConfig, 'condition' | 'context' | 'order' | 'action'> & {\\n\\taction: (e?: MouseEvent<HTMLElement>) => void;\\n};\\n\\ntype MessageActionSection = {\\n\\tid: string;\\n\\ttitle: string;\\n\\titems: GenericMenuItemProps[];\\n};\\n\\ntype MessageActionMenuProps = {\\n\\tonChangeMenuVisibility: (visible: boolean) => void;\\n\\toptions: MessageActionConfigOption[];\\n\\tcontext: MessageActionConditionProps;\\n\\tisMessageEncrypted: boolean;\\n};\\n\\nconst MessageToolbarStarsActionMenu = ({\\n\\toptions,\\n\\tonChangeMenuVisibility,\\n\\tcontext,\\n\\tisMessageEncrypted,\\n}: MessageActionMenuProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst id = useUniqueId();\\n\\n\\tconst groupOptions = options.reduce((acc, option) => {\\n\\t\\tconst transformedOption = {\\n\\t\\t\\tvariant: option.color === 'alert' ? 'danger' : '',\\n\\t\\t\\tid: option.id,\\n\\t\\t\\ticon: option.icon,\\n\\t\\t\\tcontent: t(option.label),\\n\\t\\t\\tonClick: option.action,\\n\\t\\t\\ttype: option.type,\\n\\t\\t\\t...(option.disabled && { disabled: option?.disabled?.(context) }),\\n\\t\\t\\t...(option.disabled &&\\n\\t\\t\\t\\toption?.disabled?.(context) && { tooltip: t('Action_not_available_encrypted_content', { action: t(option.label) }) }),\\n\\t\\t};\\n\\n\\t\\tconst group = option.type || '';\\n\\t\\tlet section = acc.find((section: { id: string }) => section.id === group);\\n\\n\\t\\tif (!section) {\\n\\t\\t\\tsection = { id: group, title: '', items: [] };\\n\\t\\t\\tacc.push(section);\\n\\t\\t}\\n\\n\\t\\t// Add option to the appropriate section\\n\\t\\tsection.items.push(transformedOption);\\n\\n\\t\\t// Handle the \\\"apps\\\" section if message is encrypted\\n\\t\\tif (group === 'apps' && isMessageEncrypted) {\\n\\t\\t\\tsection.items = [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tcontent: t('Unavailable'),\\n\\t\\t\\t\\t\\tid,\\n\\t\\t\\t\\t\\tdisabled: true,\\n\\t\\t\\t\\t\\tgap: false,\\n\\t\\t\\t\\t\\ttooltip: t('Action_not_available_encrypted_content', { action: t('Apps') }),\\n\\t\\t\\t\\t},\\n\\t\\t\\t];\\n\\t\\t}\\n\\n\\t\\treturn acc;\\n\\t}, [] as MessageActionSection[]);\\n\\n\\treturn (\\n\\t\\t<GenericMenu\\n\\t\\t\\tonOpenChange={onChangeMenuVisibility}\\n\\t\\t\\tdetached\\n\\t\\t\\ticon='stars'\\n\\t\\t\\ttitle={t('AI_Actions')}\\n\\t\\t\\tdata-qa-id='menu'\\n\\t\\t\\tdata-qa-type='message-action-menu'\\n\\t\\t\\tsections={groupOptions}\\n\\t\\t\\tplacement='bottom-end'\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default MessageToolbarStarsActionMenu;\\n\",null],\"names\":[\"_objectSpread\",\"useUniqueId\",\"GenericMenu\",\"React\",\"useTranslation\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"options\",\"onChangeMenuVisibility\",\"context\",\"isMessageEncrypted\",\"t\",\"_useTranslation\",\"id\",\"groupOptions\",\"reduce\",\"acc\",\"option\",\"_option$disabled\",\"_option$disabled2\",\"transformedOption\",\"variant\",\"color\",\"icon\",\"content\",\"label\",\"onClick\",\"action\",\"type\",\"disabled\",\"call\",\"tooltip\",\"group\",\"section\",\"find\",\"title\",\"items\",\"push\",\"gap\",\"createElement\",\"onOpenChange\",\"detached\",\"sections\",\"placement\"],\"mappings\":\"uBAyBA,IAzBAA,EAAAC,EAA0DC,EAAAC,EAAAC,EAAjDC,EAAaC,IAAM,CAAA,uCAA8B,CAAAC,QAAA,SAAAC,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAjDH,EAAaC,IAAA,CAAM,8BAA8B,CAAAL,YAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yBAAA,CAAAJ,YAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAF,eAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA1DH,EAAOI,aAAa,CAyBkB,SAAAC,CAAA,EAKK,IAJ1CC,EAAOD,EAAPC,OAAO,CACPC,EAAsBF,EAAtBE,sBAAsB,CACtBC,EAAOH,EAAPG,OAAO,CACPC,EAAkBJ,EAAlBI,kBAAkB,CAEVC,EAACC,AAAKZ,IAANW,CAAC,CACHE,EAAKhB,IAELiB,EAAeP,EAAQQ,MAAM,CAAC,SAACC,CAAG,CAAEC,CAAM,EAC/C,IADmDC,EAAAC,EAC7CC,EAAiBxB,EAAAA,EAAA,CACtByB,QAASJ,AAAiB,UAAjBA,EAAOK,KAAK,CAAe,SAAW,GAC/CT,GAAII,EAAOJ,EAAE,CACbU,KAAMN,EAAOM,IAAI,CACjBC,QAASb,EAAEM,EAAOQ,KAAK,EACvBC,QAAST,EAAOU,MAAM,CACtBC,KAAMX,EAAOW,IAAAA,AAAI,EACbX,EAAOY,QAAQ,EAAI,CAAEA,SAAUZ,MAAAA,EAAM,KAAA,EAAA,AAAU,OAAVC,CAAAA,EAAND,EAAQY,QAAQ,AAARA,GAAQX,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAhBA,EAAAY,IAAA,CAAAb,EAAmBR,EAAQ,GAC1DQ,EAAOY,QAAQ,EAClBZ,CAAAA,MAAAA,EAAM,KAAA,EAAA,AAAU,OAAVE,CAAAA,EAANF,EAAQY,QAAQ,AAARA,GAAQV,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAhBA,EAAAW,IAAA,CAAAb,EAAmBR,EAAO,GAAK,CAAEsB,QAASpB,EAAE,yCAA0C,CAAEgB,OAAQhB,EAAEM,EAAOQ,KAAK,CAAC,EAAG,GAG9GO,EAAQf,EAAOW,IAAI,EAAI,GACzBK,EAAUjB,EAAIkB,IAAI,CAAC,SAACD,CAAuB,EAAA,OAAKA,EAAQpB,EAAE,GAAKmB,CAAK,GAuBxE,OArBKC,IACJA,EAAU,CAAEpB,GAAImB,EAAOG,MAAO,GAAIC,MAAO,EAAA,AAAE,EAC3CpB,EAAIqB,IAAI,CAACJ,IAIVA,EAAQG,KAAK,CAACC,IAAI,CAACjB,GAGL,SAAVY,GAAoBtB,GACvBuB,CAAAA,EAAQG,KAAK,CAAG,CACf,CACCZ,QAASb,EAAE,eACXE,GAAAA,EACAgB,SAAU,CAAA,EACVS,IAAK,CAAA,EACLP,QAASpB,EAAE,yCAA0C,CAAEgB,OAAQhB,EAAE,OAAO,IAEzE,AADC,EAIIK,CACR,EAAG,EAA4B,EAE/B,OACCjB,EAAAwC,aAAA,CAACzC,EAAW,CACX0C,aAAchC,EACdiC,SAAQ,CAAA,EACRlB,KAAK,QACLY,MAAOxB,EAAE,cACT,aAAW,OACX,eAAa,sBACb+B,SAAU5B,EACV6B,UAAU,YAAY,EAGzB\"}"}