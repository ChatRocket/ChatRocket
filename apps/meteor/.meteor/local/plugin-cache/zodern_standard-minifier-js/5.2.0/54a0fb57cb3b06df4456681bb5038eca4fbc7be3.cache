{"code":"function module(e,s,t){let r,a,c;t.export({useEndpointUpload:()=>o}),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){r=e},useUpload(e){a=e}},0),t.link(\"react\",{useCallback(e){c=e}},1);let o=(e,s)=>{let t=a(e),o=r();return c(async e=>{try{let r=t(e),a=r instanceof Promise?r:r.promise,c=await a;if(!c.success)throw Error(String(c.status));return s&&o({type:\"success\",message:s}),c}catch(e){return o({type:\"error\",message:e}),{success:!1}}},[o,t,s])}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useEndpointUpload.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { UploadResult } from '@rocket.chat/ui-contexts';\\nimport { useToastMessageDispatch, useUpload } from '@rocket.chat/ui-contexts';\\nimport { useCallback } from 'react';\\n\\nexport const useEndpointUpload = (\\n\\tendpoint: Parameters<typeof useUpload>[0],\\n\\tsuccessMessage: string,\\n): ((formData: FormData) => Promise<{ success: boolean }>) => {\\n\\tconst sendData = useUpload(endpoint);\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\treturn useCallback(\\n\\t\\tasync (formData: FormData) => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst data = sendData(formData);\\n\\n\\t\\t\\t\\tconst promise = data instanceof Promise ? data : data.promise;\\n\\n\\t\\t\\t\\tconst result = await (promise as unknown as Promise<UploadResult>);\\n\\n\\t\\t\\t\\tif (!result.success) {\\n\\t\\t\\t\\t\\tthrow new Error(String(result.status));\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tsuccessMessage && dispatchToastMessage({ type: 'success', message: successMessage });\\n\\n\\t\\t\\t\\treturn result as any;\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t\\treturn { success: false };\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[dispatchToastMessage, sendData, successMessage],\\n\\t);\\n};\\n\",null],\"names\":[\"useToastMessageDispatch\",\"useUpload\",\"useCallback\",\"module\",\"export\",\"useEndpointUpload\",\"link\",\"v\",\"endpoint\",\"successMessage\",\"sendData\",\"dispatchToastMessage\",\"formData\",\"data\",\"promise\",\"Promise\",\"result\",\"success\",\"Error\",\"String\",\"status\",\"type\",\"message\",\"error\"],\"mappings\":\"2BACmDA,EAA2BC,EAAAC,EAA9EC,EAAOC,MAAE,CAAA,CAAAC,kBAAuBA,IAAEA,CAAiB,GAA2BF,EAAAG,IAAA,CAAA,2BAAA,CAAAN,wBAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,UAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAJ,YAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAGvE,IAAMF,EAAoBA,CAChCG,EACAC,KAEA,IAAMC,EAAWT,EAAUO,GACrBG,EAAuBX,IAE7B,OAAOE,EACN,MAAOU,IACN,GAAI,CACH,IAAMC,EAAOH,EAASE,GAEhBE,EAAUD,aAAgBE,QAAUF,EAAOA,EAAKC,OAAO,CAEvDE,EAAS,MAAOF,EAEtB,GAAI,CAACE,EAAOC,OAAO,CAClB,MAAM,AAAIC,MAAMC,OAAOH,EAAOI,MAAM,GAKrC,OAFAX,GAAkBE,EAAqB,CAAEU,KAAM,UAAWC,QAASb,CAAc,GAE1EO,CACR,CAAE,MAAOO,EAAO,CAEf,OADAZ,EAAqB,CAAEU,KAAM,QAASC,QAASC,CAAK,GAC7C,CAAEN,QAAS,CAAA,CAAK,CACxB,CACD,EACA,CAACN,EAAsBD,EAAUD,EAAe,CAElD\"}"}