{"code":"function module(e,t,l){let o,r,n,a,s,i,u,c,d,f,m,k,p,g,v;l.link(\"@babel/runtime/helpers/extends\",{default(e){o=e}},0),l.link(\"@rocket.chat/fuselage\",{Popover(e){r=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useEffectEvent(e){n=e}},1),l.link(\"react\",{default(e){a=e},Suspense(e){s=e},lazy(e){i=e},useCallback(e){u=e},useMemo(e){c=e},useRef(e){d=e},useState(e){f=e}},2),l.link(\"react-aria\",{useOverlayTrigger(e){m=e}},3),l.link(\"react-stately\",{useOverlayTriggerState(e){k=e}},4),l.link(\"../contexts/RoomContext\",{useRoom(e){p=e}},5),l.link(\"../contexts/RoomToolboxContext\",{useRoomToolbox(e){g=e}},6),l.link(\"../contexts/UserCardContext\",{UserCardContext(e){v=e}},7);let x=i(()=>l.dynamicImport(\"../UserCard\"));l.exportDefault(e=>{let{children:t}=e,l=p(),[i,C]=f(null),b=d(null),h=k({}),{triggerProps:y,overlayProps:E}=m({type:\"dialog\"},h,b);delete y.onPress;let{openTab:R}=g(),U=n(e=>{var t,o;switch(l.t){case\"l\":R(\"room-info\",e);break;case\"v\":R(\"voip-room-info\",e);break;case\"d\":(null!==(t=null===(o=l.uids)||void 0===o?void 0:o.length)&&void 0!==t?t:0)>2?R(\"user-info-group\",e):R(\"user-info\",e);break;default:R(\"members-list\",e)}}),O=u((e,t)=>{b.current=e.target,h.open(),C({username:t,rid:l._id,onOpenUserInfo:()=>U(t),onClose:()=>C(null)})},[U,l._id,h]),T=c(()=>({openUserCard:O,closeUserCard:()=>C(null),triggerProps:y,triggerRef:b,state:h}),[O,h,y]);return a.createElement(v.Provider,{value:T},t,h.isOpen&&i&&a.createElement(s,{fallback:null},a.createElement(r,{placement:\"top left\",triggerRef:b,state:h},a.createElement(x,o({},i,E)))))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/providers/UserCardProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Popover } from '@rocket.chat/fuselage';\\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\\nimport type { ComponentProps, ReactNode } from 'react';\\nimport React, { Suspense, lazy, useCallback, useMemo, useRef, useState } from 'react';\\nimport { useOverlayTrigger } from 'react-aria';\\nimport { useOverlayTriggerState } from 'react-stately';\\n\\nimport { useRoom } from '../contexts/RoomContext';\\nimport { useRoomToolbox } from '../contexts/RoomToolboxContext';\\nimport { UserCardContext } from '../contexts/UserCardContext';\\n\\nconst UserCard = lazy(() => import('../UserCard'));\\n\\nconst UserCardProvider = ({ children }: { children: ReactNode }) => {\\n\\tconst room = useRoom();\\n\\tconst [userCardData, setUserCardData] = useState<ComponentProps<typeof UserCard> | null>(null);\\n\\n\\tconst triggerRef = useRef(null);\\n\\tconst state = useOverlayTriggerState({});\\n\\tconst { triggerProps, overlayProps } = useOverlayTrigger({ type: 'dialog' }, state, triggerRef);\\n\\tdelete triggerProps.onPress;\\n\\n\\tconst { openTab } = useRoomToolbox();\\n\\n\\tconst openUserInfo = useEffectEvent((username?: string) => {\\n\\t\\tswitch (room.t) {\\n\\t\\t\\tcase 'l':\\n\\t\\t\\t\\topenTab('room-info', username);\\n\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\tcase 'v':\\n\\t\\t\\t\\topenTab('voip-room-info', username);\\n\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\tcase 'd':\\n\\t\\t\\t\\t(room.uids?.length ?? 0) > 2 ? openTab('user-info-group', username) : openTab('user-info', username);\\n\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\tdefault:\\n\\t\\t\\t\\topenTab('members-list', username);\\n\\t\\t\\t\\tbreak;\\n\\t\\t}\\n\\t});\\n\\n\\tconst handleSetUserCard = useCallback(\\n\\t\\t(e, username) => {\\n\\t\\t\\ttriggerRef.current = e.target;\\n\\t\\t\\tstate.open();\\n\\t\\t\\tsetUserCardData({\\n\\t\\t\\t\\tusername,\\n\\t\\t\\t\\trid: room._id,\\n\\t\\t\\t\\tonOpenUserInfo: () => openUserInfo(username),\\n\\t\\t\\t\\tonClose: () => setUserCardData(null),\\n\\t\\t\\t});\\n\\t\\t},\\n\\t\\t[openUserInfo, room._id, state],\\n\\t);\\n\\n\\tconst contextValue = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\topenUserCard: handleSetUserCard,\\n\\t\\t\\tcloseUserCard: () => setUserCardData(null),\\n\\t\\t\\ttriggerProps,\\n\\t\\t\\ttriggerRef,\\n\\t\\t\\tstate,\\n\\t\\t}),\\n\\t\\t[handleSetUserCard, state, triggerProps],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<UserCardContext.Provider value={contextValue}>\\n\\t\\t\\t{children}\\n\\t\\t\\t{state.isOpen && userCardData && (\\n\\t\\t\\t\\t<Suspense fallback={null}>\\n\\t\\t\\t\\t\\t<Popover placement='top left' triggerRef={triggerRef} state={state}>\\n\\t\\t\\t\\t\\t\\t<UserCard {...userCardData} {...overlayProps} />\\n\\t\\t\\t\\t\\t</Popover>\\n\\t\\t\\t\\t</Suspense>\\n\\t\\t\\t)}\\n\\t\\t</UserCardContext.Provider>\\n\\t);\\n};\\n\\nexport default UserCardProvider;\\n\",null],\"names\":[\"_extends\",\"Popover\",\"useEffectEvent\",\"React\",\"Suspense\",\"lazy\",\"useCallback\",\"useMemo\",\"useRef\",\"useState\",\"useOverlayTrigger\",\"useOverlayTriggerState\",\"useRoom\",\"useRoomToolbox\",\"UserCardContext\",\"module\",\"link\",\"default\",\"v\",\"UserCard\",\"dynamicImport\",\"exportDefault\",\"_ref\",\"children\",\"room\",\"userCardData\",\"setUserCardData\",\"triggerRef\",\"state\",\"triggerProps\",\"overlayProps\",\"type\",\"onPress\",\"openTab\",\"openUserInfo\",\"username\",\"_room$uids$length\",\"_room$uids\",\"t\",\"uids\",\"length\",\"handleSetUserCard\",\"e\",\"current\",\"target\",\"open\",\"rid\",\"_id\",\"onOpenUserInfo\",\"onClose\",\"contextValue\",\"openUserCard\",\"closeUserCard\",\"createElement\",\"Provider\",\"value\",\"isOpen\",\"fallback\",\"placement\"],\"mappings\":\"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\"}"}