{"code":"function module(e,n,r){r.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){i=e}},0),r.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){o=e}},1),r.export({getVersionStatus:function(){return l}}),r.link(\"semver\",{default:function(e){t=e}},0);var i,o,t,l=function(e,n){var r=n.sort(function(e,n){return t.compare(n.version,e.version)}).filter(function(n){var r=t.prerelease(n.version)||[],i=o(r,1)[0],l=t.prerelease(e)||[],a=o(l,1)[0];return!i||i===a})[0],l=n.find(function(n){return n.version===e})||n.find(function(n){return t.satisfies(String(t.coerce(n.version)),\"=\"+t.major(e)+\".\"+t.minor(e)+\".x\")}),a=!((null==l?void 0:l.expiration)&&new Date(l.expiration)<new Date)&&!!l;return i(i(i({label:\"outdated\",version:e},a&&t.gte(null==l?void 0:l.version,r.version)&&{label:\"latest\"}),a&&t.gt(r.version,null==l?void 0:l.version)&&{label:\"available_version\",version:r.version}),{},{expiration:null==l?void 0:l.expiration})}}","map":"{\"version\":3,\"sources\":[\"client/views/admin/workspace/VersionCard/getVersionStatus.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { SupportedVersions } from '@rocket.chat/server-cloud-communication';\\nimport semver from 'semver';\\n\\nimport type { VersionStatus } from './components/VersionTag';\\n\\nexport const getVersionStatus = (\\n\\tserverVersion: string,\\n\\tversions: SupportedVersions['versions'],\\n): { label: VersionStatus; expiration: Date | undefined; version: string } => {\\n\\tconst highestVersion = versions\\n\\t\\t.sort((prev, current) => semver.compare(current.version, prev.version))\\n\\t\\t.filter((v) => {\\n\\t\\t\\tconst [prerelease] = semver.prerelease(v.version) || [];\\n\\t\\t\\tconst [currentPrerelease] = semver.prerelease(serverVersion) || [];\\n\\n\\t\\t\\treturn !prerelease || prerelease === currentPrerelease;\\n\\t\\t})[0];\\n\\n\\tconst currentVersionData =\\n\\t\\tversions.find((v) => v.version === serverVersion) ||\\n\\t\\tversions.find((v) =>\\n\\t\\t\\tsemver.satisfies(String(semver.coerce(v.version)), `=${semver.major(serverVersion)}.${semver.minor(serverVersion)}.x`),\\n\\t\\t);\\n\\n\\tconst currentVersionIsExpired = currentVersionData?.expiration && new Date(currentVersionData.expiration) < new Date();\\n\\n\\tconst isSupported = !currentVersionIsExpired && !!currentVersionData;\\n\\n\\treturn {\\n\\t\\tlabel: 'outdated',\\n\\t\\tversion: serverVersion,\\n\\t\\t...(isSupported && semver.gte(currentVersionData?.version, highestVersion.version) && { label: 'latest' }),\\n\\t\\t...(isSupported &&\\n\\t\\t\\tsemver.gt(highestVersion.version, currentVersionData?.version) && { label: 'available_version', version: highestVersion.version }),\\n\\t\\texpiration: currentVersionData?.expiration,\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"_slicedToArray\",\"export\",\"getVersionStatus\",\"semver\",\"serverVersion\",\"versions\",\"highestVersion\",\"sort\",\"prev\",\"current\",\"compare\",\"version\",\"filter\",\"_ref\",\"prerelease\",\"_ref2\",\"_ref3\",\"currentPrerelease\",\"_ref4\",\"currentVersionData\",\"find\",\"satisfies\",\"String\",\"coerce\",\"major\",\"minor\",\"isSupported\",\"expiration\",\"Date\",\"label\",\"gte\",\"gt\"],\"mappings\":\"uBACaA,EAAMC,IAAS,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAA5BH,EAAOM,MAAM,CAAA,CAAAC,iBAAe,WAAA,OAAAA,CAAA,CAAA,GAAAP,EAAAC,IAAA,CAAA,SAAA,CAAA,QAAA,SAAAE,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAIrB,IAJPC,EAA4BC,EAAAG,EAIfD,EAAmB,SAC/BE,CAAqB,CACrBC,CAAuC,EAEvC,IAAMC,EAAiBD,EACrBE,IAAI,CAAC,SAACC,CAAI,CAAEC,CAAO,EAAA,OAAKN,EAAOO,OAAO,CAACD,EAAQE,OAAO,CAAEH,EAAKG,OAAO,CAAC,GACrEC,MAAM,CAAC,SAACd,CAAC,EACT,IAAAe,EAAqBV,EAAOW,UAAU,CAAChB,EAAEa,OAAO,GAAK,EAAE,CAAhDG,EAAUC,AAAsCf,EAAAa,EAAA,EAAtC,CAAA,EAAA,CACjBG,EAA4Bb,EAAOW,UAAU,CAACV,IAAkB,EAAE,CAA3Da,EAAiBC,AAA0ClB,EAAAgB,EAAA,EAA1C,CAAA,EAAA,CAExB,MAAO,CAACF,GAAcA,IAAeG,CACtC,EAAE,CAAC,EAAE,CAEAE,EACLd,EAASe,IAAI,CAAC,SAACtB,CAAC,EAAA,OAAKA,EAAEa,OAAO,GAAKP,CAAa,IAChDC,EAASe,IAAI,CAAC,SAACtB,CAAC,EAAA,OACfK,EAAOkB,SAAS,CAACC,OAAOnB,EAAOoB,MAAM,CAACzB,EAAEa,OAAO,GAAE,IAAMR,EAAOqB,KAAK,CAACpB,GAAc,IAAID,EAAOsB,KAAK,CAACrB,GAAc,KAAK,GAKlHsB,EAAc,CAFY,CAAA,AAAAP,CAAAA,MAAAA,EAAkB,KAAA,EAAlBA,EAAoBQ,UAAU,AAAVA,GAAc,IAAIC,KAAKT,EAAmBQ,UAAU,EAAI,IAAIC,IAAI,GAEpE,CAAC,CAACT,EAElD,OAAApB,EAAAA,EAAAA,EAAA,CACC8B,MAAO,WACPlB,QAASP,CAAa,EAClBsB,GAAevB,EAAO2B,GAAG,CAACX,MAAAA,EAAkB,KAAA,EAAlBA,EAAoBR,OAAO,CAAEL,EAAeK,OAAO,GAAK,CAAEkB,MAAO,QAAQ,GACnGH,GACHvB,EAAO4B,EAAE,CAACzB,EAAeK,OAAO,CAAEQ,MAAAA,EAAkB,KAAA,EAAlBA,EAAoBR,OAAO,GAAK,CAAEkB,MAAO,oBAAqBlB,QAASL,EAAeK,OAAAA,AAAO,GAAE,CAAA,EAAA,CAClIgB,WAAYR,MAAAA,EAAkB,KAAA,EAAlBA,EAAoBQ,UAAAA,AAAU,EAE5C\"}"}