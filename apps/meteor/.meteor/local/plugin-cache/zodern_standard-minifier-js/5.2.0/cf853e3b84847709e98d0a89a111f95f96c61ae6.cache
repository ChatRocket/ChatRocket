{"code":"function module(e,n,t){var l,o,a,u,i,r,c,s,f,m,d,p,E,h,k,x,b,v,g,A,C;t.link(\"@babel/runtime/regenerator\",{default:function(e){l=e}},0),t.link(\"@babel/runtime/helpers/extends\",{default:function(e){o=e}},1),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){a=e}},2),t.link(\"@rocket.chat/fuselage\",{Button:function(e){u=e},Modal:function(e){i=e},Select:function(e){r=e},Field:function(e){c=e},FieldGroup:function(e){s=e},FieldLabel:function(e){f=e},FieldRow:function(e){m=e},Box:function(e){d=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){p=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){E=e},useEndpoint:function(e){h=e},useTranslation:function(e){k=e}},2),t.link(\"react\",{default:function(e){x=e},useState:function(e){b=e},useMemo:function(e){v=e}},3),t.link(\"../../../../../components/AutoCompleteAgentWithoutExtension\",{default:function(e){g=e}},4),t.link(\"../../../../../hooks/useAsyncState\",{AsyncStatePhase:function(e){A=e}},5),t.link(\"../../../../../hooks/useEndpointData\",{useEndpointData:function(e){C=e}},6),t.exportDefault(function(e){var n,t=e.existingExtension,_=e.closeModal,y=e.reload,F=k(),S=E(),D=b(\"\"),M=a(D,2),T=M[0],w=M[1],P=b(t||\"\"),B=a(P,2),G=B[0],I=B[1],L=v(function(){return{type:\"available\",userId:T}},[T]),N=h(\"POST\",\"/v1/omnichannel/agent/extension\"),O=p(function(e){return l.async(function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,n.next=4,l.awrap(N({username:T,extension:G}));case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),S({type:\"error\",message:n.t0});case 9:y(),_();case 11:case\"end\":return n.stop()}},null,null,[[1,6]],Promise)}),W=p(function(e){return w(e)}),H=C(\"/v1/omnichannel/extension\",{params:L}),R=H.value,j=H.phase;return x.createElement(i,{wrapperFunction:function(e){return x.createElement(d,o({is:\"form\",onSubmit:O},e))}},x.createElement(i.Header,null,x.createElement(i.Title,null,F(\"Associate_Agent_to_Extension\")),x.createElement(i.Close,{onClick:_})),x.createElement(i.Content,null,x.createElement(s,null,x.createElement(c,null,x.createElement(f,null,F(\"Agent_Without_Extensions\")),x.createElement(m,null,x.createElement(g,{value:T,onChange:W,currentExtension:G}))),x.createElement(c,null,x.createElement(f,null,F(\"Free_Extension_Numbers\")),x.createElement(m,null,x.createElement(r,{disabled:j===A.LOADING||\"\"===T,options:(null==R?void 0:null===(n=R.extensions)||void 0===n?void 0:n.map(function(e){return[e,e]}))||[],value:G,placeholder:F(\"Select_an_option\"),onChange:function(e){return I(String(e))}}))))),x.createElement(i.Footer,null,x.createElement(i.FooterControllers,null,x.createElement(u,{onClick:_},F(\"Cancel\")),x.createElement(u,{primary:!0,disabled:!T||!G,type:\"submit\"},F(\"Associate\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/settings/groups/VoipGroupPage/AssignAgentModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Button, Modal, Select, Field, FieldGroup, FieldLabel, FieldRow, Box } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\\nimport React, { useState, useMemo } from 'react';\\n\\nimport AutoCompleteAgentWithoutExtension from '../../../../../components/AutoCompleteAgentWithoutExtension';\\nimport { AsyncStatePhase } from '../../../../../hooks/useAsyncState';\\nimport { useEndpointData } from '../../../../../hooks/useEndpointData';\\n\\ntype AssignAgentModalProps = {\\n\\tcloseModal: () => void;\\n\\treload: () => void;\\n\\texistingExtension?: string;\\n};\\n\\nconst AssignAgentModal = ({ existingExtension, closeModal, reload }: AssignAgentModalProps) => {\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst [agent, setAgent] = useState('');\\n\\tconst [extension, setExtension] = useState(existingExtension || '');\\n\\tconst query = useMemo(() => ({ type: 'available' as const, userId: agent }), [agent]);\\n\\n\\tconst assignAgent = useEndpoint('POST', '/v1/omnichannel/agent/extension');\\n\\n\\tconst handleAssignment = useMutableCallback(async (e) => {\\n\\t\\te.preventDefault();\\n\\t\\ttry {\\n\\t\\t\\tawait assignAgent({ username: agent, extension });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t\\treload();\\n\\t\\tcloseModal();\\n\\t});\\n\\tconst handleAgentChange = useMutableCallback((e) => setAgent(e));\\n\\n\\tconst { value: availableExtensions, phase: state } = useEndpointData('/v1/omnichannel/extension', { params: query });\\n\\n\\treturn (\\n\\t\\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleAssignment} {...props} />}>\\n\\t\\t\\t<Modal.Header>\\n\\t\\t\\t\\t<Modal.Title>{t('Associate_Agent_to_Extension')}</Modal.Title>\\n\\t\\t\\t\\t<Modal.Close onClick={closeModal} />\\n\\t\\t\\t</Modal.Header>\\n\\t\\t\\t<Modal.Content>\\n\\t\\t\\t\\t<FieldGroup>\\n\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t<FieldLabel>{t('Agent_Without_Extensions')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<AutoCompleteAgentWithoutExtension value={agent} onChange={handleAgentChange} currentExtension={extension} />\\n\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t<FieldLabel>{t('Free_Extension_Numbers')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<Select\\n\\t\\t\\t\\t\\t\\t\\t\\tdisabled={state === AsyncStatePhase.LOADING || agent === ''}\\n\\t\\t\\t\\t\\t\\t\\t\\toptions={availableExtensions?.extensions?.map((extension) => [extension, extension]) || []}\\n\\t\\t\\t\\t\\t\\t\\t\\tvalue={extension}\\n\\t\\t\\t\\t\\t\\t\\t\\tplaceholder={t('Select_an_option')}\\n\\t\\t\\t\\t\\t\\t\\t\\tonChange={(value) => setExtension(String(value))}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t</FieldGroup>\\n\\t\\t\\t</Modal.Content>\\n\\t\\t\\t<Modal.Footer>\\n\\t\\t\\t\\t<Modal.FooterControllers>\\n\\t\\t\\t\\t\\t<Button onClick={closeModal}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button primary disabled={!agent || !extension} type='submit'>\\n\\t\\t\\t\\t\\t\\t{t('Associate')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</Modal.FooterControllers>\\n\\t\\t\\t</Modal.Footer>\\n\\t\\t</Modal>\\n\\t);\\n};\\n\\nexport default AssignAgentModal;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_extends\",\"_slicedToArray\",\"Button\",\"Modal\",\"Select\",\"Field\",\"FieldGroup\",\"FieldLabel\",\"FieldRow\",\"Box\",\"useMutableCallback\",\"useToastMessageDispatch\",\"useEndpoint\",\"useTranslation\",\"React\",\"useState\",\"useMemo\",\"AutoCompleteAgentWithoutExtension\",\"AsyncStatePhase\",\"useEndpointData\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_availableExtensions$\",\"existingExtension\",\"closeModal\",\"reload\",\"t\",\"dispatchToastMessage\",\"_useState\",\"_useState2\",\"agent\",\"setAgent\",\"_useState3\",\"_useState4\",\"extension\",\"setExtension\",\"query\",\"type\",\"userId\",\"assignAgent\",\"handleAssignment\",\"e\",\"async\",\"_context\",\"prev\",\"next\",\"preventDefault\",\"awrap\",\"username\",\"t0\",\"message\",\"stop\",\"Promise\",\"handleAgentChange\",\"_useEndpointData\",\"params\",\"availableExtensions\",\"value\",\"state\",\"phase\",\"createElement\",\"wrapperFunction\",\"props\",\"is\",\"onSubmit\",\"Header\",\"Title\",\"Close\",\"onClick\",\"Content\",\"onChange\",\"currentExtension\",\"disabled\",\"LOADING\",\"options\",\"extensions\",\"map\",\"placeholder\",\"String\",\"Footer\",\"FooterControllers\",\"primary\"],\"mappings\":\"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\"}"}