{"code":"function module(t,n,e){e.link(\"@babel/runtime/regenerator\",{default:function(t){i=t}},0),e.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(t){o=t}},1),e.export({useRoomsList:function(){return d}}),e.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(t){r=t}},0),e.link(\"react\",{useCallback:function(t){u=t},useState:function(t){a=t}},1),e.link(\"../lib/lists/RecordList\",{RecordList:function(t){l=t}},2),e.link(\"./lists/useScrollableRecordList\",{useScrollableRecordList:function(t){s=t}},3),e.link(\"./useComponentDidUpdate\",{useComponentDidUpdate:function(t){c=t}},4);var i,o,r,u,a,l,s,c,d=function(t){var n=a(function(){return new l}),e=o(n,2),d=e[0],f=e[1],m=u(function(){return f(new l)},[]),p=r(\"GET\",\"/v1/rooms.autocomplete.channelAndPrivate.withPagination\");c(function(){t&&m()},[t,m]);var v=u(function(n,e){var o,r,u,a;return i.async(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,i.awrap(p({selector:JSON.stringify({name:t.text||\"\"}),offset:n,count:n+e,sort:JSON.stringify({name:1})}));case 2:return r=(o=l.sent).items,u=o.total,a=r.map(function(t){var n,e;return{_id:t._id,_updatedAt:new Date(t._updatedAt),label:null!==(n=t.name)&&void 0!==n?n:\"\",value:null!==(e=t.name)&&void 0!==e?e:\"\"}}),l.abrupt(\"return\",{items:a,itemCount:u});case 7:case\"end\":return l.stop()}},null,null,null,Promise)},[p,t.text]),b=s(d,v,25);return{reload:m,itemsList:d,loadMoreItems:b.loadMoreItems,initialItemCount:b.initialItemCount}}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useRoomsList.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useState } from 'react';\\n\\nimport { RecordList } from '../lib/lists/RecordList';\\nimport { useScrollableRecordList } from './lists/useScrollableRecordList';\\nimport { useComponentDidUpdate } from './useComponentDidUpdate';\\n\\ntype RoomListOptions = {\\n\\ttext: string;\\n};\\n\\ntype IRoomClient = Pick<IRoom, '_updatedAt' | '_id'> & {\\n\\tlabel: string;\\n\\tvalue: string;\\n};\\n\\nexport const useRoomsList = (\\n\\toptions: RoomListOptions,\\n): {\\n\\titemsList: RecordList<IRoomClient>;\\n\\tinitialItemCount: number;\\n\\treload: () => void;\\n\\tloadMoreItems: (start: number, end: number) => void;\\n} => {\\n\\tconst [itemsList, setItemsList] = useState(() => new RecordList<IRoomClient>());\\n\\tconst reload = useCallback(() => setItemsList(new RecordList<IRoomClient>()), []);\\n\\n\\tconst getRooms = useEndpoint('GET', '/v1/rooms.autocomplete.channelAndPrivate.withPagination');\\n\\n\\tuseComponentDidUpdate(() => {\\n\\t\\toptions && reload();\\n\\t}, [options, reload]);\\n\\n\\tconst fetchData = useCallback(\\n\\t\\tasync (start, end) => {\\n\\t\\t\\tconst { items: rooms, total } = await getRooms({\\n\\t\\t\\t\\tselector: JSON.stringify({ name: options.text || '' }),\\n\\t\\t\\t\\toffset: start,\\n\\t\\t\\t\\tcount: start + end,\\n\\t\\t\\t\\tsort: JSON.stringify({ name: 1 }),\\n\\t\\t\\t});\\n\\n\\t\\t\\tconst items = rooms.map((room: any) => ({\\n\\t\\t\\t\\t_id: room._id,\\n\\t\\t\\t\\t_updatedAt: new Date(room._updatedAt),\\n\\t\\t\\t\\tlabel: room.name ?? '',\\n\\t\\t\\t\\tvalue: room.name ?? '',\\n\\t\\t\\t}));\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\titems,\\n\\t\\t\\t\\titemCount: total,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t[getRooms, options.text],\\n\\t);\\n\\n\\tconst { loadMoreItems, initialItemCount } = useScrollableRecordList(itemsList, fetchData, 25);\\n\\n\\treturn {\\n\\t\\treload,\\n\\t\\titemsList,\\n\\t\\tloadMoreItems,\\n\\t\\tinitialItemCount,\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_slicedToArray\",\"export\",\"useRoomsList\",\"useEndpoint\",\"useCallback\",\"useState\",\"RecordList\",\"useScrollableRecordList\",\"useComponentDidUpdate\",\"options\",\"_useState\",\"_useState2\",\"itemsList\",\"setItemsList\",\"reload\",\"getRooms\",\"fetchData\",\"start\",\"end\",\"_await$getRooms\",\"rooms\",\"total\",\"items\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"selector\",\"JSON\",\"stringify\",\"name\",\"text\",\"offset\",\"count\",\"sort\",\"sent\",\"map\",\"room\",\"_room$name\",\"_room$name2\",\"_id\",\"_updatedAt\",\"Date\",\"label\",\"value\",\"abrupt\",\"itemCount\",\"stop\",\"Promise\",\"_useScrollableRecordL\",\"loadMoreItems\",\"initialItemCount\"],\"mappings\":\"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\"}"}