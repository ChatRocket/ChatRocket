{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),t.export({timeAgo:function(){return f}}),t.link(\"meteor/meteor\",{Meteor:function(e){i=e}},0),t.link(\"meteor/tracker\",{Tracker:function(e){u=e}},1),t.link(\"moment\",{default:function(e){o=e}},2),t.link(\"../../../app/settings/client\",{settings:function(e){a=e}},3),t.link(\"../../../app/utils/client\",{getUserPreference:function(e){c=e}},4),t.link(\"../../../app/utils/lib/i18n\",{t:function(e){l=e}},5);var r,i,u,o,a,c,l,s=[\"h:mm A\",\"H:mm\"],f=function(e){var n,t,f;return r.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=u.nonreactive(function(){return c(i.userId(),\"clockMode\",!1)}),t=u.nonreactive(function(){return a.get(\"Message_TimeFormat\")}),f=(\"number\"==typeof n?s[n-1]:void 0)||t,r.abrupt(\"return\",o(e).calendar(null,{lastDay:\"[\"+l(\"yesterday\")+\"]\",sameDay:f,lastWeek:\"dddd\",sameElse:function(e){return 0>Math.ceil(this.diff(e,\"years\",!0))?\"MMM D YYYY\":\"MMM D\"}}));case 4:case\"end\":return r.stop()}},null,null,null,Promise)}}","map":"{\"version\":3,\"sources\":[\"client/lib/utils/timeAgo.ts\",\"<anon>\"],\"sourcesContent\":[\"import { Meteor } from 'meteor/meteor';\\nimport { Tracker } from 'meteor/tracker';\\nimport type { Moment, MomentInput } from 'moment';\\nimport moment from 'moment';\\n\\nimport { settings } from '../../../app/settings/client';\\nimport { getUserPreference } from '../../../app/utils/client';\\nimport { t } from '../../../app/utils/lib/i18n';\\n\\nconst dayFormat = ['h:mm A', 'H:mm'];\\n\\nexport const timeAgo = async (date: MomentInput): Promise<string> => {\\n\\tconst clockMode = Tracker.nonreactive(() => getUserPreference(Meteor.userId(), 'clockMode', false) as number | boolean);\\n\\tconst messageTimeFormat = Tracker.nonreactive(() => settings.get('Message_TimeFormat'));\\n\\tconst sameDay = (typeof clockMode === 'number' ? dayFormat[clockMode - 1] : undefined) || messageTimeFormat;\\n\\n\\treturn moment(date).calendar(null, {\\n\\t\\tlastDay: `[${t('yesterday')}]`,\\n\\t\\tsameDay,\\n\\t\\tlastWeek: 'dddd',\\n\\t\\tsameElse(this: Moment, now) {\\n\\t\\t\\tconst diff = Math.ceil(this.diff(now, 'years', true));\\n\\t\\t\\treturn diff < 0 ? 'MMM D YYYY' : 'MMM D';\\n\\t\\t},\\n\\t});\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"export\",\"timeAgo\",\"Meteor\",\"Tracker\",\"moment\",\"settings\",\"getUserPreference\",\"t\",\"dayFormat\",\"date\",\"clockMode\",\"messageTimeFormat\",\"sameDay\",\"async\",\"_context\",\"prev\",\"next\",\"nonreactive\",\"userId\",\"get\",\"undefined\",\"abrupt\",\"calendar\",\"lastDay\",\"lastWeek\",\"sameElse\",\"now\",\"diff\",\"Math\",\"ceil\",\"stop\",\"Promise\"],\"mappings\":\"uBAAuBA,EAAAC,IAAA,CAAA,6BAAgB,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAvCH,EAAOK,MAAE,CAAA,CAAMC,QAAQ,WAAA,OAAgBA,CAAA,CAAA,GAAAN,EAAAC,IAAA,CAAA,gBAAA,CAAAM,OAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iBAAA,CAAAO,QAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,SAAA,CAAA,QAAA,SAAAE,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,+BAAA,CAAAS,SAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,4BAAA,CAAAU,kBAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAW,EAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,CAAA,EAAA,GASvC,IATAC,EAAuCG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EASjCC,EAAY,CAAC,SAAU,OAAO,CAEvBP,EAAU,SAAOQ,CAAiB,EAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAb,EAAAc,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAG6D,OAFrGN,EAAYP,EAAQc,WAAW,CAAC,WAAA,OAAMX,EAAkBJ,EAAOgB,MAAM,GAAI,YAAa,CAAA,EAA0B,GAChHP,EAAoBR,EAAQc,WAAW,CAAC,WAAA,OAAMZ,EAASc,GAAG,CAAC,qBAAqB,GAChFP,EAAU,AAAC,CAAA,AAAqB,UAArB,OAAOF,EAAyBF,CAAS,CAACE,EAAY,EAAE,CAAGU,KAAAA,CAAAA,GAAcT,EAAiBG,EAAAO,MAAA,CAAA,SAEpGjB,EAAOK,GAAMa,QAAQ,CAAC,KAAM,CAClCC,QAAO,IAAMhB,EAAE,aAAY,IAC3BK,QAAAA,EACAY,SAAU,OACVC,SAAQ,SAAeC,CAAG,EAEzB,OAAOC,AAAO,EADDC,KAAKC,IAAI,CAAC,IAAI,CAACF,IAAI,CAACD,EAAK,QAAS,CAAA,IAC7B,aAAe,OAClC,IACC,MAAA,EAAA,IAAA,MAAA,OAAAZ,EAAAgB,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA\"}"}