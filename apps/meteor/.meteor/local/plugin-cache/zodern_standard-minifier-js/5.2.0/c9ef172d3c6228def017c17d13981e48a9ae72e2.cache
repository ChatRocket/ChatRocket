{"code":"function module(e,n,t){t.link(\"@babel/runtime/helpers/extends\",{default:function(e){a=e}},0),t.export({MessageListItem:function(){return k}}),t.link(\"@rocket.chat/core-typings\",{isThreadMessage:function(e){i=e}},0),t.link(\"@rocket.chat/fuselage\",{Box:function(e){s=e},Bubble:function(e){l=e},MessageDivider:function(e){r=e}},1),t.link(\"react\",{default:function(e){o=e}},2),t.link(\"react-i18next\",{useTranslation:function(e){u=e}},3),t.link(\"../../../components/message/variants/RoomMessage\",{default:function(e){d=e}},4),t.link(\"../../../components/message/variants/SystemMessage\",{default:function(e){c=e}},5),t.link(\"../../../components/message/variants/ThreadMessagePreview\",{default:function(e){m=e}},6),t.link(\"../../../hooks/useFormatDate\",{useFormatDate:function(e){v=e}},7),t.link(\"../providers/DateListProvider\",{useDateRef:function(e){f=e}},8),t.link(\"./lib/isMessageNewDay\",{isMessageNewDay:function(e){g=e}},9);var a,i,s,l,r,o,u,d,c,m,v,f,g,k=function(e){var n,t,k,h,p=e.message,w=e.previous,b=e.showUnreadDivider,D=e.sequential,M=e.showUserAvatar,E=e.visible,U=e.subscription,y=e.system,_=u().t,A=v(),q=f(),x=g(p,w),L=x||b,T=!!(null==U?void 0:null===(n=U.tunread)||void 0===n?void 0:n.includes(p._id)),F=!!(null==U?void 0:null===(t=U.tunreadUser)||void 0===t?void 0:t.includes(p._id)),S=!!(null==U?void 0:null===(k=U.tunreadGroup)||void 0===k?void 0:k.includes(p._id)),B=!!(null==U?void 0:null===(h=U.ignored)||void 0===h?void 0:h.includes(p.u._id)),I=D&&!x;return o.createElement(o.Fragment,null,L&&o.createElement(s,a({ref:q,\"data-id\":p.ts,role:\"listitem\"},x&&{\"data-time\":new Date(p.ts).toISOString().replaceAll(/[-T:.]/g,\"\").substring(0,8)}),o.createElement(r,{unreadLabel:b?_(\"Unread_Messages\").toLowerCase():void 0},x&&o.createElement(l,{small:!0,secondary:!0},A(p.ts)))),E&&o.createElement(d,{message:p,showUserAvatar:M,sequential:I,unread:T,mention:F,all:S,ignoredUser:B}),i(p)&&o.createElement(\"li\",null,o.createElement(m,{\"data-mid\":p._id,\"data-tmid\":p.tmid,\"data-unread\":b,\"data-sequential\":D,sequential:I,message:p,showUserAvatar:M})),y&&o.createElement(c,{showUserAvatar:M,message:p}))}}","map":"{\"version\":3,\"sources\":[\"client/views/room/MessageList/MessageListItem.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { isThreadMessage, type IMessage, type ISubscription } from '@rocket.chat/core-typings';\\nimport { Box, Bubble, MessageDivider } from '@rocket.chat/fuselage';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport RoomMessage from '../../../components/message/variants/RoomMessage';\\nimport SystemMessage from '../../../components/message/variants/SystemMessage';\\nimport ThreadMessagePreview from '../../../components/message/variants/ThreadMessagePreview';\\nimport { useFormatDate } from '../../../hooks/useFormatDate';\\nimport { useDateRef } from '../providers/DateListProvider';\\nimport { isMessageNewDay } from './lib/isMessageNewDay';\\n\\ntype MessageListItemProps = {\\n\\tmessage: IMessage;\\n\\tprevious?: IMessage;\\n\\tshowUnreadDivider: boolean;\\n\\n\\tsequential: boolean;\\n\\tshowUserAvatar: boolean;\\n\\tvisible: boolean;\\n\\tsubscription: ISubscription | undefined;\\n\\tsystem: boolean;\\n};\\nexport const MessageListItem = ({\\n\\tmessage,\\n\\tprevious,\\n\\tshowUnreadDivider,\\n\\tsequential,\\n\\tshowUserAvatar,\\n\\tvisible,\\n\\tsubscription,\\n\\tsystem,\\n}: MessageListItemProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst formatDate = useFormatDate();\\n\\n\\tconst ref = useDateRef();\\n\\n\\tconst newDay = isMessageNewDay(message, previous);\\n\\tconst showDivider = newDay || showUnreadDivider;\\n\\tconst unread = Boolean(subscription?.tunread?.includes(message._id));\\n\\tconst mention = Boolean(subscription?.tunreadUser?.includes(message._id));\\n\\tconst all = Boolean(subscription?.tunreadGroup?.includes(message._id));\\n\\tconst ignoredUser = Boolean(subscription?.ignored?.includes(message.u._id));\\n\\tconst shouldShowAsSequential = sequential && !newDay;\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t{showDivider && (\\n\\t\\t\\t\\t<Box\\n\\t\\t\\t\\t\\tref={ref}\\n\\t\\t\\t\\t\\tdata-id={message.ts}\\n\\t\\t\\t\\t\\trole='listitem'\\n\\t\\t\\t\\t\\t{...(newDay && {\\n\\t\\t\\t\\t\\t\\t'data-time': new Date(message.ts)\\n\\t\\t\\t\\t\\t\\t\\t.toISOString()\\n\\t\\t\\t\\t\\t\\t\\t.replaceAll(/[-T:.]/g, '')\\n\\t\\t\\t\\t\\t\\t\\t.substring(0, 8),\\n\\t\\t\\t\\t\\t})}\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<MessageDivider unreadLabel={showUnreadDivider ? t('Unread_Messages').toLowerCase() : undefined}>\\n\\t\\t\\t\\t\\t\\t{newDay && (\\n\\t\\t\\t\\t\\t\\t\\t<Bubble small secondary>\\n\\t\\t\\t\\t\\t\\t\\t\\t{formatDate(message.ts)}\\n\\t\\t\\t\\t\\t\\t\\t</Bubble>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</MessageDivider>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t)}\\n\\t\\t\\t{visible && (\\n\\t\\t\\t\\t<RoomMessage\\n\\t\\t\\t\\t\\tmessage={message}\\n\\t\\t\\t\\t\\tshowUserAvatar={showUserAvatar}\\n\\t\\t\\t\\t\\tsequential={shouldShowAsSequential}\\n\\t\\t\\t\\t\\tunread={unread}\\n\\t\\t\\t\\t\\tmention={mention}\\n\\t\\t\\t\\t\\tall={all}\\n\\t\\t\\t\\t\\tignoredUser={ignoredUser}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\t\\t\\t{isThreadMessage(message) && (\\n\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t<ThreadMessagePreview\\n\\t\\t\\t\\t\\t\\tdata-mid={message._id}\\n\\t\\t\\t\\t\\t\\tdata-tmid={message.tmid}\\n\\t\\t\\t\\t\\t\\tdata-unread={showUnreadDivider}\\n\\t\\t\\t\\t\\t\\tdata-sequential={sequential}\\n\\t\\t\\t\\t\\t\\tsequential={shouldShowAsSequential}\\n\\t\\t\\t\\t\\t\\tmessage={message}\\n\\t\\t\\t\\t\\t\\tshowUserAvatar={showUserAvatar}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t)}\\n\\t\\t\\t{system && <SystemMessage showUserAvatar={showUserAvatar} message={message} />}\\n\\t\\t</>\\n\\t);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_extends\",\"export\",\"MessageListItem\",\"isThreadMessage\",\"Box\",\"Bubble\",\"MessageDivider\",\"React\",\"useTranslation\",\"RoomMessage\",\"SystemMessage\",\"ThreadMessagePreview\",\"useFormatDate\",\"useDateRef\",\"isMessageNewDay\",\"_ref\",\"_subscription$tunread\",\"_subscription$tunread2\",\"_subscription$tunread3\",\"_subscription$ignored\",\"message\",\"previous\",\"showUnreadDivider\",\"sequential\",\"showUserAvatar\",\"visible\",\"subscription\",\"system\",\"t\",\"_useTranslation\",\"formatDate\",\"ref\",\"newDay\",\"showDivider\",\"unread\",\"Boolean\",\"tunread\",\"includes\",\"_id\",\"mention\",\"tunreadUser\",\"all\",\"tunreadGroup\",\"ignoredUser\",\"ignored\",\"u\",\"shouldShowAsSequential\",\"createElement\",\"Fragment\",\"ts\",\"role\",\"Date\",\"toISOString\",\"replaceAll\",\"substring\",\"unreadLabel\",\"toLowerCase\",\"undefined\",\"small\",\"secondary\",\"tmid\"],\"mappings\":\"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\"}"}