{"code":"function module(e,n,t){var r,u,a,i,s,c,l,o,p,f=[\"type\"],d=[\"type\"];t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){u=e}},0),t.link(\"@babel/runtime/regenerator\",{default:function(e){a=e}},1),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){i=e}},2),t.export({initializeLivechatInquiryStream:function(){return P}}),t.link(\"../../../../../client/lib/queryClient\",{queryClient:function(e){s=e}},0),t.link(\"../../../../../client/lib/utils/callWithErrorHandling\",{callWithErrorHandling:function(e){c=e}},1),t.link(\"../../../../settings/client\",{settings:function(e){l=e}},2),t.link(\"../../../../utils/client/lib/SDKClient\",{sdk:function(e){o=e}},3),t.link(\"../../collections/LivechatInquiry\",{LivechatInquiry:function(e){p=e}},4);var v=new Set,m={added:function(e){return a.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(v.has(e.department)){n.next=2;break}return n.abrupt(\"return\");case 2:return p.insert(i(i({},e),{},{alert:!0,_updatedAt:new Date(e._updatedAt)})),n.next=5,a.awrap(h(e.rid));case 5:case\"end\":return n.stop()}},null,null,null,Promise)},changed:function(e){return a.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(\"queued\"!==e.status||e.department&&!v.has(e.department))){n.next=2;break}return n.abrupt(\"return\",b(e));case 2:return p.upsert({_id:e._id},i(i({},e),{},{alert:!0,_updatedAt:new Date(e._updatedAt)})),n.next=5,a.awrap(h(e.rid));case 5:case\"end\":return n.stop()}},null,null,null,Promise)},removed:function(e){return b(e)}},h=function(e){return a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.awrap(s.invalidateQueries([\"rooms\",{reference:e,type:\"l\"}]));case 2:s.removeQueries([\"rooms\",e]),s.removeQueries([\"/v1/rooms.info\",e]);case 4:case\"end\":return n.stop()}},null,null,null,Promise)},b=function(e){return a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return p.remove(e._id),n.abrupt(\"return\",s.invalidateQueries([\"rooms\",{reference:e.rid,type:\"l\"}]));case 2:case\"end\":return n.stop()}},null,null,null,Promise)},y=function(){var e,n,t;return a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=null!==(e=l.get(\"Livechat_guest_pool_max_number_incoming_livechats_displayed\"))&&void 0!==e?e:0,r.next=3,a.awrap(o.rest.get(\"/v1/livechat/inquiries.queuedForUser\",{count:n}));case 3:return t=r.sent.inquiries,r.abrupt(\"return\",t);case 6:case\"end\":return r.stop()}},null,null,null,Promise)},x=function(e){o.stop(\"livechat-inquiry-queue-observer\",\"department/\"+e),v.delete(e)},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.map(function(e){return v.add(e),o.stream(\"livechat-inquiry-queue-observer\",[\"department/\"+e],function(e){var n,t;return a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(\"type\"in e){r.next=2;break}return r.abrupt(\"return\");case 2:return n=e.type,t=u(e,f),r.next=5,a.awrap(m[e.type](t));case 5:case\"end\":return r.stop()}},null,null,null,Promise)}),function(){return x(e)}});return function(){return n.forEach(function(e){return e()})}},g=function(){var e,n=arguments;return a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:[],t.abrupt(\"return\",e.forEach(function(e){return p.upsert({_id:e._id},i(i({},e),{},{_updatedAt:new Date(e._updatedAt)}))}));case 2:case\"end\":return t.stop()}},null,null,null,Promise)},_=function(e){var n;return a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.awrap(o.rest.get(\"/v1/livechat/agents/\"+e+\"/departments\",{enabledDepartmentsOnly:\"true\"}));case 2:return n=t.sent.departments,t.abrupt(\"return\",n);case 5:case\"end\":return t.stop()}},null,null,null,Promise)},q=function(){return o.stop(\"livechat-inquiry-queue-observer\",\"public\")},k=function(e){var n,t,r,i;return a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a.awrap(c(\"livechat:getRoutingConfig\"));case 2:if(!(null!=(n=s.sent)&&n.autoAssignAgent)){s.next=5;break}return s.abrupt(\"return\");case 5:return s.next=7,a.awrap(_(e));case 7:return t=w(s.sent.map(function(e){return e.departmentId})),o.stream(\"livechat-inquiry-queue-observer\",[\"public\"],function(e){var n,t;return a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(\"type\"in e){r.next=2;break}return r.abrupt(\"return\");case 2:return n=e.type,t=u(e,d),r.next=5,a.awrap(m[e.type](t));case 5:case\"end\":return r.stop()}},null,null,null,Promise)}),r=q,i=Tracker.autorun(function e(){var e;return a.async(function n(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.awrap(y());case 2:return e=n.sent,n.next=5,a.awrap(g(e));case 5:case\"end\":return n.stop()}},null,null,null,Promise)}),s.abrupt(\"return\",function(){p.remove({}),q(),null==t||t(),null==r||r(),v.clear(),i.stop()});case 12:case\"end\":return s.stop()}},null,null,null,Promise)},P=function(){var e,n=arguments;return a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return null===(e=r)||void 0===e||e(),t.next=3,a.awrap(k.apply(void 0,n));case 3:r=t.sent;case 4:case\"end\":return t.stop()}},null,null,null,Promise)}}","map":"{\"version\":3,\"sources\":[\"app/livechat/client/lib/stream/queueManager.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatDepartment, ILivechatInquiryRecord, IOmnichannelAgent } from '@rocket.chat/core-typings';\\n\\nimport { queryClient } from '../../../../../client/lib/queryClient';\\nimport { callWithErrorHandling } from '../../../../../client/lib/utils/callWithErrorHandling';\\nimport { settings } from '../../../../settings/client';\\nimport { sdk } from '../../../../utils/client/lib/SDKClient';\\nimport { LivechatInquiry } from '../../collections/LivechatInquiry';\\n\\nconst departments = new Set();\\n\\nconst events = {\\n\\tadded: async (inquiry: ILivechatInquiryRecord) => {\\n\\t\\tif (!departments.has(inquiry.department)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tLivechatInquiry.insert({ ...inquiry, alert: true, _updatedAt: new Date(inquiry._updatedAt) });\\n\\t\\tawait invalidateRoomQueries(inquiry.rid);\\n\\t},\\n\\tchanged: async (inquiry: ILivechatInquiryRecord) => {\\n\\t\\tif (inquiry.status !== 'queued' || (inquiry.department && !departments.has(inquiry.department))) {\\n\\t\\t\\treturn removeInquiry(inquiry);\\n\\t\\t}\\n\\n\\t\\tLivechatInquiry.upsert({ _id: inquiry._id }, { ...inquiry, alert: true, _updatedAt: new Date(inquiry._updatedAt) });\\n\\t\\tawait invalidateRoomQueries(inquiry.rid);\\n\\t},\\n\\tremoved: (inquiry: ILivechatInquiryRecord) => removeInquiry(inquiry),\\n};\\n\\nconst invalidateRoomQueries = async (rid: string) => {\\n\\tawait queryClient.invalidateQueries(['rooms', { reference: rid, type: 'l' }]);\\n\\tqueryClient.removeQueries(['rooms', rid]);\\n\\tqueryClient.removeQueries(['/v1/rooms.info', rid]);\\n};\\n\\nconst removeInquiry = async (inquiry: ILivechatInquiryRecord) => {\\n\\tLivechatInquiry.remove(inquiry._id);\\n\\treturn queryClient.invalidateQueries(['rooms', { reference: inquiry.rid, type: 'l' }]);\\n};\\n\\nconst getInquiriesFromAPI = async () => {\\n\\tconst count = settings.get('Livechat_guest_pool_max_number_incoming_livechats_displayed') ?? 0;\\n\\tconst { inquiries } = await sdk.rest.get('/v1/livechat/inquiries.queuedForUser', { count });\\n\\treturn inquiries;\\n};\\n\\nconst removeListenerOfDepartment = (departmentId: ILivechatDepartment['_id']) => {\\n\\tsdk.stop('livechat-inquiry-queue-observer', `department/${departmentId}`);\\n\\tdepartments.delete(departmentId);\\n};\\n\\nconst appendListenerToDepartment = (departmentId: ILivechatDepartment['_id']) => {\\n\\tdepartments.add(departmentId);\\n\\tsdk.stream('livechat-inquiry-queue-observer', [`department/${departmentId}`], async (args) => {\\n\\t\\tif (!('type' in args)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tconst { type, ...inquiry } = args;\\n\\t\\tawait events[args.type](inquiry);\\n\\t});\\n\\treturn () => removeListenerOfDepartment(departmentId);\\n};\\nconst addListenerForeachDepartment = (departments: ILivechatDepartment['_id'][] = []) => {\\n\\tconst cleanupFunctions = departments.map((department) => appendListenerToDepartment(department));\\n\\treturn () => cleanupFunctions.forEach((cleanup) => cleanup());\\n};\\n\\nconst updateInquiries = async (inquiries: ILivechatInquiryRecord[] = []) =>\\n\\tinquiries.forEach((inquiry) => LivechatInquiry.upsert({ _id: inquiry._id }, { ...inquiry, _updatedAt: new Date(inquiry._updatedAt) }));\\n\\nconst getAgentsDepartments = async (userId: IOmnichannelAgent['_id']) => {\\n\\tconst { departments } = await sdk.rest.get(`/v1/livechat/agents/${userId}/departments`, { enabledDepartmentsOnly: 'true' });\\n\\treturn departments;\\n};\\n\\nconst removeGlobalListener = () => sdk.stop('livechat-inquiry-queue-observer', 'public');\\n\\nconst addGlobalListener = () => {\\n\\tsdk.stream('livechat-inquiry-queue-observer', ['public'], async (args) => {\\n\\t\\tif (!('type' in args)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tconst { type, ...inquiry } = args;\\n\\t\\tawait events[args.type](inquiry);\\n\\t});\\n\\treturn removeGlobalListener;\\n};\\n\\nconst subscribe = async (userId: IOmnichannelAgent['_id']) => {\\n\\tconst config = await callWithErrorHandling('livechat:getRoutingConfig');\\n\\tif (config?.autoAssignAgent) {\\n\\t\\treturn;\\n\\t}\\n\\n\\tconst agentDepartments = (await getAgentsDepartments(userId)).map((department) => department.departmentId);\\n\\n\\t// Register to all depts + public queue always to match the inquiry list returned by backend\\n\\tconst cleanDepartmentListeners = addListenerForeachDepartment(agentDepartments);\\n\\tconst globalCleanup = addGlobalListener();\\n\\n\\tconst computation = Tracker.autorun(async () => {\\n\\t\\tconst inquiriesFromAPI = (await getInquiriesFromAPI()) as unknown as ILivechatInquiryRecord[];\\n\\n\\t\\tawait updateInquiries(inquiriesFromAPI);\\n\\t});\\n\\n\\treturn () => {\\n\\t\\tLivechatInquiry.remove({});\\n\\t\\tremoveGlobalListener();\\n\\t\\tcleanDepartmentListeners?.();\\n\\t\\tglobalCleanup?.();\\n\\t\\tdepartments.clear();\\n\\t\\tcomputation.stop();\\n\\t};\\n};\\n\\nexport const initializeLivechatInquiryStream = (() => {\\n\\tlet cleanUp: (() => void) | undefined;\\n\\n\\treturn async (...args: Parameters<typeof subscribe>) => {\\n\\t\\tcleanUp?.();\\n\\t\\tcleanUp = await subscribe(...args);\\n\\t};\\n})();\\n\",null],\"names\":[\"cleanUp\",\"_objectWithoutProperties\",\"_regeneratorRuntime\",\"_objectSpread\",\"queryClient\",\"callWithErrorHandling\",\"settings\",\"sdk\",\"LivechatInquiry\",\"module\",\"link\",\"default\",\"v\",\"export\",\"initializeLivechatInquiryStream\",\"departments\",\"Set\",\"events\",\"added\",\"inquiry\",\"async\",\"_context\",\"prev\",\"next\",\"has\",\"department\",\"abrupt\",\"insert\",\"alert\",\"_updatedAt\",\"Date\",\"awrap\",\"invalidateRoomQueries\",\"rid\",\"stop\",\"Promise\",\"changed\",\"_context2\",\"status\",\"removeInquiry\",\"upsert\",\"_id\",\"removed\",\"_context3\",\"invalidateQueries\",\"reference\",\"type\",\"removeQueries\",\"_context4\",\"remove\",\"getInquiriesFromAPI\",\"_settings$get\",\"count\",\"inquiries\",\"_context5\",\"get\",\"rest\",\"_await$sdk$rest$get\",\"sent\",\"removeListenerOfDepartment\",\"departmentId\",\"delete\",\"addListenerForeachDepartment\",\"arguments\",\"length\",\"undefined\",\"cleanupFunctions\",\"map\",\"add\",\"stream\",\"args\",\"_context6\",\"_excluded\",\"forEach\",\"cleanup\",\"updateInquiries\",\"_args7\",\"_context7\",\"getAgentsDepartments\",\"userId\",\"_context8\",\"enabledDepartmentsOnly\",\"_await$sdk$rest$get2\",\"removeGlobalListener\",\"subscribe\",\"config\",\"cleanDepartmentListeners\",\"globalCleanup\",\"computation\",\"_context11\",\"autoAssignAgent\",\"_context9\",\"_excluded2\",\"Tracker\",\"autorun\",\"_callee10\",\"inquiriesFromAPI\",\"_callee10$\",\"_context10\",\"clear\",\"_cleanUp\",\"_args12\",\"_context12\",\"apply\"],\"mappings\":\"2BAsHKA,EApHLC,EAAoEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,wBAAxCC,EAAAC,IAAA,CAAA,iDAAwC,CAAAC,QAAA,SAAAC,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAApEH,EAAOI,MAAE,CAAA,CAAAC,gCAAmB,WAAA,OAAAA,CAAwC,CAAA,GAAAL,EAAAC,IAAA,CAAA,wCAAA,CAAAN,YAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wDAAA,CAAAL,sBAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAJ,SAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yCAAA,CAAAH,IAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oCAAA,CAAAF,gBAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAMpE,IAAMG,EAAc,IAAIC,IAElBC,EAAS,CACdC,MAAO,SAAOC,CAA+B,EAAA,OAAAjB,EAAAkB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,GACvCR,EAAYS,GAAG,CAACL,EAAQM,UAAU,EAAC,CAAAJ,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAK,MAAA,CAAA,SAAA,MAAA,EAIsD,OAA9FlB,EAAgBmB,MAAM,CAAAxB,EAAAA,EAAA,CAAA,EAAMgB,GAAO,CAAA,EAAA,CAAES,MAAO,CAAA,EAAMC,WAAY,IAAIC,KAAKX,EAAQU,UAAU,CAAC,IAAIR,EAAAE,IAAA,CAAA,EAAArB,EAAA6B,KAAA,CACxFC,EAAsBb,EAAQc,GAAG,EAAC,MAAA,EAAA,IAAA,MAAA,OAAAZ,EAAAa,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEzCC,QAAS,SAAOjB,CAA+B,EAAA,OAAAjB,EAAAkB,KAAA,CAAA,SAAAiB,CAAA,EAAA,OAAA,OAAAA,EAAAf,IAAA,CAAAe,EAAAd,IAAA,EAAA,KAAA,EAAA,GAAA,CAC1CJ,CAAAA,AAAmB,WAAnBA,EAAQmB,MAAM,EAAkBnB,EAAQM,UAAU,EAAI,CAACV,EAAYS,GAAG,CAACL,EAAQM,UAAU,CAAA,EAAE,CAAAY,EAAAd,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAc,EAAAX,MAAA,CAAA,SACvFa,EAAcpB,GAAQ,MAAA,EAGsF,OAApHX,EAAgBgC,MAAM,CAAC,CAAEC,IAAKtB,EAAQsB,GAAAA,AAAG,EAAEtC,EAAAA,EAAA,CAAA,EAAOgB,GAAO,CAAA,EAAA,CAAES,MAAO,CAAA,EAAMC,WAAY,IAAIC,KAAKX,EAAQU,UAAU,CAAC,IAAIQ,EAAAd,IAAA,CAAA,EAAArB,EAAA6B,KAAA,CAC9GC,EAAsBb,EAAQc,GAAG,EAAC,MAAA,EAAA,IAAA,MAAA,OAAAI,EAAAH,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEzCO,QAAS,SAACvB,CAA+B,EAAA,OAAKoB,EAAcpB,EAAQ,GAG/Da,EAAwB,SAAOC,CAAW,EAAA,OAAA/B,EAAAkB,KAAA,CAAA,SAAAuB,CAAA,EAAA,OAAA,OAAAA,EAAArB,IAAA,CAAAqB,EAAApB,IAAA,EAAA,KAAA,EAAA,OAAAoB,EAAApB,IAAA,CAAA,EAAArB,EAAA6B,KAAA,CACzC3B,EAAYwC,iBAAiB,CAAC,CAAC,QAAS,CAAEC,UAAWZ,EAAKa,KAAM,GAAG,EAAG,EAAC,MAAA,EAC7E1C,EAAY2C,aAAa,CAAC,CAAC,QAASd,EAAI,EACxC7B,EAAY2C,aAAa,CAAC,CAAC,iBAAkBd,EAAI,CAAE,MAAA,EAAA,IAAA,MAAA,OAAAU,EAAAT,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAG9CI,EAAgB,SAAOpB,CAA+B,EAAA,OAAAjB,EAAAkB,KAAA,CAAA,SAAA4B,CAAA,EAAA,OAAA,OAAAA,EAAA1B,IAAA,CAAA0B,EAAAzB,IAAA,EAAA,KAAA,EACvB,OAApCf,EAAgByC,MAAM,CAAC9B,EAAQsB,GAAG,EAAEO,EAAAtB,MAAA,CAAA,SAC7BtB,EAAYwC,iBAAiB,CAAC,CAAC,QAAS,CAAEC,UAAW1B,EAAQc,GAAG,CAAEa,KAAM,GAAG,EAAG,EAAC,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAd,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAGjFe,EAAsB,eAAAC,EAAAC,EAAAC,EAAA,OAAAnD,EAAAkB,KAAA,CAAA,SAAAkC,CAAA,EAAA,OAAA,OAAAA,EAAAhC,IAAA,CAAAgC,EAAA/B,IAAA,EAAA,KAAA,EACmE,OAAxF6B,EAAK,AAA8E,OAA9ED,CAAAA,EAAG7C,EAASiD,GAAG,CAAC,8DAA6D,GAACJ,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAACG,EAAA/B,IAAA,CAAA,EAAArB,EAAA6B,KAAA,CAClExB,EAAIiD,IAAI,CAACD,GAAG,CAAC,uCAAwC,CAAEH,MAAAA,CAAK,GAAG,MAAA,EAA1E,OAATC,EAASI,AAA0EH,EAAAI,IAAA,CAAnFL,SAAS,CAAAC,EAAA5B,MAAA,CAAA,SACV2B,EAAS,MAAA,EAAA,IAAA,MAAA,OAAAC,EAAApB,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAGXwB,EAA6B,SAACC,CAAwC,EAC3ErD,EAAI2B,IAAI,CAAC,kCAAiC,cAAgB0B,GAC1D7C,EAAY8C,MAAM,CAACD,EACpB,EAaME,EAA+B,WAAmD,IAAlD/C,EAAAgD,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAA4C,EAAE,CAC7EG,EAAmBnD,EAAYoD,GAAG,CAAC,SAAC1C,CAAU,EAAA,OAXpDV,EAAYqD,GAAG,CAWqE3C,GAVpFlB,EAAI8D,MAAM,CAAC,kCAAmC,CAAA,cAUsC5C,EAVR,CAAE,SAAO6C,CAAI,EAAA,IAAAxB,EAAA3B,EAAA,OAAAjB,EAAAkB,KAAA,CAAA,SAAAmD,CAAA,EAAA,OAAA,OAAAA,EAAAjD,IAAA,CAAAiD,EAAAhD,IAAA,EAAA,KAAA,EAAA,GAClF,SAAU+C,EAAI,CAAAC,EAAAhD,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAgD,EAAA7C,MAAA,CAAA,SAAA,MAAA,EAGa,OAAzBoB,EAAqBwB,EAArBxB,IAAI,CAAK3B,EAAOlB,EAAKqE,EAAIE,GAAAD,EAAAhD,IAAA,CAAA,EAAArB,EAAA6B,KAAA,CAC3Bd,CAAM,CAACqD,EAAKxB,IAAI,CAAC,CAAC3B,GAAQ,MAAA,EAAA,IAAA,MAAA,OAAAoD,EAAArC,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,GAE1B,WAAA,OAAMwB,EAGuElC,EAH/B,CAG0C,GAC/F,OAAO,WAAA,OAAMyC,EAAiBO,OAAO,CAAC,SAACC,CAAO,EAAA,OAAKA,GAAS,EAAC,CAC9D,EAEMC,EAAkB,WAAA,IAAAtB,EAAAuB,EAAAb,UAAA,OAAA7D,EAAAkB,KAAA,CAAA,SAAAyD,CAAA,EAAA,OAAA,OAAAA,EAAAvD,IAAA,CAAAuD,EAAAtD,IAAA,EAAA,KAAA,EAA+C,OAAxC8B,EAAAuB,EAAAZ,MAAA,CAAA,GAAAY,AAAAX,KAAAA,IAAAW,CAAA,CAAA,EAAA,CAAAA,CAAA,CAAA,EAAA,CAAsC,EAAE,CAAAC,EAAAnD,MAAA,CAAA,SACtE2B,EAAUoB,OAAO,CAAC,SAACtD,CAAO,EAAA,OAAKX,EAAgBgC,MAAM,CAAC,CAAEC,IAAKtB,EAAQsB,GAAAA,AAAG,EAAEtC,EAAAA,EAAA,CAAA,EAAOgB,GAAO,CAAA,EAAA,CAAEU,WAAY,IAAIC,KAAKX,EAAQU,UAAU,CAAC,GAAG,GAAC,MAAA,EAAA,IAAA,MAAA,OAAAgD,EAAA3C,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEjI2C,EAAuB,SAAOC,CAAgC,EAAA,IAAAhE,EAAA,OAAAb,EAAAkB,KAAA,CAAA,SAAA4D,CAAA,EAAA,OAAA,OAAAA,EAAA1D,IAAA,CAAA0D,EAAAzD,IAAA,EAAA,KAAA,EAAA,OAAAyD,EAAAzD,IAAA,CAAA,EAAArB,EAAA6B,KAAA,CACrCxB,EAAIiD,IAAI,CAACD,GAAG,CAAA,uBAAwBwB,EAAM,eAAgB,CAAEE,uBAAwB,MAAM,GAAG,MAAA,EAAxG,OAAXlE,EAAWmE,AAAwGF,EAAAtB,IAAA,CAAnH3C,WAAW,CAAAiE,EAAAtD,MAAA,CAAA,SACZX,EAAW,MAAA,EAAA,IAAA,MAAA,OAAAiE,EAAA9C,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAGbgD,EAAuB,WAAA,OAAM5E,EAAI2B,IAAI,CAAC,kCAAmC,SAAS,EAalFkD,EAAY,SAAOL,CAAgC,EAAA,IAAAM,EAAAC,EAAAC,EAAAC,EAAA,OAAAtF,EAAAkB,KAAA,CAAA,SAAAqE,CAAA,EAAA,OAAA,OAAAA,EAAAnE,IAAA,CAAAmE,EAAAlE,IAAA,EAAA,KAAA,EAAA,OAAAkE,EAAAlE,IAAA,CAAA,EAAArB,EAAA6B,KAAA,CACnC1B,EAAsB,6BAA4B,MAAA,EAA3D,GAAA,CACRgF,CAAAA,MADEA,CAAAA,EAAMI,EAAA/B,IAAA,AAAAA,GACR2B,EAAQK,eAAe,AAAfA,EAAe,CAAAD,EAAAlE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAkE,EAAA/D,MAAA,CAAA,SAAA,MAAA,EAAA,OAAA+D,EAAAlE,IAAA,CAAA,EAAArB,EAAA6B,KAAA,CAIK+C,EAAqBC,GAAO,MAAA,EAU1D,OAPIO,EAA2BxB,EAHX2B,EAAA/B,IAAA,CAAwCS,GAAG,CAAC,SAAC1C,CAAU,EAAA,OAAKA,EAAWmC,YAAY,IAhBzGrD,EAAI8D,MAAM,CAAC,kCAAmC,CAAC,SAAS,CAAE,SAAOC,CAAI,EAAA,IAAAxB,EAAA3B,EAAA,OAAAjB,EAAAkB,KAAA,CAAA,SAAAuE,CAAA,EAAA,OAAA,OAAAA,EAAArE,IAAA,CAAAqE,EAAApE,IAAA,EAAA,KAAA,EAAA,GAC9D,SAAU+C,EAAI,CAAAqB,EAAApE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAoE,EAAAjE,MAAA,CAAA,SAAA,MAAA,EAGa,OAAzBoB,EAAqBwB,EAArBxB,IAAI,CAAK3B,EAAOlB,EAAKqE,EAAIsB,GAAAD,EAAApE,IAAA,CAAA,EAAArB,EAAA6B,KAAA,CAC3Bd,CAAM,CAACqD,EAAKxB,IAAI,CAAC,CAAC3B,GAAQ,MAAA,EAAA,IAAA,MAAA,OAAAwE,EAAAzD,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,GAe3BoD,EAbCJ,EAeDK,EAAcK,QAAQC,OAAO,CAAC,SAAAC,IAAA,IAAAC,EAAA,OAAA9F,EAAAkB,KAAA,CAAA,SAAA6E,EAAAC,CAAA,EAAA,OAAA,OAAAA,EAAA5E,IAAA,CAAA4E,EAAA3E,IAAA,EAAA,KAAA,EAAA,OAAA2E,EAAA3E,IAAA,CAAA,EAAArB,EAAA6B,KAAA,CACHmB,IAAqB,MAAA,EAA/B,OAAhB8C,EAAgBE,EAAAxC,IAAA,CAAAwC,EAAA3E,IAAA,CAAA,EAAArB,EAAA6B,KAAA,CAEhB4C,EAAgBqB,GAAiB,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAhE,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,GACtCsD,EAAA/D,MAAA,CAAA,SAEK,WACNlB,EAAgByC,MAAM,CAAC,CAAA,GACvBkC,IACAG,MAAAA,GAAAA,IACAC,MAAAA,GAAAA,IACAxE,EAAYoF,KAAK,GACjBX,EAAYtD,IAAI,EACjB,EAAC,MAAA,GAAA,IAAA,MAAA,OAAAuD,EAAAvD,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAGWrB,EAGL,WAAA,IAAAsF,EAAAC,EAAAtC,UAAA,OAAA7D,EAAAkB,KAAA,CAAA,SAAAkF,CAAA,EAAA,OAAA,OAAAA,EAAAhF,IAAA,CAAAgF,EAAA/E,IAAA,EAAA,KAAA,EACM,OAAZ,AAAO,OAAP6E,CAAAA,EAAApG,CAAAA,GAAOoG,AAAA,KAAA,IAAAA,GAAPA,IAAYE,EAAA/E,IAAA,CAAA,EAAArB,EAAA6B,KAAA,CACIqD,EAASmB,KAAA,CAAA,KAAA,EAAAF,GAAS,MAAA,EAAlCrG,EAAOsG,EAAA5C,IAAA,MAAA,EAAA,IAAA,MAAA,OAAA4C,EAAApE,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA\"}"}