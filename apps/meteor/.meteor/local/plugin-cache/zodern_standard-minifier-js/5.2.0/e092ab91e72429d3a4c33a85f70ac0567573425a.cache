{"code":"function module(e,n,t){var i,l,o,a,u,c,s,d,r,m,f,k,h,g,v,b,E,p,_,M,y,L,R,U=[\"method_id\",\"i18nLabel\"];t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){i=e}},0),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){l=e}},1),t.link(\"@rocket.chat/core-typings\",{isE2EEMessage:function(e){o=e},isQuoteAttachment:function(e){a=e}},0),t.link(\"@rocket.chat/fuselage\",{MessageBody:function(e){u=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useSetting:function(e){c=e},useUserId:function(e){s=e},useTranslation:function(e){d=e}},2),t.link(\"react\",{default:function(e){r=e},memo:function(e){m=e}},3),t.link(\"../../../../hooks/useUserData\",{useUserData:function(e){f=e}},4),t.link(\"../../MessageContentBody\",{default:function(e){k=e}},5),t.link(\"../../ReadReceiptIndicator\",{default:function(e){h=e}},6),t.link(\"../../content/Attachments\",{default:function(e){g=e}},7),t.link(\"../../content/BroadcastMetrics\",{default:function(e){v=e}},8),t.link(\"../../content/Location\",{default:function(e){b=e}},9),t.link(\"../../content/MessageActions\",{default:function(e){E=e}},10),t.link(\"../../content/Reactions\",{default:function(e){p=e}},11),t.link(\"../../content/UrlPreviews\",{default:function(e){_=e}},12),t.link(\"../../hooks/useNormalizedMessage\",{useNormalizedMessage:function(e){M=e}},13),t.link(\"../../hooks/useOembedLayout\",{useOembedLayout:function(e){y=e}},14),t.link(\"../../hooks/useSubscriptionFromMessageQuery\",{useSubscriptionFromMessageQuery:function(e){L=e}},15),t.link(\"../../uikit/UiKitMessageBlock\",{default:function(e){R=e}},16),t.exportDefault(m(function(e){var n,t,m,B,F,S,j,A,D,I,O=e.message,Q=o(O),x=y().enabled,z=null!==(n=L(O).data)&&void 0!==n?n:void 0,N=null!==(t=null==z?void 0:z.broadcast)&&void 0!==t&&t,P=s(),w=l(l({},O.u),{},{roles:[]},f(O.u._id)),C=c(\"Message_Read_Receipt_Enabled\",!1),K=d(),T=M(O),W=Q&&(null==T?void 0:T.e2e)===\"pending\",q=(null==T?void 0:null===(m=T.attachments)||void 0===m?void 0:m.filter(a))||[],G=(null==T?void 0:null===(B=T.attachments)||void 0===B?void 0:B.filter(function(e){return!a(e)}))||[];return r.createElement(r.Fragment,null,W&&r.createElement(u,null,K(\"E2E_message_encrypted_placeholder\")),!!(null!=q&&q.length)&&r.createElement(g,{attachments:q}),!(null!==(F=T.blocks)&&void 0!==F&&F.length)&&!!(null!==(S=T.md)&&void 0!==S&&S.length)&&r.createElement(r.Fragment,null,(!Q||\"done\"===T.e2e)&&r.createElement(k,{md:T.md,mentions:T.mentions,channels:T.channels})),T.blocks&&r.createElement(R,{rid:T.rid,mid:T._id,blocks:T.blocks}),!!G&&r.createElement(g,{id:null===(j=O.files)||void 0===j?void 0:null===(A=j[0])||void 0===A?void 0:A._id,attachments:G}),x&&!!(null!==(D=T.urls)&&void 0!==D&&D.length)&&r.createElement(_,{urls:T.urls}),(null===(I=T.actionLinks)||void 0===I?void 0:I.length)&&r.createElement(E,{message:T,actions:T.actionLinks.map(function(e){var n=e.method_id,t=e.i18nLabel,o=i(e,U);return l({methodId:n,i18nLabel:t},o)})}),T.reactions&&Object.keys(T.reactions).length&&r.createElement(p,{message:T}),T.location&&r.createElement(b,{location:T.location}),N&&!!w.username&&T.u._id!==P&&r.createElement(v,{username:w.username,message:T}),C&&r.createElement(h,{mid:T._id,unread:T.unread}))}))}","map":"{\"version\":3,\"sources\":[\"client/components/message/variants/thread/ThreadMessageContent.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IThreadMainMessage, IThreadMessage } from '@rocket.chat/core-typings';\\nimport { isE2EEMessage, isQuoteAttachment } from '@rocket.chat/core-typings';\\nimport { MessageBody } from '@rocket.chat/fuselage';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useSetting, useUserId, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { memo } from 'react';\\n\\nimport { useUserData } from '../../../../hooks/useUserData';\\nimport type { UserPresence } from '../../../../lib/presence';\\nimport MessageContentBody from '../../MessageContentBody';\\nimport ReadReceiptIndicator from '../../ReadReceiptIndicator';\\nimport Attachments from '../../content/Attachments';\\nimport BroadcastMetrics from '../../content/BroadcastMetrics';\\nimport Location from '../../content/Location';\\nimport MessageActions from '../../content/MessageActions';\\nimport Reactions from '../../content/Reactions';\\nimport UrlPreviews from '../../content/UrlPreviews';\\nimport { useNormalizedMessage } from '../../hooks/useNormalizedMessage';\\nimport { useOembedLayout } from '../../hooks/useOembedLayout';\\nimport { useSubscriptionFromMessageQuery } from '../../hooks/useSubscriptionFromMessageQuery';\\nimport UiKitMessageBlock from '../../uikit/UiKitMessageBlock';\\n\\ntype ThreadMessageContentProps = {\\n\\tmessage: IThreadMessage | IThreadMainMessage;\\n};\\n\\nconst ThreadMessageContent = ({ message }: ThreadMessageContentProps): ReactElement => {\\n\\tconst encrypted = isE2EEMessage(message);\\n\\tconst { enabled: oembedEnabled } = useOembedLayout();\\n\\tconst subscription = useSubscriptionFromMessageQuery(message).data ?? undefined;\\n\\tconst broadcast = subscription?.broadcast ?? false;\\n\\tconst uid = useUserId();\\n\\tconst messageUser: UserPresence = { ...message.u, roles: [], ...useUserData(message.u._id) };\\n\\tconst readReceiptEnabled = useSetting('Message_Read_Receipt_Enabled', false);\\n\\n\\tconst t = useTranslation();\\n\\n\\tconst normalizedMessage = useNormalizedMessage(message);\\n\\n\\tconst isMessageEncrypted = encrypted && normalizedMessage?.e2e === 'pending';\\n\\n\\tconst quotes = normalizedMessage?.attachments?.filter(isQuoteAttachment) || [];\\n\\n\\tconst attachments = normalizedMessage?.attachments?.filter((attachment) => !isQuoteAttachment(attachment)) || [];\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t{isMessageEncrypted && <MessageBody>{t('E2E_message_encrypted_placeholder')}</MessageBody>}\\n\\n\\t\\t\\t{!!quotes?.length && <Attachments attachments={quotes} />}\\n\\n\\t\\t\\t{!normalizedMessage.blocks?.length && !!normalizedMessage.md?.length && (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t{(!encrypted || normalizedMessage.e2e === 'done') && (\\n\\t\\t\\t\\t\\t\\t<MessageContentBody md={normalizedMessage.md} mentions={normalizedMessage.mentions} channels={normalizedMessage.channels} />\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</>\\n\\t\\t\\t)}\\n\\n\\t\\t\\t{normalizedMessage.blocks && (\\n\\t\\t\\t\\t<UiKitMessageBlock rid={normalizedMessage.rid} mid={normalizedMessage._id} blocks={normalizedMessage.blocks} />\\n\\t\\t\\t)}\\n\\n\\t\\t\\t{!!attachments && <Attachments id={message.files?.[0]?._id} attachments={attachments} />}\\n\\n\\t\\t\\t{oembedEnabled && !!normalizedMessage.urls?.length && <UrlPreviews urls={normalizedMessage.urls} />}\\n\\n\\t\\t\\t{normalizedMessage.actionLinks?.length && (\\n\\t\\t\\t\\t<MessageActions\\n\\t\\t\\t\\t\\tmessage={normalizedMessage}\\n\\t\\t\\t\\t\\tactions={normalizedMessage.actionLinks.map(({ method_id: methodId, i18nLabel, ...action }) => ({\\n\\t\\t\\t\\t\\t\\tmethodId,\\n\\t\\t\\t\\t\\t\\ti18nLabel: i18nLabel as TranslationKey,\\n\\t\\t\\t\\t\\t\\t...action,\\n\\t\\t\\t\\t\\t}))}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\n\\t\\t\\t{normalizedMessage.reactions && Object.keys(normalizedMessage.reactions).length && <Reactions message={normalizedMessage} />}\\n\\n\\t\\t\\t{normalizedMessage.location && <Location location={normalizedMessage.location} />}\\n\\n\\t\\t\\t{broadcast && !!messageUser.username && normalizedMessage.u._id !== uid && (\\n\\t\\t\\t\\t<BroadcastMetrics username={messageUser.username} message={normalizedMessage} />\\n\\t\\t\\t)}\\n\\n\\t\\t\\t{readReceiptEnabled && <ReadReceiptIndicator mid={normalizedMessage._id} unread={normalizedMessage.unread} />}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default memo(ThreadMessageContent);\\n\",null],\"names\":[\"_objectWithoutProperties\",\"_objectSpread\",\"isE2EEMessage\",\"isQuoteAttachment\",\"MessageBody\",\"useSetting\",\"useUserId\",\"useTranslation\",\"React\",\"memo\",\"useUserData\",\"MessageContentBody\",\"ReadReceiptIndicator\",\"Attachments\",\"BroadcastMetrics\",\"Location\",\"MessageActions\",\"Reactions\",\"UrlPreviews\",\"useNormalizedMessage\",\"useOembedLayout\",\"useSubscriptionFromMessageQuery\",\"UiKitMessageBlock\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_useSubscriptionFromM\",\"_subscription$broadca\",\"_normalizedMessage$at\",\"_normalizedMessage$at2\",\"_normalizedMessage$bl\",\"_normalizedMessage$md\",\"_message$files\",\"_message$files$\",\"_normalizedMessage$ur\",\"_normalizedMessage$ac\",\"message\",\"encrypted\",\"oembedEnabled\",\"_useOembedLayout\",\"enabled\",\"subscription\",\"data\",\"undefined\",\"broadcast\",\"uid\",\"messageUser\",\"u\",\"roles\",\"_id\",\"readReceiptEnabled\",\"t\",\"normalizedMessage\",\"isMessageEncrypted\",\"e2e\",\"quotes\",\"attachments\",\"filter\",\"attachment\",\"createElement\",\"Fragment\",\"length\",\"blocks\",\"md\",\"mentions\",\"channels\",\"rid\",\"mid\",\"id\",\"files\",\"urls\",\"actionLinks\",\"actions\",\"map\",\"_ref2\",\"methodId\",\"method_id\",\"i18nLabel\",\"action\",\"_excluded\",\"reactions\",\"Object\",\"keys\",\"location\",\"username\",\"unread\"],\"mappings\":\"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\"}"}