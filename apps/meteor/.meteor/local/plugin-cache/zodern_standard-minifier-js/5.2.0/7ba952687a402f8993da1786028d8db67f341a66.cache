{"code":"function module(e,t,n){var i,o,s,a,r,u,c,l=[\"msg\"];n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){i=e}},0),n.export({useJumpToMessage:function(){return g}}),n.link(\"@rocket.chat/ui-contexts\",{useRouter:function(e){o=e}},0),n.link(\"react\",{useCallback:function(e){s=e}},1),n.link(\"../../../../components/message/list/MessageListContext\",{useMessageListJumpToMessageParam:function(e){a=e},useMessageListRef:function(e){r=e}},2),n.link(\"../providers/messageHighlightSubscription\",{setHighlightMessage:function(e){u=e},clearHighlightMessage:function(e){c=e}},3);var g=function(e){var t=a(),n=r(),g=o(),f=s(function(t){t&&scroll&&setTimeout(function(){if(null!=n&&n.current){var o=n.current,s=o.getBoundingClientRect(),a=t.getBoundingClientRect().top-s.top,r=o.scrollTop;o.scrollTo({top:r+a-60,behavior:\"smooth\"})}var f=g.getSearchParameters(),m=(f.msg,i(f,l));g.navigate({pathname:g.getLocationPathname(),search:m},{replace:!0}),u(e),setTimeout(c,2e3)},500)},[n,e,g]);if(t===e)return f}}","map":"{\"version\":3,\"sources\":[\"client/views/room/MessageList/hooks/useJumpToMessage.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { useRouter } from '@rocket.chat/ui-contexts';\\nimport { useCallback } from 'react';\\n\\nimport { useMessageListJumpToMessageParam, useMessageListRef } from '../../../../components/message/list/MessageListContext';\\nimport { setHighlightMessage, clearHighlightMessage } from '../providers/messageHighlightSubscription';\\n\\n// this is an arbitrary value so that there's a gap between the header and the message;\\nconst SCROLL_EXTRA_OFFSET = 60;\\n\\nexport const useJumpToMessage = (messageId: IMessage['_id']) => {\\n\\tconst jumpToMessageParam = useMessageListJumpToMessageParam();\\n\\tconst listRef = useMessageListRef();\\n\\tconst router = useRouter();\\n\\n\\tconst ref = useCallback(\\n\\t\\t(node: HTMLElement | null) => {\\n\\t\\t\\tif (!node || !scroll) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\tif (listRef?.current) {\\n\\t\\t\\t\\t\\tconst wrapper = listRef.current;\\n\\t\\t\\t\\t\\tconst containerRect = wrapper.getBoundingClientRect();\\n\\t\\t\\t\\t\\tconst messageRect = node.getBoundingClientRect();\\n\\n\\t\\t\\t\\t\\tconst offset = messageRect.top - containerRect.top;\\n\\t\\t\\t\\t\\tconst scrollPosition = wrapper.scrollTop;\\n\\t\\t\\t\\t\\tconst newScrollPosition = scrollPosition + offset - SCROLL_EXTRA_OFFSET;\\n\\n\\t\\t\\t\\t\\twrapper.scrollTo({ top: newScrollPosition, behavior: 'smooth' });\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tconst { msg: _, ...search } = router.getSearchParameters();\\n\\t\\t\\t\\trouter.navigate(\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\tpathname: router.getLocationPathname(),\\n\\t\\t\\t\\t\\t\\tsearch,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t{ replace: true },\\n\\t\\t\\t\\t);\\n\\n\\t\\t\\t\\tsetHighlightMessage(messageId);\\n\\t\\t\\t\\tsetTimeout(clearHighlightMessage, 2000);\\n\\t\\t\\t}, 500);\\n\\t\\t},\\n\\t\\t[listRef, messageId, router],\\n\\t);\\n\\n\\tif (jumpToMessageParam !== messageId) {\\n\\t\\treturn undefined;\\n\\t}\\n\\n\\treturn ref;\\n};\\n\",null],\"names\":[\"_objectWithoutProperties\",\"useRouter\",\"useCallback\",\"useMessageListJumpToMessageParam\",\"useMessageListRef\",\"setHighlightMessage\",\"clearHighlightMessage\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useJumpToMessage\",\"messageId\",\"jumpToMessageParam\",\"listRef\",\"router\",\"ref\",\"node\",\"scroll\",\"setTimeout\",\"current\",\"wrapper\",\"containerRect\",\"getBoundingClientRect\",\"offset\",\"messageRect\",\"top\",\"scrollPosition\",\"scrollTop\",\"scrollTo\",\"behavior\",\"_router$getSearchPara\",\"getSearchParameters\",\"search\",\"msg\",\"_excluded\",\"navigate\",\"pathname\",\"getLocationPathname\",\"replace\"],\"mappings\":\"2BACAA,EAAqDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,YAA3BC,EAAAC,IAAA,CAAA,iDAA2B,CAAAC,QAAA,SAAAC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAArDH,EAAOI,MAAE,CAAA,CAAAC,iBAAiB,WAAA,OAAAA,CAA2B,CAAA,GAAAL,EAAAC,IAAA,CAAA,2BAAA,CAAAP,UAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAN,YAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yDAAA,CAAAL,iCAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,kBAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,4CAAA,CAAAH,oBAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,sBAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAS9C,IAAME,EAAmB,SAACC,CAA0B,EAC1D,IAAMC,EAAqBX,IACrBY,EAAUX,IACVY,EAASf,IAETgB,EAAMf,EACX,SAACgB,CAAwB,EACnBA,GAASC,QAGdC,WAAW,WACV,GAAIL,MAAAA,GAAAA,EAASM,OAAO,CAAE,CACrB,IAAMC,EAAUP,EAAQM,OAAO,CACzBE,EAAgBD,EAAQE,qBAAqB,GAG7CC,EAASC,AAFKR,EAAKM,qBAAqB,GAEnBG,GAAG,CAAGJ,EAAcI,GAAG,CAC5CC,EAAiBN,EAAQO,SAAS,CAGxCP,EAAQQ,QAAQ,CAAC,CAAEH,IAFOC,EAAiBH,EApBpB,GAsBoBM,SAAU,QAAQ,EAC9D,CAEA,IAAAC,EAA8BhB,EAAOiB,mBAAmB,GAArCC,GAALF,EAANG,GAAG,CAAcnC,EAAAgC,EAAAI,IACzBpB,EAAOqB,QAAQ,CACd,CACCC,SAAUtB,EAAOuB,mBAAmB,GACpCL,OAAAA,GAED,CAAEM,QAAS,CAAA,CAAI,GAGhBnC,EAAoBQ,GACpBO,WAAWd,EAAuB,IACnC,EAAG,IACJ,EACA,CAACS,EAASF,EAAWG,EAAO,EAG7B,GAAIF,IAAuBD,EAI3B,OAAOI,CACR\"}"}