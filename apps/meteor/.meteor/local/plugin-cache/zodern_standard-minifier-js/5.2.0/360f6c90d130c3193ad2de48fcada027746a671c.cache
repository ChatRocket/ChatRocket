{"code":"function module(e,i,t){let s,a,n,r,l,o,d;t.link(\"@rocket.chat/core-typings\",{isE2EEMessage(e){s=e}},0),t.link(\"meteor/meteor\",{Meteor(e){a=e}},1),t.link(\"../../../app/ui-utils/client\",{MessageAction(e){n=e}},2),t.link(\"../../../app/utils/lib/i18n\",{t(e){r=e}},3),t.link(\"../../lib/getPermaLink\",{getPermaLink(e){l=e}},4),t.link(\"../../lib/toast\",{dispatchToastMessage(e){o=e}},5),t.link(\"../../lib/utils/messageArgs\",{messageArgs(e){d=e}},6),a.startup(()=>{n.addButton({id:\"permalink-star\",icon:\"permalink\",label:\"Copy_link\",context:[\"starred\",\"threads\",\"videoconf-threads\"],async action(e,i){try{let{message:e=d(this).msg}=i,t=await l(e._id);navigator.clipboard.writeText(t),o({type:\"success\",message:r(\"Copied\")})}catch(e){o({type:\"error\",message:e})}},condition(e){var i;let{message:t,subscription:s,user:a}=e;return null!=s&&!!(null===(i=t.starred)||void 0===i?void 0:i.find(e=>e._id===(null==a?void 0:a._id)))},order:10,group:\"menu\",disabled(e){let{message:i}=e;return s(i)}})})}","map":"{\"version\":3,\"sources\":[\"client/startup/actionButtons/permalinkStar.ts\",\"<anon>\"],\"sourcesContent\":[\"import { isE2EEMessage } from '@rocket.chat/core-typings';\\nimport { Meteor } from 'meteor/meteor';\\n\\nimport { MessageAction } from '../../../app/ui-utils/client';\\nimport { t } from '../../../app/utils/lib/i18n';\\nimport { getPermaLink } from '../../lib/getPermaLink';\\nimport { dispatchToastMessage } from '../../lib/toast';\\nimport { messageArgs } from '../../lib/utils/messageArgs';\\n\\nMeteor.startup(() => {\\n\\tMessageAction.addButton({\\n\\t\\tid: 'permalink-star',\\n\\t\\ticon: 'permalink',\\n\\t\\tlabel: 'Copy_link',\\n\\t\\t// classes: 'clipboard',\\n\\t\\tcontext: ['starred', 'threads', 'videoconf-threads'],\\n\\t\\tasync action(_, props) {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst { message = messageArgs(this).msg } = props;\\n\\t\\t\\t\\tconst permalink = await getPermaLink(message._id);\\n\\t\\t\\t\\tnavigator.clipboard.writeText(permalink);\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Copied') });\\n\\t\\t\\t} catch (e) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: e });\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tcondition({ message, subscription, user }) {\\n\\t\\t\\tif (subscription == null) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn Boolean(message.starred?.find((star) => star._id === user?._id));\\n\\t\\t},\\n\\t\\torder: 10,\\n\\t\\tgroup: 'menu',\\n\\t\\tdisabled({ message }) {\\n\\t\\t\\treturn isE2EEMessage(message);\\n\\t\\t},\\n\\t});\\n});\\n\",null],\"names\":[\"isE2EEMessage\",\"Meteor\",\"MessageAction\",\"t\",\"getPermaLink\",\"dispatchToastMessage\",\"messageArgs\",\"module\",\"link\",\"v\",\"startup\",\"addButton\",\"id\",\"icon\",\"label\",\"context\",\"action\",\"_\",\"props\",\"message\",\"msg\",\"permalink\",\"_id\",\"navigator\",\"clipboard\",\"writeText\",\"type\",\"e\",\"condition\",\"_ref\",\"_message$starred\",\"subscription\",\"user\",\"Boolean\",\"starred\",\"find\",\"star\",\"order\",\"group\",\"disabled\",\"_ref2\"],\"mappings\":\"2BAAAA,EAA0DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAjDC,EAAeC,IAAA,CAAM,4BAA4B,CAAAR,cAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gBAAA,CAAAP,OAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,+BAAA,CAAAN,cAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,8BAAA,CAAAL,EAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,yBAAA,CAAAJ,aAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kBAAA,CAAAH,qBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,8BAAA,CAAAF,YAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAS1DR,EAAOS,OAAO,CAAC,KACdR,EAAcS,SAAS,CAAC,CACvBC,GAAI,iBACJC,KAAM,YACNC,MAAO,YAEPC,QAAS,CAAC,UAAW,UAAW,oBAAoB,CACpD,MAAMC,OAAOC,CAAC,CAAEC,CAAK,EACpB,GAAI,CACH,GAAM,CAAEC,QAAAA,EAAUb,EAAY,IAAI,EAAEc,GAAAA,CAAK,CAAGF,EACtCG,EAAY,MAAMjB,EAAae,EAAQG,GAAG,EAChDC,UAAUC,SAAS,CAACC,SAAS,CAACJ,GAC9BhB,EAAqB,CAAEqB,KAAM,UAAWP,QAAShB,EAAE,SAAS,EAC7D,CAAE,MAAOwB,EAAG,CACXtB,EAAqB,CAAEqB,KAAM,QAASP,QAASQ,CAAC,EACjD,CACD,EACAC,UAASC,CAAA,EAAgC,IAAAC,EAAA,GAA/B,CAAEX,QAAAA,CAAO,CAAEY,aAAAA,CAAY,CAAEC,KAAAA,CAAAA,CAAM,CAAAH,SACxC,AAAoB,MAAhBE,GAIGE,CAAAA,CAAO,CAAA,AAAgB,OAAhBH,CAAAA,EAACX,EAAQe,OAAO,AAAPA,GAAOJ,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAfA,EAAiBK,IAAI,CAAEC,GAASA,EAAKd,GAAG,GAAKU,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMV,GAAG,AAAHA,EAAG,CACtE,EACAe,MAAO,GACPC,MAAO,OACPC,SAAQC,CAAA,EAAY,GAAX,CAAErB,QAAAA,CAAAA,CAAS,CAAAqB,EACnB,OAAOxC,EAAcmB,EACtB,GAEF\"}"}