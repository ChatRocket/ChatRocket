{"code":"function module(e,n,t){t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){o=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){i=e}},1),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){r=e}},0),t.link(\"react\",{default:function(e){l=e},useState:function(e){u=e}},1),t.link(\"./DeleteTeamChannels\",{default:function(e){f=e}},2),t.link(\"./DeleteTeamConfirmation\",{default:function(e){a=e}},3);var o,i,r,l,u,f,a,c={LIST_ROOMS:\"LIST_ROOMS\",CONFIRM_DELETE:\"CONFIRM_DELETE\"};t.exportDefault(function(e){var n=e.onCancel,t=e.onConfirm,m=e.rooms,d=m&&m.length>0,E=u(d?c.LIST_ROOMS:c.CONFIRM_DELETE),s=i(E,2),O=s[0],C=s[1],R=u({}),_=i(R,2),T=_[0],S=_[1],b=u({}),k=i(b,2),M=k[0],I=k[1],L=r(function(e){if(T[e._id]){S(function(n){return delete n[e._id],o({},n)});return}S(function(n){var t;return o(o({},n),{},((t={})[e._id]=e,t))})}),h=r(function(){if(0===Object.values(T).filter(Boolean).length)return S(Object.fromEntries(m.map(function(e){return[e._id,e]})));S({})}),D=r(function(){I(Object.fromEntries(m.filter(function(e){return!T[e._id]}).map(function(e){return[e._id,e]}))),C(c.CONFIRM_DELETE)});return O===c.CONFIRM_DELETE?l.createElement(a,{onConfirm:t,onReturn:d?function(){return C(c.LIST_ROOMS)}:void 0,onCancel:n,deletedRooms:T,keptRooms:M}):l.createElement(f,{rooms:m,onCancel:n,selectedRooms:T,onToggleAllRooms:h,onConfirm:D,onChangeRoomSelection:L})})}","map":"{\"version\":3,\"sources\":[\"client/views/teams/contextualBar/info/DeleteTeam/DeleteTeamModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, Serialized } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport React, { useState } from 'react';\\n\\nimport DeleteTeamChannels from './DeleteTeamChannels';\\nimport DeleteTeamConfirmation from './DeleteTeamConfirmation';\\n\\nconst STEPS = { LIST_ROOMS: 'LIST_ROOMS', CONFIRM_DELETE: 'CONFIRM_DELETE' };\\n\\ntype DeleteTeamModalProps = {\\n\\tonCancel: () => void;\\n\\tonConfirm: (roomsToDelete: IRoom['_id'][]) => void;\\n\\trooms: Serialized<IRoom>[];\\n};\\n\\nconst DeleteTeamModal = ({ onCancel, onConfirm, rooms }: DeleteTeamModalProps) => {\\n\\tconst hasRooms = rooms && rooms.length > 0;\\n\\n\\tconst [step, setStep] = useState(hasRooms ? STEPS.LIST_ROOMS : STEPS.CONFIRM_DELETE);\\n\\tconst [deletedRooms, setDeletedRooms] = useState<{ [key: string]: Serialized<IRoom> }>({});\\n\\tconst [keptRooms, setKeptRooms] = useState<{ [key: string]: Serialized<IRoom> }>({});\\n\\n\\tconst onChangeRoomSelection = useMutableCallback((room) => {\\n\\t\\tif (deletedRooms[room._id]) {\\n\\t\\t\\tsetDeletedRooms((deletedRooms) => {\\n\\t\\t\\t\\tdelete deletedRooms[room._id];\\n\\t\\t\\t\\treturn { ...deletedRooms };\\n\\t\\t\\t});\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tsetDeletedRooms((deletedRooms) => ({ ...deletedRooms, [room._id]: room }));\\n\\t});\\n\\n\\tconst onToggleAllRooms = useMutableCallback(() => {\\n\\t\\tif (Object.values(deletedRooms).filter(Boolean).length === 0) {\\n\\t\\t\\treturn setDeletedRooms(Object.fromEntries(rooms.map((room) => [room._id, room])));\\n\\t\\t}\\n\\t\\tsetDeletedRooms({});\\n\\t});\\n\\n\\tconst onSelectRooms = useMutableCallback(() => {\\n\\t\\tconst keptRooms = Object.fromEntries(rooms.filter((room) => !deletedRooms[room._id]).map((room) => [room._id, room]));\\n\\t\\tsetKeptRooms(keptRooms);\\n\\t\\tsetStep(STEPS.CONFIRM_DELETE);\\n\\t});\\n\\n\\tif (step === STEPS.CONFIRM_DELETE) {\\n\\t\\treturn (\\n\\t\\t\\t<DeleteTeamConfirmation\\n\\t\\t\\t\\tonConfirm={onConfirm}\\n\\t\\t\\t\\tonReturn={hasRooms ? () => setStep(STEPS.LIST_ROOMS) : undefined}\\n\\t\\t\\t\\tonCancel={onCancel}\\n\\t\\t\\t\\tdeletedRooms={deletedRooms}\\n\\t\\t\\t\\tkeptRooms={keptRooms}\\n\\t\\t\\t/>\\n\\t\\t);\\n\\t}\\n\\n\\treturn (\\n\\t\\t<DeleteTeamChannels\\n\\t\\t\\trooms={rooms}\\n\\t\\t\\tonCancel={onCancel}\\n\\t\\t\\tselectedRooms={deletedRooms}\\n\\t\\t\\tonToggleAllRooms={onToggleAllRooms}\\n\\t\\t\\tonConfirm={onSelectRooms}\\n\\t\\t\\tonChangeRoomSelection={onChangeRoomSelection}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default DeleteTeamModal;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"_slicedToArray\",\"useMutableCallback\",\"React\",\"useState\",\"DeleteTeamChannels\",\"DeleteTeamConfirmation\",\"STEPS\",\"LIST_ROOMS\",\"CONFIRM_DELETE\",\"exportDefault\",\"_ref\",\"onCancel\",\"onConfirm\",\"rooms\",\"hasRooms\",\"length\",\"_useState\",\"_useState2\",\"step\",\"setStep\",\"_useState3\",\"_useState4\",\"deletedRooms\",\"setDeletedRooms\",\"_useState5\",\"_useState6\",\"keptRooms\",\"setKeptRooms\",\"onChangeRoomSelection\",\"room\",\"_id\",\"_objectSpread2\",\"onToggleAllRooms\",\"Object\",\"values\",\"filter\",\"Boolean\",\"fromEntries\",\"map\",\"onSelectRooms\",\"createElement\",\"onReturn\",\"undefined\",\"selectedRooms\"],\"mappings\":\"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\"}"}