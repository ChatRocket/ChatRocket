{"code":"function module(e,t,n){let i,a,s,r,u,o,l;n.export({useValidateInviteQuery:()=>c}),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){i=e},useSessionDispatch(e){a=e},useSetting(e){s=e},useToastMessageDispatch(e){r=e}},0),n.link(\"@tanstack/react-query\",{useQuery(e){u=e}},1),n.link(\"react-i18next\",{useTranslation(e){o=e}},2),n.link(\"./useInviteTokenMutation\",{useInviteTokenMutation(e){l=e}},3);let c=(e,t)=>{let{t:n}=o(),c=s(\"Accounts_RegistrationForm\"),k=a(\"loginDefaultState\"),v=r(),d=l(),g=i(\"POST\",\"/v1/validateInviteToken\");return u([\"invite\",t],async()=>{if(!t)return!1;try{let{valid:e}=await g({token:t});return e}catch(e){return v({type:\"error\",message:n(\"Failed_to_validate_invite_token\")}),!1}},{onSuccess:async n=>{if(t&&(\"Disabled\"!==c?k(\"invite-register\"):k(\"login\"),n&&e))return d(t)}})}}","map":"{\"version\":3,\"sources\":[\"client/views/invite/hooks/useValidateInviteQuery.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useEndpoint, useSessionDispatch, useSetting, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useInviteTokenMutation } from './useInviteTokenMutation';\\n\\nexport const useValidateInviteQuery = (userId: string | null, token: string | undefined) => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst registrationForm = useSetting('Accounts_RegistrationForm');\\n\\n\\tconst setLoginDefaultState = useSessionDispatch('loginDefaultState');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst getInviteRoomMutation = useInviteTokenMutation();\\n\\n\\tconst handleValidateInviteToken = useEndpoint('POST', '/v1/validateInviteToken');\\n\\n\\treturn useQuery(\\n\\t\\t['invite', token],\\n\\t\\tasync () => {\\n\\t\\t\\tif (!token) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst { valid } = await handleValidateInviteToken({ token });\\n\\n\\t\\t\\t\\treturn valid;\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: t('Failed_to_validate_invite_token') });\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tonSuccess: async (valid) => {\\n\\t\\t\\t\\tif (!token) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (registrationForm !== 'Disabled') {\\n\\t\\t\\t\\t\\tsetLoginDefaultState('invite-register');\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tsetLoginDefaultState('login');\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (!valid || !userId) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn getInviteRoomMutation(token);\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n};\\n\",null],\"names\":[\"useEndpoint\",\"useSessionDispatch\",\"useSetting\",\"useToastMessageDispatch\",\"useQuery\",\"useTranslation\",\"useInviteTokenMutation\",\"module\",\"export\",\"useValidateInviteQuery\",\"link\",\"v\",\"userId\",\"token\",\"t\",\"registrationForm\",\"setLoginDefaultState\",\"dispatchToastMessage\",\"getInviteRoomMutation\",\"handleValidateInviteToken\",\"valid\",\"error\",\"type\",\"message\",\"onSuccess\"],\"mappings\":\"2BAAsDA,EAAyBC,EAAMC,EAA2BC,EAAAC,EAAAC,EAAAC,EAAhHC,EAAOC,MAAE,CAAA,CAAAC,uBAAaA,IAAoBA,CAAY,GAA0DF,EAAAG,IAAA,CAAA,2BAAA,CAAAV,YAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,mBAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,WAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,wBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,wBAAA,CAAAN,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,gBAAA,CAAAL,eAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,2BAAA,CAAAJ,uBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAMzG,IAAMF,EAAyBA,CAACG,EAAuBC,KAC7D,GAAM,CAAEC,EAAAA,CAAAA,CAAG,CAAGT,IAERU,EAAmBb,EAAW,6BAE9Bc,EAAuBf,EAAmB,qBAC1CgB,EAAuBd,IACvBe,EAAwBZ,IAExBa,EAA4BnB,EAAY,OAAQ,2BAEtD,OAAOI,EACN,CAAC,SAAUS,EAAM,CACjB,UACC,GAAI,CAACA,EACJ,MAAO,CAAA,EAGR,GAAI,CACH,GAAM,CAAEO,MAAAA,CAAAA,CAAO,CAAG,MAAMD,EAA0B,CAAEN,MAAAA,CAAK,GAEzD,OAAOO,CACR,CAAE,MAAOC,EAAO,CAEf,OADAJ,EAAqB,CAAEK,KAAM,QAASC,QAAST,EAAE,kCAAkC,GAC5E,CAAA,CACR,CACD,EACA,CACCU,UAAW,MAAOJ,IACjB,GAAKP,IAIDE,AAAqB,aAArBA,EACHC,EAAqB,mBAErBA,EAAqB,SAGlB,AAACI,GAAUR,GAIf,OAAOM,EAAsBL,EAC9B,GAGH\"}"}