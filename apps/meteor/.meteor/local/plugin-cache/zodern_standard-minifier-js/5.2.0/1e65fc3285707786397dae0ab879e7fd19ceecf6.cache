{"code":"function module(n,e,t){t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(n){u=n}},0),t.link(\"@babel/runtime/regenerator\",{default:function(n){o=n}},1),t.export({useWebdavActions:function(){return b}}),t.link(\"@rocket.chat/ui-contexts\",{useSetModal:function(n){c=n},useSetting:function(n){i=n}},0),t.link(\"react\",{default:function(n){r=n}},1),t.link(\"react-i18next\",{useTranslation:function(n){l=n}},2),t.link(\"../../../../../../hooks/webdav/useWebDAVAccountIntegrationsQuery\",{useWebDAVAccountIntegrationsQuery:function(n){a=n}},3),t.link(\"../../../../contexts/ChatContext\",{useChat:function(n){d=n}},4),t.link(\"../../../../webdav/AddWebdavAccountModal\",{default:function(n){s=n}},5),t.link(\"../../../../webdav/WebdavFilePickerModal\",{default:function(n){f=n}},6);var u,o,c,i,r,l,a,d,s,f,b=function(){var n=i(\"Webdav_Integration_Enabled\",!1),e=a({enabled:n}),t=e.isSuccess,b=e.data,k=d(),v=l().t,p=c(),m=function(n,e){return o.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",null==k?void 0:k.uploads.send(n,{description:e}));case 1:case\"end\":return t.stop()}},null,null,null,Promise)};return[{id:\"webdav-add\",content:v(\"Add_Server\"),icon:\"cloud-plus\",disabled:!t,onClick:function(){return p(r.createElement(s,{onClose:function(){return p(null)},onConfirm:function(){return p(null)}}))}}].concat(u(t?b.map(function(n){return{id:n._id,content:n.name,icon:\"cloud-plus\",onClick:function(){return p(r.createElement(f,{account:n,onUpload:m,onClose:function(){return p(null)}}))}}}):[]))}}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/messageBox/MessageBoxActionsToolbar/hooks/useWebdavActions.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IWebdavAccountIntegration } from '@rocket.chat/core-typings';\\nimport type { GenericMenuItemProps } from '@rocket.chat/ui-client';\\nimport { useSetModal, useSetting } from '@rocket.chat/ui-contexts';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useWebDAVAccountIntegrationsQuery } from '../../../../../../hooks/webdav/useWebDAVAccountIntegrationsQuery';\\nimport { useChat } from '../../../../contexts/ChatContext';\\nimport AddWebdavAccountModal from '../../../../webdav/AddWebdavAccountModal';\\nimport WebdavFilePickerModal from '../../../../webdav/WebdavFilePickerModal';\\n\\nexport const useWebdavActions = (): GenericMenuItemProps[] => {\\n\\tconst enabled = useSetting<boolean>('Webdav_Integration_Enabled', false);\\n\\n\\tconst { isSuccess, data } = useWebDAVAccountIntegrationsQuery({ enabled });\\n\\n\\tconst chat = useChat();\\n\\n\\tconst { t } = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\tconst handleAddWebDav = () => setModal(<AddWebdavAccountModal onClose={() => setModal(null)} onConfirm={() => setModal(null)} />);\\n\\n\\tconst handleUpload = async (file: File, description?: string) =>\\n\\t\\tchat?.uploads.send(file, {\\n\\t\\t\\tdescription,\\n\\t\\t});\\n\\n\\tconst handleOpenWebdav = (account: IWebdavAccountIntegration) =>\\n\\t\\tsetModal(<WebdavFilePickerModal account={account} onUpload={handleUpload} onClose={() => setModal(null)} />);\\n\\n\\treturn [\\n\\t\\t{\\n\\t\\t\\tid: 'webdav-add',\\n\\t\\t\\tcontent: t('Add_Server'),\\n\\t\\t\\ticon: 'cloud-plus',\\n\\t\\t\\tdisabled: !isSuccess,\\n\\t\\t\\tonClick: handleAddWebDav,\\n\\t\\t},\\n\\t\\t...(isSuccess\\n\\t\\t\\t? data.map((account) => ({\\n\\t\\t\\t\\t\\tid: account._id,\\n\\t\\t\\t\\t\\tcontent: account.name,\\n\\t\\t\\t\\t\\ticon: 'cloud-plus' as const,\\n\\t\\t\\t\\t\\tonClick: () => handleOpenWebdav(account),\\n\\t\\t\\t  }))\\n\\t\\t\\t: []),\\n\\t];\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_toConsumableArray\",\"_regeneratorRuntime\",\"export\",\"useWebdavActions\",\"useSetModal\",\"useSetting\",\"React\",\"useTranslation\",\"useWebDAVAccountIntegrationsQuery\",\"useChat\",\"AddWebdavAccountModal\",\"WebdavFilePickerModal\",\"enabled\",\"_useWebDAVAccountInte\",\"isSuccess\",\"data\",\"chat\",\"t\",\"_useTranslation\",\"setModal\",\"handleUpload\",\"file\",\"description\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"uploads\",\"send\",\"stop\",\"Promise\",\"id\",\"content\",\"icon\",\"disabled\",\"onClick\",\"createElement\",\"onClose\",\"onConfirm\",\"concat\",\"map\",\"account\",\"_id\",\"name\",\"onUpload\"],\"mappings\":\"uBAEsBA,EAAAC,IAAY,CAAA,2CAAiC,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAnEH,EAAOM,MAAE,CAAA,CAAAC,iBAAuB,WAAQ,OAAAA,CAA0B,CAAC,GAAAP,EAAAC,IAAA,CAAA,2BAAA,CAAAO,YAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,EAAAM,WAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAU,eAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,mEAAA,CAAAW,kCAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,mCAAA,CAAAY,QAAA,SAAAV,CAAA,EAAAU,EAAAV,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAA,QAAA,SAAAE,CAAA,EAAAW,EAAAX,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAA,QAAA,SAAAE,CAAA,EAAAY,EAAAZ,CAAA,CAAA,EAAA,GAS5D,IATPC,EAAmEC,EAAAG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAStDR,EAAmB,WAC/B,IAAMS,EAAUP,EAAoB,6BAA8B,CAAA,GAElEQ,EAA4BL,EAAkC,CAAEI,QAAAA,CAAO,GAA/DE,EAASD,EAATC,SAAS,CAAEC,EAAIF,EAAJE,IAAI,CAEjBC,EAAOP,IAELQ,EAACC,AAAKX,IAANU,CAAC,CACHE,EAAWf,IAGXgB,EAAe,SAAOC,CAAU,CAAEC,CAAoB,EAAA,OAAArB,EAAAsB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAG,MAAA,CAAA,SAC3DX,MAAAA,EAAI,KAAA,EAAJA,EAAMY,OAAO,CAACC,IAAI,CAACR,EAAM,CACxBC,YAAAA,IACC,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAM,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAKH,MAAA,CACC,CACCC,GAAI,aACJC,QAAShB,EAAE,cACXiB,KAAM,aACNC,SAAU,CAACrB,EACXsB,QAhBsB,WAAA,OAAMjB,EAASb,EAAA+B,aAAA,CAAC3B,EAAqB,CAAC4B,QAAS,WAAA,OAAMnB,EAAS,KAAK,EAAEoB,UAAW,WAAA,OAAMpB,EAAS,KAAK,CAAC,GAAI,GAiB/H,CAAAqB,MAAA,CAAAxC,EACGc,EACDC,EAAK0B,GAAG,CAAC,SAACC,CAAO,EAAA,MAAM,CACvBV,GAAIU,EAAQC,GAAG,CACfV,QAASS,EAAQE,IAAI,CACrBV,KAAM,aACNE,QAAS,WAAA,OAfZjB,EAASb,EAAA+B,aAAA,CAAC1B,EAAqB,CAAC+B,QAeGA,EAfeG,SAAUzB,EAAckB,QAAS,WAAA,OAAMnB,EAAS,KAAK,CAAC,GAe7D,EACvC,GACD,EAAE,EAEP\"}"}