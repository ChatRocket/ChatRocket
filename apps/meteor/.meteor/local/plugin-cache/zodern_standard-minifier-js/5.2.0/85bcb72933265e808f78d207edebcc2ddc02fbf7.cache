{"code":"function module(e,n,t){var a,r,o,s,l,i,c,u,m,f,g,d,p,E,h,k,w,x,_;t.link(\"@babel/runtime/regenerator\",{default:function(e){a=e}},0),t.link(\"@rocket.chat/fuselage\",{Box:function(e){r=e},Callout:function(e){o=e},Message:function(e){s=e},StatesAction:function(e){l=e},StatesActions:function(e){i=e},StatesIcon:function(e){c=e},StatesTitle:function(e){u=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){m=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){f=e},useToastMessageDispatch:function(e){g=e}},2),t.link(\"@tanstack/react-query\",{useQuery:function(e){d=e}},3),t.link(\"react\",{default:function(e){p=e},Fragment:function(e){E=e}},4),t.link(\"react-i18next\",{useTranslation:function(e){h=e}},5),t.link(\"../../../components/Contextualbar\",{ContextualbarFooter:function(e){k=e}},6),t.link(\"../../../components/GenericNoResults\",{default:function(e){w=e}},7),t.link(\"./MessageContextFooter\",{default:function(e){x=e}},8),t.link(\"./helpers/ContextMessage\",{default:function(e){_=e}},9),t.exportDefault(function(e){var n=e.userId,t=e.onRedirect,b=h().t,y=g(),M=f(\"GET\",\"/v1/moderation.user.reportedMessages\"),v=d([\"moderation\",\"msgReports\",\"fetchDetails\",{userId:n}],function(){var e;return a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.awrap(M({userId:n}));case 2:return e=t.sent,t.abrupt(\"return\",e);case 4:case\"end\":return t.stop()}},null,null,null,Promise)},{onError:function(e){y({type:\"error\",message:e})}}),C=v.data,D=v.refetch,I=v.isLoading,S=v.isSuccess,R=v.isError,F=m(function(){D()});return p.createElement(p.Fragment,null,p.createElement(r,{display:\"flex\",flexDirection:\"column\",width:\"full\",height:\"full\",overflowY:\"auto\",overflowX:\"hidden\"},I&&p.createElement(s,null,b(\"Loading\")),S&&p.createElement(r,{padding:24},C.messages.length>0&&p.createElement(o,{title:b(\"Moderation_Duplicate_messages\"),type:\"warning\",icon:\"warning\"},b(\"Moderation_Duplicate_messages_warning\")),!C.user&&p.createElement(o,{mbs:8,type:\"warning\",icon:\"warning\"},b(\"Moderation_User_deleted_warning\"))),S&&C.messages.length>0&&C.messages.map(function(e){return p.createElement(E,{key:e._id},p.createElement(_,{message:e.message,room:e.room,onRedirect:t,onChange:F,deleted:!C.user}))}),S&&0===C.messages.length&&p.createElement(w,{title:b(\"No_message_reports\"),icon:\"message\"}),R&&p.createElement(r,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",pb:20,color:\"default\"},p.createElement(c,{name:\"warning\",variation:\"danger\"}),p.createElement(u,null,b(\"Something_went_wrong\")),p.createElement(i,null,p.createElement(l,{onClick:F},b(\"Reload_page\"))))),S&&C.messages.length>0&&p.createElement(k,null,p.createElement(x,{userId:n,deleted:!C.user})))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/moderation/UserMessages.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Callout, Message, StatesAction, StatesActions, StatesIcon, StatesTitle } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useEndpoint, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport React, { Fragment } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { ContextualbarFooter } from '../../../components/Contextualbar';\\nimport GenericNoResults from '../../../components/GenericNoResults';\\nimport MessageContextFooter from './MessageContextFooter';\\nimport ContextMessage from './helpers/ContextMessage';\\n\\nconst UserMessages = ({ userId, onRedirect }: { userId: string; onRedirect: (mid: string) => void }) => {\\n\\tconst { t } = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst getUserMessages = useEndpoint('GET', '/v1/moderation.user.reportedMessages');\\n\\n\\tconst {\\n\\t\\tdata: report,\\n\\t\\trefetch: reloadUserMessages,\\n\\t\\tisLoading,\\n\\t\\tisSuccess,\\n\\t\\tisError,\\n\\t} = useQuery(\\n\\t\\t['moderation', 'msgReports', 'fetchDetails', { userId }],\\n\\t\\tasync () => {\\n\\t\\t\\tconst messages = await getUserMessages({ userId });\\n\\t\\t\\treturn messages;\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tonError: (error) => {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n\\n\\tconst handleChange = useMutableCallback(() => {\\n\\t\\treloadUserMessages();\\n\\t});\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<Box display='flex' flexDirection='column' width='full' height='full' overflowY='auto' overflowX='hidden'>\\n\\t\\t\\t\\t{isLoading && <Message>{t('Loading')}</Message>}\\n\\t\\t\\t\\t{isSuccess && (\\n\\t\\t\\t\\t\\t<Box padding={24}>\\n\\t\\t\\t\\t\\t\\t{report.messages.length > 0 && (\\n\\t\\t\\t\\t\\t\\t\\t<Callout title={t('Moderation_Duplicate_messages')} type='warning' icon='warning'>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Moderation_Duplicate_messages_warning')}\\n\\t\\t\\t\\t\\t\\t\\t</Callout>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t{!report.user && (\\n\\t\\t\\t\\t\\t\\t\\t<Callout mbs={8} type='warning' icon='warning'>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Moderation_User_deleted_warning')}\\n\\t\\t\\t\\t\\t\\t\\t</Callout>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t{isSuccess &&\\n\\t\\t\\t\\t\\treport.messages.length > 0 &&\\n\\t\\t\\t\\t\\treport.messages.map((message) => (\\n\\t\\t\\t\\t\\t\\t<Fragment key={message._id}>\\n\\t\\t\\t\\t\\t\\t\\t<ContextMessage\\n\\t\\t\\t\\t\\t\\t\\t\\tmessage={message.message}\\n\\t\\t\\t\\t\\t\\t\\t\\troom={message.room}\\n\\t\\t\\t\\t\\t\\t\\t\\tonRedirect={onRedirect}\\n\\t\\t\\t\\t\\t\\t\\t\\tonChange={handleChange}\\n\\t\\t\\t\\t\\t\\t\\t\\tdeleted={!report.user}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</Fragment>\\n\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t{isSuccess && report.messages.length === 0 && <GenericNoResults title={t('No_message_reports')} icon='message' />}\\n\\t\\t\\t\\t{isError && (\\n\\t\\t\\t\\t\\t<Box display='flex' flexDirection='column' alignItems='center' pb={20} color='default'>\\n\\t\\t\\t\\t\\t\\t<StatesIcon name='warning' variation='danger' />\\n\\t\\t\\t\\t\\t\\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\\n\\t\\t\\t\\t\\t\\t<StatesActions>\\n\\t\\t\\t\\t\\t\\t\\t<StatesAction onClick={handleChange}>{t('Reload_page')}</StatesAction>\\n\\t\\t\\t\\t\\t\\t</StatesActions>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</Box>\\n\\t\\t\\t{isSuccess && report.messages.length > 0 && (\\n\\t\\t\\t\\t<ContextualbarFooter>\\n\\t\\t\\t\\t\\t<MessageContextFooter userId={userId} deleted={!report.user} />\\n\\t\\t\\t\\t</ContextualbarFooter>\\n\\t\\t\\t)}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default UserMessages;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"Box\",\"Callout\",\"Message\",\"StatesAction\",\"StatesActions\",\"StatesIcon\",\"StatesTitle\",\"useMutableCallback\",\"useEndpoint\",\"useToastMessageDispatch\",\"useQuery\",\"React\",\"Fragment\",\"useTranslation\",\"ContextualbarFooter\",\"GenericNoResults\",\"MessageContextFooter\",\"ContextMessage\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"userId\",\"onRedirect\",\"t\",\"_useTranslation\",\"dispatchToastMessage\",\"getUserMessages\",\"_useQuery\",\"messages\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"sent\",\"abrupt\",\"stop\",\"Promise\",\"onError\",\"error\",\"type\",\"message\",\"report\",\"data\",\"reloadUserMessages\",\"refetch\",\"isLoading\",\"isSuccess\",\"isError\",\"handleChange\",\"createElement\",\"display\",\"flexDirection\",\"width\",\"height\",\"overflowY\",\"overflowX\",\"padding\",\"length\",\"title\",\"icon\",\"user\",\"mbs\",\"map\",\"key\",\"_id\",\"room\",\"onChange\",\"deleted\",\"alignItems\",\"pb\",\"color\",\"name\",\"variation\",\"onClick\"],\"mappings\":\"uBAYA,IAZAA,EAAAC,EAAOC,EAAOC,EAASC,EAASC,EAAcC,EAAeC,EAAuDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA7FC,EAAOC,IAAE,CAAA,6BAA6B,CAAAC,QAAY,SAAAC,CAAW,EAAEtB,EAAMsB,CAAA,CAAA,EAAA,GAAnBH,EAAAC,IAAW,CAAE,wBAAM,CAAAnB,IAAuB,SAACqB,CAAA,EAAArB,EAAAqB,CAAA,EAAApB,QAAA,SAAAoB,CAAA,EAAApB,EAAAoB,CAAA,EAAAnB,QAAA,SAAAmB,CAAA,EAAAnB,EAAAmB,CAAA,EAAAlB,aAAA,SAAAkB,CAAA,EAAAlB,EAAAkB,CAAA,EAAAjB,cAAA,SAAAiB,CAAA,EAAAjB,EAAAiB,CAAA,EAAAhB,WAAA,SAAAgB,CAAA,EAAAhB,EAAAgB,CAAA,EAAAf,YAAA,SAAAe,CAAA,EAAAf,EAAAe,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAZ,mBAAA,SAAAc,CAAA,EAAAd,EAAAc,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAX,YAAA,SAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,wBAAA,SAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAT,SAAA,SAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAV,EAAAU,CAAA,EAAAT,SAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAN,eAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oCAAA,CAAAL,oBAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAA,QAAA,SAAAE,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yBAAA,CAAA,QAAA,SAAAE,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAA,QAAA,SAAAE,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAApHH,EAAOI,aAAO,CAYO,SAAAC,CAAA,EAAkF,IAA/EC,EAAMD,EAANC,MAAM,CAAEC,EAAUF,EAAVE,UAAU,CACjCC,EAACC,AAAKd,IAANa,CAAC,CACHE,EAAuBnB,IACvBoB,EAAkBrB,EAAY,MAAO,wCAE3CsB,EAMIpB,EACH,CAAC,aAAc,aAAc,eAAgB,CAAEc,OAAAA,CAAM,EAAG,CACxD,WAAA,IAAAO,EAAA,OAAAhC,EAAAiC,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAApC,EAAAqC,KAAA,CACwBP,EAAgB,CAAEL,OAAAA,CAAM,GAAG,MAAA,EAApC,OAARO,EAAQE,EAAAI,IAAA,CAAAJ,EAAAK,MAAA,CAAA,SACPP,EAAQ,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAM,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEhB,CACCC,QAAS,SAACC,CAAK,EACdd,EAAqB,CAAEe,KAAM,QAASC,QAASF,CAAK,EACrD,IAdKG,EAAMf,EAAZgB,IAAI,CACKC,EAAkBjB,EAA3BkB,OAAO,CACPC,EAASnB,EAATmB,SAAS,CACTC,EAASpB,EAAToB,SAAS,CACTC,EAAOrB,EAAPqB,OAAO,CAcFC,EAAe7C,EAAmB,WACvCwC,GACD,GAEA,OACCpC,EAAA0C,aAAA,CAAA1C,EAAAC,QAAA,CAAA,KACCD,EAAA0C,aAAA,CAACrD,EAAG,CAACsD,QAAQ,OAAOC,cAAc,SAASC,MAAM,OAAOC,OAAO,OAAOC,UAAU,OAAOC,UAAU,QAAQ,EACvGV,GAAatC,EAAA0C,aAAA,CAACnD,EAAO,KAAEwB,EAAE,YACzBwB,GACAvC,EAAA0C,aAAA,CAACrD,EAAG,CAAC4D,QAAS,EAAG,EACff,EAAOd,QAAQ,CAAC8B,MAAM,CAAG,GACzBlD,EAAA0C,aAAA,CAACpD,EAAO,CAAC6D,MAAOpC,EAAE,iCAAkCiB,KAAK,UAAUoB,KAAK,SAAS,EAC/ErC,EAAE,0CAGJ,CAACmB,EAAOmB,IAAI,EACZrD,EAAA0C,aAAA,CAACpD,EAAO,CAACgE,IAAK,EAAGtB,KAAK,UAAUoB,KAAK,SAAS,EAC5CrC,EAAE,qCAKNwB,GACAL,EAAOd,QAAQ,CAAC8B,MAAM,CAAG,GACzBhB,EAAOd,QAAQ,CAACmC,GAAG,CAAC,SAACtB,CAAO,EAAA,OAC3BjC,EAAA0C,aAAA,CAACzC,EAAQ,CAACuD,IAAKvB,EAAQwB,GAAAA,AAAI,EAC1BzD,EAAA0C,aAAA,CAACpC,EAAc,CACd2B,QAASA,EAAQA,OAAQ,CACzByB,KAAMzB,EAAQyB,IAAK,CACnB5C,WAAYA,EACZ6C,SAAUlB,EACVmB,QAAS,CAAC1B,EAAOmB,IAAAA,AAAK,GAEb,GAEZd,GAAaL,AAA2B,IAA3BA,EAAOd,QAAQ,CAAC8B,MAAM,EAAUlD,EAAA0C,aAAA,CAACtC,EAAgB,CAAC+C,MAAOpC,EAAE,sBAAuBqC,KAAK,SAAS,GAC7GZ,GACAxC,EAAA0C,aAAA,CAACrD,EAAG,CAACsD,QAAQ,OAAOC,cAAc,SAASiB,WAAW,SAASC,GAAI,GAAIC,MAAM,SAAS,EACrF/D,EAAA0C,aAAA,CAAChD,EAAU,CAACsE,KAAK,UAAUC,UAAU,QAAQ,GAC7CjE,EAAA0C,aAAA,CAAC/C,EAAW,KAAEoB,EAAE,yBAChBf,EAAA0C,aAAA,CAACjD,EAAa,KACbO,EAAA0C,aAAA,CAAClD,EAAY,CAAC0E,QAASzB,CAAa,EAAE1B,EAAE,mBAK3CwB,GAAaL,EAAOd,QAAQ,CAAC8B,MAAM,CAAG,GACtClD,EAAA0C,aAAA,CAACvC,EAAmB,KACnBH,EAAA0C,aAAA,CAACrC,EAAoB,CAACQ,OAAQA,EAAQ+C,QAAS,CAAC1B,EAAOmB,IAAAA,AAAK,IAKjE\"}"}