{"code":"function module(e,n,o){o.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){t=e}},0),o.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){l=e}},1),o.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){i=e}},0),o.link(\"react\",{default:function(e){u=e},useState:function(e){r=e},useCallback:function(e){c=e}},1),o.link(\"./ModalSteps/FirstStep\",{default:function(e){a=e}},2),o.link(\"./ModalSteps/SecondStep\",{default:function(e){f=e}},3);var t,l,i,u,r,c,a,f,s={LIST_ROOMS:\"LIST_ROOMS\",CONFIRM_CONVERT:\"CONFIRM_CONVERT\"};o.exportDefault(function(e){var n=e.onClose,o=e.onCancel,d=e.onConfirm,C=e.rooms,O=e.currentStep,R=void 0===O?(null==C?void 0:C.length)===0?s.CONFIRM_CONVERT:s.LIST_ROOMS:O,m=r(R),S=l(m,2),_=S[0],M=S[1],b=r({}),T=l(b,2),g=T[0],h=T[1],k=i(function(){return M(s.CONFIRM_CONVERT)}),p=i(function(){return M(s.LIST_ROOMS)}),N=c(function(e){h(function(n){var o;return n[e._id]?(delete n[e._id],t({},n)):t(t({},n),{},((o={})[e._id]=e,o))})},[]),I=i(function(){if(0===Object.values(g).filter(Boolean).length&&C)return h(Object.fromEntries(C.map(function(e){return[e._id,e]})));h({})});return _===s.CONFIRM_CONVERT?u.createElement(f,{onConfirm:d,onClose:n,onCancel:C&&C.length>0?p:o,deletedRooms:g,rooms:C}):u.createElement(a,{onConfirm:k,onClose:n,onCancel:o,rooms:C,selectedRooms:g,onToggleAllRooms:I,onChangeRoomSelection:N,eligibleRoomsLength:null==C?void 0:C.length})})}","map":"{\"version\":3,\"sources\":[\"client/views/teams/ConvertToChannelModal/BaseConvertToChannelModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, Serialized } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport React, { useState, useCallback } from 'react';\\n\\nimport FirstStep from './ModalSteps/FirstStep';\\nimport SecondStep from './ModalSteps/SecondStep';\\n\\nconst STEPS = {\\n\\tLIST_ROOMS: 'LIST_ROOMS',\\n\\tCONFIRM_CONVERT: 'CONFIRM_CONVERT',\\n};\\n\\ntype BaseConvertToChannelModalProps = {\\n\\tonClose: () => void;\\n\\tonCancel: () => void;\\n\\tonConfirm: (deletedRooms: { [key: string]: Serialized<IRoom> }) => void;\\n\\tcurrentStep?: string;\\n\\trooms?: (Serialized<IRoom> & { isLastOwner?: boolean })[];\\n};\\n\\nconst BaseConvertToChannelModal = ({\\n\\tonClose,\\n\\tonCancel,\\n\\tonConfirm,\\n\\trooms,\\n\\tcurrentStep = rooms?.length === 0 ? STEPS.CONFIRM_CONVERT : STEPS.LIST_ROOMS,\\n}: BaseConvertToChannelModalProps) => {\\n\\tconst [step, setStep] = useState(currentStep);\\n\\tconst [selectedRooms, setSelectedRooms] = useState<{ [key: string]: Serialized<IRoom> }>({});\\n\\n\\tconst onContinue = useMutableCallback(() => setStep(STEPS.CONFIRM_CONVERT));\\n\\tconst onReturn = useMutableCallback(() => setStep(STEPS.LIST_ROOMS));\\n\\n\\tconst eligibleRooms = rooms;\\n\\n\\tconst onChangeRoomSelection = useCallback((room) => {\\n\\t\\tsetSelectedRooms((selectedRooms) => {\\n\\t\\t\\tif (selectedRooms[room._id]) {\\n\\t\\t\\t\\tdelete selectedRooms[room._id];\\n\\t\\t\\t\\treturn { ...selectedRooms };\\n\\t\\t\\t}\\n\\t\\t\\treturn { ...selectedRooms, [room._id]: room };\\n\\t\\t});\\n\\t}, []);\\n\\n\\tconst onToggleAllRooms = useMutableCallback(() => {\\n\\t\\tif (Object.values(selectedRooms).filter(Boolean).length === 0 && eligibleRooms) {\\n\\t\\t\\treturn setSelectedRooms(Object.fromEntries(eligibleRooms.map((room) => [room._id, room])));\\n\\t\\t}\\n\\t\\tsetSelectedRooms({});\\n\\t});\\n\\n\\tif (step === STEPS.CONFIRM_CONVERT) {\\n\\t\\treturn (\\n\\t\\t\\t<SecondStep\\n\\t\\t\\t\\tonConfirm={onConfirm}\\n\\t\\t\\t\\tonClose={onClose}\\n\\t\\t\\t\\tonCancel={rooms && rooms.length > 0 ? onReturn : onCancel}\\n\\t\\t\\t\\tdeletedRooms={selectedRooms}\\n\\t\\t\\t\\trooms={rooms}\\n\\t\\t\\t/>\\n\\t\\t);\\n\\t}\\n\\n\\treturn (\\n\\t\\t<FirstStep\\n\\t\\t\\tonConfirm={onContinue}\\n\\t\\t\\tonClose={onClose}\\n\\t\\t\\tonCancel={onCancel}\\n\\t\\t\\trooms={rooms}\\n\\t\\t\\tselectedRooms={selectedRooms}\\n\\t\\t\\tonToggleAllRooms={onToggleAllRooms}\\n\\t\\t\\tonChangeRoomSelection={onChangeRoomSelection}\\n\\t\\t\\teligibleRoomsLength={eligibleRooms?.length}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default BaseConvertToChannelModal;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"_slicedToArray\",\"useMutableCallback\",\"React\",\"useState\",\"useCallback\",\"FirstStep\",\"SecondStep\",\"STEPS\",\"LIST_ROOMS\",\"CONFIRM_CONVERT\",\"exportDefault\",\"_ref\",\"onClose\",\"onCancel\",\"onConfirm\",\"rooms\",\"_ref$currentStep\",\"currentStep\",\"length\",\"_useState\",\"_useState2\",\"step\",\"setStep\",\"_useState3\",\"_useState4\",\"selectedRooms\",\"setSelectedRooms\",\"onContinue\",\"onReturn\",\"onChangeRoomSelection\",\"room\",\"_objectSpread2\",\"_id\",\"onToggleAllRooms\",\"Object\",\"values\",\"filter\",\"Boolean\",\"fromEntries\",\"eligibleRooms\",\"map\",\"createElement\",\"deletedRooms\",\"eligibleRoomsLength\"],\"mappings\":\"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\"}"}