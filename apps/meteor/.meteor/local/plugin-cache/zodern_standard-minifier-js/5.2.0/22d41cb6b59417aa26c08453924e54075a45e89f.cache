{"code":"function module(e,s){\"use strict\";Object.defineProperty(s,\"__esModule\",{value:!0});let o=e(\"react/jsx-runtime\"),n=e(\"@rocket.chat/core-typings\"),i=e(\"@rocket.chat/ui-contexts\"),t=e(\"@rocket.chat/ui-video-conf\"),d=e(\"react\"),r=e(\"../..\"),a=e(\"../../hooks/useSurfaceType\"),c=e(\"./hooks/useVideoConfDataStream\");s.default=(0,d.memo)(({block:e})=>{let s=(0,i.useTranslation)(),{callId:l,appId:C=\"videoconf-core\"}=e,u=(0,a.useSurfaceType)(),f=(0,i.useUserId)(),g=(0,i.useGoToRoom)(),{action:x,viewId:j,rid:h}=(0,d.useContext)(r.UiKitContext);if(\"message\"!==u)throw Error(\"VideoConferenceBlock cannot be rendered outside message\");if(!h)throw Error(\"VideoConferenceBlock cannot be rendered without rid\");let V=(0,c.useVideoConfDataStream)({rid:h,callId:l});if(V.isLoading||V.isError)return(0,o.jsx)(t.VideoConfMessageSkeleton,{});let{data:M}=V,_=M.createdBy._id===f,k=(0,o.jsxs)(t.VideoConfMessageActions,{children:[M.discussionRid&&(0,o.jsx)(t.VideoConfMessageAction,{icon:\"discussion\",title:s(\"Join_discussion\"),onClick:e=>{M.discussionRid&&g(M.discussionRid)}}),(0,o.jsx)(t.VideoConfMessageAction,{icon:\"info\",onClick:e=>{x({blockId:l,appId:C,actionId:\"info\",value:h,viewId:j},e)}})]});return\"endedAt\"in M?(0,o.jsxs)(t.VideoConfMessage,{children:[(0,o.jsxs)(t.VideoConfMessageRow,{children:[(0,o.jsxs)(t.VideoConfMessageContent,{children:[(0,o.jsx)(t.VideoConfMessageIcon,{}),(0,o.jsx)(t.VideoConfMessageText,{children:s(\"Call_ended\")})]}),k]}),(0,o.jsxs)(t.VideoConfMessageFooter,{children:[\"direct\"===M.type&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.VideoConfMessageButton,{onClick:e=>{x({blockId:h||\"\",appId:C,actionId:\"callBack\",value:h||\"\",viewId:j},e)},children:s(_?\"Call_again\":\"Call_back\")}),[n.VideoConferenceStatus.EXPIRED,n.VideoConferenceStatus.DECLINED].includes(M.status)&&(0,o.jsx)(t.VideoConfMessageFooterText,{children:s(\"Call_was_not_answered\")})]}),\"direct\"!==M.type&&(M.users.length?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.VideoConfMessageUserStack,{users:M.users}),(0,o.jsx)(t.VideoConfMessageFooterText,{children:M.users.length>3?s(\"__usersCount__member_joined\",{usersCount:M.users.length-3}):s(\"joined\")})]}):[n.VideoConferenceStatus.EXPIRED,n.VideoConferenceStatus.DECLINED].includes(M.status)&&(0,o.jsx)(t.VideoConfMessageFooterText,{children:s(\"Call_was_not_answered\")}))]})]}):\"direct\"===M.type&&M.status===n.VideoConferenceStatus.CALLING?(0,o.jsxs)(t.VideoConfMessage,{children:[(0,o.jsxs)(t.VideoConfMessageRow,{children:[(0,o.jsxs)(t.VideoConfMessageContent,{children:[(0,o.jsx)(t.VideoConfMessageIcon,{variant:\"incoming\"}),(0,o.jsx)(t.VideoConfMessageText,{children:s(\"Calling\")})]}),k]}),(0,o.jsx)(t.VideoConfMessageFooter,{children:(0,o.jsx)(t.VideoConfMessageFooterText,{children:s(\"Waiting_for_answer\")})})]}):(0,o.jsxs)(t.VideoConfMessage,{children:[(0,o.jsxs)(t.VideoConfMessageRow,{children:[(0,o.jsxs)(t.VideoConfMessageContent,{children:[(0,o.jsx)(t.VideoConfMessageIcon,{variant:\"outgoing\"}),(0,o.jsx)(t.VideoConfMessageText,{children:s(\"Call_ongoing\")})]}),k]}),(0,o.jsxs)(t.VideoConfMessageFooter,{children:[(0,o.jsx)(t.VideoConfMessageButton,{primary:!0,onClick:s=>{x({blockId:e.blockId||\"\",appId:C,actionId:\"join\",value:e.blockId||\"\",viewId:j},s)},children:s(\"Join\")}),!!M.users.length&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.VideoConfMessageUserStack,{users:M.users}),(0,o.jsx)(t.VideoConfMessageFooterText,{children:M.users.length>3?s(\"__usersCount__member_joined\",{count:M.users.length-3}):s(\"joined\")})]})]})]})})}","map":"{\"version\":3,\"sources\":[\"<anon>\"],\"names\":[],\"mappings\":\"\"}"}