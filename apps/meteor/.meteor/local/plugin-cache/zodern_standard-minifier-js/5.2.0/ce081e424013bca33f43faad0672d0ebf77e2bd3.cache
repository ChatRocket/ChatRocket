{"code":"function module(e,t,l){let n,a,o,s,r,i,u,c,d,m,g,x,k,v,E,p,f,C,b,h,M,y,S;l.link(\"@rocket.chat/fuselage\",{Box(e){n=e},MessageDivider(e){a=e},Throbber(e){o=e}},0),l.link(\"@rocket.chat/ui-contexts\",{useUserPreference(e){s=e}},1),l.link(\"react\",{default(e){r=e},useCallback(e){i=e}},2),l.link(\"react-virtuoso\",{Virtuoso(e){u=e}},3),l.link(\"../../../../app/ui-utils/client\",{MessageTypes(e){c=e}},4),l.link(\"../../../components/Contextualbar\",{ContextualbarContent(e){d=e},ContextualbarHeader(e){m=e},ContextualbarIcon(e){g=e},ContextualbarTitle(e){x=e},ContextualbarClose(e){k=e},ContextualbarEmptyContent(e){v=e}},5),l.link(\"../../../components/CustomScrollbars\",{VirtuosoScrollbars(e){E=e}},6),l.link(\"../../../components/message/variants/RoomMessage\",{default(e){p=e}},7),l.link(\"../../../components/message/variants/SystemMessage\",{default(e){f=e}},8),l.link(\"../../../hooks/useFormatDate\",{useFormatDate(e){C=e}},9),l.link(\"../MessageList/MessageListErrorBoundary\",{default(e){b=e}},10),l.link(\"../MessageList/lib/isMessageNewDay\",{isMessageNewDay(e){h=e}},11),l.link(\"../MessageList/providers/MessageListProvider\",{default(e){M=e}},12),l.link(\"../contexts/RoomContext\",{useRoomSubscription(e){y=e}},13),l.link(\"../contexts/RoomToolboxContext\",{useRoomToolbox(e){S=e}},14),l.exportDefault(e=>{let{iconName:t,title:l,emptyResultMessage:D,context:w,queryResult:L}=e,F=C(),R=!!s(\"displayAvatars\"),{closeTab:T}=S(),B=i(()=>{T()},[T]),U=y();return r.createElement(r.Fragment,null,r.createElement(m,null,r.createElement(g,{name:t}),r.createElement(x,null,l),r.createElement(k,{onClick:B})),r.createElement(d,{flexShrink:1,flexGrow:1,paddingInline:0},L.isLoading&&r.createElement(n,{paddingInline:24,paddingBlock:12},r.createElement(o,{size:\"x12\"})),L.isSuccess&&r.createElement(r.Fragment,null,0===L.data.length&&r.createElement(v,{title:D}),L.data.length>0&&r.createElement(b,null,r.createElement(M,null,r.createElement(n,{is:\"section\",display:\"flex\",flexDirection:\"column\",flexGrow:1,flexShrink:1,flexBasis:\"auto\",height:\"full\"},r.createElement(u,{totalCount:L.data.length,overscan:25,data:L.data,components:{Scroller:E},itemContent:(e,t)=>{var l,n,o,s,i,u;let d=L.data[e-1],m=h(t,d),g=c.isSystemMessage(t),x=null!==(l=null==U?void 0:null===(n=U.tunread)||void 0===n?void 0:n.includes(t._id))&&void 0!==l&&l,k=null!==(o=null==U?void 0:null===(s=U.tunreadUser)||void 0===s?void 0:s.includes(t._id))&&void 0!==o&&o,v=null!==(i=null==U?void 0:null===(u=U.tunreadGroup)||void 0===u?void 0:u.includes(t._id))&&void 0!==i&&i;return r.createElement(r.Fragment,null,m&&r.createElement(a,null,F(t.ts)),g?r.createElement(f,{message:t,showUserAvatar:R}):r.createElement(p,{message:t,sequential:!1,unread:x,mention:k,all:v,context:w,showUserAvatar:R}))}})))))))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/MessageListTab.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { Box, MessageDivider, Throbber } from '@rocket.chat/fuselage';\\nimport type { Keys as IconName } from '@rocket.chat/icons';\\nimport { useUserPreference } from '@rocket.chat/ui-contexts';\\nimport type { UseQueryResult } from '@tanstack/react-query';\\nimport type { ReactElement, ReactNode } from 'react';\\nimport React, { useCallback } from 'react';\\nimport { Virtuoso } from 'react-virtuoso';\\n\\nimport { MessageTypes } from '../../../../app/ui-utils/client';\\nimport type { MessageActionContext } from '../../../../app/ui-utils/client/lib/MessageAction';\\nimport {\\n\\tContextualbarContent,\\n\\tContextualbarHeader,\\n\\tContextualbarIcon,\\n\\tContextualbarTitle,\\n\\tContextualbarClose,\\n\\tContextualbarEmptyContent,\\n} from '../../../components/Contextualbar';\\nimport { VirtuosoScrollbars } from '../../../components/CustomScrollbars';\\nimport RoomMessage from '../../../components/message/variants/RoomMessage';\\nimport SystemMessage from '../../../components/message/variants/SystemMessage';\\nimport { useFormatDate } from '../../../hooks/useFormatDate';\\nimport MessageListErrorBoundary from '../MessageList/MessageListErrorBoundary';\\nimport { isMessageNewDay } from '../MessageList/lib/isMessageNewDay';\\nimport MessageListProvider from '../MessageList/providers/MessageListProvider';\\nimport { useRoomSubscription } from '../contexts/RoomContext';\\nimport { useRoomToolbox } from '../contexts/RoomToolboxContext';\\n\\ntype MessageListTabProps = {\\n\\ticonName: IconName;\\n\\ttitle: ReactNode;\\n\\temptyResultMessage: string;\\n\\tcontext: MessageActionContext;\\n\\tqueryResult: UseQueryResult<IMessage[]>;\\n};\\n\\nconst MessageListTab = ({ iconName, title, emptyResultMessage, context, queryResult }: MessageListTabProps): ReactElement => {\\n\\tconst formatDate = useFormatDate();\\n\\tconst showUserAvatar = !!useUserPreference<boolean>('displayAvatars');\\n\\n\\tconst { closeTab } = useRoomToolbox();\\n\\tconst handleTabBarCloseButtonClick = useCallback(() => {\\n\\t\\tcloseTab();\\n\\t}, [closeTab]);\\n\\n\\tconst subscription = useRoomSubscription();\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<ContextualbarHeader>\\n\\t\\t\\t\\t<ContextualbarIcon name={iconName} />\\n\\t\\t\\t\\t<ContextualbarTitle>{title}</ContextualbarTitle>\\n\\t\\t\\t\\t<ContextualbarClose onClick={handleTabBarCloseButtonClick} />\\n\\t\\t\\t</ContextualbarHeader>\\n\\t\\t\\t<ContextualbarContent flexShrink={1} flexGrow={1} paddingInline={0}>\\n\\t\\t\\t\\t{queryResult.isLoading && (\\n\\t\\t\\t\\t\\t<Box paddingInline={24} paddingBlock={12}>\\n\\t\\t\\t\\t\\t\\t<Throbber size='x12' />\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t{queryResult.isSuccess && (\\n\\t\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t\\t{queryResult.data.length === 0 && <ContextualbarEmptyContent title={emptyResultMessage} />}\\n\\n\\t\\t\\t\\t\\t\\t{queryResult.data.length > 0 && (\\n\\t\\t\\t\\t\\t\\t\\t<MessageListErrorBoundary>\\n\\t\\t\\t\\t\\t\\t\\t\\t<MessageListProvider>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Box is='section' display='flex' flexDirection='column' flexGrow={1} flexShrink={1} flexBasis='auto' height='full'>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Virtuoso\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttotalCount={queryResult.data.length}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\toverscan={25}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata={queryResult.data}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcomponents={{ Scroller: VirtuosoScrollbars }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\titemContent={(index, message) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst previous = queryResult.data[index - 1];\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst newDay = isMessageNewDay(message, previous);\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst system = MessageTypes.isSystemMessage(message);\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst unread = subscription?.tunread?.includes(message._id) ?? false;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst mention = subscription?.tunreadUser?.includes(message._id) ?? false;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst all = subscription?.tunreadGroup?.includes(message._id) ?? false;\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{newDay && <MessageDivider>{formatDate(message.ts)}</MessageDivider>}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{system ? (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<SystemMessage message={message} showUserAvatar={showUserAvatar} />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t) : (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<RoomMessage\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmessage={message}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tsequential={false}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tunread={unread}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmention={mention}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tall={all}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcontext={context}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tshowUserAvatar={showUserAvatar}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t\\t\\t</MessageListProvider>\\n\\t\\t\\t\\t\\t\\t\\t</MessageListErrorBoundary>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</ContextualbarContent>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default MessageListTab;\\n\",null],\"names\":[\"Box\",\"MessageDivider\",\"Throbber\",\"useUserPreference\",\"React\",\"useCallback\",\"Virtuoso\",\"MessageTypes\",\"ContextualbarContent\",\"ContextualbarHeader\",\"ContextualbarIcon\",\"ContextualbarTitle\",\"ContextualbarClose\",\"ContextualbarEmptyContent\",\"VirtuosoScrollbars\",\"RoomMessage\",\"SystemMessage\",\"useFormatDate\",\"MessageListErrorBoundary\",\"isMessageNewDay\",\"MessageListProvider\",\"useRoomSubscription\",\"useRoomToolbox\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"iconName\",\"title\",\"emptyResultMessage\",\"context\",\"queryResult\",\"formatDate\",\"showUserAvatar\",\"closeTab\",\"handleTabBarCloseButtonClick\",\"subscription\",\"createElement\",\"Fragment\",\"name\",\"onClick\",\"flexShrink\",\"flexGrow\",\"paddingInline\",\"isLoading\",\"paddingBlock\",\"size\",\"isSuccess\",\"data\",\"length\",\"is\",\"display\",\"flexDirection\",\"flexBasis\",\"height\",\"totalCount\",\"overscan\",\"components\",\"Scroller\",\"itemContent\",\"index\",\"message\",\"_subscription$tunread\",\"_subscription$tunread2\",\"_subscription$tunread3\",\"_subscription$tunread4\",\"_subscription$tunread5\",\"_subscription$tunread6\",\"previous\",\"newDay\",\"system\",\"isSystemMessage\",\"unread\",\"tunread\",\"includes\",\"_id\",\"mention\",\"tunreadUser\",\"all\",\"tunreadGroup\",\"ts\",\"sequential\"],\"mappings\":\"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\"}"}