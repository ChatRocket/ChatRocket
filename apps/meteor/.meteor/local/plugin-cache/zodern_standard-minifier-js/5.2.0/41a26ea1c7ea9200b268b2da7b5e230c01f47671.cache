{"code":"function module(e,n,i){var r,t,l,a,o,c,u,s,d,m,f,b,k,v,E,h,g,_,F,p=[\"control\",\"trigger\",\"index\"];i.link(\"@babel/runtime/helpers/extends\",{default:function(e){r=e}},0),i.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){t=e}},1),i.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){l=e}},2),i.export({ExternalServiceActionForm:function(){return x}}),i.link(\"@rocket.chat/fuselage\",{FieldError:function(e){a=e},Field:function(e){o=e},FieldHint:function(e){c=e},FieldLabel:function(e){u=e},FieldRow:function(e){s=e},NumberInput:function(e){d=e},TextAreaInput:function(e){m=e},FieldGroup:function(e){f=e}},0),i.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId:function(e){b=e}},1),i.link(\"react\",{default:function(e){k=e}},2),i.link(\"react-hook-form\",{Controller:function(e){v=e}},3),i.link(\"react-i18next\",{useTranslation:function(e){E=e}},4),i.link(\"../../../../hooks/useHasLicenseModule\",{useHasLicenseModule:function(e){h=e}},5),i.link(\"../hooks\",{useFieldError:function(e){g=e}},6),i.link(\"./ActionExternalServiceUrl\",{ActionExternalServiceUrl:function(e){_=e}},7),i.link(\"./ActionSender\",{ActionSender:function(e){F=e}},8);var x=function(e){var n=e.control,i=e.trigger,x=e.index,T=l(e,p),A=E().t,q=h(\"livechat-enterprise\"),S=b(),y=\"actions.\"+x+\".params.serviceTimeout\",H=b(),I=\"actions.\"+x+\".params.serviceFallbackMessage\",L=g({control:n,name:[y,I]}),M=t(L,2),U=M[0],w=M[1];return k.createElement(f,T,k.createElement(F,{disabled:!q,control:n,index:x}),k.createElement(_,{disabled:!q,control:n,trigger:i,index:x}),k.createElement(o,null,k.createElement(u,{required:!0,htmlFor:S},A(\"Timeout_in_miliseconds\")),k.createElement(s,null,k.createElement(v,{control:n,name:y,defaultValue:1e4,rules:{required:A(\"Required_field\",{field:A(\"Timeout_in_miliseconds\")}),min:{value:0,message:A(\"Timeout_in_miliseconds_cant_be_negative_number\")}},render:function(e){var n=e.field;return k.createElement(d,r({},n,{error:null==U?void 0:U.message,\"aria-invalid\":!!U,\"aria-describedby\":S+\"-hint\",\"aria-required\":!0,onFocus:function(e){return e.currentTarget.select()},disabled:!q}))}})),U&&k.createElement(a,{\"aria-live\":\"assertive\",id:S+\"-error\"},U.message),k.createElement(c,{id:S+\"-hint\"},A(\"Timeout_in_miliseconds_hint\"))),k.createElement(o,null,k.createElement(u,{htmlFor:H},A(\"Fallback_message\")),k.createElement(s,null,k.createElement(v,{control:n,name:I,defaultValue:\"\",render:function(e){var n=e.field;return k.createElement(m,r({},n,{id:H,rows:3,placeholder:A(\"Fallback_message\"),error:null==w?void 0:w.message,\"aria-invalid\":!!w,\"aria-describedby\":H+\"-hint\",\"aria-required\":!0,disabled:!q}))}})),w&&k.createElement(a,{\"aria-live\":\"assertive\",id:H+\"-error\"},w.message),k.createElement(c,{id:H+\"-hint\"},A(\"Service_fallback_message_hint\"))))}}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/triggers/actions/ExternalServiceActionForm.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { FieldError, Field, FieldHint, FieldLabel, FieldRow, NumberInput, TextAreaInput, FieldGroup } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport type { ComponentProps, FocusEvent } from 'react';\\nimport React from 'react';\\nimport type { Control, UseFormTrigger } from 'react-hook-form';\\nimport { Controller } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useHasLicenseModule } from '../../../../hooks/useHasLicenseModule';\\nimport type { TriggersPayload } from '../EditTrigger';\\nimport { useFieldError } from '../hooks';\\nimport { ActionExternalServiceUrl } from './ActionExternalServiceUrl';\\nimport { ActionSender } from './ActionSender';\\n\\ntype SendMessageActionFormType = ComponentProps<typeof Field> & {\\n\\tindex: number;\\n\\tcontrol: Control<TriggersPayload>;\\n\\ttrigger: UseFormTrigger<TriggersPayload>;\\n};\\n\\nexport const ExternalServiceActionForm = ({ control, trigger, index, ...props }: SendMessageActionFormType) => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\\n\\n\\tconst timeoutFieldId = useUniqueId();\\n\\tconst timeoutFieldName = `actions.${index}.params.serviceTimeout` as const;\\n\\tconst fallbackMessageFieldId = useUniqueId();\\n\\tconst fallbackMessageFieldName = `actions.${index}.params.serviceFallbackMessage` as const;\\n\\n\\tconst [timeoutError, fallbackMessageError] = useFieldError({ control, name: [timeoutFieldName, fallbackMessageFieldName] });\\n\\n\\treturn (\\n\\t\\t<FieldGroup {...props}>\\n\\t\\t\\t<ActionSender disabled={!hasLicense} control={control} index={index} />\\n\\n\\t\\t\\t<ActionExternalServiceUrl disabled={!hasLicense} control={control} trigger={trigger} index={index} />\\n\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<FieldLabel required htmlFor={timeoutFieldId}>\\n\\t\\t\\t\\t\\t{t('Timeout_in_miliseconds')}\\n\\t\\t\\t\\t</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\tname={timeoutFieldName}\\n\\t\\t\\t\\t\\t\\tdefaultValue={10000}\\n\\t\\t\\t\\t\\t\\trules={{\\n\\t\\t\\t\\t\\t\\t\\trequired: t('Required_field', { field: t('Timeout_in_miliseconds') }),\\n\\t\\t\\t\\t\\t\\t\\tmin: { value: 0, message: t('Timeout_in_miliseconds_cant_be_negative_number') },\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\trender={({ field }) => {\\n\\t\\t\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\t\\t\\t<NumberInput\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{...field}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\terror={timeoutError?.message}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taria-invalid={Boolean(timeoutError)}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taria-describedby={`${timeoutFieldId}-hint`}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taria-required={true}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tonFocus={(v: FocusEvent<HTMLInputElement>) => v.currentTarget.select()}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tdisabled={!hasLicense}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\n\\t\\t\\t\\t{timeoutError && (\\n\\t\\t\\t\\t\\t<FieldError aria-live='assertive' id={`${timeoutFieldId}-error`}>\\n\\t\\t\\t\\t\\t\\t{timeoutError.message}\\n\\t\\t\\t\\t\\t</FieldError>\\n\\t\\t\\t\\t)}\\n\\n\\t\\t\\t\\t<FieldHint id={`${timeoutFieldId}-hint`}>{t('Timeout_in_miliseconds_hint')}</FieldHint>\\n\\t\\t\\t</Field>\\n\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<FieldLabel htmlFor={fallbackMessageFieldId}>{t('Fallback_message')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\tname={fallbackMessageFieldName}\\n\\t\\t\\t\\t\\t\\tdefaultValue=''\\n\\t\\t\\t\\t\\t\\trender={({ field }) => (\\n\\t\\t\\t\\t\\t\\t\\t<TextAreaInput\\n\\t\\t\\t\\t\\t\\t\\t\\t{...field}\\n\\t\\t\\t\\t\\t\\t\\t\\tid={fallbackMessageFieldId}\\n\\t\\t\\t\\t\\t\\t\\t\\trows={3}\\n\\t\\t\\t\\t\\t\\t\\t\\tplaceholder={t('Fallback_message')}\\n\\t\\t\\t\\t\\t\\t\\t\\terror={fallbackMessageError?.message}\\n\\t\\t\\t\\t\\t\\t\\t\\taria-invalid={Boolean(fallbackMessageError)}\\n\\t\\t\\t\\t\\t\\t\\t\\taria-describedby={`${fallbackMessageFieldId}-hint`}\\n\\t\\t\\t\\t\\t\\t\\t\\taria-required={true}\\n\\t\\t\\t\\t\\t\\t\\t\\tdisabled={!hasLicense}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\n\\t\\t\\t\\t{fallbackMessageError && (\\n\\t\\t\\t\\t\\t<FieldError aria-live='assertive' id={`${fallbackMessageFieldId}-error`}>\\n\\t\\t\\t\\t\\t\\t{fallbackMessageError.message}\\n\\t\\t\\t\\t\\t</FieldError>\\n\\t\\t\\t\\t)}\\n\\n\\t\\t\\t\\t<FieldHint id={`${fallbackMessageFieldId}-hint`}>{t('Service_fallback_message_hint')}</FieldHint>\\n\\t\\t\\t</Field>\\n\\t\\t</FieldGroup>\\n\\t);\\n};\\n\",null],\"names\":[\"_extends\",\"_slicedToArray\",\"_objectWithoutProperties\",\"FieldError\",\"Field\",\"FieldHint\",\"FieldLabel\",\"FieldRow\",\"NumberInput\",\"TextAreaInput\",\"FieldGroup\",\"useUniqueId\",\"React\",\"Controller\",\"useTranslation\",\"useHasLicenseModule\",\"useFieldError\",\"ActionExternalServiceUrl\",\"ActionSender\",\"module\",\"link\",\"default\",\"v\",\"export\",\"ExternalServiceActionForm\",\"_ref\",\"control\",\"trigger\",\"index\",\"props\",\"_excluded\",\"t\",\"_useTranslation\",\"hasLicense\",\"timeoutFieldId\",\"timeoutFieldName\",\"fallbackMessageFieldId\",\"fallbackMessageFieldName\",\"_useFieldError\",\"name\",\"_useFieldError2\",\"timeoutError\",\"fallbackMessageError\",\"createElement\",\"disabled\",\"required\",\"htmlFor\",\"defaultValue\",\"rules\",\"field\",\"min\",\"value\",\"message\",\"render\",\"_ref2\",\"error\",\"Boolean\",\"onFocus\",\"currentTarget\",\"select\",\"id\",\"_ref3\",\"rows\",\"placeholder\"],\"mappings\":\"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\"}"}