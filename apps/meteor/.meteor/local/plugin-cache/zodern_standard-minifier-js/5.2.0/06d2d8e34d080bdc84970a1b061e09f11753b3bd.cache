{"code":"function module(e,n,t){t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){i=e}},0),t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){r=e}},1),t.link(\"@babel/runtime/regenerator\",{default:function(e){o=e}},2),t.export({createComposerAPI:function(){return a}}),t.link(\"@rocket.chat/emitter\",{Emitter:function(e){u=e}},0),t.link(\"meteor/accounts-base\",{Accounts:function(e){c=e}},1),t.link(\"../../../../lib/utils/highOrderFunctions\",{withDebouncing:function(e){s=e}},2),t.link(\"./messageBoxFormatting\",{formattingButtons:function(e){l=e}},3);var i,r,o,u,c,s,l,a=function(e,n){var t,a,d,f,g,v,m=function(e,n){var t=new Event(n,{bubbles:!0}),i=e._valueTracker;i&&i.setValue(new Date().toString()),e.dispatchEvent(t)},h=new u,p=[],b=s({wait:300})(function(){if(e.value){c.storageLocation.setItem(n,e.value);return}c.storageLocation.removeItem(n)}),x=function(){h.emit(\"quotedMessagesUpdate\")};e.addEventListener(\"input\",b);var S=function(n){var t,i,r,o,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=u.selection,s=u.skipFocus;s||k();var l=e.selectionStart,a=e.selectionEnd,d=e.value;\"function\"==typeof c&&(c=c({start:l,end:a})),c&&(!(null!==(t=(i=document).execCommand)&&void 0!==t&&t.call(i,\"insertText\",!1,n))&&(e.value=d.substring(0,l)+n+d.substring(l),s||k()),e.setSelectionRange(null!==(r=c.start)&&void 0!==r?r:0,null!==(o=c.end)&&void 0!==o?o:n.length)),c||(e.value=n),m(e,\"input\"),m(e,\"change\"),s||k()},E=function(e){S(e,{selection:function(n){var t=n.start,i=n.end;return{start:t+e.length,end:i+e.length}}})},k=function(){e.focus()},T=(t=!1,[{get:function(){return t},subscribe:function(e){return h.on(\"editing\",e)}},function(e){t=e,h.emit(\"editing\")}]),w=i(T,2),y=w[0],M=w[1],C=(a=!1,[{get:function(){return a},subscribe:function(e){return h.on(\"recording\",e)}},function(e){a=e,h.emit(\"recording\")}]),D=i(C,2),L=D[0],P=D[1],A=(d=!1,[{get:function(){return d},subscribe:function(e){return h.on(\"recordingVideo\",e)}},function(e){d=e,h.emit(\"recordingVideo\")}]),I=i(A,2),V=I[0],q=I[1],F=(f=!1,[{get:function(){return f},subscribe:function(e){return h.on(\"mircophoneDenied\",e)}},function(e){f=e,h.emit(\"mircophoneDenied\")}]),O=i(F,2),R=O[0],_=O[1],B=(g=[],[{get:function(){return g},subscribe:function(e){return h.on(\"formatting\",e)}},Tracker.autorun(function(){g=l.filter(function(e){var n=e.condition;return!n||n()}),h.emit(\"formatting\")})]),Q=i(B,2),U=Q[0],N=Q[1];return S(null!==(v=c.storageLocation.getItem(n))&&void 0!==v?v:\"\",{skipFocus:!0}),{replaceText:function(n,t){var i,r,o,u,c=e.selectionStart,s=e.selectionEnd;e.setSelectionRange(null!==(i=t.start)&&void 0!==i?i:0,null!==(r=t.end)&&void 0!==r?r:n.length);var l=e.value;null!==(o=(u=document).execCommand)&&void 0!==o&&o.call(u,\"insertText\",!1,n)||(e.value=l.substring(0,t.start)+n+l.substring(t.end)),e.selectionStart=c+n.length,e.selectionEnd=c+n.length,c!==s&&(e.selectionStart=c),m(e,\"input\"),m(e,\"change\"),k()},insertNewLine:function(){return E(\"\\n\")},blur:function(){return e.blur()},substring:function(n,t){return e.value.substring(n,t)},getCursorPosition:function(){return e.selectionStart},setCursorToEnd:function(){e.selectionEnd=e.value.length,e.selectionStart=e.selectionEnd,k()},setCursorToStart:function(){e.selectionStart=0,e.selectionEnd=e.selectionStart,k()},release:function(){e.removeEventListener(\"input\",b),N.stop()},wrapSelection:function(n){var t=e.selectionEnd,i=void 0===t?e.value.length:t,o=e.selectionStart,u=void 0===o?0:o,c=e.value.slice(0,u),s=e.value.slice(u,i),l=e.value.slice(i,e.value.length);k();var a=n.slice(0,n.indexOf(\"{{text}}\"));if(r(a).reverse().every(function(n,t){return e.value.slice(u-t-1,1)===n})){var d,f,g,v,h=n.slice(n.indexOf(\"{{text}}\")+8);if(r(h).every(function(n,t){return e.value.slice(i+t,1)===n})){E(s),e.selectionStart=u-a.length,e.selectionEnd=i+h.length,null!==(g=(v=document).execCommand)&&void 0!==g&&g.call(v,\"insertText\",!1,s)||(e.value=c.slice(0,c.length-a.length)+s+l.slice(h.length)),e.selectionStart=u-a.length,e.selectionEnd=e.selectionStart+s.length,m(e,\"input\"),m(e,\"change\"),k();return}}null!==(d=(f=document).execCommand)&&void 0!==d&&d.call(f,\"insertText\",!1,n.replace(\"{{text}}\",s))||(e.value=c+n.replace(\"{{text}}\",s)+l),e.selectionStart=u+n.indexOf(\"{{text}}\"),e.selectionEnd=e.selectionStart+s.length,m(e,\"input\"),m(e,\"change\"),k()},get text(){return e.value},get selection(){return{start:e.selectionStart,end:e.selectionEnd}},editing:y,setEditingMode:function(e){M(e)},recording:L,setRecordingMode:P,recordingVideo:V,setRecordingVideo:q,insertText:E,setText:S,clear:function(){S(\"\")},focus:k,replyWith:function(n){return o.async(function(t){for(;;)switch(t.prev=t.next){case 0:e&&(e.value=n,e.focus());case 1:case\"end\":return t.stop()}},null,null,null,Promise)},quoteMessage:function(n){return o.async(function(t){for(;;)switch(t.prev=t.next){case 0:p=[].concat(r(p.filter(function(e){return e._id!==n._id})),[n]),x(),e.focus();case 3:case\"end\":return t.stop()}},null,null,null,Promise)},dismissQuotedMessage:function(e){return o.async(function(n){for(;;)switch(n.prev=n.next){case 0:p=p.filter(function(n){return n._id!==e}),x();case 2:case\"end\":return n.stop()}},null,null,null,Promise)},dismissAllQuotedMessages:function(){return o.async(function(e){for(;;)switch(e.prev=e.next){case 0:p=[],x();case 2:case\"end\":return e.stop()}},null,null,null,Promise)},quotedMessages:{get:function(){return p},subscribe:function(e){return h.on(\"quotedMessagesUpdate\",e)}},formatters:U,isMicrophoneDenied:R,setIsMicrophoneDenied:_}}}","map":"{\"version\":3,\"sources\":[\"app/ui-message/client/messageBox/createComposerAPI.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { Emitter } from '@rocket.chat/emitter';\\nimport { Accounts } from 'meteor/accounts-base';\\n\\nimport type { ComposerAPI } from '../../../../client/lib/chats/ChatAPI';\\nimport { withDebouncing } from '../../../../lib/utils/highOrderFunctions';\\nimport type { FormattingButton } from './messageBoxFormatting';\\nimport { formattingButtons } from './messageBoxFormatting';\\n\\nexport const createComposerAPI = (input: HTMLTextAreaElement, storageID: string): ComposerAPI => {\\n\\tconst triggerEvent = (input: HTMLTextAreaElement, evt: string): void => {\\n\\t\\tconst event = new Event(evt, { bubbles: true });\\n\\t\\t// TODO: Remove this hack for react to trigger onChange\\n\\t\\tconst tracker = (input as any)._valueTracker;\\n\\t\\tif (tracker) {\\n\\t\\t\\ttracker.setValue(new Date().toString());\\n\\t\\t}\\n\\t\\tinput.dispatchEvent(event);\\n\\t};\\n\\n\\tconst emitter = new Emitter<{\\n\\t\\tquotedMessagesUpdate: void;\\n\\t\\tediting: void;\\n\\t\\trecording: void;\\n\\t\\trecordingVideo: void;\\n\\t\\tformatting: void;\\n\\t\\tmircophoneDenied: void;\\n\\t}>();\\n\\n\\tlet _quotedMessages: IMessage[] = [];\\n\\n\\tconst persist = withDebouncing({ wait: 300 })(() => {\\n\\t\\tif (input.value) {\\n\\t\\t\\tAccounts.storageLocation.setItem(storageID, input.value);\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tAccounts.storageLocation.removeItem(storageID);\\n\\t});\\n\\n\\tconst notifyQuotedMessagesUpdate = (): void => {\\n\\t\\temitter.emit('quotedMessagesUpdate');\\n\\t};\\n\\n\\tinput.addEventListener('input', persist);\\n\\n\\tconst setText = (\\n\\t\\ttext: string,\\n\\t\\t{\\n\\t\\t\\tselection,\\n\\t\\t\\tskipFocus,\\n\\t\\t}: {\\n\\t\\t\\tselection?:\\n\\t\\t\\t\\t| { readonly start?: number; readonly end?: number }\\n\\t\\t\\t\\t| ((previous: { readonly start: number; readonly end: number }) => { readonly start?: number; readonly end?: number });\\n\\t\\t\\tskipFocus?: boolean;\\n\\t\\t} = {},\\n\\t): void => {\\n\\t\\t!skipFocus && focus();\\n\\n\\t\\tconst { selectionStart, selectionEnd } = input;\\n\\t\\tconst textAreaTxt = input.value;\\n\\n\\t\\tif (typeof selection === 'function') {\\n\\t\\t\\tselection = selection({ start: selectionStart, end: selectionEnd });\\n\\t\\t}\\n\\n\\t\\tif (selection) {\\n\\t\\t\\tif (!document.execCommand?.('insertText', false, text)) {\\n\\t\\t\\t\\tinput.value = textAreaTxt.substring(0, selectionStart) + text + textAreaTxt.substring(selectionStart);\\n\\t\\t\\t\\t!skipFocus && focus();\\n\\t\\t\\t}\\n\\t\\t\\tinput.setSelectionRange(selection.start ?? 0, selection.end ?? text.length);\\n\\t\\t}\\n\\n\\t\\tif (!selection) {\\n\\t\\t\\tinput.value = text;\\n\\t\\t}\\n\\n\\t\\ttriggerEvent(input, 'input');\\n\\t\\ttriggerEvent(input, 'change');\\n\\n\\t\\t!skipFocus && focus();\\n\\t};\\n\\n\\tconst insertText = (text: string): void => {\\n\\t\\tsetText(text, {\\n\\t\\t\\tselection: ({ start, end }) => ({\\n\\t\\t\\t\\tstart: start + text.length,\\n\\t\\t\\t\\tend: end + text.length,\\n\\t\\t\\t}),\\n\\t\\t});\\n\\t};\\n\\n\\tconst clear = (): void => {\\n\\t\\tsetText('');\\n\\t};\\n\\n\\tconst focus = (): void => {\\n\\t\\tinput.focus();\\n\\t};\\n\\n\\tconst replyWith = async (text: string): Promise<void> => {\\n\\t\\tif (input) {\\n\\t\\t\\tinput.value = text;\\n\\t\\t\\tinput.focus();\\n\\t\\t}\\n\\t};\\n\\n\\tconst quoteMessage = async (message: IMessage): Promise<void> => {\\n\\t\\t_quotedMessages = [..._quotedMessages.filter((_message) => _message._id !== message._id), message];\\n\\t\\tnotifyQuotedMessagesUpdate();\\n\\t\\tinput.focus();\\n\\t};\\n\\n\\tconst dismissQuotedMessage = async (mid: IMessage['_id']): Promise<void> => {\\n\\t\\t_quotedMessages = _quotedMessages.filter((message) => message._id !== mid);\\n\\t\\tnotifyQuotedMessagesUpdate();\\n\\t};\\n\\n\\tconst dismissAllQuotedMessages = async (): Promise<void> => {\\n\\t\\t_quotedMessages = [];\\n\\t\\tnotifyQuotedMessagesUpdate();\\n\\t};\\n\\n\\tconst quotedMessages = {\\n\\t\\tget: () => _quotedMessages,\\n\\t\\tsubscribe: (callback: () => void) => emitter.on('quotedMessagesUpdate', callback),\\n\\t};\\n\\n\\tconst [editing, setEditing] = (() => {\\n\\t\\tlet editing = false;\\n\\n\\t\\treturn [\\n\\t\\t\\t{\\n\\t\\t\\t\\tget: () => editing,\\n\\t\\t\\t\\tsubscribe: (callback: () => void) => emitter.on('editing', callback),\\n\\t\\t\\t},\\n\\t\\t\\t(value: boolean) => {\\n\\t\\t\\t\\tediting = value;\\n\\t\\t\\t\\temitter.emit('editing');\\n\\t\\t\\t},\\n\\t\\t];\\n\\t})();\\n\\n\\tconst [recording, setRecordingMode] = (() => {\\n\\t\\tlet recording = false;\\n\\n\\t\\treturn [\\n\\t\\t\\t{\\n\\t\\t\\t\\tget: () => recording,\\n\\t\\t\\t\\tsubscribe: (callback: () => void) => emitter.on('recording', callback),\\n\\t\\t\\t},\\n\\t\\t\\t(value: boolean) => {\\n\\t\\t\\t\\trecording = value;\\n\\t\\t\\t\\temitter.emit('recording');\\n\\t\\t\\t},\\n\\t\\t];\\n\\t})();\\n\\n\\tconst [recordingVideo, setRecordingVideo] = (() => {\\n\\t\\tlet recordingVideo = false;\\n\\n\\t\\treturn [\\n\\t\\t\\t{\\n\\t\\t\\t\\tget: () => recordingVideo,\\n\\t\\t\\t\\tsubscribe: (callback: () => void) => emitter.on('recordingVideo', callback),\\n\\t\\t\\t},\\n\\t\\t\\t(value: boolean) => {\\n\\t\\t\\t\\trecordingVideo = value;\\n\\t\\t\\t\\temitter.emit('recordingVideo');\\n\\t\\t\\t},\\n\\t\\t];\\n\\t})();\\n\\n\\tconst [isMicrophoneDenied, setIsMicrophoneDenied] = (() => {\\n\\t\\tlet isMicrophoneDenied = false;\\n\\n\\t\\treturn [\\n\\t\\t\\t{\\n\\t\\t\\t\\tget: () => isMicrophoneDenied,\\n\\t\\t\\t\\tsubscribe: (callback: () => void) => emitter.on('mircophoneDenied', callback),\\n\\t\\t\\t},\\n\\t\\t\\t(value: boolean) => {\\n\\t\\t\\t\\tisMicrophoneDenied = value;\\n\\t\\t\\t\\temitter.emit('mircophoneDenied');\\n\\t\\t\\t},\\n\\t\\t];\\n\\t})();\\n\\n\\tconst setEditingMode = (editing: boolean): void => {\\n\\t\\tsetEditing(editing);\\n\\t};\\n\\n\\tconst [formatters, stopFormatterTracker] = (() => {\\n\\t\\tlet actions: FormattingButton[] = [];\\n\\n\\t\\tconst c = Tracker.autorun(() => {\\n\\t\\t\\tactions = formattingButtons.filter(({ condition }) => !condition || condition());\\n\\t\\t\\temitter.emit('formatting');\\n\\t\\t});\\n\\n\\t\\treturn [\\n\\t\\t\\t{\\n\\t\\t\\t\\tget: () => actions,\\n\\t\\t\\t\\tsubscribe: (callback: () => void) => emitter.on('formatting', callback),\\n\\t\\t\\t},\\n\\t\\t\\tc,\\n\\t\\t];\\n\\t})();\\n\\n\\tconst release = (): void => {\\n\\t\\tinput.removeEventListener('input', persist);\\n\\t\\tstopFormatterTracker.stop();\\n\\t};\\n\\n\\tconst wrapSelection = (pattern: string): void => {\\n\\t\\tconst { selectionEnd = input.value.length, selectionStart = 0 } = input;\\n\\t\\tconst initText = input.value.slice(0, selectionStart);\\n\\t\\tconst selectedText = input.value.slice(selectionStart, selectionEnd);\\n\\t\\tconst finalText = input.value.slice(selectionEnd, input.value.length);\\n\\n\\t\\tfocus();\\n\\n\\t\\tconst startPattern = pattern.slice(0, pattern.indexOf('{{text}}'));\\n\\t\\tconst startPatternFound = [...startPattern].reverse().every((char, index) => input.value.slice(selectionStart - index - 1, 1) === char);\\n\\n\\t\\tif (startPatternFound) {\\n\\t\\t\\tconst endPattern = pattern.slice(pattern.indexOf('{{text}}') + '{{text}}'.length);\\n\\t\\t\\tconst endPatternFound = [...endPattern].every((char, index) => input.value.slice(selectionEnd + index, 1) === char);\\n\\n\\t\\t\\tif (endPatternFound) {\\n\\t\\t\\t\\tinsertText(selectedText);\\n\\t\\t\\t\\tinput.selectionStart = selectionStart - startPattern.length;\\n\\t\\t\\t\\tinput.selectionEnd = selectionEnd + endPattern.length;\\n\\n\\t\\t\\t\\tif (!document.execCommand?.('insertText', false, selectedText)) {\\n\\t\\t\\t\\t\\tinput.value = initText.slice(0, initText.length - startPattern.length) + selectedText + finalText.slice(endPattern.length);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tinput.selectionStart = selectionStart - startPattern.length;\\n\\t\\t\\t\\tinput.selectionEnd = input.selectionStart + selectedText.length;\\n\\t\\t\\t\\ttriggerEvent(input, 'input');\\n\\t\\t\\t\\ttriggerEvent(input, 'change');\\n\\n\\t\\t\\t\\tfocus();\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tif (!document.execCommand?.('insertText', false, pattern.replace('{{text}}', selectedText))) {\\n\\t\\t\\tinput.value = initText + pattern.replace('{{text}}', selectedText) + finalText;\\n\\t\\t}\\n\\n\\t\\tinput.selectionStart = selectionStart + pattern.indexOf('{{text}}');\\n\\t\\tinput.selectionEnd = input.selectionStart + selectedText.length;\\n\\t\\ttriggerEvent(input, 'input');\\n\\t\\ttriggerEvent(input, 'change');\\n\\n\\t\\tfocus();\\n\\t};\\n\\n\\tconst insertNewLine = (): void => insertText('\\\\n');\\n\\n\\tsetText(Accounts.storageLocation.getItem(storageID) ?? '', {\\n\\t\\tskipFocus: true,\\n\\t});\\n\\n\\t// Gets the text that is connected to the cursor and replaces it with the given text\\n\\tconst replaceText = (text: string, selection: { readonly start: number; readonly end: number }): void => {\\n\\t\\tconst { selectionStart, selectionEnd } = input;\\n\\n\\t\\t// Selects the text that is connected to the cursor\\n\\t\\tinput.setSelectionRange(selection.start ?? 0, selection.end ?? text.length);\\n\\t\\tconst textAreaTxt = input.value;\\n\\n\\t\\tif (!document.execCommand?.('insertText', false, text)) {\\n\\t\\t\\tinput.value = textAreaTxt.substring(0, selection.start) + text + textAreaTxt.substring(selection.end);\\n\\t\\t}\\n\\n\\t\\tinput.selectionStart = selectionStart + text.length;\\n\\t\\tinput.selectionEnd = selectionStart + text.length;\\n\\t\\tif (selectionStart !== selectionEnd) {\\n\\t\\t\\tinput.selectionStart = selectionStart;\\n\\t\\t}\\n\\n\\t\\ttriggerEvent(input, 'input');\\n\\t\\ttriggerEvent(input, 'change');\\n\\n\\t\\tfocus();\\n\\t};\\n\\n\\treturn {\\n\\t\\treplaceText,\\n\\t\\tinsertNewLine,\\n\\t\\tblur: () => input.blur(),\\n\\n\\t\\tsubstring: (start: number, end?: number) => {\\n\\t\\t\\treturn input.value.substring(start, end);\\n\\t\\t},\\n\\n\\t\\tgetCursorPosition: () => {\\n\\t\\t\\treturn input.selectionStart;\\n\\t\\t},\\n\\t\\tsetCursorToEnd: () => {\\n\\t\\t\\tinput.selectionEnd = input.value.length;\\n\\t\\t\\tinput.selectionStart = input.selectionEnd;\\n\\t\\t\\tfocus();\\n\\t\\t},\\n\\t\\tsetCursorToStart: () => {\\n\\t\\t\\tinput.selectionStart = 0;\\n\\t\\t\\tinput.selectionEnd = input.selectionStart;\\n\\t\\t\\tfocus();\\n\\t\\t},\\n\\t\\trelease,\\n\\t\\twrapSelection,\\n\\t\\tget text(): string {\\n\\t\\t\\treturn input.value;\\n\\t\\t},\\n\\t\\tget selection(): { start: number; end: number } {\\n\\t\\t\\treturn {\\n\\t\\t\\t\\tstart: input.selectionStart,\\n\\t\\t\\t\\tend: input.selectionEnd,\\n\\t\\t\\t};\\n\\t\\t},\\n\\n\\t\\tediting,\\n\\t\\tsetEditingMode,\\n\\t\\trecording,\\n\\t\\tsetRecordingMode,\\n\\t\\trecordingVideo,\\n\\t\\tsetRecordingVideo,\\n\\t\\tinsertText,\\n\\t\\tsetText,\\n\\t\\tclear,\\n\\t\\tfocus,\\n\\t\\treplyWith,\\n\\t\\tquoteMessage,\\n\\t\\tdismissQuotedMessage,\\n\\t\\tdismissAllQuotedMessages,\\n\\t\\tquotedMessages,\\n\\t\\tformatters,\\n\\t\\tisMicrophoneDenied,\\n\\t\\tsetIsMicrophoneDenied,\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_slicedToArray\",\"_toConsumableArray\",\"_regeneratorRuntime\",\"export\",\"createComposerAPI\",\"Emitter\",\"Accounts\",\"withDebouncing\",\"formattingButtons\",\"input\",\"storageID\",\"editing\",\"recording\",\"recordingVideo\",\"isMicrophoneDenied\",\"actions\",\"_Accounts$storageLoca\",\"triggerEvent\",\"evt\",\"event\",\"Event\",\"bubbles\",\"tracker\",\"_valueTracker\",\"setValue\",\"Date\",\"toString\",\"dispatchEvent\",\"emitter\",\"_quotedMessages\",\"persist\",\"wait\",\"value\",\"storageLocation\",\"setItem\",\"removeItem\",\"notifyQuotedMessagesUpdate\",\"emit\",\"addEventListener\",\"setText\",\"text\",\"_document$execCommand\",\"_document\",\"_selection$start\",\"_selection$end\",\"_ref\",\"arguments\",\"length\",\"undefined\",\"selection\",\"skipFocus\",\"focus\",\"selectionStart\",\"selectionEnd\",\"textAreaTxt\",\"start\",\"end\",\"document\",\"execCommand\",\"call\",\"substring\",\"setSelectionRange\",\"insertText\",\"_ref2\",\"_ref3\",\"get\",\"subscribe\",\"callback\",\"on\",\"_ref4\",\"setEditing\",\"_ref5\",\"_ref6\",\"setRecordingMode\",\"_ref7\",\"_ref8\",\"setRecordingVideo\",\"_ref9\",\"_ref10\",\"setIsMicrophoneDenied\",\"_ref11\",\"Tracker\",\"autorun\",\"filter\",\"_ref13\",\"condition\",\"_ref12\",\"formatters\",\"stopFormatterTracker\",\"getItem\",\"replaceText\",\"_selection$start2\",\"_selection$end2\",\"_document$execCommand4\",\"_document4\",\"insertNewLine\",\"blur\",\"getCursorPosition\",\"setCursorToEnd\",\"setCursorToStart\",\"release\",\"removeEventListener\",\"stop\",\"wrapSelection\",\"pattern\",\"_input$selectionEnd\",\"_input$selectionStart\",\"initText\",\"slice\",\"selectedText\",\"finalText\",\"startPattern\",\"indexOf\",\"reverse\",\"every\",\"char\",\"index\",\"_document$execCommand3\",\"_document3\",\"_document$execCommand2\",\"_document2\",\"endPattern\",\"replace\",\"setEditingMode\",\"clear\",\"replyWith\",\"async\",\"_context\",\"prev\",\"next\",\"Promise\",\"quoteMessage\",\"message\",\"_context2\",\"concat\",\"_message\",\"_id\",\"dismissQuotedMessage\",\"mid\",\"_context3\",\"dismissAllQuotedMessages\",\"_context4\",\"quotedMessages\"],\"mappings\":\"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\"}"}