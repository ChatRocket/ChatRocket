{"code":"function module(e,n,t){var o,r,a,c,u,s,i,l,f,m,d,_,p,k,b,T,h,y,x;t.link(\"@babel/runtime/helpers/extends\",{default:function(e){o=e}},0),t.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},1),t.link(\"@rocket.chat/fuselage\",{Box:function(e){a=e},TextInput:function(e){c=e},Button:function(e){u=e},Margins:function(e){s=e},Select:function(e){i=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useSetModal:function(e){l=e},useToastMessageDispatch:function(e){f=e},useUserId:function(e){m=e},useMethod:function(e){d=e}},1),t.link(\"react\",{default:function(e){_=e},useCallback:function(e){p=e},useMemo:function(e){k=e},useEffect:function(e){b=e}},2),t.link(\"react-hook-form\",{Controller:function(e){T=e},useForm:function(e){h=e}},3),t.link(\"react-i18next\",{useTranslation:function(e){y=e}},4),t.link(\"../../../../components/GenericModal\",{default:function(e){x=e}},5),t.exportDefault(function(e){var n=e.reload,t=y().t,E=m(),A=l(),g=d(\"personalAccessTokens:generateToken\"),w=f(),F=k(function(){return{name:\"\",bypassTwoFactor:\"require\"}},[]),I=h({defaultValues:F}),P=I.register,v=I.resetField,M=I.handleSubmit,S=I.control,C=I.formState,q=C.isSubmitted,G=C.submitCount,B=k(function(){return[[\"require\",t(\"Require_Two_Factor_Authentication\")],[\"bypass\",t(\"Ignore_Two_Factor_Authentication\")]]},[t]),D=p(function(e){var n,o,c;return r.async(function(u){for(;;)switch(u.prev=u.next){case 0:return n=e.name,o=e.bypassTwoFactor,u.prev=1,u.next=4,r.awrap(g({tokenName:n,bypassTwoFactor:\"bypass\"===o}));case 4:c=u.sent,A(_.createElement(x,{title:t(\"API_Personal_Access_Token_Generated\"),onConfirm:function(){return A(null)},onClose:function(){return A(null)}},_.createElement(a,{dangerouslySetInnerHTML:{__html:t(\"API_Personal_Access_Token_Generated_Text_Token_s_UserId_s\",{token:c,userId:E})}}))),u.next=11;break;case 8:u.prev=8,u.t0=u.catch(1),w({type:\"error\",message:u.t0});case 11:case\"end\":return u.stop()}},null,null,[[1,8]],Promise)},[g,w,A,t,E]);return b(function(){v(\"name\"),n()},[q,G,n,v]),_.createElement(a,{display:\"flex\",is:\"form\",onSubmit:M(D),mb:8},_.createElement(a,{display:\"flex\",width:\"100%\"},_.createElement(s,{inlineEnd:4},_.createElement(c,o({\"data-qa\":\"PersonalTokenField\"},P(\"name\"),{placeholder:t(\"API_Add_Personal_Access_Token\")})),_.createElement(a,null,_.createElement(T,{name:\"bypassTwoFactor\",control:S,render:function(e){var n=e.field;return _.createElement(i,o({},n,{options:B}))}})))),_.createElement(u,{primary:!0,type:\"submit\"},t(\"Add\")))})}","map":"{\"version\":3,\"sources\":[\"client/views/account/tokens/AccountTokensTable/AddToken.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { SelectOption } from '@rocket.chat/fuselage';\\nimport { Box, TextInput, Button, Margins, Select } from '@rocket.chat/fuselage';\\nimport { useSetModal, useToastMessageDispatch, useUserId, useMethod } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback, useMemo, useEffect } from 'react';\\nimport { Controller, useForm } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport GenericModal from '../../../../components/GenericModal';\\n\\nconst AddToken = ({ reload }: { reload: () => void }): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst userId = useUserId();\\n\\tconst setModal = useSetModal();\\n\\tconst createTokenFn = useMethod('personalAccessTokens:generateToken');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst initialValues = useMemo(() => ({ name: '', bypassTwoFactor: 'require' }), []);\\n\\n\\tconst {\\n\\t\\tregister,\\n\\t\\tresetField,\\n\\t\\thandleSubmit,\\n\\t\\tcontrol,\\n\\t\\tformState: { isSubmitted, submitCount },\\n\\t} = useForm({ defaultValues: initialValues });\\n\\n\\tconst twoFactorAuthOptions: SelectOption[] = useMemo(\\n\\t\\t() => [\\n\\t\\t\\t['require', t('Require_Two_Factor_Authentication')],\\n\\t\\t\\t['bypass', t('Ignore_Two_Factor_Authentication')],\\n\\t\\t],\\n\\t\\t[t],\\n\\t);\\n\\n\\tconst handleAddToken = useCallback(\\n\\t\\tasync ({ name: tokenName, bypassTwoFactor }) => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst token = await createTokenFn({ tokenName, bypassTwoFactor: bypassTwoFactor === 'bypass' });\\n\\n\\t\\t\\t\\tsetModal(\\n\\t\\t\\t\\t\\t<GenericModal title={t('API_Personal_Access_Token_Generated')} onConfirm={() => setModal(null)} onClose={() => setModal(null)}>\\n\\t\\t\\t\\t\\t\\t<Box\\n\\t\\t\\t\\t\\t\\t\\tdangerouslySetInnerHTML={{\\n\\t\\t\\t\\t\\t\\t\\t\\t__html: t('API_Personal_Access_Token_Generated_Text_Token_s_UserId_s', {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttoken,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tuserId,\\n\\t\\t\\t\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</GenericModal>,\\n\\t\\t\\t\\t);\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[createTokenFn, dispatchToastMessage, setModal, t, userId],\\n\\t);\\n\\n\\tuseEffect(() => {\\n\\t\\tresetField('name');\\n\\t\\treload();\\n\\t}, [isSubmitted, submitCount, reload, resetField]);\\n\\n\\treturn (\\n\\t\\t<Box display='flex' is='form' onSubmit={handleSubmit(handleAddToken)} mb={8}>\\n\\t\\t\\t<Box display='flex' width='100%'>\\n\\t\\t\\t\\t<Margins inlineEnd={4}>\\n\\t\\t\\t\\t\\t<TextInput data-qa='PersonalTokenField' {...register('name')} placeholder={t('API_Add_Personal_Access_Token')} />\\n\\t\\t\\t\\t\\t<Box>\\n\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\tname='bypassTwoFactor'\\n\\t\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\t\\trender={({ field }) => <Select {...field} options={twoFactorAuthOptions} />}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t</Margins>\\n\\t\\t\\t</Box>\\n\\t\\t\\t<Button primary type='submit'>\\n\\t\\t\\t\\t{t('Add')}\\n\\t\\t\\t</Button>\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default AddToken;\\n\",null],\"names\":[\"_extends\",\"_regeneratorRuntime\",\"Box\",\"TextInput\",\"Button\",\"Margins\",\"Select\",\"useSetModal\",\"useToastMessageDispatch\",\"useUserId\",\"useMethod\",\"React\",\"useCallback\",\"useMemo\",\"useEffect\",\"Controller\",\"useForm\",\"useTranslation\",\"GenericModal\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"reload\",\"t\",\"_useTranslation\",\"userId\",\"setModal\",\"createTokenFn\",\"dispatchToastMessage\",\"initialValues\",\"name\",\"bypassTwoFactor\",\"_useForm\",\"defaultValues\",\"register\",\"resetField\",\"handleSubmit\",\"control\",\"_useForm$formState\",\"formState\",\"isSubmitted\",\"submitCount\",\"twoFactorAuthOptions\",\"handleAddToken\",\"_ref2\",\"tokenName\",\"token\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"sent\",\"createElement\",\"title\",\"onConfirm\",\"onClose\",\"dangerouslySetInnerHTML\",\"__html\",\"t0\",\"type\",\"message\",\"stop\",\"Promise\",\"display\",\"is\",\"onSubmit\",\"mb\",\"width\",\"inlineEnd\",\"placeholder\",\"render\",\"_ref3\",\"field\",\"options\",\"primary\"],\"mappings\":\"uBAUA,IATAA,EAAgFC,EAAhFC,EAAOC,EAAOC,EAAWC,EAAQC,EAA+CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAApEC,EAAEC,IAAS,CAAE,iCAA+B,CAAAC,QAAA,SAAAC,CAAA,EAAuBtB,EAACsB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAAC,QAAA,SAAAC,CAAA,EAAArB,EAAAqB,CAAA,CAAA,EAAA,GAAxCH,EAAEC,IAAQ,CAAA,wBAAM,CAAAlB,IAAwB,SAAAoB,CAAA,EAAApB,EAAAoB,CAAA,EAAAnB,UAAA,SAAAmB,CAAA,EAAAnB,EAAAmB,CAAA,EAAAlB,OAAA,SAAAkB,CAAA,EAAAlB,EAAAkB,CAAA,EAAAjB,QAAA,SAAAiB,CAAA,EAAAjB,EAAAiB,CAAA,EAAAhB,OAAA,SAAAgB,CAAA,EAAAhB,EAAAgB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAb,YAAA,SAAAe,CAAA,EAAAf,EAAAe,CAAA,EAAAd,wBAAA,SAAAc,CAAA,EAAAd,EAAAc,CAAA,EAAAb,UAAA,SAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,UAAA,SAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAX,EAAAW,CAAA,EAAAV,YAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,QAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,UAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kBAAA,CAAAL,WAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,QAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAH,eAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sCAAA,CAAA,QAAA,SAAAE,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAhFH,EAAOI,aAAO,CASG,SAAAC,CAAA,EAAqD,IAAlDC,EAAMD,EAANC,MAAM,CACjBC,EAACC,AAAKV,IAANS,CAAC,CACHE,EAASnB,IACToB,EAAWtB,IACXuB,EAAgBpB,EAAU,sCAC1BqB,EAAuBvB,IAEvBwB,EAAgBnB,EAAQ,WAAA,MAAO,CAAEoB,KAAM,GAAIC,gBAAiB,SAAS,CAAE,EAAG,EAAE,EAElFC,EAMInB,EAAQ,CAAEoB,cAAeJ,CAAa,GALzCK,EAAQF,EAARE,QAAQ,CACRC,EAAUH,EAAVG,UAAU,CACVC,EAAYJ,EAAZI,YAAY,CACZC,EAAOL,EAAPK,OAAO,CAAAC,EAAAN,EACPO,SAAS,CAAIC,EAAWF,EAAXE,WAAW,CAAEC,EAAWH,EAAXG,WAAW,CAGhCC,EAAuChC,EAC5C,WAAA,MAAM,CACL,CAAC,UAAWa,EAAE,qCAAqC,CACnD,CAAC,SAAUA,EAAE,oCAAoC,CACjD,EACD,CAACA,EAAE,EAGEoB,EAAiBlC,EACtB,SAAAmC,CAAA,EAAA,IAAAC,EAAAd,EAAAe,EAAA,OAAAhD,EAAAiD,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAyC,OAA1BL,EAASD,EAAfd,IAAI,CAAaC,EAAea,EAAfb,eAAe,CAAAiB,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAApD,EAAAqD,KAAA,CAEnBxB,EAAc,CAAEkB,UAAAA,EAAWd,gBAAiBA,AAAoB,WAApBA,CAA4B,GAAG,MAAA,EAAzFe,EAAKE,EAAAI,IAAA,CAEX1B,EACClB,EAAA6C,aAAA,CAACtC,EAAY,CAACuC,MAAO/B,EAAE,uCAAwCgC,UAAW,WAAA,OAAM7B,EAAS,KAAK,EAAE8B,QAAS,WAAA,OAAM9B,EAAS,KAAK,CAAC,EAC7HlB,EAAA6C,aAAA,CAACtD,EAAG,CACH0D,wBAAyB,CACxBC,OAAQnC,EAAE,4DAA6D,CACtEuB,MAAAA,EACArB,OAAAA,IAEA,KAGHuB,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,EAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAW,EAAA,CAAAX,EAAA,KAAA,CAAA,GAEFpB,EAAqB,CAAEgC,KAAM,QAASC,QAAOb,EAAAW,EAAAA,AAAO,EAAI,MAAA,GAAA,IAAA,MAAA,OAAAX,EAAAc,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAAAC,QAAA,EAG1D,CAACpC,EAAeC,EAAsBF,EAAUH,EAAGE,EAAO,EAQ3D,OALAd,EAAU,WACTwB,EAAW,QACXb,GACD,EAAG,CAACkB,EAAaC,EAAanB,EAAQa,EAAW,EAGhD3B,EAAA6C,aAAA,CAACtD,EAAG,CAACiE,QAAQ,OAAOC,GAAG,OAAOC,SAAU9B,EAAaO,GAAiBwB,GAAI,CAAE,EAC3E3D,EAAA6C,aAAA,CAACtD,EAAG,CAACiE,QAAQ,OAAOI,MAAM,MAAM,EAC/B5D,EAAA6C,aAAA,CAACnD,EAAO,CAACmE,UAAW,CAAE,EACrB7D,EAAA6C,aAAA,CAACrD,EAASH,EAAA,CAAC,UAAQ,oBAAoB,EAAKqC,EAAS,QAAO,CAAEoC,YAAa/C,EAAE,gCAAiC,IAC9Gf,EAAA6C,aAAA,CAACtD,EAAG,KACHS,EAAA6C,aAAA,CAACzC,EAAU,CACVkB,KAAK,kBACLO,QAASA,EACTkC,OAAQ,SAAAC,CAAA,EAAA,IAAGC,EAAKD,EAALC,KAAK,CAAA,OAAOjE,EAAA6C,aAAA,CAAClD,EAAMN,EAAA,CAAA,EAAK4E,EAAK,CAAEC,QAAShC,CAAqB,GAAG,CAAC,MAKhFlC,EAAA6C,aAAA,CAACpD,EAAM,CAAC0E,QAAO,CAAA,EAACf,KAAK,QAAQ,EAC3BrC,EAAE,QAIP\"}"}