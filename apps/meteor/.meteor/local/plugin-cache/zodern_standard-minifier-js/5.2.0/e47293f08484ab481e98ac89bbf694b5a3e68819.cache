{"code":"function module(e,n,o){let i,t,a,s,u,l,r,m;function c(e,n){let o=t(),c=u(),d=s(),f=a(\"notify-user\"),{t:h}=r(),{navigateHome:k}=m();l(()=>{if(n)return f(\"\".concat(n,\"/subscriptions-changed\"),(n,t)=>{if(\"removed\"===n&&t.rid===e._id){if(c.invalidateQueries([\"rooms\",e._id]),i({t:e.t})){k();return}d({type:\"info\",message:h(\"You_have_been_removed_from__roomName_\",{roomName:(null==e?void 0:e.fname)||(null==e?void 0:e.name)||\"\"})}),o.navigate(\"/home\")}})},[n,o,f,e._id,e.t,null==e?void 0:e.fname,null==e?void 0:e.name,h,d,c,k])}o.export({useGoToHomeOnRemoved:()=>c}),o.link(\"@rocket.chat/core-typings\",{isOmnichannelRoom(e){i=e}},0),o.link(\"@rocket.chat/ui-contexts\",{useRouter(e){t=e},useStream(e){a=e},useToastMessageDispatch(e){s=e}},1),o.link(\"@tanstack/react-query\",{useQueryClient(e){u=e}},2),o.link(\"react\",{useEffect(e){l=e}},3),o.link(\"react-i18next\",{useTranslation(e){r=e}},4),o.link(\"../../../../hooks/omnichannel/useOmnichannelCloseRoute\",{useOmnichannelCloseRoute(e){m=e}},5)}","map":"{\"version\":3,\"sources\":[\"client/views/room/body/hooks/useGoToHomeOnRemoved.ts\",\"<anon>\"],\"sourcesContent\":[\"import { isOmnichannelRoom, type IRoom } from '@rocket.chat/core-typings';\\nimport { useRouter, useStream, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport { useQueryClient } from '@tanstack/react-query';\\nimport { useEffect } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useOmnichannelCloseRoute } from '../../../../hooks/omnichannel/useOmnichannelCloseRoute';\\n\\nexport function useGoToHomeOnRemoved(room: IRoom, userId?: string): void {\\n\\tconst router = useRouter();\\n\\tconst queryClient = useQueryClient();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst subscribeToNotifyUser = useStream('notify-user');\\n\\tconst { t } = useTranslation();\\n\\tconst { navigateHome } = useOmnichannelCloseRoute();\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!userId) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\treturn subscribeToNotifyUser(`${userId}/subscriptions-changed`, (event, subscription) => {\\n\\t\\t\\tif (event === 'removed' && subscription.rid === room._id) {\\n\\t\\t\\t\\tqueryClient.invalidateQueries(['rooms', room._id]);\\n\\n\\t\\t\\t\\tif (isOmnichannelRoom({ t: room.t })) {\\n\\t\\t\\t\\t\\tnavigateHome();\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\ttype: 'info',\\n\\t\\t\\t\\t\\tmessage: t('You_have_been_removed_from__roomName_', {\\n\\t\\t\\t\\t\\t\\troomName: room?.fname || room?.name || '',\\n\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\trouter.navigate('/home');\\n\\t\\t\\t}\\n\\t\\t});\\n\\t}, [\\n\\t\\tuserId,\\n\\t\\trouter,\\n\\t\\tsubscribeToNotifyUser,\\n\\t\\troom._id,\\n\\t\\troom.t,\\n\\t\\troom?.fname,\\n\\t\\troom?.name,\\n\\t\\tt,\\n\\t\\tdispatchToastMessage,\\n\\t\\tqueryClient,\\n\\t\\tnavigateHome,\\n\\t]);\\n}\\n\",null],\"names\":[\"isOmnichannelRoom\",\"useRouter\",\"useStream\",\"useToastMessageDispatch\",\"useQueryClient\",\"useEffect\",\"useTranslation\",\"useOmnichannelCloseRoute\",\"useGoToHomeOnRemoved\",\"room\",\"userId\",\"router\",\"queryClient\",\"dispatchToastMessage\",\"subscribeToNotifyUser\",\"t\",\"navigateHome\",\"concat\",\"event\",\"subscription\",\"rid\",\"_id\",\"invalidateQueries\",\"type\",\"message\",\"roomName\",\"fname\",\"name\",\"navigate\",\"module\",\"export\",\"link\",\"v\"],\"mappings\":\"2BAA0EA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAQpE,SAAUC,EAAqBC,CAAW,CAAEC,CAAe,EAChE,IAAMC,EAASV,IACTW,EAAcR,IACdS,EAAuBV,IACvBW,EAAwBZ,EAAU,eAClC,CAAEa,EAAAA,CAAAA,CAAG,CAAGT,IACR,CAAEU,aAAAA,CAAAA,CAAc,CAAGT,IAEzBF,EAAU,KACT,GAAKK,EAIL,OAAOI,EAAqB,GAAAG,MAAA,CAAIP,EAAM,0BAA0B,CAACQ,EAAOC,KACvE,GAAID,AAAU,YAAVA,GAAuBC,EAAaC,GAAG,GAAKX,EAAKY,GAAG,CAAE,CAGzD,GAFAT,EAAYU,iBAAiB,CAAC,CAAC,QAASb,EAAKY,GAAG,CAAC,EAE7CrB,EAAkB,CAAEe,EAAGN,EAAKM,CAAAA,AAAC,GAAK,CACrCC,IACA,MACD,CAEAH,EAAqB,CACpBU,KAAM,OACNC,QAAST,EAAE,wCAAyC,CACnDU,SAAU,AAAAhB,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMiB,KAAK,AAALA,GAASjB,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMkB,IAAI,AAAJA,GAAQ,OAIzChB,EAAOiB,QAAQ,CAAC,QACjB,CACD,EACD,EAAG,CACFlB,EACAC,EACAG,EACAL,EAAKY,GAAG,CACRZ,EAAKM,CAAC,CACNN,MAAAA,EAAI,KAAA,EAAJA,EAAMiB,KAAK,CACXjB,MAAAA,EAAI,KAAA,EAAJA,EAAMkB,IAAI,CACVZ,EACAF,EACAD,EACAI,EACA,CACF,CArDAa,EAAOC,MAAE,CAAA,CAAAtB,qBAAqCA,IAAAA,CAAA,GAA4BqB,EAAAE,IAAA,CAAA,4BAAA,CAAA/B,kBAAAgC,CAAA,EAAAhC,EAAAgC,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,2BAAA,CAAA9B,UAAA+B,CAAA,EAAA/B,EAAA+B,CAAA,EAAA9B,UAAA8B,CAAA,EAAA9B,EAAA8B,CAAA,EAAA7B,wBAAA6B,CAAA,EAAA7B,EAAA6B,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,wBAAA,CAAA3B,eAAA4B,CAAA,EAAA5B,EAAA4B,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,QAAA,CAAA1B,UAAA2B,CAAA,EAAA3B,EAAA2B,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,gBAAA,CAAAzB,eAAA0B,CAAA,EAAA1B,EAAA0B,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,yDAAA,CAAAxB,yBAAAyB,CAAA,EAAAzB,EAAAyB,CAAA,CAAA,EAAA\"}"}