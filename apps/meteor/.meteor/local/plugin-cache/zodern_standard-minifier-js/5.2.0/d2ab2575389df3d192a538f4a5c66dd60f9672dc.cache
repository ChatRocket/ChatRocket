{"code":"function module(e,r,i){i.export({LoginForm:function(){return U}},!0),i.link(\"react/jsx-runtime\",{jsx:function(e){n=e},jsxs:function(e){o=e},Fragment:function(e){t=e}},0),i.link(\"@rocket.chat/fuselage\",{FieldGroup:function(e){a=e},TextInput:function(e){l=e},Field:function(e){s=e},FieldLabel:function(e){c=e},FieldRow:function(e){d=e},FieldError:function(e){u=e},FieldLink:function(e){g=e},PasswordInput:function(e){m=e},ButtonGroup:function(e){f=e},Button:function(e){p=e},Callout:function(e){h=e}},1),i.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId:function(e){v=e}},2),i.link(\"@rocket.chat/layout\",{Form:function(e){k=e},ActionLink:function(e){w=e}},3),i.link(\"@rocket.chat/ui-client\",{useDocumentTitle:function(e){y=e}},4),i.link(\"@rocket.chat/ui-contexts\",{useLoginWithPassword:function(e){b=e},useSetting:function(e){F=e}},5),i.link(\"@tanstack/react-query\",{useMutation:function(e){E=e}},6),i.link(\"react\",{useEffect:function(e){O=e},useRef:function(e){L=e},useState:function(e){x=e}},7),i.link(\"react-hook-form\",{useForm:function(e){T=e}},8),i.link(\"react-i18next\",{Trans:function(e){q=e},useTranslation:function(e){A=e}},9),i.link(\"./EmailConfirmationForm\",{default:function(e){C=e}},10),i.link(\"./LoginServices\",{default:function(e){P=e}},11);var n,o,t,a,l,s,c,d,u,g,m,f,p,h,v,k,w,y,b,F,E,O,L,x,T,q,A,C,P,S=this&&this.__awaiter||function(e,r,i,n){return new(i||(i=Promise))(function(o,t){function a(e){try{s(n.next(e))}catch(e){t(e)}}function l(e){try{s(n.throw(e))}catch(e){t(e)}}function s(e){var r;e.done?o(e.value):((r=e.value)instanceof i?r:new i(function(e){e(r)})).then(a,l)}s((n=n.apply(e,r||[])).next())})};let _={\"error-user-is-not-activated\":{type:\"warning\",i18n:\"registration.page.registration.waitActivationWarning\"},\"error-app-user-is-not-allowed-to-login\":{type:\"danger\",i18n:\"registration.page.login.errors.AppUserNotAllowedToLogin\"},\"user-not-found\":{type:\"danger\",i18n:\"registration.page.login.errors.wrongCredentials\"},\"error-login-blocked-for-ip\":{type:\"danger\",i18n:\"registration.page.login.errors.loginBlockedForIp\"},\"error-login-blocked-for-user\":{type:\"danger\",i18n:\"registration.page.login.errors.loginBlockedForUser\"},\"error-license-user-limit-reached\":{type:\"warning\",i18n:\"registration.page.login.errors.licenseUserLimitReached\"},\"error-invalid-email\":{type:\"danger\",i18n:\"registration.page.login.errors.invalidEmail\"}},U=({setLoginRoute:e})=>{var r,i,U;let{register:j,handleSubmit:B,setError:R,clearErrors:$,getValues:I,formState:{errors:D}}=T({mode:\"onBlur\"}),{t:G}=A(),K=v(),[N,W]=x(void 0),H=F(\"Accounts_PasswordReset\"),M=b(),z=F(\"Accounts_ShowFormLogin\"),J=String(F(\"Accounts_EmailOrUsernamePlaceholder\")),Q=String(F(\"Accounts_PasswordPlaceholder\"));y(G(\"registration.component.login\"),!1);let V=E({mutationFn:e=>M(e.usernameOrEmail,e.password),onError:e=>{if([e.error,e.errorType].includes(\"error-invalid-email\")&&R(\"usernameOrEmail\",{type:\"invalid-email\",message:G(\"registration.page.login.errors.invalidEmail\")}),\"error\"in e&&403!==e.error){W([e.error,e.reason]);return}W([\"user-not-found\"])}}),X=v(),Y=v(),Z=L(null);return(O(()=>{Z.current&&Z.current.focus()},[N]),(null===(r=D.usernameOrEmail)||void 0===r?void 0:r.type)===\"invalid-email\")?n(C,{onBackToLogin:()=>$(\"usernameOrEmail\"),email:I(\"usernameOrEmail\")}):o(k,{tabIndex:-1,ref:Z,\"aria-labelledby\":K,\"aria-describedby\":\"welcomeTitle\",onSubmit:B(e=>S(void 0,void 0,void 0,function*(){return V.mutate(e)})),children:[n(k.Header,{children:n(k.Title,{id:K,children:G(\"registration.component.login\")})}),z&&o(t,{children:[o(k.Container,{children:[o(a,{disabled:V.isLoading,children:[o(s,{children:[n(c,{required:!0,htmlFor:X,children:G(\"registration.component.form.emailOrUsername\")}),n(d,{children:n(l,Object.assign({},j(\"usernameOrEmail\",{required:G(\"Required_field\",{field:G(\"registration.component.form.emailOrUsername\")})}),{placeholder:J||G(\"registration.component.form.emailPlaceholder\"),error:null===(i=D.usernameOrEmail)||void 0===i?void 0:i.message,\"aria-invalid\":D.usernameOrEmail||N?\"true\":\"false\",\"aria-describedby\":`${X}-error`,id:X}))}),D.usernameOrEmail&&n(u,{\"aria-live\":\"assertive\",id:`${X}-error`,children:D.usernameOrEmail.message})]}),o(s,{children:[n(c,{required:!0,htmlFor:Y,children:G(\"registration.component.form.password\")}),n(d,{children:n(m,Object.assign({},j(\"password\",{required:G(\"Required_field\",{field:G(\"registration.component.form.password\")})}),{placeholder:Q,error:null===(U=D.password)||void 0===U?void 0:U.message,\"aria-invalid\":D.password||N?\"true\":\"false\",\"aria-describedby\":`${Y}-error`,id:Y}))}),D.password&&n(u,{\"aria-live\":\"assertive\",id:`${Y}-error`,children:D.password.message}),H&&n(d,{justifyContent:\"end\",children:n(g,{href:\"#\",onClick:r=>{r.preventDefault(),e(\"reset-password\")},children:n(q,{i18nKey:\"registration.page.login.forgot\",children:\"Forgot your password?\"})})})]})]}),N&&n(a,{disabled:V.isLoading,children:(([e,r])=>{if(e in _){let{type:r,i18n:i}=_[e];return n(h,{id:`${X}-error`,\"aria-live\":\"assertive\",type:r,children:G(i)})}return\"totp-canceled\"===e?null:r?n(h,{id:`${X}-error`,\"aria-live\":\"assertive\",type:\"danger\",children:r}):null})(N)})]}),o(k.Footer,{children:[n(f,{children:n(p,{loading:V.isLoading,type:\"submit\",primary:!0,children:G(\"registration.component.login\")})}),n(\"p\",{children:o(q,{i18nKey:\"registration.page.login.register\",children:[\"New here? \",n(w,{onClick:()=>e(\"register\"),children:\"Create an account\"})]})})]})]}),n(P,{disabled:V.isLoading,setError:W})]})};i.exportDefault(U)}","map":"{\"version\":3,\"sources\":[\"<anon>\"],\"names\":[],\"mappings\":\"\"}"}