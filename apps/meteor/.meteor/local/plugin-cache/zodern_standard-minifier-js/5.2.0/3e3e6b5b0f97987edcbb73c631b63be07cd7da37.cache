{"code":"function module(n,o,t){t.export({useShareLocationAction:function(){return l}}),t.link(\"@rocket.chat/core-typings\",{isRoomFederated:function(n){i=n}},0),t.link(\"@rocket.chat/ui-contexts\",{useSetting:function(n){e=n},useSetModal:function(n){a=n},useTranslation:function(n){r=n}},1),t.link(\"react\",{default:function(n){c=n}},2),t.link(\"../../../../ShareLocation/ShareLocationModal\",{default:function(n){u=n}},3);var i,e,a,r,c,u,l=function(n,o){if(!n)throw Error(\"Invalid room\");var t,l=r(),d=a(),f=!0===e(\"MapView_Enabled\"),s=!!(null===(t=navigator.geolocation)||void 0===t?void 0:t.getCurrentPosition),h=e(\"MapView_GMapsAPIKey\"),k=f&&s&&h&&h.length,p=n&&k&&!i(n);return{id:\"share-location\",content:l(\"Location\"),icon:\"map-pin\",onClick:function(){return d(c.createElement(u,{rid:n._id,tmid:o,onClose:function(){return d(null)}}))},disabled:!p}}}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/messageBox/MessageBoxActionsToolbar/hooks/useShareLocationAction.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage, IRoom } from '@rocket.chat/core-typings';\\nimport { isRoomFederated } from '@rocket.chat/core-typings';\\nimport type { GenericMenuItemProps } from '@rocket.chat/ui-client';\\nimport { useSetting, useSetModal, useTranslation } from '@rocket.chat/ui-contexts';\\nimport React from 'react';\\n\\nimport ShareLocationModal from '../../../../ShareLocation/ShareLocationModal';\\n\\nexport const useShareLocationAction = (room?: IRoom, tmid?: IMessage['tmid']): GenericMenuItemProps => {\\n\\tif (!room) {\\n\\t\\tthrow new Error('Invalid room');\\n\\t}\\n\\n\\tconst t = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\n\\tconst isMapViewEnabled = useSetting('MapView_Enabled') === true;\\n\\tconst isGeolocationCurrentPositionSupported = Boolean(navigator.geolocation?.getCurrentPosition);\\n\\tconst googleMapsApiKey = useSetting('MapView_GMapsAPIKey') as string;\\n\\tconst canGetGeolocation = isMapViewEnabled && isGeolocationCurrentPositionSupported && googleMapsApiKey && googleMapsApiKey.length;\\n\\n\\tconst handleShareLocation = () => setModal(<ShareLocationModal rid={room._id} tmid={tmid} onClose={() => setModal(null)} />);\\n\\n\\tconst allowGeolocation = room && canGetGeolocation && !isRoomFederated(room);\\n\\n\\treturn {\\n\\t\\tid: 'share-location',\\n\\t\\tcontent: t('Location'),\\n\\t\\ticon: 'map-pin',\\n\\t\\tonClick: handleShareLocation,\\n\\t\\tdisabled: !allowGeolocation,\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"export\",\"useShareLocationAction\",\"link\",\"isRoomFederated\",\"v\",\"useSetting\",\"useSetModal\",\"useTranslation\",\"React\",\"ShareLocationModal\",\"room\",\"tmid\",\"Error\",\"_navigator$geolocatio\",\"t\",\"setModal\",\"isMapViewEnabled\",\"isGeolocationCurrentPositionSupported\",\"Boolean\",\"navigator\",\"geolocation\",\"getCurrentPosition\",\"googleMapsApiKey\",\"canGetGeolocation\",\"length\",\"allowGeolocation\",\"id\",\"content\",\"icon\",\"onClick\",\"createElement\",\"rid\",\"_id\",\"onClose\",\"disabled\"],\"mappings\":\"uBACAA,EAAOC,MAAE,CAAA,CAAAC,uBAAuB,WAAA,OAAAA,CAA4B,CAAA,GAAAF,EAAAG,IAAA,CAAA,4BAAA,CAAAC,gBAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,2BAAA,CAAAG,WAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,EAAAE,YAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,EAAAG,eAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,+CAAA,CAAA,QAAA,SAAAE,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAOrD,IAPqDD,EAAAE,EAAAC,EAAAC,EAAAC,EAAAC,EAO/CR,EAAyB,SAACS,CAAY,CAAEC,CAAuB,EAC3E,GAAI,CAACD,EACJ,MAAM,AAAIE,MAAM,gBAGjB,IALqGC,EAK/FC,EAAIP,IACJQ,EAAWT,IAEXU,EAAmBX,AAAkC,CAAA,IAAlCA,EAAW,mBAC9BY,EAAwCC,CAAAA,CAAO,CAAA,AAAsB,OAAtBL,CAAAA,EAACM,UAAUC,WAAW,AAAXA,GAAWP,AAAA,KAAA,IAAAA,EAAA,KAAA,EAArBA,EAAuBQ,kBAAkB,AAAlBA,EACvEC,EAAmBjB,EAAW,uBAC9BkB,EAAoBP,GAAoBC,GAAyCK,GAAoBA,EAAiBE,MAAM,CAI5HC,EAAmBf,GAAQa,GAAqB,CAACpB,EAAgBO,GAEvE,MAAO,CACNgB,GAAI,iBACJC,QAASb,EAAE,YACXc,KAAM,UACNC,QAR2B,WAAA,OAAMd,EAASP,EAAAsB,aAAA,CAACrB,EAAkB,CAACsB,IAAKrB,EAAKsB,GAAI,CAACrB,KAAMA,EAAMsB,QAAS,WAAA,OAAMlB,EAAS,KAAK,CAAC,GAAI,EAS3HmB,SAAU,CAACT,EAEb\"}"}