{"code":"function module(o,r,e){var n,i,t,u,a;e.link(\"meteor/meteor\",{Meteor:function(o){n=o}},0),e.link(\"meteor/tracker\",{Tracker:function(o){i=o}},1),e.link(\"../../app/ui-utils/client\",{LegacyRoomManager:function(o){t=o}},2),e.link(\"../lib/rooms/roomCoordinator\",{roomCoordinator:function(o){u=o}},3),e.link(\"../providers/RouterProvider\",{router:function(o){a=o}},4),n.startup(function(){var o=void 0;i.autorun(function(){var r=n.user();if(void 0===o&&(r?r.username:void 0)){o=null==r?void 0:r.username,t.closeAllRooms();var e=a.getRouteName();if(!e)return;u.getRouteNameIdentifier(e)}})})}","map":"{\"version\":3,\"sources\":[\"client/startup/reloadRoomAfterLogin.ts\",\"<anon>\"],\"sourcesContent\":[\"import { Meteor } from 'meteor/meteor';\\nimport { Tracker } from 'meteor/tracker';\\n\\nimport { LegacyRoomManager } from '../../app/ui-utils/client';\\nimport { roomCoordinator } from '../lib/rooms/roomCoordinator';\\nimport { router } from '../providers/RouterProvider';\\n\\nMeteor.startup(() => {\\n\\t// Reload rooms after login\\n\\tlet currentUsername: string | undefined = undefined;\\n\\tTracker.autorun(() => {\\n\\t\\tconst user = Meteor.user();\\n\\t\\tif (currentUsername === undefined && (user ? user.username : undefined)) {\\n\\t\\t\\tcurrentUsername = user?.username;\\n\\t\\t\\tLegacyRoomManager.closeAllRooms();\\n\\t\\t\\t// Reload only if the current route is a channel route\\n\\t\\t\\tconst routeName = router.getRouteName();\\n\\t\\t\\tif (!routeName) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tconst roomType = roomCoordinator.getRouteNameIdentifier(routeName);\\n\\t\\t\\tif (roomType) {\\n\\t\\t\\t\\trouter; // TODO: fix this\\n\\t\\t\\t\\t// router.navigate(0);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t});\\n});\\n\",null],\"names\":[\"Meteor\",\"Tracker\",\"LegacyRoomManager\",\"roomCoordinator\",\"router\",\"module\",\"link\",\"v\",\"startup\",\"currentUsername\",\"undefined\",\"autorun\",\"user\",\"username\",\"closeAllRooms\",\"routeName\",\"getRouteName\",\"getRouteNameIdentifier\"],\"mappings\":\"2BAAAA,EAAuCC,EAAAC,EAAAC,EAAAC,EAA9BC,EAAQC,IAAA,CAAM,gBAAgB,CAAAN,OAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iBAAA,CAAAL,QAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,4BAAA,CAAAJ,kBAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,+BAAA,CAAAH,gBAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,8BAAA,CAAAF,OAAA,SAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAOvCP,EAAOQ,OAAO,CAAC,WAEd,IAAIC,EAAsCC,KAAAA,EAC1CT,EAAQU,OAAO,CAAC,WACf,IAAMC,EAAOZ,EAAOY,IAAI,GACxB,GAAIH,AAAoBC,KAAAA,IAApBD,GAAkCG,CAAAA,EAAOA,EAAKC,QAAQ,CAAGH,KAAAA,CAAAA,EAAY,CACxED,EAAkBG,MAAAA,EAAI,KAAA,EAAJA,EAAMC,QAAQ,CAChCX,EAAkBY,aAAa,GAE/B,IAAMC,EAAYX,EAAOY,YAAY,GACrC,GAAI,CAACD,EACJ,OAEgBZ,EAAgBc,sBAAsB,CAACF,EAKzD,CACD,EACD\"}"}