{"code":"function module(e,n,t){t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){r=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){i=e}},1),t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){a=e}},2),t.export({storeQueryFunction:function(){return u}});var r,i,a,o=function(e){return e.sort(function(e,n){return e.name.toLowerCase()>n.name.toLowerCase()?1:-1})};function u(e,n){if(!e.isFetched&&!n.isFetched)throw Error(\"Apps not loaded\");var t=[],u=[],s=[],l=a(n.data||[]);return o(e.data||[]).forEach(function(e){var n=l.findIndex(function(n){return n.id===e.id}),a=n>-1?l.splice(n,1):[],o=i(a,1)[0],d=r(r(r({},e),o&&{private:o.private,installed:!0,status:o.status,version:o.version,licenseValidation:o.licenseValidation,migrated:o.migrated}),{},{bundledIn:e.bundledIn,marketplaceVersion:e.version});o&&(o.private?s.push(d):u.push(d)),t.push(d)}),o(l).forEach(function(e){if(e.private){s.push(e);return}u.push(e)}),[t,u,s]}}","map":"{\"version\":3,\"sources\":[\"client/providers/AppsProvider/storeQueryFunction.ts\",\"<anon>\"],\"sourcesContent\":[\"import { type UseQueryResult } from '@tanstack/react-query';\\n\\nimport type { App } from '../../views/marketplace/types';\\n\\nconst sortByName = (apps: App[]): App[] => apps.sort((a, b) => (a.name.toLowerCase() > b.name.toLowerCase() ? 1 : -1));\\n\\n/**\\n * Aggregates result data from marketplace request and instance installed into their appropriate lists\\n *\\n * Exporting for better testing\\n */\\nexport function storeQueryFunction(\\n\\tmarketplace: UseQueryResult<App[], unknown>,\\n\\tinstance: UseQueryResult<App[], unknown>,\\n): [App[], App[], App[]] {\\n\\tif (!marketplace.isFetched && !instance.isFetched) {\\n\\t\\tthrow new Error('Apps not loaded');\\n\\t}\\n\\n\\tconst marketplaceApps: App[] = [];\\n\\tconst installedApps: App[] = [];\\n\\tconst privateApps: App[] = [];\\n\\tconst clonedData = [...(instance.data || [])];\\n\\n\\tsortByName(marketplace.data || []).forEach((app) => {\\n\\t\\tconst appIndex = clonedData.findIndex(({ id }) => id === app.id);\\n\\t\\tconst [installedApp] = appIndex > -1 ? clonedData.splice(appIndex, 1) : [];\\n\\n\\t\\tconst record = {\\n\\t\\t\\t...app,\\n\\t\\t\\t...(installedApp && {\\n\\t\\t\\t\\tprivate: installedApp.private,\\n\\t\\t\\t\\tinstalled: true,\\n\\t\\t\\t\\tstatus: installedApp.status,\\n\\t\\t\\t\\tversion: installedApp.version,\\n\\t\\t\\t\\tlicenseValidation: installedApp.licenseValidation,\\n\\t\\t\\t\\tmigrated: installedApp.migrated,\\n\\t\\t\\t}),\\n\\t\\t\\tbundledIn: app.bundledIn,\\n\\t\\t\\tmarketplaceVersion: app.version,\\n\\t\\t};\\n\\n\\t\\tif (installedApp) {\\n\\t\\t\\tif (installedApp.private) {\\n\\t\\t\\t\\tprivateApps.push(record);\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tinstalledApps.push(record);\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tmarketplaceApps.push(record);\\n\\t});\\n\\n\\tsortByName(clonedData).forEach((app) => {\\n\\t\\tif (app.private) {\\n\\t\\t\\tprivateApps.push(app);\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tinstalledApps.push(app);\\n\\t});\\n\\n\\treturn [marketplaceApps, installedApps, privateApps];\\n}\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"_slicedToArray\",\"_toConsumableArray\",\"export\",\"storeQueryFunction\",\"sortByName\",\"apps\",\"sort\",\"a\",\"b\",\"name\",\"toLowerCase\",\"marketplace\",\"instance\",\"isFetched\",\"Error\",\"marketplaceApps\",\"installedApps\",\"privateApps\",\"clonedData\",\"data\",\"forEach\",\"app\",\"appIndex\",\"findIndex\",\"_ref\",\"id\",\"_ref2\",\"splice\",\"installedApp\",\"_ref3\",\"record\",\"private\",\"installed\",\"status\",\"version\",\"licenseValidation\",\"migrated\",\"bundledIn\",\"marketplaceVersion\",\"push\"],\"mappings\":\"uBAIgBA,EAAeC,IAAY,CAAA,uCAAuC,CAAEC,QAAK,SAAKC,CAAA,EAAAC,EAAwBD,CAAC,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAvHH,EAAMO,MAAA,CAAA,CAAAC,mBAA0C,WAAU,OAAQA,CAAkB,CAAA,GAApF,IAAAJ,EAAuHC,EAAAC,EAAjHG,EAAa,SAACC,CAAW,EAAA,OAAYA,EAAKC,IAAI,CAAC,SAACC,CAAC,CAAEC,CAAC,EAAA,OAAMD,EAAEE,IAAI,CAACC,WAAW,GAAKF,EAAEC,IAAI,CAACC,WAAW,GAAK,EAAI,EAAE,EAAE,EAOhH,SAAUP,EACfQ,CAA2C,CAC3CC,CAAwC,EAExC,GAAI,CAACD,EAAYE,SAAS,EAAI,CAACD,EAASC,SAAS,CAChD,MAAM,AAAIC,MAAM,mBAGjB,IAAMC,EAAyB,EAAE,CAC3BC,EAAuB,EAAE,CACzBC,EAAqB,EAAE,CACvBC,EAAUjB,EAAQW,EAASO,IAAI,EAAI,EAAE,EAwC3C,OAtCAf,EAAWO,EAAYQ,IAAI,EAAI,EAAE,EAAEC,OAAO,CAAC,SAACC,CAAG,EAC9C,IAAMC,EAAWJ,EAAWK,SAAS,CAAC,SAAAC,CAAA,EAAK,OAAOC,AAAPD,EAAFC,EAAE,GAAcJ,EAAII,EAAE,GAC/DC,EAAuBJ,EAAW,GAAKJ,EAAWS,MAAM,CAACL,EAAU,GAAK,EAAE,CAAnEM,EAAYC,AAAuD7B,EAAA0B,EAAA,EAAvD,CAAA,EAAA,CAEbI,EAAM/B,EAAAA,EAAAA,EAAA,CAAA,EACRsB,GACCO,GAAgB,CACnB,QAASA,EAAaG,OAAO,CAC7BC,UAAW,CAAA,EACXC,OAAQL,EAAaK,MAAM,CAC3BC,QAASN,EAAaM,OAAO,CAC7BC,kBAAmBP,EAAaO,iBAAiB,CACjDC,SAAUR,EAAaQ,QAAAA,GACvB,CAAA,EAAA,CACDC,UAAWhB,EAAIgB,SAAS,CACxBC,mBAAoBjB,EAAIa,OAAAA,AAAO,GAG5BN,IACCA,EAAaG,OAAO,CACvBd,EAAYsB,IAAI,CAACT,GAEjBd,EAAcuB,IAAI,CAACT,IAIrBf,EAAgBwB,IAAI,CAACT,EACtB,GAEA1B,EAAWc,GAAYE,OAAO,CAAC,SAACC,CAAG,EAClC,GAAIA,EAAIU,OAAO,CAAE,CAChBd,EAAYsB,IAAI,CAAClB,GACjB,MACD,CAEAL,EAAcuB,IAAI,CAAClB,EACpB,GAEO,CAACN,EAAiBC,EAAeC,EAAY,AACrD\"}"}