{"code":"function module(e,t,n){var r,o,i,u,a,s,c,l,f,k,d,m;n.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){o=e},useRouter:function(e){i=e},useSearchParameter:function(e){u=e},useToastMessageDispatch:function(e){a=e},useUserId:function(e){s=e}},0),n.link(\"@tanstack/react-query\",{useQuery:function(e){c=e}},1),n.link(\"react\",{default:function(e){l=e}},2),n.link(\"react-i18next\",{useTranslation:function(e){f=e}},3),n.link(\"../../lib/errors/VisitorDoesNotExistError\",{VisitorDoesNotExistError:function(e){k=e}},4),n.link(\"../root/PageLoading\",{default:function(e){d=e}},5),n.link(\"./MeetPage\",{default:function(e){m=e}},6),n.exportDefault(function(){var e,t=i(),n=a(),p=f().t,v=s(),x=null!==(e=u(\"token\"))&&void 0!==e?e:\"\",g=o(\"GET\",\"/v1/livechat/visitor/:token\",{token:x});return c([\"meet\",{token:x}],function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=7;break}return e.next=3,r.awrap(g());case 3:if(!(\"visitor\"in e.sent)){e.next=6;break}return e.abrupt(\"return\",!0);case 6:throw new k;case 7:if(v){e.next=9;break}return e.abrupt(\"return\",!1);case 9:return e.abrupt(\"return\",!0);case 10:case\"end\":return e.stop()}},null,null,null,Promise)},{onSuccess:function(e){!1===e&&t.navigate(\"/home\")},onError:function(e){if(e instanceof k){n({type:\"error\",message:p(\"core.Visitor_does_not_exist\")}),t.navigate(\"/home\");return}n({type:\"error\",message:e}),t.navigate(\"/home\")}}).data?l.createElement(m,null):l.createElement(d,null)})}","map":"{\"version\":3,\"sources\":[\"client/views/meet/MeetRoute.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useEndpoint, useRouter, useSearchParameter, useToastMessageDispatch, useUserId } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { VisitorDoesNotExistError } from '../../lib/errors/VisitorDoesNotExistError';\\nimport PageLoading from '../root/PageLoading';\\nimport MeetPage from './MeetPage';\\n\\nconst MeetRoute = () => {\\n\\tconst router = useRouter();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst { t } = useTranslation();\\n\\n\\tconst uid = useUserId();\\n\\tconst token = useSearchParameter('token') ?? '';\\n\\tconst getVisitorByToken = useEndpoint('GET', '/v1/livechat/visitor/:token', { token });\\n\\n\\tconst { data: hasVisitor } = useQuery(\\n\\t\\t['meet', { token }],\\n\\t\\tasync () => {\\n\\t\\t\\tif (token) {\\n\\t\\t\\t\\tconst result = await getVisitorByToken();\\n\\t\\t\\t\\tif ('visitor' in result) {\\n\\t\\t\\t\\t\\treturn true;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tthrow new VisitorDoesNotExistError();\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (!uid) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn true;\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tonSuccess: (hasVisitor) => {\\n\\t\\t\\t\\tif (hasVisitor === false) {\\n\\t\\t\\t\\t\\trouter.navigate('/home');\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\tonError: (error) => {\\n\\t\\t\\t\\tif (error instanceof VisitorDoesNotExistError) {\\n\\t\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: t('core.Visitor_does_not_exist') });\\n\\t\\t\\t\\t\\trouter.navigate('/home');\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t\\trouter.navigate('/home');\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n\\n\\tif (!hasVisitor) {\\n\\t\\treturn <PageLoading />;\\n\\t}\\n\\n\\treturn <MeetPage />;\\n};\\n\\nexport default MeetRoute;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"useEndpoint\",\"useRouter\",\"useSearchParameter\",\"useToastMessageDispatch\",\"useUserId\",\"useQuery\",\"React\",\"useTranslation\",\"VisitorDoesNotExistError\",\"PageLoading\",\"MeetPage\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_useSearchParameter\",\"router\",\"dispatchToastMessage\",\"t\",\"_useTranslation\",\"uid\",\"token\",\"getVisitorByToken\",\"_useQuery\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"sent\",\"result\",\"abrupt\",\"stop\",\"Promise\",\"onSuccess\",\"hasVisitor\",\"navigate\",\"onError\",\"error\",\"type\",\"message\",\"data\",\"createElement\"],\"mappings\":\"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\"}"}