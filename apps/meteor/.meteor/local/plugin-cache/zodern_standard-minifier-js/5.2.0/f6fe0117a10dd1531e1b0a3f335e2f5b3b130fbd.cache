{"code":"function module(e,t,n){var r,i,a,s,u,o,l,c,f,k,p,m,b;n.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),n.link(\"meteor/meteor\",{Meteor:function(e){i=e}},0),n.link(\"meteor/rocketchat:user-presence\",{UserPresence:function(e){a=e}},1),n.link(\"meteor/session\",{Session:function(e){s=e}},2),n.link(\"meteor/tracker\",{Tracker:function(e){u=e}},3),n.link(\"moment\",{default:function(e){o=e}},4),n.link(\"../../app/markdown/lib/hljs\",{register:function(e){l=e}},5),n.link(\"../../app/settings/client\",{settings:function(e){c=e}},6),n.link(\"../../app/utils/client\",{getUserPreference:function(e){f=e}},7),n.link(\"hljs9/styles/github.css\"),n.link(\"../../app/utils/client/lib/SDKClient\",{sdk:function(e){k=e}},8),n.link(\"../lib/userData\",{synchronizeUserData:function(e){p=e},removeLocalUserData:function(e){m=e}},9),n.link(\"../lib/utils/fireGlobalEvent\",{fireGlobalEvent:function(e){b=e}},10),i.startup(function(){b(\"startup\",!0),s.setDefault(\"AvatarRandom\",0),window.lastMessageWindow={},window.lastMessageWindowHistory={};var e=void 0;u.autorun(function(){var t,n,s,u;return r.async(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=i.userId()){l.next=4;break}return m(),l.abrupt(\"return\");case 4:if(i.status().connected){l.next=6;break}return l.abrupt(\"return\");case 6:if(!i.loggingIn()){l.next=8;break}return l.abrupt(\"return\");case 8:return l.next=10,r.awrap(p(t));case 10:if(n=l.sent){l.next=13;break}return l.abrupt(\"return\");case 13:s=o().utcOffset()/60,n.utcOffset!==s&&k.call(\"userSetUtcOffset\",s),f(n,\"enableAutoAway\")?(u=f(n,\"idleTimeLimit\")||300,a.awayTime=1e3*u):(delete a.awayTime,a.stopTimer()),a.start(),n.status!==e&&(e=n.status,b(\"status-changed\",e));case 18:case\"end\":return l.stop()}},null,null,null,Promise)})}),i.startup(function(){u.autorun(function(){var e=c.get(\"Message_Code_highlight\");null==e||e.split(\",\").forEach(function(e){e.trim()&&l(e.trim())})})})}","map":"{\"version\":3,\"sources\":[\"client/startup/startup.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { UserStatus } from '@rocket.chat/core-typings';\\nimport { Meteor } from 'meteor/meteor';\\nimport { UserPresence } from 'meteor/rocketchat:user-presence';\\nimport { Session } from 'meteor/session';\\nimport { Tracker } from 'meteor/tracker';\\nimport moment from 'moment';\\n\\nimport { register } from '../../app/markdown/lib/hljs';\\nimport { settings } from '../../app/settings/client';\\nimport { getUserPreference } from '../../app/utils/client';\\nimport 'hljs9/styles/github.css';\\nimport { sdk } from '../../app/utils/client/lib/SDKClient';\\nimport { synchronizeUserData, removeLocalUserData } from '../lib/userData';\\nimport { fireGlobalEvent } from '../lib/utils/fireGlobalEvent';\\n\\nMeteor.startup(() => {\\n\\tfireGlobalEvent('startup', true);\\n\\n\\tSession.setDefault('AvatarRandom', 0);\\n\\n\\twindow.lastMessageWindow = {};\\n\\twindow.lastMessageWindowHistory = {};\\n\\n\\tlet status: UserStatus | undefined = undefined;\\n\\tTracker.autorun(async () => {\\n\\t\\tconst uid = Meteor.userId();\\n\\t\\tif (!uid) {\\n\\t\\t\\tremoveLocalUserData();\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (!Meteor.status().connected) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (Meteor.loggingIn()) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst user = await synchronizeUserData(uid);\\n\\t\\tif (!user) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst utcOffset = moment().utcOffset() / 60;\\n\\t\\tif (user.utcOffset !== utcOffset) {\\n\\t\\t\\tsdk.call('userSetUtcOffset', utcOffset);\\n\\t\\t}\\n\\n\\t\\tif (getUserPreference(user, 'enableAutoAway')) {\\n\\t\\t\\tconst idleTimeLimit = (getUserPreference(user, 'idleTimeLimit') as number | null | undefined) || 300;\\n\\t\\t\\tUserPresence.awayTime = idleTimeLimit * 1000;\\n\\t\\t} else {\\n\\t\\t\\tdelete UserPresence.awayTime;\\n\\t\\t\\tUserPresence.stopTimer();\\n\\t\\t}\\n\\n\\t\\tUserPresence.start();\\n\\n\\t\\tif (user.status !== status) {\\n\\t\\t\\tstatus = user.status;\\n\\t\\t\\tfireGlobalEvent('status-changed', status);\\n\\t\\t}\\n\\t});\\n});\\nMeteor.startup(() => {\\n\\tTracker.autorun(() => {\\n\\t\\tconst code = settings.get('Message_Code_highlight') as string | undefined;\\n\\t\\tcode?.split(',').forEach((language: string) => {\\n\\t\\t\\tlanguage.trim() && register(language.trim());\\n\\t\\t});\\n\\t});\\n});\\n\",null],\"names\":[\"_regeneratorRuntime\",\"Meteor\",\"UserPresence\",\"Session\",\"Tracker\",\"moment\",\"register\",\"settings\",\"getUserPreference\",\"sdk\",\"synchronizeUserData\",\"removeLocalUserData\",\"fireGlobalEvent\",\"module\",\"link\",\"default\",\"v\",\"startup\",\"setDefault\",\"window\",\"lastMessageWindow\",\"lastMessageWindowHistory\",\"status\",\"undefined\",\"autorun\",\"uid\",\"user\",\"utcOffset\",\"idleTimeLimit\",\"async\",\"_context\",\"prev\",\"next\",\"userId\",\"abrupt\",\"connected\",\"loggingIn\",\"awrap\",\"sent\",\"call\",\"awayTime\",\"stopTimer\",\"start\",\"stop\",\"Promise\",\"code\",\"get\",\"split\",\"forEach\",\"language\",\"trim\"],\"mappings\":\"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\"}"}