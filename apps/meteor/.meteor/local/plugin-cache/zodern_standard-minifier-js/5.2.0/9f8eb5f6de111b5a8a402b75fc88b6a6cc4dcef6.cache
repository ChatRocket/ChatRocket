{"code":"function module(e,t,n){let o,a,c,i,l,s,u,r,d;n.export({useDeviceLogout:()=>g}),n.link(\"@rocket.chat/ui-contexts\",{useSetModal(e){o=e},useTranslation(e){a=e},useToastMessageDispatch(e){c=e},useRoute(e){i=e},useRouteParameter(e){l=e}},0),n.link(\"react\",{default(e){s=e},useCallback(e){u=e}},1),n.link(\"../components/GenericModal\",{default(e){r=e}},2),n.link(\"./useEndpointAction\",{useEndpointAction(e){d=e}},3);let g=(e,t)=>{let n=a(),g=o(),m=c(),p=i(\"device-management\"),v=l(\"id\"),f=d(\"POST\",t),k=u(()=>p.push({}),[p]),D=v===e,T=u(t=>{let o=()=>g(null),a=async()=>{try{await f({sessionId:e}),t(),D&&k(),m({type:\"success\",message:n(\"Device_Logged_Out\")})}catch(e){m({type:\"error\",message:e})}finally{o()}};g(s.createElement(r,{title:n(\"Logout_Device\"),variant:\"danger\",confirmText:n(\"Logout_Device\"),cancelText:n(\"Cancel\"),onConfirm:a,onCancel:o,onClose:o},n(\"Device_Logout_Text\")))},[g,n,f,e,D,k,m]);return T}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useDeviceLogout.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useSetModal, useTranslation, useToastMessageDispatch, useRoute, useRouteParameter } from '@rocket.chat/ui-contexts';\\nimport React, { useCallback } from 'react';\\n\\nimport GenericModal from '../components/GenericModal';\\nimport { useEndpointAction } from './useEndpointAction';\\n\\nexport const useDeviceLogout = (\\n\\tsessionId: string,\\n\\tendpoint: '/v1/sessions/logout' | '/v1/sessions/logout.me',\\n): ((onReload: () => void) => void) => {\\n\\tconst t = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst deviceManagementRouter = useRoute('device-management');\\n\\tconst routeId = useRouteParameter('id');\\n\\n\\tconst logoutDevice = useEndpointAction('POST', endpoint);\\n\\n\\tconst handleCloseContextualBar = useCallback((): void => deviceManagementRouter.push({}), [deviceManagementRouter]);\\n\\n\\tconst isContextualBarOpen = routeId === sessionId;\\n\\n\\tconst handleLogoutDeviceModal = useCallback(\\n\\t\\t(onReload: () => void) => {\\n\\t\\t\\tconst closeModal = (): void => setModal(null);\\n\\n\\t\\t\\tconst handleLogoutDevice = async (): Promise<void> => {\\n\\t\\t\\t\\ttry {\\n\\t\\t\\t\\t\\tawait logoutDevice({ sessionId });\\n\\t\\t\\t\\t\\tonReload();\\n\\t\\t\\t\\t\\tisContextualBarOpen && handleCloseContextualBar();\\n\\t\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Device_Logged_Out') });\\n\\t\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t\\t} finally {\\n\\t\\t\\t\\t\\tcloseModal();\\n\\t\\t\\t\\t}\\n\\t\\t\\t};\\n\\n\\t\\t\\tsetModal(\\n\\t\\t\\t\\t<GenericModal\\n\\t\\t\\t\\t\\ttitle={t('Logout_Device')}\\n\\t\\t\\t\\t\\tvariant='danger'\\n\\t\\t\\t\\t\\tconfirmText={t('Logout_Device')}\\n\\t\\t\\t\\t\\tcancelText={t('Cancel')}\\n\\t\\t\\t\\t\\tonConfirm={handleLogoutDevice}\\n\\t\\t\\t\\t\\tonCancel={closeModal}\\n\\t\\t\\t\\t\\tonClose={closeModal}\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t{t('Device_Logout_Text')}\\n\\t\\t\\t\\t</GenericModal>,\\n\\t\\t\\t);\\n\\t\\t},\\n\\t\\t[setModal, t, logoutDevice, sessionId, isContextualBarOpen, handleCloseContextualBar, dispatchToastMessage],\\n\\t);\\n\\n\\treturn handleLogoutDeviceModal;\\n};\\n\",null],\"names\":[\"useSetModal\",\"useTranslation\",\"useToastMessageDispatch\",\"useRoute\",\"useRouteParameter\",\"React\",\"useCallback\",\"GenericModal\",\"useEndpointAction\",\"module\",\"export\",\"useDeviceLogout\",\"link\",\"v\",\"default\",\"sessionId\",\"endpoint\",\"t\",\"setModal\",\"dispatchToastMessage\",\"deviceManagementRouter\",\"routeId\",\"logoutDevice\",\"handleCloseContextualBar\",\"push\",\"isContextualBarOpen\",\"handleLogoutDeviceModal\",\"onReload\",\"closeModal\",\"handleLogoutDevice\",\"type\",\"message\",\"error\",\"createElement\",\"title\",\"variant\",\"confirmText\",\"cancelText\",\"onConfirm\",\"onCancel\",\"onClose\"],\"mappings\":\"2BAAsCA,EAAyBC,EAAUC,EAAyBC,EAAAC,EAA2BC,EAAAC,EAAAC,EAAAC,EAA7HC,EAAOC,MAAE,CAAA,CAAAC,gBAAaA,IAAAA,CAAgB,GAAuFF,EAAAG,IAAA,CAAA,2BAAA,CAAAZ,YAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,eAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,wBAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,SAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,kBAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,YAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,6BAAA,CAAAE,QAAAD,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,sBAAA,CAAAJ,kBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAMtH,IAAMF,EAAkBA,CAC9BI,EACAC,KAEA,IAAMC,EAAIhB,IACJiB,EAAWlB,IACXmB,EAAuBjB,IACvBkB,EAAyBjB,EAAS,qBAClCkB,EAAUjB,EAAkB,MAE5BkB,EAAed,EAAkB,OAAQQ,GAEzCO,EAA2BjB,EAAY,IAAYc,EAAuBI,IAAI,CAAC,CAAA,GAAK,CAACJ,EAAuB,EAE5GK,EAAsBJ,IAAYN,EAElCW,EAA0BpB,EAC9BqB,IACA,IAAMC,EAAaA,IAAYV,EAAS,MAElCW,EAAqB,UAC1B,GAAI,CACH,MAAMP,EAAa,CAAEP,UAAAA,CAAS,GAC9BY,IACAF,GAAuBF,IACvBJ,EAAqB,CAAEW,KAAM,UAAWC,QAASd,EAAE,oBAAoB,EACxE,CAAE,MAAOe,EAAO,CACfb,EAAqB,CAAEW,KAAM,QAASC,QAASC,CAAK,EACrD,QAAU,CACTJ,GACD,CACD,EAEAV,EACCb,EAAA4B,aAAA,CAAC1B,EAAY,CACZ2B,MAAOjB,EAAE,iBACTkB,QAAQ,SACRC,YAAanB,EAAE,iBACfoB,WAAYpB,EAAE,UACdqB,UAAWT,EACXU,SAAUX,EACVY,QAASZ,CAAW,EAEnBX,EAAE,uBAGN,EACA,CAACC,EAAUD,EAAGK,EAAcP,EAAWU,EAAqBF,EAA0BJ,EAAqB,EAG5G,OAAOO,CACR\"}"}