{"code":"function module(i,t,e){let n,o,l;e.export({actionLinks:()=>a}),e.link(\"meteor/meteor\",{Meteor(i){n=i}},0),e.link(\"./utils/fireGlobalEvent\",{fireGlobalEvent(i){o=i}},1),e.link(\"./utils/isLayoutEmbedded\",{isLayoutEmbedded(i){l=i}},2);let a={actions:new Map,register(i,t){a.actions.set(i,t)},run(i,t){var e;let r=l();if(r){o(\"click-action-link\",{actionlink:i,value:t._id,message:t});return}let d=null===(e=t.actionLinks)||void 0===e?void 0:e.find(t=>t.method_id===i);if(!d||!a.actions.has(d.method_id))throw new n.Error(\"error-invalid-actionlink\",\"Invalid action link\");let s=a.actions.get(d.method_id);null==s||s(t,d.params)}}}","map":"{\"version\":3,\"sources\":[\"client/lib/actionLinks.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { Meteor } from 'meteor/meteor';\\n\\nimport { fireGlobalEvent } from './utils/fireGlobalEvent';\\nimport { isLayoutEmbedded } from './utils/isLayoutEmbedded';\\n\\n// Action Links namespace creation.\\nexport const actionLinks = {\\n\\tactions: new Map<string, (message: IMessage, params: string) => void>(),\\n\\tregister(name: string, fn: (message: IMessage, params: string) => void): void {\\n\\t\\tactionLinks.actions.set(name, fn);\\n\\t},\\n\\trun(actionMethodId: string, message: IMessage): void {\\n\\t\\tconst embedded = isLayoutEmbedded();\\n\\n\\t\\tif (embedded) {\\n\\t\\t\\tfireGlobalEvent('click-action-link', {\\n\\t\\t\\t\\tactionlink: actionMethodId,\\n\\t\\t\\t\\tvalue: message._id,\\n\\t\\t\\t\\tmessage,\\n\\t\\t\\t});\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst actionLink = message.actionLinks?.find((action) => action.method_id === actionMethodId);\\n\\n\\t\\tif (!actionLink) {\\n\\t\\t\\tthrow new Meteor.Error('error-invalid-actionlink', 'Invalid action link');\\n\\t\\t}\\n\\n\\t\\tif (!actionLinks.actions.has(actionLink.method_id)) {\\n\\t\\t\\tthrow new Meteor.Error('error-invalid-actionlink', 'Invalid action link');\\n\\t\\t}\\n\\n\\t\\tconst fn = actionLinks.actions.get(actionLink.method_id);\\n\\t\\tfn?.(message, actionLink.params);\\n\\t},\\n};\\n\",null],\"names\":[\"Meteor\",\"fireGlobalEvent\",\"isLayoutEmbedded\",\"module\",\"export\",\"actionLinks\",\"link\",\"v\",\"actions\",\"Map\",\"register\",\"name\",\"fn\",\"set\",\"run\",\"actionMethodId\",\"message\",\"_message$actionLinks\",\"embedded\",\"actionlink\",\"value\",\"_id\",\"actionLink\",\"find\",\"action\",\"method_id\",\"has\",\"Error\",\"get\",\"params\"],\"mappings\":\"2BACuCA,EAAAC,EAAAC,EAAvCC,EAAOC,MAAE,CAAA,CAAMC,YAAQA,IAAAA,CAAgB,GAAAF,EAAAG,IAAA,CAAA,gBAAA,CAAAN,OAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,0BAAA,CAAAL,gBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,2BAAA,CAAAJ,iBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAMhC,IAAMF,EAAc,CAC1BG,QAAS,IAAIC,IACbC,SAASC,CAAY,CAAEC,CAA+C,EACrEP,EAAYG,OAAO,CAACK,GAAG,CAACF,EAAMC,EAC/B,EACAE,IAAIC,CAAsB,CAAEC,CAAiB,EAAA,IAAAC,EAC5C,IAAMC,EAAWhB,IAEjB,GAAIgB,EAAU,CACbjB,EAAgB,oBAAqB,CACpCkB,WAAYJ,EACZK,MAAOJ,EAAQK,GAAG,CAClBL,QAAAA,IAED,MACD,CAEA,IAAMM,EAAU,AAAsB,OAAtBL,CAAAA,EAAGD,EAAQX,WAAW,AAAXA,GAAWY,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAnBA,EAAqBM,IAAI,CAAEC,GAAWA,EAAOC,SAAS,GAAKV,GAE9E,GAAI,CAACO,GAID,CAACjB,EAAYG,OAAO,CAACkB,GAAG,CAACJ,EAAWG,SAAS,EAHhD,MAAM,IAAIzB,EAAO2B,KAAK,CAAC,2BAA4B,uBAOpD,IAAMf,EAAKP,EAAYG,OAAO,CAACoB,GAAG,CAACN,EAAWG,SAAS,CACvDb,OAAAA,GAAAA,EAAKI,EAASM,EAAWO,MAAM,CAChC\"}"}