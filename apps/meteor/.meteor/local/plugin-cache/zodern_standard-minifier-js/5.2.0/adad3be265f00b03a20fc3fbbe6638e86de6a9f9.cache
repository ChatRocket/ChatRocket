{"code":"function module(e,t,l){let n,r,a,o,u,c,i,m,s,b,E,d,x,C,k,p,f,h;l.link(\"@babel/runtime/helpers/extends\",{default(e){n=e}},0),l.link(\"@rocket.chat/fuselage\",{Field(e){r=e},FieldLabel(e){a=e},FieldRow(e){o=e},TextInput(e){u=e},Select(e){c=e}},0),l.link(\"@rocket.chat/ui-contexts\",{useTranslation(e){i=e},useRoute(e){m=e}},1),l.link(\"react\",{default(e){s=e},useEffect(e){b=e}},2),l.link(\"react-hook-form\",{Controller(e){E=e},useForm(e){d=e}},3),l.link(\"../../../components/Contextualbar\",{Contextualbar(e){x=e},ContextualbarScrollableContent(e){C=e},ContextualbarHeader(e){k=e},ContextualbarClose(e){p=e},ContextualbarDialog(e){f=e},ContextualbarTitle(e){h=e}},4),l.exportDefault(e=>{let{setCustomFields:t,allCustomFields:l}=e,{register:_,watch:F,control:y}=d({mode:\"onChange\"});b(()=>{let e=F(e=>t(e));return()=>e.unsubscribe()},[t,F]);let g=i(),T=m(\"omnichannel-current-chats\");return s.createElement(f,null,s.createElement(x,null,s.createElement(k,null,s.createElement(h,null,g(\"Filter_by_Custom_Fields\")),s.createElement(p,{onClick:()=>T.push({context:\"\"})})),s.createElement(C,{is:\"form\"},l.filter(e=>\"visitor\"!==e.scope).map(e=>\"select\"===e.type?s.createElement(r,{key:e._id},s.createElement(a,null,e.label),s.createElement(o,null,s.createElement(E,{name:e._id,control:y,render:t=>{let{field:l}=t;return s.createElement(c,n({},l,{options:(e.options||\"\").split(\",\").map(e=>[e,e])}))}}))):s.createElement(r,{key:e._id},s.createElement(a,null,e.label),s.createElement(o,null,s.createElement(u,n({flexGrow:1},_(e._id)))))))))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/currentChats/CustomFieldsList.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatCustomField } from '@rocket.chat/core-typings';\\nimport { Field, FieldLabel, FieldRow, TextInput, Select } from '@rocket.chat/fuselage';\\nimport { useTranslation, useRoute } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, Dispatch, SetStateAction } from 'react';\\nimport React, { useEffect } from 'react';\\nimport { Controller, useForm } from 'react-hook-form';\\n\\nimport {\\n\\tContextualbar,\\n\\tContextualbarScrollableContent,\\n\\tContextualbarHeader,\\n\\tContextualbarClose,\\n\\tContextualbarDialog,\\n\\tContextualbarTitle,\\n} from '../../../components/Contextualbar';\\n\\ntype CustomFieldsListProps = {\\n\\tsetCustomFields: Dispatch<SetStateAction<{ [key: string]: string } | undefined>>;\\n\\tallCustomFields: ILivechatCustomField[];\\n};\\n\\nconst CustomFieldsList = ({ setCustomFields, allCustomFields }: CustomFieldsListProps): ReactElement => {\\n\\tconst { register, watch, control } = useForm({ mode: 'onChange' });\\n\\n\\t// TODO: When we refactor the other CurrentChat's fields to use react-hook-form, we need to change this to use the form controller\\n\\n\\tuseEffect(() => {\\n\\t\\tconst subscription = watch((value) => setCustomFields(value));\\n\\t\\treturn (): void => subscription.unsubscribe();\\n\\t}, [setCustomFields, watch]);\\n\\n\\tconst t = useTranslation();\\n\\tconst currentChatsRoute = useRoute('omnichannel-current-chats');\\n\\n\\treturn (\\n\\t\\t<ContextualbarDialog>\\n\\t\\t\\t<Contextualbar>\\n\\t\\t\\t\\t<ContextualbarHeader>\\n\\t\\t\\t\\t\\t<ContextualbarTitle>{t('Filter_by_Custom_Fields')}</ContextualbarTitle>\\n\\t\\t\\t\\t\\t<ContextualbarClose onClick={(): void => currentChatsRoute.push({ context: '' })} />\\n\\t\\t\\t\\t</ContextualbarHeader>\\n\\t\\t\\t\\t<ContextualbarScrollableContent is='form'>\\n\\t\\t\\t\\t\\t{/* TODO: REMOVE FILTER ONCE THE ENDPOINT SUPPORTS A SCOPE PARAMETER */}\\n\\t\\t\\t\\t\\t{allCustomFields\\n\\t\\t\\t\\t\\t\\t.filter((customField) => customField.scope !== 'visitor')\\n\\t\\t\\t\\t\\t\\t.map((customField: ILivechatCustomField) => {\\n\\t\\t\\t\\t\\t\\t\\tif (customField.type === 'select') {\\n\\t\\t\\t\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Field key={customField._id}>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldLabel>{customField.label}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tname={customField._id}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\trender={({ field }): ReactElement => (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Select {...field} options={(customField.options || '').split(',').map((item) => [item, item])} />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\t\\t\\t<Field key={customField._id}>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldLabel>{customField.label}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<TextInput flexGrow={1} {...register(customField._id)} />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t})}\\n\\t\\t\\t\\t</ContextualbarScrollableContent>\\n\\t\\t\\t</Contextualbar>\\n\\t\\t</ContextualbarDialog>\\n\\t);\\n};\\n\\nexport default CustomFieldsList;\\n\",null],\"names\":[\"_extends\",\"Field\",\"FieldLabel\",\"FieldRow\",\"TextInput\",\"Select\",\"useTranslation\",\"useRoute\",\"React\",\"useEffect\",\"Controller\",\"useForm\",\"Contextualbar\",\"ContextualbarScrollableContent\",\"ContextualbarHeader\",\"ContextualbarClose\",\"ContextualbarDialog\",\"ContextualbarTitle\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"setCustomFields\",\"allCustomFields\",\"register\",\"watch\",\"control\",\"mode\",\"subscription\",\"value\",\"unsubscribe\",\"t\",\"currentChatsRoute\",\"createElement\",\"onClick\",\"push\",\"context\",\"is\",\"filter\",\"customField\",\"scope\",\"map\",\"type\",\"key\",\"_id\",\"label\",\"name\",\"render\",\"_ref2\",\"field\",\"options\",\"split\",\"item\",\"flexGrow\"],\"mappings\":\"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\"}"}