{"code":"function module(e,l,n){let t,a,i,s,o,r,u,c,f;n.link(\"@babel/runtime/helpers/extends\",{default(e){t=e}},0),n.link(\"@rocket.chat/fuselage\",{NavBarItem(e){a=e}},0),n.link(\"react\",{default(e){i=e},useCallback(e){s=e}},1),n.link(\"react-i18next\",{useTranslation(e){o=e}},2),n.link(\"../../contexts/CallContext\",{useCallerInfo(e){r=e},useCallRegisterClient(e){u=e},useCallUnregisterClient(e){c=e},useVoipNetworkStatus(e){f=e}},3),n.exportDefault(e=>{let{t:l}=o(),n=r(),_=c(),d=u(),C=f(),k=![\"ERROR\",\"INITIAL\",\"UNREGISTERED\"].includes(n.state),I=[\"IN_CALL\"].includes(n.state),b=s(()=>{if(k){_();return}d()},[k,d,_]);return i.createElement(a,t({icon:\"offline\"===C?\"phone-issue\":k?\"phone\":\"phone-disabled\",disabled:I,\"aria-checked\":k,\"aria-label\":l(\"VoIP_Toggle\"),\"data-tooltip\":l(\"offline\"===C?\"Waiting_for_server_connection\":I?\"Cannot_disable_while_on_call\":k?\"Turn_off_answer_calls\":\"Turn_on_answer_calls\")},e,{success:k,warning:\"offline\"===C,onClick:b}))})}","map":"{\"version\":3,\"sources\":[\"client/NavBarV2/NavBarOmnichannelToolbar/NavBarItemOmnichannelCallToggleReady.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { NavBarItem } from '@rocket.chat/fuselage';\\nimport type { ComponentPropsWithoutRef } from 'react';\\nimport React, { useCallback } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useCallerInfo, useCallRegisterClient, useCallUnregisterClient, useVoipNetworkStatus } from '../../contexts/CallContext';\\n\\ntype NavBarItemOmnichannelCallToggleReadyProps = ComponentPropsWithoutRef<typeof NavBarItem>;\\n\\nconst NavBarItemOmnichannelCallToggleReady = (props: NavBarItemOmnichannelCallToggleReadyProps) => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst caller = useCallerInfo();\\n\\tconst unregister = useCallUnregisterClient();\\n\\tconst register = useCallRegisterClient();\\n\\n\\tconst networkStatus = useVoipNetworkStatus();\\n\\tconst registered = !['ERROR', 'INITIAL', 'UNREGISTERED'].includes(caller.state);\\n\\tconst inCall = ['IN_CALL'].includes(caller.state);\\n\\n\\tconst onClickVoipButton = useCallback((): void => {\\n\\t\\tif (registered) {\\n\\t\\t\\tunregister();\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tregister();\\n\\t}, [registered, register, unregister]);\\n\\n\\tconst getTitle = (): string => {\\n\\t\\tif (networkStatus === 'offline') {\\n\\t\\t\\treturn t('Waiting_for_server_connection');\\n\\t\\t}\\n\\n\\t\\tif (inCall) {\\n\\t\\t\\treturn t('Cannot_disable_while_on_call');\\n\\t\\t}\\n\\n\\t\\tif (registered) {\\n\\t\\t\\treturn t('Turn_off_answer_calls');\\n\\t\\t}\\n\\n\\t\\treturn t('Turn_on_answer_calls');\\n\\t};\\n\\n\\tconst getIcon = (): 'phone-issue' | 'phone' | 'phone-disabled' => {\\n\\t\\tif (networkStatus === 'offline') {\\n\\t\\t\\treturn 'phone-issue';\\n\\t\\t}\\n\\t\\treturn registered ? 'phone' : 'phone-disabled';\\n\\t};\\n\\n\\treturn (\\n\\t\\t<NavBarItem\\n\\t\\t\\ticon={getIcon()}\\n\\t\\t\\tdisabled={inCall}\\n\\t\\t\\taria-checked={registered}\\n\\t\\t\\taria-label={t('VoIP_Toggle')}\\n\\t\\t\\tdata-tooltip={getTitle()}\\n\\t\\t\\t{...props}\\n\\t\\t\\tsuccess={registered}\\n\\t\\t\\twarning={networkStatus === 'offline'}\\n\\t\\t\\tonClick={onClickVoipButton}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default NavBarItemOmnichannelCallToggleReady;\\n\",null],\"names\":[\"_extends\",\"NavBarItem\",\"React\",\"useCallback\",\"useTranslation\",\"useCallerInfo\",\"useCallRegisterClient\",\"useCallUnregisterClient\",\"useVoipNetworkStatus\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"props\",\"t\",\"caller\",\"unregister\",\"register\",\"networkStatus\",\"registered\",\"includes\",\"state\",\"inCall\",\"onClickVoipButton\",\"createElement\",\"icon\",\"disabled\",\"success\",\"warning\",\"onClick\"],\"mappings\":\"2BAAAA,EAAAC,EAAmDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA1CC,EAAUC,IAAE,CAAA,iCAA8B,CAAAC,QAAAC,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAA1CH,EAAYC,IAAA,CAAM,wBAAwB,CAAAT,WAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAV,EAAAU,CAAA,EAAAT,YAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAN,eAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAAL,cAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,sBAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,wBAAAK,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,qBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAnDH,EAAOI,aAAY,CAS2BC,IAC7C,GAAM,CAAEC,EAAAA,CAAAA,CAAG,CAAGX,IAERY,EAASX,IACTY,EAAaV,IACbW,EAAWZ,IAEXa,EAAgBX,IAChBY,EAAa,CAAC,CAAC,QAAS,UAAW,eAAe,CAACC,QAAQ,CAACL,EAAOM,KAAK,EACxEC,EAAS,CAAC,UAAU,CAACF,QAAQ,CAACL,EAAOM,KAAK,EAE1CE,EAAoBrB,EAAY,KACrC,GAAIiB,EAAY,CACfH,IACA,MACD,CACAC,GACD,EAAG,CAACE,EAAYF,EAAUD,EAAW,EAyBrC,OACCf,EAAAuB,aAAA,CAACxB,EAAUD,EAAA,CACV0B,KARD,AAAIP,AAAkB,YAAlBA,EACI,cAEDC,EAAa,QAAU,iBAM7BO,SAAUJ,EACV,eAAcH,EACd,aAAYL,EAAE,eACd,cAAA,CA3BOA,EAAE,AADNI,AAAkB,YAAlBA,EACM,gCAIA,AADNI,EACM,+BAIA,AADNH,EACM,wBAGD,uBAgBiB,EACrBN,EAAK,CACTc,QAASR,EACTS,QAASV,AAAkB,YAAlBA,EACTW,QAASN,CAAkB,GAG9B\"}"}