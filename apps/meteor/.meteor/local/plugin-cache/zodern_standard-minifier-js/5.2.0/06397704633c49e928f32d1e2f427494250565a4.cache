{"code":"function module(e,n,r){r.export({ChromeScreenShare:function(){return o}}),r.link(\"../../../client/lib/utils/fireGlobalEvent\",{fireGlobalEvent:function(e){i=e}},0);var i,o={callbacks:{\"get-RocketChatScreenSharingExtensionVersion\":function(e){e&&(o.installed=!0)},getSourceId:function(e){}},installed:!1,init:function(){window.postMessage(\"get-RocketChatScreenSharingExtensionVersion\",\"*\")},getSourceId:function(e,n){if(!n)throw Error('\"callback\" parameter is mandatory.');return(this.callbacks.getSourceId=n,\"electron\"===e)?i(\"get-sourceId\",\"*\"):window.postMessage(\"get-sourceId\",\"*\")}};o.init(),window.addEventListener(\"message\",function(e){if(e.origin===window.location.origin){if(\"PermissionDeniedError\"===e.data){if(null!=o.callbacks.getSourceId)return o.callbacks.getSourceId(\"PermissionDeniedError\");throw Error(\"PermissionDeniedError\")}if(null!=e.data.version){var n,r;null===(n=(r=o.callbacks)[\"get-RocketChatScreenSharingExtensionVersion\"])||void 0===n||n.call(r,e.data.version)}else if(null!=e.data.sourceId)return\"function\"==typeof o.callbacks.getSourceId&&o.callbacks.getSourceId(e.data.sourceId)}})}","map":"{\"version\":3,\"sources\":[\"app/webrtc/client/screenShare.ts\",\"<anon>\"],\"sourcesContent\":[\"import { fireGlobalEvent } from '../../../client/lib/utils/fireGlobalEvent';\\n\\nexport const ChromeScreenShare = {\\n\\tcallbacks: {\\n\\t\\t'get-RocketChatScreenSharingExtensionVersion': (version: unknown) => {\\n\\t\\t\\tif (version) {\\n\\t\\t\\t\\tChromeScreenShare.installed = true;\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t'getSourceId': (_sourceId: string): void => undefined,\\n\\t},\\n\\tinstalled: false,\\n\\tinit() {\\n\\t\\twindow.postMessage('get-RocketChatScreenSharingExtensionVersion', '*');\\n\\t},\\n\\tgetSourceId(navigator: string, callback: (sourceId: string) => void) {\\n\\t\\tif (!callback) {\\n\\t\\t\\tthrow new Error('\\\"callback\\\" parameter is mandatory.');\\n\\t\\t}\\n\\t\\tthis.callbacks.getSourceId = callback;\\n\\t\\tif (navigator === 'electron') {\\n\\t\\t\\treturn fireGlobalEvent('get-sourceId', '*');\\n\\t\\t}\\n\\t\\treturn window.postMessage('get-sourceId', '*');\\n\\t},\\n};\\n\\nChromeScreenShare.init();\\n\\nwindow.addEventListener('message', (e) => {\\n\\tif (e.origin !== window.location.origin) {\\n\\t\\treturn;\\n\\t}\\n\\tif (e.data === 'PermissionDeniedError') {\\n\\t\\tif (ChromeScreenShare.callbacks.getSourceId != null) {\\n\\t\\t\\treturn ChromeScreenShare.callbacks.getSourceId('PermissionDeniedError');\\n\\t\\t}\\n\\t\\tthrow new Error('PermissionDeniedError');\\n\\t}\\n\\tif (e.data.version != null) {\\n\\t\\tChromeScreenShare.callbacks['get-RocketChatScreenSharingExtensionVersion']?.(e.data.version);\\n\\t} else if (e.data.sourceId != null) {\\n\\t\\treturn typeof ChromeScreenShare.callbacks.getSourceId === 'function' && ChromeScreenShare.callbacks.getSourceId(e.data.sourceId);\\n\\t}\\n});\\n\",null],\"names\":[\"module\",\"export\",\"ChromeScreenShare\",\"link\",\"fireGlobalEvent\",\"v\",\"callbacks\",\"version\",\"installed\",\"_sourceId\",\"init\",\"window\",\"postMessage\",\"getSourceId\",\"navigator\",\"callback\",\"Error\",\"addEventListener\",\"e\",\"origin\",\"location\",\"data\",\"_ChromeScreenShare$ca\",\"_ChromeScreenShare$ca2\",\"call\",\"sourceId\"],\"mappings\":\"uBAAAA,EAAOC,MAAE,CAAA,CAAAC,kBAAuB,WAAA,OAAAA,CAAA,CAAA,GAA4CF,EAAAG,IAAA,CAAA,4CAAA,CAAAC,gBAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,CAAA,EAAA,GAErE,IAFqED,EAE/DF,EAAoB,CAChCI,UAAW,CACV,8CAA+C,SAACC,CAAgB,EAC3DA,GACHL,CAAAA,EAAkBM,SAAS,CAAG,CAAA,CAAA,CAEhC,EACA,YAAe,SAACC,CAAiB,EAAoB,GAEtDD,UAAW,CAAA,EACXE,KAAI,WACHC,OAAOC,WAAW,CAAC,8CAA+C,IACnE,EACAC,YAAW,SAACC,CAAiB,CAAEC,CAAoC,EAClE,GAAI,CAACA,EACJ,MAAM,AAAIC,MAAM,4CAGjB,CADA,IAAI,CAACV,SAAS,CAACO,WAAW,CAAGE,EACzBD,AAAc,aAAdA,GACIV,EAAgB,eAAgB,KAEjCO,OAAOC,WAAW,CAAC,eAAgB,IAC3C,GAGDV,EAAkBQ,IAAI,GAEtBC,OAAOM,gBAAgB,CAAC,UAAW,SAACC,CAAC,EACpC,GAAIA,EAAEC,MAAM,GAAKR,OAAOS,QAAQ,CAACD,MAAM,EAGvC,GAAID,AAAW,0BAAXA,EAAEG,IAAI,CAA8B,CACvC,GAAInB,AAA2C,MAA3CA,EAAkBI,SAAS,CAACO,WAAW,CAC1C,OAAOX,EAAkBI,SAAS,CAACO,WAAW,CAAC,wBAEhD,OAAM,AAAIG,MAAM,wBACjB,CACA,GAAIE,AAAkB,MAAlBA,EAAEG,IAAI,CAACd,OAAO,CAAU,CAAA,IAAAe,EAAAC,CAC3B,AAA0E,QAA1ED,CAAAA,EAAA,AAAAC,CAAAA,EAAArB,EAAkBI,SAAS,AAATA,CAAS,CAAC,8CAA8C,AAAD,GAACgB,AAAA,KAAA,IAAAA,GAA1EA,EAAAE,IAAA,CAAAD,EAA6EL,EAAEG,IAAI,CAACd,OAAO,CAC5F,MAAO,GAAIW,AAAmB,MAAnBA,EAAEG,IAAI,CAACI,QAAQ,CACzB,MAAO,AAAmD,YAAnD,OAAOvB,EAAkBI,SAAS,CAACO,WAAW,EAAmBX,EAAkBI,SAAS,CAACO,WAAW,CAACK,EAAEG,IAAI,CAACI,QAAQ,EAEjI\"}"}