{"code":"function module(e,t,l){var r,n;let a,i;l.link(\"../../lib/utils/highOrderFunctions\",{withDebouncing(e){a=e}},0);let s=e=>{var t;return(null!==(t=e.match(/(--[^:; ]+:..*?;)/g))&&void 0!==t?t:[]).map(e=>{let t=/(.*?):\\s*(.*?)\\s*;/.exec(e);if(null===t)throw Error();let[,l,r]=t;return[l,r.indexOf(\"var(\")>=0?e=>r.replace(/var\\((--.*?)\\)/gm,(t,l)=>{var r;return null===(r=e[l])||void 0===r?void 0:r.call(null,e)}):()=>r]})},c=(e,t)=>e.replace(/var\\((--.*?)\\)/gm,(e,l)=>{var r;return null===(r=t[l])||void 0===r?void 0:r.call(null,t)}),o=new Map,u=a({wait:100})(()=>{let e=[].concat(...Array.from(o.values(),s),s(i.innerHTML)),t=Object.fromEntries(e);o.forEach((e,l)=>{let r=c(e,t),n=l.nextElementSibling;n&&n.classList.contains(\"patched-css-variables\")||((n=document.createElement(\"style\")).type=\"text/css\",n.classList.add(\"patched-css-variables\"),l.insertAdjacentElement(\"afterend\",n));let{sheet:a}=n;for(;a.cssRules.length>0;)a.deleteRule(0);a.insertRule(\"@media all {\".concat(r,\"}\"),0)})}),d=()=>{Array.from(document.querySelectorAll('link[type=\"text/css\"].__meteor-css__')).forEach(async e=>{let t=e.getAttribute(\"href\");if(null!==t)try{let l=await fetch(t),r=await l.text();o.set(e,r)}catch(e){console.warn(e)}finally{u()}})},m=()=>{if(\"complete\"!==document.readyState){requestAnimationFrame(m);return}let e=document.getElementById(\"css-variables\");if(null===e){requestAnimationFrame(m);return}i=e;let t=new MutationObserver(()=>{u()});t.observe(i,{childList:!0}),d()};null!==(r=window.CSS)&&void 0!==r&&null!==(n=r.supports)&&void 0!==n&&n.call(r,\"(--foo: red)\")||m()}","map":"{\"version\":3,\"sources\":[\"client/polyfills/cssVars.ts\",\"<anon>\"],\"sourcesContent\":[\"import { withDebouncing } from '../../lib/utils/highOrderFunctions';\\n\\ntype Variables = {\\n\\t[name: string]: (variables: Variables) => string;\\n};\\n\\nconst findDeclarations = (code: string): [string, Variables[keyof Variables]][] =>\\n\\t(code.match(/(--[^:; ]+:..*?;)/g) ?? []).map((declaration) => {\\n\\t\\tconst matches = /(.*?):\\\\s*(.*?)\\\\s*;/.exec(declaration);\\n\\n\\t\\tif (matches === null) {\\n\\t\\t\\tthrow new Error();\\n\\t\\t}\\n\\n\\t\\tconst [, name, value] = matches;\\n\\t\\treturn [\\n\\t\\t\\tname,\\n\\t\\t\\tvalue.indexOf('var(') >= 0\\n\\t\\t\\t\\t? (variables: Variables): string => value.replace(/var\\\\((--.*?)\\\\)/gm, (_, name) => variables[name]?.call(null, variables))\\n\\t\\t\\t\\t: (): string => value,\\n\\t\\t];\\n\\t});\\n\\nconst replaceReferences = (code: string, variables: Variables): string =>\\n\\tcode.replace(/var\\\\((--.*?)\\\\)/gm, (_, name) => variables[name]?.call(null, variables));\\n\\nlet cssVariablesElement: HTMLElement;\\nconst originalCodes = new Map();\\n\\nconst update = withDebouncing({ wait: 100 })(() => {\\n\\tconst declarations = ([] as [string, Variables[keyof Variables]][]).concat(\\n\\t\\t...Array.from(originalCodes.values(), findDeclarations),\\n\\t\\tfindDeclarations(cssVariablesElement.innerHTML),\\n\\t);\\n\\n\\tconst variables = Object.fromEntries(declarations);\\n\\n\\toriginalCodes.forEach((originalCode, element) => {\\n\\t\\tconst patchedCode = replaceReferences(originalCode, variables);\\n\\n\\t\\tlet patchedElement = element.nextElementSibling;\\n\\t\\tif (!patchedElement || !patchedElement.classList.contains('patched-css-variables')) {\\n\\t\\t\\tpatchedElement = document.createElement('style');\\n\\t\\t\\tpatchedElement.type = 'text/css';\\n\\t\\t\\tpatchedElement.classList.add('patched-css-variables');\\n\\t\\t\\telement.insertAdjacentElement('afterend', patchedElement);\\n\\t\\t}\\n\\n\\t\\tconst { sheet } = patchedElement;\\n\\t\\twhile (sheet.cssRules.length > 0) {\\n\\t\\t\\tsheet.deleteRule(0);\\n\\t\\t}\\n\\t\\tsheet.insertRule(`@media all {${patchedCode}}`, 0);\\n\\t});\\n});\\n\\nconst findAndPatchFromLinkElements = (): void => {\\n\\tArray.from(document.querySelectorAll('link[type=\\\"text/css\\\"].__meteor-css__')).forEach(async (linkElement) => {\\n\\t\\tconst url = linkElement.getAttribute('href');\\n\\n\\t\\tif (url === null) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\ttry {\\n\\t\\t\\tconst response = await fetch(url);\\n\\t\\t\\tconst code = await response.text();\\n\\t\\t\\toriginalCodes.set(linkElement, code);\\n\\t\\t} catch (error) {\\n\\t\\t\\tconsole.warn(error);\\n\\t\\t} finally {\\n\\t\\t\\tupdate();\\n\\t\\t}\\n\\t});\\n};\\n\\nconst waitAndInitialize = (): void => {\\n\\tif (document.readyState !== 'complete') {\\n\\t\\trequestAnimationFrame(waitAndInitialize);\\n\\t\\treturn;\\n\\t}\\n\\n\\tconst element = document.getElementById('css-variables');\\n\\n\\tif (element === null) {\\n\\t\\trequestAnimationFrame(waitAndInitialize);\\n\\t\\treturn;\\n\\t}\\n\\n\\tcssVariablesElement = element;\\n\\n\\tconst cssVariablesElementObserver = new MutationObserver(() => {\\n\\t\\tupdate();\\n\\t});\\n\\n\\tcssVariablesElementObserver.observe(cssVariablesElement, { childList: true });\\n\\n\\tfindAndPatchFromLinkElements();\\n};\\n\\n((): void => {\\n\\tif (window.CSS?.supports?.('(--foo: red)')) {\\n\\t\\treturn;\\n\\t}\\n\\n\\twaitAndInitialize();\\n})();\\n\",null],\"names\":[\"_window$CSS\",\"_window$CSS$supports\",\"withDebouncing\",\"cssVariablesElement\",\"module\",\"link\",\"v\",\"findDeclarations\",\"code\",\"_code$match\",\"match\",\"map\",\"declaration\",\"matches\",\"exec\",\"Error\",\"name\",\"value\",\"indexOf\",\"variables\",\"replace\",\"_\",\"_variables$name\",\"call\",\"replaceReferences\",\"_variables$name2\",\"originalCodes\",\"Map\",\"update\",\"wait\",\"declarations\",\"concat\",\"Array\",\"from\",\"values\",\"innerHTML\",\"Object\",\"fromEntries\",\"forEach\",\"originalCode\",\"element\",\"patchedCode\",\"patchedElement\",\"nextElementSibling\",\"classList\",\"contains\",\"document\",\"createElement\",\"type\",\"add\",\"insertAdjacentElement\",\"sheet\",\"cssRules\",\"length\",\"deleteRule\",\"insertRule\",\"findAndPatchFromLinkElements\",\"querySelectorAll\",\"linkElement\",\"url\",\"getAttribute\",\"response\",\"fetch\",\"text\",\"set\",\"error\",\"console\",\"warn\",\"waitAndInitialize\",\"readyState\",\"requestAnimationFrame\",\"getElementById\",\"cssVariablesElementObserver\",\"MutationObserver\",\"observe\",\"childList\",\"window\",\"CSS\",\"supports\"],\"mappings\":\"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\"}"}