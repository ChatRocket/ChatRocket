{"code":"function module(e,t,n){let i,s,r,l,a;n.export({useUserBanners:()=>o}),n.link(\"@rocket.chat/ui-contexts\",{useTranslation(e){i=e},useUser(e){s=e}},0),n.link(\"react\",{useEffect(e){r=e}},1),n.link(\"../../../lib/banners\",{\"*\"(e){l=e}},2),n.link(\"./useDismissUserBannerMutation\",{useDismissUserBannerMutation(e){a=e}},3);let o=()=>{let e=s(),t=i(),{mutate:n}=a();r(()=>{if(!(null!=e&&e.banners)||0===Object.keys(e.banners).length)return;let i=Object.values(e.banners).filter(e=>!0!==e.read).sort((e,t)=>t.priority-e.priority)[0];i&&l.open({id:i.id,title:t.has(i.title)?t(i.title):i.title,text:t.has(i.text)?t(i.text,i.textArguments):i.text,modifiers:i.modifiers,action(){i.link&&window.open(i.link,\"_system\")},onClose(){n({id:i.id})}})},[n,t,null==e?void 0:e.banners])}}","map":"{\"version\":3,\"sources\":[\"client/views/banners/hooks/useUserBanners.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useTranslation, useUser } from '@rocket.chat/ui-contexts';\\nimport { useEffect } from 'react';\\n\\nimport * as banners from '../../../lib/banners';\\nimport { useDismissUserBannerMutation } from './useDismissUserBannerMutation';\\n\\nexport const useUserBanners = () => {\\n\\tconst user = useUser();\\n\\n\\tconst t = useTranslation();\\n\\tconst { mutate: dismissUserBanner } = useDismissUserBannerMutation();\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!user?.banners || Object.keys(user.banners).length === 0) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst firstBanner = Object.values(user.banners)\\n\\t\\t\\t.filter((b) => b.read !== true)\\n\\t\\t\\t.sort((a, b) => b.priority - a.priority)[0];\\n\\n\\t\\tif (!firstBanner) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tbanners.open({\\n\\t\\t\\tid: firstBanner.id,\\n\\t\\t\\ttitle: t.has(firstBanner.title) ? t(firstBanner.title) : firstBanner.title,\\n\\t\\t\\ttext: t.has(firstBanner.text) ? t(firstBanner.text, firstBanner.textArguments) : firstBanner.text,\\n\\t\\t\\tmodifiers: firstBanner.modifiers,\\n\\t\\t\\taction() {\\n\\t\\t\\t\\tif (firstBanner.link) {\\n\\t\\t\\t\\t\\twindow.open(firstBanner.link, '_system');\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\tonClose() {\\n\\t\\t\\t\\tdismissUserBanner({ id: firstBanner.id });\\n\\t\\t\\t},\\n\\t\\t});\\n\\t}, [dismissUserBanner, t, user?.banners]);\\n};\\n\",null],\"names\":[\"useTranslation\",\"useUser\",\"useEffect\",\"banners\",\"useDismissUserBannerMutation\",\"module\",\"export\",\"useUserBanners\",\"link\",\"v\",\"user\",\"t\",\"mutate\",\"dismissUserBanner\",\"Object\",\"keys\",\"length\",\"firstBanner\",\"values\",\"filter\",\"b\",\"read\",\"sort\",\"a\",\"priority\",\"open\",\"id\",\"title\",\"has\",\"text\",\"textArguments\",\"modifiers\",\"action\",\"window\",\"onClose\"],\"mappings\":\"2BAAwCA,EAA2BC,EAAAC,EAAAC,EAAAC,EAAnEC,EAAOC,MAAE,CAAA,CAAAC,eAAgBA,IAASA,CAAM,GAA2BF,EAAAG,IAAA,CAAA,2BAAA,CAAAR,eAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,QAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAN,UAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,uBAAA,CAAA,IAAAC,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,iCAAA,CAAAJ,6BAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAM5D,IAAMF,EAAiBA,KAC7B,IAAMG,EAAOT,IAEPU,EAAIX,IACJ,CAAEY,OAAQC,CAAAA,CAAmB,CAAGT,IAEtCF,EAAU,KACT,GAAI,CAACQ,CAAAA,MAAAA,GAAAA,EAAMP,OAAO,AAAPA,GAAWW,AAAqC,IAArCA,OAAOC,IAAI,CAACL,EAAKP,OAAO,EAAEa,MAAM,CACrD,OAGD,IAAMC,EAAcH,OAAOI,MAAM,CAACR,EAAKP,OAAO,EAC5CgB,MAAM,CAAEC,GAAMA,AAAW,CAAA,IAAXA,EAAEC,IAAI,EACpBC,IAAI,CAAC,CAACC,EAAGH,IAAMA,EAAEI,QAAQ,CAAGD,EAAEC,QAAQ,CAAC,CAAC,EAAE,CAEvCP,GAILd,EAAQsB,IAAI,CAAC,CACZC,GAAIT,EAAYS,EAAE,CAClBC,MAAOhB,EAAEiB,GAAG,CAACX,EAAYU,KAAK,EAAIhB,EAAEM,EAAYU,KAAK,EAAIV,EAAYU,KAAK,CAC1EE,KAAMlB,EAAEiB,GAAG,CAACX,EAAYY,IAAI,EAAIlB,EAAEM,EAAYY,IAAI,CAAEZ,EAAYa,aAAa,EAAIb,EAAYY,IAAI,CACjGE,UAAWd,EAAYc,SAAS,CAChCC,SACKf,EAAYT,IAAI,EACnByB,OAAOR,IAAI,CAACR,EAAYT,IAAI,CAAE,UAEhC,EACA0B,UACCrB,EAAkB,CAAEa,GAAIT,EAAYS,EAAAA,AAAE,EACvC,GAEF,EAAG,CAACb,EAAmBF,EAAGD,MAAAA,EAAI,KAAA,EAAJA,EAAMP,OAAO,CAAC,CACzC\"}"}