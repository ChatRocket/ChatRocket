{"code":"function module(e,t,n){var r,a,u,i,s,l,o;n.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),n.link(\"@rocket.chat/fuselage\",{Skeleton:function(e){a=e}},0),n.link(\"@tanstack/react-query\",{useQuery:function(e){u=e}},1),n.link(\"react\",{default:function(e){i=e}},2),n.link(\"react-i18next\",{useTranslation:function(e){s=e}},3),n.link(\"../../../../views/room/contextualBar/Threads/hooks/useGetMessageByID\",{useGetMessageByID:function(e){l=e}},4),n.link(\"../../../MarkdownText\",{default:function(e){o=e}},5),n.exportDefault(function(e){var t,n,c=e.emojiName,d=e.usernames,f=e.mine,h=e.messageId,m=e.showRealName,g=e.username,k=s().t,x=0===d.length&&f?\"You_reacted_with\":d.length>10?f?\"You_users_and_more_Reacted_with\":\"Users_and_more_reacted_with\":f?\"You_and_users_Reacted_with\":\"Users_reacted_with\",_=l(),b=u([\"chat.getMessage\",\"reactions\",h,d],function(){var e,t,n;return r.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(d.length){a.next=2;break}return a.abrupt(\"return\",[]);case 2:if(m){a.next=4;break}return a.abrupt(\"return\",d);case 4:return a.next=6,r.awrap(_(h));case 6:if(e=a.sent.reactions){a.next=10;break}return a.abrupt(\"return\",[]);case 10:if(!g){a.next=14;break}return(n=e[c].usernames.indexOf(g))>=0&&(null===(t=e[c].names)||void 0===t||t.splice(n,1)),a.abrupt(\"return\",(e[c].names||d).filter(Boolean));case 14:return a.abrupt(\"return\",e[c].names||d);case 15:case\"end\":return a.stop()}},null,null,null,Promise)},{staleTime:3e5}),w=b.data;return b.isLoading?i.createElement(i.Fragment,null,i.createElement(a,{width:\"x200\",variant:\"text\",backgroundColor:\"surface-light\"}),i.createElement(a,{width:\"x200\",variant:\"text\",backgroundColor:\"surface-light\"}),d.length>5&&i.createElement(a,{width:\"x200\",variant:\"text\",backgroundColor:\"surface-light\"}),d.length>8&&i.createElement(a,{width:\"x200\",variant:\"text\",backgroundColor:\"surface-light\"})):i.createElement(o,{content:k(x,{counter:d.length>10?d.length-10:d.length,users:(null==w?void 0:w.slice(0,10).join(\", \"))||\"\",emoji:c}),variant:\"inline\"})})}","map":"{\"version\":3,\"sources\":[\"client/components/message/content/reactions/ReactionTooltip.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Skeleton } from '@rocket.chat/fuselage';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useGetMessageByID } from '../../../../views/room/contextualBar/Threads/hooks/useGetMessageByID';\\nimport MarkdownText from '../../../MarkdownText';\\n\\ntype ReactionTooltipProps = {\\n\\temojiName: string;\\n\\tusernames: string[];\\n\\tusername: string | undefined;\\n\\tmine: boolean;\\n\\tshowRealName: boolean;\\n\\tmessageId: string;\\n};\\n\\nconst getTranslationKey = (users: string[], mine: boolean): TranslationKey => {\\n\\tif (users.length === 0) {\\n\\t\\tif (mine) {\\n\\t\\t\\treturn 'You_reacted_with';\\n\\t\\t}\\n\\t}\\n\\n\\tif (users.length > 10) {\\n\\t\\tif (mine) {\\n\\t\\t\\treturn 'You_users_and_more_Reacted_with';\\n\\t\\t}\\n\\t\\treturn 'Users_and_more_reacted_with';\\n\\t}\\n\\n\\tif (mine) {\\n\\t\\treturn 'You_and_users_Reacted_with';\\n\\t}\\n\\treturn 'Users_reacted_with';\\n};\\n\\nconst ReactionTooltip = ({ emojiName, usernames, mine, messageId, showRealName, username }: ReactionTooltipProps) => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst key = getTranslationKey(usernames, mine);\\n\\n\\tconst getMessage = useGetMessageByID();\\n\\n\\tconst { data: users, isLoading } = useQuery(\\n\\t\\t['chat.getMessage', 'reactions', messageId, usernames],\\n\\t\\tasync () => {\\n\\t\\t\\t// This happens if the only reaction is from the current user\\n\\t\\t\\tif (!usernames.length) {\\n\\t\\t\\t\\treturn [];\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (!showRealName) {\\n\\t\\t\\t\\treturn usernames;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst data = await getMessage(messageId);\\n\\n\\t\\t\\tconst { reactions } = data;\\n\\n\\t\\t\\tif (!reactions) {\\n\\t\\t\\t\\treturn [];\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (username) {\\n\\t\\t\\t\\tconst index = reactions[emojiName].usernames.indexOf(username);\\n\\t\\t\\t\\tindex >= 0 && reactions[emojiName].names?.splice(index, 1);\\n\\t\\t\\t\\treturn (reactions[emojiName].names || usernames).filter(Boolean);\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn reactions[emojiName].names || usernames;\\n\\t\\t},\\n\\t\\t{ staleTime: 1000 * 60 * 5 },\\n\\t);\\n\\n\\tif (isLoading) {\\n\\t\\treturn (\\n\\t\\t\\t<>\\n\\t\\t\\t\\t<Skeleton width='x200' variant='text' backgroundColor='surface-light' />\\n\\t\\t\\t\\t<Skeleton width='x200' variant='text' backgroundColor='surface-light' />\\n\\t\\t\\t\\t{usernames.length > 5 && <Skeleton width='x200' variant='text' backgroundColor='surface-light' />}\\n\\t\\t\\t\\t{usernames.length > 8 && <Skeleton width='x200' variant='text' backgroundColor='surface-light' />}\\n\\t\\t\\t</>\\n\\t\\t);\\n\\t}\\n\\n\\treturn (\\n\\t\\t<MarkdownText\\n\\t\\t\\tcontent={t(key, {\\n\\t\\t\\t\\tcounter: usernames.length > 10 ? usernames.length - 10 : usernames.length,\\n\\t\\t\\t\\tusers: users?.slice(0, 10).join(', ') || '',\\n\\t\\t\\t\\temoji: emojiName,\\n\\t\\t\\t})}\\n\\t\\t\\tvariant='inline'\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default ReactionTooltip;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"Skeleton\",\"useQuery\",\"React\",\"useTranslation\",\"useGetMessageByID\",\"MarkdownText\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"users\",\"mine\",\"emojiName\",\"usernames\",\"messageId\",\"showRealName\",\"username\",\"t\",\"_useTranslation\",\"key\",\"length\",\"getMessage\",\"_useQuery\",\"reactions\",\"_reactions$emojiName$\",\"index\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"awrap\",\"data\",\"sent\",\"indexOf\",\"names\",\"splice\",\"filter\",\"Boolean\",\"stop\",\"Promise\",\"staleTime\",\"isLoading\",\"createElement\",\"Fragment\",\"width\",\"variant\",\"backgroundColor\",\"content\",\"counter\",\"slice\",\"join\",\"emoji\"],\"mappings\":\"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\"}"}