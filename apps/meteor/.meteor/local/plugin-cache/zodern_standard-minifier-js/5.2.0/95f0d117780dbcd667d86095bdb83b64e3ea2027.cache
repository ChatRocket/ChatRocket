{"code":"function module(e,t,r){let o,i,n,a,l,s,d,m;r.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){o=e}},0),r.link(\"meteor/meteor\",{Meteor(e){i=e}},0),r.link(\"meteor/tracker\",{Tracker(e){n=e}},1),r.link(\"../../../../client/lib/rooms/roomCoordinator\",{roomCoordinator(e){a=e}},2),r.link(\"../../../../client/lib/utils/messageArgs\",{messageArgs(e){l=e}},3),r.link(\"../../../../client/providers/RouterProvider\",{router(e){s=e}},4),r.link(\"../../../settings/client\",{settings(e){d=e}},5),r.link(\"../../../ui-utils/client\",{MessageAction(e){m=e}},6),i.startup(()=>{n.autorun(()=>{if(!d.get(\"Threads_enabled\"))return m.removeButton(\"reply-in-thread\");m.addButton({id:\"reply-in-thread\",icon:\"thread\",label:\"Reply_in_thread\",context:[\"message\",\"message-mobile\",\"federated\",\"videoconf\"],action(e,t){let{message:r=l(this).msg}=t;null==e||e.stopPropagation(),s.navigate({name:s.getRouteName(),params:o(o({},s.getRouteParameters()),{},{tab:\"thread\",context:r.tmid||r._id})})},condition(e){let{subscription:t,room:r}=e,o=a.isLivechatRoom(r.t);return!o&&!!t},order:-1,group:\"message\"})})})}","map":"{\"version\":3,\"sources\":[\"app/threads/client/messageAction/replyInThread.ts\",\"<anon>\"],\"sourcesContent\":[\"import { Meteor } from 'meteor/meteor';\\nimport { Tracker } from 'meteor/tracker';\\n\\nimport { roomCoordinator } from '../../../../client/lib/rooms/roomCoordinator';\\nimport { messageArgs } from '../../../../client/lib/utils/messageArgs';\\nimport { router } from '../../../../client/providers/RouterProvider';\\nimport { settings } from '../../../settings/client';\\nimport { MessageAction } from '../../../ui-utils/client';\\n\\nMeteor.startup(() => {\\n\\tTracker.autorun(() => {\\n\\t\\tif (!settings.get('Threads_enabled')) {\\n\\t\\t\\treturn MessageAction.removeButton('reply-in-thread');\\n\\t\\t}\\n\\t\\tMessageAction.addButton({\\n\\t\\t\\tid: 'reply-in-thread',\\n\\t\\t\\ticon: 'thread',\\n\\t\\t\\tlabel: 'Reply_in_thread',\\n\\t\\t\\tcontext: ['message', 'message-mobile', 'federated', 'videoconf'],\\n\\t\\t\\taction(e, props) {\\n\\t\\t\\t\\tconst { message = messageArgs(this).msg } = props;\\n\\t\\t\\t\\te?.stopPropagation();\\n\\t\\t\\t\\trouter.navigate({\\n\\t\\t\\t\\t\\tname: router.getRouteName()!,\\n\\t\\t\\t\\t\\tparams: {\\n\\t\\t\\t\\t\\t\\t...router.getRouteParameters(),\\n\\t\\t\\t\\t\\t\\ttab: 'thread',\\n\\t\\t\\t\\t\\t\\tcontext: message.tmid || message._id,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t});\\n\\t\\t\\t},\\n\\t\\t\\tcondition({ subscription, room }) {\\n\\t\\t\\t\\tconst isLivechatRoom = roomCoordinator.isLivechatRoom(room.t);\\n\\t\\t\\t\\tif (isLivechatRoom) {\\n\\t\\t\\t\\t\\treturn false;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\treturn Boolean(subscription);\\n\\t\\t\\t},\\n\\t\\t\\torder: -1,\\n\\t\\t\\tgroup: 'message',\\n\\t\\t});\\n\\t});\\n});\\n\",null],\"names\":[\"_objectSpread\",\"Meteor\",\"Tracker\",\"roomCoordinator\",\"messageArgs\",\"router\",\"settings\",\"MessageAction\",\"module\",\"link\",\"default\",\"v\",\"startup\",\"autorun\",\"get\",\"removeButton\",\"addButton\",\"id\",\"icon\",\"label\",\"context\",\"action\",\"e\",\"props\",\"message\",\"msg\",\"stopPropagation\",\"navigate\",\"name\",\"getRouteName\",\"params\",\"getRouteParameters\",\"tab\",\"tmid\",\"_id\",\"condition\",\"_ref\",\"subscription\",\"room\",\"isLivechatRoom\",\"t\",\"Boolean\",\"order\",\"group\"],\"mappings\":\"2BAAAA,EAAAC,EAAuCC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAtBC,EAAMC,IAAA,CAAA,uCAAgB,CAAAC,QAAAC,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAA9BH,EAAQC,IAAA,CAAM,gBAAgB,CAAAR,OAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iBAAA,CAAAP,QAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,+CAAA,CAAAN,gBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAAL,YAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8CAAA,CAAAJ,OAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAH,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAF,cAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GASvCV,EAAOW,OAAO,CAAC,KACdV,EAAQW,OAAO,CAAC,KACf,GAAI,CAACP,EAASQ,GAAG,CAAC,mBACjB,OAAOP,EAAcQ,YAAY,CAAC,mBAEnCR,EAAcS,SAAS,CAAC,CACvBC,GAAI,kBACJC,KAAM,SACNC,MAAO,kBACPC,QAAS,CAAC,UAAW,iBAAkB,YAAa,YAAY,CAChEC,OAAOC,CAAC,CAAEC,CAAK,EACd,GAAM,CAAEC,QAAAA,EAAUpB,EAAY,IAAI,EAAEqB,GAAAA,CAAK,CAAGF,CAC5CD,OAAAA,GAAAA,EAAGI,eAAe,GAClBrB,EAAOsB,QAAQ,CAAC,CACfC,KAAMvB,EAAOwB,YAAY,GACzBC,OAAM9B,EAAAA,EAAA,CAAA,EACFK,EAAO0B,kBAAkB,IAAE,CAAA,EAAA,CAC9BC,IAAK,SACLZ,QAASI,EAAQS,IAAI,EAAIT,EAAQU,GAAAA,AAAG,IAGvC,EACAC,UAASC,CAAA,EAAuB,GAAtB,CAAEC,aAAAA,CAAY,CAAEC,KAAAA,CAAAA,CAAM,CAAAF,EACzBG,EAAiBpC,EAAgBoC,cAAc,CAACD,EAAKE,CAAC,QAC5D,CAAID,GAGGE,CAAAA,CAAQJ,CAChB,EACAK,MAAO,GACPC,MAAO,WAET,EACD\"}"}