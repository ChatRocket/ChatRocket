{"code":"function module(e,t,l){let n,a,r,c,u,i,s,o,d,m,E,k,f,g,h,y,T,p,G;l.link(\"@rocket.chat/fuselage\",{Field(e){n=e},FieldLabel(e){a=e},FieldRow(e){r=e}},0),l.link(\"@rocket.chat/ui-contexts\",{useTranslation(e){c=e},useMethod(e){u=e},useToastMessageDispatch(e){i=e}},1),l.link(\"@tanstack/react-query\",{useQuery(e){s=e}},2),l.link(\"react\",{default(e){o=e},useState(e){d=e}},3),l.link(\"../../../components/GenericNoResults\",{default(e){m=e}},4),l.link(\"../../../components/GenericTable\",{GenericTable(e){E=e},GenericTableHeaderCell(e){k=e},GenericTableBody(e){f=e},GenericTableLoadingRow(e){g=e},GenericTableHeader(e){h=e}},5),l.link(\"../utils/dateRange\",{createEndOfToday(e){y=e},createStartOfToday(e){T=e}},6),l.link(\"./AuditLogEntry\",{default(e){p=e}},7),l.link(\"./forms/DateRangePicker\",{default(e){G=e}},8),l.exportDefault(()=>{let e=c(),[t,l]=d(()=>({start:T(),end:y()})),D=i(),b=u(\"auditGetAuditions\"),{data:w,isLoading:F,isSuccess:R}=s([\"audits\",t],async()=>{let{start:e,end:l}=t;return b({startDate:null!=e?e:new Date(0),endDate:null!=l?l:new Date})},{onError:e=>{D({type:\"error\",message:e})}}),x=o.createElement(o.Fragment,null,o.createElement(k,null,e(\"User\")),o.createElement(k,null,e(\"Looked_for\")),o.createElement(k,null,e(\"When\")),o.createElement(k,{width:80},e(\"Results\")),o.createElement(k,null,e(\"Filters_applied\")));return o.createElement(o.Fragment,null,o.createElement(n,{alignSelf:\"stretch\"},o.createElement(a,null,e(\"Date\")),o.createElement(r,null,o.createElement(G,{display:\"flex\",flexGrow:1,value:t,onChange:l}))),F&&o.createElement(E,null,o.createElement(h,null,x),o.createElement(f,null,o.createElement(g,{cols:4}))),R&&0===w.length&&o.createElement(m,null),R&&w.length>0&&o.createElement(E,null,o.createElement(h,null,x),o.createElement(f,null,w.map(e=>o.createElement(p,{key:e._id,value:e})))))})}","map":"{\"version\":3,\"sources\":[\"client/views/audit/components/AuditLogTable.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Field, FieldLabel, FieldRow } from '@rocket.chat/fuselage';\\nimport { useTranslation, useMethod, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React, { useState } from 'react';\\n\\nimport GenericNoResults from '../../../components/GenericNoResults';\\nimport {\\n\\tGenericTable,\\n\\tGenericTableHeaderCell,\\n\\tGenericTableBody,\\n\\tGenericTableLoadingRow,\\n\\tGenericTableHeader,\\n} from '../../../components/GenericTable';\\nimport { createEndOfToday, createStartOfToday } from '../utils/dateRange';\\nimport type { DateRange } from '../utils/dateRange';\\nimport AuditLogEntry from './AuditLogEntry';\\nimport DateRangePicker from './forms/DateRangePicker';\\n\\nconst AuditLogTable = (): ReactElement => {\\n\\tconst t = useTranslation();\\n\\n\\tconst [dateRange, setDateRange] = useState<DateRange>(() => ({\\n\\t\\tstart: createStartOfToday(),\\n\\t\\tend: createEndOfToday(),\\n\\t}));\\n\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst getAudits = useMethod('auditGetAuditions');\\n\\n\\tconst { data, isLoading, isSuccess } = useQuery(\\n\\t\\t['audits', dateRange],\\n\\t\\tasync () => {\\n\\t\\t\\tconst { start, end } = dateRange;\\n\\t\\t\\treturn getAudits({ startDate: start ?? new Date(0), endDate: end ?? new Date() });\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tonError: (error) => {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n\\n\\tconst headers = (\\n\\t\\t<>\\n\\t\\t\\t<GenericTableHeaderCell>{t('User')}</GenericTableHeaderCell>\\n\\t\\t\\t<GenericTableHeaderCell>{t('Looked_for')}</GenericTableHeaderCell>\\n\\t\\t\\t<GenericTableHeaderCell>{t('When')}</GenericTableHeaderCell>\\n\\t\\t\\t<GenericTableHeaderCell width={80}>{t('Results')}</GenericTableHeaderCell>\\n\\t\\t\\t<GenericTableHeaderCell>{t('Filters_applied')}</GenericTableHeaderCell>\\n\\t\\t</>\\n\\t);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<Field alignSelf='stretch'>\\n\\t\\t\\t\\t<FieldLabel>{t('Date')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<DateRangePicker display='flex' flexGrow={1} value={dateRange} onChange={setDateRange} />\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t</Field>\\n\\t\\t\\t{isLoading && (\\n\\t\\t\\t\\t<GenericTable>\\n\\t\\t\\t\\t\\t<GenericTableHeader>{headers}</GenericTableHeader>\\n\\t\\t\\t\\t\\t<GenericTableBody>\\n\\t\\t\\t\\t\\t\\t<GenericTableLoadingRow cols={4} />\\n\\t\\t\\t\\t\\t</GenericTableBody>\\n\\t\\t\\t\\t</GenericTable>\\n\\t\\t\\t)}\\n\\t\\t\\t{isSuccess && data.length === 0 && <GenericNoResults />}\\n\\t\\t\\t{isSuccess && data.length > 0 && (\\n\\t\\t\\t\\t<GenericTable>\\n\\t\\t\\t\\t\\t<GenericTableHeader>{headers}</GenericTableHeader>\\n\\t\\t\\t\\t\\t<GenericTableBody>\\n\\t\\t\\t\\t\\t\\t{data.map((auditLog) => (\\n\\t\\t\\t\\t\\t\\t\\t<AuditLogEntry key={auditLog._id} value={auditLog} />\\n\\t\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t\\t</GenericTableBody>\\n\\t\\t\\t\\t</GenericTable>\\n\\t\\t\\t)}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default AuditLogTable;\\n\",null],\"names\":[\"Field\",\"FieldLabel\",\"FieldRow\",\"useTranslation\",\"useMethod\",\"useToastMessageDispatch\",\"useQuery\",\"React\",\"useState\",\"GenericNoResults\",\"GenericTable\",\"GenericTableHeaderCell\",\"GenericTableBody\",\"GenericTableLoadingRow\",\"GenericTableHeader\",\"createEndOfToday\",\"createStartOfToday\",\"AuditLogEntry\",\"DateRangePicker\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"AuditLogTable\",\"t\",\"dateRange\",\"setDateRange\",\"start\",\"end\",\"dispatchToastMessage\",\"getAudits\",\"data\",\"isLoading\",\"isSuccess\",\"startDate\",\"Date\",\"endDate\",\"onError\",\"error\",\"type\",\"message\",\"headers\",\"createElement\",\"Fragment\",\"width\",\"alignSelf\",\"display\",\"flexGrow\",\"value\",\"onChange\",\"cols\",\"length\",\"map\",\"auditLog\",\"key\",\"_id\"],\"mappings\":\"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\"}"}