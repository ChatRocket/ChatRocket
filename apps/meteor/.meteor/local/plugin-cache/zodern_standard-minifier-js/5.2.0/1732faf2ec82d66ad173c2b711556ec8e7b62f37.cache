{"code":"function module(e,t,i){let o,r,n;i.export({useClearRemovedRoomsHistory:()=>c}),i.link(\"@rocket.chat/ui-contexts\",{useStream(e){o=e}},0),i.link(\"react\",{useEffect(e){r=e}},1),i.link(\"../../../../app/ui-utils/client\",{RoomHistoryManager(e){n=e}},2);let c=e=>{let t=o(\"notify-user\");r(()=>{if(e)return t(\"\".concat(e,\"/subscriptions-changed\"),(e,t)=>{\"l\"!==t.t&&\"removed\"===e&&t.rid&&n.clear(t.rid)})},[e,t])}}","map":"{\"version\":3,\"sources\":[\"client/providers/UserProvider/hooks/useClearRemovedRoomsHistory.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useStream } from '@rocket.chat/ui-contexts';\\nimport { useEffect } from 'react';\\n\\nimport { RoomHistoryManager } from '../../../../app/ui-utils/client';\\n\\nexport const useClearRemovedRoomsHistory = (userId: string | null) => {\\n\\tconst subscribeToNotifyUser = useStream('notify-user');\\n\\tuseEffect(() => {\\n\\t\\tif (!userId) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\treturn subscribeToNotifyUser(`${userId}/subscriptions-changed`, (event, data) => {\\n\\t\\t\\tif (data.t !== 'l' && event === 'removed' && data.rid) {\\n\\t\\t\\t\\tRoomHistoryManager.clear(data.rid);\\n\\t\\t\\t}\\n\\t\\t});\\n\\t}, [userId, subscribeToNotifyUser]);\\n};\\n\",null],\"names\":[\"useStream\",\"useEffect\",\"RoomHistoryManager\",\"module\",\"export\",\"useClearRemovedRoomsHistory\",\"link\",\"v\",\"userId\",\"subscribeToNotifyUser\",\"concat\",\"event\",\"data\",\"t\",\"rid\",\"clear\"],\"mappings\":\"2BAAqDA,EAAAC,EAAAC,EAArDC,EAAOC,MAAE,CAAA,CAAAC,4BAAiBA,IAAAA,CAA2B,GAAAF,EAAAG,IAAA,CAAA,2BAAA,CAAAN,UAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAL,UAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,kCAAA,CAAAJ,mBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAK9C,IAAMF,EAA+BG,IAC3C,IAAMC,EAAwBT,EAAU,eACxCC,EAAU,KACT,GAAKO,EAIL,OAAOC,EAAqB,GAAAC,MAAA,CAAIF,EAAM,0BAA0B,CAACG,EAAOC,KACxD,MAAXA,EAAKC,CAAC,EAAYF,AAAU,YAAVA,GAAuBC,EAAKE,GAAG,EACpDZ,EAAmBa,KAAK,CAACH,EAAKE,GAAG,CAEnC,EACD,EAAG,CAACN,EAAQC,EAAsB,CACnC\"}"}