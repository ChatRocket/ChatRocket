{"code":"function module(t,n,e){e.export({useListIsAtBottom:function(){return c}}),e.link(\"@rocket.chat/fuselage-hooks\",{useMergedRefs:function(t){o=t}},0),e.link(\"react\",{useCallback:function(t){r=t},useRef:function(t){i=t}},1),e.link(\"../../../../../app/ui/client/views/app/lib/scrolling\",{isAtBottom:function(t){u=t}},2),e.link(\"../../../../../lib/utils/highOrderFunctions\",{withThrottling:function(t){l=t}},3);var o,r,i,u,l,c=function(){var t=i(!0),n=i(null),e=r(function(){var t,e;null===(t=n.current)||void 0===t||t.scrollTo({left:30,top:null===(e=n.current)||void 0===e?void 0:e.scrollHeight})},[]),c=r(function(){!0===t.current&&e()},[t,e]),s=r(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return!n.current||u(n.current,t)},[]),f=r(function(n){if(n){var e=n.querySelector(\"ul\");e&&(new ResizeObserver(function(){!0===t.current&&n.scrollTo({left:30,top:n.scrollHeight})}).observe(e),n.addEventListener(\"scroll\",l({wait:100})(function(){t.current=s(100)}),{passive:!0}))}},[s]);return{atBottomRef:t,innerRef:o(f,n),sendToBottom:e,sendToBottomIfNecessary:c,isAtBottom:s}}}","map":"{\"version\":3,\"sources\":[\"client/views/room/body/hooks/useListIsAtBottom.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useMergedRefs } from '@rocket.chat/fuselage-hooks';\\nimport { useCallback, useRef } from 'react';\\n\\nimport { isAtBottom as isAtBottomLib } from '../../../../../app/ui/client/views/app/lib/scrolling';\\nimport { withThrottling } from '../../../../../lib/utils/highOrderFunctions';\\n\\nexport const useListIsAtBottom = () => {\\n\\tconst atBottomRef = useRef(true);\\n\\n\\tconst innerBoxRef = useRef<HTMLDivElement | null>(null);\\n\\n\\tconst sendToBottom = useCallback(() => {\\n\\t\\tinnerBoxRef.current?.scrollTo({ left: 30, top: innerBoxRef.current?.scrollHeight });\\n\\t}, []);\\n\\n\\tconst sendToBottomIfNecessary = useCallback(() => {\\n\\t\\tif (atBottomRef.current === true) {\\n\\t\\t\\tsendToBottom();\\n\\t\\t}\\n\\t}, [atBottomRef, sendToBottom]);\\n\\n\\tconst isAtBottom = useCallback((threshold = 0) => {\\n\\t\\tif (!innerBoxRef.current) {\\n\\t\\t\\treturn true;\\n\\t\\t}\\n\\t\\treturn isAtBottomLib(innerBoxRef.current, threshold);\\n\\t}, []);\\n\\n\\tconst ref = useCallback(\\n\\t\\t(node: HTMLElement | null) => {\\n\\t\\t\\tif (!node) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst messageList = node.querySelector('ul');\\n\\n\\t\\t\\tif (!messageList) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst observer = new ResizeObserver(() => {\\n\\t\\t\\t\\tif (atBottomRef.current === true) {\\n\\t\\t\\t\\t\\tnode.scrollTo({ left: 30, top: node.scrollHeight });\\n\\t\\t\\t\\t}\\n\\t\\t\\t});\\n\\n\\t\\t\\tobserver.observe(messageList);\\n\\n\\t\\t\\tnode.addEventListener(\\n\\t\\t\\t\\t'scroll',\\n\\t\\t\\t\\twithThrottling({ wait: 100 })(() => {\\n\\t\\t\\t\\t\\tatBottomRef.current = isAtBottom(100);\\n\\t\\t\\t\\t}),\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tpassive: true,\\n\\t\\t\\t\\t},\\n\\t\\t\\t);\\n\\t\\t},\\n\\t\\t[isAtBottom],\\n\\t);\\n\\n\\treturn {\\n\\t\\tatBottomRef,\\n\\t\\tinnerRef: useMergedRefs(ref, innerBoxRef) as unknown as React.MutableRefObject<HTMLDivElement | null>,\\n\\t\\tsendToBottom,\\n\\t\\tsendToBottomIfNecessary,\\n\\t\\tisAtBottom,\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"export\",\"useListIsAtBottom\",\"link\",\"useMergedRefs\",\"v\",\"useCallback\",\"useRef\",\"isAtBottom\",\"isAtBottomLib\",\"withThrottling\",\"atBottomRef\",\"innerBoxRef\",\"sendToBottom\",\"_innerBoxRef$current\",\"_innerBoxRef$current2\",\"current\",\"scrollTo\",\"left\",\"top\",\"scrollHeight\",\"sendToBottomIfNecessary\",\"threshold\",\"arguments\",\"length\",\"undefined\",\"ref\",\"node\",\"messageList\",\"querySelector\",\"observer\",\"ResizeObserver\",\"observe\",\"addEventListener\",\"wait\",\"passive\",\"innerRef\"],\"mappings\":\"uBAAAA,EAAOC,MAAE,CAAA,CAAAC,kBAAqB,WAAA,OAAAA,CAA8B,CAAA,GAAAF,EAAAG,IAAA,CAAA,8BAAA,CAAAC,cAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,QAAA,CAAAG,YAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,EAAAE,OAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,uDAAA,CAAAK,WAAA,SAAAH,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,8CAAA,CAAAO,eAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAMrD,IANqDD,EAAAE,EAAAC,EAAAE,EAAAC,EAM/CR,EAAoB,WAChC,IAAMS,EAAcJ,EAAO,CAAA,GAErBK,EAAcL,EAA8B,MAE5CM,EAAeP,EAAY,WAAK,IAAAQ,EAAAC,CACrC,AAAmB,QAAnBD,CAAAA,EAAAF,EAAYI,OAAO,AAAPA,GAAOF,AAAA,KAAA,IAAAA,GAAnBA,EAAqBG,QAAQ,CAAC,CAAEC,KAAM,GAAIC,IAAG,AAAqB,OAArBJ,CAAAA,EAAEH,EAAYI,OAAO,AAAPA,GAAOD,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAnBA,EAAqBK,YAAAA,AAAY,EACjF,EAAG,EAAE,EAECC,EAA0Bf,EAAY,WACf,CAAA,IAAxBK,EAAYK,OAAO,EACtBH,GAEF,EAAG,CAACF,EAAaE,EAAa,EAExBL,EAAaF,EAAY,WAAkB,IAAjBgB,EAASC,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,QAC3C,CAAKX,EAAYI,OAAO,EAGjBP,EAAcG,EAAYI,OAAO,CAAEM,EAC3C,EAAG,EAAE,EAECI,EAAMpB,EACX,SAACqB,CAAwB,EACxB,GAAKA,GAIL,IAAMC,EAAcD,EAAKE,aAAa,CAAC,MAElCD,IAULE,AANiB,IAAIC,eAAe,WACP,CAAA,IAAxBpB,EAAYK,OAAO,EACtBW,EAAKV,QAAQ,CAAC,CAAEC,KAAM,GAAIC,IAAKQ,EAAKP,YAAAA,AAAY,EAElD,GAESY,OAAO,CAACJ,GAEjBD,EAAKM,gBAAgB,CACpB,SACAvB,EAAe,CAAEwB,KAAM,GAAG,GAAI,WAC7BvB,EAAYK,OAAO,CAAGR,EAAW,IAClC,GACA,CACC2B,QAAS,CAAA,KAGZ,EACA,CAAC3B,EAAW,EAGb,MAAO,CACNG,YAAAA,EACAyB,SAAUhC,EAAcsB,EAAKd,GAC7BC,aAAAA,EACAQ,wBAAAA,EACAb,WAAAA,EAEF\"}"}