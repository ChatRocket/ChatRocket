{"code":"function module(e,t,n){var u,l,i,r,a,o,c,f,s,d,v,m=[\"value\",\"onChange\"],k=[\"value\"];n.link(\"@babel/runtime/helpers/extends\",{default:function(e){u=e}},0),n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){l=e}},1),n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){i=e}},2),n.link(\"@rocket.chat/fuselage\",{AutoComplete:function(e){r=e},Option:function(e){a=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){o=e}},1),n.link(\"@tanstack/react-query\",{useQuery:function(e){c=e}},2),n.link(\"react\",{default:function(e){f=e},memo:function(e){s=e},useMemo:function(e){d=e},useState:function(e){v=e}},3),n.exportDefault(s(function(e){var t=e.value,n=e.onChange,s=i(e,m),p=v(\"\"),h=l(p,2),b=h[0],g=h[1],y=o(\"GET\",\"/v1/livechat/visitors.autocomplete\"),E=c([\"audit\",\"visitors\",b],function(){return y({selector:JSON.stringify({term:null!=b?b:\"\"})})}),C=d(function(){var e,t;return null!==(e=null===(t=E.data)||void 0===t?void 0:t.items.map(function(e){var t;return{value:e._id,label:null!==(t=e.name)&&void 0!==t?t:e.username}}))&&void 0!==e?e:[]},[E.data]);return f.createElement(r,u({},s,{value:t,onChange:n,filter:b,setFilter:g,renderSelected:function(e){var t=e.selected.label;return f.createElement(f.Fragment,null,t)},renderItem:function(e){var t=e.value,n=i(e,k);return f.createElement(a,u({key:t},n))},options:C}))}))}","map":"{\"version\":3,\"sources\":[\"client/views/audit/components/forms/VisitorAutoComplete.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { AutoComplete, Option } from '@rocket.chat/fuselage';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ComponentProps, ReactElement } from 'react';\\nimport React, { memo, useMemo, useState } from 'react';\\n\\ntype VisitorAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'>;\\n\\nconst VisitorAutoComplete = ({ value, onChange, ...props }: VisitorAutoCompleteProps): ReactElement => {\\n\\tconst [filter, setFilter] = useState('');\\n\\n\\tconst performVisitorSearch = useEndpoint('GET', '/v1/livechat/visitors.autocomplete');\\n\\n\\tconst visitorAutocompleteQueryResult = useQuery(['audit', 'visitors', filter], () =>\\n\\t\\tperformVisitorSearch({ selector: JSON.stringify({ term: filter ?? '' }) }),\\n\\t);\\n\\n\\tconst options = useMemo(\\n\\t\\t() => visitorAutocompleteQueryResult.data?.items.map((user) => ({ value: user._id, label: user.name ?? user.username })) ?? [],\\n\\t\\t[visitorAutocompleteQueryResult.data],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<AutoComplete\\n\\t\\t\\t{...props}\\n\\t\\t\\tvalue={value}\\n\\t\\t\\tonChange={onChange}\\n\\t\\t\\tfilter={filter}\\n\\t\\t\\tsetFilter={setFilter}\\n\\t\\t\\trenderSelected={({ selected: { label } }) => <>{label}</>}\\n\\t\\t\\trenderItem={({ value, ...props }) => <Option key={value} {...props} />}\\n\\t\\t\\toptions={options}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(VisitorAutoComplete);\\n\",null],\"names\":[\"_extends\",\"_slicedToArray\",\"_objectWithoutProperties\",\"AutoComplete\",\"Option\",\"useEndpoint\",\"useQuery\",\"React\",\"memo\",\"useMemo\",\"useState\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"value\",\"onChange\",\"props\",\"_excluded\",\"_useState\",\"_useState2\",\"filter\",\"setFilter\",\"performVisitorSearch\",\"visitorAutocompleteQueryResult\",\"selector\",\"JSON\",\"stringify\",\"term\",\"options\",\"_visitorAutocompleteQ\",\"_visitorAutocompleteQ2\",\"data\",\"items\",\"map\",\"user\",\"_user$name\",\"_id\",\"label\",\"name\",\"username\",\"createElement\",\"renderSelected\",\"_ref2\",\"selected\",\"Fragment\",\"renderItem\",\"_ref3\",\"_excluded2\",\"key\"],\"mappings\":\"2BAAAA,EAA6DC,EAAAC,EAA7DC,EAASC,EAAoDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,qCAApDC,EAAAC,IAAc,CAAA,iCAAc,CAAAC,QAAwB,SAAAC,CAAA,EAAAd,EAAAc,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iDAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAtCH,EAAQC,IAAA,CAAA,wBAA6B,CAACT,aAAA,SAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,OAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAP,YAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAN,SAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAP,EAAAO,CAAA,EAAAN,KAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,QAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,SAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA7DH,EAAOI,aAAE,CAoCMP,EA5Ba,SAAAQ,CAAA,EAA0E,IAAvEC,EAAKD,EAALC,KAAK,CAAEC,EAAQF,EAARE,QAAQ,CAAKC,EAAKjB,EAAAc,EAAAI,GACvDC,EAA4BX,EAAS,IAAGY,EAAArB,EAAAoB,EAAA,GAAjCE,EAAMD,CAAA,CAAA,EAAA,CAAEE,EAASF,CAAA,CAAA,EAAA,CAElBG,EAAuBpB,EAAY,MAAO,sCAE1CqB,EAAiCpB,EAAS,CAAC,QAAS,WAAYiB,EAAO,CAAE,WAAA,OAC9EE,EAAqB,CAAEE,SAAUC,KAAKC,SAAS,CAAC,CAAEC,KAAMP,MAAAA,EAAAA,EAAU,EAAE,EAAG,EAAG,GAGrEQ,EAAUtB,EACf,WAAA,IAAAuB,EAAAC,EAAA,OAAA,AAAwH,OAAxHD,CAAAA,EAAA,AAAyC,OAAzCC,CAAAA,EAAMP,EAA+BQ,IAAI,AAAJA,GAAID,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAnCA,EAAqCE,KAAK,CAACC,GAAG,CAAC,SAACC,CAAI,EAAA,IAAAC,EAAA,MAAM,CAAErB,MAAOoB,EAAKE,GAAG,CAAEC,MAAK,AAAW,OAAXF,CAAAA,EAAED,EAAKI,IAAI,AAAJA,GAAIH,AAAA,KAAA,IAAAA,EAAAA,EAAID,EAAKK,QAAAA,AAAQ,CAAE,EAAC,GAACV,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAAE,EAC9H,CAACN,EAA+BQ,IAAI,CAAC,EAGtC,OACC3B,EAAAoC,aAAA,CAACxC,EAAYH,EAAA,CAAA,EACRmB,EAAK,CACTF,MAAOA,EACPC,SAAUA,EACVK,OAAQA,EACRC,UAAWA,EACXoB,eAAgB,SAAAC,CAAA,EAAA,IAAeL,EAAKK,EAAjBC,QAAQ,CAAIN,KAAK,CAAA,OAASjC,EAAAoC,aAAA,CAAApC,EAAAwC,QAAA,CAAA,KAAGP,EAAS,EACzDQ,WAAY,SAAAC,CAAA,EAAA,IAAGhC,EAAKgC,EAALhC,KAAK,CAAKE,EAAKjB,EAAA+C,EAAAC,GAAA,OAAO3C,EAAAoC,aAAA,CAACvC,EAAMJ,EAAA,CAACmD,IAAKlC,CAAM,EAAKE,GAAS,EACtEY,QAASA,CAAQ,GAGpB\"}"}