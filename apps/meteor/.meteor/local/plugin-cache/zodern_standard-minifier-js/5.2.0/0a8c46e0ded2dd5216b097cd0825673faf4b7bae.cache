{"code":"function module(e,t,n){n.link(\"@rocket.chat/fuselage\",{Box:function(e){o=e},Accordion:function(e){a=e},ButtonGroup:function(e){l=e},Button:function(e){c=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId:function(e){i=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useSetting:function(e){u=e},useTranslation:function(e){r=e},useUser:function(e){f=e}},2),n.link(\"react\",{default:function(e){d=e}},3),n.link(\"react-hook-form\",{FormProvider:function(e){s=e},useForm:function(e){m=e}},4),n.link(\"../../../components/Page\",{Page:function(e){E=e},PageHeader:function(e){_=e},PageScrollableContentWithShadow:function(e){h=e},PageFooter:function(e){k=e}},5),n.link(\"./ChangePassword\",{default:function(e){w=e}},6),n.link(\"./EndToEnd\",{default:function(e){A=e}},7),n.link(\"./TwoFactorEmail\",{default:function(e){g=e}},8),n.link(\"./TwoFactorTOTP\",{default:function(e){p=e}},9);var o,a,l,c,i,u,r,f,d,s,m,E,_,h,k,w,A,g,p,P={password:\"\",confirmationPassword:\"\"};n.exportDefault(function(){var e=r(),t=f(),n=u(\"Accounts_twoFactorAuthentication_email_available_for_OAuth_users\"),T=null==t?void 0:t.isOAuthUser,y=m({defaultValues:P,mode:\"all\"}),F=y.reset,b=y.formState.isDirty,x=u(\"Accounts_TwoFactorAuthentication_Enabled\"),S=u(\"Accounts_TwoFactorAuthentication_By_TOTP_Enabled\"),v=u(\"Accounts_TwoFactorAuthentication_By_Email_Enabled\"),B=u(\"E2E_Enable\"),C=u(\"Accounts_AllowPasswordChange\"),I=v&&(!T||n),O=i();return d.createElement(E,null,d.createElement(_,{title:e(\"Security\")}),d.createElement(h,null,d.createElement(o,{maxWidth:\"x600\",w:\"full\",alignSelf:\"center\",color:\"default\"},C&&d.createElement(s,y,d.createElement(a,null,d.createElement(a.Item,{title:e(\"Password\"),defaultExpanded:!0},d.createElement(w,{id:O})))),d.createElement(a,null,(S||I)&&x&&d.createElement(a.Item,{title:e(\"Two Factor Authentication\")},S&&d.createElement(p,null),I&&d.createElement(g,null)),B&&d.createElement(a.Item,{title:e(\"End-to-end_encryption\"),\"aria-label\":e(\"End-to-end_encryption\"),defaultExpanded:!x,\"data-qa-type\":\"e2e-encryption-section\"},d.createElement(A,null))))),d.createElement(k,{isDirty:b},d.createElement(l,null,d.createElement(c,{onClick:function(){return F(P)}},e(\"Cancel\")),d.createElement(c,{form:O,primary:!0,disabled:!b,type:\"submit\"},e(\"Save_changes\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/account/security/AccountSecurityPage.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Accordion, ButtonGroup, Button } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { useSetting, useTranslation, useUser } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React from 'react';\\nimport { FormProvider, useForm } from 'react-hook-form';\\n\\nimport { Page, PageHeader, PageScrollableContentWithShadow, PageFooter } from '../../../components/Page';\\nimport ChangePassword from './ChangePassword';\\nimport EndToEnd from './EndToEnd';\\nimport TwoFactorEmail from './TwoFactorEmail';\\nimport TwoFactorTOTP from './TwoFactorTOTP';\\n\\nconst passwordDefaultValues = { password: '', confirmationPassword: '' };\\n\\nconst AccountSecurityPage = (): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst user = useUser();\\n\\n\\tconst isEmail2FAAvailableForOAuth = useSetting('Accounts_twoFactorAuthentication_email_available_for_OAuth_users');\\n\\tconst isOAuthUser = user?.isOAuthUser;\\n\\tconst isEmail2FAAllowed = !isOAuthUser || isEmail2FAAvailableForOAuth;\\n\\n\\tconst methods = useForm({\\n\\t\\tdefaultValues: passwordDefaultValues,\\n\\t\\tmode: 'all',\\n\\t});\\n\\tconst {\\n\\t\\treset,\\n\\t\\tformState: { isDirty },\\n\\t} = methods;\\n\\n\\tconst twoFactorEnabled = useSetting('Accounts_TwoFactorAuthentication_Enabled');\\n\\tconst twoFactorTOTP = useSetting('Accounts_TwoFactorAuthentication_By_TOTP_Enabled');\\n\\tconst twoFactorByEmailEnabled = useSetting('Accounts_TwoFactorAuthentication_By_Email_Enabled');\\n\\tconst e2eEnabled = useSetting('E2E_Enable');\\n\\tconst allowPasswordChange = useSetting('Accounts_AllowPasswordChange');\\n\\tconst showEmailTwoFactor = twoFactorByEmailEnabled && isEmail2FAAllowed;\\n\\n\\tconst passwordFormId = useUniqueId();\\n\\n\\treturn (\\n\\t\\t<Page>\\n\\t\\t\\t<PageHeader title={t('Security')} />\\n\\t\\t\\t<PageScrollableContentWithShadow>\\n\\t\\t\\t\\t<Box maxWidth='x600' w='full' alignSelf='center' color='default'>\\n\\t\\t\\t\\t\\t{allowPasswordChange && (\\n\\t\\t\\t\\t\\t\\t<FormProvider {...methods}>\\n\\t\\t\\t\\t\\t\\t\\t<Accordion>\\n\\t\\t\\t\\t\\t\\t\\t\\t<Accordion.Item title={t('Password')} defaultExpanded>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ChangePassword id={passwordFormId} />\\n\\t\\t\\t\\t\\t\\t\\t\\t</Accordion.Item>\\n\\t\\t\\t\\t\\t\\t\\t</Accordion>\\n\\t\\t\\t\\t\\t\\t</FormProvider>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t<Accordion>\\n\\t\\t\\t\\t\\t\\t{(twoFactorTOTP || showEmailTwoFactor) && twoFactorEnabled && (\\n\\t\\t\\t\\t\\t\\t\\t<Accordion.Item title={t('Two Factor Authentication')}>\\n\\t\\t\\t\\t\\t\\t\\t\\t{twoFactorTOTP && <TwoFactorTOTP />}\\n\\t\\t\\t\\t\\t\\t\\t\\t{showEmailTwoFactor && <TwoFactorEmail />}\\n\\t\\t\\t\\t\\t\\t\\t</Accordion.Item>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t{e2eEnabled && (\\n\\t\\t\\t\\t\\t\\t\\t<Accordion.Item\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle={t('End-to-end_encryption')}\\n\\t\\t\\t\\t\\t\\t\\t\\taria-label={t('End-to-end_encryption')}\\n\\t\\t\\t\\t\\t\\t\\t\\tdefaultExpanded={!twoFactorEnabled}\\n\\t\\t\\t\\t\\t\\t\\t\\tdata-qa-type='e2e-encryption-section'\\n\\t\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t\\t<EndToEnd />\\n\\t\\t\\t\\t\\t\\t\\t</Accordion.Item>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</Accordion>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</PageScrollableContentWithShadow>\\n\\t\\t\\t<PageFooter isDirty={isDirty}>\\n\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t<Button onClick={() => reset(passwordDefaultValues)}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button form={passwordFormId} primary disabled={!isDirty} type='submit'>\\n\\t\\t\\t\\t\\t\\t{t('Save_changes')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</PageFooter>\\n\\t\\t</Page>\\n\\t);\\n};\\n\\nexport default AccountSecurityPage;\\n\",null],\"names\":[\"module\",\"link\",\"Box\",\"v\",\"Accordion\",\"ButtonGroup\",\"Button\",\"useUniqueId\",\"useSetting\",\"useTranslation\",\"useUser\",\"React\",\"FormProvider\",\"useForm\",\"Page\",\"PageHeader\",\"PageScrollableContentWithShadow\",\"PageFooter\",\"ChangePassword\",\"EndToEnd\",\"TwoFactorEmail\",\"TwoFactorTOTP\",\"passwordDefaultValues\",\"password\",\"confirmationPassword\",\"exportDefault\",\"t\",\"user\",\"isEmail2FAAvailableForOAuth\",\"isOAuthUser\",\"methods\",\"defaultValues\",\"mode\",\"reset\",\"isDirty\",\"formState\",\"twoFactorEnabled\",\"twoFactorTOTP\",\"twoFactorByEmailEnabled\",\"e2eEnabled\",\"allowPasswordChange\",\"showEmailTwoFactor\",\"passwordFormId\",\"createElement\",\"title\",\"maxWidth\",\"w\",\"alignSelf\",\"color\",\"Item\",\"defaultExpanded\",\"id\",\"onClick\",\"form\",\"primary\",\"disabled\",\"type\"],\"mappings\":\"uBAAoCA,EAAQC,IAAE,CAAA,wBAAM,CAAAC,IAAwB,SAAAC,CAAA,EAAAD,EAAAC,CAAA,EAAAC,UAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,EAAAE,YAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,EAAAG,OAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAM,YAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAO,WAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,EAAAM,eAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,EAAAO,QAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kBAAA,CAAAW,aAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,EAAAU,QAAA,SAAAV,CAAA,EAAAU,EAAAV,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAa,KAAA,SAAAX,CAAA,EAAAW,EAAAX,CAAA,EAAAY,WAAA,SAAAZ,CAAA,EAAAY,EAAAZ,CAAA,EAAAa,gCAAA,SAAAb,CAAA,EAAAa,EAAAb,CAAA,EAAAc,WAAA,SAAAd,CAAA,EAAAc,EAAAd,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,mBAAA,CAAA,QAAA,SAAAE,CAAA,EAAAe,EAAAf,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,aAAA,CAAA,QAAA,SAAAE,CAAA,EAAAgB,EAAAhB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,mBAAA,CAAA,QAAA,SAAAE,CAAA,EAAAiB,EAAAjB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kBAAA,CAAA,QAAA,SAAAE,CAAA,EAAAkB,EAAAlB,CAAA,CAAA,EAAA,GAa5E,IAbAD,EAAOE,EAAOC,EAAWC,EAAmDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAatEC,EAAwB,CAAEC,SAAU,GAAIC,qBAAsB,EAAE,EAbtExB,EAAOyB,aAAO,CAec,WAC3B,IAAMC,EAAIjB,IACJkB,EAAOjB,IAEPkB,EAA8BpB,EAAW,oEACzCqB,EAAcF,MAAAA,EAAI,KAAA,EAAJA,EAAME,WAAW,CAG/BC,EAAUjB,EAAQ,CACvBkB,cAAeT,EACfU,KAAM,QAGNC,EAEGH,EAFHG,KAAK,CACQC,EACVJ,EADHK,SAAS,CAAID,OAAO,CAGfE,EAAmB5B,EAAW,4CAC9B6B,EAAgB7B,EAAW,oDAC3B8B,EAA0B9B,EAAW,qDACrC+B,EAAa/B,EAAW,cACxBgC,EAAsBhC,EAAW,gCACjCiC,EAAqBH,GAhBD,CAAA,CAACT,GAAeD,CAAAA,EAkBpCc,EAAiBnC,IAEvB,OACCI,EAAAgC,aAAA,CAAC7B,EAAI,KACJH,EAAAgC,aAAA,CAAC5B,EAAU,CAAC6B,MAAOlB,EAAE,WAAY,GACjCf,EAAAgC,aAAA,CAAC3B,EAA+B,KAC/BL,EAAAgC,aAAA,CAACzC,EAAG,CAAC2C,SAAS,OAAOC,EAAE,OAAOC,UAAU,SAASC,MAAM,SAAS,EAC9DR,GACA7B,EAAAgC,aAAA,CAAC/B,EAAiBkB,EACjBnB,EAAAgC,aAAA,CAACvC,EAAS,KACTO,EAAAgC,aAAA,CAACvC,EAAU6C,IAAI,CAAA,CAACL,MAAOlB,EAAE,YAAawB,gBAAe,CAAA,CAAA,EACpDvC,EAAAgC,aAAA,CAACzB,EAAc,CAACiC,GAAIT,CAAe,MAKvC/B,EAAAgC,aAAA,CAACvC,EAAS,KACR,AAACiC,CAAAA,GAAiBI,CAAAA,GAAuBL,GACzCzB,EAAAgC,aAAA,CAACvC,EAAU6C,IAAI,CAAA,CAACL,MAAOlB,EAAE,4BAA6B,EACpDW,GAAiB1B,EAAAgC,aAAA,CAACtB,EAAa,MAC/BoB,GAAsB9B,EAAAgC,aAAA,CAACvB,EAAc,OAGvCmB,GACA5B,EAAAgC,aAAA,CAACvC,EAAU6C,IAAI,CAAA,CACdL,MAAOlB,EAAE,yBACT,aAAYA,EAAE,yBACdwB,gBAAiB,CAACd,EAClB,eAAa,wBAAwB,EAErCzB,EAAAgC,aAAA,CAACxB,EAAQ,UAMdR,EAAAgC,aAAA,CAAC1B,EAAU,CAACiB,QAASA,CAAQ,EAC5BvB,EAAAgC,aAAA,CAACtC,EAAW,KACXM,EAAAgC,aAAA,CAACrC,EAAM,CAAC8C,QAAS,WAAA,OAAMnB,EAAMX,EAAsB,CAAC,EAAEI,EAAE,WACxDf,EAAAgC,aAAA,CAACrC,EAAM,CAAC+C,KAAMX,EAAgBY,QAAO,CAAA,EAACC,SAAU,CAACrB,EAASsB,KAAK,QAAQ,EACrE9B,EAAE,mBAMT\"}"}