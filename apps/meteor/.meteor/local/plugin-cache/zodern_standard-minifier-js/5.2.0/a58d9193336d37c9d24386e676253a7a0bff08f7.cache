{"code":"function module(t,e,i){i.link(\"meteor/meteor\",{Meteor:function(t){r=t}},0),i.link(\"meteor/tracker\",{Tracker:function(t){n=t}},1),i.link(\"../../custom-oauth/client/CustomOAuth\",{CustomOAuth:function(t){s=t}},2),i.link(\"../../settings/client\",{settings:function(t){a=t}},3);var r,n,s,a,u={serverURL:\"https://gitlab.com\",identityPath:\"/api/v4/user\",scope:\"read_user\",mergeUsers:!1,addAutopublishFields:{forLoggedInUser:[\"services.gitlab\"],forOtherUsers:[\"services.gitlab.username\"]},accessTokenParam:\"access_token\"},o=new s(\"gitlab\",u);r.startup(function(){n.autorun(function(){var t=!1;a.get(\"API_Gitlab_URL\")&&(u.serverURL=a.get(\"API_Gitlab_URL\").trim().replace(/\\/*$/,\"\"),t=!0),a.get(\"Accounts_OAuth_Gitlab_identity_path\")&&(u.identityPath=a.get(\"Accounts_OAuth_Gitlab_identity_path\").trim()||u.identityPath,t=!0),a.get(\"Accounts_OAuth_Gitlab_merge_users\")&&(u.mergeUsers=!0,t=!0),t&&o.configure(u)})})}","map":"{\"version\":3,\"sources\":[\"app/gitlab/client/lib.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { OauthConfig } from '@rocket.chat/core-typings';\\nimport { Meteor } from 'meteor/meteor';\\nimport { Tracker } from 'meteor/tracker';\\n\\nimport { CustomOAuth } from '../../custom-oauth/client/CustomOAuth';\\nimport { settings } from '../../settings/client';\\n\\nconst config: OauthConfig = {\\n\\tserverURL: 'https://gitlab.com',\\n\\tidentityPath: '/api/v4/user',\\n\\tscope: 'read_user',\\n\\tmergeUsers: false,\\n\\taddAutopublishFields: {\\n\\t\\tforLoggedInUser: ['services.gitlab'],\\n\\t\\tforOtherUsers: ['services.gitlab.username'],\\n\\t},\\n\\taccessTokenParam: 'access_token',\\n};\\n\\nconst Gitlab = new CustomOAuth('gitlab', config);\\n\\nMeteor.startup(() => {\\n\\tTracker.autorun(() => {\\n\\t\\tlet anyChange = false;\\n\\t\\tif (settings.get('API_Gitlab_URL')) {\\n\\t\\t\\tconfig.serverURL = settings.get('API_Gitlab_URL').trim().replace(/\\\\/*$/, '');\\n\\t\\t\\tanyChange = true;\\n\\t\\t}\\n\\n\\t\\tif (settings.get('Accounts_OAuth_Gitlab_identity_path')) {\\n\\t\\t\\tconfig.identityPath = settings.get('Accounts_OAuth_Gitlab_identity_path').trim() || config.identityPath;\\n\\t\\t\\tanyChange = true;\\n\\t\\t}\\n\\n\\t\\tif (settings.get('Accounts_OAuth_Gitlab_merge_users')) {\\n\\t\\t\\tconfig.mergeUsers = true;\\n\\t\\t\\tanyChange = true;\\n\\t\\t}\\n\\n\\t\\tif (anyChange) {\\n\\t\\t\\tGitlab.configure(config);\\n\\t\\t}\\n\\t});\\n});\\n\",null],\"names\":[\"module\",\"link\",\"Meteor\",\"v\",\"Tracker\",\"CustomOAuth\",\"settings\",\"config\",\"serverURL\",\"identityPath\",\"scope\",\"mergeUsers\",\"addAutopublishFields\",\"forLoggedInUser\",\"forOtherUsers\",\"accessTokenParam\",\"Gitlab\",\"startup\",\"autorun\",\"anyChange\",\"get\",\"trim\",\"replace\",\"configure\"],\"mappings\":\"uBACSA,EAAQC,IAAA,CAAM,gBAAgB,CAAAC,OAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iBAAA,CAAAG,QAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wCAAA,CAAAI,YAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAK,SAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAMvC,IANAD,EAAuCE,EAAAC,EAAAC,EAMjCC,EAAsB,CAC3BC,UAAW,qBACXC,aAAc,eACdC,MAAO,YACPC,WAAY,CAAA,EACZC,qBAAsB,CACrBC,gBAAiB,CAAC,kBAAkB,CACpCC,cAAe,CAAC,2BAA0B,EAE3CC,iBAAkB,gBAGbC,EAAS,IAAIX,EAAY,SAAUE,GAEzCL,EAAOe,OAAO,CAAC,WACdb,EAAQc,OAAO,CAAC,WACf,IAAIC,EAAY,CAAA,EACZb,EAASc,GAAG,CAAC,oBAChBb,EAAOC,SAAS,CAAGF,EAASc,GAAG,CAAC,kBAAkBC,IAAI,GAAGC,OAAO,CAAC,OAAQ,IACzEH,EAAY,CAAA,GAGTb,EAASc,GAAG,CAAC,yCAChBb,EAAOE,YAAY,CAAGH,EAASc,GAAG,CAAC,uCAAuCC,IAAI,IAAMd,EAAOE,YAAY,CACvGU,EAAY,CAAA,GAGTb,EAASc,GAAG,CAAC,uCAChBb,EAAOI,UAAU,CAAG,CAAA,EACpBQ,EAAY,CAAA,GAGTA,GACHH,EAAOO,SAAS,CAAChB,EAEnB,EACD\"}"}