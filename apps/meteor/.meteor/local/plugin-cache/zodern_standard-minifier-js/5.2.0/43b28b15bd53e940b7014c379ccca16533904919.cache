{"code":"function module(n,e,t){t.link(\"@babel/runtime/regenerator\",{default:function(n){u=n}},0),t.export({useOmnichannelContactLabel:function(){return c}}),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(n){r=n}},0),t.link(\"@tanstack/react-query\",{useQuery:function(n){o=n}},1),t.link(\"../../../../lib/voip/parseOutboundPhoneNumber\",{parseOutboundPhoneNumber:function(n){a=n}},2);var u,r,o,a,c=function(n){var e=r(\"GET\",\"/v1/omnichannel/contact.search\"),t=a(n.callerId),c=o([\"getContactsByPhone\",t],function(){return u.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt(\"return\",e({phone:t}).then(function(n){return n.contact}));case 1:case\"end\":return n.stop()}},null,null,null,Promise)},{enabled:!!t}).data;return(null==c?void 0:c.name)||n.callerName||t}}","map":"{\"version\":3,\"sources\":[\"client/sidebar/footer/voip/hooks/useOmnichannelContactLabel.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { ICallerInfo } from '@rocket.chat/core-typings';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\n\\nimport { parseOutboundPhoneNumber } from '../../../../lib/voip/parseOutboundPhoneNumber';\\n\\nexport const useOmnichannelContactLabel = (caller: ICallerInfo): string => {\\n\\tconst getContactBy = useEndpoint('GET', '/v1/omnichannel/contact.search');\\n\\tconst phone = parseOutboundPhoneNumber(caller.callerId);\\n\\n\\tconst { data } = useQuery(['getContactsByPhone', phone], async () => getContactBy({ phone }).then(({ contact }) => contact), {\\n\\t\\tenabled: !!phone,\\n\\t});\\n\\n\\treturn data?.name || caller.callerName || phone;\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"export\",\"useOmnichannelContactLabel\",\"useEndpoint\",\"useQuery\",\"parseOutboundPhoneNumber\",\"caller\",\"getContactBy\",\"phone\",\"callerId\",\"data\",\"_useQuery\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"then\",\"_ref\",\"contact\",\"stop\",\"Promise\",\"enabled\",\"name\",\"callerName\"],\"mappings\":\"uBACsBA,EAAMC,IAAA,CAAA,6BAA2B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAvDH,EAAOK,MAAE,CAAA,CAAAC,2BAAmB,WAAA,OAA2BA,CAAA,CAAA,GAAAN,EAAAC,IAAA,CAAA,2BAAA,CAAAM,YAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAO,SAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gDAAA,CAAAQ,yBAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAKhD,IALPC,EAAuDG,EAAAC,EAAAC,EAK1CH,EAA6B,SAACI,CAAmB,EAC7D,IAAMC,EAAeJ,EAAY,MAAO,kCAClCK,EAAQH,EAAyBC,EAAOG,QAAQ,EAE9CC,EAAIC,AAAKP,EAAS,CAAC,qBAAsBI,EAAM,CAAE,WAAA,OAAAR,EAAAY,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAG,MAAA,CAAA,SAAYT,EAAa,CAAEC,MAAAA,CAAK,GAAIS,IAAI,CAAC,SAAAC,CAAA,EAAU,OAAAA,EAAPC,OAAO,AAAc,GAAC,MAAA,EAAA,IAAA,MAAA,OAAAN,EAAAO,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAAE,CAC5HC,QAAS,CAAC,CAACd,IADJE,IAAI,CAIZ,MAAO,AAAAA,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMa,IAAI,AAAJA,GAAQjB,EAAOkB,UAAU,EAAIhB,CAC3C\"}"}