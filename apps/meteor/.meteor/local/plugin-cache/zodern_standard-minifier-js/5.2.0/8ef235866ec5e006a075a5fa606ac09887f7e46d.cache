{"code":"function module(e,t,l){let n,i,a,s,o,r,u,c,d;let p=[\"_id\",\"name\",\"_updatedAt\"];l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),l.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){i=e}},1),l.export({useDepartmentsByUnitsList:()=>b}),l.link(\"@rocket.chat/ui-contexts\",{useTranslation(e){a=e},useEndpoint(e){s=e}},0),l.link(\"react\",{useCallback(e){o=e},useState(e){r=e}},1),l.link(\"../../hooks/lists/useScrollableRecordList\",{useScrollableRecordList(e){u=e}},2),l.link(\"../../hooks/useComponentDidUpdate\",{useComponentDidUpdate(e){c=e}},3),l.link(\"../../lib/lists/RecordList\",{RecordList(e){d=e}},4);let b=e=>{let t=a(),[l,b]=r(()=>new d),m=o(()=>b(new d),[]),k=s(\"GET\",\"/v1/livechat/units/:unitId/departments/available\",{unitId:e.unitId||\"none\"});c(()=>{e&&m()},[e,m]);let h=o(async(l,a)=>{let{departments:s,total:o}=await k({text:e.filter,offset:l,count:a+l});return{items:s.map(e=>{let{_id:l,name:a,_updatedAt:s}=e,o=i(e,p);return n(n({},o),{},{_id:l,name:o.archived?\"\".concat(a,\" [\").concat(t(\"Archived\"),\"]\"):a,label:a,value:l})}),itemCount:o}},[k,e.filter,t]),{loadMoreItems:f,initialItemCount:v}=u(l,h,25);return{reload:m,itemsList:l,loadMoreItems:f,initialItemCount:v}}}","map":"{\"version\":3,\"sources\":[\"client/views/hooks/useDepartmentsByUnitsList.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatDepartment, IOmnichannelBusinessUnit } from '@rocket.chat/core-typings';\\nimport { useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useState } from 'react';\\n\\nimport { useScrollableRecordList } from '../../hooks/lists/useScrollableRecordList';\\nimport { useComponentDidUpdate } from '../../hooks/useComponentDidUpdate';\\nimport { RecordList } from '../../lib/lists/RecordList';\\n\\ntype DepartmentsListOptions = {\\n\\tunitId?: IOmnichannelBusinessUnit['_id'];\\n\\tfilter: string;\\n};\\n\\nexport const useDepartmentsByUnitsList = (\\n\\toptions: DepartmentsListOptions,\\n): {\\n\\titemsList: RecordList<ILivechatDepartment>;\\n\\tinitialItemCount: number;\\n\\treload: () => void;\\n\\tloadMoreItems: (start: number, end: number) => void;\\n} => {\\n\\tconst t = useTranslation();\\n\\tconst [itemsList, setItemsList] = useState(() => new RecordList<ILivechatDepartment>());\\n\\tconst reload = useCallback(() => setItemsList(new RecordList<ILivechatDepartment>()), []);\\n\\n\\tconst getDepartments = useEndpoint('GET', '/v1/livechat/units/:unitId/departments/available', { unitId: options.unitId || 'none' });\\n\\n\\tuseComponentDidUpdate(() => {\\n\\t\\toptions && reload();\\n\\t}, [options, reload]);\\n\\n\\tconst fetchData = useCallback(\\n\\t\\tasync (start, end) => {\\n\\t\\t\\tconst { departments, total } = await getDepartments({\\n\\t\\t\\t\\ttext: options.filter,\\n\\t\\t\\t\\toffset: start,\\n\\t\\t\\t\\tcount: end + start,\\n\\t\\t\\t});\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\titems: departments.map(({ _id, name, _updatedAt, ...department }) => {\\n\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\t...department,\\n\\t\\t\\t\\t\\t\\t_id,\\n\\t\\t\\t\\t\\t\\tname: department.archived ? `${name} [${t('Archived')}]` : name,\\n\\t\\t\\t\\t\\t\\tlabel: name,\\n\\t\\t\\t\\t\\t\\tvalue: _id,\\n\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t}),\\n\\t\\t\\t\\titemCount: total,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t[getDepartments, options.filter, t],\\n\\t);\\n\\n\\tconst { loadMoreItems, initialItemCount } = useScrollableRecordList(itemsList, fetchData, 25);\\n\\n\\treturn {\\n\\t\\treload,\\n\\t\\titemsList,\\n\\t\\tloadMoreItems,\\n\\t\\tinitialItemCount,\\n\\t};\\n};\\n\",null],\"names\":[\"_objectSpread\",\"_objectWithoutProperties\",\"useTranslation\",\"useEndpoint\",\"useCallback\",\"useState\",\"useScrollableRecordList\",\"useComponentDidUpdate\",\"RecordList\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useDepartmentsByUnitsList\",\"options\",\"t\",\"itemsList\",\"setItemsList\",\"reload\",\"getDepartments\",\"unitId\",\"fetchData\",\"start\",\"end\",\"departments\",\"total\",\"text\",\"filter\",\"offset\",\"count\",\"items\",\"map\",\"_ref\",\"_id\",\"name\",\"_updatedAt\",\"department\",\"_excluded\",\"archived\",\"concat\",\"label\",\"value\",\"itemCount\",\"loadMoreItems\",\"initialItemCount\"],\"mappings\":\"2BACAA,EAAuEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,oCAA9DC,EAAgBC,IAAA,CAAA,uCAAmB,CAA0BC,QAACC,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iDAAA,CAAAC,QAAAC,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAvEH,EAAOI,MAAE,CAAA,CAAAC,0BAA6BA,IAAMA,CAA0B,GAACL,EAAAC,IAAA,CAAA,2BAAA,CAAAR,eAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,YAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAN,YAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,4CAAA,CAAAJ,wBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oCAAA,CAAAH,sBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAAF,WAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAYhE,IAAME,EACZC,IAOA,IAAMC,EAAId,IACJ,CAACe,EAAWC,EAAa,CAAGb,EAAS,IAAM,IAAIG,GAC/CW,EAASf,EAAY,IAAMc,EAAa,IAAIV,GAAoC,EAAE,EAElFY,EAAiBjB,EAAY,MAAO,mDAAoD,CAAEkB,OAAQN,EAAQM,MAAM,EAAI,MAAM,GAEhId,EAAsB,KACrBQ,GAAWI,GACZ,EAAG,CAACJ,EAASI,EAAO,EAEpB,IAAMG,EAAYlB,EACjB,MAAOmB,EAAOC,KACb,GAAM,CAAEC,YAAAA,CAAW,CAAEC,MAAAA,CAAAA,CAAO,CAAG,MAAMN,EAAe,CACnDO,KAAMZ,EAAQa,MAAM,CACpBC,OAAQN,EACRO,MAAON,EAAMD,IAGd,MAAO,CACNQ,MAAON,EAAYO,GAAG,CAACC,IAA6C,GAA5C,CAAEC,IAAAA,CAAG,CAAEC,KAAAA,CAAI,CAAEC,WAAAA,CAAAA,CAA2B,CAAAH,EAAZI,EAAUpC,EAAAgC,EAAAK,GAC7D,OAAAtC,EAAAA,EAAA,CAAA,EACIqC,GAAU,CAAA,EAAA,CACbH,IAAAA,EACAC,KAAME,EAAWE,QAAQ,CAAA,GAAAC,MAAA,CAAML,EAAI,MAAAK,MAAA,CAAKxB,EAAE,YAAW,KAAMmB,EAC3DM,MAAON,EACPO,MAAOR,CAAG,EAEZ,GACAS,UAAWjB,EAEb,EACA,CAACN,EAAgBL,EAAQa,MAAM,CAAEZ,EAAE,EAG9B,CAAE4B,cAAAA,CAAa,CAAEC,iBAAAA,CAAAA,CAAkB,CAAGvC,EAAwBW,EAAWK,EAAW,IAE1F,MAAO,CACNH,OAAAA,EACAF,UAAAA,EACA2B,cAAAA,EACAC,iBAAAA,EAEF\"}"}