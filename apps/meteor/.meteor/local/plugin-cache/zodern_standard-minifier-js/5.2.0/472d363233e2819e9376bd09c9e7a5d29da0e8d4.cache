{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){i=e}},1),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){u=e}},2),t.link(\"@rocket.chat/fuselage\",{Box:function(e){a=e},Skeleton:function(e){o=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){l=e}},1),t.link(\"react\",{default:function(e){c=e},useEffect:function(e){f=e},useState:function(e){s=e},useMemo:function(e){d=e}},2),t.link(\"react-i18next\",{useTranslation:function(e){m=e}},3),t.link(\"../realTimeMonitoring/counter/CounterItem\",{default:function(e){p=e}},4),t.link(\"../realTimeMonitoring/counter/CounterRow\",{default:function(e){k=e}},5);var r,i,u,a,o,l,c,f,s,d,m,p,k,b=Array.from({length:3}).map(function(){return{title:void 0,value:\"\"}}),v=[b,b],x=[b];t.exportDefault(function(e){var n=e.type,t=e.dateRange,b=e.departmentId,h=m().t,g=t.start,y=t.end,E=d(function(){return u({name:n,from:g,to:y},b&&{departmentId:b})},[b,y,g,n]),w=l(\"GET\",\"/v1/livechat/analytics/overview\"),T=s(v),S=i(T,2),C=S[0],I=S[1];return f(function(){I(\"Conversations\"===n?v:x)},[n]),f(function(){var e;r.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!g||!y)){n.next=2;break}return n.abrupt(\"return\");case 2:return n.next=4,r.awrap(w(E));case 4:if(e=n.sent){n.next=7;break}return n.abrupt(\"return\");case 7:if(!(e.length>3)){n.next=9;break}return n.abrupt(\"return\",I([e.slice(0,3),e.slice(3)]));case 9:I([e]);case 10:case\"end\":return n.stop()}},null,null,null,Promise)},[g,y,w,E]),c.createElement(a,{pb:28,flexDirection:\"column\"},C.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return c.createElement(k,{key:n,border:\"0\",pb:\"none\"},e.map(function(e,n){var t=e.title,r=e.value;return c.createElement(p,{flexShrink:1,pb:8,flexBasis:\"100%\",key:n,title:t?h(t):c.createElement(o,{width:\"x60\"}),count:r})}))}))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/analytics/Overview.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Skeleton } from '@rocket.chat/fuselage';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport React, { useEffect, useState, useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport CounterItem from '../realTimeMonitoring/counter/CounterItem';\\nimport CounterRow from '../realTimeMonitoring/counter/CounterRow';\\n\\nconst initialData: { title?: string; value: string | number }[] = Array.from({ length: 3 }).map(() => ({ title: undefined, value: '' }));\\n\\nconst conversationsInitialData = [initialData, initialData];\\nconst productivityInitialData = [initialData];\\n\\nconst Overview = ({ type, dateRange, departmentId }: { type: string; dateRange: { start: string; end: string }; departmentId: string }) => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst { start, end } = dateRange;\\n\\n\\tconst params = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\tname: type,\\n\\t\\t\\tfrom: start,\\n\\t\\t\\tto: end,\\n\\t\\t\\t...(departmentId && { departmentId }),\\n\\t\\t}),\\n\\t\\t[departmentId, end, start, type],\\n\\t);\\n\\n\\tconst loadData = useEndpoint('GET', '/v1/livechat/analytics/overview');\\n\\n\\tconst [displayData, setDisplayData] = useState(conversationsInitialData);\\n\\n\\tuseEffect(() => {\\n\\t\\tsetDisplayData(type === 'Conversations' ? conversationsInitialData : productivityInitialData);\\n\\t}, [type]);\\n\\n\\tuseEffect(() => {\\n\\t\\tasync function fetchData() {\\n\\t\\t\\tif (!start || !end) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst value = await loadData(params);\\n\\t\\t\\tif (!value) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (value.length > 3) {\\n\\t\\t\\t\\treturn setDisplayData([value.slice(0, 3), value.slice(3)]);\\n\\t\\t\\t}\\n\\n\\t\\t\\tsetDisplayData([value]);\\n\\t\\t}\\n\\t\\tfetchData();\\n\\t}, [start, end, loadData, params]);\\n\\n\\treturn (\\n\\t\\t<Box pb={28} flexDirection='column'>\\n\\t\\t\\t{displayData.map((items = [], i) => (\\n\\t\\t\\t\\t<CounterRow key={i} border='0' pb='none'>\\n\\t\\t\\t\\t\\t{items.map(({ title, value }, i) => (\\n\\t\\t\\t\\t\\t\\t<CounterItem\\n\\t\\t\\t\\t\\t\\t\\tflexShrink={1}\\n\\t\\t\\t\\t\\t\\t\\tpb={8}\\n\\t\\t\\t\\t\\t\\t\\tflexBasis='100%'\\n\\t\\t\\t\\t\\t\\t\\tkey={i}\\n\\t\\t\\t\\t\\t\\t\\ttitle={title ? t(title as TranslationKey) : <Skeleton width='x60' />}\\n\\t\\t\\t\\t\\t\\t\\tcount={value}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t</CounterRow>\\n\\t\\t\\t))}\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default Overview;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_slicedToArray\",\"_objectSpread\",\"Box\",\"Skeleton\",\"useEndpoint\",\"React\",\"useEffect\",\"useState\",\"useMemo\",\"useTranslation\",\"CounterItem\",\"CounterRow\",\"initialData\",\"Array\",\"from\",\"length\",\"map\",\"title\",\"undefined\",\"value\",\"conversationsInitialData\",\"productivityInitialData\",\"exportDefault\",\"_ref\",\"type\",\"dateRange\",\"departmentId\",\"t\",\"_useTranslation\",\"start\",\"end\",\"params\",\"name\",\"to\",\"loadData\",\"_useState\",\"_useState2\",\"displayData\",\"setDisplayData\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"awrap\",\"sent\",\"slice\",\"stop\",\"Promise\",\"createElement\",\"pb\",\"flexDirection\",\"items\",\"arguments\",\"i\",\"key\",\"border\",\"_ref2\",\"flexShrink\",\"flexBasis\",\"width\",\"count\"],\"mappings\":\"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\"}"}