{"code":"function module(e,n,t){var o,a,r,i,l,u,c,m,d,s,f,v,p,k,b,g=[\"value\",\"onChange\",\"scope\",\"renderRoomIcon\",\"setSelectedRoom\"],h=[\"value\",\"label\"];t.link(\"@babel/runtime/helpers/extends\",{default:function(e){o=e}},0),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){a=e}},1),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){r=e}},2),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){i=e}},3),t.link(\"@rocket.chat/fuselage\",{AutoComplete:function(e){l=e},Option:function(e){u=e},Box:function(e){c=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue:function(e){m=e}},1),t.link(\"@rocket.chat/ui-avatar\",{RoomAvatar:function(e){d=e}},2),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){s=e}},3),t.link(\"@tanstack/react-query\",{useQuery:function(e){f=e}},4),t.link(\"react\",{default:function(e){v=e},memo:function(e){p=e},useMemo:function(e){k=e},useState:function(e){b=e}},5);var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\";return{selector:JSON.stringify({name:e})}},E={admin:{endpoint:\"/v1/rooms.autocomplete.adminRooms\",key:\"roomsAutoCompleteAdmin\"},regular:{endpoint:\"/v1/rooms.autocomplete.channelAndPrivate\",key:\"roomsAutoCompleteRegular\"}};t.exportDefault(p(function(e){var n,t=e.value,p=e.onChange,S=e.scope,A=void 0===S?\"regular\":S,R=e.renderRoomIcon,x=e.setSelectedRoom,C=i(e,g),T=b(\"\"),_=r(T,2),D=_[0],I=_[1],P=m(D,300),j=s(\"GET\",E[A].endpoint),z=f([E[A].key,P],function(){return j(y(P))},{keepPreviousData:!0}),F=k(function(){return z.isSuccess?z.data.items.map(function(e){var n=e.name,t=e.fname;return{value:e._id,label:{name:t||n,avatarETag:e.avatarETag,type:e.t,encrypted:e.encrypted}}}):[]},[null===(n=z.data)||void 0===n?void 0:n.items,z.isSuccess]);return v.createElement(l,o({},C,{value:t,onChange:function(e){if(p(e),x&&\"function\"==typeof x){var n;x(null==z?void 0:null===(n=z.data)||void 0===n?void 0:n.items.find(function(n){return n._id===e}))}},filter:D,setFilter:I,renderSelected:function(e){var n=e.selected,t=n.value,o=n.label;return v.createElement(v.Fragment,null,v.createElement(c,{margin:\"none\",mi:2},v.createElement(d,{size:\"x20\",room:a({type:(null==o?void 0:o.type)||\"c\",_id:t},o)})),v.createElement(c,{margin:\"none\",mi:2},null==o?void 0:o.name),null==R?void 0:R(a({},o)))},renderItem:function(e){var n=e.value,t=e.label,r=i(e,h);return v.createElement(u,o({},r,{label:t.name,avatar:v.createElement(d,{size:\"x20\",room:a({_id:n},t)})}))},options:F}))}))}","map":"{\"version\":3,\"sources\":[\"client/components/RoomAutoComplete/RoomAutoComplete.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { AutoComplete, Option, Box } from '@rocket.chat/fuselage';\\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\\nimport { RoomAvatar } from '@rocket.chat/ui-avatar';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ComponentProps, ReactElement } from 'react';\\nimport React, { memo, useMemo, useState } from 'react';\\n\\nconst generateQuery = (\\n\\tterm = '',\\n): {\\n\\tselector: string;\\n} => ({ selector: JSON.stringify({ name: term }) });\\n\\ntype RoomAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'> & {\\n\\tscope?: 'admin' | 'regular';\\n\\trenderRoomIcon?: (props: { encrypted: IRoom['encrypted']; type: IRoom['t'] }) => ReactElement | null;\\n\\tsetSelectedRoom?: React.Dispatch<React.SetStateAction<IRoom | undefined>>;\\n};\\n\\nconst AVATAR_SIZE = 'x20';\\n\\nconst ROOM_AUTOCOMPLETE_PARAMS = {\\n\\tadmin: {\\n\\t\\tendpoint: '/v1/rooms.autocomplete.adminRooms',\\n\\t\\tkey: 'roomsAutoCompleteAdmin',\\n\\t},\\n\\tregular: {\\n\\t\\tendpoint: '/v1/rooms.autocomplete.channelAndPrivate',\\n\\t\\tkey: 'roomsAutoCompleteRegular',\\n\\t},\\n} as const;\\n\\nconst RoomAutoComplete = ({ value, onChange, scope = 'regular', renderRoomIcon, setSelectedRoom, ...props }: RoomAutoCompleteProps) => {\\n\\tconst [filter, setFilter] = useState('');\\n\\tconst filterDebounced = useDebouncedValue(filter, 300);\\n\\tconst roomsAutoCompleteEndpoint = useEndpoint('GET', ROOM_AUTOCOMPLETE_PARAMS[scope].endpoint);\\n\\n\\tconst result = useQuery(\\n\\t\\t[ROOM_AUTOCOMPLETE_PARAMS[scope].key, filterDebounced],\\n\\t\\t() => roomsAutoCompleteEndpoint(generateQuery(filterDebounced)),\\n\\t\\t{\\n\\t\\t\\tkeepPreviousData: true,\\n\\t\\t},\\n\\t);\\n\\n\\tconst options = useMemo(\\n\\t\\t() =>\\n\\t\\t\\tresult.isSuccess\\n\\t\\t\\t\\t? result.data.items.map(({ name, fname, _id, avatarETag, t, encrypted }) => ({\\n\\t\\t\\t\\t\\t\\tvalue: _id,\\n\\t\\t\\t\\t\\t\\tlabel: { name: fname || name, avatarETag, type: t, encrypted },\\n\\t\\t\\t\\t  }))\\n\\t\\t\\t\\t: [],\\n\\t\\t[result.data?.items, result.isSuccess],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<AutoComplete\\n\\t\\t\\t{...props}\\n\\t\\t\\tvalue={value}\\n\\t\\t\\tonChange={(val) => {\\n\\t\\t\\t\\tonChange(val);\\n\\n\\t\\t\\t\\tif (setSelectedRoom && typeof setSelectedRoom === 'function') {\\n\\t\\t\\t\\t\\tconst selectedRoom = result?.data?.items.find(({ _id }) => _id === val) as unknown as IRoom;\\n\\t\\t\\t\\t\\tsetSelectedRoom(selectedRoom);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}}\\n\\t\\t\\tfilter={filter}\\n\\t\\t\\tsetFilter={setFilter}\\n\\t\\t\\trenderSelected={({ selected: { value, label } }) => (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<Box margin='none' mi={2}>\\n\\t\\t\\t\\t\\t\\t<RoomAvatar size={AVATAR_SIZE} room={{ type: label?.type || 'c', _id: value, ...label }} />\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t<Box margin='none' mi={2}>\\n\\t\\t\\t\\t\\t\\t{label?.name}\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t{renderRoomIcon?.({ ...label })}\\n\\t\\t\\t\\t</>\\n\\t\\t\\t)}\\n\\t\\t\\trenderItem={({ value, label, ...props }) => (\\n\\t\\t\\t\\t<Option {...props} label={label.name} avatar={<RoomAvatar size={AVATAR_SIZE} room={{ _id: value, ...label }} />} />\\n\\t\\t\\t)}\\n\\t\\t\\toptions={options}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(RoomAutoComplete);\\n\",null],\"names\":[\"_extends\",\"_objectSpread\",\"_slicedToArray\",\"_objectWithoutProperties\",\"AutoComplete\",\"Option\",\"Box\",\"useDebouncedValue\",\"RoomAvatar\",\"useEndpoint\",\"useQuery\",\"React\",\"memo\",\"useMemo\",\"useState\",\"module\",\"link\",\"default\",\"v\",\"generateQuery\",\"term\",\"arguments\",\"length\",\"undefined\",\"selector\",\"JSON\",\"stringify\",\"name\",\"ROOM_AUTOCOMPLETE_PARAMS\",\"admin\",\"endpoint\",\"key\",\"regular\",\"exportDefault\",\"_ref\",\"_result$data\",\"value\",\"onChange\",\"_ref$scope\",\"scope\",\"renderRoomIcon\",\"setSelectedRoom\",\"props\",\"_excluded\",\"_useState\",\"_useState2\",\"filter\",\"setFilter\",\"filterDebounced\",\"roomsAutoCompleteEndpoint\",\"result\",\"keepPreviousData\",\"options\",\"isSuccess\",\"data\",\"items\",\"map\",\"_ref2\",\"fname\",\"_id\",\"label\",\"avatarETag\",\"type\",\"t\",\"encrypted\",\"createElement\",\"val\",\"_result$data2\",\"find\",\"_ref3\",\"renderSelected\",\"_ref4\",\"_ref4$selected\",\"selected\",\"Fragment\",\"margin\",\"mi\",\"size\",\"room\",\"renderItem\",\"_ref5\",\"_excluded2\",\"avatar\"],\"mappings\":\"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\"}"}