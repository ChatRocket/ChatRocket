{"code":"Package[\"core-runtime\"].queue(\"ostrio:cookies\",function(){Package.meteor.Meteor,Package.meteor.global,Package.meteor.meteorEnv,Package.fetch.fetch;var e=Package.modules.meteorInstall;return Package.promise.Promise,{require:e({node_modules:{meteor:{\"ostrio:cookies\":{\"cookies.js\":function e(e,o,t){let r,i,s;t.export({Cookies:()=>T}),t.link(\"meteor/meteor\",{Meteor(e){r=e}},0),r.isServer?s=e(\"meteor/webapp\").WebApp:i=e(\"meteor/fetch\").fetch;let n=()=>{},a=/\\/___cookie___\\/set/,c=r.isServer?process.env.ROOT_URL:window.__meteor_runtime_config__.ROOT_URL||window.__meteor_runtime_config__.meteorEnv.ROOT_URL||!1,l=r.isServer?process.env.MOBILE_ROOT_URL:window.__meteor_runtime_config__.MOBILE_ROOT_URL||window.__meteor_runtime_config__.meteorEnv.MOBILE_ROOT_URL||!1,h={isUndefined:e=>void 0===e,isArray:e=>Array.isArray(e),clone(e){return this.isObject(e)?this.isArray(e)?e.slice():Object.assign({},e):e}},u=[\"Number\",\"Object\",\"Function\"];for(let e=0;e<u.length;e++)h[\"is\"+u[e]]=function(o){return Object.prototype.toString.call(o)===\"[object \"+u[e]+\"]\"};/**\n * @url https://github.com/jshttp/cookie/blob/master/index.js\n * @name cookie\n * @author jshttp\n * @license\n * (The MIT License)\n *\n * Copyright (c) 2012-2014 Roman Shtylman <shtylman@gmail.com>\n * Copyright (c) 2015 Douglas Christopher Wilson <doug@somethingdoug.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * 'Software'), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */let d=decodeURIComponent,_=encodeURIComponent,p=/; */,k=/^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/,g=(e,o)=>{try{return o(e)}catch(o){return e}},m=(e,o)=>{let t,i,s;if(\"string\"!=typeof e)throw new r.Error(404,\"argument str must be a string\");let n={},a=o||{};return e.split(p).forEach(e=>{(s=e.indexOf(\"=\"))<0||(i=g(unescape(i=e.substr(0,s).trim()),a.decode||d),'\"'===(t=e.substr(++s,e.length).trim())[0]&&(t=t.slice(1,-1)),void 0===n[i]&&(n[i]=g(t,a.decode||d)))}),n},O=e=>{let o=h.clone(e),t=new Map;return JSON.stringify(o,(e,o)=>{if(\"object\"==typeof o&&null!==o){if(t.get(o))return;t.set(o,!0)}return o})},f=function(e,o){let t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=k.test(e)?e:escape(e);let s=o,n=o;if(h.isUndefined(n))n=\"\";else if(h.isObject(n)||h.isArray(n)){let e=O(n);n=_(\"JSON.parse(\".concat(e,\")\")),s=JSON.parse(e)}else(n=_(n))&&!k.test(n)&&(n=escape(n));let a=[\"\".concat(t,\"=\").concat(n)];if(h.isNumber(i.maxAge)&&a.push(\"Max-Age=\".concat(i.maxAge)),i.domain&&\"string\"==typeof i.domain){if(!k.test(i.domain))throw new r.Error(404,\"option domain is invalid\");a.push(\"Domain=\".concat(i.domain))}if(i.path&&\"string\"==typeof i.path){if(!k.test(i.path))throw new r.Error(404,\"option path is invalid\");a.push(\"Path=\".concat(i.path))}else a.push(\"Path=/\");return i.expires=i.expires||i.expire||!1,i.expires===1/0?a.push(\"Expires=Fri, 31 Dec 9999 23:59:59 GMT\"):i.expires instanceof Date?a.push(\"Expires=\".concat(i.expires.toUTCString())):0===i.expires?a.push(\"Expires=0\"):h.isNumber(i.expires)&&a.push(\"Expires=\".concat(new Date(i.expires).toUTCString())),i.httpOnly&&a.push(\"HttpOnly\"),i.secure&&a.push(\"Secure\"),i.firstPartyOnly&&a.push(\"First-Party-Only\"),i.sameSite&&a.push(!0===i.sameSite?\"SameSite\":\"SameSite=\".concat(i.sameSite)),{cookieString:a.join(\"; \"),sanitizedValue:s}},w=/JSON\\.parse\\((.*)\\)/,v=/false|true|null/,S=e=>{if(\"string\"!=typeof e)return e;if(w.test(e)){let o=e.match(w)[1];if(o)try{return JSON.parse(d(o))}catch(t){console.error(\"[ostrio:cookies] [.get()] [deserialize()] Exception:\",t,e,o)}}else if(v.test(e))try{return JSON.parse(e)}catch(e){}return e};class C{constructor(e){this.__pendingCookies=[],this.TTL=e.TTL||!1,this.response=e.response||!1,this.runOnServer=e.runOnServer||!1,this.allowQueryStringCookies=e.allowQueryStringCookies||!1,this.allowedCordovaOrigins=e.allowedCordovaOrigins||!1,!0===this.allowedCordovaOrigins&&(this.allowedCordovaOrigins=/^http:\\/\\/localhost:12[0-9]{3}$/),this.originRE=new RegExp(\"^https?://(\".concat(c||\"\").concat(l?\"|\"+l:\"\",\")$\")),h.isObject(e._cookies)?this.cookies=e._cookies:this.cookies=m(e._cookies)}get(e,o){let t=o?m(o):this.cookies;if(e&&t&&t.hasOwnProperty(e))return S(t[e])}set(e,o){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&!h.isUndefined(o)){h.isNumber(this.TTL)&&void 0===t.expires&&(t.expires=new Date(+new Date+this.TTL));let{cookieString:i,sanitizedValue:s}=f(e,o,t);return this.cookies[e]=s,r.isClient?document.cookie=i:this.response&&(this.__pendingCookies.push(i),this.response.setHeader(\"Set-Cookie\",this.__pendingCookies)),!0}return!1}remove(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"/\",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\";if(e&&this.cookies.hasOwnProperty(e)){let{cookieString:i}=f(e,\"\",{domain:t,path:o,expires:new Date(0)});return delete this.cookies[e],r.isClient?document.cookie=i:this.response&&this.response.setHeader(\"Set-Cookie\",i),!0}if(!e&&this.keys().length>0&&\"\"!==this.keys()[0]){let e=Object.keys(this.cookies);for(let o=0;o<e.length;o++)this.remove(e[o]);return!0}return!1}has(e,o){let t=o?m(o):this.cookies;return!!e&&!!t&&t.hasOwnProperty(e)}keys(){return this.cookies?Object.keys(this.cookies):[]}send(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;if(r.isServer&&e(new r.Error(400,\"Can't run `.send()` on server, it's Client only method!\")),this.runOnServer){let o=\"\".concat(window.__meteor_runtime_config__.ROOT_URL_PATH_PREFIX||window.__meteor_runtime_config__.meteorEnv.ROOT_URL_PATH_PREFIX||\"\",\"/___cookie___/set\"),t=\"\";if(r.isCordova&&this.allowQueryStringCookies){let e=this.keys(),i=[];for(let o=0;o<e.length;o++){let{sanitizedValue:t}=f(e[o],this.get(e[o])),r=\"\".concat(e[o],\"=\").concat(t);i.includes(r)||i.push(r)}i.length&&(o=r.absoluteUrl(\"___cookie___/set\"),t=\"?___cookies___=\".concat(encodeURIComponent(i.join(\"; \"))))}i(\"\".concat(o).concat(t),{credentials:\"include\",type:\"cors\"}).then(o=>{e(void 0,o)}).catch(e)}else e(new r.Error(400,\"Can't send cookies on server when `runOnServer` is false.\"))}}let y=(e,o,t)=>{let i={};if(t.runOnServer)return e.headers&&e.headers.cookie&&(i=m(e.headers.cookie)),new C({_cookies:i,TTL:t.TTL,runOnServer:t.runOnServer,response:o,allowQueryStringCookies:t.allowQueryStringCookies});throw new r.Error(400,\"Can't use middleware when `runOnServer` is false.\")};class T extends C{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.TTL=!!h.isNumber(e.TTL)&&e.TTL,e.runOnServer=!1!==e.runOnServer,e.allowQueryStringCookies=!0===e.allowQueryStringCookies,r.isClient?(e._cookies=document.cookie,super(e)):(e._cookies={},super(e),e.auto=!1!==e.auto,this.opts=e,this.handler=!!h.isFunction(e.handler)&&e.handler,this.onCookies=!!h.isFunction(e.onCookies)&&e.onCookies,e.runOnServer&&!T.isLoadedOnServer&&(T.isLoadedOnServer=!0,e.auto&&s.connectHandlers.use((o,t,r)=>{if(a.test(o._parsedUrl.path)){let r=!!o.headers.origin&&this.allowedCordovaOrigins&&this.allowedCordovaOrigins.test(o.headers.origin),i=r||!!o.headers.origin&&this.originRE.test(o.headers.origin);i&&(t.setHeader(\"Access-Control-Allow-Credentials\",\"true\"),t.setHeader(\"Access-Control-Allow-Origin\",o.headers.origin));let s=[],n={};r&&e.allowQueryStringCookies&&o.query.___cookies___?n=m(decodeURIComponent(o.query.___cookies___)):o.headers.cookie&&(n=m(o.headers.cookie));let a=Object.keys(n);if(a.length){for(let e=0;e<a.length;e++){let{cookieString:o}=f(a[e],n[a[e]]);s.includes(o)||s.push(o)}s.length&&t.setHeader(\"Set-Cookie\",s)}h.isFunction(this.onCookies)&&this.onCookies(y(o,t,e)),t.writeHead(200),t.end(\"\")}else o.Cookies=y(o,t,e),h.isFunction(this.handler)&&this.handler(o.Cookies),r()})))}middleware(){if(!r.isServer)throw new r.Error(500,\"[ostrio:cookies] Can't use `.middleware()` on Client, it's Server only!\");return(e,o,t)=>{h.isFunction(this.handler)&&this.handler(y(e,o,this.opts)),t()}}}r.isServer&&(T.isLoadedOnServer=!1)}}}}},{extensions:[\".js\",\".json\"]}),eagerModulePaths:[\"/node_modules/meteor/ostrio:cookies/cookies.js\"],mainModulePath:\"/node_modules/meteor/ostrio:cookies/cookies.js\"}});","map":"{\"version\":3,\"sources\":[\"packages/ostrio:cookies/cookies.js\",\"<anon>\"],\"sourcesContent\":[\"import { Meteor } from 'meteor/meteor';\\n\\nlet fetch;\\nlet WebApp;\\n\\nif (Meteor.isServer) {\\n\\tWebApp = require('meteor/webapp').WebApp;\\n} else {\\n\\tfetch = require('meteor/fetch').fetch;\\n}\\n\\nconst NoOp = () => {};\\nconst urlRE = /\\\\/___cookie___\\\\/set/;\\nconst rootUrl = Meteor.isServer\\n\\t? process.env.ROOT_URL\\n\\t: window.__meteor_runtime_config__.ROOT_URL || window.__meteor_runtime_config__.meteorEnv.ROOT_URL || false;\\nconst mobileRootUrl = Meteor.isServer\\n\\t? process.env.MOBILE_ROOT_URL\\n\\t: window.__meteor_runtime_config__.MOBILE_ROOT_URL || window.__meteor_runtime_config__.meteorEnv.MOBILE_ROOT_URL || false;\\n\\nconst helpers = {\\n\\tisUndefined(obj) {\\n\\t\\treturn obj === void 0;\\n\\t},\\n\\tisArray(obj) {\\n\\t\\treturn Array.isArray(obj);\\n\\t},\\n\\tclone(obj) {\\n\\t\\tif (!this.isObject(obj)) return obj;\\n\\t\\treturn this.isArray(obj) ? obj.slice() : Object.assign({}, obj);\\n\\t},\\n};\\nconst _helpers = ['Number', 'Object', 'Function'];\\nfor (let i = 0; i < _helpers.length; i++) {\\n\\thelpers['is' + _helpers[i]] = function (obj) {\\n\\t\\treturn Object.prototype.toString.call(obj) === '[object ' + _helpers[i] + ']';\\n\\t};\\n}\\n\\n/**\\n * @url https://github.com/jshttp/cookie/blob/master/index.js\\n * @name cookie\\n * @author jshttp\\n * @license\\n * (The MIT License)\\n *\\n * Copyright (c) 2012-2014 Roman Shtylman <shtylman@gmail.com>\\n * Copyright (c) 2015 Douglas Christopher Wilson <doug@somethingdoug.com>\\n *\\n * Permission is hereby granted, free of charge, to any person obtaining\\n * a copy of this software and associated documentation files (the\\n * 'Software'), to deal in the Software without restriction, including\\n * without limitation the rights to use, copy, modify, merge, publish,\\n * distribute, sublicense, and/or sell copies of the Software, and to\\n * permit persons to whom the Software is furnished to do so, subject to\\n * the following conditions:\\n *\\n * The above copyright notice and this permission notice shall be\\n * included in all copies or substantial portions of the Software.\\n *\\n * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\\n * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\\n * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\\n */\\nconst decode = decodeURIComponent;\\nconst encode = encodeURIComponent;\\nconst pairSplitRegExp = /; */;\\n\\n/**\\n * RegExp to match field-content in RFC 7230 sec 3.2\\n *\\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\\n * field-vchar   = VCHAR / obs-text\\n * obs-text      = %x80-FF\\n */\\nconst fieldContentRegExp = /^[\\\\u0009\\\\u0020-\\\\u007e\\\\u0080-\\\\u00ff]+$/;\\n\\n/**\\n * @function\\n * @name tryDecode\\n * @param {String} str\\n * @param {Function} d\\n * @summary Try decoding a string using a decoding function.\\n * @private\\n */\\nconst tryDecode = (str, d) => {\\n\\ttry {\\n\\t\\treturn d(str);\\n\\t} catch (e) {\\n\\t\\treturn str;\\n\\t}\\n};\\n\\n/**\\n * @function\\n * @name parse\\n * @param {String} str\\n * @param {Object} [options]\\n * @return {Object}\\n * @summary\\n * Parse a cookie header.\\n * Parse the given cookie header string into an object\\n * The object has the various cookies as keys(names) => values\\n * @private\\n */\\nconst parse = (str, options) => {\\n\\tif (typeof str !== 'string') {\\n\\t\\tthrow new Meteor.Error(404, 'argument str must be a string');\\n\\t}\\n\\tconst obj = {};\\n\\tconst opt = options || {};\\n\\tlet val;\\n\\tlet key;\\n\\tlet eqIndx;\\n\\n\\tstr.split(pairSplitRegExp).forEach((pair) => {\\n\\t\\teqIndx = pair.indexOf('=');\\n\\t\\tif (eqIndx < 0) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tkey = pair.substr(0, eqIndx).trim();\\n\\t\\tkey = tryDecode(unescape(key), opt.decode || decode);\\n\\t\\tval = pair.substr(++eqIndx, pair.length).trim();\\n\\t\\tif (val[0] === '\\\"') {\\n\\t\\t\\tval = val.slice(1, -1);\\n\\t\\t}\\n\\t\\tif (void 0 === obj[key]) {\\n\\t\\t\\tobj[key] = tryDecode(val, opt.decode || decode);\\n\\t\\t}\\n\\t});\\n\\treturn obj;\\n};\\n\\n/**\\n * @function\\n * @name antiCircular\\n * @param data {Object} - Circular or any other object which needs to be non-circular\\n * @private\\n */\\nconst antiCircular = (_obj) => {\\n\\tconst object = helpers.clone(_obj);\\n\\tconst cache = new Map();\\n\\treturn JSON.stringify(object, (key, value) => {\\n\\t\\tif (typeof value === 'object' && value !== null) {\\n\\t\\t\\tif (cache.get(value)) {\\n\\t\\t\\t\\treturn void 0;\\n\\t\\t\\t}\\n\\t\\t\\tcache.set(value, true);\\n\\t\\t}\\n\\t\\treturn value;\\n\\t});\\n};\\n\\n/**\\n * @function\\n * @name serialize\\n * @param {String} name\\n * @param {String} val\\n * @param {Object} [options]\\n * @return { cookieString: String, sanitizedValue: Mixed }\\n * @summary\\n * Serialize data into a cookie header.\\n * Serialize the a name value pair into a cookie string suitable for\\n * http headers. An optional options object specified cookie parameters.\\n * serialize('foo', 'bar', { httpOnly: true }) => \\\"foo=bar; httpOnly\\\"\\n * @private\\n */\\nconst serialize = (key, val, opt = {}) => {\\n\\tlet name;\\n\\n\\tif (!fieldContentRegExp.test(key)) {\\n\\t\\tname = escape(key);\\n\\t} else {\\n\\t\\tname = key;\\n\\t}\\n\\n\\tlet sanitizedValue = val;\\n\\tlet value = val;\\n\\tif (!helpers.isUndefined(value)) {\\n\\t\\tif (helpers.isObject(value) || helpers.isArray(value)) {\\n\\t\\t\\tconst stringified = antiCircular(value);\\n\\t\\t\\tvalue = encode(`JSON.parse(${stringified})`);\\n\\t\\t\\tsanitizedValue = JSON.parse(stringified);\\n\\t\\t} else {\\n\\t\\t\\tvalue = encode(value);\\n\\t\\t\\tif (value && !fieldContentRegExp.test(value)) {\\n\\t\\t\\t\\tvalue = escape(value);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t} else {\\n\\t\\tvalue = '';\\n\\t}\\n\\n\\tconst pairs = [`${name}=${value}`];\\n\\n\\tif (helpers.isNumber(opt.maxAge)) {\\n\\t\\tpairs.push(`Max-Age=${opt.maxAge}`);\\n\\t}\\n\\n\\tif (opt.domain && typeof opt.domain === 'string') {\\n\\t\\tif (!fieldContentRegExp.test(opt.domain)) {\\n\\t\\t\\tthrow new Meteor.Error(404, 'option domain is invalid');\\n\\t\\t}\\n\\t\\tpairs.push(`Domain=${opt.domain}`);\\n\\t}\\n\\n\\tif (opt.path && typeof opt.path === 'string') {\\n\\t\\tif (!fieldContentRegExp.test(opt.path)) {\\n\\t\\t\\tthrow new Meteor.Error(404, 'option path is invalid');\\n\\t\\t}\\n\\t\\tpairs.push(`Path=${opt.path}`);\\n\\t} else {\\n\\t\\tpairs.push('Path=/');\\n\\t}\\n\\n\\topt.expires = opt.expires || opt.expire || false;\\n\\tif (opt.expires === Infinity) {\\n\\t\\tpairs.push('Expires=Fri, 31 Dec 9999 23:59:59 GMT');\\n\\t} else if (opt.expires instanceof Date) {\\n\\t\\tpairs.push(`Expires=${opt.expires.toUTCString()}`);\\n\\t} else if (opt.expires === 0) {\\n\\t\\tpairs.push('Expires=0');\\n\\t} else if (helpers.isNumber(opt.expires)) {\\n\\t\\tpairs.push(`Expires=${new Date(opt.expires).toUTCString()}`);\\n\\t}\\n\\n\\tif (opt.httpOnly) {\\n\\t\\tpairs.push('HttpOnly');\\n\\t}\\n\\n\\tif (opt.secure) {\\n\\t\\tpairs.push('Secure');\\n\\t}\\n\\n\\tif (opt.firstPartyOnly) {\\n\\t\\tpairs.push('First-Party-Only');\\n\\t}\\n\\n\\tif (opt.sameSite) {\\n\\t\\tpairs.push(opt.sameSite === true ? 'SameSite' : `SameSite=${opt.sameSite}`);\\n\\t}\\n\\n\\treturn { cookieString: pairs.join('; '), sanitizedValue };\\n};\\n\\nconst isStringifiedRegEx = /JSON\\\\.parse\\\\((.*)\\\\)/;\\nconst isTypedRegEx = /false|true|null/;\\nconst deserialize = (string) => {\\n\\tif (typeof string !== 'string') {\\n\\t\\treturn string;\\n\\t}\\n\\n\\tif (isStringifiedRegEx.test(string)) {\\n\\t\\tlet obj = string.match(isStringifiedRegEx)[1];\\n\\t\\tif (obj) {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\treturn JSON.parse(decode(obj));\\n\\t\\t\\t} catch (e) {\\n\\t\\t\\t\\tconsole.error('[ostrio:cookies] [.get()] [deserialize()] Exception:', e, string, obj);\\n\\t\\t\\t\\treturn string;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\treturn string;\\n\\t} else if (isTypedRegEx.test(string)) {\\n\\t\\ttry {\\n\\t\\t\\treturn JSON.parse(string);\\n\\t\\t} catch (e) {\\n\\t\\t\\treturn string;\\n\\t\\t}\\n\\t}\\n\\treturn string;\\n};\\n\\n/**\\n * @locus Anywhere\\n * @class __cookies\\n * @param opts {Object} - Options (configuration) object\\n * @param opts._cookies {Object|String} - Current cookies as String or Object\\n * @param opts.TTL {Number|Boolean} - Default cookies expiration time (max-age) in milliseconds, by default - session (false)\\n * @param opts.runOnServer {Boolean} - Expose Cookies class to Server\\n * @param opts.response {http.ServerResponse|Object} - This object is created internally by a HTTP server\\n * @param opts.allowQueryStringCookies {Boolean} - Allow passing Cookies in a query string (in URL). Primary should be used only in Cordova environment\\n * @param opts.allowedCordovaOrigins {Regex|Boolean} - [Server] Allow setting Cookies from that specific origin which in Meteor/Cordova is localhost:12XXX (^http://localhost:12[0-9]{3}$)\\n * @summary Internal Class\\n */\\nclass __cookies {\\n\\tconstructor(opts) {\\n\\t\\tthis.__pendingCookies = [];\\n\\t\\tthis.TTL = opts.TTL || false;\\n\\t\\tthis.response = opts.response || false;\\n\\t\\tthis.runOnServer = opts.runOnServer || false;\\n\\t\\tthis.allowQueryStringCookies = opts.allowQueryStringCookies || false;\\n\\t\\tthis.allowedCordovaOrigins = opts.allowedCordovaOrigins || false;\\n\\n\\t\\tif (this.allowedCordovaOrigins === true) {\\n\\t\\t\\tthis.allowedCordovaOrigins = /^http:\\\\/\\\\/localhost:12[0-9]{3}$/;\\n\\t\\t}\\n\\n\\t\\tthis.originRE = new RegExp(`^https?:\\\\/\\\\/(${rootUrl ? rootUrl : ''}${mobileRootUrl ? '|' + mobileRootUrl : ''})$`);\\n\\n\\t\\tif (helpers.isObject(opts._cookies)) {\\n\\t\\t\\tthis.cookies = opts._cookies;\\n\\t\\t} else {\\n\\t\\t\\tthis.cookies = parse(opts._cookies);\\n\\t\\t}\\n\\t}\\n\\n\\t/**\\n\\t * @locus Anywhere\\n\\t * @memberOf __cookies\\n\\t * @name get\\n\\t * @param {String} key  - The name of the cookie to read\\n\\t * @param {String} _tmp - Unparsed string instead of user's cookies\\n\\t * @summary Read a cookie. If the cookie doesn't exist a null value will be returned.\\n\\t * @returns {String|void}\\n\\t */\\n\\tget(key, _tmp) {\\n\\t\\tconst cookieString = _tmp ? parse(_tmp) : this.cookies;\\n\\t\\tif (!key || !cookieString) {\\n\\t\\t\\treturn void 0;\\n\\t\\t}\\n\\n\\t\\tif (cookieString.hasOwnProperty(key)) {\\n\\t\\t\\treturn deserialize(cookieString[key]);\\n\\t\\t}\\n\\n\\t\\treturn void 0;\\n\\t}\\n\\n\\t/**\\n\\t * @locus Anywhere\\n\\t * @memberOf __cookies\\n\\t * @name set\\n\\t * @param {String} key   - The name of the cookie to create/overwrite\\n\\t * @param {String} value - The value of the cookie\\n\\t * @param {Object} opts  - [Optional] Cookie options (see readme docs)\\n\\t * @summary Create/overwrite a cookie.\\n\\t * @returns {Boolean}\\n\\t */\\n\\tset(key, value, opts = {}) {\\n\\t\\tif (key && !helpers.isUndefined(value)) {\\n\\t\\t\\tif (helpers.isNumber(this.TTL) && opts.expires === undefined) {\\n\\t\\t\\t\\topts.expires = new Date(+new Date() + this.TTL);\\n\\t\\t\\t}\\n\\t\\t\\tconst { cookieString, sanitizedValue } = serialize(key, value, opts);\\n\\n\\t\\t\\tthis.cookies[key] = sanitizedValue;\\n\\t\\t\\tif (Meteor.isClient) {\\n\\t\\t\\t\\tdocument.cookie = cookieString;\\n\\t\\t\\t} else if (this.response) {\\n\\t\\t\\t\\tthis.__pendingCookies.push(cookieString);\\n\\t\\t\\t\\tthis.response.setHeader('Set-Cookie', this.__pendingCookies);\\n\\t\\t\\t}\\n\\t\\t\\treturn true;\\n\\t\\t}\\n\\t\\treturn false;\\n\\t}\\n\\n\\t/**\\n\\t * @locus Anywhere\\n\\t * @memberOf __cookies\\n\\t * @name remove\\n\\t * @param {String} key    - The name of the cookie to create/overwrite\\n\\t * @param {String} path   - [Optional] The path from where the cookie will be\\n\\t * readable. E.g., \\\"/\\\", \\\"/mydir\\\"; if not specified, defaults to the current\\n\\t * path of the current document location (string or null). The path must be\\n\\t * absolute (see RFC 2965). For more information on how to use relative paths\\n\\t * in this argument, see: https://developer.mozilla.org/en-US/docs/Web/API/document.cookie#Using_relative_URLs_in_the_path_parameter\\n\\t * @param {String} domain - [Optional] The domain from where the cookie will\\n\\t * be readable. E.g., \\\"example.com\\\", \\\".example.com\\\" (includes all subdomains)\\n\\t * or \\\"subdomain.example.com\\\"; if not specified, defaults to the host portion\\n\\t * of the current document location (string or null).\\n\\t * @summary Remove a cookie(s).\\n\\t * @returns {Boolean}\\n\\t */\\n\\tremove(key, path = '/', domain = '') {\\n\\t\\tif (key && this.cookies.hasOwnProperty(key)) {\\n\\t\\t\\tconst { cookieString } = serialize(key, '', {\\n\\t\\t\\t\\tdomain,\\n\\t\\t\\t\\tpath,\\n\\t\\t\\t\\texpires: new Date(0),\\n\\t\\t\\t});\\n\\n\\t\\t\\tdelete this.cookies[key];\\n\\t\\t\\tif (Meteor.isClient) {\\n\\t\\t\\t\\tdocument.cookie = cookieString;\\n\\t\\t\\t} else if (this.response) {\\n\\t\\t\\t\\tthis.response.setHeader('Set-Cookie', cookieString);\\n\\t\\t\\t}\\n\\t\\t\\treturn true;\\n\\t\\t} else if (!key && this.keys().length > 0 && this.keys()[0] !== '') {\\n\\t\\t\\tconst keys = Object.keys(this.cookies);\\n\\t\\t\\tfor (let i = 0; i < keys.length; i++) {\\n\\t\\t\\t\\tthis.remove(keys[i]);\\n\\t\\t\\t}\\n\\t\\t\\treturn true;\\n\\t\\t}\\n\\t\\treturn false;\\n\\t}\\n\\n\\t/**\\n\\t * @locus Anywhere\\n\\t * @memberOf __cookies\\n\\t * @name has\\n\\t * @param {String} key  - The name of the cookie to create/overwrite\\n\\t * @param {String} _tmp - Unparsed string instead of user's cookies\\n\\t * @summary Check whether a cookie exists in the current position.\\n\\t * @returns {Boolean}\\n\\t */\\n\\thas(key, _tmp) {\\n\\t\\tconst cookieString = _tmp ? parse(_tmp) : this.cookies;\\n\\t\\tif (!key || !cookieString) {\\n\\t\\t\\treturn false;\\n\\t\\t}\\n\\n\\t\\treturn cookieString.hasOwnProperty(key);\\n\\t}\\n\\n\\t/**\\n\\t * @locus Anywhere\\n\\t * @memberOf __cookies\\n\\t * @name keys\\n\\t * @summary Returns an array of all readable cookies from this location.\\n\\t * @returns {[String]}\\n\\t */\\n\\tkeys() {\\n\\t\\tif (this.cookies) {\\n\\t\\t\\treturn Object.keys(this.cookies);\\n\\t\\t}\\n\\t\\treturn [];\\n\\t}\\n\\n\\t/**\\n\\t * @locus Client\\n\\t * @memberOf __cookies\\n\\t * @name send\\n\\t * @param cb {Function} - Callback\\n\\t * @summary Send all cookies over XHR to server.\\n\\t * @returns {void}\\n\\t */\\n\\tsend(cb = NoOp) {\\n\\t\\tif (Meteor.isServer) {\\n\\t\\t\\tcb(new Meteor.Error(400, \\\"Can't run `.send()` on server, it's Client only method!\\\"));\\n\\t\\t}\\n\\n\\t\\tif (this.runOnServer) {\\n\\t\\t\\tlet path = `${\\n\\t\\t\\t\\twindow.__meteor_runtime_config__.ROOT_URL_PATH_PREFIX || window.__meteor_runtime_config__.meteorEnv.ROOT_URL_PATH_PREFIX || ''\\n\\t\\t\\t}/___cookie___/set`;\\n\\t\\t\\tlet query = '';\\n\\n\\t\\t\\tif (Meteor.isCordova && this.allowQueryStringCookies) {\\n\\t\\t\\t\\tconst cookiesKeys = this.keys();\\n\\t\\t\\t\\tconst cookiesArray = [];\\n\\t\\t\\t\\tfor (let i = 0; i < cookiesKeys.length; i++) {\\n\\t\\t\\t\\t\\tconst { sanitizedValue } = serialize(cookiesKeys[i], this.get(cookiesKeys[i]));\\n\\t\\t\\t\\t\\tconst pair = `${cookiesKeys[i]}=${sanitizedValue}`;\\n\\t\\t\\t\\t\\tif (!cookiesArray.includes(pair)) {\\n\\t\\t\\t\\t\\t\\tcookiesArray.push(pair);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (cookiesArray.length) {\\n\\t\\t\\t\\t\\tpath = Meteor.absoluteUrl('___cookie___/set');\\n\\t\\t\\t\\t\\tquery = `?___cookies___=${encodeURIComponent(cookiesArray.join('; '))}`;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\tfetch(`${path}${query}`, {\\n\\t\\t\\t\\tcredentials: 'include',\\n\\t\\t\\t\\ttype: 'cors',\\n\\t\\t\\t})\\n\\t\\t\\t\\t.then((response) => {\\n\\t\\t\\t\\t\\tcb(void 0, response);\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.catch(cb);\\n\\t\\t} else {\\n\\t\\t\\tcb(new Meteor.Error(400, \\\"Can't send cookies on server when `runOnServer` is false.\\\"));\\n\\t\\t}\\n\\t\\treturn void 0;\\n\\t}\\n}\\n\\n/**\\n * @function\\n * @locus Server\\n * @summary Middleware handler\\n * @private\\n */\\nconst __middlewareHandler = (request, response, opts) => {\\n\\tlet _cookies = {};\\n\\tif (opts.runOnServer) {\\n\\t\\tif (request.headers && request.headers.cookie) {\\n\\t\\t\\t_cookies = parse(request.headers.cookie);\\n\\t\\t}\\n\\n\\t\\treturn new __cookies({\\n\\t\\t\\t_cookies,\\n\\t\\t\\tTTL: opts.TTL,\\n\\t\\t\\trunOnServer: opts.runOnServer,\\n\\t\\t\\tresponse,\\n\\t\\t\\tallowQueryStringCookies: opts.allowQueryStringCookies,\\n\\t\\t});\\n\\t}\\n\\n\\tthrow new Meteor.Error(400, \\\"Can't use middleware when `runOnServer` is false.\\\");\\n};\\n\\n/**\\n * @locus Anywhere\\n * @class Cookies\\n * @param opts {Object}\\n * @param opts.TTL {Number} - Default cookies expiration time (max-age) in milliseconds, by default - session (false)\\n * @param opts.auto {Boolean} - [Server] Auto-bind in middleware as `req.Cookies`, by default `true`\\n * @param opts.handler {Function} - [Server] Middleware handler\\n * @param opts.runOnServer {Boolean} - Expose Cookies class to Server\\n * @param opts.allowQueryStringCookies {Boolean} - Allow passing Cookies in a query string (in URL). Primary should be used only in Cordova environment\\n * @param opts.allowedCordovaOrigins {Regex|Boolean} - [Server] Allow setting Cookies from that specific origin which in Meteor/Cordova is localhost:12XXX (^http://localhost:12[0-9]{3}$)\\n * @summary Main Cookie class\\n */\\nclass Cookies extends __cookies {\\n\\tconstructor(opts = {}) {\\n\\t\\topts.TTL = helpers.isNumber(opts.TTL) ? opts.TTL : false;\\n\\t\\topts.runOnServer = opts.runOnServer !== false ? true : false;\\n\\t\\topts.allowQueryStringCookies = opts.allowQueryStringCookies !== true ? false : true;\\n\\n\\t\\tif (Meteor.isClient) {\\n\\t\\t\\topts._cookies = document.cookie;\\n\\t\\t\\tsuper(opts);\\n\\t\\t} else {\\n\\t\\t\\topts._cookies = {};\\n\\t\\t\\tsuper(opts);\\n\\t\\t\\topts.auto = opts.auto !== false ? true : false;\\n\\t\\t\\tthis.opts = opts;\\n\\t\\t\\tthis.handler = helpers.isFunction(opts.handler) ? opts.handler : false;\\n\\t\\t\\tthis.onCookies = helpers.isFunction(opts.onCookies) ? opts.onCookies : false;\\n\\n\\t\\t\\tif (opts.runOnServer && !Cookies.isLoadedOnServer) {\\n\\t\\t\\t\\tCookies.isLoadedOnServer = true;\\n\\t\\t\\t\\tif (opts.auto) {\\n\\t\\t\\t\\t\\tWebApp.connectHandlers.use((req, res, next) => {\\n\\t\\t\\t\\t\\t\\tif (urlRE.test(req._parsedUrl.path)) {\\n\\t\\t\\t\\t\\t\\t\\tconst matchedCordovaOrigin =\\n\\t\\t\\t\\t\\t\\t\\t\\t!!req.headers.origin && this.allowedCordovaOrigins && this.allowedCordovaOrigins.test(req.headers.origin);\\n\\t\\t\\t\\t\\t\\t\\tconst matchedOrigin = matchedCordovaOrigin || (!!req.headers.origin && this.originRE.test(req.headers.origin));\\n\\n\\t\\t\\t\\t\\t\\t\\tif (matchedOrigin) {\\n\\t\\t\\t\\t\\t\\t\\t\\tres.setHeader('Access-Control-Allow-Credentials', 'true');\\n\\t\\t\\t\\t\\t\\t\\t\\tres.setHeader('Access-Control-Allow-Origin', req.headers.origin);\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\tconst cookiesArray = [];\\n\\t\\t\\t\\t\\t\\t\\tlet cookiesObject = {};\\n\\t\\t\\t\\t\\t\\t\\tif (matchedCordovaOrigin && opts.allowQueryStringCookies && req.query.___cookies___) {\\n\\t\\t\\t\\t\\t\\t\\t\\tcookiesObject = parse(decodeURIComponent(req.query.___cookies___));\\n\\t\\t\\t\\t\\t\\t\\t} else if (req.headers.cookie) {\\n\\t\\t\\t\\t\\t\\t\\t\\tcookiesObject = parse(req.headers.cookie);\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\tconst cookiesKeys = Object.keys(cookiesObject);\\n\\t\\t\\t\\t\\t\\t\\tif (cookiesKeys.length) {\\n\\t\\t\\t\\t\\t\\t\\t\\tfor (let i = 0; i < cookiesKeys.length; i++) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tconst { cookieString } = serialize(cookiesKeys[i], cookiesObject[cookiesKeys[i]]);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif (!cookiesArray.includes(cookieString)) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcookiesArray.push(cookieString);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\tif (cookiesArray.length) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tres.setHeader('Set-Cookie', cookiesArray);\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\thelpers.isFunction(this.onCookies) && this.onCookies(__middlewareHandler(req, res, opts));\\n\\n\\t\\t\\t\\t\\t\\t\\tres.writeHead(200);\\n\\t\\t\\t\\t\\t\\t\\tres.end('');\\n\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\treq.Cookies = __middlewareHandler(req, res, opts);\\n\\t\\t\\t\\t\\t\\t\\thelpers.isFunction(this.handler) && this.handler(req.Cookies);\\n\\t\\t\\t\\t\\t\\t\\tnext();\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t/**\\n\\t * @locus Server\\n\\t * @memberOf Cookies\\n\\t * @name middleware\\n\\t * @summary Get Cookies instance into callback\\n\\t * @returns {void}\\n\\t */\\n\\tmiddleware() {\\n\\t\\tif (!Meteor.isServer) {\\n\\t\\t\\tthrow new Meteor.Error(500, \\\"[ostrio:cookies] Can't use `.middleware()` on Client, it's Server only!\\\");\\n\\t\\t}\\n\\n\\t\\treturn (req, res, next) => {\\n\\t\\t\\thelpers.isFunction(this.handler) && this.handler(__middlewareHandler(req, res, this.opts));\\n\\t\\t\\tnext();\\n\\t\\t};\\n\\t}\\n}\\n\\nif (Meteor.isServer) {\\n\\tCookies.isLoadedOnServer = false;\\n}\\n\\n/* Export the Cookies class */\\nexport { Cookies };\\n\",null],\"names\":[\"Meteor\",\"fetch\",\"WebApp\",\"module\",\"export\",\"Cookies\",\"link\",\"v\",\"isServer\",\"require\",\"NoOp\",\"urlRE\",\"rootUrl\",\"process\",\"env\",\"ROOT_URL\",\"window\",\"__meteor_runtime_config__\",\"meteorEnv\",\"mobileRootUrl\",\"MOBILE_ROOT_URL\",\"helpers\",\"isUndefined\",\"obj\",\"isArray\",\"Array\",\"clone\",\"isObject\",\"slice\",\"Object\",\"assign\",\"_helpers\",\"i\",\"length\",\"prototype\",\"toString\",\"call\",\"decode\",\"decodeURIComponent\",\"encode\",\"encodeURIComponent\",\"pairSplitRegExp\",\"fieldContentRegExp\",\"tryDecode\",\"str\",\"d\",\"e\",\"parse\",\"options\",\"val\",\"key\",\"eqIndx\",\"Error\",\"opt\",\"split\",\"forEach\",\"pair\",\"indexOf\",\"unescape\",\"substr\",\"trim\",\"antiCircular\",\"_obj\",\"object\",\"cache\",\"Map\",\"JSON\",\"stringify\",\"value\",\"get\",\"set\",\"serialize\",\"name\",\"arguments\",\"undefined\",\"test\",\"escape\",\"sanitizedValue\",\"stringified\",\"concat\",\"pairs\",\"isNumber\",\"maxAge\",\"push\",\"domain\",\"path\",\"expires\",\"expire\",\"Infinity\",\"Date\",\"toUTCString\",\"httpOnly\",\"secure\",\"firstPartyOnly\",\"sameSite\",\"cookieString\",\"join\",\"isStringifiedRegEx\",\"isTypedRegEx\",\"deserialize\",\"string\",\"match\",\"console\",\"error\",\"__cookies\",\"constructor\",\"opts\",\"__pendingCookies\",\"TTL\",\"response\",\"runOnServer\",\"allowQueryStringCookies\",\"allowedCordovaOrigins\",\"originRE\",\"RegExp\",\"_cookies\",\"cookies\",\"_tmp\",\"hasOwnProperty\",\"isClient\",\"document\",\"cookie\",\"setHeader\",\"remove\",\"keys\",\"has\",\"send\",\"cb\",\"ROOT_URL_PATH_PREFIX\",\"query\",\"isCordova\",\"cookiesKeys\",\"cookiesArray\",\"includes\",\"absoluteUrl\",\"credentials\",\"type\",\"then\",\"catch\",\"__middlewareHandler\",\"request\",\"headers\",\"auto\",\"handler\",\"isFunction\",\"onCookies\",\"isLoadedOnServer\",\"connectHandlers\",\"use\",\"req\",\"res\",\"next\",\"_parsedUrl\",\"matchedCordovaOrigin\",\"origin\",\"matchedOrigin\",\"cookiesObject\",\"___cookies___\",\"writeHead\",\"end\",\"middleware\"],\"mappings\":\"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\"}"}