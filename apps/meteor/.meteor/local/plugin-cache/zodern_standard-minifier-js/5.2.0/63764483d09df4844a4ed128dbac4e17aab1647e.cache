{"code":"function module(e,t,l){let r,n,a,u,i,o,s,c,d,m;let v=[\"value\",\"onChange\"],k=[\"value\"];l.link(\"@babel/runtime/helpers/extends\",{default(e){r=e}},0),l.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){n=e}},1),l.link(\"@rocket.chat/fuselage\",{AutoComplete(e){a=e},Option(e){u=e}},0),l.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){i=e}},1),l.link(\"@tanstack/react-query\",{useQuery(e){o=e}},2),l.link(\"react\",{default(e){s=e},memo(e){c=e},useMemo(e){d=e},useState(e){m=e}},3),l.exportDefault(c(e=>{let{value:t,onChange:l}=e,c=n(e,v),[p,f]=m(\"\"),h=i(\"GET\",\"/v1/livechat/visitors.autocomplete\"),b=o([\"audit\",\"visitors\",p],()=>h({selector:JSON.stringify({term:null!=p?p:\"\"})})),g=d(()=>{var e,t;return null!==(e=null===(t=b.data)||void 0===t?void 0:t.items.map(e=>{var t;return{value:e._id,label:null!==(t=e.name)&&void 0!==t?t:e.username}}))&&void 0!==e?e:[]},[b.data]);return s.createElement(a,r({},c,{value:t,onChange:l,filter:p,setFilter:f,renderSelected:e=>{let{selected:{label:t}}=e;return s.createElement(s.Fragment,null,t)},renderItem:e=>{let{value:t}=e,l=n(e,k);return s.createElement(u,r({key:t},l))},options:g}))}))}","map":"{\"version\":3,\"sources\":[\"client/views/audit/components/forms/VisitorAutoComplete.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { AutoComplete, Option } from '@rocket.chat/fuselage';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ComponentProps, ReactElement } from 'react';\\nimport React, { memo, useMemo, useState } from 'react';\\n\\ntype VisitorAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'>;\\n\\nconst VisitorAutoComplete = ({ value, onChange, ...props }: VisitorAutoCompleteProps): ReactElement => {\\n\\tconst [filter, setFilter] = useState('');\\n\\n\\tconst performVisitorSearch = useEndpoint('GET', '/v1/livechat/visitors.autocomplete');\\n\\n\\tconst visitorAutocompleteQueryResult = useQuery(['audit', 'visitors', filter], () =>\\n\\t\\tperformVisitorSearch({ selector: JSON.stringify({ term: filter ?? '' }) }),\\n\\t);\\n\\n\\tconst options = useMemo(\\n\\t\\t() => visitorAutocompleteQueryResult.data?.items.map((user) => ({ value: user._id, label: user.name ?? user.username })) ?? [],\\n\\t\\t[visitorAutocompleteQueryResult.data],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<AutoComplete\\n\\t\\t\\t{...props}\\n\\t\\t\\tvalue={value}\\n\\t\\t\\tonChange={onChange}\\n\\t\\t\\tfilter={filter}\\n\\t\\t\\tsetFilter={setFilter}\\n\\t\\t\\trenderSelected={({ selected: { label } }) => <>{label}</>}\\n\\t\\t\\trenderItem={({ value, ...props }) => <Option key={value} {...props} />}\\n\\t\\t\\toptions={options}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(VisitorAutoComplete);\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"AutoComplete\",\"Option\",\"useEndpoint\",\"useQuery\",\"React\",\"memo\",\"useMemo\",\"useState\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"value\",\"onChange\",\"props\",\"_excluded\",\"filter\",\"setFilter\",\"performVisitorSearch\",\"visitorAutocompleteQueryResult\",\"selector\",\"JSON\",\"stringify\",\"term\",\"options\",\"_visitorAutocompleteQ\",\"_visitorAutocompleteQ2\",\"data\",\"items\",\"map\",\"user\",\"_user$name\",\"_id\",\"label\",\"name\",\"username\",\"createElement\",\"renderSelected\",\"_ref2\",\"selected\",\"Fragment\",\"renderItem\",\"_ref3\",\"_excluded2\",\"key\"],\"mappings\":\"2BAAAA,EAA6DC,EAA7DC,EAASC,EAAoDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,yCAApDC,EAAAC,IAAc,CAAA,iCAAc,CAAAC,QAAwBC,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iDAAA,CAAAC,QAAAC,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAtCH,EAAQC,IAAA,CAAA,wBAA6B,CAACT,aAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,OAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAP,YAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAN,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAP,EAAAO,CAAA,EAAAN,KAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,QAAAK,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA7DH,EAAOI,aAAE,CAoCMP,EA5BaQ,IAA0E,GAAzE,CAAEC,MAAAA,CAAK,CAAEC,SAAAA,CAAAA,CAA8C,CAAAF,EAAjCG,EAAKjB,EAAAc,EAAAI,GACjD,CAACC,EAAQC,EAAU,CAAGZ,EAAS,IAE/Ba,EAAuBlB,EAAY,MAAO,sCAE1CmB,EAAiClB,EAAS,CAAC,QAAS,WAAYe,EAAO,CAAE,IAC9EE,EAAqB,CAAEE,SAAUC,KAAKC,SAAS,CAAC,CAAEC,KAAMP,MAAAA,EAAAA,EAAU,EAAE,EAAG,IAGlEQ,EAAUpB,EACf,KAAA,IAAAqB,EAAAC,EAAA,OAAA,AAAwH,OAAxHD,CAAAA,EAAA,AAAyC,OAAzCC,CAAAA,EAAMP,EAA+BQ,IAAI,AAAJA,GAAID,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAnCA,EAAqCE,KAAK,CAACC,GAAG,CAAEC,IAAI,IAAAC,EAAA,MAAM,CAAEnB,MAAOkB,EAAKE,GAAG,CAAEC,MAAK,AAAW,OAAXF,CAAAA,EAAED,EAAKI,IAAI,AAAJA,GAAIH,AAAA,KAAA,IAAAA,EAAAA,EAAID,EAAKK,QAAAA,AAAQ,CAAE,EAAC,GAACV,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAAE,EAC9H,CAACN,EAA+BQ,IAAI,CAAC,EAGtC,OACCzB,EAAAkC,aAAA,CAACtC,EAAYF,EAAA,CAAA,EACRkB,EAAK,CACTF,MAAOA,EACPC,SAAUA,EACVG,OAAQA,EACRC,UAAWA,EACXoB,eAAgBC,IAAA,GAAC,CAAEC,SAAU,CAAEN,MAAAA,CAAAA,CAAK,CAAI,CAAAK,EAAA,OAAKpC,EAAAkC,aAAA,CAAAlC,EAAAsC,QAAA,CAAA,KAAGP,EAAS,EACzDQ,WAAYC,IAAA,GAAC,CAAE9B,MAAAA,CAAAA,CAAiB,CAAA8B,EAAP5B,EAAKjB,EAAA6C,EAAAC,GAAA,OAAOzC,EAAAkC,aAAA,CAACrC,EAAMH,EAAA,CAACgD,IAAKhC,CAAM,EAAKE,GAAS,EACtEU,QAASA,CAAQ,GAGpB\"}"}