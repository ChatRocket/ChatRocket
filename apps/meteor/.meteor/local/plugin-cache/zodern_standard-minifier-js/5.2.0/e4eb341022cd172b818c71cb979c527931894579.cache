{"code":"function module(t,i,n){n.link(\"@babel/runtime/helpers/createClass\",{default:function(t){e=t}},0),n.link(\"@babel/runtime/helpers/inheritsLoose\",{default:function(t){s=t}},1),n.export({DiscussionsList:function(){return u}}),n.link(\"@rocket.chat/string-helpers\",{escapeRegExp:function(t){o=t}},0),n.link(\"./MessageList\",{MessageList:function(t){r=t}},1);var e,s,o,r,u=function(t){function i(i){var n;return(n=t.call(this)||this)._options=void 0,n._options=i,n}s(i,t);var n=i.prototype;return n.updateFilters=function(t){this._options=t,this.clear()},n.filter=function(t){var i=this._options.rid;return!!(t.rid===i&&\"drid\"in t&&(!this._options.text||RegExp(o(this._options.text),\"i\").test(t.msg)))},n.compare=function(t,i){var n,e;return(null!==(n=i.tlm)&&void 0!==n?n:i.ts).getTime()-(null!==(e=t.tlm)&&void 0!==e?e:t.ts).getTime()},e(i,[{key:\"options\",get:function(){return this._options}}])}(r)}","map":"{\"version\":3,\"sources\":[\"client/lib/lists/DiscussionsList.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IDiscussionMessage, IMessage } from '@rocket.chat/core-typings';\\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\\n\\nimport { MessageList } from './MessageList';\\n\\ntype DiscussionMessage = Omit<IMessage, 'drid'> & Required<Pick<IMessage, 'drid'>>;\\n\\nexport type DiscussionsListOptions = {\\n\\trid: IMessage['rid'];\\n\\ttext?: string;\\n};\\n\\nconst isDiscussionMessageInRoom = (message: IMessage, rid: IMessage['rid']): message is DiscussionMessage =>\\n\\tmessage.rid === rid && 'drid' in message;\\n\\nconst isDiscussionTextMatching = (discussionMessage: DiscussionMessage, regex: RegExp): boolean => regex.test(discussionMessage.msg);\\n\\nexport class DiscussionsList extends MessageList<IDiscussionMessage> {\\n\\tpublic constructor(private _options: DiscussionsListOptions) {\\n\\t\\tsuper();\\n\\t}\\n\\n\\tpublic get options(): DiscussionsListOptions {\\n\\t\\treturn this._options;\\n\\t}\\n\\n\\tpublic updateFilters(options: DiscussionsListOptions): void {\\n\\t\\tthis._options = options;\\n\\t\\tthis.clear();\\n\\t}\\n\\n\\tprotected filter(message: IMessage): boolean {\\n\\t\\tconst { rid } = this._options;\\n\\n\\t\\tif (!isDiscussionMessageInRoom(message, rid)) {\\n\\t\\t\\treturn false;\\n\\t\\t}\\n\\n\\t\\tif (this._options.text) {\\n\\t\\t\\tconst regex = new RegExp(escapeRegExp(this._options.text), 'i');\\n\\t\\t\\tif (!isDiscussionTextMatching(message, regex)) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\treturn true;\\n\\t}\\n\\n\\tprotected compare(a: IMessage, b: IMessage): number {\\n\\t\\treturn (b.tlm ?? b.ts).getTime() - (a.tlm ?? a.ts).getTime();\\n\\t}\\n}\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_createClass\",\"_inheritsLoose\",\"export\",\"DiscussionsList\",\"escapeRegExp\",\"MessageList\",\"_MessageList\",\"_options\",\"_this\",\"call\",\"_proto\",\"prototype\",\"updateFilters\",\"options\",\"clear\",\"filter\",\"message\",\"rid\",\"text\",\"regex\",\"RegExp\",\"test\",\"discussionMessage\",\"msg\",\"compare\",\"a\",\"b\",\"_b$tlm\",\"_a$tlm\",\"tlm\",\"ts\",\"getTime\",\"key\",\"get\"],\"mappings\":\"uBACSA,EAAcC,IAAA,CAAM,qCAA8B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAA3DH,EAAOM,MAAE,CAAA,CAAAC,gBAAoB,WAAA,OAAAA,CAA8B,CAAA,GAAAP,EAAAC,IAAA,CAAA,8BAAA,CAAAO,aAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAQ,YAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAc0E,IAdrIC,EAA2DC,EAAAG,EAAAC,EAgB9CF,EAAgB,SAAAG,CAAA,EAC5B,SAAAH,EAA2BI,CAAgC,EAAA,IAAAC,EAAA,MAClDA,AAARA,CAAAA,EAAAF,EAAAG,IAAA,CAAA,IAAK,GAAE,IAAA,EADmBF,QAAA,CAAA,KAAA,EAAAC,EAAAD,QAAQ,CAARA,EAAgCC,CAE3D,CAACP,EAAAE,EAAAG,GAAA,IAAAI,EAAAP,EAAAQ,SAAA,CA8BA,OA9BAD,EAMME,aAAa,CAAb,SAAcC,CAA+B,EACnD,IAAI,CAACN,QAAQ,CAAGM,EAChB,IAAI,CAACC,KAAK,EACX,EAACJ,EAESK,MAAM,CAAN,SAAOC,CAAiB,EACjC,IAAQC,EAAQ,IAAI,CAACV,QAAQ,CAArBU,GAAG,UAnBZD,AAqBgCA,EArBxBC,GAAG,GAqB8BA,GArBlB,SAqBSD,GAI3B,CAAA,CAAA,IAAI,CAACT,QAAQ,CAACW,IAAI,EAvB2EC,AAwBlF,AAAIC,OAAOhB,EAAa,IAAI,CAACG,QAAQ,CAACW,IAAI,EAAG,KAxB2CG,IAAI,CAACC,AAyB7EN,EAzB+FO,GAAG,CAuB/GL,EAQnB,EAACR,EAESc,OAAO,CAAP,SAAQC,CAAW,CAAEC,CAAW,EAAA,IAAAC,EAAAC,EACzC,MAAO,CAAA,AAAM,OAAND,CAAAA,EAACD,EAAEG,GAAG,AAAHA,GAAGF,AAAA,KAAA,IAAAA,EAAAA,EAAID,EAAEI,EAAE,AAAFA,EAAIC,OAAO,GAAK,CAAA,AAAM,OAANH,CAAAA,EAACH,EAAEI,GAAG,AAAHA,GAAGD,AAAA,KAAA,IAAAA,EAAAA,EAAIH,EAAEK,EAAE,AAAFA,EAAIC,OAAO,EAC3D,EAAC/B,EAAAG,EAAA,CAAA,CAAA6B,IAAA,UAAAC,IA5BD,WACC,OAAO,IAAI,CAAC1B,QAAQ,AACrB,CAAC,EAAA,CAAA,EAPmCF\"}"}