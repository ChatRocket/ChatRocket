{"code":"function module(e,n,t){t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){u=e}},0),t.export({useReactiveQuery:function(){return a}}),t.link(\"@tanstack/react-query\",{useQuery:function(e){r=e},useQueryClient:function(e){i=e}},0),t.link(\"meteor/tracker\",{Tracker:function(e){o=e}},1),t.link(\"../lib/utils/queueMicrotask\",{queueMicrotask:function(e){c=e}},2);var u,r,i,o,c,a=function(e,n,t){var a=i();return r(e,function(){return new Promise(function(t,u){c(function(){o.autorun(function(r){var i=n();if(r.firstRun){void 0===i?u(Error(\"Reactive query returned undefined\")):t(i);return}a.invalidateQueries(e,{exact:!0}),r.stop()})})})},u({staleTime:1/0},t))}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useReactiveQuery.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { UseQueryOptions, QueryKey, UseQueryResult } from '@tanstack/react-query';\\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\\nimport { Tracker } from 'meteor/tracker';\\n\\nimport { queueMicrotask } from '../lib/utils/queueMicrotask';\\n\\nexport const useReactiveQuery = <TQueryFnData, TData = TQueryFnData, TQueryKey extends QueryKey = QueryKey>(\\n\\tqueryKey: TQueryKey,\\n\\treactiveQueryFn: () => TQueryFnData,\\n\\toptions?: UseQueryOptions<TQueryFnData, Error, TData, TQueryKey>,\\n): UseQueryResult<TData, Error> => {\\n\\tconst queryClient = useQueryClient();\\n\\n\\treturn useQuery(\\n\\t\\tqueryKey,\\n\\t\\t(): Promise<TQueryFnData> =>\\n\\t\\t\\tnew Promise((resolve, reject) => {\\n\\t\\t\\t\\tqueueMicrotask(() => {\\n\\t\\t\\t\\t\\tTracker.autorun((c) => {\\n\\t\\t\\t\\t\\t\\tconst data = reactiveQueryFn();\\n\\n\\t\\t\\t\\t\\t\\tif (c.firstRun) {\\n\\t\\t\\t\\t\\t\\t\\tif (data === undefined) {\\n\\t\\t\\t\\t\\t\\t\\t\\treject(new Error('Reactive query returned undefined'));\\n\\t\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\tresolve(data);\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\tqueryClient.invalidateQueries(queryKey, { exact: true });\\n\\t\\t\\t\\t\\t\\tc.stop();\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t}),\\n\\t\\t{ staleTime: Infinity, ...options },\\n\\t);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"export\",\"useReactiveQuery\",\"useQuery\",\"useQueryClient\",\"Tracker\",\"queueMicrotask\",\"queryKey\",\"reactiveQueryFn\",\"options\",\"queryClient\",\"Promise\",\"resolve\",\"reject\",\"autorun\",\"c\",\"data\",\"firstRun\",\"undefined\",\"Error\",\"invalidateQueries\",\"exact\",\"stop\",\"staleTime\",\"Infinity\"],\"mappings\":\"uBACiBA,EAAEC,IAAA,CAAA,uCAA8C,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAjEH,EAAOK,MAAE,CAAA,CAAAC,iBAAU,WAAsB,OAAAA,CAAwB,CAAA,GAAAN,EAAAC,IAAA,CAAA,wBAAA,CAAAM,SAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,EAAAK,eAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iBAAA,CAAAQ,QAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAS,eAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAK1D,IALPC,EAAiEG,EAAAC,EAAAC,EAAAC,EAKpDJ,EAAmB,SAC/BK,CAAmB,CACnBC,CAAmC,CACnCC,CAAgE,EAEhE,IAAMC,EAAcN,IAEpB,OAAOD,EACNI,EACA,WAAA,OACC,IAAII,QAAQ,SAACC,CAAO,CAAEC,CAAM,EAC3BP,EAAe,WACdD,EAAQS,OAAO,CAAC,SAACC,CAAC,EACjB,IAAMC,EAAOR,IAEb,GAAIO,EAAEE,QAAQ,CAAE,CACXD,AAASE,KAAAA,IAATF,EACHH,EAAO,AAAIM,MAAM,sCAEjBP,EAAQI,GAET,MACD,CAEAN,EAAYU,iBAAiB,CAACb,EAAU,CAAEc,MAAO,CAAA,CAAI,GACrDN,EAAEO,IAAI,EACP,EACD,EACD,EAAE,EAAAtB,EAAA,CACDuB,UAAWC,GAAQ,EAAKf,GAE5B\"}"}