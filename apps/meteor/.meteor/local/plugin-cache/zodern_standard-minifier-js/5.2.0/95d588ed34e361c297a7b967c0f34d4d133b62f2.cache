{"code":"function module(e,t,l){var n;let r,a,i,s,c,o,d,m,u,f;l.link(\"@babel/runtime/helpers/taggedTemplateLiteral\",{default(e){r=e}},0),l.link(\"@rocket.chat/css-in-js\",{css(e){a=e}},0),l.link(\"@rocket.chat/fuselage\",{Box(e){i=e},Icon(e){s=e}},1),l.link(\"react\",{default(e){c=e},useCallback(e){o=e},useEffect(e){d=e},useState(e){m=e}},2),l.link(\"react-dom\",{createPortal(e){u=e}},3),l.link(\"./ScreenshotCarousel\",{default(e){f=e}},4),l.exportDefault(e=>{var t;let{screenshots:l}=e,[p,h]=m(!1),[g,k]=m(0),[v,x]=m(0),{length:E}=l,S=0===g,b=g===E-1,w=p&&(null==l?void 0:l.length),y=o(e=>{({ArrowLeft:()=>k(e=>0!==e?e-1:0),ArrowRight:()=>k(e=>e!==E-1?e+1:E-1),Escape:()=>h(!1)})[e.key]()},[E]);d(()=>{let e=setInterval(()=>{x(e=>e===E-1?0:e+1)},5e3);return document.addEventListener(\"keydown\",y),()=>{clearInterval(e),document.removeEventListener(\"keydown\",y)}},[y,E]);let I=u(c.createElement(f,{AppScreenshots:l,setViewCarousel:h,handleNextSlide:()=>{k(g+1)},handlePrevSlide:()=>{k(g-1)},isFirstSlide:S,isLastSlide:b,currentSlideIndex:g}),document.body);return c.createElement(c.Fragment,null,c.createElement(i,{onClick:()=>h(!0),display:\"flex\",flexDirection:\"column\",maxWidth:\"x640\",width:\"100%\",style:{cursor:\"pointer\"},tabIndex:0},c.createElement(i,{is:\"img\",src:null===(t=l[v])||void 0===t?void 0:t.accessUrl,alt:\"App preview image\",className:[a(n||(n=r([\"\\n\t\t\t\t\t\t\ttransition: filter 0.2s ease;\\n\t\t\t\t\t\t\t&:hover {\\n\t\t\t\t\t\t\t\tfilter: brightness(90%);\\n\t\t\t\t\t\t\t}\\n\t\t\t\t\t\t\"])))]}),c.createElement(i,{display:\"flex\",flexDirection:\"row\",bg:\"tint\",pi:16,pb:10,alignItems:\"center\"},c.createElement(s,{name:\"image\",size:\"x24\",mie:8}),\" \",c.createElement(i,{is:\"span\",fontScale:\"p2m\",color:\"default\"},v+1,\" of \",l.length))),w&&I)})}","map":"{\"version\":3,\"sources\":[\"client/views/marketplace/components/ScreenshotCarouselAnchor.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { AppScreenshot } from '@rocket.chat/core-typings';\\nimport { css } from '@rocket.chat/css-in-js';\\nimport { Box, Icon } from '@rocket.chat/fuselage';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback, useEffect, useState } from 'react';\\nimport { createPortal } from 'react-dom';\\n\\nimport ScreenshotCarousel from './ScreenshotCarousel';\\n\\ntype ScreenshotCarouselAnchorProps = {\\n\\tscreenshots: AppScreenshot[];\\n};\\n\\ntype voidFunction = () => void;\\n\\nconst ScreenshotCarouselAnchor = ({ screenshots }: ScreenshotCarouselAnchorProps): ReactElement => {\\n\\tconst [viewCarousel, setViewCarousel] = useState(false);\\n\\n\\tconst [currentSlideIndex, setCurrentSlideIndex] = useState(0);\\n\\n\\tconst [currentPreviewIndex, setCurrentPreviewIndex] = useState(0);\\n\\n\\tconst { length } = screenshots;\\n\\n\\tconst isFirstSlide = currentSlideIndex === 0;\\n\\tconst isLastSlide = currentSlideIndex === length - 1;\\n\\n\\tconst isCarouselVisible = viewCarousel && screenshots?.length;\\n\\n\\tconst handleNextSlide = (): void => {\\n\\t\\tsetCurrentSlideIndex(currentSlideIndex + 1);\\n\\t};\\n\\n\\tconst handlePrevSlide = (): void => {\\n\\t\\tsetCurrentSlideIndex(currentSlideIndex - 1);\\n\\t};\\n\\n\\tconst handleKeyboardKey = useCallback(\\n\\t\\t(onKeyDownEvent: KeyboardEvent): void => {\\n\\t\\t\\tconst keysObject: Record<string, voidFunction> = {\\n\\t\\t\\t\\tArrowLeft: () => setCurrentSlideIndex((prevSlideIndex) => (prevSlideIndex !== 0 ? prevSlideIndex - 1 : 0)),\\n\\t\\t\\t\\tArrowRight: () => setCurrentSlideIndex((prevSlideIndex) => (prevSlideIndex !== length - 1 ? prevSlideIndex + 1 : length - 1)),\\n\\t\\t\\t\\tEscape: () => setViewCarousel(false),\\n\\t\\t\\t};\\n\\n\\t\\t\\tkeysObject[onKeyDownEvent.key]();\\n\\t\\t},\\n\\t\\t[length],\\n\\t);\\n\\n\\tuseEffect(() => {\\n\\t\\tconst intervalId = setInterval(() => {\\n\\t\\t\\tsetCurrentPreviewIndex((prevIndex) => {\\n\\t\\t\\t\\tif (prevIndex === length - 1) return 0;\\n\\n\\t\\t\\t\\treturn prevIndex + 1;\\n\\t\\t\\t});\\n\\t\\t}, 5000);\\n\\n\\t\\tdocument.addEventListener('keydown', handleKeyboardKey);\\n\\n\\t\\treturn (): void => {\\n\\t\\t\\tclearInterval(intervalId);\\n\\t\\t\\tdocument.removeEventListener('keydown', handleKeyboardKey);\\n\\t\\t};\\n\\t}, [handleKeyboardKey, length]);\\n\\n\\tconst carouselPortal = createPortal(\\n\\t\\t<ScreenshotCarousel\\n\\t\\t\\tAppScreenshots={screenshots}\\n\\t\\t\\tsetViewCarousel={setViewCarousel}\\n\\t\\t\\thandleNextSlide={handleNextSlide}\\n\\t\\t\\thandlePrevSlide={handlePrevSlide}\\n\\t\\t\\tisFirstSlide={isFirstSlide}\\n\\t\\t\\tisLastSlide={isLastSlide}\\n\\t\\t\\tcurrentSlideIndex={currentSlideIndex}\\n\\t\\t/>,\\n\\t\\tdocument.body,\\n\\t);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<Box\\n\\t\\t\\t\\tonClick={(): void => setViewCarousel(true)}\\n\\t\\t\\t\\tdisplay='flex'\\n\\t\\t\\t\\tflexDirection='column'\\n\\t\\t\\t\\tmaxWidth='x640'\\n\\t\\t\\t\\twidth='100%'\\n\\t\\t\\t\\tstyle={{\\n\\t\\t\\t\\t\\tcursor: 'pointer',\\n\\t\\t\\t\\t}}\\n\\t\\t\\t\\ttabIndex={0}\\n\\t\\t\\t>\\n\\t\\t\\t\\t<Box\\n\\t\\t\\t\\t\\tis='img'\\n\\t\\t\\t\\t\\tsrc={screenshots[currentPreviewIndex]?.accessUrl}\\n\\t\\t\\t\\t\\talt='App preview image'\\n\\t\\t\\t\\t\\tclassName={[\\n\\t\\t\\t\\t\\t\\tcss`\\n\\t\\t\\t\\t\\t\\t\\ttransition: filter 0.2s ease;\\n\\t\\t\\t\\t\\t\\t\\t&:hover {\\n\\t\\t\\t\\t\\t\\t\\t\\tfilter: brightness(90%);\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t`,\\n\\t\\t\\t\\t\\t]}\\n\\t\\t\\t\\t/>\\n\\n\\t\\t\\t\\t<Box display='flex' flexDirection='row' bg='tint' pi={16} pb={10} alignItems='center'>\\n\\t\\t\\t\\t\\t<Icon name='image' size='x24' mie={8} />{' '}\\n\\t\\t\\t\\t\\t<Box is='span' fontScale='p2m' color='default'>\\n\\t\\t\\t\\t\\t\\t{currentPreviewIndex + 1} of {screenshots.length}\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</Box>\\n\\t\\t\\t{isCarouselVisible && carouselPortal}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default ScreenshotCarouselAnchor;\\n\",null],\"names\":[\"_taggedTemplateLiteral\",\"css\",\"Box\",\"Icon\",\"React\",\"useCallback\",\"useEffect\",\"useState\",\"createPortal\",\"ScreenshotCarousel\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_screenshots$currentP\",\"screenshots\",\"viewCarousel\",\"setViewCarousel\",\"currentSlideIndex\",\"setCurrentSlideIndex\",\"currentPreviewIndex\",\"setCurrentPreviewIndex\",\"length\",\"isFirstSlide\",\"isLastSlide\",\"isCarouselVisible\",\"handleKeyboardKey\",\"onKeyDownEvent\",\"keysObject\",\"ArrowLeft\",\"prevSlideIndex\",\"ArrowRight\",\"Escape\",\"key\",\"intervalId\",\"setInterval\",\"prevIndex\",\"document\",\"addEventListener\",\"clearInterval\",\"removeEventListener\",\"carouselPortal\",\"createElement\",\"AppScreenshots\",\"handleNextSlide\",\"handlePrevSlide\",\"body\",\"Fragment\",\"onClick\",\"display\",\"flexDirection\",\"maxWidth\",\"width\",\"style\",\"cursor\",\"tabIndex\",\"is\",\"src\",\"accessUrl\",\"alt\",\"className\",\"_templateObject\",\"bg\",\"pi\",\"pb\",\"alignItems\",\"name\",\"size\",\"mie\",\"fontScale\",\"color\"],\"mappings\":\"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\"}"}