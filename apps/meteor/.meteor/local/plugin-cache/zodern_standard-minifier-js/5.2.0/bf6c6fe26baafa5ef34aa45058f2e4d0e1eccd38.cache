{"code":"function module(e,r,t){let l,i,n,a,c,o,s,d,u,m,E,b,k,h,_,g,v,F;let f=[\"control\",\"trigger\",\"index\"];t.link(\"@babel/runtime/helpers/extends\",{default(e){l=e}},0),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){i=e}},1),t.export({ExternalServiceActionForm:()=>p}),t.link(\"@rocket.chat/fuselage\",{FieldError(e){n=e},Field(e){a=e},FieldHint(e){c=e},FieldLabel(e){o=e},FieldRow(e){s=e},NumberInput(e){d=e},TextAreaInput(e){u=e},FieldGroup(e){m=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){E=e}},1),t.link(\"react\",{default(e){b=e}},2),t.link(\"react-hook-form\",{Controller(e){k=e}},3),t.link(\"react-i18next\",{useTranslation(e){h=e}},4),t.link(\"../../../../hooks/useHasLicenseModule\",{useHasLicenseModule(e){_=e}},5),t.link(\"../hooks\",{useFieldError(e){g=e}},6),t.link(\"./ActionExternalServiceUrl\",{ActionExternalServiceUrl(e){v=e}},7),t.link(\"./ActionSender\",{ActionSender(e){F=e}},8);let p=e=>{let{control:r,trigger:t,index:p}=e,x=i(e,f),{t:T}=h(),q=_(\"livechat-enterprise\"),A=E(),S=\"actions.\".concat(p,\".params.serviceTimeout\"),H=E(),I=\"actions.\".concat(p,\".params.serviceFallbackMessage\"),[L,M]=g({control:r,name:[S,I]});return b.createElement(m,x,b.createElement(F,{disabled:!q,control:r,index:p}),b.createElement(v,{disabled:!q,control:r,trigger:t,index:p}),b.createElement(a,null,b.createElement(o,{required:!0,htmlFor:A},T(\"Timeout_in_miliseconds\")),b.createElement(s,null,b.createElement(k,{control:r,name:S,defaultValue:1e4,rules:{required:T(\"Required_field\",{field:T(\"Timeout_in_miliseconds\")}),min:{value:0,message:T(\"Timeout_in_miliseconds_cant_be_negative_number\")}},render:e=>{let{field:r}=e;return b.createElement(d,l({},r,{error:null==L?void 0:L.message,\"aria-invalid\":!!L,\"aria-describedby\":\"\".concat(A,\"-hint\"),\"aria-required\":!0,onFocus:e=>e.currentTarget.select(),disabled:!q}))}})),L&&b.createElement(n,{\"aria-live\":\"assertive\",id:\"\".concat(A,\"-error\")},L.message),b.createElement(c,{id:\"\".concat(A,\"-hint\")},T(\"Timeout_in_miliseconds_hint\"))),b.createElement(a,null,b.createElement(o,{htmlFor:H},T(\"Fallback_message\")),b.createElement(s,null,b.createElement(k,{control:r,name:I,defaultValue:\"\",render:e=>{let{field:r}=e;return b.createElement(u,l({},r,{id:H,rows:3,placeholder:T(\"Fallback_message\"),error:null==M?void 0:M.message,\"aria-invalid\":!!M,\"aria-describedby\":\"\".concat(H,\"-hint\"),\"aria-required\":!0,disabled:!q}))}})),M&&b.createElement(n,{\"aria-live\":\"assertive\",id:\"\".concat(H,\"-error\")},M.message),b.createElement(c,{id:\"\".concat(H,\"-hint\")},T(\"Service_fallback_message_hint\"))))}}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/triggers/actions/ExternalServiceActionForm.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { FieldError, Field, FieldHint, FieldLabel, FieldRow, NumberInput, TextAreaInput, FieldGroup } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport type { ComponentProps, FocusEvent } from 'react';\\nimport React from 'react';\\nimport type { Control, UseFormTrigger } from 'react-hook-form';\\nimport { Controller } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useHasLicenseModule } from '../../../../hooks/useHasLicenseModule';\\nimport type { TriggersPayload } from '../EditTrigger';\\nimport { useFieldError } from '../hooks';\\nimport { ActionExternalServiceUrl } from './ActionExternalServiceUrl';\\nimport { ActionSender } from './ActionSender';\\n\\ntype SendMessageActionFormType = ComponentProps<typeof Field> & {\\n\\tindex: number;\\n\\tcontrol: Control<TriggersPayload>;\\n\\ttrigger: UseFormTrigger<TriggersPayload>;\\n};\\n\\nexport const ExternalServiceActionForm = ({ control, trigger, index, ...props }: SendMessageActionFormType) => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\\n\\n\\tconst timeoutFieldId = useUniqueId();\\n\\tconst timeoutFieldName = `actions.${index}.params.serviceTimeout` as const;\\n\\tconst fallbackMessageFieldId = useUniqueId();\\n\\tconst fallbackMessageFieldName = `actions.${index}.params.serviceFallbackMessage` as const;\\n\\n\\tconst [timeoutError, fallbackMessageError] = useFieldError({ control, name: [timeoutFieldName, fallbackMessageFieldName] });\\n\\n\\treturn (\\n\\t\\t<FieldGroup {...props}>\\n\\t\\t\\t<ActionSender disabled={!hasLicense} control={control} index={index} />\\n\\n\\t\\t\\t<ActionExternalServiceUrl disabled={!hasLicense} control={control} trigger={trigger} index={index} />\\n\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<FieldLabel required htmlFor={timeoutFieldId}>\\n\\t\\t\\t\\t\\t{t('Timeout_in_miliseconds')}\\n\\t\\t\\t\\t</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\tname={timeoutFieldName}\\n\\t\\t\\t\\t\\t\\tdefaultValue={10000}\\n\\t\\t\\t\\t\\t\\trules={{\\n\\t\\t\\t\\t\\t\\t\\trequired: t('Required_field', { field: t('Timeout_in_miliseconds') }),\\n\\t\\t\\t\\t\\t\\t\\tmin: { value: 0, message: t('Timeout_in_miliseconds_cant_be_negative_number') },\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\trender={({ field }) => {\\n\\t\\t\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\t\\t\\t<NumberInput\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{...field}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\terror={timeoutError?.message}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taria-invalid={Boolean(timeoutError)}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taria-describedby={`${timeoutFieldId}-hint`}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taria-required={true}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tonFocus={(v: FocusEvent<HTMLInputElement>) => v.currentTarget.select()}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tdisabled={!hasLicense}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\n\\t\\t\\t\\t{timeoutError && (\\n\\t\\t\\t\\t\\t<FieldError aria-live='assertive' id={`${timeoutFieldId}-error`}>\\n\\t\\t\\t\\t\\t\\t{timeoutError.message}\\n\\t\\t\\t\\t\\t</FieldError>\\n\\t\\t\\t\\t)}\\n\\n\\t\\t\\t\\t<FieldHint id={`${timeoutFieldId}-hint`}>{t('Timeout_in_miliseconds_hint')}</FieldHint>\\n\\t\\t\\t</Field>\\n\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<FieldLabel htmlFor={fallbackMessageFieldId}>{t('Fallback_message')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\tname={fallbackMessageFieldName}\\n\\t\\t\\t\\t\\t\\tdefaultValue=''\\n\\t\\t\\t\\t\\t\\trender={({ field }) => (\\n\\t\\t\\t\\t\\t\\t\\t<TextAreaInput\\n\\t\\t\\t\\t\\t\\t\\t\\t{...field}\\n\\t\\t\\t\\t\\t\\t\\t\\tid={fallbackMessageFieldId}\\n\\t\\t\\t\\t\\t\\t\\t\\trows={3}\\n\\t\\t\\t\\t\\t\\t\\t\\tplaceholder={t('Fallback_message')}\\n\\t\\t\\t\\t\\t\\t\\t\\terror={fallbackMessageError?.message}\\n\\t\\t\\t\\t\\t\\t\\t\\taria-invalid={Boolean(fallbackMessageError)}\\n\\t\\t\\t\\t\\t\\t\\t\\taria-describedby={`${fallbackMessageFieldId}-hint`}\\n\\t\\t\\t\\t\\t\\t\\t\\taria-required={true}\\n\\t\\t\\t\\t\\t\\t\\t\\tdisabled={!hasLicense}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\n\\t\\t\\t\\t{fallbackMessageError && (\\n\\t\\t\\t\\t\\t<FieldError aria-live='assertive' id={`${fallbackMessageFieldId}-error`}>\\n\\t\\t\\t\\t\\t\\t{fallbackMessageError.message}\\n\\t\\t\\t\\t\\t</FieldError>\\n\\t\\t\\t\\t)}\\n\\n\\t\\t\\t\\t<FieldHint id={`${fallbackMessageFieldId}-hint`}>{t('Service_fallback_message_hint')}</FieldHint>\\n\\t\\t\\t</Field>\\n\\t\\t</FieldGroup>\\n\\t);\\n};\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"FieldError\",\"Field\",\"FieldHint\",\"FieldLabel\",\"FieldRow\",\"NumberInput\",\"TextAreaInput\",\"FieldGroup\",\"useUniqueId\",\"React\",\"Controller\",\"useTranslation\",\"useHasLicenseModule\",\"useFieldError\",\"ActionExternalServiceUrl\",\"ActionSender\",\"module\",\"link\",\"default\",\"v\",\"export\",\"ExternalServiceActionForm\",\"_ref\",\"control\",\"trigger\",\"index\",\"props\",\"_excluded\",\"t\",\"hasLicense\",\"timeoutFieldId\",\"timeoutFieldName\",\"concat\",\"fallbackMessageFieldId\",\"fallbackMessageFieldName\",\"timeoutError\",\"fallbackMessageError\",\"name\",\"createElement\",\"disabled\",\"required\",\"htmlFor\",\"defaultValue\",\"rules\",\"field\",\"min\",\"value\",\"message\",\"render\",\"_ref2\",\"error\",\"Boolean\",\"onFocus\",\"currentTarget\",\"select\",\"id\",\"_ref3\",\"rows\",\"placeholder\"],\"mappings\":\"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\"}"}