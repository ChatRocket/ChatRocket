{"code":"function module(e,t,n){n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){c=e}},0),n.export({useDecryptedMessage:function(){return l}}),n.link(\"@rocket.chat/core-typings\",{isE2EEMessage:function(e){a=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useSafely:function(e){i=e}},1),n.link(\"react\",{useState:function(e){s=e},useEffect:function(e){o=e}},2),n.link(\"react-i18next\",{useTranslation:function(e){r=e}},3),n.link(\"../../app/e2e/client/rocketchat.e2e\",{e2e:function(e){u=e}},4);var c,a,i,s,o,r,u,l=function(e){var t=r().t,n=i(s(t(\"E2E_message_encrypted_placeholder\"))),l=c(n,2),f=l[0],h=l[1];return o(function(){a(e)&&u.decryptMessage(e).then(function(e){var n;e.msg&&h(e.msg),e.attachments&&(null===(n=e.attachments)||void 0===n?void 0:n.length)>0&&(e.attachments[0].description?h(e.attachments[0].description):h(t(\"Message_with_attachment\")))})},[e,t,h]),a(e)?f:e.msg}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useDecryptedMessage.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { isE2EEMessage } from '@rocket.chat/core-typings';\\nimport { useSafely } from '@rocket.chat/fuselage-hooks';\\nimport { useState, useEffect } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { e2e } from '../../app/e2e/client/rocketchat.e2e';\\n\\nexport const useDecryptedMessage = (message: IMessage): string => {\\n\\tconst { t } = useTranslation();\\n\\tconst [decryptedMessage, setDecryptedMessage] = useSafely(useState(t('E2E_message_encrypted_placeholder')));\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!isE2EEMessage(message)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\te2e.decryptMessage(message).then((decryptedMsg) => {\\n\\t\\t\\tif (decryptedMsg.msg) {\\n\\t\\t\\t\\tsetDecryptedMessage(decryptedMsg.msg);\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (decryptedMsg.attachments && decryptedMsg.attachments?.length > 0) {\\n\\t\\t\\t\\tif (decryptedMsg.attachments[0].description) {\\n\\t\\t\\t\\t\\tsetDecryptedMessage(decryptedMsg.attachments[0].description);\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tsetDecryptedMessage(t('Message_with_attachment'));\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t});\\n\\t}, [message, t, setDecryptedMessage]);\\n\\n\\treturn isE2EEMessage(message) ? decryptedMessage : message.msg;\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_slicedToArray\",\"export\",\"useDecryptedMessage\",\"isE2EEMessage\",\"useSafely\",\"useState\",\"useEffect\",\"useTranslation\",\"e2e\",\"message\",\"t\",\"_useTranslation\",\"_useSafely\",\"_useSafely2\",\"decryptedMessage\",\"setDecryptedMessage\",\"decryptMessage\",\"then\",\"decryptedMsg\",\"_decryptedMsg$attachm\",\"msg\",\"attachments\",\"length\",\"description\"],\"mappings\":\"uBACSA,EAAeC,IAAM,CAAA,uCAA4B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAA1DH,EAAOK,MAAE,CAAA,CAAAC,oBAAqB,WAAA,OAAAA,CAA4B,CAAA,GAAAN,EAAAC,IAAA,CAAA,4BAAA,CAAAM,cAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAO,UAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAQ,SAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,EAAAO,UAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAU,eAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sCAAA,CAAAW,IAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,CAAA,EAAA,GAOnD,IAPPC,EAA0DG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAO7CN,EAAsB,SAACO,CAAiB,EACpD,IAAQC,EAACC,AAAKJ,IAANG,CAAC,CACTE,EAAgDR,EAAUC,EAASK,EAAE,uCAAsCG,EAAAb,EAAAY,EAAA,GAApGE,EAAgBD,CAAA,CAAA,EAAA,CAAEE,EAAmBF,CAAA,CAAA,EAAA,CAsB5C,OApBAP,EAAU,WACJH,EAAcM,IAInBD,EAAIQ,cAAc,CAACP,GAASQ,IAAI,CAAC,SAACC,CAAY,EAAI,IAAAC,CAC7CD,CAAAA,EAAaE,GAAG,EACnBL,EAAoBG,EAAaE,GAAG,EAGjCF,EAAaG,WAAW,EAAI,CAAA,AAAwB,OAAxBF,CAAAA,EAAAD,EAAaG,WAAW,AAAXA,GAAWF,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAxBA,EAA0BG,MAAM,AAANA,EAAS,IAC9DJ,EAAaG,WAAW,CAAC,EAAE,CAACE,WAAW,CAC1CR,EAAoBG,EAAaG,WAAW,CAAC,EAAE,CAACE,WAAW,EAE3DR,EAAoBL,EAAE,4BAGzB,EACD,EAAG,CAACD,EAASC,EAAGK,EAAoB,EAE7BZ,EAAcM,GAAWK,EAAmBL,EAAQW,GAAG,AAC/D\"}"}