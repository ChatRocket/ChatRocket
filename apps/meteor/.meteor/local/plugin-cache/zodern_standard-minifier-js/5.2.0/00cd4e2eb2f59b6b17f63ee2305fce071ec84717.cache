{"code":"function module(t,i,e){let a,l;e.export({processSetReaction:()=>n}),e.link(\"../../../../app/emoji/client\",{emoji(t){a=t}},0),e.link(\"../../utils/callWithErrorHandling\",{callWithErrorHandling(t){l=t}},1);let n=async(t,i)=>{let{msg:e}=i,n=e.trim().match(/^\\+(:.*?:)$/m);if(!n)return!1;let[,r]=n;if(!a.list[r])return!1;let o=await t.data.findLastMessage();return!!o&&(await l(\"setReaction\",r,o._id),!0)}}","map":"{\"version\":3,\"sources\":[\"client/lib/chats/flows/processSetReaction.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\n\\nimport { emoji } from '../../../../app/emoji/client';\\nimport { callWithErrorHandling } from '../../utils/callWithErrorHandling';\\nimport type { ChatAPI } from '../ChatAPI';\\n\\nexport const processSetReaction = async (chat: ChatAPI, { msg }: Pick<IMessage, 'msg'>): Promise<boolean> => {\\n\\tconst match = msg.trim().match(/^\\\\+(:.*?:)$/m);\\n\\tif (!match) {\\n\\t\\treturn false;\\n\\t}\\n\\n\\tconst [, reaction] = match;\\n\\tif (!emoji.list[reaction]) {\\n\\t\\treturn false;\\n\\t}\\n\\n\\tconst lastMessage = await chat.data.findLastMessage();\\n\\n\\tif (!lastMessage) {\\n\\t\\treturn false;\\n\\t}\\n\\n\\tawait callWithErrorHandling('setReaction', reaction, lastMessage._id);\\n\\treturn true;\\n};\\n\",null],\"names\":[\"emoji\",\"callWithErrorHandling\",\"module\",\"export\",\"processSetReaction\",\"link\",\"v\",\"chat\",\"_ref\",\"msg\",\"match\",\"trim\",\"reaction\",\"list\",\"lastMessage\",\"data\",\"findLastMessage\",\"_id\"],\"mappings\":\"2BAEqDA,EAAAC,EAArDC,EAAOC,MAAE,CAAK,CAAAC,mBAAQA,IAAAA,CAA+B,GAAAF,EAAAG,IAAA,CAAA,+BAAA,CAAAL,MAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,oCAAA,CAAAJ,sBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAI9C,IAAMF,EAAqB,MAAOG,EAAaC,KAAsD,GAApD,CAAEC,IAAAA,CAAAA,CAA4B,CAAAD,EAC/EE,EAAQD,EAAIE,IAAI,GAAGD,KAAK,CAAC,gBAC/B,GAAI,CAACA,EACJ,MAAO,CAAA,EAGR,GAAM,EAAGE,EAAS,CAAGF,EACrB,GAAI,CAACV,EAAMa,IAAI,CAACD,EAAS,CACxB,MAAO,CAAA,EAGR,IAAME,EAAc,MAAMP,EAAKQ,IAAI,CAACC,eAAe,SAEnD,EAAKF,IAIL,MAAMb,EAAsB,cAAeW,EAAUE,EAAYG,GAAG,EAC7D,CAAA,EACR\"}"}