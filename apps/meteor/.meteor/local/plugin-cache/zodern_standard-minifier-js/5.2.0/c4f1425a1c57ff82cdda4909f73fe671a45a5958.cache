{"code":"function module(e,t,n){let l,a,o,r,c,i,u,d,s,m,E,_,f,h,k,w,A,g,p;n.link(\"@rocket.chat/fuselage\",{Box(e){l=e},Accordion(e){a=e},ButtonGroup(e){o=e},Button(e){r=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){c=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useSetting(e){i=e},useTranslation(e){u=e},useUser(e){d=e}},2),n.link(\"react\",{default(e){s=e}},3),n.link(\"react-hook-form\",{FormProvider(e){m=e},useForm(e){E=e}},4),n.link(\"../../../components/Page\",{Page(e){_=e},PageHeader(e){f=e},PageScrollableContentWithShadow(e){h=e},PageFooter(e){k=e}},5),n.link(\"./ChangePassword\",{default(e){w=e}},6),n.link(\"./EndToEnd\",{default(e){A=e}},7),n.link(\"./TwoFactorEmail\",{default(e){g=e}},8),n.link(\"./TwoFactorTOTP\",{default(e){p=e}},9);let P={password:\"\",confirmationPassword:\"\"};n.exportDefault(()=>{let e=u(),t=d(),n=i(\"Accounts_twoFactorAuthentication_email_available_for_OAuth_users\"),T=null==t?void 0:t.isOAuthUser,y=E({defaultValues:P,mode:\"all\"}),{reset:F,formState:{isDirty:b}}=y,x=i(\"Accounts_TwoFactorAuthentication_Enabled\"),S=i(\"Accounts_TwoFactorAuthentication_By_TOTP_Enabled\"),B=i(\"Accounts_TwoFactorAuthentication_By_Email_Enabled\"),C=i(\"E2E_Enable\"),v=i(\"Accounts_AllowPasswordChange\"),I=B&&(!T||n),O=c();return s.createElement(_,null,s.createElement(f,{title:e(\"Security\")}),s.createElement(h,null,s.createElement(l,{maxWidth:\"x600\",w:\"full\",alignSelf:\"center\",color:\"default\"},v&&s.createElement(m,y,s.createElement(a,null,s.createElement(a.Item,{title:e(\"Password\"),defaultExpanded:!0},s.createElement(w,{id:O})))),s.createElement(a,null,(S||I)&&x&&s.createElement(a.Item,{title:e(\"Two Factor Authentication\")},S&&s.createElement(p,null),I&&s.createElement(g,null)),C&&s.createElement(a.Item,{title:e(\"End-to-end_encryption\"),\"aria-label\":e(\"End-to-end_encryption\"),defaultExpanded:!x,\"data-qa-type\":\"e2e-encryption-section\"},s.createElement(A,null))))),s.createElement(k,{isDirty:b},s.createElement(o,null,s.createElement(r,{onClick:()=>F(P)},e(\"Cancel\")),s.createElement(r,{form:O,primary:!0,disabled:!b,type:\"submit\"},e(\"Save_changes\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/account/security/AccountSecurityPage.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Accordion, ButtonGroup, Button } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { useSetting, useTranslation, useUser } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React from 'react';\\nimport { FormProvider, useForm } from 'react-hook-form';\\n\\nimport { Page, PageHeader, PageScrollableContentWithShadow, PageFooter } from '../../../components/Page';\\nimport ChangePassword from './ChangePassword';\\nimport EndToEnd from './EndToEnd';\\nimport TwoFactorEmail from './TwoFactorEmail';\\nimport TwoFactorTOTP from './TwoFactorTOTP';\\n\\nconst passwordDefaultValues = { password: '', confirmationPassword: '' };\\n\\nconst AccountSecurityPage = (): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst user = useUser();\\n\\n\\tconst isEmail2FAAvailableForOAuth = useSetting('Accounts_twoFactorAuthentication_email_available_for_OAuth_users');\\n\\tconst isOAuthUser = user?.isOAuthUser;\\n\\tconst isEmail2FAAllowed = !isOAuthUser || isEmail2FAAvailableForOAuth;\\n\\n\\tconst methods = useForm({\\n\\t\\tdefaultValues: passwordDefaultValues,\\n\\t\\tmode: 'all',\\n\\t});\\n\\tconst {\\n\\t\\treset,\\n\\t\\tformState: { isDirty },\\n\\t} = methods;\\n\\n\\tconst twoFactorEnabled = useSetting('Accounts_TwoFactorAuthentication_Enabled');\\n\\tconst twoFactorTOTP = useSetting('Accounts_TwoFactorAuthentication_By_TOTP_Enabled');\\n\\tconst twoFactorByEmailEnabled = useSetting('Accounts_TwoFactorAuthentication_By_Email_Enabled');\\n\\tconst e2eEnabled = useSetting('E2E_Enable');\\n\\tconst allowPasswordChange = useSetting('Accounts_AllowPasswordChange');\\n\\tconst showEmailTwoFactor = twoFactorByEmailEnabled && isEmail2FAAllowed;\\n\\n\\tconst passwordFormId = useUniqueId();\\n\\n\\treturn (\\n\\t\\t<Page>\\n\\t\\t\\t<PageHeader title={t('Security')} />\\n\\t\\t\\t<PageScrollableContentWithShadow>\\n\\t\\t\\t\\t<Box maxWidth='x600' w='full' alignSelf='center' color='default'>\\n\\t\\t\\t\\t\\t{allowPasswordChange && (\\n\\t\\t\\t\\t\\t\\t<FormProvider {...methods}>\\n\\t\\t\\t\\t\\t\\t\\t<Accordion>\\n\\t\\t\\t\\t\\t\\t\\t\\t<Accordion.Item title={t('Password')} defaultExpanded>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ChangePassword id={passwordFormId} />\\n\\t\\t\\t\\t\\t\\t\\t\\t</Accordion.Item>\\n\\t\\t\\t\\t\\t\\t\\t</Accordion>\\n\\t\\t\\t\\t\\t\\t</FormProvider>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t<Accordion>\\n\\t\\t\\t\\t\\t\\t{(twoFactorTOTP || showEmailTwoFactor) && twoFactorEnabled && (\\n\\t\\t\\t\\t\\t\\t\\t<Accordion.Item title={t('Two Factor Authentication')}>\\n\\t\\t\\t\\t\\t\\t\\t\\t{twoFactorTOTP && <TwoFactorTOTP />}\\n\\t\\t\\t\\t\\t\\t\\t\\t{showEmailTwoFactor && <TwoFactorEmail />}\\n\\t\\t\\t\\t\\t\\t\\t</Accordion.Item>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t{e2eEnabled && (\\n\\t\\t\\t\\t\\t\\t\\t<Accordion.Item\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle={t('End-to-end_encryption')}\\n\\t\\t\\t\\t\\t\\t\\t\\taria-label={t('End-to-end_encryption')}\\n\\t\\t\\t\\t\\t\\t\\t\\tdefaultExpanded={!twoFactorEnabled}\\n\\t\\t\\t\\t\\t\\t\\t\\tdata-qa-type='e2e-encryption-section'\\n\\t\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t\\t<EndToEnd />\\n\\t\\t\\t\\t\\t\\t\\t</Accordion.Item>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</Accordion>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</PageScrollableContentWithShadow>\\n\\t\\t\\t<PageFooter isDirty={isDirty}>\\n\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t<Button onClick={() => reset(passwordDefaultValues)}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button form={passwordFormId} primary disabled={!isDirty} type='submit'>\\n\\t\\t\\t\\t\\t\\t{t('Save_changes')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</PageFooter>\\n\\t\\t</Page>\\n\\t);\\n};\\n\\nexport default AccountSecurityPage;\\n\",null],\"names\":[\"Box\",\"Accordion\",\"ButtonGroup\",\"Button\",\"useUniqueId\",\"useSetting\",\"useTranslation\",\"useUser\",\"React\",\"FormProvider\",\"useForm\",\"Page\",\"PageHeader\",\"PageScrollableContentWithShadow\",\"PageFooter\",\"ChangePassword\",\"EndToEnd\",\"TwoFactorEmail\",\"TwoFactorTOTP\",\"module\",\"link\",\"v\",\"default\",\"passwordDefaultValues\",\"password\",\"confirmationPassword\",\"exportDefault\",\"AccountSecurityPage\",\"t\",\"user\",\"isEmail2FAAvailableForOAuth\",\"isOAuthUser\",\"methods\",\"defaultValues\",\"mode\",\"reset\",\"formState\",\"isDirty\",\"twoFactorEnabled\",\"twoFactorTOTP\",\"twoFactorByEmailEnabled\",\"e2eEnabled\",\"allowPasswordChange\",\"showEmailTwoFactor\",\"passwordFormId\",\"createElement\",\"title\",\"maxWidth\",\"w\",\"alignSelf\",\"color\",\"Item\",\"defaultExpanded\",\"id\",\"onClick\",\"form\",\"primary\",\"disabled\",\"type\"],\"mappings\":\"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\"}"}