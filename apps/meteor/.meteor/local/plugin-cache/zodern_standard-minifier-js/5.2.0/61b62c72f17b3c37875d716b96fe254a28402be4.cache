{"code":"function module(e,n,u){u.export({useDeleteUser:function(){return a}}),u.link(\"@rocket.chat/ui-contexts\",{useStream:function(e){t=e},useUserId:function(e){i=e}},0),u.link(\"react\",{useEffect:function(e){r=e}},1),u.link(\"../../../../app/models/client\",{ChatMessage:function(e){s=e}},2);var t,i,r,s,a=function(){var e=t(\"notify-logged\"),n=i();r(function(){if(n)return e(\"Users:Deleted\",function(e){var n=e.userId,u=e.messageErasureType,t=e.replaceByUser;if(\"Unlink\"===u&&t)return s.update({\"u._id\":n},{$set:{alias:t.alias,\"u._id\":t._id,\"u.username\":t.username,\"u.name\":void 0}},{multi:!0});s.remove({\"u._id\":n})})},[e,n])}}","map":"{\"version\":3,\"sources\":[\"client/providers/UserProvider/hooks/useDeleteUser.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useStream, useUserId } from '@rocket.chat/ui-contexts';\\nimport { useEffect } from 'react';\\n\\nimport { ChatMessage } from '../../../../app/models/client';\\n\\nexport const useDeleteUser = () => {\\n\\tconst notify = useStream('notify-logged');\\n\\n\\tconst uid = useUserId();\\n\\tuseEffect(() => {\\n\\t\\tif (!uid) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\treturn notify('Users:Deleted', ({ userId, messageErasureType, replaceByUser }) => {\\n\\t\\t\\tif (messageErasureType === 'Unlink' && replaceByUser) {\\n\\t\\t\\t\\treturn ChatMessage.update(\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t'u._id': userId,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t$set: {\\n\\t\\t\\t\\t\\t\\t\\t'alias': replaceByUser.alias,\\n\\t\\t\\t\\t\\t\\t\\t'u._id': replaceByUser._id,\\n\\t\\t\\t\\t\\t\\t\\t'u.username': replaceByUser.username,\\n\\t\\t\\t\\t\\t\\t\\t'u.name': undefined,\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t{ multi: true },\\n\\t\\t\\t\\t);\\n\\t\\t\\t}\\n\\t\\t\\tChatMessage.remove({\\n\\t\\t\\t\\t'u._id': userId,\\n\\t\\t\\t});\\n\\t\\t});\\n\\t}, [notify, uid]);\\n};\\n\",null],\"names\":[\"module\",\"export\",\"useDeleteUser\",\"link\",\"useStream\",\"v\",\"useUserId\",\"useEffect\",\"ChatMessage\",\"notify\",\"uid\",\"_ref\",\"userId\",\"messageErasureType\",\"replaceByUser\",\"update\",\"$set\",\"alias\",\"_id\",\"username\",\"undefined\",\"multi\",\"remove\"],\"mappings\":\"uBAAAA,EAAOC,MAAE,CAAA,CAAAC,cAAoB,WAAQ,OAAAA,CAAA,CAAA,GAA2BF,EAAAG,IAAA,CAAA,2BAAA,CAAAC,UAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,EAAAC,UAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,QAAA,CAAAI,UAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,gCAAA,CAAAK,YAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAKzD,IALyDD,EAAAE,EAAAC,EAAAC,EAKnDN,EAAgB,WAC5B,IAAMO,EAASL,EAAU,iBAEnBM,EAAMJ,IACZC,EAAU,WACT,GAAKG,EAGL,OAAOD,EAAO,gBAAiB,SAAAE,CAAA,EAAkD,IAA/CC,EAAMD,EAANC,MAAM,CAAEC,EAAkBF,EAAlBE,kBAAkB,CAAEC,EAAaH,EAAbG,aAAa,CAC1E,GAAID,AAAuB,WAAvBA,GAAmCC,EACtC,OAAON,EAAYO,MAAM,CACxB,CACC,QAASH,GAEV,CACCI,KAAM,CACL,MAASF,EAAcG,KAAK,CAC5B,QAASH,EAAcI,GAAG,CAC1B,aAAcJ,EAAcK,QAAQ,CACpC,SAAUC,KAAAA,IAGZ,CAAEC,MAAO,CAAA,CAAI,GAGfb,EAAYc,MAAM,CAAC,CAClB,QAASV,GAEX,EACD,EAAG,CAACH,EAAQC,EAAI,CACjB\"}"}