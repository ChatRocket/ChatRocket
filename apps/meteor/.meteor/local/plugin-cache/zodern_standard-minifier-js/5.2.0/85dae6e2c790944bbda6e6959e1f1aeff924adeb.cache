{"code":"function module(e,o,n){let t,l,i,c,a,r,u,d,m,f,s,C,p,k,E,v,V,P,_;n.link(\"@rocket.chat/fuselage\",{Skeleton(e){t=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){l=e}},1),n.link(\"@rocket.chat/ui-video-conf\",{VideoConfPopup(e){i=e},VideoConfPopupContent(e){c=e},VideoConfPopupControllers(e){a=e},VideoConfController(e){r=e},useVideoConfControllers(e){u=e},VideoConfButton(e){d=e},VideoConfPopupFooter(e){m=e},VideoConfPopupFooterButtons(e){f=e},VideoConfPopupTitle(e){s=e},VideoConfPopupHeader(e){C=e}},2),n.link(\"react\",{default(e){p=e},useMemo(e){k=e}},3),n.link(\"react-i18next\",{useTranslation(e){E=e}},4),n.link(\"../../../../../../contexts/VideoConfContext\",{useVideoConfSetPreferences(e){v=e}},5),n.link(\"../../../../../../hooks/useAsyncState\",{AsyncStatePhase(e){V=e}},6),n.link(\"../../../../../../hooks/useEndpointData\",{useEndpointData(e){P=e}},7),n.link(\"./VideoConfPopupRoomInfo\",{default(e){_=e}},8),n.exportDefault(e=>{var o,n;let{id:h,room:D,position:x,onClose:y,onMute:M,onConfirm:S}=e,{t:b}=E(),{controllersConfig:g,handleToggleMic:A,handleToggleCam:I}=u(),B=v(),F=k(()=>({callId:h}),[h]),{phase:L,value:O}=P(\"/v1/video-conference.info\",{params:F}),R=!!(null==O?void 0:null===(o=O.capabilities)||void 0===o?void 0:o.mic),T=!!(null==O?void 0:null===(n=O.capabilities)||void 0===n?void 0:n.cam),G=l(()=>{B(g),S()});return p.createElement(i,{position:x},p.createElement(C,null,p.createElement(s,{text:b(\"Incoming_call_from\")}),L===V.LOADING&&p.createElement(t,null),L===V.RESOLVED&&(R||T)&&p.createElement(a,null,T&&p.createElement(r,{active:g.cam,title:b(g.cam?\"Cam_on\":\"Cam_off\"),icon:g.cam?\"video\":\"video-off\",onClick:I}),R&&p.createElement(r,{active:g.mic,title:b(g.mic?\"Mic_on\":\"Mic_off\"),icon:g.mic?\"mic\":\"mic-off\",onClick:A}))),p.createElement(c,null,p.createElement(_,{room:D})),p.createElement(m,null,p.createElement(f,null,p.createElement(d,{primary:!0,onClick:G},b(\"Accept\")),y&&p.createElement(d,{danger:!0,secondary:!0,onClick:()=>y(h)},b(\"Decline\")),p.createElement(r,{small:!1,secondary:!0,title:b(\"Mute_and_dismiss\"),icon:\"cross\",onClick:()=>M(h)}))))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/VideoConference/VideoConfPopups/VideoConfPopup/IncomingPopup.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { Skeleton } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport {\\n\\tVideoConfPopup,\\n\\tVideoConfPopupContent,\\n\\tVideoConfPopupControllers,\\n\\tVideoConfController,\\n\\tuseVideoConfControllers,\\n\\tVideoConfButton,\\n\\tVideoConfPopupFooter,\\n\\tVideoConfPopupFooterButtons,\\n\\tVideoConfPopupTitle,\\n\\tVideoConfPopupHeader,\\n} from '@rocket.chat/ui-video-conf';\\nimport type { ReactElement } from 'react';\\nimport React, { useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useVideoConfSetPreferences } from '../../../../../../contexts/VideoConfContext';\\nimport { AsyncStatePhase } from '../../../../../../hooks/useAsyncState';\\nimport { useEndpointData } from '../../../../../../hooks/useEndpointData';\\nimport VideoConfPopupRoomInfo from './VideoConfPopupRoomInfo';\\n\\ntype IncomingPopupProps = {\\n\\tid: string;\\n\\troom: IRoom;\\n\\tposition: number;\\n\\tonClose: (id: string) => void;\\n\\tonMute: (id: string) => void;\\n\\tonConfirm: () => void;\\n};\\n\\nconst IncomingPopup = ({ id, room, position, onClose, onMute, onConfirm }: IncomingPopupProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst { controllersConfig, handleToggleMic, handleToggleCam } = useVideoConfControllers();\\n\\tconst setPreferences = useVideoConfSetPreferences();\\n\\n\\tconst params = useMemo(() => ({ callId: id }), [id]);\\n\\tconst { phase, value } = useEndpointData('/v1/video-conference.info', { params });\\n\\tconst showMic = Boolean(value?.capabilities?.mic);\\n\\tconst showCam = Boolean(value?.capabilities?.cam);\\n\\n\\tconst handleJoinCall = useMutableCallback(() => {\\n\\t\\tsetPreferences(controllersConfig);\\n\\t\\tonConfirm();\\n\\t});\\n\\n\\treturn (\\n\\t\\t<VideoConfPopup position={position}>\\n\\t\\t\\t<VideoConfPopupHeader>\\n\\t\\t\\t\\t<VideoConfPopupTitle text={t('Incoming_call_from')} />\\n\\t\\t\\t\\t{phase === AsyncStatePhase.LOADING && <Skeleton />}\\n\\t\\t\\t\\t{phase === AsyncStatePhase.RESOLVED && (showMic || showCam) && (\\n\\t\\t\\t\\t\\t<VideoConfPopupControllers>\\n\\t\\t\\t\\t\\t\\t{showCam && (\\n\\t\\t\\t\\t\\t\\t\\t<VideoConfController\\n\\t\\t\\t\\t\\t\\t\\t\\tactive={controllersConfig.cam}\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle={controllersConfig.cam ? t('Cam_on') : t('Cam_off')}\\n\\t\\t\\t\\t\\t\\t\\t\\ticon={controllersConfig.cam ? 'video' : 'video-off'}\\n\\t\\t\\t\\t\\t\\t\\t\\tonClick={handleToggleCam}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t{showMic && (\\n\\t\\t\\t\\t\\t\\t\\t<VideoConfController\\n\\t\\t\\t\\t\\t\\t\\t\\tactive={controllersConfig.mic}\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle={controllersConfig.mic ? t('Mic_on') : t('Mic_off')}\\n\\t\\t\\t\\t\\t\\t\\t\\ticon={controllersConfig.mic ? 'mic' : 'mic-off'}\\n\\t\\t\\t\\t\\t\\t\\t\\tonClick={handleToggleMic}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</VideoConfPopupControllers>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</VideoConfPopupHeader>\\n\\t\\t\\t<VideoConfPopupContent>\\n\\t\\t\\t\\t<VideoConfPopupRoomInfo room={room} />\\n\\t\\t\\t</VideoConfPopupContent>\\n\\t\\t\\t<VideoConfPopupFooter>\\n\\t\\t\\t\\t<VideoConfPopupFooterButtons>\\n\\t\\t\\t\\t\\t<VideoConfButton primary onClick={handleJoinCall}>\\n\\t\\t\\t\\t\\t\\t{t('Accept')}\\n\\t\\t\\t\\t\\t</VideoConfButton>\\n\\t\\t\\t\\t\\t{onClose && (\\n\\t\\t\\t\\t\\t\\t<VideoConfButton danger secondary onClick={(): void => onClose(id)}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Decline')}\\n\\t\\t\\t\\t\\t\\t</VideoConfButton>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t<VideoConfController small={false} secondary title={t('Mute_and_dismiss')} icon='cross' onClick={(): void => onMute(id)} />\\n\\t\\t\\t\\t</VideoConfPopupFooterButtons>\\n\\t\\t\\t</VideoConfPopupFooter>\\n\\t\\t</VideoConfPopup>\\n\\t);\\n};\\n\\nexport default IncomingPopup;\\n\",null],\"names\":[\"Skeleton\",\"useMutableCallback\",\"VideoConfPopup\",\"VideoConfPopupContent\",\"VideoConfPopupControllers\",\"VideoConfController\",\"useVideoConfControllers\",\"VideoConfButton\",\"VideoConfPopupFooter\",\"VideoConfPopupFooterButtons\",\"VideoConfPopupTitle\",\"VideoConfPopupHeader\",\"React\",\"useMemo\",\"useTranslation\",\"useVideoConfSetPreferences\",\"AsyncStatePhase\",\"useEndpointData\",\"VideoConfPopupRoomInfo\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"_value$capabilities\",\"_value$capabilities2\",\"id\",\"room\",\"position\",\"onClose\",\"onMute\",\"onConfirm\",\"t\",\"controllersConfig\",\"handleToggleMic\",\"handleToggleCam\",\"setPreferences\",\"params\",\"callId\",\"phase\",\"value\",\"showMic\",\"Boolean\",\"capabilities\",\"mic\",\"showCam\",\"cam\",\"handleJoinCall\",\"createElement\",\"text\",\"LOADING\",\"RESOLVED\",\"active\",\"title\",\"icon\",\"onClick\",\"primary\",\"danger\",\"secondary\",\"small\"],\"mappings\":\"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\"}"}