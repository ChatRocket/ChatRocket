{"code":"function module(e,n,t){t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){r=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){i=e}},1),t.export({useAutoGrow:function(){return c}}),t.link(\"@rocket.chat/fuselage-hooks\",{useContentBoxSize:function(e){o=e}},0),t.link(\"react\",{useEffect:function(e){l=e},useState:function(e){u=e}},1);var r,i,o,l,u,a={position:\"fixed\",top:\"-10000px\",left:\"-10000px\",resize:\"none\",whiteSpace:\"pre-wrap\",wordWrap:\"break-word\",willChange:\"contents\"},c=function(e,n,t){var c=u(function(){return e.current&&window.getComputedStyle(e.current)}),p=i(c,2),d=p[0],f=p[1];l(function(){e.current&&f(function(){return e.current&&window.getComputedStyle(e.current)})},[e]),l(function(){var t=e.current;if(t){var r=function(){var e=t.value,r=n.current;r&&(r.innerHTML=e.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\\n$/,\"<br/>&nbsp;\").replace(/\\n/g,\"<br/>\"))};return r(),t.addEventListener(\"input\",r),function(){t.removeEventListener(\"input\",r)}}},[e,n]);var w=o(n),s=o(e);return{textAreaStyle:r(r({},t&&{visibility:\"hidden\"}),{},{whiteSpace:\"pre-wrap\",wordWrap:\"break-word\",overflowWrap:\"break-word\",willChange:\"contents\",wordBreak:\"normal\",overflowY:w.blockSize>parseInt((null==d?void 0:d.maxHeight)||\"0\")?\"scroll\":\"hidden\"},w.blockSize&&{height:w.blockSize+\"px\"}),shadowStyle:r(r({},a),{},{font:null==d?void 0:d.font,width:s.inlineSize,minHeight:null==d?void 0:d.lineHeight,lineHeight:null==d?void 0:d.lineHeight})}}}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useContentBoxSize } from '@rocket.chat/fuselage-hooks';\\nimport type { CSSProperties, RefObject } from 'react';\\nimport { useEffect, useState } from 'react';\\n\\nconst shadowStyleBase: CSSProperties = {\\n\\tposition: 'fixed',\\n\\ttop: '-10000px',\\n\\tleft: '-10000px',\\n\\tresize: 'none',\\n\\twhiteSpace: 'pre-wrap',\\n\\twordWrap: 'break-word',\\n\\twillChange: 'contents',\\n};\\n\\nexport const useAutoGrow = (\\n\\tref: RefObject<HTMLTextAreaElement>,\\n\\tshadowRef: RefObject<HTMLDivElement>,\\n\\thideTextArea?: boolean,\\n): {\\n\\ttextAreaStyle: CSSProperties;\\n\\tshadowStyle: CSSProperties;\\n} => {\\n\\tconst [style, setStyle] = useState(() => ref.current && window.getComputedStyle(ref.current));\\n\\n\\tuseEffect(() => {\\n\\t\\tconst { current: textarea } = ref;\\n\\n\\t\\tif (!textarea) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tsetStyle(() => ref.current && window.getComputedStyle(ref.current));\\n\\t}, [ref]);\\n\\n\\tuseEffect(() => {\\n\\t\\tconst { current: textarea } = ref;\\n\\n\\t\\tif (!textarea) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tconst updateTextareaSize = () => {\\n\\t\\t\\tconst { value } = textarea;\\n\\t\\t\\tconst { current: shadow } = shadowRef;\\n\\t\\t\\tif (!shadow) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tshadow.innerHTML = value\\n\\t\\t\\t\\t.replace(/&/g, '&amp;')\\n\\t\\t\\t\\t.replace(/</g, '&lt;')\\n\\t\\t\\t\\t.replace(/>/g, '&gt;')\\n\\t\\t\\t\\t.replace(/\\\\n$/, '<br/>&nbsp;')\\n\\t\\t\\t\\t.replace(/\\\\n/g, '<br/>');\\n\\t\\t};\\n\\t\\tupdateTextareaSize();\\n\\t\\ttextarea.addEventListener('input', updateTextareaSize);\\n\\t\\treturn () => {\\n\\t\\t\\ttextarea.removeEventListener('input', updateTextareaSize);\\n\\t\\t};\\n\\t}, [ref, shadowRef]);\\n\\n\\tconst shadowContentSize = useContentBoxSize(shadowRef);\\n\\n\\tconst composerContentSize = useContentBoxSize(ref);\\n\\n\\treturn {\\n\\t\\ttextAreaStyle: {\\n\\t\\t\\t...(hideTextArea && {\\n\\t\\t\\t\\tvisibility: 'hidden',\\n\\t\\t\\t}),\\n\\t\\t\\twhiteSpace: 'pre-wrap',\\n\\t\\t\\twordWrap: 'break-word',\\n\\t\\t\\toverflowWrap: 'break-word',\\n\\t\\t\\twillChange: 'contents',\\n\\t\\t\\twordBreak: 'normal',\\n\\t\\t\\toverflowY: shadowContentSize.blockSize > parseInt(style?.maxHeight || '0') ? 'scroll' : 'hidden',\\n\\t\\t\\t...(shadowContentSize.blockSize && {\\n\\t\\t\\t\\theight: `${shadowContentSize.blockSize}px`,\\n\\t\\t\\t}),\\n\\t\\t},\\n\\t\\tshadowStyle: {\\n\\t\\t\\t...shadowStyleBase,\\n\\t\\t\\tfont: style?.font,\\n\\t\\t\\twidth: composerContentSize.inlineSize,\\n\\t\\t\\tminHeight: style?.lineHeight,\\n\\t\\t\\tlineHeight: style?.lineHeight,\\n\\t\\t},\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"_slicedToArray\",\"export\",\"useAutoGrow\",\"useContentBoxSize\",\"useEffect\",\"useState\",\"shadowStyleBase\",\"position\",\"top\",\"left\",\"resize\",\"whiteSpace\",\"wordWrap\",\"willChange\",\"ref\",\"shadowRef\",\"hideTextArea\",\"_useState\",\"current\",\"window\",\"getComputedStyle\",\"_useState2\",\"style\",\"setStyle\",\"textarea\",\"updateTextareaSize\",\"value\",\"shadow\",\"innerHTML\",\"replace\",\"addEventListener\",\"removeEventListener\",\"shadowContentSize\",\"composerContentSize\",\"textAreaStyle\",\"visibility\",\"overflowWrap\",\"wordBreak\",\"overflowY\",\"blockSize\",\"parseInt\",\"maxHeight\",\"height\",\"shadowStyle\",\"font\",\"width\",\"inlineSize\",\"minHeight\",\"lineHeight\"],\"mappings\":\"uBAASA,EAAAC,IAAmB,CAAA,uCAAoC,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAhEH,EAAOM,MAAE,CAAA,CAAAC,YAAiB,WAAQ,OAAAA,CAAA,CAAA,GAA8BP,EAAAC,IAAA,CAAA,8BAAA,CAAAO,kBAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAQ,UAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,EAAAO,SAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAIhE,IAJAC,EAAgEC,EAAAG,EAAAC,EAAAC,EAI1DC,EAAiC,CACtCC,SAAU,QACVC,IAAK,WACLC,KAAM,WACNC,OAAQ,OACRC,WAAY,WACZC,SAAU,aACVC,WAAY,YAGAX,EAAc,SAC1BY,CAAmC,CACnCC,CAAoC,CACpCC,CAAsB,EAKtB,IAAAC,EAA0BZ,EAAS,WAAA,OAAMS,EAAII,OAAO,EAAIC,OAAOC,gBAAgB,CAACN,EAAII,OAAO,CAAC,GAACG,EAAArB,EAAAiB,EAAA,GAAtFK,EAAKD,CAAA,CAAA,EAAA,CAAEE,EAAQF,CAAA,CAAA,EAAA,CAEtBjB,EAAU,WACqBU,EAAtBI,OAAO,EAKfK,EAAS,WAAA,OAAMT,EAAII,OAAO,EAAIC,OAAOC,gBAAgB,CAACN,EAAII,OAAO,CAAC,EACnE,EAAG,CAACJ,EAAI,EAERV,EAAU,WACT,IAAiBoB,EAAaV,EAAtBI,OAAO,CAEf,GAAKM,GAGL,IAAMC,EAAqB,WAC1B,IAAQC,EAAUF,EAAVE,KAAK,CACIC,EAAWZ,EAApBG,OAAO,CACVS,GAGLA,CAAAA,EAAOC,SAAS,CAAGF,EACjBG,OAAO,CAAC,KAAM,SACdA,OAAO,CAAC,KAAM,QACdA,OAAO,CAAC,KAAM,QACdA,OAAO,CAAC,MAAO,eACfA,OAAO,CAAC,MAAO,QAAO,CACzB,EAGA,OAFAJ,IACAD,EAASM,gBAAgB,CAAC,QAASL,GAC5B,WACND,EAASO,mBAAmB,CAAC,QAASN,EACvC,EACD,EAAG,CAACX,EAAKC,EAAU,EAEnB,IAAMiB,EAAoB7B,EAAkBY,GAEtCkB,EAAsB9B,EAAkBW,GAE9C,MAAO,CACNoB,cAAanC,EAAAA,EAAA,CAAA,EACRiB,GAAgB,CACnBmB,WAAY,WACZ,CAAA,EAAA,CACDxB,WAAY,WACZC,SAAU,aACVwB,aAAc,aACdvB,WAAY,WACZwB,UAAW,SACXC,UAAWN,EAAkBO,SAAS,CAAGC,SAAS,AAAAlB,CAAAA,MAAAA,EAAK,KAAA,EAALA,EAAOmB,SAAS,AAATA,GAAa,KAAO,SAAW,QAAQ,EAC5FT,EAAkBO,SAAS,EAAI,CAClCG,OAAWV,EAAkBO,SAAS,CAAA,OAGxCI,YAAW5C,EAAAA,EAAA,CAAA,EACPO,GAAe,CAAA,EAAA,CAClBsC,KAAMtB,MAAAA,EAAK,KAAA,EAALA,EAAOsB,IAAI,CACjBC,MAAOZ,EAAoBa,UAAU,CACrCC,UAAWzB,MAAAA,EAAK,KAAA,EAALA,EAAO0B,UAAU,CAC5BA,WAAY1B,MAAAA,EAAK,KAAA,EAALA,EAAO0B,UAAAA,AAAU,GAGhC\"}"}