{"code":"function module(e,t,n){n.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),n.link(\"@babel/runtime/helpers/typeof\",{default:function(e){s=e}},1),n.export({useGetMessageByID:function(){return l}}),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){a=e}},0),n.link(\"react\",{useCallback:function(e){i=e}},1),n.link(\"../../../../../../app/models/client\",{Messages:function(e){u=e}},2),n.link(\"../../../../../lib/onClientMessageReceived\",{onClientMessageReceived:function(e){c=e}},3),n.link(\"../../../../../lib/utils/mapMessageFromApi\",{mapMessageFromApi:function(e){o=e}},4);var r,s,a,i,u,c,o,l=function(){var e=a(\"GET\",\"/v1/chat.getMessage\");return i(function(t){var n,a,i;return r.async(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,r.awrap(e({msgId:t}));case 3:return n=l.sent.message,a=o(n),l.next=8,r.awrap(c(a));case 8:if(l.t0=l.sent,l.t0){l.next=11;break}l.t0=a;case 11:return i=l.t0,u.upsert({_id:i._id},{$set:i}),l.abrupt(\"return\",i);case 16:if(l.prev=16,l.t1=l.catch(0),!(\"object\"===s(l.t1)&&null!==l.t1&&\"success\"in l.t1)){l.next=20;break}throw Error(\"Message not found\");case 20:throw l.t1;case 21:case\"end\":return l.stop()}},null,null,[[0,16]],Promise)},[e])}}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/Threads/hooks/useGetMessageByID.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useCallback } from 'react';\\n\\nimport { Messages } from '../../../../../../app/models/client';\\nimport { onClientMessageReceived } from '../../../../../lib/onClientMessageReceived';\\nimport { mapMessageFromApi } from '../../../../../lib/utils/mapMessageFromApi';\\n\\nexport const useGetMessageByID = () => {\\n\\tconst getMessage = useEndpoint('GET', '/v1/chat.getMessage');\\n\\n\\treturn useCallback(\\n\\t\\tasync (mid: IMessage['_id']) => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst { message: rawMessage } = await getMessage({ msgId: mid });\\n\\t\\t\\t\\tconst mappedMessage = mapMessageFromApi(rawMessage);\\n\\t\\t\\t\\tconst message = (await onClientMessageReceived(mappedMessage)) || mappedMessage;\\n\\t\\t\\t\\tMessages.upsert({ _id: message._id }, { $set: message as any });\\n\\t\\t\\t\\treturn message;\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tif (typeof error === 'object' && error !== null && 'success' in error) {\\n\\t\\t\\t\\t\\tthrow new Error('Message not found');\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tthrow error;\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[getMessage],\\n\\t);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_typeof\",\"export\",\"useGetMessageByID\",\"useEndpoint\",\"useCallback\",\"Messages\",\"onClientMessageReceived\",\"mapMessageFromApi\",\"getMessage\",\"mid\",\"rawMessage\",\"mappedMessage\",\"message\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"msgId\",\"_await$getMessage\",\"sent\",\"t0\",\"upsert\",\"_id\",\"$set\",\"abrupt\",\"t1\",\"Error\",\"stop\",\"Promise\"],\"mappings\":\"uBACsBA,EAAMC,IAAA,CAAA,6BAA2B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAvDH,EAAOM,MAAE,CAAA,CAAAC,kBAAmB,WAAA,OAAAA,CAA2B,CAAA,GAAAP,EAAAC,IAAA,CAAA,2BAAA,CAAAO,YAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAQ,YAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sCAAA,CAAAS,SAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6CAAA,CAAAU,wBAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6CAAA,CAAAW,kBAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,CAAA,EAAA,GAOhD,IAPPC,EAAuDC,EAAAG,EAAAC,EAAAC,EAAAC,EAAAC,EAO1CL,EAAoB,WAChC,IAAMM,EAAaL,EAAY,MAAO,uBAEtC,OAAOC,EACN,SAAOK,CAAoB,EAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAb,EAAAc,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAAjB,EAAAkB,KAAA,CAEaT,EAAW,CAAEU,MAAOT,CAAG,GAAG,MAAA,EACb,OADlCC,EAAUS,AAAqCL,EAAAM,IAAA,CAAxDR,OAAO,CACTD,EAAgBJ,EAAkBG,GAAWI,EAAAE,IAAA,CAAA,EAAAjB,EAAAkB,KAAA,CAC5BX,EAAwBK,GAAc,MAAA,EAAA,GAAAG,EAAAO,EAAA,CAAAP,EAAAM,IAAA,CAAAN,EAAAO,EAAA,CAAA,CAAAP,EAAAE,IAAA,CAAA,GAAA,KAAA,CAAAF,EAAAO,EAAA,CAAKV,CAAa,MAAA,GACf,OAD1DC,EAAOE,EAAAO,EAAA,CACbhB,EAASiB,MAAM,CAAC,CAAEC,IAAKX,EAAQW,GAAAA,AAAG,EAAI,CAAEC,KAAMZ,CAAc,GAAIE,EAAAW,MAAA,CAAA,SACzDb,EAAO,MAAA,GAAA,GAAAE,EAAAC,IAAA,CAAA,GAAAD,EAAAY,EAAA,CAAAZ,EAAA,KAAA,CAAA,GAAA,CAEVd,CAAAA,AAAiB,WAAjBA,EAAAc,EAAAY,EAAA,GAA6BZ,AAAU,OAAVA,EAAAY,EAAA,EAAkB,YAASZ,EAAAY,EAAS,AAATA,EAAS,CAAAZ,EAAAE,IAAA,CAAA,GAAA,KAAA,CAAA,MAC9D,AAAIW,MAAM,oBAAoB,MAAA,GAAA,MAAAb,EAAAY,EAAA,MAAA,GAAA,IAAA,MAAA,OAAAZ,EAAAc,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,GAAA,CAAA,CAAAC,QAAA,EAMvC,CAACrB,EAAW,CAEd\"}"}