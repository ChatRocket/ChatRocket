{"code":"function module(e,t,a){let n,r,l,i,s,o;a.link(\"@rocket.chat/fuselage\",{Skeleton(e){n=e}},0),a.link(\"@tanstack/react-query\",{useQuery(e){r=e}},1),a.link(\"react\",{default(e){l=e}},2),a.link(\"react-i18next\",{useTranslation(e){i=e}},3),a.link(\"../../../../views/room/contextualBar/Threads/hooks/useGetMessageByID\",{useGetMessageByID(e){s=e}},4),a.link(\"../../../MarkdownText\",{default(e){o=e}},5);let u=(e,t)=>0===e.length&&t?\"You_reacted_with\":e.length>10?t?\"You_users_and_more_Reacted_with\":\"Users_and_more_reacted_with\":t?\"You_and_users_Reacted_with\":\"Users_reacted_with\";a.exportDefault(e=>{let{emojiName:t,usernames:a,mine:c,messageId:d,showRealName:h,username:g}=e,{t:m}=i(),_=u(a,c),f=s(),{data:k,isLoading:x}=r([\"chat.getMessage\",\"reactions\",d,a],async()=>{if(!a.length)return[];if(!h)return a;let e=await f(d),{reactions:n}=e;if(!n)return[];if(g){var r;let e=n[t].usernames.indexOf(g);return e>=0&&(null===(r=n[t].names)||void 0===r||r.splice(e,1)),(n[t].names||a).filter(Boolean)}return n[t].names||a},{staleTime:3e5});return x?l.createElement(l.Fragment,null,l.createElement(n,{width:\"x200\",variant:\"text\",backgroundColor:\"surface-light\"}),l.createElement(n,{width:\"x200\",variant:\"text\",backgroundColor:\"surface-light\"}),a.length>5&&l.createElement(n,{width:\"x200\",variant:\"text\",backgroundColor:\"surface-light\"}),a.length>8&&l.createElement(n,{width:\"x200\",variant:\"text\",backgroundColor:\"surface-light\"})):l.createElement(o,{content:m(_,{counter:a.length>10?a.length-10:a.length,users:(null==k?void 0:k.slice(0,10).join(\", \"))||\"\",emoji:t}),variant:\"inline\"})})}","map":"{\"version\":3,\"sources\":[\"client/components/message/content/reactions/ReactionTooltip.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Skeleton } from '@rocket.chat/fuselage';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useGetMessageByID } from '../../../../views/room/contextualBar/Threads/hooks/useGetMessageByID';\\nimport MarkdownText from '../../../MarkdownText';\\n\\ntype ReactionTooltipProps = {\\n\\temojiName: string;\\n\\tusernames: string[];\\n\\tusername: string | undefined;\\n\\tmine: boolean;\\n\\tshowRealName: boolean;\\n\\tmessageId: string;\\n};\\n\\nconst getTranslationKey = (users: string[], mine: boolean): TranslationKey => {\\n\\tif (users.length === 0) {\\n\\t\\tif (mine) {\\n\\t\\t\\treturn 'You_reacted_with';\\n\\t\\t}\\n\\t}\\n\\n\\tif (users.length > 10) {\\n\\t\\tif (mine) {\\n\\t\\t\\treturn 'You_users_and_more_Reacted_with';\\n\\t\\t}\\n\\t\\treturn 'Users_and_more_reacted_with';\\n\\t}\\n\\n\\tif (mine) {\\n\\t\\treturn 'You_and_users_Reacted_with';\\n\\t}\\n\\treturn 'Users_reacted_with';\\n};\\n\\nconst ReactionTooltip = ({ emojiName, usernames, mine, messageId, showRealName, username }: ReactionTooltipProps) => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst key = getTranslationKey(usernames, mine);\\n\\n\\tconst getMessage = useGetMessageByID();\\n\\n\\tconst { data: users, isLoading } = useQuery(\\n\\t\\t['chat.getMessage', 'reactions', messageId, usernames],\\n\\t\\tasync () => {\\n\\t\\t\\t// This happens if the only reaction is from the current user\\n\\t\\t\\tif (!usernames.length) {\\n\\t\\t\\t\\treturn [];\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (!showRealName) {\\n\\t\\t\\t\\treturn usernames;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst data = await getMessage(messageId);\\n\\n\\t\\t\\tconst { reactions } = data;\\n\\n\\t\\t\\tif (!reactions) {\\n\\t\\t\\t\\treturn [];\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (username) {\\n\\t\\t\\t\\tconst index = reactions[emojiName].usernames.indexOf(username);\\n\\t\\t\\t\\tindex >= 0 && reactions[emojiName].names?.splice(index, 1);\\n\\t\\t\\t\\treturn (reactions[emojiName].names || usernames).filter(Boolean);\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn reactions[emojiName].names || usernames;\\n\\t\\t},\\n\\t\\t{ staleTime: 1000 * 60 * 5 },\\n\\t);\\n\\n\\tif (isLoading) {\\n\\t\\treturn (\\n\\t\\t\\t<>\\n\\t\\t\\t\\t<Skeleton width='x200' variant='text' backgroundColor='surface-light' />\\n\\t\\t\\t\\t<Skeleton width='x200' variant='text' backgroundColor='surface-light' />\\n\\t\\t\\t\\t{usernames.length > 5 && <Skeleton width='x200' variant='text' backgroundColor='surface-light' />}\\n\\t\\t\\t\\t{usernames.length > 8 && <Skeleton width='x200' variant='text' backgroundColor='surface-light' />}\\n\\t\\t\\t</>\\n\\t\\t);\\n\\t}\\n\\n\\treturn (\\n\\t\\t<MarkdownText\\n\\t\\t\\tcontent={t(key, {\\n\\t\\t\\t\\tcounter: usernames.length > 10 ? usernames.length - 10 : usernames.length,\\n\\t\\t\\t\\tusers: users?.slice(0, 10).join(', ') || '',\\n\\t\\t\\t\\temoji: emojiName,\\n\\t\\t\\t})}\\n\\t\\t\\tvariant='inline'\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default ReactionTooltip;\\n\",null],\"names\":[\"Skeleton\",\"useQuery\",\"React\",\"useTranslation\",\"useGetMessageByID\",\"MarkdownText\",\"module\",\"link\",\"v\",\"default\",\"getTranslationKey\",\"users\",\"mine\",\"length\",\"exportDefault\",\"_ref\",\"emojiName\",\"usernames\",\"messageId\",\"showRealName\",\"username\",\"t\",\"key\",\"getMessage\",\"data\",\"isLoading\",\"reactions\",\"_reactions$emojiName$\",\"index\",\"indexOf\",\"names\",\"splice\",\"filter\",\"Boolean\",\"staleTime\",\"createElement\",\"Fragment\",\"width\",\"variant\",\"backgroundColor\",\"content\",\"counter\",\"slice\",\"join\",\"emoji\"],\"mappings\":\"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\"}"}