{"code":"function module(n,t,e){var i,o,u,a,c,s,r,f;function l(n){var t=n.rid,e=n.tmid,l=n.encrypted,k=i(),d=s(),m=c(),E=r(t),g=f(function(){var n=new u({rid:t,tmid:e,uid:k,actionManager:m});return[n,function(){return n.release()}]},[t,e,k,l,E]);return o(function(){d&&(null==g||g.readStateManager.updateSubscription(d))},[d,null==g?void 0:g.readStateManager]),g.emojiPicker=a(),g}e.export({useChatMessagesInstance:function(){return l}}),e.link(\"@rocket.chat/ui-contexts\",{useUserId:function(n){i=n}},0),e.link(\"react\",{useEffect:function(n){o=n}},1),e.link(\"../../../../../app/ui/client/lib/ChatMessages\",{ChatMessages:function(n){u=n}},2),e.link(\"../../../../contexts/EmojiPickerContext\",{useEmojiPicker:function(n){a=n}},3),e.link(\"../../../../uikit/hooks/useUiKitActionManager\",{useUiKitActionManager:function(n){c=n}},4),e.link(\"../../contexts/RoomContext\",{useRoomSubscription:function(n){s=n}},5),e.link(\"../../hooks/useE2EERoomState\",{useE2EERoomState:function(n){r=n}},6),e.link(\"./useInstance\",{useInstance:function(n){f=n}},7)}","map":"{\"version\":3,\"sources\":[\"client/views/room/providers/hooks/useChatMessagesInstance.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage, IRoom } from '@rocket.chat/core-typings';\\nimport { useUserId } from '@rocket.chat/ui-contexts';\\nimport { useEffect } from 'react';\\n\\nimport { ChatMessages } from '../../../../../app/ui/client/lib/ChatMessages';\\nimport { useEmojiPicker } from '../../../../contexts/EmojiPickerContext';\\nimport type { ChatAPI } from '../../../../lib/chats/ChatAPI';\\nimport { useUiKitActionManager } from '../../../../uikit/hooks/useUiKitActionManager';\\nimport { useRoomSubscription } from '../../contexts/RoomContext';\\nimport { useE2EERoomState } from '../../hooks/useE2EERoomState';\\nimport { useInstance } from './useInstance';\\n\\nexport function useChatMessagesInstance({\\n\\trid,\\n\\ttmid,\\n\\tencrypted,\\n}: {\\n\\trid: IRoom['_id'];\\n\\ttmid?: IMessage['_id'];\\n\\tencrypted: IRoom['encrypted'];\\n}): ChatAPI {\\n\\tconst uid = useUserId();\\n\\tconst subscription = useRoomSubscription();\\n\\tconst actionManager = useUiKitActionManager();\\n\\tconst e2eRoomState = useE2EERoomState(rid);\\n\\n\\tconst chatMessages = useInstance(() => {\\n\\t\\tconst instance = new ChatMessages({ rid, tmid, uid, actionManager });\\n\\n\\t\\treturn [instance, () => instance.release()];\\n\\t}, [rid, tmid, uid, encrypted, e2eRoomState]);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (subscription) {\\n\\t\\t\\tchatMessages?.readStateManager.updateSubscription(subscription);\\n\\t\\t}\\n\\t}, [subscription, chatMessages?.readStateManager]);\\n\\n\\tchatMessages.emojiPicker = useEmojiPicker();\\n\\n\\treturn chatMessages;\\n}\\n\",null],\"names\":[\"useUserId\",\"useEffect\",\"ChatMessages\",\"useEmojiPicker\",\"useUiKitActionManager\",\"useRoomSubscription\",\"useE2EERoomState\",\"useInstance\",\"useChatMessagesInstance\",\"_ref\",\"rid\",\"tmid\",\"encrypted\",\"uid\",\"subscription\",\"actionManager\",\"e2eRoomState\",\"chatMessages\",\"instance\",\"release\",\"readStateManager\",\"updateSubscription\",\"emojiPicker\",\"module\",\"export\",\"link\",\"v\"],\"mappings\":\"2BACqDA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAW/C,SAAUC,EAAuBC,CAAA,EAQtC,IAPAC,EAAGD,EAAHC,GAAG,CACHC,EAAIF,EAAJE,IAAI,CACJC,EAASH,EAATG,SAAS,CAMHC,EAAMb,IACNc,EAAeT,IACfU,EAAgBX,IAChBY,EAAeV,EAAiBI,GAEhCO,EAAeV,EAAY,WAChC,IAAMW,EAAW,IAAIhB,EAAa,CAAEQ,IAAAA,EAAKC,KAAAA,EAAME,IAAAA,EAAKE,cAAAA,CAAa,GAEjE,MAAO,CAACG,EAAU,WAAA,OAAMA,EAASC,OAAO,EAAE,EAAC,AAC5C,EAAG,CAACT,EAAKC,EAAME,EAAKD,EAAWI,EAAa,EAU5C,OARAf,EAAU,WACLa,GACHG,CAAAA,MAAAA,GAAAA,EAAcG,gBAAgB,CAACC,kBAAkB,CAACP,EAAY,CAEhE,EAAG,CAACA,EAAcG,MAAAA,EAAY,KAAA,EAAZA,EAAcG,gBAAgB,CAAC,EAEjDH,EAAaK,WAAW,CAAGnB,IAEpBc,CACR,CAxCAM,EAAOC,MAAE,CAAA,CAAAhB,wBAAiB,WAAA,OAA2BA,CAAA,CAAA,GAAAe,EAAAE,IAAA,CAAA,2BAAA,CAAAzB,UAAA,SAAA0B,CAAA,EAAA1B,EAAA0B,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,QAAA,CAAAxB,UAAA,SAAAyB,CAAA,EAAAzB,EAAAyB,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,gDAAA,CAAAvB,aAAA,SAAAwB,CAAA,EAAAxB,EAAAwB,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,0CAAA,CAAAtB,eAAA,SAAAuB,CAAA,EAAAvB,EAAAuB,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,gDAAA,CAAArB,sBAAA,SAAAsB,CAAA,EAAAtB,EAAAsB,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,6BAAA,CAAApB,oBAAA,SAAAqB,CAAA,EAAArB,EAAAqB,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,+BAAA,CAAAnB,iBAAA,SAAAoB,CAAA,EAAApB,EAAAoB,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,gBAAA,CAAAlB,YAAA,SAAAmB,CAAA,EAAAnB,EAAAmB,CAAA,CAAA,EAAA\"}"}