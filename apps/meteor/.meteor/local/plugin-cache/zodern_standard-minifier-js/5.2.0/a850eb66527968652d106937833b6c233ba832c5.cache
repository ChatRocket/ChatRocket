{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){a=e}},0),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){i=e}},1),t.export({useModalContextValue:function(){return c}}),t.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedCallback:function(e){o=e}},0),t.link(\"react\",{useMemo:function(e){r=e}},1),t.link(\"./useUiKitActionManager\",{useUiKitActionManager:function(e){u=e}},2);var a,i,o,r,u,c=function(e){var n=e.view,t=e.errors,c=e.values,l=e.updateValues,d=u(),s=r(function(){return d.emitInteraction.bind(d)},[d]),f=o(s,700);return i(i({action:function(e){var n,t,i,o,r,u,c;return a.async(function(l){for(;;)switch(l.prev=l.next){case 0:if(n=e.actionId,t=e.viewId,i=e.appId,o=e.dispatchActionConfig,r=e.blockId,u=e.value,!(!i||!t)){l.next=3;break}return l.abrupt(\"return\");case 3:return c=null!=o&&o.includes(\"on_character_entered\")?f:s,l.next=6,a.awrap(c(i,{type:\"blockAction\",actionId:n,container:{type:\"view\",id:t},payload:{blockId:r,value:u}}));case 6:case\"end\":return l.stop()}},null,null,null,Promise)},updateState:function(e){var n=e.actionId,t=e.value,a=e.blockId;l({actionId:n,payload:{blockId:void 0===a?\"default\":a,value:t}})}},n),{},{errors:t,values:c,viewId:n.id})}}","map":"{\"version\":3,\"sources\":[\"client/uikit/hooks/useModalContextValue.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\\nimport type { UiKitContext } from '@rocket.chat/fuselage-ui-kit';\\nimport type * as UiKit from '@rocket.chat/ui-kit';\\nimport type { Dispatch } from 'react';\\nimport { useMemo, type ContextType } from 'react';\\n\\nimport { useUiKitActionManager } from './useUiKitActionManager';\\n\\ntype UseModalContextValueParams = {\\n\\tview: UiKit.ModalView;\\n\\tvalues: {\\n\\t\\t[actionId: string]: {\\n\\t\\t\\tvalue: unknown;\\n\\t\\t\\tblockId?: string | undefined;\\n\\t\\t};\\n\\t};\\n\\terrors?: { [field: string]: string }[] | { [field: string]: string };\\n\\tupdateValues: Dispatch<{\\n\\t\\tactionId: string;\\n\\t\\tpayload: {\\n\\t\\t\\tvalue: unknown;\\n\\t\\t\\tblockId?: string;\\n\\t\\t};\\n\\t}>;\\n};\\n\\ntype UseModalContextValueReturn = ContextType<typeof UiKitContext>;\\n\\nexport const useModalContextValue = ({ view, errors, values, updateValues }: UseModalContextValueParams): UseModalContextValueReturn => {\\n\\tconst actionManager = useUiKitActionManager();\\n\\n\\tconst emitInteraction = useMemo(() => actionManager.emitInteraction.bind(actionManager), [actionManager]);\\n\\tconst debouncedEmitInteraction = useDebouncedCallback(emitInteraction, 700);\\n\\n\\treturn {\\n\\t\\taction: async ({ actionId, viewId, appId, dispatchActionConfig, blockId, value }) => {\\n\\t\\t\\tif (!appId || !viewId) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst emit = dispatchActionConfig?.includes('on_character_entered') ? debouncedEmitInteraction : emitInteraction;\\n\\n\\t\\t\\tawait emit(appId, {\\n\\t\\t\\t\\ttype: 'blockAction',\\n\\t\\t\\t\\tactionId,\\n\\t\\t\\t\\tcontainer: {\\n\\t\\t\\t\\t\\ttype: 'view',\\n\\t\\t\\t\\t\\tid: viewId,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tpayload: {\\n\\t\\t\\t\\t\\tblockId,\\n\\t\\t\\t\\t\\tvalue,\\n\\t\\t\\t\\t},\\n\\t\\t\\t});\\n\\t\\t},\\n\\t\\tupdateState: ({ actionId, value, /* ,appId, */ blockId = 'default' }) => {\\n\\t\\t\\tupdateValues({\\n\\t\\t\\t\\tactionId,\\n\\t\\t\\t\\tpayload: {\\n\\t\\t\\t\\t\\tblockId,\\n\\t\\t\\t\\t\\tvalue,\\n\\t\\t\\t\\t},\\n\\t\\t\\t});\\n\\t\\t},\\n\\t\\t...view,\\n\\t\\terrors,\\n\\t\\tvalues,\\n\\t\\tviewId: view.id,\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_objectSpread\",\"export\",\"useModalContextValue\",\"useDebouncedCallback\",\"useMemo\",\"useUiKitActionManager\",\"_ref\",\"view\",\"errors\",\"values\",\"updateValues\",\"actionManager\",\"emitInteraction\",\"bind\",\"debouncedEmitInteraction\",\"action\",\"_ref2\",\"actionId\",\"viewId\",\"appId\",\"dispatchActionConfig\",\"blockId\",\"value\",\"emit\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"includes\",\"awrap\",\"type\",\"container\",\"id\",\"payload\",\"stop\",\"Promise\",\"updateState\",\"_ref3\",\"_ref3$blockId\"],\"mappings\":\"uBAASA,EAAsBC,IAAA,CAAA,6BAAM,CAA6BC,QAAC,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAnEH,EAAOM,MAAE,CAAA,CAAAC,qBAAsB,WAAM,OAAAA,CAA8B,CAAA,GAAAP,EAAAC,IAAA,CAAA,8BAAA,CAAAO,qBAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAQ,QAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0BAAA,CAAAS,sBAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GA4B5D,IA5BPC,EAAmEC,EAAAG,EAAAC,EAAAC,EA4BtDH,EAAuB,SAAAI,CAAA,EAAmG,IAAhGC,EAAID,EAAJC,IAAI,CAAEC,EAAMF,EAANE,MAAM,CAAEC,EAAMH,EAANG,MAAM,CAAEC,EAAYJ,EAAZI,YAAY,CAClEC,EAAgBN,IAEhBO,EAAkBR,EAAQ,WAAA,OAAMO,EAAcC,eAAe,CAACC,IAAI,CAACF,EAAc,EAAE,CAACA,EAAc,EAClGG,EAA2BX,EAAqBS,EAAiB,KAEvE,OAAAZ,EAAAA,EAAA,CACCe,OAAQ,SAAAC,CAAA,EAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAxB,EAAAyB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAsE,GAA7DV,EAAQD,EAARC,QAAQ,CAAEC,EAAMF,EAANE,MAAM,CAAEC,EAAKH,EAALG,KAAK,CAAEC,EAAoBJ,EAApBI,oBAAoB,CAAEC,EAAOL,EAAPK,OAAO,CAAEC,EAAKN,EAALM,KAAK,CAAA,CACzE,CAAA,CAACH,GAAS,CAACD,CAAAA,EAAM,CAAAO,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAG,MAAA,CAAA,SAAA,MAAA,EAI2F,OAA1GL,EAAOH,MAAAA,GAAAA,EAAsBS,QAAQ,CAAC,wBAA0Bf,EAA2BF,EAAea,EAAAE,IAAA,CAAA,EAAA5B,EAAA+B,KAAA,CAE1GP,EAAKJ,EAAO,CACjBY,KAAM,cACNd,SAAAA,EACAe,UAAW,CACVD,KAAM,OACNE,GAAIf,GAELgB,QAAS,CACRb,QAAAA,EACAC,MAAAA,KAEA,MAAA,EAAA,IAAA,MAAA,OAAAG,EAAAU,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEHC,YAAa,SAAAC,CAAA,EAA2D,IAAxDrB,EAAQqB,EAARrB,QAAQ,CAAEK,EAAKgB,EAALhB,KAAK,CAAAiB,EAAAD,EAAgBjB,OAAO,CACrDX,EAAa,CACZO,SAAAA,EACAiB,QAAS,CACRb,QAJmDkB,AAAA,KAAA,IAAAA,EAAG,UAASA,EAK/DjB,MAAAA,IAGH,CAAC,EACEf,GAAI,CAAA,EAAA,CACPC,OAAAA,EACAC,OAAAA,EACAS,OAAQX,EAAK0B,EAAAA,AAAE,EAEjB\"}"}