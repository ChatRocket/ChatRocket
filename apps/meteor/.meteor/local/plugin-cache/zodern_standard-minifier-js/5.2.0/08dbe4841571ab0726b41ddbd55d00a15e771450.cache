{"code":"function module(e,t,a){let o,s,l,i,n,r,u,c,m;a.link(\"@rocket.chat/fuselage\",{MessageToolbarWrapper(e){o=e}},0),a.link(\"@tanstack/react-query\",{useQuery(e){s=e}},1),a.link(\"react\",{default(e){l=e},Suspense(e){i=e},lazy(e){n=e},memo(e){r=e},useState(e){u=e}},2),a.link(\"../../views/room/contexts/ChatContext\",{useChat(e){c=e}},3),a.link(\"../../views/room/hooks/useIsVisible\",{useIsVisible(e){m=e}},4);let d=n(()=>a.dynamicImport(\"./toolbar/MessageToolbar\"));a.exportDefault(r(e=>{let{message:t,context:a}=e,n=c(),[r,b]=m(),[k,f]=u(!1),p=b||k,g=s([\"toolbox\",t._id,a],async()=>{let e=await (null==n?void 0:n.data.findRoom()),t=await (null==n?void 0:n.data.findSubscription());return{room:e,subscription:t}},{enabled:p});return l.createElement(o,{ref:r,visible:k},p&&g.isSuccess&&g.data.room&&l.createElement(i,{fallback:null},l.createElement(d,{message:t,messageContext:a,room:g.data.room,subscription:g.data.subscription,onChangeMenuVisibility:f})))}))}","map":"{\"version\":3,\"sources\":[\"client/components/message/MessageToolbarHolder.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { MessageToolbarWrapper } from '@rocket.chat/fuselage';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React, { Suspense, lazy, memo, useState } from 'react';\\n\\nimport type { MessageActionContext } from '../../../app/ui-utils/client/lib/MessageAction';\\nimport { useChat } from '../../views/room/contexts/ChatContext';\\nimport { useIsVisible } from '../../views/room/hooks/useIsVisible';\\n\\ntype MessageToolbarHolderProps = {\\n\\tmessage: IMessage;\\n\\tcontext?: MessageActionContext;\\n};\\n\\nconst MessageToolbar = lazy(() => import('./toolbar/MessageToolbar'));\\n\\nconst MessageToolbarHolder = ({ message, context }: MessageToolbarHolderProps): ReactElement => {\\n\\tconst chat = useChat();\\n\\tconst [ref, isVisible] = useIsVisible();\\n\\tconst [isToolbarMenuOpen, setIsToolbarMenuOpen] = useState(false);\\n\\n\\tconst showToolbar = isVisible || isToolbarMenuOpen;\\n\\n\\tconst depsQueryResult = useQuery(\\n\\t\\t['toolbox', message._id, context],\\n\\t\\tasync () => {\\n\\t\\t\\tconst room = await chat?.data.findRoom();\\n\\t\\t\\tconst subscription = await chat?.data.findSubscription();\\n\\t\\t\\treturn {\\n\\t\\t\\t\\troom,\\n\\t\\t\\t\\tsubscription,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tenabled: showToolbar,\\n\\t\\t},\\n\\t);\\n\\n\\treturn (\\n\\t\\t<MessageToolbarWrapper ref={ref} visible={isToolbarMenuOpen}>\\n\\t\\t\\t{showToolbar && depsQueryResult.isSuccess && depsQueryResult.data.room && (\\n\\t\\t\\t\\t<Suspense fallback={null}>\\n\\t\\t\\t\\t\\t<MessageToolbar\\n\\t\\t\\t\\t\\t\\tmessage={message}\\n\\t\\t\\t\\t\\t\\tmessageContext={context}\\n\\t\\t\\t\\t\\t\\troom={depsQueryResult.data.room}\\n\\t\\t\\t\\t\\t\\tsubscription={depsQueryResult.data.subscription}\\n\\t\\t\\t\\t\\t\\tonChangeMenuVisibility={setIsToolbarMenuOpen}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</Suspense>\\n\\t\\t\\t)}\\n\\t\\t</MessageToolbarWrapper>\\n\\t);\\n};\\n\\nexport default memo(MessageToolbarHolder);\\n\",null],\"names\":[\"MessageToolbarWrapper\",\"useQuery\",\"React\",\"Suspense\",\"lazy\",\"memo\",\"useState\",\"useChat\",\"useIsVisible\",\"module\",\"link\",\"v\",\"default\",\"MessageToolbar\",\"dynamicImport\",\"exportDefault\",\"_ref\",\"message\",\"context\",\"chat\",\"ref\",\"isVisible\",\"isToolbarMenuOpen\",\"setIsToolbarMenuOpen\",\"showToolbar\",\"depsQueryResult\",\"_id\",\"room\",\"data\",\"findRoom\",\"subscription\",\"findSubscription\",\"enabled\",\"createElement\",\"visible\",\"isSuccess\",\"fallback\",\"messageContext\",\"onChangeMenuVisibility\"],\"mappings\":\"2BACAA,EAA8DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAArDC,EAAuBC,IAAA,CAAM,wBAAwB,CAAAV,sBAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wBAAA,CAAAT,SAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAT,EAAAS,CAAA,EAAAR,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,KAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,KAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wCAAA,CAAAH,QAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,sCAAA,CAAAF,aAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAc9D,IAAME,EAAiBT,EAAK,IAAMK,EAAAK,aAAA,CAAO,6BAdzCL,EAAOM,aAAE,CAuDMV,EAvCcW,IAAkE,GAAjE,CAAEC,QAAAA,CAAO,CAAEC,QAAAA,CAAAA,CAAoC,CAAAF,EACtEG,EAAOZ,IACP,CAACa,EAAKC,EAAU,CAAGb,IACnB,CAACc,EAAmBC,EAAqB,CAAGjB,EAAS,CAAA,GAErDkB,EAAcH,GAAaC,EAE3BG,EAAkBxB,EACvB,CAAC,UAAWgB,EAAQS,GAAG,CAAER,EAAQ,CACjC,UACC,IAAMS,EAAO,MAAMR,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMS,IAAI,CAACC,QAAQ,EAAA,EAChCC,EAAe,MAAMX,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMS,IAAI,CAACG,gBAAgB,EAAA,EACtD,MAAO,CACNJ,KAAAA,EACAG,aAAAA,EAEF,EACA,CACCE,QAASR,IAIX,OACCtB,EAAA+B,aAAA,CAACjC,EAAqB,CAACoB,IAAKA,EAAKc,QAASZ,CAAkB,EAC1DE,GAAeC,EAAgBU,SAAS,EAAIV,EAAgBG,IAAI,CAACD,IAAI,EACrEzB,EAAA+B,aAAA,CAAC9B,EAAQ,CAACiC,SAAU,IAAK,EACxBlC,EAAA+B,aAAA,CAACpB,EAAc,CACdI,QAASA,EACToB,eAAgBnB,EAChBS,KAAMF,EAAgBG,IAAI,CAACD,IAAK,CAChCG,aAAcL,EAAgBG,IAAI,CAACE,YAAa,CAChDQ,uBAAwBf,CAAqB,IAMnD\"}"}