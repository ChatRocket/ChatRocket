{"code":"function module(e,n,t){var o,r,a,c,u,s,i,l,f,m,d,_,p,k,b,T,h,y,E;t.link(\"@babel/runtime/helpers/extends\",{default:function(e){o=e}},0),t.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},1),t.link(\"@rocket.chat/fuselage\",{Box:function(e){a=e},TextInput:function(e){c=e},Button:function(e){u=e},Margins:function(e){s=e},Select:function(e){i=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useSetModal:function(e){l=e},useToastMessageDispatch:function(e){f=e},useUserId:function(e){m=e},useMethod:function(e){d=e},useTranslation:function(e){_=e}},1),t.link(\"react\",{default:function(e){p=e},useCallback:function(e){k=e},useMemo:function(e){b=e},useEffect:function(e){T=e}},2),t.link(\"react-hook-form\",{Controller:function(e){h=e},useForm:function(e){y=e}},3),t.link(\"../../../../components/GenericModal\",{default:function(e){E=e}},4),t.exportDefault(function(e){var n=e.reload,t=_(),x=m(),A=l(),g=d(\"personalAccessTokens:generateToken\"),w=f(),F=b(function(){return{name:\"\",bypassTwoFactor:\"require\"}},[]),I=y({defaultValues:F}),P=I.register,v=I.resetField,M=I.handleSubmit,S=I.control,C=I.formState,q=C.isSubmitted,G=C.submitCount,B=b(function(){return[[\"require\",t(\"Require_Two_Factor_Authentication\")],[\"bypass\",t(\"Ignore_Two_Factor_Authentication\")]]},[t]),D=k(function(e){var n,o,c;return r.async(function(u){for(;;)switch(u.prev=u.next){case 0:return n=e.name,o=e.bypassTwoFactor,u.prev=1,u.next=4,r.awrap(g({tokenName:n,bypassTwoFactor:\"bypass\"===o}));case 4:c=u.sent,A(p.createElement(E,{title:t(\"API_Personal_Access_Token_Generated\"),onConfirm:function(){return A(null)},onClose:function(){return A(null)}},p.createElement(a,{dangerouslySetInnerHTML:{__html:t(\"API_Personal_Access_Token_Generated_Text_Token_s_UserId_s\",{token:c,userId:x})}}))),u.next=11;break;case 8:u.prev=8,u.t0=u.catch(1),w({type:\"error\",message:u.t0});case 11:case\"end\":return u.stop()}},null,null,[[1,8]],Promise)},[g,w,A,t,x]);return T(function(){v(\"name\"),n()},[q,G,n,v]),p.createElement(a,{display:\"flex\",is:\"form\",onSubmit:M(D),mb:8},p.createElement(a,{display:\"flex\",width:\"100%\"},p.createElement(s,{inlineEnd:4},p.createElement(c,o({\"data-qa\":\"PersonalTokenField\"},P(\"name\"),{placeholder:t(\"API_Add_Personal_Access_Token\")})),p.createElement(a,null,p.createElement(h,{name:\"bypassTwoFactor\",control:S,render:function(e){var n=e.field;return p.createElement(i,o({},n,{options:B}))}})))),p.createElement(u,{primary:!0,type:\"submit\"},t(\"Add\")))})}","map":"{\"version\":3,\"sources\":[\"client/views/account/tokens/AccountTokensTable/AddToken.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { SelectOption } from '@rocket.chat/fuselage';\\nimport { Box, TextInput, Button, Margins, Select } from '@rocket.chat/fuselage';\\nimport { useSetModal, useToastMessageDispatch, useUserId, useMethod, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback, useMemo, useEffect } from 'react';\\nimport { Controller, useForm } from 'react-hook-form';\\n\\nimport GenericModal from '../../../../components/GenericModal';\\n\\nconst AddToken = ({ reload }: { reload: () => void }): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst userId = useUserId();\\n\\tconst setModal = useSetModal();\\n\\tconst createTokenFn = useMethod('personalAccessTokens:generateToken');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst initialValues = useMemo(() => ({ name: '', bypassTwoFactor: 'require' }), []);\\n\\n\\tconst {\\n\\t\\tregister,\\n\\t\\tresetField,\\n\\t\\thandleSubmit,\\n\\t\\tcontrol,\\n\\t\\tformState: { isSubmitted, submitCount },\\n\\t} = useForm({ defaultValues: initialValues });\\n\\n\\tconst twoFactorAuthOptions: SelectOption[] = useMemo(\\n\\t\\t() => [\\n\\t\\t\\t['require', t('Require_Two_Factor_Authentication')],\\n\\t\\t\\t['bypass', t('Ignore_Two_Factor_Authentication')],\\n\\t\\t],\\n\\t\\t[t],\\n\\t);\\n\\n\\tconst handleAddToken = useCallback(\\n\\t\\tasync ({ name: tokenName, bypassTwoFactor }) => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst token = await createTokenFn({ tokenName, bypassTwoFactor: bypassTwoFactor === 'bypass' });\\n\\n\\t\\t\\t\\tsetModal(\\n\\t\\t\\t\\t\\t<GenericModal title={t('API_Personal_Access_Token_Generated')} onConfirm={() => setModal(null)} onClose={() => setModal(null)}>\\n\\t\\t\\t\\t\\t\\t<Box\\n\\t\\t\\t\\t\\t\\t\\tdangerouslySetInnerHTML={{\\n\\t\\t\\t\\t\\t\\t\\t\\t__html: t('API_Personal_Access_Token_Generated_Text_Token_s_UserId_s', {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttoken,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tuserId,\\n\\t\\t\\t\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</GenericModal>,\\n\\t\\t\\t\\t);\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[createTokenFn, dispatchToastMessage, setModal, t, userId],\\n\\t);\\n\\n\\tuseEffect(() => {\\n\\t\\tresetField('name');\\n\\t\\treload();\\n\\t}, [isSubmitted, submitCount, reload, resetField]);\\n\\n\\treturn (\\n\\t\\t<Box display='flex' is='form' onSubmit={handleSubmit(handleAddToken)} mb={8}>\\n\\t\\t\\t<Box display='flex' width='100%'>\\n\\t\\t\\t\\t<Margins inlineEnd={4}>\\n\\t\\t\\t\\t\\t<TextInput data-qa='PersonalTokenField' {...register('name')} placeholder={t('API_Add_Personal_Access_Token')} />\\n\\t\\t\\t\\t\\t<Box>\\n\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\tname='bypassTwoFactor'\\n\\t\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\t\\trender={({ field }) => <Select {...field} options={twoFactorAuthOptions} />}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t</Margins>\\n\\t\\t\\t</Box>\\n\\t\\t\\t<Button primary type='submit'>\\n\\t\\t\\t\\t{t('Add')}\\n\\t\\t\\t</Button>\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default AddToken;\\n\",null],\"names\":[\"_extends\",\"_regeneratorRuntime\",\"Box\",\"TextInput\",\"Button\",\"Margins\",\"Select\",\"useSetModal\",\"useToastMessageDispatch\",\"useUserId\",\"useMethod\",\"useTranslation\",\"React\",\"useCallback\",\"useMemo\",\"useEffect\",\"Controller\",\"useForm\",\"GenericModal\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"reload\",\"t\",\"userId\",\"setModal\",\"createTokenFn\",\"dispatchToastMessage\",\"initialValues\",\"name\",\"bypassTwoFactor\",\"_useForm\",\"defaultValues\",\"register\",\"resetField\",\"handleSubmit\",\"control\",\"_useForm$formState\",\"formState\",\"isSubmitted\",\"submitCount\",\"twoFactorAuthOptions\",\"handleAddToken\",\"_ref2\",\"tokenName\",\"token\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"sent\",\"createElement\",\"title\",\"onConfirm\",\"onClose\",\"dangerouslySetInnerHTML\",\"__html\",\"t0\",\"type\",\"message\",\"stop\",\"Promise\",\"display\",\"is\",\"onSubmit\",\"mb\",\"width\",\"inlineEnd\",\"placeholder\",\"render\",\"_ref3\",\"field\",\"options\",\"primary\"],\"mappings\":\"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\"}"}