{"code":"function module(e,n,t){var o,a,i,l,u,r,c,s,d,f,m,p,k,v,h,g,C,_,b,E,R,x,y,P=[\"departmentId\"];t.link(\"@babel/runtime/regenerator\",{default:function(e){o=e}},0),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){a=e}},1),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){i=e}},2),t.link(\"@rocket.chat/fuselage\",{Box:function(e){l=e},Button:function(e){u=e},ButtonGroup:function(e){r=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId:function(e){c=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){s=e},useEndpoint:function(e){d=e},useTranslation:function(e){f=e},useRouter:function(e){m=e}},2),t.link(\"@tanstack/react-query\",{useQueryClient:function(e){p=e}},3),t.link(\"react\",{default:function(e){k=e},memo:function(e){v=e},useCallback:function(e){h=e}},4),t.link(\"react-hook-form\",{FormProvider:function(e){g=e},useForm:function(e){C=e}},5),t.link(\"../../components/Page\",{Page:function(e){_=e},PageHeader:function(e){b=e},PageScrollableContentWithShadow:function(e){E=e},PageFooter:function(e){R=e}},6),t.link(\"./components/cannedResponseForm\",{default:function(e){x=e}},7),t.link(\"./useRemoveCannedResponse\",{useRemoveCannedResponse:function(e){y=e}},8),t.exportDefault(v(function(e){var n=e.cannedResponseData,t=f(),v=m(),S=s(),D=p(),I=d(\"POST\",\"/v1/canned-responses\"),w=C({defaultValues:{_id:(null==n?void 0:n._id)||\"\",shortcut:(null==n?void 0:n.shortcut)||\"\",text:(null==n?void 0:n.text)||\"\",tags:(null==n?void 0:n.tags)||[],scope:(null==n?void 0:n.scope)||\"user\",departmentId:(null==n?void 0:n.departmentId)||\"\"}}),B=w.handleSubmit,F=w.reset,T=w.formState.isDirty,W=y(),j=h(function(e){var l,u;return o.async(function(r){for(;;)switch(r.prev=r.next){case 0:return l=e.departmentId,u=i(e,P),r.prev=1,r.next=4,o.awrap(I(a(a({_id:null==n?void 0:n._id},u),l&&{departmentId:l})));case 4:S({type:\"success\",message:t(null!=n&&n._id?\"Canned_Response_Updated\":\"Canned_Response_Created\")}),v.navigate(\"/omnichannel/canned-responses\"),D.invalidateQueries([\"getCannedResponses\"]),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),S({type:\"error\",message:r.t0});case 12:case\"end\":return r.stop()}},null,null,[[1,9]],Promise)},[null==n?void 0:n._id,D,I,S,t,v]),q=c();return k.createElement(_,null,k.createElement(b,{title:null!=n&&n._id?t(\"Edit_CannedResponse\"):t(\"New_CannedResponse\"),onClickBack:function(){return v.navigate(\"/omnichannel/canned-responses\")}},(null==n?void 0:n._id)&&k.createElement(r,null,k.createElement(u,{danger:!0,onClick:function(){return W(n._id)}},t(\"Delete\")))),k.createElement(E,null,k.createElement(g,w,k.createElement(l,{id:q,onSubmit:B(j),w:\"full\",alignSelf:\"center\",maxWidth:\"x600\",is:\"form\",autoComplete:\"off\"},k.createElement(x,null)))),k.createElement(R,{isDirty:T},k.createElement(r,null,k.createElement(u,{onClick:function(){return F()}},t(\"Cancel\")),k.createElement(u,{form:q,primary:!0,type:\"submit\"},t(\"Save\")))))}))}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/cannedResponses/CannedResponseEdit.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatDepartment, IOmnichannelCannedResponse, Serialized } from '@rocket.chat/core-typings';\\nimport { Box, Button, ButtonGroup } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useEndpoint, useTranslation, useRouter } from '@rocket.chat/ui-contexts';\\nimport { useQueryClient } from '@tanstack/react-query';\\nimport React, { memo, useCallback } from 'react';\\nimport { FormProvider, useForm } from 'react-hook-form';\\n\\nimport { Page, PageHeader, PageScrollableContentWithShadow, PageFooter } from '../../components/Page';\\nimport CannedResponseForm from './components/cannedResponseForm';\\nimport { useRemoveCannedResponse } from './useRemoveCannedResponse';\\n\\ntype CannedResponseEditProps = {\\n\\tcannedResponseData?: Serialized<IOmnichannelCannedResponse>;\\n\\tdepartmentData?: Serialized<ILivechatDepartment>;\\n};\\n\\nconst getInitialData = (cannedResponseData: Serialized<IOmnichannelCannedResponse> | undefined) => ({\\n\\t_id: cannedResponseData?._id || '',\\n\\tshortcut: cannedResponseData?.shortcut || '',\\n\\ttext: cannedResponseData?.text || '',\\n\\ttags: cannedResponseData?.tags || [],\\n\\tscope: cannedResponseData?.scope || 'user',\\n\\tdepartmentId: cannedResponseData?.departmentId || '',\\n});\\n\\nconst CannedResponseEdit = ({ cannedResponseData }: CannedResponseEditProps) => {\\n\\tconst t = useTranslation();\\n\\tconst router = useRouter();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst queryClient = useQueryClient();\\n\\n\\tconst saveCannedResponse = useEndpoint('POST', '/v1/canned-responses');\\n\\n\\tconst methods = useForm({ defaultValues: getInitialData(cannedResponseData) });\\n\\n\\tconst {\\n\\t\\thandleSubmit,\\n\\t\\treset,\\n\\t\\tformState: { isDirty },\\n\\t} = methods;\\n\\n\\tconst handleDelete = useRemoveCannedResponse();\\n\\n\\tconst handleSave = useCallback(\\n\\t\\tasync ({ departmentId, ...data }) => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tawait saveCannedResponse({\\n\\t\\t\\t\\t\\t_id: cannedResponseData?._id,\\n\\t\\t\\t\\t\\t...data,\\n\\t\\t\\t\\t\\t...(departmentId && { departmentId }),\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\ttype: 'success',\\n\\t\\t\\t\\t\\tmessage: t(cannedResponseData?._id ? 'Canned_Response_Updated' : 'Canned_Response_Created'),\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\trouter.navigate('/omnichannel/canned-responses');\\n\\t\\t\\t\\tqueryClient.invalidateQueries(['getCannedResponses']);\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[cannedResponseData?._id, queryClient, saveCannedResponse, dispatchToastMessage, t, router],\\n\\t);\\n\\tconst formId = useUniqueId();\\n\\n\\treturn (\\n\\t\\t<Page>\\n\\t\\t\\t<PageHeader\\n\\t\\t\\t\\ttitle={cannedResponseData?._id ? t('Edit_CannedResponse') : t('New_CannedResponse')}\\n\\t\\t\\t\\tonClickBack={() => router.navigate('/omnichannel/canned-responses')}\\n\\t\\t\\t>\\n\\t\\t\\t\\t{cannedResponseData?._id && (\\n\\t\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t\\t<Button danger onClick={() => handleDelete(cannedResponseData._id)}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Delete')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</PageHeader>\\n\\t\\t\\t<PageScrollableContentWithShadow>\\n\\t\\t\\t\\t<FormProvider {...methods}>\\n\\t\\t\\t\\t\\t<Box id={formId} onSubmit={handleSubmit(handleSave)} w='full' alignSelf='center' maxWidth='x600' is='form' autoComplete='off'>\\n\\t\\t\\t\\t\\t\\t<CannedResponseForm />\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t</FormProvider>\\n\\t\\t\\t</PageScrollableContentWithShadow>\\n\\t\\t\\t<PageFooter isDirty={isDirty}>\\n\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t<Button onClick={() => reset()}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button form={formId} primary type='submit'>\\n\\t\\t\\t\\t\\t\\t{t('Save')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</PageFooter>\\n\\t\\t</Page>\\n\\t);\\n};\\n\\nexport default memo(CannedResponseEdit);\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_objectSpread\",\"_objectWithoutProperties\",\"Box\",\"Button\",\"ButtonGroup\",\"useUniqueId\",\"useToastMessageDispatch\",\"useEndpoint\",\"useTranslation\",\"useRouter\",\"useQueryClient\",\"React\",\"memo\",\"useCallback\",\"FormProvider\",\"useForm\",\"Page\",\"PageHeader\",\"PageScrollableContentWithShadow\",\"PageFooter\",\"CannedResponseForm\",\"useRemoveCannedResponse\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"cannedResponseData\",\"t\",\"router\",\"dispatchToastMessage\",\"queryClient\",\"saveCannedResponse\",\"methods\",\"defaultValues\",\"_id\",\"shortcut\",\"text\",\"tags\",\"scope\",\"departmentId\",\"handleSubmit\",\"reset\",\"isDirty\",\"formState\",\"handleDelete\",\"handleSave\",\"_ref2\",\"data\",\"async\",\"_context\",\"prev\",\"next\",\"_excluded\",\"awrap\",\"type\",\"message\",\"navigate\",\"invalidateQueries\",\"t0\",\"stop\",\"Promise\",\"formId\",\"createElement\",\"title\",\"onClickBack\",\"danger\",\"onClick\",\"id\",\"onSubmit\",\"w\",\"alignSelf\",\"maxWidth\",\"is\",\"autoComplete\",\"form\",\"primary\"],\"mappings\":\"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\"}"}