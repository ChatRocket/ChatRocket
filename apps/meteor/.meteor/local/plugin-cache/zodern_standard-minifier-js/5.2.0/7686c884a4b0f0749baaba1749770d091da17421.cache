{"code":"function module(e,t,l){let n,a,r,i,o,c,u,m,s,d,E,p,f,C,j,g,b,k,h,x;let _=[\"close\",\"onChange\"];l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),l.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){a=e}},1),l.link(\"@rocket.chat/fuselage\",{Box(e){r=e},Button(e){i=e},ButtonGroup(e){o=e},Margins(e){c=e},TextInput(e){u=e},Field(e){m=e},FieldLabel(e){s=e},FieldRow(e){d=e},FieldError(e){E=e},IconButton(e){p=e}},0),l.link(\"react\",{default(e){f=e},useCallback(e){C=e},useState(e){j=e}},1),l.link(\"react-i18next\",{useTranslation(e){g=e}},2),l.link(\"../../../components/Contextualbar\",{ContextualbarScrollableContent(e){b=e},ContextualbarFooter(e){k=e}},3),l.link(\"../../../hooks/useEndpointUpload\",{useEndpointUpload(e){h=e}},4),l.link(\"../../../hooks/useSingleFileInput\",{useSingleFileInput(e){x=e}},5),l.exportDefault(e=>{let{close:t,onChange:l}=e,y=a(e,_),{t:F}=g(),[S,v]=j(\"\"),[w,T]=j(\"\"),[A,I]=j(),[R,B]=j(\"\"),[N,U]=j({name:!1,emoji:!1,aliases:!1}),D=C(async e=>{I(e),B(URL.createObjectURL(e)),U(e=>n(n({},e),{},{emoji:!1}))},[I]),L=h(\"/v1/emoji-custom.create\",F(\"Custom_Emoji_Added_Successfully\")),q=C(async()=>{if(!S)return U(e=>n(n({},e),{},{name:!0}));if(S===w)return U(e=>n(n({},e),{},{aliases:!0}));if(!A)return U(e=>n(n({},e),{},{emoji:!0}));let e=new FormData;e.append(\"emoji\",A),e.append(\"name\",S),e.append(\"aliases\",w);let a=await L(e);a.success&&(l(),t())},[A,S,w,L,l,t]),[G]=x(D,\"emoji\");return f.createElement(f.Fragment,null,f.createElement(b,y,f.createElement(m,null,f.createElement(s,null,F(\"Name\")),f.createElement(d,null,f.createElement(u,{value:S,onChange:e=>(\"\"!==e.currentTarget.value&&U(e=>n(n({},e),{},{name:!1})),v(e.currentTarget.value)),placeholder:F(\"Name\")})),N.name&&f.createElement(E,null,F(\"Required_field\",{field:F(\"Name\")}))),f.createElement(m,null,f.createElement(s,null,F(\"Aliases\")),f.createElement(d,null,f.createElement(u,{value:w,onChange:e=>(e.currentTarget.value!==S&&U(e=>n(n({},e),{},{aliases:!1})),T(e.currentTarget.value)),placeholder:F(\"Aliases\")})),N.aliases&&f.createElement(E,null,F(\"Custom_Emoji_Error_Same_Name_And_Alias\"))),f.createElement(m,null,f.createElement(s,{alignSelf:\"stretch\",display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},F(\"Custom_Emoji\"),f.createElement(p,{secondary:!0,small:!0,icon:\"upload\",onClick:G})),N.emoji&&f.createElement(E,null,F(\"Required_field\",{field:F(\"Custom_Emoji\")})),R&&f.createElement(r,{display:\"flex\",flexDirection:\"row\",mi:\"neg-x4\",justifyContent:\"center\"},f.createElement(c,{inline:4},f.createElement(r,{is:\"img\",style:{objectFit:\"contain\"},w:\"x120\",h:\"x120\",src:R}))))),f.createElement(k,null,f.createElement(o,{stretch:!0},f.createElement(i,{onClick:t},F(\"Cancel\")),f.createElement(i,{primary:!0,onClick:q},F(\"Save\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/customEmoji/AddCustomEmoji.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Button, ButtonGroup, Margins, TextInput, Field, FieldLabel, FieldRow, FieldError, IconButton } from '@rocket.chat/fuselage';\\nimport type { ReactElement, ChangeEvent } from 'react';\\nimport React, { useCallback, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../components/Contextualbar';\\nimport { useEndpointUpload } from '../../../hooks/useEndpointUpload';\\nimport { useSingleFileInput } from '../../../hooks/useSingleFileInput';\\n\\ntype AddCustomEmojiProps = {\\n\\tclose: () => void;\\n\\tonChange: () => void;\\n};\\n\\nconst AddCustomEmoji = ({ close, onChange, ...props }: AddCustomEmojiProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst [name, setName] = useState('');\\n\\tconst [aliases, setAliases] = useState('');\\n\\tconst [emojiFile, setEmojiFile] = useState<Blob>();\\n\\tconst [newEmojiPreview, setNewEmojiPreview] = useState('');\\n\\tconst [errors, setErrors] = useState({ name: false, emoji: false, aliases: false });\\n\\n\\tconst setEmojiPreview = useCallback(\\n\\t\\tasync (file) => {\\n\\t\\t\\tsetEmojiFile(file);\\n\\t\\t\\tsetNewEmojiPreview(URL.createObjectURL(file));\\n\\t\\t\\tsetErrors((prevState) => ({ ...prevState, emoji: false }));\\n\\t\\t},\\n\\t\\t[setEmojiFile],\\n\\t);\\n\\n\\tconst saveAction = useEndpointUpload('/v1/emoji-custom.create', t('Custom_Emoji_Added_Successfully'));\\n\\n\\tconst handleSave = useCallback(async () => {\\n\\t\\tif (!name) {\\n\\t\\t\\treturn setErrors((prevState) => ({ ...prevState, name: true }));\\n\\t\\t}\\n\\n\\t\\tif (name === aliases) {\\n\\t\\t\\treturn setErrors((prevState) => ({ ...prevState, aliases: true }));\\n\\t\\t}\\n\\n\\t\\tif (!emojiFile) {\\n\\t\\t\\treturn setErrors((prevState) => ({ ...prevState, emoji: true }));\\n\\t\\t}\\n\\n\\t\\tconst formData = new FormData();\\n\\t\\tformData.append('emoji', emojiFile);\\n\\t\\tformData.append('name', name);\\n\\t\\tformData.append('aliases', aliases);\\n\\t\\tconst result = (await saveAction(formData)) as { success: boolean };\\n\\n\\t\\tif (result.success) {\\n\\t\\t\\tonChange();\\n\\t\\t\\tclose();\\n\\t\\t}\\n\\t}, [emojiFile, name, aliases, saveAction, onChange, close]);\\n\\n\\tconst [clickUpload] = useSingleFileInput(setEmojiPreview, 'emoji');\\n\\n\\tconst handleChangeName = (e: ChangeEvent<HTMLInputElement>): void => {\\n\\t\\tif (e.currentTarget.value !== '') {\\n\\t\\t\\tsetErrors((prevState) => ({ ...prevState, name: false }));\\n\\t\\t}\\n\\n\\t\\treturn setName(e.currentTarget.value);\\n\\t};\\n\\n\\tconst handleChangeAliases = (e: ChangeEvent<HTMLInputElement>): void => {\\n\\t\\tif (e.currentTarget.value !== name) {\\n\\t\\t\\tsetErrors((prevState) => ({ ...prevState, aliases: false }));\\n\\t\\t}\\n\\n\\t\\treturn setAliases(e.currentTarget.value);\\n\\t};\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<ContextualbarScrollableContent {...props}>\\n\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t<FieldLabel>{t('Name')}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<TextInput value={name} onChange={handleChangeName} placeholder={t('Name')} />\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t{errors.name && <FieldError>{t('Required_field', { field: t('Name') })}</FieldError>}\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t<FieldLabel>{t('Aliases')}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<TextInput value={aliases} onChange={handleChangeAliases} placeholder={t('Aliases')} />\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t{errors.aliases && <FieldError>{t('Custom_Emoji_Error_Same_Name_And_Alias')}</FieldError>}\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t<FieldLabel alignSelf='stretch' display='flex' justifyContent='space-between' alignItems='center'>\\n\\t\\t\\t\\t\\t\\t{t('Custom_Emoji')}\\n\\t\\t\\t\\t\\t\\t<IconButton secondary small icon='upload' onClick={clickUpload} />\\n\\t\\t\\t\\t\\t</FieldLabel>\\n\\t\\t\\t\\t\\t{errors.emoji && <FieldError>{t('Required_field', { field: t('Custom_Emoji') })}</FieldError>}\\n\\t\\t\\t\\t\\t{newEmojiPreview && (\\n\\t\\t\\t\\t\\t\\t<Box display='flex' flexDirection='row' mi='neg-x4' justifyContent='center'>\\n\\t\\t\\t\\t\\t\\t\\t<Margins inline={4}>\\n\\t\\t\\t\\t\\t\\t\\t\\t<Box is='img' style={{ objectFit: 'contain' }} w='x120' h='x120' src={newEmojiPreview} />\\n\\t\\t\\t\\t\\t\\t\\t</Margins>\\n\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t</ContextualbarScrollableContent>\\n\\t\\t\\t<ContextualbarFooter>\\n\\t\\t\\t\\t<ButtonGroup stretch>\\n\\t\\t\\t\\t\\t<Button onClick={close}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button primary onClick={handleSave}>\\n\\t\\t\\t\\t\\t\\t{t('Save')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</ContextualbarFooter>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default AddCustomEmoji;\\n\",null],\"names\":[\"_objectSpread\",\"_objectWithoutProperties\",\"Box\",\"Button\",\"ButtonGroup\",\"Margins\",\"TextInput\",\"Field\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"IconButton\",\"React\",\"useCallback\",\"useState\",\"useTranslation\",\"ContextualbarScrollableContent\",\"ContextualbarFooter\",\"useEndpointUpload\",\"useSingleFileInput\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"close\",\"onChange\",\"props\",\"_excluded\",\"t\",\"name\",\"setName\",\"aliases\",\"setAliases\",\"emojiFile\",\"setEmojiFile\",\"newEmojiPreview\",\"setNewEmojiPreview\",\"errors\",\"setErrors\",\"emoji\",\"setEmojiPreview\",\"file\",\"URL\",\"createObjectURL\",\"prevState\",\"saveAction\",\"handleSave\",\"formData\",\"FormData\",\"append\",\"result\",\"success\",\"clickUpload\",\"createElement\",\"Fragment\",\"value\",\"e\",\"currentTarget\",\"placeholder\",\"field\",\"alignSelf\",\"display\",\"justifyContent\",\"alignItems\",\"secondary\",\"small\",\"icon\",\"onClick\",\"flexDirection\",\"mi\",\"inline\",\"is\",\"style\",\"objectFit\",\"w\",\"h\",\"src\",\"stretch\",\"primary\"],\"mappings\":\"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\"}"}