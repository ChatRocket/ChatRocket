{"code":"function module(e,t,s){let i,a,n,c,o,r;s.export({useChangeUserStatusAction:()=>u}),s.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){i=e},useTranslation(e){a=e},useEndpoint(e){n=e},usePermission(e){c=e}},0),s.link(\"react\",{useMemo(e){o=e}},1),s.link(\"./useConfirmOwnerChanges\",{useConfirmOwnerChanges(e){r=e}},2);let u=(e,t,s)=>{let u=a(),l=r(),h=i(),v=n(\"POST\",\"/v1/users.setActiveStatus\"),d=c(\"edit-other-user-active-status\"),m=t?\"User_has_been_deactivated\":\"User_has_been_activated\",_=o(()=>({userId:e,activeStatus:!t,confirmRelinquish:!1}),[e,t]);return d?{icon:\"user\",label:t?u(\"Deactivate\"):u(\"Activate\"),action:()=>l(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(_.confirmRelinquish=e);try{await v(_),h({type:\"success\",message:u(m)}),s()}catch(e){throw e}},{confirmText:u(\"Yes_deactivate_it\")},s)}:void 0}}","map":"{\"version\":3,\"sources\":[\"client/views/admin/users/hooks/useChangeUserStatusAction.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { useToastMessageDispatch, useTranslation, useEndpoint, usePermission } from '@rocket.chat/ui-contexts';\\nimport { useMemo } from 'react';\\n\\nimport type { Action } from '../../../hooks/useActionSpread';\\nimport { useConfirmOwnerChanges } from './useConfirmOwnerChanges';\\n\\nexport const useChangeUserStatusAction = (userId: IUser['_id'], isActive: boolean, onChange: () => void): Action | undefined => {\\n\\tconst t = useTranslation();\\n\\tconst confirmOwnerChanges = useConfirmOwnerChanges();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst changeActiveStatusRequest = useEndpoint('POST', '/v1/users.setActiveStatus');\\n\\tconst canEditOtherUserActiveStatus = usePermission('edit-other-user-active-status');\\n\\tconst changeActiveStatusMessage = isActive ? 'User_has_been_deactivated' : 'User_has_been_activated';\\n\\n\\tconst activeStatusQuery = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\tuserId,\\n\\t\\t\\tactiveStatus: !isActive,\\n\\t\\t\\tconfirmRelinquish: false,\\n\\t\\t}),\\n\\t\\t[userId, isActive],\\n\\t);\\n\\n\\tconst changeActiveStatus = (): Promise<void> =>\\n\\t\\tconfirmOwnerChanges(\\n\\t\\t\\tasync (confirm = false) => {\\n\\t\\t\\t\\tif (confirm) {\\n\\t\\t\\t\\t\\tactiveStatusQuery.confirmRelinquish = confirm;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\ttry {\\n\\t\\t\\t\\t\\tawait changeActiveStatusRequest(activeStatusQuery);\\n\\t\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t(changeActiveStatusMessage) });\\n\\t\\t\\t\\t\\tonChange();\\n\\t\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\t\\tthrow error;\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\t{\\n\\t\\t\\t\\tconfirmText: t('Yes_deactivate_it'),\\n\\t\\t\\t},\\n\\t\\t\\tonChange,\\n\\t\\t);\\n\\n\\treturn canEditOtherUserActiveStatus\\n\\t\\t? {\\n\\t\\t\\t\\ticon: 'user',\\n\\t\\t\\t\\tlabel: isActive ? t('Deactivate') : t('Activate'),\\n\\t\\t\\t\\taction: changeActiveStatus,\\n\\t\\t  }\\n\\t\\t: undefined;\\n};\\n\",null],\"names\":[\"useToastMessageDispatch\",\"useTranslation\",\"useEndpoint\",\"usePermission\",\"useMemo\",\"useConfirmOwnerChanges\",\"module\",\"export\",\"useChangeUserStatusAction\",\"link\",\"v\",\"userId\",\"isActive\",\"onChange\",\"t\",\"confirmOwnerChanges\",\"dispatchToastMessage\",\"changeActiveStatusRequest\",\"canEditOtherUserActiveStatus\",\"changeActiveStatusMessage\",\"activeStatusQuery\",\"activeStatus\",\"confirmRelinquish\",\"icon\",\"label\",\"action\",\"changeActiveStatus\",\"confirm\",\"arguments\",\"length\",\"undefined\",\"type\",\"message\",\"error\",\"confirmText\"],\"mappings\":\"2BAC4EA,EAAQC,EAA2BC,EAAAC,EAAAC,EAAAC,EAA/GC,EAAOC,MAAE,CAAA,CAAAC,0BAAyBA,IAAAA,CAA6B,GAAgDF,EAAAG,IAAA,CAAA,2BAAA,CAAAT,wBAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,eAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,YAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,cAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAL,QAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,2BAAA,CAAAJ,uBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAMxG,IAAMF,EAA4BA,CAACG,EAAsBC,EAAmBC,KAClF,IAAMC,EAAIb,IACJc,EAAsBV,IACtBW,EAAuBhB,IACvBiB,EAA4Bf,EAAY,OAAQ,6BAChDgB,EAA+Bf,EAAc,iCAC7CgB,EAA4BP,EAAW,4BAA8B,0BAErEQ,EAAoBhB,EACzB,IAAO,CAAA,CACNO,OAAAA,EACAU,aAAc,CAACT,EACfU,kBAAmB,CAAA,IAEpB,CAACX,EAAQC,EAAS,EAwBnB,OAAOM,EACJ,CACAK,KAAM,OACNC,MAAOZ,EAAWE,EAAE,cAAgBA,EAAE,YACtCW,OAzBwBC,IAC1BX,EACC,iBAA0B,IAAnBY,EAAOC,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,EAAAA,SAAA,CAAA,EAAA,CACTD,GACHP,CAAAA,EAAkBE,iBAAiB,CAAGK,CAAAA,EAGvC,GAAI,CACH,MAAMV,EAA0BG,GAChCJ,EAAqB,CAAEe,KAAM,UAAWC,QAASlB,EAAEK,EAA0B,GAC7EN,GACD,CAAE,MAAOoB,EAAO,CACf,MAAMA,CACP,CACD,EACA,CACCC,YAAapB,EAAE,sBAEhBD,IASCiB,KAAAA,CACJ\"}"}