{"code":"function module(e,t,a){let s,l,r,i,n,o,u;a.export({useAddMatrixUsers:()=>c}),a.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){s=e}},0),a.link(\"@rocket.chat/ui-contexts\",{useSetModal(e){l=e},useToastMessageDispatch(e){r=e},useEndpoint(e){i=e}},1),a.link(\"@tanstack/react-query\",{useMutation(e){n=e}},2),a.link(\"react\",{default(e){o=e}},3),a.link(\"./AddMatrixUsersModal\",{default(e){u=e}},4);let c=()=>{let e=l(),t=r(),a=s(()=>e(null)),c=i(\"GET\",\"/v1/federation/matrixIds.verify\");return n(async s=>{let{users:l,handleSave:r}=s;try{let t=new Map,s=l.filter(e=>e.startsWith(\"@\"));if(s.length>0){let e=await c({matrixIds:s}),{results:a}=e;t=new Map(Object.entries(a))}e(o.createElement(u,{completeUserList:l,onClose:a,onSave:r,matrixIdVerifiedStatus:t}))}catch(e){t({type:\"error\",message:e})}})}}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/RoomMembers/AddUsers/AddMatrixUsers/useAddMatrixUsers.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useSetModal, useToastMessageDispatch, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useMutation } from '@tanstack/react-query';\\nimport React from 'react';\\n\\nimport AddMatrixUsersModal from './AddMatrixUsersModal';\\n\\nexport type useAddMatrixUsersProps = {\\n\\thandleSave: (args_0: any) => Promise<void>;\\n\\tusers: string[];\\n};\\n\\nexport const useAddMatrixUsers = () => {\\n\\tconst setModal = useSetModal();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst handleClose = useMutableCallback(() => setModal(null));\\n\\tconst dispatchVerifyEndpoint = useEndpoint('GET', '/v1/federation/matrixIds.verify');\\n\\n\\treturn useMutation(async ({ users, handleSave }: useAddMatrixUsersProps) => {\\n\\t\\ttry {\\n\\t\\t\\tlet matrixIdVerificationMap = new Map();\\n\\t\\t\\tconst matrixIds = users.filter((user) => user.startsWith('@'));\\n\\t\\t\\tif (matrixIds.length > 0) {\\n\\t\\t\\t\\tconst matrixIdsVerificationResponse = await dispatchVerifyEndpoint({ matrixIds });\\n\\t\\t\\t\\tconst { results: matrixIdsVerificationResults } = matrixIdsVerificationResponse;\\n\\t\\t\\t\\tmatrixIdVerificationMap = new Map(Object.entries(matrixIdsVerificationResults));\\n\\t\\t\\t}\\n\\n\\t\\t\\tsetModal(\\n\\t\\t\\t\\t<AddMatrixUsersModal\\n\\t\\t\\t\\t\\tcompleteUserList={users}\\n\\t\\t\\t\\t\\tonClose={handleClose}\\n\\t\\t\\t\\t\\tonSave={handleSave}\\n\\t\\t\\t\\t\\tmatrixIdVerifiedStatus={matrixIdVerificationMap as Map<string, string>}\\n\\t\\t\\t\\t/>,\\n\\t\\t\\t);\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error as Error });\\n\\t\\t}\\n\\t});\\n};\\n\",null],\"names\":[\"useMutableCallback\",\"useSetModal\",\"useToastMessageDispatch\",\"useEndpoint\",\"useMutation\",\"React\",\"AddMatrixUsersModal\",\"module\",\"export\",\"useAddMatrixUsers\",\"link\",\"v\",\"default\",\"setModal\",\"dispatchToastMessage\",\"handleClose\",\"dispatchVerifyEndpoint\",\"_ref\",\"users\",\"handleSave\",\"matrixIdVerificationMap\",\"Map\",\"matrixIds\",\"filter\",\"user\",\"startsWith\",\"length\",\"matrixIdsVerificationResponse\",\"results\",\"matrixIdsVerificationResults\",\"Object\",\"entries\",\"createElement\",\"completeUserList\",\"onClose\",\"onSave\",\"matrixIdVerifiedStatus\",\"error\",\"type\",\"message\"],\"mappings\":\"2BAAmCA,EAA8BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAjEC,EAAOC,MAAE,CAAA,CAAAC,kBAAoBA,IAAMA,CAAA,GAA8BF,EAAAG,IAAA,CAAA,8BAAA,CAAAV,mBAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,2BAAA,CAAAT,YAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,wBAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,YAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,wBAAA,CAAAN,YAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,wBAAA,CAAAE,QAAAD,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAY1D,IAAMF,EAAoBA,KAChC,IAAMI,EAAWZ,IACXa,EAAuBZ,IACvBa,EAAcf,EAAmB,IAAMa,EAAS,OAChDG,EAAyBb,EAAY,MAAO,mCAElD,OAAOC,EAAY,MAAAa,IAAwD,GAAjD,CAAEC,MAAAA,CAAK,CAAEC,WAAAA,CAAAA,CAAoC,CAAAF,EACtE,GAAI,CACH,IAAIG,EAA0B,IAAIC,IAC5BC,EAAYJ,EAAMK,MAAM,CAAEC,GAASA,EAAKC,UAAU,CAAC,MACzD,GAAIH,EAAUI,MAAM,CAAG,EAAG,CACzB,IAAMC,EAAgC,MAAMX,EAAuB,CAAEM,UAAAA,CAAS,GACxE,CAAEM,QAASC,CAAAA,CAA8B,CAAGF,EAClDP,EAA0B,IAAIC,IAAIS,OAAOC,OAAO,CAACF,GAClD,CAEAhB,EACCR,EAAA2B,aAAA,CAAC1B,EAAmB,CACnB2B,iBAAkBf,EAClBgB,QAASnB,EACToB,OAAQhB,EACRiB,uBAAwBhB,CAA+C,GAG1E,CAAE,MAAOiB,EAAO,CACfvB,EAAqB,CAAEwB,KAAM,QAASC,QAASF,CAAc,EAC9D,CACD,EACD\"}"}