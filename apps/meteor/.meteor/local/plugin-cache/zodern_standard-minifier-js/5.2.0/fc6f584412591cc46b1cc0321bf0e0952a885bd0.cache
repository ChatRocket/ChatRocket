{"code":"function module(n,t,o){o.export({useShareLocationAction:function(){return l}}),o.link(\"@rocket.chat/core-typings\",{isRoomFederated:function(n){i=n}},0),o.link(\"@rocket.chat/ui-contexts\",{useSetting:function(n){e=n},useSetModal:function(n){a=n}},1),o.link(\"react\",{default:function(n){r=n}},2),o.link(\"react-i18next\",{useTranslation:function(n){c=n}},3),o.link(\"../../../../ShareLocation/ShareLocationModal\",{default:function(n){u=n}},4);var i,e,a,r,c,u,l=function(n,t){if(!n)throw Error(\"Invalid room\");var o,l=c().t,d=a(),f=!0===e(\"MapView_Enabled\"),s=!!(null===(o=navigator.geolocation)||void 0===o?void 0:o.getCurrentPosition),h=e(\"MapView_GMapsAPIKey\"),k=f&&s&&h&&h.length,p=n&&k&&!i(n);return{id:\"share-location\",content:l(\"Location\"),icon:\"map-pin\",onClick:function(){return d(r.createElement(u,{rid:n._id,tmid:t,onClose:function(){return d(null)}}))},disabled:!p}}}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/messageBox/MessageBoxActionsToolbar/hooks/useShareLocationAction.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage, IRoom } from '@rocket.chat/core-typings';\\nimport { isRoomFederated } from '@rocket.chat/core-typings';\\nimport type { GenericMenuItemProps } from '@rocket.chat/ui-client';\\nimport { useSetting, useSetModal } from '@rocket.chat/ui-contexts';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport ShareLocationModal from '../../../../ShareLocation/ShareLocationModal';\\n\\nexport const useShareLocationAction = (room?: IRoom, tmid?: IMessage['tmid']): GenericMenuItemProps => {\\n\\tif (!room) {\\n\\t\\tthrow new Error('Invalid room');\\n\\t}\\n\\n\\tconst { t } = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\n\\tconst isMapViewEnabled = useSetting('MapView_Enabled') === true;\\n\\tconst isGeolocationCurrentPositionSupported = Boolean(navigator.geolocation?.getCurrentPosition);\\n\\tconst googleMapsApiKey = useSetting('MapView_GMapsAPIKey') as string;\\n\\tconst canGetGeolocation = isMapViewEnabled && isGeolocationCurrentPositionSupported && googleMapsApiKey && googleMapsApiKey.length;\\n\\n\\tconst handleShareLocation = () => setModal(<ShareLocationModal rid={room._id} tmid={tmid} onClose={() => setModal(null)} />);\\n\\n\\tconst allowGeolocation = room && canGetGeolocation && !isRoomFederated(room);\\n\\n\\treturn {\\n\\t\\tid: 'share-location',\\n\\t\\tcontent: t('Location'),\\n\\t\\ticon: 'map-pin',\\n\\t\\tonClick: handleShareLocation,\\n\\t\\tdisabled: !allowGeolocation,\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"export\",\"useShareLocationAction\",\"link\",\"isRoomFederated\",\"v\",\"useSetting\",\"useSetModal\",\"React\",\"useTranslation\",\"ShareLocationModal\",\"room\",\"tmid\",\"Error\",\"_navigator$geolocatio\",\"t\",\"_useTranslation\",\"setModal\",\"isMapViewEnabled\",\"isGeolocationCurrentPositionSupported\",\"Boolean\",\"navigator\",\"geolocation\",\"getCurrentPosition\",\"googleMapsApiKey\",\"canGetGeolocation\",\"length\",\"allowGeolocation\",\"id\",\"content\",\"icon\",\"onClick\",\"createElement\",\"rid\",\"_id\",\"onClose\",\"disabled\"],\"mappings\":\"uBACAA,EAAOC,MAAE,CAAA,CAAAC,uBAAuB,WAAA,OAAAA,CAA4B,CAAA,GAAAF,EAAAG,IAAA,CAAA,4BAAA,CAAAC,gBAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,2BAAA,CAAAG,WAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,EAAAE,YAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,gBAAA,CAAAM,eAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,+CAAA,CAAA,QAAA,SAAAE,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAQrD,IARqDD,EAAAE,EAAAC,EAAAC,EAAAC,EAAAC,EAQ/CR,EAAyB,SAACS,CAAY,CAAEC,CAAuB,EAC3E,GAAI,CAACD,EACJ,MAAM,AAAIE,MAAM,gBAGjB,IALqGC,EAK7FC,EAACC,AAAKP,IAANM,CAAC,CACHE,EAAWV,IAEXW,EAAmBZ,AAAkC,CAAA,IAAlCA,EAAW,mBAC9Ba,EAAwCC,CAAAA,CAAO,CAAA,AAAsB,OAAtBN,CAAAA,EAACO,UAAUC,WAAW,AAAXA,GAAWR,AAAA,KAAA,IAAAA,EAAA,KAAA,EAArBA,EAAuBS,kBAAkB,AAAlBA,EACvEC,EAAmBlB,EAAW,uBAC9BmB,EAAoBP,GAAoBC,GAAyCK,GAAoBA,EAAiBE,MAAM,CAI5HC,EAAmBhB,GAAQc,GAAqB,CAACrB,EAAgBO,GAEvE,MAAO,CACNiB,GAAI,iBACJC,QAASd,EAAE,YACXe,KAAM,UACNC,QAR2B,WAAA,OAAMd,EAAST,EAAAwB,aAAA,CAACtB,EAAkB,CAACuB,IAAKtB,EAAKuB,GAAI,CAACtB,KAAMA,EAAMuB,QAAS,WAAA,OAAMlB,EAAS,KAAK,CAAC,GAAI,EAS3HmB,SAAU,CAACT,EAEb\"}"}