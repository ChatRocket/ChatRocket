{"code":"function module(e,t,n){var r,a,l,i,u,c,o,m,s,f,d,p,h,E;n.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){r=e}},0),n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){a=e}},1),n.link(\"@rocket.chat/fuselage\",{CheckBox:function(e){l=e},Table:function(e){i=e},Tag:function(e){u=e},Pagination:function(e){c=e},TableHead:function(e){o=e},TableRow:function(e){m=e},TableCell:function(e){s=e},TableBody:function(e){f=e}},0),n.link(\"react\",{default:function(e){d=e},useState:function(e){p=e},useCallback:function(e){h=e}},1),n.link(\"react-i18next\",{useTranslation:function(e){E=e}},2),n.exportDefault(function(e){var t=e.usersCount,n=e.users,g=e.setUsers,_=E().t,b=p(0),k=a(b,2),P=k[0],T=k[1],v=p(25),C=a(v,2),w=C[0],x=C[1],S=h(function(e){var t=e.count,n=e.current;return _(\"Showing_results_of\",{postProcess:\"sprintf\",sprintf:[n+1,Math.min(n+e.itemsPerPage,t),t]})},[_]),y=h(function(){return _(\"Items_per_page:\")},[_]);return d.createElement(d.Fragment,null,d.createElement(i,null,d.createElement(o,null,d.createElement(m,null,d.createElement(s,{width:\"x36\"},d.createElement(l,{checked:t>0,indeterminate:t>0&&t!==n.length,onChange:function(){g(function(e){var n=e.some(function(e){var t=e.is_deleted,n=e.do_import;return t&&n});return 0===t?e.map(function(e){return r(r({},e),{},{do_import:!0})}):n?e.map(function(e){return e.is_deleted?r(r({},e),{},{do_import:!1}):e}):e.map(function(e){return r(r({},e),{},{do_import:!1})})})}})),d.createElement(s,{is:\"th\"},_(\"Username\")),d.createElement(s,{is:\"th\"},_(\"Email\")),d.createElement(s,{is:\"th\"}))),d.createElement(f,null,n.slice(P,P+w).map(function(e){return d.createElement(m,{key:e.user_id},d.createElement(s,{width:\"x36\"},d.createElement(l,{checked:e.do_import,onChange:function(t){var n=t.currentTarget.checked;g(function(t){return t.map(function(t){return t===e?r(r({},t),{},{do_import:n}):t})})}})),d.createElement(s,null,e.username),d.createElement(s,null,e.email),d.createElement(s,{align:\"end\"},e.is_deleted&&d.createElement(u,{variant:\"danger\"},_(\"Deleted\"))))}))),d.createElement(c,{current:P,itemsPerPage:w,count:n.length||0,onSetItemsPerPage:x,onSetCurrent:T,itemsPerPageLabel:y,showingResultsLabel:S}))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/import/PrepareUsers.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { CheckBox, Table, Tag, Pagination, TableHead, TableRow, TableCell, TableBody } from '@rocket.chat/fuselage';\\nimport type { Dispatch, SetStateAction, ChangeEvent } from 'react';\\nimport React, { useState, useCallback } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport type { UserDescriptor } from './UserDescriptor';\\n\\ntype PrepareUsersProps = {\\n\\tusersCount: number;\\n\\tusers: UserDescriptor[];\\n\\tsetUsers: Dispatch<SetStateAction<UserDescriptor[]>>;\\n};\\n\\n// TODO: review inner logic\\nconst PrepareUsers = ({ usersCount, users, setUsers }: PrepareUsersProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst [current, setCurrent] = useState(0);\\n\\tconst [itemsPerPage, setItemsPerPage] = useState<25 | 50 | 100>(25);\\n\\tconst showingResultsLabel = useCallback(\\n\\t\\t({ count, current, itemsPerPage }) =>\\n\\t\\t\\tt('Showing_results_of', { postProcess: 'sprintf', sprintf: [current + 1, Math.min(current + itemsPerPage, count), count] }),\\n\\t\\t[t],\\n\\t);\\n\\tconst itemsPerPageLabel = useCallback(() => t('Items_per_page:'), [t]);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<Table>\\n\\t\\t\\t\\t<TableHead>\\n\\t\\t\\t\\t\\t<TableRow>\\n\\t\\t\\t\\t\\t\\t<TableCell width='x36'>\\n\\t\\t\\t\\t\\t\\t\\t<CheckBox\\n\\t\\t\\t\\t\\t\\t\\t\\tchecked={usersCount > 0}\\n\\t\\t\\t\\t\\t\\t\\t\\tindeterminate={usersCount > 0 && usersCount !== users.length}\\n\\t\\t\\t\\t\\t\\t\\t\\tonChange={(): void => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsetUsers((users) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst hasCheckedDeletedUsers = users.some(({ is_deleted, do_import }) => is_deleted && do_import);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst isChecking = usersCount === 0;\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif (isChecking) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn users.map((user) => ({ ...user, do_import: true }));\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif (hasCheckedDeletedUsers) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn users.map((user) => (user.is_deleted ? { ...user, do_import: false } : user));\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn users.map((user) => ({ ...user, do_import: false }));\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</TableCell>\\n\\t\\t\\t\\t\\t\\t<TableCell is='th'>{t('Username')}</TableCell>\\n\\t\\t\\t\\t\\t\\t<TableCell is='th'>{t('Email')}</TableCell>\\n\\t\\t\\t\\t\\t\\t<TableCell is='th'></TableCell>\\n\\t\\t\\t\\t\\t</TableRow>\\n\\t\\t\\t\\t</TableHead>\\n\\t\\t\\t\\t<TableBody>\\n\\t\\t\\t\\t\\t{users.slice(current, current + itemsPerPage).map((user) => (\\n\\t\\t\\t\\t\\t\\t<TableRow key={user.user_id}>\\n\\t\\t\\t\\t\\t\\t\\t<TableCell width='x36'>\\n\\t\\t\\t\\t\\t\\t\\t\\t<CheckBox\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tchecked={user.do_import}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tonChange={(event: ChangeEvent<HTMLInputElement>): void => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst { checked } = event.currentTarget;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tsetUsers((users) => users.map((_user) => (_user === user ? { ..._user, do_import: checked } : _user)));\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t</TableCell>\\n\\t\\t\\t\\t\\t\\t\\t<TableCell>{user.username}</TableCell>\\n\\t\\t\\t\\t\\t\\t\\t<TableCell>{user.email}</TableCell>\\n\\t\\t\\t\\t\\t\\t\\t<TableCell align='end'>{user.is_deleted && <Tag variant='danger'>{t('Deleted')}</Tag>}</TableCell>\\n\\t\\t\\t\\t\\t\\t</TableRow>\\n\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t</TableBody>\\n\\t\\t\\t</Table>\\n\\t\\t\\t<Pagination\\n\\t\\t\\t\\tcurrent={current}\\n\\t\\t\\t\\titemsPerPage={itemsPerPage}\\n\\t\\t\\t\\tcount={users.length || 0}\\n\\t\\t\\t\\tonSetItemsPerPage={setItemsPerPage}\\n\\t\\t\\t\\tonSetCurrent={setCurrent}\\n\\t\\t\\t\\titemsPerPageLabel={itemsPerPageLabel}\\n\\t\\t\\t\\tshowingResultsLabel={showingResultsLabel}\\n\\t\\t\\t/>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default PrepareUsers;\\n\",null],\"names\":[\"_objectSpread\",\"_slicedToArray\",\"CheckBox\",\"Table\",\"Tag\",\"Pagination\",\"TableHead\",\"TableRow\",\"TableCell\",\"TableBody\",\"React\",\"useState\",\"useCallback\",\"useTranslation\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"usersCount\",\"users\",\"setUsers\",\"t\",\"_useTranslation\",\"_useState\",\"_useState2\",\"current\",\"setCurrent\",\"_useState3\",\"_useState4\",\"itemsPerPage\",\"setItemsPerPage\",\"showingResultsLabel\",\"_ref2\",\"count\",\"postProcess\",\"sprintf\",\"Math\",\"min\",\"itemsPerPageLabel\",\"createElement\",\"Fragment\",\"width\",\"checked\",\"indeterminate\",\"length\",\"onChange\",\"hasCheckedDeletedUsers\",\"some\",\"_ref3\",\"is_deleted\",\"do_import\",\"map\",\"user\",\"is\",\"slice\",\"key\",\"user_id\",\"event\",\"currentTarget\",\"_user\",\"username\",\"email\",\"align\",\"variant\",\"onSetItemsPerPage\",\"onSetCurrent\"],\"mappings\":\"uBAcA,IAdAA,EAAmHC,EAAnHC,EAASC,EAAUC,EAAAC,EAAYC,EAAYC,EAASC,EAAUC,EAAsDC,EAAAC,EAAAC,EAAAC,EAAnGC,EAAOC,IAAK,CAAA,uCAAmC,CAAAC,QAAW,SAAWC,CAAA,EAAAjB,EAAMiB,CAAA,CAAA,EAAA,GAAwBH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAhB,EAAAgB,CAAA,CAAA,EAAA,GAA3CH,EAAEC,IAAS,CAAA,wBAAQ,CAAAb,SAAwB,SAAAe,CAAA,EAAAf,EAAAe,CAAA,EAAAd,MAAA,SAAAc,CAAA,EAAAd,EAAAc,CAAA,EAAAb,IAAA,SAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,WAAA,SAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,UAAA,SAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,SAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,UAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,UAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAP,EAAAO,CAAA,EAAAN,SAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,YAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAF,eAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAApHH,EAAOI,aAAY,CAcE,SAAAC,CAAA,EAAuD,IAApDC,EAAUD,EAAVC,UAAU,CAAEC,EAAKF,EAALE,KAAK,CAAEC,EAAQH,EAARG,QAAQ,CAC1CC,EAACC,AAAKX,IAANU,CAAC,CACTE,EAA8Bd,EAAS,GAAEe,EAAAzB,EAAAwB,EAAA,GAAlCE,EAAOD,CAAA,CAAA,EAAA,CAAEE,EAAUF,CAAA,CAAA,EAAA,CAC1BG,EAAwClB,EAAwB,IAAGmB,EAAA7B,EAAA4B,EAAA,GAA5DE,EAAYD,CAAA,CAAA,EAAA,CAAEE,EAAeF,CAAA,CAAA,EAAA,CAC9BG,EAAsBrB,EAC3B,SAAAsB,CAAA,EAAA,IAAGC,EAAKD,EAALC,KAAK,CAAER,EAAOO,EAAPP,OAAO,CAAc,OAC9BJ,EAAE,qBAAsB,CAAEa,YAAa,UAAWC,QAAS,CAACV,EAAU,EAAGW,KAAKC,GAAG,CAACZ,EADpDO,EAAZH,YAAY,CAC4EI,GAAQA,EAAK,AAAC,EAAG,EAC5H,CAACZ,EAAE,EAEEiB,EAAoB5B,EAAY,WAAA,OAAMW,EAAE,kBAAkB,EAAE,CAACA,EAAE,EAErE,OACCb,EAAA+B,aAAA,CAAA/B,EAAAgC,QAAA,CAAA,KACChC,EAAA+B,aAAA,CAACtC,EAAK,KACLO,EAAA+B,aAAA,CAACnC,EAAS,KACTI,EAAA+B,aAAA,CAAClC,EAAQ,KACRG,EAAA+B,aAAA,CAACjC,EAAS,CAACmC,MAAM,KAAK,EACrBjC,EAAA+B,aAAA,CAACvC,EAAQ,CACR0C,QAASxB,EAAa,EACtByB,cAAezB,EAAa,GAAKA,IAAeC,EAAMyB,MAAO,CAC7DC,SAAU,WACTzB,EAAS,SAACD,CAAK,EACd,IAAM2B,EAAyB3B,EAAM4B,IAAI,CAAC,SAAAC,CAAA,EAAA,IAAGC,EAAUD,EAAVC,UAAU,CAAEC,EAASF,EAATE,SAAS,CAAA,OAAOD,GAAcC,CAAS,UAGhG,AAFmBhC,AAAe,IAAfA,EAGXC,EAAMgC,GAAG,CAAC,SAACC,CAAI,EAAA,OAAAtD,EAAAA,EAAA,CAAA,EAAWsD,GAAI,CAAA,EAAA,CAAEF,UAAW,CAAA,CAAI,EAAA,GAGnDJ,EACI3B,EAAMgC,GAAG,CAAC,SAACC,CAAI,EAAA,OAAMA,EAAKH,UAAU,CAAAnD,EAAAA,EAAA,CAAA,EAAQsD,GAAI,CAAA,EAAA,CAAEF,UAAW,CAAA,CAAK,GAAKE,CAAI,GAG5EjC,EAAMgC,GAAG,CAAC,SAACC,CAAI,EAAA,OAAAtD,EAAAA,EAAA,CAAA,EAAWsD,GAAI,CAAA,EAAA,CAAEF,UAAW,CAAA,CAAK,EAAA,EACxD,EACD,CAAE,IAGJ1C,EAAA+B,aAAA,CAACjC,EAAS,CAAC+C,GAAG,IAAI,EAAEhC,EAAE,aACtBb,EAAA+B,aAAA,CAACjC,EAAS,CAAC+C,GAAG,IAAI,EAAEhC,EAAE,UACtBb,EAAA+B,aAAA,CAACjC,EAAS,CAAC+C,GAAG,IAAI,KAGpB7C,EAAA+B,aAAA,CAAChC,EAAS,KACRY,EAAMmC,KAAK,CAAC7B,EAASA,EAAUI,GAAcsB,GAAG,CAAC,SAACC,CAAI,EAAA,OACtD5C,EAAA+B,aAAA,CAAClC,EAAQ,CAACkD,IAAKH,EAAKI,OAAAA,AAAQ,EAC3BhD,EAAA+B,aAAA,CAACjC,EAAS,CAACmC,MAAM,KAAK,EACrBjC,EAAA+B,aAAA,CAACvC,EAAQ,CACR0C,QAASU,EAAKF,SAAU,CACxBL,SAAU,SAACY,CAAoC,EAC9C,IAAQf,EAAYe,EAAMC,aAAa,CAA/BhB,OAAO,CACftB,EAAS,SAACD,CAAK,EAAA,OAAKA,EAAMgC,GAAG,CAAC,SAACQ,CAAK,EAAA,OAAMA,IAAUP,EAAItD,EAAAA,EAAA,CAAA,EAAQ6D,GAAK,CAAA,EAAA,CAAET,UAAWR,CAAO,GAAKiB,CAAK,EAAE,EACtG,CAAE,IAGJnD,EAAA+B,aAAA,CAACjC,EAAS,KAAE8C,EAAKQ,QAAoB,EACrCpD,EAAA+B,aAAA,CAACjC,EAAS,KAAE8C,EAAKS,KAAiB,EAClCrD,EAAA+B,aAAA,CAACjC,EAAS,CAACwD,MAAM,KAAK,EAAEV,EAAKH,UAAU,EAAIzC,EAAA+B,aAAA,CAACrC,EAAG,CAAC6D,QAAQ,QAAQ,EAAE1C,EAAE,aAC1D,KAIdb,EAAA+B,aAAA,CAACpC,EAAU,CACVsB,QAASA,EACTI,aAAcA,EACdI,MAAOd,EAAMyB,MAAM,EAAI,EACvBoB,kBAAmBlC,EACnBmC,aAAcvC,EACdY,kBAAmBA,EACnBP,oBAAqBA,CAAoB,GAI7C\"}"}