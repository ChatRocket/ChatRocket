{"code":"function module(e,t,n){var a,i,l,r,o,u,c,s,f,d,m,k,p,b,v,g,h,x,A;n.link(\"@babel/runtime/helpers/taggedTemplateLiteralLoose\",{default:function(e){i=e}},0),n.link(\"@babel/runtime/helpers/extends\",{default:function(e){l=e}},1),n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){r=e}},2),n.link(\"@babel/runtime/regenerator\",{default:function(e){o=e}},3),n.link(\"@rocket.chat/core-typings\",{isRoomFederated:function(e){u=e}},0),n.link(\"@rocket.chat/css-in-js\",{css:function(e){c=e}},1),n.link(\"@rocket.chat/fuselage\",{Box:function(e){s=e},Button:function(e){f=e},ButtonGroup:function(e){d=e}},2),n.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){m=e}},3),n.link(\"@rocket.chat/ui-avatar\",{RoomAvatar:function(e){k=e}},4),n.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){p=e}},5),n.link(\"react\",{default:function(e){b=e},useEffect:function(e){v=e}},6),n.link(\"react-i18next\",{useTranslation:function(e){g=e}},7),n.link(\"../../../app/utils/client/getAvatarURL\",{getAvatarURL:function(e){h=e}},8),n.link(\"../../hooks/useSingleFileInput\",{useSingleFileInput:function(e){x=e}},9),n.link(\"../../lib/utils/isValidImageFormat\",{isValidImageFormat:function(e){A=e}},10),n.exportDefault(function(e){var t=e.disabled,n=void 0!==t&&t,E=e.room,R=e.roomAvatar,y=e.onChangeAvatar,F=g().t,w=p(),I=m(function(e){var t;return o.async(function(n){for(;;)switch(n.prev=n.next){case 0:(t=new FileReader).readAsDataURL(e),t.onloadend=function e(){var e;return o.async(function n(n){for(;;)switch(n.prev=n.next){case 0:if(e=t.result,n.t0=\"string\"==typeof e,!n.t0){n.next=6;break}return n.next=5,o.awrap(A(e));case 5:n.t0=n.sent;case 6:if(!n.t0){n.next=9;break}return y(e),n.abrupt(\"return\");case 9:w({type:\"error\",message:F(\"Avatar_format_invalid\")});case 10:case\"end\":return n.stop()}},null,null,null,Promise)};case 3:case\"end\":return n.stop()}},null,null,null,Promise)}),L=x(I),U=r(L,2),_=U[0],C=U[1],D=m(function(){C(),y(null)});v(function(){R||C()},[R,C]);var T=E.prid?h({roomId:E.prid}):h({username:\"@\"+E.name});return b.createElement(s,{borderRadius:\"x2\",maxWidth:\"x332\",w:\"full\",position:\"relative\"},b.createElement(k,l({},void 0!==R&&{url:null===R?T:R},{room:E,size:\"x332\"})),b.createElement(s,{className:[c(a||(a=i([\"\\n\t\t\t\t\t\tbottom: 0;\\n\t\t\t\t\t\tright: 0;\\n\t\t\t\t\t\"])))],position:\"absolute\",m:12},b.createElement(d,null,b.createElement(f,{icon:\"upload\",disabled:u(E)||n,small:!0,title:F(\"Upload_user_avatar\"),onClick:_},F(\"Upload\")),b.createElement(f,{small:!0,danger:!0,icon:\"trash\",title:F(\"Accounts_SetDefaultAvatar\"),disabled:!R||u(E)||n,onClick:D}))))})}","map":"{\"version\":3,\"sources\":[\"client/components/avatar/RoomAvatarEditor.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { isRoomFederated } from '@rocket.chat/core-typings';\\nimport type { IRoom, RoomAdminFieldsType } from '@rocket.chat/core-typings';\\nimport { css } from '@rocket.chat/css-in-js';\\nimport { Box, Button, ButtonGroup } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { RoomAvatar } from '@rocket.chat/ui-avatar';\\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useEffect } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { getAvatarURL } from '../../../app/utils/client/getAvatarURL';\\nimport { useSingleFileInput } from '../../hooks/useSingleFileInput';\\nimport { isValidImageFormat } from '../../lib/utils/isValidImageFormat';\\n\\ntype RoomAvatarEditorProps = {\\n\\troom: Pick<IRoom, RoomAdminFieldsType>;\\n\\tdisabled?: boolean;\\n\\troomAvatar?: string;\\n\\tonChangeAvatar: (url: string | null) => void;\\n};\\n\\nconst RoomAvatarEditor = ({ disabled = false, room, roomAvatar, onChangeAvatar }: RoomAvatarEditorProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst handleChangeAvatar = useMutableCallback(async (file) => {\\n\\t\\tconst reader = new FileReader();\\n\\t\\treader.readAsDataURL(file);\\n\\t\\treader.onloadend = async (): Promise<void> => {\\n\\t\\t\\tconst { result } = reader;\\n\\t\\t\\tif (typeof result === 'string' && (await isValidImageFormat(result))) {\\n\\t\\t\\t\\tonChangeAvatar(result);\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: t('Avatar_format_invalid') });\\n\\t\\t};\\n\\t});\\n\\n\\tconst [clickUpload, reset] = useSingleFileInput(handleChangeAvatar);\\n\\tconst clickReset = useMutableCallback(() => {\\n\\t\\treset();\\n\\t\\tonChangeAvatar(null);\\n\\t});\\n\\n\\tuseEffect(() => {\\n\\t\\t!roomAvatar && reset();\\n\\t}, [roomAvatar, reset]);\\n\\n\\tconst defaultUrl = room.prid ? getAvatarURL({ roomId: room.prid }) : getAvatarURL({ username: `@${room.name}` }); // Discussions inherit avatars from the parent room\\n\\n\\treturn (\\n\\t\\t<Box borderRadius='x2' maxWidth='x332' w='full' position='relative'>\\n\\t\\t\\t<RoomAvatar {...(roomAvatar !== undefined && { url: roomAvatar === null ? defaultUrl : roomAvatar })} room={room} size='x332' />\\n\\t\\t\\t<Box\\n\\t\\t\\t\\tclassName={[\\n\\t\\t\\t\\t\\tcss`\\n\\t\\t\\t\\t\\t\\tbottom: 0;\\n\\t\\t\\t\\t\\t\\tright: 0;\\n\\t\\t\\t\\t\\t`,\\n\\t\\t\\t\\t]}\\n\\t\\t\\t\\tposition='absolute'\\n\\t\\t\\t\\tm={12}\\n\\t\\t\\t>\\n\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t<Button icon='upload' disabled={isRoomFederated(room) || disabled} small title={t('Upload_user_avatar')} onClick={clickUpload}>\\n\\t\\t\\t\\t\\t\\t{t('Upload')}\\n\\t\\t\\t\\t\\t</Button>\\n\\n\\t\\t\\t\\t\\t<Button\\n\\t\\t\\t\\t\\t\\tsmall\\n\\t\\t\\t\\t\\t\\tdanger\\n\\t\\t\\t\\t\\t\\ticon='trash'\\n\\t\\t\\t\\t\\t\\ttitle={t('Accounts_SetDefaultAvatar')}\\n\\t\\t\\t\\t\\t\\tdisabled={!roomAvatar || isRoomFederated(room) || disabled}\\n\\t\\t\\t\\t\\t\\tonClick={clickReset}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</Box>\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default RoomAvatarEditor;\\n\",null],\"names\":[\"_taggedTemplateLiteralLoose\",\"_extends\",\"_slicedToArray\",\"_regeneratorRuntime\",\"isRoomFederated\",\"css\",\"Box\",\"Button\",\"ButtonGroup\",\"useMutableCallback\",\"RoomAvatar\",\"useToastMessageDispatch\",\"React\",\"useEffect\",\"useTranslation\",\"getAvatarURL\",\"useSingleFileInput\",\"isValidImageFormat\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_ref$disabled\",\"disabled\",\"room\",\"roomAvatar\",\"onChangeAvatar\",\"t\",\"_useTranslation\",\"dispatchToastMessage\",\"handleChangeAvatar\",\"file\",\"reader\",\"async\",\"_context2\",\"prev\",\"next\",\"FileReader\",\"readAsDataURL\",\"onloadend\",\"_callee\",\"result\",\"_callee$\",\"_context\",\"t0\",\"awrap\",\"sent\",\"abrupt\",\"type\",\"message\",\"stop\",\"Promise\",\"_useSingleFileInput\",\"_useSingleFileInput2\",\"clickUpload\",\"reset\",\"clickReset\",\"defaultUrl\",\"prid\",\"roomId\",\"username\",\"name\",\"createElement\",\"borderRadius\",\"maxWidth\",\"w\",\"position\",\"undefined\",\"url\",\"size\",\"className\",\"_templateObject\",\"m\",\"icon\",\"small\",\"title\",\"onClick\",\"danger\"],\"mappings\":\"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\"}"}