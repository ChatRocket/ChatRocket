{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){o=e}},0),t.export({useDeviceLogout:function(){return p}}),t.link(\"@rocket.chat/ui-contexts\",{useSetModal:function(e){u=e},useTranslation:function(e){c=e},useToastMessageDispatch:function(e){i=e},useRoute:function(e){r=e},useRouteParameter:function(e){a=e}},0),t.link(\"react\",{default:function(e){s=e},useCallback:function(e){l=e}},1),t.link(\"../components/GenericModal\",{default:function(e){f=e}},2),t.link(\"./useEndpointAction\",{useEndpointAction:function(e){d=e}},3);var o,u,c,i,r,a,s,l,f,d,p=function(e,n){var t=c(),p=u(),v=i(),g=r(\"device-management\"),m=a(\"id\"),k=d(\"POST\",n),x=l(function(){return g.push({})},[g]),h=m===e;return l(function(n){var u=function(){return p(null)};p(s.createElement(f,{title:t(\"Logout_Device\"),variant:\"danger\",confirmText:t(\"Logout_Device\"),cancelText:t(\"Cancel\"),onConfirm:function(){return o.async(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,o.awrap(k({sessionId:e}));case 3:n(),h&&x(),v({type:\"success\",message:t(\"Device_Logged_Out\")}),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(0),v({type:\"error\",message:c.t0});case 11:return c.prev=11,u(),c.finish(11);case 14:case\"end\":return c.stop()}},null,null,[[0,8,11,14]],Promise)},onCancel:u,onClose:u},t(\"Device_Logout_Text\")))},[p,t,k,e,h,x,v])}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useDeviceLogout.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useSetModal, useTranslation, useToastMessageDispatch, useRoute, useRouteParameter } from '@rocket.chat/ui-contexts';\\nimport React, { useCallback } from 'react';\\n\\nimport GenericModal from '../components/GenericModal';\\nimport { useEndpointAction } from './useEndpointAction';\\n\\nexport const useDeviceLogout = (\\n\\tsessionId: string,\\n\\tendpoint: '/v1/sessions/logout' | '/v1/sessions/logout.me',\\n): ((onReload: () => void) => void) => {\\n\\tconst t = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst deviceManagementRouter = useRoute('device-management');\\n\\tconst routeId = useRouteParameter('id');\\n\\n\\tconst logoutDevice = useEndpointAction('POST', endpoint);\\n\\n\\tconst handleCloseContextualBar = useCallback((): void => deviceManagementRouter.push({}), [deviceManagementRouter]);\\n\\n\\tconst isContextualBarOpen = routeId === sessionId;\\n\\n\\tconst handleLogoutDeviceModal = useCallback(\\n\\t\\t(onReload: () => void) => {\\n\\t\\t\\tconst closeModal = (): void => setModal(null);\\n\\n\\t\\t\\tconst handleLogoutDevice = async (): Promise<void> => {\\n\\t\\t\\t\\ttry {\\n\\t\\t\\t\\t\\tawait logoutDevice({ sessionId });\\n\\t\\t\\t\\t\\tonReload();\\n\\t\\t\\t\\t\\tisContextualBarOpen && handleCloseContextualBar();\\n\\t\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Device_Logged_Out') });\\n\\t\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t\\t} finally {\\n\\t\\t\\t\\t\\tcloseModal();\\n\\t\\t\\t\\t}\\n\\t\\t\\t};\\n\\n\\t\\t\\tsetModal(\\n\\t\\t\\t\\t<GenericModal\\n\\t\\t\\t\\t\\ttitle={t('Logout_Device')}\\n\\t\\t\\t\\t\\tvariant='danger'\\n\\t\\t\\t\\t\\tconfirmText={t('Logout_Device')}\\n\\t\\t\\t\\t\\tcancelText={t('Cancel')}\\n\\t\\t\\t\\t\\tonConfirm={handleLogoutDevice}\\n\\t\\t\\t\\t\\tonCancel={closeModal}\\n\\t\\t\\t\\t\\tonClose={closeModal}\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t{t('Device_Logout_Text')}\\n\\t\\t\\t\\t</GenericModal>,\\n\\t\\t\\t);\\n\\t\\t},\\n\\t\\t[setModal, t, logoutDevice, sessionId, isContextualBarOpen, handleCloseContextualBar, dispatchToastMessage],\\n\\t);\\n\\n\\treturn handleLogoutDeviceModal;\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"export\",\"useDeviceLogout\",\"useSetModal\",\"useTranslation\",\"useToastMessageDispatch\",\"useRoute\",\"useRouteParameter\",\"React\",\"useCallback\",\"GenericModal\",\"useEndpointAction\",\"sessionId\",\"endpoint\",\"t\",\"setModal\",\"dispatchToastMessage\",\"deviceManagementRouter\",\"routeId\",\"logoutDevice\",\"handleCloseContextualBar\",\"push\",\"isContextualBarOpen\",\"onReload\",\"closeModal\",\"createElement\",\"title\",\"variant\",\"confirmText\",\"cancelText\",\"onConfirm\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"type\",\"message\",\"t0\",\"finish\",\"stop\",\"Promise\",\"onCancel\",\"onClose\"],\"mappings\":\"uBAAsBA,EAAAC,IAAA,CAAc,6BAA2B,CAAAC,QAAU,SAAAC,CAAA,EAAAC,EAAyBD,CAAA,CAAA,EAAA,GAAlGH,EAAOK,MAAE,CAAA,CAAAC,gBAAa,WAAgB,OAAAA,CAAyB,CAAA,GAA8DN,EAAAC,IAAA,CAAA,2BAAA,CAAAM,YAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,EAAAK,eAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,EAAAM,wBAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,EAAAO,SAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,EAAAQ,kBAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAS,EAAAT,CAAA,EAAAU,YAAA,SAAAV,CAAA,EAAAU,EAAAV,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAA,QAAA,SAAAE,CAAA,EAAAW,EAAAX,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sBAAA,CAAAc,kBAAA,SAAAZ,CAAA,EAAAY,EAAAZ,CAAA,CAAA,EAAA,GAMtH,IANPC,EAAuEG,EAAEC,EAAyBC,EAAAC,EAA2BC,EAAAC,EAAAC,EAAAC,EAAAC,EAMhHT,EAAkB,SAC9BU,CAAiB,CACjBC,CAA0D,EAE1D,IAAMC,EAAIV,IACJW,EAAWZ,IACXa,EAAuBX,IACvBY,EAAyBX,EAAS,qBAClCY,EAAUX,EAAkB,MAE5BY,EAAeR,EAAkB,OAAQE,GAEzCO,EAA2BX,EAAY,WAAA,OAAYQ,EAAuBI,IAAI,CAAC,CAAA,EAAG,EAAE,CAACJ,EAAuB,EAE5GK,EAAsBJ,IAAYN,EAoCxC,OAlCgCH,EAC/B,SAACc,CAAoB,EACpB,IAAMC,EAAa,WAAA,OAAYT,EAAS,KAAK,EAe7CA,EACCP,EAAAiB,aAAA,CAACf,EAAY,CACZgB,MAAOZ,EAAE,iBACTa,QAAQ,SACRC,YAAad,EAAE,iBACfe,WAAYf,EAAE,UACdgB,UAnByB,WAAA,OAAA9B,EAAA+B,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAAlC,EAAAmC,KAAA,CAEnBhB,EAAa,CAAEP,UAAAA,CAAS,GAAG,MAAA,EACjCW,IACAD,GAAuBF,IACvBJ,EAAqB,CAAEoB,KAAM,UAAWC,QAASvB,EAAE,oBAAoB,GAAIkB,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,EAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAM,EAAA,CAAAN,EAAA,KAAA,CAAA,GAE3EhB,EAAqB,CAAEoB,KAAM,QAASC,QAAOL,EAAAM,EAAAA,AAAO,EAAI,MAAA,GAE3C,OAF2CN,EAAAC,IAAA,CAAA,GAExDT,IAAaQ,EAAAO,MAAA,CAAA,GAAA,MAAA,GAAA,IAAA,MAAA,OAAAP,EAAAQ,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,EAAA,GAAA,GAAA,CAAA,CAAAC,QAAA,EAWbC,SAAUlB,EACVmB,QAASnB,CAAW,EAEnBV,EAAE,uBAGN,EACA,CAACC,EAAUD,EAAGK,EAAcP,EAAWU,EAAqBF,EAA0BJ,EAAqB,CAI7G\"}"}