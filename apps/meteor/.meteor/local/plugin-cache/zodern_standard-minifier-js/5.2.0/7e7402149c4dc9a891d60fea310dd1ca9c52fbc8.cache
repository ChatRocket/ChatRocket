{"code":"function module(e,t,l){let n,r,a,i,o,c,s,u,m,d,f,k,g,h,x,E,b,p,v,F;let _=[\"control\",\"trigger\",\"index\"],w=[\"label\",\"value\",\"onMouseDown\"];l.link(\"@babel/runtime/helpers/extends\",{default(e){n=e}},0),l.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){r=e}},1),l.export({ActionForm:()=>D}),l.link(\"@rocket.chat/fuselage\",{Box(e){a=e},Field(e){i=e},FieldGroup(e){o=e},FieldHint(e){c=e},FieldLabel(e){s=e},FieldRow(e){u=e},Option(e){m=e},SelectLegacy(e){d=e},Tag(e){f=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){k=e}},1),l.link(\"react\",{default(e){g=e},useCallback(e){h=e},useMemo(e){x=e}},2),l.link(\"react-hook-form\",{Controller(e){E=e},useWatch(e){b=e}},3),l.link(\"react-i18next\",{useTranslation(e){p=e}},4),l.link(\"../../../../hooks/useHasLicenseModule\",{useHasLicenseModule(e){v=e}},5),l.link(\"../utils\",{getActionFormFields(e){F=e}},6);let M={\"use-external-service\":\"External_service_action_hint\"},C=[\"use-external-service\"],D=e=>{let{control:t,trigger:l,index:D}=e,L=r(e,_),{t:S}=p(),y=k(),A=\"actions.\".concat(D,\".name\"),H=b({control:t,name:A}),j=v(\"livechat-enterprise\"),G=x(()=>[[\"send-message\",S(\"Send_a_message\")],[\"use-external-service\",S(\"Send_a_message_external_service\")]],[S]),I=F(H),P=x(()=>M[H]||\"\",[H]),T=h(e=>!j&&C.includes(e),[j]),W=h((e,t)=>g.createElement(g.Fragment,null,T(t)?g.createElement(a,{justifyContent:\"space-between\",flexDirection:\"row\",display:\"flex\",width:\"100%\"},S(e),g.createElement(f,{variant:\"featured\"},S(\"Premium\"))):S(e)),[T,S]);return g.createElement(o,L,g.createElement(i,null,g.createElement(s,{htmlFor:y},S(\"Action\")),g.createElement(u,null,g.createElement(E,{name:A,control:t,render:e=>{let{field:{onChange:t,value:l,name:i,ref:o}}=e;return g.createElement(d,{ref:o,name:i,onChange:t,value:l,id:y,options:G,renderSelected:e=>{let{label:t,value:l}=e;return g.createElement(a,{flexGrow:\"1\"},W(t,l))},renderItem:e=>{let{label:t,value:l,onMouseDown:a}=e,i=r(e,w);return g.createElement(m,n({},i,{onMouseDown:T(l)?e=>e.preventDefault():a,disabled:T(l),label:W(t,l)}))}})}})),P&&g.createElement(c,null,S(P))),g.createElement(I,{control:t,trigger:l,index:D}))}}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/triggers/actions/ActionForm.tsx\",\"<anon>\"],\"sourcesContent\":[\"import {\\n\\tBox,\\n\\tField,\\n\\tFieldGroup,\\n\\tFieldHint,\\n\\tFieldLabel,\\n\\tFieldRow,\\n\\tOption,\\n\\tSelectLegacy,\\n\\tTag,\\n\\ttype SelectOption,\\n} from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport type { ComponentProps } from 'react';\\nimport React, { useCallback, useMemo } from 'react';\\nimport type { Control, UseFormTrigger } from 'react-hook-form';\\nimport { Controller, useWatch } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useHasLicenseModule } from '../../../../hooks/useHasLicenseModule';\\nimport { type TriggersPayload } from '../EditTrigger';\\nimport { getActionFormFields } from '../utils';\\n\\ntype SendMessageFormType = ComponentProps<typeof Field> & {\\n\\tcontrol: Control<TriggersPayload>;\\n\\ttrigger: UseFormTrigger<TriggersPayload>;\\n\\tindex: number;\\n};\\n\\nconst ACTION_HINTS: Record<string, TranslationKey> = {\\n\\t'use-external-service': 'External_service_action_hint',\\n} as const;\\n\\nconst PREMIUM_ACTIONS = ['use-external-service'];\\n\\nexport const ActionForm = ({ control, trigger, index, ...props }: SendMessageFormType) => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst actionFieldId = useUniqueId();\\n\\tconst actionFieldName = `actions.${index}.name` as const;\\n\\tconst actionFieldValue = useWatch({ control, name: actionFieldName });\\n\\n\\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\\n\\n\\tconst actionOptions = useMemo<SelectOption[]>(() => {\\n\\t\\treturn [\\n\\t\\t\\t['send-message', t('Send_a_message')],\\n\\t\\t\\t['use-external-service', t('Send_a_message_external_service')],\\n\\t\\t];\\n\\t}, [t]);\\n\\n\\tconst ActionFormFields = getActionFormFields(actionFieldValue);\\n\\tconst actionHint = useMemo(() => ACTION_HINTS[actionFieldValue] || '', [actionFieldValue]);\\n\\tconst isOptionDisabled = useCallback((value: string) => !hasLicense && PREMIUM_ACTIONS.includes(value), [hasLicense]);\\n\\n\\tconst renderOption = useCallback(\\n\\t\\t(label: TranslationKey, value: string) => {\\n\\t\\t\\treturn (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t{isOptionDisabled(value) ? (\\n\\t\\t\\t\\t\\t\\t<Box justifyContent='space-between' flexDirection='row' display='flex' width='100%'>\\n\\t\\t\\t\\t\\t\\t\\t{t(label)}\\n\\t\\t\\t\\t\\t\\t\\t<Tag variant='featured'>{t('Premium')}</Tag>\\n\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t) : (\\n\\t\\t\\t\\t\\t\\tt(label)\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</>\\n\\t\\t\\t);\\n\\t\\t},\\n\\t\\t[isOptionDisabled, t],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<FieldGroup {...props}>\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<FieldLabel htmlFor={actionFieldId}>{t('Action')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tname={actionFieldName}\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\trender={({ field: { onChange, value, name, ref } }) => {\\n\\t\\t\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\t\\t\\t// TODO: Remove SelectLegacy once we have a new Select component\\n\\t\\t\\t\\t\\t\\t\\t\\t<SelectLegacy\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tref={ref}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tname={name}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tonChange={onChange}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tvalue={value}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tid={actionFieldId}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\toptions={actionOptions}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\trenderSelected={({ label, value }) => <Box flexGrow='1'>{renderOption(label, value)}</Box>}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\trenderItem={({ label, value, onMouseDown, ...props }) => (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Option\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{...props}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tonMouseDown={isOptionDisabled(value) ? (e) => e.preventDefault() : onMouseDown}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdisabled={isOptionDisabled(value)}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tlabel={renderOption(label, value)}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t{actionHint && <FieldHint>{t(actionHint)}</FieldHint>}\\n\\t\\t\\t</Field>\\n\\n\\t\\t\\t<ActionFormFields control={control} trigger={trigger} index={index} />\\n\\t\\t</FieldGroup>\\n\\t);\\n};\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"Box\",\"Field\",\"FieldGroup\",\"FieldHint\",\"FieldLabel\",\"FieldRow\",\"Option\",\"SelectLegacy\",\"Tag\",\"useUniqueId\",\"React\",\"useCallback\",\"useMemo\",\"Controller\",\"useWatch\",\"useTranslation\",\"useHasLicenseModule\",\"getActionFormFields\",\"module\",\"link\",\"default\",\"v\",\"export\",\"ActionForm\",\"ACTION_HINTS\",\"PREMIUM_ACTIONS\",\"_ref\",\"control\",\"trigger\",\"index\",\"props\",\"_excluded\",\"t\",\"actionFieldId\",\"actionFieldName\",\"concat\",\"actionFieldValue\",\"name\",\"hasLicense\",\"actionOptions\",\"ActionFormFields\",\"actionHint\",\"isOptionDisabled\",\"value\",\"includes\",\"renderOption\",\"label\",\"createElement\",\"Fragment\",\"justifyContent\",\"flexDirection\",\"display\",\"width\",\"variant\",\"htmlFor\",\"render\",\"_ref2\",\"field\",\"onChange\",\"ref\",\"id\",\"options\",\"renderSelected\",\"_ref3\",\"flexGrow\",\"renderItem\",\"_ref4\",\"onMouseDown\",\"_excluded2\",\"e\",\"preventDefault\",\"disabled\"],\"mappings\":\"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\"}"}