{"code":"function module(e,t,i){let a,l,n,o,d,r,u,c,k,p,s;i.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){a=e}},0),i.link(\"@rocket.chat/fuselage-hooks\",{useEffectEvent(e){l=e}},0),i.link(\"@rocket.chat/fuselage-ui-kit\",{UiKitContext(e){n=e}},1),i.link(\"@rocket.chat/gazzodown\",{MarkupInteractionContext(e){o=e}},2),i.link(\"react\",{default(e){d=e}},3),i.link(\"../../../lib/utils/detectEmoji\",{detectEmoji(e){r=e}},4),i.link(\"../../../lib/utils/preventSyntheticEvent\",{preventSyntheticEvent(e){u=e}},5),i.link(\"../../../uikit/hooks/useModalContextValue\",{useModalContextValue(e){c=e}},6),i.link(\"../../../uikit/hooks/useUiKitActionManager\",{useUiKitActionManager(e){k=e}},7),i.link(\"../../../uikit/hooks/useUiKitView\",{useUiKitView(e){p=e}},8),i.link(\"./ModalBlock\",{default(e){s=e}},9),i.exportDefault(e=>{let{initialView:t}=e,i=k(),{view:v,errors:w,values:m,updateValues:I,state:h}=p(t),C=c({view:v,errors:w,values:m,updateValues:I}),f=l(e=>{u(e),i.emitInteraction(v.appId,{type:\"viewSubmit\",payload:{view:a(a({},v),{},{state:h})},viewId:v.id})}),E=l(e=>{u(e),i.emitInteraction(v.appId,{type:\"viewClosed\",payload:{viewId:v.id,view:a(a({},v),{},{state:h}),isCleared:!1}})}),y=l(()=>{i.emitInteraction(v.appId,{type:\"viewClosed\",payload:{viewId:v.id,view:a(a({},v),{},{state:h}),isCleared:!0}})});return d.createElement(n.Provider,{value:C},d.createElement(o.Provider,{value:{detectEmoji:r}},d.createElement(s,{view:v,errors:w,appId:v.appId,onSubmit:f,onCancel:E,onClose:y})))})}","map":"{\"version\":3,\"sources\":[\"client/views/modal/uikit/UiKitModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useEffectEvent } from '@rocket.chat/fuselage-hooks';\\nimport { UiKitContext } from '@rocket.chat/fuselage-ui-kit';\\nimport { MarkupInteractionContext } from '@rocket.chat/gazzodown';\\nimport type * as UiKit from '@rocket.chat/ui-kit';\\nimport React from 'react';\\nimport type { FormEvent } from 'react';\\n\\nimport { detectEmoji } from '../../../lib/utils/detectEmoji';\\nimport { preventSyntheticEvent } from '../../../lib/utils/preventSyntheticEvent';\\nimport { useModalContextValue } from '../../../uikit/hooks/useModalContextValue';\\nimport { useUiKitActionManager } from '../../../uikit/hooks/useUiKitActionManager';\\nimport { useUiKitView } from '../../../uikit/hooks/useUiKitView';\\nimport ModalBlock from './ModalBlock';\\n\\ntype UiKitModalProps = {\\n\\tkey: UiKit.ModalView['id']; // force re-mount when viewId changes\\n\\tinitialView: UiKit.ModalView;\\n};\\n\\nconst UiKitModal = ({ initialView }: UiKitModalProps) => {\\n\\tconst actionManager = useUiKitActionManager();\\n\\tconst { view, errors, values, updateValues, state } = useUiKitView(initialView);\\n\\tconst contextValue = useModalContextValue({ view, errors, values, updateValues });\\n\\n\\tconst handleSubmit = useEffectEvent((e: FormEvent) => {\\n\\t\\tpreventSyntheticEvent(e);\\n\\t\\tvoid actionManager.emitInteraction(view.appId, {\\n\\t\\t\\ttype: 'viewSubmit',\\n\\t\\t\\tpayload: {\\n\\t\\t\\t\\tview: {\\n\\t\\t\\t\\t\\t...view,\\n\\t\\t\\t\\t\\tstate,\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t\\tviewId: view.id,\\n\\t\\t});\\n\\t});\\n\\n\\tconst handleCancel = useEffectEvent((e: FormEvent) => {\\n\\t\\tpreventSyntheticEvent(e);\\n\\t\\tvoid actionManager.emitInteraction(view.appId, {\\n\\t\\t\\ttype: 'viewClosed',\\n\\t\\t\\tpayload: {\\n\\t\\t\\t\\tviewId: view.id,\\n\\t\\t\\t\\tview: {\\n\\t\\t\\t\\t\\t...view,\\n\\t\\t\\t\\t\\tstate,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tisCleared: false,\\n\\t\\t\\t},\\n\\t\\t});\\n\\t});\\n\\n\\tconst handleClose = useEffectEvent(() => {\\n\\t\\tvoid actionManager.emitInteraction(view.appId, {\\n\\t\\t\\ttype: 'viewClosed',\\n\\t\\t\\tpayload: {\\n\\t\\t\\t\\tviewId: view.id,\\n\\t\\t\\t\\tview: {\\n\\t\\t\\t\\t\\t...view,\\n\\t\\t\\t\\t\\tstate,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tisCleared: true,\\n\\t\\t\\t},\\n\\t\\t});\\n\\t});\\n\\n\\treturn (\\n\\t\\t<UiKitContext.Provider value={contextValue}>\\n\\t\\t\\t<MarkupInteractionContext.Provider\\n\\t\\t\\t\\tvalue={{\\n\\t\\t\\t\\t\\tdetectEmoji,\\n\\t\\t\\t\\t}}\\n\\t\\t\\t>\\n\\t\\t\\t\\t<ModalBlock view={view} errors={errors} appId={view.appId} onSubmit={handleSubmit} onCancel={handleCancel} onClose={handleClose} />\\n\\t\\t\\t</MarkupInteractionContext.Provider>\\n\\t\\t</UiKitContext.Provider>\\n\\t);\\n};\\n\\nexport default UiKitModal;\\n\",null],\"names\":[\"_objectSpread\",\"useEffectEvent\",\"UiKitContext\",\"MarkupInteractionContext\",\"React\",\"detectEmoji\",\"preventSyntheticEvent\",\"useModalContextValue\",\"useUiKitActionManager\",\"useUiKitView\",\"ModalBlock\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"initialView\",\"actionManager\",\"view\",\"errors\",\"values\",\"updateValues\",\"state\",\"contextValue\",\"handleSubmit\",\"e\",\"emitInteraction\",\"appId\",\"type\",\"payload\",\"viewId\",\"id\",\"handleCancel\",\"isCleared\",\"handleClose\",\"createElement\",\"Provider\",\"value\",\"onSubmit\",\"onCancel\",\"onClose\"],\"mappings\":\"2BAAAA,EAAAC,EAA6DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAApDC,EAAgBC,IAAA,CAAA,uCAAoC,CAAAC,QAAAC,CAAA,EAAAd,EAAAc,CAAA,CAAA,EAAA,GAApDH,EAAgBC,IAAA,CAAM,8BAA8B,CAAAX,eAAAa,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,+BAAA,CAAAV,aAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yBAAA,CAAAT,yBAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iCAAA,CAAAP,YAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAAN,sBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,4CAAA,CAAAL,qBAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6CAAA,CAAAJ,sBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oCAAA,CAAAH,aAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,eAAA,CAAAC,QAAAC,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA7DH,EAAOI,aAAE,CAmBUC,IAAqC,GAApC,CAAEC,YAAAA,CAAAA,CAA8B,CAAAD,EAC7CE,EAAgBV,IAChB,CAAEW,KAAAA,CAAI,CAAEC,OAAAA,CAAM,CAAEC,OAAAA,CAAM,CAAEC,aAAAA,CAAY,CAAEC,MAAAA,CAAAA,CAAO,CAAGd,EAAaQ,GAC7DO,EAAejB,EAAqB,CAAEY,KAAAA,EAAMC,OAAAA,EAAQC,OAAAA,EAAQC,aAAAA,CAAY,GAExEG,EAAexB,EAAgByB,IACpCpB,EAAsBoB,GACjBR,EAAcS,eAAe,CAACR,EAAKS,KAAK,CAAE,CAC9CC,KAAM,aACNC,QAAS,CACRX,KAAInB,EAAAA,EAAA,CAAA,EACAmB,GAAI,CAAA,EAAA,CACPI,MAAAA,CAAK,IAGPQ,OAAQZ,EAAKa,EAAAA,EAEf,GAEMC,EAAehC,EAAgByB,IACpCpB,EAAsBoB,GACjBR,EAAcS,eAAe,CAACR,EAAKS,KAAK,CAAE,CAC9CC,KAAM,aACNC,QAAS,CACRC,OAAQZ,EAAKa,EAAE,CACfb,KAAInB,EAAAA,EAAA,CAAA,EACAmB,GAAI,CAAA,EAAA,CACPI,MAAAA,CAAK,GAENW,UAAW,CAAA,IAGd,GAEMC,EAAclC,EAAe,KAC7BiB,EAAcS,eAAe,CAACR,EAAKS,KAAK,CAAE,CAC9CC,KAAM,aACNC,QAAS,CACRC,OAAQZ,EAAKa,EAAE,CACfb,KAAInB,EAAAA,EAAA,CAAA,EACAmB,GAAI,CAAA,EAAA,CACPI,MAAAA,CAAK,GAENW,UAAW,CAAA,IAGd,GAEA,OACC9B,EAAAgC,aAAA,CAAClC,EAAamC,QAAQ,CAAA,CAACC,MAAOd,CAAa,EAC1CpB,EAAAgC,aAAA,CAACjC,EAAyBkC,QAAQ,CAAA,CACjCC,MAAO,CACNjC,YAAAA,EACC,EAEFD,EAAAgC,aAAA,CAAC1B,EAAU,CAACS,KAAMA,EAAMC,OAAQA,EAAQQ,MAAOT,EAAKS,KAAM,CAACW,SAAUd,EAAce,SAAUP,EAAcQ,QAASN,CAAY,IAIpI\"}"}