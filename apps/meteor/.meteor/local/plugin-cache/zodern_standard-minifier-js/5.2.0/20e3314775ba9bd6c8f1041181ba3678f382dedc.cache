{"code":"function module(e,n,t){var l,r,a,u,i,o,c,f,s,m,d,g,k,h,p,v;t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){l=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){r=e}},1),t.link(\"@rocket.chat/fuselage\",{TextInput:function(e){a=e},Chip:function(e){u=e},Button:function(e){i=e},FieldLabel:function(e){o=e},FieldRow:function(e){c=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){f=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){s=e},useTranslation:function(e){m=e}},2),t.link(\"react\",{default:function(e){d=e},useMemo:function(e){g=e},useState:function(e){k=e}},3),t.link(\"../../views/omnichannel/additionalForms\",{CurrentChatTags:function(e){h=e}},4),t.link(\"./Skeleton\",{FormSkeleton:function(e){p=e}},5),t.link(\"./hooks/useLivechatTags\",{useLivechatTags:function(e){v=e}},6),t.exportDefault(function(e){var n=e.tags,t=void 0===n?[]:n,E=e.handler,b=e.error,T=e.tagRequired,C=e.department,y=m(),x=v({department:C,viewAll:!C}),A=x.data,F=x.isInitialLoading,_=g(function(){return t.filter(function(e){return!(null!=A&&A.tags.find(function(n){return n.name===e}))})},[t,null==A?void 0:A.tags]),w=s(),L=k(\"\"),M=r(L,2),S=M[0],q=M[1],D=g(function(){return t.map(function(e){return{label:e,value:e}})},[t]),I=function(e){t&&E(t.filter(function(n){return n!==e}))},R=f(function(){if(t){if(!S||\"\"===S.trim()){w({type:\"error\",message:y(\"Enter_a_tag\")}),q(\"\");return}if(t.includes(S)){w({type:\"error\",message:y(\"Tag_already_exists\")});return}E([].concat(l(t),[S])),q(\"\")}});return F?d.createElement(p,null):d.createElement(d.Fragment,null,d.createElement(o,{required:T,mb:4},y(\"Tags\")),null!=A&&A.tags&&null!=A&&A.tags.length?d.createElement(c,null,d.createElement(h,{value:D,handler:function(e){E(e.map(function(e){return e.label}))},department:C,viewAll:!C})):d.createElement(d.Fragment,null,d.createElement(c,null,d.createElement(a,{error:b,value:S,onChange:function(e){return q(e.currentTarget.value)},flexGrow:1,placeholder:y(\"Enter_a_tag\")}),d.createElement(i,{disabled:!S,mis:8,title:y(\"Add\"),onClick:R},y(\"Add\")))),_.length>0&&d.createElement(c,{justifyContent:\"flex-start\"},null==_?void 0:_.map(function(e,n){return d.createElement(u,{key:n,onClick:function(){return I(e)},mie:8},e)})))})}","map":"{\"version\":3,\"sources\":[\"client/components/Omnichannel/Tags.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { TextInput, Chip, Button, FieldLabel, FieldRow } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ChangeEvent, ReactElement } from 'react';\\nimport React, { useMemo, useState } from 'react';\\n\\nimport { CurrentChatTags } from '../../views/omnichannel/additionalForms';\\nimport { FormSkeleton } from './Skeleton';\\nimport { useLivechatTags } from './hooks/useLivechatTags';\\n\\ntype TagsProps = {\\n\\ttags?: string[];\\n\\thandler: (value: string[]) => void;\\n\\terror?: string;\\n\\ttagRequired?: boolean;\\n\\tdepartment?: string;\\n};\\n\\nconst Tags = ({ tags = [], handler, error, tagRequired, department }: TagsProps): ReactElement => {\\n\\tconst t = useTranslation();\\n\\n\\tconst { data: tagsResult, isInitialLoading } = useLivechatTags({\\n\\t\\tdepartment,\\n\\t\\tviewAll: !department,\\n\\t});\\n\\n\\tconst customTags = useMemo(() => {\\n\\t\\treturn tags.filter((tag) => !tagsResult?.tags.find((rtag) => rtag.name === tag));\\n\\t}, [tags, tagsResult?.tags]);\\n\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst [tagValue, handleTagValue] = useState('');\\n\\n\\tconst paginatedTagValue = useMemo(() => tags.map((tag) => ({ label: tag, value: tag })), [tags]);\\n\\n\\tconst removeTag = (tagToRemove: string): void => {\\n\\t\\tif (!tags) return;\\n\\n\\t\\thandler(tags.filter((tag) => tag !== tagToRemove));\\n\\t};\\n\\n\\tconst handleTagTextSubmit = useMutableCallback(() => {\\n\\t\\tif (!tags) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (!tagValue || tagValue.trim() === '') {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: t('Enter_a_tag') });\\n\\t\\t\\thandleTagValue('');\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (tags.includes(tagValue)) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: t('Tag_already_exists') });\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\thandler([...tags, tagValue]);\\n\\t\\thandleTagValue('');\\n\\t});\\n\\n\\tif (isInitialLoading) {\\n\\t\\treturn <FormSkeleton />;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<FieldLabel required={tagRequired} mb={4}>\\n\\t\\t\\t\\t{t('Tags')}\\n\\t\\t\\t</FieldLabel>\\n\\n\\t\\t\\t{tagsResult?.tags && tagsResult?.tags.length ? (\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<CurrentChatTags\\n\\t\\t\\t\\t\\t\\tvalue={paginatedTagValue}\\n\\t\\t\\t\\t\\t\\thandler={(tags: { label: string; value: string }[]): void => {\\n\\t\\t\\t\\t\\t\\t\\thandler(tags.map((tag) => tag.label));\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\tdepartment={department}\\n\\t\\t\\t\\t\\t\\tviewAll={!department}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t) : (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<TextInput\\n\\t\\t\\t\\t\\t\\t\\terror={error}\\n\\t\\t\\t\\t\\t\\t\\tvalue={tagValue}\\n\\t\\t\\t\\t\\t\\t\\tonChange={({ currentTarget }: ChangeEvent<HTMLInputElement>): void => handleTagValue(currentTarget.value)}\\n\\t\\t\\t\\t\\t\\t\\tflexGrow={1}\\n\\t\\t\\t\\t\\t\\t\\tplaceholder={t('Enter_a_tag')}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t<Button disabled={!tagValue} mis={8} title={t('Add')} onClick={handleTagTextSubmit}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Add')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t</>\\n\\t\\t\\t)}\\n\\n\\t\\t\\t{customTags.length > 0 && (\\n\\t\\t\\t\\t<FieldRow justifyContent='flex-start'>\\n\\t\\t\\t\\t\\t{customTags?.map((tag, i) => (\\n\\t\\t\\t\\t\\t\\t<Chip key={i} onClick={(): void => removeTag(tag)} mie={8}>\\n\\t\\t\\t\\t\\t\\t\\t{tag}\\n\\t\\t\\t\\t\\t\\t</Chip>\\n\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t)}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default Tags;\\n\",null],\"names\":[\"_toConsumableArray\",\"_slicedToArray\",\"TextInput\",\"Chip\",\"Button\",\"FieldLabel\",\"FieldRow\",\"useMutableCallback\",\"useToastMessageDispatch\",\"useTranslation\",\"React\",\"useMemo\",\"useState\",\"CurrentChatTags\",\"FormSkeleton\",\"useLivechatTags\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_ref$tags\",\"tags\",\"handler\",\"error\",\"tagRequired\",\"department\",\"t\",\"_useLivechatTags\",\"viewAll\",\"tagsResult\",\"data\",\"isInitialLoading\",\"customTags\",\"filter\",\"tag\",\"find\",\"rtag\",\"name\",\"dispatchToastMessage\",\"_useState\",\"_useState2\",\"tagValue\",\"handleTagValue\",\"paginatedTagValue\",\"map\",\"label\",\"value\",\"removeTag\",\"tagToRemove\",\"handleTagTextSubmit\",\"trim\",\"type\",\"message\",\"includes\",\"concat\",\"createElement\",\"Fragment\",\"required\",\"mb\",\"length\",\"onChange\",\"_ref2\",\"currentTarget\",\"flexGrow\",\"placeholder\",\"disabled\",\"mis\",\"title\",\"onClick\",\"justifyContent\",\"i\",\"key\",\"mie\"],\"mappings\":\"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\"}"}