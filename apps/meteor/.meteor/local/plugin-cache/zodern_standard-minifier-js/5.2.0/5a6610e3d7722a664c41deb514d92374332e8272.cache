{"code":"function module(e,t,n){var r,a,c,u,o,i,s,l,f,d,m,h,k,p,E=[\"resolve\",\"reject\"];n.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){a=e}},1),n.link(\"@rocket.chat/fuselage\",{Box:function(e){c=e},Callout:function(e){u=e},Throbber:function(e){o=e}},0),n.link(\"@rocket.chat/layout\",{HeroLayout:function(e){i=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){s=e},useRouteParameter:function(e){l=e},useEndpoint:function(e){f=e}},2),n.link(\"react\",{default:function(e){d=e},useEffect:function(e){m=e}},3),n.link(\"react-i18next\",{useTranslation:function(e){h=e}},4),n.link(\"../../hooks/useAsyncState\",{AsyncStatePhase:function(e){k=e},useAsyncState:function(e){p=e}},5);var b=function(){var e=p(),t=e.resolve,n=e.reject,c=a(e,E),u=f(\"POST\",\"/v1/mailer.unsubscribe\"),o=l(\"_id\"),i=l(\"createdAt\"),d=s();return m(function(){o&&i&&r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.awrap(u({_id:o,createdAt:i}));case 3:t(!0),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),d({type:\"error\",message:e.t0}),n(e.t0 instanceof Error?e.t0:Error(String(e.t0)));case 10:case\"end\":return e.stop()}},null,null,[[0,6]],Promise)},[t,n,u,o,i,d]),c};n.exportDefault(function(){var e=b(),t=e.phase,n=e.error,r=h().t;return d.createElement(i,null,d.createElement(c,{color:\"default\",marginInline:\"auto\",marginBlock:16,maxWidth:800},t===k.LOADING&&d.createElement(o,{disabled:!0})||t===k.REJECTED&&d.createElement(u,{type:\"danger\",title:null==n?void 0:n.message})||t===k.RESOLVED&&d.createElement(u,{type:\"success\",title:r(\"You_have_successfully_unsubscribed\")})))})}","map":"{\"version\":3,\"sources\":[\"client/views/mailer/MailerUnsubscriptionPage.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Callout, Throbber } from '@rocket.chat/fuselage';\\nimport { HeroLayout } from '@rocket.chat/layout';\\nimport { useToastMessageDispatch, useRouteParameter, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport React, { useEffect } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport type { AsyncState } from '../../hooks/useAsyncState';\\nimport { AsyncStatePhase, useAsyncState } from '../../hooks/useAsyncState';\\n\\nconst useMailerUnsubscriptionState = (): AsyncState<boolean> => {\\n\\tconst { resolve, reject, ...unsubscribedState } = useAsyncState<boolean>();\\n\\n\\tconst unsubscribe = useEndpoint('POST', '/v1/mailer.unsubscribe');\\n\\tconst _id = useRouteParameter('_id');\\n\\tconst createdAt = useRouteParameter('createdAt');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tuseEffect(() => {\\n\\t\\tconst doUnsubscribe = async (_id: string, createdAt: string): Promise<void> => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tawait unsubscribe({ _id, createdAt });\\n\\t\\t\\t\\tresolve(true);\\n\\t\\t\\t} catch (error: unknown) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t\\treject(error instanceof Error ? error : new Error(String(error)));\\n\\t\\t\\t}\\n\\t\\t};\\n\\n\\t\\tif (!_id || !createdAt) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tdoUnsubscribe(_id, createdAt);\\n\\t}, [resolve, reject, unsubscribe, _id, createdAt, dispatchToastMessage]);\\n\\n\\treturn unsubscribedState;\\n};\\n\\nconst MailerUnsubscriptionPage = () => {\\n\\tconst { phase, error } = useMailerUnsubscriptionState();\\n\\n\\tconst { t } = useTranslation();\\n\\n\\treturn (\\n\\t\\t<HeroLayout>\\n\\t\\t\\t<Box color='default' marginInline='auto' marginBlock={16} maxWidth={800}>\\n\\t\\t\\t\\t{(phase === AsyncStatePhase.LOADING && <Throbber disabled />) ||\\n\\t\\t\\t\\t\\t(phase === AsyncStatePhase.REJECTED && <Callout type='danger' title={error?.message} />) ||\\n\\t\\t\\t\\t\\t(phase === AsyncStatePhase.RESOLVED && <Callout type='success' title={t('You_have_successfully_unsubscribed')} />)}\\n\\t\\t\\t</Box>\\n\\t\\t</HeroLayout>\\n\\t);\\n};\\n\\nexport default MailerUnsubscriptionPage;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_objectWithoutProperties\",\"Box\",\"Callout\",\"Throbber\",\"HeroLayout\",\"useToastMessageDispatch\",\"useRouteParameter\",\"useEndpoint\",\"React\",\"useEffect\",\"useTranslation\",\"AsyncStatePhase\",\"useAsyncState\",\"module\",\"link\",\"default\",\"v\",\"useMailerUnsubscriptionState\",\"_useAsyncState\",\"resolve\",\"reject\",\"unsubscribedState\",\"_excluded\",\"unsubscribe\",\"_id\",\"createdAt\",\"dispatchToastMessage\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"t0\",\"type\",\"message\",\"Error\",\"String\",\"stop\",\"Promise\",\"exportDefault\",\"_useMailerUnsubscript\",\"phase\",\"error\",\"t\",\"_useTranslation\",\"createElement\",\"color\",\"marginInline\",\"marginBlock\",\"maxWidth\",\"LOADING\",\"disabled\",\"REJECTED\",\"title\",\"RESOLVED\"],\"mappings\":\"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\"}"}