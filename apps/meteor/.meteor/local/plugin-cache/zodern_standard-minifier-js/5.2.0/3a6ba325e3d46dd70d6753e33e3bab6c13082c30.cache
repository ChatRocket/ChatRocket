{"code":"function module(t,e,n){var o;let c,i;n.link(\"meteor/oauth\",{OAuth(t){c=t}},0),n.link(\"../../settings/client\",{settings(t){i=t}},1),c.launchLogin=(o=c.launchLogin.bind(c),function(t){let e=i.get(\"Accounts_OAuth_Proxy_services\").replace(/\\s/g,\"\").split(\",\");if(e.includes(t.loginService)){var n;let e=null===(n=t.loginUrl.match(/(&redirect_uri=)([^&]+|$)/))||void 0===n?void 0:n[2];t.loginUrl=t.loginUrl.replace(/(&redirect_uri=)([^&]+|$)/,\"$1\".concat(encodeURIComponent(i.get(\"Accounts_OAuth_Proxy_host\")),\"/oauth_redirect\")),t.loginUrl=t.loginUrl.replace(/(&state=)([^&]+|$)/,\"$1\".concat(e,\"!$2\")),t.loginUrl=\"\".concat(i.get(\"Accounts_OAuth_Proxy_host\"),\"/redirect/\").concat(encodeURIComponent(t.loginUrl))}return o(t)})}","map":"{\"version\":3,\"sources\":[\"app/lib/client/OAuthProxy.ts\",\"<anon>\"],\"sourcesContent\":[\"import { OAuth } from 'meteor/oauth';\\n\\nimport { settings } from '../../settings/client';\\n\\nOAuth.launchLogin = ((func) =>\\n\\tfunction (options) {\\n\\t\\tconst proxy = settings.get('Accounts_OAuth_Proxy_services').replace(/\\\\s/g, '').split(',');\\n\\t\\tif (proxy.includes(options.loginService)) {\\n\\t\\t\\tconst redirectUri = options.loginUrl.match(/(&redirect_uri=)([^&]+|$)/)?.[2];\\n\\t\\t\\toptions.loginUrl = options.loginUrl.replace(\\n\\t\\t\\t\\t/(&redirect_uri=)([^&]+|$)/,\\n\\t\\t\\t\\t`$1${encodeURIComponent(settings.get('Accounts_OAuth_Proxy_host'))}/oauth_redirect`,\\n\\t\\t\\t);\\n\\t\\t\\toptions.loginUrl = options.loginUrl.replace(/(&state=)([^&]+|$)/, `$1${redirectUri}!$2`);\\n\\t\\t\\toptions.loginUrl = `${settings.get('Accounts_OAuth_Proxy_host')}/redirect/${encodeURIComponent(options.loginUrl)}`;\\n\\t\\t}\\n\\n\\t\\treturn func(options);\\n\\t})(OAuth.launchLogin.bind(OAuth));\\n\",null],\"names\":[\"func\",\"OAuth\",\"settings\",\"module\",\"link\",\"v\",\"launchLogin\",\"bind\",\"options\",\"proxy\",\"get\",\"replace\",\"split\",\"includes\",\"loginService\",\"_options$loginUrl$mat\",\"redirectUri\",\"loginUrl\",\"match\",\"concat\",\"encodeURIComponent\"],\"mappings\":\"2BAIsBA,MAJtBC,EAAqCC,EAA5BC,EAAOC,IAAA,CAAM,eAAe,CAAAH,MAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wBAAA,CAAAF,SAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAIrCJ,EAAMK,WAAW,EAAKN,EAclBC,EAAMK,WAAW,CAACC,IAAI,CAACN,GAb1B,SAAUO,CAAO,EAChB,IAAMC,EAAQP,EAASQ,GAAG,CAAC,iCAAiCC,OAAO,CAAC,MAAO,IAAIC,KAAK,CAAC,KACrF,GAAIH,EAAMI,QAAQ,CAACL,EAAQM,YAAY,EAAG,CAAA,IAAAC,EACzC,IAAMC,EAAW,AAAsD,OAAtDD,CAAAA,EAAGP,EAAQS,QAAQ,CAACC,KAAK,CAAC,4BAA2B,GAACH,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAnDA,CAAA,CAAsD,EAAE,AAC5EP,CAAAA,EAAQS,QAAQ,CAAGT,EAAQS,QAAQ,CAACN,OAAO,CAC1C,4BAA2B,KAAAQ,MAAA,CACtBC,mBAAmBlB,EAASQ,GAAG,CAAC,8BAA6B,oBAEnEF,EAAQS,QAAQ,CAAGT,EAAQS,QAAQ,CAACN,OAAO,CAAC,qBAAoB,KAAAQ,MAAA,CAAOH,EAAW,QAClFR,EAAQS,QAAQ,CAAA,GAAAE,MAAA,CAAMjB,EAASQ,GAAG,CAAC,6BAA4B,cAAAS,MAAA,CAAaC,mBAAmBZ,EAAQS,QAAQ,EAChH,CAEA,OAAOjB,EAAKQ,EACb\"}"}