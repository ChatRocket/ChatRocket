{"code":"function module(e,t,n){let s,a,u,i;n.export({useUsersNameChanged:()=>m}),n.link(\"@rocket.chat/ui-contexts\",{useStream(e){s=e}},0),n.link(\"react\",{useEffect(e){a=e}},1),n.link(\"../../../../../app/models/client\",{Messages(e){u=e},Subscriptions(e){i=e}},2);let m=()=>{let e=s(\"notify-logged\");a(()=>e(\"Users:NameChanged\",e=>{let{_id:t,name:n,username:s}=e;u.update({\"u._id\":t},{$set:{\"u.username\":s,\"u.name\":n}},{multi:!0}),u.update({\"editedBy._id\":t},{$set:{\"editedBy.username\":s}},{multi:!0}),u.update({mentions:{$elemMatch:{_id:t}}},{$set:{\"mentions.$.username\":s,\"mentions.$.name\":n}},{multi:!0}),i.update({name:s,t:\"d\"},{$set:{fname:n}})}),[e])}}","map":"{\"version\":3,\"sources\":[\"client/views/room/providers/hooks/useUsersNameChanged.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useStream } from '@rocket.chat/ui-contexts';\\nimport { useEffect } from 'react';\\n\\nimport { Messages, Subscriptions } from '../../../../../app/models/client';\\n\\nexport const useUsersNameChanged = () => {\\n\\tconst notify = useStream('notify-logged');\\n\\tuseEffect(() => {\\n\\t\\treturn notify('Users:NameChanged', ({ _id, name, username }) => {\\n\\t\\t\\tMessages.update(\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t'u._id': _id,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t$set: {\\n\\t\\t\\t\\t\\t\\t'u.username': username,\\n\\t\\t\\t\\t\\t\\t'u.name': name,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tmulti: true,\\n\\t\\t\\t\\t},\\n\\t\\t\\t);\\n\\n\\t\\t\\tMessages.update(\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t'editedBy._id': _id,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t$set: {\\n\\t\\t\\t\\t\\t\\t'editedBy.username': username,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tmulti: true,\\n\\t\\t\\t\\t},\\n\\t\\t\\t);\\n\\n\\t\\t\\tMessages.update(\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tmentions: {\\n\\t\\t\\t\\t\\t\\t$elemMatch: { _id },\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t$set: {\\n\\t\\t\\t\\t\\t\\t'mentions.$.username': username,\\n\\t\\t\\t\\t\\t\\t'mentions.$.name': name,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tmulti: true,\\n\\t\\t\\t\\t},\\n\\t\\t\\t);\\n\\n\\t\\t\\tSubscriptions.update(\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tname: username,\\n\\t\\t\\t\\t\\tt: 'd',\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t$set: {\\n\\t\\t\\t\\t\\t\\tfname: name,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t);\\n\\t\\t});\\n\\t}, [notify]);\\n};\\n\",null],\"names\":[\"useStream\",\"useEffect\",\"Messages\",\"Subscriptions\",\"module\",\"export\",\"useUsersNameChanged\",\"link\",\"v\",\"notify\",\"_ref\",\"_id\",\"name\",\"username\",\"update\",\"$set\",\"multi\",\"mentions\",\"$elemMatch\",\"t\",\"fname\"],\"mappings\":\"2BAAqDA,EAAAC,EAAAC,EAAAC,EAArDC,EAAOC,MAAE,CAAA,CAAAC,oBAAiBA,IAAAA,CAA2B,GAAAF,EAAAG,IAAA,CAAA,2BAAA,CAAAP,UAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAN,UAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,mCAAA,CAAAL,SAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,cAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAK9C,IAAMF,EAAsBA,KAClC,IAAMG,EAAST,EAAU,iBACzBC,EAAU,IACFQ,EAAO,oBAAqBC,IAA4B,GAA3B,CAAEC,IAAAA,CAAG,CAAEC,KAAAA,CAAI,CAAEC,SAAAA,CAAAA,CAAU,CAAAH,EAC1DR,EAASY,MAAM,CACd,CACC,QAASH,GAEV,CACCI,KAAM,CACL,aAAcF,EACd,SAAUD,IAGZ,CACCI,MAAO,CAAA,IAITd,EAASY,MAAM,CACd,CACC,eAAgBH,GAEjB,CACCI,KAAM,CACL,oBAAqBF,IAGvB,CACCG,MAAO,CAAA,IAITd,EAASY,MAAM,CACd,CACCG,SAAU,CACTC,WAAY,CAAEP,IAAAA,CAAG,IAGnB,CACCI,KAAM,CACL,sBAAuBF,EACvB,kBAAmBD,IAGrB,CACCI,MAAO,CAAA,IAITb,EAAcW,MAAM,CACnB,CACCF,KAAMC,EACNM,EAAG,KAEJ,CACCJ,KAAM,CACLK,MAAOR,IAIX,GACE,CAACH,EAAO,CACZ\"}"}