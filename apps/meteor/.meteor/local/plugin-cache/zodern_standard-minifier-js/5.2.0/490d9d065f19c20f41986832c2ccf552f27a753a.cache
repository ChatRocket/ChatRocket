{"code":"function module(e,n,i){var t,u,a,r,c,o,l;i.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){t=e}},0),i.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){u=e}},1),i.link(\"react\",{useEffect:function(e){a=e},useRef:function(e){r=e}},0),i.link(\"react-i18next\",{useTranslation:function(e){c=e}},1),i.link(\"../../../lib/utils/exhaustiveCheck\",{exhaustiveCheck:function(e){o=e}},2),i.link(\"../../uikit/hooks/useUiKitActionManager\",{useUiKitActionManager:function(e){l=e}},3),i.exportDefault(function(e){var n=e.dictionary,i=void 0===n?{}:n,s=e.surface,d=e.view,f=c().i18n;a(function(){if(i)for(var e=0,n=Object.entries(i);e<n.length;e++){var t=n[e],a=u(t,2),r=a[0],c=a[1];f.addResources(r,\"app-cloud-announcements-core\",c)}},[f,i]);var p=l(),v=r(t(t({},d),{},{appId:d.appId||\"cloud-announcements-core\"}));return v.current=t(t({},d),{},{appId:d.appId||\"cloud-announcements-core\"}),a(function(){switch(s){case\"modal\":var e=v.current;return p.openView(\"modal\",e),function(){p.disposeView(e.id)};case\"banner\":var n=v.current;return p.openView(\"banner\",t({},n)),function(){p.disposeView(n.viewId)};default:o(s)}},[p,s]),null})}","map":"{\"version\":3,\"sources\":[\"client/views/cloud/CloudAnnouncementHandler.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IBanner } from '@rocket.chat/core-typings';\\nimport type * as UiKit from '@rocket.chat/ui-kit';\\nimport { useEffect, useRef } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { exhaustiveCheck } from '../../../lib/utils/exhaustiveCheck';\\nimport { useUiKitActionManager } from '../../uikit/hooks/useUiKitActionManager';\\n\\ntype CloudAnnouncementHandlerProps = Pick<IBanner, 'dictionary' | 'surface' | 'view'>;\\n\\nconst CloudAnnouncementHandler = ({ dictionary = {}, surface, view }: CloudAnnouncementHandlerProps) => {\\n\\tconst { i18n } = useTranslation();\\n\\n\\tuseEffect(() => {\\n\\t\\tconst appNs = `app-cloud-announcements-core`;\\n\\t\\tif (!dictionary) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tfor (const [language, translations] of Object.entries(dictionary)) {\\n\\t\\t\\ti18n.addResources(language, appNs, translations);\\n\\t\\t}\\n\\t}, [i18n, dictionary]);\\n\\n\\tconst actionManager = useUiKitActionManager();\\n\\n\\tconst viewRef = useRef({ ...view, appId: view.appId || 'cloud-announcements-core' });\\n\\tviewRef.current = { ...view, appId: view.appId || 'cloud-announcements-core' };\\n\\n\\tuseEffect(() => {\\n\\t\\tswitch (surface) {\\n\\t\\t\\tcase 'modal': {\\n\\t\\t\\t\\t// TODO fixme\\n\\t\\t\\t\\tconst modalView = viewRef.current as unknown as UiKit.ModalView;\\n\\n\\t\\t\\t\\tactionManager.openView('modal', modalView);\\n\\n\\t\\t\\t\\treturn () => {\\n\\t\\t\\t\\t\\tactionManager.disposeView(modalView.id);\\n\\t\\t\\t\\t};\\n\\t\\t\\t}\\n\\n\\t\\t\\tcase 'banner': {\\n\\t\\t\\t\\tconst bannerView = viewRef.current as UiKit.BannerView;\\n\\n\\t\\t\\t\\tactionManager.openView('banner', { ...bannerView });\\n\\n\\t\\t\\t\\treturn () => {\\n\\t\\t\\t\\t\\tactionManager.disposeView(bannerView.viewId);\\n\\t\\t\\t\\t};\\n\\t\\t\\t}\\n\\n\\t\\t\\tdefault:\\n\\t\\t\\t\\texhaustiveCheck(surface);\\n\\t\\t}\\n\\t}, [actionManager, surface]);\\n\\n\\treturn null;\\n};\\n\\nexport default CloudAnnouncementHandler;\\n\",null],\"names\":[\"_objectSpread\",\"_slicedToArray\",\"useEffect\",\"useRef\",\"useTranslation\",\"exhaustiveCheck\",\"useUiKitActionManager\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_ref$dictionary\",\"dictionary\",\"surface\",\"view\",\"i18n\",\"_useTranslation\",\"_i\",\"_Object$entries\",\"Object\",\"entries\",\"length\",\"_ref2\",\"_ref3\",\"language\",\"translations\",\"addResources\",\"actionManager\",\"viewRef\",\"appId\",\"current\",\"modalView\",\"openView\",\"disposeView\",\"id\",\"bannerView\",\"viewId\"],\"mappings\":\"uBAUA,IARAA,EAA0CC,EAA1CC,EAASC,EAAiCC,EAAAC,EAAAC,EAAxBC,EAAEC,IAAQ,CAAA,uCAAc,CAAAC,QAAA,SAAAC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAtBH,EAAQC,IAAA,CAAA,QAAa,CAACN,UAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,OAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAJ,eAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qCAAA,CAAAH,gBAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0CAAA,CAAAF,sBAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA1CH,EAAOI,aAAa,CAQa,SAAAC,CAAA,EAAsE,IAAAC,EAAAD,EAAnEE,UAAU,CAAVA,EAAUD,AAAA,KAAA,IAAAA,EAAG,CAAA,EAAEA,EAAEE,EAAOH,EAAPG,OAAO,CAAEC,EAAIJ,EAAJI,IAAI,CACzDC,EAAIC,AAAKd,IAATa,IAAI,CAEZf,EAAU,WAET,GAAKY,EAIL,IAAA,IAAAK,EAAA,EAAAC,EAAuCC,OAAOC,OAAO,CAACR,GAAWK,EAAAC,EAAAG,MAAA,CAAAJ,IAAE,CAAA,IAAAK,EAAAJ,CAAA,CAAAD,EAAA,CAAAM,EAAAxB,EAAAuB,EAAA,GAAvDE,EAAQD,CAAA,CAAA,EAAA,CAAEE,EAAYF,CAAA,CAAA,EAAA,CACjCR,EAAKW,YAAY,CAACF,EANR,+BAMyBC,EACpC,CACD,EAAG,CAACV,EAAMH,EAAW,EAErB,IAAMe,EAAgBvB,IAEhBwB,EAAU3B,EAAMH,EAAAA,EAAA,CAAA,EAAMgB,GAAI,CAAA,EAAA,CAAEe,MAAOf,EAAKe,KAAK,EAAI,0BAA0B,IA+BjF,OA9BAD,EAAQE,OAAO,CAAAhC,EAAAA,EAAA,CAAA,EAAQgB,GAAI,CAAA,EAAA,CAAEe,MAAOf,EAAKe,KAAK,EAAI,0BAA0B,GAE5E7B,EAAU,WACT,OAAQa,GACP,IAAK,QAEJ,IAAMkB,EAAYH,EAAQE,OAAqC,CAI/D,OAFAH,EAAcK,QAAQ,CAAC,QAASD,GAEzB,WACNJ,EAAcM,WAAW,CAACF,EAAUG,EAAE,CACvC,CAGD,KAAK,SACJ,IAAMC,EAAaP,EAAQE,OAA2B,CAItD,OAFAH,EAAcK,QAAQ,CAAC,SAAQlC,EAAA,CAAA,EAAOqC,IAE/B,WACNR,EAAcM,WAAW,CAACE,EAAWC,MAAM,CAC5C,CAGD,SACCjC,EAAgBU,EAClB,CACD,EAAG,CAACc,EAAed,EAAQ,EAEpB,IACR\"}"}