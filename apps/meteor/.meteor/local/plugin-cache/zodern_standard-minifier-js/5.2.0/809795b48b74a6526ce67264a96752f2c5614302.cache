{"code":"function module(n,e,o){var t,i,c,l,u,a,f,r,m,d,s,C,p,k,E,v,V,h,P;o.link(\"@rocket.chat/fuselage\",{Skeleton:function(n){t=n}},0),o.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(n){i=n}},1),o.link(\"@rocket.chat/ui-video-conf\",{VideoConfPopup:function(n){c=n},VideoConfPopupContent:function(n){l=n},VideoConfPopupControllers:function(n){u=n},VideoConfController:function(n){a=n},useVideoConfControllers:function(n){f=n},VideoConfButton:function(n){r=n},VideoConfPopupFooter:function(n){m=n},VideoConfPopupFooterButtons:function(n){d=n},VideoConfPopupTitle:function(n){s=n},VideoConfPopupHeader:function(n){C=n}},2),o.link(\"react\",{default:function(n){p=n},useMemo:function(n){k=n}},3),o.link(\"react-i18next\",{useTranslation:function(n){E=n}},4),o.link(\"../../../../../../contexts/VideoConfContext\",{useVideoConfSetPreferences:function(n){v=n}},5),o.link(\"../../../../../../hooks/useAsyncState\",{AsyncStatePhase:function(n){V=n}},6),o.link(\"../../../../../../hooks/useEndpointData\",{useEndpointData:function(n){h=n}},7),o.link(\"./VideoConfPopupRoomInfo\",{default:function(n){P=n}},8),o.exportDefault(function(n){var e,o,g=n.id,_=n.room,M=n.position,D=n.onClose,x=n.onMute,y=n.onConfirm,S=E().t,b=f(),A=b.controllersConfig,I=b.handleToggleMic,T=b.handleToggleCam,B=v(),F=k(function(){return{callId:g}},[g]),L=h(\"/v1/video-conference.info\",{params:F}),O=L.phase,R=L.value,G=!!(null==R?void 0:null===(e=R.capabilities)||void 0===e?void 0:e.mic),H=!!(null==R?void 0:null===(o=R.capabilities)||void 0===o?void 0:o.cam),N=i(function(){B(A),y()});return p.createElement(c,{position:M},p.createElement(C,null,p.createElement(s,{text:S(\"Incoming_call_from\")}),O===V.LOADING&&p.createElement(t,null),O===V.RESOLVED&&(G||H)&&p.createElement(u,null,H&&p.createElement(a,{active:A.cam,title:S(A.cam?\"Cam_on\":\"Cam_off\"),icon:A.cam?\"video\":\"video-off\",onClick:T}),G&&p.createElement(a,{active:A.mic,title:S(A.mic?\"Mic_on\":\"Mic_off\"),icon:A.mic?\"mic\":\"mic-off\",onClick:I}))),p.createElement(l,null,p.createElement(P,{room:_})),p.createElement(m,null,p.createElement(d,null,p.createElement(r,{primary:!0,onClick:N},S(\"Accept\")),D&&p.createElement(r,{danger:!0,secondary:!0,onClick:function(){return D(g)}},S(\"Decline\")),p.createElement(a,{small:!1,secondary:!0,title:S(\"Mute_and_dismiss\"),icon:\"cross\",onClick:function(){return x(g)}}))))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/VideoConference/VideoConfPopups/VideoConfPopup/IncomingPopup.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { Skeleton } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport {\\n\\tVideoConfPopup,\\n\\tVideoConfPopupContent,\\n\\tVideoConfPopupControllers,\\n\\tVideoConfController,\\n\\tuseVideoConfControllers,\\n\\tVideoConfButton,\\n\\tVideoConfPopupFooter,\\n\\tVideoConfPopupFooterButtons,\\n\\tVideoConfPopupTitle,\\n\\tVideoConfPopupHeader,\\n} from '@rocket.chat/ui-video-conf';\\nimport type { ReactElement } from 'react';\\nimport React, { useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useVideoConfSetPreferences } from '../../../../../../contexts/VideoConfContext';\\nimport { AsyncStatePhase } from '../../../../../../hooks/useAsyncState';\\nimport { useEndpointData } from '../../../../../../hooks/useEndpointData';\\nimport VideoConfPopupRoomInfo from './VideoConfPopupRoomInfo';\\n\\ntype IncomingPopupProps = {\\n\\tid: string;\\n\\troom: IRoom;\\n\\tposition: number;\\n\\tonClose: (id: string) => void;\\n\\tonMute: (id: string) => void;\\n\\tonConfirm: () => void;\\n};\\n\\nconst IncomingPopup = ({ id, room, position, onClose, onMute, onConfirm }: IncomingPopupProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst { controllersConfig, handleToggleMic, handleToggleCam } = useVideoConfControllers();\\n\\tconst setPreferences = useVideoConfSetPreferences();\\n\\n\\tconst params = useMemo(() => ({ callId: id }), [id]);\\n\\tconst { phase, value } = useEndpointData('/v1/video-conference.info', { params });\\n\\tconst showMic = Boolean(value?.capabilities?.mic);\\n\\tconst showCam = Boolean(value?.capabilities?.cam);\\n\\n\\tconst handleJoinCall = useMutableCallback(() => {\\n\\t\\tsetPreferences(controllersConfig);\\n\\t\\tonConfirm();\\n\\t});\\n\\n\\treturn (\\n\\t\\t<VideoConfPopup position={position}>\\n\\t\\t\\t<VideoConfPopupHeader>\\n\\t\\t\\t\\t<VideoConfPopupTitle text={t('Incoming_call_from')} />\\n\\t\\t\\t\\t{phase === AsyncStatePhase.LOADING && <Skeleton />}\\n\\t\\t\\t\\t{phase === AsyncStatePhase.RESOLVED && (showMic || showCam) && (\\n\\t\\t\\t\\t\\t<VideoConfPopupControllers>\\n\\t\\t\\t\\t\\t\\t{showCam && (\\n\\t\\t\\t\\t\\t\\t\\t<VideoConfController\\n\\t\\t\\t\\t\\t\\t\\t\\tactive={controllersConfig.cam}\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle={controllersConfig.cam ? t('Cam_on') : t('Cam_off')}\\n\\t\\t\\t\\t\\t\\t\\t\\ticon={controllersConfig.cam ? 'video' : 'video-off'}\\n\\t\\t\\t\\t\\t\\t\\t\\tonClick={handleToggleCam}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t{showMic && (\\n\\t\\t\\t\\t\\t\\t\\t<VideoConfController\\n\\t\\t\\t\\t\\t\\t\\t\\tactive={controllersConfig.mic}\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle={controllersConfig.mic ? t('Mic_on') : t('Mic_off')}\\n\\t\\t\\t\\t\\t\\t\\t\\ticon={controllersConfig.mic ? 'mic' : 'mic-off'}\\n\\t\\t\\t\\t\\t\\t\\t\\tonClick={handleToggleMic}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</VideoConfPopupControllers>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</VideoConfPopupHeader>\\n\\t\\t\\t<VideoConfPopupContent>\\n\\t\\t\\t\\t<VideoConfPopupRoomInfo room={room} />\\n\\t\\t\\t</VideoConfPopupContent>\\n\\t\\t\\t<VideoConfPopupFooter>\\n\\t\\t\\t\\t<VideoConfPopupFooterButtons>\\n\\t\\t\\t\\t\\t<VideoConfButton primary onClick={handleJoinCall}>\\n\\t\\t\\t\\t\\t\\t{t('Accept')}\\n\\t\\t\\t\\t\\t</VideoConfButton>\\n\\t\\t\\t\\t\\t{onClose && (\\n\\t\\t\\t\\t\\t\\t<VideoConfButton danger secondary onClick={(): void => onClose(id)}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Decline')}\\n\\t\\t\\t\\t\\t\\t</VideoConfButton>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t<VideoConfController small={false} secondary title={t('Mute_and_dismiss')} icon='cross' onClick={(): void => onMute(id)} />\\n\\t\\t\\t\\t</VideoConfPopupFooterButtons>\\n\\t\\t\\t</VideoConfPopupFooter>\\n\\t\\t</VideoConfPopup>\\n\\t);\\n};\\n\\nexport default IncomingPopup;\\n\",null],\"names\":[\"Skeleton\",\"useMutableCallback\",\"VideoConfPopup\",\"VideoConfPopupContent\",\"VideoConfPopupControllers\",\"VideoConfController\",\"useVideoConfControllers\",\"VideoConfButton\",\"VideoConfPopupFooter\",\"VideoConfPopupFooterButtons\",\"VideoConfPopupTitle\",\"VideoConfPopupHeader\",\"React\",\"useMemo\",\"useTranslation\",\"useVideoConfSetPreferences\",\"AsyncStatePhase\",\"useEndpointData\",\"VideoConfPopupRoomInfo\",\"module\",\"link\",\"v\",\"exportDefault\",\"_ref\",\"_value$capabilities\",\"_value$capabilities2\",\"id\",\"room\",\"position\",\"onClose\",\"onMute\",\"onConfirm\",\"t\",\"_useTranslation\",\"_useVideoConfControll\",\"controllersConfig\",\"handleToggleMic\",\"handleToggleCam\",\"setPreferences\",\"params\",\"callId\",\"_useEndpointData\",\"phase\",\"value\",\"showMic\",\"Boolean\",\"capabilities\",\"mic\",\"showCam\",\"cam\",\"handleJoinCall\",\"createElement\",\"text\",\"LOADING\",\"RESOLVED\",\"active\",\"title\",\"icon\",\"onClick\",\"primary\",\"danger\",\"secondary\",\"small\"],\"mappings\":\"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\"}"}