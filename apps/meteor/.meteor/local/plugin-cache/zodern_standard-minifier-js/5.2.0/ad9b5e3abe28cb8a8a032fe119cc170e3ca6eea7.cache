{"code":"function module(t,e,s){let i,r,a,n;s.link(\"meteor/meteor\",{Meteor(t){i=t}},0),s.link(\"meteor/tracker\",{Tracker(t){r=t}},1),s.link(\"../../custom-oauth/client/CustomOAuth\",{CustomOAuth(t){a=t}},2),s.link(\"../../settings/client\",{settings(t){n=t}},3);let u={serverURL:\"https://gitlab.com\",identityPath:\"/api/v4/user\",scope:\"read_user\",mergeUsers:!1,addAutopublishFields:{forLoggedInUser:[\"services.gitlab\"],forOtherUsers:[\"services.gitlab.username\"]},accessTokenParam:\"access_token\"},o=new a(\"gitlab\",u);i.startup(()=>{r.autorun(()=>{let t=!1;n.get(\"API_Gitlab_URL\")&&(u.serverURL=n.get(\"API_Gitlab_URL\").trim().replace(/\\/*$/,\"\"),t=!0),n.get(\"Accounts_OAuth_Gitlab_identity_path\")&&(u.identityPath=n.get(\"Accounts_OAuth_Gitlab_identity_path\").trim()||u.identityPath,t=!0),n.get(\"Accounts_OAuth_Gitlab_merge_users\")&&(u.mergeUsers=!0,t=!0),t&&o.configure(u)})})}","map":"{\"version\":3,\"sources\":[\"app/gitlab/client/lib.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { OauthConfig } from '@rocket.chat/core-typings';\\nimport { Meteor } from 'meteor/meteor';\\nimport { Tracker } from 'meteor/tracker';\\n\\nimport { CustomOAuth } from '../../custom-oauth/client/CustomOAuth';\\nimport { settings } from '../../settings/client';\\n\\nconst config: OauthConfig = {\\n\\tserverURL: 'https://gitlab.com',\\n\\tidentityPath: '/api/v4/user',\\n\\tscope: 'read_user',\\n\\tmergeUsers: false,\\n\\taddAutopublishFields: {\\n\\t\\tforLoggedInUser: ['services.gitlab'],\\n\\t\\tforOtherUsers: ['services.gitlab.username'],\\n\\t},\\n\\taccessTokenParam: 'access_token',\\n};\\n\\nconst Gitlab = new CustomOAuth('gitlab', config);\\n\\nMeteor.startup(() => {\\n\\tTracker.autorun(() => {\\n\\t\\tlet anyChange = false;\\n\\t\\tif (settings.get('API_Gitlab_URL')) {\\n\\t\\t\\tconfig.serverURL = settings.get('API_Gitlab_URL').trim().replace(/\\\\/*$/, '');\\n\\t\\t\\tanyChange = true;\\n\\t\\t}\\n\\n\\t\\tif (settings.get('Accounts_OAuth_Gitlab_identity_path')) {\\n\\t\\t\\tconfig.identityPath = settings.get('Accounts_OAuth_Gitlab_identity_path').trim() || config.identityPath;\\n\\t\\t\\tanyChange = true;\\n\\t\\t}\\n\\n\\t\\tif (settings.get('Accounts_OAuth_Gitlab_merge_users')) {\\n\\t\\t\\tconfig.mergeUsers = true;\\n\\t\\t\\tanyChange = true;\\n\\t\\t}\\n\\n\\t\\tif (anyChange) {\\n\\t\\t\\tGitlab.configure(config);\\n\\t\\t}\\n\\t});\\n});\\n\",null],\"names\":[\"Meteor\",\"Tracker\",\"CustomOAuth\",\"settings\",\"module\",\"link\",\"v\",\"config\",\"serverURL\",\"identityPath\",\"scope\",\"mergeUsers\",\"addAutopublishFields\",\"forLoggedInUser\",\"forOtherUsers\",\"accessTokenParam\",\"Gitlab\",\"startup\",\"autorun\",\"anyChange\",\"get\",\"trim\",\"replace\",\"configure\"],\"mappings\":\"2BACAA,EAAuCC,EAAAC,EAAAC,EAA9BC,EAAQC,IAAA,CAAM,gBAAgB,CAAAL,OAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iBAAA,CAAAJ,QAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wCAAA,CAAAH,YAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wBAAA,CAAAF,SAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAMvC,IAAMC,EAAsB,CAC3BC,UAAW,qBACXC,aAAc,eACdC,MAAO,YACPC,WAAY,CAAA,EACZC,qBAAsB,CACrBC,gBAAiB,CAAC,kBAAkB,CACpCC,cAAe,CAAC,2BAA0B,EAE3CC,iBAAkB,gBAGbC,EAAS,IAAId,EAAY,SAAUK,GAEzCP,EAAOiB,OAAO,CAAC,KACdhB,EAAQiB,OAAO,CAAC,KACf,IAAIC,EAAY,CAAA,EACZhB,EAASiB,GAAG,CAAC,oBAChBb,EAAOC,SAAS,CAAGL,EAASiB,GAAG,CAAC,kBAAkBC,IAAI,GAAGC,OAAO,CAAC,OAAQ,IACzEH,EAAY,CAAA,GAGThB,EAASiB,GAAG,CAAC,yCAChBb,EAAOE,YAAY,CAAGN,EAASiB,GAAG,CAAC,uCAAuCC,IAAI,IAAMd,EAAOE,YAAY,CACvGU,EAAY,CAAA,GAGThB,EAASiB,GAAG,CAAC,uCAChBb,EAAOI,UAAU,CAAG,CAAA,EACpBQ,EAAY,CAAA,GAGTA,GACHH,EAAOO,SAAS,CAAChB,EAEnB,EACD\"}"}