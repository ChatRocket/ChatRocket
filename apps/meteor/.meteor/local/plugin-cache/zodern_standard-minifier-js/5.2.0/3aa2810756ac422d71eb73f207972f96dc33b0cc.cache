{"code":"function module(e,n,t){var c,l,r,i,o,u,a,s,f,m,k,d,p,E,g,C,b,h,v,x,M,S,A=[\"onChange\"];t.link(\"@babel/runtime/helpers/extends\",{default:function(e){c=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){l=e}},1),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){r=e}},2),t.link(\"@rocket.chat/fuselage\",{Button:function(e){i=e},PositionAnimated:function(e){o=e},Tile:function(e){u=e}},0),t.link(\"@rocket.chat/ui-composer\",{MessageComposerAction:function(e){a=e},MessageComposerToolbarActions:function(e){s=e},MessageComposer:function(e){f=e},MessageComposerInput:function(e){m=e},MessageComposerToolbar:function(e){k=e},MessageComposerActionsDivider:function(e){d=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useUserPreference:function(e){p=e}},2),t.link(\"react\",{default:function(e){E=e},memo:function(e){g=e},useCallback:function(e){C=e},useRef:function(e){b=e},useState:function(e){h=e}},3),t.link(\"react-i18next\",{useTranslation:function(e){v=e}},4),t.link(\"../../../../components/Backdrop\",{Backdrop:function(e){x=e}},5),t.link(\"../../../../contexts/EmojiPickerContext\",{useEmojiPicker:function(e){M=e}},6),t.link(\"./InsertPlaceholderDropdown\",{default:function(e){S=e}},7),t.exportDefault(g(function(e){var n=e.onChange,t=r(e,A),g=v().t,P=p(\"useEmojis\"),R=b(null),j=b(null),_=h(!1),T=l(_,2),w=T[0],B=T[1],I=M().open,y=function(e){return C(function(){if(null!=R&&R.current){var t=R.current.value,c=R.current.selectionStart,l=R.current.selectionEnd;\"[]()\"===e?c!==l&&(R.current.value=t.slice(0,c)+\"[\"+t.slice(c,l)+\"]()\"+t.slice(l)):R.current.value=\"\"+t.slice(0,c)+e+t.slice(c,l)+e+t.slice(l),R.current.focus(),\"[]()\"===e?c===l?R.current.setSelectionRange(c,l):R.current.setSelectionRange(l+3,l+3):R.current.setSelectionRange(c+1,l+1),null==n||n(R.current.value)}},[e])},D=function(e){if(null!=R&&R.current){var t=R.current.value,c=R.current.selectionStart,l=\":\"+e+\": \";R.current.value=t.slice(0,c)+l+t.slice(c),R.current.focus(),R.current.setSelectionRange(c+l.length,c+l.length),null==n||n(R.current.value)}};return E.createElement(f,null,E.createElement(m,c({ref:R,rows:10,onChange:n},t)),E.createElement(k,null,E.createElement(s,{\"aria-label\":g(\"Message_composer_toolbox_primary_actions\")},E.createElement(a,{icon:\"emoji\",disabled:!P,onClick:function(){if(P){if(!(null!=R&&R.current))throw Error(\"Missing textAreaRef\");I(R.current,function(e){return D(e)})}},title:g(\"Emoji\")}),E.createElement(d,null),E.createElement(a,{icon:\"bold\",onClick:y(\"*\"),title:g(\"Bold\")}),E.createElement(a,{icon:\"italic\",onClick:y(\"_\"),title:g(\"Italic\")}),E.createElement(a,{icon:\"strike\",onClick:y(\"~\"),title:g(\"Strike\")}),E.createElement(a,{icon:\"link\",onClick:y(\"[]()\"),title:g(\"Link\")}),E.createElement(d,null),E.createElement(i,{ref:j,small:!0,onClick:function(){(null==R?void 0:R.current)&&R.current.focus(),B(!w)}},g(\"Insert_Placeholder\")),E.createElement(x,{display:w?\"block\":\"none\",onClick:function(){(null==R?void 0:R.current)&&R.current.focus(),B(!1)}}),E.createElement(o,{visible:w?\"visible\":\"hidden\",anchor:j},E.createElement(u,{elevation:\"1\",w:\"224px\"},E.createElement(S,{onChange:n,textAreaRef:R,setVisible:B}))))))}))}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Button, PositionAnimated, Tile } from '@rocket.chat/fuselage';\\nimport {\\n\\tMessageComposerAction,\\n\\tMessageComposerToolbarActions,\\n\\tMessageComposer,\\n\\tMessageComposerInput,\\n\\tMessageComposerToolbar,\\n\\tMessageComposerActionsDivider,\\n} from '@rocket.chat/ui-composer';\\nimport { useUserPreference } from '@rocket.chat/ui-contexts';\\nimport type { ComponentProps } from 'react';\\nimport React, { memo, useCallback, useRef, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { Backdrop } from '../../../../components/Backdrop';\\nimport { useEmojiPicker } from '../../../../contexts/EmojiPickerContext';\\nimport InsertPlaceholderDropdown from './InsertPlaceholderDropdown';\\n\\nconst CannedResponsesComposer = ({ onChange, ...props }: ComponentProps<typeof MessageComposerInput>) => {\\n\\tconst { t } = useTranslation();\\n\\tconst useEmojisPreference = useUserPreference('useEmojis');\\n\\n\\tconst textAreaRef = useRef<HTMLTextAreaElement>(null);\\n\\tconst ref = useRef<HTMLButtonElement>(null);\\n\\n\\tconst [visible, setVisible] = useState(false);\\n\\n\\tconst { open: openEmojiPicker } = useEmojiPicker();\\n\\n\\tconst useMarkdownSyntax = (char: '*' | '_' | '~' | '[]()'): (() => void) =>\\n\\t\\tuseCallback(() => {\\n\\t\\t\\tif (textAreaRef?.current) {\\n\\t\\t\\t\\tconst text = textAreaRef.current.value;\\n\\t\\t\\t\\tconst startPos = textAreaRef.current.selectionStart;\\n\\t\\t\\t\\tconst endPos = textAreaRef.current.selectionEnd;\\n\\n\\t\\t\\t\\tif (char === '[]()') {\\n\\t\\t\\t\\t\\tif (startPos !== endPos) {\\n\\t\\t\\t\\t\\t\\ttextAreaRef.current.value = `${text.slice(0, startPos)}[${text.slice(startPos, endPos)}]()${text.slice(endPos)}`;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\ttextAreaRef.current.value = `${text.slice(0, startPos)}${char}${text.slice(startPos, endPos)}${char}${text.slice(endPos)}`;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\ttextAreaRef.current.focus();\\n\\n\\t\\t\\t\\tif (char === '[]()') {\\n\\t\\t\\t\\t\\tif (startPos === endPos) {\\n\\t\\t\\t\\t\\t\\ttextAreaRef.current.setSelectionRange(startPos, endPos);\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\ttextAreaRef.current.setSelectionRange(endPos + 3, endPos + 3);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\ttextAreaRef.current.setSelectionRange(startPos + 1, endPos + 1);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tonChange?.(textAreaRef.current.value as any);\\n\\t\\t\\t}\\n\\t\\t}, [char]);\\n\\n\\tconst onClickEmoji = (emoji: string): void => {\\n\\t\\tif (textAreaRef?.current) {\\n\\t\\t\\tconst text = textAreaRef.current.value;\\n\\t\\t\\tconst startPos = textAreaRef.current.selectionStart;\\n\\t\\t\\tconst emojiValue = `:${emoji}: `;\\n\\n\\t\\t\\ttextAreaRef.current.value = text.slice(0, startPos) + emojiValue + text.slice(startPos);\\n\\n\\t\\t\\ttextAreaRef.current.focus();\\n\\t\\t\\ttextAreaRef.current.setSelectionRange(startPos + emojiValue.length, startPos + emojiValue.length);\\n\\n\\t\\t\\tonChange?.(textAreaRef.current.value as any);\\n\\t\\t}\\n\\t};\\n\\n\\tconst handleOpenEmojiPicker = (): void => {\\n\\t\\tif (!useEmojisPreference) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (!textAreaRef?.current) {\\n\\t\\t\\tthrow new Error('Missing textAreaRef');\\n\\t\\t}\\n\\n\\t\\topenEmojiPicker(textAreaRef.current, (emoji: string) => onClickEmoji(emoji));\\n\\t};\\n\\n\\tconst openPlaceholderSelect = (): void => {\\n\\t\\ttextAreaRef?.current && textAreaRef.current.focus();\\n\\t\\tsetVisible(!visible);\\n\\t};\\n\\n\\treturn (\\n\\t\\t<MessageComposer>\\n\\t\\t\\t<MessageComposerInput ref={textAreaRef} rows={10} onChange={onChange} {...props} />\\n\\t\\t\\t<MessageComposerToolbar>\\n\\t\\t\\t\\t<MessageComposerToolbarActions aria-label={t('Message_composer_toolbox_primary_actions')}>\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='emoji' disabled={!useEmojisPreference} onClick={handleOpenEmojiPicker} title={t('Emoji')} />\\n\\t\\t\\t\\t\\t<MessageComposerActionsDivider />\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='bold' onClick={useMarkdownSyntax('*')} title={t('Bold')} />\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='italic' onClick={useMarkdownSyntax('_')} title={t('Italic')} />\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='strike' onClick={useMarkdownSyntax('~')} title={t('Strike')} />\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='link' onClick={useMarkdownSyntax('[]()')} title={t('Link')} />\\n\\t\\t\\t\\t\\t<MessageComposerActionsDivider />\\n\\t\\t\\t\\t\\t<Button ref={ref} small onClick={openPlaceholderSelect}>\\n\\t\\t\\t\\t\\t\\t{t('Insert_Placeholder')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t<Backdrop\\n\\t\\t\\t\\t\\t\\tdisplay={visible ? 'block' : 'none'}\\n\\t\\t\\t\\t\\t\\tonClick={(): void => {\\n\\t\\t\\t\\t\\t\\t\\ttextAreaRef?.current && textAreaRef.current.focus();\\n\\t\\t\\t\\t\\t\\t\\tsetVisible(false);\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t<PositionAnimated visible={visible ? 'visible' : 'hidden'} anchor={ref}>\\n\\t\\t\\t\\t\\t\\t<Tile elevation='1' w='224px'>\\n\\t\\t\\t\\t\\t\\t\\t<InsertPlaceholderDropdown onChange={onChange} textAreaRef={textAreaRef} setVisible={setVisible} />\\n\\t\\t\\t\\t\\t\\t</Tile>\\n\\t\\t\\t\\t\\t</PositionAnimated>\\n\\t\\t\\t\\t</MessageComposerToolbarActions>\\n\\t\\t\\t</MessageComposerToolbar>\\n\\t\\t</MessageComposer>\\n\\t);\\n};\\n\\nexport default memo(CannedResponsesComposer);\\n\",null],\"names\":[\"_extends\",\"_slicedToArray\",\"_objectWithoutProperties\",\"Button\",\"PositionAnimated\",\"Tile\",\"MessageComposerAction\",\"MessageComposerToolbarActions\",\"MessageComposer\",\"MessageComposerInput\",\"MessageComposerToolbar\",\"MessageComposerActionsDivider\",\"useUserPreference\",\"React\",\"memo\",\"useCallback\",\"useRef\",\"useState\",\"useTranslation\",\"Backdrop\",\"useEmojiPicker\",\"InsertPlaceholderDropdown\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"onChange\",\"props\",\"_excluded\",\"t\",\"_useTranslation\",\"useEmojisPreference\",\"textAreaRef\",\"ref\",\"_useState\",\"_useState2\",\"visible\",\"setVisible\",\"openEmojiPicker\",\"_useEmojiPicker\",\"open\",\"useMarkdownSyntax\",\"char\",\"current\",\"text\",\"value\",\"startPos\",\"selectionStart\",\"endPos\",\"selectionEnd\",\"slice\",\"focus\",\"setSelectionRange\",\"onClickEmoji\",\"emoji\",\"emojiValue\",\"length\",\"createElement\",\"rows\",\"icon\",\"disabled\",\"onClick\",\"Error\",\"title\",\"small\",\"display\",\"anchor\",\"elevation\",\"w\"],\"mappings\":\"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\"}"}