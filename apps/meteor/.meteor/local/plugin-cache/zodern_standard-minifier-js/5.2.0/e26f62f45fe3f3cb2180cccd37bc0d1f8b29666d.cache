{"code":"function module(e,t,n){let l,s,a,i,r,u,o,m,c,d,p,v,k,h,f,H,g,b,B,E,y,S;let _=[\"departments\"];n.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){l=e}},0),n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){s=e}},1),n.link(\"@rocket.chat/fuselage\",{Box(e){a=e},Button(e){i=e},ButtonGroup(e){r=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){u=e},useUniqueId(e){o=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){m=e},useMethod(e){c=e},useTranslation(e){d=e},useRouter(e){p=e}},2),n.link(\"react\",{default(e){v=e}},3),n.link(\"react-hook-form\",{FormProvider(e){k=e},useForm(e){h=e}},4),n.link(\"../../../components/Page\",{Page(e){f=e},PageFooter(e){H=e},PageHeader(e){g=e},PageScrollableContentWithShadow(e){b=e}},5),n.link(\"../../../omnichannel/businessHours/useRemoveBusinessHour\",{useRemoveBusinessHour(e){B=e}},6),n.link(\"./BusinessHoursForm\",{default(e){E=e}},7),n.link(\"./mapBusinessHoursForm\",{defaultWorkHours(e){y=e}},8),n.link(\"./useIsSingleBusinessHours\",{useIsSingleBusinessHours(e){S=e}},9);let P=e=>{var t,n;return{name:(null==e?void 0:e.name)||\"\",timezoneName:(null==e?void 0:null===(t=e.timezone)||void 0===t?void 0:t.name)||\"America/Sao_Paulo\",daysOpen:((null==e?void 0:e.workHours)||y()).filter(e=>{let{open:t}=e;return!!t}).map(e=>{let{day:t}=e;return t}),daysTime:((null==e?void 0:e.workHours)||y()).filter(e=>{let{open:t}=e;return!!t}).map(e=>{let{day:t,start:{time:n},finish:{time:l},open:s}=e;return{day:t,start:{time:n},finish:{time:l},open:s}}),departmentsToApplyBusinessHour:\"\",active:(null==e?void 0:e.active)||!0,departments:(null==e?void 0:null===(n=e.departments)||void 0===n?void 0:n.map(e=>{let{_id:t,name:n}=e;return{value:t,label:n}}))||[]}};n.exportDefault(e=>{let{businessHourData:t,type:n}=e,y=d(),w=m(),C=S(),x=c(\"livechat:saveBusinessHour\"),F=B(),T=p(),z=h({values:P(t)}),{reset:D,handleSubmit:W,formState:{isDirty:j}}=z,I=u(async e=>{let{departments:a}=e,i=s(e,_),r=(null==a?void 0:a.map(e=>e.value).join(\",\"))||\"\";try{let e=l(l(l({},i),(null==t?void 0:t._id)&&{_id:t._id}),{},{type:n,departmentsToApplyBusinessHour:r,timezone:i.timezoneName,workHours:i.daysTime.map(e=>{let{day:t,start:{time:n},finish:{time:l},open:s}=e;return{day:t,start:n,finish:l,open:s}})});await x(e),w({type:\"success\",message:y(\"Business_hours_updated\")}),T.navigate(\"/omnichannel/businessHours\")}catch(e){w({type:\"error\",message:e})}}),M=o();return v.createElement(f,null,v.createElement(g,{title:y(\"Business_Hours\")},v.createElement(r,null,!C&&v.createElement(i,{onClick:()=>T.navigate(\"/omnichannel/businessHours\")},y(\"Back\")),\"custom\"===n&&(null==t?void 0:t._id)&&v.createElement(i,{danger:!0,onClick:()=>F(null==t?void 0:t._id,n)},y(\"Delete\")))),v.createElement(b,null,v.createElement(a,{maxWidth:\"600px\",w:\"full\",alignSelf:\"center\"},v.createElement(k,z,v.createElement(\"form\",{id:M,onSubmit:W(I)},v.createElement(E,{type:n}))))),v.createElement(H,{isDirty:j},v.createElement(r,null,v.createElement(i,{onClick:()=>D()},y(\"Cancel\")),v.createElement(i,{form:M,primary:!0,type:\"submit\"},y(\"Save\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/businessHours/EditBusinessHours.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatBusinessHour, LivechatBusinessHourTypes, Serialized } from '@rocket.chat/core-typings';\\nimport { Box, Button, ButtonGroup } from '@rocket.chat/fuselage';\\nimport { useMutableCallback, useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useMethod, useTranslation, useRouter } from '@rocket.chat/ui-contexts';\\nimport React from 'react';\\nimport { FormProvider, useForm } from 'react-hook-form';\\n\\nimport { Page, PageFooter, PageHeader, PageScrollableContentWithShadow } from '../../../components/Page';\\nimport { useRemoveBusinessHour } from '../../../omnichannel/businessHours/useRemoveBusinessHour';\\nimport type { BusinessHoursFormData } from './BusinessHoursForm';\\nimport BusinessHoursForm from './BusinessHoursForm';\\nimport { defaultWorkHours } from './mapBusinessHoursForm';\\nimport { useIsSingleBusinessHours } from './useIsSingleBusinessHours';\\n\\nconst getInitialData = (businessHourData: Serialized<ILivechatBusinessHour> | undefined) => ({\\n\\tname: businessHourData?.name || '',\\n\\ttimezoneName: businessHourData?.timezone?.name || 'America/Sao_Paulo',\\n\\tdaysOpen: (businessHourData?.workHours || defaultWorkHours()).filter(({ open }) => !!open).map(({ day }) => day),\\n\\tdaysTime: (businessHourData?.workHours || defaultWorkHours())\\n\\t\\t.filter(({ open }) => !!open)\\n\\t\\t.map(({ day, start: { time: startTime }, finish: { time: finishTime }, open }) => ({\\n\\t\\t\\tday,\\n\\t\\t\\tstart: { time: startTime },\\n\\t\\t\\tfinish: { time: finishTime },\\n\\t\\t\\topen,\\n\\t\\t})),\\n\\tdepartmentsToApplyBusinessHour: '',\\n\\tactive: businessHourData?.active || true,\\n\\tdepartments: businessHourData?.departments?.map(({ _id, name }) => ({ value: _id, label: name })) || [],\\n});\\n\\ntype EditBusinessHoursProps = {\\n\\tbusinessHourData?: Serialized<ILivechatBusinessHour>;\\n\\ttype: LivechatBusinessHourTypes;\\n};\\n\\nconst EditBusinessHours = ({ businessHourData, type }: EditBusinessHoursProps) => {\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst isSingleBH = useIsSingleBusinessHours();\\n\\n\\tconst saveBusinessHour = useMethod('livechat:saveBusinessHour');\\n\\tconst handleRemove = useRemoveBusinessHour();\\n\\n\\tconst router = useRouter();\\n\\n\\tconst methods = useForm({ values: getInitialData(businessHourData) });\\n\\tconst {\\n\\t\\treset,\\n\\t\\thandleSubmit,\\n\\t\\tformState: { isDirty },\\n\\t} = methods;\\n\\n\\tconst handleSave = useMutableCallback(async ({ departments, ...data }: BusinessHoursFormData) => {\\n\\t\\tconst departmentsToApplyBusinessHour = departments?.map((dep) => dep.value).join(',') || '';\\n\\n\\t\\ttry {\\n\\t\\t\\tconst payload = {\\n\\t\\t\\t\\t...data,\\n\\t\\t\\t\\t...(businessHourData?._id && { _id: businessHourData._id }),\\n\\t\\t\\t\\ttype,\\n\\t\\t\\t\\tdepartmentsToApplyBusinessHour,\\n\\t\\t\\t\\ttimezone: data.timezoneName,\\n\\t\\t\\t\\tworkHours: data.daysTime.map(({ day, start: { time: startTime }, finish: { time: finishTime }, open }) => ({\\n\\t\\t\\t\\t\\tday,\\n\\t\\t\\t\\t\\tstart: startTime,\\n\\t\\t\\t\\t\\tfinish: finishTime,\\n\\t\\t\\t\\t\\topen,\\n\\t\\t\\t\\t})),\\n\\t\\t\\t};\\n\\n\\t\\t\\tawait saveBusinessHour(payload as any);\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Business_hours_updated') });\\n\\t\\t\\trouter.navigate('/omnichannel/businessHours');\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t});\\n\\n\\tconst formId = useUniqueId();\\n\\n\\treturn (\\n\\t\\t<Page>\\n\\t\\t\\t<PageHeader title={t('Business_Hours')}>\\n\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t{!isSingleBH && <Button onClick={() => router.navigate('/omnichannel/businessHours')}>{t('Back')}</Button>}\\n\\t\\t\\t\\t\\t{type === 'custom' && businessHourData?._id && (\\n\\t\\t\\t\\t\\t\\t<Button danger onClick={() => handleRemove(businessHourData?._id, type)}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Delete')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</PageHeader>\\n\\t\\t\\t<PageScrollableContentWithShadow>\\n\\t\\t\\t\\t<Box maxWidth='600px' w='full' alignSelf='center'>\\n\\t\\t\\t\\t\\t<FormProvider {...methods}>\\n\\t\\t\\t\\t\\t\\t<form id={formId} onSubmit={handleSubmit(handleSave)}>\\n\\t\\t\\t\\t\\t\\t\\t<BusinessHoursForm type={type} />\\n\\t\\t\\t\\t\\t\\t</form>\\n\\t\\t\\t\\t\\t</FormProvider>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</PageScrollableContentWithShadow>\\n\\t\\t\\t<PageFooter isDirty={isDirty}>\\n\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t<Button onClick={() => reset()}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button form={formId} primary type='submit'>\\n\\t\\t\\t\\t\\t\\t{t('Save')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</PageFooter>\\n\\t\\t</Page>\\n\\t);\\n};\\n\\nexport default EditBusinessHours;\\n\",null],\"names\":[\"_objectSpread\",\"_objectWithoutProperties\",\"Box\",\"Button\",\"ButtonGroup\",\"useMutableCallback\",\"useUniqueId\",\"useToastMessageDispatch\",\"useMethod\",\"useTranslation\",\"useRouter\",\"React\",\"FormProvider\",\"useForm\",\"Page\",\"PageFooter\",\"PageHeader\",\"PageScrollableContentWithShadow\",\"useRemoveBusinessHour\",\"BusinessHoursForm\",\"defaultWorkHours\",\"useIsSingleBusinessHours\",\"module\",\"link\",\"default\",\"v\",\"getInitialData\",\"businessHourData\",\"_businessHourData$tim\",\"_businessHourData$dep\",\"name\",\"timezoneName\",\"timezone\",\"daysOpen\",\"workHours\",\"filter\",\"_ref\",\"open\",\"map\",\"_ref2\",\"day\",\"daysTime\",\"_ref3\",\"_ref4\",\"start\",\"time\",\"startTime\",\"finish\",\"finishTime\",\"departmentsToApplyBusinessHour\",\"active\",\"departments\",\"_ref5\",\"_id\",\"value\",\"label\",\"exportDefault\",\"_ref6\",\"type\",\"t\",\"dispatchToastMessage\",\"isSingleBH\",\"saveBusinessHour\",\"handleRemove\",\"router\",\"methods\",\"values\",\"reset\",\"handleSubmit\",\"formState\",\"isDirty\",\"handleSave\",\"_ref7\",\"data\",\"_excluded\",\"dep\",\"join\",\"payload\",\"_ref8\",\"message\",\"navigate\",\"error\",\"formId\",\"createElement\",\"title\",\"onClick\",\"danger\",\"maxWidth\",\"w\",\"alignSelf\",\"id\",\"onSubmit\",\"form\",\"primary\"],\"mappings\":\"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\"}"}