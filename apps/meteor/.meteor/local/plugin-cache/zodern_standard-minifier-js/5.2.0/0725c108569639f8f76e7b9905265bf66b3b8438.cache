{"code":"function module(e,r,t){t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){n=e}},0),t.export({getBSONType:function(){return o},compareBSONValues:function(){return i}}),t.link(\"./types\",{BSONType:function(e){a=e}},0);var n,a,o=function(e){return\"number\"==typeof e?a.Double:\"string\"==typeof e?a.String:\"boolean\"==typeof e?a.Boolean:Array.isArray(e)?a.Array:null===e?a.Null:e instanceof RegExp?a.Regex:\"function\"==typeof e?a.JavaScript:e instanceof Date?a.Date:e instanceof Uint8Array?a.BinData:a.Object},c=function(e){switch(e){case a.Null:return 0;case a.Double:case a.Int:case a.Long:return 1;case a.String:case a.Symbol:return 2;case a.Object:return 3;case a.Array:return 4;case a.BinData:return 5;case a.ObjectId:return 6;case a.Boolean:return 7;case a.Date:case a.Timestamp:return 8;case a.Regex:return 9;case a.JavaScript:case a.JavaScriptWithScope:return 100;default:return -1}},i=function(e,r){if(void 0===e)return void 0===r?0:-1;if(void 0===r)return 1;var t,u,s=o(e),l=c(s),p=o(r),f=c(p);if(l!==f)return l<f?-1:1;if(s!==p)throw Error(\"Missing type coercion logic in compareBSONValues\");switch(s){case a.Double:return e-r;case a.String:return e.localeCompare(r);case a.Object:return i((t=Array.prototype.concat).call.apply(t,[[]].concat(n(Object.entries(e)))),(u=Array.prototype.concat).call.apply(u,[[]].concat(n(Object.entries(r)))));case a.Array:for(var g=0;;g++){if(g===e.length)return g===r.length?0:-1;if(g===r.length)return 1;var y=i(e[g],r[g]);if(0!==y)return y}case a.BinData:if(e.length!==r.length)return e.length-r.length;for(var S=0;S<e.length;S++)if(e[S]!==r[S])return e[S]<r[S]?-1:1;return 0;case a.Null:case a.Undefined:return 0;case a.ObjectId:return e.toHexString().localeCompare(r.toHexString());case a.Boolean:return Number(e)-Number(r);case a.Date:return e.getTime()-r.getTime();case a.Regex:throw Error(\"Sorting not supported on regular expression\");case a.JavaScript:case a.JavaScriptWithScope:throw Error(\"Sorting not supported on Javascript code\")}throw Error(\"Unknown type to sort\")}}","map":"{\"version\":3,\"sources\":[\"client/lib/minimongo/bson.ts\",\"<anon>\"],\"sourcesContent\":[\"import { BSONType } from './types';\\n\\nexport const getBSONType = <T>(v: T): BSONType => {\\n\\tif (typeof v === 'number') {\\n\\t\\treturn BSONType.Double;\\n\\t}\\n\\n\\tif (typeof v === 'string') {\\n\\t\\treturn BSONType.String;\\n\\t}\\n\\n\\tif (typeof v === 'boolean') {\\n\\t\\treturn BSONType.Boolean;\\n\\t}\\n\\n\\tif (Array.isArray(v)) {\\n\\t\\treturn BSONType.Array;\\n\\t}\\n\\n\\tif (v === null) {\\n\\t\\treturn BSONType.Null;\\n\\t}\\n\\n\\tif (v instanceof RegExp) {\\n\\t\\treturn BSONType.Regex;\\n\\t}\\n\\n\\tif (typeof v === 'function') {\\n\\t\\treturn BSONType.JavaScript;\\n\\t}\\n\\n\\tif (v instanceof Date) {\\n\\t\\treturn BSONType.Date;\\n\\t}\\n\\n\\tif (v instanceof Uint8Array) {\\n\\t\\treturn BSONType.BinData;\\n\\t}\\n\\n\\treturn BSONType.Object;\\n};\\n\\nconst getBSONTypeOrder = (type: BSONType): number => {\\n\\tswitch (type) {\\n\\t\\tcase BSONType.Null:\\n\\t\\t\\treturn 0;\\n\\n\\t\\tcase BSONType.Double:\\n\\t\\tcase BSONType.Int:\\n\\t\\tcase BSONType.Long:\\n\\t\\t\\treturn 1;\\n\\n\\t\\tcase BSONType.String:\\n\\t\\tcase BSONType.Symbol:\\n\\t\\t\\treturn 2;\\n\\n\\t\\tcase BSONType.Object:\\n\\t\\t\\treturn 3;\\n\\n\\t\\tcase BSONType.Array:\\n\\t\\t\\treturn 4;\\n\\n\\t\\tcase BSONType.BinData:\\n\\t\\t\\treturn 5;\\n\\n\\t\\tcase BSONType.ObjectId:\\n\\t\\t\\treturn 6;\\n\\n\\t\\tcase BSONType.Boolean:\\n\\t\\t\\treturn 7;\\n\\n\\t\\tcase BSONType.Date:\\n\\t\\tcase BSONType.Timestamp:\\n\\t\\t\\treturn 8;\\n\\n\\t\\tcase BSONType.Regex:\\n\\t\\t\\treturn 9;\\n\\n\\t\\tcase BSONType.JavaScript:\\n\\t\\tcase BSONType.JavaScriptWithScope:\\n\\t\\t\\treturn 100;\\n\\n\\t\\tdefault:\\n\\t\\t\\treturn -1;\\n\\t}\\n};\\n\\ntype ObjectID = {\\n\\ttoHexString(): string;\\n\\tequals(otherID: ObjectID): boolean;\\n};\\n\\nexport const compareBSONValues = (a: unknown, b: unknown): number => {\\n\\tif (a === undefined) {\\n\\t\\treturn b === undefined ? 0 : -1;\\n\\t}\\n\\n\\tif (b === undefined) {\\n\\t\\treturn 1;\\n\\t}\\n\\n\\tconst ta = getBSONType(a);\\n\\tconst oa = getBSONTypeOrder(ta);\\n\\n\\tconst tb = getBSONType(b);\\n\\tconst ob = getBSONTypeOrder(tb);\\n\\n\\tif (oa !== ob) {\\n\\t\\treturn oa < ob ? -1 : 1;\\n\\t}\\n\\n\\tif (ta !== tb) {\\n\\t\\tthrow Error('Missing type coercion logic in compareBSONValues');\\n\\t}\\n\\n\\tswitch (ta) {\\n\\t\\tcase BSONType.Double:\\n\\t\\t\\treturn (a as number) - (b as number);\\n\\n\\t\\tcase BSONType.String:\\n\\t\\t\\treturn (a as string).localeCompare(b as string);\\n\\n\\t\\tcase BSONType.Object:\\n\\t\\t\\treturn compareBSONValues(\\n\\t\\t\\t\\tArray.prototype.concat.call([], ...Object.entries(a as Record<string, unknown>)),\\n\\t\\t\\t\\tArray.prototype.concat.call([], ...Object.entries(b as Record<string, unknown>)),\\n\\t\\t\\t);\\n\\n\\t\\tcase BSONType.Array: {\\n\\t\\t\\tfor (let i = 0; ; i++) {\\n\\t\\t\\t\\tif (i === (a as unknown[]).length) {\\n\\t\\t\\t\\t\\treturn i === (b as unknown[]).length ? 0 : -1;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (i === (b as unknown[]).length) {\\n\\t\\t\\t\\t\\treturn 1;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tconst s = compareBSONValues((a as unknown[])[i], (b as unknown[])[i]);\\n\\t\\t\\t\\tif (s !== 0) {\\n\\t\\t\\t\\t\\treturn s;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tcase BSONType.BinData: {\\n\\t\\t\\tif ((a as Uint8Array).length !== (b as Uint8Array).length) {\\n\\t\\t\\t\\treturn (a as Uint8Array).length - (b as Uint8Array).length;\\n\\t\\t\\t}\\n\\n\\t\\t\\tfor (let i = 0; i < (a as Uint8Array).length; i++) {\\n\\t\\t\\t\\tif ((a as Uint8Array)[i] === (b as Uint8Array)[i]) {\\n\\t\\t\\t\\t\\tcontinue;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn (a as Uint8Array)[i] < (b as Uint8Array)[i] ? -1 : 1;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn 0;\\n\\t\\t}\\n\\n\\t\\tcase BSONType.Null:\\n\\t\\tcase BSONType.Undefined:\\n\\t\\t\\treturn 0;\\n\\n\\t\\tcase BSONType.ObjectId:\\n\\t\\t\\treturn (a as ObjectID).toHexString().localeCompare((b as ObjectID).toHexString());\\n\\n\\t\\tcase BSONType.Boolean:\\n\\t\\t\\treturn Number(a) - Number(b);\\n\\n\\t\\tcase BSONType.Date:\\n\\t\\t\\treturn (a as Date).getTime() - (b as Date).getTime();\\n\\n\\t\\tcase BSONType.Regex:\\n\\t\\t\\tthrow Error('Sorting not supported on regular expression');\\n\\n\\t\\tcase BSONType.JavaScript:\\n\\t\\tcase BSONType.JavaScriptWithScope:\\n\\t\\t\\tthrow Error('Sorting not supported on Javascript code');\\n\\t}\\n\\n\\tthrow Error('Unknown type to sort');\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_toConsumableArray\",\"export\",\"getBSONType\",\"compareBSONValues\",\"BSONType\",\"Double\",\"String\",\"Boolean\",\"Array\",\"isArray\",\"Null\",\"RegExp\",\"Regex\",\"JavaScript\",\"Date\",\"Uint8Array\",\"BinData\",\"Object\",\"getBSONTypeOrder\",\"type\",\"Int\",\"Long\",\"Symbol\",\"ObjectId\",\"Timestamp\",\"JavaScriptWithScope\",\"a\",\"b\",\"undefined\",\"_Array$prototype$conc\",\"_Array$prototype$conc2\",\"ta\",\"oa\",\"tb\",\"ob\",\"Error\",\"localeCompare\",\"prototype\",\"concat\",\"call\",\"apply\",\"entries\",\"i\",\"length\",\"s\",\"Undefined\",\"toHexString\",\"Number\",\"getTime\"],\"mappings\":\"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\"}"}