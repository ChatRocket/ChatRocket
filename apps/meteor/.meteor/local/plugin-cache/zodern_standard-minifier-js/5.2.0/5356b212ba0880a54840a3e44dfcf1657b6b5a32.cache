{"code":"function module(e,n,t){var i,a,r,c,l,o,u,s;t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){i=e}},0),t.link(\"@rocket.chat/fuselage\",{Box:function(e){a=e}},0),t.link(\"react\",{default:function(e){r=e},useCallback:function(e){c=e},Fragment:function(e){l=e}},1),t.link(\"react-i18next\",{useTranslation:function(e){o=e}},2),t.link(\"../../../../../app/ui/client/lib/UserAction\",{UserAction:function(e){u=e}},3),t.link(\"../../../../hooks/useReactiveValue\",{useReactiveValue:function(e){s=e}},4),t.exportDefault(function(e){var n=e.rid,t=e.tmid,f=o().t,k=s(c(function(){return Object.entries(u.get(t||n)||{}).map(function(e){var n=i(e,2),t=n[0],a=n[1],r=t.split(\"-\")[1],c=Object.keys(a);if(0!==c.length)return{action:r,users:c}}).filter(Boolean)},[n,t]));return r.createElement(a,{h:\"x20\",className:\"rc-message-box__activity-wrapper\",fontScale:\"c1\",color:\"annotation\",\"aria-live\":\"polite\",display:\"flex\",alignItems:\"center\"},k.map(function(e,n){var t=e.action,i=e.users;return r.createElement(l,{key:t},n>0&&\", \",i.length<5?i.join(\", \"):i.slice(0,4).join(\", \")+\" \"+f(\"and\")+\" \"+f(\"others\"),\" \",i.length>1?f(\"are_\"+t):f(\"is_\"+t))}))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/ComposerUserActionIndicator/ComposerUserActionIndicator.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box } from '@rocket.chat/fuselage';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback, Fragment } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { UserAction } from '../../../../../app/ui/client/lib/UserAction';\\nimport { useReactiveValue } from '../../../../hooks/useReactiveValue';\\n\\nconst maxUsernames = 5;\\n\\nconst ComposerUserActionIndicator = ({ rid, tmid }: { rid: string; tmid?: string }): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst actions = useReactiveValue(\\n\\t\\tuseCallback(() => {\\n\\t\\t\\tconst roomAction = UserAction.get(tmid || rid) || {};\\n\\n\\t\\t\\tconst activities = Object.entries(roomAction);\\n\\n\\t\\t\\treturn activities\\n\\t\\t\\t\\t.map(([key, _users]) => {\\n\\t\\t\\t\\t\\tconst action = key.split('-')[1];\\n\\n\\t\\t\\t\\t\\tconst users = Object.keys(_users);\\n\\t\\t\\t\\t\\tif (users.length === 0) {\\n\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\taction,\\n\\t\\t\\t\\t\\t\\tusers,\\n\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.filter(Boolean) as {\\n\\t\\t\\t\\taction: 'typing' | 'recording' | 'uploading' | 'playing';\\n\\t\\t\\t\\tusers: string[];\\n\\t\\t\\t}[];\\n\\t\\t}, [rid, tmid]),\\n\\t);\\n\\treturn (\\n\\t\\t<Box\\n\\t\\t\\th='x20'\\n\\t\\t\\tclassName='rc-message-box__activity-wrapper'\\n\\t\\t\\tfontScale='c1'\\n\\t\\t\\tcolor='annotation'\\n\\t\\t\\taria-live='polite'\\n\\t\\t\\tdisplay='flex'\\n\\t\\t\\talignItems='center'\\n\\t\\t>\\n\\t\\t\\t{actions.map(({ action, users }, index) => (\\n\\t\\t\\t\\t<Fragment key={action}>\\n\\t\\t\\t\\t\\t{index > 0 && ', '}\\n\\t\\t\\t\\t\\t{users.length < maxUsernames\\n\\t\\t\\t\\t\\t\\t? users.join(', ')\\n\\t\\t\\t\\t\\t\\t: `${users.slice(0, maxUsernames - 1).join(', ')} ${t('and')} ${t('others')}`}{' '}\\n\\t\\t\\t\\t\\t{users.length > 1 ? t(`are_${action}`) : t(`is_${action}`)}\\n\\t\\t\\t\\t</Fragment>\\n\\t\\t\\t))}\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default ComposerUserActionIndicator;\\n\",null],\"names\":[\"_slicedToArray\",\"Box\",\"React\",\"useCallback\",\"Fragment\",\"useTranslation\",\"UserAction\",\"useReactiveValue\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"rid\",\"tmid\",\"t\",\"_useTranslation\",\"actions\",\"activities\",\"Object\",\"entries\",\"get\",\"map\",\"_ref2\",\"_ref3\",\"key\",\"_users\",\"action\",\"split\",\"users\",\"keys\",\"length\",\"filter\",\"Boolean\",\"createElement\",\"h\",\"className\",\"fontScale\",\"color\",\"display\",\"alignItems\",\"_ref4\",\"index\",\"join\",\"slice\",\"maxUsernames\"],\"mappings\":\"uBAQA,IARAA,EAAAC,EAA4CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9BC,EAAMC,IAAA,CAAA,uCAAwB,CAAAC,QAAA,SAAAC,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAArCH,EAAOC,IAAA,CAAM,wBAAwB,CAAAR,IAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAT,EAAAS,CAAA,EAAAR,YAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,SAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAJ,eAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8CAAA,CAAAH,WAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qCAAA,CAAAF,iBAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA5CH,EAAOI,aAAa,CAUgB,SAAAC,CAAA,EAAgE,IAA7DC,EAAGD,EAAHC,GAAG,CAAEC,EAAIF,EAAJE,IAAI,CACvCC,EAACC,AAAKZ,IAANW,CAAC,CACHE,EAAUX,EACfJ,EAAY,WAKX,OAAOgB,AAFYC,OAAOC,OAAO,CAFdf,EAAWgB,GAAG,CAACP,GAAQD,IAAQ,CAAA,GAKhDS,GAAG,CAAC,SAAAC,CAAA,EAAkB,IAAAC,EAAAzB,EAAAwB,EAAA,GAAhBE,EAAGD,CAAA,CAAA,EAAA,CAAEE,EAAMF,CAAA,CAAA,EAAA,CACXG,EAASF,EAAIG,KAAK,CAAC,IAAI,CAAC,EAAE,CAE1BC,EAAQV,OAAOW,IAAI,CAACJ,GAC1B,GAAIG,AAAiB,IAAjBA,EAAME,MAAM,CAIhB,MAAO,CACNJ,OAAAA,EACAE,MAAAA,EAEF,GACCG,MAAM,CAACC,QAIV,EAAG,CAACpB,EAAKC,EAAK,GAEf,OACCb,EAAAiC,aAAA,CAAClC,EAAG,CACHmC,EAAE,MACFC,UAAU,mCACVC,UAAU,KACVC,MAAM,aACN,YAAU,SACVC,QAAQ,OACRC,WAAW,QAAQ,EAElBvB,EAAQK,GAAG,CAAC,SAAAmB,CAAA,CAAoBC,CAAK,EAAA,IAAtBf,EAAMc,EAANd,MAAM,CAAEE,EAAKY,EAALZ,KAAK,CAAA,OAC5B5B,EAAAiC,aAAA,CAAC/B,EAAQ,CAACsB,IAAKE,CAAO,EACpBe,EAAQ,GAAK,KACbb,EAAME,MAAM,CA3CG,EA4CbF,EAAMc,IAAI,CAAC,MACRd,EAAMe,KAAK,CAAC,EAAGC,GAAkBF,IAAI,CAAC,MAAK,IAAI5B,EAAE,OAAM,IAAIA,EAAE,UAAa,IAC/Ec,EAAME,MAAM,CAAG,EAAIhB,EAAC,OAAQY,GAAYZ,EAAC,MAAOY,GACvC,GAIf\"}"}