{"code":"function module(e,t,s){let a,i,n;s.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){a=e}},0),s.export({processMessageEditing:()=>r}),s.link(\"../../../../app/ui-utils/client\",{MessageTypes(e){i=e}},0),s.link(\"../../toast\",{dispatchToastMessage(e){n=e}},1);let r=async(e,t,s)=>{var r;if(!e.currentEditing||i.isSystemMessage(t)||!t.msg&&!(null!==(r=t.attachments)&&void 0!==r&&r.length)&&!t.content)return!1;try{await e.data.updateMessage(a(a({},t),{},{_id:e.currentEditing.mid}),s)}catch(e){n({type:\"error\",message:e})}return e.currentEditing.stop(),!0}}","map":"{\"version\":3,\"sources\":[\"client/lib/chats/flows/processMessageEditing.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\n\\nimport { MessageTypes } from '../../../../app/ui-utils/client';\\nimport { dispatchToastMessage } from '../../toast';\\nimport type { ChatAPI } from '../ChatAPI';\\n\\nexport const processMessageEditing = async (\\n\\tchat: ChatAPI,\\n\\tmessage: Pick<IMessage, '_id' | 't'> & Partial<Omit<IMessage, '_id' | 't'>>,\\n\\tpreviewUrls?: string[],\\n): Promise<boolean> => {\\n\\tif (!chat.currentEditing) {\\n\\t\\treturn false;\\n\\t}\\n\\n\\tif (MessageTypes.isSystemMessage(message)) {\\n\\t\\treturn false;\\n\\t}\\n\\n\\tif (!message.msg && !message.attachments?.length && !message.content) {\\n\\t\\treturn false;\\n\\t}\\n\\n\\ttry {\\n\\t\\tawait chat.data.updateMessage({ ...message, _id: chat.currentEditing.mid }, previewUrls);\\n\\t} catch (error) {\\n\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t}\\n\\n\\tchat.currentEditing.stop();\\n\\n\\treturn true;\\n};\\n\",null],\"names\":[\"_objectSpread\",\"MessageTypes\",\"dispatchToastMessage\",\"module\",\"link\",\"default\",\"v\",\"export\",\"processMessageEditing\",\"chat\",\"message\",\"previewUrls\",\"_message$attachments\",\"currentEditing\",\"isSystemMessage\",\"msg\",\"attachments\",\"length\",\"content\",\"data\",\"updateMessage\",\"_id\",\"mid\",\"error\",\"type\",\"stop\"],\"mappings\":\"2BAEAA,EAA+DC,EAAAC,EAAtDC,EAAcC,IAAM,CAAA,uCAAkC,CAAAC,QAAAC,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAA/DH,EAAOI,MAAE,CAAA,CAAAC,sBAAoBA,IAAAA,CAAiC,GAACL,EAAAC,IAAA,CAAA,kCAAA,CAAAH,aAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,cAAA,CAAAF,qBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAIxD,IAAME,EAAwB,MACpCC,EACAC,EACAC,KACqB,IAAAC,EACrB,GAAI,CAACH,EAAKI,cAAc,EAIpBZ,EAAaa,eAAe,CAACJ,IAI7B,CAACA,EAAQK,GAAG,EAAI,CAAA,CAAA,AAAoB,OAApBH,CAAAA,EAACF,EAAQM,WAAW,AAAXA,GAAWJ,AAAA,KAAA,IAAAA,GAAnBA,EAAqBK,MAAM,AAANA,GAAU,CAACP,EAAQQ,OAAO,CAPnE,MAAO,CAAA,EAWR,GAAI,CACH,MAAMT,EAAKU,IAAI,CAACC,aAAa,CAAApB,EAAAA,EAAA,CAAA,EAAMU,GAAO,CAAA,EAAA,CAAEW,IAAKZ,EAAKI,cAAc,CAACS,GAAAA,AAAG,GAAIX,EAC7E,CAAE,MAAOY,EAAO,CACfrB,EAAqB,CAAEsB,KAAM,QAASd,QAASa,CAAK,EACrD,CAIA,OAFAd,EAAKI,cAAc,CAACY,IAAI,GAEjB,CAAA,CACR\"}"}