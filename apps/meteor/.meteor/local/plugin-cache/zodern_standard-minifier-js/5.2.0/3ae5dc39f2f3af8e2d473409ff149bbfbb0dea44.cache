{"code":"function module(e,n,t){var r,i,l,a,c,u,o,s,m,f,g,d,b,k,E,h,p,P,T,_,v,y,G,x=[\"current\",\"itemsPerPage\",\"setItemsPerPage\",\"setCurrent\"];t.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),t.link(\"@babel/runtime/helpers/extends\",{default:function(e){i=e}},1),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){l=e}},2),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){a=e}},3),t.link(\"@rocket.chat/fuselage\",{Pagination:function(e){c=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){u=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useTranslation:function(e){o=e},useEndpoint:function(e){s=e},useRouter:function(e){m=e}},2),t.link(\"@tanstack/react-query\",{useQuery:function(e){f=e},hashQueryKey:function(e){g=e}},3),t.link(\"react\",{default:function(e){d=e},useMemo:function(e){b=e},useState:function(e){k=e}},4),t.link(\"../../../components/GenericError\",{default:function(e){E=e}},5),t.link(\"../../../components/GenericNoResults\",{default:function(e){h=e}},6),t.link(\"../../../components/GenericTable\",{GenericTable:function(e){p=e},GenericTableHeader:function(e){P=e},GenericTableBody:function(e){T=e},GenericTableHeaderCell:function(e){_=e},GenericTableLoadingRow:function(e){v=e}},7),t.link(\"../../../components/GenericTable/hooks/usePagination\",{usePagination:function(e){y=e}},8),t.link(\"./TriggersRow\",{default:function(e){G=e}},9),t.exportDefault(function(){var e=o(),n=m(),t=u(function(){n.navigate(\"/omnichannel/triggers/new\")}),C=y(),w=C.current,N=C.itemsPerPage,R=C.setItemsPerPage,S=C.setCurrent,A=a(C,x),F=b(function(){return{offset:w,count:N}},[w,N]),H=s(\"GET\",\"/v1/livechat/triggers\"),I=f([\"livechat-triggers\",F],function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",H(F));case 1:case\"end\":return e.stop()}},null,null,null,Promise)}),L=I.data,D=I.refetch,M=I.isSuccess,Q=I.isLoading,j=I.isError,q=k(g([F])),B=l(q,1)[0]!==g([F]),K=d.createElement(d.Fragment,null,d.createElement(_,null,e(\"Name\")),d.createElement(_,null,e(\"Description\")),d.createElement(_,null,e(\"Enabled\")),d.createElement(_,{width:\"x60\"}));return d.createElement(d.Fragment,null,Q&&d.createElement(p,null,d.createElement(P,null,K),d.createElement(T,null,d.createElement(v,{cols:4}))),M&&0===L.triggers.length&&B&&d.createElement(h,null),M&&0===L.triggers.length&&!B&&d.createElement(h,{icon:\"smart\",title:e(\"No_triggers_yet\"),description:e(\"No_triggers_yet_description\"),buttonAction:t,buttonTitle:e(\"Create_trigger\"),linkHref:\"https://go.rocket.chat/i/omnichannel-docs\",linkText:e(\"Learn_more_about_triggers\")}),M&&L.triggers.length>0&&d.createElement(d.Fragment,null,d.createElement(p,null,d.createElement(P,null,K),d.createElement(T,null,L.triggers.map(function(e){var n=e._id,t=e.name,r=e.description,i=e.enabled;return d.createElement(G,{key:n,_id:n,name:t,description:r,enabled:i,reload:D})}))),d.createElement(c,i({divider:!0,current:w,itemsPerPage:N,count:(null==L?void 0:L.total)||0,onSetItemsPerPage:R,onSetCurrent:S},A))),j&&d.createElement(E,{buttonAction:D}))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/triggers/TriggersTable.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Pagination } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useTranslation, useEndpoint, useRouter } from '@rocket.chat/ui-contexts';\\nimport { useQuery, hashQueryKey } from '@tanstack/react-query';\\nimport React, { useMemo, useState } from 'react';\\n\\nimport GenericError from '../../../components/GenericError';\\nimport GenericNoResults from '../../../components/GenericNoResults';\\nimport {\\n\\tGenericTable,\\n\\tGenericTableHeader,\\n\\tGenericTableBody,\\n\\tGenericTableHeaderCell,\\n\\tGenericTableLoadingRow,\\n} from '../../../components/GenericTable';\\nimport { usePagination } from '../../../components/GenericTable/hooks/usePagination';\\nimport TriggersRow from './TriggersRow';\\n\\nconst TriggersTable = () => {\\n\\tconst t = useTranslation();\\n\\tconst router = useRouter();\\n\\n\\tconst handleAddNew = useMutableCallback(() => {\\n\\t\\trouter.navigate('/omnichannel/triggers/new');\\n\\t});\\n\\n\\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\\n\\n\\tconst query = useMemo(() => ({ offset: current, count: itemsPerPage }), [current, itemsPerPage]);\\n\\n\\tconst getTriggers = useEndpoint('GET', '/v1/livechat/triggers');\\n\\tconst { data, refetch, isSuccess, isLoading, isError } = useQuery(['livechat-triggers', query], async () => getTriggers(query));\\n\\n\\tconst [defaultQuery] = useState(hashQueryKey([query]));\\n\\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\\n\\n\\tconst headers = (\\n\\t\\t<>\\n\\t\\t\\t<GenericTableHeaderCell>{t('Name')}</GenericTableHeaderCell>\\n\\t\\t\\t<GenericTableHeaderCell>{t('Description')}</GenericTableHeaderCell>\\n\\t\\t\\t<GenericTableHeaderCell>{t('Enabled')}</GenericTableHeaderCell>\\n\\t\\t\\t<GenericTableHeaderCell width='x60' />\\n\\t\\t</>\\n\\t);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t{isLoading && (\\n\\t\\t\\t\\t<GenericTable>\\n\\t\\t\\t\\t\\t<GenericTableHeader>{headers}</GenericTableHeader>\\n\\t\\t\\t\\t\\t<GenericTableBody>\\n\\t\\t\\t\\t\\t\\t<GenericTableLoadingRow cols={4} />\\n\\t\\t\\t\\t\\t</GenericTableBody>\\n\\t\\t\\t\\t</GenericTable>\\n\\t\\t\\t)}\\n\\t\\t\\t{isSuccess && data.triggers.length === 0 && queryHasChanged && <GenericNoResults />}\\n\\t\\t\\t{isSuccess && data.triggers.length === 0 && !queryHasChanged && (\\n\\t\\t\\t\\t<GenericNoResults\\n\\t\\t\\t\\t\\ticon='smart'\\n\\t\\t\\t\\t\\ttitle={t('No_triggers_yet')}\\n\\t\\t\\t\\t\\tdescription={t('No_triggers_yet_description')}\\n\\t\\t\\t\\t\\tbuttonAction={handleAddNew}\\n\\t\\t\\t\\t\\tbuttonTitle={t('Create_trigger')}\\n\\t\\t\\t\\t\\tlinkHref='https://go.rocket.chat/i/omnichannel-docs'\\n\\t\\t\\t\\t\\tlinkText={t('Learn_more_about_triggers')}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\t\\t\\t{isSuccess && data.triggers.length > 0 && (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<GenericTable>\\n\\t\\t\\t\\t\\t\\t<GenericTableHeader>{headers}</GenericTableHeader>\\n\\t\\t\\t\\t\\t\\t<GenericTableBody>\\n\\t\\t\\t\\t\\t\\t\\t{data.triggers.map(({ _id, name, description, enabled }) => (\\n\\t\\t\\t\\t\\t\\t\\t\\t<TriggersRow key={_id} _id={_id} name={name} description={description} enabled={enabled} reload={refetch} />\\n\\t\\t\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t\\t\\t</GenericTableBody>\\n\\t\\t\\t\\t\\t</GenericTable>\\n\\t\\t\\t\\t\\t<Pagination\\n\\t\\t\\t\\t\\t\\tdivider\\n\\t\\t\\t\\t\\t\\tcurrent={current}\\n\\t\\t\\t\\t\\t\\titemsPerPage={itemsPerPage}\\n\\t\\t\\t\\t\\t\\tcount={data?.total || 0}\\n\\t\\t\\t\\t\\t\\tonSetItemsPerPage={setItemsPerPage}\\n\\t\\t\\t\\t\\t\\tonSetCurrent={setCurrent}\\n\\t\\t\\t\\t\\t\\t{...paginationProps}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</>\\n\\t\\t\\t)}\\n\\t\\t\\t{isError && <GenericError buttonAction={refetch} />}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default TriggersTable;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_extends\",\"_slicedToArray\",\"_objectWithoutProperties\",\"Pagination\",\"useMutableCallback\",\"useTranslation\",\"useEndpoint\",\"useRouter\",\"useQuery\",\"hashQueryKey\",\"React\",\"useMemo\",\"useState\",\"GenericError\",\"GenericNoResults\",\"GenericTable\",\"GenericTableHeader\",\"GenericTableBody\",\"GenericTableHeaderCell\",\"GenericTableLoadingRow\",\"usePagination\",\"TriggersRow\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"t\",\"router\",\"handleAddNew\",\"navigate\",\"_usePagination\",\"current\",\"itemsPerPage\",\"setItemsPerPage\",\"setCurrent\",\"paginationProps\",\"_excluded\",\"query\",\"offset\",\"count\",\"getTriggers\",\"_useQuery\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"stop\",\"Promise\",\"data\",\"refetch\",\"isSuccess\",\"isLoading\",\"isError\",\"_useState\",\"queryHasChanged\",\"defaultQuery\",\"_useState2\",\"headers\",\"createElement\",\"Fragment\",\"width\",\"cols\",\"triggers\",\"length\",\"icon\",\"title\",\"description\",\"buttonAction\",\"buttonTitle\",\"linkHref\",\"linkText\",\"map\",\"_ref\",\"_id\",\"name\",\"enabled\",\"key\",\"reload\",\"divider\",\"total\",\"onSetItemsPerPage\",\"onSetCurrent\"],\"mappings\":\"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\"}"}