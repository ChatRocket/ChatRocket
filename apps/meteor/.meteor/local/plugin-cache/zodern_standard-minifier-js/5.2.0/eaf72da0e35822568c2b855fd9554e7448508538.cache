{"code":"function module(e,l,t){let n,a,i,r,s,u,o,m,d,c,f,E,p,h,b,v,k,w,_,x;let g=[\"data\",\"isNew\",\"slaId\",\"reload\"];t.link(\"@babel/runtime/helpers/extends\",{default(e){n=e}},0),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){a=e}},1),t.link(\"@rocket.chat/fuselage\",{Field(e){i=e},FieldLabel(e){r=e},FieldRow(e){s=e},FieldError(e){u=e},TextInput(e){o=e},Button(e){m=e},Margins(e){d=e},Box(e){c=e},NumberInput(e){f=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){E=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){p=e},useRoute(e){h=e},useTranslation(e){b=e},useEndpoint(e){v=e}},2),t.link(\"react\",{default(e){k=e}},3),t.link(\"react-hook-form\",{useController(e){w=e},useForm(e){_=e}},4),t.link(\"../../components/Contextualbar\",{ContextualbarScrollableContent(e){x=e}},5),t.exportDefault(function(e){var l,t,y,C;let{data:I,isNew:T,slaId:M,reload:N}=e,R=a(e,g),D=h(\"omnichannel-sla-policies\"),F=v(\"POST\",\"/v1/livechat/sla\"),G=v(\"PUT\",\"/v1/livechat/sla/:slaId\",{slaId:M||\"\"}),S=p(),q=b(),{name:P,description:j,dueTimeInMinutes:B}=I||{},{control:L,getValues:O,formState:{errors:U,isValid:V,isDirty:W},reset:z}=_({mode:\"onChange\",defaultValues:{name:P,description:j,dueTimeInMinutes:B}}),{field:A}=w({control:L,name:\"name\",rules:{required:q(\"Required_field\",{field:q(\"Name\")})}}),{field:H}=w({control:L,name:\"dueTimeInMinutes\",rules:{validate:e=>!(0>=Number(e||0))||q(\"Required_field\",{field:q(\"Estimated_wait_time_in_minutes\")})}}),{field:J}=w({control:L,name:\"description\"}),K=E(async()=>{let{name:e,description:l,dueTimeInMinutes:t}=O();if(!V||!e||void 0===t)return S({type:\"error\",message:q(\"Required_field\")});try{let n={name:e,description:l,dueTimeInMinutes:Number(t)};M?await G(n):await F(n),S({type:\"success\",message:q(\"Saved\")}),N(),D.push({})}catch(e){S({type:\"error\",message:e})}});return k.createElement(x,n({is:\"form\"},R),k.createElement(i,null,k.createElement(r,null,q(\"Name\"),\"*\"),k.createElement(s,null,k.createElement(o,n({placeholder:q(\"Name\"),flexGrow:1},A,{error:null===(l=U.name)||void 0===l?void 0:l.message}))),k.createElement(u,null,null===(t=U.name)||void 0===t?void 0:t.message)),k.createElement(i,null,k.createElement(r,null,q(\"Description\")),k.createElement(s,null,k.createElement(o,n({placeholder:q(\"Description\"),flexGrow:1},J)))),k.createElement(i,null,k.createElement(r,null,q(\"Estimated_wait_time_in_minutes\"),\"*\"),k.createElement(s,null,k.createElement(f,n({placeholder:q(\"Estimated_wait_time_in_minutes\"),flexGrow:1},H,{error:null===(y=U.dueTimeInMinutes)||void 0===y?void 0:y.message}))),k.createElement(u,null,null===(C=U.dueTimeInMinutes)||void 0===C?void 0:C.message)),k.createElement(i,null,k.createElement(s,null,k.createElement(c,{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",w:\"full\"},k.createElement(d,{inlineEnd:4},!T&&k.createElement(m,{flexGrow:1,type:\"reset\",disabled:!W,onClick:()=>z()},q(\"Reset\")),k.createElement(m,{primary:!0,mie:\"none\",flexGrow:1,disabled:!W||!V,onClick:K},q(\"Save\")))))))})}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/slaPolicies/SlaEdit.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IOmnichannelServiceLevelAgreements, Serialized } from '@rocket.chat/core-typings';\\nimport { Field, FieldLabel, FieldRow, FieldError, TextInput, Button, Margins, Box, NumberInput } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useRoute, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React from 'react';\\nimport { useController, useForm } from 'react-hook-form';\\n\\nimport { ContextualbarScrollableContent } from '../../components/Contextualbar';\\n\\ntype SlaEditProps = {\\n\\tisNew?: boolean;\\n\\tslaId?: string;\\n\\treload: () => void;\\n\\tdata?: Serialized<IOmnichannelServiceLevelAgreements>;\\n};\\n\\nfunction SlaEdit({ data, isNew, slaId, reload, ...props }: SlaEditProps): ReactElement {\\n\\tconst slasRoute = useRoute('omnichannel-sla-policies');\\n\\tconst saveSLA = useEndpoint('POST', '/v1/livechat/sla');\\n\\tconst updateSLA = useEndpoint('PUT', `/v1/livechat/sla/:slaId`, { slaId: slaId || '' });\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst t = useTranslation();\\n\\n\\tconst { name, description, dueTimeInMinutes } = data || {};\\n\\n\\tconst {\\n\\t\\tcontrol,\\n\\t\\tgetValues,\\n\\t\\tformState: { errors, isValid, isDirty },\\n\\t\\treset,\\n\\t} = useForm({\\n\\t\\tmode: 'onChange',\\n\\t\\tdefaultValues: { name, description, dueTimeInMinutes },\\n\\t});\\n\\n\\tconst { field: nameField } = useController({\\n\\t\\tcontrol,\\n\\t\\tname: 'name',\\n\\t\\trules: { required: t('Required_field', { field: t('Name') }) },\\n\\t});\\n\\n\\tconst { field: dueTimeField } = useController({\\n\\t\\tcontrol,\\n\\t\\tname: 'dueTimeInMinutes',\\n\\t\\trules: {\\n\\t\\t\\tvalidate(value) {\\n\\t\\t\\t\\treturn Number(value || 0) <= 0 ? t('Required_field', { field: t('Estimated_wait_time_in_minutes') }) : true;\\n\\t\\t\\t},\\n\\t\\t},\\n\\t});\\n\\n\\tconst { field: descField } = useController({ control, name: 'description' });\\n\\n\\tconst handleSave = useMutableCallback(async () => {\\n\\t\\tconst { name, description, dueTimeInMinutes } = getValues();\\n\\n\\t\\tif (!isValid || !name || dueTimeInMinutes === undefined) {\\n\\t\\t\\treturn dispatchToastMessage({ type: 'error', message: t('Required_field') });\\n\\t\\t}\\n\\n\\t\\ttry {\\n\\t\\t\\tconst payload = { name, description, dueTimeInMinutes: Number(dueTimeInMinutes) };\\n\\t\\t\\tif (slaId) {\\n\\t\\t\\t\\tawait updateSLA(payload);\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tawait saveSLA(payload);\\n\\t\\t\\t}\\n\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Saved') });\\n\\t\\t\\treload();\\n\\t\\t\\tslasRoute.push({});\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t});\\n\\n\\treturn (\\n\\t\\t<ContextualbarScrollableContent is='form' {...props}>\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<FieldLabel>{t('Name')}*</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<TextInput placeholder={t('Name')} flexGrow={1} {...nameField} error={errors.name?.message} />\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t<FieldError>{errors.name?.message}</FieldError>\\n\\t\\t\\t</Field>\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<FieldLabel>{t('Description')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<TextInput placeholder={t('Description')} flexGrow={1} {...descField} />\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t</Field>\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<FieldLabel>{t('Estimated_wait_time_in_minutes')}*</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<NumberInput\\n\\t\\t\\t\\t\\t\\tplaceholder={t('Estimated_wait_time_in_minutes')}\\n\\t\\t\\t\\t\\t\\tflexGrow={1}\\n\\t\\t\\t\\t\\t\\t{...dueTimeField}\\n\\t\\t\\t\\t\\t\\terror={errors.dueTimeInMinutes?.message}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t<FieldError>{errors.dueTimeInMinutes?.message}</FieldError>\\n\\t\\t\\t</Field>\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Box display='flex' flexDirection='row' justifyContent='space-between' w='full'>\\n\\t\\t\\t\\t\\t\\t<Margins inlineEnd={4}>\\n\\t\\t\\t\\t\\t\\t\\t{!isNew && (\\n\\t\\t\\t\\t\\t\\t\\t\\t<Button flexGrow={1} type='reset' disabled={!isDirty} onClick={(): void => reset()}>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{t('Reset')}\\n\\t\\t\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t\\t<Button primary mie='none' flexGrow={1} disabled={!isDirty || !isValid} onClick={handleSave}>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Save')}\\n\\t\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t\\t</Margins>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t</Field>\\n\\t\\t</ContextualbarScrollableContent>\\n\\t);\\n}\\n\\nexport default SlaEdit;\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"Field\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"TextInput\",\"Button\",\"Margins\",\"Box\",\"NumberInput\",\"useMutableCallback\",\"useToastMessageDispatch\",\"useRoute\",\"useTranslation\",\"useEndpoint\",\"React\",\"useController\",\"useForm\",\"ContextualbarScrollableContent\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_errors$name\",\"_errors$name2\",\"_errors$dueTimeInMinu\",\"_errors$dueTimeInMinu2\",\"data\",\"isNew\",\"slaId\",\"reload\",\"props\",\"_excluded\",\"slasRoute\",\"saveSLA\",\"updateSLA\",\"dispatchToastMessage\",\"t\",\"name\",\"description\",\"dueTimeInMinutes\",\"control\",\"getValues\",\"formState\",\"errors\",\"isValid\",\"isDirty\",\"reset\",\"mode\",\"defaultValues\",\"field\",\"nameField\",\"rules\",\"required\",\"dueTimeField\",\"validate\",\"value\",\"Number\",\"descField\",\"handleSave\",\"undefined\",\"type\",\"message\",\"payload\",\"push\",\"error\",\"createElement\",\"is\",\"placeholder\",\"flexGrow\",\"display\",\"flexDirection\",\"justifyContent\",\"w\",\"inlineEnd\",\"disabled\",\"onClick\",\"primary\",\"mie\"],\"mappings\":\"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\"}"}