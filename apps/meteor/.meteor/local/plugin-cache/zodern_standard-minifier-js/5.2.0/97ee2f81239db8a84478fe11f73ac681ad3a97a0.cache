{"code":"function module(e,t,n){let a,l,r,m,c,s,i;n.link(\"@rocket.chat/core-typings\",{isQuoteAttachment(e){a=e},isE2EEMessage(e){l=e}},0),n.link(\"@rocket.chat/gazzodown\",{PreviewMarkup(e){r=e}},1),n.link(\"react\",{default(e){m=e},memo(e){c=e}},2),n.link(\"react-i18next\",{useTranslation(e){s=e}},3),n.link(\"../../../GazzodownText\",{default(e){i=e}},4),n.exportDefault(c(e=>{let{message:t}=e,{t:n}=s(),c=l(t);return(()=>{let e=t.md&&[...t.md];return(t.attachments&&Array.isArray(t.attachments)&&t.attachments.length>0&&a(t.attachments[0])&&(null==e||e.shift()),t.attachments&&\"\"===t.msg)?m.createElement(m.Fragment,null,n(\"Message_with_attachment\")):c&&\"done\"!==t.e2e?c&&\"pending\"===t.e2e?m.createElement(m.Fragment,null,n(\"E2E_message_encrypted_placeholder\")):m.createElement(m.Fragment,null,t.msg):e?m.createElement(i,null,m.createElement(r,{tokens:e})):m.createElement(m.Fragment,null,t.msg)})()}))}","map":"{\"version\":3,\"sources\":[\"client/components/message/variants/threadPreview/ThreadMessagePreviewBody.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { isQuoteAttachment, isE2EEMessage } from '@rocket.chat/core-typings';\\nimport { PreviewMarkup } from '@rocket.chat/gazzodown';\\nimport type { Root } from '@rocket.chat/message-parser';\\nimport type { ReactElement } from 'react';\\nimport React, { memo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport GazzodownText from '../../../GazzodownText';\\n\\ntype ThreadMessagePreviewBodyProps = {\\n\\tmessage: IMessage;\\n};\\n\\nconst ThreadMessagePreviewBody = ({ message }: ThreadMessagePreviewBodyProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst isEncryptedMessage = isE2EEMessage(message);\\n\\n\\tconst getMessage = () => {\\n\\t\\tconst mdTokens: Root | undefined = message.md && [...message.md];\\n\\t\\tif (\\n\\t\\t\\tmessage.attachments &&\\n\\t\\t\\tArray.isArray(message.attachments) &&\\n\\t\\t\\tmessage.attachments.length > 0 &&\\n\\t\\t\\tisQuoteAttachment(message.attachments[0])\\n\\t\\t) {\\n\\t\\t\\tmdTokens?.shift();\\n\\t\\t}\\n\\t\\tif (message.attachments && message.msg === '') {\\n\\t\\t\\treturn <>{t('Message_with_attachment')}</>;\\n\\t\\t}\\n\\t\\tif (!isEncryptedMessage || message.e2e === 'done') {\\n\\t\\t\\treturn mdTokens ? (\\n\\t\\t\\t\\t<GazzodownText>\\n\\t\\t\\t\\t\\t<PreviewMarkup tokens={mdTokens} />\\n\\t\\t\\t\\t</GazzodownText>\\n\\t\\t\\t) : (\\n\\t\\t\\t\\t<>{message.msg}</>\\n\\t\\t\\t);\\n\\t\\t}\\n\\t\\tif (isEncryptedMessage && message.e2e === 'pending') {\\n\\t\\t\\treturn <>{t('E2E_message_encrypted_placeholder')}</>;\\n\\t\\t}\\n\\t\\treturn <>{message.msg}</>;\\n\\t};\\n\\n\\treturn getMessage();\\n};\\n\\nexport default memo(ThreadMessagePreviewBody);\\n\",null],\"names\":[\"isQuoteAttachment\",\"isE2EEMessage\",\"PreviewMarkup\",\"React\",\"memo\",\"useTranslation\",\"GazzodownText\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"message\",\"t\",\"isEncryptedMessage\",\"getMessage\",\"mdTokens\",\"md\",\"attachments\",\"Array\",\"isArray\",\"length\",\"shift\",\"msg\",\"createElement\",\"Fragment\",\"e2e\",\"tokens\"],\"mappings\":\"2BACAA,EAASC,EAAoEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAjDC,EAAeC,IAAA,CAAA,4BAAiC,CAACR,kBAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,cAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,yBAAA,CAAAN,cAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAN,EAAAM,CAAA,EAAAL,KAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gBAAA,CAAAH,eAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,yBAAA,CAAAE,QAAAD,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAA7EF,EAAOI,aAAE,CAgDMP,EAnCkBQ,IAA6D,GAA5D,CAAEC,QAAAA,CAAAA,CAAwC,CAAAD,EACrE,CAAEE,EAAAA,CAAAA,CAAG,CAAGT,IACRU,EAAqBd,EAAcY,GA8BzC,MAAOG,AA5BYA,CAAAA,KAClB,IAAMC,EAA6BJ,EAAQK,EAAE,EAAI,IAAIL,EAAQK,EAAE,CAAC,OAShE,CAPCL,EAAQM,WAAW,EACnBC,MAAMC,OAAO,CAACR,EAAQM,WAAW,GACjCN,EAAQM,WAAW,CAACG,MAAM,CAAG,GAC7BtB,EAAkBa,EAAQM,WAAW,CAAC,EAAE,GAExCF,CAAAA,MAAAA,GAAAA,EAAUM,KAAK,EAAA,EAEZV,EAAQM,WAAW,EAAIN,AAAgB,KAAhBA,EAAQW,GAAG,EAC9BrB,EAAAsB,aAAA,CAAAtB,EAAAuB,QAAA,CAAA,KAAGZ,EAAE,4BAET,AAACC,GAAsBF,AAAgB,SAAhBA,EAAQc,GAAG,CASlCZ,GAAsBF,AAAgB,YAAhBA,EAAQc,GAAG,CAC7BxB,EAAAsB,aAAA,CAAAtB,EAAAuB,QAAA,CAAA,KAAGZ,EAAE,sCAENX,EAAAsB,aAAA,CAAAtB,EAAAuB,QAAA,CAAA,KAAGb,EAAQW,GAAI,EAXdP,EACNd,EAAAsB,aAAA,CAACnB,EAAa,KACbH,EAAAsB,aAAA,CAACvB,EAAa,CAAC0B,OAAQX,CAAS,IAGjCd,EAAAsB,aAAA,CAAAtB,EAAAuB,QAAA,CAAA,KAAGb,EAAQW,GAAI,CAOlB,CAAA,GAGD\"}"}