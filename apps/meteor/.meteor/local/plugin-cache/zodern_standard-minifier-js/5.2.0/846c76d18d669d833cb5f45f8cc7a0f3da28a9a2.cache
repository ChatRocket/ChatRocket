{"code":"function module(i,n,e){e.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(i){r=i}},0),e.export({useLicenseLimitsByBehavior:function(){return a}}),e.link(\"@rocket.chat/license/src/validation/validateLimit\",{validateWarnLimit:function(i){t=i}},0),e.link(\"./useLicense\",{useLicense:function(i){u=i}},1);var r,t,u,a=function(){var i=u({loadValues:!0});if(i.isLoading||i.isError)return null;var n=i.data,e=n.license,a=n.limits;if(!e||!a)return null;var l=Object.keys(a).map(function(i){var n,r=null===(n=e.limits[i])||void 0===n?void 0:n.filter(function(n){var e;return t(n.max,null!==(e=a[i].value)&&void 0!==e?e:0,n.behavior)}).reduce(function(i,n){return!i||n.max>i.max?n:i},null);if(r&&0!==r.max&&-1!==r.max)return[i,r.behavior]}).filter(Boolean);return l.length?l.reduce(function(i,n){var e=r(n,2),t=e[0],u=e[1];return i[u]||(i[u]=[]),i[u].push(t),i},{}):null}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useLicenseLimitsByBehavior.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { LicenseBehavior, LicenseLimitKind } from '@rocket.chat/core-typings';\\nimport { validateWarnLimit } from '@rocket.chat/license/src/validation/validateLimit';\\n\\nimport { useLicense } from './useLicense';\\n\\ntype LicenseLimitsByBehavior = Record<LicenseBehavior, LicenseLimitKind[]>;\\n\\nexport const useLicenseLimitsByBehavior = () => {\\n\\tconst result = useLicense({ loadValues: true });\\n\\n\\tif (result.isLoading || result.isError) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\tconst { license, limits } = result.data;\\n\\n\\tif (!license || !limits) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\tconst keyLimits = Object.keys(limits) as Array<keyof typeof limits>;\\n\\n\\t// Get the rule with the highest limit that applies to this key\\n\\tconst rules = keyLimits\\n\\t\\t.map((key) => {\\n\\t\\t\\tconst rule = license.limits[key]\\n\\t\\t\\t\\t?.filter((limit) => validateWarnLimit(limit.max, limits[key].value ?? 0, limit.behavior))\\n\\t\\t\\t\\t.reduce<{ max: number; behavior: LicenseBehavior } | null>(\\n\\t\\t\\t\\t\\t(maxLimit, currentLimit) => (!maxLimit || currentLimit.max > maxLimit.max ? currentLimit : maxLimit),\\n\\t\\t\\t\\t\\tnull,\\n\\t\\t\\t\\t);\\n\\n\\t\\t\\tif (!rule) {\\n\\t\\t\\t\\treturn undefined;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (rule.max === 0) {\\n\\t\\t\\t\\treturn undefined;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (rule.max === -1) {\\n\\t\\t\\t\\treturn undefined;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn [key, rule.behavior];\\n\\t\\t})\\n\\t\\t.filter(Boolean) as Array<[keyof typeof limits, LicenseBehavior]>;\\n\\n\\tif (!rules.length) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\t// Group by behavior\\n\\treturn rules.reduce((acc, [key, behavior]) => {\\n\\t\\tif (!acc[behavior]) {\\n\\t\\t\\tacc[behavior] = [];\\n\\t\\t}\\n\\n\\t\\tacc[behavior].push(key);\\n\\n\\t\\treturn acc;\\n\\t}, {} as LicenseLimitsByBehavior);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_slicedToArray\",\"export\",\"useLicenseLimitsByBehavior\",\"validateWarnLimit\",\"useLicense\",\"result\",\"loadValues\",\"isLoading\",\"isError\",\"_result$data\",\"data\",\"license\",\"limits\",\"rules\",\"keyLimits\",\"Object\",\"keys\",\"map\",\"key\",\"_license$limits$key\",\"rule\",\"filter\",\"limit\",\"_limits$key$value\",\"max\",\"value\",\"behavior\",\"reduce\",\"maxLimit\",\"currentLimit\",\"Boolean\",\"length\",\"acc\",\"_ref\",\"_ref2\",\"push\"],\"mappings\":\"uBACSA,EAAiBC,IAAE,CAAA,uCAAM,CAAAC,QAAA,SAAoDC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAtFH,EAAOK,MAAE,CAAA,CAAAC,2BAAyB,WAAA,OAAAA,CAAoD,CAAA,GAAAN,EAAAC,IAAA,CAAA,oDAAA,CAAAM,kBAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,eAAA,CAAAO,WAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAM/E,IANPC,EAAsFG,EAAAC,EAMzEF,EAA6B,WACzC,IAAMG,EAASD,EAAW,CAAEE,WAAY,CAAA,CAAI,GAE5C,GAAID,EAAOE,SAAS,EAAIF,EAAOG,OAAO,CACrC,OAAO,KAGR,IAAAC,EAA4BJ,EAAOK,IAAI,CAA/BC,EAAOF,EAAPE,OAAO,CAAEC,EAAMH,EAANG,MAAM,CAEvB,GAAI,CAACD,GAAW,CAACC,EAChB,OAAO,KAMR,IAAMC,EAAQC,AAHIC,OAAOC,IAAI,CAACJ,GAI5BK,GAAG,CAAC,SAACC,CAAG,EACR,IADYC,EACNC,EAAI,AAAsB,OAAtBD,CAAAA,EAAGR,EAAQC,MAAM,CAACM,EAAI,AAAD,GAACC,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAnBA,EACVE,MAAM,CAAC,SAACC,CAAK,EAAA,IAAAC,EAAA,OAAKpB,EAAkBmB,EAAME,GAAG,CAAA,AAAmB,OAAnBD,CAAAA,EAAEX,CAAM,CAACM,EAAI,CAACO,KAAK,AAALA,GAAKF,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAAGD,EAAMI,QAAQ,CAAC,GACvFC,MAAM,CACN,SAACC,CAAQ,CAAEC,CAAY,EAAA,MAAM,CAACD,GAAYC,EAAaL,GAAG,CAAGI,EAASJ,GAAG,CAAGK,EAAeD,CAAQ,EACnG,MAGF,GAAKR,GAIDA,AAAa,IAAbA,EAAKI,GAAG,EAIRJ,AAAa,KAAbA,EAAKI,GAAG,CAIZ,MAAO,CAACN,EAAKE,EAAKM,QAAQ,CAAC,AAC5B,GACCL,MAAM,CAACS,gBAET,AAAKjB,EAAMkB,MAAM,CAKVlB,EAAMc,MAAM,CAAC,SAACK,CAAG,CAAAC,CAAA,EAAqB,IAAAC,EAAAlC,EAAAiC,EAAA,GAAlBf,EAAGgB,CAAA,CAAA,EAAA,CAAER,EAAQQ,CAAA,CAAA,EAAA,CAOvC,OANKF,CAAG,CAACN,EAAS,EACjBM,CAAAA,CAAG,CAACN,EAAS,CAAG,EAAE,AAAF,EAGjBM,CAAG,CAACN,EAAS,CAACS,IAAI,CAACjB,GAEZc,CACR,EAAG,CAAA,GAZK,IAaT\"}"}