{"code":"function module(e,n,r){r.link(\"@babel/runtime/regenerator\",{default:function(e){t=e}},0),r.export({useMessageSearchQuery:function(){return l}}),r.link(\"@rocket.chat/ui-contexts\",{useMethod:function(e){a=e},useToastMessageDispatch:function(e){o=e},useTranslation:function(e){s=e},useUserId:function(e){u=e}},0),r.link(\"@tanstack/react-query\",{useQuery:function(e){i=e}},1),r.link(\"../../../contexts/RoomContext\",{useRoom:function(e){c=e}},2);var t,a,o,s,u,i,c,l=function(e){var n,r=e.searchText,l=e.limit,d=e.globalSearch,f=null!==(n=u())&&void 0!==n?n:void 0,h=c(),m=s(),v=o(),g=a(\"rocketchatSearch.search\");return i([\"rooms\",h._id,\"message-search\",{uid:f,rid:h._id,searchText:r,limit:l,globalSearch:d}],function(){var e,n,a;return t.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,t.awrap(g(r,{uid:f,rid:h._id},{limit:l,searchAll:d}));case 2:return a=o.sent,o.abrupt(\"return\",null!==(e=null===(n=a.message)||void 0===n?void 0:n.docs)&&void 0!==e?e:[]);case 4:case\"end\":return o.stop()}},null,null,null,Promise)},{keepPreviousData:!0,onError:function(){v({type:\"error\",message:m(\"Search_message_search_failed\")})}})}}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/MessageSearchTab/hooks/useMessageSearchQuery.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useMethod, useToastMessageDispatch, useTranslation, useUserId } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\n\\nimport { useRoom } from '../../../contexts/RoomContext';\\n\\nexport const useMessageSearchQuery = ({\\n\\tsearchText,\\n\\tlimit,\\n\\tglobalSearch,\\n}: {\\n\\tsearchText: string;\\n\\tlimit: number;\\n\\tglobalSearch: boolean;\\n}) => {\\n\\tconst uid = useUserId() ?? undefined;\\n\\tconst room = useRoom();\\n\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst searchMessages = useMethod('rocketchatSearch.search');\\n\\treturn useQuery(\\n\\t\\t['rooms', room._id, 'message-search', { uid, rid: room._id, searchText, limit, globalSearch }] as const,\\n\\t\\tasync () => {\\n\\t\\t\\tconst result = await searchMessages(searchText, { uid, rid: room._id }, { limit, searchAll: globalSearch });\\n\\t\\t\\treturn result.message?.docs ?? [];\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tkeepPreviousData: true,\\n\\t\\t\\tonError: () => {\\n\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\t\\tmessage: t('Search_message_search_failed'),\\n\\t\\t\\t\\t});\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"export\",\"useMessageSearchQuery\",\"useMethod\",\"useToastMessageDispatch\",\"useTranslation\",\"useUserId\",\"useQuery\",\"useRoom\",\"_ref\",\"_useUserId\",\"searchText\",\"limit\",\"globalSearch\",\"uid\",\"undefined\",\"room\",\"t\",\"dispatchToastMessage\",\"searchMessages\",\"_id\",\"rid\",\"_result$message$docs\",\"_result$message\",\"result\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"searchAll\",\"sent\",\"abrupt\",\"message\",\"docs\",\"stop\",\"Promise\",\"keepPreviousData\",\"onError\",\"type\"],\"mappings\":\"uBAAoBA,EAAAC,IAAA,CAAA,6BAAyC,CAAAC,QAAW,SAAMC,CAAA,EAAAC,EAA2BD,CAAA,CAAA,EAAA,GAAzGH,EAAOK,MAAE,CAAA,CAAAC,sBAAW,WAAyB,OAAAA,CAA2B,CAAA,GAAiCN,EAAAC,IAAA,CAAA,2BAAA,CAAAM,UAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,EAAAK,wBAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,EAAAM,eAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,EAAAO,UAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAU,SAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gCAAA,CAAAW,QAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,CAAA,EAAA,GAKlG,IALPC,EAA8EG,EAAAC,EAA2BC,EAAAC,EAAAC,EAAAC,EAK5FN,EAAwB,SAAAO,CAAA,EAQhC,IAAAC,EAPJC,EAAUF,EAAVE,UAAU,CACVC,EAAKH,EAALG,KAAK,CACLC,EAAYJ,EAAZI,YAAY,CAMNC,EAAG,AAAc,OAAdJ,CAAAA,EAAGJ,GAAS,GAAEI,AAAA,KAAA,IAAAA,EAAAA,EAAIK,KAAAA,EACrBC,EAAOR,IAEPS,EAAIZ,IACJa,EAAuBd,IAEvBe,EAAiBhB,EAAU,2BACjC,OAAOI,EACN,CAAC,QAASS,EAAKI,GAAG,CAAE,iBAAkB,CAAEN,IAAAA,EAAKO,IAAKL,EAAKI,GAAG,CAAET,WAAAA,EAAYC,MAAAA,EAAOC,aAAAA,CAAY,EAAY,CACvG,eAAAS,EAAAC,EAAAC,EAAA,OAAAxB,EAAAyB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAA5B,EAAA6B,KAAA,CACsBV,EAAeR,EAAY,CAAEG,IAAAA,EAAKO,IAAKL,EAAKI,GAAAA,AAAG,EAAI,CAAER,MAAAA,EAAOkB,UAAWjB,CAAY,GAAG,MAAA,EAA/F,OAANW,EAAME,EAAAK,IAAA,CAAAL,EAAAM,MAAA,CAAA,SAAA,AACe,OADfV,CAAAA,EAAA,AACS,OADTC,CAAAA,EACLC,EAAOS,OAAO,AAAPA,GAAOV,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgBW,IAAI,AAAJA,GAAIZ,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAAE,CAAA,MAAA,EAAA,IAAA,MAAA,OAAAI,EAAAS,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAElC,CACCC,iBAAkB,CAAA,EAClBC,QAAS,WACRpB,EAAqB,CACpBqB,KAAM,QACNN,QAAShB,EAAE,iCAEb,GAGH\"}"}