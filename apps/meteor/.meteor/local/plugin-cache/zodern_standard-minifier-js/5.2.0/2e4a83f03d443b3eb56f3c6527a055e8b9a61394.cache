{"code":"function module(a,t,e){let n,o,l,s,i,r,u,g;e.export({useAutoTranslate:()=>c}),e.link(\"@rocket.chat/ui-contexts\",{useSetting(a){n=a}},0),e.link(\"react\",{useCallback(a){o=a},useMemo(a){l=a}},1),e.link(\"../../../../../app/autotranslate/client\",{AutoTranslate(a){s=a}},2),e.link(\"../../../../lib/rooms/roomCoordinator\",{roomCoordinator(a){i=a}},3),e.link(\"../lib/autoTranslate\",{hasTranslationLanguageInAttachments(a){r=a},hasTranslationLanguageInMessage(a){u=a}},4),e.link(\"../lib/isOwnUserMessage\",{isOwnUserMessage(a){g=a}},5);let c=a=>{let t=!!n(\"AutoTranslate_Enabled\"),e=t&&(null==a?void 0:a.autoTranslateLanguage)&&(null==a?void 0:a.autoTranslate),c=l(()=>a&&i.isLivechatRoom(null==a?void 0:a.t),[a]),d=!!(e||c),T=d&&a?s.getLanguage(a.rid):void 0,k=o(t=>!!d&&!!T&&!g(t,a)&&!t.autoTranslateShowInverse&&(u(t,T)||r(t.attachments,T)),[a,d,T]);return l(()=>({autoTranslateEnabled:d,autoTranslateLanguage:T,showAutoTranslate:k}),[d,T,k])}}","map":"{\"version\":3,\"sources\":[\"client/views/room/MessageList/hooks/useAutoTranslate.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage, ISubscription, ITranslatedMessage } from '@rocket.chat/core-typings';\\nimport { useSetting } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useMemo } from 'react';\\n\\nimport { AutoTranslate } from '../../../../../app/autotranslate/client';\\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\\nimport { hasTranslationLanguageInAttachments, hasTranslationLanguageInMessage } from '../lib/autoTranslate';\\nimport { isOwnUserMessage } from '../lib/isOwnUserMessage';\\n\\nexport type AutoTranslateOptions = {\\n\\tautoTranslateEnabled: boolean;\\n\\tautoTranslateLanguage?: string;\\n\\tshowAutoTranslate: (message: IMessage & Partial<ITranslatedMessage>) => boolean;\\n};\\n\\nexport const useAutoTranslate = (subscription?: ISubscription): AutoTranslateOptions => {\\n\\tconst autoTranslateSettingEnabled = Boolean(useSetting('AutoTranslate_Enabled'));\\n\\tconst isSubscriptionEnabled = autoTranslateSettingEnabled && subscription?.autoTranslateLanguage && subscription?.autoTranslate;\\n\\tconst isLivechatRoom = useMemo(() => subscription && roomCoordinator.isLivechatRoom(subscription?.t), [subscription]);\\n\\tconst autoTranslateEnabled = Boolean(isSubscriptionEnabled || isLivechatRoom);\\n\\tconst autoTranslateLanguage = autoTranslateEnabled && subscription ? AutoTranslate.getLanguage(subscription.rid) : undefined;\\n\\n\\tconst showAutoTranslate = useCallback(\\n\\t\\t(message: IMessage): boolean => {\\n\\t\\t\\tif (!autoTranslateEnabled || !autoTranslateLanguage) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn (\\n\\t\\t\\t\\t!isOwnUserMessage(message, subscription) &&\\n\\t\\t\\t\\t!(message as { autoTranslateShowInverse?: boolean }).autoTranslateShowInverse &&\\n\\t\\t\\t\\t(hasTranslationLanguageInMessage(message, autoTranslateLanguage) ||\\n\\t\\t\\t\\t\\thasTranslationLanguageInAttachments(message.attachments, autoTranslateLanguage))\\n\\t\\t\\t);\\n\\t\\t},\\n\\t\\t[subscription, autoTranslateEnabled, autoTranslateLanguage],\\n\\t);\\n\\n\\treturn useMemo(() => {\\n\\t\\treturn { autoTranslateEnabled, autoTranslateLanguage, showAutoTranslate };\\n\\t}, [autoTranslateEnabled, autoTranslateLanguage, showAutoTranslate]);\\n};\\n\",null],\"names\":[\"useSetting\",\"useCallback\",\"useMemo\",\"AutoTranslate\",\"roomCoordinator\",\"hasTranslationLanguageInAttachments\",\"hasTranslationLanguageInMessage\",\"isOwnUserMessage\",\"module\",\"export\",\"useAutoTranslate\",\"link\",\"v\",\"subscription\",\"autoTranslateSettingEnabled\",\"Boolean\",\"isSubscriptionEnabled\",\"autoTranslateLanguage\",\"autoTranslate\",\"isLivechatRoom\",\"t\",\"autoTranslateEnabled\",\"getLanguage\",\"rid\",\"undefined\",\"showAutoTranslate\",\"message\",\"autoTranslateShowInverse\",\"attachments\"],\"mappings\":\"2BACsDA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAtDC,EAAOC,MAAE,CAAA,CAAAC,iBAAkBA,IAAAA,CAAA,GAA2BF,EAAAG,IAAA,CAAA,2BAAA,CAAAX,WAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAV,YAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,QAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,0CAAA,CAAAR,cAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,wCAAA,CAAAP,gBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,uBAAA,CAAAN,oCAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,gCAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,0BAAA,CAAAJ,iBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAc/C,IAAMF,EAAoBG,IAChC,IAAMC,EAA8BC,CAAAA,CAAQf,EAAW,yBACjDgB,EAAwBF,GAA+BD,CAAAA,MAAAA,EAAY,KAAA,EAAZA,EAAcI,qBAAqB,AAArBA,GAAyBJ,CAAAA,MAAAA,EAAY,KAAA,EAAZA,EAAcK,aAAa,AAAbA,EAC5GC,EAAiBjB,EAAQ,IAAMW,GAAgBT,EAAgBe,cAAc,CAACN,MAAAA,EAAY,KAAA,EAAZA,EAAcO,CAAC,EAAG,CAACP,EAAa,EAC9GQ,EAAuBN,CAAAA,CAAQC,CAAAA,GAAyBG,CAAAA,EACxDF,EAAwBI,GAAwBR,EAAeV,EAAcmB,WAAW,CAACT,EAAaU,GAAG,EAAIC,KAAAA,EAE7GC,EAAoBxB,EACxByB,GACA,EAAKL,KAAyBJ,GAK7B,CAACV,EAAiBmB,EAASb,IAC3B,CAAEa,EAAmDC,wBAAwB,EAC5ErB,CAAAA,EAAgCoB,EAAST,IACzCZ,EAAoCqB,EAAQE,WAAW,CAAEX,EAAqB,EAGjF,CAACJ,EAAcQ,EAAsBJ,EAAsB,EAG5D,OAAOf,EAAQ,IACP,CAAA,CAAEmB,qBAAAA,EAAsBJ,sBAAAA,EAAuBQ,kBAAAA,CAAiB,CAAA,EACrE,CAACJ,EAAsBJ,EAAuBQ,EAAkB,CACpE\"}"}