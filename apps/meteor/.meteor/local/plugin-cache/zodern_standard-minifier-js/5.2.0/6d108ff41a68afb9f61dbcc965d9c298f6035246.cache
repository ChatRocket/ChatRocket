{"code":"function module(n,e,t){t.link(\"@babel/runtime/regenerator\",{default:function(n){r=n}},0),t.export({useReportUser:function(){return p}}),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(n){o=n},useSetModal:function(n){u=n},useToastMessageDispatch:function(n){s=n},useUserId:function(n){i=n}},0),t.link(\"@tanstack/react-query\",{useMutation:function(n){a=n}},1),t.link(\"react\",{default:function(n){c=n},useMemo:function(n){l=n}},2),t.link(\"react-i18next\",{useTranslation:function(n){f=n}},3),t.link(\"../../../../../hooks/useUserDisplayName\",{useUserDisplayName:function(n){m=n}},4),t.link(\"../../../contextualBar/UserInfo/ReportUserModal\",{default:function(n){d=n}},5);var r,o,u,s,i,a,c,l,f,m,d,p=function(n){var e=n._id,t=n.username,p=n.name,k=i(),y=u(),U=f().t,g=s(),v=m({username:t,name:p}),h=o(\"POST\",\"/v1/moderation.reportUser\"),x=a([\"reportUser\",e],function(n){return r.async(function(t){for(;;)switch(t.prev=t.next){case 0:h({description:n,userId:e});case 1:case\"end\":return t.stop()}},null,null,null,Promise)},{onSuccess:function(){return g({type:\"success\",message:U(\"Report_has_been_sent\")})},onError:function(n){return g({type:\"error\",message:n})},onSettled:function(){return y()}});return l(function(){return k!==e?{icon:\"warning\",content:U(\"Report\"),onClick:function(){return y(c.createElement(d,{onConfirm:x.mutate,onClose:function(){return y()},displayName:v||\"\",username:t||\"\"}))},type:\"moderation\",variant:\"danger\"}:void 0},[k,e,U,y,t,x.mutate,v])}}","map":"{\"version\":3,\"sources\":[\"client/views/room/hooks/useUserInfoActions/actions/useReportUser.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { useEndpoint, useSetModal, useToastMessageDispatch, useUserId } from '@rocket.chat/ui-contexts';\\nimport { useMutation } from '@tanstack/react-query';\\nimport React, { useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useUserDisplayName } from '../../../../../hooks/useUserDisplayName';\\nimport ReportUserModal from '../../../contextualBar/UserInfo/ReportUserModal';\\nimport type { UserInfoAction } from '../useUserInfoActions';\\n\\nexport const useReportUser = (user: Pick<IUser, '_id' | 'username' | 'name'>): UserInfoAction | undefined => {\\n\\tconst { _id: uid, username, name } = user;\\n\\tconst ownUserId = useUserId();\\n\\tconst setModal = useSetModal();\\n\\n\\tconst { t } = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst displayName = useUserDisplayName({ username, name });\\n\\n\\tconst reportUser = useEndpoint('POST', '/v1/moderation.reportUser');\\n\\tconst reportUserMutation = useMutation(\\n\\t\\t['reportUser', uid],\\n\\t\\tasync (description: string) => {\\n\\t\\t\\treportUser({ description, userId: uid });\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tonSuccess: () => dispatchToastMessage({ type: 'success', message: t('Report_has_been_sent') }),\\n\\t\\t\\tonError: (error) => dispatchToastMessage({ type: 'error', message: error }),\\n\\t\\t\\tonSettled: () => setModal(),\\n\\t\\t},\\n\\t);\\n\\n\\tconst openReportUserModal = useMemo(() => {\\n\\t\\tconst action = () =>\\n\\t\\t\\tsetModal(\\n\\t\\t\\t\\t<ReportUserModal\\n\\t\\t\\t\\t\\tonConfirm={reportUserMutation.mutate}\\n\\t\\t\\t\\t\\tonClose={() => setModal()}\\n\\t\\t\\t\\t\\tdisplayName={displayName || ''}\\n\\t\\t\\t\\t\\tusername={username || ''}\\n\\t\\t\\t\\t/>,\\n\\t\\t\\t);\\n\\n\\t\\treturn ownUserId !== uid\\n\\t\\t\\t? {\\n\\t\\t\\t\\t\\ticon: 'warning' as const,\\n\\t\\t\\t\\t\\tcontent: t('Report'),\\n\\t\\t\\t\\t\\tonClick: action,\\n\\t\\t\\t\\t\\ttype: 'moderation' as const,\\n\\t\\t\\t\\t\\tvariant: 'danger' as const,\\n\\t\\t\\t  }\\n\\t\\t\\t: undefined;\\n\\t}, [ownUserId, uid, t, setModal, username, reportUserMutation.mutate, displayName]);\\n\\n\\treturn openReportUserModal;\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"export\",\"useReportUser\",\"useEndpoint\",\"useSetModal\",\"useToastMessageDispatch\",\"useUserId\",\"useMutation\",\"React\",\"useMemo\",\"useTranslation\",\"useUserDisplayName\",\"ReportUserModal\",\"user\",\"uid\",\"_id\",\"username\",\"name\",\"ownUserId\",\"setModal\",\"t\",\"_useTranslation\",\"dispatchToastMessage\",\"displayName\",\"reportUser\",\"reportUserMutation\",\"description\",\"async\",\"_context\",\"prev\",\"next\",\"userId\",\"stop\",\"Promise\",\"onSuccess\",\"type\",\"message\",\"onError\",\"error\",\"onSettled\",\"icon\",\"content\",\"onClick\",\"createElement\",\"onConfirm\",\"mutate\",\"onClose\",\"variant\",\"undefined\"],\"mappings\":\"uBACsBA,EAAAC,IAAa,CAAA,6BAAyB,CAAAC,QAAW,SAAMC,CAAA,EAAAC,EAA2BD,CAAA,CAAA,EAAA,GAAxGH,EAAOK,MAAE,CAAA,CAAAC,cAAa,WAAa,OAAAA,CAAyB,CAAA,GAA4CN,EAAAC,IAAA,CAAA,2BAAA,CAAAM,YAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,EAAAK,YAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,EAAAM,wBAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,EAAAO,UAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAU,YAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAS,EAAAT,CAAA,EAAAU,QAAA,SAAAV,CAAA,EAAAU,EAAAV,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAa,eAAA,SAAAX,CAAA,EAAAW,EAAAX,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0CAAA,CAAAc,mBAAA,SAAAZ,CAAA,EAAAY,EAAAZ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kDAAA,CAAA,QAAA,SAAAE,CAAA,EAAAa,EAAAb,CAAA,CAAA,EAAA,GASjG,IATPC,EAA4DG,EAAiBC,EAAAC,EAA2BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAS3FV,EAAgB,SAACW,CAA8C,EAC3E,IAAaC,EAAwBD,EAA7BE,GAAG,CAAOC,EAAmBH,EAAnBG,QAAQ,CAAEC,EAASJ,EAATI,IAAI,CAC1BC,EAAYZ,IACZa,EAAWf,IAETgB,EAACC,AAAKX,IAANU,CAAC,CACHE,EAAuBjB,IACvBkB,EAAcZ,EAAmB,CAAEK,SAAAA,EAAUC,KAAAA,CAAI,GAEjDO,EAAarB,EAAY,OAAQ,6BACjCsB,EAAqBlB,EAC1B,CAAC,aAAcO,EAAI,CACnB,SAAOY,CAAmB,EAAA,OAAA1B,EAAA2B,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EACzBN,EAAW,CAAEE,YAAAA,EAAaK,OAAQjB,CAAG,EAAI,MAAA,EAAA,IAAA,MAAA,OAAAc,EAAAI,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAE1C,CACCC,UAAW,WAAA,OAAMZ,EAAqB,CAAEa,KAAM,UAAWC,QAAShB,EAAE,uBAAuB,EAAG,EAC9FiB,QAAS,SAACC,CAAK,EAAA,OAAKhB,EAAqB,CAAEa,KAAM,QAASC,QAASE,CAAK,EAAG,EAC3EC,UAAW,WAAA,OAAMpB,GAAU,IA0B7B,OAtB4BV,EAAQ,WAWnC,OAAOS,IAAcJ,EAClB,CACA0B,KAAM,UACNC,QAASrB,EAAE,UACXsB,QAdY,WAAA,OACdvB,EACCX,EAAAmC,aAAA,CAAC/B,EAAe,CACfgC,UAAWnB,EAAmBoB,MAAO,CACrCC,QAAS,WAAA,OAAM3B,GAAU,EACzBI,YAAaA,GAAe,GAC5BP,SAAUA,GAAY,EAAG,GAE1B,EAOCmB,KAAM,aACNY,QAAS,UAETC,KAAAA,CACJ,EAAG,CAAC9B,EAAWJ,EAAKM,EAAGD,EAAUH,EAAUS,EAAmBoB,MAAM,CAAEtB,EAAY,CAGnF\"}"}