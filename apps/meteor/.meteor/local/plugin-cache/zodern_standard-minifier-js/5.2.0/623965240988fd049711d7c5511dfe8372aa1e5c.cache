{"code":"function module(e,o,t){let n,i,u,s,c,l;t.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),t.export({useContinuousSoundNotification:()=>a}),t.link(\"@rocket.chat/ui-contexts\",{useSetting(e){i=e},useUserPreference(e){u=e},useUserSubscriptions(e){s=e}},0),t.link(\"react\",{useEffect(e){c=e}},1),t.link(\"../../app/custom-sounds/client/lib/CustomSounds\",{CustomSounds(e){l=e}},2);let r={t:\"l\",ls:{$exists:!1},open:!0},a=()=>{let e=s(r),o=i(\"Livechat_continuous_sound_notification_new_livechat_room\"),t=u(\"newRoomNotification\"),a=u(\"notificationsSoundVolume\"),d=t&&\"\".concat(t,\"-continuous\"),f=void 0!==a?Number((a/100).toPrecision(2)):1;c(()=>{let e;return o&&d&&(e=n(n({},l.getSound(t)),{},{_id:d}),l.add(e)),()=>{e&&l.remove(e)}},[d,t,o]),c(()=>{if(d){if(!o||0===e.length){l.pause(d);return}l.play(d,{volume:f,loop:!0})}},[d,o,e,f])}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useContinuousSoundNotification.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { ICustomSound } from '@rocket.chat/core-typings';\\nimport { useSetting, useUserPreference, useUserSubscriptions } from '@rocket.chat/ui-contexts';\\nimport { useEffect } from 'react';\\n\\nimport { CustomSounds } from '../../app/custom-sounds/client/lib/CustomSounds';\\n\\nconst query = { t: 'l', ls: { $exists: false }, open: true };\\nexport const useContinuousSoundNotification = () => {\\n\\tconst userSubscriptions = useUserSubscriptions(query);\\n\\n\\tconst playNewRoomSoundContinuously = useSetting('Livechat_continuous_sound_notification_new_livechat_room');\\n\\n\\tconst newRoomNotification = useUserPreference<string>('newRoomNotification');\\n\\tconst audioVolume = useUserPreference<number>('notificationsSoundVolume');\\n\\n\\tconst continuousCustomSoundId = newRoomNotification && `${newRoomNotification}-continuous`;\\n\\n\\tconst volume = audioVolume !== undefined ? Number((audioVolume / 100).toPrecision(2)) : 1;\\n\\n\\tuseEffect(() => {\\n\\t\\tlet audio: ICustomSound;\\n\\t\\tif (playNewRoomSoundContinuously && continuousCustomSoundId) {\\n\\t\\t\\taudio = { ...CustomSounds.getSound(newRoomNotification), _id: continuousCustomSoundId };\\n\\t\\t\\tCustomSounds.add(audio);\\n\\t\\t}\\n\\n\\t\\treturn () => {\\n\\t\\t\\tif (audio) {\\n\\t\\t\\t\\tCustomSounds.remove(audio);\\n\\t\\t\\t}\\n\\t\\t};\\n\\t}, [continuousCustomSoundId, newRoomNotification, playNewRoomSoundContinuously]);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!continuousCustomSoundId) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tif (!playNewRoomSoundContinuously) {\\n\\t\\t\\tCustomSounds.pause(continuousCustomSoundId);\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (userSubscriptions.length === 0) {\\n\\t\\t\\tCustomSounds.pause(continuousCustomSoundId);\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tCustomSounds.play(continuousCustomSoundId, {\\n\\t\\t\\tvolume,\\n\\t\\t\\tloop: true,\\n\\t\\t});\\n\\t}, [continuousCustomSoundId, playNewRoomSoundContinuously, userSubscriptions, volume]);\\n};\\n\",null],\"names\":[\"_objectSpread\",\"useSetting\",\"useUserPreference\",\"useUserSubscriptions\",\"useEffect\",\"CustomSounds\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useContinuousSoundNotification\",\"query\",\"t\",\"ls\",\"$exists\",\"open\",\"userSubscriptions\",\"playNewRoomSoundContinuously\",\"newRoomNotification\",\"audioVolume\",\"continuousCustomSoundId\",\"concat\",\"volume\",\"undefined\",\"Number\",\"toPrecision\",\"audio\",\"getSound\",\"_id\",\"add\",\"remove\",\"length\",\"pause\",\"play\",\"loop\"],\"mappings\":\"2BACAA,EAAoEC,EAA2BC,EAAAC,EAAAC,EAAAC,EAAtFC,EAAYC,IAAA,CAAA,uCAA+C,CAAAC,QAAAC,CAAA,EAAAT,EAA2BS,CAAA,CAAA,EAAA,GAA/FH,EAAOI,MAAE,CAAA,CAAAC,+BAA+BA,IAAAA,CAA4B,GAA2BL,EAAAC,IAAA,CAAA,2BAAA,CAAAN,WAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,kBAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,qBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAH,UAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kDAAA,CAAAF,aAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAK/F,IAAMG,EAAQ,CAAEC,EAAG,IAAKC,GAAI,CAAEC,QAAS,CAAA,CAAK,EAAIC,KAAM,CAAA,CAAI,EAC7CL,EAAiCA,KAC7C,IAAMM,EAAoBd,EAAqBS,GAEzCM,EAA+BjB,EAAW,4DAE1CkB,EAAsBjB,EAA0B,uBAChDkB,EAAclB,EAA0B,4BAExCmB,EAA0BF,GAAmB,GAAAG,MAAA,CAAOH,EAAmB,eAEvEI,EAASH,AAAgBI,KAAAA,IAAhBJ,EAA4BK,OAAO,AAACL,CAAAA,EAAc,GAAA,EAAKM,WAAW,CAAC,IAAM,EAExFtB,EAAU,KACT,IAAIuB,EAMJ,OALIT,GAAgCG,IACnCM,EAAK3B,EAAAA,EAAA,CAAA,EAAQK,EAAauB,QAAQ,CAACT,IAAoB,CAAA,EAAA,CAAEU,IAAKR,CAAuB,GACrFhB,EAAayB,GAAG,CAACH,IAGX,KACFA,GACHtB,EAAa0B,MAAM,CAACJ,EAEtB,CACD,EAAG,CAACN,EAAyBF,EAAqBD,EAA6B,EAE/Ed,EAAU,KACT,GAAKiB,GAGL,GAAI,CAACH,GAKDD,AAA6B,IAA7BA,EAAkBe,MAAM,CALO,CAClC3B,EAAa4B,KAAK,CAACZ,GACnB,MACD,CAOAhB,EAAa6B,IAAI,CAACb,EAAyB,CAC1CE,OAAAA,EACAY,KAAM,CAAA,IAER,EAAG,CAACd,EAAyBH,EAA8BD,EAAmBM,EAAO,CACtF\"}"}