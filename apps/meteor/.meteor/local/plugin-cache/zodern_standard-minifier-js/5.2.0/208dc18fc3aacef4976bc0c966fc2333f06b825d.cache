{"code":"function module(e,l,r){let t,a,n,o,c,i;r.export({useOpenIncompatibleModal:()=>s}),r.link(\"@rocket.chat/ui-contexts\",{useSetModal(e){t=e}},0),r.link(\"react\",{default(e){a=e},useCallback(e){n=e}},1),r.link(\"../IframeModal\",{default(e){o=e}},2),r.link(\"../helpers/handleAPIError\",{handleAPIError(e){c=e}},3),r.link(\"./useAppsOrchestration\",{useAppsOrchestration(e){i=e}},4);let s=()=>{let e=t(),l=i();if(!l)throw Error(\"Apps orchestrator is not available\");return n(async(r,t,n)=>{try{let c=await l.buildIncompatibleExternalUrl(r.id,r.marketplaceVersion,t);e(a.createElement(o,{url:c.url,cancel:()=>{e(null),n()},confirm:()=>{e(null),n()}}))}catch(e){c(e)}},[l,e])}}","map":"{\"version\":3,\"sources\":[\"client/views/marketplace/hooks/useOpenIncompatibleModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useSetModal } from '@rocket.chat/ui-contexts';\\nimport React, { useCallback } from 'react';\\n\\nimport IframeModal from '../IframeModal';\\nimport { handleAPIError } from '../helpers/handleAPIError';\\nimport { useAppsOrchestration } from './useAppsOrchestration';\\n\\nexport const useOpenIncompatibleModal = () => {\\n\\tconst setModal = useSetModal();\\n\\n\\tconst appsOrchestrator = useAppsOrchestration();\\n\\n\\tif (!appsOrchestrator) {\\n\\t\\tthrow new Error('Apps orchestrator is not available');\\n\\t}\\n\\n\\treturn useCallback(\\n\\t\\tasync (app, actionName, cancelAction) => {\\n\\t\\t\\tconst handleCancel = () => {\\n\\t\\t\\t\\tsetModal(null);\\n\\t\\t\\t\\tcancelAction();\\n\\t\\t\\t};\\n\\n\\t\\t\\tconst handleConfirm = () => {\\n\\t\\t\\t\\tsetModal(null);\\n\\t\\t\\t\\tcancelAction();\\n\\t\\t\\t};\\n\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst incompatibleData = await appsOrchestrator.buildIncompatibleExternalUrl(app.id, app.marketplaceVersion, actionName);\\n\\t\\t\\t\\tsetModal(<IframeModal url={incompatibleData.url} cancel={handleCancel} confirm={handleConfirm} />);\\n\\t\\t\\t} catch (e) {\\n\\t\\t\\t\\thandleAPIError(e);\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[appsOrchestrator, setModal],\\n\\t);\\n};\\n\",null],\"names\":[\"useSetModal\",\"React\",\"useCallback\",\"IframeModal\",\"handleAPIError\",\"useAppsOrchestration\",\"module\",\"export\",\"useOpenIncompatibleModal\",\"link\",\"v\",\"default\",\"setModal\",\"appsOrchestrator\",\"Error\",\"app\",\"actionName\",\"cancelAction\",\"incompatibleData\",\"buildIncompatibleExternalUrl\",\"id\",\"marketplaceVersion\",\"createElement\",\"url\",\"cancel\",\"handleCancel\",\"confirm\",\"handleConfirm\",\"e\"],\"mappings\":\"2BAAuDA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAvDC,EAAOC,MAAE,CAAA,CAAAC,yBAAmBA,IAAAA,CAA2B,GAAAF,EAAAG,IAAA,CAAA,2BAAA,CAAAT,YAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAT,EAAAS,CAAA,EAAAR,YAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,iBAAA,CAAAE,QAAAD,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,4BAAA,CAAAL,eAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,yBAAA,CAAAJ,qBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAOhD,IAAMF,EAA2BA,KACvC,IAAMI,EAAWZ,IAEXa,EAAmBR,IAEzB,GAAI,CAACQ,EACJ,MAAM,AAAIC,MAAM,sCAGjB,OAAOZ,EACN,MAAOa,EAAKC,EAAYC,KAWvB,GAAI,CACH,IAAMC,EAAmB,MAAML,EAAiBM,4BAA4B,CAACJ,EAAIK,EAAE,CAAEL,EAAIM,kBAAkB,CAAEL,GAC7GJ,EAASX,EAAAqB,aAAA,CAACnB,EAAW,CAACoB,IAAKL,EAAiBK,GAAI,CAACC,OAZ7BC,KACpBb,EAAS,MACTK,GACD,EASwES,QAPlDC,KACrBf,EAAS,MACTK,GACD,CAI+F,GAC/F,CAAE,MAAOW,EAAG,CACXxB,EAAewB,EAChB,CACD,EACA,CAACf,EAAkBD,EAAS,CAE9B\"}"}