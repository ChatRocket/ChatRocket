{"code":"function module(t,e,n){var a,o,l,i,c,r,u,s,d=[\"attachmentName\",\"headers\",\"dataAvailable\",\"dataExtractor\"];n.link(\"@babel/runtime/helpers/extends\",{default:function(t){a=t}},0),n.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(t){o=t}},1),n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(t){l=t}},2),n.link(\"@rocket.chat/fuselage\",{IconButton:function(t){i=t}},0),n.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(t){c=t}},1),n.link(\"react\",{default:function(t){r=t}},2),n.link(\"react-i18next\",{useTranslation:function(t){u=t}},3),n.link(\"../../lib/download\",{downloadCsvAs:function(t){s=t}},4),n.exportDefault(function(t){var e=t.attachmentName,n=t.headers,f=t.dataAvailable,b=t.dataExtractor,h=l(t,d),m=u().t,k=c();return r.createElement(i,a({secondary:!0,small:!0,disabled:!f,onClick:function(){f&&Promise.resolve(b()).then(function(t){t&&s([n].concat(o(t)),e)}).catch(function(t){k({type:\"error\",message:t})})},\"aria-label\":m(\"Download_Info\"),icon:\"download\"},h))})}","map":"{\"version\":3,\"sources\":[\"client/components/dashboards/DownloadDataButton.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { Box } from '@rocket.chat/fuselage';\\nimport { IconButton } from '@rocket.chat/fuselage';\\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport type { ComponentProps, ReactElement } from 'react';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { downloadCsvAs } from '../../lib/download';\\n\\ntype RowFor<THeaders extends readonly string[]> = readonly unknown[] & {\\n\\tlength: THeaders['length'];\\n};\\n\\ntype DownloadDataButtonProps<THeaders extends readonly string[]> = {\\n\\tattachmentName: string;\\n\\theaders: RowFor<THeaders>;\\n\\tdataAvailable: boolean;\\n\\tdataExtractor: () => Promise<RowFor<THeaders>[] | undefined> | RowFor<THeaders>[] | undefined;\\n} & Omit<ComponentProps<typeof Box>, 'attachmentName' | 'headers' | 'data'>;\\n\\nconst DownloadDataButton = <H extends readonly string[]>({\\n\\tattachmentName,\\n\\theaders,\\n\\tdataAvailable,\\n\\tdataExtractor,\\n\\t...props\\n}: DownloadDataButtonProps<H>): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst handleClick = (): void => {\\n\\t\\tif (!dataAvailable) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tPromise.resolve(dataExtractor())\\n\\t\\t\\t.then((data) => {\\n\\t\\t\\t\\tif (!data) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tdownloadCsvAs([headers, ...data], attachmentName);\\n\\t\\t\\t})\\n\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t});\\n\\t};\\n\\n\\treturn (\\n\\t\\t<IconButton\\n\\t\\t\\tsecondary\\n\\t\\t\\tsmall\\n\\t\\t\\tdisabled={!dataAvailable}\\n\\t\\t\\tonClick={handleClick}\\n\\t\\t\\taria-label={t('Download_Info')}\\n\\t\\t\\ticon='download'\\n\\t\\t\\t{...props}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default DownloadDataButton;\\n\",null],\"names\":[\"_extends\",\"_toConsumableArray\",\"_objectWithoutProperties\",\"IconButton\",\"useToastMessageDispatch\",\"React\",\"useTranslation\",\"downloadCsvAs\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"attachmentName\",\"headers\",\"dataAvailable\",\"dataExtractor\",\"props\",\"_excluded\",\"t\",\"_useTranslation\",\"dispatchToastMessage\",\"createElement\",\"secondary\",\"small\",\"disabled\",\"onClick\",\"Promise\",\"resolve\",\"then\",\"data\",\"concat\",\"catch\",\"error\",\"type\",\"message\",\"icon\"],\"mappings\":\"2BACAA,EAAmDC,EAAAC,EAAnDC,EAAmDC,EAAAC,EAAAC,EAAAC,iEAA1CC,EAAUC,IAAE,CAAA,iCAA8B,CAAAC,QAAA,SAAAC,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iDAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAA1CH,EAAYC,IAAA,CAAM,wBAAwB,CAAAN,WAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAL,wBAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAH,eAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qBAAA,CAAAF,cAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAnDH,EAAOI,aAAY,CAmBQ,SAAAC,CAAA,EAMoB,IAL9CC,EAAcD,EAAdC,cAAc,CACdC,EAAOF,EAAPE,OAAO,CACPC,EAAaH,EAAbG,aAAa,CACbC,EAAaJ,EAAbI,aAAa,CACVC,EAAKhB,EAAAW,EAAAM,GAEAC,EAACC,AAAKf,IAANc,CAAC,CACHE,EAAuBlB,IAoB7B,OACCC,EAAAkB,aAAA,CAACpB,EAAUH,EAAA,CACVwB,UAAS,CAAA,EACTC,MAAK,CAAA,EACLC,SAAU,CAACV,EACXW,QAvBkB,WACdX,GAILY,QAAQC,OAAO,CAACZ,KACda,IAAI,CAAC,SAACC,CAAI,EACLA,GAILxB,EAAa,CAAEQ,EAAO,CAAAiB,MAAA,CAAA/B,EAAK8B,IAAOjB,EACnC,GACCmB,KAAK,CAAC,SAACC,CAAK,EACZZ,EAAqB,CAAEa,KAAM,QAASC,QAASF,CAAK,EACrD,EACF,EAQE,aAAYd,EAAE,iBACdiB,KAAK,UAAU,EACXnB,GAGP\"}"}