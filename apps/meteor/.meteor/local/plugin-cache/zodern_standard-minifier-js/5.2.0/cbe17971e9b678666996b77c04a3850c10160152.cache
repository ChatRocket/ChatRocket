{"code":"function module(e,l,t){let n,a,i,s,o,u,r,d,m,c;t.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),t.link(\"@rocket.chat/fuselage\",{PaginatedSelectFiltered(e){a=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue(e){i=e}},1),t.link(\"react\",{default(e){s=e},memo(e){o=e},useMemo(e){u=e},useState(e){r=e}},2),t.link(\"../hooks/lists/useRecordList\",{useRecordList(e){d=e}},3),t.link(\"../lib/asyncState\",{AsyncStatePhase(e){m=e}},4),t.link(\"./Omnichannel/hooks/useAvailableAgentsList\",{useAvailableAgentsList(e){c=e}},5),t.exportDefault(o(e=>{let{value:l,currentExtension:t,onChange:o=()=>void 0,haveAll:h=!1}=e,[k,v]=r(\"\"),b=i(k,500),{itemsList:f,loadMoreItems:p}=c(u(()=>({text:b,includeExtension:t,haveAll:h}),[t,b,h])),{phase:g,items:A,itemCount:L}=d(f),S=A.sort((e,t)=>{var n,a;return\"all\"===l?-1:null!=e&&null!==(n=e.username)&&void 0!==n&&n.localeCompare((null==t?void 0:t.username)||\"\")?1:null!=t&&null!==(a=t.username)&&void 0!==a&&a.localeCompare((null==t?void 0:t.username)||\"\")?-1:0}).map(e=>n(n({},e),{},{label:(null==e?void 0:e.username)||\"\",value:(null==e?void 0:e.username)||\"\"}));return s.createElement(a,{value:l,onChange:o,flexShrink:0,filter:k,setFilter:v,options:S,endReached:g===m.LOADING?()=>void 0:e=>p(e,Math.min(50,L))})}))}","map":"{\"version\":3,\"sources\":[\"client/components/AutoCompleteAgentWithoutExtension.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatAgent } from '@rocket.chat/core-typings';\\nimport { PaginatedSelectFiltered } from '@rocket.chat/fuselage';\\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\\nimport React, { memo, useMemo, useState } from 'react';\\n\\nimport { useRecordList } from '../hooks/lists/useRecordList';\\nimport { AsyncStatePhase } from '../lib/asyncState';\\nimport { useAvailableAgentsList } from './Omnichannel/hooks/useAvailableAgentsList';\\n\\ntype AutoCompleteAgentProps = {\\n\\tonChange: (value: string) => void;\\n\\thaveAll?: boolean;\\n\\tvalue?: string;\\n\\tcurrentExtension?: string;\\n};\\n\\nconst AutoCompleteAgentWithoutExtension = (props: AutoCompleteAgentProps) => {\\n\\tconst { value, currentExtension, onChange = (): void => undefined, haveAll = false } = props;\\n\\tconst [agentsFilter, setAgentsFilter] = useState<string | number | undefined>('');\\n\\n\\tconst debouncedAgentsFilter = useDebouncedValue(agentsFilter as string, 500);\\n\\n\\tconst { itemsList: AgentsList, loadMoreItems: loadMoreAgents } = useAvailableAgentsList(\\n\\t\\tuseMemo(\\n\\t\\t\\t() => ({ text: debouncedAgentsFilter, includeExtension: currentExtension, haveAll }),\\n\\t\\t\\t[currentExtension, debouncedAgentsFilter, haveAll],\\n\\t\\t),\\n\\t);\\n\\tconst { phase: agentsPhase, items: agentsItems, itemCount: agentsTotal } = useRecordList(AgentsList);\\n\\tconst sortedByName = agentsItems\\n\\t\\t.sort((a, b) => {\\n\\t\\t\\tif (value === 'all') {\\n\\t\\t\\t\\treturn -1;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (a?.username?.localeCompare(b?.username || '')) {\\n\\t\\t\\t\\treturn 1;\\n\\t\\t\\t}\\n\\t\\t\\tif (b?.username?.localeCompare(b?.username || '')) {\\n\\t\\t\\t\\treturn -1;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn 0;\\n\\t\\t})\\n\\t\\t.map((agent): ILivechatAgent & { label: string; value: string } => ({\\n\\t\\t\\t...agent,\\n\\t\\t\\tlabel: agent?.username || '',\\n\\t\\t\\tvalue: agent?.username || '',\\n\\t\\t}));\\n\\n\\treturn (\\n\\t\\t<PaginatedSelectFiltered\\n\\t\\t\\tvalue={value}\\n\\t\\t\\tonChange={onChange}\\n\\t\\t\\tflexShrink={0}\\n\\t\\t\\tfilter={agentsFilter as string | undefined}\\n\\t\\t\\tsetFilter={setAgentsFilter}\\n\\t\\t\\toptions={sortedByName}\\n\\t\\t\\tendReached={\\n\\t\\t\\t\\tagentsPhase === AsyncStatePhase.LOADING ? (): void => undefined : (start): void => loadMoreAgents(start, Math.min(50, agentsTotal))\\n\\t\\t\\t}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(AutoCompleteAgentWithoutExtension);\\n\",null],\"names\":[\"_objectSpread\",\"PaginatedSelectFiltered\",\"useDebouncedValue\",\"React\",\"memo\",\"useMemo\",\"useState\",\"useRecordList\",\"AsyncStatePhase\",\"useAvailableAgentsList\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"props\",\"value\",\"currentExtension\",\"onChange\",\"undefined\",\"haveAll\",\"agentsFilter\",\"setAgentsFilter\",\"debouncedAgentsFilter\",\"itemsList\",\"AgentsList\",\"loadMoreItems\",\"loadMoreAgents\",\"text\",\"includeExtension\",\"phase\",\"agentsPhase\",\"items\",\"agentsItems\",\"itemCount\",\"agentsTotal\",\"sortedByName\",\"sort\",\"a\",\"b\",\"_a$username\",\"_b$username\",\"username\",\"localeCompare\",\"map\",\"agent\",\"label\",\"createElement\",\"flexShrink\",\"filter\",\"setFilter\",\"options\",\"endReached\",\"LOADING\",\"start\",\"Math\",\"min\"],\"mappings\":\"2BACAA,EAAAC,EAAgEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAvDC,EAAAC,IAAA,CAAA,uCAAuD,CAAAC,QAAAC,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAvDH,EAAyBC,IAAA,CAAM,wBAAwB,CAAAV,wBAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAT,kBAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAV,EAAAU,CAAA,EAAAT,KAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,QAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,+BAAA,CAAAJ,cAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oBAAA,CAAAH,gBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6CAAA,CAAAF,uBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAhEH,EAAOI,aAAE,CAgEMV,EAjD4BW,IAC1C,GAAM,CAAEC,MAAAA,CAAK,CAAEC,iBAAAA,CAAgB,CAAEC,SAAAA,EAAWA,IAAYC,KAAAA,CAAS,CAAEC,QAAAA,EAAU,CAAA,CAAA,CAAO,CAAGL,EACjF,CAACM,EAAcC,EAAgB,CAAGhB,EAAsC,IAExEiB,EAAwBrB,EAAkBmB,EAAwB,KAElE,CAAEG,UAAWC,CAAU,CAAEC,cAAeC,CAAAA,CAAgB,CAAGlB,EAChEJ,EACC,IAAO,CAAA,CAAEuB,KAAML,EAAuBM,iBAAkBZ,EAAkBG,QAAAA,CAAO,CAAA,EACjF,CAACH,EAAkBM,EAAuBH,EAAQ,GAG9C,CAAEU,MAAOC,CAAW,CAAEC,MAAOC,CAAW,CAAEC,UAAWC,CAAAA,CAAa,CAAG5B,EAAckB,GACnFW,EAAeH,EACnBI,IAAI,CAAC,CAACC,EAAGC,KAAK,IAAAC,EAAAC,QACd,AAAIzB,AAAU,QAAVA,EACI,GAGJsB,MAAAA,GAAC,AAAU,OAAVE,CAAAA,EAADF,EAAGI,QAAQ,AAARA,GAAQF,AAAA,KAAA,IAAAA,GAAXA,EAAaG,aAAa,CAAC,AAAAJ,CAAAA,MAAAA,EAAC,KAAA,EAADA,EAAGG,QAAQ,AAARA,GAAY,IACtC,EAEJH,MAAAA,GAAC,AAAU,OAAVE,CAAAA,EAADF,EAAGG,QAAQ,AAARA,GAAQD,AAAA,KAAA,IAAAA,GAAXA,EAAaE,aAAa,CAAC,AAAAJ,CAAAA,MAAAA,EAAC,KAAA,EAADA,EAAGG,QAAQ,AAARA,GAAY,IACtC,GAGD,CACR,GACCE,GAAG,CAAEC,GAAK7C,EAAAA,EAAA,CAAA,EACP6C,GAAK,CAAA,EAAA,CACRC,MAAO,AAAAD,CAAAA,MAAAA,EAAK,KAAA,EAALA,EAAOH,QAAQ,AAARA,GAAY,GAC1B1B,MAAO,AAAA6B,CAAAA,MAAAA,EAAK,KAAA,EAALA,EAAOH,QAAQ,AAARA,GAAY,EAAE,IAG9B,OACCvC,EAAA4C,aAAA,CAAC9C,EAAuB,CACvBe,MAAOA,EACPE,SAAUA,EACV8B,WAAY,EACZC,OAAQ5B,EACR6B,UAAW5B,EACX6B,QAASf,EACTgB,WACCrB,IAAgBvB,EAAgB6C,OAAO,CAAG,IAAYlC,KAAAA,EAAamC,GAAgB3B,EAAe2B,EAAOC,KAAKC,GAAG,CAAC,GAAIrB,GACtH,EAGJ\"}"}