{"code":"function module(e,o,n){var t,i,c,l,f,a,u,r,m,d,C,s,_,p,k,V,E,v,P,g,h;n.link(\"@rocket.chat/fuselage-hooks\",{useOutsideClick:function(e){t=e},useEffectEvent:function(e){i=e}},0),n.link(\"@rocket.chat/ui-video-conf\",{VideoConfPopup:function(e){c=e},VideoConfPopupHeader:function(e){l=e},VideoConfPopupContent:function(e){f=e},VideoConfPopupControllers:function(e){a=e},VideoConfController:function(e){u=e},useVideoConfControllers:function(e){r=e},VideoConfButton:function(e){m=e},VideoConfPopupFooter:function(e){d=e},VideoConfPopupTitle:function(e){C=e},VideoConfPopupFooterButtons:function(e){s=e}},1),n.link(\"react\",{default:function(e){_=e},useCallback:function(e){p=e},useRef:function(e){k=e}},2),n.link(\"react-i18next\",{useTranslation:function(e){V=e}},3),n.link(\"../../../../../../contexts/VideoConfContext\",{useVideoConfSetPreferences:function(e){E=e},useVideoConfCapabilities:function(e){v=e},useVideoConfPreferences:function(e){P=e}},4),n.link(\"../../hooks/useVideoConfRoomName\",{useVideoConfRoomName:function(e){g=e}},5),n.link(\"./VideoConfPopupRoomInfo\",{default:function(e){h=e}},6),n.exportDefault(function(e){var o=e.id,n=e.loading,N=e.room,x=e.onClose,S=e.onConfirm,b=V().t,R=k(null);t([R],n?function(){}:x);var T=E(),y=P(),M=r(y),w=M.controllersConfig,B=M.handleToggleMic,F=M.handleToggleCam,D=v(),H=g(N),I=\"d\"===N.t?\"\"+b(\"Start_a_call_with__roomName__\",{roomName:H}):\"\"+b(\"Start_a_call_in__roomName__\",{roomName:H}),L=!!D.cam,O=!!D.mic,j=i(function(){T(w),S()}),q=p(function(e){e&&(R.current=e,e.addEventListener(\"keydown\",function(e){\"Escape\"===e.key&&x()}))},[x]);return _.createElement(c,{ref:q,id:o,\"aria-label\":I},_.createElement(l,null,_.createElement(C,{text:b(\"Start_a_call\")}),(L||O)&&_.createElement(a,null,L&&_.createElement(u,{active:w.cam,title:b(w.cam?\"Cam_on\":\"Cam_off\"),icon:w.cam?\"video\":\"video-off\",onClick:F}),O&&_.createElement(u,{active:w.mic,title:b(w.mic?\"Mic_on\":\"Mic_off\"),icon:w.mic?\"mic\":\"mic-off\",onClick:B}))),_.createElement(f,null,_.createElement(h,{room:N})),_.createElement(d,null,_.createElement(s,null,_.createElement(m,{disabled:n,primary:!0,onClick:j},b(\"Start_call\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/VideoConference/VideoConfPopups/VideoConfPopup/StartCallPopup.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { useOutsideClick, useEffectEvent } from '@rocket.chat/fuselage-hooks';\\nimport {\\n\\tVideoConfPopup,\\n\\tVideoConfPopupHeader,\\n\\tVideoConfPopupContent,\\n\\tVideoConfPopupControllers,\\n\\tVideoConfController,\\n\\tuseVideoConfControllers,\\n\\tVideoConfButton,\\n\\tVideoConfPopupFooter,\\n\\tVideoConfPopupTitle,\\n\\tVideoConfPopupFooterButtons,\\n} from '@rocket.chat/ui-video-conf';\\nimport type { KeyboardEvent, ReactElement } from 'react';\\nimport React, { useCallback, useRef } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useVideoConfSetPreferences, useVideoConfCapabilities, useVideoConfPreferences } from '../../../../../../contexts/VideoConfContext';\\nimport { useVideoConfRoomName } from '../../hooks/useVideoConfRoomName';\\nimport VideoConfPopupRoomInfo from './VideoConfPopupRoomInfo';\\n\\ntype StartCallPopupProps = {\\n\\tid: string;\\n\\tloading: boolean;\\n\\troom: IRoom;\\n\\tonClose: () => void;\\n\\tonConfirm: () => void;\\n};\\n\\nconst StartCallPopup = ({ id, loading, room, onClose, onConfirm }: StartCallPopupProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst ref = useRef(null);\\n\\tuseOutsideClick([ref], !loading ? onClose : () => undefined);\\n\\n\\tconst setPreferences = useVideoConfSetPreferences();\\n\\tconst videoConfPreferences = useVideoConfPreferences();\\n\\tconst { controllersConfig, handleToggleMic, handleToggleCam } = useVideoConfControllers(videoConfPreferences);\\n\\tconst capabilities = useVideoConfCapabilities();\\n\\tconst roomName = useVideoConfRoomName(room);\\n\\n\\tconst dialogLabel =\\n\\t\\troom.t === 'd' ? `${t('Start_a_call_with__roomName__', { roomName })}` : `${t('Start_a_call_in__roomName__', { roomName })}`;\\n\\n\\tconst showCam = !!capabilities.cam;\\n\\tconst showMic = !!capabilities.mic;\\n\\n\\tconst handleStartCall = useEffectEvent(() => {\\n\\t\\tsetPreferences(controllersConfig);\\n\\t\\tonConfirm();\\n\\t});\\n\\n\\tconst callbackRef = useCallback(\\n\\t\\t(node) => {\\n\\t\\t\\tif (!node) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tref.current = node;\\n\\t\\t\\tnode.addEventListener('keydown', (e: KeyboardEvent) => {\\n\\t\\t\\t\\tif (e.key === 'Escape') {\\n\\t\\t\\t\\t\\tonClose();\\n\\t\\t\\t\\t}\\n\\t\\t\\t});\\n\\t\\t},\\n\\t\\t[onClose],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<VideoConfPopup ref={callbackRef} id={id} aria-label={dialogLabel}>\\n\\t\\t\\t<VideoConfPopupHeader>\\n\\t\\t\\t\\t<VideoConfPopupTitle text={t('Start_a_call')} />\\n\\t\\t\\t\\t{(showCam || showMic) && (\\n\\t\\t\\t\\t\\t<VideoConfPopupControllers>\\n\\t\\t\\t\\t\\t\\t{showCam && (\\n\\t\\t\\t\\t\\t\\t\\t<VideoConfController\\n\\t\\t\\t\\t\\t\\t\\t\\tactive={controllersConfig.cam}\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle={controllersConfig.cam ? t('Cam_on') : t('Cam_off')}\\n\\t\\t\\t\\t\\t\\t\\t\\ticon={controllersConfig.cam ? 'video' : 'video-off'}\\n\\t\\t\\t\\t\\t\\t\\t\\tonClick={handleToggleCam}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t{showMic && (\\n\\t\\t\\t\\t\\t\\t\\t<VideoConfController\\n\\t\\t\\t\\t\\t\\t\\t\\tactive={controllersConfig.mic}\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle={controllersConfig.mic ? t('Mic_on') : t('Mic_off')}\\n\\t\\t\\t\\t\\t\\t\\t\\ticon={controllersConfig.mic ? 'mic' : 'mic-off'}\\n\\t\\t\\t\\t\\t\\t\\t\\tonClick={handleToggleMic}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</VideoConfPopupControllers>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</VideoConfPopupHeader>\\n\\t\\t\\t<VideoConfPopupContent>\\n\\t\\t\\t\\t<VideoConfPopupRoomInfo room={room} />\\n\\t\\t\\t</VideoConfPopupContent>\\n\\t\\t\\t<VideoConfPopupFooter>\\n\\t\\t\\t\\t<VideoConfPopupFooterButtons>\\n\\t\\t\\t\\t\\t<VideoConfButton disabled={loading} primary onClick={handleStartCall}>\\n\\t\\t\\t\\t\\t\\t{t('Start_call')}\\n\\t\\t\\t\\t\\t</VideoConfButton>\\n\\t\\t\\t\\t</VideoConfPopupFooterButtons>\\n\\t\\t\\t</VideoConfPopupFooter>\\n\\t\\t</VideoConfPopup>\\n\\t);\\n};\\n\\nexport default StartCallPopup;\\n\",null],\"names\":[\"useOutsideClick\",\"useEffectEvent\",\"VideoConfPopup\",\"VideoConfPopupHeader\",\"VideoConfPopupContent\",\"VideoConfPopupControllers\",\"VideoConfController\",\"useVideoConfControllers\",\"VideoConfButton\",\"VideoConfPopupFooter\",\"VideoConfPopupTitle\",\"VideoConfPopupFooterButtons\",\"React\",\"useCallback\",\"useRef\",\"useTranslation\",\"useVideoConfSetPreferences\",\"useVideoConfCapabilities\",\"useVideoConfPreferences\",\"useVideoConfRoomName\",\"VideoConfPopupRoomInfo\",\"module\",\"link\",\"v\",\"exportDefault\",\"_ref\",\"id\",\"loading\",\"room\",\"onClose\",\"onConfirm\",\"t\",\"_useTranslation\",\"ref\",\"setPreferences\",\"videoConfPreferences\",\"_useVideoConfControll\",\"controllersConfig\",\"handleToggleMic\",\"handleToggleCam\",\"capabilities\",\"roomName\",\"dialogLabel\",\"showCam\",\"cam\",\"showMic\",\"mic\",\"handleStartCall\",\"callbackRef\",\"node\",\"current\",\"addEventListener\",\"e\",\"key\",\"createElement\",\"text\",\"active\",\"title\",\"icon\",\"onClick\",\"disabled\",\"primary\"],\"mappings\":\"uBA8BA,IA7BAA,EAASC,EAAqEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAApDC,EAAgBC,IAAA,CAAA,8BAAmC,CAACtB,gBAAA,SAAAuB,CAAA,EAAAvB,EAAAuB,CAAA,EAAAtB,eAAA,SAAAsB,CAAA,EAAAtB,EAAAsB,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,6BAAA,CAAApB,eAAA,SAAAqB,CAAA,EAAArB,EAAAqB,CAAA,EAAApB,qBAAA,SAAAoB,CAAA,EAAApB,EAAAoB,CAAA,EAAAnB,sBAAA,SAAAmB,CAAA,EAAAnB,EAAAmB,CAAA,EAAAlB,0BAAA,SAAAkB,CAAA,EAAAlB,EAAAkB,CAAA,EAAAjB,oBAAA,SAAAiB,CAAA,EAAAjB,EAAAiB,CAAA,EAAAhB,wBAAA,SAAAgB,CAAA,EAAAhB,EAAAgB,CAAA,EAAAf,gBAAA,SAAAe,CAAA,EAAAf,EAAAe,CAAA,EAAAd,qBAAA,SAAAc,CAAA,EAAAd,EAAAc,CAAA,EAAAb,oBAAA,SAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,4BAAA,SAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAC,CAAA,EAAAX,EAAAW,CAAA,EAAAV,YAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,OAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gBAAA,CAAAP,eAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,8CAAA,CAAAN,2BAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,yBAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,wBAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,mCAAA,CAAAH,qBAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2BAAA,CAAA,QAAA,SAAAC,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAA9EF,EAAOG,aAAE,CA6Bc,SAAAC,CAAA,EAAiF,IAA9EC,EAAED,EAAFC,EAAE,CAAEC,EAAOF,EAAPE,OAAO,CAAEC,EAAIH,EAAJG,IAAI,CAAEC,EAAOJ,EAAPI,OAAO,CAAEC,EAASL,EAATK,SAAS,CACtDC,EAACC,AAAKjB,IAANgB,CAAC,CACHE,EAAMnB,EAAO,MACnBd,EAAgB,CAACiC,EAAI,CAAE,AAACN,EAAoB,WAAe,EAAzBE,GAElC,IAAMK,EAAiBlB,IACjBmB,EAAuBjB,IAC7BkB,EAAgE7B,EAAwB4B,GAAhFE,EAAiBD,EAAjBC,iBAAiB,CAAEC,EAAeF,EAAfE,eAAe,CAAEC,EAAeH,EAAfG,eAAe,CACrDC,EAAevB,IACfwB,EAAWtB,EAAqBS,GAEhCc,EACLd,AAAW,MAAXA,EAAKG,CAAC,CAAQ,GAAMA,EAAE,gCAAiC,CAAEU,SAAAA,CAAQ,GAAG,GAAQV,EAAE,8BAA+B,CAAEU,SAAAA,CAAQ,GAElHE,EAAU,CAAC,CAACH,EAAaI,GAAG,CAC5BC,EAAU,CAAC,CAACL,EAAaM,GAAG,CAE5BC,EAAkB9C,EAAe,WACtCiC,EAAeG,GACfP,GACD,GAEMkB,EAAcnC,EACnB,SAACoC,CAAI,EACCA,IAILhB,EAAIiB,OAAO,CAAGD,EACdA,EAAKE,gBAAgB,CAAC,UAAW,SAACC,CAAgB,EACnC,WAAVA,EAAEC,GAAG,EACRxB,GAEF,GACD,EACA,CAACA,EAAQ,EAGV,OACCjB,EAAA0C,aAAA,CAACpD,EAAc,CAAC+B,IAAKe,EAAatB,GAAIA,EAAI,aAAYgB,CAAY,EACjE9B,EAAA0C,aAAA,CAACnD,EAAoB,KACpBS,EAAA0C,aAAA,CAAC5C,EAAmB,CAAC6C,KAAMxB,EAAE,eAAgB,GAC5C,AAACY,CAAAA,GAAWE,CAAAA,GACZjC,EAAA0C,aAAA,CAACjD,EAAyB,KACxBsC,GACA/B,EAAA0C,aAAA,CAAChD,EAAmB,CACnBkD,OAAQnB,EAAkBO,GAAI,CAC9Ba,KAAK,CAA0B1B,EAAE,AAA1BM,EAAkBO,GAAG,CAAK,SAAc,WAC/Cc,KAAMrB,EAAkBO,GAAG,CAAG,QAAU,YACxCe,QAASpB,CAAgB,GAG1BM,GACAjC,EAAA0C,aAAA,CAAChD,EAAmB,CACnBkD,OAAQnB,EAAkBS,GAAI,CAC9BW,KAAK,CAA0B1B,EAAE,AAA1BM,EAAkBS,GAAG,CAAK,SAAc,WAC/CY,KAAMrB,EAAkBS,GAAG,CAAG,MAAQ,UACtCa,QAASrB,CAAgB,KAM9B1B,EAAA0C,aAAA,CAAClD,EAAqB,KACrBQ,EAAA0C,aAAA,CAAClC,EAAsB,CAACQ,KAAMA,CAAK,IAEpChB,EAAA0C,aAAA,CAAC7C,EAAoB,KACpBG,EAAA0C,aAAA,CAAC3C,EAA2B,KAC3BC,EAAA0C,aAAA,CAAC9C,EAAe,CAACoD,SAAUjC,EAASkC,QAAO,CAAA,EAACF,QAASZ,CAAgB,EACnEhB,EAAE,iBAMT\"}"}