{"code":"function module(e,t,n){let l,a,i,o,r,c,s,m,u,d,f;n.link(\"@nivo/bar\",{ResponsiveBar(e){l=e}},0),n.link(\"@rocket.chat/fuselage\",{Box(e){a=e},Flex(e){i=e},IconButton(e){o=e},Margins(e){r=e},Skeleton(e){c=e}},1),n.link(\"@rocket.chat/fuselage-tokens/colors\",{default(e){s=e}},2),n.link(\"moment\",{default(e){m=e}},3),n.link(\"react\",{default(e){u=e},useMemo(e){d=e}},4),n.link(\"./useWeeklyChatActivity\",{useWeeklyChatActivity(e){f=e}},5),n.exportDefault(e=>{let{displacement:t,onPreviousDateClick:n,onNextDateClick:g,timezone:y}=e,{data:h}=f({displacement:t,utc:\"utc\"===y}),k=d(()=>{if(!h)return null;let e=m(h.day),t=m(h.day).subtract(6,\"days\");return\"\".concat(t.format(\"L\"),\" - \").concat(e.format(\"L\"))},[h]),p=d(()=>{var e,t,n,l;return null!==(e=null==h?void 0:null===(t=h.month)||void 0===t?void 0:null===(n=t.map(e=>{let{users:t,day:n,month:l,year:a}=e;return{users:t,day:m({year:a,month:l-1,day:n})}}))||void 0===n?void 0:null===(l=n.sort((e,t)=>{let{day:n}=e,{day:l}=t;return n.diff(l)}))||void 0===l?void 0:l.map(e=>{let{users:t,day:n}=e;return{users:t,day:String(n.valueOf())}}))&&void 0!==e?e:[]},[h]);return u.createElement(u.Fragment,null,u.createElement(i.Container,{alignItems:\"center\",justifyContent:\"center\"},u.createElement(a,null,u.createElement(o,{icon:\"chevron-down\",verticalAlign:\"middle\",small:!0,onClick:n}),u.createElement(i.Item,{basis:\"50%\"},u.createElement(r,{inline:8},u.createElement(a,{is:\"span\",textAlign:\"center\"},k))),u.createElement(o,{icon:\"chevron-down\",small:!0,disabled:0===t,onClick:g}))),u.createElement(i.Container,null,h?u.createElement(a,{height:196},u.createElement(i.Item,{align:\"stretch\",grow:1,shrink:0},u.createElement(a,{position:\"relative\"},u.createElement(a,{position:\"absolute\",width:\"full\",height:\"full\"},u.createElement(l,{data:p,indexBy:\"day\",keys:[\"users\"],groupMode:\"grouped\",padding:.25,margin:{bottom:20},colors:[s.p500],enableLabel:!1,enableGridY:!1,axisTop:null,axisRight:null,axisBottom:{tickSize:0,tickPadding:4,tickRotation:0,tickValues:\"every 3 days\",format:e=>m(parseInt(e,10)).format(\"L\")},axisLeft:null,animate:!0,motionConfig:\"stiff\",theme:{axis:{ticks:{text:{fill:s.n600,fontFamily:'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',fontSize:\"10px\",fontStyle:\"normal\",fontWeight:600,letterSpacing:\"0.2px\",lineHeight:\"12px\"}}}}}))))):u.createElement(c,{variant:\"rect\",height:196})))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/engagementDashboard/users/ContentForDays.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { ResponsiveBar } from '@nivo/bar';\\nimport { Box, Flex, IconButton, Margins, Skeleton } from '@rocket.chat/fuselage';\\nimport colors from '@rocket.chat/fuselage-tokens/colors';\\nimport moment from 'moment';\\nimport type { ReactElement } from 'react';\\nimport React, { useMemo } from 'react';\\n\\nimport { useWeeklyChatActivity } from './useWeeklyChatActivity';\\n\\ntype ContentForDaysProps = {\\n\\tdisplacement: number;\\n\\tonPreviousDateClick: () => void;\\n\\tonNextDateClick: () => void;\\n\\ttimezone: 'utc' | 'local';\\n};\\n\\nconst ContentForDays = ({ displacement, onPreviousDateClick, onNextDateClick, timezone }: ContentForDaysProps): ReactElement => {\\n\\tconst utc = timezone === 'utc';\\n\\tconst { data } = useWeeklyChatActivity({ displacement, utc });\\n\\n\\tconst formattedCurrentDate = useMemo(() => {\\n\\t\\tif (!data) {\\n\\t\\t\\treturn null;\\n\\t\\t}\\n\\n\\t\\tconst endOfWeek = moment(data.day);\\n\\t\\tconst startOfWeek = moment(data.day).subtract(6, 'days');\\n\\t\\treturn `${startOfWeek.format('L')} - ${endOfWeek.format('L')}`;\\n\\t}, [data]);\\n\\n\\tconst values = useMemo(\\n\\t\\t() =>\\n\\t\\t\\tdata?.month\\n\\t\\t\\t\\t?.map(({ users, day, month, year }) => ({\\n\\t\\t\\t\\t\\tusers,\\n\\t\\t\\t\\t\\tday: moment({ year, month: month - 1, day }),\\n\\t\\t\\t\\t}))\\n\\t\\t\\t\\t?.sort(({ day: a }, { day: b }) => a.diff(b))\\n\\t\\t\\t\\t?.map(({ users, day }) => ({ users, day: String(day.valueOf()) })) ?? [],\\n\\t\\t[data],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<Flex.Container alignItems='center' justifyContent='center'>\\n\\t\\t\\t\\t<Box>\\n\\t\\t\\t\\t\\t<IconButton icon='chevron-down' verticalAlign='middle' small onClick={onPreviousDateClick} />\\n\\t\\t\\t\\t\\t<Flex.Item basis='50%'>\\n\\t\\t\\t\\t\\t\\t<Margins inline={8}>\\n\\t\\t\\t\\t\\t\\t\\t<Box is='span' textAlign='center'>\\n\\t\\t\\t\\t\\t\\t\\t\\t{formattedCurrentDate}\\n\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t</Margins>\\n\\t\\t\\t\\t\\t</Flex.Item>\\n\\t\\t\\t\\t\\t<IconButton icon='chevron-down' small disabled={displacement === 0} onClick={onNextDateClick} />\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</Flex.Container>\\n\\t\\t\\t<Flex.Container>\\n\\t\\t\\t\\t{data ? (\\n\\t\\t\\t\\t\\t<Box height={196}>\\n\\t\\t\\t\\t\\t\\t<Flex.Item align='stretch' grow={1} shrink={0}>\\n\\t\\t\\t\\t\\t\\t\\t<Box position='relative'>\\n\\t\\t\\t\\t\\t\\t\\t\\t<Box position='absolute' width='full' height='full'>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ResponsiveBar\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata={values}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tindexBy='day'\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tkeys={['users']}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tgroupMode='grouped'\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tpadding={0.25}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmargin={{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t// TODO: Get it from theme\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tbottom: 20,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcolors={[\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t// TODO: Get it from theme\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcolors.p500,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t]}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tenableLabel={false}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tenableGridY={false}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\taxisTop={null}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\taxisRight={null}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\taxisBottom={{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttickSize: 0,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t// TODO: Get it from theme\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttickPadding: 4,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttickRotation: 0,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttickValues: 'every 3 days',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tformat: (timestamp): string => moment(parseInt(timestamp, 10)).format('L'),\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\taxisLeft={null}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tanimate={true}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmotionConfig='stiff'\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttheme={{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t// TODO: Get it from theme\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\taxis: {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tticks: {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttext: {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfill: colors.n600,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfontFamily:\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t'Inter, -apple-system, system-ui, \\\"Segoe UI\\\", Roboto, Oxygen, Ubuntu, Cantarell, \\\"Helvetica Neue\\\", \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\", \\\"Meiryo UI\\\", Arial, sans-serif',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfontSize: '10px',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfontStyle: 'normal',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfontWeight: 600,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tletterSpacing: '0.2px',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tlineHeight: '12px',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t</Flex.Item>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t) : (\\n\\t\\t\\t\\t\\t<Skeleton variant='rect' height={196} />\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</Flex.Container>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default ContentForDays;\\n\",null],\"names\":[\"ResponsiveBar\",\"Box\",\"Flex\",\"IconButton\",\"Margins\",\"Skeleton\",\"colors\",\"moment\",\"React\",\"useMemo\",\"useWeeklyChatActivity\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"displacement\",\"onPreviousDateClick\",\"onNextDateClick\",\"timezone\",\"data\",\"utc\",\"formattedCurrentDate\",\"endOfWeek\",\"day\",\"startOfWeek\",\"subtract\",\"concat\",\"format\",\"values\",\"_data$month$map$sort$\",\"_data$month\",\"_data$month$map\",\"_data$month$map$sort\",\"month\",\"map\",\"_ref2\",\"users\",\"year\",\"sort\",\"_ref3\",\"_ref4\",\"a\",\"b\",\"diff\",\"_ref5\",\"String\",\"valueOf\",\"createElement\",\"Fragment\",\"Container\",\"alignItems\",\"justifyContent\",\"icon\",\"verticalAlign\",\"small\",\"onClick\",\"Item\",\"basis\",\"inline\",\"is\",\"textAlign\",\"disabled\",\"height\",\"align\",\"grow\",\"shrink\",\"position\",\"width\",\"indexBy\",\"keys\",\"groupMode\",\"padding\",\"margin\",\"bottom\",\"p500\",\"enableLabel\",\"enableGridY\",\"axisTop\",\"axisRight\",\"axisBottom\",\"tickSize\",\"tickPadding\",\"tickRotation\",\"tickValues\",\"timestamp\",\"parseInt\",\"axisLeft\",\"animate\",\"motionConfig\",\"theme\",\"axis\",\"ticks\",\"text\",\"fill\",\"n600\",\"fontFamily\",\"fontSize\",\"fontStyle\",\"fontWeight\",\"letterSpacing\",\"lineHeight\",\"variant\"],\"mappings\":\"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\"}"}