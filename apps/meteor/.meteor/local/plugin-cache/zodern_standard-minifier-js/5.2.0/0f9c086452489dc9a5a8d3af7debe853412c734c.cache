{"code":"function module(e,t,n){let a,l,r,i,s,c,o,u,m,d,k,g,h,b,E,y,f,p,v,T,P,G,C,_;let x=[\"current\",\"itemsPerPage\",\"setItemsPerPage\",\"setCurrent\"];n.link(\"@babel/runtime/helpers/extends\",{default(e){a=e}},0),n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){l=e}},1),n.link(\"@rocket.chat/fuselage\",{Pagination(e){r=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue(e){i=e},useMediaQuery(e){s=e},useMutableCallback(e){c=e}},1),n.link(\"@tanstack/react-query\",{hashQueryKey(e){o=e}},2),n.link(\"react\",{default(e){u=e},useMemo(e){m=e},useState(e){d=e}},3),n.link(\"react-i18next\",{useTranslation(e){k=e}},4),n.link(\"../../../../components/FilterByText\",{default(e){g=e}},5),n.link(\"../../../../components/GenericNoResults/GenericNoResults\",{default(e){h=e}},6),n.link(\"../../../../components/GenericTable\",{GenericTable(e){b=e},GenericTableBody(e){E=e},GenericTableHeader(e){y=e},GenericTableHeaderCell(e){f=e},GenericTableLoadingTable(e){p=e}},7),n.link(\"../../../../components/GenericTable/hooks/usePagination\",{usePagination(e){v=e}},8),n.link(\"../../../../components/GenericTable/hooks/useSort\",{useSort(e){T=e}},9),n.link(\"../hooks/useAgentsQuery\",{useAgentsQuery(e){P=e}},10),n.link(\"../hooks/useQuery\",{useQuery(e){G=e}},11),n.link(\"./AddAgent\",{default(e){C=e}},12),n.link(\"./AgentsTableRow\",{default(e){_=e}},13),n.exportDefault(()=>{let{t:e}=k(),[t,n]=d(\"\"),{sortBy:Q,sortDirection:A,setSort:L}=T(\"name\"),N=i(t,500),S=i(m(()=>[Q,A],[Q,A]),500),F=v(),{current:R,itemsPerPage:q,setItemsPerPage:w,setCurrent:B}=F,H=l(F,x),I=G({text:N,current:R,itemsPerPage:q},S),{data:M,isSuccess:D,isLoading:j,refetch:K}=P(I),[U]=d(o([I])),V=U!==o([I]),W=c(e=>{if(Q===e){L(e,\"asc\"===A?\"desc\":\"asc\");return}L(e,\"asc\")}),z=s(\"(min-width: 1024px)\"),J=u.createElement(u.Fragment,null,u.createElement(f,{direction:A,sort:\"name\",active:\"name\"===Q,onClick:W},e(\"Name\")),z&&u.createElement(f,{direction:A,sort:\"username\",active:\"username\"===Q,onClick:W},e(\"Username\")),u.createElement(f,{direction:A,sort:\"emails.address\",active:\"emails.address\"===Q,onClick:W},e(\"Email\")),u.createElement(f,{direction:A,sort:\"statusLivechat\",active:\"statusLivechat\"===Q,onClick:W},e(\"Livechat_status\")),u.createElement(f,{w:\"x60\"},e(\"Remove\")));return u.createElement(u.Fragment,null,u.createElement(C,{reload:K}),(D&&(null==M?void 0:M.users.length)>0||V)&&u.createElement(g,{onChange:n}),j&&u.createElement(b,null,u.createElement(y,null,J),u.createElement(E,null,u.createElement(p,{headerCells:z?4:3}))),D&&(null==M?void 0:M.users.length)===0&&V&&u.createElement(h,null),D&&0===M.users.length&&!V&&u.createElement(h,{icon:\"headset\",title:e(\"No_agents_yet\"),description:e(\"No_agents_yet_description\"),linkHref:\"https://go.rocket.chat/i/omnichannel-docs\",linkText:e(\"Learn_more_about_agents\")}),D&&(null==M?void 0:M.users.length)>0&&u.createElement(u.Fragment,null,u.createElement(b,{\"aria-busy\":t!==N,\"data-qa-id\":\"agents-table\"},u.createElement(y,null,J),u.createElement(E,{\"data-qa\":\"GenericTableAgentInfoBody\"},null==M?void 0:M.users.map(e=>u.createElement(_,{key:e._id,user:e,mediaQuery:z})))),u.createElement(r,a({divider:!0,current:R,itemsPerPage:q,count:(null==M?void 0:M.total)||0,onSetItemsPerPage:w,onSetCurrent:B},H))))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/agents/AgentsTable/AgentsTable.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Pagination } from '@rocket.chat/fuselage';\\nimport { useDebouncedValue, useMediaQuery, useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { hashQueryKey } from '@tanstack/react-query';\\nimport React, { useMemo, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport FilterByText from '../../../../components/FilterByText';\\nimport GenericNoResults from '../../../../components/GenericNoResults/GenericNoResults';\\nimport {\\n\\tGenericTable,\\n\\tGenericTableBody,\\n\\tGenericTableHeader,\\n\\tGenericTableHeaderCell,\\n\\tGenericTableLoadingTable,\\n} from '../../../../components/GenericTable';\\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\\nimport { useAgentsQuery } from '../hooks/useAgentsQuery';\\nimport { useQuery } from '../hooks/useQuery';\\nimport AddAgent from './AddAgent';\\nimport AgentsTableRow from './AgentsTableRow';\\n\\n// TODO: missing error state\\nconst AgentsTable = () => {\\n\\tconst { t } = useTranslation();\\n\\tconst [filter, setFilter] = useState('');\\n\\n\\tconst { sortBy, sortDirection, setSort } = useSort<'name' | 'username' | 'emails.address' | 'statusLivechat'>('name');\\n\\tconst debouncedFilter = useDebouncedValue(filter, 500);\\n\\tconst debouncedSort = useDebouncedValue(\\n\\t\\tuseMemo(() => [sortBy, sortDirection], [sortBy, sortDirection]),\\n\\t\\t500,\\n\\t) as ['name' | 'username' | 'emails.address' | 'statusLivechat', 'asc' | 'desc'];\\n\\n\\tconst { current, itemsPerPage, setItemsPerPage, setCurrent, ...paginationProps } = usePagination();\\n\\n\\tconst query = useQuery({ text: debouncedFilter, current, itemsPerPage }, debouncedSort);\\n\\tconst { data, isSuccess, isLoading, refetch } = useAgentsQuery(query);\\n\\n\\tconst [defaultQuery] = useState(hashQueryKey([query]));\\n\\tconst queryHasChanged = defaultQuery !== hashQueryKey([query]);\\n\\n\\tconst onHeaderClick = useMutableCallback((id) => {\\n\\t\\tif (sortBy === id) {\\n\\t\\t\\tsetSort(id, sortDirection === 'asc' ? 'desc' : 'asc');\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tsetSort(id, 'asc');\\n\\t});\\n\\n\\tconst mediaQuery = useMediaQuery('(min-width: 1024px)');\\n\\n\\tconst headers = (\\n\\t\\t<>\\n\\t\\t\\t<GenericTableHeaderCell direction={sortDirection} sort='name' active={sortBy === 'name'} onClick={onHeaderClick}>\\n\\t\\t\\t\\t{t('Name')}\\n\\t\\t\\t</GenericTableHeaderCell>\\n\\t\\t\\t{mediaQuery && (\\n\\t\\t\\t\\t<GenericTableHeaderCell direction={sortDirection} sort='username' active={sortBy === 'username'} onClick={onHeaderClick}>\\n\\t\\t\\t\\t\\t{t('Username')}\\n\\t\\t\\t\\t</GenericTableHeaderCell>\\n\\t\\t\\t)}\\n\\t\\t\\t<GenericTableHeaderCell direction={sortDirection} sort='emails.address' active={sortBy === 'emails.address'} onClick={onHeaderClick}>\\n\\t\\t\\t\\t{t('Email')}\\n\\t\\t\\t</GenericTableHeaderCell>\\n\\t\\t\\t<GenericTableHeaderCell direction={sortDirection} sort='statusLivechat' active={sortBy === 'statusLivechat'} onClick={onHeaderClick}>\\n\\t\\t\\t\\t{t('Livechat_status')}\\n\\t\\t\\t</GenericTableHeaderCell>\\n\\t\\t\\t<GenericTableHeaderCell w='x60'>{t('Remove')}</GenericTableHeaderCell>\\n\\t\\t</>\\n\\t);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<AddAgent reload={refetch} />\\n\\t\\t\\t{((isSuccess && data?.users.length > 0) || queryHasChanged) && <FilterByText onChange={setFilter} />}\\n\\t\\t\\t{isLoading && (\\n\\t\\t\\t\\t<GenericTable>\\n\\t\\t\\t\\t\\t<GenericTableHeader>{headers}</GenericTableHeader>\\n\\t\\t\\t\\t\\t<GenericTableBody>\\n\\t\\t\\t\\t\\t\\t<GenericTableLoadingTable headerCells={mediaQuery ? 4 : 3} />\\n\\t\\t\\t\\t\\t</GenericTableBody>\\n\\t\\t\\t\\t</GenericTable>\\n\\t\\t\\t)}\\n\\t\\t\\t{isSuccess && data?.users.length === 0 && queryHasChanged && <GenericNoResults />}\\n\\t\\t\\t{isSuccess && data.users.length === 0 && !queryHasChanged && (\\n\\t\\t\\t\\t<GenericNoResults\\n\\t\\t\\t\\t\\ticon='headset'\\n\\t\\t\\t\\t\\ttitle={t('No_agents_yet')}\\n\\t\\t\\t\\t\\tdescription={t('No_agents_yet_description')}\\n\\t\\t\\t\\t\\tlinkHref='https://go.rocket.chat/i/omnichannel-docs'\\n\\t\\t\\t\\t\\tlinkText={t('Learn_more_about_agents')}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\t\\t\\t{isSuccess && data?.users.length > 0 && (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<GenericTable aria-busy={filter !== debouncedFilter} data-qa-id='agents-table'>\\n\\t\\t\\t\\t\\t\\t<GenericTableHeader>{headers}</GenericTableHeader>\\n\\t\\t\\t\\t\\t\\t<GenericTableBody data-qa='GenericTableAgentInfoBody'>\\n\\t\\t\\t\\t\\t\\t\\t{data?.users.map((user) => (\\n\\t\\t\\t\\t\\t\\t\\t\\t<AgentsTableRow key={user._id} user={user} mediaQuery={mediaQuery} />\\n\\t\\t\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t\\t\\t</GenericTableBody>\\n\\t\\t\\t\\t\\t</GenericTable>\\n\\t\\t\\t\\t\\t<Pagination\\n\\t\\t\\t\\t\\t\\tdivider\\n\\t\\t\\t\\t\\t\\tcurrent={current}\\n\\t\\t\\t\\t\\t\\titemsPerPage={itemsPerPage}\\n\\t\\t\\t\\t\\t\\tcount={data?.total || 0}\\n\\t\\t\\t\\t\\t\\tonSetItemsPerPage={setItemsPerPage}\\n\\t\\t\\t\\t\\t\\tonSetCurrent={setCurrent}\\n\\t\\t\\t\\t\\t\\t{...paginationProps}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</>\\n\\t\\t\\t)}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default AgentsTable;\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"Pagination\",\"useDebouncedValue\",\"useMediaQuery\",\"useMutableCallback\",\"hashQueryKey\",\"React\",\"useMemo\",\"useState\",\"useTranslation\",\"FilterByText\",\"GenericNoResults\",\"GenericTable\",\"GenericTableBody\",\"GenericTableHeader\",\"GenericTableHeaderCell\",\"GenericTableLoadingTable\",\"usePagination\",\"useSort\",\"useAgentsQuery\",\"useQuery\",\"AddAgent\",\"AgentsTableRow\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"AgentsTable\",\"t\",\"filter\",\"setFilter\",\"sortBy\",\"sortDirection\",\"setSort\",\"debouncedFilter\",\"debouncedSort\",\"_usePagination\",\"current\",\"itemsPerPage\",\"setItemsPerPage\",\"setCurrent\",\"paginationProps\",\"_excluded\",\"query\",\"text\",\"data\",\"isSuccess\",\"isLoading\",\"refetch\",\"defaultQuery\",\"queryHasChanged\",\"onHeaderClick\",\"id\",\"mediaQuery\",\"headers\",\"createElement\",\"Fragment\",\"direction\",\"sort\",\"active\",\"onClick\",\"w\",\"reload\",\"users\",\"length\",\"onChange\",\"headerCells\",\"icon\",\"title\",\"description\",\"linkHref\",\"linkText\",\"map\",\"user\",\"key\",\"_id\",\"divider\",\"count\",\"total\",\"onSetItemsPerPage\",\"onSetCurrent\"],\"mappings\":\"2BAAAA,EAAmDC,EAAnDC,EAAmDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,kEAA1CC,EAAUC,IAAE,CAAA,iCAA8B,CAAAC,QAAAC,CAAA,EAAA3B,EAAA2B,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iDAAA,CAAAC,QAAAC,CAAA,EAAA1B,EAAA0B,CAAA,CAAA,EAAA,GAA1CH,EAAYC,IAAA,CAAM,wBAAwB,CAAAvB,WAAAyB,CAAA,EAAAzB,EAAAyB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAtB,kBAAAwB,CAAA,EAAAxB,EAAAwB,CAAA,EAAAvB,cAAAuB,CAAA,EAAAvB,EAAAuB,CAAA,EAAAtB,mBAAAsB,CAAA,EAAAtB,EAAAsB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAnB,aAAAqB,CAAA,EAAArB,EAAAqB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAApB,EAAAoB,CAAA,EAAAnB,QAAAmB,CAAA,EAAAnB,EAAAmB,CAAA,EAAAlB,SAAAkB,CAAA,EAAAlB,EAAAkB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAf,eAAAiB,CAAA,EAAAjB,EAAAiB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sCAAA,CAAAC,QAAAC,CAAA,EAAAhB,EAAAgB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2DAAA,CAAAC,QAAAC,CAAA,EAAAf,EAAAe,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sCAAA,CAAAZ,aAAAc,CAAA,EAAAd,EAAAc,CAAA,EAAAb,iBAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,mBAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,uBAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,yBAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0DAAA,CAAAP,cAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oDAAA,CAAAN,QAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0BAAA,CAAAL,eAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,IAAAH,EAAAC,IAAA,CAAA,oBAAA,CAAAJ,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,IAAAH,EAAAC,IAAA,CAAA,aAAA,CAAAC,QAAAC,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,IAAAH,EAAAC,IAAA,CAAA,mBAAA,CAAAC,QAAAC,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,IAAnDH,EAAOI,aAAY,CAuBCC,KACnB,GAAM,CAAEC,EAAAA,CAAAA,CAAG,CAAGpB,IACR,CAACqB,EAAQC,EAAU,CAAGvB,EAAS,IAE/B,CAAEwB,OAAAA,CAAM,CAAEC,cAAAA,CAAa,CAAEC,QAAAA,CAAAA,CAAS,CAAGhB,EAAmE,QACxGiB,EAAkBjC,EAAkB4B,EAAQ,KAC5CM,EAAgBlC,EACrBK,EAAQ,IAAM,CAACyB,EAAQC,EAAc,CAAE,CAACD,EAAQC,EAAc,EAC9D,KAGDI,EAAmFpB,IAA7E,CAAEqB,QAAAA,CAAO,CAAEC,aAAAA,CAAY,CAAEC,gBAAAA,CAAe,CAAEC,WAAAA,CAAAA,CAAgC,CAAAJ,EAAjBK,EAAe1C,EAAAqC,EAAAM,GAExEC,EAAQxB,EAAS,CAAEyB,KAAMV,EAAiBG,QAAAA,EAASC,aAAAA,CAAY,EAAIH,GACnE,CAAEU,KAAAA,CAAI,CAAEC,UAAAA,CAAS,CAAEC,UAAAA,CAAS,CAAEC,QAAAA,CAAAA,CAAS,CAAG9B,EAAeyB,GAEzD,CAACM,EAAa,CAAG1C,EAASH,EAAa,CAACuC,EAAM,GAC9CO,EAAkBD,IAAiB7C,EAAa,CAACuC,EAAM,EAEvDQ,EAAgBhD,EAAoBiD,IACzC,GAAIrB,IAAWqB,EAAI,CAClBnB,EAAQmB,EAAIpB,AAAkB,QAAlBA,EAA0B,OAAS,OAC/C,MACD,CACAC,EAAQmB,EAAI,MACb,GAEMC,EAAanD,EAAc,uBAE3BoD,EACLjD,EAAAkD,aAAA,CAAAlD,EAAAmD,QAAA,CAAA,KACCnD,EAAAkD,aAAA,CAACzC,EAAsB,CAAC2C,UAAWzB,EAAe0B,KAAK,OAAOC,OAAQ5B,AAAW,SAAXA,EAAmB6B,QAAST,CAAc,EAC9GvB,EAAE,SAEHyB,GACAhD,EAAAkD,aAAA,CAACzC,EAAsB,CAAC2C,UAAWzB,EAAe0B,KAAK,WAAWC,OAAQ5B,AAAW,aAAXA,EAAuB6B,QAAST,CAAc,EACtHvB,EAAE,aAGLvB,EAAAkD,aAAA,CAACzC,EAAsB,CAAC2C,UAAWzB,EAAe0B,KAAK,iBAAiBC,OAAQ5B,AAAW,mBAAXA,EAA6B6B,QAAST,CAAc,EAClIvB,EAAE,UAEJvB,EAAAkD,aAAA,CAACzC,EAAsB,CAAC2C,UAAWzB,EAAe0B,KAAK,iBAAiBC,OAAQ5B,AAAW,mBAAXA,EAA6B6B,QAAST,CAAc,EAClIvB,EAAE,oBAEJvB,EAAAkD,aAAA,CAACzC,EAAsB,CAAC+C,EAAE,KAAK,EAAEjC,EAAE,YAIrC,OACCvB,EAAAkD,aAAA,CAAAlD,EAAAmD,QAAA,CAAA,KACCnD,EAAAkD,aAAA,CAACnC,EAAQ,CAAC0C,OAAQd,CAAQ,GACzB,AAAEF,CAAAA,GAAa,AAAAD,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMkB,KAAK,CAACC,MAAM,AAANA,EAAS,GAAMd,CAAAA,GAAoB7C,EAAAkD,aAAA,CAAC9C,EAAY,CAACwD,SAAUnC,CAAU,GAChGiB,GACA1C,EAAAkD,aAAA,CAAC5C,EAAY,KACZN,EAAAkD,aAAA,CAAC1C,EAAkB,KAAEyC,GACrBjD,EAAAkD,aAAA,CAAC3C,EAAgB,KAChBP,EAAAkD,aAAA,CAACxC,EAAwB,CAACmD,YAAab,EAAa,EAAI,CAAE,KAI5DP,GAAa,AAAAD,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMkB,KAAK,CAACC,MAAM,AAANA,IAAW,GAAKd,GAAmB7C,EAAAkD,aAAA,CAAC7C,EAAgB,MAC7EoC,GAAaD,AAAsB,IAAtBA,EAAKkB,KAAK,CAACC,MAAM,EAAU,CAACd,GACzC7C,EAAAkD,aAAA,CAAC7C,EAAgB,CAChByD,KAAK,UACLC,MAAOxC,EAAE,iBACTyC,YAAazC,EAAE,6BACf0C,SAAS,4CACTC,SAAU3C,EAAE,0BAA2B,GAGxCkB,GAAa,AAAAD,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMkB,KAAK,CAACC,MAAM,AAANA,EAAS,GAClC3D,EAAAkD,aAAA,CAAAlD,EAAAmD,QAAA,CAAA,KACCnD,EAAAkD,aAAA,CAAC5C,EAAY,CAAC,YAAWkB,IAAWK,EAAiB,aAAW,cAAc,EAC7E7B,EAAAkD,aAAA,CAAC1C,EAAkB,KAAEyC,GACrBjD,EAAAkD,aAAA,CAAC3C,EAAgB,CAAC,UAAQ,2BAA2B,EACnDiC,MAAAA,EAAI,KAAA,EAAJA,EAAMkB,KAAK,CAACS,GAAG,CAAEC,GACjBpE,EAAAkD,aAAA,CAAClC,EAAc,CAACqD,IAAKD,EAAKE,GAAI,CAACF,KAAMA,EAAMpB,WAAYA,CAAW,MAIrEhD,EAAAkD,aAAA,CAACvD,EAAUF,EAAA,CACV8E,QAAO,CAAA,EACPvC,QAASA,EACTC,aAAcA,EACduC,MAAO,AAAAhC,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMiC,KAAK,AAALA,GAAS,EACtBC,kBAAmBxC,EACnByC,aAAcxC,CAAW,EACrBC,KAMV\"}"}