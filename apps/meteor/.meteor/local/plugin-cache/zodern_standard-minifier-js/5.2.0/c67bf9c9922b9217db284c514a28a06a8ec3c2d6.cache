{"code":"function module(e,n,t){var i,r,s,a,o,c,u,l;t.link(\"@babel/runtime/regenerator\",{default:function(e){i=e}},0),t.link(\"@rocket.chat/core-typings\",{isE2EEMessage:function(e){r=e}},0),t.link(\"meteor/meteor\",{Meteor:function(e){s=e}},1),t.link(\"../../../app/ui-utils/client\",{MessageAction:function(e){a=e}},2),t.link(\"../../../app/utils/lib/i18n\",{t:function(e){o=e}},3),t.link(\"../../lib/getPermaLink\",{getPermaLink:function(e){c=e}},4),t.link(\"../../lib/toast\",{dispatchToastMessage:function(e){u=e}},5),t.link(\"../../lib/utils/messageArgs\",{messageArgs:function(e){l=e}},6),s.startup(function(){a.addButton({id:\"permalink-star\",icon:\"permalink\",label:\"Copy_link\",context:[\"starred\",\"threads\",\"videoconf-threads\"],action:function(e,n){var t,r,s;return i.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=void 0===(t=n.message)?l(this).msg:t,e.next=4,i.awrap(c(r._id));case 4:s=e.sent,navigator.clipboard.writeText(s),u({type:\"success\",message:o(\"Copied\")}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),u({type:\"error\",message:e.t0});case 12:case\"end\":return e.stop()}},null,this,[[0,9]],Promise)},condition:function(e){var n,t=e.message,i=e.subscription,r=e.user;return null!=i&&!!(null===(n=t.starred)||void 0===n?void 0:n.find(function(e){return e._id===(null==r?void 0:r._id)}))},order:10,group:\"menu\",disabled:function(e){var n=e.message;return r(n)}})})}","map":"{\"version\":3,\"sources\":[\"client/startup/actionButtons/permalinkStar.ts\",\"<anon>\"],\"sourcesContent\":[\"import { isE2EEMessage } from '@rocket.chat/core-typings';\\nimport { Meteor } from 'meteor/meteor';\\n\\nimport { MessageAction } from '../../../app/ui-utils/client';\\nimport { t } from '../../../app/utils/lib/i18n';\\nimport { getPermaLink } from '../../lib/getPermaLink';\\nimport { dispatchToastMessage } from '../../lib/toast';\\nimport { messageArgs } from '../../lib/utils/messageArgs';\\n\\nMeteor.startup(() => {\\n\\tMessageAction.addButton({\\n\\t\\tid: 'permalink-star',\\n\\t\\ticon: 'permalink',\\n\\t\\tlabel: 'Copy_link',\\n\\t\\t// classes: 'clipboard',\\n\\t\\tcontext: ['starred', 'threads', 'videoconf-threads'],\\n\\t\\tasync action(_, props) {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst { message = messageArgs(this).msg } = props;\\n\\t\\t\\t\\tconst permalink = await getPermaLink(message._id);\\n\\t\\t\\t\\tnavigator.clipboard.writeText(permalink);\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Copied') });\\n\\t\\t\\t} catch (e) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: e });\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tcondition({ message, subscription, user }) {\\n\\t\\t\\tif (subscription == null) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn Boolean(message.starred?.find((star) => star._id === user?._id));\\n\\t\\t},\\n\\t\\torder: 10,\\n\\t\\tgroup: 'menu',\\n\\t\\tdisabled({ message }) {\\n\\t\\t\\treturn isE2EEMessage(message);\\n\\t\\t},\\n\\t});\\n});\\n\",null],\"names\":[\"_regeneratorRuntime\",\"isE2EEMessage\",\"Meteor\",\"MessageAction\",\"t\",\"getPermaLink\",\"dispatchToastMessage\",\"messageArgs\",\"module\",\"link\",\"default\",\"v\",\"startup\",\"addButton\",\"id\",\"icon\",\"label\",\"context\",\"action\",\"_\",\"props\",\"_props$message\",\"message\",\"permalink\",\"async\",\"_context\",\"prev\",\"next\",\"msg\",\"awrap\",\"_id\",\"sent\",\"navigator\",\"clipboard\",\"writeText\",\"type\",\"t0\",\"stop\",\"Promise\",\"condition\",\"_ref\",\"_message$starred\",\"subscription\",\"user\",\"Boolean\",\"starred\",\"find\",\"star\",\"order\",\"group\",\"disabled\",\"_ref2\"],\"mappings\":\"2BAAAA,EAAAC,EAA0DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAlCC,EAAMC,IAAA,CAAA,6BAA4B,CAAAC,QAAA,SAAAC,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAjDH,EAAeC,IAAA,CAAM,4BAA4B,CAAAR,cAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAP,OAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,+BAAA,CAAAN,cAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAL,EAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yBAAA,CAAAJ,aAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kBAAA,CAAAH,qBAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAF,YAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAS1DT,EAAOU,OAAO,CAAC,WACdT,EAAcU,SAAS,CAAC,CACvBC,GAAI,iBACJC,KAAM,YACNC,MAAO,YAEPC,QAAS,CAAC,UAAW,UAAW,oBAAoB,CAC9CC,OAAM,SAACC,CAAC,CAAEC,CAAK,EAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAvB,EAAAwB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAEoB,OAFpBF,EAAAC,IAAA,CAAA,EAEXJ,EAAOD,AAAA,KAAA,IAFIA,CAAAA,EAEyBD,EAApCE,OAAO,AAAPA,EAAUf,EAAY,IAAI,EAAEqB,GAAG,CAAAP,EAAAI,EAAAE,IAAA,CAAA,EAAA3B,EAAA6B,KAAA,CACfxB,EAAaiB,EAAQQ,GAAG,EAAC,MAAA,EAA3CP,EAASE,EAAAM,IAAA,CACfC,UAAUC,SAAS,CAACC,SAAS,CAACX,GAC9BjB,EAAqB,CAAE6B,KAAM,UAAWb,QAASlB,EAAE,SAAS,GAAIqB,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,EAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAW,EAAA,CAAAX,EAAA,KAAA,CAAA,GAEhEnB,EAAqB,CAAE6B,KAAM,QAASb,QAAOG,EAAAW,EAAAA,AAAG,EAAI,MAAA,GAAA,IAAA,MAAA,OAAAX,EAAAY,IAAA,EAAA,CAAA,EAAA,KAAA,IAAA,CAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAAAC,QAAA,EAGtDC,UAAS,SAAAC,CAAA,EAAgC,IAAAC,EAA7BnB,EAAOkB,EAAPlB,OAAO,CAAEoB,EAAYF,EAAZE,YAAY,CAAEC,EAAIH,EAAJG,IAAI,QACtC,AAAoB,MAAhBD,GAIGE,CAAAA,CAAO,CAAA,AAAgB,OAAhBH,CAAAA,EAACnB,EAAQuB,OAAO,AAAPA,GAAOJ,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAfA,EAAiBK,IAAI,CAAC,SAACC,CAAI,EAAA,OAAKA,EAAKjB,GAAG,GAAKa,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMb,GAAG,AAAHA,CAAG,EAAA,CACtE,EACAkB,MAAO,GACPC,MAAO,OACPC,SAAQ,SAAAC,CAAA,EAAY,IAAT7B,EAAO6B,EAAP7B,OAAO,CACjB,OAAOrB,EAAcqB,EACtB,GAEF\"}"}