{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){o=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){a=e}},1),t.link(\"@rocket.chat/fuselage\",{MessageToolbarWrapper:function(e){r=e}},0),t.link(\"@tanstack/react-query\",{useQuery:function(e){i=e}},1),t.link(\"react\",{default:function(e){u=e},Suspense:function(e){s=e},lazy:function(e){l=e},memo:function(e){c=e},useState:function(e){f=e}},2),t.link(\"../../views/room/contexts/ChatContext\",{useChat:function(e){m=e}},3),t.link(\"../../views/room/hooks/useIsVisible\",{useIsVisible:function(e){b=e}},4);var o,a,r,i,u,s,l,c,f,m,b,d=l(function(){return t.dynamicImport(\"./toolbar/MessageToolbar\")});t.exportDefault(c(function(e){var n=e.message,t=e.context,l=m(),c=b(),p=a(c,2),k=p[0],v=p[1],x=f(!1),g=a(x,2),h=g[0],y=g[1],w=v||h,C=i([\"toolbox\",n._id,t],function(){var e,n;return o.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.awrap(null==l?void 0:l.data.findRoom());case 2:return e=t.sent,t.next=5,o.awrap(null==l?void 0:l.data.findSubscription());case 5:return n=t.sent,t.abrupt(\"return\",{room:e,subscription:n});case 7:case\"end\":return t.stop()}},null,null,null,Promise)},{enabled:w});return u.createElement(r,{ref:k,visible:h},w&&C.isSuccess&&C.data.room&&u.createElement(s,{fallback:null},u.createElement(d,{message:n,messageContext:t,room:C.data.room,subscription:C.data.subscription,onChangeMenuVisibility:y})))}))}","map":"{\"version\":3,\"sources\":[\"client/components/message/MessageToolbarHolder.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { MessageToolbarWrapper } from '@rocket.chat/fuselage';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React, { Suspense, lazy, memo, useState } from 'react';\\n\\nimport type { MessageActionContext } from '../../../app/ui-utils/client/lib/MessageAction';\\nimport { useChat } from '../../views/room/contexts/ChatContext';\\nimport { useIsVisible } from '../../views/room/hooks/useIsVisible';\\n\\ntype MessageToolbarHolderProps = {\\n\\tmessage: IMessage;\\n\\tcontext?: MessageActionContext;\\n};\\n\\nconst MessageToolbar = lazy(() => import('./toolbar/MessageToolbar'));\\n\\nconst MessageToolbarHolder = ({ message, context }: MessageToolbarHolderProps): ReactElement => {\\n\\tconst chat = useChat();\\n\\tconst [ref, isVisible] = useIsVisible();\\n\\tconst [isToolbarMenuOpen, setIsToolbarMenuOpen] = useState(false);\\n\\n\\tconst showToolbar = isVisible || isToolbarMenuOpen;\\n\\n\\tconst depsQueryResult = useQuery(\\n\\t\\t['toolbox', message._id, context],\\n\\t\\tasync () => {\\n\\t\\t\\tconst room = await chat?.data.findRoom();\\n\\t\\t\\tconst subscription = await chat?.data.findSubscription();\\n\\t\\t\\treturn {\\n\\t\\t\\t\\troom,\\n\\t\\t\\t\\tsubscription,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tenabled: showToolbar,\\n\\t\\t},\\n\\t);\\n\\n\\treturn (\\n\\t\\t<MessageToolbarWrapper ref={ref} visible={isToolbarMenuOpen}>\\n\\t\\t\\t{showToolbar && depsQueryResult.isSuccess && depsQueryResult.data.room && (\\n\\t\\t\\t\\t<Suspense fallback={null}>\\n\\t\\t\\t\\t\\t<MessageToolbar\\n\\t\\t\\t\\t\\t\\tmessage={message}\\n\\t\\t\\t\\t\\t\\tmessageContext={context}\\n\\t\\t\\t\\t\\t\\troom={depsQueryResult.data.room}\\n\\t\\t\\t\\t\\t\\tsubscription={depsQueryResult.data.subscription}\\n\\t\\t\\t\\t\\t\\tonChangeMenuVisibility={setIsToolbarMenuOpen}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</Suspense>\\n\\t\\t\\t)}\\n\\t\\t</MessageToolbarWrapper>\\n\\t);\\n};\\n\\nexport default memo(MessageToolbarHolder);\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_slicedToArray\",\"MessageToolbarWrapper\",\"useQuery\",\"React\",\"Suspense\",\"lazy\",\"memo\",\"useState\",\"useChat\",\"useIsVisible\",\"MessageToolbar\",\"dynamicImport\",\"exportDefault\",\"_ref\",\"message\",\"context\",\"chat\",\"_useIsVisible\",\"_useIsVisible2\",\"ref\",\"isVisible\",\"_useState\",\"_useState2\",\"isToolbarMenuOpen\",\"setIsToolbarMenuOpen\",\"showToolbar\",\"depsQueryResult\",\"_id\",\"room\",\"subscription\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"data\",\"findRoom\",\"sent\",\"findSubscription\",\"abrupt\",\"stop\",\"Promise\",\"enabled\",\"createElement\",\"visible\",\"isSuccess\",\"fallback\",\"messageContext\",\"onChangeMenuVisibility\"],\"mappings\":\"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\"}"}