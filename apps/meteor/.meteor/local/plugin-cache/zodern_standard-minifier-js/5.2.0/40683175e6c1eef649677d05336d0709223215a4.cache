{"code":"function module(e,t,n){let o,l,a,r,i,u,s,c,m,k,f,p,d;n.link(\"@rocket.chat/fuselage\",{Box(e){o=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useRoute(e){l=e},useRouteParameter(e){a=e},useSearchParameter(e){r=e},useTranslation(e){i=e}},1),n.link(\"react\",{default(e){u=e},useMemo(e){s=e}},2),n.link(\"../../../components/Contextualbar\",{Contextualbar(e){c=e}},3),n.link(\"../../../hooks/useAsyncState\",{AsyncStatePhase(e){m=e}},4),n.link(\"../../../hooks/useEndpointData\",{useEndpointData(e){k=e}},5),n.link(\"./calls/Call\",{default(e){f=e}},6),n.link(\"./calls/contextualBar/VoipInfo\",{VoipInfo(e){p=e}},7),n.link(\"./components/FormSkeleton\",{FormSkeleton(e){d=e}},8),n.exportDefault(()=>{let e=l(\"omnichannel-directory\"),t=a(\"bar\")||\"info\",n=a(\"id\"),h=r(\"token\"),E=i(),x=s(()=>({rid:n||\"\",token:h||\"\"}),[n,h]),{value:C,phase:S,error:b}=k(\"/v1/voip/room\",{params:x});if(\"view\"===t&&n)return u.createElement(f,{rid:n});if(S===m.LOADING)return u.createElement(o,{pi:24},u.createElement(d,null));if(b||!C||!C.room)return u.createElement(o,{mbs:16},E(\"Room_not_found\"));let v=C.room;return u.createElement(c,null,\"info\"===t&&u.createElement(p,{room:v,onClickClose:()=>{e.push({page:\"calls\"})}}))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/directory/CallsContextualBarDirectory.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IVoipRoom } from '@rocket.chat/core-typings';\\nimport { Box } from '@rocket.chat/fuselage';\\nimport { useRoute, useRouteParameter, useSearchParameter, useTranslation } from '@rocket.chat/ui-contexts';\\nimport React, { useMemo } from 'react';\\n\\nimport { Contextualbar } from '../../../components/Contextualbar';\\nimport { AsyncStatePhase } from '../../../hooks/useAsyncState';\\nimport { useEndpointData } from '../../../hooks/useEndpointData';\\nimport Call from './calls/Call';\\nimport { VoipInfo } from './calls/contextualBar/VoipInfo';\\nimport { FormSkeleton } from './components/FormSkeleton';\\n\\nconst CallsContextualBarDirectory = () => {\\n\\tconst directoryRoute = useRoute('omnichannel-directory');\\n\\n\\tconst bar = useRouteParameter('bar') || 'info';\\n\\tconst id = useRouteParameter('id');\\n\\tconst token = useSearchParameter('token');\\n\\n\\tconst t = useTranslation();\\n\\n\\tconst handleClose = (): void => {\\n\\t\\tdirectoryRoute.push({ page: 'calls' });\\n\\t};\\n\\n\\tconst query = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\trid: id || '',\\n\\t\\t\\ttoken: token || '',\\n\\t\\t}),\\n\\t\\t[id, token],\\n\\t);\\n\\n\\tconst { value: data, phase: state, error } = useEndpointData(`/v1/voip/room`, { params: query });\\n\\n\\tif (bar === 'view' && id) {\\n\\t\\treturn <Call rid={id} />;\\n\\t}\\n\\n\\tif (state === AsyncStatePhase.LOADING) {\\n\\t\\treturn (\\n\\t\\t\\t<Box pi={24}>\\n\\t\\t\\t\\t<FormSkeleton />\\n\\t\\t\\t</Box>\\n\\t\\t);\\n\\t}\\n\\n\\tif (error || !data || !data.room) {\\n\\t\\treturn <Box mbs={16}>{t('Room_not_found')}</Box>;\\n\\t}\\n\\n\\tconst room = data.room as unknown as IVoipRoom; // TODO Check why types are incompatible even though the endpoint returns an IVoipRooms\\n\\n\\treturn <Contextualbar>{bar === 'info' && <VoipInfo room={room} onClickClose={handleClose} />}</Contextualbar>;\\n};\\n\\nexport default CallsContextualBarDirectory;\\n\",null],\"names\":[\"Box\",\"useRoute\",\"useRouteParameter\",\"useSearchParameter\",\"useTranslation\",\"React\",\"useMemo\",\"Contextualbar\",\"AsyncStatePhase\",\"useEndpointData\",\"Call\",\"VoipInfo\",\"FormSkeleton\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"CallsContextualBarDirectory\",\"directoryRoute\",\"bar\",\"id\",\"token\",\"t\",\"query\",\"rid\",\"value\",\"data\",\"phase\",\"state\",\"error\",\"params\",\"createElement\",\"LOADING\",\"pi\",\"room\",\"mbs\",\"onClickClose\",\"handleClose\",\"push\",\"page\"],\"mappings\":\"2BACAA,EAA4CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAArCC,EAAOC,IAAA,CAAM,wBAAwB,CAAAd,IAAAe,CAAA,EAAAf,EAAAe,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2BAAA,CAAAb,SAAAc,CAAA,EAAAd,EAAAc,CAAA,EAAAb,kBAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,mBAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,eAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAV,EAAAU,CAAA,EAAAT,QAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,oCAAA,CAAAP,cAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,+BAAA,CAAAN,gBAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iCAAA,CAAAL,gBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,eAAA,CAAAE,QAAAD,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iCAAA,CAAAH,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,4BAAA,CAAAF,aAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAA5CF,EAAOI,aAAa,CAWgBC,KACnC,IAAMC,EAAiBlB,EAAS,yBAE1BmB,EAAMlB,EAAkB,QAAU,OAClCmB,EAAKnB,EAAkB,MACvBoB,EAAQnB,EAAmB,SAE3BoB,EAAInB,IAMJoB,EAAQlB,EACb,IAAO,CAAA,CACNmB,IAAKJ,GAAM,GACXC,MAAOA,GAAS,KAEjB,CAACD,EAAIC,EAAM,EAGN,CAAEI,MAAOC,CAAI,CAAEC,MAAOC,CAAK,CAAEC,MAAAA,CAAAA,CAAO,CAAGrB,EAAe,gBAAkB,CAAEsB,OAAQP,CAAK,GAE7F,GAAIJ,AAAQ,SAARA,GAAkBC,EACrB,OAAOhB,EAAA2B,aAAA,CAACtB,EAAI,CAACe,IAAKJ,CAAG,GAGtB,GAAIQ,IAAUrB,EAAgByB,OAAO,CACpC,OACC5B,EAAA2B,aAAA,CAAChC,EAAG,CAACkC,GAAI,EAAG,EACX7B,EAAA2B,aAAA,CAACpB,EAAY,OAKhB,GAAIkB,GAAS,CAACH,GAAQ,CAACA,EAAKQ,IAAI,CAC/B,OAAO9B,EAAA2B,aAAA,CAAChC,EAAG,CAACoC,IAAK,EAAG,EAAEb,EAAE,mBAGzB,IAAMY,EAAOR,EAAKQ,IAA4B,CAE9C,OAAO9B,EAAA2B,aAAA,CAACzB,EAAa,KAAEa,AAAQ,SAARA,GAAkBf,EAAA2B,aAAA,CAACrB,EAAQ,CAACwB,KAAMA,EAAME,aAhC3CC,KACnBnB,EAAeoB,IAAI,CAAC,CAAEC,KAAM,OAAO,EACpC,CA8ByF,GAC1F\"}"}