{"code":"function module(e,t,r){let n,l,i,o;r.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),r.export({useAutoGrow:()=>p}),r.link(\"@rocket.chat/fuselage-hooks\",{useContentBoxSize(e){l=e}},0),r.link(\"react\",{useEffect(e){i=e},useState(e){o=e}},1);let a={position:\"fixed\",top:\"-10000px\",left:\"-10000px\",resize:\"none\",whiteSpace:\"pre-wrap\",wordWrap:\"break-word\",willChange:\"contents\"},p=(e,t,r)=>{let[p,c]=o(()=>e.current&&window.getComputedStyle(e.current));i(()=>{let{current:t}=e;t&&c(()=>e.current&&window.getComputedStyle(e.current))},[e]),i(()=>{let{current:r}=e;if(!r)return;let n=()=>{let{value:e}=r,{current:n}=t;n&&(n.innerHTML=e.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\\n$/,\"<br/>&nbsp;\").replace(/\\n/g,\"<br/>\"))};return n(),r.addEventListener(\"input\",n),()=>{r.removeEventListener(\"input\",n)}},[e,t]);let u=l(t),d=l(e);return{textAreaStyle:n(n({},r&&{visibility:\"hidden\"}),{},{whiteSpace:\"pre-wrap\",wordWrap:\"break-word\",overflowWrap:\"break-word\",willChange:\"contents\",wordBreak:\"normal\",overflowY:u.blockSize>parseInt((null==p?void 0:p.maxHeight)||\"0\")?\"scroll\":\"hidden\"},u.blockSize&&{height:\"\".concat(u.blockSize,\"px\")}),shadowStyle:n(n({},a),{},{font:null==p?void 0:p.font,width:d.inlineSize,minHeight:null==p?void 0:p.lineHeight,lineHeight:null==p?void 0:p.lineHeight})}}}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/RoomComposer/hooks/useAutoGrow.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useContentBoxSize } from '@rocket.chat/fuselage-hooks';\\nimport type { CSSProperties, RefObject } from 'react';\\nimport { useEffect, useState } from 'react';\\n\\nconst shadowStyleBase: CSSProperties = {\\n\\tposition: 'fixed',\\n\\ttop: '-10000px',\\n\\tleft: '-10000px',\\n\\tresize: 'none',\\n\\twhiteSpace: 'pre-wrap',\\n\\twordWrap: 'break-word',\\n\\twillChange: 'contents',\\n};\\n\\nexport const useAutoGrow = (\\n\\tref: RefObject<HTMLTextAreaElement>,\\n\\tshadowRef: RefObject<HTMLDivElement>,\\n\\thideTextArea?: boolean,\\n): {\\n\\ttextAreaStyle: CSSProperties;\\n\\tshadowStyle: CSSProperties;\\n} => {\\n\\tconst [style, setStyle] = useState(() => ref.current && window.getComputedStyle(ref.current));\\n\\n\\tuseEffect(() => {\\n\\t\\tconst { current: textarea } = ref;\\n\\n\\t\\tif (!textarea) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tsetStyle(() => ref.current && window.getComputedStyle(ref.current));\\n\\t}, [ref]);\\n\\n\\tuseEffect(() => {\\n\\t\\tconst { current: textarea } = ref;\\n\\n\\t\\tif (!textarea) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tconst updateTextareaSize = () => {\\n\\t\\t\\tconst { value } = textarea;\\n\\t\\t\\tconst { current: shadow } = shadowRef;\\n\\t\\t\\tif (!shadow) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tshadow.innerHTML = value\\n\\t\\t\\t\\t.replace(/&/g, '&amp;')\\n\\t\\t\\t\\t.replace(/</g, '&lt;')\\n\\t\\t\\t\\t.replace(/>/g, '&gt;')\\n\\t\\t\\t\\t.replace(/\\\\n$/, '<br/>&nbsp;')\\n\\t\\t\\t\\t.replace(/\\\\n/g, '<br/>');\\n\\t\\t};\\n\\t\\tupdateTextareaSize();\\n\\t\\ttextarea.addEventListener('input', updateTextareaSize);\\n\\t\\treturn () => {\\n\\t\\t\\ttextarea.removeEventListener('input', updateTextareaSize);\\n\\t\\t};\\n\\t}, [ref, shadowRef]);\\n\\n\\tconst shadowContentSize = useContentBoxSize(shadowRef);\\n\\n\\tconst composerContentSize = useContentBoxSize(ref);\\n\\n\\treturn {\\n\\t\\ttextAreaStyle: {\\n\\t\\t\\t...(hideTextArea && {\\n\\t\\t\\t\\tvisibility: 'hidden',\\n\\t\\t\\t}),\\n\\t\\t\\twhiteSpace: 'pre-wrap',\\n\\t\\t\\twordWrap: 'break-word',\\n\\t\\t\\toverflowWrap: 'break-word',\\n\\t\\t\\twillChange: 'contents',\\n\\t\\t\\twordBreak: 'normal',\\n\\t\\t\\toverflowY: shadowContentSize.blockSize > parseInt(style?.maxHeight || '0') ? 'scroll' : 'hidden',\\n\\t\\t\\t...(shadowContentSize.blockSize && {\\n\\t\\t\\t\\theight: `${shadowContentSize.blockSize}px`,\\n\\t\\t\\t}),\\n\\t\\t},\\n\\t\\tshadowStyle: {\\n\\t\\t\\t...shadowStyleBase,\\n\\t\\t\\tfont: style?.font,\\n\\t\\t\\twidth: composerContentSize.inlineSize,\\n\\t\\t\\tminHeight: style?.lineHeight,\\n\\t\\t\\tlineHeight: style?.lineHeight,\\n\\t\\t},\\n\\t};\\n};\\n\",null],\"names\":[\"_objectSpread\",\"useContentBoxSize\",\"useEffect\",\"useState\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useAutoGrow\",\"shadowStyleBase\",\"position\",\"top\",\"left\",\"resize\",\"whiteSpace\",\"wordWrap\",\"willChange\",\"ref\",\"shadowRef\",\"hideTextArea\",\"style\",\"setStyle\",\"current\",\"window\",\"getComputedStyle\",\"textarea\",\"updateTextareaSize\",\"value\",\"shadow\",\"innerHTML\",\"replace\",\"addEventListener\",\"removeEventListener\",\"shadowContentSize\",\"composerContentSize\",\"textAreaStyle\",\"visibility\",\"overflowWrap\",\"wordBreak\",\"overflowY\",\"blockSize\",\"parseInt\",\"maxHeight\",\"height\",\"concat\",\"shadowStyle\",\"font\",\"width\",\"inlineSize\",\"minHeight\",\"lineHeight\"],\"mappings\":\"2BAAAA,EAAkCC,EAA8BC,EAAAC,EAAvDC,EAAAC,IAAmB,CAAA,uCAAoC,CAAAC,QAAAC,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAhEH,EAAOI,MAAE,CAAA,CAAAC,YAAiBA,IAAEA,CAAM,GAA8BL,EAAAC,IAAA,CAAA,8BAAA,CAAAJ,kBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAH,UAAAK,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAIhE,IAAMG,EAAiC,CACtCC,SAAU,QACVC,IAAK,WACLC,KAAM,WACNC,OAAQ,OACRC,WAAY,WACZC,SAAU,aACVC,WAAY,YAGAR,EAAcA,CAC1BS,EACAC,EACAC,KAKA,GAAM,CAACC,EAAOC,EAAS,CAAGnB,EAAS,IAAMe,EAAIK,OAAO,EAAIC,OAAOC,gBAAgB,CAACP,EAAIK,OAAO,GAE3FrB,EAAU,KACT,GAAM,CAAEqB,QAASG,CAAAA,CAAU,CAAGR,EAEzBQ,GAGLJ,EAAS,IAAMJ,EAAIK,OAAO,EAAIC,OAAOC,gBAAgB,CAACP,EAAIK,OAAO,EAClE,EAAG,CAACL,EAAI,EAERhB,EAAU,KACT,GAAM,CAAEqB,QAASG,CAAAA,CAAU,CAAGR,EAE9B,GAAI,CAACQ,EACJ,OAED,IAAMC,EAAqBA,KAC1B,GAAM,CAAEC,MAAAA,CAAAA,CAAO,CAAGF,EACZ,CAAEH,QAASM,CAAAA,CAAQ,CAAGV,EACvBU,GAGLA,CAAAA,EAAOC,SAAS,CAAGF,EACjBG,OAAO,CAAC,KAAM,SACdA,OAAO,CAAC,KAAM,QACdA,OAAO,CAAC,KAAM,QACdA,OAAO,CAAC,MAAO,eACfA,OAAO,CAAC,MAAO,QAAO,CACzB,EAGA,OAFAJ,IACAD,EAASM,gBAAgB,CAAC,QAASL,GAC5B,KACND,EAASO,mBAAmB,CAAC,QAASN,EACvC,CACD,EAAG,CAACT,EAAKC,EAAU,EAEnB,IAAMe,EAAoBjC,EAAkBkB,GAEtCgB,EAAsBlC,EAAkBiB,GAE9C,MAAO,CACNkB,cAAapC,EAAAA,EAAA,CAAA,EACRoB,GAAgB,CACnBiB,WAAY,WACZ,CAAA,EAAA,CACDtB,WAAY,WACZC,SAAU,aACVsB,aAAc,aACdrB,WAAY,WACZsB,UAAW,SACXC,UAAWN,EAAkBO,SAAS,CAAGC,SAAS,AAAArB,CAAAA,MAAAA,EAAK,KAAA,EAALA,EAAOsB,SAAS,AAATA,GAAa,KAAO,SAAW,QAAQ,EAC5FT,EAAkBO,SAAS,EAAI,CAClCG,OAAM,GAAAC,MAAA,CAAKX,EAAkBO,SAAS,CAAA,QAGxCK,YAAW9C,EAAAA,EAAA,CAAA,EACPU,GAAe,CAAA,EAAA,CAClBqC,KAAM1B,MAAAA,EAAK,KAAA,EAALA,EAAO0B,IAAI,CACjBC,MAAOb,EAAoBc,UAAU,CACrCC,UAAW7B,MAAAA,EAAK,KAAA,EAALA,EAAO8B,UAAU,CAC5BA,WAAY9B,MAAAA,EAAK,KAAA,EAALA,EAAO8B,UAAAA,AAAU,GAGhC\"}"}