{"code":"function module(e,t,l){let n,r,i,u,a,o,m,s,d,c,b,f,g;l.export({getHighestTimeUnit:()=>h}),l.link(\"@rocket.chat/fuselage\",{Field(e){n=e},FieldLabel(e){r=e},FieldRow(e){i=e},InputBox(e){u=e},Select(e){a=e}},0),l.link(\"react\",{default(e){o=e},useMemo(e){m=e},useState(e){s=e}},1),l.link(\"react-i18next\",{useTranslation(e){d=e}},2),l.link(\"../../../../../lib/convertTimeUnit\",{TIMEUNIT(e){c=e},timeUnitToMs(e){b=e},msToTimeUnit(e){f=e}},3),l.link(\"../ResetSettingButton\",{default(e){g=e}},4);let h=e=>{let t=f(c.minutes,e);if(t%60!=0)return c.minutes;let l=f(c.hours,e);return l%24!=0?c.hours:c.days},p=e=>{if(!e)return 0;let t=Math.max(0,e).toFixed(0);return Number(t)};l.exportDefault(function(e){let{_id:t,label:l,value:E,placeholder:T,readonly:k,autocomplete:x,disabled:N,required:v,onChangeValue:F,hasResetButton:U,onResetButtonClick:y,packageValue:C}=e,{t:M,i18n:q}=d(),[I,S]=s(h(Number(E))),[B,O]=s(f(I,Number(E))),R=m(()=>Object.entries(c).map(e=>{let[t,l]=e;return[l,q.exists(t)?M(t):t]}),[M]);return o.createElement(n,null,o.createElement(i,null,o.createElement(r,{htmlFor:t,title:t,required:v},l),U&&o.createElement(g,{\"data-qa-reset-setting-id\":t,onClick:()=>{null==y||y();let e=h(Number(C));S(e),O(f(e,Number(C)))}})),o.createElement(i,null,o.createElement(u,{\"data-qa-setting-id\":t,id:t,type:\"number\",value:B,placeholder:T,disabled:N,readOnly:k,autoComplete:!1===x?\"off\":void 0,onChange:e=>{let t=p(Number(e.currentTarget.value));null==F||F(b(I,t)),O(t)}})),o.createElement(i,null,o.createElement(a,{value:I,disabled:N,options:R,onChange:e=>{\"string\"==typeof e&&(null==F||F(b(e,B)),S(e))}})))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/settings/Setting/inputs/TimespanSettingInput.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Field, FieldLabel, FieldRow, InputBox, Select } from '@rocket.chat/fuselage';\\nimport type { FormEventHandler, ReactElement } from 'react';\\nimport React, { useMemo, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { TIMEUNIT, timeUnitToMs, msToTimeUnit } from '../../../../../lib/convertTimeUnit';\\nimport ResetSettingButton from '../ResetSettingButton';\\nimport type { SettingInputProps } from './types';\\n\\ntype TimespanSettingInputProps = SettingInputProps<string, string | number> & {\\n\\tvalue: string;\\n};\\n\\nexport const getHighestTimeUnit = (value: number): TIMEUNIT => {\\n\\tconst minutes = msToTimeUnit(TIMEUNIT.minutes, value);\\n\\tif (minutes % 60 !== 0) {\\n\\t\\treturn TIMEUNIT.minutes;\\n\\t}\\n\\n\\tconst hours = msToTimeUnit(TIMEUNIT.hours, value);\\n\\tif (hours % 24 !== 0) {\\n\\t\\treturn TIMEUNIT.hours;\\n\\t}\\n\\n\\treturn TIMEUNIT.days;\\n};\\n\\nconst sanitizeInputValue = (value: number) => {\\n\\tif (!value) {\\n\\t\\treturn 0;\\n\\t}\\n\\n\\tconst sanitizedValue = Math.max(0, value).toFixed(0);\\n\\n\\treturn Number(sanitizedValue);\\n};\\n\\nfunction TimespanSettingInput({\\n\\t_id,\\n\\tlabel,\\n\\tvalue,\\n\\tplaceholder,\\n\\treadonly,\\n\\tautocomplete,\\n\\tdisabled,\\n\\trequired,\\n\\tonChangeValue,\\n\\thasResetButton,\\n\\tonResetButtonClick,\\n\\tpackageValue,\\n}: TimespanSettingInputProps): ReactElement {\\n\\tconst { t, i18n } = useTranslation();\\n\\n\\tconst [timeUnit, setTimeUnit] = useState<TIMEUNIT>(getHighestTimeUnit(Number(value)));\\n\\tconst [internalValue, setInternalValue] = useState<number>(msToTimeUnit(timeUnit, Number(value)));\\n\\n\\tconst handleChange: FormEventHandler<HTMLInputElement> = (event) => {\\n\\t\\tconst newValue = sanitizeInputValue(Number(event.currentTarget.value));\\n\\n\\t\\tonChangeValue?.(timeUnitToMs(timeUnit, newValue));\\n\\n\\t\\tsetInternalValue(newValue);\\n\\t};\\n\\n\\tconst handleChangeTimeUnit = (nextTimeUnit: string | number) => {\\n\\t\\tif (typeof nextTimeUnit !== 'string') {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tonChangeValue?.(timeUnitToMs(nextTimeUnit as TIMEUNIT, internalValue));\\n\\t\\tsetTimeUnit(nextTimeUnit as TIMEUNIT);\\n\\t};\\n\\n\\tconst timeUnitOptions = useMemo(() => {\\n\\t\\treturn Object.entries(TIMEUNIT).map<readonly [TIMEUNIT, string]>(([label, value]) => [value, i18n.exists(label) ? t(label) : label]); // todo translate\\n\\t}, [t]);\\n\\n\\tconst handleResetButtonClick = () => {\\n\\t\\tonResetButtonClick?.();\\n\\t\\tconst newTimeUnit = getHighestTimeUnit(Number(packageValue));\\n\\t\\tsetTimeUnit(newTimeUnit);\\n\\t\\tsetInternalValue(msToTimeUnit(newTimeUnit, Number(packageValue)));\\n\\t};\\n\\n\\treturn (\\n\\t\\t<Field>\\n\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t<FieldLabel htmlFor={_id} title={_id} required={required}>\\n\\t\\t\\t\\t\\t{label}\\n\\t\\t\\t\\t</FieldLabel>\\n\\t\\t\\t\\t{hasResetButton && <ResetSettingButton data-qa-reset-setting-id={_id} onClick={handleResetButtonClick} />}\\n\\t\\t\\t</FieldRow>\\n\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t<InputBox\\n\\t\\t\\t\\t\\tdata-qa-setting-id={_id}\\n\\t\\t\\t\\t\\tid={_id}\\n\\t\\t\\t\\t\\ttype='number'\\n\\t\\t\\t\\t\\tvalue={internalValue}\\n\\t\\t\\t\\t\\tplaceholder={placeholder}\\n\\t\\t\\t\\t\\tdisabled={disabled}\\n\\t\\t\\t\\t\\treadOnly={readonly}\\n\\t\\t\\t\\t\\tautoComplete={autocomplete === false ? 'off' : undefined}\\n\\t\\t\\t\\t\\tonChange={handleChange}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t</FieldRow>\\n\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t<Select value={timeUnit} disabled={disabled} options={timeUnitOptions} onChange={handleChangeTimeUnit} />\\n\\t\\t\\t</FieldRow>\\n\\t\\t</Field>\\n\\t);\\n}\\n\\nexport default TimespanSettingInput;\\n\",null],\"names\":[\"Field\",\"FieldLabel\",\"FieldRow\",\"InputBox\",\"Select\",\"React\",\"useMemo\",\"useState\",\"useTranslation\",\"TIMEUNIT\",\"timeUnitToMs\",\"msToTimeUnit\",\"ResetSettingButton\",\"module\",\"export\",\"getHighestTimeUnit\",\"link\",\"v\",\"default\",\"value\",\"minutes\",\"hours\",\"days\",\"sanitizeInputValue\",\"sanitizedValue\",\"Math\",\"max\",\"toFixed\",\"Number\",\"exportDefault\",\"_ref\",\"_id\",\"label\",\"placeholder\",\"readonly\",\"autocomplete\",\"disabled\",\"required\",\"onChangeValue\",\"hasResetButton\",\"onResetButtonClick\",\"packageValue\",\"t\",\"i18n\",\"timeUnit\",\"setTimeUnit\",\"internalValue\",\"setInternalValue\",\"timeUnitOptions\",\"Object\",\"entries\",\"map\",\"_ref2\",\"exists\",\"createElement\",\"htmlFor\",\"title\",\"onClick\",\"handleResetButtonClick\",\"newTimeUnit\",\"id\",\"type\",\"readOnly\",\"autoComplete\",\"undefined\",\"onChange\",\"event\",\"newValue\",\"currentTarget\",\"options\",\"nextTimeUnit\"],\"mappings\":\"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\"}"}