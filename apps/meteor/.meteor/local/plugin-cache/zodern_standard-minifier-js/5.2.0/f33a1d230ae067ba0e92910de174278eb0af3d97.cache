{"code":"function module(t,i,e){let o,n,r,a,s,l,c,u,p;e.export({useAppsRoomActions:()=>d}),e.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(t){o=t}},0),e.link(\"react\",{useMemo(t){n=t}},1),e.link(\"react-i18next\",{useTranslation(t){r=t}},2),e.link(\"../../../../../app/ui-message/client/UiKitTriggerTimeoutError\",{UiKitTriggerTimeoutError(t){a=t}},3),e.link(\"../../../../../ee/lib/misc/Utilities\",{Utilities(t){s=t}},4),e.link(\"../../../../hooks/useAppActionButtons\",{useAppActionButtons(t){l=t}},5),e.link(\"../../../../hooks/useApplyButtonFilters\",{useApplyButtonFilters(t){c=t}},6),e.link(\"../../../../uikit/hooks/useUiKitActionManager\",{useUiKitActionManager(t){u=t}},7),e.link(\"../../contexts/RoomContext\",{useRoom(t){p=t}},8);let d=()=>{let t=l(\"roomAction\"),i=u(),e=c(),d=p(),{t:m}=r(),k=o();return n(()=>{var o,n;return null!==(o=null===(n=t.data)||void 0===n?void 0:n.filter(e).map(t=>({id:t.actionId,icon:void 0,variant:t.variant,order:300,title:s.getI18nKeyForApp(t.labelI18n,t.appId),groups:[\"group\",\"channel\",\"live\",\"team\",\"direct\",\"direct_multiple\"],action:()=>{i.emitInteraction(t.appId,{type:\"actionButton\",actionId:t.actionId,rid:d._id,payload:{context:t.context}}).catch(async t=>{if(t instanceof a){k({type:\"error\",message:m(\"UIKit_Interaction_Timeout\")});return}return t})},type:\"apps\"})))&&void 0!==o?o:[]},[i,e,k,t.data,d._id,m])}}","map":"{\"version\":3,\"sources\":[\"client/views/room/providers/hooks/useAppsRoomActions.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport { useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { UiKitTriggerTimeoutError } from '../../../../../app/ui-message/client/UiKitTriggerTimeoutError';\\nimport { Utilities } from '../../../../../ee/lib/misc/Utilities';\\nimport { useAppActionButtons } from '../../../../hooks/useAppActionButtons';\\nimport { useApplyButtonFilters } from '../../../../hooks/useApplyButtonFilters';\\nimport { useUiKitActionManager } from '../../../../uikit/hooks/useUiKitActionManager';\\nimport { useRoom } from '../../contexts/RoomContext';\\nimport type { RoomToolboxActionConfig } from '../../contexts/RoomToolboxContext';\\n\\nexport const useAppsRoomActions = () => {\\n\\tconst result = useAppActionButtons('roomAction');\\n\\tconst actionManager = useUiKitActionManager();\\n\\tconst applyButtonFilters = useApplyButtonFilters();\\n\\tconst room = useRoom();\\n\\tconst { t } = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\treturn useMemo(\\n\\t\\t() =>\\n\\t\\t\\tresult.data?.filter(applyButtonFilters).map(\\n\\t\\t\\t\\t(action): RoomToolboxActionConfig => ({\\n\\t\\t\\t\\t\\tid: action.actionId,\\n\\t\\t\\t\\t\\ticon: undefined,\\n\\t\\t\\t\\t\\tvariant: action.variant,\\n\\t\\t\\t\\t\\torder: 300,\\n\\t\\t\\t\\t\\ttitle: Utilities.getI18nKeyForApp(action.labelI18n, action.appId),\\n\\t\\t\\t\\t\\tgroups: ['group', 'channel', 'live', 'team', 'direct', 'direct_multiple'],\\n\\t\\t\\t\\t\\t// Filters were applied in the applyButtonFilters function\\n\\t\\t\\t\\t\\t// if the code made it this far, the button should be shown\\n\\t\\t\\t\\t\\taction: () => {\\n\\t\\t\\t\\t\\t\\tvoid actionManager\\n\\t\\t\\t\\t\\t\\t\\t.emitInteraction(action.appId, {\\n\\t\\t\\t\\t\\t\\t\\t\\ttype: 'actionButton',\\n\\t\\t\\t\\t\\t\\t\\t\\tactionId: action.actionId,\\n\\t\\t\\t\\t\\t\\t\\t\\trid: room._id,\\n\\t\\t\\t\\t\\t\\t\\t\\tpayload: { context: action.context },\\n\\t\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t\\t.catch(async (reason) => {\\n\\t\\t\\t\\t\\t\\t\\t\\tif (reason instanceof UiKitTriggerTimeoutError) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmessage: t('UIKit_Interaction_Timeout'),\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\treturn reason;\\n\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\ttype: 'apps',\\n\\t\\t\\t\\t}),\\n\\t\\t\\t) ?? [],\\n\\t\\t[actionManager, applyButtonFilters, dispatchToastMessage, result.data, room._id, t],\\n\\t);\\n};\\n\",null],\"names\":[\"useToastMessageDispatch\",\"useMemo\",\"useTranslation\",\"UiKitTriggerTimeoutError\",\"Utilities\",\"useAppActionButtons\",\"useApplyButtonFilters\",\"useUiKitActionManager\",\"useRoom\",\"module\",\"export\",\"useAppsRoomActions\",\"link\",\"v\",\"result\",\"actionManager\",\"applyButtonFilters\",\"room\",\"t\",\"dispatchToastMessage\",\"_result$data$filter$m\",\"_result$data\",\"data\",\"filter\",\"map\",\"action\",\"id\",\"actionId\",\"icon\",\"undefined\",\"variant\",\"order\",\"title\",\"getI18nKeyForApp\",\"labelI18n\",\"appId\",\"groups\",\"emitInteraction\",\"type\",\"rid\",\"_id\",\"payload\",\"context\",\"catch\",\"reason\",\"message\"],\"mappings\":\"2BAAwCA,EAA2BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAnEC,EAAOC,MAAE,CAAA,CAAAC,mBAAyBA,IAAAA,CAAM,GAA2BF,EAAAG,IAAA,CAAA,2BAAA,CAAAZ,wBAAAa,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAX,QAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,gBAAA,CAAAV,eAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,gEAAA,CAAAT,yBAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,uCAAA,CAAAR,UAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,wCAAA,CAAAP,oBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,0CAAA,CAAAN,sBAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,gDAAA,CAAAL,sBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,6BAAA,CAAAJ,QAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAY5D,IAAMF,EAAqBA,KACjC,IAAMG,EAAST,EAAoB,cAC7BU,EAAgBR,IAChBS,EAAqBV,IACrBW,EAAOT,IACP,CAAEU,EAAAA,CAAAA,CAAG,CAAGhB,IACRiB,EAAuBnB,IAE7B,OAAOC,EACN,KAAA,IAAAmB,EAAAC,EAAA,OAAA,AAiCE,OAjCFD,CAAAA,EAAA,AACY,OADZC,CAAAA,EACCP,EAAOQ,IAAI,AAAJA,GAAID,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAXA,EAAaE,MAAM,CAACP,GAAoBQ,GAAG,CACzCC,GAAqC,CAAA,CACrCC,GAAID,EAAOE,QAAQ,CACnBC,KAAMC,KAAAA,EACNC,QAASL,EAAOK,OAAO,CACvBC,MAAO,IACPC,MAAO5B,EAAU6B,gBAAgB,CAACR,EAAOS,SAAS,CAAET,EAAOU,KAAK,EAChEC,OAAQ,CAAC,QAAS,UAAW,OAAQ,OAAQ,SAAU,kBAAkB,CAGzEX,OAAQA,KACFV,EACHsB,eAAe,CAACZ,EAAOU,KAAK,CAAE,CAC9BG,KAAM,eACNX,SAAUF,EAAOE,QAAQ,CACzBY,IAAKtB,EAAKuB,GAAG,CACbC,QAAS,CAAEC,QAASjB,EAAOiB,OAAAA,AAAO,IAElCC,KAAK,CAAC,MAAOC,IACb,GAAIA,aAAkBzC,EAA0B,CAC/CgB,EAAqB,CACpBmB,KAAM,QACNO,QAAS3B,EAAE,+BAEZ,MACD,CAEA,OAAO0B,CACR,EACF,EACAN,KAAM,SACL,GACFlB,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAAE,EACR,CAACL,EAAeC,EAAoBG,EAAsBL,EAAOQ,IAAI,CAAEL,EAAKuB,GAAG,CAAEtB,EAAE,CAErF\"}"}