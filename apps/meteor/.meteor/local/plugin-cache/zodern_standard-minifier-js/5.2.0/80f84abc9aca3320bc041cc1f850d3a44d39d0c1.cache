{"code":"function module(n,e,t){t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(n){i=n}},0),t.export({useWebDAVMessageAction:function(){return b}}),t.link(\"@rocket.chat/ui-contexts\",{useSetModal:function(n){o=n},useSetting:function(n){u=n}},0),t.link(\"react\",{default:function(n){a=n},useEffect:function(n){l=n}},1),t.link(\"../../../../app/ui-utils/client/lib/MessageAction\",{MessageAction:function(n){c=n}},2),t.link(\"../../../../app/utils/client\",{getURL:function(n){s=n}},3),t.link(\"../../../hooks/webdav/useWebDAVAccountIntegrationsQuery\",{useWebDAVAccountIntegrationsQuery:function(n){r=n}},4),t.link(\"../../../lib/utils/messageArgs\",{messageArgs:function(n){d=n}},5),t.link(\"../../../views/room/webdav/SaveToWebdavModal\",{default:function(n){f=n}},6);var i,o,u,a,l,c,s,r,d,f,b=function(){var n=u(\"Webdav_Integration_Enabled\",!1),e=r({enabled:n}).data,t=o();l(function(){if(n)return c.addButton({id:\"webdav-upload\",icon:\"upload\",label:\"Save_To_Webdav\",condition:function(n){var t=n.message;return!!n.subscription&&!!(null!=e&&e.length)&&!!t.file},action:function(n,e){var o=e.message,u=(void 0===o?d(this).msg:o).attachments||[],l=i(u,1)[0],c=s(l.title_link,{full:!0});t(a.createElement(f,{data:{attachment:l,url:c},onClose:function(){return t(void 0)}}))},order:100,group:\"menu\"}),function(){c.removeButton(\"webdav-upload\")}},[null==e?void 0:e.length,n,t])}}","map":"{\"version\":3,\"sources\":[\"client/components/message/toolbar/useWebDAVMessageAction.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useSetModal, useSetting } from '@rocket.chat/ui-contexts';\\nimport React, { useEffect } from 'react';\\n\\nimport { MessageAction } from '../../../../app/ui-utils/client/lib/MessageAction';\\nimport { getURL } from '../../../../app/utils/client';\\nimport { useWebDAVAccountIntegrationsQuery } from '../../../hooks/webdav/useWebDAVAccountIntegrationsQuery';\\nimport { messageArgs } from '../../../lib/utils/messageArgs';\\nimport SaveToWebdavModal from '../../../views/room/webdav/SaveToWebdavModal';\\n\\nexport const useWebDAVMessageAction = () => {\\n\\tconst enabled = useSetting<boolean>('Webdav_Integration_Enabled', false);\\n\\n\\tconst { data } = useWebDAVAccountIntegrationsQuery({ enabled });\\n\\n\\tconst setModal = useSetModal();\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!enabled) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tMessageAction.addButton({\\n\\t\\t\\tid: 'webdav-upload',\\n\\t\\t\\ticon: 'upload',\\n\\t\\t\\tlabel: 'Save_To_Webdav',\\n\\t\\t\\tcondition: ({ message, subscription }) => {\\n\\t\\t\\t\\treturn !!subscription && !!data?.length && !!message.file;\\n\\t\\t\\t},\\n\\t\\t\\taction(_, props) {\\n\\t\\t\\t\\tconst { message = messageArgs(this).msg } = props;\\n\\t\\t\\t\\tconst [attachment] = message.attachments || [];\\n\\t\\t\\t\\tconst url = getURL(attachment.title_link as string, { full: true });\\n\\n\\t\\t\\t\\tsetModal(<SaveToWebdavModal data={{ attachment, url }} onClose={() => setModal(undefined)} />);\\n\\t\\t\\t},\\n\\t\\t\\torder: 100,\\n\\t\\t\\tgroup: 'menu',\\n\\t\\t});\\n\\n\\t\\treturn () => {\\n\\t\\t\\tMessageAction.removeButton('webdav-upload');\\n\\t\\t};\\n\\t}, [data?.length, enabled, setModal]);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_slicedToArray\",\"export\",\"useWebDAVMessageAction\",\"useSetModal\",\"useSetting\",\"React\",\"useEffect\",\"MessageAction\",\"getURL\",\"useWebDAVAccountIntegrationsQuery\",\"messageArgs\",\"SaveToWebdavModal\",\"enabled\",\"data\",\"_useWebDAVAccountInte\",\"setModal\",\"addButton\",\"id\",\"icon\",\"label\",\"condition\",\"_ref\",\"message\",\"subscription\",\"length\",\"file\",\"action\",\"_\",\"props\",\"_props$message\",\"_ref2\",\"msg\",\"attachments\",\"attachment\",\"_ref3\",\"url\",\"title_link\",\"full\",\"createElement\",\"onClose\",\"undefined\",\"order\",\"group\",\"removeButton\"],\"mappings\":\"uBAASA,EAAaC,IAAA,CAAA,uCAA6C,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAnEH,EAAOK,MAAE,CAAA,CAAAC,uBAAyB,WAAM,OAAAA,CAA2B,CAAA,GAAAN,EAAAC,IAAA,CAAA,2BAAA,CAAAM,YAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,EAAAK,WAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAM,EAAAN,CAAA,EAAAO,UAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oDAAA,CAAAU,cAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,+BAAA,CAAAW,OAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0DAAA,CAAAY,kCAAA,SAAAV,CAAA,EAAAU,EAAAV,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iCAAA,CAAAa,YAAA,SAAAX,CAAA,EAAAW,EAAAX,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,+CAAA,CAAA,QAAA,SAAAE,CAAA,EAAAY,EAAAZ,CAAA,CAAA,EAAA,GAS5D,IATPC,EAAmEG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAStDT,EAAyB,WACrC,IAAMU,EAAUR,EAAoB,6BAA8B,CAAA,GAE1DS,EAAIC,AAAKL,EAAkC,CAAEG,QAAAA,CAAO,GAApDC,IAAI,CAENE,EAAWZ,IAEjBG,EAAU,WACT,GAAKM,EAsBL,OAlBAL,EAAcS,SAAS,CAAC,CACvBC,GAAI,gBACJC,KAAM,SACNC,MAAO,iBACPC,UAAW,SAAAC,CAAA,EAA8B,IAA3BC,EAAOD,EAAPC,OAAO,CACpB,MAAO,CAAC,CAD0BD,EAAZE,YAAY,EACT,CAAC,CAACV,CAAAA,MAAAA,GAAAA,EAAMW,MAAM,AAANA,GAAU,CAAC,CAACF,EAAQG,IAAI,AAC1D,EACAC,OAAM,SAACC,CAAC,CAAEC,CAAK,EACd,IAAAC,EAA4CD,EAApCN,OAAO,CACfQ,EAAqBR,AADNO,CAAAA,AAAA,KAAA,IAAAA,EAAGnB,EAAY,IAAI,EAAEqB,GAAG,CAAAF,CAAAA,EACVG,WAAW,EAAI,EAAE,CAAvCC,EAAUC,AAA6BlC,EAAA8B,EAAA,EAA7B,CAAA,EAAA,CACXK,EAAM3B,EAAOyB,EAAWG,UAAoB,CAAE,CAAEC,KAAM,CAAA,CAAI,GAEhEtB,EAASV,EAAAiC,aAAA,CAAC3B,EAAiB,CAACE,KAAM,CAAEoB,WAAAA,EAAYE,IAAAA,CAAG,EAAII,QAAS,WAAA,OAAMxB,EAASyB,KAAAA,EAAU,CAAC,GAC3F,EACAC,MAAO,IACPC,MAAO,SAGD,WACNnC,EAAcoC,YAAY,CAAC,gBAC5B,CACD,EAAG,CAAC9B,MAAAA,EAAI,KAAA,EAAJA,EAAMW,MAAM,CAAEZ,EAASG,EAAS,CACrC\"}"}