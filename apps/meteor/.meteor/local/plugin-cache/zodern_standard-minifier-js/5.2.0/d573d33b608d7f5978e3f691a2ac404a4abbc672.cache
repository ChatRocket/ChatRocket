{"code":"function module(e,t,a){let l,n,s,o,c,u,r,i;a.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){l=e}},0),a.export({useAsyncState:()=>y,AsyncStatePhase:()=>u,AsyncState:()=>r}),a.link(\"@rocket.chat/fuselage-hooks\",{useSafely(e){n=e}},0),a.link(\"react\",{useCallback(e){s=e},useMemo(e){o=e},useState(e){c=e}},1),a.link(\"../lib/asyncState\",{AsyncStatePhase(e){u=e},AsyncState(e){r=e},asyncState(e){i=e}},2);let y=e=>{let[t,a]=n(c(()=>void 0===e?i.loading():i.resolved(\"function\"==typeof e?e():e))),u=s(e=>{a(t=>\"function\"==typeof e?i.resolve(t,e(t.value)):i.resolve(t,e))},[a]),r=s(e=>{a(t=>i.reject(t,e))},[a]),y=s(()=>{a(e=>i.update(e))},[a]),S=s(()=>{a(e=>i.reload(e))},[a]);return o(()=>l(l({},t),{},{resolve:u,reject:r,reset:S,update:y}),[t,u,r,S,y])}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useAsyncState.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useSafely } from '@rocket.chat/fuselage-hooks';\\nimport { useCallback, useMemo, useState } from 'react';\\n\\nimport { AsyncStatePhase, AsyncState, asyncState } from '../lib/asyncState';\\n\\ntype AsyncStateObject<T> = AsyncState<T> & {\\n\\tresolve: (value: T | ((prev: T | undefined) => T)) => void;\\n\\treject: (error: Error) => void;\\n\\treset: () => void;\\n\\tupdate: () => void;\\n};\\n\\nexport const useAsyncState = <T>(initialValue?: T | (() => T)): AsyncStateObject<T> => {\\n\\tconst [state, setState] = useSafely(\\n\\t\\tuseState<AsyncState<T>>(() => {\\n\\t\\t\\tif (typeof initialValue === 'undefined') {\\n\\t\\t\\t\\treturn asyncState.loading<T>();\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn asyncState.resolved<T>(typeof initialValue === 'function' ? (initialValue as () => T)() : initialValue);\\n\\t\\t}),\\n\\t);\\n\\n\\tconst resolve = useCallback(\\n\\t\\t(value: T | ((prev: T | undefined) => T)) => {\\n\\t\\t\\tsetState((state) => {\\n\\t\\t\\t\\tif (typeof value === 'function') {\\n\\t\\t\\t\\t\\treturn asyncState.resolve(state, (value as (prev: T | undefined) => T)(state.value));\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn asyncState.resolve(state, value);\\n\\t\\t\\t});\\n\\t\\t},\\n\\t\\t[setState],\\n\\t);\\n\\n\\tconst reject = useCallback(\\n\\t\\t(error: Error) => {\\n\\t\\t\\tsetState((state) => asyncState.reject(state, error));\\n\\t\\t},\\n\\t\\t[setState],\\n\\t);\\n\\n\\tconst update = useCallback(() => {\\n\\t\\tsetState((state) => asyncState.update(state));\\n\\t}, [setState]);\\n\\n\\tconst reset = useCallback(() => {\\n\\t\\tsetState((state) => asyncState.reload(state));\\n\\t}, [setState]);\\n\\n\\treturn useMemo(\\n\\t\\t() => ({\\n\\t\\t\\t...state,\\n\\t\\t\\tresolve,\\n\\t\\t\\treject,\\n\\t\\t\\treset,\\n\\t\\t\\tupdate,\\n\\t\\t}),\\n\\t\\t[state, resolve, reject, reset, update],\\n\\t);\\n};\\n\\nexport { AsyncStatePhase, AsyncState };\\n\",null],\"names\":[\"_objectSpread\",\"useSafely\",\"useCallback\",\"useMemo\",\"useState\",\"AsyncStatePhase\",\"AsyncState\",\"asyncState\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useAsyncState\",\"initialValue\",\"state\",\"setState\",\"loading\",\"resolved\",\"resolve\",\"value\",\"reject\",\"error\",\"update\",\"reset\",\"reload\"],\"mappings\":\"2BAAAA,EAAwDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAtCC,EAAEC,IAAM,CAAA,uCAA8B,CAAAC,QAAAC,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAxDH,EAAOI,MAAE,CAAA,CAAAC,cAAiBA,IAAAA,EAAAR,gBAA8BA,IAAAA,EAAAC,WAAAA,IAAAA,CAAA,GAAAE,EAAAC,IAAA,CAAA,8BAAA,CAAAR,UAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAP,YAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,QAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oBAAA,CAAAJ,gBAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,WAAAK,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,WAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAYjD,IAAME,EAAoBC,IAChC,GAAM,CAACC,EAAOC,EAAS,CAAGf,EACzBG,EAAwB,IACvB,AAAI,AAAwB,KAAA,IAAjBU,EACHP,EAAWU,OAAO,GAGnBV,EAAWW,QAAQ,CAAI,AAAwB,YAAxB,OAAOJ,EAA+BA,IAA6BA,KAI7FK,EAAUjB,EACdkB,IACAJ,EAAUD,GACT,AAAI,AAAiB,YAAjB,OAAOK,EACHb,EAAWY,OAAO,CAACJ,EAAQK,EAAqCL,EAAMK,KAAK,GAG5Eb,EAAWY,OAAO,CAACJ,EAAOK,GAEnC,EACA,CAACJ,EAAS,EAGLK,EAASnB,EACboB,IACAN,EAAUD,GAAUR,EAAWc,MAAM,CAACN,EAAOO,GAC9C,EACA,CAACN,EAAS,EAGLO,EAASrB,EAAY,KAC1Bc,EAAUD,GAAUR,EAAWgB,MAAM,CAACR,GACvC,EAAG,CAACC,EAAS,EAEPQ,EAAQtB,EAAY,KACzBc,EAAUD,GAAUR,EAAWkB,MAAM,CAACV,GACvC,EAAG,CAACC,EAAS,EAEb,OAAOb,EACN,IAAAH,EAAAA,EAAA,CAAA,EACIe,GAAK,CAAA,EAAA,CACRI,QAAAA,EACAE,OAAAA,EACAG,MAAAA,EACAD,OAAAA,CAAM,GAEP,CAACR,EAAOI,EAASE,EAAQG,EAAOD,EAAO,CAEzC\"}"}