{"code":"function module(t,e,n){let i,o,l;n.export({isPromptButton:()=>a,formattingButtons:()=>c}),n.link(\"../../../../client/lib/imperativeModal\",{imperativeModal(t){i=t}},0),n.link(\"../../../settings/client\",{settings(t){o=t}},1),n.link(\"./AddLinkComposerActionModal\",{default(t){l=t}},2);let a=t=>\"prompt\"in t,c=[{label:\"Bold\",icon:\"bold\",pattern:\"*{{text}}*\",command:\"b\"},{label:\"Italic\",icon:\"italic\",pattern:\"_{{text}}_\",command:\"i\"},{label:\"Strike\",icon:\"strike\",pattern:\"~{{text}}~\"},{label:\"Inline_code\",icon:\"code\",pattern:\"`{{text}}`\"},{label:\"Multi_line\",icon:\"multiline\",pattern:\"```\\n{{text}}\\n``` \"},{label:\"Link\",icon:\"link\",prompt:t=>{let{selection:e}=t,n=t.substring(e.start,e.end),o=()=>{i.close(),t.focus()};i.open({component:l,props:{onConfirm:(n,i)=>{o(),t.replaceText(\"[\".concat(i,\"](\").concat(n,\")\"),e),t.setCursorToEnd()},selectedText:n,onClose:o}})}},{label:\"KaTeX\",icon:\"katex\",text:()=>o.get(\"Katex_Enabled\")?o.get(\"Katex_Dollar_Syntax\")?\"$$KaTeX$$\":o.get(\"Katex_Parenthesis_Syntax\")?\"\\\\[KaTeX\\\\]\":void 0:void 0,link:\"https://khan.github.io/KaTeX/function-support.html\",condition:()=>o.get(\"Katex_Enabled\")}]}","map":"{\"version\":3,\"sources\":[\"app/ui-message/client/messageBox/messageBoxFormatting.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { Keys as IconName } from '@rocket.chat/icons';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\n\\nimport type { ComposerAPI } from '../../../../client/lib/chats/ChatAPI';\\nimport { imperativeModal } from '../../../../client/lib/imperativeModal';\\nimport { settings } from '../../../settings/client';\\nimport AddLinkComposerActionModal from './AddLinkComposerActionModal';\\n\\ntype FormattingButtonDefault = { label: TranslationKey; condition?: () => boolean };\\n\\ntype TextButton = {\\n\\ttext: () => string | undefined;\\n\\tlink: string;\\n} & FormattingButtonDefault;\\n\\ntype PatternButton = {\\n\\ticon: IconName;\\n\\tpattern: string;\\n\\t// text?: () => string | undefined;\\n\\tcommand?: string;\\n\\tlink?: string;\\n} & FormattingButtonDefault;\\n\\ntype PromptButton = {\\n\\tprompt: (composer: ComposerAPI) => void;\\n\\ticon: IconName;\\n} & FormattingButtonDefault;\\n\\nexport type FormattingButton = PatternButton | PromptButton | TextButton;\\n\\nexport const isPromptButton = (button: FormattingButton): button is PromptButton => 'prompt' in button;\\n\\nexport const formattingButtons: ReadonlyArray<FormattingButton> = [\\n\\t{\\n\\t\\tlabel: 'Bold',\\n\\t\\ticon: 'bold',\\n\\t\\tpattern: '*{{text}}*',\\n\\t\\tcommand: 'b',\\n\\t},\\n\\t{\\n\\t\\tlabel: 'Italic',\\n\\t\\ticon: 'italic',\\n\\t\\tpattern: '_{{text}}_',\\n\\t\\tcommand: 'i',\\n\\t},\\n\\t{\\n\\t\\tlabel: 'Strike',\\n\\t\\ticon: 'strike',\\n\\t\\tpattern: '~{{text}}~',\\n\\t},\\n\\t{\\n\\t\\tlabel: 'Inline_code',\\n\\t\\ticon: 'code',\\n\\t\\tpattern: '`{{text}}`',\\n\\t},\\n\\t{\\n\\t\\tlabel: 'Multi_line',\\n\\t\\ticon: 'multiline',\\n\\t\\tpattern: '```\\\\n{{text}}\\\\n``` ',\\n\\t},\\n\\t{\\n\\t\\tlabel: 'Link',\\n\\t\\ticon: 'link',\\n\\t\\tprompt: (composerApi: ComposerAPI) => {\\n\\t\\t\\tconst { selection } = composerApi;\\n\\n\\t\\t\\tconst selectedText = composerApi.substring(selection.start, selection.end);\\n\\n\\t\\t\\tconst onClose = () => {\\n\\t\\t\\t\\timperativeModal.close();\\n\\t\\t\\t\\tcomposerApi.focus();\\n\\t\\t\\t};\\n\\n\\t\\t\\tconst onConfirm = (url: string, text: string) => {\\n\\t\\t\\t\\tonClose();\\n\\t\\t\\t\\tcomposerApi.replaceText(`[${text}](${url})`, selection);\\n\\t\\t\\t\\tcomposerApi.setCursorToEnd();\\n\\t\\t\\t};\\n\\n\\t\\t\\timperativeModal.open({ component: AddLinkComposerActionModal, props: { onConfirm, selectedText, onClose } });\\n\\t\\t},\\n\\t},\\n\\t{\\n\\t\\tlabel: 'KaTeX' as TranslationKey,\\n\\t\\ticon: 'katex',\\n\\t\\ttext: () => {\\n\\t\\t\\tif (!settings.get('Katex_Enabled')) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tif (settings.get('Katex_Dollar_Syntax')) {\\n\\t\\t\\t\\treturn '$$KaTeX$$';\\n\\t\\t\\t}\\n\\t\\t\\tif (settings.get('Katex_Parenthesis_Syntax')) {\\n\\t\\t\\t\\treturn '\\\\\\\\[KaTeX\\\\\\\\]';\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tlink: 'https://khan.github.io/KaTeX/function-support.html',\\n\\t\\tcondition: () => settings.get('Katex_Enabled'),\\n\\t},\\n] as const;\\n\",null],\"names\":[\"imperativeModal\",\"settings\",\"AddLinkComposerActionModal\",\"module\",\"export\",\"isPromptButton\",\"formattingButtons\",\"link\",\"v\",\"default\",\"button\",\"label\",\"icon\",\"pattern\",\"command\",\"prompt\",\"composerApi\",\"selection\",\"selectedText\",\"substring\",\"start\",\"end\",\"onClose\",\"close\",\"focus\",\"open\",\"component\",\"props\",\"onConfirm\",\"url\",\"text\",\"replaceText\",\"concat\",\"setCursorToEnd\",\"get\",\"condition\"],\"mappings\":\"2BAIyEA,EAAAC,EAAAC,EAAzEC,EAAOC,MAAE,CAAA,CAAAC,eAAiBA,IAAMA,EAAAC,kBAAAA,IAAAA,CAAyC,GAAAH,EAAAI,IAAA,CAAA,yCAAA,CAAAP,gBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAL,EAAAI,IAAA,CAAA,2BAAA,CAAAN,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAL,EAAAI,IAAA,CAAA,+BAAA,CAAAE,QAAAD,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GA0BlE,IAAMH,EAAkBK,GAAqD,WAAYA,EAEnFJ,EAAqD,CACjE,CACCK,MAAO,OACPC,KAAM,OACNC,QAAS,aACTC,QAAS,KAEV,CACCH,MAAO,SACPC,KAAM,SACNC,QAAS,aACTC,QAAS,KAEV,CACCH,MAAO,SACPC,KAAM,SACNC,QAAS,cAEV,CACCF,MAAO,cACPC,KAAM,OACNC,QAAS,cAEV,CACCF,MAAO,aACPC,KAAM,YACNC,QAAS,uBAEV,CACCF,MAAO,OACPC,KAAM,OACNG,OAASC,IACR,GAAM,CAAEC,UAAAA,CAAAA,CAAW,CAAGD,EAEhBE,EAAeF,EAAYG,SAAS,CAACF,EAAUG,KAAK,CAAEH,EAAUI,GAAG,EAEnEC,EAAUA,KACftB,EAAgBuB,KAAK,GACrBP,EAAYQ,KAAK,EAClB,EAQAxB,EAAgByB,IAAI,CAAC,CAAEC,UAAWxB,EAA4ByB,MAAO,CAAEC,UANrDA,CAACC,EAAaC,KAC/BR,IACAN,EAAYe,WAAW,CAAA,IAAAC,MAAA,CAAKF,EAAI,MAAAE,MAAA,CAAKH,EAAG,KAAKZ,GAC7CD,EAAYiB,cAAc,EAC3B,EAEkFf,aAAAA,EAAcI,QAAAA,CAAO,CAAE,EAC1G,GAED,CACCX,MAAO,QACPC,KAAM,QACNkB,KAAMA,IACL,AAAK7B,EAASiC,GAAG,CAAC,iBAGdjC,EAASiC,GAAG,CAAC,uBACT,YAEJjC,EAASiC,GAAG,CAAC,4BACT,qBANP,KAAA,EASF3B,KAAM,qDACN4B,UAAWA,IAAMlC,EAASiC,GAAG,CAAC,kBAEtB\"}"}