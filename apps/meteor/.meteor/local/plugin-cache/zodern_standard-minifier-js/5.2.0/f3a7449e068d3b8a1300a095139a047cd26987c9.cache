{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){u=e}},1),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){i=e}},2),t.link(\"@rocket.chat/fuselage\",{Box:function(e){a=e},Skeleton:function(e){o=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){l=e},useTranslation:function(e){c=e}},1),t.link(\"react\",{default:function(e){f=e},useEffect:function(e){s=e},useState:function(e){d=e},useMemo:function(e){m=e}},2),t.link(\"../realTimeMonitoring/counter/CounterItem\",{default:function(e){p=e}},3),t.link(\"../realTimeMonitoring/counter/CounterRow\",{default:function(e){b=e}},4);var r,u,i,a,o,l,c,f,s,d,m,p,b,k=Array.from({length:3}).map(function(){return{title:void 0,value:\"\"}}),v=[k,k],h=[k];t.exportDefault(function(e){var n=e.type,t=e.dateRange,k=e.departmentId,x=c(),g=t.start,y=t.end,E=m(function(){return i({name:n,from:g,to:y},k&&{departmentId:k})},[k,y,g,n]),w=l(\"GET\",\"/v1/livechat/analytics/overview\"),T=d(v),S=u(T,2),C=S[0],I=S[1];return s(function(){I(\"Conversations\"===n?v:h)},[n]),s(function(){var e;r.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!g||!y)){n.next=2;break}return n.abrupt(\"return\");case 2:return n.next=4,r.awrap(w(E));case 4:if(e=n.sent){n.next=7;break}return n.abrupt(\"return\");case 7:if(!(e.length>3)){n.next=9;break}return n.abrupt(\"return\",I([e.slice(0,3),e.slice(3)]));case 9:I([e]);case 10:case\"end\":return n.stop()}},null,null,null,Promise)},[g,y,w,E]),f.createElement(a,{pb:28,flexDirection:\"column\"},C.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return f.createElement(b,{key:n,border:\"0\",pb:\"none\"},e.map(function(e,n){var t=e.title,r=e.value;return f.createElement(p,{flexShrink:1,pb:8,flexBasis:\"100%\",key:n,title:t?x(t):f.createElement(o,{width:\"x60\"}),count:r})}))}))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/analytics/Overview.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Skeleton } from '@rocket.chat/fuselage';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\\nimport React, { useEffect, useState, useMemo } from 'react';\\n\\nimport CounterItem from '../realTimeMonitoring/counter/CounterItem';\\nimport CounterRow from '../realTimeMonitoring/counter/CounterRow';\\n\\nconst initialData: { title?: string; value: string | number }[] = Array.from({ length: 3 }).map(() => ({ title: undefined, value: '' }));\\n\\nconst conversationsInitialData = [initialData, initialData];\\nconst productivityInitialData = [initialData];\\n\\nconst Overview = ({ type, dateRange, departmentId }: { type: string; dateRange: { start: string; end: string }; departmentId: string }) => {\\n\\tconst t = useTranslation();\\n\\n\\tconst { start, end } = dateRange;\\n\\n\\tconst params = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\tname: type,\\n\\t\\t\\tfrom: start,\\n\\t\\t\\tto: end,\\n\\t\\t\\t...(departmentId && { departmentId }),\\n\\t\\t}),\\n\\t\\t[departmentId, end, start, type],\\n\\t);\\n\\n\\tconst loadData = useEndpoint('GET', '/v1/livechat/analytics/overview');\\n\\n\\tconst [displayData, setDisplayData] = useState(conversationsInitialData);\\n\\n\\tuseEffect(() => {\\n\\t\\tsetDisplayData(type === 'Conversations' ? conversationsInitialData : productivityInitialData);\\n\\t}, [type]);\\n\\n\\tuseEffect(() => {\\n\\t\\tasync function fetchData() {\\n\\t\\t\\tif (!start || !end) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst value = await loadData(params);\\n\\t\\t\\tif (!value) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (value.length > 3) {\\n\\t\\t\\t\\treturn setDisplayData([value.slice(0, 3), value.slice(3)]);\\n\\t\\t\\t}\\n\\n\\t\\t\\tsetDisplayData([value]);\\n\\t\\t}\\n\\t\\tfetchData();\\n\\t}, [start, end, loadData, params]);\\n\\n\\treturn (\\n\\t\\t<Box pb={28} flexDirection='column'>\\n\\t\\t\\t{displayData.map((items = [], i) => (\\n\\t\\t\\t\\t<CounterRow key={i} border='0' pb='none'>\\n\\t\\t\\t\\t\\t{items.map(({ title, value }, i) => (\\n\\t\\t\\t\\t\\t\\t<CounterItem\\n\\t\\t\\t\\t\\t\\t\\tflexShrink={1}\\n\\t\\t\\t\\t\\t\\t\\tpb={8}\\n\\t\\t\\t\\t\\t\\t\\tflexBasis='100%'\\n\\t\\t\\t\\t\\t\\t\\tkey={i}\\n\\t\\t\\t\\t\\t\\t\\ttitle={title ? t(title as TranslationKey) : <Skeleton width='x60' />}\\n\\t\\t\\t\\t\\t\\t\\tcount={value}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t</CounterRow>\\n\\t\\t\\t))}\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default Overview;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_slicedToArray\",\"_objectSpread\",\"Box\",\"Skeleton\",\"useEndpoint\",\"useTranslation\",\"React\",\"useEffect\",\"useState\",\"useMemo\",\"CounterItem\",\"CounterRow\",\"initialData\",\"Array\",\"from\",\"length\",\"map\",\"title\",\"undefined\",\"value\",\"conversationsInitialData\",\"productivityInitialData\",\"exportDefault\",\"_ref\",\"type\",\"dateRange\",\"departmentId\",\"t\",\"start\",\"end\",\"params\",\"name\",\"to\",\"loadData\",\"_useState\",\"_useState2\",\"displayData\",\"setDisplayData\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"awrap\",\"sent\",\"slice\",\"stop\",\"Promise\",\"createElement\",\"pb\",\"flexDirection\",\"items\",\"arguments\",\"i\",\"key\",\"border\",\"_ref2\",\"flexShrink\",\"flexBasis\",\"width\",\"count\"],\"mappings\":\"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\"}"}