{"code":"function module(e,t,n){let s,l,a,o,i,r,u,c,m,k,d,f,U,E,p,b,h,g;n.link(\"@babel/runtime/helpers/extends\",{default(e){s=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useEffectEvent(e){l=e}},0),n.link(\"@rocket.chat/ui-client\",{GenericMenu(e){a=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useSetting(e){o=e},useRolesDescription(e){i=e},useTranslation(e){r=e}},2),n.link(\"react\",{default(e){u=e},useMemo(e){c=e}},3),n.link(\"../../../../lib/getUserDisplayName\",{getUserDisplayName(e){m=e}},4),n.link(\"../../../components/LocalTime\",{default(e){k=e}},5),n.link(\"../../../components/UserCard\",{UserCard(e){d=e},UserCardAction(e){f=e},UserCardRole(e){U=e},UserCardSkeleton(e){E=e}},6),n.link(\"../../../components/UserStatus\",{ReactiveUserStatus(e){p=e}},7),n.link(\"../../../hooks/useUserInfoQuery\",{useUserInfoQuery(e){b=e}},8),n.link(\"../../hooks/useMemberExists\",{useMemberExists(e){h=e}},9),n.link(\"../hooks/useUserInfoActions\",{useUserInfoActions(e){g=e}},10),n.exportDefault(e=>{var t;let{username:n,rid:I,onOpenUserInfo:S,onClose:v}=e,x=r(),y=i(),C=!!o(\"UI_Use_Real_Name\"),{data:M,isLoading:A}=b({username:n}),{data:_,refetch:D,isSuccess:N,isLoading:R}=h({roomId:I,username:n}),L=A||R,T=N&&(null==_?void 0:_.isMember),w=c(()=>{let e=L?void 0:null,{_id:t,name:s,roles:l=e,statusText:a=e,bio:o=e,utcOffset:i=e,nickname:r,avatarETag:c,freeSwitchExtension:d}=(null==M?void 0:M.user)||{};return{_id:t,name:m(s,n,C),username:n,roles:l&&y(l).map((e,t)=>u.createElement(U,{key:t},e)),bio:o,etag:c,localTime:i&&Number.isInteger(i)&&u.createElement(k,{utcOffset:i}),status:t&&u.createElement(p,{uid:t}),customStatus:a,nickname:r,freeSwitchExtension:d}},[M,n,C,L,y]),O=l(()=>{S(),v()}),{actions:Q,menuActions:q}=g({rid:I,user:{_id:null!==(t=w._id)&&void 0!==t?t:\"\",username:w.username,name:w.name,freeSwitchExtension:w.freeSwitchExtension},size:3,isMember:T,reload:D}),z=c(()=>null!=q&&q.length?u.createElement(a,{title:x(\"More\"),key:\"menu\",\"data-qa-id\":\"menu\",sections:q,placement:\"bottom-start\",callbackAction:v}):null,[q,v,x]),B=c(()=>[...Q.map(e=>{let[t,{content:n,title:s,icon:l,onClick:a}]=e;return u.createElement(f,{key:t,label:n||s,\"aria-label\":n||s,onClick:a,icon:l})}),z].filter(Boolean),[Q,z]);return L?u.createElement(E,null):u.createElement(d,s({},w,{onClose:v,onOpenUserInfo:O,actions:B}))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/UserCard/UserCardWithData.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\\nimport { GenericMenu } from '@rocket.chat/ui-client';\\nimport { useSetting, useRolesDescription, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useMemo } from 'react';\\n\\nimport { getUserDisplayName } from '../../../../lib/getUserDisplayName';\\nimport LocalTime from '../../../components/LocalTime';\\nimport { UserCard, UserCardAction, UserCardRole, UserCardSkeleton } from '../../../components/UserCard';\\nimport { ReactiveUserStatus } from '../../../components/UserStatus';\\nimport { useUserInfoQuery } from '../../../hooks/useUserInfoQuery';\\nimport { useMemberExists } from '../../hooks/useMemberExists';\\nimport { useUserInfoActions } from '../hooks/useUserInfoActions';\\n\\ntype UserCardWithDataProps = {\\n\\tusername: string;\\n\\trid: IRoom['_id'];\\n\\tonOpenUserInfo: () => void;\\n\\tonClose: () => void;\\n};\\n\\nconst UserCardWithData = ({ username, rid, onOpenUserInfo, onClose }: UserCardWithDataProps) => {\\n\\tconst t = useTranslation();\\n\\tconst getRoles = useRolesDescription();\\n\\tconst showRealNames = Boolean(useSetting('UI_Use_Real_Name'));\\n\\n\\tconst { data, isLoading: isUserInfoLoading } = useUserInfoQuery({ username });\\n\\tconst {\\n\\t\\tdata: isMemberData,\\n\\t\\trefetch,\\n\\t\\tisSuccess: membershipCheckSuccess,\\n\\t\\tisLoading: isMembershipStatusLoading,\\n\\t} = useMemberExists({ roomId: rid, username });\\n\\n\\tconst isLoading = isUserInfoLoading || isMembershipStatusLoading;\\n\\tconst isMember = membershipCheckSuccess && isMemberData?.isMember;\\n\\n\\tconst user = useMemo(() => {\\n\\t\\tconst defaultValue = isLoading ? undefined : null;\\n\\n\\t\\tconst {\\n\\t\\t\\t_id,\\n\\t\\t\\tname,\\n\\t\\t\\troles = defaultValue,\\n\\t\\t\\tstatusText = defaultValue,\\n\\t\\t\\tbio = defaultValue,\\n\\t\\t\\tutcOffset = defaultValue,\\n\\t\\t\\tnickname,\\n\\t\\t\\tavatarETag,\\n\\t\\t\\tfreeSwitchExtension,\\n\\t\\t} = data?.user || {};\\n\\n\\t\\treturn {\\n\\t\\t\\t_id,\\n\\t\\t\\tname: getUserDisplayName(name, username, showRealNames),\\n\\t\\t\\tusername,\\n\\t\\t\\troles: roles && getRoles(roles).map((role, index) => <UserCardRole key={index}>{role}</UserCardRole>),\\n\\t\\t\\tbio,\\n\\t\\t\\tetag: avatarETag,\\n\\t\\t\\tlocalTime: utcOffset && Number.isInteger(utcOffset) && <LocalTime utcOffset={utcOffset} />,\\n\\t\\t\\tstatus: _id && <ReactiveUserStatus uid={_id} />,\\n\\t\\t\\tcustomStatus: statusText,\\n\\t\\t\\tnickname,\\n\\t\\t\\tfreeSwitchExtension,\\n\\t\\t};\\n\\t}, [data, username, showRealNames, isLoading, getRoles]);\\n\\n\\tconst handleOpenUserInfo = useEffectEvent(() => {\\n\\t\\tonOpenUserInfo();\\n\\t\\tonClose();\\n\\t});\\n\\n\\tconst { actions: actionsDefinition, menuActions: menuOptions } = useUserInfoActions({\\n\\t\\trid,\\n\\t\\tuser: { _id: user._id ?? '', username: user.username, name: user.name, freeSwitchExtension: user.freeSwitchExtension },\\n\\t\\tsize: 3,\\n\\t\\tisMember,\\n\\t\\treload: refetch,\\n\\t});\\n\\n\\tconst menu = useMemo(() => {\\n\\t\\tif (!menuOptions?.length) {\\n\\t\\t\\treturn null;\\n\\t\\t}\\n\\n\\t\\treturn (\\n\\t\\t\\t<GenericMenu\\n\\t\\t\\t\\ttitle={t('More')}\\n\\t\\t\\t\\tkey='menu'\\n\\t\\t\\t\\tdata-qa-id='menu'\\n\\t\\t\\t\\tsections={menuOptions}\\n\\t\\t\\t\\tplacement='bottom-start'\\n\\t\\t\\t\\tcallbackAction={onClose}\\n\\t\\t\\t/>\\n\\t\\t);\\n\\t}, [menuOptions, onClose, t]);\\n\\n\\tconst actions = useMemo(() => {\\n\\t\\tconst mapAction = ([key, { content, title, icon, onClick }]: any): ReactElement => (\\n\\t\\t\\t<UserCardAction key={key} label={content || title} aria-label={content || title} onClick={onClick} icon={icon} />\\n\\t\\t);\\n\\n\\t\\treturn [...actionsDefinition.map(mapAction), menu].filter(Boolean);\\n\\t}, [actionsDefinition, menu]);\\n\\n\\tif (isLoading) {\\n\\t\\treturn <UserCardSkeleton />;\\n\\t}\\n\\n\\treturn <UserCard {...user} onClose={onClose} onOpenUserInfo={handleOpenUserInfo} actions={actions} />;\\n};\\n\\nexport default UserCardWithData;\\n\",null],\"names\":[\"_extends\",\"useEffectEvent\",\"GenericMenu\",\"useSetting\",\"useRolesDescription\",\"useTranslation\",\"React\",\"useMemo\",\"getUserDisplayName\",\"LocalTime\",\"UserCard\",\"UserCardAction\",\"UserCardRole\",\"UserCardSkeleton\",\"ReactiveUserStatus\",\"useUserInfoQuery\",\"useMemberExists\",\"useUserInfoActions\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_user$_id\",\"username\",\"rid\",\"onOpenUserInfo\",\"onClose\",\"t\",\"getRoles\",\"showRealNames\",\"Boolean\",\"data\",\"isLoading\",\"isUserInfoLoading\",\"isMemberData\",\"refetch\",\"isSuccess\",\"membershipCheckSuccess\",\"isMembershipStatusLoading\",\"roomId\",\"isMember\",\"user\",\"defaultValue\",\"undefined\",\"_id\",\"name\",\"roles\",\"statusText\",\"bio\",\"utcOffset\",\"nickname\",\"avatarETag\",\"freeSwitchExtension\",\"map\",\"role\",\"index\",\"createElement\",\"key\",\"etag\",\"localTime\",\"Number\",\"isInteger\",\"status\",\"uid\",\"customStatus\",\"handleOpenUserInfo\",\"actions\",\"actionsDefinition\",\"menuActions\",\"menuOptions\",\"size\",\"reload\",\"menu\",\"length\",\"title\",\"sections\",\"placement\",\"callbackAction\",\"_ref2\",\"content\",\"icon\",\"onClick\",\"label\",\"filter\"],\"mappings\":\"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\"}"}