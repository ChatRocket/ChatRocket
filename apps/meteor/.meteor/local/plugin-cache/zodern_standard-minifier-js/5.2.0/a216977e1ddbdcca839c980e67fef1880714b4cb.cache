{"code":"function module(t,e,n){var i,o,u,r,l,c,a,s,f,d,v,m,b;n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(t){i=t}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedState:function(t){o=t},useMediaQuery:function(t){u=t}},0),n.link(\"@rocket.chat/ui-client\",{TooltipComponent:function(t){r=t}},1),n.link(\"@rocket.chat/ui-contexts\",{TooltipContext:function(t){l=t}},2),n.link(\"react\",{default:function(t){c=t},useEffect:function(t){a=t},useMemo:function(t){s=t},useRef:function(t){f=t},memo:function(t){d=t},useCallback:function(t){v=t},useState:function(t){m=t}},3),n.link(\"../portals/TooltipPortal\",{default:function(t){b=t}},4),n.exportDefault(d(function(t){var e=t.children,n=f(),d=!u(\"(hover: none)\"),p=o(null,300),k=i(p,2),A=k[0],E=k[1],g=v(function(t){setTimeout(function(){if(t&&!t.getAttribute(\"title\")){var e;t.setAttribute(\"title\",null!==(e=t.getAttribute(\"data-title\"))&&void 0!==e?e:\"\"),t.removeAttribute(\"data-title\")}},0)},[]),h=s(function(){return{open:function(t,e){var i=n.current;E(c.createElement(r,{key:new Date().toISOString(),title:t,anchor:e})),n.current=e,i&&g(i)},close:function(){var t=n.current;E(null),E.flush(),n.current=void 0,t&&g(t)},dismiss:function(){E(null),E.flush()}}},[E,g]);return a(function(){if(d){var t=function(t){var e,o,u=t.target;if(n.current!==u){var r=u.closest(\"[title], [data-tooltip]\");if(n.current!==r){if(!r){h.close();return}var l=null!==(e=null!==(o=r.getAttribute(\"title\"))&&void 0!==o?o:r.getAttribute(\"data-tooltip\"))&&void 0!==e?e:\"\";if(!l){h.close();return}h.open(c.createElement(function(){var t=m(l),e=i(t,2),n=e[0],o=e[1];return a(function(){var t=function(){return h.close()};r.setAttribute(\"data-title\",l),r.setAttribute(\"title\",\"\"),r.addEventListener(\"mouseleave\",t);var e=new MutationObserver(function(){var t,e,n=null!==(t=null!==(e=r.getAttribute(\"title\"))&&void 0!==e?e:r.getAttribute(\"data-tooltip\"))&&void 0!==t?t:\"\";\"\"!==n&&(r.setAttribute(\"data-title\",n),r.setAttribute(\"title\",\"\"),o(n))});return e.observe(r,{attributes:!0,attributeFilter:[\"title\",\"data-tooltip\"]}),function(){r.removeEventListener(\"mouseleave\",t),e.disconnect()}},[]),c.createElement(c.Fragment,null,n)},null),r)}}},e=function(){h.dismiss()};return document.body.addEventListener(\"mouseover\",t,{passive:!0}),document.body.addEventListener(\"click\",e,{capture:!0}),function(){h.close(),document.body.removeEventListener(\"mouseover\",t),document.body.removeEventListener(\"click\",e)}}},[h,E,d]),c.createElement(l.Provider,{value:h},e,A&&c.createElement(b,null,A))}))}","map":"{\"version\":3,\"sources\":[\"client/providers/TooltipProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useDebouncedState, useMediaQuery } from '@rocket.chat/fuselage-hooks';\\nimport { TooltipComponent } from '@rocket.chat/ui-client';\\nimport { TooltipContext } from '@rocket.chat/ui-contexts';\\nimport type { ReactNode } from 'react';\\nimport React, { useEffect, useMemo, useRef, memo, useCallback, useState } from 'react';\\n\\nimport TooltipPortal from '../portals/TooltipPortal';\\n\\ntype TooltipProviderProps = {\\n\\tchildren?: ReactNode;\\n};\\n\\nconst TooltipProvider = ({ children }: TooltipProviderProps) => {\\n\\tconst lastAnchor = useRef<HTMLElement>();\\n\\tconst hasHover = !useMediaQuery('(hover: none)');\\n\\n\\tconst [tooltip, setTooltip] = useDebouncedState<ReactNode>(null, 300);\\n\\n\\tconst restoreTitle = useCallback((previousAnchor: HTMLElement | undefined): void => {\\n\\t\\tsetTimeout(() => {\\n\\t\\t\\tif (previousAnchor && !previousAnchor.getAttribute('title')) {\\n\\t\\t\\t\\tpreviousAnchor.setAttribute('title', previousAnchor.getAttribute('data-title') ?? '');\\n\\t\\t\\t\\tpreviousAnchor.removeAttribute('data-title');\\n\\t\\t\\t}\\n\\t\\t}, 0);\\n\\t}, []);\\n\\n\\tconst contextValue = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\topen: (tooltip: ReactNode, anchor: HTMLElement): void => {\\n\\t\\t\\t\\tconst previousAnchor = lastAnchor.current;\\n\\t\\t\\t\\tsetTooltip(<TooltipComponent key={new Date().toISOString()} title={tooltip} anchor={anchor} />);\\n\\t\\t\\t\\tlastAnchor.current = anchor;\\n\\t\\t\\t\\tpreviousAnchor && restoreTitle(previousAnchor);\\n\\t\\t\\t},\\n\\t\\t\\tclose: (): void => {\\n\\t\\t\\t\\tconst previousAnchor = lastAnchor.current;\\n\\t\\t\\t\\tsetTooltip(null);\\n\\t\\t\\t\\tsetTooltip.flush();\\n\\t\\t\\t\\tlastAnchor.current = undefined;\\n\\t\\t\\t\\tpreviousAnchor && restoreTitle(previousAnchor);\\n\\t\\t\\t},\\n\\t\\t\\tdismiss: (): void => {\\n\\t\\t\\t\\tsetTooltip(null);\\n\\t\\t\\t\\tsetTooltip.flush();\\n\\t\\t\\t},\\n\\t\\t}),\\n\\t\\t[setTooltip, restoreTitle],\\n\\t);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!hasHover) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst handleMouseOver = (e: MouseEvent): void => {\\n\\t\\t\\tconst target = e.target as HTMLElement;\\n\\t\\t\\tif (lastAnchor.current === target) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst anchor = target.closest('[title], [data-tooltip]') as HTMLElement;\\n\\n\\t\\t\\tif (lastAnchor.current === anchor) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (!anchor) {\\n\\t\\t\\t\\tcontextValue.close();\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst title = anchor.getAttribute('title') ?? anchor.getAttribute('data-tooltip') ?? '';\\n\\t\\t\\tif (!title) {\\n\\t\\t\\t\\tcontextValue.close();\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\t// eslint-disable-next-line react/no-multi-comp\\n\\t\\t\\tconst Handler = () => {\\n\\t\\t\\t\\tconst [state, setState] = useState(title);\\n\\t\\t\\t\\tuseEffect(() => {\\n\\t\\t\\t\\t\\tconst close = (): void => contextValue.close();\\n\\t\\t\\t\\t\\t// store the title in a data attribute\\n\\t\\t\\t\\t\\tanchor.setAttribute('data-title', title);\\n\\t\\t\\t\\t\\t// Removes the title attribute to prevent the browser's tooltip from showing\\n\\t\\t\\t\\t\\tanchor.setAttribute('title', '');\\n\\n\\t\\t\\t\\t\\tanchor.addEventListener('mouseleave', close);\\n\\n\\t\\t\\t\\t\\tconst observer = new MutationObserver(() => {\\n\\t\\t\\t\\t\\t\\tconst title = anchor.getAttribute('title') ?? anchor.getAttribute('data-tooltip') ?? '';\\n\\n\\t\\t\\t\\t\\t\\tif (title === '') {\\n\\t\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t// store the title in a data attribute\\n\\t\\t\\t\\t\\t\\tanchor.setAttribute('data-title', title);\\n\\t\\t\\t\\t\\t\\t// Removes the title attribute to prevent the browser's tooltip from showing\\n\\t\\t\\t\\t\\t\\tanchor.setAttribute('title', '');\\n\\n\\t\\t\\t\\t\\t\\tsetState(title);\\n\\t\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\t\\tobserver.observe(anchor, {\\n\\t\\t\\t\\t\\t\\tattributes: true,\\n\\t\\t\\t\\t\\t\\tattributeFilter: ['title', 'data-tooltip'],\\n\\t\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\t\\treturn () => {\\n\\t\\t\\t\\t\\t\\tanchor.removeEventListener('mouseleave', close);\\n\\t\\t\\t\\t\\t\\tobserver.disconnect();\\n\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t}, []);\\n\\t\\t\\t\\treturn <>{state}</>;\\n\\t\\t\\t};\\n\\t\\t\\tcontextValue.open(<Handler />, anchor);\\n\\t\\t};\\n\\n\\t\\tconst dismissOnClick = (): void => {\\n\\t\\t\\tcontextValue.dismiss();\\n\\t\\t};\\n\\n\\t\\tdocument.body.addEventListener('mouseover', handleMouseOver, {\\n\\t\\t\\tpassive: true,\\n\\t\\t});\\n\\t\\tdocument.body.addEventListener('click', dismissOnClick, { capture: true });\\n\\n\\t\\treturn (): void => {\\n\\t\\t\\tcontextValue.close();\\n\\t\\t\\tdocument.body.removeEventListener('mouseover', handleMouseOver);\\n\\t\\t\\tdocument.body.removeEventListener('click', dismissOnClick);\\n\\t\\t};\\n\\t}, [contextValue, setTooltip, hasHover]);\\n\\n\\treturn (\\n\\t\\t<TooltipContext.Provider value={contextValue}>\\n\\t\\t\\t{children}\\n\\t\\t\\t{tooltip && <TooltipPortal>{tooltip}</TooltipPortal>}\\n\\t\\t</TooltipContext.Provider>\\n\\t);\\n};\\n\\nexport default memo<typeof TooltipProvider>(TooltipProvider);\\n\",null],\"names\":[\"_slicedToArray\",\"useDebouncedState\",\"useMediaQuery\",\"TooltipComponent\",\"TooltipContext\",\"React\",\"useEffect\",\"useMemo\",\"useRef\",\"memo\",\"useCallback\",\"useState\",\"TooltipPortal\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"children\",\"lastAnchor\",\"hasHover\",\"_useDebouncedState\",\"_useDebouncedState2\",\"tooltip\",\"setTooltip\",\"restoreTitle\",\"previousAnchor\",\"setTimeout\",\"getAttribute\",\"_previousAnchor$getAt\",\"setAttribute\",\"removeAttribute\",\"contextValue\",\"open\",\"anchor\",\"current\",\"createElement\",\"key\",\"Date\",\"toISOString\",\"title\",\"close\",\"flush\",\"undefined\",\"dismiss\",\"handleMouseOver\",\"e\",\"_ref2\",\"_anchor$getAttribute\",\"target\",\"closest\",\"_useState\",\"_useState2\",\"state\",\"setState\",\"addEventListener\",\"observer\",\"MutationObserver\",\"_ref3\",\"_anchor$getAttribute2\",\"observe\",\"attributes\",\"attributeFilter\",\"removeEventListener\",\"disconnect\",\"Fragment\",\"dismissOnClick\",\"document\",\"body\",\"passive\",\"capture\",\"Provider\",\"value\"],\"mappings\":\"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\"}"}