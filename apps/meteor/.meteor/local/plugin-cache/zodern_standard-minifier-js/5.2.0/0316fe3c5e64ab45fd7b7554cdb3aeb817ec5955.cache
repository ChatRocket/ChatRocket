{"code":"function module(e,n,o){o.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){t=e}},0),o.export({WrapCannedResponseList:function(){return T}}),o.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue:function(e){i=e},useLocalStorage:function(e){s=e},useMutableCallback:function(e){u=e}},0),o.link(\"@rocket.chat/ui-contexts\",{useSetModal:function(e){a=e},useRouter:function(e){l=e}},1),o.link(\"react\",{default:function(e){c=e},memo:function(e){r=e},useCallback:function(e){f=e},useMemo:function(e){d=e},useState:function(e){m=e}},2),o.link(\"../../../../hooks/lists/useRecordList\",{useRecordList:function(e){k=e}},3),o.link(\"../../../../hooks/omnichannel/useIsRoomOverMacLimit\",{useIsRoomOverMacLimit:function(e){p=e}},4),o.link(\"../../../../lib/asyncState\",{AsyncStatePhase:function(e){C=e}},5),o.link(\"../../../../views/room/contexts/ChatContext\",{useChat:function(e){R=e}},6),o.link(\"../../../../views/room/contexts/RoomContext\",{useRoom:function(e){v=e}},7),o.link(\"../../../../views/room/contexts/RoomToolboxContext\",{useRoomToolbox:function(e){x=e}},8),o.link(\"../../../hooks/useCannedResponseFilterOptions\",{useCannedResponseFilterOptions:function(e){h=e}},9),o.link(\"../../../hooks/useCannedResponseList\",{useCannedResponseList:function(e){L=e}},10),o.link(\"../../modals/CreateCannedResponse\",{default:function(e){b=e}},11),o.link(\"./CannedResponseList\",{default:function(e){M=e}},12);var t,i,s,u,a,l,c,r,f,d,m,k,p,C,R,v,x,h,L,b,M,T=function(){var e,n=v(),o=x().closeTab,r=l(),T=a(),g=h(),y=m(\"\"),I=t(y,2),O=I[0],S=I[1],D=s(\"canned-response-list-type\",\"all\"),w=t(D,2),A=w[0],E=w[1],F=p(n),N=f(function(e){S(e.currentTarget.value)},[]),P=i(O,400),_=L(d(function(){return{filter:P,type:A}},[P,A])),G=_.cannedList,U=_.loadMoreItems,V=_.reload,W=k(G),j=W.phase,q=W.items,z=W.itemCount,B=u(function(e){var o,t=e._id;r.navigate({name:null!==(o=r.getRouteName())&&void 0!==o?o:\"live\",params:{id:n._id,tab:\"canned-responses\",context:t}})}),H=null===(e=R())||void 0===e?void 0:e.composer;return c.createElement(M,{loadMoreItems:U,cannedItems:q,itemCount:z,onClose:o,loading:j===C.LOADING,options:g,text:O,setText:N,type:A,setType:E,isRoomOverMacLimit:F,onClickUse:function(e,n){e.preventDefault(),e.stopPropagation(),null==H||H.setText(n),null==H||H.focus()},onClickItem:B,onClickCreate:function(){T(c.createElement(b,{onClose:function(){return T(null)},reloadCannedList:V}))},reload:V})};o.exportDefault(r(T))}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/cannedResponses/contextualBar/CannedResponse/WrapCannedResponseList.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useDebouncedValue, useLocalStorage, useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useSetModal, useRouter } from '@rocket.chat/ui-contexts';\\nimport type { MouseEvent } from 'react';\\nimport React, { memo, useCallback, useMemo, useState } from 'react';\\n\\nimport { useRecordList } from '../../../../hooks/lists/useRecordList';\\nimport { useIsRoomOverMacLimit } from '../../../../hooks/omnichannel/useIsRoomOverMacLimit';\\nimport { AsyncStatePhase } from '../../../../lib/asyncState';\\nimport { useChat } from '../../../../views/room/contexts/ChatContext';\\nimport { useRoom } from '../../../../views/room/contexts/RoomContext';\\nimport { useRoomToolbox } from '../../../../views/room/contexts/RoomToolboxContext';\\nimport { useCannedResponseFilterOptions } from '../../../hooks/useCannedResponseFilterOptions';\\nimport { useCannedResponseList } from '../../../hooks/useCannedResponseList';\\nimport CreateCannedResponse from '../../modals/CreateCannedResponse';\\nimport CannedResponseList from './CannedResponseList';\\n\\nexport const WrapCannedResponseList = () => {\\n\\tconst room = useRoom();\\n\\tconst { closeTab } = useRoomToolbox();\\n\\tconst router = useRouter();\\n\\tconst setModal = useSetModal();\\n\\n\\tconst options = useCannedResponseFilterOptions() as [string, string][];\\n\\n\\tconst [text, setText] = useState('');\\n\\tconst [type, setType] = useLocalStorage('canned-response-list-type', 'all');\\n\\n\\tconst isRoomOverMacLimit = useIsRoomOverMacLimit(room);\\n\\n\\tconst handleTextChange = useCallback((event) => {\\n\\t\\tsetText(event.currentTarget.value);\\n\\t}, []);\\n\\n\\tconst debouncedText = useDebouncedValue(text, 400);\\n\\n\\tconst { cannedList, loadMoreItems, reload } = useCannedResponseList(\\n\\t\\tuseMemo(() => ({ filter: debouncedText, type }), [debouncedText, type]),\\n\\t);\\n\\tconst { phase, items, itemCount } = useRecordList(cannedList);\\n\\n\\tconst onClickItem = useMutableCallback((data) => {\\n\\t\\tconst { _id: context } = data;\\n\\n\\t\\trouter.navigate({\\n\\t\\t\\tname: router.getRouteName() ?? 'live',\\n\\t\\t\\tparams: {\\n\\t\\t\\t\\tid: room._id,\\n\\t\\t\\t\\ttab: 'canned-responses',\\n\\t\\t\\t\\tcontext,\\n\\t\\t\\t},\\n\\t\\t});\\n\\t});\\n\\n\\tconst composer = useChat()?.composer;\\n\\n\\tconst onClickUse = (e: MouseEvent<HTMLOrSVGElement>, text: string): void => {\\n\\t\\te.preventDefault();\\n\\t\\te.stopPropagation();\\n\\n\\t\\tcomposer?.setText(text);\\n\\t\\tcomposer?.focus();\\n\\t};\\n\\n\\tconst onClickCreate = (): void => {\\n\\t\\tsetModal(<CreateCannedResponse onClose={() => setModal(null)} reloadCannedList={reload} />);\\n\\t};\\n\\n\\treturn (\\n\\t\\t<CannedResponseList\\n\\t\\t\\tloadMoreItems={loadMoreItems}\\n\\t\\t\\tcannedItems={items}\\n\\t\\t\\titemCount={itemCount}\\n\\t\\t\\tonClose={closeTab}\\n\\t\\t\\tloading={phase === AsyncStatePhase.LOADING}\\n\\t\\t\\toptions={options}\\n\\t\\t\\ttext={text}\\n\\t\\t\\tsetText={handleTextChange}\\n\\t\\t\\ttype={type}\\n\\t\\t\\tsetType={setType}\\n\\t\\t\\tisRoomOverMacLimit={isRoomOverMacLimit}\\n\\t\\t\\tonClickUse={onClickUse}\\n\\t\\t\\tonClickItem={onClickItem}\\n\\t\\t\\tonClickCreate={onClickCreate}\\n\\t\\t\\treload={reload}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(WrapCannedResponseList);\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_slicedToArray\",\"export\",\"WrapCannedResponseList\",\"useDebouncedValue\",\"useLocalStorage\",\"useMutableCallback\",\"useSetModal\",\"useRouter\",\"React\",\"memo\",\"useCallback\",\"useMemo\",\"useState\",\"useRecordList\",\"useIsRoomOverMacLimit\",\"AsyncStatePhase\",\"useChat\",\"useRoom\",\"useRoomToolbox\",\"useCannedResponseFilterOptions\",\"useCannedResponseList\",\"CreateCannedResponse\",\"CannedResponseList\",\"_useChat\",\"room\",\"closeTab\",\"_useRoomToolbox\",\"router\",\"setModal\",\"options\",\"_useState\",\"_useState2\",\"text\",\"setText\",\"_useLocalStorage\",\"_useLocalStorage2\",\"type\",\"setType\",\"isRoomOverMacLimit\",\"handleTextChange\",\"event\",\"currentTarget\",\"value\",\"debouncedText\",\"_useCannedResponseLis\",\"filter\",\"cannedList\",\"loadMoreItems\",\"reload\",\"_useRecordList\",\"phase\",\"items\",\"itemCount\",\"onClickItem\",\"data\",\"_router$getRouteName\",\"context\",\"_id\",\"navigate\",\"name\",\"getRouteName\",\"params\",\"id\",\"tab\",\"composer\",\"createElement\",\"cannedItems\",\"onClose\",\"loading\",\"LOADING\",\"onClickUse\",\"e\",\"preventDefault\",\"stopPropagation\",\"focus\",\"onClickCreate\",\"reloadCannedList\",\"exportDefault\"],\"mappings\":\"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\"}"}