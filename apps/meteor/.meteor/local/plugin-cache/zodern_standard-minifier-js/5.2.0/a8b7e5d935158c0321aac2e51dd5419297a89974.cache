{"code":"function module(e,s,t){let a,n,i,o,c;t.export({useChangeAdminStatusAction:()=>r}),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){a=e},useMethod(e){n=e},useTranslation(e){i=e},usePermission(e){o=e}},0),t.link(\"react\",{useCallback(e){c=e}},1);let r=(e,s,t)=>{let r=i(),l=a(),u=n(\"setAdminStatus\"),m=o(\"assign-admin-role\"),_=c(async()=>{try{await u(e,!s);let a=s?\"User_is_no_longer_an_admin\":\"User_is_now_an_admin\";l({type:\"success\",message:r(a)}),t()}catch(e){l({type:\"error\",message:e})}},[e,l,s,t,u,r]);return m?{icon:\"key\",label:s?r(\"Remove_Admin\"):r(\"Make_Admin\"),action:_}:void 0}}","map":"{\"version\":3,\"sources\":[\"client/views/admin/users/hooks/useChangeAdminStatusAction.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { useToastMessageDispatch, useMethod, useTranslation, usePermission } from '@rocket.chat/ui-contexts';\\nimport { useCallback } from 'react';\\n\\nimport type { Action } from '../../../hooks/useActionSpread';\\n\\nexport const useChangeAdminStatusAction = (userId: IUser['_id'], isAdmin: boolean, onChange: () => void): Action | undefined => {\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst setAdminStatus = useMethod('setAdminStatus');\\n\\tconst canAssignAdminRole = usePermission('assign-admin-role');\\n\\n\\tconst changeAdminStatus = useCallback(async () => {\\n\\t\\ttry {\\n\\t\\t\\tawait setAdminStatus(userId, !isAdmin);\\n\\t\\t\\tconst message = isAdmin ? 'User_is_no_longer_an_admin' : 'User_is_now_an_admin';\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t(message) });\\n\\t\\t\\tonChange();\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t}, [userId, dispatchToastMessage, isAdmin, onChange, setAdminStatus, t]);\\n\\n\\treturn canAssignAdminRole\\n\\t\\t? {\\n\\t\\t\\t\\ticon: 'key',\\n\\t\\t\\t\\tlabel: isAdmin ? t('Remove_Admin') : t('Make_Admin'),\\n\\t\\t\\t\\taction: changeAdminStatus,\\n\\t\\t  }\\n\\t\\t: undefined;\\n};\\n\",null],\"names\":[\"useToastMessageDispatch\",\"useMethod\",\"useTranslation\",\"usePermission\",\"useCallback\",\"module\",\"export\",\"useChangeAdminStatusAction\",\"link\",\"v\",\"userId\",\"isAdmin\",\"onChange\",\"t\",\"dispatchToastMessage\",\"setAdminStatus\",\"canAssignAdminRole\",\"changeAdminStatus\",\"message\",\"type\",\"error\",\"icon\",\"label\",\"action\",\"undefined\"],\"mappings\":\"2BAC4EA,EAAMC,EAA2BC,EAAAC,EAAAC,EAA7GC,EAAOC,MAAE,CAAA,CAAAC,2BAAyBA,IAAWA,CAAgB,GAAgDF,EAAAG,IAAA,CAAA,2BAAA,CAAAR,wBAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,UAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,eAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,cAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAJ,YAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAKtG,IAAMF,EAA6BA,CAACG,EAAsBC,EAAkBC,KAClF,IAAMC,EAAIX,IACJY,EAAuBd,IACvBe,EAAiBd,EAAU,kBAC3Be,EAAqBb,EAAc,qBAEnCc,EAAoBb,EAAY,UACrC,GAAI,CACH,MAAMW,EAAeL,EAAQ,CAACC,GAC9B,IAAMO,EAAUP,EAAU,6BAA+B,uBACzDG,EAAqB,CAAEK,KAAM,UAAWD,QAASL,EAAEK,EAAQ,GAC3DN,GACD,CAAE,MAAOQ,EAAO,CACfN,EAAqB,CAAEK,KAAM,QAASD,QAASE,CAAK,EACrD,CACD,EAAG,CAACV,EAAQI,EAAsBH,EAASC,EAAUG,EAAgBF,EAAE,EAEvE,OAAOG,EACJ,CACAK,KAAM,MACNC,MAAOX,EAAUE,EAAE,gBAAkBA,EAAE,cACvCU,OAAQN,GAERO,KAAAA,CACJ\"}"}