{"code":"function module(e,t,n){var r,i,a,l,u,c,o,f=[\"url\",\"confirm\",\"cancel\",\"wrapperHeight\"];n.link(\"@babel/runtime/helpers/extends\",{default:function(e){r=e}},0),n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){i=e}},1),n.link(\"@rocket.chat/fuselage\",{Box:function(e){a=e},Modal:function(e){l=e}},0),n.link(\"react\",{default:function(e){u=e},useEffect:function(e){c=e}},1),n.link(\"react-i18next\",{useTranslation:function(e){o=e}},2),n.exportDefault(function(e){var t=e.url,n=e.confirm,s=e.cancel,d=e.wrapperHeight,h=i(e,f),p=o().t;return c(function(){var e=function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}t.result?n(t):s()};return window.addEventListener(\"message\",e),function(){window.removeEventListener(\"message\",e)}},[n,s]),u.createElement(l,r({height:void 0===d?\"x360\":d},h),u.createElement(a,{padding:\"x12\",w:\"full\",h:\"full\",flexGrow:1,bg:\"white\",borderRadius:\"x8\"},u.createElement(\"iframe\",{title:p(\"Marketplace_apps\"),style:{border:\"none\",height:\"100%\",width:\"100%\"},src:t})))})}","map":"{\"version\":3,\"sources\":[\"client/views/marketplace/IframeModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Modal } from '@rocket.chat/fuselage';\\nimport type { ComponentProps } from 'react';\\nimport React, { useEffect } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nconst iframeMsgListener = (confirm: (data: any) => void, cancel: () => void) => (e: MessageEvent<any>) => {\\n\\tlet data;\\n\\ttry {\\n\\t\\tdata = JSON.parse(e.data);\\n\\t} catch (e) {\\n\\t\\treturn;\\n\\t}\\n\\n\\tdata.result ? confirm(data) : cancel();\\n};\\n\\ntype IframeModalProps = {\\n\\turl: string;\\n\\tconfirm: (data: any) => void;\\n\\tcancel: () => void;\\n\\twrapperHeight?: string;\\n} & ComponentProps<typeof Modal>;\\n\\nconst IframeModal = ({ url, confirm, cancel, wrapperHeight = 'x360', ...props }: IframeModalProps) => {\\n\\tconst { t } = useTranslation();\\n\\n\\tuseEffect(() => {\\n\\t\\tconst listener = iframeMsgListener(confirm, cancel);\\n\\n\\t\\twindow.addEventListener('message', listener);\\n\\n\\t\\treturn () => {\\n\\t\\t\\twindow.removeEventListener('message', listener);\\n\\t\\t};\\n\\t}, [confirm, cancel]);\\n\\n\\treturn (\\n\\t\\t<Modal height={wrapperHeight} {...props}>\\n\\t\\t\\t<Box padding='x12' w='full' h='full' flexGrow={1} bg='white' borderRadius='x8'>\\n\\t\\t\\t\\t<iframe title={t('Marketplace_apps')} style={{ border: 'none', height: '100%', width: '100%' }} src={url} />\\n\\t\\t\\t</Box>\\n\\t\\t</Modal>\\n\\t);\\n};\\n\\nexport default IframeModal;\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"Box\",\"Modal\",\"React\",\"useEffect\",\"useTranslation\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"url\",\"confirm\",\"cancel\",\"_ref$wrapperHeight\",\"wrapperHeight\",\"props\",\"_excluded\",\"t\",\"_useTranslation\",\"listener\",\"e\",\"data\",\"JSON\",\"parse\",\"result\",\"window\",\"addEventListener\",\"removeEventListener\",\"createElement\",\"height\",\"padding\",\"w\",\"h\",\"flexGrow\",\"bg\",\"borderRadius\",\"title\",\"style\",\"border\",\"width\",\"src\"],\"mappings\":\"2BAAAA,EAAmDC,EAAnDC,EAAOC,EAA4CC,EAAAC,EAAAC,+CAAvCC,EAAOC,IAAE,CAAA,iCAA8B,CAAAC,QAAA,SAAAC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iDAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAArCH,EAAOC,IAAA,CAAA,wBAA6B,CAACN,IAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,MAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAN,EAAAM,CAAA,EAAAL,UAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAF,eAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAnDH,EAAOI,aAAY,CAuBC,SAAAC,CAAA,EAAiF,IAA9EC,EAAGD,EAAHC,GAAG,CAAEC,EAAOF,EAAPE,OAAO,CAAEC,EAAMH,EAANG,MAAM,CAAAC,EAAAJ,EAAEK,aAAa,CAAcC,EAAKjB,EAAAW,EAAAO,GACpEC,EAACC,AAAKf,IAANc,CAAC,CAYT,OAVAf,EAAU,WACT,IAAMiB,EAtBwE,SAACC,CAAoB,EACpG,IAAIC,EACJ,GAAI,CACHA,EAAOC,KAAKC,KAAK,CAACH,EAAEC,IAAI,CACzB,CAAE,MAAOD,EAAG,CACX,MACD,CAEAC,EAAKG,MAAM,CAAGb,AAcsBA,EAddU,GAAQT,AAceA,GAb9C,EAiBE,OAFAa,OAAOC,gBAAgB,CAAC,UAAWP,GAE5B,WACNM,OAAOE,mBAAmB,CAAC,UAAWR,EACvC,CACD,EAAG,CAACR,EAASC,EAAO,EAGnBX,EAAA2B,aAAA,CAAC5B,EAAKH,EAAA,CAACgC,OAdiDhB,AAAA,KAAA,IAAAA,EAAG,OAAMA,CAcpC,EAAKE,GACjCd,EAAA2B,aAAA,CAAC7B,EAAG,CAAC+B,QAAQ,MAAMC,EAAE,OAAOC,EAAE,OAAOC,SAAU,EAAGC,GAAG,QAAQC,aAAa,IAAI,EAC7ElC,EAAA2B,aAAA,CAAA,SAAA,CAAQQ,MAAOnB,EAAE,oBAAqBoB,MAAO,CAAEC,OAAQ,OAAQT,OAAQ,OAAQU,MAAO,MAAM,EAAIC,IAAK9B,CAAI,IAI7G\"}"}