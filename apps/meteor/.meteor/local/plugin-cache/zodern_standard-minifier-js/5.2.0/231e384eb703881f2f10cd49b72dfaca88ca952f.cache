{"code":"function module(e,n,t){var o,i,a,l,u,s,c,r,f,m,d,k,C,h,x,b,T,p,I,L;t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){o=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useLocalStorage:function(e){i=e},useDebouncedValue:function(e){a=e},useEffectEvent:function(e){l=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useSetModal:function(e){u=e},usePermission:function(e){s=e},useAtLeastOnePermission:function(e){c=e}},1),t.link(\"react\",{default:function(e){r=e},useCallback:function(e){f=e},useMemo:function(e){m=e},useState:function(e){d=e}},2),t.link(\"../../../../hooks/lists/useRecordList\",{useRecordList:function(e){k=e}},3),t.link(\"../../../../lib/asyncState\",{AsyncStatePhase:function(e){C=e}},4),t.link(\"../../../../lib/rooms/roomCoordinator\",{roomCoordinator:function(e){h=e}},5),t.link(\"../../../../sidebar/header/CreateChannel\",{default:function(e){x=e}},6),t.link(\"../../../room/contexts/RoomContext\",{useRoom:function(e){b=e}},7),t.link(\"../../../room/contexts/RoomToolboxContext\",{useRoomToolbox:function(e){T=e}},8),t.link(\"./AddExistingModal\",{default:function(e){p=e}},9),t.link(\"./TeamsChannels\",{default:function(e){I=e}},10),t.link(\"./hooks/useTeamsChannelList\",{useTeamsChannelList:function(e){L=e}},11),t.exportDefault(function(){var e=b(),n=u(),t=T().closeTab,R=s(\"move-room-to-team\",e._id),E=c([\"create-team-channel\",\"create-team-group\"],e._id),g=e.teamId;if(!g)throw Error(\"Invalid teamId\");var v=i(\"channels-list-type\",\"all\"),y=o(v,2),A=y[0],M=y[1],S=d(\"\"),w=o(S,2),D=w[0],P=w[1],N=a(D,800),O=L(m(function(){return{teamId:g,text:N,type:A}},[g,N,A])),V=O.teamsChannelList,_=O.loadMoreItems,G=O.reload,j=k(V),q=j.phase,z=j.items,B=j.itemCount,F=f(function(e){P(e.currentTarget.value)},[]),H=l(function(){n(r.createElement(p,{teamId:g,onClose:function(){return n(null)},reload:G}))}),J=l(function(){n(r.createElement(x,{teamId:g,mainRoom:e,onClose:function(){return n(null)},reload:G}))}),K=l(function(e){h.openRouteLink(e.t,e)});return r.createElement(I,{loading:q===C.LOADING,mainRoom:e,type:A,text:D,setType:M,setText:F,channels:z,total:B,onClickClose:t,onClickAddExisting:R&&H,onClickCreateNew:E&&J,onClickView:K,loadMoreItems:_,reload:G})})}","map":"{\"version\":3,\"sources\":[\"client/views/teams/contextualBar/channels/TeamsChannelsWithData.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { useLocalStorage, useDebouncedValue, useEffectEvent } from '@rocket.chat/fuselage-hooks';\\nimport { useSetModal, usePermission, useAtLeastOnePermission } from '@rocket.chat/ui-contexts';\\nimport React, { useCallback, useMemo, useState } from 'react';\\n\\nimport { useRecordList } from '../../../../hooks/lists/useRecordList';\\nimport { AsyncStatePhase } from '../../../../lib/asyncState';\\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\\nimport CreateChannelWithData from '../../../../sidebar/header/CreateChannel';\\nimport { useRoom } from '../../../room/contexts/RoomContext';\\nimport { useRoomToolbox } from '../../../room/contexts/RoomToolboxContext';\\nimport AddExistingModal from './AddExistingModal';\\nimport TeamsChannels from './TeamsChannels';\\nimport { useTeamsChannelList } from './hooks/useTeamsChannelList';\\n\\nconst TeamsChannelsWithData = () => {\\n\\tconst room = useRoom();\\n\\tconst setModal = useSetModal();\\n\\tconst { closeTab } = useRoomToolbox();\\n\\tconst canAddExistingRoomToTeam = usePermission('move-room-to-team', room._id);\\n\\tconst canCreateRoomInTeam = useAtLeastOnePermission(['create-team-channel', 'create-team-group'], room._id);\\n\\n\\tconst { teamId } = room;\\n\\n\\tif (!teamId) {\\n\\t\\tthrow new Error('Invalid teamId');\\n\\t}\\n\\n\\tconst [type, setType] = useLocalStorage<'all' | 'autoJoin'>('channels-list-type', 'all');\\n\\tconst [text, setText] = useState('');\\n\\tconst debouncedText = useDebouncedValue(text, 800);\\n\\n\\tconst { teamsChannelList, loadMoreItems, reload } = useTeamsChannelList(\\n\\t\\tuseMemo(() => ({ teamId, text: debouncedText, type }), [teamId, debouncedText, type]),\\n\\t);\\n\\n\\tconst { phase, items, itemCount: total } = useRecordList(teamsChannelList);\\n\\n\\tconst handleTextChange = useCallback((event) => {\\n\\t\\tsetText(event.currentTarget.value);\\n\\t}, []);\\n\\n\\tconst handleAddExisting = useEffectEvent(() => {\\n\\t\\tsetModal(<AddExistingModal teamId={teamId} onClose={() => setModal(null)} reload={reload} />);\\n\\t});\\n\\n\\tconst handleCreateNew = useEffectEvent(() => {\\n\\t\\tsetModal(<CreateChannelWithData teamId={teamId} mainRoom={room} onClose={() => setModal(null)} reload={reload} />);\\n\\t});\\n\\n\\tconst goToRoom = useEffectEvent((room: IRoom) => {\\n\\t\\troomCoordinator.openRouteLink(room.t, room);\\n\\t});\\n\\n\\treturn (\\n\\t\\t<TeamsChannels\\n\\t\\t\\tloading={phase === AsyncStatePhase.LOADING}\\n\\t\\t\\tmainRoom={room}\\n\\t\\t\\ttype={type}\\n\\t\\t\\ttext={text}\\n\\t\\t\\tsetType={setType}\\n\\t\\t\\tsetText={handleTextChange}\\n\\t\\t\\tchannels={items}\\n\\t\\t\\ttotal={total}\\n\\t\\t\\tonClickClose={closeTab}\\n\\t\\t\\tonClickAddExisting={canAddExistingRoomToTeam && handleAddExisting}\\n\\t\\t\\tonClickCreateNew={canCreateRoomInTeam && handleCreateNew}\\n\\t\\t\\tonClickView={goToRoom}\\n\\t\\t\\tloadMoreItems={loadMoreItems}\\n\\t\\t\\treload={reload}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default TeamsChannelsWithData;\\n\",null],\"names\":[\"_slicedToArray\",\"useLocalStorage\",\"useDebouncedValue\",\"useEffectEvent\",\"useSetModal\",\"usePermission\",\"useAtLeastOnePermission\",\"React\",\"useCallback\",\"useMemo\",\"useState\",\"useRecordList\",\"AsyncStatePhase\",\"roomCoordinator\",\"CreateChannelWithData\",\"useRoom\",\"useRoomToolbox\",\"AddExistingModal\",\"TeamsChannels\",\"useTeamsChannelList\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"room\",\"setModal\",\"closeTab\",\"_useRoomToolbox\",\"canAddExistingRoomToTeam\",\"_id\",\"canCreateRoomInTeam\",\"teamId\",\"Error\",\"_useLocalStorage\",\"_useLocalStorage2\",\"type\",\"setType\",\"_useState\",\"_useState2\",\"text\",\"setText\",\"debouncedText\",\"_useTeamsChannelList\",\"teamsChannelList\",\"loadMoreItems\",\"reload\",\"_useRecordList\",\"phase\",\"items\",\"total\",\"itemCount\",\"handleTextChange\",\"event\",\"currentTarget\",\"value\",\"handleAddExisting\",\"createElement\",\"onClose\",\"handleCreateNew\",\"mainRoom\",\"goToRoom\",\"openRouteLink\",\"t\",\"loading\",\"LOADING\",\"channels\",\"onClickClose\",\"onClickAddExisting\",\"onClickCreateNew\",\"onClickView\"],\"mappings\":\"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\"}"}