{"code":"function module(a,e,t){let n,o,l,s,u,g,r,i,c,m,d,k,T,p,h;t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(a){n=a}},0),t.link(\"@rocket.chat/ui-contexts\",{useLanguage(a){o=a}},1),t.link(\"react\",{default(a){l=a},useMemo(a){s=a},useEffect(a){u=a},useState(a){g=a},memo(a){r=a}},2),t.link(\"react-i18next\",{useTranslation(a){i=a}},3),t.link(\"../../../../hooks/useEndpointAction\",{useEndpointAction(a){c=a}},4),t.link(\"../../../../hooks/useEndpointData\",{useEndpointData(a){m=a}},5),t.link(\"../../../../lib/toast\",{dispatchToastMessage(a){d=a}},6),t.link(\"../../contexts/RoomContext\",{useRoom(a){k=a},useRoomSubscription(a){T=a}},7),t.link(\"../../contexts/RoomToolboxContext\",{useRoomToolbox(a){p=a}},8),t.link(\"./AutoTranslate\",{default(a){h=a}},9),t.exportDefault(r(()=>{var a;let e=k(),t=T(),{closeTab:r}=p(),_=o(),[f,b]=g(null!==(a=null==t?void 0:t.autoTranslateLanguage)&&void 0!==a?a:\"\"),v=c(\"POST\",\"/v1/autotranslate.saveSettings\"),{t:x}=i(),{value:E}=m(\"/v1/autotranslate.getSupportedLanguages\",{params:s(()=>({targetLanguage:_}),[_])}),L=E?Object.fromEntries(E.languages.map(a=>[a.language,a.name])):{},A=n(a=>{b(a),v({roomId:e._id,field:\"autoTranslateLanguage\",value:a}),d({type:\"success\",message:x(\"AutoTranslate_language_set_to\",{language:L[a]})})}),S=n(a=>{v({roomId:e._id,field:\"autoTranslate\",value:a.target.checked}),d({type:\"success\",message:a.target.checked?x(\"AutoTranslate_Enabled_for_room\",{roomName:e.name}):x(\"AutoTranslate_Disabled_for_room\",{roomName:e.name})}),a.target.checked&&f&&d({type:\"success\",message:x(\"AutoTranslate_language_set_to\",{language:L[f]})})});return u(()=>{null!=t&&t.autoTranslate&&(null!=t&&t.autoTranslateLanguage||A(_))},[null==t?void 0:t.autoTranslate,null==t?void 0:t.autoTranslateLanguage,A,_]),l.createElement(h,{language:f,languages:E?E.languages.map(a=>[a.language,a.name]):[],handleSwitch:S,handleChangeLanguage:A,translateEnable:!!(null!=t&&t.autoTranslate),handleClose:r})}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/AutoTranslate/AutoTranslateWithData.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useLanguage } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useMemo, useEffect, useState, memo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useEndpointAction } from '../../../../hooks/useEndpointAction';\\nimport { useEndpointData } from '../../../../hooks/useEndpointData';\\nimport { dispatchToastMessage } from '../../../../lib/toast';\\nimport { useRoom, useRoomSubscription } from '../../contexts/RoomContext';\\nimport { useRoomToolbox } from '../../contexts/RoomToolboxContext';\\nimport AutoTranslate from './AutoTranslate';\\n\\nconst AutoTranslateWithData = (): ReactElement => {\\n\\tconst room = useRoom();\\n\\tconst subscription = useRoomSubscription();\\n\\tconst { closeTab } = useRoomToolbox();\\n\\tconst userLanguage = useLanguage();\\n\\tconst [currentLanguage, setCurrentLanguage] = useState(subscription?.autoTranslateLanguage ?? '');\\n\\tconst saveSettings = useEndpointAction('POST', '/v1/autotranslate.saveSettings');\\n\\tconst { t } = useTranslation();\\n\\n\\tconst { value: translateData } = useEndpointData('/v1/autotranslate.getSupportedLanguages', {\\n\\t\\tparams: useMemo(() => ({ targetLanguage: userLanguage }), [userLanguage]),\\n\\t});\\n\\tconst languagesDict = translateData ? Object.fromEntries(translateData.languages.map((lang) => [lang.language, lang.name])) : {};\\n\\n\\tconst handleChangeLanguage = useMutableCallback((value) => {\\n\\t\\tsetCurrentLanguage(value);\\n\\n\\t\\tsaveSettings({\\n\\t\\t\\troomId: room._id,\\n\\t\\t\\tfield: 'autoTranslateLanguage',\\n\\t\\t\\tvalue,\\n\\t\\t});\\n\\t\\tdispatchToastMessage({\\n\\t\\t\\ttype: 'success',\\n\\t\\t\\tmessage: t('AutoTranslate_language_set_to', { language: languagesDict[value] }),\\n\\t\\t});\\n\\t});\\n\\n\\tconst handleSwitch = useMutableCallback((event) => {\\n\\t\\tsaveSettings({\\n\\t\\t\\troomId: room._id,\\n\\t\\t\\tfield: 'autoTranslate',\\n\\t\\t\\tvalue: event.target.checked,\\n\\t\\t});\\n\\t\\tdispatchToastMessage({\\n\\t\\t\\ttype: 'success',\\n\\t\\t\\tmessage: event.target.checked\\n\\t\\t\\t\\t? t('AutoTranslate_Enabled_for_room', { roomName: room.name })\\n\\t\\t\\t\\t: t('AutoTranslate_Disabled_for_room', { roomName: room.name }),\\n\\t\\t});\\n\\t\\tif (event.target.checked && currentLanguage) {\\n\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\ttype: 'success',\\n\\t\\t\\t\\tmessage: t('AutoTranslate_language_set_to', { language: languagesDict[currentLanguage] }),\\n\\t\\t\\t});\\n\\t\\t}\\n\\t});\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!subscription?.autoTranslate) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (!subscription?.autoTranslateLanguage) {\\n\\t\\t\\thandleChangeLanguage(userLanguage);\\n\\t\\t}\\n\\t}, [subscription?.autoTranslate, subscription?.autoTranslateLanguage, handleChangeLanguage, userLanguage]);\\n\\n\\treturn (\\n\\t\\t<AutoTranslate\\n\\t\\t\\tlanguage={currentLanguage}\\n\\t\\t\\tlanguages={translateData ? translateData.languages.map((language) => [language.language, language.name]) : []}\\n\\t\\t\\thandleSwitch={handleSwitch}\\n\\t\\t\\thandleChangeLanguage={handleChangeLanguage}\\n\\t\\t\\ttranslateEnable={!!subscription?.autoTranslate}\\n\\t\\t\\thandleClose={closeTab}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(AutoTranslateWithData);\\n\",null],\"names\":[\"useMutableCallback\",\"useLanguage\",\"React\",\"useMemo\",\"useEffect\",\"useState\",\"memo\",\"useTranslation\",\"useEndpointAction\",\"useEndpointData\",\"dispatchToastMessage\",\"useRoom\",\"useRoomSubscription\",\"useRoomToolbox\",\"AutoTranslate\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"AutoTranslateWithData\",\"_subscription$autoTra\",\"room\",\"subscription\",\"closeTab\",\"userLanguage\",\"currentLanguage\",\"setCurrentLanguage\",\"autoTranslateLanguage\",\"saveSettings\",\"t\",\"value\",\"translateData\",\"params\",\"targetLanguage\",\"languagesDict\",\"Object\",\"fromEntries\",\"languages\",\"map\",\"lang\",\"language\",\"name\",\"handleChangeLanguage\",\"roomId\",\"_id\",\"field\",\"type\",\"message\",\"handleSwitch\",\"event\",\"target\",\"checked\",\"roomName\",\"autoTranslate\",\"createElement\",\"translateEnable\",\"handleClose\"],\"mappings\":\"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\"}"}