{"code":"function module(e,t,n){var r,i,a,o,u,s,c,l,f=[\"msg\"];n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){r=e}},0),n.export({useLegacyThreadMessageJump:function(){return g}}),n.link(\"@rocket.chat/ui-contexts\",{useRouter:function(e){i=e},useSearchParameter:function(e){a=e}},0),n.link(\"react\",{useRef:function(e){o=e},useEffect:function(e){u=e}},1),n.link(\"../../../../../lib/utils/waitForElement\",{waitForElement:function(e){s=e}},2),n.link(\"../../../MessageList/providers/messageHighlightSubscription\",{clearHighlightMessage:function(e){c=e},setHighlightMessage:function(e){l=e}},3);var g=function(e){var t=e.enabled,n=void 0===t||t,g=i(),m=a(\"msg\"),h=function(){var e=g.getRouteName();if(e){var t=g.getSearchParameters(),n=(t.msg,r(t,f));g.navigate({name:e,params:g.getRouteParameters(),search:n},{replace:!0})}},v=o(null),b=o(h);return b.current=h,u(function(){var e=v.current;if(n&&m&&e){var t=new AbortController;return s(\"[data-id='\"+m+\"']\",{parent:e,signal:t.signal}).then(function(e){var n;t.signal.aborted||(l(m),null===(n=b.current)||void 0===n||n.call(b),setTimeout(function(){c()},1e3),setTimeout(function(){t.signal.aborted||e.scrollIntoView({behavior:\"smooth\",block:\"nearest\"})},300))}),function(){t.abort()}}},[n,m]),{parentRef:v}}}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/Threads/hooks/useLegacyThreadMessageJump.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useRouter, useSearchParameter } from '@rocket.chat/ui-contexts';\\nimport { useRef, useEffect } from 'react';\\n\\nimport { waitForElement } from '../../../../../lib/utils/waitForElement';\\nimport { clearHighlightMessage, setHighlightMessage } from '../../../MessageList/providers/messageHighlightSubscription';\\n\\nexport const useLegacyThreadMessageJump = ({ enabled = true }: { enabled?: boolean }) => {\\n\\tconst router = useRouter();\\n\\tconst mid = useSearchParameter('msg');\\n\\n\\tconst clearQueryStringParameter = () => {\\n\\t\\tconst name = router.getRouteName();\\n\\n\\t\\tif (!name) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst { msg: _, ...search } = router.getSearchParameters();\\n\\n\\t\\trouter.navigate(\\n\\t\\t\\t{\\n\\t\\t\\t\\tname,\\n\\t\\t\\t\\tparams: router.getRouteParameters(),\\n\\t\\t\\t\\tsearch,\\n\\t\\t\\t},\\n\\t\\t\\t{ replace: true },\\n\\t\\t);\\n\\t};\\n\\n\\tconst parentRef = useRef<HTMLElement>(null);\\n\\tconst clearQueryStringParameterRef = useRef(clearQueryStringParameter);\\n\\tclearQueryStringParameterRef.current = clearQueryStringParameter;\\n\\n\\tuseEffect(() => {\\n\\t\\tconst parent = parentRef.current;\\n\\n\\t\\tif (!enabled || !mid || !parent) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst abortController = new AbortController();\\n\\n\\t\\twaitForElement<HTMLElement>(`[data-id='${mid}']`, { parent, signal: abortController.signal }).then((messageElement) => {\\n\\t\\t\\tif (abortController.signal.aborted) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tsetHighlightMessage(mid);\\n\\t\\t\\tclearQueryStringParameterRef.current?.();\\n\\n\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\tclearHighlightMessage();\\n\\t\\t\\t}, 1000);\\n\\n\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\tif (abortController.signal.aborted) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tmessageElement.scrollIntoView({\\n\\t\\t\\t\\t\\tbehavior: 'smooth',\\n\\t\\t\\t\\t\\tblock: 'nearest',\\n\\t\\t\\t\\t});\\n\\t\\t\\t}, 300);\\n\\t\\t});\\n\\n\\t\\treturn () => {\\n\\t\\t\\tabortController.abort();\\n\\t\\t};\\n\\t}, [enabled, mid]);\\n\\n\\treturn { parentRef };\\n};\\n\",null],\"names\":[\"_objectWithoutProperties\",\"useRouter\",\"useSearchParameter\",\"useRef\",\"useEffect\",\"waitForElement\",\"clearHighlightMessage\",\"setHighlightMessage\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useLegacyThreadMessageJump\",\"_ref\",\"_ref$enabled\",\"enabled\",\"router\",\"mid\",\"clearQueryStringParameter\",\"name\",\"getRouteName\",\"_router$getSearchPara\",\"getSearchParameters\",\"search\",\"msg\",\"_excluded\",\"navigate\",\"params\",\"getRouteParameters\",\"replace\",\"parentRef\",\"clearQueryStringParameterRef\",\"current\",\"parent\",\"abortController\",\"AbortController\",\"signal\",\"then\",\"messageElement\",\"_clearQueryStringPara\",\"aborted\",\"call\",\"setTimeout\",\"scrollIntoView\",\"behavior\",\"block\",\"abort\"],\"mappings\":\"2BAAAA,EAAyEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,YAArDC,EAAAC,IAAoB,CAAA,iDAAiC,CAAAC,QAAA,SAAAC,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAzEH,EAAOI,MAAE,CAAA,CAAAC,2BAA+B,WAAM,OAAAA,CAA2B,CAAA,GAAAL,EAAAC,IAAA,CAAA,2BAAA,CAAAR,UAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,mBAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAN,OAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,UAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0CAAA,CAAAJ,eAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8DAAA,CAAAH,sBAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,oBAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAMlE,IAAME,EAA6B,SAAAC,CAAA,EAA8C,IAAAC,EAAAD,EAA3CE,OAAO,CAAPA,EAAOD,AAAA,KAAA,IAAAA,GAAOA,EACpDE,EAAShB,IACTiB,EAAMhB,EAAmB,OAEzBiB,EAA4B,WACjC,IAAMC,EAAOH,EAAOI,YAAY,GAEhC,GAAKD,GAIL,IAAAE,EAA8BL,EAAOM,mBAAmB,GAArCC,GAALF,EAANG,GAAG,CAAczB,EAAAsB,EAAAI,IAEzBT,EAAOU,QAAQ,CACd,CACCP,KAAAA,EACAQ,OAAQX,EAAOY,kBAAkB,GACjCL,OAAAA,GAED,CAAEM,QAAS,CAAA,CAAI,GAEjB,EAEMC,EAAY5B,EAAoB,MAChC6B,EAA+B7B,EAAOgB,GAyC5C,OAxCAa,EAA6BC,OAAO,CAAGd,EAEvCf,EAAU,WACT,IAAM8B,EAASH,EAAUE,OAAO,CAEhC,GAAI,AAACjB,GAAYE,GAAQgB,GAIzB,IAAMC,EAAkB,IAAIC,gBA0B5B,OAxBA/B,EAAc,aAA2Ba,EAAG,KAAM,CAAEgB,OAAAA,EAAQG,OAAQF,EAAgBE,MAAAA,AAAM,GAAIC,IAAI,CAAC,SAACC,CAAc,EAAI,IAAAC,CACjHL,CAAAA,EAAgBE,MAAM,CAACI,OAAO,GAIlClC,EAAoBW,GACpB,AAAoC,OAApCsB,CAAAA,EAAAR,EAA6BC,OAAO,AAAPA,GAAOO,AAAA,KAAA,IAAAA,GAApCA,EAAAE,IAAA,CAAAV,GAEAW,WAAW,WACVrC,GACD,EAAG,KAEHqC,WAAW,WACNR,EAAgBE,MAAM,CAACI,OAAO,EAIlCF,EAAeK,cAAc,CAAC,CAC7BC,SAAU,SACVC,MAAO,WAET,EAAG,KACJ,GAEO,WACNX,EAAgBY,KAAK,EACtB,EACD,EAAG,CAAC/B,EAASE,EAAI,EAEV,CAAEa,UAAAA,CAAS,CACnB\"}"}