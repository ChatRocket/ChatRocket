{"code":"function module(e,t,n){var r,i,a,l,o,u,c,s,m,f,d,p,g;n.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){r=e}},0),n.link(\"@rocket.chat/fuselage\",{TableRow:function(e){i=e},TableCell:function(e){a=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useRouter:function(e){l=e}},1),n.link(\"react\",{default:function(e){o=e},useMemo:function(e){u=e}},2),n.link(\"react-i18next\",{useTranslation:function(e){c=e}},3),n.link(\"../../../../app/importer/lib/ImporterProgressStep\",{ImportWaitingStates:function(e){s=e},ImportFileReadyStates:function(e){m=e},ImportPreparingStartedStates:function(e){f=e},ImportingStartedStates:function(e){d=e},ProgressStep:function(e){p=e}},4),n.link(\"../../../hooks/useFormatDateAndTime\",{useFormatDateAndTime:function(e){g=e}},5),n.exportDefault(function(e){var t=e.type,n=e._updatedAt,E=e.status,k=e.file,v=void 0===k?\"\":k,S=e.user,b=e.small,I=e.count,_=(I=void 0===I?{}:I).users,h=void 0===_?0:_,T=I.channels,x=void 0===T?0:T,A=I.messages,C=void 0===A?0:A,F=I.total,R=void 0===F?0:F,y=e.valid,D=c().t,P=g(),O=u(function(){if(!v)return\"\";var e=\"_\"+S+\"_\",t=v.indexOf(e);return t>=0?v.slice(t+e.length):v},[v,S]),w=u(function(){return y&&[p.USER_SELECTION].concat(r(s),r(m),r(f)).includes(E)},[y,E]),L=u(function(){return y&&d.includes(E)},[y,E]),M=l();return o.createElement(i,w||L?{tabIndex:0,role:\"link\",action:!0,onClick:function(){if(w){M.navigate(\"/admin/import/prepare\");return}L&&M.navigate(\"/admin/import/progress\")}}:{},o.createElement(a,null,t),o.createElement(a,null,P(n)),!b&&o.createElement(o.Fragment,null,o.createElement(a,null,E&&D(E.replace(\"importer_\",\"importer_status_\"))),o.createElement(a,null,O),o.createElement(a,{align:\"center\"},h),o.createElement(a,{align:\"center\"},x),o.createElement(a,{align:\"center\"},C),o.createElement(a,{align:\"center\"},R)))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/import/ImportOperationSummary.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { Serialized } from '@rocket.chat/core-typings';\\nimport { TableRow, TableCell } from '@rocket.chat/fuselage';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useRouter } from '@rocket.chat/ui-contexts';\\nimport React, { useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport {\\n\\tImportWaitingStates,\\n\\tImportFileReadyStates,\\n\\tImportPreparingStartedStates,\\n\\tImportingStartedStates,\\n\\tProgressStep,\\n} from '../../../../app/importer/lib/ImporterProgressStep';\\nimport { useFormatDateAndTime } from '../../../hooks/useFormatDateAndTime';\\n\\ntype ImportOperationSummaryProps = {\\n\\ttype: string;\\n\\t_updatedAt: Serialized<Date>;\\n\\tstatus: (typeof ProgressStep)[keyof typeof ProgressStep];\\n\\tfile?: string;\\n\\tuser: string;\\n\\tsmall?: boolean;\\n\\tcount?: {\\n\\t\\tusers?: number;\\n\\t\\tchannels?: number;\\n\\t\\tmessages?: number;\\n\\t\\ttotal?: number;\\n\\t};\\n\\tvalid?: boolean;\\n};\\n\\n// TODO: review inner logic\\nfunction ImportOperationSummary({\\n\\ttype,\\n\\t_updatedAt,\\n\\tstatus,\\n\\tfile = '',\\n\\tuser,\\n\\tsmall,\\n\\tcount: { users = 0, channels = 0, messages = 0, total = 0 } = {},\\n\\tvalid,\\n}: ImportOperationSummaryProps) {\\n\\tconst { t } = useTranslation();\\n\\tconst formatDateAndTime = useFormatDateAndTime();\\n\\n\\tconst fileName = useMemo(() => {\\n\\t\\tif (!file) {\\n\\t\\t\\treturn '';\\n\\t\\t}\\n\\n\\t\\tconst fileName = file;\\n\\n\\t\\tconst userPattern = `_${user}_`;\\n\\t\\tconst idx = fileName.indexOf(userPattern);\\n\\t\\tif (idx >= 0) {\\n\\t\\t\\treturn fileName.slice(idx + userPattern.length);\\n\\t\\t}\\n\\n\\t\\treturn fileName;\\n\\t}, [file, user]);\\n\\n\\tconst canContinue = useMemo(\\n\\t\\t() =>\\n\\t\\t\\tvalid &&\\n\\t\\t\\t[ProgressStep.USER_SELECTION, ...ImportWaitingStates, ...ImportFileReadyStates, ...ImportPreparingStartedStates].includes(status),\\n\\t\\t[valid, status],\\n\\t);\\n\\n\\tconst canCheckProgress = useMemo(() => valid && ImportingStartedStates.includes(status), [valid, status]);\\n\\n\\tconst router = useRouter();\\n\\n\\tconst handleClick = () => {\\n\\t\\tif (canContinue) {\\n\\t\\t\\trouter.navigate('/admin/import/prepare');\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (canCheckProgress) {\\n\\t\\t\\trouter.navigate('/admin/import/progress');\\n\\t\\t}\\n\\t};\\n\\n\\tconst hasAction = canContinue || canCheckProgress;\\n\\n\\tconst props = hasAction\\n\\t\\t? {\\n\\t\\t\\t\\ttabIndex: 0,\\n\\t\\t\\t\\trole: 'link',\\n\\t\\t\\t\\taction: true,\\n\\t\\t\\t\\tonClick: handleClick,\\n\\t\\t  }\\n\\t\\t: {};\\n\\n\\treturn (\\n\\t\\t<TableRow {...props}>\\n\\t\\t\\t<TableCell>{type}</TableCell>\\n\\t\\t\\t<TableCell>{formatDateAndTime(_updatedAt)}</TableCell>\\n\\t\\t\\t{!small && (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<TableCell>{status && t(status.replace('importer_', 'importer_status_') as TranslationKey)}</TableCell>\\n\\t\\t\\t\\t\\t<TableCell>{fileName}</TableCell>\\n\\t\\t\\t\\t\\t<TableCell align='center'>{users}</TableCell>\\n\\t\\t\\t\\t\\t<TableCell align='center'>{channels}</TableCell>\\n\\t\\t\\t\\t\\t<TableCell align='center'>{messages}</TableCell>\\n\\t\\t\\t\\t\\t<TableCell align='center'>{total}</TableCell>\\n\\t\\t\\t\\t</>\\n\\t\\t\\t)}\\n\\t\\t</TableRow>\\n\\t);\\n}\\n\\nexport default ImportOperationSummary;\\n\",null],\"names\":[\"_toConsumableArray\",\"TableRow\",\"TableCell\",\"useRouter\",\"React\",\"useMemo\",\"useTranslation\",\"ImportWaitingStates\",\"ImportFileReadyStates\",\"ImportPreparingStartedStates\",\"ImportingStartedStates\",\"ProgressStep\",\"useFormatDateAndTime\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"type\",\"_updatedAt\",\"status\",\"_ref$file\",\"file\",\"user\",\"small\",\"_ref$count\",\"count\",\"_ref$count$users\",\"users\",\"_ref$count$channels\",\"channels\",\"_ref$count$messages\",\"messages\",\"_ref$count$total\",\"total\",\"valid\",\"t\",\"_useTranslation\",\"formatDateAndTime\",\"fileName\",\"userPattern\",\"idx\",\"indexOf\",\"slice\",\"length\",\"canContinue\",\"USER_SELECTION\",\"concat\",\"includes\",\"canCheckProgress\",\"router\",\"createElement\",\"hasAction\",\"tabIndex\",\"role\",\"action\",\"onClick\",\"navigate\",\"Fragment\",\"replace\",\"align\"],\"mappings\":\"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\"}"}