{"code":"function module(e,n,t){var c,l,r,o,i,u,a,s,f,m,k,d,p,E,g,C,b,h,v,x,M,S,A=[\"onChange\"];t.link(\"@babel/runtime/helpers/extends\",{default:function(e){c=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){l=e}},1),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){r=e}},2),t.link(\"@rocket.chat/fuselage\",{Button:function(e){o=e},PositionAnimated:function(e){i=e},Tile:function(e){u=e}},0),t.link(\"@rocket.chat/ui-composer\",{MessageComposerAction:function(e){a=e},MessageComposerToolbarActions:function(e){s=e},MessageComposer:function(e){f=e},MessageComposerInput:function(e){m=e},MessageComposerToolbar:function(e){k=e},MessageComposerActionsDivider:function(e){d=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useUserPreference:function(e){p=e},useTranslation:function(e){E=e}},2),t.link(\"react\",{default:function(e){g=e},memo:function(e){C=e},useCallback:function(e){b=e},useRef:function(e){h=e},useState:function(e){v=e}},3),t.link(\"../../../../components/Backdrop\",{Backdrop:function(e){x=e}},4),t.link(\"../../../../contexts/EmojiPickerContext\",{useEmojiPicker:function(e){M=e}},5),t.link(\"./InsertPlaceholderDropdown\",{default:function(e){S=e}},6),t.exportDefault(C(function(e){var n=e.onChange,t=r(e,A),C=E(),P=p(\"useEmojis\"),R=h(null),j=h(null),_=v(!1),T=l(_,2),w=T[0],B=T[1],I=M().open,y=function(e){return b(function(){if(null!=R&&R.current){var t=R.current.value,c=R.current.selectionStart,l=R.current.selectionEnd;\"[]()\"===e?c!==l&&(R.current.value=t.slice(0,c)+\"[\"+t.slice(c,l)+\"]()\"+t.slice(l)):R.current.value=\"\"+t.slice(0,c)+e+t.slice(c,l)+e+t.slice(l),R.current.focus(),\"[]()\"===e?c===l?R.current.setSelectionRange(c,l):R.current.setSelectionRange(l+3,l+3):R.current.setSelectionRange(c+1,l+1),null==n||n(R.current.value)}},[e])},D=function(e){if(null!=R&&R.current){var t=R.current.value,c=R.current.selectionStart,l=\":\"+e+\": \";R.current.value=t.slice(0,c)+l+t.slice(c),R.current.focus(),R.current.setSelectionRange(c+l.length,c+l.length),null==n||n(R.current.value)}};return g.createElement(f,null,g.createElement(m,c({ref:R,rows:10,onChange:n},t)),g.createElement(k,null,g.createElement(s,{\"aria-label\":C(\"Message_composer_toolbox_primary_actions\")},g.createElement(a,{icon:\"emoji\",disabled:!P,onClick:function(){if(P){if(!(null!=R&&R.current))throw Error(\"Missing textAreaRef\");I(R.current,function(e){return D(e)})}},title:C(\"Emoji\")}),g.createElement(d,null),g.createElement(a,{icon:\"bold\",onClick:y(\"*\"),title:C(\"Bold\")}),g.createElement(a,{icon:\"italic\",onClick:y(\"_\"),title:C(\"Italic\")}),g.createElement(a,{icon:\"strike\",onClick:y(\"~\"),title:C(\"Strike\")}),g.createElement(a,{icon:\"link\",onClick:y(\"[]()\"),title:C(\"Link\")}),g.createElement(d,null),g.createElement(o,{ref:j,small:!0,onClick:function(){(null==R?void 0:R.current)&&R.current.focus(),B(!w)}},C(\"Insert_Placeholder\")),g.createElement(x,{display:w?\"block\":\"none\",onClick:function(){(null==R?void 0:R.current)&&R.current.focus(),B(!1)}}),g.createElement(i,{visible:w?\"visible\":\"hidden\",anchor:j},g.createElement(u,{elevation:\"1\",w:\"224px\"},g.createElement(S,{onChange:n,textAreaRef:R,setVisible:B}))))))}))}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Button, PositionAnimated, Tile } from '@rocket.chat/fuselage';\\nimport {\\n\\tMessageComposerAction,\\n\\tMessageComposerToolbarActions,\\n\\tMessageComposer,\\n\\tMessageComposerInput,\\n\\tMessageComposerToolbar,\\n\\tMessageComposerActionsDivider,\\n} from '@rocket.chat/ui-composer';\\nimport { useUserPreference, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ComponentProps } from 'react';\\nimport React, { memo, useCallback, useRef, useState } from 'react';\\n\\nimport { Backdrop } from '../../../../components/Backdrop';\\nimport { useEmojiPicker } from '../../../../contexts/EmojiPickerContext';\\nimport InsertPlaceholderDropdown from './InsertPlaceholderDropdown';\\n\\nconst CannedResponsesComposer = ({ onChange, ...props }: ComponentProps<typeof MessageComposerInput>) => {\\n\\tconst t = useTranslation();\\n\\tconst useEmojisPreference = useUserPreference('useEmojis');\\n\\n\\tconst textAreaRef = useRef<HTMLTextAreaElement>(null);\\n\\tconst ref = useRef<HTMLButtonElement>(null);\\n\\n\\tconst [visible, setVisible] = useState(false);\\n\\n\\tconst { open: openEmojiPicker } = useEmojiPicker();\\n\\n\\tconst useMarkdownSyntax = (char: '*' | '_' | '~' | '[]()'): (() => void) =>\\n\\t\\tuseCallback(() => {\\n\\t\\t\\tif (textAreaRef?.current) {\\n\\t\\t\\t\\tconst text = textAreaRef.current.value;\\n\\t\\t\\t\\tconst startPos = textAreaRef.current.selectionStart;\\n\\t\\t\\t\\tconst endPos = textAreaRef.current.selectionEnd;\\n\\n\\t\\t\\t\\tif (char === '[]()') {\\n\\t\\t\\t\\t\\tif (startPos !== endPos) {\\n\\t\\t\\t\\t\\t\\ttextAreaRef.current.value = `${text.slice(0, startPos)}[${text.slice(startPos, endPos)}]()${text.slice(endPos)}`;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\ttextAreaRef.current.value = `${text.slice(0, startPos)}${char}${text.slice(startPos, endPos)}${char}${text.slice(endPos)}`;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\ttextAreaRef.current.focus();\\n\\n\\t\\t\\t\\tif (char === '[]()') {\\n\\t\\t\\t\\t\\tif (startPos === endPos) {\\n\\t\\t\\t\\t\\t\\ttextAreaRef.current.setSelectionRange(startPos, endPos);\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\ttextAreaRef.current.setSelectionRange(endPos + 3, endPos + 3);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\ttextAreaRef.current.setSelectionRange(startPos + 1, endPos + 1);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tonChange?.(textAreaRef.current.value as any);\\n\\t\\t\\t}\\n\\t\\t}, [char]);\\n\\n\\tconst onClickEmoji = (emoji: string): void => {\\n\\t\\tif (textAreaRef?.current) {\\n\\t\\t\\tconst text = textAreaRef.current.value;\\n\\t\\t\\tconst startPos = textAreaRef.current.selectionStart;\\n\\t\\t\\tconst emojiValue = `:${emoji}: `;\\n\\n\\t\\t\\ttextAreaRef.current.value = text.slice(0, startPos) + emojiValue + text.slice(startPos);\\n\\n\\t\\t\\ttextAreaRef.current.focus();\\n\\t\\t\\ttextAreaRef.current.setSelectionRange(startPos + emojiValue.length, startPos + emojiValue.length);\\n\\n\\t\\t\\tonChange?.(textAreaRef.current.value as any);\\n\\t\\t}\\n\\t};\\n\\n\\tconst handleOpenEmojiPicker = (): void => {\\n\\t\\tif (!useEmojisPreference) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (!textAreaRef?.current) {\\n\\t\\t\\tthrow new Error('Missing textAreaRef');\\n\\t\\t}\\n\\n\\t\\topenEmojiPicker(textAreaRef.current, (emoji: string) => onClickEmoji(emoji));\\n\\t};\\n\\n\\tconst openPlaceholderSelect = (): void => {\\n\\t\\ttextAreaRef?.current && textAreaRef.current.focus();\\n\\t\\tsetVisible(!visible);\\n\\t};\\n\\n\\treturn (\\n\\t\\t<MessageComposer>\\n\\t\\t\\t<MessageComposerInput ref={textAreaRef} rows={10} onChange={onChange} {...props} />\\n\\t\\t\\t<MessageComposerToolbar>\\n\\t\\t\\t\\t<MessageComposerToolbarActions aria-label={t('Message_composer_toolbox_primary_actions')}>\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='emoji' disabled={!useEmojisPreference} onClick={handleOpenEmojiPicker} title={t('Emoji')} />\\n\\t\\t\\t\\t\\t<MessageComposerActionsDivider />\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='bold' onClick={useMarkdownSyntax('*')} title={t('Bold')} />\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='italic' onClick={useMarkdownSyntax('_')} title={t('Italic')} />\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='strike' onClick={useMarkdownSyntax('~')} title={t('Strike')} />\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='link' onClick={useMarkdownSyntax('[]()')} title={t('Link')} />\\n\\t\\t\\t\\t\\t<MessageComposerActionsDivider />\\n\\t\\t\\t\\t\\t<Button ref={ref} small onClick={openPlaceholderSelect}>\\n\\t\\t\\t\\t\\t\\t{t('Insert_Placeholder')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t<Backdrop\\n\\t\\t\\t\\t\\t\\tdisplay={visible ? 'block' : 'none'}\\n\\t\\t\\t\\t\\t\\tonClick={(): void => {\\n\\t\\t\\t\\t\\t\\t\\ttextAreaRef?.current && textAreaRef.current.focus();\\n\\t\\t\\t\\t\\t\\t\\tsetVisible(false);\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t<PositionAnimated visible={visible ? 'visible' : 'hidden'} anchor={ref}>\\n\\t\\t\\t\\t\\t\\t<Tile elevation='1' w='224px'>\\n\\t\\t\\t\\t\\t\\t\\t<InsertPlaceholderDropdown onChange={onChange} textAreaRef={textAreaRef} setVisible={setVisible} />\\n\\t\\t\\t\\t\\t\\t</Tile>\\n\\t\\t\\t\\t\\t</PositionAnimated>\\n\\t\\t\\t\\t</MessageComposerToolbarActions>\\n\\t\\t\\t</MessageComposerToolbar>\\n\\t\\t</MessageComposer>\\n\\t);\\n};\\n\\nexport default memo(CannedResponsesComposer);\\n\",null],\"names\":[\"_extends\",\"_slicedToArray\",\"_objectWithoutProperties\",\"Button\",\"PositionAnimated\",\"Tile\",\"MessageComposerAction\",\"MessageComposerToolbarActions\",\"MessageComposer\",\"MessageComposerInput\",\"MessageComposerToolbar\",\"MessageComposerActionsDivider\",\"useUserPreference\",\"useTranslation\",\"React\",\"memo\",\"useCallback\",\"useRef\",\"useState\",\"Backdrop\",\"useEmojiPicker\",\"InsertPlaceholderDropdown\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"onChange\",\"props\",\"_excluded\",\"t\",\"useEmojisPreference\",\"textAreaRef\",\"ref\",\"_useState\",\"_useState2\",\"visible\",\"setVisible\",\"openEmojiPicker\",\"_useEmojiPicker\",\"open\",\"useMarkdownSyntax\",\"char\",\"current\",\"text\",\"value\",\"startPos\",\"selectionStart\",\"endPos\",\"selectionEnd\",\"slice\",\"focus\",\"setSelectionRange\",\"onClickEmoji\",\"emoji\",\"emojiValue\",\"length\",\"createElement\",\"rows\",\"icon\",\"disabled\",\"onClick\",\"Error\",\"title\",\"small\",\"display\",\"anchor\",\"elevation\",\"w\"],\"mappings\":\"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\"}"}