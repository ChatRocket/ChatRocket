{"code":"function module(e,t,n){let l,a,r,o,c,s,i,u,m,k,d,p,E,g,h,T,_,f;let C=[\"onClose\",\"onStatusChange\"];n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){l=e}},0),n.link(\"@rocket.chat/fuselage\",{Box(e){a=e},Button(e){r=e},ButtonGroup(e){o=e},Field(e){c=e},FieldLabel(e){s=e},FieldRow(e){i=e},FieldError(e){u=e},Modal(e){m=e},TextInput(e){k=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useMethod(e){d=e},useSetModal(e){p=e},useToastMessageDispatch(e){E=e},useTranslation(e){g=e}},1),n.link(\"react\",{default(e){h=e},useState(e){T=e}},2),n.link(\"react-i18next\",{Trans(e){_=e}},3),n.link(\"./RegisterWorkspaceModal\",{default(e){f=e}},4),n.exportDefault(e=>{let{onClose:t,onStatusChange:n}=e,W=l(e,C),R=p(),x=g(),y=E(),b=d(\"cloud:connectWorkspace\"),[S,w]=T(\"\"),[F,M]=T(!1),[B,v]=T(!1),z=S.length>0,D=async()=>{M(!0),v(!1);try{let e=await b(S);if(!e)throw Error(x(\"RegisterWorkspace_Connection_Error\"));R(null),y({type:\"success\",message:x(\"Connected\")})}catch(e){y({type:\"error\",message:e}),v(!0)}finally{await (n&&n()),M(!1)}};return h.createElement(m,W,h.createElement(m.Header,null,h.createElement(m.HeaderText,null,h.createElement(m.Title,null,x(\"RegisterWorkspace_Token_Title\"))),h.createElement(m.Close,{onClick:t})),h.createElement(m.Content,null,h.createElement(a,{is:\"p\"},h.createElement(_,{i18nKey:\"RegisterWorkspace_Token_Step_One\"},\"1. Go to:\",\" \",h.createElement(a,{is:\"span\",fontWeight:600},\"cloud.rocket.chat \",\">\",\" Workspaces\"),\" \",\"and click\",\" \",h.createElement(a,{is:\"span\",fontWeight:600},'\"Register self-managed\"'),\".\")),h.createElement(a,{is:\"p\",fontSize:\"p2\"},\"2. \".concat(x(\"RegisterWorkspace_Token_Step_Two\"))),h.createElement(c,{pbs:10},h.createElement(s,null,x(\"Registration_Token\")),h.createElement(i,null,h.createElement(k,{onChange:e=>{w(e.target.value)},value:S})),B&&h.createElement(u,null,x(\"Token_Not_Recognized\")))),h.createElement(m.Footer,null,h.createElement(o,{align:\"end\"},h.createElement(r,{onClick:()=>{R(h.createElement(f,{onClose:()=>R(null)}))}},x(\"Back\")),h.createElement(r,{primary:!0,disabled:!z,loading:F,onClick:D},x(\"Next\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/workspace/VersionCard/modals/RegisterWorkspaceTokenModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Button, ButtonGroup, Field, FieldLabel, FieldRow, FieldError, Modal, TextInput } from '@rocket.chat/fuselage';\\nimport { useMethod, useSetModal, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ChangeEvent } from 'react';\\nimport React, { useState } from 'react';\\nimport { Trans } from 'react-i18next';\\n\\nimport WorkspaceRegistrationModal from './RegisterWorkspaceModal';\\n\\ntype RegisterWorkspaceTokenModalProps = {\\n\\tonClose: () => void;\\n\\tonStatusChange?: () => void;\\n};\\n\\nconst RegisterWorkspaceTokenModal = ({ onClose, onStatusChange, ...props }: RegisterWorkspaceTokenModalProps) => {\\n\\tconst setModal = useSetModal();\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst connectWorkspace = useMethod('cloud:connectWorkspace');\\n\\n\\tconst [token, setToken] = useState('');\\n\\tconst [processing, setProcessing] = useState(false);\\n\\tconst [error, setError] = useState(false);\\n\\n\\tconst handleBackAction = (): void => {\\n\\t\\tconst handleModalClose = (): void => setModal(null);\\n\\t\\tsetModal(<WorkspaceRegistrationModal onClose={handleModalClose} />);\\n\\t};\\n\\n\\tconst handleTokenChange = (event: ChangeEvent<HTMLInputElement>) => {\\n\\t\\tsetToken(event.target.value);\\n\\t};\\n\\n\\tconst isToken = token.length > 0;\\n\\n\\tconst handleConnectButtonClick = async (): Promise<void> => {\\n\\t\\tsetProcessing(true);\\n\\t\\tsetError(false);\\n\\n\\t\\ttry {\\n\\t\\t\\tconst isConnected = await connectWorkspace(token);\\n\\n\\t\\t\\tif (!isConnected) {\\n\\t\\t\\t\\tthrow Error(t('RegisterWorkspace_Connection_Error'));\\n\\t\\t\\t}\\n\\n\\t\\t\\tsetModal(null);\\n\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Connected') });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\tsetError(true);\\n\\t\\t} finally {\\n\\t\\t\\tawait (onStatusChange && onStatusChange());\\n\\t\\t\\tsetProcessing(false);\\n\\t\\t}\\n\\t};\\n\\n\\treturn (\\n\\t\\t<Modal {...props}>\\n\\t\\t\\t<Modal.Header>\\n\\t\\t\\t\\t<Modal.HeaderText>\\n\\t\\t\\t\\t\\t<Modal.Title>{t('RegisterWorkspace_Token_Title')}</Modal.Title>\\n\\t\\t\\t\\t</Modal.HeaderText>\\n\\t\\t\\t\\t<Modal.Close onClick={onClose} />\\n\\t\\t\\t</Modal.Header>\\n\\t\\t\\t<Modal.Content>\\n\\t\\t\\t\\t<Box is='p'>\\n\\t\\t\\t\\t\\t<Trans i18nKey='RegisterWorkspace_Token_Step_One'>\\n\\t\\t\\t\\t\\t\\t1. Go to:{' '}\\n\\t\\t\\t\\t\\t\\t<Box is='span' fontWeight={600}>\\n\\t\\t\\t\\t\\t\\t\\tcloud.rocket.chat {'>'} Workspaces\\n\\t\\t\\t\\t\\t\\t</Box>{' '}\\n\\t\\t\\t\\t\\t\\tand click{' '}\\n\\t\\t\\t\\t\\t\\t<Box is='span' fontWeight={600}>\\n\\t\\t\\t\\t\\t\\t\\t\\\"Register self-managed\\\"\\n\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t.\\n\\t\\t\\t\\t\\t</Trans>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t<Box is='p' fontSize='p2'>{`2. ${t('RegisterWorkspace_Token_Step_Two')}`}</Box>\\n\\t\\t\\t\\t<Field pbs={10}>\\n\\t\\t\\t\\t\\t<FieldLabel>{t('Registration_Token')}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<TextInput onChange={handleTokenChange} value={token} />\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t{error && <FieldError>{t('Token_Not_Recognized')}</FieldError>}\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t</Modal.Content>\\n\\t\\t\\t<Modal.Footer>\\n\\t\\t\\t\\t<ButtonGroup align='end'>\\n\\t\\t\\t\\t\\t<Button onClick={handleBackAction}>{t('Back')}</Button>\\n\\t\\t\\t\\t\\t<Button primary disabled={!isToken} loading={processing} onClick={handleConnectButtonClick}>\\n\\t\\t\\t\\t\\t\\t{t('Next')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</Modal.Footer>\\n\\t\\t</Modal>\\n\\t);\\n};\\n\\nexport default RegisterWorkspaceTokenModal;\\n\",null],\"names\":[\"_objectWithoutProperties\",\"Box\",\"Button\",\"ButtonGroup\",\"Field\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"Modal\",\"TextInput\",\"useMethod\",\"useSetModal\",\"useToastMessageDispatch\",\"useTranslation\",\"React\",\"useState\",\"Trans\",\"WorkspaceRegistrationModal\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"onClose\",\"onStatusChange\",\"props\",\"_excluded\",\"setModal\",\"t\",\"dispatchToastMessage\",\"connectWorkspace\",\"token\",\"setToken\",\"processing\",\"setProcessing\",\"error\",\"setError\",\"isToken\",\"length\",\"handleConnectButtonClick\",\"isConnected\",\"Error\",\"type\",\"message\",\"createElement\",\"Header\",\"HeaderText\",\"Title\",\"Close\",\"onClick\",\"Content\",\"is\",\"i18nKey\",\"fontWeight\",\"fontSize\",\"concat\",\"pbs\",\"onChange\",\"event\",\"target\",\"value\",\"Footer\",\"align\",\"handleBackAction\",\"handleModalClose\",\"primary\",\"disabled\",\"loading\"],\"mappings\":\"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\"}"}