{"code":"function module(e,n,t){t.link(\"@babel/runtime/helpers/extends\",{default:function(e){o=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){r=e}},1),t.link(\"@rocket.chat/fuselage\",{Popover:function(e){u=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useEffectEvent:function(e){i=e}},1),t.link(\"react\",{default:function(e){l=e},Suspense:function(e){a=e},lazy:function(e){c=e},useCallback:function(e){s=e},useMemo:function(e){f=e},useRef:function(e){d=e},useState:function(e){m=e}},2),t.link(\"react-aria\",{useOverlayTrigger:function(e){p=e}},3),t.link(\"react-stately\",{useOverlayTriggerState:function(e){g=e}},4),t.link(\"../contexts/RoomContext\",{useRoom:function(e){k=e}},5),t.link(\"../contexts/RoomToolboxContext\",{useRoomToolbox:function(e){v=e}},6),t.link(\"../contexts/UserCardContext\",{UserCardContext:function(e){b=e}},7);var o,r,u,i,l,a,c,s,f,d,m,p,g,k,v,b,x=c(function(){return t.dynamicImport(\"../UserCard\")});t.exportDefault(function(e){var n=e.children,t=k(),c=m(null),C=r(c,2),h=C[0],y=C[1],R=d(null),E=g({}),P=p({type:\"dialog\"},E,R),T=P.triggerProps,U=P.overlayProps;delete T.onPress;var O=v().openTab,S=i(function(e){var n,o;switch(t.t){case\"l\":O(\"room-info\",e);break;case\"v\":O(\"voip-room-info\",e);break;case\"d\":(null!==(n=null===(o=t.uids)||void 0===o?void 0:o.length)&&void 0!==n?n:0)>2?O(\"user-info-group\",e):O(\"user-info\",e);break;default:O(\"members-list\",e)}}),I=s(function(e,n){R.current=e.target,E.open(),y({username:n,rid:t._id,onOpenUserInfo:function(){return S(n)},onClose:function(){return y(null)}})},[S,t._id,E]),_=f(function(){return{openUserCard:I,closeUserCard:function(){return y(null)},triggerProps:T,triggerRef:R,state:E}},[I,E,T]);return l.createElement(b.Provider,{value:_},n,E.isOpen&&h&&l.createElement(a,{fallback:null},l.createElement(u,{placement:\"top left\",triggerRef:R,state:E},l.createElement(x,o({},h,U)))))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/providers/UserCardProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Popover } from '@rocket.chat/fuselage';\\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\\nimport type { ComponentProps, ReactNode } from 'react';\\nimport React, { Suspense, lazy, useCallback, useMemo, useRef, useState } from 'react';\\nimport { useOverlayTrigger } from 'react-aria';\\nimport { useOverlayTriggerState } from 'react-stately';\\n\\nimport { useRoom } from '../contexts/RoomContext';\\nimport { useRoomToolbox } from '../contexts/RoomToolboxContext';\\nimport { UserCardContext } from '../contexts/UserCardContext';\\n\\nconst UserCard = lazy(() => import('../UserCard'));\\n\\nconst UserCardProvider = ({ children }: { children: ReactNode }) => {\\n\\tconst room = useRoom();\\n\\tconst [userCardData, setUserCardData] = useState<ComponentProps<typeof UserCard> | null>(null);\\n\\n\\tconst triggerRef = useRef(null);\\n\\tconst state = useOverlayTriggerState({});\\n\\tconst { triggerProps, overlayProps } = useOverlayTrigger({ type: 'dialog' }, state, triggerRef);\\n\\tdelete triggerProps.onPress;\\n\\n\\tconst { openTab } = useRoomToolbox();\\n\\n\\tconst openUserInfo = useEffectEvent((username?: string) => {\\n\\t\\tswitch (room.t) {\\n\\t\\t\\tcase 'l':\\n\\t\\t\\t\\topenTab('room-info', username);\\n\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\tcase 'v':\\n\\t\\t\\t\\topenTab('voip-room-info', username);\\n\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\tcase 'd':\\n\\t\\t\\t\\t(room.uids?.length ?? 0) > 2 ? openTab('user-info-group', username) : openTab('user-info', username);\\n\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\tdefault:\\n\\t\\t\\t\\topenTab('members-list', username);\\n\\t\\t\\t\\tbreak;\\n\\t\\t}\\n\\t});\\n\\n\\tconst handleSetUserCard = useCallback(\\n\\t\\t(e, username) => {\\n\\t\\t\\ttriggerRef.current = e.target;\\n\\t\\t\\tstate.open();\\n\\t\\t\\tsetUserCardData({\\n\\t\\t\\t\\tusername,\\n\\t\\t\\t\\trid: room._id,\\n\\t\\t\\t\\tonOpenUserInfo: () => openUserInfo(username),\\n\\t\\t\\t\\tonClose: () => setUserCardData(null),\\n\\t\\t\\t});\\n\\t\\t},\\n\\t\\t[openUserInfo, room._id, state],\\n\\t);\\n\\n\\tconst contextValue = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\topenUserCard: handleSetUserCard,\\n\\t\\t\\tcloseUserCard: () => setUserCardData(null),\\n\\t\\t\\ttriggerProps,\\n\\t\\t\\ttriggerRef,\\n\\t\\t\\tstate,\\n\\t\\t}),\\n\\t\\t[handleSetUserCard, state, triggerProps],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<UserCardContext.Provider value={contextValue}>\\n\\t\\t\\t{children}\\n\\t\\t\\t{state.isOpen && userCardData && (\\n\\t\\t\\t\\t<Suspense fallback={null}>\\n\\t\\t\\t\\t\\t<Popover placement='top left' triggerRef={triggerRef} state={state}>\\n\\t\\t\\t\\t\\t\\t<UserCard {...userCardData} {...overlayProps} />\\n\\t\\t\\t\\t\\t</Popover>\\n\\t\\t\\t\\t</Suspense>\\n\\t\\t\\t)}\\n\\t\\t</UserCardContext.Provider>\\n\\t);\\n};\\n\\nexport default UserCardProvider;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_extends\",\"_slicedToArray\",\"Popover\",\"useEffectEvent\",\"React\",\"Suspense\",\"lazy\",\"useCallback\",\"useMemo\",\"useRef\",\"useState\",\"useOverlayTrigger\",\"useOverlayTriggerState\",\"useRoom\",\"useRoomToolbox\",\"UserCardContext\",\"UserCard\",\"dynamicImport\",\"exportDefault\",\"_ref\",\"children\",\"room\",\"_useState\",\"_useState2\",\"userCardData\",\"setUserCardData\",\"triggerRef\",\"state\",\"_useOverlayTrigger\",\"type\",\"triggerProps\",\"overlayProps\",\"onPress\",\"openTab\",\"_useRoomToolbox\",\"openUserInfo\",\"username\",\"_room$uids$length\",\"_room$uids\",\"t\",\"uids\",\"length\",\"handleSetUserCard\",\"e\",\"current\",\"target\",\"open\",\"rid\",\"_id\",\"onOpenUserInfo\",\"onClose\",\"contextValue\",\"openUserCard\",\"closeUserCard\",\"createElement\",\"Provider\",\"value\",\"isOpen\",\"fallback\",\"placement\"],\"mappings\":\"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\"}"}