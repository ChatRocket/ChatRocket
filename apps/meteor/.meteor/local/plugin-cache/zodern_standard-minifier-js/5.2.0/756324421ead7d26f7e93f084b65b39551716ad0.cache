{"code":"function module(e,n,t){var i,a,o,r,u,l,s,c,d,f,m,p,k,g,v,h;t.link(\"@babel/runtime/helpers/taggedTemplateLiteralLoose\",{default:function(e){a=e}},0),t.link(\"@babel/runtime/regenerator\",{default:function(e){o=e}},1),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){r=e}},2),t.link(\"@rocket.chat/css-in-js\",{css:function(e){u=e}},0),t.link(\"@rocket.chat/fuselage\",{Palette:function(e){l=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useMethod:function(e){s=e},useSetting:function(e){c=e},useToastMessageDispatch:function(e){d=e},useUserId:function(e){f=e}},2),t.link(\"react\",{default:function(e){m=e},useCallback:function(e){p=e},memo:function(e){k=e}},3),t.link(\"../../../../../hooks/useDecryptedMessage\",{useDecryptedMessage:function(e){g=e}},4),t.link(\"../../../../../lib/normalizeThreadMessage\",{normalizeThreadMessage:function(e){v=e}},5),t.link(\"./ThreadListMessage\",{default:function(e){h=e}},6),t.exportDefault(k(function(e){var n,t,k,b,_,x,M=e.thread,w=e.unread,D=e.unreadUser,T=e.unreadGroup,j=e.onClick,y=null!==(n=f())&&void 0!==n?n:void 0,P=g(M),U=v(r(r({},M),{},{msg:P})),C=M.u.name,I=void 0===C?M.u.username:C,L=!!y&&null!==(t=null===(k=M.replies)||void 0===k?void 0:k.includes(y))&&void 0!==t&&t,z=s(\"followMessage\"),N=s(\"unfollowMessage\"),S=d(),B=p(function(){return o.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!L){e.next=6;break}return e.next=4,o.awrap(N({mid:M._id}));case 4:e.next=8;break;case 6:return e.next=8,o.awrap(z({mid:M._id}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),S({type:\"error\",message:e.t0});case 13:case\"end\":return e.stop()}},null,null,[[0,10]],Promise)},[L,N,M._id,z,S]),E=p(function(e){e.preventDefault(),e.stopPropagation(),B()},[B]),F=null!==(b=c(\"UI_Use_Real_Name\"))&&void 0!==b&&b,G=p(function(e){e.preventDefault(),e.stopPropagation(),j(M._id)},[j,M._id]);return m.createElement(h,{className:u(i||(i=a([\"\\n\t\t\t\tcursor: pointer;\\n\t\t\t\t&:hover,\\n\t\t\t\t&:focus {\\n\t\t\t\t\tbackground: \",\";\\n\t\t\t\t}\\n\t\t\t\tborder-bottom: 1px solid \",\" !important;\\n\t\t\t\"])),l.surface[\"surface-hover\"],l.stroke[\"stroke-extra-light\"]),tabIndex:0,_id:M._id,replies:null!==(_=M.tcount)&&void 0!==_?_:0,tlm:M.tlm,ts:M.ts,participants:null===(x=M.replies)||void 0===x?void 0:x.length,name:F?I:M.u.username,username:M.u.username,unread:w.includes(M._id),mention:D.includes(M._id),all:T.includes(M._id),following:L,\"data-id\":M._id,msg:null!=U?U:\"\",handleFollowButton:E,onClick:G,emoji:null==M?void 0:M.emoji})}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/Threads/components/ThreadListItem.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { css } from '@rocket.chat/css-in-js';\\nimport { Palette } from '@rocket.chat/fuselage';\\nimport { useMethod, useSetting, useToastMessageDispatch, useUserId } from '@rocket.chat/ui-contexts';\\nimport type { MouseEvent, ReactElement } from 'react';\\nimport React, { useCallback, memo } from 'react';\\n\\nimport { useDecryptedMessage } from '../../../../../hooks/useDecryptedMessage';\\nimport { normalizeThreadMessage } from '../../../../../lib/normalizeThreadMessage';\\nimport ThreadListMessage from './ThreadListMessage';\\n\\ntype ThreadListItemProps = {\\n\\tthread: IMessage;\\n\\tunread: string[];\\n\\tunreadUser: string[];\\n\\tunreadGroup: string[];\\n\\tonClick: (tmid: IMessage['_id']) => void;\\n};\\n\\nconst ThreadListItem = ({ thread, unread, unreadUser, unreadGroup, onClick }: ThreadListItemProps): ReactElement => {\\n\\tconst uid = useUserId() ?? undefined;\\n\\tconst decryptedMsg = useDecryptedMessage(thread);\\n\\tconst msg = normalizeThreadMessage({ ...thread, msg: decryptedMsg });\\n\\n\\tconst { name = thread.u.username } = thread.u;\\n\\n\\tconst following = !!uid && (thread.replies?.includes(uid) ?? false);\\n\\n\\tconst followMessage = useMethod('followMessage');\\n\\tconst unfollowMessage = useMethod('unfollowMessage');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst toggleFollowMessage = useCallback(async (): Promise<void> => {\\n\\t\\ttry {\\n\\t\\t\\tif (following) {\\n\\t\\t\\t\\tawait unfollowMessage({ mid: thread._id });\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tawait followMessage({ mid: thread._id });\\n\\t\\t\\t}\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t}, [following, unfollowMessage, thread._id, followMessage, dispatchToastMessage]);\\n\\n\\tconst handleToggleFollowButtonClick = useCallback(\\n\\t\\t(event: MouseEvent<HTMLElement>): void => {\\n\\t\\t\\tevent.preventDefault();\\n\\t\\t\\tevent.stopPropagation();\\n\\t\\t\\ttoggleFollowMessage();\\n\\t\\t},\\n\\t\\t[toggleFollowMessage],\\n\\t);\\n\\n\\tconst showRealNames = (useSetting('UI_Use_Real_Name') as boolean | undefined) ?? false;\\n\\n\\tconst handleListItemClick = useCallback(\\n\\t\\t(event: MouseEvent<HTMLElement>): void => {\\n\\t\\t\\tevent.preventDefault();\\n\\t\\t\\tevent.stopPropagation();\\n\\t\\t\\tonClick(thread._id);\\n\\t\\t},\\n\\t\\t[onClick, thread._id],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<ThreadListMessage\\n\\t\\t\\tclassName={css`\\n\\t\\t\\t\\tcursor: pointer;\\n\\t\\t\\t\\t&:hover,\\n\\t\\t\\t\\t&:focus {\\n\\t\\t\\t\\t\\tbackground: ${Palette.surface['surface-hover']};\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tborder-bottom: 1px solid ${Palette.stroke['stroke-extra-light']} !important;\\n\\t\\t\\t`}\\n\\t\\t\\ttabIndex={0}\\n\\t\\t\\t_id={thread._id}\\n\\t\\t\\treplies={thread.tcount ?? 0}\\n\\t\\t\\ttlm={thread.tlm}\\n\\t\\t\\tts={thread.ts}\\n\\t\\t\\tparticipants={thread.replies?.length}\\n\\t\\t\\tname={showRealNames ? name : thread.u.username}\\n\\t\\t\\tusername={thread.u.username}\\n\\t\\t\\tunread={unread.includes(thread._id)}\\n\\t\\t\\tmention={unreadUser.includes(thread._id)}\\n\\t\\t\\tall={unreadGroup.includes(thread._id)}\\n\\t\\t\\tfollowing={following}\\n\\t\\t\\tdata-id={thread._id}\\n\\t\\t\\tmsg={msg ?? ''}\\n\\t\\t\\thandleFollowButton={handleToggleFollowButtonClick}\\n\\t\\t\\tonClick={handleListItemClick}\\n\\t\\t\\temoji={thread?.emoji}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(ThreadListItem);\\n\",null],\"names\":[\"_taggedTemplateLiteralLoose\",\"_regeneratorRuntime\",\"_objectSpread\",\"css\",\"Palette\",\"useMethod\",\"useSetting\",\"useToastMessageDispatch\",\"useUserId\",\"React\",\"useCallback\",\"memo\",\"useDecryptedMessage\",\"normalizeThreadMessage\",\"ThreadListMessage\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_useUserId\",\"_thread$replies$inclu\",\"_thread$replies\",\"_useSetting\",\"_thread$tcount\",\"_thread$replies2\",\"thread\",\"unread\",\"unreadUser\",\"unreadGroup\",\"onClick\",\"uid\",\"undefined\",\"decryptedMsg\",\"msg\",\"_thread$u$name\",\"u\",\"name\",\"username\",\"following\",\"replies\",\"includes\",\"followMessage\",\"unfollowMessage\",\"dispatchToastMessage\",\"toggleFollowMessage\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"mid\",\"_id\",\"t0\",\"type\",\"message\",\"stop\",\"Promise\",\"handleToggleFollowButtonClick\",\"event\",\"preventDefault\",\"stopPropagation\",\"showRealNames\",\"handleListItemClick\",\"createElement\",\"className\",\"_templateObject\",\"surface\",\"stroke\",\"tabIndex\",\"tcount\",\"tlm\",\"ts\",\"participants\",\"length\",\"mention\",\"all\",\"handleFollowButton\",\"emoji\"],\"mappings\":\"uBAmBA,MAlBAA,EAA6CC,EAAAC,EAA7CC,EAA6CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAzBC,EAAAC,IAAA,CAAwB,oDAAC,CAAAC,QAAA,SAAAC,CAAA,EAAAlB,EAAAkB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAjB,EAAAiB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAhB,EAAAgB,CAAA,CAAA,EAAA,GAAtCH,EAAOC,IAAA,CAAM,yBAAyB,CAAAb,IAAA,SAAAe,CAAA,EAAAf,EAAAe,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAZ,QAAA,SAAAc,CAAA,EAAAd,EAAAc,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAX,UAAA,SAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,WAAA,SAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,wBAAA,SAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,UAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAT,EAAAS,CAAA,EAAAR,YAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,KAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAAJ,oBAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,4CAAA,CAAAH,uBAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sBAAA,CAAA,QAAA,SAAAE,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA7CH,EAAOI,aAAa,CA8FLR,EA5EQ,SAAAS,CAAA,EAA4F,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAzFC,EAAMP,EAANO,MAAM,CAAEC,EAAMR,EAANQ,MAAM,CAAEC,EAAUT,EAAVS,UAAU,CAAEC,EAAWV,EAAXU,WAAW,CAAEC,EAAOX,EAAPW,OAAO,CACnEC,EAAG,AAAc,OAAdX,CAAAA,EAAGb,GAAS,GAAEa,AAAA,KAAA,IAAAA,EAAAA,EAAIY,KAAAA,EACrBC,EAAetB,EAAoBe,GACnCQ,EAAMtB,EAAsBX,EAAAA,EAAA,CAAA,EAAMyB,GAAM,CAAA,EAAA,CAAEQ,IAAKD,CAAY,IAEjEE,EAAqCT,EAAOU,CAAC,CAArCC,IAAI,CAAJA,EAAIF,AAAA,KAAA,IAAAA,EAAGT,EAAOU,CAAC,CAACE,QAAQ,CAAAH,EAE1BI,EAAY,CAAC,CAACR,GAAG,AAAkC,OAAlCV,CAAAA,EAAA,AAAmB,OAAnBC,CAAAA,EAAKI,EAAOc,OAAO,AAAPA,GAAOlB,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgBmB,QAAQ,CAACV,EAAG,GAACV,AAAA,KAAA,IAAAA,GAAAA,EAEnDqB,EAAgBtC,EAAU,iBAC1BuC,EAAkBvC,EAAU,mBAC5BwC,EAAuBtC,IAEvBuC,EAAsBpC,EAAY,WAAA,OAAAT,EAAA8C,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,EAAA,CAElCT,EAAS,CAAAQ,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAE,IAAA,CAAA,EAAAjD,EAAAkD,KAAA,CACNP,EAAgB,CAAEQ,IAAKzB,EAAO0B,GAAAA,AAAG,GAAG,MAAA,EAAAL,EAAAE,IAAA,CAAA,EAAA,KAAA,MAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAAjD,EAAAkD,KAAA,CAEpCR,EAAc,CAAES,IAAKzB,EAAO0B,GAAAA,AAAG,GAAG,MAAA,EAAAL,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,GAAAF,EAAAC,IAAA,CAAA,GAAAD,EAAAM,EAAA,CAAAN,EAAA,KAAA,CAAA,GAGzCH,EAAqB,CAAEU,KAAM,QAASC,QAAOR,EAAAM,EAAAA,AAAO,EAAI,MAAA,GAAA,IAAA,MAAA,OAAAN,EAAAS,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,GAAA,CAAA,CAAAC,QAAA,EAEvD,CAAClB,EAAWI,EAAiBjB,EAAO0B,GAAG,CAAEV,EAAeE,EAAqB,EAE1Ec,EAAgCjD,EACrC,SAACkD,CAA8B,EAC9BA,EAAMC,cAAc,GACpBD,EAAME,eAAe,GACrBhB,GACD,EACA,CAACA,EAAoB,EAGhBiB,EAAa,AAA0D,OAA1DvC,CAAAA,EAAIlB,EAAW,mBAAkB,GAAyBkB,AAAA,KAAA,IAAAA,GAAAA,EAEvEwC,EAAsBtD,EAC3B,SAACkD,CAA8B,EAC9BA,EAAMC,cAAc,GACpBD,EAAME,eAAe,GACrB/B,EAAQJ,EAAO0B,GAAG,CACnB,EACA,CAACtB,EAASJ,EAAO0B,GAAG,CAAC,EAGtB,OACC5C,EAAAwD,aAAA,CAACnD,EAAiB,CACjBoD,UAAW/D,EAAGgE,GAAAA,CAAAA,EAAAnE,EAAA,CAAA,yEAAA,0CAAA,oBAAA,CAAA,EAIEI,EAAQgE,OAAO,CAAC,gBAAgB,CAEpBhE,EAAQiE,MAAM,CAAC,qBAAqB,EAEhEC,SAAU,EACVjB,IAAK1B,EAAO0B,GAAI,CAChBZ,QAAO,AAAe,OAAfhB,CAAAA,EAAEE,EAAO4C,MAAM,AAANA,GAAM9C,AAAA,KAAA,IAAAA,EAAAA,EAAI,EAC1B+C,IAAK7C,EAAO6C,GAAI,CAChBC,GAAI9C,EAAO8C,EAAG,CACdC,aAAY,AAAgB,OAAhBhD,CAAAA,EAAEC,EAAOc,OAAO,AAAPA,GAAOf,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgBiD,MAAO,CACrCrC,KAAMyB,EAAgBzB,EAAOX,EAAOU,CAAC,CAACE,QAAS,CAC/CA,SAAUZ,EAAOU,CAAC,CAACE,QAAS,CAC5BX,OAAQA,EAAOc,QAAQ,CAACf,EAAO0B,GAAG,EAClCuB,QAAS/C,EAAWa,QAAQ,CAACf,EAAO0B,GAAG,EACvCwB,IAAK/C,EAAYY,QAAQ,CAACf,EAAO0B,GAAG,EACpCb,UAAWA,EACX,UAASb,EAAO0B,GAAI,CACpBlB,IAAKA,MAAAA,EAAAA,EAAO,GACZ2C,mBAAoBnB,EACpB5B,QAASiC,EACTe,MAAOpD,MAAAA,EAAM,KAAA,EAANA,EAAQoD,KAAAA,AAAM,EAGxB\"}"}