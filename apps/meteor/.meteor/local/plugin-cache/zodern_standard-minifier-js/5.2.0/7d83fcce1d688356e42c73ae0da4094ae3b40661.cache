{"code":"function module(e,t,l){let n,a,r,i,o,s,u,c,m,d,E,k,v,g,p;l.link(\"@rocket.chat/fuselage\",{Button(e){n=e},Modal(e){a=e},Field(e){r=e},FieldGroup(e){i=e},FieldLabel(e){o=e},FieldRow(e){s=e},TextInput(e){u=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){c=e}},1),l.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){m=e},useEndpoint(e){d=e},useUser(e){E=e}},2),l.link(\"@tanstack/react-query\",{useMutation(e){k=e},useQueryClient(e){v=e}},3),l.link(\"react\",{default(e){g=e}},4),l.link(\"react-i18next\",{useTranslation(e){p=e}},5),l.exportDefault(e=>{let{name:t,extension:l,username:C,onClose:F}=e,{t:h}=p(),x=m(),b=v(),f=E(),y=d(\"POST\",\"/v1/voip-freeswitch.extension.assign\"),T=c(),M=c(),Q=c(),R=k({mutationFn:e=>y({username:e}),onSuccess:()=>{x({type:\"success\",message:h(\"Extension_removed\")}),b.invalidateQueries([\"users.list\"]),(null==f?void 0:f.username)===C&&b.invalidateQueries([\"voip-client\"]),F()},onError:e=>{x({type:\"error\",message:e}),F()}});return g.createElement(a,{\"aria-labelledby\":T},g.createElement(a.Header,null,g.createElement(a.Title,{id:T},h(\"Remove_extension\")),g.createElement(a.Close,{\"aria-label\":h(\"Close\"),onClick:F})),g.createElement(a.Content,null,g.createElement(i,null,g.createElement(r,null,g.createElement(o,{htmlFor:M},h(\"User\")),g.createElement(s,null,g.createElement(u,{disabled:!0,id:M,value:t}))),g.createElement(r,null,g.createElement(o,{htmlFor:Q},h(\"Extension\")),g.createElement(s,null,g.createElement(u,{disabled:!0,id:Q,value:l}))))),g.createElement(a.Footer,null,g.createElement(a.FooterControllers,null,g.createElement(n,{onClick:F},h(\"Cancel\")),g.createElement(n,{danger:!0,onClick:()=>R.mutate(C),loading:R.isLoading},h(\"Remove\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/users/voip/RemoveExtensionModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Button, Modal, Field, FieldGroup, FieldLabel, FieldRow, TextInput } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useEndpoint, useUser } from '@rocket.chat/ui-contexts';\\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\ntype RemoveExtensionModalProps = {\\n\\tname: string;\\n\\textension: string;\\n\\tusername: string;\\n\\tonClose: () => void;\\n};\\n\\nconst RemoveExtensionModal = ({ name, extension, username, onClose }: RemoveExtensionModalProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst queryClient = useQueryClient();\\n\\n\\tconst loggedUser = useUser();\\n\\n\\tconst removeExtension = useEndpoint('POST', '/v1/voip-freeswitch.extension.assign');\\n\\n\\tconst modalTitleId = useUniqueId();\\n\\tconst userFieldId = useUniqueId();\\n\\tconst freeExtensionNumberId = useUniqueId();\\n\\n\\tconst handleRemoveExtension = useMutation({\\n\\t\\tmutationFn: (username: string) => removeExtension({ username }),\\n\\t\\tonSuccess: () => {\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Extension_removed') });\\n\\n\\t\\t\\tqueryClient.invalidateQueries(['users.list']);\\n\\t\\t\\tif (loggedUser?.username === username) {\\n\\t\\t\\t\\tqueryClient.invalidateQueries(['voip-client']);\\n\\t\\t\\t}\\n\\n\\t\\t\\tonClose();\\n\\t\\t},\\n\\t\\tonError: (error) => {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\tonClose();\\n\\t\\t},\\n\\t});\\n\\n\\treturn (\\n\\t\\t<Modal aria-labelledby={modalTitleId}>\\n\\t\\t\\t<Modal.Header>\\n\\t\\t\\t\\t<Modal.Title id={modalTitleId}>{t('Remove_extension')}</Modal.Title>\\n\\t\\t\\t\\t<Modal.Close aria-label={t('Close')} onClick={onClose} />\\n\\t\\t\\t</Modal.Header>\\n\\t\\t\\t<Modal.Content>\\n\\t\\t\\t\\t<FieldGroup>\\n\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t<FieldLabel htmlFor={userFieldId}>{t('User')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<TextInput disabled id={userFieldId} value={name} />\\n\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t</Field>\\n\\n\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t<FieldLabel htmlFor={freeExtensionNumberId}>{t('Extension')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<TextInput disabled id={freeExtensionNumberId} value={extension} />\\n\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t</FieldGroup>\\n\\t\\t\\t</Modal.Content>\\n\\t\\t\\t<Modal.Footer>\\n\\t\\t\\t\\t<Modal.FooterControllers>\\n\\t\\t\\t\\t\\t<Button onClick={onClose}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button danger onClick={() => handleRemoveExtension.mutate(username)} loading={handleRemoveExtension.isLoading}>\\n\\t\\t\\t\\t\\t\\t{t('Remove')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</Modal.FooterControllers>\\n\\t\\t\\t</Modal.Footer>\\n\\t\\t</Modal>\\n\\t);\\n};\\n\\nexport default RemoveExtensionModal;\\n\",null],\"names\":[\"Button\",\"Modal\",\"Field\",\"FieldGroup\",\"FieldLabel\",\"FieldRow\",\"TextInput\",\"useUniqueId\",\"useToastMessageDispatch\",\"useEndpoint\",\"useUser\",\"useMutation\",\"useQueryClient\",\"React\",\"useTranslation\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"name\",\"extension\",\"username\",\"onClose\",\"t\",\"dispatchToastMessage\",\"queryClient\",\"loggedUser\",\"removeExtension\",\"modalTitleId\",\"userFieldId\",\"freeExtensionNumberId\",\"handleRemoveExtension\",\"mutationFn\",\"onSuccess\",\"type\",\"message\",\"invalidateQueries\",\"onError\",\"error\",\"createElement\",\"Header\",\"Title\",\"id\",\"Close\",\"onClick\",\"Content\",\"htmlFor\",\"disabled\",\"value\",\"Footer\",\"FooterControllers\",\"danger\",\"mutate\",\"loading\",\"isLoading\"],\"mappings\":\"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\"}"}