{"code":"function module(e,t,r){let l,n,o,a,c,i;r.link(\"@rocket.chat/ui-contexts\",{ServerContext(e){l=e}},0),r.link(\"meteor/meteor\",{Meteor(e){n=e}},1),r.link(\"path-to-regexp\",{compile(e){o=e}},2),r.link(\"react\",{default(e){a=e}},3),r.link(\"../../app/utils/client/lib/SDKClient\",{sdk(e){c=e}},4),r.link(\"../../app/utils/rocketchat.info\",{Info(e){i=e}},5);let s={info:i,absoluteUrl:e=>n.absoluteUrl(e),callMethod:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),l=1;l<t;l++)r[l-1]=arguments[l];return n.callAsync(e,...r)},callEndpoint:e=>{let{method:t,pathPattern:r,keys:l,params:n}=e,a=o(r,{encode:encodeURIComponent})(l);switch(t){case\"GET\":return c.rest.get(a,n);case\"POST\":return c.rest.post(a,n);case\"PUT\":return c.rest.put(a,n);case\"DELETE\":return c.rest.delete(a,n);default:throw Error(\"Invalid HTTP method\")}},uploadToEndpoint:(e,t)=>c.rest.post(e,t),getStream:(e,t)=>(t,r)=>c.stream(e,[t],r).stop};r.exportDefault(e=>{let{children:t}=e;return a.createElement(l.Provider,{children:t,value:s})})}","map":"{\"version\":3,\"sources\":[\"client/providers/ServerProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { Serialized } from '@rocket.chat/core-typings';\\nimport type {\\n\\tServerMethodName,\\n\\tServerMethodParameters,\\n\\tServerMethodReturn,\\n\\tStreamerCallbackArgs,\\n\\tStreamNames,\\n\\tStreamKeys,\\n} from '@rocket.chat/ddp-client';\\nimport type { Method, PathFor, OperationParams, OperationResult, UrlParams, PathPattern } from '@rocket.chat/rest-typings';\\nimport type { UploadResult } from '@rocket.chat/ui-contexts';\\nimport { ServerContext } from '@rocket.chat/ui-contexts';\\nimport { Meteor } from 'meteor/meteor';\\nimport { compile } from 'path-to-regexp';\\nimport type { ReactNode } from 'react';\\nimport React from 'react';\\n\\nimport { sdk } from '../../app/utils/client/lib/SDKClient';\\nimport { Info as info } from '../../app/utils/rocketchat.info';\\n\\nconst absoluteUrl = (path: string): string => Meteor.absoluteUrl(path);\\n\\nconst callMethod = <MethodName extends ServerMethodName>(\\n\\tmethodName: MethodName,\\n\\t...args: ServerMethodParameters<MethodName>\\n): Promise<ServerMethodReturn<MethodName>> => Meteor.callAsync(methodName, ...args);\\n\\nconst callEndpoint = <TMethod extends Method, TPathPattern extends PathPattern>({\\n\\tmethod,\\n\\tpathPattern,\\n\\tkeys,\\n\\tparams,\\n}: {\\n\\tmethod: TMethod;\\n\\tpathPattern: TPathPattern;\\n\\tkeys: UrlParams<TPathPattern>;\\n\\tparams: OperationParams<TMethod, TPathPattern>;\\n}): Promise<Serialized<OperationResult<TMethod, TPathPattern>>> => {\\n\\tconst compiledPath = compile(pathPattern, { encode: encodeURIComponent })(keys) as any;\\n\\n\\tswitch (method) {\\n\\t\\tcase 'GET':\\n\\t\\t\\treturn sdk.rest.get(compiledPath, params as any) as any;\\n\\n\\t\\tcase 'POST':\\n\\t\\t\\treturn sdk.rest.post(compiledPath, params as any) as any;\\n\\n\\t\\tcase 'PUT':\\n\\t\\t\\treturn sdk.rest.put(compiledPath, params as never) as never;\\n\\n\\t\\tcase 'DELETE':\\n\\t\\t\\treturn sdk.rest.delete(compiledPath, params as any) as any;\\n\\n\\t\\tdefault:\\n\\t\\t\\tthrow new Error('Invalid HTTP method');\\n\\t}\\n};\\n\\nconst uploadToEndpoint = (endpoint: PathFor<'POST'>, formData: any): Promise<UploadResult> => sdk.rest.post(endpoint as any, formData);\\n\\nconst getStream =\\n\\t<N extends StreamNames>(\\n\\t\\tstreamName: N,\\n\\t\\t_options?: {\\n\\t\\t\\tretransmit?: boolean | undefined;\\n\\t\\t\\tretransmitToSelf?: boolean | undefined;\\n\\t\\t},\\n\\t) =>\\n\\t<K extends StreamKeys<N>>(eventName: K, callback: (...args: StreamerCallbackArgs<N, K>) => void): (() => void) =>\\n\\t\\tsdk.stream(streamName, [eventName], callback).stop;\\n\\nconst contextValue = {\\n\\tinfo,\\n\\tabsoluteUrl,\\n\\tcallMethod,\\n\\tcallEndpoint,\\n\\tuploadToEndpoint,\\n\\tgetStream,\\n};\\n\\ntype ServerProviderProps = { children?: ReactNode };\\n\\nconst ServerProvider = ({ children }: ServerProviderProps) => <ServerContext.Provider children={children} value={contextValue} />;\\n\\nexport default ServerProvider;\\n\",null],\"names\":[\"ServerContext\",\"Meteor\",\"compile\",\"React\",\"sdk\",\"info\",\"module\",\"link\",\"v\",\"default\",\"Info\",\"contextValue\",\"absoluteUrl\",\"path\",\"callMethod\",\"methodName\",\"_len\",\"arguments\",\"length\",\"args\",\"Array\",\"_key\",\"callAsync\",\"callEndpoint\",\"_ref\",\"method\",\"pathPattern\",\"keys\",\"params\",\"compiledPath\",\"encode\",\"encodeURIComponent\",\"rest\",\"get\",\"post\",\"put\",\"delete\",\"Error\",\"uploadToEndpoint\",\"endpoint\",\"formData\",\"getStream\",\"streamName\",\"_options\",\"eventName\",\"callback\",\"stream\",\"stop\",\"exportDefault\",\"_ref2\",\"children\",\"createElement\",\"Provider\",\"value\"],\"mappings\":\"2BAWAA,EAAyDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAhDC,EAAeC,IAAA,CAAM,2BAA2B,CAAAP,cAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gBAAA,CAAAN,OAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iBAAA,CAAAL,QAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,uCAAA,CAAAH,IAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kCAAA,CAAAG,KAAAF,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GA4DzD,IAAMG,EAAe,CACpBN,KAAAA,EACAO,YArDoBC,GAAyBZ,EAAOW,WAAW,CAACC,GAsDhEC,WApDkB,SAClBC,CAAsB,EAAA,IAAA,IAAAC,EAAAC,UAAAC,MAAA,CACnBC,EAAwC,AAAAC,MAAAJ,EAAA,EAAAA,EAAA,EAAA,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAxCF,CAAwC,CAAAE,EAAA,EAAA,CAAAJ,SAAA,CAAAI,EAAA,CAAA,OACEpB,EAAOqB,SAAS,CAACP,KAAeI,EAAK,EAkDlFI,aAhDoBC,IAU6C,GAVc,CAC/EC,OAAAA,CAAM,CACNC,YAAAA,CAAW,CACXC,KAAAA,CAAI,CACJC,OAAAA,CAAAA,CAMA,CAAAJ,EACMK,EAAe3B,EAAQwB,EAAa,CAAEI,OAAQC,kBAAkB,GAAIJ,GAE1E,OAAQF,GACP,IAAK,MACJ,OAAOrB,EAAI4B,IAAI,CAACC,GAAG,CAACJ,EAAcD,EAEnC,KAAK,OACJ,OAAOxB,EAAI4B,IAAI,CAACE,IAAI,CAACL,EAAcD,EAEpC,KAAK,MACJ,OAAOxB,EAAI4B,IAAI,CAACG,GAAG,CAACN,EAAcD,EAEnC,KAAK,SACJ,OAAOxB,EAAI4B,IAAI,CAACI,MAAM,CAACP,EAAcD,EAEtC,SACC,MAAM,AAAIS,MAAM,sBAClB,CACD,EAoBCC,iBAlBwBA,CAACC,EAA2BC,IAAyCpC,EAAI4B,IAAI,CAACE,IAAI,CAACK,EAAiBC,GAmB5HC,UAhBAA,CACCC,EACAC,IAKD,CAA0BC,EAAcC,IACvCzC,EAAI0C,MAAM,CAACJ,EAAY,CAACE,EAAU,CAAEC,GAAUE,IAAI,EA1DpDzC,EAAO0C,aAAE,CAuEcC,IAAA,GAAC,CAAEC,SAAAA,CAAAA,CAA+B,CAAAD,EAAA,OAAK9C,EAAAgD,aAAA,CAACnD,EAAcoD,QAAQ,CAAA,CAACF,SAAUA,EAAUG,MAAO1C,CAAa,EAAG\"}"}