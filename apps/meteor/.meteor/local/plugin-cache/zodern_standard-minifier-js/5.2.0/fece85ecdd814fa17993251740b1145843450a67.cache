{"code":"function module(e,t,n){var l,o,r,a,u,c,i,m,f,d,E,p,s,F,b,h,k,x,y,C;n.link(\"@babel/runtime/helpers/extends\",{default:function(e){l=e}},0),n.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){o=e}},1),n.link(\"@rocket.chat/fuselage\",{Field:function(e){r=e},FieldLabel:function(e){a=e},FieldRow:function(e){u=e},Select:function(e){c=e},ButtonGroup:function(e){i=e},Button:function(e){m=e},FieldGroup:function(e){f=e},InputBox:function(e){d=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useAutoFocus:function(e){E=e},useUniqueId:function(e){p=e}},1),n.link(\"react\",{default:function(e){s=e},useMemo:function(e){F=e}},2),n.link(\"react-hook-form\",{Controller:function(e){b=e},useFormContext:function(e){h=e}},3),n.link(\"react-i18next\",{useTranslation:function(e){k=e}},4),n.link(\"../../../../components/Contextualbar\",{ContextualbarScrollableContent:function(e){x=e},ContextualbarFooter:function(e){y=e}},5),n.link(\"./useRoomExportMutation\",{useRoomExportMutation:function(e){C=e}},6),n.exportDefault(function(e){var t=e.formId,n=e.rid,v=e.exportOptions,S=e.onCancel,T=k().t,M=h(),I=M.control,g=M.handleSubmit,B=C(),D=E(),O=F(function(){return[[\"html\",T(\"HTML\")],[\"json\",T(\"JSON\")]]},[T]),R=p(),_=p(),j=p(),A=p();return s.createElement(s.Fragment,null,s.createElement(x,null,s.createElement(\"form\",{ref:D,tabIndex:-1,\"aria-labelledby\":t+\"-title\",id:t,onSubmit:g(function(e){var t=e.dateFrom,l=e.dateTo,r=e.format;B.mutateAsync(o(o(o({rid:n,type:\"file\"},t&&{dateFrom:t}),l&&{dateTo:l}),{},{format:r}))})},s.createElement(f,null,s.createElement(r,null,s.createElement(a,{htmlFor:R},T(\"Method\")),s.createElement(u,null,s.createElement(b,{name:\"type\",control:I,render:function(e){var t=e.field;return s.createElement(c,l({id:R},t,{placeholder:T(\"Type\"),options:v}))}}))),s.createElement(r,null,s.createElement(a,{htmlFor:_},T(\"Date_From\")),s.createElement(u,null,s.createElement(b,{name:\"dateFrom\",control:I,render:function(e){var t=e.field;return s.createElement(d,l({id:_,type:\"date\"},t))}}))),s.createElement(r,null,s.createElement(a,{htmlFor:j},T(\"Date_to\")),s.createElement(u,null,s.createElement(b,{name:\"dateTo\",control:I,render:function(e){var t=e.field;return s.createElement(d,l({id:j},t,{type:\"date\"}))}}))),s.createElement(r,null,s.createElement(a,{htmlFor:A},T(\"Output_format\")),s.createElement(u,null,s.createElement(b,{name:\"format\",control:I,render:function(e){var t=e.field;return s.createElement(c,l({},t,{id:A,placeholder:T(\"Format\"),options:O}))}})))))),s.createElement(y,null,s.createElement(i,{stretch:!0},s.createElement(m,{onClick:S},T(\"Cancel\")),s.createElement(m,{form:t,primary:!0,type:\"submit\"},T(\"Export\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/ExportMessages/FileExport.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport type { SelectOption } from '@rocket.chat/fuselage';\\nimport { Field, FieldLabel, FieldRow, Select, ButtonGroup, Button, FieldGroup, InputBox } from '@rocket.chat/fuselage';\\nimport { useAutoFocus, useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport React, { useMemo } from 'react';\\nimport { Controller, useFormContext } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../../components/Contextualbar';\\nimport type { MailExportFormValues } from './ExportMessages';\\nimport { useRoomExportMutation } from './useRoomExportMutation';\\n\\ntype FileExportProps = {\\n\\tformId: string;\\n\\trid: IRoom['_id'];\\n\\tonCancel: () => void;\\n\\texportOptions: SelectOption[];\\n};\\n\\nconst FileExport = ({ formId, rid, exportOptions, onCancel }: FileExportProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst { control, handleSubmit } = useFormContext<MailExportFormValues>();\\n\\tconst roomExportMutation = useRoomExportMutation();\\n\\tconst formFocus = useAutoFocus<HTMLFormElement>();\\n\\n\\tconst outputOptions = useMemo<SelectOption[]>(\\n\\t\\t() => [\\n\\t\\t\\t['html', t('HTML')],\\n\\t\\t\\t['json', t('JSON')],\\n\\t\\t],\\n\\t\\t[t],\\n\\t);\\n\\n\\tconst handleExport = ({ dateFrom, dateTo, format }: MailExportFormValues) => {\\n\\t\\troomExportMutation.mutateAsync({\\n\\t\\t\\trid,\\n\\t\\t\\ttype: 'file',\\n\\t\\t\\t...(dateFrom && { dateFrom }),\\n\\t\\t\\t...(dateTo && { dateTo }),\\n\\t\\t\\tformat,\\n\\t\\t});\\n\\t};\\n\\n\\tconst typeField = useUniqueId();\\n\\tconst dateFromField = useUniqueId();\\n\\tconst dateToField = useUniqueId();\\n\\tconst formatField = useUniqueId();\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<ContextualbarScrollableContent>\\n\\t\\t\\t\\t<form ref={formFocus} tabIndex={-1} aria-labelledby={`${formId}-title`} id={formId} onSubmit={handleSubmit(handleExport)}>\\n\\t\\t\\t\\t\\t<FieldGroup>\\n\\t\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t\\t<FieldLabel htmlFor={typeField}>{t('Method')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tname='type'\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\trender={({ field }) => <Select id={typeField} {...field} placeholder={t('Type')} options={exportOptions} />}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t\\t<FieldLabel htmlFor={dateFromField}>{t('Date_From')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tname='dateFrom'\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\trender={({ field }) => <InputBox id={dateFromField} type='date' {...field} />}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t\\t<FieldLabel htmlFor={dateToField}>{t('Date_to')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t<Controller name='dateTo' control={control} render={({ field }) => <InputBox id={dateToField} {...field} type='date' />} />\\n\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t\\t<FieldLabel htmlFor={formatField}>{t('Output_format')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tname='format'\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\trender={({ field }) => <Select {...field} id={formatField} placeholder={t('Format')} options={outputOptions} />}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t</FieldGroup>\\n\\t\\t\\t\\t</form>\\n\\t\\t\\t</ContextualbarScrollableContent>\\n\\t\\t\\t<ContextualbarFooter>\\n\\t\\t\\t\\t<ButtonGroup stretch>\\n\\t\\t\\t\\t\\t<Button onClick={onCancel}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button form={formId} primary type='submit'>\\n\\t\\t\\t\\t\\t\\t{t('Export')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</ContextualbarFooter>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default FileExport;\\n\",null],\"names\":[\"_extends\",\"_objectSpread\",\"Field\",\"FieldLabel\",\"FieldRow\",\"Select\",\"ButtonGroup\",\"Button\",\"FieldGroup\",\"InputBox\",\"useAutoFocus\",\"useUniqueId\",\"React\",\"useMemo\",\"Controller\",\"useFormContext\",\"useTranslation\",\"ContextualbarScrollableContent\",\"ContextualbarFooter\",\"useRoomExportMutation\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"formId\",\"rid\",\"exportOptions\",\"onCancel\",\"t\",\"_useTranslation\",\"_useFormContext\",\"control\",\"handleSubmit\",\"roomExportMutation\",\"formFocus\",\"outputOptions\",\"typeField\",\"dateFromField\",\"dateToField\",\"formatField\",\"createElement\",\"Fragment\",\"ref\",\"tabIndex\",\"id\",\"onSubmit\",\"_ref2\",\"dateFrom\",\"dateTo\",\"format\",\"mutateAsync\",\"type\",\"htmlFor\",\"name\",\"render\",\"_ref3\",\"field\",\"placeholder\",\"options\",\"_ref4\",\"_ref5\",\"_ref6\",\"stretch\",\"onClick\",\"form\",\"primary\"],\"mappings\":\"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\"}"}