{"code":"function module(e,t,n){var l,o,a,r,c,i,u,_,s,m,f,E,C,T,k;n.link(\"@rocket.chat/fuselage\",{Box:function(e){l=e},Button:function(e){o=e},Callout:function(e){a=e},Throbber:function(e){r=e}},0),n.link(\"react\",{default:function(e){c=e}},1),n.link(\"react-i18next\",{useTranslation:function(e){i=e}},2),n.link(\"../../../../../app/otr/lib/OtrRoomState\",{OtrRoomState:function(e){u=e}},3),n.link(\"../../../../components/Contextualbar\",{ContextualbarHeader:function(e){_=e},ContextualbarIcon:function(e){s=e},ContextualbarTitle:function(e){m=e},ContextualbarClose:function(e){f=e},ContextualbarScrollableContent:function(e){E=e}},4),n.link(\"../../contexts/RoomContext\",{useRoom:function(e){C=e}},5),n.link(\"./components/OTREstablished\",{default:function(e){T=e}},6),n.link(\"./components/OTRStates\",{default:function(e){k=e}},7),n.exportDefault(function(e){var t=e.isOnline,n=e.onClickClose,R=e.onClickStart,p=e.onClickEnd,O=e.onClickRefresh,h=e.otrState,b=e.peerUsername,d=i().t,S=C();return c.createElement(c.Fragment,null,c.createElement(_,null,c.createElement(s,{name:\"stopwatch\"}),c.createElement(m,null,d(\"OTR\")),n&&c.createElement(f,{onClick:n})),c.createElement(E,{p:24,color:\"default\"},c.createElement(l,{fontScale:\"h4\"},d(\"Off_the_record_conversation\")),S.encrypted?c.createElement(a,{title:d(\"OTR_not_available\"),type:\"warning\"},d(\"OTR_not_available_e2ee\")):t?function(){switch(h){case u.NOT_STARTED:return c.createElement(o,{onClick:R,primary:!0},d(\"Start_OTR\"));case u.ESTABLISHING:return c.createElement(l,null,c.createElement(l,{fontScale:\"p2\"},d(\"Please_wait_while_OTR_is_being_established\")),c.createElement(l,{mb:16},c.createElement(r,null)));case u.ESTABLISHED:return c.createElement(T,{onClickEnd:p,onClickRefresh:O});case u.DECLINED:return c.createElement(k,{title:d(\"OTR_Chat_Declined_Title\"),description:d(\"OTR_Chat_Declined_Description\",b||\"\"),icon:\"cross\",onClickStart:R});case u.TIMEOUT:return c.createElement(k,{title:d(\"OTR_Chat_Timeout_Title\"),description:d(\"OTR_Chat_Timeout_Description\",b||\"\"),icon:\"clock\",onClickStart:R});default:return c.createElement(k,{title:d(\"OTR_Chat_Error_Title\"),description:d(\"OTR_Chat_Error_Description\"),icon:\"warning\",onClickStart:R})}}():c.createElement(l,{fontScale:\"p2m\"},d(\"OTR_is_only_available_when_both_users_are_online\"))))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/OTR/OTR.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { Box, Button, Callout, Throbber } from '@rocket.chat/fuselage';\\nimport type { MouseEventHandler, ReactElement } from 'react';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { OtrRoomState } from '../../../../../app/otr/lib/OtrRoomState';\\nimport {\\n\\tContextualbarHeader,\\n\\tContextualbarIcon,\\n\\tContextualbarTitle,\\n\\tContextualbarClose,\\n\\tContextualbarScrollableContent,\\n} from '../../../../components/Contextualbar';\\nimport { useRoom } from '../../contexts/RoomContext';\\nimport OTREstablished from './components/OTREstablished';\\nimport OTRStates from './components/OTRStates';\\n\\ntype OTRProps = {\\n\\tisOnline: boolean;\\n\\tonClickClose: MouseEventHandler<HTMLOrSVGElement>;\\n\\tonClickStart: () => void;\\n\\tonClickEnd: () => void;\\n\\tonClickRefresh: () => void;\\n\\totrState: string;\\n\\tpeerUsername: IUser['username'];\\n};\\n\\nconst OTR = ({ isOnline, onClickClose, onClickStart, onClickEnd, onClickRefresh, otrState, peerUsername }: OTRProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst room = useRoom();\\n\\n\\tconst renderOTRState = (): ReactElement => {\\n\\t\\tswitch (otrState) {\\n\\t\\t\\tcase OtrRoomState.NOT_STARTED:\\n\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t<Button onClick={onClickStart} primary>\\n\\t\\t\\t\\t\\t\\t{t('Start_OTR')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t);\\n\\t\\t\\tcase OtrRoomState.ESTABLISHING:\\n\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t<Box>\\n\\t\\t\\t\\t\\t\\t<Box fontScale='p2'>{t('Please_wait_while_OTR_is_being_established')}</Box>\\n\\t\\t\\t\\t\\t\\t<Box mb={16}>\\n\\t\\t\\t\\t\\t\\t\\t<Throbber />\\n\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t);\\n\\t\\t\\tcase OtrRoomState.ESTABLISHED:\\n\\t\\t\\t\\treturn <OTREstablished onClickEnd={onClickEnd} onClickRefresh={onClickRefresh} />;\\n\\t\\t\\tcase OtrRoomState.DECLINED:\\n\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t<OTRStates\\n\\t\\t\\t\\t\\t\\ttitle={t('OTR_Chat_Declined_Title')}\\n\\t\\t\\t\\t\\t\\tdescription={t('OTR_Chat_Declined_Description', peerUsername || '')}\\n\\t\\t\\t\\t\\t\\ticon='cross'\\n\\t\\t\\t\\t\\t\\tonClickStart={onClickStart}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t);\\n\\t\\t\\tcase OtrRoomState.TIMEOUT:\\n\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t<OTRStates\\n\\t\\t\\t\\t\\t\\ttitle={t('OTR_Chat_Timeout_Title')}\\n\\t\\t\\t\\t\\t\\tdescription={t('OTR_Chat_Timeout_Description', peerUsername || '')}\\n\\t\\t\\t\\t\\t\\ticon='clock'\\n\\t\\t\\t\\t\\t\\tonClickStart={onClickStart}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t);\\n\\t\\t\\tdefault:\\n\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t<OTRStates\\n\\t\\t\\t\\t\\t\\ttitle={t('OTR_Chat_Error_Title')}\\n\\t\\t\\t\\t\\t\\tdescription={t('OTR_Chat_Error_Description')}\\n\\t\\t\\t\\t\\t\\ticon='warning'\\n\\t\\t\\t\\t\\t\\tonClickStart={onClickStart}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t);\\n\\t\\t}\\n\\t};\\n\\n\\tconst renderOTRBody = (): ReactElement => {\\n\\t\\tif (room.encrypted) {\\n\\t\\t\\treturn (\\n\\t\\t\\t\\t<Callout title={t('OTR_not_available')} type='warning'>\\n\\t\\t\\t\\t\\t{t('OTR_not_available_e2ee')}\\n\\t\\t\\t\\t</Callout>\\n\\t\\t\\t);\\n\\t\\t}\\n\\n\\t\\tif (!isOnline) {\\n\\t\\t\\treturn <Box fontScale='p2m'>{t('OTR_is_only_available_when_both_users_are_online')}</Box>;\\n\\t\\t}\\n\\n\\t\\treturn renderOTRState();\\n\\t};\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<ContextualbarHeader>\\n\\t\\t\\t\\t<ContextualbarIcon name='stopwatch' />\\n\\t\\t\\t\\t<ContextualbarTitle>{t('OTR')}</ContextualbarTitle>\\n\\t\\t\\t\\t{onClickClose && <ContextualbarClose onClick={onClickClose} />}\\n\\t\\t\\t</ContextualbarHeader>\\n\\t\\t\\t<ContextualbarScrollableContent p={24} color='default'>\\n\\t\\t\\t\\t<Box fontScale='h4'>{t('Off_the_record_conversation')}</Box>\\n\\t\\t\\t\\t{renderOTRBody()}\\n\\t\\t\\t</ContextualbarScrollableContent>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default OTR;\\n\",null],\"names\":[\"Box\",\"Button\",\"Callout\",\"Throbber\",\"React\",\"useTranslation\",\"OtrRoomState\",\"ContextualbarHeader\",\"ContextualbarIcon\",\"ContextualbarTitle\",\"ContextualbarClose\",\"ContextualbarScrollableContent\",\"useRoom\",\"OTREstablished\",\"OTRStates\",\"module\",\"link\",\"v\",\"exportDefault\",\"_ref\",\"isOnline\",\"onClickClose\",\"onClickStart\",\"onClickEnd\",\"onClickRefresh\",\"otrState\",\"peerUsername\",\"t\",\"_useTranslation\",\"room\",\"createElement\",\"Fragment\",\"name\",\"onClick\",\"p\",\"color\",\"fontScale\",\"encrypted\",\"title\",\"type\",\"renderOTRState\",\"NOT_STARTED\",\"primary\",\"ESTABLISHING\",\"mb\",\"ESTABLISHED\",\"DECLINED\",\"description\",\"icon\",\"TIMEOUT\"],\"mappings\":\"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\"}"}