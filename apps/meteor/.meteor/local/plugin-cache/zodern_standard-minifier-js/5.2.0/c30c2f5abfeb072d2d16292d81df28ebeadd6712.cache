{"code":"function module(e,t,n){let a,s,l,d,i,o,p,r;n.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){a=e}},0),n.export({useCannedResponseList:()=>u}),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){s=e}},0),n.link(\"react\",{useCallback(e){l=e},useEffect(e){d=e},useState(e){i=e}},1),n.link(\"../../hooks/lists/useScrollableRecordList\",{useScrollableRecordList(e){o=e}},2),n.link(\"../../hooks/useComponentDidUpdate\",{useComponentDidUpdate(e){p=e}},3),n.link(\"../../lib/lists/CannedResponseList\",{CannedResponseList(e){r=e}},4);let u=e=>{let[t,n]=i(()=>new r(e)),u=l(()=>n(new r(e)),[e]);p(()=>{e&&u()},[e,u]),d(()=>{t.options!==e&&t.updateFilters(e)},[t,e]);let c=s(\"GET\",\"/v1/canned-responses\"),m=s(\"GET\",\"/v1/livechat/department\"),f=l(async(t,n)=>{let{cannedResponses:s,total:l}=await c(a(a(a(a({},e.filter&&{text:e.filter}),e.type&&[\"global\",\"user\"].find(t=>t===e.type)&&{scope:e.type}),e.type&&![\"global\",\"user\",\"all\"].find(t=>t===e.type)&&{scope:\"department\",departmentId:e.type}),{},{offset:t,count:n+t})),{departments:d}=await m({text:\"\"});return{items:s.map(e=>(e.departmentId&&d.forEach(t=>{e.departmentId===t._id&&(e.departmentName=t.name)}),e._updatedAt=new Date(e._updatedAt),e._createdAt=new Date(e._createdAt),e)),itemCount:l}},[c,m,e.filter,e.type]),{loadMoreItems:k,initialItemCount:b}=o(t,f);return{reload:u,cannedList:t,loadMoreItems:k,initialItemCount:b}}}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/hooks/useCannedResponseList.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useEffect, useState } from 'react';\\n\\nimport { useScrollableRecordList } from '../../hooks/lists/useScrollableRecordList';\\nimport { useComponentDidUpdate } from '../../hooks/useComponentDidUpdate';\\nimport { CannedResponseList } from '../../lib/lists/CannedResponseList';\\n\\nexport const useCannedResponseList = (\\n\\toptions: any,\\n): {\\n\\treload: () => void;\\n\\tcannedList: CannedResponseList;\\n\\tinitialItemCount: number;\\n\\tloadMoreItems: (start: number, end: number) => void;\\n} => {\\n\\tconst [cannedList, setCannedList] = useState(() => new CannedResponseList(options));\\n\\tconst reload = useCallback(() => setCannedList(new CannedResponseList(options)), [options]);\\n\\n\\tuseComponentDidUpdate(() => {\\n\\t\\toptions && reload();\\n\\t}, [options, reload]);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (cannedList.options !== options) {\\n\\t\\t\\tcannedList.updateFilters(options);\\n\\t\\t}\\n\\t}, [cannedList, options]);\\n\\n\\tconst getCannedResponses = useEndpoint('GET', '/v1/canned-responses');\\n\\tconst getDepartments = useEndpoint('GET', '/v1/livechat/department');\\n\\n\\tconst fetchData = useCallback(\\n\\t\\tasync (start, end) => {\\n\\t\\t\\tconst { cannedResponses, total } = await getCannedResponses({\\n\\t\\t\\t\\t...(options.filter && { text: options.filter }),\\n\\t\\t\\t\\t...(options.type && ['global', 'user'].find((option) => option === options.type) && { scope: options.type }),\\n\\t\\t\\t\\t...(options.type &&\\n\\t\\t\\t\\t\\t!['global', 'user', 'all'].find((option) => option === options.type) && {\\n\\t\\t\\t\\t\\t\\tscope: 'department',\\n\\t\\t\\t\\t\\t\\tdepartmentId: options.type,\\n\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\toffset: start,\\n\\t\\t\\t\\tcount: end + start,\\n\\t\\t\\t});\\n\\n\\t\\t\\tconst { departments } = await getDepartments({ text: '' });\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\titems: cannedResponses.map((cannedResponse: any) => {\\n\\t\\t\\t\\t\\tif (cannedResponse.departmentId) {\\n\\t\\t\\t\\t\\t\\tdepartments.forEach((department: any) => {\\n\\t\\t\\t\\t\\t\\t\\tif (cannedResponse.departmentId === department._id) {\\n\\t\\t\\t\\t\\t\\t\\t\\tcannedResponse.departmentName = department.name;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tcannedResponse._updatedAt = new Date(cannedResponse._updatedAt);\\n\\t\\t\\t\\t\\tcannedResponse._createdAt = new Date(cannedResponse._createdAt);\\n\\t\\t\\t\\t\\treturn cannedResponse;\\n\\t\\t\\t\\t}),\\n\\t\\t\\t\\titemCount: total,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t[getCannedResponses, getDepartments, options.filter, options.type],\\n\\t);\\n\\n\\tconst { loadMoreItems, initialItemCount } = useScrollableRecordList(cannedList, fetchData);\\n\\n\\treturn {\\n\\t\\treload,\\n\\t\\tcannedList,\\n\\t\\tloadMoreItems,\\n\\t\\tinitialItemCount,\\n\\t};\\n};\\n\",null],\"names\":[\"_objectSpread\",\"useEndpoint\",\"useCallback\",\"useEffect\",\"useState\",\"useScrollableRecordList\",\"useComponentDidUpdate\",\"CannedResponseList\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useCannedResponseList\",\"options\",\"cannedList\",\"setCannedList\",\"reload\",\"updateFilters\",\"getCannedResponses\",\"getDepartments\",\"fetchData\",\"start\",\"end\",\"cannedResponses\",\"total\",\"filter\",\"text\",\"type\",\"find\",\"option\",\"scope\",\"departmentId\",\"offset\",\"count\",\"departments\",\"items\",\"map\",\"cannedResponse\",\"forEach\",\"department\",\"_id\",\"departmentName\",\"name\",\"_updatedAt\",\"Date\",\"_createdAt\",\"itemCount\",\"loadMoreItems\",\"initialItemCount\"],\"mappings\":\"2BAAAA,EAAuDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9CC,EAAaC,IAAM,CAAA,uCAA2B,CAAAC,QAAAC,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAvDH,EAAOI,MAAE,CAAA,CAAAC,sBAAmBA,IAAAA,CAA2B,GAAAL,EAAAC,IAAA,CAAA,2BAAA,CAAAR,YAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAP,YAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,UAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,4CAAA,CAAAJ,wBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oCAAA,CAAAH,sBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qCAAA,CAAAF,mBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAOhD,IAAME,EACZC,IAOA,GAAM,CAACC,EAAYC,EAAc,CAAGZ,EAAS,IAAM,IAAIG,EAAmBO,IACpEG,EAASf,EAAY,IAAMc,EAAc,IAAIT,EAAmBO,IAAW,CAACA,EAAQ,EAE1FR,EAAsB,KACrBQ,GAAWG,GACZ,EAAG,CAACH,EAASG,EAAO,EAEpBd,EAAU,KACLY,EAAWD,OAAO,GAAKA,GAC1BC,EAAWG,aAAa,CAACJ,EAE3B,EAAG,CAACC,EAAYD,EAAQ,EAExB,IAAMK,EAAqBlB,EAAY,MAAO,wBACxCmB,EAAiBnB,EAAY,MAAO,2BAEpCoB,EAAYnB,EACjB,MAAOoB,EAAOC,KACb,GAAM,CAAEC,gBAAAA,CAAe,CAAEC,MAAAA,CAAAA,CAAO,CAAG,MAAMN,EAAkBnB,EAAAA,EAAAA,EAAAA,EAAA,CAAA,EACtDc,EAAQY,MAAM,EAAI,CAAEC,KAAMb,EAAQY,MAAAA,AAAM,GACxCZ,EAAQc,IAAI,EAAI,CAAC,SAAU,OAAO,CAACC,IAAI,CAAEC,GAAWA,IAAWhB,EAAQc,IAAI,GAAK,CAAEG,MAAOjB,EAAQc,IAAAA,AAAI,GACrGd,EAAQc,IAAI,EACf,CAAC,CAAC,SAAU,OAAQ,MAAM,CAACC,IAAI,CAAEC,GAAWA,IAAWhB,EAAQc,IAAI,GAAK,CACvEG,MAAO,aACPC,aAAclB,EAAQc,IAAAA,GACtB,CAAA,EAAA,CACFK,OAAQX,EACRY,MAAOX,EAAMD,CAAK,IAGb,CAAEa,YAAAA,CAAAA,CAAa,CAAG,MAAMf,EAAe,CAAEO,KAAM,EAAE,GAEvD,MAAO,CACNS,MAAOZ,EAAgBa,GAAG,CAAEC,IACvBA,EAAeN,YAAY,EAC9BG,EAAYI,OAAO,CAAEC,IAChBF,EAAeN,YAAY,GAAKQ,EAAWC,GAAG,EACjDH,CAAAA,EAAeI,cAAc,CAAGF,EAAWG,IAAI,AAAJA,CAE7C,GAEDL,EAAeM,UAAU,CAAG,IAAIC,KAAKP,EAAeM,UAAU,EAC9DN,EAAeQ,UAAU,CAAG,IAAID,KAAKP,EAAeQ,UAAU,EACvDR,IAERS,UAAWtB,EAEb,EACA,CAACN,EAAoBC,EAAgBN,EAAQY,MAAM,CAAEZ,EAAQc,IAAI,CAAC,EAG7D,CAAEoB,cAAAA,CAAa,CAAEC,iBAAAA,CAAAA,CAAkB,CAAG5C,EAAwBU,EAAYM,GAEhF,MAAO,CACNJ,OAAAA,EACAF,WAAAA,EACAiC,cAAAA,EACAC,iBAAAA,EAEF\"}"}