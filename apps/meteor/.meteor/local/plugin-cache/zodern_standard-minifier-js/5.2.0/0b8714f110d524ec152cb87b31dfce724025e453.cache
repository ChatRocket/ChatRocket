{"code":"function module(e,n,t){let i,l,o,r,a,s,c,u,d,m,v,k,g,p,E;let f=[\"current\",\"itemsPerPage\",\"setCurrent\",\"setItemsPerPage\"];t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){i=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue(e){l=e},useMediaQuery(e){o=e}},0),t.link(\"react\",{default(e){r=e},useState(e){a=e},useMemo(e){s=e},useEffect(e){c=e}},1),t.link(\"react-i18next\",{useTranslation(e){u=e}},2),t.link(\"../../../../components/FilterByText\",{default(e){d=e}},3),t.link(\"../../../../components/GenericTable\",{GenericTableHeaderCell(e){m=e}},4),t.link(\"../../../../components/GenericTable/hooks/usePagination\",{usePagination(e){v=e}},5),t.link(\"../../../../components/GenericTable/hooks/useSort\",{useSort(e){k=e}},6),t.link(\"../../../../components/deviceManagement/DeviceManagementTable\",{default(e){g=e}},7),t.link(\"../../../../hooks/useEndpointData\",{useEndpointData(e){p=e}},8),t.link(\"./DeviceManagementAdminRow\",{default(e){E=e}},9);let h={client:\"device.name\",username:\"_user.username\",os:\"device.os.name\",loginAt:\"loginAt\"},y=e=>\"_user\"in e;t.exportDefault(e=>{let{reloadRef:n}=e,{t}=u(),[P,_]=a(\"\"),b=v(),{current:A,itemsPerPage:C,setCurrent:D,setItemsPerPage:T}=b,S=i(b,f),{sortBy:M,sortDirection:w,setSort:x}=k(\"username\"),G=l(s(()=>({filter:P,sort:JSON.stringify({[h[M]]:\"asc\"===w?1:-1}),count:C,offset:P?void 0:A}),[P,C,A,M,w]),500),{value:I,phase:V,error:N,reload:O}=p(\"/v1/sessions/list.all\",{params:G});c(()=>{n.current=O},[n,O]);let R=o(\"(min-width: 1024px)\"),F=s(()=>[r.createElement(m,{key:\"client\",direction:w,active:\"client\"===M,onClick:x,sort:\"client\"},t(\"Client\")),r.createElement(m,{key:\"rcVersion\"},t(\"Version\")),r.createElement(m,{key:\"os\",direction:w,active:\"os\"===M,onClick:x,sort:\"os\"},t(\"OS\")),r.createElement(m,{key:\"username\",direction:w,active:\"username\"===M,onClick:x,sort:\"username\"},t(\"User\")),R&&r.createElement(m,{key:\"loginAt\",direction:w,active:\"loginAt\"===M,onClick:x,sort:\"loginAt\"},t(\"Last_login\")),R&&r.createElement(m,{key:\"_id\"},t(\"Device_ID\")),R&&r.createElement(m,{key:\"ip\"},t(\"IP_Address\")),r.createElement(m,{width:\"5%\",key:\"menu\"})],[t,R,x,w,M]);return r.createElement(r.Fragment,null,r.createElement(d,{placeholder:t(\"Search_Devices_Users\"),onChange:_}),r.createElement(g,{data:I,phase:V,error:N,reload:O,headers:F,renderRow:e=>{var n,t,i,l,o,a;return r.createElement(E,{key:e._id,_id:e._id,username:y(e)?null===(n=e._user)||void 0===n?void 0:n.username:\"\",ip:e.ip,deviceName:null==e?void 0:null===(t=e.device)||void 0===t?void 0:t.name,deviceType:null==e?void 0:null===(i=e.device)||void 0===i?void 0:i.type,deviceOSName:null==e?void 0:null===(l=e.device)||void 0===l?void 0:null===(o=l.os)||void 0===o?void 0:o.name,rcVersion:null==e?void 0:null===(a=e.device)||void 0===a?void 0:a.version,loginAt:e.loginAt,onReload:O})},current:A,itemsPerPage:C,setCurrent:D,setItemsPerPage:T,paginationProps:S}))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/deviceManagement/DeviceManagementAdminTable/DeviceManagementAdminTable.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { DeviceManagementPopulatedSession, DeviceManagementSession, Serialized } from '@rocket.chat/core-typings';\\nimport { useDebouncedValue, useMediaQuery } from '@rocket.chat/fuselage-hooks';\\nimport type { ReactElement, MutableRefObject } from 'react';\\nimport React, { useState, useMemo, useEffect } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport FilterByText from '../../../../components/FilterByText';\\nimport { GenericTableHeaderCell } from '../../../../components/GenericTable';\\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\\nimport DeviceManagementTable from '../../../../components/deviceManagement/DeviceManagementTable';\\nimport { useEndpointData } from '../../../../hooks/useEndpointData';\\nimport DeviceManagementAdminRow from './DeviceManagementAdminRow';\\n\\nconst sortMapping = {\\n\\tclient: 'device.name',\\n\\tusername: '_user.username',\\n\\tos: 'device.os.name',\\n\\tloginAt: 'loginAt',\\n};\\n\\nconst isSessionPopulatedSession = (\\n\\tsession: Serialized<DeviceManagementPopulatedSession | DeviceManagementSession>,\\n): session is Serialized<DeviceManagementPopulatedSession> => '_user' in session;\\n\\nconst DeviceManagementAdminTable = ({ reloadRef }: { reloadRef: MutableRefObject<() => void> }): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst [text, setText] = useState('');\\n\\tconst { current, itemsPerPage, setCurrent, setItemsPerPage, ...paginationProps } = usePagination();\\n\\tconst { sortBy, sortDirection, setSort } = useSort<'client' | 'os' | 'username' | 'loginAt'>('username');\\n\\n\\tconst query = useDebouncedValue(\\n\\t\\tuseMemo(\\n\\t\\t\\t() => ({\\n\\t\\t\\t\\tfilter: text,\\n\\t\\t\\t\\tsort: JSON.stringify({ [sortMapping[sortBy]]: sortDirection === 'asc' ? 1 : -1 }),\\n\\t\\t\\t\\tcount: itemsPerPage,\\n\\t\\t\\t\\toffset: text ? undefined : current,\\n\\t\\t\\t}),\\n\\t\\t\\t[text, itemsPerPage, current, sortBy, sortDirection],\\n\\t\\t),\\n\\t\\t500,\\n\\t);\\n\\n\\tconst { value: data, phase, error, reload } = useEndpointData('/v1/sessions/list.all', { params: query });\\n\\n\\tuseEffect(() => {\\n\\t\\treloadRef.current = reload;\\n\\t}, [reloadRef, reload]);\\n\\n\\tconst mediaQuery = useMediaQuery('(min-width: 1024px)');\\n\\n\\tconst headers = useMemo(\\n\\t\\t() => [\\n\\t\\t\\t<GenericTableHeaderCell key='client' direction={sortDirection} active={sortBy === 'client'} onClick={setSort} sort='client'>\\n\\t\\t\\t\\t{t('Client')}\\n\\t\\t\\t</GenericTableHeaderCell>,\\n\\t\\t\\t<GenericTableHeaderCell key='rcVersion'>{t('Version')}</GenericTableHeaderCell>,\\n\\t\\t\\t<GenericTableHeaderCell key='os' direction={sortDirection} active={sortBy === 'os'} onClick={setSort} sort='os'>\\n\\t\\t\\t\\t{t('OS')}\\n\\t\\t\\t</GenericTableHeaderCell>,\\n\\t\\t\\t<GenericTableHeaderCell key='username' direction={sortDirection} active={sortBy === 'username'} onClick={setSort} sort='username'>\\n\\t\\t\\t\\t{t('User')}\\n\\t\\t\\t</GenericTableHeaderCell>,\\n\\t\\t\\tmediaQuery && (\\n\\t\\t\\t\\t<GenericTableHeaderCell key='loginAt' direction={sortDirection} active={sortBy === 'loginAt'} onClick={setSort} sort='loginAt'>\\n\\t\\t\\t\\t\\t{t('Last_login')}\\n\\t\\t\\t\\t</GenericTableHeaderCell>\\n\\t\\t\\t),\\n\\t\\t\\tmediaQuery && <GenericTableHeaderCell key='_id'>{t('Device_ID')}</GenericTableHeaderCell>,\\n\\t\\t\\tmediaQuery && <GenericTableHeaderCell key='ip'>{t('IP_Address')}</GenericTableHeaderCell>,\\n\\t\\t\\t<GenericTableHeaderCell width='5%' key='menu' />,\\n\\t\\t],\\n\\t\\t[t, mediaQuery, setSort, sortDirection, sortBy],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<FilterByText placeholder={t('Search_Devices_Users')} onChange={setText} />\\n\\t\\t\\t<DeviceManagementTable\\n\\t\\t\\t\\tdata={data}\\n\\t\\t\\t\\tphase={phase}\\n\\t\\t\\t\\terror={error}\\n\\t\\t\\t\\treload={reload}\\n\\t\\t\\t\\theaders={headers}\\n\\t\\t\\t\\trenderRow={(session): ReactElement => (\\n\\t\\t\\t\\t\\t<DeviceManagementAdminRow\\n\\t\\t\\t\\t\\t\\tkey={session._id}\\n\\t\\t\\t\\t\\t\\t_id={session._id}\\n\\t\\t\\t\\t\\t\\tusername={isSessionPopulatedSession(session) ? session._user?.username : ''}\\n\\t\\t\\t\\t\\t\\tip={session.ip}\\n\\t\\t\\t\\t\\t\\tdeviceName={session?.device?.name}\\n\\t\\t\\t\\t\\t\\tdeviceType={session?.device?.type}\\n\\t\\t\\t\\t\\t\\tdeviceOSName={session?.device?.os?.name}\\n\\t\\t\\t\\t\\t\\trcVersion={session?.device?.version}\\n\\t\\t\\t\\t\\t\\tloginAt={session.loginAt}\\n\\t\\t\\t\\t\\t\\tonReload={reload}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\tcurrent={current}\\n\\t\\t\\t\\titemsPerPage={itemsPerPage}\\n\\t\\t\\t\\tsetCurrent={setCurrent}\\n\\t\\t\\t\\tsetItemsPerPage={setItemsPerPage}\\n\\t\\t\\t\\tpaginationProps={paginationProps}\\n\\t\\t\\t/>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default DeviceManagementAdminTable;\\n\",null],\"names\":[\"_objectWithoutProperties\",\"useDebouncedValue\",\"useMediaQuery\",\"React\",\"useState\",\"useMemo\",\"useEffect\",\"useTranslation\",\"FilterByText\",\"GenericTableHeaderCell\",\"usePagination\",\"useSort\",\"DeviceManagementTable\",\"useEndpointData\",\"DeviceManagementAdminRow\",\"module\",\"link\",\"default\",\"v\",\"sortMapping\",\"client\",\"username\",\"os\",\"loginAt\",\"isSessionPopulatedSession\",\"session\",\"exportDefault\",\"_ref\",\"reloadRef\",\"t\",\"text\",\"setText\",\"_usePagination\",\"current\",\"itemsPerPage\",\"setCurrent\",\"setItemsPerPage\",\"paginationProps\",\"_excluded\",\"sortBy\",\"sortDirection\",\"setSort\",\"query\",\"filter\",\"sort\",\"JSON\",\"stringify\",\"count\",\"offset\",\"undefined\",\"value\",\"data\",\"phase\",\"error\",\"reload\",\"params\",\"mediaQuery\",\"headers\",\"createElement\",\"key\",\"direction\",\"active\",\"onClick\",\"width\",\"Fragment\",\"placeholder\",\"onChange\",\"renderRow\",\"_session$_user\",\"_session$device\",\"_session$device2\",\"_session$device3\",\"_session$device3$os\",\"_session$device4\",\"_id\",\"_user\",\"ip\",\"deviceName\",\"device\",\"name\",\"deviceType\",\"type\",\"deviceOSName\",\"rcVersion\",\"version\",\"onReload\"],\"mappings\":\"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\"}"}