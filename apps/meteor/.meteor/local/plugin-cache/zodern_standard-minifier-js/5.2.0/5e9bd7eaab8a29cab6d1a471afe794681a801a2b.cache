{"code":"function module(e,i,t){let n,s,a,l,r,o,c;t.link(\"@rocket.chat/core-typings\",{isE2EEMessage(e){n=e}},0),t.link(\"meteor/meteor\",{Meteor(e){s=e}},1),t.link(\"../../../app/ui-utils/client\",{MessageAction(e){a=e}},2),t.link(\"../../../app/utils/lib/i18n\",{t(e){l=e}},3),t.link(\"../../lib/getPermaLink\",{getPermaLink(e){r=e}},4),t.link(\"../../lib/toast\",{dispatchToastMessage(e){o=e}},5),t.link(\"../../lib/utils/messageArgs\",{messageArgs(e){c=e}},6),s.startup(()=>{a.addButton({id:\"permalink-pinned\",icon:\"permalink\",label:\"Copy_link\",context:[\"pinned\"],async action(e,i){try{let{message:e=c(this).msg}=i,t=await r(e._id);navigator.clipboard.writeText(t),o({type:\"success\",message:l(\"Copied\")})}catch(e){o({type:\"error\",message:e})}},condition(e){let{subscription:i}=e;return!!i},order:5,group:\"menu\",disabled(e){let{message:i}=e;return n(i)}})})}","map":"{\"version\":3,\"sources\":[\"client/startup/actionButtons/permalinkPinned.ts\",\"<anon>\"],\"sourcesContent\":[\"import { isE2EEMessage } from '@rocket.chat/core-typings';\\nimport { Meteor } from 'meteor/meteor';\\n\\nimport { MessageAction } from '../../../app/ui-utils/client';\\nimport { t } from '../../../app/utils/lib/i18n';\\nimport { getPermaLink } from '../../lib/getPermaLink';\\nimport { dispatchToastMessage } from '../../lib/toast';\\nimport { messageArgs } from '../../lib/utils/messageArgs';\\n\\nMeteor.startup(() => {\\n\\tMessageAction.addButton({\\n\\t\\tid: 'permalink-pinned',\\n\\t\\ticon: 'permalink',\\n\\t\\tlabel: 'Copy_link',\\n\\t\\tcontext: ['pinned'],\\n\\t\\tasync action(_, props) {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst { message = messageArgs(this).msg } = props;\\n\\t\\t\\t\\tconst permalink = await getPermaLink(message._id);\\n\\t\\t\\t\\tnavigator.clipboard.writeText(permalink);\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Copied') });\\n\\t\\t\\t} catch (e) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: e });\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tcondition({ subscription }) {\\n\\t\\t\\treturn !!subscription;\\n\\t\\t},\\n\\t\\torder: 5,\\n\\t\\tgroup: 'menu',\\n\\t\\tdisabled({ message }) {\\n\\t\\t\\treturn isE2EEMessage(message);\\n\\t\\t},\\n\\t});\\n});\\n\",null],\"names\":[\"isE2EEMessage\",\"Meteor\",\"MessageAction\",\"t\",\"getPermaLink\",\"dispatchToastMessage\",\"messageArgs\",\"module\",\"link\",\"v\",\"startup\",\"addButton\",\"id\",\"icon\",\"label\",\"context\",\"action\",\"_\",\"props\",\"message\",\"msg\",\"permalink\",\"_id\",\"navigator\",\"clipboard\",\"writeText\",\"type\",\"e\",\"condition\",\"_ref\",\"subscription\",\"order\",\"group\",\"disabled\",\"_ref2\"],\"mappings\":\"2BAAAA,EAA0DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAjDC,EAAeC,IAAA,CAAM,4BAA4B,CAAAR,cAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gBAAA,CAAAP,OAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,+BAAA,CAAAN,cAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,8BAAA,CAAAL,EAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,yBAAA,CAAAJ,aAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kBAAA,CAAAH,qBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,8BAAA,CAAAF,YAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAS1DR,EAAOS,OAAO,CAAC,KACdR,EAAcS,SAAS,CAAC,CACvBC,GAAI,mBACJC,KAAM,YACNC,MAAO,YACPC,QAAS,CAAC,SAAS,CACnB,MAAMC,OAAOC,CAAC,CAAEC,CAAK,EACpB,GAAI,CACH,GAAM,CAAEC,QAAAA,EAAUb,EAAY,IAAI,EAAEc,GAAAA,CAAK,CAAGF,EACtCG,EAAY,MAAMjB,EAAae,EAAQG,GAAG,EAChDC,UAAUC,SAAS,CAACC,SAAS,CAACJ,GAC9BhB,EAAqB,CAAEqB,KAAM,UAAWP,QAAShB,EAAE,SAAS,EAC7D,CAAE,MAAOwB,EAAG,CACXtB,EAAqB,CAAEqB,KAAM,QAASP,QAASQ,CAAC,EACjD,CACD,EACAC,UAASC,CAAA,EAAiB,GAAhB,CAAEC,aAAAA,CAAAA,CAAc,CAAAD,EACzB,MAAO,CAAC,CAACC,CACV,EACAC,MAAO,EACPC,MAAO,OACPC,SAAQC,CAAA,EAAY,GAAX,CAAEf,QAAAA,CAAAA,CAAS,CAAAe,EACnB,OAAOlC,EAAcmB,EACtB,GAEF\"}"}