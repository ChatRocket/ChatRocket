{"code":"function module(e,n,t){var o,r,a,i,s,u,c,l,d,f,_;t.link(\"@babel/runtime/regenerator\",{default:function(e){o=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){r=e},useRouteParameter:function(e){a=e},useRouter:function(e){i=e},useSetModal:function(e){s=e},useToastMessageDispatch:function(e){u=e}},0),t.link(\"@tanstack/react-query\",{useMutation:function(e){c=e},useQueryClient:function(e){l=e}},1),t.link(\"react\",{default:function(e){d=e}},2),t.link(\"react-i18next\",{useTranslation:function(e){f=e}},3),t.link(\"../../../../components/GenericModal\",{default:function(e){_=e}},4),t.exportDefault(function(e){var n=f().t,t=r(\"POST\",\"/v1/moderation.user.deleteReportedMessages\"),m=u(),g=s(),p=i(),M=a(\"tab\"),y=l(),k=c({mutationFn:t,onError:function(e){m({type:\"error\",message:e})},onSuccess:function(){m({type:\"success\",message:n(\"Moderation_Messages_deleted\")})}}),v=function(){g(d.createElement(_,{confirmText:n(\"Moderation_Dismiss_and_delete\"),title:n(\"Moderation_Delete_all_messages\"),variant:\"danger\",onConfirm:function(){return o.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.awrap(k.mutateAsync({userId:e}));case 2:y.invalidateQueries({queryKey:[\"moderation\",\"msgReports\",\"fetchAll\"]}),g(),p.navigate(\"/admin/moderation/\"+M);case 5:case\"end\":return n.stop()}},null,null,null,Promise)},onCancel:function(){return g()}},n(\"Moderation_Are_you_sure_you_want_to_delete_all_reported_messages_from_this_user\")))};return{id:\"deleteAll\",content:n(\"Moderation_Delete_all_messages\"),icon:\"trash\",onClick:function(){return v()}}})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/moderation/hooks/useDeleteMessagesAction.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { GenericMenuItemProps } from '@rocket.chat/ui-client';\\nimport { useEndpoint, useRouteParameter, useRouter, useSetModal, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport GenericModal from '../../../../components/GenericModal';\\n\\nconst useDeleteMessagesAction = (userId: string): GenericMenuItemProps => {\\n\\tconst { t } = useTranslation();\\n\\tconst deleteMessages = useEndpoint('POST', '/v1/moderation.user.deleteReportedMessages');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst setModal = useSetModal();\\n\\tconst router = useRouter();\\n\\tconst tab = useRouteParameter('tab');\\n\\tconst queryClient = useQueryClient();\\n\\n\\tconst handleDeleteMessages = useMutation({\\n\\t\\tmutationFn: deleteMessages,\\n\\t\\tonError: (error) => {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t},\\n\\t\\tonSuccess: () => {\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Moderation_Messages_deleted') });\\n\\t\\t},\\n\\t});\\n\\n\\tconst onDeleteAll = async () => {\\n\\t\\tawait handleDeleteMessages.mutateAsync({ userId });\\n\\t\\tqueryClient.invalidateQueries({ queryKey: ['moderation', 'msgReports', 'fetchAll'] });\\n\\t\\tsetModal();\\n\\t\\trouter.navigate(`/admin/moderation/${tab}`);\\n\\t};\\n\\n\\tconst confirmDeletMessages = (): void => {\\n\\t\\tsetModal(\\n\\t\\t\\t<GenericModal\\n\\t\\t\\t\\tconfirmText={t('Moderation_Dismiss_and_delete')}\\n\\t\\t\\t\\ttitle={t('Moderation_Delete_all_messages')}\\n\\t\\t\\t\\tvariant='danger'\\n\\t\\t\\t\\tonConfirm={() => onDeleteAll()}\\n\\t\\t\\t\\tonCancel={() => setModal()}\\n\\t\\t\\t>\\n\\t\\t\\t\\t{t('Moderation_Are_you_sure_you_want_to_delete_all_reported_messages_from_this_user')}\\n\\t\\t\\t</GenericModal>,\\n\\t\\t);\\n\\t};\\n\\n\\treturn {\\n\\t\\tid: 'deleteAll',\\n\\t\\tcontent: t('Moderation_Delete_all_messages'),\\n\\t\\ticon: 'trash',\\n\\t\\tonClick: () => confirmDeletMessages(),\\n\\t};\\n};\\n\\nexport default useDeleteMessagesAction;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"useEndpoint\",\"useRouteParameter\",\"useRouter\",\"useSetModal\",\"useToastMessageDispatch\",\"useMutation\",\"useQueryClient\",\"React\",\"useTranslation\",\"GenericModal\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"userId\",\"t\",\"_useTranslation\",\"deleteMessages\",\"dispatchToastMessage\",\"setModal\",\"router\",\"tab\",\"queryClient\",\"handleDeleteMessages\",\"mutationFn\",\"onError\",\"error\",\"type\",\"message\",\"onSuccess\",\"confirmDeletMessages\",\"createElement\",\"confirmText\",\"title\",\"variant\",\"onConfirm\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"mutateAsync\",\"invalidateQueries\",\"queryKey\",\"navigate\",\"stop\",\"Promise\",\"onCancel\",\"id\",\"content\",\"icon\",\"onClick\"],\"mappings\":\"uBAQA,IAPAA,EAAAC,EAASC,EAAaC,EAAmBC,EAAWC,EAAuEC,EAAAC,EAAAC,EAAAC,EAAAC,EAArGC,EAAAC,IAAA,CAAA,6BAA2C,CAAAC,QAAA,SAAAC,CAAA,EAAAd,EAA+Bc,CAAA,CAAA,EAAA,GAA/BH,EAAAC,IAAyB,CAAA,2BAAM,CAAAX,YAA2B,SAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,kBAAA,SAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,UAAA,SAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,YAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,wBAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAN,YAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,eAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAH,eAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sCAAA,CAAA,QAAA,SAAAE,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA3HH,EAAOI,aAAa,CAOY,SAACC,CAAc,EAC9C,IAAQC,EAACC,AAAKT,IAANQ,CAAC,CACHE,EAAiBlB,EAAY,OAAQ,8CACrCmB,EAAuBf,IACvBgB,EAAWjB,IACXkB,EAASnB,IACToB,EAAMrB,EAAkB,OACxBsB,EAAcjB,IAEdkB,EAAuBnB,EAAY,CACxCoB,WAAYP,EACZQ,QAAS,SAACC,CAAK,EACdR,EAAqB,CAAES,KAAM,QAASC,QAASF,CAAK,EACrD,EACAG,UAAW,WACVX,EAAqB,CAAES,KAAM,UAAWC,QAASb,EAAE,8BAA8B,EAClF,IAUKe,EAAuB,WAC5BX,EACCb,EAAAyB,aAAA,CAACvB,EAAY,CACZwB,YAAajB,EAAE,iCACfkB,MAAOlB,EAAE,kCACTmB,QAAQ,SACRC,UAAW,WAAA,OAbMrC,EAAAsC,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAAzC,EAAA0C,KAAA,CACbjB,EAAqBkB,WAAW,CAAC,CAAE3B,OAAAA,CAAM,GAAG,MAAA,EAClDQ,EAAYoB,iBAAiB,CAAC,CAAEC,SAAU,CAAC,aAAc,aAAc,WAAU,AAAC,GAClFxB,IACAC,EAAOwB,QAAQ,CAAA,qBAAsBvB,EAAO,MAAA,EAAA,IAAA,MAAA,OAAAgB,EAAAQ,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QASZ,EAC9BC,SAAU,WAAA,OAAM5B,GAAU,CAAC,EAE1BJ,EAAE,oFAGN,EAEA,MAAO,CACNiC,GAAI,YACJC,QAASlC,EAAE,kCACXmC,KAAM,QACNC,QAAS,WAAA,OAAMrB,GAAsB,EAEvC\"}"}