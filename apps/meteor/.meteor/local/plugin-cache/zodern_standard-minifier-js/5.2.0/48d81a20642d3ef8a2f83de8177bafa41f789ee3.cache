{"code":"function module(t,i,n){n.link(\"@babel/runtime/helpers/inheritsLoose\",{default:function(t){e=t}},0),n.link(\"@rocket.chat/emitter\",{Emitter:function(t){o=t}},0),n.link(\"dompurify\",{default:function(t){r=t}},1),n.link(\"../../../../../app/utils/client/lib/SDKClient\",{sdk:function(t){s=t}},2);var e,o,r,s,c=new(function(t){function i(){var i;return(i=t.call(this)||this).icons=new Map,i}return e(i,t),i.prototype.get=function(t,i){var n=this;if(t&&i){if(this.icons.has(t+\"-\"+i))return t+\"-\"+i;s.rest.send(\"/apps/public/\"+t+\"/get-sidebar-icon?icon=\"+i,\"GET\").then(function(e){e.text().then(function(e){n.icons.set(t+\"-\"+i,r.sanitize(e,{FORBID_ATTR:[\"id\"],NAMESPACE:\"http://www.w3.org/2000/svg\",USE_PROFILES:{svg:!0,svgFilters:!0}}).replace(\"<svg\",'<symbol id=\"'+t+\"-\"+i+'\"').replace(\"</svg>\",\"</symbol>\")),n.emit(\"change\"),n.emit(t+\"-\"+i)})}).catch(function(t){console.error(\"error from get-sidebar-icon\",t)})}},i}(o));n.exportDefault(c)}","map":"{\"version\":3,\"sources\":[\"client/components/RoomIcon/OmnichannelRoomIcon/lib/OmnichannelRoomIconManager.ts\",\"<anon>\"],\"sourcesContent\":[\"import { Emitter } from '@rocket.chat/emitter';\\nimport DOMPurify from 'dompurify';\\n\\nimport { sdk } from '../../../../../app/utils/client/lib/SDKClient';\\n\\nconst OmnichannelRoomIconManager = new (class extends Emitter {\\n\\ticons = new Map<string, string>();\\n\\n\\tconstructor() {\\n\\t\\tsuper();\\n\\t}\\n\\n\\tpublic get(appId: string, icon: string): string | undefined {\\n\\t\\tif (!appId || !icon) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (this.icons.has(`${appId}-${icon}`)) {\\n\\t\\t\\treturn `${appId}-${icon}`;\\n\\t\\t}\\n\\t\\t// TODO: update the apps icons to send JSON instead of a string. This will allow us to use APIClient.get()\\n\\n\\t\\tsdk.rest\\n\\t\\t\\t.send(`/apps/public/${appId}/get-sidebar-icon?icon=${icon}`, 'GET')\\n\\t\\t\\t.then((response: any) => {\\n\\t\\t\\t\\tresponse.text().then((text: string) => {\\n\\t\\t\\t\\t\\tthis.icons.set(\\n\\t\\t\\t\\t\\t\\t`${appId}-${icon}`,\\n\\t\\t\\t\\t\\t\\tDOMPurify.sanitize(text, {\\n\\t\\t\\t\\t\\t\\t\\tFORBID_ATTR: ['id'],\\n\\t\\t\\t\\t\\t\\t\\tNAMESPACE: 'http://www.w3.org/2000/svg',\\n\\t\\t\\t\\t\\t\\t\\tUSE_PROFILES: { svg: true, svgFilters: true },\\n\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t\\t.replace(`<svg`, `<symbol id=\\\"${appId}-${icon}\\\"`)\\n\\t\\t\\t\\t\\t\\t\\t.replace(`</svg>`, '</symbol>'),\\n\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\tthis.emit('change');\\n\\t\\t\\t\\t\\tthis.emit(`${appId}-${icon}`);\\n\\t\\t\\t\\t});\\n\\t\\t\\t})\\n\\t\\t\\t.catch((error: any) => {\\n\\t\\t\\t\\tconsole.error('error from get-sidebar-icon', error);\\n\\t\\t\\t});\\n\\t}\\n})();\\n\\nexport default OmnichannelRoomIconManager;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_inheritsLoose\",\"Emitter\",\"DOMPurify\",\"sdk\",\"OmnichannelRoomIconManager\",\"_Emitter\",\"_class\",\"_this\",\"call\",\"icons\",\"Map\",\"_proto\",\"prototype\",\"get\",\"appId\",\"icon\",\"_this2\",\"has\",\"rest\",\"send\",\"then\",\"response\",\"text\",\"set\",\"sanitize\",\"FORBID_ATTR\",\"NAMESPACE\",\"USE_PROFILES\",\"svg\",\"svgFilters\",\"replace\",\"emit\",\"catch\",\"error\",\"console\",\"exportDefault\"],\"mappings\":\"uBAAkBA,EAAMC,IAAA,CAAA,uCAAuB,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAtCH,EAASC,IAAA,CAAM,uBAAuB,CAAAI,QAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,YAAA,CAAA,QAAA,SAAAE,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gDAAA,CAAAM,IAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAK/C,IALAC,EAAAC,EAA+CC,EAAAC,EAKzCC,EAA6B,GAAA,CAAA,SAAAC,CAAA,EAGlC,SAAAC,IAAA,IAAAC,EAFiC,MAGxBA,AAARA,CAAAA,EAAAF,EAAAG,IAAA,CAAA,IAAK,GAAE,IAAA,EAHRC,KAAK,CAAG,IAAIC,IAAqBH,CAIjC,CAiCC,OAjCAP,EAAAM,EAAAD,GAAAM,AAAAL,EAAAM,SAAA,CAEMC,GAAG,CAAH,SAAIC,CAAa,CAAEC,CAAY,EAAA,IAAAC,EAAA,IAAA,CACrC,GAAI,AAACF,GAAUC,GAIf,GAAI,IAAI,CAACN,KAAK,CAACQ,GAAG,CAAIH,EAAK,IAAIC,GAC9B,OAAUD,EAAK,IAAIC,EAIpBZ,EAAIe,IAAI,CACNC,IAAI,CAAA,gBAAiBL,EAAK,0BAA0BC,EAAQ,OAC5DK,IAAI,CAAC,SAACC,CAAa,EACnBA,EAASC,IAAI,GAAGF,IAAI,CAAC,SAACE,CAAY,EACjCN,EAAKP,KAAK,CAACc,GAAG,CACVT,EAAK,IAAIC,EACZb,EAAUsB,QAAQ,CAACF,EAAM,CACxBG,YAAa,CAAC,KAAK,CACnBC,UAAW,6BACXC,aAAc,CAAEC,IAAK,CAAA,EAAMC,WAAY,CAAA,CAAI,IAE1CC,OAAO,CAAA,OAAA,eAAwBhB,EAAK,IAAIC,EAAI,KAC5Ce,OAAO,CAAA,SAAW,cAErBd,EAAKe,IAAI,CAAC,UACVf,EAAKe,IAAI,CAAIjB,EAAK,IAAIC,EACvB,EACD,GACCiB,KAAK,CAAC,SAACC,CAAU,EACjBC,QAAQD,KAAK,CAAC,8BAA+BA,EAC9C,GACF,EAAC3B,CAAA,EAtCoDL,EAAO,EAL7DL,EAAOuC,aAAW,CA8CH/B\"}"}