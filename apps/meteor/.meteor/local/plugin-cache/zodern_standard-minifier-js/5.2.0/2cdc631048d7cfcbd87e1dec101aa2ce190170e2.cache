{"code":"function module(e,t,l){let n,a,r,i,o,s,c,u,d,m,f,E,h,_,p,k,g,F;l.link(\"@babel/runtime/helpers/extends\",{default(e){n=e}},0),l.link(\"@rocket.chat/fuselage\",{Box(e){a=e},FieldGroup(e){r=e},TextInput(e){i=e},Field(e){o=e},FieldLabel(e){s=e},FieldRow(e){c=e},FieldError(e){u=e},Button(e){d=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useAutoFocus(e){m=e},useUniqueId(e){f=e}},1),l.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){E=e},useEndpoint(e){h=e}},2),l.link(\"react\",{default(e){_=e},useState(e){p=e}},3),l.link(\"react-i18next\",{useTranslation(e){k=e}},4),l.link(\"../GenericModal\",{default(e){g=e}},5),l.link(\"./TwoFactorModal\",{Method(e){F=e}},6),l.exportDefault(e=>{let{onConfirm:t,onClose:l,emailOrUsername:w,invalidAttempt:x}=e,y=E(),{t:C}=k(),[b,v]=p(\"\"),T=m(),M=h(\"POST\",\"/v1/users.2fa.sendEmailCode\"),D=async()=>{try{await M({emailOrUsername:w}),y({type:\"success\",message:C(\"Email_sent\")})}catch(e){y({type:\"error\",message:C(\"error-email-send-failed\",{message:e})})}},I=e=>{e.preventDefault(),t(b,F.EMAIL)},S=f();return _.createElement(g,{wrapperFunction:e=>_.createElement(a,n({is:\"form\",onSubmit:I},e)),onCancel:l,confirmText:C(\"Verify\"),title:C(\"Enter_authentication_code\"),onClose:l,variant:\"warning\",confirmDisabled:!b,tagline:C(\"Email_two-factor_authentication\"),icon:null},_.createElement(r,null,_.createElement(o,null,_.createElement(s,{alignSelf:\"stretch\",htmlFor:S},C(\"Enter_the_code_we_just_emailed_you\")),_.createElement(c,null,_.createElement(i,{id:S,ref:T,value:b,onChange:e=>{let{currentTarget:t}=e;v(t.value)},placeholder:C(\"Enter_code_here\")})),x&&_.createElement(u,null,C(\"Invalid_password\")))),_.createElement(d,{display:\"flex\",justifyContent:\"end\",onClick:D,small:!0,mbs:24},C(\"Cloud_resend_email\")))})}","map":"{\"version\":3,\"sources\":[\"client/components/TwoFactorModal/TwoFactorEmailModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, FieldGroup, TextInput, Field, FieldLabel, FieldRow, FieldError, Button } from '@rocket.chat/fuselage';\\nimport { useAutoFocus, useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ChangeEvent, SyntheticEvent } from 'react';\\nimport React, { useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport GenericModal from '../GenericModal';\\nimport type { OnConfirm } from './TwoFactorModal';\\nimport { Method } from './TwoFactorModal';\\n\\ntype TwoFactorEmailModalProps = {\\n\\tonConfirm: OnConfirm;\\n\\tonClose: () => void;\\n\\temailOrUsername: string;\\n\\tinvalidAttempt?: boolean;\\n};\\n\\nconst TwoFactorEmailModal = ({ onConfirm, onClose, emailOrUsername, invalidAttempt }: TwoFactorEmailModalProps): ReactElement => {\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst { t } = useTranslation();\\n\\tconst [code, setCode] = useState<string>('');\\n\\tconst ref = useAutoFocus<HTMLInputElement>();\\n\\n\\tconst sendEmailCode = useEndpoint('POST', '/v1/users.2fa.sendEmailCode');\\n\\n\\tconst onClickResendCode = async (): Promise<void> => {\\n\\t\\ttry {\\n\\t\\t\\tawait sendEmailCode({ emailOrUsername });\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Email_sent') });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\tmessage: t('error-email-send-failed', { message: error }),\\n\\t\\t\\t});\\n\\t\\t}\\n\\t};\\n\\n\\tconst onConfirmEmailCode = (e: SyntheticEvent): void => {\\n\\t\\te.preventDefault();\\n\\t\\tonConfirm(code, Method.EMAIL);\\n\\t};\\n\\n\\tconst onChange = ({ currentTarget }: ChangeEvent<HTMLInputElement>): void => {\\n\\t\\tsetCode(currentTarget.value);\\n\\t};\\n\\n\\tconst id = useUniqueId();\\n\\n\\treturn (\\n\\t\\t<GenericModal\\n\\t\\t\\twrapperFunction={(props) => <Box is='form' onSubmit={onConfirmEmailCode} {...props} />}\\n\\t\\t\\tonCancel={onClose}\\n\\t\\t\\tconfirmText={t('Verify')}\\n\\t\\t\\ttitle={t('Enter_authentication_code')}\\n\\t\\t\\tonClose={onClose}\\n\\t\\t\\tvariant='warning'\\n\\t\\t\\tconfirmDisabled={!code}\\n\\t\\t\\ttagline={t('Email_two-factor_authentication')}\\n\\t\\t\\ticon={null}\\n\\t\\t>\\n\\t\\t\\t<FieldGroup>\\n\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t<FieldLabel alignSelf='stretch' htmlFor={id}>\\n\\t\\t\\t\\t\\t\\t{t('Enter_the_code_we_just_emailed_you')}\\n\\t\\t\\t\\t\\t</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<TextInput id={id} ref={ref} value={code} onChange={onChange} placeholder={t('Enter_code_here')} />\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t{invalidAttempt && <FieldError>{t('Invalid_password')}</FieldError>}\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t</FieldGroup>\\n\\t\\t\\t<Button display='flex' justifyContent='end' onClick={onClickResendCode} small mbs={24}>\\n\\t\\t\\t\\t{t('Cloud_resend_email')}\\n\\t\\t\\t</Button>\\n\\t\\t</GenericModal>\\n\\t);\\n};\\n\\nexport default TwoFactorEmailModal;\\n\",null],\"names\":[\"_extends\",\"Box\",\"FieldGroup\",\"TextInput\",\"Field\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"Button\",\"useAutoFocus\",\"useUniqueId\",\"useToastMessageDispatch\",\"useEndpoint\",\"React\",\"useState\",\"useTranslation\",\"GenericModal\",\"Method\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"onConfirm\",\"onClose\",\"emailOrUsername\",\"invalidAttempt\",\"dispatchToastMessage\",\"t\",\"code\",\"setCode\",\"ref\",\"sendEmailCode\",\"onClickResendCode\",\"type\",\"message\",\"error\",\"onConfirmEmailCode\",\"e\",\"preventDefault\",\"EMAIL\",\"id\",\"createElement\",\"wrapperFunction\",\"props\",\"is\",\"onSubmit\",\"onCancel\",\"confirmText\",\"title\",\"variant\",\"confirmDisabled\",\"tagline\",\"icon\",\"alignSelf\",\"htmlFor\",\"value\",\"onChange\",\"_ref2\",\"currentTarget\",\"placeholder\",\"display\",\"justifyContent\",\"onClick\",\"small\",\"mbs\"],\"mappings\":\"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\"}"}