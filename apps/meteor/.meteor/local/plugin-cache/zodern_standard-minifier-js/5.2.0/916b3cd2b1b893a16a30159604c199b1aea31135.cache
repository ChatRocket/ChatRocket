{"code":"function module(e,n,t){var o,r,s,u,a,i,c,l,f;t.link(\"@babel/runtime/regenerator\",{default:function(e){o=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){r=e},useSetModal:function(e){s=e},useToastMessageDispatch:function(e){u=e}},0),t.link(\"@tanstack/react-query\",{useMutation:function(e){a=e},useQueryClient:function(e){i=e}},1),t.link(\"react\",{default:function(e){c=e}},2),t.link(\"react-i18next\",{useTranslation:function(e){l=e}},3),t.link(\"../../../../components/GenericModal\",{default:function(e){f=e}},4),t.exportDefault(function(e,n,t){var d=l().t,m=r(\"POST\",\"/v1/chat.delete\"),_=r(\"POST\",\"/v1/moderation.dismissReports\"),p=u(),y=s(),g=i(),M=a({mutationFn:m,onError:function(e){p({type:\"error\",message:e}),y()},onSuccess:function(){return o.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.awrap(k.mutateAsync({msgId:e}));case 2:case\"end\":return n.stop()}},null,null,null,Promise)}}),k=a({mutationFn:_,onError:function(e){p({type:\"error\",message:e})},onSuccess:function(){p({type:\"success\",message:d(\"Moderation_Message_deleted\")})},onSettled:function(){t(),g.invalidateQueries({queryKey:[\"moderation\",\"msgReports\"]}),y()}});return function(){y(c.createElement(f,{confirmText:d(\"Moderation_Dismiss_and_delete\"),title:d(\"Moderation_Delete_this_message\"),variant:\"danger\",onConfirm:function(){return o.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.awrap(M.mutateAsync({msgId:e,roomId:n,asUser:!0}));case 2:case\"end\":return t.stop()}},null,null,null,Promise)},onCancel:function(){return y()}},d(\"Moderation_Are_you_sure_you_want_to_delete_this_message\")))}})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/moderation/hooks/useDeleteMessage.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useEndpoint, useSetModal, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport GenericModal from '../../../../components/GenericModal';\\n\\nconst useDeleteMessage = (mid: string, rid: string, onChange: () => void) => {\\n\\tconst { t } = useTranslation();\\n\\tconst deleteMessage = useEndpoint('POST', '/v1/chat.delete');\\n\\tconst dismissMessage = useEndpoint('POST', '/v1/moderation.dismissReports');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst setModal = useSetModal();\\n\\tconst queryClient = useQueryClient();\\n\\n\\tconst handleDeleteMessages = useMutation({\\n\\t\\tmutationFn: deleteMessage,\\n\\t\\tonError: (error) => {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\tsetModal();\\n\\t\\t},\\n\\t\\tonSuccess: async () => {\\n\\t\\t\\tawait handleDismissMessage.mutateAsync({ msgId: mid });\\n\\t\\t},\\n\\t});\\n\\n\\tconst handleDismissMessage = useMutation({\\n\\t\\tmutationFn: dismissMessage,\\n\\t\\tonError: (error) => {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t},\\n\\t\\tonSuccess: () => {\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Moderation_Message_deleted') });\\n\\t\\t},\\n\\t\\tonSettled: () => {\\n\\t\\t\\tonChange();\\n\\t\\t\\tqueryClient.invalidateQueries({ queryKey: ['moderation', 'msgReports'] });\\n\\t\\t\\tsetModal();\\n\\t\\t},\\n\\t});\\n\\n\\tconst onDeleteAll = async () => {\\n\\t\\tawait handleDeleteMessages.mutateAsync({ msgId: mid, roomId: rid, asUser: true });\\n\\t};\\n\\n\\tconst confirmDeletMessage = (): void => {\\n\\t\\tsetModal(\\n\\t\\t\\t<GenericModal\\n\\t\\t\\t\\tconfirmText={t('Moderation_Dismiss_and_delete')}\\n\\t\\t\\t\\ttitle={t('Moderation_Delete_this_message')}\\n\\t\\t\\t\\tvariant='danger'\\n\\t\\t\\t\\tonConfirm={() => onDeleteAll()}\\n\\t\\t\\t\\tonCancel={() => setModal()}\\n\\t\\t\\t>\\n\\t\\t\\t\\t{t('Moderation_Are_you_sure_you_want_to_delete_this_message')}\\n\\t\\t\\t</GenericModal>,\\n\\t\\t);\\n\\t};\\n\\n\\treturn confirmDeletMessage;\\n};\\n\\nexport default useDeleteMessage;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"useEndpoint\",\"useSetModal\",\"useToastMessageDispatch\",\"useMutation\",\"useQueryClient\",\"React\",\"useTranslation\",\"GenericModal\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"mid\",\"rid\",\"onChange\",\"t\",\"_useTranslation\",\"deleteMessage\",\"dismissMessage\",\"dispatchToastMessage\",\"setModal\",\"queryClient\",\"handleDeleteMessages\",\"mutationFn\",\"onError\",\"error\",\"type\",\"message\",\"onSuccess\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"handleDismissMessage\",\"mutateAsync\",\"msgId\",\"stop\",\"Promise\",\"onSettled\",\"invalidateQueries\",\"queryKey\",\"createElement\",\"confirmText\",\"title\",\"variant\",\"onConfirm\",\"_context2\",\"roomId\",\"asUser\",\"onCancel\"],\"mappings\":\"uBAOA,IAPAA,EAAAC,EAASC,EAAaC,EAAuEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAvEC,EAAAC,IAAa,CAAA,6BAAyB,CAAMC,QAAA,SAAAC,CAAA,EAAAZ,EAA2BY,CAAA,CAAA,EAAA,GAA1DH,EAAuBC,IAAE,CAAA,2BAAM,CAA0BT,YAAC,SAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,YAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,wBAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAN,YAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,eAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAH,eAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sCAAA,CAAA,QAAA,SAAAE,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA7FH,EAAOI,aAAa,CAOK,SAACC,CAAW,CAAEC,CAAW,CAAEC,CAAoB,EACvE,IAAQC,EAACC,AAAKX,IAANU,CAAC,CACHE,EAAgBlB,EAAY,OAAQ,mBACpCmB,EAAiBnB,EAAY,OAAQ,iCACrCoB,EAAuBlB,IACvBmB,EAAWpB,IACXqB,EAAclB,IAEdmB,EAAuBpB,EAAY,CACxCqB,WAAYN,EACZO,QAAS,SAACC,CAAK,EACdN,EAAqB,CAAEO,KAAM,QAASC,QAASF,CAAK,GACpDL,GACD,EACAQ,UAAW,WAAA,OAAA9B,EAAA+B,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAAlC,EAAAmC,KAAA,CACJC,EAAqBC,WAAW,CAAC,CAAEC,MAAOxB,CAAG,GAAG,MAAA,EAAA,IAAA,MAAA,OAAAkB,EAAAO,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,IAIlDJ,EAAuBhC,EAAY,CACxCqB,WAAYL,EACZM,QAAS,SAACC,CAAK,EACdN,EAAqB,CAAEO,KAAM,QAASC,QAASF,CAAK,EACrD,EACAG,UAAW,WACVT,EAAqB,CAAEO,KAAM,UAAWC,QAASZ,EAAE,6BAA6B,EACjF,EACAwB,UAAW,WACVzB,IACAO,EAAYmB,iBAAiB,CAAC,CAAEC,SAAU,CAAC,aAAc,aAAY,AAAC,GACtErB,GACD,IAqBD,OAd4B,WAC3BA,EACChB,EAAAsC,aAAA,CAACpC,EAAY,CACZqC,YAAa5B,EAAE,iCACf6B,MAAO7B,EAAE,kCACT8B,QAAQ,SACRC,UAAW,WAAA,OAVMhD,EAAA+B,KAAA,CAAA,SAAAkB,CAAA,EAAA,OAAA,OAAAA,EAAAhB,IAAA,CAAAgB,EAAAf,IAAA,EAAA,KAAA,EAAA,OAAAe,EAAAf,IAAA,CAAA,EAAAlC,EAAAmC,KAAA,CACbX,EAAqBa,WAAW,CAAC,CAAEC,MAAOxB,EAAKoC,OAAQnC,EAAKoC,OAAQ,CAAA,CAAI,GAAG,MAAA,EAAA,IAAA,MAAA,OAAAF,EAAAV,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QASjD,EAC9BY,SAAU,WAAA,OAAM9B,GAAU,CAAC,EAE1BL,EAAE,4DAGN,CAGD\"}"}