{"code":"function module(e,l,i){let n,s,o,t,r;i.export({useMessageRoles:()=>u}),i.link(\"react\",{useCallback(e){n=e}},0),i.link(\"../../../../../app/models/client\",{RoomRoles(e){s=e},UserRoles(e){o=e},Roles(e){t=e}},1),i.link(\"../../../../hooks/useReactiveValue\",{useReactiveValue(e){r=e}},2);let u=(e,l,i)=>r(n(()=>{if(!i||!e)return[];let n=o.findOne(e),r=s.findOne({\"u._id\":e,rid:l}),u=[...(null==n?void 0:n.roles)||[],...(null==r?void 0:r.roles)||[]],d=t.find({_id:{$in:u},description:{$exists:!0,$ne:\"\"}},{fields:{description:1}}).fetch();return d.map(e=>{let{description:l}=e;return l})},[e,l,i]))}","map":"{\"version\":3,\"sources\":[\"client/components/message/header/hooks/useMessageRoles.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, IUser } from '@rocket.chat/core-typings';\\nimport { useCallback } from 'react';\\n\\nimport { RoomRoles, UserRoles, Roles } from '../../../../../app/models/client';\\nimport { useReactiveValue } from '../../../../hooks/useReactiveValue';\\n\\nexport const useMessageRoles = (userId: IUser['_id'] | undefined, roomId: IRoom['_id'], shouldLoadRoles: boolean): Array<string> =>\\n\\tuseReactiveValue(\\n\\t\\tuseCallback(() => {\\n\\t\\t\\tif (!shouldLoadRoles || !userId) {\\n\\t\\t\\t\\treturn [];\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst userRoles = UserRoles.findOne(userId);\\n\\t\\t\\tconst roomRoles = RoomRoles.findOne({\\n\\t\\t\\t\\t'u._id': userId,\\n\\t\\t\\t\\t'rid': roomId,\\n\\t\\t\\t});\\n\\n\\t\\t\\tconst roles = [...(userRoles?.roles || []), ...(roomRoles?.roles || [])];\\n\\n\\t\\t\\tconst result = Roles.find(\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t_id: {\\n\\t\\t\\t\\t\\t\\t$in: roles,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tdescription: {\\n\\t\\t\\t\\t\\t\\t$exists: true,\\n\\t\\t\\t\\t\\t\\t$ne: '',\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tfields: {\\n\\t\\t\\t\\t\\t\\tdescription: 1,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t).fetch();\\n\\t\\t\\treturn result.map(({ description }) => description);\\n\\t\\t}, [userId, roomId, shouldLoadRoles]),\\n\\t);\\n\",null],\"names\":[\"useCallback\",\"RoomRoles\",\"UserRoles\",\"Roles\",\"useReactiveValue\",\"module\",\"export\",\"useMessageRoles\",\"link\",\"v\",\"userId\",\"roomId\",\"shouldLoadRoles\",\"userRoles\",\"findOne\",\"roomRoles\",\"roles\",\"result\",\"find\",\"_id\",\"$in\",\"description\",\"$exists\",\"$ne\",\"fields\",\"fetch\",\"map\",\"_ref\"],\"mappings\":\"2BACoCA,EAAAC,EAAAC,EAAAC,EAAAC,EAApCC,EAAOC,MAAE,CAAA,CAAAC,gBAAmBA,IAAOA,CAAC,GAAAF,EAAAG,IAAA,CAAA,QAAA,CAAAR,YAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,mCAAA,CAAAP,UAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,UAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,MAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,qCAAA,CAAAJ,iBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAK7B,IAAMF,EAAkBA,CAACG,EAAkCC,EAAsBC,IACvFR,EACCJ,EAAY,KACX,GAAI,CAACY,GAAmB,CAACF,EACxB,MAAO,EAAE,CAGV,IAAMG,EAAYX,EAAUY,OAAO,CAACJ,GAC9BK,EAAYd,EAAUa,OAAO,CAAC,CACnC,QAASJ,EACT,IAAOC,IAGFK,EAAQ,IAAK,AAAAH,CAAAA,MAAAA,EAAS,KAAA,EAATA,EAAWG,KAAK,AAALA,GAAS,EAAE,IAAO,AAAAD,CAAAA,MAAAA,EAAS,KAAA,EAATA,EAAWC,KAAK,AAALA,GAAS,EAAE,CAAE,CAElEC,EAASd,EAAMe,IAAI,CACxB,CACCC,IAAK,CACJC,IAAKJ,GAENK,YAAa,CACZC,QAAS,CAAA,EACTC,IAAK,KAGP,CACCC,OAAQ,CACPH,YAAa,KAGdI,KAAK,GACP,OAAOR,EAAOS,GAAG,CAACC,IAAA,GAAC,CAAEN,YAAAA,CAAAA,CAAa,CAAAM,EAAA,OAAKN,CAAW,EACnD,EAAG,CAACX,EAAQC,EAAQC,EAAgB\"}"}