{"code":"function module(e,t,a){let s,i,n,o,l,u,c,r,d,m,g,b,k,p,M,v,h,f,y,A,E,x,C,T,_,j,w,S,q,R,V,L,P;let D=[\"message\",\"messageContext\",\"room\",\"subscription\",\"onChangeMenuVisibility\"];a.link(\"@babel/runtime/helpers/extends\",{default(e){s=e}},0),a.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){i=e}},1),a.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){n=e}},2),a.link(\"@react-aria/toolbar\",{useToolbar(e){o=e}},0),a.link(\"@rocket.chat/core-typings\",{isThreadMessage(e){l=e},isRoomFederated(e){u=e},isVideoConfMessage(e){c=e},isE2EEMessage(e){r=e}},1),a.link(\"@rocket.chat/fuselage\",{MessageToolbar(e){d=e},MessageToolbarItem(e){m=e}},2),a.link(\"@rocket.chat/ui-client\",{useFeaturePreview(e){g=e}},3),a.link(\"@rocket.chat/ui-contexts\",{useUser(e){b=e},useSettings(e){k=e},useTranslation(e){p=e},useMethod(e){M=e},useLayoutHiddenActions(e){v=e}},4),a.link(\"@tanstack/react-query\",{useQuery(e){h=e}},5),a.link(\"react\",{default(e){f=e},memo(e){y=e},useMemo(e){A=e},useRef(e){E=e}},6),a.link(\"../../../../app/ui-utils/client/lib/MessageAction\",{MessageAction(e){x=e}},7),a.link(\"../../../contexts/EmojiPickerContext\",{useEmojiPickerData(e){C=e}},8),a.link(\"../../../hooks/useAppActionButtons\",{useMessageActionAppsActionButtons(e){T=e}},9),a.link(\"../../../hooks/useEmbeddedLayout\",{useEmbeddedLayout(e){_=e}},10),a.link(\"../../../views/composer/EmojiPicker/EmojiElement\",{default(e){j=e}},11),a.link(\"../../../views/room/MessageList/contexts/SelectedMessagesContext\",{useIsSelecting(e){w=e}},12),a.link(\"../../../views/room/MessageList/hooks/useAutoTranslate\",{useAutoTranslate(e){S=e}},13),a.link(\"../../../views/room/contexts/ChatContext\",{useChat(e){q=e}},14),a.link(\"../../../views/room/contexts/RoomToolboxContext\",{useRoomToolbox(e){R=e}},15),a.link(\"./MessageActionMenu\",{default(e){V=e}},16),a.link(\"./MessageToolbarStarsActionMenu\",{default(e){L=e}},17),a.link(\"./useWebDAVMessageAction\",{useWebDAVMessageAction(e){P=e}},18);let B=(e,t,a)=>a||(c(e)?\"videoconf\":u(t)?\"federated\":l(e)?\"threads\":\"message\");a.exportDefault(y(e=>{var t,a,l,u,c,y;let{message:W,messageContext:F,room:I,subscription:H,onChangeMenuVisibility:O}=e,Q=n(e,D),U=p(),z=null!==(t=b())&&void 0!==t?t:void 0,G=k(),J=_(),K=E(null),{toolbarProps:N}=o(Q,K),X=g(\"quickReactions\"),Y=M(\"setReaction\"),Z=B(W,I,F),$=A(()=>Object.fromEntries(G.map(e=>[e._id,e.value])),[G]),ee=q(),{quickReactions:et,addRecentEmoji:ea}=C(),es=T(Z),ei=T(Z,\"ai\"),{messageToolbox:en}=v();P();let eo=h([\"rooms\",I._id,\"messages\",W._id,\"actions\"],async()=>{let e={message:W,room:I,user:z,subscription:H,settings:$,chat:ee},t=await x.getAll(e,Z,\"message\"),a=await x.getAll(e,Z,\"menu\");return{message:t.filter(e=>!en.includes(e.id)),menu:a.filter(e=>!(J&&\"reply-directly\"===e.id)&&!en.includes(e.id))}}),el=R(),eu=w(),ec=S(H);if(eu||!(null!==(a=eo.data)&&void 0!==a&&a.message.length)&&!(null!==(l=eo.data)&&void 0!==l&&l.menu.length))return null;let er=null===(u=eo.data)||void 0===u?void 0:u.message.find(e=>{let{id:t}=e;return\"reaction-message\"===t}),ed=e=>{Y(\":\".concat(e,\":\"),W._id),ea(e)};return f.createElement(d,s({ref:K},N,{\"aria-label\":U(\"Message_actions\")},Q),X&&er&&et.slice(0,3).map(e=>{let{emoji:t,image:a}=e;return f.createElement(j,{small:!0,key:t,title:t,emoji:t,image:a,onClick:()=>ed(t)})}),eo.isSuccess&&eo.data.message.map(e=>{var t,a;return f.createElement(m,{onClick:t=>e.action(t,{message:W,tabbar:el,room:I,chat:ee,autoTranslateOptions:ec}),key:e.id,icon:e.icon,title:null!=e&&null!==(t=e.disabled)&&void 0!==t&&t.call(e,{message:W,room:I,user:z,subscription:H,settings:$,chat:ee,context:Z})?U(\"Action_not_available_encrypted_content\",{action:U(e.label)}):U(e.label),\"data-qa-id\":e.label,\"data-qa-type\":\"message-action-menu\",disabled:null==e?void 0:null===(a=e.disabled)||void 0===a?void 0:a.call(e,{message:W,room:I,user:z,subscription:H,settings:$,chat:ee,context:Z})})}),ei.data&&ei.data.length>0&&f.createElement(L,{options:ei.data.map(e=>i(i({},e),{},{action:t=>e.action(t,{message:W,tabbar:el,room:I,chat:ee,autoTranslateOptions:ec})})),onChangeMenuVisibility:O,\"data-qa-type\":\"message-action-stars-menu-options\",context:{message:W,room:I,user:z,subscription:H,settings:$,chat:ee,context:Z},isMessageEncrypted:r(W)}),eo.isSuccess&&eo.data.menu.length>0&&f.createElement(V,{options:[...null===(c=eo.data)||void 0===c?void 0:c.menu,...null!==(y=es.data)&&void 0!==y?y:[]].filter(Boolean).map(e=>i(i({},e),{},{action:t=>e.action(t,{message:W,tabbar:el,room:I,chat:ee,autoTranslateOptions:ec})})),onChangeMenuVisibility:O,\"data-qa-type\":\"message-action-menu-options\",context:{message:W,room:I,user:z,subscription:H,settings:$,chat:ee,context:Z},isMessageEncrypted:r(W)}))}))}","map":"{\"version\":3,\"sources\":[\"client/components/message/toolbar/MessageToolbar.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useToolbar } from '@react-aria/toolbar';\\nimport type { IMessage, IRoom, ISubscription, ITranslatedMessage } from '@rocket.chat/core-typings';\\nimport { isThreadMessage, isRoomFederated, isVideoConfMessage, isE2EEMessage } from '@rocket.chat/core-typings';\\nimport { MessageToolbar as FuselageMessageToolbar, MessageToolbarItem } from '@rocket.chat/fuselage';\\nimport { useFeaturePreview } from '@rocket.chat/ui-client';\\nimport { useUser, useSettings, useTranslation, useMethod, useLayoutHiddenActions } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ComponentProps, ReactElement } from 'react';\\nimport React, { memo, useMemo, useRef } from 'react';\\n\\nimport type { MessageActionContext } from '../../../../app/ui-utils/client/lib/MessageAction';\\nimport { MessageAction } from '../../../../app/ui-utils/client/lib/MessageAction';\\nimport { useEmojiPickerData } from '../../../contexts/EmojiPickerContext';\\nimport { useMessageActionAppsActionButtons } from '../../../hooks/useAppActionButtons';\\nimport { useEmbeddedLayout } from '../../../hooks/useEmbeddedLayout';\\nimport EmojiElement from '../../../views/composer/EmojiPicker/EmojiElement';\\nimport { useIsSelecting } from '../../../views/room/MessageList/contexts/SelectedMessagesContext';\\nimport { useAutoTranslate } from '../../../views/room/MessageList/hooks/useAutoTranslate';\\nimport { useChat } from '../../../views/room/contexts/ChatContext';\\nimport { useRoomToolbox } from '../../../views/room/contexts/RoomToolboxContext';\\nimport MessageActionMenu from './MessageActionMenu';\\nimport MessageToolbarStarsActionMenu from './MessageToolbarStarsActionMenu';\\nimport { useWebDAVMessageAction } from './useWebDAVMessageAction';\\n\\nconst getMessageContext = (message: IMessage, room: IRoom, context?: MessageActionContext): MessageActionContext => {\\n\\tif (context) {\\n\\t\\treturn context;\\n\\t}\\n\\n\\tif (isVideoConfMessage(message)) {\\n\\t\\treturn 'videoconf';\\n\\t}\\n\\n\\tif (isRoomFederated(room)) {\\n\\t\\treturn 'federated';\\n\\t}\\n\\n\\tif (isThreadMessage(message)) {\\n\\t\\treturn 'threads';\\n\\t}\\n\\n\\treturn 'message';\\n};\\n\\ntype MessageToolbarProps = {\\n\\tmessage: IMessage & Partial<ITranslatedMessage>;\\n\\tmessageContext?: MessageActionContext;\\n\\troom: IRoom;\\n\\tsubscription?: ISubscription;\\n\\tonChangeMenuVisibility: (visible: boolean) => void;\\n} & ComponentProps<typeof FuselageMessageToolbar>;\\n\\nconst MessageToolbar = ({\\n\\tmessage,\\n\\tmessageContext,\\n\\troom,\\n\\tsubscription,\\n\\tonChangeMenuVisibility,\\n\\t...props\\n}: MessageToolbarProps): ReactElement | null => {\\n\\tconst t = useTranslation();\\n\\tconst user = useUser() ?? undefined;\\n\\tconst settings = useSettings();\\n\\tconst isLayoutEmbedded = useEmbeddedLayout();\\n\\n\\tconst toolbarRef = useRef(null);\\n\\tconst { toolbarProps } = useToolbar(props, toolbarRef);\\n\\n\\tconst quickReactionsEnabled = useFeaturePreview('quickReactions');\\n\\n\\tconst setReaction = useMethod('setReaction');\\n\\n\\tconst context = getMessageContext(message, room, messageContext);\\n\\n\\tconst mapSettings = useMemo(() => Object.fromEntries(settings.map((setting) => [setting._id, setting.value])), [settings]);\\n\\n\\tconst chat = useChat();\\n\\tconst { quickReactions, addRecentEmoji } = useEmojiPickerData();\\n\\n\\tconst actionButtonApps = useMessageActionAppsActionButtons(context);\\n\\n\\tconst starsAction = useMessageActionAppsActionButtons(context, 'ai');\\n\\n\\tconst { messageToolbox: hiddenActions } = useLayoutHiddenActions();\\n\\n\\t// TODO: move this to another place\\n\\tuseWebDAVMessageAction();\\n\\n\\tconst actionsQueryResult = useQuery(['rooms', room._id, 'messages', message._id, 'actions'] as const, async () => {\\n\\t\\tconst props = { message, room, user, subscription, settings: mapSettings, chat };\\n\\n\\t\\tconst toolboxItems = await MessageAction.getAll(props, context, 'message');\\n\\t\\tconst menuItems = await MessageAction.getAll(props, context, 'menu');\\n\\n\\t\\treturn {\\n\\t\\t\\tmessage: toolboxItems.filter((action) => !hiddenActions.includes(action.id)),\\n\\t\\t\\tmenu: menuItems.filter((action) => !(isLayoutEmbedded && action.id === 'reply-directly') && !hiddenActions.includes(action.id)),\\n\\t\\t};\\n\\t});\\n\\n\\tconst toolbox = useRoomToolbox();\\n\\n\\tconst selecting = useIsSelecting();\\n\\n\\tconst autoTranslateOptions = useAutoTranslate(subscription);\\n\\n\\tif (selecting || (!actionsQueryResult.data?.message.length && !actionsQueryResult.data?.menu.length)) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\tconst isReactionAllowed = actionsQueryResult.data?.message.find(({ id }) => id === 'reaction-message');\\n\\n\\tconst handleSetReaction = (emoji: string) => {\\n\\t\\tsetReaction(`:${emoji}:`, message._id);\\n\\t\\taddRecentEmoji(emoji);\\n\\t};\\n\\n\\treturn (\\n\\t\\t<FuselageMessageToolbar ref={toolbarRef} {...toolbarProps} aria-label={t('Message_actions')} {...props}>\\n\\t\\t\\t{quickReactionsEnabled &&\\n\\t\\t\\t\\tisReactionAllowed &&\\n\\t\\t\\t\\tquickReactions.slice(0, 3).map(({ emoji, image }) => {\\n\\t\\t\\t\\t\\treturn <EmojiElement small key={emoji} title={emoji} emoji={emoji} image={image} onClick={() => handleSetReaction(emoji)} />;\\n\\t\\t\\t\\t})}\\n\\t\\t\\t{actionsQueryResult.isSuccess &&\\n\\t\\t\\t\\tactionsQueryResult.data.message.map((action) => (\\n\\t\\t\\t\\t\\t<MessageToolbarItem\\n\\t\\t\\t\\t\\t\\tonClick={(e): void => action.action(e, { message, tabbar: toolbox, room, chat, autoTranslateOptions })}\\n\\t\\t\\t\\t\\t\\tkey={action.id}\\n\\t\\t\\t\\t\\t\\ticon={action.icon}\\n\\t\\t\\t\\t\\t\\ttitle={\\n\\t\\t\\t\\t\\t\\t\\taction?.disabled?.({ message, room, user, subscription, settings: mapSettings, chat, context })\\n\\t\\t\\t\\t\\t\\t\\t\\t? t('Action_not_available_encrypted_content', { action: t(action.label) })\\n\\t\\t\\t\\t\\t\\t\\t\\t: t(action.label)\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\tdata-qa-id={action.label}\\n\\t\\t\\t\\t\\t\\tdata-qa-type='message-action-menu'\\n\\t\\t\\t\\t\\t\\tdisabled={action?.disabled?.({ message, room, user, subscription, settings: mapSettings, chat, context })}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t))}\\n\\t\\t\\t{starsAction.data && starsAction.data.length > 0 && (\\n\\t\\t\\t\\t<MessageToolbarStarsActionMenu\\n\\t\\t\\t\\t\\toptions={starsAction.data.map((action) => ({\\n\\t\\t\\t\\t\\t\\t...action,\\n\\t\\t\\t\\t\\t\\taction: (e) => action.action(e, { message, tabbar: toolbox, room, chat, autoTranslateOptions }),\\n\\t\\t\\t\\t\\t}))}\\n\\t\\t\\t\\t\\tonChangeMenuVisibility={onChangeMenuVisibility}\\n\\t\\t\\t\\t\\tdata-qa-type='message-action-stars-menu-options'\\n\\t\\t\\t\\t\\tcontext={{ message, room, user, subscription, settings: mapSettings, chat, context }}\\n\\t\\t\\t\\t\\tisMessageEncrypted={isE2EEMessage(message)}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\n\\t\\t\\t{actionsQueryResult.isSuccess && actionsQueryResult.data.menu.length > 0 && (\\n\\t\\t\\t\\t<MessageActionMenu\\n\\t\\t\\t\\t\\toptions={[...actionsQueryResult.data?.menu, ...(actionButtonApps.data ?? [])].filter(Boolean).map((action) => ({\\n\\t\\t\\t\\t\\t\\t...action,\\n\\t\\t\\t\\t\\t\\taction: (e) => action.action(e, { message, tabbar: toolbox, room, chat, autoTranslateOptions }),\\n\\t\\t\\t\\t\\t}))}\\n\\t\\t\\t\\t\\tonChangeMenuVisibility={onChangeMenuVisibility}\\n\\t\\t\\t\\t\\tdata-qa-type='message-action-menu-options'\\n\\t\\t\\t\\t\\tcontext={{ message, room, user, subscription, settings: mapSettings, chat, context }}\\n\\t\\t\\t\\t\\tisMessageEncrypted={isE2EEMessage(message)}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\t\\t</FuselageMessageToolbar>\\n\\t);\\n};\\n\\nexport default memo(MessageToolbar);\\n\",null],\"names\":[\"_extends\",\"_objectSpread\",\"_objectWithoutProperties\",\"useToolbar\",\"isThreadMessage\",\"isRoomFederated\",\"isVideoConfMessage\",\"isE2EEMessage\",\"FuselageMessageToolbar\",\"MessageToolbarItem\",\"useFeaturePreview\",\"useUser\",\"useSettings\",\"useTranslation\",\"useMethod\",\"useLayoutHiddenActions\",\"useQuery\",\"React\",\"memo\",\"useMemo\",\"useRef\",\"MessageAction\",\"useEmojiPickerData\",\"useMessageActionAppsActionButtons\",\"useEmbeddedLayout\",\"EmojiElement\",\"useIsSelecting\",\"useAutoTranslate\",\"useChat\",\"useRoomToolbox\",\"MessageActionMenu\",\"MessageToolbarStarsActionMenu\",\"useWebDAVMessageAction\",\"module\",\"link\",\"default\",\"v\",\"MessageToolbar\",\"getMessageContext\",\"message\",\"room\",\"context\",\"exportDefault\",\"_ref\",\"_useUser\",\"_actionsQueryResult$d\",\"_actionsQueryResult$d2\",\"_actionsQueryResult$d3\",\"_actionsQueryResult$d4\",\"_actionButtonApps$dat\",\"messageContext\",\"subscription\",\"onChangeMenuVisibility\",\"props\",\"_excluded\",\"t\",\"user\",\"undefined\",\"settings\",\"isLayoutEmbedded\",\"toolbarRef\",\"toolbarProps\",\"quickReactionsEnabled\",\"setReaction\",\"mapSettings\",\"Object\",\"fromEntries\",\"map\",\"setting\",\"_id\",\"value\",\"chat\",\"quickReactions\",\"addRecentEmoji\",\"actionButtonApps\",\"starsAction\",\"messageToolbox\",\"hiddenActions\",\"actionsQueryResult\",\"toolboxItems\",\"getAll\",\"menuItems\",\"filter\",\"action\",\"includes\",\"id\",\"menu\",\"toolbox\",\"selecting\",\"autoTranslateOptions\",\"data\",\"length\",\"isReactionAllowed\",\"find\",\"_ref2\",\"handleSetReaction\",\"emoji\",\"concat\",\"createElement\",\"ref\",\"slice\",\"_ref3\",\"image\",\"small\",\"key\",\"title\",\"onClick\",\"isSuccess\",\"_action$disabled\",\"_action$disabled2\",\"e\",\"tabbar\",\"icon\",\"disabled\",\"call\",\"label\",\"options\",\"isMessageEncrypted\",\"Boolean\"],\"mappings\":\"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\"}"}