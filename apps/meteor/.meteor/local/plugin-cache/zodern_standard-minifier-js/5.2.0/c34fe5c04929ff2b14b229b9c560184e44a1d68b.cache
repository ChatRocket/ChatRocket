{"code":"function module(e,t,a){let r,n;a.export({useSidebarListNavigation:()=>i}),a.link(\"@react-aria/focus\",{useFocusManager(e){r=e}},0),a.link(\"react\",{useCallback(e){n=e}},1);let s=e=>e.classList.contains(\"rcx-sidebar-v2-item\"),c=e=>e.classList.contains(\"rcx-sidebar-v2-collapse-group__bar\"),o=e=>e.classList.contains(\"rcx-sidebar-v2-item__menu\"),i=()=>{let e=r(),t=n(t=>{let a=null;t&&(t.addEventListener(\"keydown\",t=>{t.target&&(s(t.target)||c(t.target))&&(\"Tab\"===t.key&&(t.preventDefault(),t.stopPropagation(),t.shiftKey?e.focusPrevious({accept:e=>!s(e)&&!o(e)&&!c(e)}):o(t.target)?e.focusNext({accept:e=>!s(e)&&!o(e)&&!c(e)}):e.focusNext({accept:e=>!s(e)&&!c(e)})),(\"ArrowUp\"===t.key||\"ArrowDown\"===t.key)&&(t.preventDefault(),t.stopPropagation(),\"ArrowUp\"===t.key&&e.focusPrevious({accept:e=>s(e)||c(e)}),\"ArrowDown\"===t.key&&e.focusNext({accept:e=>s(e)||c(e)}),a=document.activeElement))}),t.addEventListener(\"blur\",e=>{var t;null!==(t=e.relatedTarget)&&void 0!==t&&t.classList.contains(\"focus-visible\")&&e.currentTarget instanceof HTMLElement&&e.relatedTarget instanceof HTMLElement&&(e.currentTarget.contains(e.relatedTarget)||a||(a=e.target))},{capture:!0}),t.addEventListener(\"focus\",e=>{var r,n;let s=null===(r=e.target)||void 0===r?void 0:r.classList.contains(\"focus-visible\");s&&e.currentTarget instanceof HTMLElement&&e.relatedTarget instanceof HTMLElement&&a&&!e.currentTarget.contains(e.relatedTarget)&&t.contains(e.target)&&(null===(n=a)||void 0===n||n.focus())},{capture:!0}))},[e]);return{sidebarListRef:t}}}","map":"{\"version\":3,\"sources\":[\"client/sidebarv2/RoomList/useSidebarListNavigation.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useFocusManager } from '@react-aria/focus';\\nimport { useCallback } from 'react';\\n\\nconst isListItem = (node: EventTarget) => (node as HTMLElement).classList.contains('rcx-sidebar-v2-item');\\nconst isCollapseGroup = (node: EventTarget) => (node as HTMLElement).classList.contains('rcx-sidebar-v2-collapse-group__bar');\\nconst isListItemMenu = (node: EventTarget) => (node as HTMLElement).classList.contains('rcx-sidebar-v2-item__menu');\\n\\n/**\\n * Custom hook to provide the sidebar navigation by keyboard.\\n * @param ref - A ref to the message list DOM element.\\n */\\nexport const useSidebarListNavigation = () => {\\n\\tconst sidebarListFocusManager = useFocusManager();\\n\\n\\tconst sidebarListRef = useCallback(\\n\\t\\t(node: HTMLElement | null) => {\\n\\t\\t\\tlet lastItemFocused: HTMLElement | null = null;\\n\\n\\t\\t\\tif (!node) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tnode.addEventListener('keydown', (e) => {\\n\\t\\t\\t\\tif (!e.target) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (!isListItem(e.target) && !isCollapseGroup(e.target)) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (e.key === 'Tab') {\\n\\t\\t\\t\\t\\te.preventDefault();\\n\\t\\t\\t\\t\\te.stopPropagation();\\n\\n\\t\\t\\t\\t\\tif (e.shiftKey) {\\n\\t\\t\\t\\t\\t\\tsidebarListFocusManager.focusPrevious({\\n\\t\\t\\t\\t\\t\\t\\taccept: (node) => !isListItem(node) && !isListItemMenu(node) && !isCollapseGroup(node),\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t} else if (isListItemMenu(e.target)) {\\n\\t\\t\\t\\t\\t\\tsidebarListFocusManager.focusNext({\\n\\t\\t\\t\\t\\t\\t\\taccept: (node) => !isListItem(node) && !isListItemMenu(node) && !isCollapseGroup(node),\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tsidebarListFocusManager.focusNext({\\n\\t\\t\\t\\t\\t\\t\\taccept: (node) => !isListItem(node) && !isCollapseGroup(node),\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (e.key === 'ArrowUp' || e.key === 'ArrowDown') {\\n\\t\\t\\t\\t\\te.preventDefault();\\n\\t\\t\\t\\t\\te.stopPropagation();\\n\\n\\t\\t\\t\\t\\tif (e.key === 'ArrowUp') {\\n\\t\\t\\t\\t\\t\\tsidebarListFocusManager.focusPrevious({ accept: (node) => isListItem(node) || isCollapseGroup(node) });\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tif (e.key === 'ArrowDown') {\\n\\t\\t\\t\\t\\t\\tsidebarListFocusManager.focusNext({ accept: (node) => isListItem(node) || isCollapseGroup(node) });\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tlastItemFocused = document.activeElement as HTMLElement;\\n\\t\\t\\t\\t}\\n\\t\\t\\t});\\n\\n\\t\\t\\tnode.addEventListener(\\n\\t\\t\\t\\t'blur',\\n\\t\\t\\t\\t(e) => {\\n\\t\\t\\t\\t\\tif (\\n\\t\\t\\t\\t\\t\\t!(e.relatedTarget as HTMLElement)?.classList.contains('focus-visible') ||\\n\\t\\t\\t\\t\\t\\t!(e.currentTarget instanceof HTMLElement && e.relatedTarget instanceof HTMLElement)\\n\\t\\t\\t\\t\\t) {\\n\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tif (!e.currentTarget.contains(e.relatedTarget) && !lastItemFocused) {\\n\\t\\t\\t\\t\\t\\tlastItemFocused = e.target as HTMLElement;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{ capture: true },\\n\\t\\t\\t);\\n\\n\\t\\t\\tnode.addEventListener(\\n\\t\\t\\t\\t'focus',\\n\\t\\t\\t\\t(e) => {\\n\\t\\t\\t\\t\\tconst triggeredByKeyboard = (e.target as HTMLElement)?.classList.contains('focus-visible');\\n\\t\\t\\t\\t\\tif (!triggeredByKeyboard || !(e.currentTarget instanceof HTMLElement && e.relatedTarget instanceof HTMLElement)) {\\n\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tif (lastItemFocused && !e.currentTarget.contains(e.relatedTarget) && node.contains(e.target as HTMLElement)) {\\n\\t\\t\\t\\t\\t\\tlastItemFocused?.focus();\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{ capture: true },\\n\\t\\t\\t);\\n\\t\\t},\\n\\t\\t[sidebarListFocusManager],\\n\\t);\\n\\n\\treturn { sidebarListRef };\\n};\\n\",null],\"names\":[\"useFocusManager\",\"useCallback\",\"module\",\"export\",\"useSidebarListNavigation\",\"link\",\"v\",\"isListItem\",\"node\",\"classList\",\"contains\",\"isCollapseGroup\",\"isListItemMenu\",\"sidebarListFocusManager\",\"sidebarListRef\",\"lastItemFocused\",\"addEventListener\",\"e\",\"target\",\"key\",\"preventDefault\",\"stopPropagation\",\"shiftKey\",\"focusPrevious\",\"accept\",\"focusNext\",\"document\",\"activeElement\",\"_e$relatedTarget\",\"relatedTarget\",\"currentTarget\",\"HTMLElement\",\"capture\",\"_e$target\",\"_lastItemFocused\",\"triggeredByKeyboard\",\"focus\"],\"mappings\":\"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\"}"}