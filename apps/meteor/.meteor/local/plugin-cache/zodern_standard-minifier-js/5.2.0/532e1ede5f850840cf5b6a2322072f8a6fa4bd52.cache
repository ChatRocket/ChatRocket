{"code":"function module(t,n,e){e.export({useOTR:function(){return l}}),e.link(\"@rocket.chat/ui-contexts\",{useUserId:function(t){o=t}},0),e.link(\"react\",{useMemo:function(t){u=t},useCallback:function(t){i=t}},1),e.link(\"../../app/otr/client/OTR\",{default:function(t){c=t}},2),e.link(\"../../app/otr/lib/OtrRoomState\",{OtrRoomState:function(t){r=t}},3),e.link(\"../views/room/contexts/RoomContext\",{useRoom:function(t){a=t}},4),e.link(\"./useReactiveValue\",{useReactiveValue:function(t){f=t}},5);var o,u,i,c,r,a,f,l=function(){var t=o(),n=a(),e=u(function(){if(t&&n)return c.getInstanceByRoomId(t,n._id)},[t,n]),l=f(i(function(){return e?e.getState():r.ERROR},[e]));return{otr:e,otrState:l}}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useOTR.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useUserId } from '@rocket.chat/ui-contexts';\\nimport { useMemo, useCallback } from 'react';\\n\\nimport OTR from '../../app/otr/client/OTR';\\nimport type { OTRRoom } from '../../app/otr/client/OTRRoom';\\nimport { OtrRoomState } from '../../app/otr/lib/OtrRoomState';\\nimport { useRoom } from '../views/room/contexts/RoomContext';\\nimport { useReactiveValue } from './useReactiveValue';\\n\\nexport const useOTR = (): { otr: OTRRoom | undefined; otrState: OtrRoomState } => {\\n\\tconst uid = useUserId();\\n\\tconst room = useRoom();\\n\\n\\tconst otr = useMemo(() => {\\n\\t\\tif (!uid || !room) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\treturn OTR.getInstanceByRoomId(uid, room._id);\\n\\t}, [uid, room]);\\n\\n\\tconst otrState = useReactiveValue(useCallback(() => (otr ? otr.getState() : OtrRoomState.ERROR), [otr]));\\n\\n\\treturn {\\n\\t\\totr,\\n\\t\\totrState,\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"export\",\"useOTR\",\"link\",\"useUserId\",\"v\",\"useMemo\",\"useCallback\",\"OTR\",\"OtrRoomState\",\"useRoom\",\"useReactiveValue\",\"uid\",\"room\",\"otr\",\"getInstanceByRoomId\",\"_id\",\"otrState\",\"getState\",\"ERROR\"],\"mappings\":\"uBAAAA,EAAOC,MAAE,CAAA,CAAAC,OAAW,WAAM,OAAAA,CAAA,CAAA,GAA2BF,EAAAG,IAAA,CAAA,2BAAA,CAAAC,UAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,QAAA,CAAAG,QAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,EAAAE,YAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,2BAAA,CAAA,QAAA,SAAAE,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,iCAAA,CAAAM,aAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,qCAAA,CAAAO,QAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,qBAAA,CAAAQ,iBAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAS9C,IAT8CD,EAAAE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EASxCT,EAAS,WACrB,IAAMU,EAAMR,IACNS,EAAOH,IAEPI,EAAMR,EAAQ,WACnB,GAAI,AAACM,GAAQC,EAIb,OAAOL,EAAIO,mBAAmB,CAACH,EAAKC,EAAKG,GAAG,CAC7C,EAAG,CAACJ,EAAKC,EAAK,EAERI,EAAWN,EAAiBJ,EAAY,WAAA,OAAOO,EAAMA,EAAII,QAAQ,GAAKT,EAAaU,KAAK,EAAG,CAACL,EAAI,GAEtG,MAAO,CACNA,IAAAA,EACAG,SAAAA,EAEF\"}"}