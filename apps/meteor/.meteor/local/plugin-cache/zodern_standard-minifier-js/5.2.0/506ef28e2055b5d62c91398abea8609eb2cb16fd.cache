{"code":"function module(e,t,n){n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){u=e}},0),n.export({getHighestTimeUnit:function(){return g}}),n.link(\"@rocket.chat/fuselage\",{Field:function(e){i=e},FieldLabel:function(e){l=e},FieldRow:function(e){a=e},InputBox:function(e){o=e},Select:function(e){r=e}},0),n.link(\"react\",{default:function(e){c=e},useMemo:function(e){f=e},useState:function(e){m=e}},1),n.link(\"react-i18next\",{useTranslation:function(e){s=e}},2),n.link(\"../../../../../lib/convertTimeUnit\",{TIMEUNIT:function(e){d=e},timeUnitToMs:function(e){b=e},msToTimeUnit:function(e){h=e}},3),n.link(\"../ResetSettingButton\",{default:function(e){p=e}},4);var u,i,l,a,o,r,c,f,m,s,d,b,h,p,g=function(e){return h(d.minutes,e)%60!=0?d.minutes:h(d.hours,e)%24!=0?d.hours:d.days};n.exportDefault(function(e){var t=e._id,n=e.label,v=e.value,k=e.placeholder,T=e.readonly,E=e.autocomplete,x=e.disabled,N=e.required,y=e.onChangeValue,C=e.hasResetButton,F=e.onResetButtonClick,U=e.packageValue,q=s(),B=q.t,M=q.i18n,R=m(g(Number(v))),I=u(R,2),S=I[0],O=I[1],V=m(h(S,Number(v))),j=u(V,2),w=j[0],A=j[1],D=f(function(){return Object.entries(d).map(function(e){var t=u(e,2),n=t[0];return[t[1],M.exists(n)?B(n):n]})},[B]);return c.createElement(i,null,c.createElement(a,null,c.createElement(l,{htmlFor:t,title:t,required:N},n),C&&c.createElement(p,{\"data-qa-reset-setting-id\":t,onClick:function(){null==F||F();var e=g(Number(U));O(e),A(h(e,Number(U)))}})),c.createElement(a,null,c.createElement(o,{\"data-qa-setting-id\":t,id:t,type:\"number\",value:w,placeholder:k,disabled:x,readOnly:T,autoComplete:!1===E?\"off\":void 0,onChange:function(e){var t,n=(t=Number(e.currentTarget.value))?Number(Math.max(0,t).toFixed(0)):0;null==y||y(b(S,n)),A(n)}})),c.createElement(a,null,c.createElement(r,{value:S,disabled:x,options:D,onChange:function(e){\"string\"==typeof e&&(null==y||y(b(e,w)),O(e))}})))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/settings/Setting/inputs/TimespanSettingInput.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Field, FieldLabel, FieldRow, InputBox, Select } from '@rocket.chat/fuselage';\\nimport type { FormEventHandler, ReactElement } from 'react';\\nimport React, { useMemo, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { TIMEUNIT, timeUnitToMs, msToTimeUnit } from '../../../../../lib/convertTimeUnit';\\nimport ResetSettingButton from '../ResetSettingButton';\\nimport type { SettingInputProps } from './types';\\n\\ntype TimespanSettingInputProps = SettingInputProps<string, string | number> & {\\n\\tvalue: string;\\n};\\n\\nexport const getHighestTimeUnit = (value: number): TIMEUNIT => {\\n\\tconst minutes = msToTimeUnit(TIMEUNIT.minutes, value);\\n\\tif (minutes % 60 !== 0) {\\n\\t\\treturn TIMEUNIT.minutes;\\n\\t}\\n\\n\\tconst hours = msToTimeUnit(TIMEUNIT.hours, value);\\n\\tif (hours % 24 !== 0) {\\n\\t\\treturn TIMEUNIT.hours;\\n\\t}\\n\\n\\treturn TIMEUNIT.days;\\n};\\n\\nconst sanitizeInputValue = (value: number) => {\\n\\tif (!value) {\\n\\t\\treturn 0;\\n\\t}\\n\\n\\tconst sanitizedValue = Math.max(0, value).toFixed(0);\\n\\n\\treturn Number(sanitizedValue);\\n};\\n\\nfunction TimespanSettingInput({\\n\\t_id,\\n\\tlabel,\\n\\tvalue,\\n\\tplaceholder,\\n\\treadonly,\\n\\tautocomplete,\\n\\tdisabled,\\n\\trequired,\\n\\tonChangeValue,\\n\\thasResetButton,\\n\\tonResetButtonClick,\\n\\tpackageValue,\\n}: TimespanSettingInputProps): ReactElement {\\n\\tconst { t, i18n } = useTranslation();\\n\\n\\tconst [timeUnit, setTimeUnit] = useState<TIMEUNIT>(getHighestTimeUnit(Number(value)));\\n\\tconst [internalValue, setInternalValue] = useState<number>(msToTimeUnit(timeUnit, Number(value)));\\n\\n\\tconst handleChange: FormEventHandler<HTMLInputElement> = (event) => {\\n\\t\\tconst newValue = sanitizeInputValue(Number(event.currentTarget.value));\\n\\n\\t\\tonChangeValue?.(timeUnitToMs(timeUnit, newValue));\\n\\n\\t\\tsetInternalValue(newValue);\\n\\t};\\n\\n\\tconst handleChangeTimeUnit = (nextTimeUnit: string | number) => {\\n\\t\\tif (typeof nextTimeUnit !== 'string') {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tonChangeValue?.(timeUnitToMs(nextTimeUnit as TIMEUNIT, internalValue));\\n\\t\\tsetTimeUnit(nextTimeUnit as TIMEUNIT);\\n\\t};\\n\\n\\tconst timeUnitOptions = useMemo(() => {\\n\\t\\treturn Object.entries(TIMEUNIT).map<readonly [TIMEUNIT, string]>(([label, value]) => [value, i18n.exists(label) ? t(label) : label]); // todo translate\\n\\t}, [t]);\\n\\n\\tconst handleResetButtonClick = () => {\\n\\t\\tonResetButtonClick?.();\\n\\t\\tconst newTimeUnit = getHighestTimeUnit(Number(packageValue));\\n\\t\\tsetTimeUnit(newTimeUnit);\\n\\t\\tsetInternalValue(msToTimeUnit(newTimeUnit, Number(packageValue)));\\n\\t};\\n\\n\\treturn (\\n\\t\\t<Field>\\n\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t<FieldLabel htmlFor={_id} title={_id} required={required}>\\n\\t\\t\\t\\t\\t{label}\\n\\t\\t\\t\\t</FieldLabel>\\n\\t\\t\\t\\t{hasResetButton && <ResetSettingButton data-qa-reset-setting-id={_id} onClick={handleResetButtonClick} />}\\n\\t\\t\\t</FieldRow>\\n\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t<InputBox\\n\\t\\t\\t\\t\\tdata-qa-setting-id={_id}\\n\\t\\t\\t\\t\\tid={_id}\\n\\t\\t\\t\\t\\ttype='number'\\n\\t\\t\\t\\t\\tvalue={internalValue}\\n\\t\\t\\t\\t\\tplaceholder={placeholder}\\n\\t\\t\\t\\t\\tdisabled={disabled}\\n\\t\\t\\t\\t\\treadOnly={readonly}\\n\\t\\t\\t\\t\\tautoComplete={autocomplete === false ? 'off' : undefined}\\n\\t\\t\\t\\t\\tonChange={handleChange}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t</FieldRow>\\n\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t<Select value={timeUnit} disabled={disabled} options={timeUnitOptions} onChange={handleChangeTimeUnit} />\\n\\t\\t\\t</FieldRow>\\n\\t\\t</Field>\\n\\t);\\n}\\n\\nexport default TimespanSettingInput;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_slicedToArray\",\"export\",\"getHighestTimeUnit\",\"Field\",\"FieldLabel\",\"FieldRow\",\"InputBox\",\"Select\",\"React\",\"useMemo\",\"useState\",\"useTranslation\",\"TIMEUNIT\",\"timeUnitToMs\",\"msToTimeUnit\",\"ResetSettingButton\",\"value\",\"minutes\",\"hours\",\"days\",\"exportDefault\",\"_ref\",\"_id\",\"label\",\"placeholder\",\"readonly\",\"autocomplete\",\"disabled\",\"required\",\"onChangeValue\",\"hasResetButton\",\"onResetButtonClick\",\"packageValue\",\"_useTranslation\",\"t\",\"i18n\",\"_useState\",\"Number\",\"_useState2\",\"timeUnit\",\"setTimeUnit\",\"_useState3\",\"_useState4\",\"internalValue\",\"setInternalValue\",\"timeUnitOptions\",\"Object\",\"entries\",\"map\",\"_ref2\",\"_ref3\",\"exists\",\"createElement\",\"htmlFor\",\"title\",\"onClick\",\"newTimeUnit\",\"id\",\"type\",\"readOnly\",\"autoComplete\",\"undefined\",\"onChange\",\"event\",\"newValue\",\"currentTarget\",\"Math\",\"max\",\"toFixed\",\"options\",\"nextTimeUnit\"],\"mappings\":\"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\"}"}