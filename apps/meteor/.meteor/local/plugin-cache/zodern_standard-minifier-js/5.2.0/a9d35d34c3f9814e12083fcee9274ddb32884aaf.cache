{"code":"function module(e,t,n){var r,a,s,u,o,c;n.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),n.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){a=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){s=e},useToastMessageDispatch:function(e){u=e}},0),n.link(\"@tanstack/react-query\",{useQuery:function(e){o=e}},1),n.link(\"react\",{useMemo:function(e){c=e}},2),n.exportDefault(function(e){var t=e.searchTerm,n=e.prevSearchTerm,i=e.sortData,l=e.paginationData,f=e.tab,d=e.selectedRoles,p=l.setCurrent,g=l.itemsPerPage,h=l.current,m=i.sortBy,v=i.sortDirection,b=c(function(){return t!==n.current&&p(0),a(a({},{all:{},pending:{hasLoggedIn:!1,type:\"user\"},active:{hasLoggedIn:!0,status:\"active\"},deactivated:{hasLoggedIn:!0,status:\"deactivated\"}}[f]),{},{searchTerm:t,roles:d,sort:'{ \"'+m+'\": '+(\"asc\"===v?1:-1)+\" }\",count:g,offset:t===n.current?h:0})},[h,g,n,t,d,p,m,v,f]),k=s(\"GET\",\"/v1/users.listByStatus\"),y=u();return o([\"users.list\",b,f],function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",k(b));case 1:case\"end\":return e.stop()}},null,null,null,Promise)},{onError:function(e){y({type:\"error\",message:e})}})})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/users/hooks/useFilteredUsers.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { UsersListStatusParamsGET } from '@rocket.chat/rest-typings';\\nimport { useEndpoint, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { MutableRefObject } from 'react';\\nimport { useMemo } from 'react';\\n\\nimport type { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\\nimport type { useSort } from '../../../../components/GenericTable/hooks/useSort';\\nimport type { AdminUsersTab, UsersTableSortingOption } from '../AdminUsersPage';\\n\\ntype UseFilteredUsersOptions = {\\n\\tsearchTerm: string;\\n\\tprevSearchTerm: MutableRefObject<string>;\\n\\ttab: AdminUsersTab;\\n\\tpaginationData: ReturnType<typeof usePagination>;\\n\\tsortData: ReturnType<typeof useSort<UsersTableSortingOption>>;\\n\\tselectedRoles: string[];\\n};\\n\\nconst useFilteredUsers = ({ searchTerm, prevSearchTerm, sortData, paginationData, tab, selectedRoles }: UseFilteredUsersOptions) => {\\n\\tconst { setCurrent, itemsPerPage, current } = paginationData;\\n\\tconst { sortBy, sortDirection } = sortData;\\n\\n\\tconst payload = useMemo(() => {\\n\\t\\tif (searchTerm !== prevSearchTerm.current) {\\n\\t\\t\\tsetCurrent(0);\\n\\t\\t}\\n\\n\\t\\tconst listUsersPayload: Partial<Record<AdminUsersTab, UsersListStatusParamsGET>> = {\\n\\t\\t\\tall: {},\\n\\t\\t\\tpending: {\\n\\t\\t\\t\\thasLoggedIn: false,\\n\\t\\t\\t\\ttype: 'user',\\n\\t\\t\\t},\\n\\t\\t\\tactive: {\\n\\t\\t\\t\\thasLoggedIn: true,\\n\\t\\t\\t\\tstatus: 'active',\\n\\t\\t\\t},\\n\\t\\t\\tdeactivated: {\\n\\t\\t\\t\\thasLoggedIn: true,\\n\\t\\t\\t\\tstatus: 'deactivated',\\n\\t\\t\\t},\\n\\t\\t};\\n\\n\\t\\treturn {\\n\\t\\t\\t...listUsersPayload[tab],\\n\\t\\t\\tsearchTerm,\\n\\t\\t\\troles: selectedRoles,\\n\\t\\t\\tsort: `{ \\\"${sortBy}\\\": ${sortDirection === 'asc' ? 1 : -1} }`,\\n\\t\\t\\tcount: itemsPerPage,\\n\\t\\t\\toffset: searchTerm === prevSearchTerm.current ? current : 0,\\n\\t\\t};\\n\\t}, [current, itemsPerPage, prevSearchTerm, searchTerm, selectedRoles, setCurrent, sortBy, sortDirection, tab]);\\n\\tconst getUsers = useEndpoint('GET', '/v1/users.listByStatus');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst usersListQueryResult = useQuery(['users.list', payload, tab], async () => getUsers(payload), {\\n\\t\\tonError: (error) => {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t},\\n\\t});\\n\\treturn usersListQueryResult;\\n};\\nexport default useFilteredUsers;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_objectSpread\",\"useEndpoint\",\"useToastMessageDispatch\",\"useQuery\",\"useMemo\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"searchTerm\",\"prevSearchTerm\",\"sortData\",\"paginationData\",\"tab\",\"selectedRoles\",\"setCurrent\",\"itemsPerPage\",\"current\",\"sortBy\",\"sortDirection\",\"payload\",\"listUsersPayload\",\"all\",\"pending\",\"hasLoggedIn\",\"type\",\"active\",\"status\",\"deactivated\",\"roles\",\"sort\",\"count\",\"offset\",\"getUsers\",\"dispatchToastMessage\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"stop\",\"Promise\",\"onError\",\"error\",\"message\"],\"mappings\":\"uBAmBA,IAlBAA,EAAgFC,EAAhFC,EAASC,EAAuEC,EAAAC,EAA1DC,EAAAC,IAAA,CAAA,6BAA+B,CAAAC,QAAA,SAA2BC,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAA1DH,EAAyBC,IAAA,CAAA,2BAAgC,CAACL,YAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,wBAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAH,SAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAF,QAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAhFH,EAAOI,aAAa,CAkBK,SAAAC,CAAA,EAA0G,IAAvGC,EAAUD,EAAVC,UAAU,CAAEC,EAAcF,EAAdE,cAAc,CAAEC,EAAQH,EAARG,QAAQ,CAAEC,EAAcJ,EAAdI,cAAc,CAAEC,EAAGL,EAAHK,GAAG,CAAEC,EAAaN,EAAbM,aAAa,CAC3FC,EAAsCH,EAAtCG,UAAU,CAAEC,EAA0BJ,EAA1BI,YAAY,CAAEC,EAAYL,EAAZK,OAAO,CACjCC,EAA0BP,EAA1BO,MAAM,CAAEC,EAAkBR,EAAlBQ,aAAa,CAEvBC,EAAUlB,EAAQ,kBACnBO,IAAeC,EAAeO,OAAO,EACxCF,EAAW,GAmBZjB,EAAAA,EAAA,CAAA,EACIuB,AAjB+E,CAClFC,IAAK,CAAA,EACLC,QAAS,CACRC,YAAa,CAAA,EACbC,KAAM,QAEPC,OAAQ,CACPF,YAAa,CAAA,EACbG,OAAQ,UAETC,YAAa,CACZJ,YAAa,CAAA,EACbG,OAAQ,eAKU,CAACd,EAAI,EAAA,CAAA,EAAA,CACxBJ,WAAAA,EACAoB,MAAOf,EACPgB,KAAI,MAAQZ,EAAM,MAAMC,CAAAA,AAAkB,QAAlBA,EAA0B,EAAI,EAAC,EAAC,KACxDY,MAAOf,EACPgB,OAAQvB,IAAeC,EAAeO,OAAO,CAAGA,EAAU,CAAC,EAE7D,EAAG,CAACA,EAASD,EAAcN,EAAgBD,EAAYK,EAAeC,EAAYG,EAAQC,EAAeN,EAAI,EACvGoB,EAAWlC,EAAY,MAAO,0BAC9BmC,EAAuBlC,IAM7B,OAL6BC,EAAS,CAAC,aAAcmB,EAASP,EAAI,CAAE,WAAA,OAAAhB,EAAAsC,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAG,MAAA,CAAA,SAAYN,EAASb,GAAQ,MAAA,EAAA,IAAA,MAAA,OAAAgB,EAAAI,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAAE,CAClGC,QAAS,SAACC,CAAK,EACdT,EAAqB,CAAET,KAAM,QAASmB,QAASD,CAAK,EACrD,GAGF\"}"}