{"code":"function module(e,t,l){let a,n,s,r,u,c,o,i,m,d,E,g,S,h,p,k,_,C,f,b,M,T;l.link(\"@babel/runtime/helpers/extends\",{default(e){a=e}},0),l.link(\"@rocket.chat/fuselage\",{Field(e){n=e},TextInput(e){s=e},FieldGroup(e){r=e},Modal(e){u=e},Button(e){c=e},Box(e){o=e},FieldLabel(e){i=e},FieldRow(e){m=e},FieldError(e){d=e},FieldHint(e){E=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useLocalStorage(e){g=e},useMutableCallback(e){S=e}},1),l.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){h=e},useSetting(e){p=e},useTranslation(e){k=e},useEndpoint(e){_=e}},2),l.link(\"react\",{default(e){C=e},useState(e){f=e},useCallback(e){b=e}},3),l.link(\"../../components/UserStatusMenu\",{default(e){M=e}},4),l.link(\"../../lib/constants\",{USER_STATUS_TEXT_MAX_LENGTH(e){T=e}},5),l.exportDefault(e=>{let{onClose:t,userStatus:l,userStatusText:F}=e,x=p(\"Accounts_AllowUserStatusMessageChange\"),y=h(),[v,w]=g(\"Local_Custom_Status\",\"\"),A=k(),[D,L]=f(v||F),[U,G]=f(l),[H,B]=f(),I=_(\"POST\",\"/v1/users.setStatus\"),P=S(e=>(L(e.currentTarget.value),D&&D.length>T)?B(A(\"Max_length_is\",T)):B(void 0)),R=b(async()=>{try{await I({message:D,status:U}),w(D),y({type:\"success\",message:A(\"StatusMessage_Changed_Successfully\")})}catch(e){y({type:\"error\",message:e})}t()},[y,I,D,U,t,A]);return C.createElement(u,{wrapperFunction:e=>C.createElement(o,a({is:\"form\",onSubmit:e=>{e.preventDefault(),R()}},e))},C.createElement(u.Header,null,C.createElement(u.Icon,{name:\"info\"}),C.createElement(u.Title,null,A(\"Edit_Status\")),C.createElement(u.Close,{onClick:t})),C.createElement(u.Content,{fontScale:\"p2\"},C.createElement(r,null,C.createElement(n,null,C.createElement(i,null,A(\"StatusMessage\")),C.createElement(m,null,C.createElement(s,{error:H,disabled:!x,flexGrow:1,value:D,onChange:P,placeholder:A(\"StatusMessage_Placeholder\"),addon:C.createElement(M,{margin:\"neg-x2\",onChange:e=>G(e),initialStatus:U})})),!x&&C.createElement(E,null,A(\"StatusMessage_Change_Disabled\")),C.createElement(d,null,H)))),C.createElement(u.Footer,null,C.createElement(u.FooterControllers,null,C.createElement(c,{secondary:!0,onClick:t},A(\"Cancel\")),C.createElement(c,{primary:!0,type:\"submit\",disabled:!!H},A(\"Save\")))))})}","map":"{\"version\":3,\"sources\":[\"client/sidebar/header/EditStatusModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { Field, TextInput, FieldGroup, Modal, Button, Box, FieldLabel, FieldRow, FieldError, FieldHint } from '@rocket.chat/fuselage';\\nimport { useLocalStorage, useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useSetting, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ChangeEvent, ComponentProps, FormEvent } from 'react';\\nimport React, { useState, useCallback } from 'react';\\n\\nimport UserStatusMenu from '../../components/UserStatusMenu';\\nimport { USER_STATUS_TEXT_MAX_LENGTH } from '../../lib/constants';\\n\\ntype EditStatusModalProps = {\\n\\tonClose: () => void;\\n\\tuserStatus: IUser['status'];\\n\\tuserStatusText: IUser['statusText'];\\n};\\n\\nconst EditStatusModal = ({ onClose, userStatus, userStatusText }: EditStatusModalProps): ReactElement => {\\n\\tconst allowUserStatusMessageChange = useSetting('Accounts_AllowUserStatusMessageChange');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst [customStatus, setCustomStatus] = useLocalStorage<string | undefined>('Local_Custom_Status', '');\\n\\tconst initialStatusText = customStatus || userStatusText;\\n\\n\\tconst t = useTranslation();\\n\\tconst [statusText, setStatusText] = useState(initialStatusText);\\n\\tconst [statusType, setStatusType] = useState(userStatus);\\n\\tconst [statusTextError, setStatusTextError] = useState<string | undefined>();\\n\\n\\tconst setUserStatus = useEndpoint('POST', '/v1/users.setStatus');\\n\\n\\tconst handleStatusText = useMutableCallback((e: ChangeEvent<HTMLInputElement>): void => {\\n\\t\\tsetStatusText(e.currentTarget.value);\\n\\n\\t\\tif (statusText && statusText.length > USER_STATUS_TEXT_MAX_LENGTH) {\\n\\t\\t\\treturn setStatusTextError(t('Max_length_is', USER_STATUS_TEXT_MAX_LENGTH));\\n\\t\\t}\\n\\n\\t\\treturn setStatusTextError(undefined);\\n\\t});\\n\\n\\tconst handleStatusType = (type: IUser['status']): void => setStatusType(type);\\n\\n\\tconst handleSaveStatus = useCallback(async () => {\\n\\t\\ttry {\\n\\t\\t\\tawait setUserStatus({ message: statusText, status: statusType });\\n\\t\\t\\tsetCustomStatus(statusText);\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('StatusMessage_Changed_Successfully') });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\n\\t\\tonClose();\\n\\t}, [dispatchToastMessage, setUserStatus, statusText, statusType, onClose, t]);\\n\\n\\treturn (\\n\\t\\t<Modal\\n\\t\\t\\twrapperFunction={(props: ComponentProps<typeof Box>) => (\\n\\t\\t\\t\\t<Box\\n\\t\\t\\t\\t\\tis='form'\\n\\t\\t\\t\\t\\tonSubmit={(e: FormEvent) => {\\n\\t\\t\\t\\t\\t\\te.preventDefault();\\n\\t\\t\\t\\t\\t\\thandleSaveStatus();\\n\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t{...props}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\t\\t>\\n\\t\\t\\t<Modal.Header>\\n\\t\\t\\t\\t<Modal.Icon name='info' />\\n\\t\\t\\t\\t<Modal.Title>{t('Edit_Status')}</Modal.Title>\\n\\t\\t\\t\\t<Modal.Close onClick={onClose} />\\n\\t\\t\\t</Modal.Header>\\n\\t\\t\\t<Modal.Content fontScale='p2'>\\n\\t\\t\\t\\t<FieldGroup>\\n\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t<FieldLabel>{t('StatusMessage')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<TextInput\\n\\t\\t\\t\\t\\t\\t\\t\\terror={statusTextError}\\n\\t\\t\\t\\t\\t\\t\\t\\tdisabled={!allowUserStatusMessageChange}\\n\\t\\t\\t\\t\\t\\t\\t\\tflexGrow={1}\\n\\t\\t\\t\\t\\t\\t\\t\\tvalue={statusText}\\n\\t\\t\\t\\t\\t\\t\\t\\tonChange={handleStatusText}\\n\\t\\t\\t\\t\\t\\t\\t\\tplaceholder={t('StatusMessage_Placeholder')}\\n\\t\\t\\t\\t\\t\\t\\t\\taddon={<UserStatusMenu margin='neg-x2' onChange={handleStatusType} initialStatus={statusType} />}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t{!allowUserStatusMessageChange && <FieldHint>{t('StatusMessage_Change_Disabled')}</FieldHint>}\\n\\t\\t\\t\\t\\t\\t<FieldError>{statusTextError}</FieldError>\\n\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t</FieldGroup>\\n\\t\\t\\t</Modal.Content>\\n\\t\\t\\t<Modal.Footer>\\n\\t\\t\\t\\t<Modal.FooterControllers>\\n\\t\\t\\t\\t\\t<Button secondary onClick={onClose}>\\n\\t\\t\\t\\t\\t\\t{t('Cancel')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t<Button primary type='submit' disabled={!!statusTextError}>\\n\\t\\t\\t\\t\\t\\t{t('Save')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</Modal.FooterControllers>\\n\\t\\t\\t</Modal.Footer>\\n\\t\\t</Modal>\\n\\t);\\n};\\n\\nexport default EditStatusModal;\\n\",null],\"names\":[\"_extends\",\"Field\",\"TextInput\",\"FieldGroup\",\"Modal\",\"Button\",\"Box\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"FieldHint\",\"useLocalStorage\",\"useMutableCallback\",\"useToastMessageDispatch\",\"useSetting\",\"useTranslation\",\"useEndpoint\",\"React\",\"useState\",\"useCallback\",\"UserStatusMenu\",\"USER_STATUS_TEXT_MAX_LENGTH\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"onClose\",\"userStatus\",\"userStatusText\",\"allowUserStatusMessageChange\",\"dispatchToastMessage\",\"customStatus\",\"setCustomStatus\",\"t\",\"statusText\",\"setStatusText\",\"statusType\",\"setStatusType\",\"statusTextError\",\"setStatusTextError\",\"setUserStatus\",\"handleStatusText\",\"e\",\"currentTarget\",\"value\",\"length\",\"undefined\",\"handleSaveStatus\",\"message\",\"status\",\"type\",\"error\",\"createElement\",\"wrapperFunction\",\"props\",\"is\",\"onSubmit\",\"preventDefault\",\"Header\",\"Icon\",\"name\",\"Title\",\"Close\",\"onClick\",\"Content\",\"fontScale\",\"disabled\",\"flexGrow\",\"onChange\",\"placeholder\",\"addon\",\"margin\",\"initialStatus\",\"Footer\",\"FooterControllers\",\"secondary\",\"primary\"],\"mappings\":\"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\"}"}