{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){o=e}},0),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){i=e}},1),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){r=e}},2),t.export({useVideoConfList:function(){return f}}),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){u=e}},0),t.link(\"react\",{useCallback:function(e){a=e},useState:function(e){c=e}},1),t.link(\"../../../../../hooks/lists/useScrollableRecordList\",{useScrollableRecordList:function(e){d=e}},2),t.link(\"../../../../../hooks/useComponentDidUpdate\",{useComponentDidUpdate:function(e){l=e}},3),t.link(\"./VideoConfRecordList\",{VideoConfRecordList:function(e){s=e}},4);var o,i,r,u,a,c,d,l,s,f=function(e){var n=u(\"GET\",\"/v1/video-conference.list\"),t=c(function(){return new s}),f=r(t,2),m=f[0],p=f[1],k=a(function(){return p(new s)},[]);l(function(){e&&k()},[e,k]);var b=a(function(t,r){var u,a,c;return o.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.awrap(n({roomId:e.roomId}));case 2:return a=(u=t.sent).data,c=u.total,t.abrupt(\"return\",{items:a.map(function(e){return i(i({},e),{},{_updatedAt:new Date(e._updatedAt),createdAt:new Date(e.createdAt),endedAt:e.endedAt?new Date(e.endedAt):void 0})}),itemCount:c});case 6:case\"end\":return t.stop()}},null,null,null,Promise)},[n,e]),C=d(m,b);return{reload:k,videoConfList:m,loadMoreItems:C.loadMoreItems,initialItemCount:C.initialItemCount}}}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/VideoConference/VideoConfList/useVideoConfList.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useState } from 'react';\\n\\nimport { useScrollableRecordList } from '../../../../../hooks/lists/useScrollableRecordList';\\nimport { useComponentDidUpdate } from '../../../../../hooks/useComponentDidUpdate';\\nimport { VideoConfRecordList } from './VideoConfRecordList';\\n\\nexport const useVideoConfList = (options: {\\n\\troomId: IRoom['_id'];\\n}): {\\n\\tvideoConfList: VideoConfRecordList;\\n\\tinitialItemCount: number;\\n\\treload: () => void;\\n\\tloadMoreItems: (start: number, end: number) => void;\\n} => {\\n\\tconst getVideoConfs = useEndpoint('GET', '/v1/video-conference.list');\\n\\tconst [videoConfList, setVideoConfList] = useState(() => new VideoConfRecordList());\\n\\tconst reload = useCallback(() => setVideoConfList(new VideoConfRecordList()), []);\\n\\n\\tuseComponentDidUpdate(() => {\\n\\t\\toptions && reload();\\n\\t}, [options, reload]);\\n\\n\\tconst fetchData = useCallback(\\n\\t\\tasync (_start, _end) => {\\n\\t\\t\\tconst { data, total } = await getVideoConfs({\\n\\t\\t\\t\\troomId: options.roomId,\\n\\t\\t\\t});\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\titems: data.map((videoConf: any) => ({\\n\\t\\t\\t\\t\\t...videoConf,\\n\\t\\t\\t\\t\\t_updatedAt: new Date(videoConf._updatedAt),\\n\\t\\t\\t\\t\\tcreatedAt: new Date(videoConf.createdAt),\\n\\t\\t\\t\\t\\tendedAt: videoConf.endedAt ? new Date(videoConf.endedAt) : undefined,\\n\\t\\t\\t\\t})),\\n\\t\\t\\t\\titemCount: total,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t[getVideoConfs, options],\\n\\t);\\n\\n\\tconst { loadMoreItems, initialItemCount } = useScrollableRecordList(videoConfList, fetchData);\\n\\n\\treturn {\\n\\t\\treload,\\n\\t\\tvideoConfList,\\n\\t\\tloadMoreItems,\\n\\t\\tinitialItemCount,\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_objectSpread\",\"_slicedToArray\",\"export\",\"useVideoConfList\",\"useEndpoint\",\"useCallback\",\"useState\",\"useScrollableRecordList\",\"useComponentDidUpdate\",\"VideoConfRecordList\",\"options\",\"getVideoConfs\",\"_useState\",\"_useState2\",\"videoConfList\",\"setVideoConfList\",\"reload\",\"fetchData\",\"_start\",\"_end\",\"_await$getVideoConfs\",\"data\",\"total\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"roomId\",\"sent\",\"abrupt\",\"items\",\"map\",\"videoConf\",\"_updatedAt\",\"Date\",\"createdAt\",\"endedAt\",\"undefined\",\"itemCount\",\"stop\",\"Promise\",\"_useScrollableRecordL\",\"loadMoreItems\",\"initialItemCount\"],\"mappings\":\"uBACsBA,EAAMC,IAAA,CAAA,6BAA2B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAvDH,EAAOO,MAAE,CAAA,CAAAC,iBAAmB,WAAA,OAAAA,CAA2B,CAAA,GAAAR,EAAAC,IAAA,CAAA,2BAAA,CAAAQ,YAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAS,YAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,EAAAQ,SAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qDAAA,CAAAW,wBAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6CAAA,CAAAY,sBAAA,SAAAV,CAAA,EAAAU,EAAAV,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAa,oBAAA,SAAAX,CAAA,EAAAW,EAAAX,CAAA,CAAA,EAAA,GAOhD,IAPPC,EAAuDC,EAAAC,EAAAG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAO1CN,EAAmB,SAACO,CAEhC,EAMA,IAAMC,EAAgBP,EAAY,MAAO,6BACzCQ,EAA0CN,EAAS,WAAA,OAAM,IAAIG,CAAqB,GAACI,EAAAZ,EAAAW,EAAA,GAA5EE,EAAaD,CAAA,CAAA,EAAA,CAAEE,EAAgBF,CAAA,CAAA,EAAA,CAChCG,EAASX,EAAY,WAAA,OAAMU,EAAiB,IAAIN,EAAsB,EAAE,EAAE,EAEhFD,EAAsB,WACrBE,GAAWM,GACZ,EAAG,CAACN,EAASM,EAAO,EAEpB,IAAMC,EAAYZ,EACjB,SAAOa,CAAM,CAAEC,CAAI,EAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAvB,EAAAwB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAA3B,EAAA4B,KAAA,CACYhB,EAAc,CAC3CiB,OAAQlB,EAAQkB,MAAAA,GACf,MAAA,EAFiB,OAAXP,EAAID,AAEVA,CAAAA,EAAAI,EAAAK,IAAA,AAAAA,EAFMR,IAAI,CAAEC,EAAKF,EAALE,KAAK,CAAAE,EAAAM,MAAA,CAAA,SAIZ,CACNC,MAAOV,EAAKW,GAAG,CAAC,SAACC,CAAc,EAAA,OAAAjC,EAAAA,EAAA,CAAA,EAC3BiC,GAAS,CAAA,EAAA,CACZC,WAAY,IAAIC,KAAKF,EAAUC,UAAU,EACzCE,UAAW,IAAID,KAAKF,EAAUG,SAAS,EACvCC,QAASJ,EAAUI,OAAO,CAAG,IAAIF,KAAKF,EAAUI,OAAO,EAAIC,KAAAA,CAAS,EAAA,GAErEC,UAAWjB,GACX,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAgB,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEF,CAAC9B,EAAeD,EAAQ,EAGzBgC,EAA4CnC,EAAwBO,EAAeG,GAEnF,MAAO,CACND,OAAAA,EACAF,cAAAA,EACA6B,cALoBD,EAAbC,aAAa,CAMpBC,iBANsCF,EAAhBE,gBAAgB,CAQxC\"}"}