{"code":"function module(n,i,t){t.export({useCreateDiscussionAction:function(){return d}}),t.link(\"@rocket.chat/core-typings\",{isRoomFederated:function(n){o=n}},0),t.link(\"@rocket.chat/ui-contexts\",{useTranslation:function(n){e=n},useSetting:function(n){s=n},usePermission:function(n){u=n},useSetModal:function(n){c=n}},1),t.link(\"react\",{default:function(n){r=n}},2),t.link(\"../../../../../../components/CreateDiscussion\",{default:function(n){a=n}},3);var o,e,s,u,c,r,a,d=function(n){var i=e(),t=c();if(!n)throw Error(\"Invalid room\");var d=s(\"Discussion_enabled\"),l=u(\"start-discussion\",n._id),f=u(\"start-discussion-other-user\",n._id),k=n&&d&&!o(n)&&(l||f);return{id:\"create-discussion\",content:i(\"Discussion\"),icon:\"discussion\",disabled:!k,onClick:function(){return t(r.createElement(a,{onClose:function(){return t(null)},defaultParentRoom:(null==n?void 0:n.prid)||(null==n?void 0:n._id)}))}}}}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/messageBox/MessageBoxActionsToolbar/hooks/useCreateDiscussionAction.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { isRoomFederated } from '@rocket.chat/core-typings';\\nimport type { GenericMenuItemProps } from '@rocket.chat/ui-client';\\nimport { useTranslation, useSetting, usePermission, useSetModal } from '@rocket.chat/ui-contexts';\\nimport React from 'react';\\n\\nimport CreateDiscussion from '../../../../../../components/CreateDiscussion';\\n\\nexport const useCreateDiscussionAction = (room?: IRoom): GenericMenuItemProps => {\\n\\tconst t = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\n\\tif (!room) {\\n\\t\\tthrow new Error('Invalid room');\\n\\t}\\n\\n\\tconst handleCreateDiscussion = () =>\\n\\t\\tsetModal(<CreateDiscussion onClose={() => setModal(null)} defaultParentRoom={room?.prid || room?._id} />);\\n\\n\\tconst discussionEnabled = useSetting('Discussion_enabled') as boolean;\\n\\tconst canStartDiscussion = usePermission('start-discussion', room._id);\\n\\tconst canSstartDiscussionOtherUser = usePermission('start-discussion-other-user', room._id);\\n\\n\\tconst allowDiscussion = room && discussionEnabled && !isRoomFederated(room) && (canStartDiscussion || canSstartDiscussionOtherUser);\\n\\n\\treturn {\\n\\t\\tid: 'create-discussion',\\n\\t\\tcontent: t('Discussion'),\\n\\t\\ticon: 'discussion',\\n\\t\\tdisabled: !allowDiscussion,\\n\\t\\tonClick: handleCreateDiscussion,\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"export\",\"useCreateDiscussionAction\",\"link\",\"isRoomFederated\",\"v\",\"useTranslation\",\"useSetting\",\"usePermission\",\"useSetModal\",\"React\",\"CreateDiscussion\",\"room\",\"t\",\"setModal\",\"Error\",\"discussionEnabled\",\"canStartDiscussion\",\"_id\",\"canSstartDiscussionOtherUser\",\"allowDiscussion\",\"id\",\"content\",\"icon\",\"disabled\",\"onClick\",\"createElement\",\"onClose\",\"defaultParentRoom\",\"prid\"],\"mappings\":\"uBACAA,EAAOC,MAAE,CAAA,CAAAC,0BAAuB,WAAA,OAA2BA,CAAC,CAAA,GAAAF,EAAAG,IAAA,CAAA,4BAAA,CAAAC,gBAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,2BAAA,CAAAG,eAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,EAAAE,WAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,EAAAG,cAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,EAAAI,YAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,gDAAA,CAAA,QAAA,SAAAE,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAOrD,IAPqDD,EAAAE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAO/CT,EAA4B,SAACU,CAAY,EACrD,IAAMC,EAAIP,IACJQ,EAAWL,IAEjB,GAAI,CAACG,EACJ,MAAM,AAAIG,MAAM,gBAMjB,IAAMC,EAAoBT,EAAW,sBAC/BU,EAAqBT,EAAc,mBAAoBI,EAAKM,GAAG,EAC/DC,EAA+BX,EAAc,8BAA+BI,EAAKM,GAAG,EAEpFE,EAAkBR,GAAQI,GAAqB,CAACZ,EAAgBQ,IAAUK,CAAAA,GAAsBE,CAAAA,EAEtG,MAAO,CACNE,GAAI,oBACJC,QAAST,EAAE,cACXU,KAAM,aACNC,SAAU,CAACJ,EACXK,QAd8B,WAAA,OAC9BX,EAASJ,EAAAgB,aAAA,CAACf,EAAgB,CAACgB,QAAS,WAAA,OAAMb,EAAS,KAAK,EAAEc,kBAAmB,AAAAhB,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMiB,IAAI,AAAJA,GAAQjB,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMM,GAAG,AAAHA,CAAI,GAAI,EAe3G\"}"}