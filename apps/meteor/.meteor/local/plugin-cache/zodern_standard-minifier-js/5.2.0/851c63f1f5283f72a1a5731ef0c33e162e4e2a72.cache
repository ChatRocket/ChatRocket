{"code":"function module(e,t,a){let r,s,l,n,o;a.link(\"@rocket.chat/ui-contexts\",{useRouter(e){r=e},useToastMessageDispatch(e){s=e},useAbsoluteUrl(e){l=e}},0),a.link(\"meteor/meteor\",{Meteor(e){n=e}},1),a.link(\"react\",{useEffect(e){o=e}},2),a.exportDefault(()=>{let e=l()(\"\"),t=r(),a=s();return o(()=>{let{token:r}=t.getRouteParameters(),{redirectUrl:s}=t.getSearchParameters();n.loginWithSamlToken(r,r=>{r&&a({type:\"error\",message:r});let l=decodeURIComponent(s||\"\");if(null!=l&&l.startsWith(e)){let e=new URL(l);t.navigate({pathname:e.pathname,search:Object.fromEntries(e.searchParams.entries())},{replace:!0})}else t.navigate({pathname:\"/home\"},{replace:!0})})},[a,e,t]),null})}","map":"{\"version\":3,\"sources\":[\"client/views/root/SAMLLoginRoute.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { LocationPathname } from '@rocket.chat/ui-contexts';\\nimport { useRouter, useToastMessageDispatch, useAbsoluteUrl } from '@rocket.chat/ui-contexts';\\nimport { Meteor } from 'meteor/meteor';\\nimport { useEffect } from 'react';\\n\\nconst SAMLLoginRoute = () => {\\n\\tconst rootUrl = useAbsoluteUrl()('');\\n\\tconst router = useRouter();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tuseEffect(() => {\\n\\t\\tconst { token } = router.getRouteParameters();\\n\\t\\tconst { redirectUrl } = router.getSearchParameters();\\n\\n\\t\\tMeteor.loginWithSamlToken(token, (error?: unknown) => {\\n\\t\\t\\tif (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst decodedRedirectUrl = decodeURIComponent(redirectUrl || '');\\n\\t\\t\\tif (decodedRedirectUrl?.startsWith(rootUrl)) {\\n\\t\\t\\t\\tconst redirect = new URL(decodedRedirectUrl);\\n\\t\\t\\t\\trouter.navigate(\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\tpathname: redirect.pathname as LocationPathname,\\n\\t\\t\\t\\t\\t\\tsearch: Object.fromEntries(redirect.searchParams.entries()),\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t{ replace: true },\\n\\t\\t\\t\\t);\\n\\t\\t\\t} else {\\n\\t\\t\\t\\trouter.navigate(\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\tpathname: '/home',\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t{ replace: true },\\n\\t\\t\\t\\t);\\n\\t\\t\\t}\\n\\t\\t});\\n\\t}, [dispatchToastMessage, rootUrl, router]);\\n\\n\\treturn null;\\n};\\n\\nexport default SAMLLoginRoute;\\n\",null],\"names\":[\"useRouter\",\"useToastMessageDispatch\",\"useAbsoluteUrl\",\"Meteor\",\"useEffect\",\"module\",\"link\",\"v\",\"exportDefault\",\"SAMLLoginRoute\",\"rootUrl\",\"router\",\"dispatchToastMessage\",\"token\",\"getRouteParameters\",\"redirectUrl\",\"getSearchParameters\",\"loginWithSamlToken\",\"error\",\"type\",\"message\",\"decodedRedirectUrl\",\"decodeURIComponent\",\"startsWith\",\"redirect\",\"URL\",\"navigate\",\"pathname\",\"search\",\"Object\",\"fromEntries\",\"searchParams\",\"entries\",\"replace\"],\"mappings\":\"2BACAA,EAASC,EAAWC,EAA0EC,EAAAC,EAAjDC,EAAcC,IAAE,CAAA,2BAAM,CAA0BN,UAACO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,wBAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,eAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gBAAA,CAAAH,OAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAF,UAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAA9FF,EAAOG,aAAa,CAIGC,KACtB,IAAMC,EAAUR,IAAiB,IAC3BS,EAASX,IACTY,EAAuBX,IAgC7B,OA9BAG,EAAU,KACT,GAAM,CAAES,MAAAA,CAAAA,CAAO,CAAGF,EAAOG,kBAAkB,GACrC,CAAEC,YAAAA,CAAAA,CAAa,CAAGJ,EAAOK,mBAAmB,GAElDb,EAAOc,kBAAkB,CAACJ,EAAQK,IAC7BA,GACHN,EAAqB,CAAEO,KAAM,QAASC,QAASF,CAAK,GAGrD,IAAMG,EAAqBC,mBAAmBP,GAAe,IAC7D,GAAIM,MAAAA,GAAAA,EAAoBE,UAAU,CAACb,GAAU,CAC5C,IAAMc,EAAW,IAAIC,IAAIJ,GACzBV,EAAOe,QAAQ,CACd,CACCC,SAAUH,EAASG,QAA4B,CAC/CC,OAAQC,OAAOC,WAAW,CAACN,EAASO,YAAY,CAACC,OAAO,KAEzD,CAAEC,QAAS,CAAA,CAAI,EAEjB,MACCtB,EAAOe,QAAQ,CACd,CACCC,SAAU,SAEX,CAAEM,QAAS,CAAA,CAAI,EAGlB,EACD,EAAG,CAACrB,EAAsBF,EAASC,EAAO,EAEnC,IACR\"}"}