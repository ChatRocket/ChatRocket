{"code":"function module(e,l,t){let a,n,o,i,r,c,s,m,u,d,g,k,E,f,M,h,T;t.link(\"@rocket.chat/fuselage\",{MessageMetricsItem(e){a=e},MessageBlock(e){n=e},MessageMetrics(e){o=e},MessageMetricsReply(e){i=e},MessageMetricsFollowing(e){r=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){c=e},useTranslation(e){s=e}},1),t.link(\"react\",{default(e){m=e},useCallback(e){u=e}},2),t.link(\"../../../hooks/useTimeAgo\",{useTimeAgo(e){d=e}},3),t.link(\"../../../views/room/contextualBar/Threads/hooks/useToggleFollowingThreadMutation\",{useToggleFollowingThreadMutation(e){g=e}},4),t.link(\"../../../views/room/hooks/useGoToThread\",{useGoToThread(e){k=e}},5),t.link(\"../helpers/followSyle\",{followStyle(e){E=e},anchor(e){f=e}},6),t.link(\"../notification/AllMentionNotification\",{default(e){M=e}},7),t.link(\"../notification/MeMentionNotification\",{default(e){h=e}},8),t.link(\"../notification/UnreadMessagesNotification\",{default(e){T=e}},9),t.exportDefault(e=>{let{unread:l,mention:t,all:w,rid:p,mid:b,counter:N,participants:y,following:L,lm:v}=e,F=s(),I=d(),x=k(),A=c(),C=g({onError:e=>{A({type:\"error\",message:e})}}),R=u(()=>{C.mutate({rid:p,tmid:b,follow:!L})},[L,p,b,C]);return m.createElement(n,{className:E},m.createElement(o,null,m.createElement(i,{\"data-rid\":p,\"data-mid\":b,onClick:()=>x({rid:p,tmid:b})},F(\"Reply\")),m.createElement(a,{title:F(\"Replies\")},m.createElement(a.Icon,{name:\"thread\"}),m.createElement(a.Label,null,N)),!!y&&m.createElement(a,{title:F(\"Participants\")},m.createElement(a.Icon,{name:\"user\"}),m.createElement(a.Label,null,y)),m.createElement(a,{title:null==v?void 0:v.toLocaleString()},m.createElement(a.Icon,{name:\"clock\"}),m.createElement(a.Label,null,I(v))),m.createElement(a,{className:L?void 0:f,\"data-rid\":p},m.createElement(r,{title:F(L?\"Following\":\"Not_following\"),name:L?\"bell\":\"bell-off\",onClick:R})),(t||w||l)&&m.createElement(a,null,m.createElement(a.Label,null,t&&m.createElement(h,null)||w&&m.createElement(M,null)||l&&m.createElement(T,null)))))})}","map":"{\"version\":3,\"sources\":[\"client/components/message/content/ThreadMetrics.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { MessageMetricsItem, MessageBlock, MessageMetrics, MessageMetricsReply, MessageMetricsFollowing } from '@rocket.chat/fuselage';\\nimport { useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback } from 'react';\\n\\nimport { useTimeAgo } from '../../../hooks/useTimeAgo';\\nimport { useToggleFollowingThreadMutation } from '../../../views/room/contextualBar/Threads/hooks/useToggleFollowingThreadMutation';\\nimport { useGoToThread } from '../../../views/room/hooks/useGoToThread';\\nimport { followStyle, anchor } from '../helpers/followSyle';\\nimport AllMentionNotification from '../notification/AllMentionNotification';\\nimport MeMentionNotification from '../notification/MeMentionNotification';\\nimport UnreadMessagesNotification from '../notification/UnreadMessagesNotification';\\n\\ntype ThreadMetricsProps = {\\n\\tunread: boolean;\\n\\tmention: boolean;\\n\\tall: boolean;\\n\\tlm: Date;\\n\\tmid: string;\\n\\trid: string;\\n\\tcounter: number;\\n\\tparticipants: number;\\n\\tfollowing: boolean;\\n};\\n\\nconst ThreadMetrics = ({ unread, mention, all, rid, mid, counter, participants, following, lm }: ThreadMetricsProps): ReactElement => {\\n\\tconst t = useTranslation();\\n\\n\\tconst format = useTimeAgo();\\n\\n\\tconst goToThread = useGoToThread();\\n\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst toggleFollowingThreadMutation = useToggleFollowingThreadMutation({\\n\\t\\tonError: (error) => {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t},\\n\\t});\\n\\n\\tconst handleFollow = useCallback(() => {\\n\\t\\ttoggleFollowingThreadMutation.mutate({ rid, tmid: mid, follow: !following });\\n\\t}, [following, rid, mid, toggleFollowingThreadMutation]);\\n\\n\\treturn (\\n\\t\\t<MessageBlock className={followStyle}>\\n\\t\\t\\t<MessageMetrics>\\n\\t\\t\\t\\t<MessageMetricsReply data-rid={rid} data-mid={mid} onClick={() => goToThread({ rid, tmid: mid })}>\\n\\t\\t\\t\\t\\t{t('Reply')}\\n\\t\\t\\t\\t</MessageMetricsReply>\\n\\t\\t\\t\\t<MessageMetricsItem title={t('Replies')}>\\n\\t\\t\\t\\t\\t<MessageMetricsItem.Icon name='thread' />\\n\\t\\t\\t\\t\\t<MessageMetricsItem.Label>{counter}</MessageMetricsItem.Label>\\n\\t\\t\\t\\t</MessageMetricsItem>\\n\\t\\t\\t\\t{!!participants && (\\n\\t\\t\\t\\t\\t<MessageMetricsItem title={t('Participants')}>\\n\\t\\t\\t\\t\\t\\t<MessageMetricsItem.Icon name='user' />\\n\\t\\t\\t\\t\\t\\t<MessageMetricsItem.Label>{participants}</MessageMetricsItem.Label>\\n\\t\\t\\t\\t\\t</MessageMetricsItem>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t<MessageMetricsItem title={lm?.toLocaleString()}>\\n\\t\\t\\t\\t\\t<MessageMetricsItem.Icon name='clock' />\\n\\t\\t\\t\\t\\t<MessageMetricsItem.Label>{format(lm)}</MessageMetricsItem.Label>\\n\\t\\t\\t\\t</MessageMetricsItem>\\n\\t\\t\\t\\t<MessageMetricsItem className={!following ? anchor : undefined} data-rid={rid}>\\n\\t\\t\\t\\t\\t<MessageMetricsFollowing\\n\\t\\t\\t\\t\\t\\ttitle={t(following ? 'Following' : 'Not_following')}\\n\\t\\t\\t\\t\\t\\tname={following ? 'bell' : 'bell-off'}\\n\\t\\t\\t\\t\\t\\tonClick={handleFollow}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</MessageMetricsItem>\\n\\t\\t\\t\\t{(mention || all || unread) && (\\n\\t\\t\\t\\t\\t<MessageMetricsItem>\\n\\t\\t\\t\\t\\t\\t<MessageMetricsItem.Label>\\n\\t\\t\\t\\t\\t\\t\\t{(mention && <MeMentionNotification />) || (all && <AllMentionNotification />) || (unread && <UnreadMessagesNotification />)}\\n\\t\\t\\t\\t\\t\\t</MessageMetricsItem.Label>\\n\\t\\t\\t\\t\\t</MessageMetricsItem>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</MessageMetrics>\\n\\t\\t</MessageBlock>\\n\\t);\\n};\\n\\nexport default ThreadMetrics;\\n\",null],\"names\":[\"MessageMetricsItem\",\"MessageBlock\",\"MessageMetrics\",\"MessageMetricsReply\",\"MessageMetricsFollowing\",\"useToastMessageDispatch\",\"useTranslation\",\"React\",\"useCallback\",\"useTimeAgo\",\"useToggleFollowingThreadMutation\",\"useGoToThread\",\"followStyle\",\"anchor\",\"AllMentionNotification\",\"MeMentionNotification\",\"UnreadMessagesNotification\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"unread\",\"mention\",\"all\",\"rid\",\"mid\",\"counter\",\"participants\",\"following\",\"lm\",\"t\",\"format\",\"goToThread\",\"dispatchToastMessage\",\"toggleFollowingThreadMutation\",\"onError\",\"error\",\"type\",\"message\",\"handleFollow\",\"mutate\",\"tmid\",\"follow\",\"createElement\",\"className\",\"onClick\",\"title\",\"Icon\",\"name\",\"Label\",\"toLocaleString\",\"undefined\"],\"mappings\":\"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\"}"}