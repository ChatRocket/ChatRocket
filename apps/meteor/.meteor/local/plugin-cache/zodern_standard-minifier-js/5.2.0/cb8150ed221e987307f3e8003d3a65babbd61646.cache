{"code":"function module(n,e,t){t.link(\"@babel/runtime/helpers/objectDestructuringEmpty\",{default:function(n){i=n}},0),t.link(\"@babel/runtime/helpers/extends\",{default:function(n){l=n}},1),t.export({OmnichannelCallToggleReady:function(){return _}}),t.link(\"@rocket.chat/fuselage\",{Sidebar:function(n){a=n}},0),t.link(\"react\",{default:function(n){o=n},useCallback:function(n){u=n}},1),t.link(\"react-i18next\",{useTranslation:function(n){c=n}},2),t.link(\"../../../contexts/CallContext\",{useCallerInfo:function(n){r=n},useCallRegisterClient:function(n){s=n},useCallUnregisterClient:function(n){f=n},useVoipNetworkStatus:function(n){d=n}},3);var i,l,a,o,u,c,r,s,f,d,_=function(n){var e=l({},(i(n),n)),t=c().t,_=r(),C=f(),b=s(),k=d(),g=![\"ERROR\",\"INITIAL\",\"UNREGISTERED\"].includes(_.state),p=[\"IN_CALL\"].includes(_.state),h=u(function(){if(g){C();return}b()},[g,b,C]);return o.createElement(a.TopBar.Action,l({icon:\"offline\"===k?\"phone-issue\":g?\"phone\":\"phone-disabled\",disabled:p,\"aria-checked\":g,\"aria-label\":t(\"VoIP_Toggle\"),\"data-tooltip\":t(\"offline\"===k?\"Waiting_for_server_connection\":p?\"Cannot_disable_while_on_call\":g?\"Turn_off_answer_calls\":\"Turn_on_answer_calls\")},e,{success:g,warning:\"offline\"===k,onClick:h}))}}","map":"{\"version\":3,\"sources\":[\"client/sidebar/sections/actions/OmnichannelCallToggleReady.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Sidebar } from '@rocket.chat/fuselage';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useCallerInfo, useCallRegisterClient, useCallUnregisterClient, useVoipNetworkStatus } from '../../../contexts/CallContext';\\n\\nexport const OmnichannelCallToggleReady = ({ ...props }): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst caller = useCallerInfo();\\n\\tconst unregister = useCallUnregisterClient();\\n\\tconst register = useCallRegisterClient();\\n\\n\\tconst networkStatus = useVoipNetworkStatus();\\n\\tconst registered = !['ERROR', 'INITIAL', 'UNREGISTERED'].includes(caller.state);\\n\\tconst inCall = ['IN_CALL'].includes(caller.state);\\n\\n\\tconst onClickVoipButton = useCallback((): void => {\\n\\t\\tif (registered) {\\n\\t\\t\\tunregister();\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tregister();\\n\\t}, [registered, register, unregister]);\\n\\n\\tconst getTitle = (): string => {\\n\\t\\tif (networkStatus === 'offline') {\\n\\t\\t\\treturn t('Waiting_for_server_connection');\\n\\t\\t}\\n\\n\\t\\tif (inCall) {\\n\\t\\t\\treturn t('Cannot_disable_while_on_call');\\n\\t\\t}\\n\\n\\t\\tif (registered) {\\n\\t\\t\\treturn t('Turn_off_answer_calls');\\n\\t\\t}\\n\\n\\t\\treturn t('Turn_on_answer_calls');\\n\\t};\\n\\n\\tconst getIcon = (): 'phone-issue' | 'phone' | 'phone-disabled' => {\\n\\t\\tif (networkStatus === 'offline') {\\n\\t\\t\\treturn 'phone-issue';\\n\\t\\t}\\n\\t\\treturn registered ? 'phone' : 'phone-disabled';\\n\\t};\\n\\n\\treturn (\\n\\t\\t<Sidebar.TopBar.Action\\n\\t\\t\\ticon={getIcon()}\\n\\t\\t\\tdisabled={inCall}\\n\\t\\t\\taria-checked={registered}\\n\\t\\t\\taria-label={t('VoIP_Toggle')}\\n\\t\\t\\tdata-tooltip={getTitle()}\\n\\t\\t\\t{...props}\\n\\t\\t\\tsuccess={registered}\\n\\t\\t\\twarning={networkStatus === 'offline'}\\n\\t\\t\\tonClick={onClickVoipButton}\\n\\t\\t/>\\n\\t);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectDestructuringEmpty\",\"_extends\",\"export\",\"OmnichannelCallToggleReady\",\"Sidebar\",\"React\",\"useCallback\",\"useTranslation\",\"useCallerInfo\",\"useCallRegisterClient\",\"useCallUnregisterClient\",\"useVoipNetworkStatus\",\"_ref\",\"props\",\"t\",\"_useTranslation\",\"caller\",\"unregister\",\"register\",\"networkStatus\",\"registered\",\"includes\",\"state\",\"inCall\",\"onClickVoipButton\",\"createElement\",\"TopBar\",\"Action\",\"icon\",\"disabled\",\"success\",\"warning\",\"onClick\"],\"mappings\":\"uBAAwBA,EAAAC,IAAA,CAAA,kDAAwB,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAhDH,EAAOM,MAAE,CAAA,CAAAC,2BAAe,WAAwB,OAAAA,CAAA,CAAA,GAAAP,EAAAC,IAAA,CAAA,wBAAA,CAAAO,QAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAM,EAAAN,CAAA,EAAAO,YAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAU,eAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gCAAA,CAAAW,cAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,EAAAU,sBAAA,SAAAV,CAAA,EAAAU,EAAAV,CAAA,EAAAW,wBAAA,SAAAX,CAAA,EAAAW,EAAAX,CAAA,EAAAY,qBAAA,SAAAZ,CAAA,EAAAY,EAAAZ,CAAA,CAAA,EAAA,GAOzC,IAPPC,EAAgDC,EAAAG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAOnCR,EAA6B,SAAAS,CAAA,EAA+B,IAAzBC,EAAKZ,EAAA,CAAA,EAAAD,CAAAA,EAAAY,GAAAA,CAAAA,GAC5CE,EAACC,AAAKR,IAANO,CAAC,CAEHE,EAASR,IACTS,EAAaP,IACbQ,EAAWT,IAEXU,EAAgBR,IAChBS,EAAa,CAAC,CAAC,QAAS,UAAW,eAAe,CAACC,QAAQ,CAACL,EAAOM,KAAK,EACxEC,EAAS,CAAC,UAAU,CAACF,QAAQ,CAACL,EAAOM,KAAK,EAE1CE,EAAoBlB,EAAY,WACrC,GAAIc,EAAY,CACfH,IACA,MACD,CACAC,GACD,EAAG,CAACE,EAAYF,EAAUD,EAAW,EAyBrC,OACCZ,EAAAoB,aAAA,CAACrB,EAAQsB,MAAM,CAACC,MAAM,CAAA1B,EAAA,CACrB2B,KARD,AAAIT,AAAkB,YAAlBA,EACI,cAEDC,EAAa,QAAU,iBAM7BS,SAAUN,EACV,eAAcH,EACd,aAAYN,EAAE,eACd,cAAA,CA3BOA,EAAE,AADNK,AAAkB,YAAlBA,EACM,gCAIA,AADNI,EACM,+BAIA,AADNH,EACM,wBAGD,uBAgBiB,EACrBP,EAAK,CACTiB,QAASV,EACTW,QAASZ,AAAkB,YAAlBA,EACTa,QAASR,CAAkB,GAG9B\"}"}