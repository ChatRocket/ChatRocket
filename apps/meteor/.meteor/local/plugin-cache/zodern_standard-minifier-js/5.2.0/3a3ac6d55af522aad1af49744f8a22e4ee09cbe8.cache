{"code":"function module(n,e,t){t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(n){r=n}},0),t.link(\"@babel/runtime/regenerator\",{default:function(n){u=n}},1),t.export({useToggleFollowingThreadMutation:function(){return l}}),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(n){a=n}},0),t.link(\"@tanstack/react-query\",{useMutation:function(n){o=n},useQueryClient:function(n){i=n}},1);var r,u,a,o,i,l=function(n){var e=a(\"POST\",\"/v1/chat.followMessage\"),t=a(\"POST\",\"/v1/chat.unfollowMessage\"),l=i();return o(function(n){var r;return u.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=n.tmid,!n.follow){a.next=5;break}return a.next=4,u.awrap(e({mid:r}));case 4:return a.abrupt(\"return\");case 5:return a.next=7,u.awrap(t({mid:r}));case 7:case\"end\":return a.stop()}},null,null,null,Promise)},r(r({},n),{},{onSuccess:function(e,t,r){var a;return u.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,u.awrap(l.invalidateQueries([\"rooms\",t.rid,\"threads\"]));case 2:return o.abrupt(\"return\",null==n?void 0:null===(a=n.onSuccess)||void 0===a?void 0:a.call(n,e,t,r));case 3:case\"end\":return o.stop()}},null,null,null,Promise)}}))}}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/Threads/hooks/useToggleFollowingThreadMutation.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport type { UseMutationOptions, UseMutationResult } from '@tanstack/react-query';\\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\\n\\n// TODO: its core should be moved to the ChatContext\\n\\ntype UseToggleFollowingThreadMutationVariables = {\\n\\trid: IMessage['rid'];\\n\\ttmid: IMessage['_id'];\\n\\tfollow: boolean;\\n};\\n\\nexport const useToggleFollowingThreadMutation = (\\n\\toptions?: Omit<UseMutationOptions<void, Error, UseToggleFollowingThreadMutationVariables>, 'mutationFn'>,\\n): UseMutationResult<void, Error, UseToggleFollowingThreadMutationVariables> => {\\n\\tconst followMessage = useEndpoint('POST', '/v1/chat.followMessage');\\n\\tconst unfollowMessage = useEndpoint('POST', '/v1/chat.unfollowMessage');\\n\\n\\tconst queryClient = useQueryClient();\\n\\n\\treturn useMutation(\\n\\t\\tasync ({ tmid, follow }) => {\\n\\t\\t\\tif (follow) {\\n\\t\\t\\t\\tawait followMessage({ mid: tmid });\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tawait unfollowMessage({ mid: tmid });\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t...options,\\n\\t\\t\\tonSuccess: async (data, variables, context) => {\\n\\t\\t\\t\\tawait queryClient.invalidateQueries(['rooms', variables.rid, 'threads']);\\n\\t\\t\\t\\treturn options?.onSuccess?.(data, variables, context);\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"_regeneratorRuntime\",\"export\",\"useToggleFollowingThreadMutation\",\"useEndpoint\",\"useMutation\",\"useQueryClient\",\"options\",\"followMessage\",\"unfollowMessage\",\"queryClient\",\"_ref\",\"tmid\",\"async\",\"_context\",\"prev\",\"next\",\"follow\",\"awrap\",\"mid\",\"abrupt\",\"stop\",\"Promise\",\"onSuccess\",\"data\",\"variables\",\"context\",\"_options$onSuccess\",\"_context2\",\"invalidateQueries\",\"rid\",\"call\"],\"mappings\":\"uBACSA,EAAaC,IAAM,CAAA,uCAA2B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAvDH,EAAOM,MAAE,CAAA,CAAAC,iCAAmB,WAA2B,OAAAA,CAAA,CAAA,GAAAP,EAAAC,IAAA,CAAA,2BAAA,CAAAO,YAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAQ,YAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,EAAAO,eAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAYhD,IAZPC,EAAuDC,EAAAG,EAAAC,EAAAC,EAY1CH,EAAmC,SAC/CI,CAAwG,EAExG,IAAMC,EAAgBJ,EAAY,OAAQ,0BACpCK,EAAkBL,EAAY,OAAQ,4BAEtCM,EAAcJ,IAEpB,OAAOD,EACN,SAAAM,CAAA,EAAA,IAAAC,EAAA,OAAAX,EAAAY,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAqB,GAAZJ,EAAID,EAAJC,IAAI,CAAQ,CAAAD,EAANM,MAAM,CACV,CAAAH,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAE,IAAA,CAAA,EAAAf,EAAAiB,KAAA,CACHV,EAAc,CAAEW,IAAKP,CAAI,GAAG,MAAA,EAAA,OAAAE,EAAAM,MAAA,CAAA,SAAA,MAAA,EAAA,OAAAN,EAAAE,IAAA,CAAA,EAAAf,EAAAiB,KAAA,CAI7BT,EAAgB,CAAEU,IAAKP,CAAI,GAAG,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAO,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EACpCtB,EAAAA,EAAA,CAAA,EAEGO,GAAO,CAAA,EAAA,CACVgB,UAAW,SAAOC,CAAI,CAAEC,CAAS,CAAEC,CAAO,EAAA,IAAAC,EAAA,OAAA1B,EAAAY,KAAA,CAAA,SAAAe,CAAA,EAAA,OAAA,OAAAA,EAAAb,IAAA,CAAAa,EAAAZ,IAAA,EAAA,KAAA,EAAA,OAAAY,EAAAZ,IAAA,CAAA,EAAAf,EAAAiB,KAAA,CACnCR,EAAYmB,iBAAiB,CAAC,CAAC,QAASJ,EAAUK,GAAG,CAAE,UAAU,EAAC,MAAA,EAAA,OAAAF,EAAAR,MAAA,CAAA,SACjEb,MAAAA,EAAO,KAAA,EAAA,AAAW,OAAXoB,CAAAA,EAAPpB,EAASgB,SAAS,AAATA,GAASI,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAlBA,EAAAI,IAAA,CAAAxB,EAAqBiB,EAAMC,EAAWC,GAAQ,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAP,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,CACrD,GAGJ\"}"}