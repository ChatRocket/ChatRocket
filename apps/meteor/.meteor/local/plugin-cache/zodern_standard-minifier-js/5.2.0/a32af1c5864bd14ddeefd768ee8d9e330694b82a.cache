{"code":"function module(e,n,o){o.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){t=e}},0),o.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){i=e}},1),o.link(\"@rocket.chat/fuselage-hooks\",{useBreakpoints:function(e){u=e}},0),o.link(\"@rocket.chat/ui-contexts\",{LayoutContext:function(e){r=e},useRouter:function(e){a=e},useSetting:function(e){c=e}},1),o.link(\"react\",{default:function(e){l=e},useMemo:function(e){d=e},useState:function(e){s=e},useEffect:function(e){f=e}},2);var t,i,u,r,a,c,l,d,s,f,m={roomToolbox:[],messageToolbox:[],composerToolbox:[],userToolbox:[]};o.exportDefault(function(e){var n=e.children,o=!!c(\"UI_Show_top_navbar_embedded_layout\"),b=s(!1),x=i(b,2),v=x[0],p=x[1],h=u(),g=s(m),k=i(g,2),E=k[0],T=k[1],w=a(),y=s(function(){return\"embedded\"===w.getSearchParameters().layout}),S=i(y,1)[0],_=!h.includes(\"md\");return f(function(){p(_)},[_]),f(function(){var e=function(e){var n;(null===(n=e.data)||void 0===n?void 0:n.event)===\"overrideUi\"&&T(t(t({},m),e.data.hideActions))};return window.addEventListener(\"message\",e),function(){return window.removeEventListener(\"message\",e)}},[]),l.createElement(r.Provider,{children:n,value:d(function(){return{isMobile:_,isEmbedded:S,showTopNavbarEmbeddedLayout:o,sidebar:{isCollapsed:v,toggle:function(){return p(function(e){return!e})},collapse:function(){return p(!0)},expand:function(){return p(!1)},close:function(){return S?p(!0):w.navigate(\"/home\")}},size:{sidebar:\"240px\",contextualBar:h.includes(\"sm\")?h.includes(\"xl\")?\"38%\":\"380px\":\"100%\"},roomToolboxExpanded:h.includes(\"lg\"),contextualBarExpanded:h.includes(\"sm\"),contextualBarPosition:h.includes(\"sm\")?h.includes(\"lg\")?\"relative\":\"absolute\":\"fixed\",hiddenActions:E}},[_,S,o,v,h,w,E])})})}","map":"{\"version\":3,\"sources\":[\"client/providers/LayoutProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useBreakpoints } from '@rocket.chat/fuselage-hooks';\\nimport { LayoutContext, useRouter, useSetting } from '@rocket.chat/ui-contexts';\\nimport type { ReactNode } from 'react';\\nimport React, { useMemo, useState, useEffect } from 'react';\\n\\nconst hiddenActionsDefaultValue = {\\n\\troomToolbox: [],\\n\\tmessageToolbox: [],\\n\\tcomposerToolbox: [],\\n\\tuserToolbox: [],\\n};\\n\\ntype LayoutProviderProps = {\\n\\tchildren?: ReactNode;\\n};\\n\\nconst LayoutProvider = ({ children }: LayoutProviderProps) => {\\n\\tconst showTopNavbarEmbeddedLayout = Boolean(useSetting('UI_Show_top_navbar_embedded_layout'));\\n\\tconst [isCollapsed, setIsCollapsed] = useState(false);\\n\\tconst breakpoints = useBreakpoints(); // [\\\"xs\\\", \\\"sm\\\", \\\"md\\\", \\\"lg\\\", \\\"xl\\\", xxl\\\"]\\n\\tconst [hiddenActions, setHiddenActions] = useState(hiddenActionsDefaultValue);\\n\\n\\tconst router = useRouter();\\n\\t// Once the layout is embedded, it can't be changed\\n\\tconst [isEmbedded] = useState(() => router.getSearchParameters().layout === 'embedded');\\n\\n\\tconst isMobile = !breakpoints.includes('md');\\n\\n\\tuseEffect(() => {\\n\\t\\tsetIsCollapsed(isMobile);\\n\\t}, [isMobile]);\\n\\n\\tuseEffect(() => {\\n\\t\\tconst eventHandler = (event: MessageEvent<any>) => {\\n\\t\\t\\tif (event.data?.event !== 'overrideUi') {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tsetHiddenActions({ ...hiddenActionsDefaultValue, ...event.data.hideActions });\\n\\t\\t};\\n\\t\\twindow.addEventListener('message', eventHandler);\\n\\t\\treturn () => window.removeEventListener('message', eventHandler);\\n\\t}, []);\\n\\n\\treturn (\\n\\t\\t<LayoutContext.Provider\\n\\t\\t\\tchildren={children}\\n\\t\\t\\tvalue={useMemo(\\n\\t\\t\\t\\t() => ({\\n\\t\\t\\t\\t\\tisMobile,\\n\\t\\t\\t\\t\\tisEmbedded,\\n\\t\\t\\t\\t\\tshowTopNavbarEmbeddedLayout,\\n\\t\\t\\t\\t\\tsidebar: {\\n\\t\\t\\t\\t\\t\\tisCollapsed,\\n\\t\\t\\t\\t\\t\\ttoggle: () => setIsCollapsed((isCollapsed) => !isCollapsed),\\n\\t\\t\\t\\t\\t\\tcollapse: () => setIsCollapsed(true),\\n\\t\\t\\t\\t\\t\\texpand: () => setIsCollapsed(false),\\n\\t\\t\\t\\t\\t\\tclose: () => (isEmbedded ? setIsCollapsed(true) : router.navigate('/home')),\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tsize: {\\n\\t\\t\\t\\t\\t\\tsidebar: '240px',\\n\\t\\t\\t\\t\\t\\t// eslint-disable-next-line no-nested-ternary\\n\\t\\t\\t\\t\\t\\tcontextualBar: breakpoints.includes('sm') ? (breakpoints.includes('xl') ? '38%' : '380px') : '100%',\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\troomToolboxExpanded: breakpoints.includes('lg'),\\n\\t\\t\\t\\t\\tcontextualBarExpanded: breakpoints.includes('sm'),\\n\\t\\t\\t\\t\\t// eslint-disable-next-line no-nested-ternary\\n\\t\\t\\t\\t\\tcontextualBarPosition: breakpoints.includes('sm') ? (breakpoints.includes('lg') ? 'relative' : 'absolute') : 'fixed',\\n\\t\\t\\t\\t\\thiddenActions,\\n\\t\\t\\t\\t}),\\n\\t\\t\\t\\t[isMobile, isEmbedded, showTopNavbarEmbeddedLayout, isCollapsed, breakpoints, router, hiddenActions],\\n\\t\\t\\t)}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default LayoutProvider;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"_slicedToArray\",\"useBreakpoints\",\"LayoutContext\",\"useRouter\",\"useSetting\",\"React\",\"useMemo\",\"useState\",\"useEffect\",\"hiddenActionsDefaultValue\",\"roomToolbox\",\"messageToolbox\",\"composerToolbox\",\"userToolbox\",\"exportDefault\",\"_ref\",\"children\",\"showTopNavbarEmbeddedLayout\",\"Boolean\",\"_useState\",\"_useState2\",\"isCollapsed\",\"setIsCollapsed\",\"breakpoints\",\"_useState3\",\"_useState4\",\"hiddenActions\",\"setHiddenActions\",\"router\",\"_useState5\",\"getSearchParameters\",\"layout\",\"isEmbedded\",\"_useState6\",\"isMobile\",\"includes\",\"eventHandler\",\"event\",\"_event$data\",\"data\",\"hideActions\",\"window\",\"addEventListener\",\"removeEventListener\",\"createElement\",\"Provider\",\"value\",\"sidebar\",\"toggle\",\"collapse\",\"expand\",\"close\",\"navigate\",\"size\",\"contextualBar\",\"roomToolboxExpanded\",\"contextualBarExpanded\",\"contextualBarPosition\"],\"mappings\":\"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\"}"}