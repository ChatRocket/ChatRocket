{"code":"function module(e,t,l){let a,n,o,r,i,u,c,s,m,d,p,k,v,h,b,f;let y=[\"value\",\"onChange\"],E=[\"selected\",\"onRemove\"],g=[\"value\",\"label\"];l.link(\"@babel/runtime/helpers/extends\",{default(e){a=e}},0),l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},1),l.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){o=e}},2),l.link(\"@rocket.chat/fuselage\",{AutoComplete(e){r=e},Option(e){i=e},Chip(e){u=e},Box(e){c=e},Skeleton(e){s=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue(e){m=e}},1),l.link(\"@rocket.chat/ui-avatar\",{RoomAvatar(e){d=e}},2),l.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){p=e}},3),l.link(\"@tanstack/react-query\",{useQuery(e){k=e}},4),l.link(\"react\",{default(e){v=e},memo(e){h=e},useMemo(e){b=e},useState(e){f=e}},5);let S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\";return{selector:JSON.stringify({name:e})}};l.exportDefault(h(e=>{var t;let{value:l,onChange:h}=e,x=o(e,y),[C,A]=f(\"\"),P=m(C,300),D=p(\"GET\",\"/v1/rooms.autocomplete.channelAndPrivate\"),j=k([\"rooms.autocomplete.channelAndPrivate\",P],()=>D(S(P)),{keepPreviousData:!0}),z=b(()=>j.isSuccess?j.data.items.map(e=>{let{fname:t,name:l,_id:a,avatarETag:n,t:o}=e;return{value:a,label:{name:t||l,avatarETag:n,type:o}}}):[],[null===(t=j.data)||void 0===t?void 0:t.items,j.isSuccess]);return j.isLoading?v.createElement(s,null):v.createElement(r,a({},x,{value:l,onChange:h,filter:C,setFilter:A,multiple:!0,renderSelected:e=>{let{selected:{value:t,label:l},onRemove:r}=e,i=o(e,E);return v.createElement(u,a({},i,{key:t,value:t,onClick:r}),v.createElement(d,{size:\"x20\",room:n({type:(null==l?void 0:l.type)||\"c\",_id:t},l)}),v.createElement(c,{is:\"span\",margin:\"none\",mis:4},null==l?void 0:l.name))},renderItem:e=>{let{value:t,label:l}=e,r=o(e,g);return v.createElement(i,a({key:t},r,{label:l.name,avatar:v.createElement(d,{size:\"x20\",room:n({type:(null==l?void 0:l.type)||\"c\",_id:t},l)})}))},options:z}))}))}","map":"{\"version\":3,\"sources\":[\"client/components/RoomAutoCompleteMultiple/RoomAutoCompleteMultiple.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { AutoComplete, Option, Chip, Box, Skeleton } from '@rocket.chat/fuselage';\\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\\nimport { RoomAvatar } from '@rocket.chat/ui-avatar';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ReactElement, ComponentProps } from 'react';\\nimport React, { memo, useMemo, useState } from 'react';\\n\\nconst generateQuery = (\\n\\tterm = '',\\n): {\\n\\tselector: string;\\n} => ({ selector: JSON.stringify({ name: term }) });\\n\\ntype RoomAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'> & {\\n\\treadOnly?: boolean;\\n};\\n\\nconst RoomAutoCompleteMultiple = ({ value, onChange, ...props }: RoomAutoCompleteProps): ReactElement => {\\n\\tconst [filter, setFilter] = useState('');\\n\\tconst filterDebounced = useDebouncedValue(filter, 300);\\n\\tconst autocomplete = useEndpoint('GET', '/v1/rooms.autocomplete.channelAndPrivate');\\n\\n\\tconst result = useQuery(['rooms.autocomplete.channelAndPrivate', filterDebounced], () => autocomplete(generateQuery(filterDebounced)), {\\n\\t\\tkeepPreviousData: true,\\n\\t});\\n\\n\\tconst options = useMemo(\\n\\t\\t() =>\\n\\t\\t\\tresult.isSuccess\\n\\t\\t\\t\\t? result.data.items.map(({ fname, name, _id, avatarETag, t }) => ({\\n\\t\\t\\t\\t\\t\\tvalue: _id,\\n\\t\\t\\t\\t\\t\\tlabel: { name: fname || name, avatarETag, type: t },\\n\\t\\t\\t\\t  }))\\n\\t\\t\\t\\t: [],\\n\\t\\t[result.data?.items, result.isSuccess],\\n\\t);\\n\\n\\tif (result.isLoading) {\\n\\t\\treturn <Skeleton />;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<AutoComplete\\n\\t\\t\\t{...props}\\n\\t\\t\\tvalue={value}\\n\\t\\t\\tonChange={onChange}\\n\\t\\t\\tfilter={filter}\\n\\t\\t\\tsetFilter={setFilter}\\n\\t\\t\\tmultiple\\n\\t\\t\\trenderSelected={({ selected: { value, label }, onRemove, ...props }): ReactElement => (\\n\\t\\t\\t\\t<Chip {...props} key={value} value={value} onClick={onRemove}>\\n\\t\\t\\t\\t\\t<RoomAvatar size='x20' room={{ type: label?.type || 'c', _id: value, ...label }} />\\n\\t\\t\\t\\t\\t<Box is='span' margin='none' mis={4}>\\n\\t\\t\\t\\t\\t\\t{label?.name}\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t</Chip>\\n\\t\\t\\t)}\\n\\t\\t\\trenderItem={({ value, label, ...props }): ReactElement => (\\n\\t\\t\\t\\t<Option\\n\\t\\t\\t\\t\\tkey={value}\\n\\t\\t\\t\\t\\t{...props}\\n\\t\\t\\t\\t\\tlabel={label.name}\\n\\t\\t\\t\\t\\tavatar={<RoomAvatar size='x20' room={{ type: label?.type || 'c', _id: value, ...label }} />}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\t\\t\\toptions={options}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(RoomAutoCompleteMultiple);\\n\",null],\"names\":[\"_extends\",\"_objectSpread\",\"_objectWithoutProperties\",\"AutoComplete\",\"Option\",\"Chip\",\"Box\",\"Skeleton\",\"useDebouncedValue\",\"RoomAvatar\",\"useEndpoint\",\"useQuery\",\"React\",\"memo\",\"useMemo\",\"useState\",\"module\",\"link\",\"default\",\"v\",\"generateQuery\",\"term\",\"arguments\",\"length\",\"undefined\",\"selector\",\"JSON\",\"stringify\",\"name\",\"exportDefault\",\"_ref\",\"_result$data\",\"value\",\"onChange\",\"props\",\"_excluded\",\"filter\",\"setFilter\",\"filterDebounced\",\"autocomplete\",\"result\",\"keepPreviousData\",\"options\",\"isSuccess\",\"data\",\"items\",\"map\",\"_ref2\",\"fname\",\"_id\",\"avatarETag\",\"t\",\"label\",\"type\",\"isLoading\",\"createElement\",\"multiple\",\"renderSelected\",\"_ref3\",\"selected\",\"onRemove\",\"_excluded2\",\"key\",\"onClick\",\"size\",\"room\",\"is\",\"margin\",\"mis\",\"renderItem\",\"_ref4\",\"_excluded3\",\"avatar\"],\"mappings\":\"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\"}"}