{"code":"function module(n,e,r){r.link(\"@babel/runtime/regenerator\",{default:function(n){t=n}},0),r.export({useOpenIncompatibleModal:function(){return s}}),r.link(\"@rocket.chat/ui-contexts\",{useSetModal:function(n){a=n}},0),r.link(\"react\",{default:function(n){l=n},useCallback:function(n){c=n}},1),r.link(\"../IframeModal\",{default:function(n){o=n}},2),r.link(\"../helpers/handleAPIError\",{handleAPIError:function(n){u=n}},3),r.link(\"./useAppsOrchestration\",{useAppsOrchestration:function(n){i=n}},4);var t,a,l,c,o,u,i,s=function(){var n=a(),e=i();if(!e)throw Error(\"Apps orchestrator is not available\");return c(function(r,a,c){var i,s,f;return t.async(function(p){for(;;)switch(p.prev=p.next){case 0:return i=function(){n(null),c()},s=function(){n(null),c()},p.prev=2,p.next=5,t.awrap(e.buildIncompatibleExternalUrl(r.id,r.marketplaceVersion,a));case 5:f=p.sent,n(l.createElement(o,{url:f.url,cancel:i,confirm:s})),p.next=12;break;case 9:p.prev=9,p.t0=p.catch(2),u(p.t0);case 12:case\"end\":return p.stop()}},null,null,[[2,9]],Promise)},[e,n])}}","map":"{\"version\":3,\"sources\":[\"client/views/marketplace/hooks/useOpenIncompatibleModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useSetModal } from '@rocket.chat/ui-contexts';\\nimport React, { useCallback } from 'react';\\n\\nimport IframeModal from '../IframeModal';\\nimport { handleAPIError } from '../helpers/handleAPIError';\\nimport { useAppsOrchestration } from './useAppsOrchestration';\\n\\nexport const useOpenIncompatibleModal = () => {\\n\\tconst setModal = useSetModal();\\n\\n\\tconst appsOrchestrator = useAppsOrchestration();\\n\\n\\tif (!appsOrchestrator) {\\n\\t\\tthrow new Error('Apps orchestrator is not available');\\n\\t}\\n\\n\\treturn useCallback(\\n\\t\\tasync (app, actionName, cancelAction) => {\\n\\t\\t\\tconst handleCancel = () => {\\n\\t\\t\\t\\tsetModal(null);\\n\\t\\t\\t\\tcancelAction();\\n\\t\\t\\t};\\n\\n\\t\\t\\tconst handleConfirm = () => {\\n\\t\\t\\t\\tsetModal(null);\\n\\t\\t\\t\\tcancelAction();\\n\\t\\t\\t};\\n\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst incompatibleData = await appsOrchestrator.buildIncompatibleExternalUrl(app.id, app.marketplaceVersion, actionName);\\n\\t\\t\\t\\tsetModal(<IframeModal url={incompatibleData.url} cancel={handleCancel} confirm={handleConfirm} />);\\n\\t\\t\\t} catch (e) {\\n\\t\\t\\t\\thandleAPIError(e);\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[appsOrchestrator, setModal],\\n\\t);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"export\",\"useOpenIncompatibleModal\",\"useSetModal\",\"React\",\"useCallback\",\"IframeModal\",\"handleAPIError\",\"useAppsOrchestration\",\"setModal\",\"appsOrchestrator\",\"Error\",\"app\",\"actionName\",\"cancelAction\",\"handleCancel\",\"handleConfirm\",\"incompatibleData\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"buildIncompatibleExternalUrl\",\"id\",\"marketplaceVersion\",\"sent\",\"createElement\",\"url\",\"cancel\",\"confirm\",\"t0\",\"stop\",\"Promise\"],\"mappings\":\"uBAAsBA,EAAMC,IAAA,CAAA,6BAA2B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAvDH,EAAOK,MAAE,CAAA,CAAAC,yBAAmB,WAAA,OAA2BA,CAAA,CAAA,GAAAN,EAAAC,IAAA,CAAA,2BAAA,CAAAM,YAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAK,EAAAL,CAAA,EAAAM,YAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iBAAA,CAAA,QAAA,SAAAE,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,4BAAA,CAAAU,eAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yBAAA,CAAAW,qBAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,CAAA,EAAA,GAOhD,IAPPC,EAAuDG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAO1CN,EAA2B,WACvC,IAAMO,EAAWN,IAEXO,EAAmBF,IAEzB,GAAI,CAACE,EACJ,MAAM,AAAIC,MAAM,sCAGjB,OAAON,EACN,SAAOO,CAAG,CAAEC,CAAU,CAAEC,CAAY,EAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAjB,EAAAkB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EASlC,OARKN,EAAe,WACpBN,EAAS,MACTK,GACD,EAEME,EAAgB,WACrBP,EAAS,MACTK,GACD,EAACK,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAArB,EAAAsB,KAAA,CAG+BZ,EAAiBa,4BAA4B,CAACX,EAAIY,EAAE,CAAEZ,EAAIa,kBAAkB,CAAEZ,GAAW,MAAA,EAAlHI,EAAgBE,EAAAO,IAAA,CACtBjB,EAASL,EAAAuB,aAAA,CAACrB,EAAW,CAACsB,IAAKX,EAAiBW,GAAI,CAACC,OAAQd,EAAce,QAASd,CAAc,IAAKG,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,EAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAY,EAAA,CAAAZ,EAAA,KAAA,CAAA,GAEnGZ,EAAcY,EAAAY,EAAE,CAAE,MAAA,GAAA,IAAA,MAAA,OAAAZ,EAAAa,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAAAC,QAAA,EAGpB,CAACvB,EAAkBD,EAAS,CAE9B\"}"}