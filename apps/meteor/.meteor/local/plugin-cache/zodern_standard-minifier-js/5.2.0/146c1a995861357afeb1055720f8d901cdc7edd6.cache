{"code":"function module(e,n,o){o.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){t=e}},0),o.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){l=e}},1),o.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){i=e}},0),o.link(\"@rocket.chat/ui-contexts\",{usePermission:function(e){u=e}},1),o.link(\"react\",{default:function(e){r=e},useState:function(e){c=e},useCallback:function(e){a=e}},2),o.link(\"./RemoveUsersFirstStep\",{default:function(e){s=e}},3),o.link(\"./RemoveUsersSecondStep\",{default:function(e){f=e}},4);var t,l,i,u,r,c,a,s,f,d={LIST_ROOMS:\"LIST_ROOMS\",CONFIRM_DELETE:\"CONFIRM_DELETE\"};o.exportDefault(function(e){var n,o=e.onClose,m=e.onCancel,E=e.onConfirm,C=e.rooms,v=e.currentStep,O=void 0===v?(null==C?void 0:C.length)===0?d.CONFIRM_DELETE:d.LIST_ROOMS:v,R=e.username,S=c(O),_=l(S,2),h=_[0],k=_[1],b=c({}),L=l(b,2),T=L[0],g=L[1],M=i(function(){return k(d.CONFIRM_DELETE)}),I=i(function(){return k(d.LIST_ROOMS)}),p=u(\"view-all-team-channels\"),D=null==C?void 0:C.filter(function(e){return!e.isLastOwner}),F=a(function(e){g(function(n){var o;return n[e._id]?(delete n[e._id],t({},n)):t(t({},n),{},((o={})[e._id]=e,o))})},[]),N=i(function(){if(0===Object.values(T).filter(Boolean).length){var e;return g(Object.fromEntries(null!==(e=null==D?void 0:D.map(function(e){return[e._id,e]}))&&void 0!==e?e:[]))}g({})});return h!==d.CONFIRM_DELETE&&p?r.createElement(s,{onConfirm:M,onClose:o,onCancel:m,rooms:C,selectedRooms:T,onToggleAllRooms:N,onChangeRoomSelection:F,eligibleRoomsLength:null==D?void 0:D.length}):r.createElement(f,{onConfirm:E,onClose:o,onCancel:(null!==(n=null==C?void 0:C.length)&&void 0!==n?n:0)>0?I:m,deletedRooms:T,rooms:C,username:R})})}","map":"{\"version\":3,\"sources\":[\"client/views/teams/contextualBar/members/RemoveUsersModal/BaseRemoveUsersModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, Serialized } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { usePermission } from '@rocket.chat/ui-contexts';\\nimport React, { useState, useCallback } from 'react';\\n\\nimport RemoveUsersFirstStep from './RemoveUsersFirstStep';\\nimport RemoveUsersSecondStep from './RemoveUsersSecondStep';\\n\\nconst STEPS = {\\n\\tLIST_ROOMS: 'LIST_ROOMS',\\n\\tCONFIRM_DELETE: 'CONFIRM_DELETE',\\n};\\n\\ntype BaseRemoveUsersModalProps = {\\n\\tonClose: () => void;\\n\\tonCancel: () => void;\\n\\tonConfirm: (deletedRooms: { [key: string]: Serialized<IRoom> }) => void;\\n\\tcurrentStep?: string;\\n\\trooms?: (Serialized<IRoom> & { isLastOwner?: boolean })[];\\n\\tusername?: string;\\n};\\n\\nconst BaseRemoveUsersModal = ({\\n\\tonClose,\\n\\tonCancel,\\n\\tonConfirm,\\n\\trooms,\\n\\tcurrentStep = rooms?.length === 0 ? STEPS.CONFIRM_DELETE : STEPS.LIST_ROOMS,\\n\\tusername,\\n}: BaseRemoveUsersModalProps) => {\\n\\tconst [step, setStep] = useState(currentStep);\\n\\n\\tconst [selectedRooms, setSelectedRooms] = useState<Record<string, Serialized<IRoom> & { isLastOwner?: boolean }>>({});\\n\\n\\tconst onContinue = useMutableCallback(() => setStep(STEPS.CONFIRM_DELETE));\\n\\tconst onReturn = useMutableCallback(() => setStep(STEPS.LIST_ROOMS));\\n\\n\\tconst canViewUserRooms = usePermission('view-all-team-channels');\\n\\n\\tconst eligibleRooms = rooms?.filter(({ isLastOwner }) => !isLastOwner);\\n\\n\\tconst onChangeRoomSelection = useCallback((room) => {\\n\\t\\tsetSelectedRooms((selectedRooms) => {\\n\\t\\t\\tif (selectedRooms[room._id]) {\\n\\t\\t\\t\\tdelete selectedRooms[room._id];\\n\\t\\t\\t\\treturn { ...selectedRooms };\\n\\t\\t\\t}\\n\\t\\t\\treturn { ...selectedRooms, [room._id]: room };\\n\\t\\t});\\n\\t}, []);\\n\\n\\tconst onToggleAllRooms = useMutableCallback(() => {\\n\\t\\tif (Object.values(selectedRooms).filter(Boolean).length === 0) {\\n\\t\\t\\treturn setSelectedRooms(Object.fromEntries(eligibleRooms?.map((room) => [room._id, room]) ?? []));\\n\\t\\t}\\n\\t\\tsetSelectedRooms({});\\n\\t});\\n\\n\\tif (step === STEPS.CONFIRM_DELETE || !canViewUserRooms) {\\n\\t\\treturn (\\n\\t\\t\\t<RemoveUsersSecondStep\\n\\t\\t\\t\\tonConfirm={onConfirm}\\n\\t\\t\\t\\tonClose={onClose}\\n\\t\\t\\t\\tonCancel={(rooms?.length ?? 0) > 0 ? onReturn : onCancel}\\n\\t\\t\\t\\tdeletedRooms={selectedRooms}\\n\\t\\t\\t\\trooms={rooms}\\n\\t\\t\\t\\tusername={username}\\n\\t\\t\\t/>\\n\\t\\t);\\n\\t}\\n\\n\\treturn (\\n\\t\\t<RemoveUsersFirstStep\\n\\t\\t\\tonConfirm={onContinue}\\n\\t\\t\\tonClose={onClose}\\n\\t\\t\\tonCancel={onCancel}\\n\\t\\t\\trooms={rooms}\\n\\t\\t\\tselectedRooms={selectedRooms}\\n\\t\\t\\tonToggleAllRooms={onToggleAllRooms}\\n\\t\\t\\tonChangeRoomSelection={onChangeRoomSelection}\\n\\t\\t\\teligibleRoomsLength={eligibleRooms?.length}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default BaseRemoveUsersModal;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"_slicedToArray\",\"useMutableCallback\",\"usePermission\",\"React\",\"useState\",\"useCallback\",\"RemoveUsersFirstStep\",\"RemoveUsersSecondStep\",\"STEPS\",\"LIST_ROOMS\",\"CONFIRM_DELETE\",\"exportDefault\",\"_ref\",\"_rooms$length\",\"onClose\",\"onCancel\",\"onConfirm\",\"rooms\",\"_ref$currentStep\",\"currentStep\",\"length\",\"username\",\"_useState\",\"_useState2\",\"step\",\"setStep\",\"_useState3\",\"_useState4\",\"selectedRooms\",\"setSelectedRooms\",\"onContinue\",\"onReturn\",\"canViewUserRooms\",\"eligibleRooms\",\"filter\",\"_ref2\",\"isLastOwner\",\"onChangeRoomSelection\",\"room\",\"_objectSpread2\",\"_id\",\"onToggleAllRooms\",\"Object\",\"values\",\"Boolean\",\"_eligibleRooms$map\",\"fromEntries\",\"map\",\"createElement\",\"eligibleRoomsLength\",\"deletedRooms\"],\"mappings\":\"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\"}"}