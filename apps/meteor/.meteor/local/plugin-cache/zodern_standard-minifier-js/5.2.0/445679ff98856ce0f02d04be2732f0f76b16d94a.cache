{"code":"function module(n,a,e){var t,o,u,l,s,i,c,r,g,f,m,d,k,T,p,h;e.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(n){t=n}},0),e.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(n){o=n}},0),e.link(\"@rocket.chat/ui-contexts\",{useLanguage:function(n){u=n}},1),e.link(\"react\",{default:function(n){l=n},useMemo:function(n){s=n},useEffect:function(n){i=n},useState:function(n){c=n},memo:function(n){r=n}},2),e.link(\"react-i18next\",{useTranslation:function(n){g=n}},3),e.link(\"../../../../hooks/useEndpointAction\",{useEndpointAction:function(n){f=n}},4),e.link(\"../../../../hooks/useEndpointData\",{useEndpointData:function(n){m=n}},5),e.link(\"../../../../lib/toast\",{dispatchToastMessage:function(n){d=n}},6),e.link(\"../../contexts/RoomContext\",{useRoom:function(n){k=n},useRoomSubscription:function(n){T=n}},7),e.link(\"../../contexts/RoomToolboxContext\",{useRoomToolbox:function(n){p=n}},8),e.link(\"./AutoTranslate\",{default:function(n){h=n}},9),e.exportDefault(r(function(){var n,a=k(),e=T(),r=p().closeTab,_=u(),b=c(null!==(n=null==e?void 0:e.autoTranslateLanguage)&&void 0!==n?n:\"\"),v=t(b,2),x=v[0],E=v[1],A=f(\"POST\",\"/v1/autotranslate.saveSettings\"),L=g().t,S=m(\"/v1/autotranslate.getSupportedLanguages\",{params:s(function(){return{targetLanguage:_}},[_])}).value,C=S?Object.fromEntries(S.languages.map(function(n){return[n.language,n.name]})):{},R=o(function(n){E(n),A({roomId:a._id,field:\"autoTranslateLanguage\",value:n}),d({type:\"success\",message:L(\"AutoTranslate_language_set_to\",{language:C[n]})})}),y=o(function(n){A({roomId:a._id,field:\"autoTranslate\",value:n.target.checked}),d({type:\"success\",message:n.target.checked?L(\"AutoTranslate_Enabled_for_room\",{roomName:a.name}):L(\"AutoTranslate_Disabled_for_room\",{roomName:a.name})}),n.target.checked&&x&&d({type:\"success\",message:L(\"AutoTranslate_language_set_to\",{language:C[x]})})});return i(function(){null!=e&&e.autoTranslate&&(null!=e&&e.autoTranslateLanguage||R(_))},[null==e?void 0:e.autoTranslate,null==e?void 0:e.autoTranslateLanguage,R,_]),l.createElement(h,{language:x,languages:S?S.languages.map(function(n){return[n.language,n.name]}):[],handleSwitch:y,handleChangeLanguage:R,translateEnable:!!(null!=e&&e.autoTranslate),handleClose:r})}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/AutoTranslate/AutoTranslateWithData.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useLanguage } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useMemo, useEffect, useState, memo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useEndpointAction } from '../../../../hooks/useEndpointAction';\\nimport { useEndpointData } from '../../../../hooks/useEndpointData';\\nimport { dispatchToastMessage } from '../../../../lib/toast';\\nimport { useRoom, useRoomSubscription } from '../../contexts/RoomContext';\\nimport { useRoomToolbox } from '../../contexts/RoomToolboxContext';\\nimport AutoTranslate from './AutoTranslate';\\n\\nconst AutoTranslateWithData = (): ReactElement => {\\n\\tconst room = useRoom();\\n\\tconst subscription = useRoomSubscription();\\n\\tconst { closeTab } = useRoomToolbox();\\n\\tconst userLanguage = useLanguage();\\n\\tconst [currentLanguage, setCurrentLanguage] = useState(subscription?.autoTranslateLanguage ?? '');\\n\\tconst saveSettings = useEndpointAction('POST', '/v1/autotranslate.saveSettings');\\n\\tconst { t } = useTranslation();\\n\\n\\tconst { value: translateData } = useEndpointData('/v1/autotranslate.getSupportedLanguages', {\\n\\t\\tparams: useMemo(() => ({ targetLanguage: userLanguage }), [userLanguage]),\\n\\t});\\n\\tconst languagesDict = translateData ? Object.fromEntries(translateData.languages.map((lang) => [lang.language, lang.name])) : {};\\n\\n\\tconst handleChangeLanguage = useMutableCallback((value) => {\\n\\t\\tsetCurrentLanguage(value);\\n\\n\\t\\tsaveSettings({\\n\\t\\t\\troomId: room._id,\\n\\t\\t\\tfield: 'autoTranslateLanguage',\\n\\t\\t\\tvalue,\\n\\t\\t});\\n\\t\\tdispatchToastMessage({\\n\\t\\t\\ttype: 'success',\\n\\t\\t\\tmessage: t('AutoTranslate_language_set_to', { language: languagesDict[value] }),\\n\\t\\t});\\n\\t});\\n\\n\\tconst handleSwitch = useMutableCallback((event) => {\\n\\t\\tsaveSettings({\\n\\t\\t\\troomId: room._id,\\n\\t\\t\\tfield: 'autoTranslate',\\n\\t\\t\\tvalue: event.target.checked,\\n\\t\\t});\\n\\t\\tdispatchToastMessage({\\n\\t\\t\\ttype: 'success',\\n\\t\\t\\tmessage: event.target.checked\\n\\t\\t\\t\\t? t('AutoTranslate_Enabled_for_room', { roomName: room.name })\\n\\t\\t\\t\\t: t('AutoTranslate_Disabled_for_room', { roomName: room.name }),\\n\\t\\t});\\n\\t\\tif (event.target.checked && currentLanguage) {\\n\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\ttype: 'success',\\n\\t\\t\\t\\tmessage: t('AutoTranslate_language_set_to', { language: languagesDict[currentLanguage] }),\\n\\t\\t\\t});\\n\\t\\t}\\n\\t});\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!subscription?.autoTranslate) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (!subscription?.autoTranslateLanguage) {\\n\\t\\t\\thandleChangeLanguage(userLanguage);\\n\\t\\t}\\n\\t}, [subscription?.autoTranslate, subscription?.autoTranslateLanguage, handleChangeLanguage, userLanguage]);\\n\\n\\treturn (\\n\\t\\t<AutoTranslate\\n\\t\\t\\tlanguage={currentLanguage}\\n\\t\\t\\tlanguages={translateData ? translateData.languages.map((language) => [language.language, language.name]) : []}\\n\\t\\t\\thandleSwitch={handleSwitch}\\n\\t\\t\\thandleChangeLanguage={handleChangeLanguage}\\n\\t\\t\\ttranslateEnable={!!subscription?.autoTranslate}\\n\\t\\t\\thandleClose={closeTab}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(AutoTranslateWithData);\\n\",null],\"names\":[\"_slicedToArray\",\"useMutableCallback\",\"useLanguage\",\"React\",\"useMemo\",\"useEffect\",\"useState\",\"memo\",\"useTranslation\",\"useEndpointAction\",\"useEndpointData\",\"dispatchToastMessage\",\"useRoom\",\"useRoomSubscription\",\"useRoomToolbox\",\"AutoTranslate\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_subscription$autoTra\",\"room\",\"subscription\",\"closeTab\",\"_useRoomToolbox\",\"userLanguage\",\"_useState\",\"autoTranslateLanguage\",\"_useState2\",\"currentLanguage\",\"setCurrentLanguage\",\"saveSettings\",\"t\",\"_useTranslation\",\"translateData\",\"_useEndpointData\",\"params\",\"targetLanguage\",\"value\",\"languagesDict\",\"Object\",\"fromEntries\",\"languages\",\"map\",\"lang\",\"language\",\"name\",\"handleChangeLanguage\",\"roomId\",\"_id\",\"field\",\"type\",\"message\",\"handleSwitch\",\"event\",\"target\",\"checked\",\"roomName\",\"autoTranslate\",\"createElement\",\"translateEnable\",\"handleClose\"],\"mappings\":\"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\"}"}