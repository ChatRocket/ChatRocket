{"code":"function module(e,t,a){let n,l,i,r,c,s,o,u,m,d,h,v,p,k,b;a.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),a.link(\"@rocket.chat/fuselage\",{Box(e){l=e},Icon(e){i=e},Menu(e){r=e}},0),a.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){c=e}},1),a.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){s=e},useEndpoint(e){o=e},useRoute(e){u=e},useSetModal(e){m=e},useTranslation(e){d=e},useSetting(e){h=e}},2),a.link(\"@tanstack/react-query\",{useQueryClient(e){v=e}},3),a.link(\"react\",{default(e){p=e},useCallback(e){k=e}},4),a.link(\"./RemoveDepartmentModal\",{default(e){b=e}},5);let _={archive:\"/v1/livechat/department/:_id/archive\",unarchive:\"/v1/livechat/department/:_id/unarchive\"};a.exportDefault(e=>{let{department:t,archived:a}=e,E=d(),g=v(),x=m(),D=s(),f=u(\"omnichannel-departments\"),y=h(\"Omnichannel_enable_department_removal\"),{_id:M,name:w}=t,C=o(\"POST\",a?_.unarchive:_.archive,{_id:M}),S=c(()=>{f.push({context:\"edit\",id:M})}),z=k(async()=>{await g.invalidateQueries([\"livechat-departments\"])},[g]),Q=c(async()=>{try{await C(),D({type:\"success\",message:a?E(\"Department_unarchived\"):E(\"Department_archived\")}),g.removeQueries([\"/v1/livechat/department/:_id\",t._id]),z()}catch(e){D({type:\"error\",message:e})}}),R=c(()=>{x(p.createElement(b,{_id:M,reset:z,onClose:()=>x(null),name:w}))}),T=n(n({},!a&&{edit:{label:p.createElement(p.Fragment,null,p.createElement(i,{name:\"edit\",size:\"x16\",mie:4}),E(\"Edit\")),action:()=>S()}}),{},{[a?\"unarchive\":\"archive\"]:{label:p.createElement(p.Fragment,null,p.createElement(i,{name:a?\"undo\":\"arrow-down-box\",size:\"x16\",mie:4}),a?E(\"Unarchive\"):E(\"Archive\")),action:()=>Q()},delete:{label:p.createElement(l,{\"data-tooltip\":y?void 0:E(\"Department_Removal_Disabled\")},p.createElement(i,{name:\"trash\",size:\"x16\",mie:4}),E(\"Delete\")),action:()=>R(),disabled:!y}});return p.createElement(r,{options:T})})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/departments/DepartmentsTable/DepartmentItemMenu.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatDepartment } from '@rocket.chat/core-typings';\\nimport { Box, Icon, Menu } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useEndpoint, useRoute, useSetModal, useTranslation, useSetting } from '@rocket.chat/ui-contexts';\\nimport { useQueryClient } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback } from 'react';\\n\\nimport RemoveDepartmentModal from './RemoveDepartmentModal';\\n\\nconst ARCHIVE_DEPARTMENT_ENDPOINTS = {\\n\\tarchive: '/v1/livechat/department/:_id/archive',\\n\\tunarchive: '/v1/livechat/department/:_id/unarchive',\\n} as const;\\n\\ntype DepartmentItemMenuProps = {\\n\\tdepartment: Omit<ILivechatDepartment, '_updatedAt'>;\\n\\tarchived: boolean;\\n};\\n\\nconst DepartmentItemMenu = ({ department, archived }: DepartmentItemMenuProps): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst queryClient = useQueryClient();\\n\\tconst setModal = useSetModal();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst route = useRoute('omnichannel-departments');\\n\\tconst departmentRemovalEnabled = useSetting('Omnichannel_enable_department_removal');\\n\\tconst { _id, name } = department;\\n\\n\\tconst toggleArchive = useEndpoint('POST', archived ? ARCHIVE_DEPARTMENT_ENDPOINTS.unarchive : ARCHIVE_DEPARTMENT_ENDPOINTS.archive, {\\n\\t\\t_id,\\n\\t});\\n\\n\\tconst handleEdit = useMutableCallback(() => {\\n\\t\\troute.push({ context: 'edit', id: _id });\\n\\t});\\n\\n\\tconst handleReload = useCallback(async () => {\\n\\t\\tawait queryClient.invalidateQueries(['livechat-departments']);\\n\\t}, [queryClient]);\\n\\n\\tconst handleToggleArchive = useMutableCallback(async () => {\\n\\t\\ttry {\\n\\t\\t\\tawait toggleArchive();\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: archived ? t('Department_unarchived') : t('Department_archived') });\\n\\t\\t\\tqueryClient.removeQueries(['/v1/livechat/department/:_id', department._id]);\\n\\t\\t\\thandleReload();\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t});\\n\\n\\tconst handlePermanentDepartmentRemoval = useMutableCallback(() => {\\n\\t\\tsetModal(<RemoveDepartmentModal _id={_id} reset={handleReload} onClose={() => setModal(null)} name={name} />);\\n\\t});\\n\\n\\tconst menuOptions = {\\n\\t\\t...(!archived && {\\n\\t\\t\\tedit: {\\n\\t\\t\\t\\tlabel: (\\n\\t\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t\\t<Icon name='edit' size='x16' mie={4} />\\n\\t\\t\\t\\t\\t\\t{t('Edit')}\\n\\t\\t\\t\\t\\t</>\\n\\t\\t\\t\\t),\\n\\t\\t\\t\\taction: (): void => handleEdit(),\\n\\t\\t\\t},\\n\\t\\t}),\\n\\t\\t[archived ? 'unarchive' : 'archive']: {\\n\\t\\t\\tlabel: (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<Icon name={archived ? 'undo' : 'arrow-down-box'} size='x16' mie={4} />\\n\\t\\t\\t\\t\\t{archived ? t('Unarchive') : t('Archive')}\\n\\t\\t\\t\\t</>\\n\\t\\t\\t),\\n\\t\\t\\taction: (): Promise<void> => handleToggleArchive(),\\n\\t\\t},\\n\\t\\tdelete: {\\n\\t\\t\\tlabel: (\\n\\t\\t\\t\\t<Box data-tooltip={!departmentRemovalEnabled ? t('Department_Removal_Disabled') : undefined}>\\n\\t\\t\\t\\t\\t<Icon name='trash' size='x16' mie={4} />\\n\\t\\t\\t\\t\\t{t('Delete')}\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t),\\n\\t\\t\\taction: (): void => handlePermanentDepartmentRemoval(),\\n\\t\\t\\tdisabled: !departmentRemovalEnabled,\\n\\t\\t},\\n\\t};\\n\\treturn <Menu options={menuOptions} />;\\n};\\n\\nexport default DepartmentItemMenu;\\n\",null],\"names\":[\"_objectSpread\",\"Box\",\"Icon\",\"Menu\",\"useMutableCallback\",\"useToastMessageDispatch\",\"useEndpoint\",\"useRoute\",\"useSetModal\",\"useTranslation\",\"useSetting\",\"useQueryClient\",\"React\",\"useCallback\",\"RemoveDepartmentModal\",\"module\",\"link\",\"default\",\"v\",\"ARCHIVE_DEPARTMENT_ENDPOINTS\",\"archive\",\"unarchive\",\"exportDefault\",\"_ref\",\"department\",\"archived\",\"t\",\"queryClient\",\"setModal\",\"dispatchToastMessage\",\"route\",\"departmentRemovalEnabled\",\"_id\",\"name\",\"toggleArchive\",\"handleEdit\",\"push\",\"context\",\"id\",\"handleReload\",\"invalidateQueries\",\"handleToggleArchive\",\"type\",\"message\",\"removeQueries\",\"error\",\"handlePermanentDepartmentRemoval\",\"createElement\",\"reset\",\"onClose\",\"menuOptions\",\"edit\",\"label\",\"Fragment\",\"size\",\"mie\",\"action\",\"delete\",\"undefined\",\"disabled\",\"options\"],\"mappings\":\"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\"}"}