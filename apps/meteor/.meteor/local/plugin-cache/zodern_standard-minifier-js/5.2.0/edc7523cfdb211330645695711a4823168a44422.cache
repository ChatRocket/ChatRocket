{"code":"function module(t,e,n){var i,o,l,a,u,c,r,s,f,k,d,m,p,x,C,b,v,E,h,w,y,g,B,I,S,U;n.link(\"@babel/runtime/helpers/extends\",{default:function(t){i=t}},0),n.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(t){o=t}},1),n.link(\"@rocket.chat/fuselage\",{Avatar:function(t){l=t},Box:function(t){a=t},Button:function(t){u=t},ButtonGroup:function(t){c=t},ContextualbarFooter:function(t){r=t},ContextualbarHeader:function(t){s=t},ContextualbarTitle:function(t){f=t}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useEffectEvent:function(t){k=t}},1),n.link(\"@rocket.chat/fuselage-ui-kit\",{UiKitComponent:function(t){d=t},UiKitContextualBar:function(t){m=t},contextualBarParser:function(t){p=t},UiKitContext:function(t){x=t}},2),n.link(\"@rocket.chat/ui-kit\",{BlockContext:function(t){C=t}},3),n.link(\"react\",{default:function(t){b=t},memo:function(t){v=t}},4),n.link(\"../../../../../app/utils/client\",{getURL:function(t){E=t}},5),n.link(\"../../../../components/Contextualbar\",{ContextualbarClose:function(t){h=t},ContextualbarScrollableContent:function(t){w=t}},6),n.link(\"../../../../lib/utils/preventSyntheticEvent\",{preventSyntheticEvent:function(t){y=t}},7),n.link(\"../../../../uikit/hooks/useContextualBarContextValue\",{useContextualBarContextValue:function(t){g=t}},8),n.link(\"../../../../uikit/hooks/useUiKitActionManager\",{useUiKitActionManager:function(t){B=t}},9),n.link(\"../../../../uikit/hooks/useUiKitView\",{useUiKitView:function(t){I=t}},10),n.link(\"../../../modal/uikit/getButtonStyle\",{getButtonStyle:function(t){S=t}},11),n.link(\"../../contexts/RoomToolboxContext\",{useRoomToolbox:function(t){U=t}},12),n.exportDefault(v(function(t){var e=t.initialView,n=B(),v=I(e),K=v.view,V=v.values,N=v.updateValues,T=v.state,A=g({view:K,values:V,updateValues:N}),O=U().closeTab,R=k(function(t){y(t),O(),n.emitInteraction(K.appId,{type:\"viewSubmit\",payload:{view:o(o({},K),{},{state:T})},viewId:K.id})}),M=k(function(t){y(t),O(),n.emitInteraction(K.appId,{type:\"viewClosed\",payload:{viewId:K.id,view:o(o({},K),{},{state:T}),isCleared:!1}})}),P=k(function(t){y(t),O(),n.emitInteraction(K.appId,{type:\"viewClosed\",payload:{viewId:K.id,view:o(o({},K),{},{state:T}),isCleared:!0}})});return b.createElement(x.Provider,{value:A},b.createElement(s,null,b.createElement(l,{url:E(\"/api/apps/\"+K.appId+\"/icon\")}),b.createElement(f,null,p.text(K.title,C.NONE,0)),P&&b.createElement(h,{onClick:P})),b.createElement(w,null,b.createElement(a,{is:\"form\",method:\"post\",action:\"#\",onSubmit:R},b.createElement(d,{render:m,blocks:K.blocks}))),b.createElement(r,null,b.createElement(c,{stretch:!0},K.close&&b.createElement(u,{danger:\"danger\"===K.close.style,onClick:M},p.text(K.close.text,C.NONE,0)),K.submit&&b.createElement(u,i({},S(K.submit),{onClick:R}),p.text(K.submit.text,C.NONE,1)))))}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/uikit/UiKitContextualBar.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Avatar, Box, Button, ButtonGroup, ContextualbarFooter, ContextualbarHeader, ContextualbarTitle } from '@rocket.chat/fuselage';\\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\\nimport {\\n\\tUiKitComponent,\\n\\tUiKitContextualBar as UiKitContextualBarSurfaceRender,\\n\\tcontextualBarParser,\\n\\tUiKitContext,\\n} from '@rocket.chat/fuselage-ui-kit';\\nimport type * as UiKit from '@rocket.chat/ui-kit';\\nimport { BlockContext } from '@rocket.chat/ui-kit';\\nimport type { FormEvent, UIEvent } from 'react';\\nimport React, { memo } from 'react';\\n\\nimport { getURL } from '../../../../../app/utils/client';\\nimport { ContextualbarClose, ContextualbarScrollableContent } from '../../../../components/Contextualbar';\\nimport { preventSyntheticEvent } from '../../../../lib/utils/preventSyntheticEvent';\\nimport { useContextualBarContextValue } from '../../../../uikit/hooks/useContextualBarContextValue';\\nimport { useUiKitActionManager } from '../../../../uikit/hooks/useUiKitActionManager';\\nimport { useUiKitView } from '../../../../uikit/hooks/useUiKitView';\\nimport { getButtonStyle } from '../../../modal/uikit/getButtonStyle';\\nimport { useRoomToolbox } from '../../contexts/RoomToolboxContext';\\n\\ntype UiKitContextualBarProps = {\\n\\tkey: UiKit.ContextualBarView['id']; // force re-mount when viewId changes\\n\\tinitialView: UiKit.ContextualBarView;\\n};\\n\\nconst UiKitContextualBar = ({ initialView }: UiKitContextualBarProps): JSX.Element => {\\n\\tconst actionManager = useUiKitActionManager();\\n\\tconst { view, values, updateValues, state } = useUiKitView(initialView);\\n\\tconst contextValue = useContextualBarContextValue({ view, values, updateValues });\\n\\n\\tconst { closeTab } = useRoomToolbox();\\n\\n\\tconst handleSubmit = useEffectEvent((e: FormEvent) => {\\n\\t\\tpreventSyntheticEvent(e);\\n\\t\\tcloseTab();\\n\\t\\tvoid actionManager.emitInteraction(view.appId, {\\n\\t\\t\\ttype: 'viewSubmit',\\n\\t\\t\\tpayload: {\\n\\t\\t\\t\\tview: {\\n\\t\\t\\t\\t\\t...view,\\n\\t\\t\\t\\t\\tstate,\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t\\tviewId: view.id,\\n\\t\\t});\\n\\t});\\n\\n\\tconst handleCancel = useEffectEvent((e: UIEvent) => {\\n\\t\\tpreventSyntheticEvent(e);\\n\\t\\tcloseTab();\\n\\t\\tvoid actionManager.emitInteraction(view.appId, {\\n\\t\\t\\ttype: 'viewClosed',\\n\\t\\t\\tpayload: {\\n\\t\\t\\t\\tviewId: view.id,\\n\\t\\t\\t\\tview: {\\n\\t\\t\\t\\t\\t...view,\\n\\t\\t\\t\\t\\tstate,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tisCleared: false,\\n\\t\\t\\t},\\n\\t\\t});\\n\\t});\\n\\n\\tconst handleClose = useEffectEvent((e: UIEvent) => {\\n\\t\\tpreventSyntheticEvent(e);\\n\\t\\tcloseTab();\\n\\t\\tvoid actionManager.emitInteraction(view.appId, {\\n\\t\\t\\ttype: 'viewClosed',\\n\\t\\t\\tpayload: {\\n\\t\\t\\t\\tviewId: view.id,\\n\\t\\t\\t\\tview: {\\n\\t\\t\\t\\t\\t...view,\\n\\t\\t\\t\\t\\tstate,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tisCleared: true,\\n\\t\\t\\t},\\n\\t\\t});\\n\\t});\\n\\n\\treturn (\\n\\t\\t<UiKitContext.Provider value={contextValue}>\\n\\t\\t\\t<ContextualbarHeader>\\n\\t\\t\\t\\t<Avatar url={getURL(`/api/apps/${view.appId}/icon`)} />\\n\\t\\t\\t\\t<ContextualbarTitle>{contextualBarParser.text(view.title, BlockContext.NONE, 0)}</ContextualbarTitle>\\n\\t\\t\\t\\t{handleClose && <ContextualbarClose onClick={handleClose} />}\\n\\t\\t\\t</ContextualbarHeader>\\n\\t\\t\\t<ContextualbarScrollableContent>\\n\\t\\t\\t\\t<Box is='form' method='post' action='#' onSubmit={handleSubmit}>\\n\\t\\t\\t\\t\\t<UiKitComponent render={UiKitContextualBarSurfaceRender} blocks={view.blocks} />\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</ContextualbarScrollableContent>\\n\\t\\t\\t<ContextualbarFooter>\\n\\t\\t\\t\\t<ButtonGroup stretch>\\n\\t\\t\\t\\t\\t{view.close && (\\n\\t\\t\\t\\t\\t\\t<Button danger={view.close.style === 'danger'} onClick={handleCancel}>\\n\\t\\t\\t\\t\\t\\t\\t{contextualBarParser.text(view.close.text, BlockContext.NONE, 0)}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t)}\\n\\n\\t\\t\\t\\t\\t{view.submit && (\\n\\t\\t\\t\\t\\t\\t<Button {...getButtonStyle(view.submit)} onClick={handleSubmit}>\\n\\t\\t\\t\\t\\t\\t\\t{contextualBarParser.text(view.submit.text, BlockContext.NONE, 1)}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</ContextualbarFooter>\\n\\t\\t</UiKitContext.Provider>\\n\\t);\\n};\\n\\nexport default memo(UiKitContextualBar);\\n\",null],\"names\":[\"_extends\",\"_objectSpread\",\"Avatar\",\"Box\",\"Button\",\"ButtonGroup\",\"ContextualbarFooter\",\"ContextualbarHeader\",\"ContextualbarTitle\",\"useEffectEvent\",\"UiKitComponent\",\"UiKitContextualBarSurfaceRender\",\"contextualBarParser\",\"UiKitContext\",\"BlockContext\",\"React\",\"memo\",\"getURL\",\"ContextualbarClose\",\"ContextualbarScrollableContent\",\"preventSyntheticEvent\",\"useContextualBarContextValue\",\"useUiKitActionManager\",\"useUiKitView\",\"getButtonStyle\",\"useRoomToolbox\",\"module\",\"link\",\"default\",\"v\",\"UiKitContextualBar\",\"exportDefault\",\"_ref\",\"initialView\",\"actionManager\",\"_useUiKitView\",\"view\",\"values\",\"updateValues\",\"state\",\"contextValue\",\"closeTab\",\"_useRoomToolbox\",\"handleSubmit\",\"e\",\"emitInteraction\",\"appId\",\"type\",\"payload\",\"viewId\",\"id\",\"handleCancel\",\"isCleared\",\"handleClose\",\"createElement\",\"Provider\",\"value\",\"url\",\"text\",\"title\",\"NONE\",\"onClick\",\"is\",\"method\",\"action\",\"onSubmit\",\"render\",\"blocks\",\"stretch\",\"close\",\"danger\",\"style\",\"submit\"],\"mappings\":\"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\"}"}