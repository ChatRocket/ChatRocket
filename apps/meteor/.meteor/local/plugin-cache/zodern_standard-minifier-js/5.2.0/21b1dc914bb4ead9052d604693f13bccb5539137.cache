{"code":"function module(e,n,t){var r,i,s,u,o,a,c,l,m,p,f,d,g,h,x,v,_,b,E,k,y,P,$,w,C,R;t.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){i=e}},1),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){s=e}},2),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){u=e}},3),t.link(\"@rocket.chat/core-typings\",{isOmnichannelRoom:function(e){o=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useLocalStorage:function(e){a=e}},1),t.link(\"@rocket.chat/string-helpers\",{escapeRegExp:function(e){c=e}},2),t.link(\"@rocket.chat/ui-contexts\",{useMethod:function(e){l=e},useSetting:function(e){m=e},useTranslation:function(e){p=e},useUserPreference:function(e){f=e}},3),t.link(\"react\",{default:function(e){d=e},useMemo:function(e){g=e}},4),t.link(\"../../../../app/authorization/client\",{hasAtLeastOnePermission:function(e){h=e}},5),t.link(\"../../../../app/canned-responses/client/collections/CannedResponse\",{CannedResponse:function(e){x=e}},6),t.link(\"../../../../app/emoji/client\",{emoji:function(e){v=e}},7),t.link(\"../../../../app/models/client\",{Subscriptions:function(e){_=e}},8),t.link(\"../../../../app/ui-message/client/popup/messagePopupConfig\",{usersFromRoomMessages:function(e){b=e}},9),t.link(\"../../../../app/utils/client\",{slashCommands:function(e){E=e}},10),t.link(\"../composer/ComposerBoxPopupCannedResponse\",{default:function(e){k=e}},11),t.link(\"../composer/ComposerBoxPopupEmoji\",{default:function(e){y=e}},12),t.link(\"../composer/ComposerBoxPopupRoom\",{default:function(e){P=e}},13),t.link(\"../composer/ComposerBoxPopupSlashCommand\",{default:function(e){$=e}},14),t.link(\"../composer/ComposerBoxPopupUser\",{default:function(e){w=e}},15),t.link(\"../contexts/ComposerPopupContext\",{ComposerPopupContext:function(e){C=e},createMessageBoxPopupConfig:function(e){R=e}},16),t.exportDefault(function(e){var n=e.children,t=e.room,I=t._id,F=t.encrypted,S=l(\"spotlight\"),j=m(\"Number_of_users_autocomplete_suggestions\"),L=m(\"Canned_Responses_Enable\"),O=a(\"emoji.recent\",[]),A=u(O,1)[0],B=o(t),M=f(\"useEmojis\"),V=p(),T=m(\"E2E_Enable\"),N=m(\"E2E_Allow_Unencrypted_Messages\"),U=F&&T&&!N,W=l(\"getSlashCommandPreviews\"),z=g(function(){return[R({trigger:\"@\",title:V(\"People\"),getItemsFromLocal:function(e){var n,t,u;return r.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=e&&RegExp(c(e),\"i\"),t=[],u=b.find(s({ts:{$exists:!0}},e&&{$or:[{username:n},{name:n}]}),{limit:null!=j?j:5,sort:{ts:-1}}).fetch().map(function(e){return e.suggestion=!0,e}),(!n||n.test(\"all\"))&&t.push({_id:\"all\",username:\"all\",system:!0,name:V(\"Notify_all_in_this_room\"),sort:4}),(!n||n.test(\"here\"))&&t.push({_id:\"here\",username:\"here\",system:!0,name:V(\"Notify_active_in_this_room\"),sort:4}),r.abrupt(\"return\",[].concat(i(u),t));case 6:case\"end\":return r.stop()}},null,null,null,Promise)},getItemsFromServer:function(e){var n,t,i,u;return r.async(function(o){for(;;)switch(o.prev=o.next){case 0:return n=e&&RegExp(c(e),\"i\"),t=b.find(s({ts:{$exists:!0}},e&&{$or:[{username:n},{name:n}]}),{limit:null!=j?j:5,sort:{ts:-1}}).fetch().map(function(e){return e.username}),o.next=4,r.awrap(S(e,t,{users:!0,mentions:!0},I));case 4:return u=void 0===(i=o.sent.users)?[]:i,o.abrupt(\"return\",u.map(function(e){return{_id:e._id,username:e.username,nickname:e.nickname,name:e.name,status:e.status,avatarETag:e.avatarETag,outside:e.outside,sort:3}}));case 8:case\"end\":return o.stop()}},null,null,null,Promise)},getValue:function(e){return e.username},renderItem:function(e){var n=e.item;return d.createElement(w,n)}}),R({trigger:\"#\",title:V(\"Channels\"),getItemsFromLocal:function(e){var n,t;return r.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=RegExp(c(e),\"i\"),t=_.find({$and:[{$or:[{fname:n},{name:n}]},{$or:[{federated:{$exists:!1}},{federated:!1}]}],t:{$in:[\"c\",\"p\"]}},{limit:null!=j?j:5,sort:{ls:-1}}).fetch(),r.abrupt(\"return\",t);case 3:case\"end\":return r.stop()}},null,null,null,Promise)},getItemsFromServer:function(e){var n,t;return r.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.awrap(S(e,[],{rooms:!0,mentions:!0},I));case 2:return t=void 0===(n=i.sent.rooms)?[]:n,i.abrupt(\"return\",t);case 6:case\"end\":return i.stop()}},null,null,null,Promise)},getValue:function(e){return\"\"+(e.name||e.fname)},renderItem:function(e){var n=e.item;return d.createElement(P,n)}}),M&&R({trigger:\":\",title:V(\"Emoji\"),triggerLength:2,getItemsFromLocal:function(e){var n,t,i,s,u,o,a,l;return r.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=RegExp(\"^tone[1-5]:*$\"),t=RegExp(\"tone[1-5]:*$\"),i=RegExp(\"_t(?:o|$)(?:n|$)(?:e|$)(?:[1-5]|$)(?::|$)$\"),s=function(e){return function(n,t){var r=n._id===o?2:0,i=t._id===o?2:0,s=n._id.startsWith(o)?1:0,u=t._id.startsWith(o)?1:0,a=r+s,c=i+u;return(e.includes(n._id)&&(a+=e.indexOf(n._id)+1),e.includes(t._id)&&(c+=e.indexOf(t._id)+1),a>c)?-1:a<c?1:0}},u=RegExp(c(e),\"i\"),o=\":\"+e,a=A.map(function(e){return\":\"+e+\":\"}),l=v.list,r.abrupt(\"return\",Object.keys(l).map(function(e){return{_id:e,data:l[o]}}).filter(function(e){var r=e._id;return u.test(r)&&(n.test(r.substring(o.length))||i.test(o)||!t.test(r))}).sort(s(a)).slice(0,10));case 9:case\"end\":return r.stop()}},null,null,null,Promise)},getItemsFromServer:function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",[]);case 1:case\"end\":return e.stop()}},null,null,null,Promise)},getValue:function(e){return\"\"+e._id.substring(1)},renderItem:function(e){var n=e.item;return d.createElement(y,n)}}),R({title:V(\"Emoji\"),trigger:\"\\\\+:\",prefix:\"+\",suffix:\" \",triggerAnywhere:!1,getItemsFromLocal:function(e){var n,t,i,s,u,o,a,l;return r.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=RegExp(\"^tone[1-5]:*$\"),t=RegExp(\"tone[1-5]:*$\"),i=RegExp(\"_t(?:o|$)(?:n|$)(?:e|$)(?:[1-5]|$)(?::|$)$\"),s=function(e){return function(n,t){var r=n._id,i=n._id;return(e.includes(n._id)&&(r=e.indexOf(n._id)+r),e.includes(t._id)&&(i=e.indexOf(t._id)+i),r<i)?-1:r>i?1:0}},u=RegExp(c(e),\"i\"),o=\":\"+e,a=A.map(function(e){return\":\"+e+\":\"}),l=v.list,r.abrupt(\"return\",Object.keys(l).map(function(e){return{_id:e,data:l[o]}}).filter(function(e){var r=e._id;return u.test(r)&&(n.test(r.substring(o.length))||i.test(o)||!t.test(r))}).sort(s(a)).slice(0,10));case 9:case\"end\":return r.stop()}},null,null,null,Promise)},getItemsFromServer:function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",[]);case 1:case\"end\":return e.stop()}},null,null,null,Promise)},getValue:function(e){return\"\"+e._id},renderItem:function(e){var n=e.item;return d.createElement(y,n)}}),R({title:V(\"Commands\"),trigger:\"/\",suffix:\" \",triggerAnywhere:!1,disabled:U,renderItem:function(e){var n=e.item;return d.createElement($,n)},getItemsFromLocal:function(e){return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt(\"return\",Object.keys(E.commands).map(function(e){var n,t=E.commands[e];return s({_id:e,params:t.params&&V.has(t.params)?V(t.params):null!==(n=t.params)&&void 0!==n?n:\"\",description:t.description&&V.has(t.description)?V(t.description):t.description,permission:t.permission},U&&{disabled:U})}).filter(function(n){return n._id.indexOf(e)>-1&&(!n.permission||h(n.permission,I))}).sort(function(e,n){return e._id.localeCompare(n._id)}).slice(0,11));case 1:case\"end\":return n.stop()}},null,null,null,Promise)},getItemsFromServer:function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",[]);case 1:case\"end\":return e.stop()}},null,null,null,Promise)}}),L&&B&&R({title:V(\"Canned_Responses\"),trigger:\"!\",prefix:\"\",triggerAnywhere:!0,renderItem:function(e){var n=e.item;return d.createElement(k,n)},getItemsFromLocal:function(e){var n;return r.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=RegExp(e,\"i\"),t.abrupt(\"return\",x.find({shortcut:n},{limit:12,sort:{shortcut:-1}}).fetch().map(function(e){return{_id:e._id,text:e.text,shortcut:e.shortcut}}));case 2:case\"end\":return t.stop()}},null,null,null,Promise)},getItemsFromServer:function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",[]);case 1:case\"end\":return e.stop()}},null,null,null,Promise)},getValue:function(e){return e.text}}),R({matchSelectorRegex:/(?:^)(\\/[\\w\\d\\S]+ )[^]*$/,preview:!0,getItemsFromLocal:function(e){var n,t,i,s,u;return r.async(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.cmd,i=e.params,s=e.tmid,o.next=3,r.awrap(W({cmd:t,params:i,msg:{rid:I,tmid:s}}));case 3:return u=o.sent,o.abrupt(\"return\",null!==(n=null==u?void 0:u.items.map(function(e){return{_id:e.id,value:e.value,type:e.type}}))&&void 0!==n?n:[]);case 5:case\"end\":return o.stop()}},null,null,null,Promise)}})].filter(Boolean)},[V,L,B,A,j,S,I,W,M,U]);return d.createElement(C.Provider,{value:z,children:n})})}","map":"{\"version\":3,\"sources\":[\"client/views/room/providers/ComposerPopupProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { isOmnichannelRoom } from '@rocket.chat/core-typings';\\nimport { useLocalStorage } from '@rocket.chat/fuselage-hooks';\\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\\nimport { useMethod, useSetting, useTranslation, useUserPreference } from '@rocket.chat/ui-contexts';\\nimport React, { useMemo } from 'react';\\nimport type { ReactNode } from 'react';\\n\\nimport { hasAtLeastOnePermission } from '../../../../app/authorization/client';\\nimport { CannedResponse } from '../../../../app/canned-responses/client/collections/CannedResponse';\\nimport { emoji } from '../../../../app/emoji/client';\\nimport { Subscriptions } from '../../../../app/models/client';\\nimport { usersFromRoomMessages } from '../../../../app/ui-message/client/popup/messagePopupConfig';\\nimport { slashCommands } from '../../../../app/utils/client';\\nimport ComposerBoxPopupCannedResponse from '../composer/ComposerBoxPopupCannedResponse';\\nimport type { ComposerBoxPopupEmojiProps } from '../composer/ComposerBoxPopupEmoji';\\nimport ComposerBoxPopupEmoji from '../composer/ComposerBoxPopupEmoji';\\nimport ComposerBoxPopupRoom from '../composer/ComposerBoxPopupRoom';\\nimport type { ComposerBoxPopupRoomProps } from '../composer/ComposerBoxPopupRoom';\\nimport type { ComposerBoxPopupSlashCommandProps } from '../composer/ComposerBoxPopupSlashCommand';\\nimport ComposerBoxPopupSlashCommand from '../composer/ComposerBoxPopupSlashCommand';\\nimport ComposerBoxPopupUser from '../composer/ComposerBoxPopupUser';\\nimport type { ComposerBoxPopupUserProps } from '../composer/ComposerBoxPopupUser';\\nimport type { ComposerPopupContextValue } from '../contexts/ComposerPopupContext';\\nimport { ComposerPopupContext, createMessageBoxPopupConfig } from '../contexts/ComposerPopupContext';\\n\\nconst ComposerPopupProvider = ({ children, room }: { children: ReactNode; room: IRoom }) => {\\n\\tconst { _id: rid, encrypted: isRoomEncrypted } = room;\\n\\tconst userSpotlight = useMethod('spotlight');\\n\\tconst suggestionsCount = useSetting<number>('Number_of_users_autocomplete_suggestions');\\n\\tconst cannedResponseEnabled = useSetting<boolean>('Canned_Responses_Enable');\\n\\tconst [recentEmojis] = useLocalStorage('emoji.recent', []);\\n\\tconst isOmnichannel = isOmnichannelRoom(room);\\n\\tconst useEmoji = useUserPreference('useEmojis');\\n\\tconst t = useTranslation();\\n\\tconst e2eEnabled = useSetting<boolean>('E2E_Enable');\\n\\tconst unencryptedMessagesAllowed = useSetting<boolean>('E2E_Allow_Unencrypted_Messages');\\n\\tconst encrypted = isRoomEncrypted && e2eEnabled && !unencryptedMessagesAllowed;\\n\\n\\tconst call = useMethod('getSlashCommandPreviews');\\n\\tconst value: ComposerPopupContextValue = useMemo(() => {\\n\\t\\treturn [\\n\\t\\t\\tcreateMessageBoxPopupConfig({\\n\\t\\t\\t\\ttrigger: '@',\\n\\t\\t\\t\\ttitle: t('People'),\\n\\t\\t\\t\\tgetItemsFromLocal: async (filter: string) => {\\n\\t\\t\\t\\t\\tconst filterRegex = filter && new RegExp(escapeRegExp(filter), 'i');\\n\\t\\t\\t\\t\\tconst items: ComposerBoxPopupUserProps[] = [];\\n\\n\\t\\t\\t\\t\\tconst users = usersFromRoomMessages\\n\\t\\t\\t\\t\\t\\t.find(\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tts: { $exists: true },\\n\\t\\t\\t\\t\\t\\t\\t\\t...(filter && {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$or: [{ username: filterRegex }, { name: filterRegex }],\\n\\t\\t\\t\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tlimit: suggestionsCount ?? 5,\\n\\t\\t\\t\\t\\t\\t\\t\\tsort: { ts: -1 },\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t.fetch()\\n\\t\\t\\t\\t\\t\\t.map((u) => {\\n\\t\\t\\t\\t\\t\\t\\tu.suggestion = true;\\n\\t\\t\\t\\t\\t\\t\\treturn u;\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\tif (!filterRegex || filterRegex.test('all')) {\\n\\t\\t\\t\\t\\t\\titems.push({\\n\\t\\t\\t\\t\\t\\t\\t_id: 'all',\\n\\t\\t\\t\\t\\t\\t\\tusername: 'all',\\n\\t\\t\\t\\t\\t\\t\\tsystem: true,\\n\\t\\t\\t\\t\\t\\t\\tname: t('Notify_all_in_this_room'),\\n\\t\\t\\t\\t\\t\\t\\tsort: 4,\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tif (!filterRegex || filterRegex.test('here')) {\\n\\t\\t\\t\\t\\t\\titems.push({\\n\\t\\t\\t\\t\\t\\t\\t_id: 'here',\\n\\t\\t\\t\\t\\t\\t\\tusername: 'here',\\n\\t\\t\\t\\t\\t\\t\\tsystem: true,\\n\\t\\t\\t\\t\\t\\t\\tname: t('Notify_active_in_this_room'),\\n\\t\\t\\t\\t\\t\\t\\tsort: 4,\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\treturn [...users, ...items];\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgetItemsFromServer: async (filter: string) => {\\n\\t\\t\\t\\t\\tconst filterRegex = filter && new RegExp(escapeRegExp(filter), 'i');\\n\\t\\t\\t\\t\\tconst usernames = usersFromRoomMessages\\n\\t\\t\\t\\t\\t\\t.find(\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tts: { $exists: true },\\n\\t\\t\\t\\t\\t\\t\\t\\t...(filter && {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$or: [{ username: filterRegex }, { name: filterRegex }],\\n\\t\\t\\t\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tlimit: suggestionsCount ?? 5,\\n\\t\\t\\t\\t\\t\\t\\t\\tsort: { ts: -1 },\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t.fetch()\\n\\t\\t\\t\\t\\t\\t.map((u) => {\\n\\t\\t\\t\\t\\t\\t\\treturn u.username;\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\tconst { users = [] } = await userSpotlight(filter, usernames, { users: true, mentions: true }, rid);\\n\\n\\t\\t\\t\\t\\treturn users.map(({ _id, username, nickname, name, status, avatarETag, outside }) => {\\n\\t\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\t\\t_id,\\n\\t\\t\\t\\t\\t\\t\\tusername,\\n\\t\\t\\t\\t\\t\\t\\tnickname,\\n\\t\\t\\t\\t\\t\\t\\tname,\\n\\t\\t\\t\\t\\t\\t\\tstatus,\\n\\t\\t\\t\\t\\t\\t\\tavatarETag,\\n\\t\\t\\t\\t\\t\\t\\toutside,\\n\\t\\t\\t\\t\\t\\t\\tsort: 3,\\n\\t\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgetValue: (item) => item.username,\\n\\t\\t\\t\\trenderItem: ({ item }) => <ComposerBoxPopupUser {...item} />,\\n\\t\\t\\t}),\\n\\t\\t\\tcreateMessageBoxPopupConfig<ComposerBoxPopupRoomProps>({\\n\\t\\t\\t\\ttrigger: '#',\\n\\t\\t\\t\\ttitle: t('Channels'),\\n\\t\\t\\t\\tgetItemsFromLocal: async (filter: string) => {\\n\\t\\t\\t\\t\\tconst filterRegex = new RegExp(escapeRegExp(filter), 'i');\\n\\t\\t\\t\\t\\tconst records = Subscriptions.find(\\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t$and: [\\n\\t\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$or: [{ fname: filterRegex }, { name: filterRegex }],\\n\\t\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t$or: [{ federated: { $exists: false } }, { federated: false }],\\n\\t\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t],\\n\\t\\t\\t\\t\\t\\t\\tt: {\\n\\t\\t\\t\\t\\t\\t\\t\\t$in: ['c', 'p'],\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\tlimit: suggestionsCount ?? 5,\\n\\t\\t\\t\\t\\t\\t\\tsort: {\\n\\t\\t\\t\\t\\t\\t\\t\\tls: -1,\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t).fetch();\\n\\t\\t\\t\\t\\treturn records;\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgetItemsFromServer: async (filter: string) => {\\n\\t\\t\\t\\t\\tconst { rooms = [] } = await userSpotlight(filter, [], { rooms: true, mentions: true }, rid);\\n\\t\\t\\t\\t\\treturn rooms as unknown as ComposerBoxPopupRoomProps[];\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgetValue: (item) => `${item.name || item.fname}`,\\n\\t\\t\\t\\trenderItem: ({ item }) => <ComposerBoxPopupRoom {...item} />,\\n\\t\\t\\t}) as any,\\n\\t\\t\\tuseEmoji &&\\n\\t\\t\\t\\tcreateMessageBoxPopupConfig<ComposerBoxPopupEmojiProps>({\\n\\t\\t\\t\\t\\ttrigger: ':',\\n\\t\\t\\t\\t\\ttitle: t('Emoji'),\\n\\t\\t\\t\\t\\ttriggerLength: 2,\\n\\t\\t\\t\\t\\tgetItemsFromLocal: async (filter: string) => {\\n\\t\\t\\t\\t\\t\\tconst exactFinalTone = new RegExp('^tone[1-5]:*$');\\n\\t\\t\\t\\t\\t\\tconst colorBlind = new RegExp('tone[1-5]:*$');\\n\\t\\t\\t\\t\\t\\tconst seeColor = new RegExp('_t(?:o|$)(?:n|$)(?:e|$)(?:[1-5]|$)(?::|$)$');\\n\\n\\t\\t\\t\\t\\t\\tconst emojiSort = (recents: string[]) => (a: { _id: string }, b: { _id: string }) => {\\n\\t\\t\\t\\t\\t\\t\\tconst aExact = a._id === key ? 2 : 0;\\n\\t\\t\\t\\t\\t\\t\\tconst bExact = b._id === key ? 2 : 0;\\n\\t\\t\\t\\t\\t\\t\\tconst aPartial = a._id.startsWith(key) ? 1 : 0;\\n\\t\\t\\t\\t\\t\\t\\tconst bPartial = b._id.startsWith(key) ? 1 : 0;\\n\\n\\t\\t\\t\\t\\t\\t\\tlet aScore = aExact + aPartial;\\n\\t\\t\\t\\t\\t\\t\\tlet bScore = bExact + bPartial;\\n\\n\\t\\t\\t\\t\\t\\t\\tif (recents.includes(a._id)) {\\n\\t\\t\\t\\t\\t\\t\\t\\taScore += recents.indexOf(a._id) + 1;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\tif (recents.includes(b._id)) {\\n\\t\\t\\t\\t\\t\\t\\t\\tbScore += recents.indexOf(b._id) + 1;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\tif (aScore > bScore) {\\n\\t\\t\\t\\t\\t\\t\\t\\treturn -1;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\tif (aScore < bScore) {\\n\\t\\t\\t\\t\\t\\t\\t\\treturn 1;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\treturn 0;\\n\\t\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t\\t\\tconst filterRegex = new RegExp(escapeRegExp(filter), 'i');\\n\\t\\t\\t\\t\\t\\tconst key = `:${filter}`;\\n\\n\\t\\t\\t\\t\\t\\tconst recents = recentEmojis.map((item) => `:${item}:`);\\n\\n\\t\\t\\t\\t\\t\\tconst collection = emoji.list;\\n\\n\\t\\t\\t\\t\\t\\treturn Object.keys(collection)\\n\\t\\t\\t\\t\\t\\t\\t.map((_id) => {\\n\\t\\t\\t\\t\\t\\t\\t\\tconst data = collection[key];\\n\\t\\t\\t\\t\\t\\t\\t\\treturn { _id, data };\\n\\t\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t\\t.filter(\\n\\t\\t\\t\\t\\t\\t\\t\\t({ _id }) =>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tfilterRegex.test(_id) && (exactFinalTone.test(_id.substring(key.length)) || seeColor.test(key) || !colorBlind.test(_id)),\\n\\t\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t\\t.sort(emojiSort(recents))\\n\\t\\t\\t\\t\\t\\t\\t.slice(0, 10);\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tgetItemsFromServer: async () => {\\n\\t\\t\\t\\t\\t\\treturn [];\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tgetValue: (item) => `${item._id.substring(1)}`,\\n\\t\\t\\t\\t\\trenderItem: ({ item }) => <ComposerBoxPopupEmoji {...item} />,\\n\\t\\t\\t\\t}),\\n\\t\\t\\tcreateMessageBoxPopupConfig<ComposerBoxPopupEmojiProps>({\\n\\t\\t\\t\\ttitle: t('Emoji'),\\n\\t\\t\\t\\ttrigger: '\\\\\\\\+:',\\n\\t\\t\\t\\tprefix: '+',\\n\\t\\t\\t\\tsuffix: ' ',\\n\\t\\t\\t\\ttriggerAnywhere: false,\\n\\t\\t\\t\\tgetItemsFromLocal: async (filter: string) => {\\n\\t\\t\\t\\t\\tconst exactFinalTone = new RegExp('^tone[1-5]:*$');\\n\\t\\t\\t\\t\\tconst colorBlind = new RegExp('tone[1-5]:*$');\\n\\t\\t\\t\\t\\tconst seeColor = new RegExp('_t(?:o|$)(?:n|$)(?:e|$)(?:[1-5]|$)(?::|$)$');\\n\\n\\t\\t\\t\\t\\tconst emojiSort = (recents: string[]) => (a: { _id: string }, b: { _id: string }) => {\\n\\t\\t\\t\\t\\t\\tlet idA = a._id;\\n\\t\\t\\t\\t\\t\\tlet idB = a._id;\\n\\n\\t\\t\\t\\t\\t\\tif (recents.includes(a._id)) {\\n\\t\\t\\t\\t\\t\\t\\tidA = recents.indexOf(a._id) + idA;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\tif (recents.includes(b._id)) {\\n\\t\\t\\t\\t\\t\\t\\tidB = recents.indexOf(b._id) + idB;\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\tif (idA < idB) {\\n\\t\\t\\t\\t\\t\\t\\treturn -1;\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\tif (idA > idB) {\\n\\t\\t\\t\\t\\t\\t\\treturn 1;\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\treturn 0;\\n\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t\\tconst filterRegex = new RegExp(escapeRegExp(filter), 'i');\\n\\t\\t\\t\\t\\tconst key = `:${filter}`;\\n\\n\\t\\t\\t\\t\\tconst recents = recentEmojis.map((item) => `:${item}:`);\\n\\n\\t\\t\\t\\t\\tconst collection = emoji.list;\\n\\n\\t\\t\\t\\t\\treturn Object.keys(collection)\\n\\t\\t\\t\\t\\t\\t.map((_id) => {\\n\\t\\t\\t\\t\\t\\t\\tconst data = collection[key];\\n\\t\\t\\t\\t\\t\\t\\treturn { _id, data };\\n\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t.filter(\\n\\t\\t\\t\\t\\t\\t\\t({ _id }) =>\\n\\t\\t\\t\\t\\t\\t\\t\\tfilterRegex.test(_id) && (exactFinalTone.test(_id.substring(key.length)) || seeColor.test(key) || !colorBlind.test(_id)),\\n\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t.sort(emojiSort(recents))\\n\\t\\t\\t\\t\\t\\t.slice(0, 10);\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgetItemsFromServer: async () => {\\n\\t\\t\\t\\t\\treturn [];\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgetValue: (item) => `${item._id}`,\\n\\t\\t\\t\\trenderItem: ({ item }) => <ComposerBoxPopupEmoji {...item} />,\\n\\t\\t\\t}),\\n\\n\\t\\t\\tcreateMessageBoxPopupConfig<ComposerBoxPopupSlashCommandProps>({\\n\\t\\t\\t\\ttitle: t('Commands'),\\n\\t\\t\\t\\ttrigger: '/',\\n\\t\\t\\t\\tsuffix: ' ',\\n\\t\\t\\t\\ttriggerAnywhere: false,\\n\\t\\t\\t\\tdisabled: encrypted,\\n\\t\\t\\t\\trenderItem: ({ item }) => <ComposerBoxPopupSlashCommand {...item} />,\\n\\t\\t\\t\\tgetItemsFromLocal: async (filter: string) => {\\n\\t\\t\\t\\t\\treturn Object.keys(slashCommands.commands)\\n\\t\\t\\t\\t\\t\\t.map((command) => {\\n\\t\\t\\t\\t\\t\\t\\tconst item = slashCommands.commands[command];\\n\\t\\t\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\t\\t\\t_id: command,\\n\\t\\t\\t\\t\\t\\t\\t\\tparams: item.params && t.has(item.params) ? t(item.params) : item.params ?? '',\\n\\t\\t\\t\\t\\t\\t\\t\\tdescription: item.description && t.has(item.description) ? t(item.description) : item.description,\\n\\t\\t\\t\\t\\t\\t\\t\\tpermission: item.permission,\\n\\t\\t\\t\\t\\t\\t\\t\\t...(encrypted && { disabled: encrypted }),\\n\\t\\t\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t.filter((command) => {\\n\\t\\t\\t\\t\\t\\t\\tconst isMatch = command._id.indexOf(filter) > -1;\\n\\n\\t\\t\\t\\t\\t\\t\\tif (!isMatch) {\\n\\t\\t\\t\\t\\t\\t\\t\\treturn false;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\tif (!command.permission) {\\n\\t\\t\\t\\t\\t\\t\\t\\treturn true;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\treturn hasAtLeastOnePermission(command.permission, rid);\\n\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t.sort((a, b) => a._id.localeCompare(b._id))\\n\\t\\t\\t\\t\\t\\t.slice(0, 11);\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tgetItemsFromServer: async () => [],\\n\\t\\t\\t}),\\n\\t\\t\\tcannedResponseEnabled &&\\n\\t\\t\\t\\tisOmnichannel &&\\n\\t\\t\\t\\tcreateMessageBoxPopupConfig<{\\n\\t\\t\\t\\t\\t_id: string;\\n\\t\\t\\t\\t\\ttext: string;\\n\\t\\t\\t\\t\\tshortcut: string;\\n\\t\\t\\t\\t}>({\\n\\t\\t\\t\\t\\ttitle: t('Canned_Responses'),\\n\\t\\t\\t\\t\\ttrigger: '!',\\n\\t\\t\\t\\t\\tprefix: '',\\n\\t\\t\\t\\t\\ttriggerAnywhere: true,\\n\\t\\t\\t\\t\\trenderItem: ({ item }) => <ComposerBoxPopupCannedResponse {...item} />,\\n\\t\\t\\t\\t\\tgetItemsFromLocal: async (filter: string) => {\\n\\t\\t\\t\\t\\t\\tconst exp = new RegExp(filter, 'i');\\n\\t\\t\\t\\t\\t\\treturn CannedResponse.find(\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tshortcut: exp,\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tlimit: 12,\\n\\t\\t\\t\\t\\t\\t\\t\\tsort: {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tshortcut: -1,\\n\\t\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t)\\n\\t\\t\\t\\t\\t\\t\\t.fetch()\\n\\t\\t\\t\\t\\t\\t\\t.map((record) => ({\\n\\t\\t\\t\\t\\t\\t\\t\\t_id: record._id,\\n\\t\\t\\t\\t\\t\\t\\t\\ttext: record.text,\\n\\t\\t\\t\\t\\t\\t\\t\\tshortcut: record.shortcut,\\n\\t\\t\\t\\t\\t\\t\\t}));\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tgetItemsFromServer: async () => [],\\n\\t\\t\\t\\t\\tgetValue: (item) => {\\n\\t\\t\\t\\t\\t\\treturn item.text;\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t}),\\n\\t\\t\\tcreateMessageBoxPopupConfig({\\n\\t\\t\\t\\tmatchSelectorRegex: /(?:^)(\\\\/[\\\\w\\\\d\\\\S]+ )[^]*$/,\\n\\t\\t\\t\\tpreview: true,\\n\\t\\t\\t\\tgetItemsFromLocal: async ({ cmd, params, tmid }: { cmd: string; params: string; tmid: string }) => {\\n\\t\\t\\t\\t\\tconst result = await call({ cmd, params, msg: { rid, tmid } });\\n\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\tresult?.items.map((item) => ({\\n\\t\\t\\t\\t\\t\\t\\t_id: item.id,\\n\\t\\t\\t\\t\\t\\t\\tvalue: item.value,\\n\\t\\t\\t\\t\\t\\t\\ttype: item.type,\\n\\t\\t\\t\\t\\t\\t})) ?? []\\n\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t},\\n\\t\\t\\t}),\\n\\t\\t].filter(Boolean);\\n\\t}, [t, cannedResponseEnabled, isOmnichannel, recentEmojis, suggestionsCount, userSpotlight, rid, call, useEmoji, encrypted]);\\n\\n\\treturn <ComposerPopupContext.Provider value={value} children={children} />;\\n};\\n\\nexport default ComposerPopupProvider;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_toConsumableArray\",\"_objectSpread\",\"_slicedToArray\",\"isOmnichannelRoom\",\"useLocalStorage\",\"escapeRegExp\",\"useMethod\",\"useSetting\",\"useTranslation\",\"useUserPreference\",\"React\",\"useMemo\",\"hasAtLeastOnePermission\",\"CannedResponse\",\"emoji\",\"Subscriptions\",\"usersFromRoomMessages\",\"slashCommands\",\"ComposerBoxPopupCannedResponse\",\"ComposerBoxPopupEmoji\",\"ComposerBoxPopupRoom\",\"ComposerBoxPopupSlashCommand\",\"ComposerBoxPopupUser\",\"ComposerPopupContext\",\"createMessageBoxPopupConfig\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"children\",\"room\",\"rid\",\"_id\",\"isRoomEncrypted\",\"encrypted\",\"userSpotlight\",\"suggestionsCount\",\"cannedResponseEnabled\",\"_useLocalStorage\",\"recentEmojis\",\"_useLocalStorage2\",\"isOmnichannel\",\"useEmoji\",\"t\",\"e2eEnabled\",\"unencryptedMessagesAllowed\",\"call\",\"value\",\"trigger\",\"title\",\"getItemsFromLocal\",\"filter\",\"filterRegex\",\"items\",\"users\",\"async\",\"_context\",\"prev\",\"next\",\"RegExp\",\"find\",\"ts\",\"$exists\",\"$or\",\"username\",\"name\",\"limit\",\"sort\",\"fetch\",\"map\",\"u\",\"suggestion\",\"test\",\"push\",\"system\",\"abrupt\",\"concat\",\"stop\",\"Promise\",\"getItemsFromServer\",\"usernames\",\"_await$userSpotlight$\",\"_context2\",\"awrap\",\"mentions\",\"_await$userSpotlight\",\"sent\",\"_ref2\",\"nickname\",\"status\",\"avatarETag\",\"outside\",\"getValue\",\"item\",\"renderItem\",\"_ref3\",\"createElement\",\"records\",\"_context3\",\"$and\",\"fname\",\"federated\",\"$in\",\"ls\",\"_await$userSpotlight3\",\"rooms\",\"_context4\",\"_await$userSpotlight2\",\"_ref4\",\"triggerLength\",\"exactFinalTone\",\"colorBlind\",\"seeColor\",\"emojiSort\",\"key\",\"recents\",\"collection\",\"_context5\",\"a\",\"b\",\"aExact\",\"bExact\",\"aPartial\",\"startsWith\",\"bPartial\",\"aScore\",\"bScore\",\"includes\",\"indexOf\",\"list\",\"Object\",\"keys\",\"data\",\"_ref5\",\"substring\",\"length\",\"slice\",\"_context6\",\"_ref6\",\"prefix\",\"suffix\",\"triggerAnywhere\",\"_context7\",\"idA\",\"idB\",\"_ref7\",\"_context8\",\"_ref8\",\"disabled\",\"_ref9\",\"_context9\",\"commands\",\"command\",\"_item$params\",\"params\",\"has\",\"description\",\"permission\",\"localeCompare\",\"_context10\",\"_ref10\",\"exp\",\"_context11\",\"shortcut\",\"record\",\"text\",\"_context12\",\"matchSelectorRegex\",\"preview\",\"_ref11\",\"_result$items$map\",\"cmd\",\"tmid\",\"result\",\"_context13\",\"msg\",\"id\",\"type\",\"Boolean\",\"Provider\"],\"mappings\":\"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\"}"}