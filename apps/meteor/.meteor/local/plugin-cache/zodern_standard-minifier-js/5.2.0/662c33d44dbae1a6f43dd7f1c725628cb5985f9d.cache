{"code":"function module(e,n,t){var i,a,l,o,r,u,c,s,f,d,m,p,h,E,k,_,g,v,b,x;t.link(\"@babel/runtime/regenerator\",{default:function(e){i=e}},0),t.link(\"@babel/runtime/helpers/extends\",{default:function(e){a=e}},1),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){l=e}},2),t.link(\"@rocket.chat/fuselage\",{Box:function(e){o=e},FieldGroup:function(e){r=e},TextInput:function(e){u=e},Field:function(e){c=e},FieldLabel:function(e){s=e},FieldRow:function(e){f=e},FieldError:function(e){d=e},Button:function(e){m=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useAutoFocus:function(e){p=e},useUniqueId:function(e){h=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){E=e},useEndpoint:function(e){k=e}},2),t.link(\"react\",{default:function(e){_=e},useState:function(e){g=e}},3),t.link(\"react-i18next\",{useTranslation:function(e){v=e}},4),t.link(\"../GenericModal\",{default:function(e){b=e}},5),t.link(\"./TwoFactorModal\",{Method:function(e){x=e}},6),t.exportDefault(function(e){var n=e.onConfirm,t=e.onClose,w=e.emailOrUsername,C=e.invalidAttempt,F=E(),y=v().t,T=g(\"\"),M=l(T,2),A=M[0],D=M[1],I=p(),S=k(\"POST\",\"/v1/users.2fa.sendEmailCode\"),O=function(e){e.preventDefault(),n(A,x.EMAIL)},U=h();return _.createElement(b,{wrapperFunction:function(e){return _.createElement(o,a({is:\"form\",onSubmit:O},e))},onCancel:t,confirmText:y(\"Verify\"),title:y(\"Enter_authentication_code\"),onClose:t,variant:\"warning\",confirmDisabled:!A,tagline:y(\"Email_two-factor_authentication\"),icon:null},_.createElement(r,null,_.createElement(c,null,_.createElement(s,{alignSelf:\"stretch\",htmlFor:U},y(\"Enter_the_code_we_just_emailed_you\")),_.createElement(f,null,_.createElement(u,{id:U,ref:I,value:A,onChange:function(e){D(e.currentTarget.value)},placeholder:y(\"Enter_code_here\")})),C&&_.createElement(d,null,y(\"Invalid_password\")))),_.createElement(m,{display:\"flex\",justifyContent:\"end\",onClick:function(){return i.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.awrap(S({emailOrUsername:w}));case 3:F({type:\"success\",message:y(\"Email_sent\")}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),F({type:\"error\",message:y(\"error-email-send-failed\",{message:e.t0})});case 9:case\"end\":return e.stop()}},null,null,[[0,6]],Promise)},small:!0,mbs:24},y(\"Cloud_resend_email\")))})}","map":"{\"version\":3,\"sources\":[\"client/components/TwoFactorModal/TwoFactorEmailModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, FieldGroup, TextInput, Field, FieldLabel, FieldRow, FieldError, Button } from '@rocket.chat/fuselage';\\nimport { useAutoFocus, useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ChangeEvent, SyntheticEvent } from 'react';\\nimport React, { useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport GenericModal from '../GenericModal';\\nimport type { OnConfirm } from './TwoFactorModal';\\nimport { Method } from './TwoFactorModal';\\n\\ntype TwoFactorEmailModalProps = {\\n\\tonConfirm: OnConfirm;\\n\\tonClose: () => void;\\n\\temailOrUsername: string;\\n\\tinvalidAttempt?: boolean;\\n};\\n\\nconst TwoFactorEmailModal = ({ onConfirm, onClose, emailOrUsername, invalidAttempt }: TwoFactorEmailModalProps): ReactElement => {\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst { t } = useTranslation();\\n\\tconst [code, setCode] = useState<string>('');\\n\\tconst ref = useAutoFocus<HTMLInputElement>();\\n\\n\\tconst sendEmailCode = useEndpoint('POST', '/v1/users.2fa.sendEmailCode');\\n\\n\\tconst onClickResendCode = async (): Promise<void> => {\\n\\t\\ttry {\\n\\t\\t\\tawait sendEmailCode({ emailOrUsername });\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Email_sent') });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\tmessage: t('error-email-send-failed', { message: error }),\\n\\t\\t\\t});\\n\\t\\t}\\n\\t};\\n\\n\\tconst onConfirmEmailCode = (e: SyntheticEvent): void => {\\n\\t\\te.preventDefault();\\n\\t\\tonConfirm(code, Method.EMAIL);\\n\\t};\\n\\n\\tconst onChange = ({ currentTarget }: ChangeEvent<HTMLInputElement>): void => {\\n\\t\\tsetCode(currentTarget.value);\\n\\t};\\n\\n\\tconst id = useUniqueId();\\n\\n\\treturn (\\n\\t\\t<GenericModal\\n\\t\\t\\twrapperFunction={(props) => <Box is='form' onSubmit={onConfirmEmailCode} {...props} />}\\n\\t\\t\\tonCancel={onClose}\\n\\t\\t\\tconfirmText={t('Verify')}\\n\\t\\t\\ttitle={t('Enter_authentication_code')}\\n\\t\\t\\tonClose={onClose}\\n\\t\\t\\tvariant='warning'\\n\\t\\t\\tconfirmDisabled={!code}\\n\\t\\t\\ttagline={t('Email_two-factor_authentication')}\\n\\t\\t\\ticon={null}\\n\\t\\t>\\n\\t\\t\\t<FieldGroup>\\n\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t<FieldLabel alignSelf='stretch' htmlFor={id}>\\n\\t\\t\\t\\t\\t\\t{t('Enter_the_code_we_just_emailed_you')}\\n\\t\\t\\t\\t\\t</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<TextInput id={id} ref={ref} value={code} onChange={onChange} placeholder={t('Enter_code_here')} />\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t{invalidAttempt && <FieldError>{t('Invalid_password')}</FieldError>}\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t</FieldGroup>\\n\\t\\t\\t<Button display='flex' justifyContent='end' onClick={onClickResendCode} small mbs={24}>\\n\\t\\t\\t\\t{t('Cloud_resend_email')}\\n\\t\\t\\t</Button>\\n\\t\\t</GenericModal>\\n\\t);\\n};\\n\\nexport default TwoFactorEmailModal;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_extends\",\"_slicedToArray\",\"Box\",\"FieldGroup\",\"TextInput\",\"Field\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"Button\",\"useAutoFocus\",\"useUniqueId\",\"useToastMessageDispatch\",\"useEndpoint\",\"React\",\"useState\",\"useTranslation\",\"GenericModal\",\"Method\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"onConfirm\",\"onClose\",\"emailOrUsername\",\"invalidAttempt\",\"dispatchToastMessage\",\"t\",\"_useTranslation\",\"_useState\",\"_useState2\",\"code\",\"setCode\",\"ref\",\"sendEmailCode\",\"onConfirmEmailCode\",\"e\",\"preventDefault\",\"EMAIL\",\"id\",\"createElement\",\"wrapperFunction\",\"props\",\"is\",\"onSubmit\",\"onCancel\",\"confirmText\",\"title\",\"variant\",\"confirmDisabled\",\"tagline\",\"icon\",\"alignSelf\",\"htmlFor\",\"value\",\"onChange\",\"_ref2\",\"currentTarget\",\"placeholder\",\"display\",\"justifyContent\",\"onClick\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"type\",\"message\",\"t0\",\"stop\",\"Promise\",\"small\",\"mbs\"],\"mappings\":\"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\"}"}