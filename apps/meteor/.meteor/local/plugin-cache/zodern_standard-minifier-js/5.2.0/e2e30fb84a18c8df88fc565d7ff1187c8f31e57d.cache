{"code":"function module(e,n,t){let o,i;t.link(\"meteor/accounts-base\",{Accounts(e){o=e}},0),t.link(\"../../ui-utils/client\",{IframeLogin(e){i=e}},1);let r=new i,{_unstoreLoginToken:a}=o;o._unstoreLoginToken=function(){r.tryLogin();for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];a.apply(o,n)},window.addEventListener(\"message\",e=>{if(\"function\"==typeof e.data||\"object\"==typeof e.data&&e.data)switch(e.data.event){case\"try-iframe-login\":r.tryLogin(n=>{if(n){var t;null===(t=e.source)||void 0===t||t.postMessage({event:\"login-error\",response:n.message},{targetOrigin:e.origin})}});break;case\"login-with-token\":r.loginWithToken(e.data,n=>{if(n){var t;null===(t=e.source)||void 0===t||t.postMessage({event:\"login-error\",response:n.message},{targetOrigin:e.origin})}})}})}","map":"{\"version\":3,\"sources\":[\"app/iframe-login/client/iframe_client.ts\",\"<anon>\"],\"sourcesContent\":[\"import { Accounts } from 'meteor/accounts-base';\\n\\nimport { IframeLogin } from '../../ui-utils/client';\\n\\nconst iframeLogin = new IframeLogin();\\n\\nconst { _unstoreLoginToken } = Accounts;\\nAccounts._unstoreLoginToken = function (...args) {\\n\\tiframeLogin.tryLogin();\\n\\t_unstoreLoginToken.apply(Accounts, args);\\n};\\n\\nwindow.addEventListener('message', (e) => {\\n\\tif (!(typeof e.data === 'function' || (typeof e.data === 'object' && !!e.data))) {\\n\\t\\treturn;\\n\\t}\\n\\n\\tswitch (e.data.event) {\\n\\t\\tcase 'try-iframe-login':\\n\\t\\t\\tiframeLogin.tryLogin((error) => {\\n\\t\\t\\t\\tif (error) {\\n\\t\\t\\t\\t\\te.source?.postMessage(\\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\tevent: 'login-error',\\n\\t\\t\\t\\t\\t\\t\\tresponse: error.message,\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t{ targetOrigin: e.origin },\\n\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t}\\n\\t\\t\\t});\\n\\t\\t\\tbreak;\\n\\n\\t\\tcase 'login-with-token':\\n\\t\\t\\tiframeLogin.loginWithToken(e.data, (error) => {\\n\\t\\t\\t\\tif (error) {\\n\\t\\t\\t\\t\\te.source?.postMessage(\\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\tevent: 'login-error',\\n\\t\\t\\t\\t\\t\\t\\tresponse: error.message,\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t{ targetOrigin: e.origin },\\n\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t}\\n\\t\\t\\t});\\n\\t\\t\\tbreak;\\n\\t}\\n});\\n\",null],\"names\":[\"Accounts\",\"IframeLogin\",\"module\",\"link\",\"v\",\"iframeLogin\",\"_unstoreLoginToken\",\"tryLogin\",\"_len\",\"arguments\",\"length\",\"args\",\"Array\",\"_key\",\"apply\",\"window\",\"addEventListener\",\"e\",\"data\",\"event\",\"error\",\"_e$source\",\"source\",\"postMessage\",\"response\",\"message\",\"targetOrigin\",\"origin\",\"loginWithToken\",\"_e$source2\"],\"mappings\":\"2BAAAA,EAAgDC,EAAvCC,EAAUC,IAAA,CAAM,uBAAuB,CAAAH,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wBAAA,CAAAF,YAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAIhD,IAAMC,EAAc,IAAIJ,EAElB,CAAEK,mBAAAA,CAAAA,CAAoB,CAAGN,CAC/BA,CAAAA,EAASM,kBAAkB,CAAG,WAC7BD,EAAYE,QAAQ,GAAG,IAAA,IAAAC,EAAAC,UAAAC,MAAA,CADmBC,EAAI,AAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAJF,CAAI,CAAAE,EAAA,CAAAJ,SAAA,CAAAI,EAAA,CAE9CP,EAAmBQ,KAAK,CAACd,EAAUW,EACpC,EAEAI,OAAOC,gBAAgB,CAAC,UAAYC,IACnC,GAAM,AAAkB,YAAlB,OAAOA,EAAEC,IAAI,EAAoB,AAAkB,UAAlB,OAAOD,EAAEC,IAAI,EAAmBD,EAAEC,IAAK,CAI9E,OAAQD,EAAEC,IAAI,CAACC,KAAK,EACnB,IAAK,mBACJd,EAAYE,QAAQ,CAAEa,IACrB,GAAIA,EAAO,CAAA,IAAAC,CACV,AAAQ,QAARA,CAAAA,EAAAJ,EAAEK,MAAM,AAANA,GAAMD,AAAA,KAAA,IAAAA,GAARA,EAAUE,WAAW,CACpB,CACCJ,MAAO,cACPK,SAAUJ,EAAMK,OAAAA,EAEjB,CAAEC,aAAcT,EAAEU,MAAAA,AAAM,EAE1B,CACD,GACA,KAED,KAAK,mBACJtB,EAAYuB,cAAc,CAACX,EAAEC,IAAI,CAAGE,IACnC,GAAIA,EAAO,CAAA,IAAAS,CACV,AAAQ,QAARA,CAAAA,EAAAZ,EAAEK,MAAM,AAANA,GAAMO,AAAA,KAAA,IAAAA,GAARA,EAAUN,WAAW,CACpB,CACCJ,MAAO,cACPK,SAAUJ,EAAMK,OAAAA,EAEjB,CAAEC,aAAcT,EAAEU,MAAAA,AAAM,EAE1B,CACD,EAEF,CACD\"}"}