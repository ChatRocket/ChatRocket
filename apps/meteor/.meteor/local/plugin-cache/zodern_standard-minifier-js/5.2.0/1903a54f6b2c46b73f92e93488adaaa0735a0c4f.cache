{"code":"function module(e,t,l){let o,n,a,i,r,m;l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){o=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){n=e}},0),l.link(\"react\",{default(e){a=e},useState(e){i=e}},1),l.link(\"./DeleteTeamChannels\",{default(e){r=e}},2),l.link(\"./DeleteTeamConfirmation\",{default(e){m=e}},3);let E={LIST_ROOMS:\"LIST_ROOMS\",CONFIRM_DELETE:\"CONFIRM_DELETE\"};l.exportDefault(e=>{let{onCancel:t,onConfirm:l,rooms:d}=e,u=d&&d.length>0,[f,O]=i(u?E.LIST_ROOMS:E.CONFIRM_DELETE),[c,s]=i({}),[R,_]=i({}),C=n(e=>{if(c[e._id]){s(t=>(delete t[e._id],o({},t)));return}s(t=>o(o({},t),{},{[e._id]:e}))}),T=n(()=>{if(0===Object.values(c).filter(Boolean).length)return s(Object.fromEntries(d.map(e=>[e._id,e])));s({})}),S=n(()=>{let e=Object.fromEntries(d.filter(e=>!c[e._id]).map(e=>[e._id,e]));_(e),O(E.CONFIRM_DELETE)});return f===E.CONFIRM_DELETE?a.createElement(m,{onConfirm:l,onReturn:u?()=>O(E.LIST_ROOMS):void 0,onCancel:t,deletedRooms:c,keptRooms:R}):a.createElement(r,{rooms:d,onCancel:t,selectedRooms:c,onToggleAllRooms:T,onConfirm:S,onChangeRoomSelection:C})})}","map":"{\"version\":3,\"sources\":[\"client/views/teams/contextualBar/info/DeleteTeam/DeleteTeamModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, Serialized } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport React, { useState } from 'react';\\n\\nimport DeleteTeamChannels from './DeleteTeamChannels';\\nimport DeleteTeamConfirmation from './DeleteTeamConfirmation';\\n\\nconst STEPS = { LIST_ROOMS: 'LIST_ROOMS', CONFIRM_DELETE: 'CONFIRM_DELETE' };\\n\\ntype DeleteTeamModalProps = {\\n\\tonCancel: () => void;\\n\\tonConfirm: (roomsToDelete: IRoom['_id'][]) => void;\\n\\trooms: Serialized<IRoom>[];\\n};\\n\\nconst DeleteTeamModal = ({ onCancel, onConfirm, rooms }: DeleteTeamModalProps) => {\\n\\tconst hasRooms = rooms && rooms.length > 0;\\n\\n\\tconst [step, setStep] = useState(hasRooms ? STEPS.LIST_ROOMS : STEPS.CONFIRM_DELETE);\\n\\tconst [deletedRooms, setDeletedRooms] = useState<{ [key: string]: Serialized<IRoom> }>({});\\n\\tconst [keptRooms, setKeptRooms] = useState<{ [key: string]: Serialized<IRoom> }>({});\\n\\n\\tconst onChangeRoomSelection = useMutableCallback((room) => {\\n\\t\\tif (deletedRooms[room._id]) {\\n\\t\\t\\tsetDeletedRooms((deletedRooms) => {\\n\\t\\t\\t\\tdelete deletedRooms[room._id];\\n\\t\\t\\t\\treturn { ...deletedRooms };\\n\\t\\t\\t});\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tsetDeletedRooms((deletedRooms) => ({ ...deletedRooms, [room._id]: room }));\\n\\t});\\n\\n\\tconst onToggleAllRooms = useMutableCallback(() => {\\n\\t\\tif (Object.values(deletedRooms).filter(Boolean).length === 0) {\\n\\t\\t\\treturn setDeletedRooms(Object.fromEntries(rooms.map((room) => [room._id, room])));\\n\\t\\t}\\n\\t\\tsetDeletedRooms({});\\n\\t});\\n\\n\\tconst onSelectRooms = useMutableCallback(() => {\\n\\t\\tconst keptRooms = Object.fromEntries(rooms.filter((room) => !deletedRooms[room._id]).map((room) => [room._id, room]));\\n\\t\\tsetKeptRooms(keptRooms);\\n\\t\\tsetStep(STEPS.CONFIRM_DELETE);\\n\\t});\\n\\n\\tif (step === STEPS.CONFIRM_DELETE) {\\n\\t\\treturn (\\n\\t\\t\\t<DeleteTeamConfirmation\\n\\t\\t\\t\\tonConfirm={onConfirm}\\n\\t\\t\\t\\tonReturn={hasRooms ? () => setStep(STEPS.LIST_ROOMS) : undefined}\\n\\t\\t\\t\\tonCancel={onCancel}\\n\\t\\t\\t\\tdeletedRooms={deletedRooms}\\n\\t\\t\\t\\tkeptRooms={keptRooms}\\n\\t\\t\\t/>\\n\\t\\t);\\n\\t}\\n\\n\\treturn (\\n\\t\\t<DeleteTeamChannels\\n\\t\\t\\trooms={rooms}\\n\\t\\t\\tonCancel={onCancel}\\n\\t\\t\\tselectedRooms={deletedRooms}\\n\\t\\t\\tonToggleAllRooms={onToggleAllRooms}\\n\\t\\t\\tonConfirm={onSelectRooms}\\n\\t\\t\\tonChangeRoomSelection={onChangeRoomSelection}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default DeleteTeamModal;\\n\",null],\"names\":[\"_objectSpread\",\"useMutableCallback\",\"React\",\"useState\",\"DeleteTeamChannels\",\"DeleteTeamConfirmation\",\"module\",\"link\",\"default\",\"v\",\"STEPS\",\"LIST_ROOMS\",\"CONFIRM_DELETE\",\"exportDefault\",\"_ref\",\"onCancel\",\"onConfirm\",\"rooms\",\"hasRooms\",\"length\",\"step\",\"setStep\",\"deletedRooms\",\"setDeletedRooms\",\"keptRooms\",\"setKeptRooms\",\"onChangeRoomSelection\",\"room\",\"_id\",\"onToggleAllRooms\",\"Object\",\"values\",\"filter\",\"Boolean\",\"fromEntries\",\"map\",\"onSelectRooms\",\"createElement\",\"onReturn\",\"undefined\",\"selectedRooms\"],\"mappings\":\"2BACAA,EAAAC,EAAiEC,EAAAC,EAAAC,EAAAC,EAAxDC,EAAAC,IAAoB,CAAA,uCAAoC,CAAAC,QAAAC,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAxDH,EAAoBC,IAAA,CAAM,8BAA8B,CAAAN,mBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAP,EAAAO,CAAA,EAAAN,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uBAAA,CAAAC,QAAAC,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAC,QAAAC,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAMjE,IAAMC,EAAQ,CAAEC,WAAY,aAAcC,eAAgB,gBAAgB,EAN1EN,EAAOO,aAAE,CAceC,IAAyD,GAAxD,CAAEC,SAAAA,CAAQ,CAAEC,UAAAA,CAAS,CAAEC,MAAAA,CAAAA,CAA6B,CAAAH,EACtEI,EAAWD,GAASA,EAAME,MAAM,CAAG,EAEnC,CAACC,EAAMC,EAAQ,CAAGlB,EAASe,EAAWR,EAAMC,UAAU,CAAGD,EAAME,cAAc,EAC7E,CAACU,EAAcC,EAAgB,CAAGpB,EAA+C,CAAA,GACjF,CAACqB,EAAWC,EAAa,CAAGtB,EAA+C,CAAA,GAE3EuB,EAAwBzB,EAAoB0B,IACjD,GAAIL,CAAY,CAACK,EAAKC,GAAG,CAAC,CAAE,CAC3BL,EAAiBD,IAChB,OAAOA,CAAY,CAACK,EAAKC,GAAG,CAAC,CAC7B5B,EAAA,CAAA,EAAYsB,KAEb,MACD,CACAC,EAAiBD,GAAYtB,EAAAA,EAAA,CAAA,EAAWsB,GAAY,CAAA,EAAA,CAAE,CAACK,EAAKC,GAAG,CAAA,CAAGD,CAAI,GACvE,GAEME,EAAmB5B,EAAmB,KAC3C,GAAI6B,AAAuD,IAAvDA,OAAOC,MAAM,CAACT,GAAcU,MAAM,CAACC,SAASd,MAAM,CACrD,OAAOI,EAAgBO,OAAOI,WAAW,CAACjB,EAAMkB,GAAG,CAAER,GAAS,CAACA,EAAKC,GAAG,CAAED,EAAK,IAE/EJ,EAAgB,CAAA,EACjB,GAEMa,EAAgBnC,EAAmB,KACxC,IAAMuB,EAAYM,OAAOI,WAAW,CAACjB,EAAMe,MAAM,CAAEL,GAAS,CAACL,CAAY,CAACK,EAAKC,GAAG,CAAC,EAAEO,GAAG,CAAER,GAAS,CAACA,EAAKC,GAAG,CAAED,EAAK,GACnHF,EAAaD,GACbH,EAAQX,EAAME,cAAc,CAC7B,UAEA,AAAIQ,IAASV,EAAME,cAAc,CAE/BV,EAAAmC,aAAA,CAAChC,EAAsB,CACtBW,UAAWA,EACXsB,SAAUpB,EAAW,IAAMG,EAAQX,EAAMC,UAAU,EAAI4B,KAAAA,EACvDxB,SAAUA,EACVO,aAAcA,EACdE,UAAWA,CAAU,GAMvBtB,EAAAmC,aAAA,CAACjC,EAAkB,CAClBa,MAAOA,EACPF,SAAUA,EACVyB,cAAelB,EACfO,iBAAkBA,EAClBb,UAAWoB,EACXV,sBAAuBA,CAAsB,EAGhD\"}"}