{"code":"function module(e,o,t){let n,l,i,a,c,r,f,u,m,d,C,s,_,p,k,V,E,P,v,h,x;t.link(\"@rocket.chat/fuselage-hooks\",{useOutsideClick(e){n=e},useEffectEvent(e){l=e}},0),t.link(\"@rocket.chat/ui-video-conf\",{VideoConfPopup(e){i=e},VideoConfPopupHeader(e){a=e},VideoConfPopupContent(e){c=e},VideoConfPopupControllers(e){r=e},VideoConfController(e){f=e},useVideoConfControllers(e){u=e},VideoConfButton(e){m=e},VideoConfPopupFooter(e){d=e},VideoConfPopupTitle(e){C=e},VideoConfPopupFooterButtons(e){s=e}},1),t.link(\"react\",{default(e){_=e},useCallback(e){p=e},useRef(e){k=e}},2),t.link(\"react-i18next\",{useTranslation(e){V=e}},3),t.link(\"../../../../../../contexts/VideoConfContext\",{useVideoConfSetPreferences(e){E=e},useVideoConfCapabilities(e){P=e},useVideoConfPreferences(e){v=e}},4),t.link(\"../../hooks/useVideoConfRoomName\",{useVideoConfRoomName(e){h=e}},5),t.link(\"./VideoConfPopupRoomInfo\",{default(e){x=e}},6),t.exportDefault(e=>{let{id:o,loading:t,room:S,onClose:b,onConfirm:N}=e,{t:R}=V(),y=k(null);n([y],t?()=>void 0:b);let w=E(),B=v(),{controllersConfig:F,handleToggleMic:M,handleToggleCam:T}=u(B),g=P(),D=h(S),H=\"d\"===S.t?\"\".concat(R(\"Start_a_call_with__roomName__\",{roomName:D})):\"\".concat(R(\"Start_a_call_in__roomName__\",{roomName:D})),I=!!g.cam,L=!!g.mic,O=l(()=>{w(F),N()}),j=p(e=>{e&&(y.current=e,e.addEventListener(\"keydown\",e=>{\"Escape\"===e.key&&b()}))},[b]);return _.createElement(i,{ref:j,id:o,\"aria-label\":H},_.createElement(a,null,_.createElement(C,{text:R(\"Start_a_call\")}),(I||L)&&_.createElement(r,null,I&&_.createElement(f,{active:F.cam,title:R(F.cam?\"Cam_on\":\"Cam_off\"),icon:F.cam?\"video\":\"video-off\",onClick:T}),L&&_.createElement(f,{active:F.mic,title:R(F.mic?\"Mic_on\":\"Mic_off\"),icon:F.mic?\"mic\":\"mic-off\",onClick:M}))),_.createElement(c,null,_.createElement(x,{room:S})),_.createElement(d,null,_.createElement(s,null,_.createElement(m,{disabled:t,primary:!0,onClick:O},R(\"Start_call\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/VideoConference/VideoConfPopups/VideoConfPopup/StartCallPopup.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { useOutsideClick, useEffectEvent } from '@rocket.chat/fuselage-hooks';\\nimport {\\n\\tVideoConfPopup,\\n\\tVideoConfPopupHeader,\\n\\tVideoConfPopupContent,\\n\\tVideoConfPopupControllers,\\n\\tVideoConfController,\\n\\tuseVideoConfControllers,\\n\\tVideoConfButton,\\n\\tVideoConfPopupFooter,\\n\\tVideoConfPopupTitle,\\n\\tVideoConfPopupFooterButtons,\\n} from '@rocket.chat/ui-video-conf';\\nimport type { KeyboardEvent, ReactElement } from 'react';\\nimport React, { useCallback, useRef } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useVideoConfSetPreferences, useVideoConfCapabilities, useVideoConfPreferences } from '../../../../../../contexts/VideoConfContext';\\nimport { useVideoConfRoomName } from '../../hooks/useVideoConfRoomName';\\nimport VideoConfPopupRoomInfo from './VideoConfPopupRoomInfo';\\n\\ntype StartCallPopupProps = {\\n\\tid: string;\\n\\tloading: boolean;\\n\\troom: IRoom;\\n\\tonClose: () => void;\\n\\tonConfirm: () => void;\\n};\\n\\nconst StartCallPopup = ({ id, loading, room, onClose, onConfirm }: StartCallPopupProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst ref = useRef(null);\\n\\tuseOutsideClick([ref], !loading ? onClose : () => undefined);\\n\\n\\tconst setPreferences = useVideoConfSetPreferences();\\n\\tconst videoConfPreferences = useVideoConfPreferences();\\n\\tconst { controllersConfig, handleToggleMic, handleToggleCam } = useVideoConfControllers(videoConfPreferences);\\n\\tconst capabilities = useVideoConfCapabilities();\\n\\tconst roomName = useVideoConfRoomName(room);\\n\\n\\tconst dialogLabel =\\n\\t\\troom.t === 'd' ? `${t('Start_a_call_with__roomName__', { roomName })}` : `${t('Start_a_call_in__roomName__', { roomName })}`;\\n\\n\\tconst showCam = !!capabilities.cam;\\n\\tconst showMic = !!capabilities.mic;\\n\\n\\tconst handleStartCall = useEffectEvent(() => {\\n\\t\\tsetPreferences(controllersConfig);\\n\\t\\tonConfirm();\\n\\t});\\n\\n\\tconst callbackRef = useCallback(\\n\\t\\t(node) => {\\n\\t\\t\\tif (!node) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tref.current = node;\\n\\t\\t\\tnode.addEventListener('keydown', (e: KeyboardEvent) => {\\n\\t\\t\\t\\tif (e.key === 'Escape') {\\n\\t\\t\\t\\t\\tonClose();\\n\\t\\t\\t\\t}\\n\\t\\t\\t});\\n\\t\\t},\\n\\t\\t[onClose],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<VideoConfPopup ref={callbackRef} id={id} aria-label={dialogLabel}>\\n\\t\\t\\t<VideoConfPopupHeader>\\n\\t\\t\\t\\t<VideoConfPopupTitle text={t('Start_a_call')} />\\n\\t\\t\\t\\t{(showCam || showMic) && (\\n\\t\\t\\t\\t\\t<VideoConfPopupControllers>\\n\\t\\t\\t\\t\\t\\t{showCam && (\\n\\t\\t\\t\\t\\t\\t\\t<VideoConfController\\n\\t\\t\\t\\t\\t\\t\\t\\tactive={controllersConfig.cam}\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle={controllersConfig.cam ? t('Cam_on') : t('Cam_off')}\\n\\t\\t\\t\\t\\t\\t\\t\\ticon={controllersConfig.cam ? 'video' : 'video-off'}\\n\\t\\t\\t\\t\\t\\t\\t\\tonClick={handleToggleCam}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t{showMic && (\\n\\t\\t\\t\\t\\t\\t\\t<VideoConfController\\n\\t\\t\\t\\t\\t\\t\\t\\tactive={controllersConfig.mic}\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle={controllersConfig.mic ? t('Mic_on') : t('Mic_off')}\\n\\t\\t\\t\\t\\t\\t\\t\\ticon={controllersConfig.mic ? 'mic' : 'mic-off'}\\n\\t\\t\\t\\t\\t\\t\\t\\tonClick={handleToggleMic}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</VideoConfPopupControllers>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</VideoConfPopupHeader>\\n\\t\\t\\t<VideoConfPopupContent>\\n\\t\\t\\t\\t<VideoConfPopupRoomInfo room={room} />\\n\\t\\t\\t</VideoConfPopupContent>\\n\\t\\t\\t<VideoConfPopupFooter>\\n\\t\\t\\t\\t<VideoConfPopupFooterButtons>\\n\\t\\t\\t\\t\\t<VideoConfButton disabled={loading} primary onClick={handleStartCall}>\\n\\t\\t\\t\\t\\t\\t{t('Start_call')}\\n\\t\\t\\t\\t\\t</VideoConfButton>\\n\\t\\t\\t\\t</VideoConfPopupFooterButtons>\\n\\t\\t\\t</VideoConfPopupFooter>\\n\\t\\t</VideoConfPopup>\\n\\t);\\n};\\n\\nexport default StartCallPopup;\\n\",null],\"names\":[\"useOutsideClick\",\"useEffectEvent\",\"VideoConfPopup\",\"VideoConfPopupHeader\",\"VideoConfPopupContent\",\"VideoConfPopupControllers\",\"VideoConfController\",\"useVideoConfControllers\",\"VideoConfButton\",\"VideoConfPopupFooter\",\"VideoConfPopupTitle\",\"VideoConfPopupFooterButtons\",\"React\",\"useCallback\",\"useRef\",\"useTranslation\",\"useVideoConfSetPreferences\",\"useVideoConfCapabilities\",\"useVideoConfPreferences\",\"useVideoConfRoomName\",\"VideoConfPopupRoomInfo\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"id\",\"loading\",\"room\",\"onClose\",\"onConfirm\",\"t\",\"ref\",\"undefined\",\"setPreferences\",\"videoConfPreferences\",\"controllersConfig\",\"handleToggleMic\",\"handleToggleCam\",\"capabilities\",\"roomName\",\"dialogLabel\",\"concat\",\"showCam\",\"cam\",\"showMic\",\"mic\",\"handleStartCall\",\"callbackRef\",\"node\",\"current\",\"addEventListener\",\"e\",\"key\",\"createElement\",\"text\",\"active\",\"title\",\"icon\",\"onClick\",\"disabled\",\"primary\"],\"mappings\":\"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\"}"}