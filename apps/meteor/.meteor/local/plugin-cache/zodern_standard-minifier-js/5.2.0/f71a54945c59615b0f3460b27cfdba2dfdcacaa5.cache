{"code":"function module(e,t,a){let n,i,l,o,d;a.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),a.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){i=e}},0),a.link(\"@rocket.chat/ui-client\",{GenericMenu(e){l=e}},1),a.link(\"react\",{default(e){o=e}},2),a.link(\"react-i18next\",{useTranslation(e){d=e}},3),a.exportDefault(e=>{let{options:t,onChangeMenuVisibility:a,context:p,isMessageEncrypted:c}=e,{t:r}=d(),s=i(),u=t.map(e=>{var t,a;return n(n({variant:\"alert\"===e.color?\"danger\":\"\",id:e.id,icon:e.icon,content:r(e.label),onClick:e.action,type:e.type},e.disabled&&{disabled:null==e?void 0:null===(t=e.disabled)||void 0===t?void 0:t.call(e,p)}),e.disabled&&(null==e?void 0:null===(a=e.disabled)||void 0===a?void 0:a.call(e,p))&&{tooltip:r(\"Action_not_available_encrypted_content\",{action:r(e.label)})})}).reduce((e,t)=>{let a=t.type?t.type:\"\",n=e.find(e=>e.id===a);if(n)return n.items.push(t),e;let i={id:a,title:\"apps\"===a?r(\"Apps\"):\"\",items:[t]};return e.push(i),e},[]).map(e=>\"apps\"===e.id&&c?{id:\"apps\",title:r(\"Apps\"),items:[{content:r(\"Unavailable\"),type:\"apps\",id:s,disabled:!0,gap:!1,tooltip:r(\"Action_not_available_encrypted_content\",{action:r(\"Apps\")})}]}:e);return o.createElement(l,{onOpenChange:a,detached:!0,title:r(\"More\"),\"data-qa-id\":\"menu\",\"data-qa-type\":\"message-action-menu\",sections:u,placement:\"bottom-end\"})})}","map":"{\"version\":3,\"sources\":[\"client/components/message/toolbar/MessageActionMenu.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { GenericMenu, type GenericMenuItemProps } from '@rocket.chat/ui-client';\\nimport type { MouseEvent, ReactElement } from 'react';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport type { MessageActionConditionProps, MessageActionConfig } from '../../../../app/ui-utils/client/lib/MessageAction';\\n\\ntype MessageActionConfigOption = Omit<MessageActionConfig, 'condition' | 'context' | 'order' | 'action'> & {\\n\\taction: (e?: MouseEvent<HTMLElement>) => void;\\n};\\n\\ntype MessageActionSection = {\\n\\tid: string;\\n\\ttitle: string;\\n\\titems: GenericMenuItemProps[];\\n};\\n\\ntype MessageActionMenuProps = {\\n\\tonChangeMenuVisibility: (visible: boolean) => void;\\n\\toptions: MessageActionConfigOption[];\\n\\tcontext: MessageActionConditionProps;\\n\\tisMessageEncrypted: boolean;\\n};\\n\\nconst MessageActionMenu = ({ options, onChangeMenuVisibility, context, isMessageEncrypted }: MessageActionMenuProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst id = useUniqueId();\\n\\tconst groupOptions = options\\n\\t\\t.map((option) => ({\\n\\t\\t\\tvariant: option.color === 'alert' ? 'danger' : '',\\n\\t\\t\\tid: option.id,\\n\\t\\t\\ticon: option.icon,\\n\\t\\t\\tcontent: t(option.label),\\n\\t\\t\\tonClick: option.action,\\n\\t\\t\\ttype: option.type,\\n\\t\\t\\t...(option.disabled && { disabled: option?.disabled?.(context) }),\\n\\t\\t\\t...(option.disabled &&\\n\\t\\t\\t\\toption?.disabled?.(context) && { tooltip: t('Action_not_available_encrypted_content', { action: t(option.label) }) }),\\n\\t\\t}))\\n\\t\\t.reduce((acc, option) => {\\n\\t\\t\\tconst group = option.type ? option.type : '';\\n\\t\\t\\tconst section = acc.find((section: { id: string }) => section.id === group);\\n\\t\\t\\tif (section) {\\n\\t\\t\\t\\tsection.items.push(option);\\n\\t\\t\\t\\treturn acc;\\n\\t\\t\\t}\\n\\t\\t\\tconst newSection = { id: group, title: group === 'apps' ? t('Apps') : '', items: [option] };\\n\\t\\t\\tacc.push(newSection);\\n\\n\\t\\t\\treturn acc;\\n\\t\\t}, [] as unknown as MessageActionSection[])\\n\\t\\t.map((section) => {\\n\\t\\t\\tif (section.id !== 'apps') {\\n\\t\\t\\t\\treturn section;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (!isMessageEncrypted) {\\n\\t\\t\\t\\treturn section;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\tid: 'apps',\\n\\t\\t\\t\\ttitle: t('Apps'),\\n\\t\\t\\t\\titems: [\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\tcontent: t('Unavailable'),\\n\\t\\t\\t\\t\\t\\ttype: 'apps',\\n\\t\\t\\t\\t\\t\\tid,\\n\\t\\t\\t\\t\\t\\tdisabled: true,\\n\\t\\t\\t\\t\\t\\tgap: false,\\n\\t\\t\\t\\t\\t\\ttooltip: t('Action_not_available_encrypted_content', { action: t('Apps') }),\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t],\\n\\t\\t\\t};\\n\\t\\t});\\n\\n\\treturn (\\n\\t\\t<GenericMenu\\n\\t\\t\\tonOpenChange={onChangeMenuVisibility}\\n\\t\\t\\tdetached\\n\\t\\t\\ttitle={t('More')}\\n\\t\\t\\tdata-qa-id='menu'\\n\\t\\t\\tdata-qa-type='message-action-menu'\\n\\t\\t\\tsections={groupOptions}\\n\\t\\t\\tplacement='bottom-end'\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default MessageActionMenu;\\n\",null],\"names\":[\"_objectSpread\",\"useUniqueId\",\"GenericMenu\",\"React\",\"useTranslation\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"options\",\"onChangeMenuVisibility\",\"context\",\"isMessageEncrypted\",\"t\",\"id\",\"groupOptions\",\"map\",\"option\",\"_option$disabled\",\"_option$disabled2\",\"variant\",\"color\",\"icon\",\"content\",\"label\",\"onClick\",\"action\",\"type\",\"disabled\",\"call\",\"tooltip\",\"reduce\",\"acc\",\"group\",\"section\",\"find\",\"items\",\"push\",\"newSection\",\"title\",\"gap\",\"createElement\",\"onOpenChange\",\"detached\",\"sections\",\"placement\"],\"mappings\":\"2BAAAA,EAAAC,EAA0DC,EAAAC,EAAAC,EAAjDC,EAAaC,IAAM,CAAA,uCAA8B,CAAAC,QAAAC,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAjDH,EAAaC,IAAA,CAAM,8BAA8B,CAAAL,YAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yBAAA,CAAAJ,YAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAF,eAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA1DH,EAAOI,aAAa,CAyBMC,IAA2G,GAA1G,CAAEC,QAAAA,CAAO,CAAEC,uBAAAA,CAAsB,CAAEC,QAAAA,CAAO,CAAEC,mBAAAA,CAAAA,CAA4C,CAAAJ,EAC5G,CAAEK,EAAAA,CAAAA,CAAG,CAAGX,IACRY,EAAKf,IACLgB,EAAeN,EACnBO,GAAG,CAAEC,IAAM,IAAAC,EAAAC,EAAA,OAAArB,EAAAA,EAAA,CACXsB,QAASH,AAAiB,UAAjBA,EAAOI,KAAK,CAAe,SAAW,GAC/CP,GAAIG,EAAOH,EAAE,CACbQ,KAAML,EAAOK,IAAI,CACjBC,QAASV,EAAEI,EAAOO,KAAK,EACvBC,QAASR,EAAOS,MAAM,CACtBC,KAAMV,EAAOU,IAAAA,AAAI,EACbV,EAAOW,QAAQ,EAAI,CAAEA,SAAUX,MAAAA,EAAM,KAAA,EAAA,AAAU,OAAVC,CAAAA,EAAND,EAAQW,QAAQ,AAARA,GAAQV,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAhBA,EAAAW,IAAA,CAAAZ,EAAmBN,EAAQ,GAC1DM,EAAOW,QAAQ,EAClBX,CAAAA,MAAAA,EAAM,KAAA,EAAA,AAAU,OAAVE,CAAAA,EAANF,EAAQW,QAAQ,AAARA,GAAQT,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAhBA,EAAAU,IAAA,CAAAZ,EAAmBN,EAAO,GAAK,CAAEmB,QAASjB,EAAE,yCAA0C,CAAEa,OAAQb,EAAEI,EAAOO,KAAK,CAAC,EAAG,EAAE,GAErHO,MAAM,CAAC,CAACC,EAAKf,KACb,IAAMgB,EAAQhB,EAAOU,IAAI,CAAGV,EAAOU,IAAI,CAAG,GACpCO,EAAUF,EAAIG,IAAI,CAAED,GAA4BA,EAAQpB,EAAE,GAAKmB,GACrE,GAAIC,EAEH,OADAA,EAAQE,KAAK,CAACC,IAAI,CAACpB,GACZe,EAER,IAAMM,EAAa,CAAExB,GAAImB,EAAOM,MAAON,AAAU,SAAVA,EAAmBpB,EAAE,QAAU,GAAIuB,MAAO,CAACnB,EAAM,AAAC,EAGzF,OAFAe,EAAIK,IAAI,CAACC,GAEFN,CACR,EAAG,EAAuC,EACzChB,GAAG,CAAEkB,GACL,AAAmB,SAAfA,EAAQpB,EAAE,EAITF,EAIE,CACNE,GAAI,OACJyB,MAAO1B,EAAE,QACTuB,MAAO,CACN,CACCb,QAASV,EAAE,eACXc,KAAM,OACNb,GAAAA,EACAc,SAAU,CAAA,EACVY,IAAK,CAAA,EACLV,QAASjB,EAAE,yCAA0C,CAAEa,OAAQb,EAAE,OAAO,IACxE,EAlBKqB,GAuBV,OACCjC,EAAAwC,aAAA,CAACzC,EAAW,CACX0C,aAAchC,EACdiC,SAAQ,CAAA,EACRJ,MAAO1B,EAAE,QACT,aAAW,OACX,eAAa,sBACb+B,SAAU7B,EACV8B,UAAU,YAAY,EAGzB\"}"}