{"code":"function module(e,t,l){let a,n,i,s,r,o,p,u,c,d,m,k,E,g,v,f,h,A;l.link(\"@babel/runtime/helpers/extends\",{default(e){a=e}},0),l.link(\"@rocket.chat/fuselage\",{Button(e){n=e},ButtonGroup(e){i=e},Margins(e){s=e}},0),l.link(\"@rocket.chat/ui-contexts\",{usePermission(e){r=e},useRoute(e){o=e},useRouteParameter(e){p=e},useSetModal(e){u=e}},1),l.link(\"react\",{default(e){c=e}},2),l.link(\"react-i18next\",{useTranslation(e){d=e}},3),l.link(\"../../../components/GenericResourceUsage\",{GenericResourceUsageSkeleton(e){m=e}},4),l.link(\"../../../components/Page\",{PageHeader(e){k=e}},5),l.link(\"../UnlimitedAppsUpsellModal\",{default(e){E=e}},6),l.link(\"../hooks/useAppsCountQuery\",{useAppsCountQuery(e){g=e}},7),l.link(\"../hooks/usePrivateAppsEnabled\",{usePrivateAppsEnabled(e){v=e}},8),l.link(\"./EnabledAppsCount\",{default(e){f=e}},9),l.link(\"./PrivateAppInstallModal/PrivateAppInstallModal\",{default(e){h=e}},10),l.link(\"./UpdateRocketChatButton\",{default(e){A=e}},11),l.exportDefault(e=>{let{title:t,unsupportedVersion:l}=e,{t:P}=d(),C=r(\"manage-apps\"),U=p(\"context\")||\"explore\",x=o(\"marketplace\"),_=u(),b=g(U),M=v(),R=()=>{_(null),x.push({context:U,page:\"install\"})};return b.isError?null:c.createElement(k,{title:t},b.isLoading&&c.createElement(m,{mi:16}),!l&&b.isSuccess&&!b.data.hasUnlimitedApps&&c.createElement(s,{inline:16},c.createElement(f,a({},b.data,{tooltip:\"private\"!==U||M?void 0:P(\"Private_apps_premium_message\"),context:U}))),c.createElement(i,{wrap:!0,align:\"end\"},!l&&C&&b.isSuccess&&!b.data.hasUnlimitedApps&&\"private\"!==U&&c.createElement(n,{onClick:()=>{_(c.createElement(E,{onClose:()=>_(null)}))}},P(\"Enable_unlimited_apps\")),C&&\"private\"===U&&c.createElement(n,{onClick:()=>{if(!M){_(c.createElement(h,{onClose:()=>_(null),onProceed:R}));return}x.push({context:U,page:\"install\"})}},P(\"Upload_private_app\")),l&&C&&\"private\"!==U&&c.createElement(A,null)))})}","map":"{\"version\":3,\"sources\":[\"client/views/marketplace/components/MarketplaceHeader.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Button, ButtonGroup, Margins } from '@rocket.chat/fuselage';\\nimport { usePermission, useRoute, useRouteParameter, useSetModal } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { GenericResourceUsageSkeleton } from '../../../components/GenericResourceUsage';\\nimport { PageHeader } from '../../../components/Page';\\nimport UnlimitedAppsUpsellModal from '../UnlimitedAppsUpsellModal';\\nimport { useAppsCountQuery } from '../hooks/useAppsCountQuery';\\nimport { usePrivateAppsEnabled } from '../hooks/usePrivateAppsEnabled';\\nimport EnabledAppsCount from './EnabledAppsCount';\\nimport PrivateAppInstallModal from './PrivateAppInstallModal/PrivateAppInstallModal';\\nimport UpdateRocketChatButton from './UpdateRocketChatButton';\\n\\nconst MarketplaceHeader = ({ title, unsupportedVersion }: { title: string; unsupportedVersion: boolean }): ReactElement | null => {\\n\\tconst { t } = useTranslation();\\n\\tconst isAdmin = usePermission('manage-apps');\\n\\tconst context = (useRouteParameter('context') || 'explore') as 'private' | 'explore' | 'installed' | 'premium' | 'requested';\\n\\tconst route = useRoute('marketplace');\\n\\tconst setModal = useSetModal();\\n\\tconst result = useAppsCountQuery(context);\\n\\n\\tconst privateAppsEnabled = usePrivateAppsEnabled();\\n\\n\\tconst handleProceed = (): void => {\\n\\t\\tsetModal(null);\\n\\t\\troute.push({ context, page: 'install' });\\n\\t};\\n\\n\\tconst handleClickPrivate = () => {\\n\\t\\tif (!privateAppsEnabled) {\\n\\t\\t\\tsetModal(<PrivateAppInstallModal onClose={() => setModal(null)} onProceed={handleProceed} />);\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\troute.push({ context, page: 'install' });\\n\\t};\\n\\n\\tif (result.isError) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<PageHeader title={title}>\\n\\t\\t\\t{result.isLoading && <GenericResourceUsageSkeleton mi={16} />}\\n\\n\\t\\t\\t{!unsupportedVersion && result.isSuccess && !result.data.hasUnlimitedApps && (\\n\\t\\t\\t\\t<Margins inline={16}>\\n\\t\\t\\t\\t\\t<EnabledAppsCount\\n\\t\\t\\t\\t\\t\\t{...result.data}\\n\\t\\t\\t\\t\\t\\ttooltip={context === 'private' && !privateAppsEnabled ? t('Private_apps_premium_message') : undefined}\\n\\t\\t\\t\\t\\t\\tcontext={context}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</Margins>\\n\\t\\t\\t)}\\n\\n\\t\\t\\t<ButtonGroup wrap align='end'>\\n\\t\\t\\t\\t{!unsupportedVersion && isAdmin && result.isSuccess && !result.data.hasUnlimitedApps && context !== 'private' && (\\n\\t\\t\\t\\t\\t<Button\\n\\t\\t\\t\\t\\t\\tonClick={() => {\\n\\t\\t\\t\\t\\t\\t\\tsetModal(<UnlimitedAppsUpsellModal onClose={() => setModal(null)} />);\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t{t('Enable_unlimited_apps')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t)}\\n\\n\\t\\t\\t\\t{isAdmin && context === 'private' && <Button onClick={handleClickPrivate}>{t('Upload_private_app')}</Button>}\\n\\t\\t\\t\\t{unsupportedVersion && isAdmin && context !== 'private' && <UpdateRocketChatButton />}\\n\\t\\t\\t</ButtonGroup>\\n\\t\\t</PageHeader>\\n\\t);\\n};\\n\\nexport default MarketplaceHeader;\\n\",null],\"names\":[\"_extends\",\"Button\",\"ButtonGroup\",\"Margins\",\"usePermission\",\"useRoute\",\"useRouteParameter\",\"useSetModal\",\"React\",\"useTranslation\",\"GenericResourceUsageSkeleton\",\"PageHeader\",\"UnlimitedAppsUpsellModal\",\"useAppsCountQuery\",\"usePrivateAppsEnabled\",\"EnabledAppsCount\",\"PrivateAppInstallModal\",\"UpdateRocketChatButton\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"title\",\"unsupportedVersion\",\"t\",\"isAdmin\",\"context\",\"route\",\"setModal\",\"result\",\"privateAppsEnabled\",\"handleProceed\",\"push\",\"page\",\"isError\",\"createElement\",\"isLoading\",\"mi\",\"isSuccess\",\"data\",\"hasUnlimitedApps\",\"inline\",\"tooltip\",\"undefined\",\"wrap\",\"align\",\"onClick\",\"onClose\",\"handleClickPrivate\",\"onProceed\"],\"mappings\":\"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\"}"}