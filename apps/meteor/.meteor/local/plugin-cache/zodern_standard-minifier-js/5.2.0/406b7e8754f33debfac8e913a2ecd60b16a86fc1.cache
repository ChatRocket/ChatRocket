{"code":"function module(e,t,s){let i,l,o,a,n,r,g;let u=[\"msg\"];s.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){i=e}},0),s.export({useJumpToMessage:()=>c}),s.link(\"@rocket.chat/ui-contexts\",{useRouter(e){l=e}},0),s.link(\"react\",{useCallback(e){o=e}},1),s.link(\"../../../../components/message/list/MessageListContext\",{useMessageListJumpToMessageParam(e){a=e},useMessageListRef(e){n=e}},2),s.link(\"../providers/messageHighlightSubscription\",{setHighlightMessage(e){r=e},clearHighlightMessage(e){g=e}},3);let c=e=>{let t=a(),s=n(),c=l(),m=o(t=>{t&&scroll&&setTimeout(()=>{if(null!=s&&s.current){let e=s.current,i=e.getBoundingClientRect(),l=t.getBoundingClientRect(),o=l.top-i.top,a=e.scrollTop;e.scrollTo({top:a+o-60,behavior:\"smooth\"})}let l=c.getSearchParameters(),{msg:o}=l,a=i(l,u);c.navigate({pathname:c.getLocationPathname(),search:a},{replace:!0}),r(e),setTimeout(g,2e3)},500)},[s,e,c]);if(t===e)return m}}","map":"{\"version\":3,\"sources\":[\"client/views/room/MessageList/hooks/useJumpToMessage.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { useRouter } from '@rocket.chat/ui-contexts';\\nimport { useCallback } from 'react';\\n\\nimport { useMessageListJumpToMessageParam, useMessageListRef } from '../../../../components/message/list/MessageListContext';\\nimport { setHighlightMessage, clearHighlightMessage } from '../providers/messageHighlightSubscription';\\n\\n// this is an arbitrary value so that there's a gap between the header and the message;\\nconst SCROLL_EXTRA_OFFSET = 60;\\n\\nexport const useJumpToMessage = (messageId: IMessage['_id']) => {\\n\\tconst jumpToMessageParam = useMessageListJumpToMessageParam();\\n\\tconst listRef = useMessageListRef();\\n\\tconst router = useRouter();\\n\\n\\tconst ref = useCallback(\\n\\t\\t(node: HTMLElement | null) => {\\n\\t\\t\\tif (!node || !scroll) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\tif (listRef?.current) {\\n\\t\\t\\t\\t\\tconst wrapper = listRef.current;\\n\\t\\t\\t\\t\\tconst containerRect = wrapper.getBoundingClientRect();\\n\\t\\t\\t\\t\\tconst messageRect = node.getBoundingClientRect();\\n\\n\\t\\t\\t\\t\\tconst offset = messageRect.top - containerRect.top;\\n\\t\\t\\t\\t\\tconst scrollPosition = wrapper.scrollTop;\\n\\t\\t\\t\\t\\tconst newScrollPosition = scrollPosition + offset - SCROLL_EXTRA_OFFSET;\\n\\n\\t\\t\\t\\t\\twrapper.scrollTo({ top: newScrollPosition, behavior: 'smooth' });\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tconst { msg: _, ...search } = router.getSearchParameters();\\n\\t\\t\\t\\trouter.navigate(\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\tpathname: router.getLocationPathname(),\\n\\t\\t\\t\\t\\t\\tsearch,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t{ replace: true },\\n\\t\\t\\t\\t);\\n\\n\\t\\t\\t\\tsetHighlightMessage(messageId);\\n\\t\\t\\t\\tsetTimeout(clearHighlightMessage, 2000);\\n\\t\\t\\t}, 500);\\n\\t\\t},\\n\\t\\t[listRef, messageId, router],\\n\\t);\\n\\n\\tif (jumpToMessageParam !== messageId) {\\n\\t\\treturn undefined;\\n\\t}\\n\\n\\treturn ref;\\n};\\n\",null],\"names\":[\"_objectWithoutProperties\",\"useRouter\",\"useCallback\",\"useMessageListJumpToMessageParam\",\"useMessageListRef\",\"setHighlightMessage\",\"clearHighlightMessage\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useJumpToMessage\",\"messageId\",\"jumpToMessageParam\",\"listRef\",\"router\",\"ref\",\"node\",\"scroll\",\"setTimeout\",\"current\",\"wrapper\",\"containerRect\",\"getBoundingClientRect\",\"messageRect\",\"offset\",\"top\",\"scrollPosition\",\"scrollTop\",\"scrollTo\",\"behavior\",\"_router$getSearchPara\",\"getSearchParameters\",\"msg\",\"_\",\"search\",\"_excluded\",\"navigate\",\"pathname\",\"getLocationPathname\",\"replace\"],\"mappings\":\"2BACAA,EAAqDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,gBAA3BC,EAAAC,IAAA,CAAA,iDAA2B,CAAAC,QAAAC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAArDH,EAAOI,MAAE,CAAA,CAAAC,iBAAiBA,IAAAA,CAA0B,GAACL,EAAAC,IAAA,CAAA,2BAAA,CAAAP,UAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAN,YAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yDAAA,CAAAL,iCAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,kBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,4CAAA,CAAAH,oBAAAK,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,sBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAS9C,IAAME,EAAoBC,IAChC,IAAMC,EAAqBX,IACrBY,EAAUX,IACVY,EAASf,IAETgB,EAAMf,EACVgB,IACKA,GAASC,QAGdC,WAAW,KACV,GAAIL,MAAAA,GAAAA,EAASM,OAAO,CAAE,CACrB,IAAMC,EAAUP,EAAQM,OAAO,CACzBE,EAAgBD,EAAQE,qBAAqB,GAC7CC,EAAcP,EAAKM,qBAAqB,GAExCE,EAASD,EAAYE,GAAG,CAAGJ,EAAcI,GAAG,CAC5CC,EAAiBN,EAAQO,SAAS,CAGxCP,EAAQQ,QAAQ,CAAC,CAAEH,IAFOC,EAAiBF,EApBpB,GAsBoBK,SAAU,QAAQ,EAC9D,CAEA,IAAAC,EAA8BhB,EAAOiB,mBAAmB,GAAlD,CAAEC,IAAKC,CAAAA,CAAc,CAAAH,EAARI,EAAMpC,EAAAgC,EAAAK,GACzBrB,EAAOsB,QAAQ,CACd,CACCC,SAAUvB,EAAOwB,mBAAmB,GACpCJ,OAAAA,GAED,CAAEK,QAAS,CAAA,CAAI,GAGhBpC,EAAoBQ,GACpBO,WAAWd,EAAuB,IACnC,EAAG,IACJ,EACA,CAACS,EAASF,EAAWG,EAAO,EAG7B,GAAIF,IAAuBD,EAI3B,OAAOI,CACR\"}"}