{"code":"function module(e,t,s){let n,a,r,o,i,c,l,u;s.export({useResetE2EEKeyAction:()=>y}),s.link(\"@rocket.chat/ui-contexts\",{useSetModal(e){n=e},usePermission(e){a=e},useEndpoint(e){r=e},useTranslation(e){o=e},useToastMessageDispatch(e){i=e}},0),s.link(\"react\",{default(e){c=e},useCallback(e){l=e}},1),s.link(\"../../../../components/GenericModal\",{default(e){u=e}},2);let y=e=>{let t=o(),s=n(),y=i(),E=a(\"edit-other-user-e2ee\"),_=r(\"POST\",\"/v1/users.resetE2EKey\"),d=l(async()=>{try{await _({userId:e}),y({type:\"success\",message:t(\"Users_key_has_been_reset\")})}catch(e){y({type:\"error\",message:e})}finally{s()}},[_,s,t,e,y]),m=l(()=>{s(c.createElement(u,{variant:\"danger\",onConfirm:d,onCancel:()=>s(),confirmText:t(\"Reset\")},t(\"E2E_Reset_Other_Key_Warning\")))},[d,t,s]);return E?{icon:\"key\",label:t(\"Reset_E2E_Key\"),action:m}:void 0}}","map":"{\"version\":3,\"sources\":[\"client/views/admin/users/hooks/useResetE2EEKeyAction.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { useSetModal, usePermission, useEndpoint, useTranslation, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport React, { useCallback } from 'react';\\n\\nimport GenericModal from '../../../../components/GenericModal';\\nimport type { Action } from '../../../hooks/useActionSpread';\\n\\nexport const useResetE2EEKeyAction = (userId: IUser['_id']): Action | undefined => {\\n\\tconst t = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst canResetE2EEKey = usePermission('edit-other-user-e2ee');\\n\\tconst resetE2EEKeyRequest = useEndpoint('POST', '/v1/users.resetE2EKey');\\n\\n\\tconst resetE2EEKey = useCallback(async () => {\\n\\t\\ttry {\\n\\t\\t\\tawait resetE2EEKeyRequest({ userId });\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Users_key_has_been_reset') });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t} finally {\\n\\t\\t\\tsetModal();\\n\\t\\t}\\n\\t}, [resetE2EEKeyRequest, setModal, t, userId, dispatchToastMessage]);\\n\\n\\tconst confirmResetE2EEKey = useCallback(() => {\\n\\t\\tsetModal(\\n\\t\\t\\t<GenericModal variant='danger' onConfirm={resetE2EEKey} onCancel={(): void => setModal()} confirmText={t('Reset')}>\\n\\t\\t\\t\\t{t('E2E_Reset_Other_Key_Warning')}\\n\\t\\t\\t</GenericModal>,\\n\\t\\t);\\n\\t}, [resetE2EEKey, t, setModal]);\\n\\n\\treturn canResetE2EEKey\\n\\t\\t? {\\n\\t\\t\\t\\ticon: 'key',\\n\\t\\t\\t\\tlabel: t('Reset_E2E_Key'),\\n\\t\\t\\t\\taction: confirmResetE2EEKey,\\n\\t\\t  }\\n\\t\\t: undefined;\\n};\\n\",null],\"names\":[\"useSetModal\",\"usePermission\",\"useEndpoint\",\"useTranslation\",\"useToastMessageDispatch\",\"React\",\"useCallback\",\"GenericModal\",\"module\",\"export\",\"useResetE2EEKeyAction\",\"link\",\"v\",\"default\",\"userId\",\"t\",\"setModal\",\"dispatchToastMessage\",\"canResetE2EEKey\",\"resetE2EEKeyRequest\",\"resetE2EEKey\",\"type\",\"message\",\"error\",\"confirmResetE2EEKey\",\"createElement\",\"variant\",\"onConfirm\",\"onCancel\",\"confirmText\",\"icon\",\"label\",\"action\",\"undefined\"],\"mappings\":\"2BACkEA,EAAAC,EAAyBC,EAAMC,EAAAC,EAA2BC,EAAAC,EAAAC,EAA5HC,EAAOC,MAAE,CAAA,CAAAC,sBAA4BA,IAAAA,CAAa,GAA0EF,EAAAG,IAAA,CAAA,2BAAA,CAAAX,YAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,cAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,YAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,eAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,wBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAP,EAAAO,CAAA,EAAAN,YAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,sCAAA,CAAAE,QAAAD,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAMrH,IAAMF,EAAyBI,IACrC,IAAMC,EAAIZ,IACJa,EAAWhB,IACXiB,EAAuBb,IACvBc,EAAkBjB,EAAc,wBAChCkB,EAAsBjB,EAAY,OAAQ,yBAE1CkB,EAAed,EAAY,UAChC,GAAI,CACH,MAAMa,EAAoB,CAAEL,OAAAA,CAAM,GAClCG,EAAqB,CAAEI,KAAM,UAAWC,QAASP,EAAE,2BAA2B,EAC/E,CAAE,MAAOQ,EAAO,CACfN,EAAqB,CAAEI,KAAM,QAASC,QAASC,CAAK,EACrD,QAAU,CACTP,GACD,CACD,EAAG,CAACG,EAAqBH,EAAUD,EAAGD,EAAQG,EAAqB,EAE7DO,EAAsBlB,EAAY,KACvCU,EACCX,EAAAoB,aAAA,CAAClB,EAAY,CAACmB,QAAQ,SAASC,UAAWP,EAAcQ,SAAUA,IAAYZ,IAAYa,YAAad,EAAE,QAAS,EAChHA,EAAE,gCAGN,EAAG,CAACK,EAAcL,EAAGC,EAAS,EAE9B,OAAOE,EACJ,CACAY,KAAM,MACNC,MAAOhB,EAAE,iBACTiB,OAAQR,GAERS,KAAAA,CACJ\"}"}