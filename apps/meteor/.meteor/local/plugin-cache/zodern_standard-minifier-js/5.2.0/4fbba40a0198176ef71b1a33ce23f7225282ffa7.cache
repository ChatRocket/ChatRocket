{"code":"function module(e,t,i){let a,o,n,r,l,d,s,c,u,m,p,v,y,f,g;i.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){a=e}},0),i.export({KonchatNotification:()=>h}),i.link(\"@rocket.chat/random\",{Random(e){o=e}},0),i.link(\"meteor/meteor\",{Meteor(e){n=e}},1),i.link(\"meteor/reactive-var\",{ReactiveVar(e){r=e}},2),i.link(\"../../../../client/lib/RoomManager\",{RoomManager(e){l=e}},3),i.link(\"../../../../client/lib/onClientMessageReceived\",{onClientMessageReceived(e){d=e}},4),i.link(\"../../../../client/lib/utils/getAvatarAsPng\",{getAvatarAsPng(e){s=e}},5),i.link(\"../../../../client/providers/RouterProvider\",{router(e){c=e}},6),i.link(\"../../../../lib/utils/stringUtils\",{stripTags(e){u=e}},7),i.link(\"../../../custom-sounds/client/lib/CustomSounds\",{CustomSounds(e){m=e}},8),i.link(\"../../../e2e/client\",{e2e(e){p=e}},9),i.link(\"../../../models/client\",{ChatSubscription(e){v=e}},10),i.link(\"../../../utils/client\",{getUserPreference(e){y=e}},11),i.link(\"../../../utils/client/getUserAvatarURL\",{getUserAvatarURL(e){f=e}},12),i.link(\"../../../utils/client/lib/SDKClient\",{sdk(e){g=e}},13);let h=new class e{constructor(){this.notificationStatus=new r(void 0)}getDesktopPermission(){if(window.Notification&&\"granted\"!==Notification.permission)return Notification.requestPermission(e=>{this.notificationStatus.set(e)})}async notify(e){var t,i;if(void 0===window.Notification||\"granted\"!==Notification.permission||!e.payload)return;let{rid:r}=e.payload;if(!r)return;let l=await d({rid:r,msg:e.text,notification:!0}),s=y(n.userId(),\"desktopNotificationRequireInteraction\"),m=new Notification(e.title,{icon:e.icon||f(null===(t=e.payload.sender)||void 0===t?void 0:t.username),body:u(l.msg),tag:e.payload._id,canReply:!0,silent:!0,requireInteraction:s}),p=s?-1:(null!==(i=e.duration)&&void 0!==i?i:0)-0||10;p>0&&setTimeout(()=>m.close(),1e3*p),m.addEventListener&&m.addEventListener(\"reply\",e=>{let{response:t}=e;g.call(\"sendMessage\",{_id:o.id(),rid:r,msg:t})}),m.onclick=function(){var t;if(this.close(),window.focus(),e.payload._id&&e.payload.rid&&e.payload.name)switch(null===(t=e.payload)||void 0===t?void 0:t.type){case\"d\":return c.navigate({pattern:\"/direct/:rid/:tab?/:context?\",params:a({rid:e.payload.rid},e.payload.tmid&&{tab:\"thread\",context:e.payload.tmid}),search:a(a({},c.getSearchParameters()),{},{jump:e.payload._id})});case\"c\":return c.navigate({pattern:\"/channel/:name/:tab?/:context?\",params:a({name:e.payload.name},e.payload.tmid&&{tab:\"thread\",context:e.payload.tmid}),search:a(a({},c.getSearchParameters()),{},{jump:e.payload._id})});case\"p\":return c.navigate({pattern:\"/group/:name/:tab?/:context?\",params:a({name:e.payload.name},e.payload.tmid&&{tab:\"thread\",context:e.payload.tmid}),search:a(a({},c.getSearchParameters()),{},{jump:e.payload._id})});case\"l\":return c.navigate({pattern:\"/live/:id/:tab?/:context?\",params:{id:e.payload.rid,tab:\"room-info\"},search:a(a({},c.getSearchParameters()),{},{jump:e.payload._id})})}}}async showDesktop(e){var t,i,a,o,r,d;if(!(!e.payload.rid||(null===(t=e.payload)||void 0===t?void 0:t.rid)===l.opened&&(\"function\"==typeof window.document.hasFocus?window.document.hasFocus():void 0))&&(null===(i=n.user())||void 0===i?void 0:i.status)!==\"busy\"){if((null===(a=e.payload)||void 0===a?void 0:null===(o=a.message)||void 0===o?void 0:o.t)===\"e2e\"){let t=await p.getInstanceByRoomId(e.payload.rid);t&&(e.text=(await t.decrypt(e.payload.message.msg)).text)}return s(null===(r=e.payload)||void 0===r?void 0:null===(d=r.sender)||void 0===d?void 0:d.username,t=>(e.icon=t,this.notify(e)))}}async newMessage(e){var t;if((null===(t=n.user())||void 0===t?void 0:t.status)===\"busy\")return;let i=n.userId(),a=y(i,\"newMessageNotification\"),o=y(i,\"notificationsSoundVolume\",100);if(!e)return;let r=v.findOne({rid:e},{fields:{audioNotificationValue:1}});if(r&&\"none\"!==r.audioNotificationValue)try{if(r.audioNotificationValue&&\"0\"!==r.audioNotificationValue){m.play(r.audioNotificationValue,{volume:Number((o/100).toPrecision(2))});return}a&&\"none\"!==a&&m.play(a,{volume:Number((o/100).toPrecision(2))})}catch(e){}}newRoom(e){Tracker.nonreactive(()=>{let t=Session.get(\"newRoomSound\");return t=t?[...t,e]:[e],Session.set(\"newRoomSound\",t)})}removeRoomNotification(e){var t;let i=null!==(t=Session.get(\"newRoomSound\"))&&void 0!==t?t:[];i=i.filter(t=>t!==e),Tracker.nonreactive(()=>Session.set(\"newRoomSound\",i));let a=document.querySelector(\".link-room-\".concat(e));null==a||a.classList.remove(\"new-room-highlight\")}}}","map":"{\"version\":3,\"sources\":[\"app/ui/client/lib/KonchatNotification.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { INotificationDesktop, IRoom, IUser } from '@rocket.chat/core-typings';\\nimport { Random } from '@rocket.chat/random';\\nimport { Meteor } from 'meteor/meteor';\\nimport { ReactiveVar } from 'meteor/reactive-var';\\n\\nimport { RoomManager } from '../../../../client/lib/RoomManager';\\nimport { onClientMessageReceived } from '../../../../client/lib/onClientMessageReceived';\\nimport { getAvatarAsPng } from '../../../../client/lib/utils/getAvatarAsPng';\\nimport { router } from '../../../../client/providers/RouterProvider';\\nimport { stripTags } from '../../../../lib/utils/stringUtils';\\nimport { CustomSounds } from '../../../custom-sounds/client/lib/CustomSounds';\\nimport { e2e } from '../../../e2e/client';\\nimport { ChatSubscription } from '../../../models/client';\\nimport { getUserPreference } from '../../../utils/client';\\nimport { getUserAvatarURL } from '../../../utils/client/getUserAvatarURL';\\nimport { sdk } from '../../../utils/client/lib/SDKClient';\\n\\ndeclare global {\\n\\t// eslint-disable-next-line @typescript-eslint/naming-convention\\n\\tinterface NotificationEventMap {\\n\\t\\treply: { response: string };\\n\\t}\\n}\\n\\nclass KonchatNotification {\\n\\tpublic notificationStatus = new ReactiveVar<NotificationPermission | undefined>(undefined);\\n\\n\\tpublic getDesktopPermission() {\\n\\t\\tif (window.Notification && Notification.permission !== 'granted') {\\n\\t\\t\\treturn Notification.requestPermission((status) => {\\n\\t\\t\\t\\tthis.notificationStatus.set(status);\\n\\t\\t\\t});\\n\\t\\t}\\n\\t}\\n\\n\\tpublic async notify(notification: INotificationDesktop) {\\n\\t\\tif (typeof window.Notification === 'undefined' || Notification.permission !== 'granted') {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (!notification.payload) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst { rid } = notification.payload;\\n\\n\\t\\tif (!rid) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tconst message = await onClientMessageReceived({\\n\\t\\t\\trid,\\n\\t\\t\\tmsg: notification.text,\\n\\t\\t\\tnotification: true,\\n\\t\\t} as any);\\n\\n\\t\\tconst requireInteraction = getUserPreference<boolean>(Meteor.userId(), 'desktopNotificationRequireInteraction');\\n\\t\\tconst n = new Notification(notification.title, {\\n\\t\\t\\ticon: notification.icon || getUserAvatarURL(notification.payload.sender?.username as string),\\n\\t\\t\\tbody: stripTags(message.msg),\\n\\t\\t\\ttag: notification.payload._id,\\n\\t\\t\\tcanReply: true,\\n\\t\\t\\tsilent: true,\\n\\t\\t\\trequireInteraction,\\n\\t\\t} as NotificationOptions & {\\n\\t\\t\\tcanReply?: boolean; // TODO is this still needed for the desktop app?\\n\\t\\t});\\n\\n\\t\\tconst notificationDuration = !requireInteraction ? (notification.duration ?? 0) - 0 || 10 : -1;\\n\\t\\tif (notificationDuration > 0) {\\n\\t\\t\\tsetTimeout(() => n.close(), notificationDuration * 1000);\\n\\t\\t}\\n\\n\\t\\tif (n.addEventListener) {\\n\\t\\t\\tn.addEventListener(\\n\\t\\t\\t\\t'reply',\\n\\t\\t\\t\\t({ response }) =>\\n\\t\\t\\t\\t\\tvoid sdk.call('sendMessage', {\\n\\t\\t\\t\\t\\t\\t_id: Random.id(),\\n\\t\\t\\t\\t\\t\\trid,\\n\\t\\t\\t\\t\\t\\tmsg: response,\\n\\t\\t\\t\\t\\t}),\\n\\t\\t\\t);\\n\\t\\t}\\n\\n\\t\\tn.onclick = function () {\\n\\t\\t\\tthis.close();\\n\\t\\t\\twindow.focus();\\n\\n\\t\\t\\tif (!notification.payload._id || !notification.payload.rid || !notification.payload.name) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tswitch (notification.payload?.type) {\\n\\t\\t\\t\\tcase 'd':\\n\\t\\t\\t\\t\\treturn router.navigate({\\n\\t\\t\\t\\t\\t\\tpattern: '/direct/:rid/:tab?/:context?',\\n\\t\\t\\t\\t\\t\\tparams: {\\n\\t\\t\\t\\t\\t\\t\\trid: notification.payload.rid,\\n\\t\\t\\t\\t\\t\\t\\t...(notification.payload.tmid && {\\n\\t\\t\\t\\t\\t\\t\\t\\ttab: 'thread',\\n\\t\\t\\t\\t\\t\\t\\t\\tcontext: notification.payload.tmid,\\n\\t\\t\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\tsearch: { ...router.getSearchParameters(), jump: notification.payload._id },\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\tcase 'c':\\n\\t\\t\\t\\t\\treturn router.navigate({\\n\\t\\t\\t\\t\\t\\tpattern: '/channel/:name/:tab?/:context?',\\n\\t\\t\\t\\t\\t\\tparams: {\\n\\t\\t\\t\\t\\t\\t\\tname: notification.payload.name,\\n\\t\\t\\t\\t\\t\\t\\t...(notification.payload.tmid && {\\n\\t\\t\\t\\t\\t\\t\\t\\ttab: 'thread',\\n\\t\\t\\t\\t\\t\\t\\t\\tcontext: notification.payload.tmid,\\n\\t\\t\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\tsearch: { ...router.getSearchParameters(), jump: notification.payload._id },\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\tcase 'p':\\n\\t\\t\\t\\t\\treturn router.navigate({\\n\\t\\t\\t\\t\\t\\tpattern: '/group/:name/:tab?/:context?',\\n\\t\\t\\t\\t\\t\\tparams: {\\n\\t\\t\\t\\t\\t\\t\\tname: notification.payload.name,\\n\\t\\t\\t\\t\\t\\t\\t...(notification.payload.tmid && {\\n\\t\\t\\t\\t\\t\\t\\t\\ttab: 'thread',\\n\\t\\t\\t\\t\\t\\t\\t\\tcontext: notification.payload.tmid,\\n\\t\\t\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\tsearch: { ...router.getSearchParameters(), jump: notification.payload._id },\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\tcase 'l':\\n\\t\\t\\t\\t\\treturn router.navigate({\\n\\t\\t\\t\\t\\t\\tpattern: '/live/:id/:tab?/:context?',\\n\\t\\t\\t\\t\\t\\tparams: {\\n\\t\\t\\t\\t\\t\\t\\tid: notification.payload.rid,\\n\\t\\t\\t\\t\\t\\t\\ttab: 'room-info',\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\tsearch: { ...router.getSearchParameters(), jump: notification.payload._id },\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t}\\n\\t\\t};\\n\\t}\\n\\n\\tpublic async showDesktop(notification: INotificationDesktop) {\\n\\t\\tif (!notification.payload.rid) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (\\n\\t\\t\\tnotification.payload?.rid === RoomManager.opened &&\\n\\t\\t\\t(typeof window.document.hasFocus === 'function' ? window.document.hasFocus() : undefined)\\n\\t\\t) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif ((Meteor.user() as IUser | null)?.status === 'busy') {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (notification.payload?.message?.t === 'e2e') {\\n\\t\\t\\tconst e2eRoom = await e2e.getInstanceByRoomId(notification.payload.rid);\\n\\t\\t\\tif (e2eRoom) {\\n\\t\\t\\t\\tnotification.text = (await e2eRoom.decrypt(notification.payload.message.msg)).text;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\treturn getAvatarAsPng(notification.payload?.sender?.username, (avatarAsPng) => {\\n\\t\\t\\tnotification.icon = avatarAsPng;\\n\\t\\t\\treturn this.notify(notification);\\n\\t\\t});\\n\\t}\\n\\n\\tpublic async newMessage(rid: IRoom['_id'] | undefined) {\\n\\t\\tif ((Meteor.user() as IUser | null)?.status === 'busy') {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst userId = Meteor.userId();\\n\\t\\tconst newMessageNotification = getUserPreference<string>(userId, 'newMessageNotification');\\n\\t\\tconst audioVolume = getUserPreference(userId, 'notificationsSoundVolume', 100);\\n\\n\\t\\tif (!rid) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst sub = ChatSubscription.findOne({ rid }, { fields: { audioNotificationValue: 1 } });\\n\\n\\t\\tif (!sub || sub.audioNotificationValue === 'none') {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\ttry {\\n\\t\\t\\tif (sub.audioNotificationValue && sub.audioNotificationValue !== '0') {\\n\\t\\t\\t\\tvoid CustomSounds.play(sub.audioNotificationValue, {\\n\\t\\t\\t\\t\\tvolume: Number((audioVolume / 100).toPrecision(2)),\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (newMessageNotification && newMessageNotification !== 'none') {\\n\\t\\t\\t\\tvoid CustomSounds.play(newMessageNotification, {\\n\\t\\t\\t\\t\\tvolume: Number((audioVolume / 100).toPrecision(2)),\\n\\t\\t\\t\\t});\\n\\t\\t\\t}\\n\\t\\t} catch (e) {\\n\\t\\t\\t// do nothing\\n\\t\\t}\\n\\t}\\n\\n\\tpublic newRoom(rid: IRoom['_id']) {\\n\\t\\tTracker.nonreactive(() => {\\n\\t\\t\\tlet newRoomSound = Session.get('newRoomSound') as IRoom['_id'][] | undefined;\\n\\t\\t\\tif (newRoomSound) {\\n\\t\\t\\t\\tnewRoomSound = [...newRoomSound, rid];\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tnewRoomSound = [rid];\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn Session.set('newRoomSound', newRoomSound);\\n\\t\\t});\\n\\t}\\n\\n\\tpublic removeRoomNotification(rid: IRoom['_id']) {\\n\\t\\tlet newRoomSound = (Session.get('newRoomSound') as IRoom['_id'][] | undefined) ?? [];\\n\\t\\tnewRoomSound = newRoomSound.filter((_rid) => _rid !== rid);\\n\\t\\tTracker.nonreactive(() => Session.set('newRoomSound', newRoomSound));\\n\\n\\t\\tconst link = document.querySelector(`.link-room-${rid}`);\\n\\n\\t\\tlink?.classList.remove('new-room-highlight');\\n\\t}\\n}\\n\\nconst instance = new KonchatNotification();\\n\\nexport { instance as KonchatNotification };\\n\",null],\"names\":[\"_objectSpread\",\"Random\",\"Meteor\",\"ReactiveVar\",\"RoomManager\",\"onClientMessageReceived\",\"getAvatarAsPng\",\"router\",\"stripTags\",\"CustomSounds\",\"e2e\",\"ChatSubscription\",\"getUserPreference\",\"getUserAvatarURL\",\"sdk\",\"module\",\"link\",\"default\",\"v\",\"export\",\"KonchatNotification\",\"instance\",\"constructor\",\"notificationStatus\",\"undefined\",\"getDesktopPermission\",\"window\",\"Notification\",\"permission\",\"requestPermission\",\"status\",\"set\",\"notify\",\"notification\",\"_notification$payload\",\"_notification$duratio\",\"payload\",\"rid\",\"message\",\"msg\",\"text\",\"requireInteraction\",\"userId\",\"n\",\"title\",\"icon\",\"sender\",\"username\",\"body\",\"tag\",\"_id\",\"canReply\",\"silent\",\"notificationDuration\",\"duration\",\"setTimeout\",\"close\",\"addEventListener\",\"_ref\",\"response\",\"call\",\"id\",\"onclick\",\"_notification$payload2\",\"focus\",\"name\",\"type\",\"navigate\",\"pattern\",\"params\",\"tmid\",\"tab\",\"context\",\"search\",\"getSearchParameters\",\"jump\",\"showDesktop\",\"_notification$payload3\",\"_Meteor$user\",\"_notification$payload4\",\"_notification$payload5\",\"_notification$payload6\",\"_notification$payload7\",\"opened\",\"document\",\"hasFocus\",\"user\",\"t\",\"e2eRoom\",\"getInstanceByRoomId\",\"decrypt\",\"avatarAsPng\",\"newMessage\",\"_Meteor$user2\",\"newMessageNotification\",\"audioVolume\",\"sub\",\"findOne\",\"fields\",\"audioNotificationValue\",\"play\",\"volume\",\"Number\",\"toPrecision\",\"e\",\"newRoom\",\"Tracker\",\"nonreactive\",\"newRoomSound\",\"Session\",\"get\",\"removeRoomNotification\",\"_Session$get\",\"filter\",\"_rid\",\"querySelector\",\"concat\",\"classList\",\"remove\"],\"mappings\":\"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\"}"}