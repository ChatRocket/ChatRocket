{"code":"function module(e,n,t){let o,a,l,s,c,r,i,u,m,d;t.export({useRoomConvertToTeam:()=>k}),t.link(\"@rocket.chat/core-typings\",{isRoomFederated(e){o=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){a=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useSetModal(e){l=e},useToastMessageDispatch(e){s=e},useTranslation(e){c=e},useEndpoint(e){r=e},usePermission(e){i=e}},2),t.link(\"react\",{default(e){u=e}},3),t.link(\"../../../../../../components/GenericModal\",{default(e){m=e}},4),t.link(\"../useCanEditRoom\",{useCanEditRoom(e){d=e}},5);let k=e=>{let n=c(),t=l(),k=s(),h=d(e),C=i(\"create-team\"),T=!o(e)&&C,p=!e.teamId&&!e.prid&&T&&h,v=r(\"POST\",\"c\"===e.t?\"/v1/channels.convertToTeam\":\"/v1/groups.convertToTeam\"),_=a(async()=>{let o=async()=>{try{await v(\"c\"===e.t?{channelId:e._id}:{roomId:e._id}),k({type:\"success\",message:n(\"Room_has_been_converted\")})}catch(e){k({type:\"error\",message:e})}finally{t(null)}};t(u.createElement(m,{title:n(\"Confirmation\"),variant:\"warning\",onClose:()=>t(null),onCancel:()=>t(null),onConfirm:o,confirmText:n(\"Convert\")},n(\"Converting_channel_to_a_team\")))});return p?_:null}}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/Info/hooks/actions/useRoomConvertToTeam.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { isRoomFederated } from '@rocket.chat/core-typings';\\nimport type { IRoom } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useSetModal, useToastMessageDispatch, useTranslation, useEndpoint, usePermission } from '@rocket.chat/ui-contexts';\\nimport React from 'react';\\n\\nimport GenericModal from '../../../../../../components/GenericModal';\\nimport { useCanEditRoom } from '../useCanEditRoom';\\n\\nexport const useRoomConvertToTeam = (room: IRoom) => {\\n\\tconst t = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst canEdit = useCanEditRoom(room);\\n\\tconst hasPermissionToConvertRoomToTeam = usePermission('create-team');\\n\\tconst canConvertRoomToTeam = isRoomFederated(room) ? false : hasPermissionToConvertRoomToTeam;\\n\\tconst allowConvertToTeam = !room.teamId && !room.prid && canConvertRoomToTeam && canEdit;\\n\\n\\tconst convertRoomToTeam = useEndpoint('POST', room.t === 'c' ? '/v1/channels.convertToTeam' : '/v1/groups.convertToTeam');\\n\\n\\tconst handleConvertToTeam = useMutableCallback(async () => {\\n\\t\\tconst onConfirm = async () => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tawait convertRoomToTeam(room.t === 'c' ? { channelId: room._id } : { roomId: room._id });\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Room_has_been_converted') });\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t} finally {\\n\\t\\t\\t\\tsetModal(null);\\n\\t\\t\\t}\\n\\t\\t};\\n\\n\\t\\tsetModal(\\n\\t\\t\\t<GenericModal\\n\\t\\t\\t\\ttitle={t('Confirmation')}\\n\\t\\t\\t\\tvariant='warning'\\n\\t\\t\\t\\tonClose={() => setModal(null)}\\n\\t\\t\\t\\tonCancel={() => setModal(null)}\\n\\t\\t\\t\\tonConfirm={onConfirm}\\n\\t\\t\\t\\tconfirmText={t('Convert')}\\n\\t\\t\\t>\\n\\t\\t\\t\\t{t('Converting_channel_to_a_team')}\\n\\t\\t\\t</GenericModal>,\\n\\t\\t);\\n\\t});\\n\\n\\treturn allowConvertToTeam ? handleConvertToTeam : null;\\n};\\n\",null],\"names\":[\"isRoomFederated\",\"useMutableCallback\",\"useSetModal\",\"useToastMessageDispatch\",\"useTranslation\",\"useEndpoint\",\"usePermission\",\"React\",\"GenericModal\",\"useCanEditRoom\",\"module\",\"export\",\"useRoomConvertToTeam\",\"link\",\"v\",\"default\",\"room\",\"t\",\"setModal\",\"dispatchToastMessage\",\"canEdit\",\"hasPermissionToConvertRoomToTeam\",\"canConvertRoomToTeam\",\"allowConvertToTeam\",\"teamId\",\"prid\",\"convertRoomToTeam\",\"handleConvertToTeam\",\"onConfirm\",\"channelId\",\"_id\",\"roomId\",\"type\",\"message\",\"error\",\"createElement\",\"title\",\"variant\",\"onClose\",\"onCancel\",\"confirmText\"],\"mappings\":\"2BAA4DA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA5DC,EAAOC,MAAE,CAAA,CAAAC,qBAAuBA,IAAAA,CAA4B,GAAAF,EAAAG,IAAA,CAAA,4BAAA,CAAAb,gBAAAc,CAAA,EAAAd,EAAAc,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,8BAAA,CAAAZ,mBAAAa,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,2BAAA,CAAAX,YAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,wBAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,eAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,YAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,cAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,4CAAA,CAAAE,QAAAD,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,oBAAA,CAAAJ,eAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GASrD,IAAMF,EAAwBI,IACpC,IAAMC,EAAIb,IACJc,EAAWhB,IACXiB,EAAuBhB,IAEvBiB,EAAUX,EAAeO,GACzBK,EAAmCf,EAAc,eACjDgB,EAAuBtB,CAAAA,EAAgBgB,IAAgBK,EACvDE,EAAqB,CAACP,EAAKQ,MAAM,EAAI,CAACR,EAAKS,IAAI,EAAIH,GAAwBF,EAE3EM,EAAoBrB,EAAY,OAAQW,AAAW,MAAXA,EAAKC,CAAC,CAAW,6BAA+B,4BAExFU,EAAsB1B,EAAmB,UAC9C,IAAM2B,EAAY,UACjB,GAAI,CACH,MAAMF,EAAkBV,AAAW,MAAXA,EAAKC,CAAC,CAAW,CAAEY,UAAWb,EAAKc,GAAAA,AAAG,EAAK,CAAEC,OAAQf,EAAKc,GAAAA,AAAG,GACrFX,EAAqB,CAAEa,KAAM,UAAWC,QAAShB,EAAE,0BAA0B,EAC9E,CAAE,MAAOiB,EAAO,CACff,EAAqB,CAAEa,KAAM,QAASC,QAASC,CAAK,EACrD,QAAU,CACThB,EAAS,KACV,CACD,EAEAA,EACCX,EAAA4B,aAAA,CAAC3B,EAAY,CACZ4B,MAAOnB,EAAE,gBACToB,QAAQ,UACRC,QAASA,IAAMpB,EAAS,MACxBqB,SAAUA,IAAMrB,EAAS,MACzBU,UAAWA,EACXY,YAAavB,EAAE,UAAW,EAEzBA,EAAE,iCAGN,GAEA,OAAOM,EAAqBI,EAAsB,IACnD\"}"}