{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){a=e}},1),t.export({useRedirectOnSettingsChanged:function(){return s}}),t.link(\"@rocket.chat/ui-contexts\",{useRouter:function(e){o=e}},0),t.link(\"react\",{useEffect:function(e){u=e}},1),t.link(\"../../../../../app/ui-utils/client\",{LegacyRoomManager:function(e){i=e}},2),t.link(\"../../../../lib/rooms/roomCoordinator\",{roomCoordinator:function(e){c=e}},3);var r,a,o,u,i,c,l={channel:\"c\",group:\"p\",direct:\"d\",live:\"l\"},s=function(e){var n=o(),t=!!e;u(function(){var o,u,s,f;t&&r.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=c.getRoomDirectives(e.t).config.route,u=n.getRouteParameters().name,s=n.getRouteName(),!(!(null!=o&&o.path)||!s||!u)){t.next=5;break}return t.abrupt(\"return\");case 5:if(!(o.name===s&&u===e.name)){t.next=7;break}return t.abrupt(\"return\");case 7:if(!(f=l[s])){t.next=11;break}return t.next=11,r.awrap(i.close(f+s));case 11:n.navigate({pattern:o.path,params:a(a({},n.getRouteParameters()),{},{name:e.name}),search:n.getSearchParameters()});case 12:case\"end\":return t.stop()}},null,null,null,Promise)},[null==e?void 0:e.t,null==e?void 0:e.name,n,t])}}","map":"{\"version\":3,\"sources\":[\"client/views/room/providers/hooks/useRedirectOnSettingsChanged.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { ISubscription } from '@rocket.chat/core-typings';\\nimport { useRouter } from '@rocket.chat/ui-contexts';\\nimport { useEffect } from 'react';\\n\\nimport { LegacyRoomManager } from '../../../../../app/ui-utils/client';\\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\\n\\nconst routeNameToRoomTypeMap: Record<string, string> = {\\n\\tchannel: 'c',\\n\\tgroup: 'p',\\n\\tdirect: 'd',\\n\\tlive: 'l',\\n};\\n\\nexport const useRedirectOnSettingsChanged = (subscription?: ISubscription | null) => {\\n\\tconst router = useRouter();\\n\\n\\tconst subExists = !!subscription;\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!subExists) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tconst redirect = async () => {\\n\\t\\t\\tconst routeConfig = roomCoordinator.getRoomDirectives(subscription.t).config.route;\\n\\n\\t\\t\\tconst channelName = router.getRouteParameters().name;\\n\\t\\t\\tconst routeName = router.getRouteName() as string;\\n\\n\\t\\t\\tif (!routeConfig?.path || !routeName || !channelName) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (routeConfig.name === routeName && channelName === subscription.name) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst routeRoomType = routeNameToRoomTypeMap[routeName];\\n\\n\\t\\t\\tif (routeRoomType) {\\n\\t\\t\\t\\tawait LegacyRoomManager.close(routeRoomType + routeName);\\n\\t\\t\\t}\\n\\n\\t\\t\\trouter.navigate({\\n\\t\\t\\t\\tpattern: routeConfig.path,\\n\\t\\t\\t\\tparams: { ...router.getRouteParameters(), name: subscription.name },\\n\\t\\t\\t\\tsearch: router.getSearchParameters(),\\n\\t\\t\\t});\\n\\t\\t};\\n\\t\\tredirect();\\n\\t}, [subscription?.t, subscription?.name, router, subExists]);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_objectSpread\",\"export\",\"useRedirectOnSettingsChanged\",\"useRouter\",\"useEffect\",\"LegacyRoomManager\",\"roomCoordinator\",\"routeNameToRoomTypeMap\",\"channel\",\"group\",\"direct\",\"live\",\"subscription\",\"router\",\"subExists\",\"routeConfig\",\"channelName\",\"routeName\",\"routeRoomType\",\"async\",\"_context\",\"prev\",\"next\",\"getRoomDirectives\",\"t\",\"config\",\"route\",\"getRouteParameters\",\"name\",\"getRouteName\",\"path\",\"abrupt\",\"awrap\",\"close\",\"navigate\",\"pattern\",\"params\",\"search\",\"getSearchParameters\",\"stop\",\"Promise\"],\"mappings\":\"uBACoBA,EAAMC,IAAA,CAAA,6BAA2B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAArDH,EAAOM,MAAE,CAAA,CAAAC,6BAAiB,WAA2B,OAAAA,CAAA,CAAA,GAAAP,EAAAC,IAAA,CAAA,2BAAA,CAAAO,UAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAQ,UAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qCAAA,CAAAS,kBAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wCAAA,CAAAU,gBAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAMrD,IANAC,EAAqDC,EAAAG,EAAAC,EAAAC,EAAAC,EAM/CC,EAAiD,CACtDC,QAAS,IACTC,MAAO,IACPC,OAAQ,IACRC,KAAM,KAGMT,EAA+B,SAACU,CAAmC,EAC/E,IAAMC,EAASV,IAETW,EAAY,CAAC,CAACF,EAEpBR,EAAU,eAIQW,EAAAC,EAAAC,EAAAC,EAHZJ,GAGYf,EAAAoB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAIiC,GAH3CP,EAAcT,EAAgBiB,iBAAiB,CAACX,EAAaY,CAAC,EAAEC,MAAM,CAACC,KAAK,CAE5EV,EAAcH,EAAOc,kBAAkB,GAAGC,IAAI,CAC9CX,EAAYJ,EAAOgB,YAAY,GAAY,CAE7C,CAAA,CAACd,CAAAA,MAAAA,GAAAA,EAAae,IAAI,AAAJA,GAAQ,CAACb,GAAa,CAACD,CAAAA,EAAW,CAAAI,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAW,MAAA,CAAA,SAAA,MAAA,EAAA,GAAA,CAIhDhB,CAAAA,EAAYa,IAAI,GAAKX,GAAaD,IAAgBJ,EAAagB,IAAI,AAAJA,EAAI,CAAAR,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAW,MAAA,CAAA,SAAA,MAAA,EAIhB,GAAA,CAAjDb,CAAAA,EAAgBX,CAAsB,CAACU,EAAU,AAAD,EAErC,CAAAG,EAAAE,IAAA,CAAA,GAAA,KAAA,CAAA,OAAAF,EAAAE,IAAA,CAAA,GAAAvB,EAAAiC,KAAA,CACV3B,EAAkB4B,KAAK,CAACf,EAAgBD,GAAU,MAAA,GAGzDJ,EAAOqB,QAAQ,CAAC,CACfC,QAASpB,EAAYe,IAAI,CACzBM,OAAMpC,EAAAA,EAAA,CAAA,EAAOa,EAAOc,kBAAkB,IAAE,CAAA,EAAA,CAAEC,KAAMhB,EAAagB,IAAAA,AAAI,GACjES,OAAQxB,EAAOyB,mBAAmB,IAChC,MAAA,GAAA,IAAA,MAAA,OAAAlB,EAAAmB,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAGL,EAAG,CAAC5B,MAAAA,EAAY,KAAA,EAAZA,EAAcY,CAAC,CAAEZ,MAAAA,EAAY,KAAA,EAAZA,EAAcgB,IAAI,CAAEf,EAAQC,EAAU,CAC5D\"}"}