{"code":"function module(e,n,t){var i,o,r,s,a,u,c,l,f,m,d,k,b,U,h,E,p,v,x,g;t.link(\"@babel/runtime/helpers/extends\",{default:function(e){i=e}},0),t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){o=e}},1),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){r=e}},2),t.link(\"@rocket.chat/fuselage-hooks\",{useEffectEvent:function(e){s=e}},0),t.link(\"@rocket.chat/ui-client\",{GenericMenu:function(e){a=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useSetting:function(e){u=e},useRolesDescription:function(e){c=e}},2),t.link(\"react\",{default:function(e){l=e},useMemo:function(e){f=e}},3),t.link(\"react-i18next\",{useTranslation:function(e){m=e}},4),t.link(\"../../../../lib/getUserDisplayName\",{getUserDisplayName:function(e){d=e}},5),t.link(\"../../../components/LocalTime\",{default:function(e){k=e}},6),t.link(\"../../../components/UserCard\",{UserCard:function(e){b=e},UserCardAction:function(e){U=e},UserCardRole:function(e){h=e},UserCardSkeleton:function(e){E=e}},7),t.link(\"../../../components/UserStatus\",{ReactiveUserStatus:function(e){p=e}},8),t.link(\"../../../hooks/useUserInfoQuery\",{useUserInfoQuery:function(e){v=e}},9),t.link(\"../../hooks/useMemberExists\",{useMemberExists:function(e){x=e}},10),t.link(\"../hooks/useUserInfoActions\",{useUserInfoActions:function(e){g=e}},11),t.exportDefault(function(e){var n,t=e.username,C=e.rid,S=e.onOpenUserInfo,y=e.onClose,I=m().t,A=c(),M=!!u(\"UI_Use_Real_Name\"),_=v({username:t}),T=_.data,w=_.isLoading,D=x({roomId:C,username:t}),N=D.data,O=D.refetch,R=D.isSuccess,L=D.isLoading,Q=w||L,q=R&&(null==N?void 0:N.isMember),z=f(function(){var e=Q?void 0:null,n=(null==T?void 0:T.user)||{},i=n._id,o=n.name,r=n.roles,s=void 0===r?e:r,a=n.statusText,u=void 0===a?e:a,c=n.bio,f=void 0===c?e:c,m=n.utcOffset,b=void 0===m?e:m,U=n.nickname,E=n.avatarETag,v=n.freeSwitchExtension;return{_id:i,name:d(o,t,M),username:t,roles:s&&A(s).map(function(e,n){return l.createElement(h,{key:n},e)}),bio:f,etag:E,localTime:b&&Number.isInteger(b)&&l.createElement(k,{utcOffset:b}),status:i&&l.createElement(p,{uid:i}),customStatus:u,nickname:U,freeSwitchExtension:v}},[T,t,M,Q,A]),B=s(function(){S(),y()}),G=g({rid:C,user:{_id:null!==(n=z._id)&&void 0!==n?n:\"\",username:z.username,name:z.name,freeSwitchExtension:z.freeSwitchExtension},size:3,isMember:q,reload:O}),j=G.actions,F=G.menuActions,H=f(function(){return null!=F&&F.length?l.createElement(a,{title:I(\"More\"),key:\"menu\",\"data-qa-id\":\"menu\",sections:F,placement:\"bottom-start\",callbackAction:y}):null},[F,y,I]),J=f(function(){return[].concat(o(j.map(function(e){var n=r(e,2),t=n[0],i=n[1],o=i.content,s=i.title,a=i.icon,u=i.onClick;return l.createElement(U,{key:t,label:o||s,\"aria-label\":o||s,onClick:u,icon:a})})),[H]).filter(Boolean)},[j,H]);return Q?l.createElement(E,null):l.createElement(b,i({},z,{onClose:y,onOpenUserInfo:B,actions:J}))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/UserCard/UserCardWithData.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\\nimport { GenericMenu } from '@rocket.chat/ui-client';\\nimport { useSetting, useRolesDescription } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { getUserDisplayName } from '../../../../lib/getUserDisplayName';\\nimport LocalTime from '../../../components/LocalTime';\\nimport { UserCard, UserCardAction, UserCardRole, UserCardSkeleton } from '../../../components/UserCard';\\nimport { ReactiveUserStatus } from '../../../components/UserStatus';\\nimport { useUserInfoQuery } from '../../../hooks/useUserInfoQuery';\\nimport { useMemberExists } from '../../hooks/useMemberExists';\\nimport { useUserInfoActions } from '../hooks/useUserInfoActions';\\nimport type { UserInfoAction } from '../hooks/useUserInfoActions/useUserInfoActions';\\n\\ntype UserCardWithDataProps = {\\n\\tusername: string;\\n\\trid: IRoom['_id'];\\n\\tonOpenUserInfo: () => void;\\n\\tonClose: () => void;\\n};\\n\\nconst UserCardWithData = ({ username, rid, onOpenUserInfo, onClose }: UserCardWithDataProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst getRoles = useRolesDescription();\\n\\tconst showRealNames = Boolean(useSetting('UI_Use_Real_Name'));\\n\\n\\tconst { data, isLoading: isUserInfoLoading } = useUserInfoQuery({ username });\\n\\tconst {\\n\\t\\tdata: isMemberData,\\n\\t\\trefetch,\\n\\t\\tisSuccess: membershipCheckSuccess,\\n\\t\\tisLoading: isMembershipStatusLoading,\\n\\t} = useMemberExists({ roomId: rid, username });\\n\\n\\tconst isLoading = isUserInfoLoading || isMembershipStatusLoading;\\n\\tconst isMember = membershipCheckSuccess && isMemberData?.isMember;\\n\\n\\tconst user = useMemo(() => {\\n\\t\\tconst defaultValue = isLoading ? undefined : null;\\n\\n\\t\\tconst {\\n\\t\\t\\t_id,\\n\\t\\t\\tname,\\n\\t\\t\\troles = defaultValue,\\n\\t\\t\\tstatusText = defaultValue,\\n\\t\\t\\tbio = defaultValue,\\n\\t\\t\\tutcOffset = defaultValue,\\n\\t\\t\\tnickname,\\n\\t\\t\\tavatarETag,\\n\\t\\t\\tfreeSwitchExtension,\\n\\t\\t} = data?.user || {};\\n\\n\\t\\treturn {\\n\\t\\t\\t_id,\\n\\t\\t\\tname: getUserDisplayName(name, username, showRealNames),\\n\\t\\t\\tusername,\\n\\t\\t\\troles: roles && getRoles(roles).map((role, index) => <UserCardRole key={index}>{role}</UserCardRole>),\\n\\t\\t\\tbio,\\n\\t\\t\\tetag: avatarETag,\\n\\t\\t\\tlocalTime: utcOffset && Number.isInteger(utcOffset) && <LocalTime utcOffset={utcOffset} />,\\n\\t\\t\\tstatus: _id && <ReactiveUserStatus uid={_id} />,\\n\\t\\t\\tcustomStatus: statusText,\\n\\t\\t\\tnickname,\\n\\t\\t\\tfreeSwitchExtension,\\n\\t\\t};\\n\\t}, [data, username, showRealNames, isLoading, getRoles]);\\n\\n\\tconst handleOpenUserInfo = useEffectEvent(() => {\\n\\t\\tonOpenUserInfo();\\n\\t\\tonClose();\\n\\t});\\n\\n\\tconst { actions: actionsDefinition, menuActions: menuOptions } = useUserInfoActions({\\n\\t\\trid,\\n\\t\\tuser: { _id: user._id ?? '', username: user.username, name: user.name, freeSwitchExtension: user.freeSwitchExtension },\\n\\t\\tsize: 3,\\n\\t\\tisMember,\\n\\t\\treload: refetch,\\n\\t});\\n\\n\\tconst menu = useMemo(() => {\\n\\t\\tif (!menuOptions?.length) {\\n\\t\\t\\treturn null;\\n\\t\\t}\\n\\n\\t\\treturn (\\n\\t\\t\\t<GenericMenu\\n\\t\\t\\t\\ttitle={t('More')}\\n\\t\\t\\t\\tkey='menu'\\n\\t\\t\\t\\tdata-qa-id='menu'\\n\\t\\t\\t\\tsections={menuOptions}\\n\\t\\t\\t\\tplacement='bottom-start'\\n\\t\\t\\t\\tcallbackAction={onClose}\\n\\t\\t\\t/>\\n\\t\\t);\\n\\t}, [menuOptions, onClose, t]);\\n\\n\\tconst actions = useMemo(() => {\\n\\t\\tconst mapAction = ([key, { content, title, icon, onClick }]: [string, UserInfoAction]): ReactElement => (\\n\\t\\t\\t<UserCardAction key={key} label={content || title} aria-label={content || title} onClick={onClick} icon={icon!} />\\n\\t\\t);\\n\\n\\t\\treturn [...actionsDefinition.map(mapAction), menu].filter(Boolean);\\n\\t}, [actionsDefinition, menu]);\\n\\n\\tif (isLoading) {\\n\\t\\treturn <UserCardSkeleton />;\\n\\t}\\n\\n\\treturn <UserCard {...user} onClose={onClose} onOpenUserInfo={handleOpenUserInfo} actions={actions} />;\\n};\\n\\nexport default UserCardWithData;\\n\",null],\"names\":[\"_extends\",\"_toConsumableArray\",\"_slicedToArray\",\"useEffectEvent\",\"GenericMenu\",\"useSetting\",\"useRolesDescription\",\"React\",\"useMemo\",\"useTranslation\",\"getUserDisplayName\",\"LocalTime\",\"UserCard\",\"UserCardAction\",\"UserCardRole\",\"UserCardSkeleton\",\"ReactiveUserStatus\",\"useUserInfoQuery\",\"useMemberExists\",\"useUserInfoActions\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_user$_id\",\"username\",\"rid\",\"onOpenUserInfo\",\"onClose\",\"t\",\"_useTranslation\",\"getRoles\",\"showRealNames\",\"Boolean\",\"_useUserInfoQuery\",\"data\",\"isUserInfoLoading\",\"isLoading\",\"_useMemberExists\",\"roomId\",\"isMemberData\",\"refetch\",\"membershipCheckSuccess\",\"isSuccess\",\"isMembershipStatusLoading\",\"isMember\",\"user\",\"defaultValue\",\"undefined\",\"_ref2\",\"_id\",\"name\",\"_ref2$roles\",\"roles\",\"_ref2$statusText\",\"statusText\",\"_ref2$bio\",\"bio\",\"_ref2$utcOffset\",\"utcOffset\",\"nickname\",\"avatarETag\",\"freeSwitchExtension\",\"map\",\"role\",\"index\",\"createElement\",\"key\",\"etag\",\"localTime\",\"Number\",\"isInteger\",\"status\",\"uid\",\"customStatus\",\"handleOpenUserInfo\",\"_useUserInfoActions\",\"size\",\"reload\",\"actionsDefinition\",\"actions\",\"menuOptions\",\"menuActions\",\"menu\",\"length\",\"title\",\"sections\",\"placement\",\"callbackAction\",\"concat\",\"_ref3\",\"_ref4\",\"_ref4$\",\"content\",\"icon\",\"onClick\",\"label\",\"filter\"],\"mappings\":\"uBAwBA,IAvBAA,EAA6DC,EAAAC,EAA7DC,EAA6DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAApDC,EAAAC,IAAc,CAAE,iCAAM,CAAAC,QAA8B,SAAAC,CAAA,EAAAvB,EAAAuB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAtB,EAAAsB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAArB,EAAAqB,CAAA,CAAA,EAAA,GAApDH,EAAgBC,IAAA,CAAM,8BAA8B,CAAAlB,eAAA,SAAAoB,CAAA,EAAApB,EAAAoB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yBAAA,CAAAjB,YAAA,SAAAmB,CAAA,EAAAnB,EAAAmB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAhB,WAAA,SAAAkB,CAAA,EAAAlB,EAAAkB,CAAA,EAAAjB,oBAAA,SAAAiB,CAAA,EAAAjB,EAAAiB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAhB,EAAAgB,CAAA,EAAAf,QAAA,SAAAe,CAAA,EAAAf,EAAAe,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAZ,eAAA,SAAAc,CAAA,EAAAd,EAAAc,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qCAAA,CAAAX,mBAAA,SAAAa,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gCAAA,CAAA,QAAA,SAAAE,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,+BAAA,CAAAT,SAAA,SAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,eAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,aAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,iBAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iCAAA,CAAAL,mBAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kCAAA,CAAAJ,iBAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAH,gBAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,IAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAF,mBAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,IAA7DH,EAAOI,aAAE,CAuBgB,SAAAC,CAAA,EAAsE,IAAAC,EAAnEC,EAAQF,EAARE,QAAQ,CAAEC,EAAGH,EAAHG,GAAG,CAAEC,EAAcJ,EAAdI,cAAc,CAAEC,EAAOL,EAAPK,OAAO,CACzDC,EAACC,AAAKvB,IAANsB,CAAC,CACHE,EAAW3B,IACX4B,EAAgBC,CAAAA,CAAQ9B,EAAW,oBAEzC+B,EAA+CnB,EAAiB,CAAEU,SAAAA,CAAQ,GAAlEU,EAAID,EAAJC,IAAI,CAAaC,EAAiBF,EAA5BG,SAAS,CACvBC,EAKItB,EAAgB,CAAEuB,OAAQb,EAAKD,SAAAA,CAAQ,GAJpCe,EAAYF,EAAlBH,IAAI,CACJM,EAAOH,EAAPG,OAAO,CACIC,EAAsBJ,EAAjCK,SAAS,CACEC,EAAyBN,EAApCD,SAAS,CAGJA,EAAYD,GAAqBQ,EACjCC,EAAWH,GAA0BF,CAAAA,MAAAA,EAAY,KAAA,EAAZA,EAAcK,QAAQ,AAARA,EAEnDC,EAAOxC,EAAQ,WACpB,IAAMyC,EAAeV,EAAYW,KAAAA,EAAY,KAE7CC,EAUI,AAAAd,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMW,IAAI,AAAJA,GAAQ,CAAA,EATjBI,EAAGD,EAAHC,GAAG,CACHC,EAAIF,EAAJE,IAAI,CAAAC,EAAAH,EACJI,KAAK,CAALA,EAAKD,AAAA,KAAA,IAAAA,EAAGL,EAAYK,EAAAE,EAAAL,EACpBM,UAAU,CAAVA,EAAUD,AAAA,KAAA,IAAAA,EAAGP,EAAYO,EAAAE,EAAAP,EACzBQ,GAAG,CAAHA,EAAGD,AAAA,KAAA,IAAAA,EAAGT,EAAYS,EAAAE,EAAAT,EAClBU,SAAS,CAATA,EAASD,AAAA,KAAA,IAAAA,EAAGX,EAAYW,EACxBE,EAAQX,EAARW,QAAQ,CACRC,EAAUZ,EAAVY,UAAU,CACVC,EAAmBb,EAAnBa,mBAAmB,CAGpB,MAAO,CACNZ,IAAAA,EACAC,KAAM3C,EAAmB2C,EAAM1B,EAAUO,GACzCP,SAAAA,EACA4B,MAAOA,GAAStB,EAASsB,GAAOU,GAAG,CAAC,SAACC,CAAI,CAAEC,CAAK,EAAA,OAAK5D,EAAA6D,aAAA,CAACtD,EAAY,CAACuD,IAAKF,CAAM,EAAED,EAAoB,GACpGP,IAAAA,EACAW,KAAMP,EACNQ,UAAWV,GAAaW,OAAOC,SAAS,CAACZ,IAActD,EAAA6D,aAAA,CAACzD,EAAS,CAACkD,UAAWA,CAAU,GACvFa,OAAQtB,GAAO7C,EAAA6D,aAAA,CAACpD,EAAkB,CAAC2D,IAAKvB,CAAI,GAC5CwB,aAAcnB,EACdK,SAAAA,EACAE,oBAAAA,EAEF,EAAG,CAAC3B,EAAMV,EAAUO,EAAeK,EAAWN,EAAS,EAEjD4C,EAAqB1E,EAAe,WACzC0B,IACAC,GACD,GAEAgD,EAAiE3D,EAAmB,CACnFS,IAAAA,EACAoB,KAAM,CAAEI,IAAG,AAAU,OAAV1B,CAAAA,EAAEsB,EAAKI,GAAG,AAAHA,GAAG1B,AAAA,KAAA,IAAAA,EAAAA,EAAI,GAAIC,SAAUqB,EAAKrB,QAAQ,CAAE0B,KAAML,EAAKK,IAAI,CAAEW,oBAAqBhB,EAAKgB,mBAAAA,AAAmB,EACpHe,KAAM,EACNhC,SAAAA,EACAiC,OAAQrC,IALQsC,EAAiBH,EAA1BI,OAAO,CAAkCC,EAAWL,EAAxBM,WAAW,CAQzCC,EAAO7E,EAAQ,kBACpB,AAAK2E,MAAAA,GAAAA,EAAaG,MAAM,CAKvB/E,EAAA6D,aAAA,CAAChE,EAAW,CACXmF,MAAOxD,EAAE,QACTsC,IAAI,OACJ,aAAW,OACXmB,SAAUL,EACVM,UAAU,eACVC,eAAgB5D,CAAQ,GAVlB,IAaT,EAAG,CAACqD,EAAarD,EAASC,EAAE,EAEtBmD,EAAU1E,EAAQ,WAKvB,MAAO,EAAA,CAAAmF,MAAA,CAAA1F,EAAIgF,EAAkBhB,GAAG,CAJd,SAAA2B,CAAA,EAAA,IAAAC,EAAA3F,EAAA0F,EAAA,GAAEvB,EAAGwB,CAAA,CAAA,EAAA,CAAAC,EAAAD,CAAA,CAAA,EAAA,CAAIE,EAAOD,EAAPC,OAAO,CAAER,EAAKO,EAALP,KAAK,CAAES,EAAIF,EAAJE,IAAI,CAAEC,EAAOH,EAAPG,OAAO,CAAA,OACvD1F,EAAA6D,aAAA,CAACvD,EAAc,CAACwD,IAAKA,EAAK6B,MAAOH,GAAWR,EAAO,aAAYQ,GAAWR,EAAOU,QAASA,EAASD,KAAMA,CAAM,EAAG,IAGxE,CAAEX,EAAI,EAAEc,MAAM,CAAChE,QAC3D,EAAG,CAAC8C,EAAmBI,EAAK,SAE5B,AAAI9C,EACIhC,EAAA6D,aAAA,CAACrD,EAAgB,MAGlBR,EAAA6D,aAAA,CAACxD,EAAQZ,EAAA,CAAA,EAAKgD,EAAI,CAAElB,QAASA,EAASD,eAAgBgD,EAAoBK,QAASA,CAAQ,GACnG\"}"}