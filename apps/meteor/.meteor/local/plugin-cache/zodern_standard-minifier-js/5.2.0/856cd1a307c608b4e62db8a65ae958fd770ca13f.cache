{"code":"function module(e,o,a){let n,l,i,t,d,s,r,u,m,v,c,p,k,g,R,h,f,b,S,M,C,E,P,N,x,y,I;a.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),a.link(\"@rocket.chat/ui-contexts\",{useRouter(e){l=e}},0),a.link(\"react\",{default(e){i=e},useMemo(e){t=e},memo(e){d=e},useEffect(e){s=e},useCallback(e){r=e}},1),a.link(\"../../../../app/models/client\",{ChatSubscription(e){u=e}},2),a.link(\"../../../../app/ui-utils/client\",{RoomHistoryManager(e){m=e}},3),a.link(\"../../../../app/ui/client/lib/UserAction\",{UserAction(e){v=e}},4),a.link(\"../../../hooks/useReactiveQuery\",{useReactiveQuery(e){c=e}},5),a.link(\"../../../hooks/useReactiveValue\",{useReactiveValue(e){p=e}},6),a.link(\"../../../hooks/useRoomInfoEndpoint\",{useRoomInfoEndpoint(e){k=e}},7),a.link(\"../../../hooks/useSidePanelNavigation\",{useSidePanelNavigation(e){g=e}},8),a.link(\"../../../lib/RoomManager\",{RoomManager(e){R=e}},9),a.link(\"../../../lib/rooms/roomCoordinator\",{roomCoordinator(e){h=e}},10),a.link(\"../../../providers/ImageGalleryProvider\",{default(e){f=e}},11),a.link(\"../RoomNotFound\",{default(e){b=e}},12),a.link(\"../RoomSkeleton\",{default(e){S=e}},13),a.link(\"../body/hooks/useRoomRolesManagement\",{useRoomRolesManagement(e){M=e}},14),a.link(\"../contexts/RoomContext\",{RoomContext(e){C=e}},15),a.link(\"./ComposerPopupProvider\",{default(e){E=e}},16),a.link(\"./RoomToolboxProvider\",{default(e){P=e}},17),a.link(\"./UserCardProvider\",{default(e){N=e}},18),a.link(\"./hooks/useRedirectOnSettingsChanged\",{useRedirectOnSettingsChanged(e){x=e}},19),a.link(\"./hooks/useRoomQuery\",{useRoomQuery(e){y=e}},20),a.link(\"./hooks/useUsersNameChanged\",{useUsersNameChanged(e){I=e}},21),a.exportDefault(d(e=>{var o,a,d,L,U,O,Q,A,V;let{rid:j,children:w}=e;M(j);let D=k(j),F=y(j),G=l();s(()=>{F.isSuccess&&!F.data&&G.navigate(\"/home\")},[F.data,F.isSuccess,D,G]);let H=c([\"subscriptions\",{rid:j}],()=>{var e;return null!==(e=u.findOne({rid:j}))&&void 0!==e?e:null});x(H.data),I();let T=t(()=>{let e=F.data;return e?n(n(n({},H.data),e),{},{name:h.getRoomName(e.t,e),federationOriginalName:e.name}):null},[F.data,H.data]),{hasMorePreviousMessages:_,hasMoreNextMessages:q,isLoadingMoreMessages:z}=p(r(()=>{let{hasMore:e,hasMoreNext:o,isLoading:a}=m.getRoom(j);return{hasMorePreviousMessages:e.get(),hasMoreNextMessages:o.get(),isLoadingMoreMessages:a.get()}},[j])),B=t(()=>{var e;return T?{rid:j,room:T,subscription:null!==(e=H.data)&&void 0!==e?e:void 0,hasMorePreviousMessages:_,hasMoreNextMessages:q,isLoadingMoreMessages:z}:null},[q,_,z,T,j,H.data]),J=g();s(()=>{var e,o,a,n,l,i,t,d,s,r,u,m,v,c;if(J){if(D.isSuccess){if(null!==(u=D.data.room)&&void 0!==u&&u.teamMain)return null!==(m=D.data.room.sidepanel)&&void 0!==m&&m.items.includes(\"channels\")||null!==(v=D.data.room)&&void 0!==v&&null!==(c=v.sidepanel)&&void 0!==c&&c.items.includes(\"discussions\")?R.openSecondLevel(j,j):R.open(j),()=>{R.back(j)};switch(!0){case(null===(e=D.data.room)||void 0===e?void 0:e.prid)&&D.data.parent&&(null===(o=D.data.parent.sidepanel)||void 0===o?void 0:o.items.includes(\"discussions\")):R.openSecondLevel(D.data.parent._id,j);break;case(null===(a=D.data.team)||void 0===a?void 0:a.roomId)&&!(null!==(n=D.data.room)&&void 0!==n&&n.teamMain)&&(null===(l=D.data.parent)||void 0===l?void 0:null===(i=l.sidepanel)||void 0===i?void 0:i.items.includes(\"channels\")):R.openSecondLevel(D.data.team.roomId,j);break;default:null!==(t=D.data.parent)&&void 0!==t&&null!==(d=t.sidepanel)&&void 0!==d&&d.items.includes(\"channels\")||null!==(s=D.data.parent)&&void 0!==s&&null!==(r=s.sidepanel)&&void 0!==r&&r.items.includes(\"discussions\")?R.openSecondLevel(j,j):R.open(j)}}return()=>{R.back(j)}}return R.open(j),()=>{R.back(j)}},[J,j,null===(o=D.data)||void 0===o?void 0:null===(a=o.room)||void 0===a?void 0:a.prid,null===(d=D.data)||void 0===d?void 0:null===(L=d.room)||void 0===L?void 0:L.teamId,null===(U=D.data)||void 0===U?void 0:null===(O=U.room)||void 0===O?void 0:O.teamMain,D.isSuccess,null===(Q=D.data)||void 0===Q?void 0:Q.parent,null===(A=D.data)||void 0===A?void 0:null===(V=A.team)||void 0===V?void 0:V.roomId,D.data]);let K=!!H.data;return(s(()=>{if(K)return v.addStream(j)},[j,K]),T)?i.createElement(C.Provider,{value:B},i.createElement(P,null,i.createElement(f,null,i.createElement(N,null,i.createElement(E,{room:T},w))))):F.isSuccess&&!F.data?i.createElement(b,null):i.createElement(S,null)}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/providers/RoomProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { useRouter } from '@rocket.chat/ui-contexts';\\nimport type { ReactNode, ContextType, ReactElement } from 'react';\\nimport React, { useMemo, memo, useEffect, useCallback } from 'react';\\n\\nimport { ChatSubscription } from '../../../../app/models/client';\\nimport { RoomHistoryManager } from '../../../../app/ui-utils/client';\\nimport { UserAction } from '../../../../app/ui/client/lib/UserAction';\\nimport { useReactiveQuery } from '../../../hooks/useReactiveQuery';\\nimport { useReactiveValue } from '../../../hooks/useReactiveValue';\\nimport { useRoomInfoEndpoint } from '../../../hooks/useRoomInfoEndpoint';\\nimport { useSidePanelNavigation } from '../../../hooks/useSidePanelNavigation';\\nimport { RoomManager } from '../../../lib/RoomManager';\\nimport { roomCoordinator } from '../../../lib/rooms/roomCoordinator';\\nimport ImageGalleryProvider from '../../../providers/ImageGalleryProvider';\\nimport RoomNotFound from '../RoomNotFound';\\nimport RoomSkeleton from '../RoomSkeleton';\\nimport { useRoomRolesManagement } from '../body/hooks/useRoomRolesManagement';\\nimport type { IRoomWithFederationOriginalName } from '../contexts/RoomContext';\\nimport { RoomContext } from '../contexts/RoomContext';\\nimport ComposerPopupProvider from './ComposerPopupProvider';\\nimport RoomToolboxProvider from './RoomToolboxProvider';\\nimport UserCardProvider from './UserCardProvider';\\nimport { useRedirectOnSettingsChanged } from './hooks/useRedirectOnSettingsChanged';\\nimport { useRoomQuery } from './hooks/useRoomQuery';\\nimport { useUsersNameChanged } from './hooks/useUsersNameChanged';\\n\\ntype RoomProviderProps = {\\n\\tchildren: ReactNode;\\n\\trid: IRoom['_id'];\\n};\\n\\nconst RoomProvider = ({ rid, children }: RoomProviderProps): ReactElement => {\\n\\tuseRoomRolesManagement(rid);\\n\\n\\tconst resultFromServer = useRoomInfoEndpoint(rid);\\n\\n\\tconst resultFromLocal = useRoomQuery(rid);\\n\\n\\t// TODO: the following effect is a workaround while we don't have a general and definitive solution for it\\n\\tconst router = useRouter();\\n\\tuseEffect(() => {\\n\\t\\tif (resultFromLocal.isSuccess && !resultFromLocal.data) {\\n\\t\\t\\trouter.navigate('/home');\\n\\t\\t}\\n\\t}, [resultFromLocal.data, resultFromLocal.isSuccess, resultFromServer, router]);\\n\\n\\tconst subscriptionQuery = useReactiveQuery(['subscriptions', { rid }], () => ChatSubscription.findOne({ rid }) ?? null);\\n\\n\\tuseRedirectOnSettingsChanged(subscriptionQuery.data);\\n\\n\\tuseUsersNameChanged();\\n\\n\\tconst pseudoRoom: IRoomWithFederationOriginalName | null = useMemo(() => {\\n\\t\\tconst room = resultFromLocal.data;\\n\\t\\tif (!room) {\\n\\t\\t\\treturn null;\\n\\t\\t}\\n\\n\\t\\treturn {\\n\\t\\t\\t...subscriptionQuery.data,\\n\\t\\t\\t...room,\\n\\t\\t\\tname: roomCoordinator.getRoomName(room.t, room),\\n\\t\\t\\tfederationOriginalName: room.name,\\n\\t\\t};\\n\\t}, [resultFromLocal.data, subscriptionQuery.data]);\\n\\n\\tconst { hasMorePreviousMessages, hasMoreNextMessages, isLoadingMoreMessages } = useReactiveValue(\\n\\t\\tuseCallback(() => {\\n\\t\\t\\tconst { hasMore, hasMoreNext, isLoading } = RoomHistoryManager.getRoom(rid);\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\thasMorePreviousMessages: hasMore.get(),\\n\\t\\t\\t\\thasMoreNextMessages: hasMoreNext.get(),\\n\\t\\t\\t\\tisLoadingMoreMessages: isLoading.get(),\\n\\t\\t\\t};\\n\\t\\t}, [rid]),\\n\\t);\\n\\n\\tconst context = useMemo((): ContextType<typeof RoomContext> => {\\n\\t\\tif (!pseudoRoom) {\\n\\t\\t\\treturn null;\\n\\t\\t}\\n\\n\\t\\treturn {\\n\\t\\t\\trid,\\n\\t\\t\\troom: pseudoRoom,\\n\\t\\t\\tsubscription: subscriptionQuery.data ?? undefined,\\n\\t\\t\\thasMorePreviousMessages,\\n\\t\\t\\thasMoreNextMessages,\\n\\t\\t\\tisLoadingMoreMessages,\\n\\t\\t};\\n\\t}, [hasMoreNextMessages, hasMorePreviousMessages, isLoadingMoreMessages, pseudoRoom, rid, subscriptionQuery.data]);\\n\\n\\tconst isSidepanelFeatureEnabled = useSidePanelNavigation();\\n\\n\\tuseEffect(() => {\\n\\t\\tif (isSidepanelFeatureEnabled) {\\n\\t\\t\\tif (resultFromServer.isSuccess) {\\n\\t\\t\\t\\tif (resultFromServer.data.room?.teamMain) {\\n\\t\\t\\t\\t\\tif (\\n\\t\\t\\t\\t\\t\\tresultFromServer.data.room.sidepanel?.items.includes('channels') ||\\n\\t\\t\\t\\t\\t\\tresultFromServer.data.room?.sidepanel?.items.includes('discussions')\\n\\t\\t\\t\\t\\t) {\\n\\t\\t\\t\\t\\t\\tRoomManager.openSecondLevel(rid, rid);\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tRoomManager.open(rid);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\treturn (): void => {\\n\\t\\t\\t\\t\\t\\tRoomManager.back(rid);\\n\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tswitch (true) {\\n\\t\\t\\t\\t\\tcase resultFromServer.data.room?.prid &&\\n\\t\\t\\t\\t\\t\\tresultFromServer.data.parent &&\\n\\t\\t\\t\\t\\t\\tresultFromServer.data.parent.sidepanel?.items.includes('discussions'):\\n\\t\\t\\t\\t\\t\\tRoomManager.openSecondLevel(resultFromServer.data.parent._id, rid);\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t\\tcase resultFromServer.data.team?.roomId &&\\n\\t\\t\\t\\t\\t\\t!resultFromServer.data.room?.teamMain &&\\n\\t\\t\\t\\t\\t\\tresultFromServer.data.parent?.sidepanel?.items.includes('channels'):\\n\\t\\t\\t\\t\\t\\tRoomManager.openSecondLevel(resultFromServer.data.team.roomId, rid);\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\n\\t\\t\\t\\t\\tdefault:\\n\\t\\t\\t\\t\\t\\tif (\\n\\t\\t\\t\\t\\t\\t\\tresultFromServer.data.parent?.sidepanel?.items.includes('channels') ||\\n\\t\\t\\t\\t\\t\\t\\tresultFromServer.data.parent?.sidepanel?.items.includes('discussions')\\n\\t\\t\\t\\t\\t\\t) {\\n\\t\\t\\t\\t\\t\\t\\tRoomManager.openSecondLevel(rid, rid);\\n\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\tRoomManager.open(rid);\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\treturn (): void => {\\n\\t\\t\\t\\tRoomManager.back(rid);\\n\\t\\t\\t};\\n\\t\\t}\\n\\n\\t\\tRoomManager.open(rid);\\n\\t\\treturn (): void => {\\n\\t\\t\\tRoomManager.back(rid);\\n\\t\\t};\\n\\t}, [\\n\\t\\tisSidepanelFeatureEnabled,\\n\\t\\trid,\\n\\t\\tresultFromServer.data?.room?.prid,\\n\\t\\tresultFromServer.data?.room?.teamId,\\n\\t\\tresultFromServer.data?.room?.teamMain,\\n\\t\\tresultFromServer.isSuccess,\\n\\t\\tresultFromServer.data?.parent,\\n\\t\\tresultFromServer.data?.team?.roomId,\\n\\t\\tresultFromServer.data,\\n\\t]);\\n\\n\\tconst subscribed = !!subscriptionQuery.data;\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!subscribed) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\treturn UserAction.addStream(rid);\\n\\t}, [rid, subscribed]);\\n\\n\\tif (!pseudoRoom) {\\n\\t\\treturn resultFromLocal.isSuccess && !resultFromLocal.data ? <RoomNotFound /> : <RoomSkeleton />;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<RoomContext.Provider value={context}>\\n\\t\\t\\t<RoomToolboxProvider>\\n\\t\\t\\t\\t<ImageGalleryProvider>\\n\\t\\t\\t\\t\\t<UserCardProvider>\\n\\t\\t\\t\\t\\t\\t<ComposerPopupProvider room={pseudoRoom}>{children}</ComposerPopupProvider>\\n\\t\\t\\t\\t\\t</UserCardProvider>\\n\\t\\t\\t\\t</ImageGalleryProvider>\\n\\t\\t\\t</RoomToolboxProvider>\\n\\t\\t</RoomContext.Provider>\\n\\t);\\n};\\n\\nexport default memo(RoomProvider);\\n\",null],\"names\":[\"_objectSpread\",\"useRouter\",\"React\",\"useMemo\",\"memo\",\"useEffect\",\"useCallback\",\"ChatSubscription\",\"RoomHistoryManager\",\"UserAction\",\"useReactiveQuery\",\"useReactiveValue\",\"useRoomInfoEndpoint\",\"useSidePanelNavigation\",\"RoomManager\",\"roomCoordinator\",\"ImageGalleryProvider\",\"RoomNotFound\",\"RoomSkeleton\",\"useRoomRolesManagement\",\"RoomContext\",\"ComposerPopupProvider\",\"RoomToolboxProvider\",\"UserCardProvider\",\"useRedirectOnSettingsChanged\",\"useRoomQuery\",\"useUsersNameChanged\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_resultFromServer$dat15\",\"_resultFromServer$dat16\",\"_resultFromServer$dat17\",\"_resultFromServer$dat18\",\"_resultFromServer$dat19\",\"_resultFromServer$dat20\",\"_resultFromServer$dat21\",\"_resultFromServer$dat22\",\"_resultFromServer$dat23\",\"rid\",\"children\",\"resultFromServer\",\"resultFromLocal\",\"router\",\"isSuccess\",\"data\",\"navigate\",\"subscriptionQuery\",\"_ChatSubscription$fin\",\"findOne\",\"pseudoRoom\",\"room\",\"name\",\"getRoomName\",\"t\",\"federationOriginalName\",\"hasMorePreviousMessages\",\"hasMoreNextMessages\",\"isLoadingMoreMessages\",\"hasMore\",\"hasMoreNext\",\"isLoading\",\"getRoom\",\"get\",\"context\",\"_subscriptionQuery$da\",\"subscription\",\"undefined\",\"isSidepanelFeatureEnabled\",\"_resultFromServer$dat5\",\"_resultFromServer$dat6\",\"_resultFromServer$dat7\",\"_resultFromServer$dat8\",\"_resultFromServer$dat9\",\"_resultFromServer$dat10\",\"_resultFromServer$dat11\",\"_resultFromServer$dat12\",\"_resultFromServer$dat13\",\"_resultFromServer$dat14\",\"_resultFromServer$dat\",\"_resultFromServer$dat2\",\"_resultFromServer$dat3\",\"_resultFromServer$dat4\",\"teamMain\",\"sidepanel\",\"items\",\"includes\",\"openSecondLevel\",\"open\",\"back\",\"prid\",\"parent\",\"_id\",\"team\",\"roomId\",\"teamId\",\"subscribed\",\"addStream\",\"createElement\",\"Provider\",\"value\"],\"mappings\":\"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\"}"}