{"code":"function module(e,t,n){let l,a,i,o,s,d,u,r,c,m,k,h,g,v,b,E,f,p,_,M,y,L,R;let U=[\"method_id\",\"i18nLabel\"];n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){l=e}},0),n.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){a=e}},1),n.link(\"@rocket.chat/core-typings\",{isE2EEMessage(e){i=e},isQuoteAttachment(e){o=e}},0),n.link(\"@rocket.chat/fuselage\",{MessageBody(e){s=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useSetting(e){d=e},useUserId(e){u=e},useTranslation(e){r=e}},2),n.link(\"react\",{default(e){c=e},memo(e){m=e}},3),n.link(\"../../../../hooks/useUserData\",{useUserData(e){k=e}},4),n.link(\"../../MessageContentBody\",{default(e){h=e}},5),n.link(\"../../ReadReceiptIndicator\",{default(e){g=e}},6),n.link(\"../../content/Attachments\",{default(e){v=e}},7),n.link(\"../../content/BroadcastMetrics\",{default(e){b=e}},8),n.link(\"../../content/Location\",{default(e){E=e}},9),n.link(\"../../content/MessageActions\",{default(e){f=e}},10),n.link(\"../../content/Reactions\",{default(e){p=e}},11),n.link(\"../../content/UrlPreviews\",{default(e){_=e}},12),n.link(\"../../hooks/useNormalizedMessage\",{useNormalizedMessage(e){M=e}},13),n.link(\"../../hooks/useOembedLayout\",{useOembedLayout(e){y=e}},14),n.link(\"../../hooks/useSubscriptionFromMessageQuery\",{useSubscriptionFromMessageQuery(e){L=e}},15),n.link(\"../../uikit/UiKitMessageBlock\",{default(e){R=e}},16),n.exportDefault(m(e=>{var t,n,m,B,F,S,j,A,D,O;let{message:Q}=e,x=i(Q),{enabled:z}=y(),I=null!==(t=L(Q).data)&&void 0!==t?t:void 0,N=null!==(n=null==I?void 0:I.broadcast)&&void 0!==n&&n,P=u(),w=a(a({},Q.u),{},{roles:[]},k(Q.u._id)),C=d(\"Message_Read_Receipt_Enabled\",!1),K=r(),T=M(Q),W=x&&(null==T?void 0:T.e2e)===\"pending\",q=(null==T?void 0:null===(m=T.attachments)||void 0===m?void 0:m.filter(o))||[],G=(null==T?void 0:null===(B=T.attachments)||void 0===B?void 0:B.filter(e=>!o(e)))||[];return c.createElement(c.Fragment,null,W&&c.createElement(s,null,K(\"E2E_message_encrypted_placeholder\")),!!(null!=q&&q.length)&&c.createElement(v,{attachments:q}),!(null!==(F=T.blocks)&&void 0!==F&&F.length)&&!!(null!==(S=T.md)&&void 0!==S&&S.length)&&c.createElement(c.Fragment,null,(!x||\"done\"===T.e2e)&&c.createElement(h,{md:T.md,mentions:T.mentions,channels:T.channels})),T.blocks&&c.createElement(R,{rid:T.rid,mid:T._id,blocks:T.blocks}),!!G&&c.createElement(v,{id:null===(j=Q.files)||void 0===j?void 0:null===(A=j[0])||void 0===A?void 0:A._id,attachments:G}),z&&!!(null!==(D=T.urls)&&void 0!==D&&D.length)&&c.createElement(_,{urls:T.urls}),(null===(O=T.actionLinks)||void 0===O?void 0:O.length)&&c.createElement(f,{message:T,actions:T.actionLinks.map(e=>{let{method_id:t,i18nLabel:n}=e,i=l(e,U);return a({methodId:t,i18nLabel:n},i)})}),T.reactions&&Object.keys(T.reactions).length&&c.createElement(p,{message:T}),T.location&&c.createElement(E,{location:T.location}),N&&!!w.username&&T.u._id!==P&&c.createElement(b,{username:w.username,message:T}),C&&c.createElement(g,{mid:T._id,unread:T.unread}))}))}","map":"{\"version\":3,\"sources\":[\"client/components/message/variants/thread/ThreadMessageContent.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IThreadMainMessage, IThreadMessage } from '@rocket.chat/core-typings';\\nimport { isE2EEMessage, isQuoteAttachment } from '@rocket.chat/core-typings';\\nimport { MessageBody } from '@rocket.chat/fuselage';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useSetting, useUserId, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { memo } from 'react';\\n\\nimport { useUserData } from '../../../../hooks/useUserData';\\nimport type { UserPresence } from '../../../../lib/presence';\\nimport MessageContentBody from '../../MessageContentBody';\\nimport ReadReceiptIndicator from '../../ReadReceiptIndicator';\\nimport Attachments from '../../content/Attachments';\\nimport BroadcastMetrics from '../../content/BroadcastMetrics';\\nimport Location from '../../content/Location';\\nimport MessageActions from '../../content/MessageActions';\\nimport Reactions from '../../content/Reactions';\\nimport UrlPreviews from '../../content/UrlPreviews';\\nimport { useNormalizedMessage } from '../../hooks/useNormalizedMessage';\\nimport { useOembedLayout } from '../../hooks/useOembedLayout';\\nimport { useSubscriptionFromMessageQuery } from '../../hooks/useSubscriptionFromMessageQuery';\\nimport UiKitMessageBlock from '../../uikit/UiKitMessageBlock';\\n\\ntype ThreadMessageContentProps = {\\n\\tmessage: IThreadMessage | IThreadMainMessage;\\n};\\n\\nconst ThreadMessageContent = ({ message }: ThreadMessageContentProps): ReactElement => {\\n\\tconst encrypted = isE2EEMessage(message);\\n\\tconst { enabled: oembedEnabled } = useOembedLayout();\\n\\tconst subscription = useSubscriptionFromMessageQuery(message).data ?? undefined;\\n\\tconst broadcast = subscription?.broadcast ?? false;\\n\\tconst uid = useUserId();\\n\\tconst messageUser: UserPresence = { ...message.u, roles: [], ...useUserData(message.u._id) };\\n\\tconst readReceiptEnabled = useSetting('Message_Read_Receipt_Enabled', false);\\n\\n\\tconst t = useTranslation();\\n\\n\\tconst normalizedMessage = useNormalizedMessage(message);\\n\\n\\tconst isMessageEncrypted = encrypted && normalizedMessage?.e2e === 'pending';\\n\\n\\tconst quotes = normalizedMessage?.attachments?.filter(isQuoteAttachment) || [];\\n\\n\\tconst attachments = normalizedMessage?.attachments?.filter((attachment) => !isQuoteAttachment(attachment)) || [];\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t{isMessageEncrypted && <MessageBody>{t('E2E_message_encrypted_placeholder')}</MessageBody>}\\n\\n\\t\\t\\t{!!quotes?.length && <Attachments attachments={quotes} />}\\n\\n\\t\\t\\t{!normalizedMessage.blocks?.length && !!normalizedMessage.md?.length && (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t{(!encrypted || normalizedMessage.e2e === 'done') && (\\n\\t\\t\\t\\t\\t\\t<MessageContentBody md={normalizedMessage.md} mentions={normalizedMessage.mentions} channels={normalizedMessage.channels} />\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</>\\n\\t\\t\\t)}\\n\\n\\t\\t\\t{normalizedMessage.blocks && (\\n\\t\\t\\t\\t<UiKitMessageBlock rid={normalizedMessage.rid} mid={normalizedMessage._id} blocks={normalizedMessage.blocks} />\\n\\t\\t\\t)}\\n\\n\\t\\t\\t{!!attachments && <Attachments id={message.files?.[0]?._id} attachments={attachments} />}\\n\\n\\t\\t\\t{oembedEnabled && !!normalizedMessage.urls?.length && <UrlPreviews urls={normalizedMessage.urls} />}\\n\\n\\t\\t\\t{normalizedMessage.actionLinks?.length && (\\n\\t\\t\\t\\t<MessageActions\\n\\t\\t\\t\\t\\tmessage={normalizedMessage}\\n\\t\\t\\t\\t\\tactions={normalizedMessage.actionLinks.map(({ method_id: methodId, i18nLabel, ...action }) => ({\\n\\t\\t\\t\\t\\t\\tmethodId,\\n\\t\\t\\t\\t\\t\\ti18nLabel: i18nLabel as TranslationKey,\\n\\t\\t\\t\\t\\t\\t...action,\\n\\t\\t\\t\\t\\t}))}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\n\\t\\t\\t{normalizedMessage.reactions && Object.keys(normalizedMessage.reactions).length && <Reactions message={normalizedMessage} />}\\n\\n\\t\\t\\t{normalizedMessage.location && <Location location={normalizedMessage.location} />}\\n\\n\\t\\t\\t{broadcast && !!messageUser.username && normalizedMessage.u._id !== uid && (\\n\\t\\t\\t\\t<BroadcastMetrics username={messageUser.username} message={normalizedMessage} />\\n\\t\\t\\t)}\\n\\n\\t\\t\\t{readReceiptEnabled && <ReadReceiptIndicator mid={normalizedMessage._id} unread={normalizedMessage.unread} />}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default memo(ThreadMessageContent);\\n\",null],\"names\":[\"_objectWithoutProperties\",\"_objectSpread\",\"isE2EEMessage\",\"isQuoteAttachment\",\"MessageBody\",\"useSetting\",\"useUserId\",\"useTranslation\",\"React\",\"memo\",\"useUserData\",\"MessageContentBody\",\"ReadReceiptIndicator\",\"Attachments\",\"BroadcastMetrics\",\"Location\",\"MessageActions\",\"Reactions\",\"UrlPreviews\",\"useNormalizedMessage\",\"useOembedLayout\",\"useSubscriptionFromMessageQuery\",\"UiKitMessageBlock\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_useSubscriptionFromM\",\"_subscription$broadca\",\"_normalizedMessage$at\",\"_normalizedMessage$at2\",\"_normalizedMessage$bl\",\"_normalizedMessage$md\",\"_message$files\",\"_message$files$\",\"_normalizedMessage$ur\",\"_normalizedMessage$ac\",\"message\",\"encrypted\",\"enabled\",\"oembedEnabled\",\"subscription\",\"data\",\"undefined\",\"broadcast\",\"uid\",\"messageUser\",\"u\",\"roles\",\"_id\",\"readReceiptEnabled\",\"t\",\"normalizedMessage\",\"isMessageEncrypted\",\"e2e\",\"quotes\",\"attachments\",\"filter\",\"attachment\",\"createElement\",\"Fragment\",\"length\",\"blocks\",\"md\",\"mentions\",\"channels\",\"rid\",\"mid\",\"id\",\"files\",\"urls\",\"actionLinks\",\"actions\",\"map\",\"_ref2\",\"method_id\",\"methodId\",\"i18nLabel\",\"action\",\"_excluded\",\"reactions\",\"Object\",\"keys\",\"location\",\"username\",\"unread\"],\"mappings\":\"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\"}"}