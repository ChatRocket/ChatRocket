{"code":"function module(n,e,t){t.export({VideoConfContext:function(){return o},useVideoConfDispatchOutgoing:function(){return c},useVideoConfDismissOutgoing:function(){return s},useVideoConfStartCall:function(){return a},useVideoConfAcceptCall:function(){return l},useVideoConfJoinCall:function(){return C},useVideoConfDismissCall:function(){return d},useVideoConfAbortCall:function(){return g},useVideoConfRejectIncomingCall:function(){return V},useVideoConfIncomingCalls:function(){return v},useVideoConfSetPreferences:function(){return m},useVideoConfIsRinging:function(){return p},useVideoConfIsCalling:function(){return b},useVideoConfCapabilities:function(){return I},useVideoConfPreferences:function(){return q},useVideoConfManager:function(){return x}}),t.link(\"react\",{createContext:function(n){r=n},useContext:function(n){u=n}},0),t.link(\"use-subscription\",{useSubscription:function(n){i=n}},1);var r,u,i,o=r(void 0),f=function(){var n=u(o);if(!n)throw Error(\"Must be running in VideoConf Context\");return n},c=function(){return f().dispatchOutgoing},s=function(){return f().dismissOutgoing},a=function(){return f().startCall},l=function(){return f().acceptCall},C=function(){return f().joinCall},d=function(){return f().dismissCall},g=function(){return f().abortCall},V=function(){return f().rejectIncomingCall},v=function(){var n=f().queryIncomingCalls;return i(n)},m=function(){return f().setPreferences},p=function(){var n=f().queryRinging;return i(n)},b=function(){var n=f().queryCalling;return i(n)},I=function(){var n=f().queryCapabilities;return i(n)},q=function(){var n=f().queryPreferences;return i(n)},x=function(){var n;return null===(n=u(o))||void 0===n?void 0:n.manager}}","map":"{\"version\":3,\"sources\":[\"client/contexts/VideoConfContext.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { createContext, useContext } from 'react';\\nimport type { Subscription } from 'use-subscription';\\nimport { useSubscription } from 'use-subscription';\\n\\nimport type { DirectCallData, ProviderCapabilities, CallPreferences, VideoConfManager } from '../lib/VideoConfManager';\\n\\nexport type VideoConfPopupPayload = {\\n\\tid: string;\\n\\trid: IRoom['_id'];\\n\\tisReceiving?: boolean;\\n};\\n\\ntype VideoConfContextValue = {\\n\\tmanager: typeof VideoConfManager;\\n\\tdispatchOutgoing: (options: Omit<VideoConfPopupPayload, 'id'>) => void;\\n\\tdismissOutgoing: () => void;\\n\\tstartCall: (rid: IRoom['_id'], title?: string) => void;\\n\\tacceptCall: (callId: string) => void;\\n\\tjoinCall: (callId: string) => void;\\n\\tdismissCall: (callId: string) => void;\\n\\trejectIncomingCall: (callId: string) => void;\\n\\tabortCall: () => void;\\n\\tsetPreferences: (prefs: { mic?: boolean; cam?: boolean }) => void;\\n\\tqueryIncomingCalls: Subscription<DirectCallData[]>;\\n\\tqueryRinging: Subscription<boolean>;\\n\\tqueryCalling: Subscription<boolean>;\\n\\tqueryCapabilities: Subscription<ProviderCapabilities>;\\n\\tqueryPreferences: Subscription<CallPreferences>;\\n};\\n\\nexport const VideoConfContext = createContext<VideoConfContextValue | undefined>(undefined);\\nconst useVideoConfContext = (): VideoConfContextValue => {\\n\\tconst context = useContext(VideoConfContext);\\n\\tif (!context) {\\n\\t\\tthrow new Error('Must be running in VideoConf Context');\\n\\t}\\n\\n\\treturn context;\\n};\\n\\nexport const useVideoConfDispatchOutgoing = (): VideoConfContextValue['dispatchOutgoing'] => useVideoConfContext().dispatchOutgoing;\\nexport const useVideoConfDismissOutgoing = (): VideoConfContextValue['dismissOutgoing'] => useVideoConfContext().dismissOutgoing;\\nexport const useVideoConfStartCall = (): VideoConfContextValue['startCall'] => useVideoConfContext().startCall;\\nexport const useVideoConfAcceptCall = (): VideoConfContextValue['acceptCall'] => useVideoConfContext().acceptCall;\\nexport const useVideoConfJoinCall = (): VideoConfContextValue['joinCall'] => useVideoConfContext().joinCall;\\nexport const useVideoConfDismissCall = (): VideoConfContextValue['dismissCall'] => useVideoConfContext().dismissCall;\\nexport const useVideoConfAbortCall = (): VideoConfContextValue['abortCall'] => useVideoConfContext().abortCall;\\nexport const useVideoConfRejectIncomingCall = (): VideoConfContextValue['rejectIncomingCall'] => useVideoConfContext().rejectIncomingCall;\\nexport const useVideoConfIncomingCalls = (): DirectCallData[] => {\\n\\tconst { queryIncomingCalls } = useVideoConfContext();\\n\\treturn useSubscription(queryIncomingCalls);\\n};\\nexport const useVideoConfSetPreferences = (): VideoConfContextValue['setPreferences'] => useVideoConfContext().setPreferences;\\nexport const useVideoConfIsRinging = (): boolean => {\\n\\tconst { queryRinging } = useVideoConfContext();\\n\\treturn useSubscription(queryRinging);\\n};\\nexport const useVideoConfIsCalling = (): boolean => {\\n\\tconst { queryCalling } = useVideoConfContext();\\n\\treturn useSubscription(queryCalling);\\n};\\nexport const useVideoConfCapabilities = (): ProviderCapabilities => {\\n\\tconst { queryCapabilities } = useVideoConfContext();\\n\\treturn useSubscription(queryCapabilities);\\n};\\nexport const useVideoConfPreferences = (): CallPreferences => {\\n\\tconst { queryPreferences } = useVideoConfContext();\\n\\treturn useSubscription(queryPreferences);\\n};\\n\\nexport const useVideoConfManager = (): typeof VideoConfManager | undefined => useContext(VideoConfContext)?.manager;\\n\",null],\"names\":[\"module\",\"export\",\"VideoConfContext\",\"useVideoConfDispatchOutgoing\",\"useVideoConfDismissOutgoing\",\"useVideoConfStartCall\",\"useVideoConfAcceptCall\",\"useVideoConfJoinCall\",\"useVideoConfDismissCall\",\"useVideoConfAbortCall\",\"useVideoConfRejectIncomingCall\",\"useVideoConfIncomingCalls\",\"useVideoConfSetPreferences\",\"useVideoConfIsRinging\",\"useVideoConfIsCalling\",\"useVideoConfCapabilities\",\"useVideoConfPreferences\",\"useVideoConfManager\",\"link\",\"createContext\",\"v\",\"useContext\",\"useSubscription\",\"undefined\",\"useVideoConfContext\",\"context\",\"Error\",\"dispatchOutgoing\",\"dismissOutgoing\",\"startCall\",\"acceptCall\",\"joinCall\",\"dismissCall\",\"abortCall\",\"rejectIncomingCall\",\"queryIncomingCalls\",\"_useVideoConfContext\",\"setPreferences\",\"queryRinging\",\"_useVideoConfContext2\",\"queryCalling\",\"_useVideoConfContext3\",\"queryCapabilities\",\"_useVideoConfContext4\",\"queryPreferences\",\"_useVideoConfContext5\",\"_useContext\",\"manager\"],\"mappings\":\"uBACAA,EAAOC,MAAE,CAAA,CAAAC,iBAAe,WAAkB,OAAQA,CAAA,EAAAC,6BAAA,WAAA,OAAAA,CAAA,EAAAC,4BAAA,WAAA,OAAAA,CAAA,EAAAC,sBAAA,WAAA,OAAAA,CAAA,EAAAC,uBAAA,WAAA,OAAAA,CAAA,EAAAC,qBAAA,WAAA,OAAAA,CAAA,EAAAC,wBAAA,WAAA,OAAAA,CAAA,EAAAC,sBAAA,WAAA,OAAAA,CAAA,EAAAC,+BAAA,WAAA,OAAAA,CAAA,EAAAC,0BAAA,WAAA,OAAAA,CAAA,EAAAC,2BAAA,WAAA,OAAAA,CAAA,EAAAC,sBAAA,WAAA,OAAAA,CAAA,EAAAC,sBAAA,WAAA,OAAAA,CAAA,EAAAC,yBAAA,WAAA,OAAAA,CAAA,EAAAC,wBAAA,WAAA,OAAAA,CAAA,EAAAC,oBAAA,WAAA,OAAAA,CAAA,CAAA,GAAAjB,EAAAkB,IAAA,CAAA,QAAA,CAAAC,cAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,EAAAC,WAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAApB,EAAAkB,IAAA,CAAA,mBAAA,CAAAI,gBAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GA8B3C,IA9B2CD,EAAAE,EAAAC,EA8BrCpB,EAAmBiB,EAAiDI,KAAAA,GAC3EC,EAAsB,WAC3B,IAAMC,EAAUJ,EAAWnB,GAC3B,GAAI,CAACuB,EACJ,MAAM,AAAIC,MAAM,wCAGjB,OAAOD,CACR,EAEatB,EAA+B,WAAA,OAAiDqB,IAAsBG,gBAAgB,EACtHvB,EAA8B,WAAA,OAAgDoB,IAAsBI,eAAe,EACnHvB,EAAwB,WAAA,OAA0CmB,IAAsBK,SAAS,EACjGvB,EAAyB,WAAA,OAA2CkB,IAAsBM,UAAU,EACpGvB,EAAuB,WAAA,OAAyCiB,IAAsBO,QAAQ,EAC9FvB,EAA0B,WAAA,OAA4CgB,IAAsBQ,WAAW,EACvGvB,EAAwB,WAAA,OAA0Ce,IAAsBS,SAAS,EACjGvB,EAAiC,WAAA,OAAmDc,IAAsBU,kBAAkB,EAC5HvB,EAA4B,WACxC,IAAQwB,EAAkBC,AAAKZ,IAAvBW,kBAAkB,CAC1B,OAAOb,EAAgBa,EACxB,EACavB,EAA6B,WAAA,OAA+CY,IAAsBa,cAAc,EAChHxB,EAAwB,WACpC,IAAQyB,EAAYC,AAAKf,IAAjBc,YAAY,CACpB,OAAOhB,EAAgBgB,EACxB,EACaxB,EAAwB,WACpC,IAAQ0B,EAAYC,AAAKjB,IAAjBgB,YAAY,CACpB,OAAOlB,EAAgBkB,EACxB,EACazB,EAA2B,WACvC,IAAQ2B,EAAiBC,AAAKnB,IAAtBkB,iBAAiB,CACzB,OAAOpB,EAAgBoB,EACxB,EACa1B,EAA0B,WACtC,IAAQ4B,EAAgBC,AAAKrB,IAArBoB,gBAAgB,CACxB,OAAOtB,EAAgBsB,EACxB,EAEa3B,EAAsB,WAAA,IAAA6B,EAAA,OAAA,AAAuE,OAAvEA,CAAAA,EAA2CzB,EAAWnB,EAAgB,GAAC4C,AAAA,KAAA,IAAAA,EAAA,KAAA,EAA5BA,EAA8BC,OAAO\"}"}