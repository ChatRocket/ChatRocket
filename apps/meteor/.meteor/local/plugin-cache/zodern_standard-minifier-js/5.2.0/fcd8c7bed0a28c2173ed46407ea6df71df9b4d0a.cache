{"code":"function module(e,l,n){let t,a,i,o,r,s,c,u,d,f;n.link(\"@babel/runtime/helpers/objectDestructuringEmpty\",{default(e){t=e}},0),n.link(\"@babel/runtime/helpers/extends\",{default(e){a=e}},1),n.export({OmnichannelCallToggleReady:()=>_}),n.link(\"@rocket.chat/fuselage\",{Sidebar(e){i=e}},0),n.link(\"react\",{default(e){o=e},useCallback(e){r=e}},1),n.link(\"react-i18next\",{useTranslation(e){s=e}},2),n.link(\"../../../contexts/CallContext\",{useCallerInfo(e){c=e},useCallRegisterClient(e){u=e},useCallUnregisterClient(e){d=e},useVoipNetworkStatus(e){f=e}},3);let _=e=>{let l=a({},(t(e),e)),{t:n}=s(),_=c(),C=d(),b=u(),k=f(),g=![\"ERROR\",\"INITIAL\",\"UNREGISTERED\"].includes(_.state),p=[\"IN_CALL\"].includes(_.state),h=r(()=>{if(g){C();return}b()},[g,b,C]);return o.createElement(i.TopBar.Action,a({icon:\"offline\"===k?\"phone-issue\":g?\"phone\":\"phone-disabled\",disabled:p,\"aria-checked\":g,\"aria-label\":n(\"VoIP_Toggle\"),\"data-tooltip\":n(\"offline\"===k?\"Waiting_for_server_connection\":p?\"Cannot_disable_while_on_call\":g?\"Turn_off_answer_calls\":\"Turn_on_answer_calls\")},l,{success:g,warning:\"offline\"===k,onClick:h}))}}","map":"{\"version\":3,\"sources\":[\"client/sidebar/sections/actions/OmnichannelCallToggleReady.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Sidebar } from '@rocket.chat/fuselage';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useCallerInfo, useCallRegisterClient, useCallUnregisterClient, useVoipNetworkStatus } from '../../../contexts/CallContext';\\n\\nexport const OmnichannelCallToggleReady = ({ ...props }): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst caller = useCallerInfo();\\n\\tconst unregister = useCallUnregisterClient();\\n\\tconst register = useCallRegisterClient();\\n\\n\\tconst networkStatus = useVoipNetworkStatus();\\n\\tconst registered = !['ERROR', 'INITIAL', 'UNREGISTERED'].includes(caller.state);\\n\\tconst inCall = ['IN_CALL'].includes(caller.state);\\n\\n\\tconst onClickVoipButton = useCallback((): void => {\\n\\t\\tif (registered) {\\n\\t\\t\\tunregister();\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tregister();\\n\\t}, [registered, register, unregister]);\\n\\n\\tconst getTitle = (): string => {\\n\\t\\tif (networkStatus === 'offline') {\\n\\t\\t\\treturn t('Waiting_for_server_connection');\\n\\t\\t}\\n\\n\\t\\tif (inCall) {\\n\\t\\t\\treturn t('Cannot_disable_while_on_call');\\n\\t\\t}\\n\\n\\t\\tif (registered) {\\n\\t\\t\\treturn t('Turn_off_answer_calls');\\n\\t\\t}\\n\\n\\t\\treturn t('Turn_on_answer_calls');\\n\\t};\\n\\n\\tconst getIcon = (): 'phone-issue' | 'phone' | 'phone-disabled' => {\\n\\t\\tif (networkStatus === 'offline') {\\n\\t\\t\\treturn 'phone-issue';\\n\\t\\t}\\n\\t\\treturn registered ? 'phone' : 'phone-disabled';\\n\\t};\\n\\n\\treturn (\\n\\t\\t<Sidebar.TopBar.Action\\n\\t\\t\\ticon={getIcon()}\\n\\t\\t\\tdisabled={inCall}\\n\\t\\t\\taria-checked={registered}\\n\\t\\t\\taria-label={t('VoIP_Toggle')}\\n\\t\\t\\tdata-tooltip={getTitle()}\\n\\t\\t\\t{...props}\\n\\t\\t\\tsuccess={registered}\\n\\t\\t\\twarning={networkStatus === 'offline'}\\n\\t\\t\\tonClick={onClickVoipButton}\\n\\t\\t/>\\n\\t);\\n};\\n\",null],\"names\":[\"_objectDestructuringEmpty\",\"_extends\",\"Sidebar\",\"React\",\"useCallback\",\"useTranslation\",\"useCallerInfo\",\"useCallRegisterClient\",\"useCallUnregisterClient\",\"useVoipNetworkStatus\",\"module\",\"link\",\"default\",\"v\",\"export\",\"OmnichannelCallToggleReady\",\"_ref\",\"props\",\"t\",\"caller\",\"unregister\",\"register\",\"networkStatus\",\"registered\",\"includes\",\"state\",\"inCall\",\"onClickVoipButton\",\"createElement\",\"TopBar\",\"Action\",\"icon\",\"disabled\",\"success\",\"warning\",\"onClick\"],\"mappings\":\"2BAAAA,EAAgDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAxBC,EAAAC,IAAA,CAAA,kDAAwB,CAAAC,QAAAC,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iCAAA,CAAAC,QAAAC,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAhDH,EAAOI,MAAE,CAAA,CAAAC,2BAAeA,IAAAA,CAAwB,GAAAL,EAAAC,IAAA,CAAA,wBAAA,CAAAT,QAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAV,EAAAU,CAAA,EAAAT,YAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAN,eAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gCAAA,CAAAL,cAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,sBAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,wBAAAK,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,qBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAOzC,IAAME,EAA6BC,IAA+B,IAAzBC,EAAKhB,EAAA,CAAA,EAAAD,CAAAA,EAAAgB,GAAAA,CAAAA,GAC9C,CAAEE,EAAAA,CAAAA,CAAG,CAAGb,IAERc,EAASb,IACTc,EAAaZ,IACba,EAAWd,IAEXe,EAAgBb,IAChBc,EAAa,CAAC,CAAC,QAAS,UAAW,eAAe,CAACC,QAAQ,CAACL,EAAOM,KAAK,EACxEC,EAAS,CAAC,UAAU,CAACF,QAAQ,CAACL,EAAOM,KAAK,EAE1CE,EAAoBvB,EAAY,KACrC,GAAImB,EAAY,CACfH,IACA,MACD,CACAC,GACD,EAAG,CAACE,EAAYF,EAAUD,EAAW,EAyBrC,OACCjB,EAAAyB,aAAA,CAAC1B,EAAQ2B,MAAM,CAACC,MAAM,CAAA7B,EAAA,CACrB8B,KARD,AAAIT,AAAkB,YAAlBA,EACI,cAEDC,EAAa,QAAU,iBAM7BS,SAAUN,EACV,eAAcH,EACd,aAAYL,EAAE,eACd,cAAA,CA3BOA,EAAE,AADNI,AAAkB,YAAlBA,EACM,gCAIA,AADNI,EACM,+BAIA,AADNH,EACM,wBAGD,uBAgBiB,EACrBN,EAAK,CACTgB,QAASV,EACTW,QAASZ,AAAkB,YAAlBA,EACTa,QAASR,CAAkB,GAG9B\"}"}