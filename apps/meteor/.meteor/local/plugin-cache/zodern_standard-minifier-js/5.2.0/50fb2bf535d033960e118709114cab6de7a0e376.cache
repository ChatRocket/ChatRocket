{"code":"function module(e,n,t){var l,i,r,o,u,a,c,m,f,s,d,E,p,h,y,k,_,x,F,v,T;t.link(\"@babel/runtime/helpers/extends\",{default:function(e){l=e}},0),t.link(\"@rocket.chat/fuselage\",{InputBox:function(e){i=e},Field:function(e){r=e},MultiSelect:function(e){o=e},FieldGroup:function(e){u=e},Box:function(e){a=e},Select:function(e){c=e},FieldLabel:function(e){m=e},FieldRow:function(e){f=e},Callout:function(e){s=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId:function(e){d=e}},1),t.link(\"react\",{default:function(e){E=e},useMemo:function(e){p=e}},2),t.link(\"react-hook-form\",{useFormContext:function(e){h=e},Controller:function(e){y=e},useFieldArray:function(e){k=e}},3),t.link(\"react-i18next\",{useTranslation:function(e){_=e}},4),t.link(\"../../../hooks/useTimezoneNameList\",{useTimezoneNameList:function(e){x=e}},5),t.link(\"../additionalForms\",{BusinessHoursMultiple:function(e){F=e}},6),t.link(\"./mapBusinessHoursForm\",{defaultWorkHours:function(e){v=e},DAYS_OF_WEEK:function(e){T=e}},7),t.exportDefault(function(e){var n=e.type,t=_().t,w=x(),B=p(function(){return w.map(function(e){return[e,t(e)]})},[t,w]),g=p(function(){return T.map(function(e){return[e,t(e)]})},[t]),C=h(),D=C.watch,b=C.control,z=D().daysTime,O=k({control:b,name:\"daysTime\"}),S=O.fields,G=O.replace,H=d(),L=d(),M=d(),N=function(e){G(e.map(function(e){return z.find(function(n){return n.day===e})||v(!0).find(function(n){return n.day===e})}).filter(function(e){return!!e}))};return E.createElement(u,null,\"custom\"===n&&E.createElement(F,null),E.createElement(r,null,E.createElement(m,{htmlFor:H},t(\"Timezone\")),E.createElement(f,null,E.createElement(y,{name:\"timezoneName\",control:b,render:function(e){var n=e.field;return E.createElement(c,l({id:H},n,{options:B}))}})),E.createElement(s,{title:t(\"Daylight_savings_time\"),type:\"info\",mbs:\"x8\"},t(\"Business_hours_will_update_automatically\"))),E.createElement(r,null,E.createElement(m,{htmlFor:L},t(\"Open_days_of_the_week\")),E.createElement(f,null,E.createElement(y,{name:\"daysOpen\",control:b,render:function(e){var n=e.field,l=n.onChange,i=n.value,r=n.name,u=n.onBlur;return E.createElement(o,{id:L,onBlur:u,name:r,onChange:function(e){N(e),l(e)},options:g,value:i,placeholder:t(\"Select_an_option\"),w:\"full\"})}}))),S.map(function(e,n){return E.createElement(r,{key:e.id},E.createElement(m,null,t(e.day)),E.createElement(f,null,E.createElement(a,{display:\"flex\",flexDirection:\"column\",flexGrow:1,mie:2},E.createElement(m,{htmlFor:M+n+\"-start\"},t(\"Open\")),E.createElement(y,{name:\"daysTime.\"+n+\".start.time\",render:function(e){var t=e.field;return E.createElement(i,l({id:M+n+\"-start\",type:\"time\"},t))}})),E.createElement(a,{display:\"flex\",flexDirection:\"column\",flexGrow:1,mis:2},E.createElement(m,{htmlFor:M+n+\"-finish\"},t(\"Close\")),E.createElement(y,{name:\"daysTime.\"+n+\".finish.time\",render:function(e){var t=e.field;return E.createElement(i,l({id:M+n+\"-finish\",type:\"time\"},t))}}))))}))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/businessHours/BusinessHoursForm.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { SelectOption } from '@rocket.chat/fuselage';\\nimport { InputBox, Field, MultiSelect, FieldGroup, Box, Select, FieldLabel, FieldRow, Callout } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport React, { useMemo } from 'react';\\nimport { useFormContext, Controller, useFieldArray } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useTimezoneNameList } from '../../../hooks/useTimezoneNameList';\\nimport { BusinessHoursMultiple } from '../additionalForms';\\nimport { defaultWorkHours, DAYS_OF_WEEK } from './mapBusinessHoursForm';\\n\\ntype mappedDayTime = {\\n\\tday: string;\\n\\tstart: {\\n\\t\\ttime: string;\\n\\t};\\n\\tfinish: {\\n\\t\\ttime: string;\\n\\t};\\n\\topen: boolean;\\n};\\n\\nexport type BusinessHoursFormData = {\\n\\tname: string;\\n\\ttimezoneName: string;\\n\\tdaysOpen: string[];\\n\\tdaysTime: mappedDayTime[];\\n\\tdepartmentsToApplyBusinessHour: string;\\n\\tactive: boolean;\\n\\tdepartments: {\\n\\t\\tvalue: string;\\n\\t\\tlabel: string;\\n\\t}[];\\n};\\n\\n// TODO: replace `Select` in favor `SelectFiltered`\\n// TODO: add time validation for start and finish not be equal on UI\\n// TODO: add time validation for start not be higher than finish on UI\\nconst BusinessHoursForm = ({ type }: { type?: 'default' | 'custom' }) => {\\n\\tconst { t } = useTranslation();\\n\\tconst timeZones = useTimezoneNameList();\\n\\tconst timeZonesOptions: SelectOption[] = useMemo(() => timeZones.map((name) => [name, t(name as TranslationKey)]), [t, timeZones]);\\n\\tconst daysOptions: SelectOption[] = useMemo(() => DAYS_OF_WEEK.map((day) => [day, t(day as TranslationKey)]), [t]);\\n\\n\\tconst { watch, control } = useFormContext<BusinessHoursFormData>();\\n\\tconst { daysTime } = watch();\\n\\tconst { fields: daysTimeFields, replace } = useFieldArray({ control, name: 'daysTime' });\\n\\n\\tconst timezoneField = useUniqueId();\\n\\tconst daysOpenField = useUniqueId();\\n\\tconst daysTimeField = useUniqueId();\\n\\n\\tconst handleChangeDaysTime = (values: string[]) => {\\n\\t\\tconst newValues = values\\n\\t\\t\\t.map((item) => daysTime.find(({ day }) => day === item) || defaultWorkHours(true).find(({ day }) => day === item))\\n\\t\\t\\t.filter((item): item is mappedDayTime => Boolean(item));\\n\\t\\treplace(newValues);\\n\\t};\\n\\n\\treturn (\\n\\t\\t<FieldGroup>\\n\\t\\t\\t{type === 'custom' && <BusinessHoursMultiple />}\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<FieldLabel htmlFor={timezoneField}>{t('Timezone')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tname='timezoneName'\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\trender={({ field }) => <Select id={timezoneField} {...field} options={timeZonesOptions} />}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t<Callout title={t('Daylight_savings_time')} type='info' mbs='x8'>\\n\\t\\t\\t\\t\\t{t('Business_hours_will_update_automatically')}\\n\\t\\t\\t\\t</Callout>\\n\\t\\t\\t</Field>\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<FieldLabel htmlFor={daysOpenField}>{t('Open_days_of_the_week')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tname='daysOpen'\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\trender={({ field: { onChange, value, name, onBlur } }) => (\\n\\t\\t\\t\\t\\t\\t\\t<MultiSelect\\n\\t\\t\\t\\t\\t\\t\\t\\tid={daysOpenField}\\n\\t\\t\\t\\t\\t\\t\\t\\tonBlur={onBlur}\\n\\t\\t\\t\\t\\t\\t\\t\\tname={name}\\n\\t\\t\\t\\t\\t\\t\\t\\tonChange={(values) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\thandleChangeDaysTime(values);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tonChange(values);\\n\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\toptions={daysOptions}\\n\\t\\t\\t\\t\\t\\t\\t\\tvalue={value}\\n\\t\\t\\t\\t\\t\\t\\t\\tplaceholder={t('Select_an_option')}\\n\\t\\t\\t\\t\\t\\t\\t\\tw='full'\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t</Field>\\n\\t\\t\\t{daysTimeFields.map((dayTime, index) => (\\n\\t\\t\\t\\t<Field key={dayTime.id}>\\n\\t\\t\\t\\t\\t<FieldLabel>{t(dayTime.day as TranslationKey)}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<Box display='flex' flexDirection='column' flexGrow={1} mie={2}>\\n\\t\\t\\t\\t\\t\\t\\t<FieldLabel htmlFor={`${daysTimeField + index}-start`}>{t('Open')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\t\\tname={`daysTime.${index}.start.time`}\\n\\t\\t\\t\\t\\t\\t\\t\\trender={({ field }) => <InputBox id={`${daysTimeField + index}-start`} type='time' {...field} />}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t<Box display='flex' flexDirection='column' flexGrow={1} mis={2}>\\n\\t\\t\\t\\t\\t\\t\\t<FieldLabel htmlFor={`${daysTimeField + index}-finish`}>{t('Close')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\t\\tname={`daysTime.${index}.finish.time`}\\n\\t\\t\\t\\t\\t\\t\\t\\trender={({ field }) => <InputBox id={`${daysTimeField + index}-finish`} type='time' {...field} />}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t))}\\n\\t\\t</FieldGroup>\\n\\t);\\n};\\n\\nexport default BusinessHoursForm;\\n\",null],\"names\":[\"_extends\",\"InputBox\",\"Field\",\"MultiSelect\",\"FieldGroup\",\"Box\",\"Select\",\"FieldLabel\",\"FieldRow\",\"Callout\",\"useUniqueId\",\"React\",\"useMemo\",\"useFormContext\",\"Controller\",\"useFieldArray\",\"useTranslation\",\"useTimezoneNameList\",\"BusinessHoursMultiple\",\"defaultWorkHours\",\"DAYS_OF_WEEK\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"type\",\"t\",\"_useTranslation\",\"timeZones\",\"timeZonesOptions\",\"map\",\"name\",\"daysOptions\",\"day\",\"_useFormContext\",\"watch\",\"control\",\"daysTime\",\"_watch\",\"_useFieldArray\",\"daysTimeFields\",\"fields\",\"replace\",\"timezoneField\",\"daysOpenField\",\"daysTimeField\",\"handleChangeDaysTime\",\"values\",\"item\",\"find\",\"_ref2\",\"_ref3\",\"filter\",\"Boolean\",\"createElement\",\"htmlFor\",\"render\",\"_ref4\",\"field\",\"id\",\"options\",\"title\",\"mbs\",\"_ref5\",\"_ref5$field\",\"onChange\",\"value\",\"onBlur\",\"placeholder\",\"w\",\"dayTime\",\"index\",\"key\",\"display\",\"flexDirection\",\"flexGrow\",\"mie\",\"_ref6\",\"mis\",\"_ref7\"],\"mappings\":\"uBAuCA,IAtCAA,EAAAC,EAASC,EAAUC,EAAOC,EAAaC,EAAAC,EAAYC,EAAaC,EAAAC,EAA6DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAApHC,EAAUC,IAAK,CAAA,iCAAgC,CAAAC,QAAQ,SAAYC,CAAA,EAAAxB,EAAUwB,CAAA,CAAA,EAAA,GAAVH,EAAUC,IAAA,CAAO,wBAAQ,CAAArB,SAAwB,SAAAuB,CAAA,EAAAvB,EAAAuB,CAAA,EAAAtB,MAAA,SAAAsB,CAAA,EAAAtB,EAAAsB,CAAA,EAAArB,YAAA,SAAAqB,CAAA,EAAArB,EAAAqB,CAAA,EAAApB,WAAA,SAAAoB,CAAA,EAAApB,EAAAoB,CAAA,EAAAnB,IAAA,SAAAmB,CAAA,EAAAnB,EAAAmB,CAAA,EAAAlB,OAAA,SAAAkB,CAAA,EAAAlB,EAAAkB,CAAA,EAAAjB,WAAA,SAAAiB,CAAA,EAAAjB,EAAAiB,CAAA,EAAAhB,SAAA,SAAAgB,CAAA,EAAAhB,EAAAgB,CAAA,EAAAf,QAAA,SAAAe,CAAA,EAAAf,EAAAe,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAZ,YAAA,SAAAc,CAAA,EAAAd,EAAAc,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,QAAA,SAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kBAAA,CAAAT,eAAA,SAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,WAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,cAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAN,eAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qCAAA,CAAAL,oBAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qBAAA,CAAAJ,sBAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yBAAA,CAAAH,iBAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,aAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA7HH,EAAOI,aAAY,CAsCO,SAAAC,CAAA,EAA8C,IAA3CC,EAAID,EAAJC,IAAI,CACxBC,EAACC,AAAKb,IAANY,CAAC,CACHE,EAAYb,IACZc,EAAmCnB,EAAQ,WAAA,OAAMkB,EAAUE,GAAG,CAAC,SAACC,CAAI,EAAA,MAAK,CAACA,EAAML,EAAEK,GAAwB,EAAC,EAAE,CAACL,EAAGE,EAAU,EAC3HI,EAA8BtB,EAAQ,WAAA,OAAMQ,EAAaY,GAAG,CAAC,SAACG,CAAG,EAAA,MAAK,CAACA,EAAKP,EAAEO,GAAuB,EAAC,EAAE,CAACP,EAAE,EAEjHQ,EAA2BvB,IAAnBwB,EAAKD,EAALC,KAAK,CAAEC,EAAOF,EAAPE,OAAO,CACdC,EAAQC,AAAKH,IAAbE,QAAQ,CAChBE,EAA4C1B,EAAc,CAAEuB,QAAAA,EAASL,KAAM,UAAU,GAArES,EAAcD,EAAtBE,MAAM,CAAkBC,EAAOH,EAAPG,OAAO,CAEjCC,EAAgBnC,IAChBoC,EAAgBpC,IAChBqC,EAAgBrC,IAEhBsC,EAAuB,SAACC,CAAgB,EAI7CL,EAHkBK,EAChBjB,GAAG,CAAC,SAACkB,CAAI,EAAA,OAAKX,EAASY,IAAI,CAAC,SAAAC,CAAA,EAAM,OAAOjB,AAAPiB,EAAHjB,GAAG,GAAee,CAAI,IAAK/B,EAAiB,CAAA,GAAMgC,IAAI,CAAC,SAAAE,CAAA,EAAM,OAAOlB,AAAPkB,EAAHlB,GAAG,GAAee,CAAI,EAAC,GAChHI,MAAM,CAAC,SAACJ,CAAI,EAAA,MAA4BK,CAAAA,CAAQL,CAAK,GAExD,EAEA,OACCvC,EAAA6C,aAAA,CAACpD,EAAU,KACTuB,AAAS,WAATA,GAAqBhB,EAAA6C,aAAA,CAACtC,EAAqB,MAC5CP,EAAA6C,aAAA,CAACtD,EAAK,KACLS,EAAA6C,aAAA,CAACjD,EAAU,CAACkD,QAASZ,CAAc,EAAEjB,EAAE,aACvCjB,EAAA6C,aAAA,CAAChD,EAAQ,KACRG,EAAA6C,aAAA,CAAC1C,EAAU,CACVmB,KAAK,eACLK,QAASA,EACToB,OAAQ,SAAAC,CAAA,EAAA,IAAGC,EAAKD,EAALC,KAAK,CAAA,OAAOjD,EAAA6C,aAAA,CAAClD,EAAMN,EAAA,CAAC6D,GAAIhB,CAAc,EAAKe,EAAK,CAAEE,QAAS/B,CAAiB,GAAG,CAAC,IAG7FpB,EAAA6C,aAAA,CAAC/C,EAAO,CAACsD,MAAOnC,EAAE,yBAA0BD,KAAK,OAAOqC,IAAI,IAAI,EAC9DpC,EAAE,8CAGLjB,EAAA6C,aAAA,CAACtD,EAAK,KACLS,EAAA6C,aAAA,CAACjD,EAAU,CAACkD,QAASX,CAAc,EAAElB,EAAE,0BACvCjB,EAAA6C,aAAA,CAAChD,EAAQ,KACRG,EAAA6C,aAAA,CAAC1C,EAAU,CACVmB,KAAK,WACLK,QAASA,EACToB,OAAQ,SAAAO,CAAA,EAAA,IAAAC,EAAAD,EAAGL,KAAK,CAAIO,EAAQD,EAARC,QAAQ,CAAEC,EAAKF,EAALE,KAAK,CAAEnC,EAAIiC,EAAJjC,IAAI,CAAEoC,EAAMH,EAANG,MAAM,CAAA,OAChD1D,EAAA6C,aAAA,CAACrD,EAAW,CACX0D,GAAIf,EACJuB,OAAQA,EACRpC,KAAMA,EACNkC,SAAU,SAAClB,CAAM,EAChBD,EAAqBC,GACrBkB,EAASlB,EACV,EACAa,QAAS5B,EACTkC,MAAOA,EACPE,YAAa1C,EAAE,oBACf2C,EAAE,MAAM,EACP,CACD,KAIJ7B,EAAeV,GAAG,CAAC,SAACwC,CAAO,CAAEC,CAAK,EAAA,OAClC9D,EAAA6C,aAAA,CAACtD,EAAK,CAACwE,IAAKF,EAAQX,EAAAA,AAAG,EACtBlD,EAAA6C,aAAA,CAACjD,EAAU,KAAEqB,EAAE4C,EAAQrC,GAAqB,GAC5CxB,EAAA6C,aAAA,CAAChD,EAAQ,KACRG,EAAA6C,aAAA,CAACnD,EAAG,CAACsE,QAAQ,OAAOC,cAAc,SAASC,SAAU,EAAGC,IAAK,CAAE,EAC9DnE,EAAA6C,aAAA,CAACjD,EAAU,CAACkD,QAAYV,EAAgB0B,EAAK,QAAS,EAAE7C,EAAE,SAC1DjB,EAAA6C,aAAA,CAAC1C,EAAU,CACVmB,KAAI,YAAcwC,EAAK,cACvBf,OAAQ,SAAAqB,CAAA,EAAA,IAAGnB,EAAKmB,EAALnB,KAAK,CAAA,OAAOjD,EAAA6C,aAAA,CAACvD,EAAQD,EAAA,CAAC6D,GAAOd,EAAgB0B,EAAK,SAAU9C,KAAK,MAAM,EAAKiC,GAAS,CAAC,IAGnGjD,EAAA6C,aAAA,CAACnD,EAAG,CAACsE,QAAQ,OAAOC,cAAc,SAASC,SAAU,EAAGG,IAAK,CAAE,EAC9DrE,EAAA6C,aAAA,CAACjD,EAAU,CAACkD,QAAYV,EAAgB0B,EAAK,SAAU,EAAE7C,EAAE,UAC3DjB,EAAA6C,aAAA,CAAC1C,EAAU,CACVmB,KAAI,YAAcwC,EAAK,eACvBf,OAAQ,SAAAuB,CAAA,EAAA,IAAGrB,EAAKqB,EAALrB,KAAK,CAAA,OAAOjD,EAAA6C,aAAA,CAACvD,EAAQD,EAAA,CAAC6D,GAAOd,EAAgB0B,EAAK,UAAW9C,KAAK,MAAM,EAAKiC,GAAS,CAAC,KAI9F,GAIZ\"}"}