{"code":"function module(e,n,t){var l,o,r,u,c,i,a,f,s,m,d,b,E,C,x,k,p,h;t.link(\"@babel/runtime/helpers/extends\",{default:function(e){l=e}},0),t.link(\"@rocket.chat/fuselage\",{Field:function(e){o=e},FieldLabel:function(e){r=e},FieldRow:function(e){u=e},TextInput:function(e){c=e},Select:function(e){i=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useTranslation:function(e){a=e},useRoute:function(e){f=e}},1),t.link(\"react\",{default:function(e){s=e},useEffect:function(e){m=e}},2),t.link(\"react-hook-form\",{Controller:function(e){d=e},useForm:function(e){b=e}},3),t.link(\"../../../components/Contextualbar\",{Contextualbar:function(e){E=e},ContextualbarScrollableContent:function(e){C=e},ContextualbarHeader:function(e){x=e},ContextualbarClose:function(e){k=e},ContextualbarDialog:function(e){p=e},ContextualbarTitle:function(e){h=e}},4),t.exportDefault(function(e){var n=e.setCustomFields,t=e.allCustomFields,F=b({mode:\"onChange\"}),_=F.register,v=F.watch,g=F.control;m(function(){var e=v(function(e){return n(e)});return function(){return e.unsubscribe()}},[n,v]);var y=a(),w=f(\"omnichannel-current-chats\");return s.createElement(p,null,s.createElement(E,null,s.createElement(x,null,s.createElement(h,null,y(\"Filter_by_Custom_Fields\")),s.createElement(k,{onClick:function(){return w.push({context:\"\"})}})),s.createElement(C,{is:\"form\"},t.filter(function(e){return\"visitor\"!==e.scope}).map(function(e){return\"select\"===e.type?s.createElement(o,{key:e._id},s.createElement(r,null,e.label),s.createElement(u,null,s.createElement(d,{name:e._id,control:g,render:function(n){var t=n.field;return s.createElement(i,l({},t,{options:(e.options||\"\").split(\",\").map(function(e){return[e,e]})}))}}))):s.createElement(o,{key:e._id},s.createElement(r,null,e.label),s.createElement(u,null,s.createElement(c,l({flexGrow:1},_(e._id)))))}))))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/currentChats/CustomFieldsList.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatCustomField } from '@rocket.chat/core-typings';\\nimport { Field, FieldLabel, FieldRow, TextInput, Select } from '@rocket.chat/fuselage';\\nimport { useTranslation, useRoute } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, Dispatch, SetStateAction } from 'react';\\nimport React, { useEffect } from 'react';\\nimport { Controller, useForm } from 'react-hook-form';\\n\\nimport {\\n\\tContextualbar,\\n\\tContextualbarScrollableContent,\\n\\tContextualbarHeader,\\n\\tContextualbarClose,\\n\\tContextualbarDialog,\\n\\tContextualbarTitle,\\n} from '../../../components/Contextualbar';\\n\\ntype CustomFieldsListProps = {\\n\\tsetCustomFields: Dispatch<SetStateAction<{ [key: string]: string } | undefined>>;\\n\\tallCustomFields: ILivechatCustomField[];\\n};\\n\\nconst CustomFieldsList = ({ setCustomFields, allCustomFields }: CustomFieldsListProps): ReactElement => {\\n\\tconst { register, watch, control } = useForm({ mode: 'onChange' });\\n\\n\\t// TODO: When we refactor the other CurrentChat's fields to use react-hook-form, we need to change this to use the form controller\\n\\n\\tuseEffect(() => {\\n\\t\\tconst subscription = watch((value) => setCustomFields(value));\\n\\t\\treturn (): void => subscription.unsubscribe();\\n\\t}, [setCustomFields, watch]);\\n\\n\\tconst t = useTranslation();\\n\\tconst currentChatsRoute = useRoute('omnichannel-current-chats');\\n\\n\\treturn (\\n\\t\\t<ContextualbarDialog>\\n\\t\\t\\t<Contextualbar>\\n\\t\\t\\t\\t<ContextualbarHeader>\\n\\t\\t\\t\\t\\t<ContextualbarTitle>{t('Filter_by_Custom_Fields')}</ContextualbarTitle>\\n\\t\\t\\t\\t\\t<ContextualbarClose onClick={(): void => currentChatsRoute.push({ context: '' })} />\\n\\t\\t\\t\\t</ContextualbarHeader>\\n\\t\\t\\t\\t<ContextualbarScrollableContent is='form'>\\n\\t\\t\\t\\t\\t{/* TODO: REMOVE FILTER ONCE THE ENDPOINT SUPPORTS A SCOPE PARAMETER */}\\n\\t\\t\\t\\t\\t{allCustomFields\\n\\t\\t\\t\\t\\t\\t.filter((customField) => customField.scope !== 'visitor')\\n\\t\\t\\t\\t\\t\\t.map((customField: ILivechatCustomField) => {\\n\\t\\t\\t\\t\\t\\t\\tif (customField.type === 'select') {\\n\\t\\t\\t\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Field key={customField._id}>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldLabel>{customField.label}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tname={customField._id}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\trender={({ field }): ReactElement => (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Select {...field} options={(customField.options || '').split(',').map((item) => [item, item])} />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\t\\t\\t<Field key={customField._id}>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldLabel>{customField.label}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<TextInput flexGrow={1} {...register(customField._id)} />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t})}\\n\\t\\t\\t\\t</ContextualbarScrollableContent>\\n\\t\\t\\t</Contextualbar>\\n\\t\\t</ContextualbarDialog>\\n\\t);\\n};\\n\\nexport default CustomFieldsList;\\n\",null],\"names\":[\"_extends\",\"Field\",\"FieldLabel\",\"FieldRow\",\"TextInput\",\"Select\",\"useTranslation\",\"useRoute\",\"React\",\"useEffect\",\"Controller\",\"useForm\",\"Contextualbar\",\"ContextualbarScrollableContent\",\"ContextualbarHeader\",\"ContextualbarClose\",\"ContextualbarDialog\",\"ContextualbarTitle\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"setCustomFields\",\"allCustomFields\",\"_useForm\",\"mode\",\"register\",\"watch\",\"control\",\"subscription\",\"value\",\"unsubscribe\",\"t\",\"currentChatsRoute\",\"createElement\",\"onClick\",\"push\",\"context\",\"is\",\"filter\",\"customField\",\"scope\",\"map\",\"type\",\"key\",\"_id\",\"label\",\"name\",\"render\",\"_ref2\",\"field\",\"options\",\"split\",\"item\",\"flexGrow\"],\"mappings\":\"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\"}"}