{"code":"function module(e,n,t){var l,o,a,i,s,u,r,c,d,m,f,g,x,v,k,E,p,b,C,h,M,y,S;t.link(\"@rocket.chat/fuselage\",{Box:function(e){l=e},MessageDivider:function(e){o=e},Throbber:function(e){a=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useUserPreference:function(e){i=e}},1),t.link(\"react\",{default:function(e){s=e},useCallback:function(e){u=e}},2),t.link(\"react-virtuoso\",{Virtuoso:function(e){r=e}},3),t.link(\"../../../../app/ui-utils/client\",{MessageTypes:function(e){c=e}},4),t.link(\"../../../components/Contextualbar\",{ContextualbarContent:function(e){d=e},ContextualbarHeader:function(e){m=e},ContextualbarIcon:function(e){f=e},ContextualbarTitle:function(e){g=e},ContextualbarClose:function(e){x=e},ContextualbarEmptyContent:function(e){v=e}},5),t.link(\"../../../components/CustomScrollbars\",{VirtuosoScrollbars:function(e){k=e}},6),t.link(\"../../../components/message/variants/RoomMessage\",{default:function(e){E=e}},7),t.link(\"../../../components/message/variants/SystemMessage\",{default:function(e){p=e}},8),t.link(\"../../../hooks/useFormatDate\",{useFormatDate:function(e){b=e}},9),t.link(\"../MessageList/MessageListErrorBoundary\",{default:function(e){C=e}},10),t.link(\"../MessageList/lib/isMessageNewDay\",{isMessageNewDay:function(e){h=e}},11),t.link(\"../MessageList/providers/MessageListProvider\",{default:function(e){M=e}},12),t.link(\"../contexts/RoomContext\",{useRoomSubscription:function(e){y=e}},13),t.link(\"../contexts/RoomToolboxContext\",{useRoomToolbox:function(e){S=e}},14),t.exportDefault(function(e){var n=e.iconName,t=e.title,D=e.emptyResultMessage,R=e.context,w=e.queryResult,L=b(),T=!!i(\"displayAvatars\"),F=S().closeTab,B=u(function(){F()},[F]),U=y();return s.createElement(s.Fragment,null,s.createElement(m,null,s.createElement(f,{name:n}),s.createElement(g,null,t),s.createElement(x,{onClick:B})),s.createElement(d,{flexShrink:1,flexGrow:1,paddingInline:0},w.isLoading&&s.createElement(l,{paddingInline:24,paddingBlock:12},s.createElement(a,{size:\"x12\"})),w.isSuccess&&s.createElement(s.Fragment,null,0===w.data.length&&s.createElement(v,{title:D}),w.data.length>0&&s.createElement(C,null,s.createElement(M,null,s.createElement(l,{is:\"section\",display:\"flex\",flexDirection:\"column\",flexGrow:1,flexShrink:1,flexBasis:\"auto\",height:\"full\"},s.createElement(r,{totalCount:w.data.length,overscan:25,data:w.data,components:{Scroller:k},itemContent:function(e,n){var t,l,a,i,u,r,d=w.data[e-1],m=h(n,d),f=c.isSystemMessage(n),g=null!==(t=null==U?void 0:null===(l=U.tunread)||void 0===l?void 0:l.includes(n._id))&&void 0!==t&&t,x=null!==(a=null==U?void 0:null===(i=U.tunreadUser)||void 0===i?void 0:i.includes(n._id))&&void 0!==a&&a,v=null!==(u=null==U?void 0:null===(r=U.tunreadGroup)||void 0===r?void 0:r.includes(n._id))&&void 0!==u&&u;return s.createElement(s.Fragment,null,m&&s.createElement(o,null,L(n.ts)),f?s.createElement(p,{message:n,showUserAvatar:T}):s.createElement(E,{message:n,sequential:!1,unread:g,mention:x,all:v,context:R,showUserAvatar:T}))}})))))))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/MessageListTab.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { Box, MessageDivider, Throbber } from '@rocket.chat/fuselage';\\nimport type { Keys as IconName } from '@rocket.chat/icons';\\nimport { useUserPreference } from '@rocket.chat/ui-contexts';\\nimport type { UseQueryResult } from '@tanstack/react-query';\\nimport type { ReactElement, ReactNode } from 'react';\\nimport React, { useCallback } from 'react';\\nimport { Virtuoso } from 'react-virtuoso';\\n\\nimport { MessageTypes } from '../../../../app/ui-utils/client';\\nimport type { MessageActionContext } from '../../../../app/ui-utils/client/lib/MessageAction';\\nimport {\\n\\tContextualbarContent,\\n\\tContextualbarHeader,\\n\\tContextualbarIcon,\\n\\tContextualbarTitle,\\n\\tContextualbarClose,\\n\\tContextualbarEmptyContent,\\n} from '../../../components/Contextualbar';\\nimport { VirtuosoScrollbars } from '../../../components/CustomScrollbars';\\nimport RoomMessage from '../../../components/message/variants/RoomMessage';\\nimport SystemMessage from '../../../components/message/variants/SystemMessage';\\nimport { useFormatDate } from '../../../hooks/useFormatDate';\\nimport MessageListErrorBoundary from '../MessageList/MessageListErrorBoundary';\\nimport { isMessageNewDay } from '../MessageList/lib/isMessageNewDay';\\nimport MessageListProvider from '../MessageList/providers/MessageListProvider';\\nimport { useRoomSubscription } from '../contexts/RoomContext';\\nimport { useRoomToolbox } from '../contexts/RoomToolboxContext';\\n\\ntype MessageListTabProps = {\\n\\ticonName: IconName;\\n\\ttitle: ReactNode;\\n\\temptyResultMessage: string;\\n\\tcontext: MessageActionContext;\\n\\tqueryResult: UseQueryResult<IMessage[]>;\\n};\\n\\nconst MessageListTab = ({ iconName, title, emptyResultMessage, context, queryResult }: MessageListTabProps): ReactElement => {\\n\\tconst formatDate = useFormatDate();\\n\\tconst showUserAvatar = !!useUserPreference<boolean>('displayAvatars');\\n\\n\\tconst { closeTab } = useRoomToolbox();\\n\\tconst handleTabBarCloseButtonClick = useCallback(() => {\\n\\t\\tcloseTab();\\n\\t}, [closeTab]);\\n\\n\\tconst subscription = useRoomSubscription();\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<ContextualbarHeader>\\n\\t\\t\\t\\t<ContextualbarIcon name={iconName} />\\n\\t\\t\\t\\t<ContextualbarTitle>{title}</ContextualbarTitle>\\n\\t\\t\\t\\t<ContextualbarClose onClick={handleTabBarCloseButtonClick} />\\n\\t\\t\\t</ContextualbarHeader>\\n\\t\\t\\t<ContextualbarContent flexShrink={1} flexGrow={1} paddingInline={0}>\\n\\t\\t\\t\\t{queryResult.isLoading && (\\n\\t\\t\\t\\t\\t<Box paddingInline={24} paddingBlock={12}>\\n\\t\\t\\t\\t\\t\\t<Throbber size='x12' />\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t{queryResult.isSuccess && (\\n\\t\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t\\t{queryResult.data.length === 0 && <ContextualbarEmptyContent title={emptyResultMessage} />}\\n\\n\\t\\t\\t\\t\\t\\t{queryResult.data.length > 0 && (\\n\\t\\t\\t\\t\\t\\t\\t<MessageListErrorBoundary>\\n\\t\\t\\t\\t\\t\\t\\t\\t<MessageListProvider>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Box is='section' display='flex' flexDirection='column' flexGrow={1} flexShrink={1} flexBasis='auto' height='full'>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Virtuoso\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttotalCount={queryResult.data.length}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\toverscan={25}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata={queryResult.data}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcomponents={{ Scroller: VirtuosoScrollbars }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\titemContent={(index, message) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst previous = queryResult.data[index - 1];\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst newDay = isMessageNewDay(message, previous);\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst system = MessageTypes.isSystemMessage(message);\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst unread = subscription?.tunread?.includes(message._id) ?? false;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst mention = subscription?.tunreadUser?.includes(message._id) ?? false;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst all = subscription?.tunreadGroup?.includes(message._id) ?? false;\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{newDay && <MessageDivider>{formatDate(message.ts)}</MessageDivider>}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{system ? (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<SystemMessage message={message} showUserAvatar={showUserAvatar} />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t) : (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<RoomMessage\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmessage={message}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tsequential={false}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tunread={unread}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmention={mention}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tall={all}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcontext={context}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tshowUserAvatar={showUserAvatar}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t\\t\\t</MessageListProvider>\\n\\t\\t\\t\\t\\t\\t\\t</MessageListErrorBoundary>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</ContextualbarContent>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default MessageListTab;\\n\",null],\"names\":[\"Box\",\"MessageDivider\",\"Throbber\",\"useUserPreference\",\"React\",\"useCallback\",\"Virtuoso\",\"MessageTypes\",\"ContextualbarContent\",\"ContextualbarHeader\",\"ContextualbarIcon\",\"ContextualbarTitle\",\"ContextualbarClose\",\"ContextualbarEmptyContent\",\"VirtuosoScrollbars\",\"RoomMessage\",\"SystemMessage\",\"useFormatDate\",\"MessageListErrorBoundary\",\"isMessageNewDay\",\"MessageListProvider\",\"useRoomSubscription\",\"useRoomToolbox\",\"module\",\"link\",\"v\",\"exportDefault\",\"_ref\",\"iconName\",\"title\",\"emptyResultMessage\",\"context\",\"queryResult\",\"formatDate\",\"showUserAvatar\",\"closeTab\",\"_useRoomToolbox\",\"handleTabBarCloseButtonClick\",\"subscription\",\"createElement\",\"Fragment\",\"name\",\"onClick\",\"flexShrink\",\"flexGrow\",\"paddingInline\",\"isLoading\",\"paddingBlock\",\"size\",\"isSuccess\",\"data\",\"length\",\"is\",\"display\",\"flexDirection\",\"flexBasis\",\"height\",\"totalCount\",\"overscan\",\"components\",\"Scroller\",\"itemContent\",\"index\",\"message\",\"_subscription$tunread\",\"_subscription$tunread2\",\"_subscription$tunread3\",\"_subscription$tunread4\",\"_subscription$tunread5\",\"_subscription$tunread6\",\"previous\",\"newDay\",\"system\",\"isSystemMessage\",\"unread\",\"tunread\",\"includes\",\"_id\",\"mention\",\"tunreadUser\",\"all\",\"tunreadGroup\",\"ts\",\"sequential\"],\"mappings\":\"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\"}"}