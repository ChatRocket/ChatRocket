{"code":"function module(e,r,a){let t,s,o,l,n,i,d,c,m,u,w,f,h,p,E,_,k,v,P,g;a.link(\"@babel/runtime/helpers/extends\",{default(e){t=e}},0),a.link(\"@rocket.chat/fuselage\",{Box(e){s=e},Field(e){o=e},FieldError(e){l=e},FieldGroup(e){n=e},FieldHint(e){i=e},FieldLabel(e){d=e},FieldRow(e){c=e},Icon(e){m=e},PasswordInput(e){u=e}},0),a.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){w=e}},1),a.link(\"@rocket.chat/ui-client\",{PasswordVerifier(e){f=e},useValidatePassword(e){h=e}},2),a.link(\"@rocket.chat/ui-contexts\",{useMethod(e){p=e},useToastMessageDispatch(e){E=e},useTranslation(e){_=e}},3),a.link(\"react\",{default(e){k=e}},4),a.link(\"react-hook-form\",{Controller(e){v=e},useFormContext(e){P=e}},5),a.link(\"./useAllowPasswordChange\",{useAllowPasswordChange(e){g=e}},6),a.exportDefault(e=>{let r=_(),a=E(),b=w(),x=w(),y=w(),{watch:F,formState:{errors:C},handleSubmit:q,reset:D,control:G}=P(),I=F(\"password\"),R=h(I),{allowPasswordChange:z}=g(),A=p(\"saveUserProfile\"),M=async e=>{let{password:t}=e;try{await A({newPassword:t},{}),a({type:\"success\",message:r(\"Password_changed_successfully\")}),D()}catch(e){a({type:\"error\",message:e})}};return k.createElement(s,t({},e,{is:\"form\",autoComplete:\"off\",onSubmit:q(M)}),k.createElement(n,null,k.createElement(o,null,k.createElement(d,{htmlFor:b},r(\"New_password\")),k.createElement(c,null,k.createElement(v,{control:G,name:\"password\",rules:{required:r(\"Required_field\",{field:r(\"New_password\")}),validate:()=>null==I||!I.length||!!R||r(\"Password_must_meet_the_complexity_requirements\")},render:e=>{var r;let{field:a}=e;return k.createElement(u,t({},a,{id:b,error:null===(r=C.password)||void 0===r?void 0:r.message,flexGrow:1,addon:k.createElement(m,{name:\"key\",size:\"x20\"}),disabled:!z,\"aria-describedby\":\"\".concat(y,\" \").concat(b,\"-hint \").concat(b,\"-error\"),\"aria-invalid\":C.password?\"true\":\"false\"}))}})),!z&&k.createElement(i,{id:\"\".concat(b,\"-hint\")},r(\"Password_Change_Disabled\")),(null==C?void 0:C.password)&&k.createElement(l,{\"aria-live\":\"assertive\",id:\"\".concat(b,\"-error\")},C.password.message),z&&k.createElement(f,{password:I,id:y})),k.createElement(o,null,k.createElement(d,{htmlFor:x},r(\"Confirm_password\")),k.createElement(c,null,k.createElement(v,{control:G,name:\"confirmationPassword\",rules:{required:r(\"Required_field\",{field:r(\"Confirm_password\")}),validate:e=>I===e||r(\"Passwords_do_not_match\")},render:e=>{var r;let{field:a}=e;return k.createElement(u,t({},a,{id:x,error:null===(r=C.confirmationPassword)||void 0===r?void 0:r.message,flexGrow:1,addon:k.createElement(m,{name:\"key\",size:\"x20\"}),disabled:!z||!R,\"aria-required\":\"\"!==I?\"true\":\"false\",\"aria-invalid\":C.confirmationPassword?\"true\":\"false\",\"aria-describedby\":\"\".concat(x,\"-error\")}))}})),C.confirmationPassword&&k.createElement(l,{\"aria-live\":\"assertive\",id:\"\".concat(x,\"-error\")},C.confirmationPassword.message))))})}","map":"{\"version\":3,\"sources\":[\"client/views/account/security/ChangePassword.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Field, FieldError, FieldGroup, FieldHint, FieldLabel, FieldRow, Icon, PasswordInput } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { PasswordVerifier, useValidatePassword } from '@rocket.chat/ui-client';\\nimport { useMethod, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { AllHTMLAttributes } from 'react';\\nimport React from 'react';\\nimport { Controller, useFormContext } from 'react-hook-form';\\n\\nimport { useAllowPasswordChange } from './useAllowPasswordChange';\\n\\ntype PasswordFieldValues = { password: string; confirmationPassword: string };\\n\\nconst ChangePassword = (props: AllHTMLAttributes<HTMLFormElement>) => {\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst passwordId = useUniqueId();\\n\\tconst confirmPasswordId = useUniqueId();\\n\\tconst passwordVerifierId = useUniqueId();\\n\\n\\tconst {\\n\\t\\twatch,\\n\\t\\tformState: { errors },\\n\\t\\thandleSubmit,\\n\\t\\treset,\\n\\t\\tcontrol,\\n\\t} = useFormContext<PasswordFieldValues>();\\n\\n\\tconst password = watch('password');\\n\\tconst passwordIsValid = useValidatePassword(password);\\n\\tconst { allowPasswordChange } = useAllowPasswordChange();\\n\\n\\t// FIXME: replace to endpoint\\n\\tconst updatePassword = useMethod('saveUserProfile');\\n\\n\\tconst handleSave = async ({ password }: { password?: string }) => {\\n\\t\\ttry {\\n\\t\\t\\tawait updatePassword({ newPassword: password }, {});\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Password_changed_successfully') });\\n\\t\\t\\treset();\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t};\\n\\n\\treturn (\\n\\t\\t<Box {...props} is='form' autoComplete='off' onSubmit={handleSubmit(handleSave)}>\\n\\t\\t\\t<FieldGroup>\\n\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t<FieldLabel htmlFor={passwordId}>{t('New_password')}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\t\\tname='password'\\n\\t\\t\\t\\t\\t\\t\\trules={{\\n\\t\\t\\t\\t\\t\\t\\t\\trequired: t('Required_field', { field: t('New_password') }),\\n\\t\\t\\t\\t\\t\\t\\t\\tvalidate: () => (password?.length && !passwordIsValid ? t('Password_must_meet_the_complexity_requirements') : true),\\n\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\trender={({ field }) => (\\n\\t\\t\\t\\t\\t\\t\\t\\t<PasswordInput\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{...field}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tid={passwordId}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\terror={errors.password?.message}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tflexGrow={1}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taddon={<Icon name='key' size='x20' />}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tdisabled={!allowPasswordChange}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taria-describedby={`${passwordVerifierId} ${passwordId}-hint ${passwordId}-error`}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taria-invalid={errors.password ? 'true' : 'false'}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t{!allowPasswordChange && <FieldHint id={`${passwordId}-hint`}>{t('Password_Change_Disabled')}</FieldHint>}\\n\\t\\t\\t\\t\\t{errors?.password && (\\n\\t\\t\\t\\t\\t\\t<FieldError aria-live='assertive' id={`${passwordId}-error`}>\\n\\t\\t\\t\\t\\t\\t\\t{errors.password.message}\\n\\t\\t\\t\\t\\t\\t</FieldError>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t{allowPasswordChange && <PasswordVerifier password={password} id={passwordVerifierId} />}\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t<FieldLabel htmlFor={confirmPasswordId}>{t('Confirm_password')}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\t\\tname='confirmationPassword'\\n\\t\\t\\t\\t\\t\\t\\trules={{\\n\\t\\t\\t\\t\\t\\t\\t\\trequired: t('Required_field', { field: t('Confirm_password') }),\\n\\t\\t\\t\\t\\t\\t\\t\\tvalidate: (confirmationPassword) => (password !== confirmationPassword ? t('Passwords_do_not_match') : true),\\n\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\trender={({ field }) => (\\n\\t\\t\\t\\t\\t\\t\\t\\t<PasswordInput\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{...field}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tid={confirmPasswordId}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\terror={errors.confirmationPassword?.message}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tflexGrow={1}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taddon={<Icon name='key' size='x20' />}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tdisabled={!allowPasswordChange || !passwordIsValid}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taria-required={password !== '' ? 'true' : 'false'}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taria-invalid={errors.confirmationPassword ? 'true' : 'false'}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taria-describedby={`${confirmPasswordId}-error`}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t{errors.confirmationPassword && (\\n\\t\\t\\t\\t\\t\\t<FieldError aria-live='assertive' id={`${confirmPasswordId}-error`}>\\n\\t\\t\\t\\t\\t\\t\\t{errors.confirmationPassword.message}\\n\\t\\t\\t\\t\\t\\t</FieldError>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t</FieldGroup>\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default ChangePassword;\\n\",null],\"names\":[\"_extends\",\"Box\",\"Field\",\"FieldError\",\"FieldGroup\",\"FieldHint\",\"FieldLabel\",\"FieldRow\",\"Icon\",\"PasswordInput\",\"useUniqueId\",\"PasswordVerifier\",\"useValidatePassword\",\"useMethod\",\"useToastMessageDispatch\",\"useTranslation\",\"React\",\"Controller\",\"useFormContext\",\"useAllowPasswordChange\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"props\",\"t\",\"dispatchToastMessage\",\"passwordId\",\"confirmPasswordId\",\"passwordVerifierId\",\"watch\",\"formState\",\"errors\",\"handleSubmit\",\"reset\",\"control\",\"password\",\"passwordIsValid\",\"allowPasswordChange\",\"updatePassword\",\"handleSave\",\"_ref\",\"newPassword\",\"type\",\"message\",\"error\",\"createElement\",\"is\",\"autoComplete\",\"onSubmit\",\"htmlFor\",\"name\",\"rules\",\"required\",\"field\",\"validate\",\"length\",\"render\",\"_ref2\",\"_errors$password\",\"id\",\"flexGrow\",\"addon\",\"size\",\"disabled\",\"concat\",\"confirmationPassword\",\"_ref3\",\"_errors$confirmationP\"],\"mappings\":\"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\"}"}