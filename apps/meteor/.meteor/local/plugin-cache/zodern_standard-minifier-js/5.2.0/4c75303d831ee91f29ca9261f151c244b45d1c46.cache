{"code":"function module(t,e,n){let i,a,o,r,s,c,u,l,p,d,m,I,g,y,A,k,v;n.link(\"@babel/runtime/helpers/objectSpread2\",{default(t){i=t}},0),n.export({useAppActionButtons:()=>B,useMessageboxAppsActionButtons:()=>x,useUserDropdownAppsActionButtons:()=>b,useMessageActionAppsActionButtons:()=>h}),n.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedCallback(t){a=t}},0),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint(t){o=t},useStream(t){r=t},useToastMessageDispatch(t){s=t},useUserId(t){c=t}},1),n.link(\"@tanstack/react-query\",{useQuery(t){u=t},useQueryClient(t){l=t}},2),n.link(\"react\",{useEffect(t){p=t},useMemo(t){d=t}},3),n.link(\"react-i18next\",{useTranslation(t){m=t}},4),n.link(\"../../app/ui-message/client/UiKitTriggerTimeoutError\",{UiKitTriggerTimeoutError(t){I=t}},5),n.link(\"../../ee/lib/misc/Utilities\",{Utilities(t){g=t}},6),n.link(\"../uikit/hooks/useUiKitActionManager\",{useUiKitActionManager(t){y=t}},7),n.link(\"./useApplyButtonFilters\",{useApplyButtonFilters(t){A=t},useApplyButtonAuthFilter(t){k=t}},8),n.link(\"./useFilterActions\",{useFilterActionsByContext(t){v=t}},9);let f=t=>{let{appId:e,actionId:n}=t;return\"\".concat(e,\"/\").concat(n)},B=t=>{let e=l(),n=r(\"apps\"),s=c(),d=o(\"GET\",\"/apps/actionButtons\"),m=u([\"apps\",\"actionButtons\"],()=>d(),i(i({},t&&{select:e=>e.filter(e=>e.context===t)}),{},{staleTime:1/0})),I=a(()=>{e.invalidateQueries([\"apps\",\"actionButtons\"])},100,[]);return p(()=>{if(s)return n(\"apps\",t=>{let[e]=t;[\"actions/changed\"].includes(e)&&I()})},[s,n,I]),m},x=()=>{let t=B(\"messageBoxAction\"),e=y(),n=s(),{t:a}=m(),o=A(),r=d(()=>{var i;return null===(i=t.data)||void 0===i?void 0:i.filter(t=>o(t)).map(t=>{let i={id:f(t),label:g.getI18nKeyForApp(t.labelI18n,t.appId),action:i=>{var o,r;e.emitInteraction(t.appId,{type:\"actionButton\",rid:i.rid,tmid:i.tmid,actionId:t.actionId,payload:{context:t.context,message:null!==(o=null===(r=i.chat.composer)||void 0===r?void 0:r.text)&&void 0!==o?o:\"\"}}).catch(async t=>{if(t instanceof I){n({type:\"error\",message:a(\"UIKit_Interaction_Timeout\")});return}return t})}};return i})},[e,o,n,t.data,a]);return i(i({},t),{},{data:r})},b=()=>{let t=B(\"userDropdownAction\"),e=y(),n=s(),{t:a}=m(),o=k(),r=d(()=>{var i;return null===(i=t.data)||void 0===i?void 0:i.filter(t=>o(t)).map(t=>({id:\"\".concat(t.appId,\"_\").concat(t.actionId),content:t.labelI18n,onClick:()=>{e.emitInteraction(t.appId,{type:\"actionButton\",actionId:t.actionId,payload:{context:t.context}}).catch(async t=>{if(t instanceof I){n({type:\"error\",message:a(\"UIKit_Interaction_Timeout\")});return}return t})}}))},[e,o,n,t.data,a]);return i(i({},t),{},{data:r})},h=(t,e)=>{let n=B(\"messageAction\"),a=y(),o=A(e),r=s(),{t:c}=m(),u=v(t),l=d(()=>{var t;return null===(t=n.data)||void 0===t?void 0:t.filter(t=>!!u(t)&&o(t)).map(t=>{let e={icon:void 0,id:f(t),label:g.getI18nKeyForApp(t.labelI18n,t.appId),order:7,type:\"apps\",variant:t.variant,action:(e,n)=>{a.emitInteraction(t.appId,{type:\"actionButton\",rid:n.message.rid,tmid:n.message.tmid,mid:n.message._id,actionId:t.actionId,payload:{context:t.context}}).catch(async t=>{if(t instanceof I){r({type:\"error\",message:c(\"UIKit_Interaction_Timeout\")});return}return t})}};return e})},[a,o,r,u,n.data,c]);return i(i({},n),{},{data:l})}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useAppActionButtons.ts\",\"<anon>\"],\"sourcesContent\":[\"import { type IUIActionButton, type UIActionButtonContext } from '@rocket.chat/apps-engine/definition/ui';\\nimport { useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\\nimport type { GenericMenuItemProps } from '@rocket.chat/ui-client';\\nimport { useEndpoint, useStream, useToastMessageDispatch, useUserId } from '@rocket.chat/ui-contexts';\\nimport type { UseQueryResult } from '@tanstack/react-query';\\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\\nimport { useEffect, useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { UiKitTriggerTimeoutError } from '../../app/ui-message/client/UiKitTriggerTimeoutError';\\nimport type { MessageActionConfig, MessageActionContext } from '../../app/ui-utils/client/lib/MessageAction';\\nimport type { MessageBoxAction } from '../../app/ui-utils/client/lib/messageBox';\\nimport { Utilities } from '../../ee/lib/misc/Utilities';\\nimport { useUiKitActionManager } from '../uikit/hooks/useUiKitActionManager';\\nimport { useApplyButtonFilters, useApplyButtonAuthFilter } from './useApplyButtonFilters';\\nimport { useFilterActionsByContext } from './useFilterActions';\\n\\nconst getIdForActionButton = ({ appId, actionId }: IUIActionButton): string => `${appId}/${actionId}`;\\n\\nexport const useAppActionButtons = <TContext extends `${UIActionButtonContext}`>(context?: TContext) => {\\n\\tconst queryClient = useQueryClient();\\n\\n\\tconst apps = useStream('apps');\\n\\tconst uid = useUserId();\\n\\n\\tconst getActionButtons = useEndpoint('GET', '/apps/actionButtons');\\n\\n\\tconst result = useQuery(['apps', 'actionButtons'], () => getActionButtons(), {\\n\\t\\t...(context && {\\n\\t\\t\\tselect: (data) =>\\n\\t\\t\\t\\tdata.filter(\\n\\t\\t\\t\\t\\t(\\n\\t\\t\\t\\t\\t\\tbutton,\\n\\t\\t\\t\\t\\t): button is IUIActionButton & {\\n\\t\\t\\t\\t\\t\\tcontext: UIActionButtonContext extends infer X ? (X extends TContext ? X : never) : never;\\n\\t\\t\\t\\t\\t} => button.context === context,\\n\\t\\t\\t\\t),\\n\\t\\t}),\\n\\t\\tstaleTime: Infinity,\\n\\t});\\n\\n\\tconst invalidate = useDebouncedCallback(\\n\\t\\t() => {\\n\\t\\t\\tqueryClient.invalidateQueries(['apps', 'actionButtons']);\\n\\t\\t},\\n\\t\\t100,\\n\\t\\t[],\\n\\t);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!uid) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\treturn apps('apps', ([key]) => {\\n\\t\\t\\tif (['actions/changed'].includes(key)) {\\n\\t\\t\\t\\tinvalidate();\\n\\t\\t\\t}\\n\\t\\t});\\n\\t}, [uid, apps, invalidate]);\\n\\n\\treturn result;\\n};\\n\\nexport const useMessageboxAppsActionButtons = () => {\\n\\tconst result = useAppActionButtons('messageBoxAction');\\n\\tconst actionManager = useUiKitActionManager();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst { t } = useTranslation();\\n\\n\\tconst applyButtonFilters = useApplyButtonFilters();\\n\\n\\tconst data = useMemo(\\n\\t\\t() =>\\n\\t\\t\\tresult.data\\n\\t\\t\\t\\t?.filter((action) => {\\n\\t\\t\\t\\t\\treturn applyButtonFilters(action);\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.map((action) => {\\n\\t\\t\\t\\t\\tconst item: Omit<MessageBoxAction, 'icon'> = {\\n\\t\\t\\t\\t\\t\\tid: getIdForActionButton(action),\\n\\t\\t\\t\\t\\t\\tlabel: Utilities.getI18nKeyForApp(action.labelI18n, action.appId),\\n\\t\\t\\t\\t\\t\\taction: (params) => {\\n\\t\\t\\t\\t\\t\\t\\tvoid actionManager\\n\\t\\t\\t\\t\\t\\t\\t\\t.emitInteraction(action.appId, {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttype: 'actionButton',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\trid: params.rid,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttmid: params.tmid,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tactionId: action.actionId,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tpayload: { context: action.context, message: params.chat.composer?.text ?? '' },\\n\\t\\t\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t\\t\\t.catch(async (reason) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif (reason instanceof UiKitTriggerTimeoutError) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmessage: t('UIKit_Interaction_Timeout'),\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\treturn reason;\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t};\\n\\n\\t\\t\\t\\t\\treturn item;\\n\\t\\t\\t\\t}),\\n\\t\\t[actionManager, applyButtonFilters, dispatchToastMessage, result.data, t],\\n\\t);\\n\\treturn {\\n\\t\\t...result,\\n\\t\\tdata,\\n\\t} as UseQueryResult<MessageBoxAction[]>;\\n};\\n\\nexport const useUserDropdownAppsActionButtons = () => {\\n\\tconst result = useAppActionButtons('userDropdownAction');\\n\\tconst actionManager = useUiKitActionManager();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst { t } = useTranslation();\\n\\n\\tconst applyButtonFilters = useApplyButtonAuthFilter();\\n\\n\\tconst data = useMemo(\\n\\t\\t() =>\\n\\t\\t\\tresult.data\\n\\t\\t\\t\\t?.filter((action) => {\\n\\t\\t\\t\\t\\treturn applyButtonFilters(action);\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.map((action) => {\\n\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\tid: `${action.appId}_${action.actionId}`,\\n\\t\\t\\t\\t\\t\\t// icon: action.icon as GenericMenuItemProps['icon'],\\n\\t\\t\\t\\t\\t\\tcontent: action.labelI18n,\\n\\t\\t\\t\\t\\t\\tonClick: () => {\\n\\t\\t\\t\\t\\t\\t\\tvoid actionManager\\n\\t\\t\\t\\t\\t\\t\\t\\t.emitInteraction(action.appId, {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttype: 'actionButton',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tactionId: action.actionId,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tpayload: { context: action.context },\\n\\t\\t\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t\\t\\t.catch(async (reason) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif (reason instanceof UiKitTriggerTimeoutError) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmessage: t('UIKit_Interaction_Timeout'),\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\treturn reason;\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t}),\\n\\t\\t[actionManager, applyButtonFilters, dispatchToastMessage, result.data, t],\\n\\t);\\n\\treturn {\\n\\t\\t...result,\\n\\t\\tdata,\\n\\t} as UseQueryResult<GenericMenuItemProps[]>;\\n};\\n\\nexport const useMessageActionAppsActionButtons = (context?: MessageActionContext, category?: string) => {\\n\\tconst result = useAppActionButtons('messageAction');\\n\\tconst actionManager = useUiKitActionManager();\\n\\tconst applyButtonFilters = useApplyButtonFilters(category);\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst { t } = useTranslation();\\n\\tconst filterActionsByContext = useFilterActionsByContext(context);\\n\\tconst data = useMemo(\\n\\t\\t() =>\\n\\t\\t\\tresult.data\\n\\t\\t\\t\\t?.filter((action) => {\\n\\t\\t\\t\\t\\tif (!filterActionsByContext(action)) {\\n\\t\\t\\t\\t\\t\\treturn false;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\treturn applyButtonFilters(action);\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.map((action) => {\\n\\t\\t\\t\\t\\tconst item: MessageActionConfig = {\\n\\t\\t\\t\\t\\t\\ticon: undefined as any,\\n\\t\\t\\t\\t\\t\\tid: getIdForActionButton(action),\\n\\t\\t\\t\\t\\t\\tlabel: Utilities.getI18nKeyForApp(action.labelI18n, action.appId),\\n\\t\\t\\t\\t\\t\\torder: 7,\\n\\t\\t\\t\\t\\t\\ttype: 'apps',\\n\\t\\t\\t\\t\\t\\tvariant: action.variant,\\n\\t\\t\\t\\t\\t\\taction: (_, params) => {\\n\\t\\t\\t\\t\\t\\t\\tvoid actionManager\\n\\t\\t\\t\\t\\t\\t\\t\\t.emitInteraction(action.appId, {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttype: 'actionButton',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\trid: params.message.rid,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttmid: params.message.tmid,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tmid: params.message._id,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tactionId: action.actionId,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tpayload: { context: action.context },\\n\\t\\t\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t\\t\\t.catch(async (reason) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif (reason instanceof UiKitTriggerTimeoutError) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmessage: t('UIKit_Interaction_Timeout'),\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\treturn reason;\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t};\\n\\n\\t\\t\\t\\t\\treturn item;\\n\\t\\t\\t\\t}),\\n\\t\\t[actionManager, applyButtonFilters, dispatchToastMessage, filterActionsByContext, result.data, t],\\n\\t);\\n\\treturn {\\n\\t\\t...result,\\n\\t\\tdata,\\n\\t} as UseQueryResult<MessageActionConfig[]>;\\n};\\n\",null],\"names\":[\"_objectSpread\",\"useDebouncedCallback\",\"useEndpoint\",\"useStream\",\"useToastMessageDispatch\",\"useUserId\",\"useQuery\",\"useQueryClient\",\"useEffect\",\"useMemo\",\"useTranslation\",\"UiKitTriggerTimeoutError\",\"Utilities\",\"useUiKitActionManager\",\"useApplyButtonFilters\",\"useApplyButtonAuthFilter\",\"useFilterActionsByContext\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useAppActionButtons\",\"useMessageboxAppsActionButtons\",\"useUserDropdownAppsActionButtons\",\"useMessageActionAppsActionButtons\",\"getIdForActionButton\",\"_ref\",\"appId\",\"actionId\",\"concat\",\"context\",\"queryClient\",\"apps\",\"uid\",\"getActionButtons\",\"result\",\"select\",\"data\",\"filter\",\"button\",\"staleTime\",\"Infinity\",\"invalidate\",\"invalidateQueries\",\"_ref2\",\"key\",\"includes\",\"actionManager\",\"dispatchToastMessage\",\"t\",\"applyButtonFilters\",\"_result$data\",\"action\",\"map\",\"item\",\"id\",\"label\",\"getI18nKeyForApp\",\"labelI18n\",\"params\",\"_params$chat$composer\",\"_params$chat$composer2\",\"emitInteraction\",\"type\",\"rid\",\"tmid\",\"payload\",\"message\",\"chat\",\"composer\",\"text\",\"catch\",\"reason\",\"_result$data2\",\"content\",\"onClick\",\"category\",\"filterActionsByContext\",\"_result$data3\",\"icon\",\"undefined\",\"order\",\"variant\",\"_\",\"mid\",\"_id\"],\"mappings\":\"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\"}"}