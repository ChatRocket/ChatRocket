{"code":"function module(e,n,t){t.link(\"react\",{default:function(e){i=e},lazy:function(e){u=e}},0),t.link(\"../../app/authorization/client\",{hasAllPermission:function(e){a=e}},1),t.link(\"../lib/appLayout\",{appLayout:function(e){o=e}},2),t.link(\"../lib/onToggledFeature\",{onToggledFeature:function(e){l=e}},3),t.link(\"../providers/RouterProvider\",{router:function(e){r=e}},4),t.link(\"../views/notAuthorized/NotAuthorizedPage\",{default:function(e){c=e}},5),t.link(\"../views/root/MainLayout\",{default:function(e){d=e}},6);var i,u,a,o,l,r,c,d,m,f=u(function(){return t.dynamicImport(\"../views/audit/AuditPage\")}),p=u(function(){return t.dynamicImport(\"../views/audit/AuditLogPage\")}),s=function(e){var n=e.children,t=e.permission,u=a(t);return i.createElement(i.Fragment,null,u?n:i.createElement(c,null))};l(\"auditing\",{up:function(){m=r.defineRoutes([{path:\"/audit/:tab?\",id:\"audit-home\",element:o.wrap(i.createElement(d,null,i.createElement(s,{permission:\"can-audit\"},i.createElement(f,null))))},{path:\"/audit-log\",id:\"audit-log\",element:o.wrap(i.createElement(d,null,i.createElement(s,{permission:\"can-audit-log\"},i.createElement(p,null))))}])},down:function(){m()}})}","map":"{\"version\":3,\"sources\":[\"client/startup/audit.tsx\",\"<anon>\"],\"sourcesContent\":[\"import React, { lazy } from 'react';\\n\\nimport { hasAllPermission } from '../../app/authorization/client';\\nimport { appLayout } from '../lib/appLayout';\\nimport { onToggledFeature } from '../lib/onToggledFeature';\\nimport { router } from '../providers/RouterProvider';\\nimport NotAuthorizedPage from '../views/notAuthorized/NotAuthorizedPage';\\nimport MainLayout from '../views/root/MainLayout';\\n\\nconst AuditPage = lazy(() => import('../views/audit/AuditPage'));\\nconst AuditLogPage = lazy(() => import('../views/audit/AuditLogPage'));\\n\\ndeclare module '@rocket.chat/ui-contexts' {\\n\\tinterface IRouterPaths {\\n\\t\\t'audit-home': {\\n\\t\\t\\tpathname: '/audit';\\n\\t\\t\\tpattern: '/audit/:tab?';\\n\\t\\t};\\n\\t\\t'audit-log': {\\n\\t\\t\\tpathname: '/audit-log';\\n\\t\\t\\tpattern: '/audit-log';\\n\\t\\t};\\n\\t}\\n}\\n\\nconst PermissionGuard = ({ children, permission }: { children: React.ReactNode; permission: string }) => {\\n\\tconst canView = hasAllPermission(permission);\\n\\n\\treturn <>{canView ? children : <NotAuthorizedPage />}</>;\\n};\\n\\nlet unregisterAuditRoutes: () => void;\\n\\nonToggledFeature('auditing', {\\n\\tup: () => {\\n\\t\\tunregisterAuditRoutes = router.defineRoutes([\\n\\t\\t\\t{\\n\\t\\t\\t\\tpath: '/audit/:tab?',\\n\\t\\t\\t\\tid: 'audit-home',\\n\\t\\t\\t\\telement: appLayout.wrap(\\n\\t\\t\\t\\t\\t<MainLayout>\\n\\t\\t\\t\\t\\t\\t<PermissionGuard permission='can-audit'>\\n\\t\\t\\t\\t\\t\\t\\t<AuditPage />\\n\\t\\t\\t\\t\\t\\t</PermissionGuard>\\n\\t\\t\\t\\t\\t</MainLayout>,\\n\\t\\t\\t\\t),\\n\\t\\t\\t},\\n\\t\\t\\t{\\n\\t\\t\\t\\tpath: '/audit-log',\\n\\t\\t\\t\\tid: 'audit-log',\\n\\t\\t\\t\\telement: appLayout.wrap(\\n\\t\\t\\t\\t\\t<MainLayout>\\n\\t\\t\\t\\t\\t\\t<PermissionGuard permission='can-audit-log'>\\n\\t\\t\\t\\t\\t\\t\\t<AuditLogPage />\\n\\t\\t\\t\\t\\t\\t</PermissionGuard>\\n\\t\\t\\t\\t\\t</MainLayout>,\\n\\t\\t\\t\\t),\\n\\t\\t\\t},\\n\\t\\t]);\\n\\t},\\n\\tdown: () => {\\n\\t\\tunregisterAuditRoutes();\\n\\t},\\n});\\n\",null],\"names\":[\"module\",\"link\",\"v\",\"React\",\"lazy\",\"hasAllPermission\",\"appLayout\",\"onToggledFeature\",\"router\",\"NotAuthorizedPage\",\"MainLayout\",\"unregisterAuditRoutes\",\"AuditPage\",\"dynamicImport\",\"AuditLogPage\",\"PermissionGuard\",\"_ref\",\"children\",\"permission\",\"canView\",\"createElement\",\"Fragment\",\"up\",\"defineRoutes\",\"path\",\"id\",\"element\",\"wrap\",\"down\"],\"mappings\":\"uBAAcA,EAAQC,IAAA,CAAA,QAAa,CAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,EAAAE,KAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iCAAA,CAAAI,iBAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,mBAAA,CAAAK,UAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,0BAAA,CAAAM,iBAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,8BAAA,CAAAO,OAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2CAAA,CAAA,QAAA,SAAAC,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2BAAA,CAAA,QAAA,SAAAC,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GASpC,IATAC,EAAOC,EAA6BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EA+BhCC,EAtBEC,EAAYR,EAAK,WAAA,OAAMJ,EAAAa,aAAA,CAAO,2BAA2B,GACzDC,EAAeV,EAAK,WAAA,OAAMJ,EAAAa,aAAA,CAAO,8BAA8B,GAe/DE,EAAkB,SAAAC,CAAA,EAAgF,IAA7EC,EAAQD,EAARC,QAAQ,CAAEC,EAAUF,EAAVE,UAAU,CACxCC,EAAUd,EAAiBa,GAEjC,OAAOf,EAAAiB,aAAA,CAAAjB,EAAAkB,QAAA,CAAA,KAAGF,EAAUF,EAAWd,EAAAiB,aAAA,CAACX,EAAiB,MAClD,EAIAF,EAAiB,WAAY,CAC5Be,GAAI,WACHX,EAAwBH,EAAOe,YAAY,CAAC,CAC3C,CACCC,KAAM,eACNC,GAAI,aACJC,QAASpB,EAAUqB,IAAI,CACtBxB,EAAAiB,aAAA,CAACV,EAAU,KACVP,EAAAiB,aAAA,CAACL,EAAe,CAACG,WAAW,WAAW,EACtCf,EAAAiB,aAAA,CAACR,EAAS,UAKd,CACCY,KAAM,aACNC,GAAI,YACJC,QAASpB,EAAUqB,IAAI,CACtBxB,EAAAiB,aAAA,CAACV,EAAU,KACVP,EAAAiB,aAAA,CAACL,EAAe,CAACG,WAAW,eAAe,EAC1Cf,EAAAiB,aAAA,CAACN,EAAY,UAKjB,CACF,EACAc,KAAM,WACLjB,GACD\"}"}