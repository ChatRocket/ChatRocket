{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),t.export({useResetE2EEKeyAction:function(){return d}}),t.link(\"@rocket.chat/ui-contexts\",{useSetModal:function(e){s=e},usePermission:function(e){c=e},useEndpoint:function(e){o=e},useTranslation:function(e){u=e},useToastMessageDispatch:function(e){i=e}},0),t.link(\"react\",{default:function(e){a=e},useCallback:function(e){f=e}},1),t.link(\"../../../../components/GenericModal\",{default:function(e){l=e}},2);var r,s,c,o,u,i,a,f,l,d=function(e){var n=u(),t=s(),d=i(),p=c(\"edit-other-user-e2ee\"),E=o(\"POST\",\"/v1/users.resetE2EKey\"),m=f(function(){return r.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,r.awrap(E({userId:e}));case 3:d({type:\"success\",message:n(\"Users_key_has_been_reset\")}),s.next=9;break;case 6:s.prev=6,s.t0=s.catch(0),d({type:\"error\",message:s.t0});case 9:return s.prev=9,t(),s.finish(9);case 12:case\"end\":return s.stop()}},null,null,[[0,6,9,12]],Promise)},[E,t,n,e,d]),_=f(function(){t(a.createElement(l,{variant:\"danger\",onConfirm:m,onCancel:function(){return t()},confirmText:n(\"Reset\")},n(\"E2E_Reset_Other_Key_Warning\")))},[m,n,t]);return p?{icon:\"key\",label:n(\"Reset_E2E_Key\"),action:_}:void 0}}","map":"{\"version\":3,\"sources\":[\"client/views/admin/users/hooks/useResetE2EEKeyAction.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { useSetModal, usePermission, useEndpoint, useTranslation, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport React, { useCallback } from 'react';\\n\\nimport GenericModal from '../../../../components/GenericModal';\\nimport type { Action } from '../../../hooks/useActionSpread';\\n\\nexport const useResetE2EEKeyAction = (userId: IUser['_id']): Action | undefined => {\\n\\tconst t = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst canResetE2EEKey = usePermission('edit-other-user-e2ee');\\n\\tconst resetE2EEKeyRequest = useEndpoint('POST', '/v1/users.resetE2EKey');\\n\\n\\tconst resetE2EEKey = useCallback(async () => {\\n\\t\\ttry {\\n\\t\\t\\tawait resetE2EEKeyRequest({ userId });\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Users_key_has_been_reset') });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t} finally {\\n\\t\\t\\tsetModal();\\n\\t\\t}\\n\\t}, [resetE2EEKeyRequest, setModal, t, userId, dispatchToastMessage]);\\n\\n\\tconst confirmResetE2EEKey = useCallback(() => {\\n\\t\\tsetModal(\\n\\t\\t\\t<GenericModal variant='danger' onConfirm={resetE2EEKey} onCancel={(): void => setModal()} confirmText={t('Reset')}>\\n\\t\\t\\t\\t{t('E2E_Reset_Other_Key_Warning')}\\n\\t\\t\\t</GenericModal>,\\n\\t\\t);\\n\\t}, [resetE2EEKey, t, setModal]);\\n\\n\\treturn canResetE2EEKey\\n\\t\\t? {\\n\\t\\t\\t\\ticon: 'key',\\n\\t\\t\\t\\tlabel: t('Reset_E2E_Key'),\\n\\t\\t\\t\\taction: confirmResetE2EEKey,\\n\\t\\t  }\\n\\t\\t: undefined;\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"export\",\"useResetE2EEKeyAction\",\"useSetModal\",\"usePermission\",\"useEndpoint\",\"useTranslation\",\"useToastMessageDispatch\",\"React\",\"useCallback\",\"GenericModal\",\"userId\",\"t\",\"setModal\",\"dispatchToastMessage\",\"canResetE2EEKey\",\"resetE2EEKeyRequest\",\"resetE2EEKey\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"type\",\"message\",\"t0\",\"finish\",\"stop\",\"Promise\",\"confirmResetE2EEKey\",\"createElement\",\"variant\",\"onConfirm\",\"onCancel\",\"confirmText\",\"icon\",\"label\",\"action\",\"undefined\"],\"mappings\":\"uBACsBA,EAAAC,IAAa,CAAA,6BAA6B,CAAEC,QAAA,SAAAC,CAAA,EAAAC,EAA+BD,CAAA,CAAA,EAAA,GAAjGH,EAAOK,MAAE,CAAA,CAAAC,sBAA4B,WAAW,OAAEA,CAAgB,CAAA,GAA0DN,EAAAC,IAAA,CAAA,2BAAA,CAAAM,YAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,EAAAK,cAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,EAAAM,YAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,EAAAO,eAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,EAAAQ,wBAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAS,EAAAT,CAAA,EAAAU,YAAA,SAAAV,CAAA,EAAAU,EAAAV,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sCAAA,CAAA,QAAA,SAAAE,CAAA,EAAAW,EAAAX,CAAA,CAAA,EAAA,GAMrH,IANPC,EAAkEG,EAAyBC,EAAMC,EAAAC,EAA2BC,EAAAC,EAAAC,EAAAC,EAM/GR,EAAwB,SAACS,CAAoB,EACzD,IAAMC,EAAIN,IACJO,EAAWV,IACXW,EAAuBP,IACvBQ,EAAkBX,EAAc,wBAChCY,EAAsBX,EAAY,OAAQ,yBAE1CY,EAAeR,EAAY,WAAA,OAAAT,EAAAkB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAArB,EAAAsB,KAAA,CAEzBN,EAAoB,CAAEL,OAAAA,CAAM,GAAG,MAAA,EACrCG,EAAqB,CAAES,KAAM,UAAWC,QAASZ,EAAE,2BAA2B,GAAIO,EAAAE,IAAA,CAAA,EAAA,KAAA,MAAA,EAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAM,EAAA,CAAAN,EAAA,KAAA,CAAA,GAElFL,EAAqB,CAAES,KAAM,QAASC,QAAOL,EAAAM,EAAAA,AAAO,EAAI,MAAA,EAE7C,OAF6CN,EAAAC,IAAA,CAAA,EAExDP,IAAWM,EAAAO,MAAA,CAAA,EAAA,MAAA,GAAA,IAAA,MAAA,OAAAP,EAAAQ,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,EAAA,EAAA,GAAA,CAAA,CAAAC,QAAA,EAEV,CAACZ,EAAqBH,EAAUD,EAAGD,EAAQG,EAAqB,EAE7De,EAAsBpB,EAAY,WACvCI,EACCL,EAAAsB,aAAA,CAACpB,EAAY,CAACqB,QAAQ,SAASC,UAAWf,EAAcgB,SAAU,WAAA,OAAYpB,GAAU,EAAEqB,YAAatB,EAAE,QAAS,EAChHA,EAAE,gCAGN,EAAG,CAACK,EAAcL,EAAGC,EAAS,EAE9B,OAAOE,EACJ,CACAoB,KAAM,MACNC,MAAOxB,EAAE,iBACTyB,OAAQR,GAERS,KAAAA,CACJ\"}"}