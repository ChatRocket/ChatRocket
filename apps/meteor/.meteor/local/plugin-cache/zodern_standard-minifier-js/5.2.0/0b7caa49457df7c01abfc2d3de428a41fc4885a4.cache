{"code":"Package[\"core-runtime\"].queue(\"reload\",function(){var e,o=Package.meteor.Meteor;Package.meteor.global,Package.meteor.meteorEnv;var t=Package.modules.meteorInstall;return Package.promise.Promise,{export:function(){return{Reload:e}},require:t({node_modules:{meteor:{reload:{\"reload.js\":function e(e,t,r){let a;r.export({Reload:()=>n});let n={},i=o.settings&&o.settings.public&&o.settings.public.packages&&o.settings.public.packages.reload||{};function l(e,o){i.debug&&console.log(\"[reload] \".concat(e),JSON.stringify(o))}let d=\"Meteor_Reload\",s={},c=null;try{(c=window.sessionStorage)?(c.setItem(\"__dummy__\",\"1\"),c.removeItem(\"__dummy__\")):c=null}catch(e){c=null}n._getData=function(){return c&&c.getItem(d)},c&&(a=n._getData(),c.removeItem(d)),a||(a=\"{}\");let u={};try{u=JSON.parse(a),\"object\"!=typeof u&&(o._debug(\"Got bad data on reload. Ignoring.\"),u={})}catch(e){o._debug(\"Got invalid JSON on reload. Ignoring.\")}u.reload&&\"object\"==typeof u.data&&(s=u.data);let g=[];n._onMigrate=function(e,o){l(\"_onMigrate\",{name:e}),o||(o=e,e=void 0,l(\"_onMigrate no callback\")),g.push({name:e,callback:o})},n._migrationData=function(e){return l(\"_migrationData\",{name:e}),s[e]};let m=function(e,o){l(\"pollProviders\",{options:o}),e=e||function(){},o=o||{};let{immediateMigration:t}=o;l(\"pollProviders is \".concat(t?\"\":\"NOT \",\"immediateMigration\"),{options:o});let r={},a=!0;return(g.forEach(t=>{let{callback:n,name:i}=t||{},[d,s]=n(e,o)||[];l(\"pollProviders provider \".concat(i||\"unknown\",\" is \").concat(d?\"ready\":\"NOT ready\"),{options:o}),d||(a=!1),void 0!==s&&i&&(r[i]=s)}),a)?(l(\"pollProviders allReady\",{options:o,migrationData:r}),r):t?(l(\"pollProviders immediateMigration\",{options:o,migrationData:r}),r):null};n._migrate=function(e,t){let r;l(\"_migrate\",{options:t});let a=m(e,t);if(null===a)return!1;try{r=JSON.stringify({data:a,reload:!0})}catch(e){throw o._debug(\"Couldn't serialize data for migration\",a),e}if(c)try{c.setItem(d,r)}catch(e){o._debug(\"Couldn't save data for migration to sessionStorage\",e)}else o._debug(\"Browser does not support sessionStorage. Not saving migration state.\");return!0},n._withFreshProvidersForTest=function(e){let o=g.slice(0);g=[];try{e()}finally{g=o}};let f=!1;n._reload=function(e){if(l(\"_reload\",{options:e}),e=e||{},f){l(\"reloading in progress already\",{options:e});return}function t(){l(\"tryReload\"),setTimeout(a,1)}function r(){if(l(\"forceBrowserReload\"),window.location.hash||window.location.href.endsWith(\"#\")){window.location.reload();return}window.location.replace(window.location.href)}function a(){if(l(\"reload\"),n._migrate(t,e)){if(o.isCordova){WebAppLocalServer.switchToPendingVersion(()=>{r()});return}r()}}f=!0,t()}}}}}},{extensions:[\".js\",\".json\"]}),eagerModulePaths:[\"/node_modules/meteor/reload/reload.js\"],mainModulePath:\"/node_modules/meteor/reload/reload.js\"}});","map":"{\"version\":3,\"sources\":[\"packages/reload/reload.js\",\"<anon>\"],\"sourcesContent\":[\"/**\\n * This code does _NOT_ support hot (session-restoring) reloads on\\n * IE6,7. It only works on browsers with sessionStorage support.\\n *\\n * There are a couple approaches to add IE6,7 support:\\n *\\n * - use IE's \\\"userData\\\" mechanism in combination with window.name.\\n * This mostly works, however the problem is that it can not get to the\\n * data until after DOMReady. This is a problem for us since this API\\n * relies on the data being ready before API users run. We could\\n * refactor using Meteor.startup in all API users, but that might slow\\n * page loads as we couldn't start the stream until after DOMReady.\\n * Here are some resources on this approach:\\n * https://github.com/hugeinc/USTORE.js\\n * http://thudjs.tumblr.com/post/419577524/localstorage-userdata\\n * http://www.javascriptkit.com/javatutors/domstorage2.shtml\\n *\\n * - POST the data to the server, and have the server send it back on\\n * page load. This is nice because it sidesteps all the local storage\\n * compatibility issues, however it is kinda tricky. We can use a unique\\n * token in the URL, then get rid of it with HTML5 pushstate, but that\\n * only works on pushstate browsers.\\n *\\n * This will all need to be reworked entirely when we add server-side\\n * HTML rendering. In that case, the server will need to have access to\\n * the client's session to render properly.\\n */\\n\\n// XXX when making this API public, also expose a flag for the app\\n// developer to know whether a hot code push is happening. This is\\n// useful for apps using `window.onbeforeunload`. See\\n// https://github.com/meteor/meteor/pull/657\\n\\nexport const Reload = {};\\n\\nconst reloadSettings =\\n  (Meteor.settings &&\\n    Meteor.settings.public &&\\n    Meteor.settings.public.packages &&\\n    Meteor.settings.public.packages.reload) ||\\n  {};\\n\\nfunction debug(message, context) {\\n  if (!reloadSettings.debug) {\\n    return;\\n  }\\n  // eslint-disable-next-line no-console\\n  console.log(`[reload] ${message}`, JSON.stringify(context));\\n}\\n\\nconst KEY_NAME = 'Meteor_Reload';\\n\\nlet old_data = {};\\n// read in old data at startup.\\nlet old_json;\\n\\n// This logic for sessionStorage detection is based on browserstate/history.js\\nlet safeSessionStorage = null;\\ntry {\\n  // This throws a SecurityError on Chrome if cookies & localStorage are\\n  // explicitly disabled\\n  //\\n  // On Firefox with dom.storage.enabled set to false, sessionStorage is null\\n  //\\n  // We can't even do (typeof sessionStorage) on Chrome, it throws.  So we rely\\n  // on the throw if sessionStorage == null; the alternative is browser\\n  // detection, but this seems better.\\n  safeSessionStorage = window.sessionStorage;\\n\\n  // Check we can actually use it\\n  if (safeSessionStorage) {\\n    safeSessionStorage.setItem('__dummy__', '1');\\n    safeSessionStorage.removeItem('__dummy__');\\n  } else {\\n    // Be consistently null, for safety\\n    safeSessionStorage = null;\\n  }\\n} catch (e) {\\n  // Expected on chrome with strict security, or if sessionStorage not supported\\n  safeSessionStorage = null;\\n}\\n\\n// Exported for test.\\nReload._getData = function () {\\n  return safeSessionStorage && safeSessionStorage.getItem(KEY_NAME);\\n};\\n\\nif (safeSessionStorage) {\\n  old_json = Reload._getData();\\n  safeSessionStorage.removeItem(KEY_NAME);\\n} else {\\n  // Unsupported browser (IE 6,7) or locked down security settings.\\n  // No session resumption.\\n  // Meteor._debug(\\\"XXX UNSUPPORTED BROWSER/SETTINGS\\\");\\n}\\n\\nif (!old_json) old_json = '{}';\\nlet old_parsed = {};\\ntry {\\n  old_parsed = JSON.parse(old_json);\\n  if (typeof old_parsed !== 'object') {\\n    Meteor._debug('Got bad data on reload. Ignoring.');\\n    old_parsed = {};\\n  }\\n} catch (err) {\\n  Meteor._debug('Got invalid JSON on reload. Ignoring.');\\n}\\n\\nif (old_parsed.reload && typeof old_parsed.data === 'object') {\\n  // Meteor._debug(\\\"Restoring reload data.\\\");\\n  old_data = old_parsed.data;\\n}\\n\\nlet providers = [];\\n\\n////////// External API //////////\\n\\n// Packages that support migration should register themselves by calling\\n// this function. When it's time to migrate, callback will be called\\n// with one argument, the \\\"retry function,\\\" and an optional 'option'\\n// argument (containing a key 'immediateMigration'). If the package\\n// is ready to migrate, it should return [true, data], where data is\\n// its migration data, an arbitrary JSON value (or [true] if it has\\n// no migration data this time). If the package needs more time\\n// before it is ready to migrate, it should return false. Then, once\\n// it is ready to migrating again, it should call the retry\\n// function. The retry function will return immediately, but will\\n// schedule the migration to be retried, meaning that every package\\n// will be polled once again for its migration data. If they are all\\n// ready this time, then the migration will happen. name must be set if there\\n// is migration data. If 'immediateMigration' is set in the options\\n// argument, then it doesn't matter whether the package is ready to\\n// migrate or not; the reload will happen immediately without waiting\\n// (used for OAuth redirect login).\\n//\\nReload._onMigrate = function (name, callback) {\\n  debug('_onMigrate', {name});\\n  if (!callback) {\\n    // name not provided, so first arg is callback.\\n    callback = name;\\n    name = undefined;\\n    debug('_onMigrate no callback');\\n  }\\n\\n  providers.push({name: name, callback: callback});\\n};\\n\\n// Called by packages when they start up.\\n// Returns the object that was saved, or undefined if none saved.\\n//\\nReload._migrationData = function (name) {\\n  debug('_migrationData', {name});\\n  return old_data[name];\\n};\\n\\n// Options are the same as for `Reload._migrate`.\\nconst pollProviders = function (tryReload, options) {\\n  debug('pollProviders', {options});\\n  tryReload = tryReload || function () {\\n  };\\n  options = options || {};\\n\\n  const {immediateMigration} = options;\\n  debug(\\n    `pollProviders is ${immediateMigration ? '' : 'NOT '}immediateMigration`,\\n    {options}\\n  );\\n  const migrationData = {};\\n  let allReady = true;\\n  providers.forEach(p => {\\n    const {callback, name} = p || {};\\n    const [ready, data] = callback(tryReload, options) || [];\\n\\n    debug(\\n      `pollProviders provider ${name || 'unknown'} is ${\\n        ready ? 'ready' : 'NOT ready'\\n      }`,\\n      {options}\\n    );\\n    if (!ready) {\\n      allReady = false;\\n    }\\n\\n    if (data !== undefined && name) {\\n      migrationData[name] = data;\\n    }\\n  });\\n\\n  if (allReady) {\\n    debug('pollProviders allReady', {options, migrationData});\\n    return migrationData;\\n  }\\n\\n  if (immediateMigration) {\\n    debug('pollProviders immediateMigration', {options, migrationData});\\n    return migrationData;\\n  }\\n\\n  return null;\\n};\\n\\n// Options are:\\n//  - immediateMigration: true if the page will be reloaded immediately\\n//    regardless of whether packages report that they are ready or not.\\nReload._migrate = function (tryReload, options) {\\n  debug('_migrate', {options});\\n  // Make sure each package is ready to go, and collect their\\n  // migration data\\n  const migrationData = pollProviders(tryReload, options);\\n  if (migrationData === null) {\\n    return false; // not ready yet..\\n  }\\n\\n  let json;\\n  try {\\n    // Persist the migration data\\n    json = JSON.stringify({\\n      data: migrationData,\\n      reload: true,\\n    });\\n  } catch (err) {\\n    Meteor._debug(\\\"Couldn't serialize data for migration\\\", migrationData);\\n    throw err;\\n  }\\n\\n  if (safeSessionStorage) {\\n    try {\\n      safeSessionStorage.setItem(KEY_NAME, json);\\n    } catch (err) {\\n      // We should have already checked this, but just log - don't throw\\n      Meteor._debug(\\\"Couldn't save data for migration to sessionStorage\\\", err);\\n    }\\n  } else {\\n    Meteor._debug(\\n      'Browser does not support sessionStorage. Not saving migration state.'\\n    );\\n  }\\n\\n  return true;\\n};\\n\\n// Allows tests to isolate the list of providers.\\nReload._withFreshProvidersForTest = function (f) {\\n  const originalProviders = providers.slice(0);\\n  providers = [];\\n  try {\\n    f();\\n  } finally {\\n    providers = originalProviders;\\n  }\\n};\\n\\n// Migrating reload: reload this page (presumably to pick up a new\\n// version of the code or assets), but save the program state and\\n// migrate it over. This function returns immediately. The reload\\n// will happen at some point in the future once all of the packages\\n// are ready to migrate.\\n//\\nlet reloading = false;\\nReload._reload = function (options) {\\n  debug('_reload', {options});\\n  options = options || {};\\n\\n  if (reloading) {\\n    debug('reloading in progress already', {options});\\n    return;\\n  }\\n  reloading = true;\\n\\n  function tryReload() {\\n    debug('tryReload');\\n    setTimeout(reload, 1);\\n  }\\n\\n  function forceBrowserReload() {\\n    debug('forceBrowserReload');\\n    // We'd like to make the browser reload the page using location.replace()\\n    // instead of location.reload(), because this avoids validating assets\\n    // with the server if we still have a valid cached copy. This doesn't work\\n    // when the location contains a hash however, because that wouldn't reload\\n    // the page and just scroll to the hash location instead.\\n    if (window.location.hash || window.location.href.endsWith('#')) {\\n      window.location.reload();\\n      return;\\n    }\\n\\n    window.location.replace(window.location.href);\\n  }\\n\\n  function reload() {\\n    debug('reload');\\n    if (!Reload._migrate(tryReload, options)) {\\n      return;\\n    }\\n\\n    if (Meteor.isCordova) {\\n      WebAppLocalServer.switchToPendingVersion(() => {\\n        forceBrowserReload();\\n      });\\n      return;\\n    }\\n\\n    forceBrowserReload();\\n  }\\n\\n  tryReload();\\n};\\n\",null],\"names\":[\"old_json\",\"module\",\"export\",\"Reload\",\"reloadSettings\",\"Meteor\",\"settings\",\"public\",\"packages\",\"reload\",\"debug\",\"message\",\"context\",\"console\",\"log\",\"concat\",\"JSON\",\"stringify\",\"KEY_NAME\",\"old_data\",\"safeSessionStorage\",\"window\",\"sessionStorage\",\"setItem\",\"removeItem\",\"e\",\"_getData\",\"getItem\",\"old_parsed\",\"parse\",\"_debug\",\"err\",\"data\",\"providers\",\"_onMigrate\",\"name\",\"callback\",\"undefined\",\"push\",\"_migrationData\",\"pollProviders\",\"tryReload\",\"options\",\"immediateMigration\",\"migrationData\",\"allReady\",\"forEach\",\"p\",\"ready\",\"_migrate\",\"json\",\"_withFreshProvidersForTest\",\"f\",\"originalProviders\",\"slice\",\"reloading\",\"_reload\",\"setTimeout\",\"forceBrowserReload\",\"location\",\"hash\",\"href\",\"endsWith\",\"replace\",\"isCordova\",\"WebAppLocalServer\",\"switchToPendingVersion\"],\"mappings\":\"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\"}"}