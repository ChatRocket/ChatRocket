{"code":"function module(e,t,n){let a,i,l,o,d;n.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){a=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){i=e}},0),n.link(\"@rocket.chat/ui-client\",{GenericMenu(e){l=e}},1),n.link(\"react\",{default(e){o=e}},2),n.link(\"react-i18next\",{useTranslation(e){d=e}},3),n.exportDefault(e=>{let{options:t,onChangeMenuVisibility:n,context:c,isMessageEncrypted:s}=e,{t:r}=d(),u=i(),p=t.reduce((e,t)=>{var n,i;let l=a(a({variant:\"alert\"===t.color?\"danger\":\"\",id:t.id,icon:t.icon,content:r(t.label),onClick:t.action,type:t.type},t.disabled&&{disabled:null==t?void 0:null===(n=t.disabled)||void 0===n?void 0:n.call(t,c)}),t.disabled&&(null==t?void 0:null===(i=t.disabled)||void 0===i?void 0:i.call(t,c))&&{tooltip:r(\"Action_not_available_encrypted_content\",{action:r(t.label)})}),o=t.type||\"\",d=e.find(e=>e.id===o);return d||(d={id:o,title:\"\",items:[]},e.push(d)),d.items.push(l),\"apps\"===o&&s&&(d.items=[{content:r(\"Unavailable\"),id:u,disabled:!0,gap:!1,tooltip:r(\"Action_not_available_encrypted_content\",{action:r(\"Apps\")})}]),e},[]);return o.createElement(l,{onOpenChange:n,detached:!0,icon:\"stars\",title:r(\"AI_Actions\"),\"data-qa-id\":\"menu\",\"data-qa-type\":\"message-action-menu\",sections:p,placement:\"bottom-end\"})})}","map":"{\"version\":3,\"sources\":[\"client/components/message/toolbar/MessageToolbarStarsActionMenu.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { GenericMenu, type GenericMenuItemProps } from '@rocket.chat/ui-client';\\nimport type { MouseEvent, ReactElement } from 'react';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport type { MessageActionConditionProps, MessageActionConfig } from '../../../../app/ui-utils/client/lib/MessageAction';\\n\\ntype MessageActionConfigOption = Omit<MessageActionConfig, 'condition' | 'context' | 'order' | 'action'> & {\\n\\taction: (e?: MouseEvent<HTMLElement>) => void;\\n};\\n\\ntype MessageActionSection = {\\n\\tid: string;\\n\\ttitle: string;\\n\\titems: GenericMenuItemProps[];\\n};\\n\\ntype MessageActionMenuProps = {\\n\\tonChangeMenuVisibility: (visible: boolean) => void;\\n\\toptions: MessageActionConfigOption[];\\n\\tcontext: MessageActionConditionProps;\\n\\tisMessageEncrypted: boolean;\\n};\\n\\nconst MessageToolbarStarsActionMenu = ({\\n\\toptions,\\n\\tonChangeMenuVisibility,\\n\\tcontext,\\n\\tisMessageEncrypted,\\n}: MessageActionMenuProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst id = useUniqueId();\\n\\n\\tconst groupOptions = options.reduce((acc, option) => {\\n\\t\\tconst transformedOption = {\\n\\t\\t\\tvariant: option.color === 'alert' ? 'danger' : '',\\n\\t\\t\\tid: option.id,\\n\\t\\t\\ticon: option.icon,\\n\\t\\t\\tcontent: t(option.label),\\n\\t\\t\\tonClick: option.action,\\n\\t\\t\\ttype: option.type,\\n\\t\\t\\t...(option.disabled && { disabled: option?.disabled?.(context) }),\\n\\t\\t\\t...(option.disabled &&\\n\\t\\t\\t\\toption?.disabled?.(context) && { tooltip: t('Action_not_available_encrypted_content', { action: t(option.label) }) }),\\n\\t\\t};\\n\\n\\t\\tconst group = option.type || '';\\n\\t\\tlet section = acc.find((section: { id: string }) => section.id === group);\\n\\n\\t\\tif (!section) {\\n\\t\\t\\tsection = { id: group, title: '', items: [] };\\n\\t\\t\\tacc.push(section);\\n\\t\\t}\\n\\n\\t\\t// Add option to the appropriate section\\n\\t\\tsection.items.push(transformedOption);\\n\\n\\t\\t// Handle the \\\"apps\\\" section if message is encrypted\\n\\t\\tif (group === 'apps' && isMessageEncrypted) {\\n\\t\\t\\tsection.items = [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tcontent: t('Unavailable'),\\n\\t\\t\\t\\t\\tid,\\n\\t\\t\\t\\t\\tdisabled: true,\\n\\t\\t\\t\\t\\tgap: false,\\n\\t\\t\\t\\t\\ttooltip: t('Action_not_available_encrypted_content', { action: t('Apps') }),\\n\\t\\t\\t\\t},\\n\\t\\t\\t];\\n\\t\\t}\\n\\n\\t\\treturn acc;\\n\\t}, [] as MessageActionSection[]);\\n\\n\\treturn (\\n\\t\\t<GenericMenu\\n\\t\\t\\tonOpenChange={onChangeMenuVisibility}\\n\\t\\t\\tdetached\\n\\t\\t\\ticon='stars'\\n\\t\\t\\ttitle={t('AI_Actions')}\\n\\t\\t\\tdata-qa-id='menu'\\n\\t\\t\\tdata-qa-type='message-action-menu'\\n\\t\\t\\tsections={groupOptions}\\n\\t\\t\\tplacement='bottom-end'\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default MessageToolbarStarsActionMenu;\\n\",null],\"names\":[\"_objectSpread\",\"useUniqueId\",\"GenericMenu\",\"React\",\"useTranslation\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"options\",\"onChangeMenuVisibility\",\"context\",\"isMessageEncrypted\",\"t\",\"id\",\"groupOptions\",\"reduce\",\"acc\",\"option\",\"_option$disabled\",\"_option$disabled2\",\"transformedOption\",\"variant\",\"color\",\"icon\",\"content\",\"label\",\"onClick\",\"action\",\"type\",\"disabled\",\"call\",\"tooltip\",\"group\",\"section\",\"find\",\"title\",\"items\",\"push\",\"gap\",\"createElement\",\"onOpenChange\",\"detached\",\"sections\",\"placement\"],\"mappings\":\"2BAAAA,EAAAC,EAA0DC,EAAAC,EAAAC,EAAjDC,EAAaC,IAAM,CAAA,uCAA8B,CAAAC,QAAAC,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAjDH,EAAaC,IAAA,CAAM,8BAA8B,CAAAL,YAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yBAAA,CAAAJ,YAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAF,eAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA1DH,EAAOI,aAAa,CAyBkBC,IAKK,GALJ,CACtCC,QAAAA,CAAO,CACPC,uBAAAA,CAAsB,CACtBC,QAAAA,CAAO,CACPC,mBAAAA,CAAAA,CACwB,CAAAJ,EAClB,CAAEK,EAAAA,CAAAA,CAAG,CAAGX,IACRY,EAAKf,IAELgB,EAAeN,EAAQO,MAAM,CAAC,CAACC,EAAKC,KAAU,IAAAC,EAAAC,EACnD,IAAMC,EAAiBvB,EAAAA,EAAA,CACtBwB,QAASJ,AAAiB,UAAjBA,EAAOK,KAAK,CAAe,SAAW,GAC/CT,GAAII,EAAOJ,EAAE,CACbU,KAAMN,EAAOM,IAAI,CACjBC,QAASZ,EAAEK,EAAOQ,KAAK,EACvBC,QAAST,EAAOU,MAAM,CACtBC,KAAMX,EAAOW,IAAAA,AAAI,EACbX,EAAOY,QAAQ,EAAI,CAAEA,SAAUZ,MAAAA,EAAM,KAAA,EAAA,AAAU,OAAVC,CAAAA,EAAND,EAAQY,QAAQ,AAARA,GAAQX,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAhBA,EAAAY,IAAA,CAAAb,EAAmBP,EAAQ,GAC1DO,EAAOY,QAAQ,EAClBZ,CAAAA,MAAAA,EAAM,KAAA,EAAA,AAAU,OAAVE,CAAAA,EAANF,EAAQY,QAAQ,AAARA,GAAQV,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAhBA,EAAAW,IAAA,CAAAb,EAAmBP,EAAO,GAAK,CAAEqB,QAASnB,EAAE,yCAA0C,CAAEe,OAAQf,EAAEK,EAAOQ,KAAK,CAAC,EAAG,GAG9GO,EAAQf,EAAOW,IAAI,EAAI,GACzBK,EAAUjB,EAAIkB,IAAI,CAAED,GAA4BA,EAAQpB,EAAE,GAAKmB,GAuBnE,OArBKC,IACJA,EAAU,CAAEpB,GAAImB,EAAOG,MAAO,GAAIC,MAAO,EAAA,AAAE,EAC3CpB,EAAIqB,IAAI,CAACJ,IAIVA,EAAQG,KAAK,CAACC,IAAI,CAACjB,GAGL,SAAVY,GAAoBrB,GACvBsB,CAAAA,EAAQG,KAAK,CAAG,CACf,CACCZ,QAASZ,EAAE,eACXC,GAAAA,EACAgB,SAAU,CAAA,EACVS,IAAK,CAAA,EACLP,QAASnB,EAAE,yCAA0C,CAAEe,OAAQf,EAAE,OAAO,IAEzE,AADC,EAIII,CACR,EAAG,EAA4B,EAE/B,OACChB,EAAAuC,aAAA,CAACxC,EAAW,CACXyC,aAAc/B,EACdgC,SAAQ,CAAA,EACRlB,KAAK,QACLY,MAAOvB,EAAE,cACT,aAAW,OACX,eAAa,sBACb8B,SAAU5B,EACV6B,UAAU,YAAY,EAGzB\"}"}