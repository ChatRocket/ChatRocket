{"code":"function module(e,t,l){let r,n,a,c,i,o,m,s,u,d,E,h,p,f,b,k,v;let F=[\"value\"],_=[\"value\"];l.link(\"@babel/runtime/helpers/extends\",{default(e){r=e}},0),l.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){n=e}},1),l.link(\"@rocket.chat/fuselage\",{Field(e){a=e},FieldLabel(e){c=e},FieldRow(e){i=e},FieldError(e){o=e},FieldHint(e){m=e},ToggleSwitch(e){s=e},TextInput(e){u=e},Select(e){d=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){E=e}},1),l.link(\"react\",{default(e){h=e},useMemo(e){p=e}},2),l.link(\"react-hook-form\",{useFormContext(e){f=e},Controller(e){b=e}},3),l.link(\"react-i18next\",{useTranslation(e){k=e}},4),l.link(\"../../hooks/useHasLicenseModule\",{useHasLicenseModule(e){v=e}},5);let g=e=>!!e&&\"\"!==e.trim()&&e.split(\",\").every(e=>/^[a-zA-Z0-9-_ ]+$/.test(e));l.exportDefault(e=>{let{className:t}=e,{t:l}=k(),{control:x,watch:y,formState:{errors:L}}=f(),N=v(\"livechat-enterprise\"),{visibility:S,type:T}=y(),q=p(()=>[[\"input\",l(\"Input\")],[\"select\",l(\"Select\")]],[l]),H=E(),I=E(),M=E(),w=E(),C=E();return N?h.createElement(h.Fragment,null,h.createElement(a,{className:t},h.createElement(i,null,h.createElement(c,{htmlFor:H},l(\"Required\")),h.createElement(b,{name:\"required\",control:x,render:e=>{let{field:{value:t}}=e,l=n(e.field,F);return h.createElement(s,r({id:H},l,{checked:t}))}}))),h.createElement(a,{className:t},h.createElement(c,{htmlFor:I},l(\"Type\")),h.createElement(i,null,h.createElement(b,{name:\"type\",control:x,render:e=>{let{field:t}=e;return h.createElement(d,r({id:I,options:q},t))}}))),h.createElement(a,{className:t},h.createElement(c,{htmlFor:M},l(\"Default_value\")),h.createElement(i,null,h.createElement(b,{name:\"defaultValue\",control:x,render:e=>{let{field:t}=e;return h.createElement(u,r({id:M},t))}}))),h.createElement(a,{className:t},h.createElement(c,{htmlFor:w},l(\"Options\")),h.createElement(i,null,h.createElement(b,{name:\"options\",control:x,rules:{validate:e=>\"select\"!==T||g(e)?void 0:l(\"error-invalid-value\")},render:e=>{let{field:t}=e;return h.createElement(u,r({id:w},t,{disabled:\"input\"===T,\"aria-invalid\":!!(null==L?void 0:L.options),\"aria-describedby\":\"\".concat(w,\"-hint \").concat(w,\"-error\")}))}})),h.createElement(m,{id:\"\".concat(w,\"-hint\")},l(\"Livechat_custom_fields_options_placeholder\")),L.options&&h.createElement(o,{\"aria-live\":\"assertive\",id:\"\".concat(w,\"-error\")},L.options.message)),h.createElement(a,{className:t},h.createElement(i,null,h.createElement(c,{htmlFor:C},l(\"Public\")),h.createElement(b,{name:\"public\",control:x,render:e=>{let{field:{value:t}}=e,l=n(e.field,_);return h.createElement(s,r({id:C},l,{disabled:!S,checked:t,\"aria-describedby\":\"\".concat(C,\"-hint\")}))}})),h.createElement(m,{id:\"\".concat(C,\"-hint\")},l(\"Livechat_custom_fields_public_description\")))):null})}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/additionalForms/CustomFieldsAdditionalForm.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { SelectOption } from '@rocket.chat/fuselage';\\nimport { Field, FieldLabel, FieldRow, FieldError, FieldHint, ToggleSwitch, TextInput, Select } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport type { ComponentProps } from 'react';\\nimport React, { useMemo } from 'react';\\nimport { useFormContext, Controller } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useHasLicenseModule } from '../../hooks/useHasLicenseModule';\\n\\nconst checkIsOptionsValid = (value: string) => {\\n\\tif (!value || value.trim() === '') {\\n\\t\\treturn false;\\n\\t}\\n\\n\\treturn value.split(',').every((v) => /^[a-zA-Z0-9-_ ]+$/.test(v));\\n};\\n\\nconst CustomFieldsAdditionalForm = ({ className }: { className?: ComponentProps<typeof Field>['className'] }) => {\\n\\tconst { t } = useTranslation();\\n\\tconst {\\n\\t\\tcontrol,\\n\\t\\twatch,\\n\\t\\tformState: { errors },\\n\\t} = useFormContext();\\n\\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\\n\\n\\tconst { visibility, type } = watch();\\n\\n\\tconst typeOptions: SelectOption[] = useMemo(\\n\\t\\t() => [\\n\\t\\t\\t['input', t('Input')],\\n\\t\\t\\t['select', t('Select')],\\n\\t\\t],\\n\\t\\t[t],\\n\\t);\\n\\n\\tconst requiredField = useUniqueId();\\n\\tconst typeField = useUniqueId();\\n\\tconst defaultValueField = useUniqueId();\\n\\tconst optionsField = useUniqueId();\\n\\tconst publicField = useUniqueId();\\n\\n\\tif (!hasLicense) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<Field className={className}>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<FieldLabel htmlFor={requiredField}>{t('Required')}</FieldLabel>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tname='required'\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\trender={({ field: { value, ...field } }) => <ToggleSwitch id={requiredField} {...field} checked={value} />}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t</Field>\\n\\t\\t\\t<Field className={className}>\\n\\t\\t\\t\\t<FieldLabel htmlFor={typeField}>{t('Type')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller name='type' control={control} render={({ field }) => <Select id={typeField} options={typeOptions} {...field} />} />\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t</Field>\\n\\t\\t\\t<Field className={className}>\\n\\t\\t\\t\\t<FieldLabel htmlFor={defaultValueField}>{t('Default_value')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller name='defaultValue' control={control} render={({ field }) => <TextInput id={defaultValueField} {...field} />} />\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t</Field>\\n\\t\\t\\t<Field className={className}>\\n\\t\\t\\t\\t<FieldLabel htmlFor={optionsField}>{t('Options')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tname='options'\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\trules={{\\n\\t\\t\\t\\t\\t\\t\\tvalidate: (optionsValue) => (type === 'select' && !checkIsOptionsValid(optionsValue) ? t('error-invalid-value') : undefined),\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\trender={({ field }) => (\\n\\t\\t\\t\\t\\t\\t\\t<TextInput\\n\\t\\t\\t\\t\\t\\t\\t\\tid={optionsField}\\n\\t\\t\\t\\t\\t\\t\\t\\t{...field}\\n\\t\\t\\t\\t\\t\\t\\t\\tdisabled={type === 'input'}\\n\\t\\t\\t\\t\\t\\t\\t\\taria-invalid={Boolean(errors?.options)}\\n\\t\\t\\t\\t\\t\\t\\t\\taria-describedby={`${optionsField}-hint ${optionsField}-error`}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t<FieldHint id={`${optionsField}-hint`}>{t('Livechat_custom_fields_options_placeholder')}</FieldHint>\\n\\t\\t\\t\\t{errors.options && (\\n\\t\\t\\t\\t\\t<FieldError aria-live='assertive' id={`${optionsField}-error`}>\\n\\t\\t\\t\\t\\t\\t{errors.options.message}\\n\\t\\t\\t\\t\\t</FieldError>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</Field>\\n\\t\\t\\t<Field className={className}>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<FieldLabel htmlFor={publicField}>{t('Public')}</FieldLabel>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tname='public'\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\trender={({ field: { value, ...field } }) => (\\n\\t\\t\\t\\t\\t\\t\\t<ToggleSwitch id={publicField} {...field} disabled={!visibility} checked={value} aria-describedby={`${publicField}-hint`} />\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t<FieldHint id={`${publicField}-hint`}>{t('Livechat_custom_fields_public_description')}</FieldHint>\\n\\t\\t\\t</Field>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default CustomFieldsAdditionalForm;\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"Field\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"FieldHint\",\"ToggleSwitch\",\"TextInput\",\"Select\",\"useUniqueId\",\"React\",\"useMemo\",\"useFormContext\",\"Controller\",\"useTranslation\",\"useHasLicenseModule\",\"module\",\"link\",\"default\",\"v\",\"checkIsOptionsValid\",\"value\",\"trim\",\"split\",\"every\",\"test\",\"exportDefault\",\"_ref\",\"className\",\"t\",\"control\",\"watch\",\"formState\",\"errors\",\"hasLicense\",\"visibility\",\"type\",\"typeOptions\",\"requiredField\",\"typeField\",\"defaultValueField\",\"optionsField\",\"publicField\",\"createElement\",\"Fragment\",\"htmlFor\",\"name\",\"render\",\"_ref2\",\"field\",\"_excluded\",\"id\",\"checked\",\"_ref3\",\"options\",\"_ref4\",\"rules\",\"validate\",\"optionsValue\",\"undefined\",\"_ref5\",\"disabled\",\"Boolean\",\"concat\",\"message\",\"_ref6\",\"_excluded2\"],\"mappings\":\"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\"}"}