{"code":"function module(e,t,n){var a,r,o,c,i;n.link(\"@rocket.chat/ui-contexts\",{useRouter:function(e){a=e},useToastMessageDispatch:function(e){r=e},useAbsoluteUrl:function(e){o=e}},0),n.link(\"meteor/meteor\",{Meteor:function(e){c=e}},1),n.link(\"react\",{useEffect:function(e){i=e}},2),n.exportDefault(function(){var e=o()(\"\"),t=a(),n=r();return i(function(){var a=t.getRouteParameters().token,r=t.getSearchParameters().redirectUrl;c.loginWithSamlToken(a,function(a){a&&n({type:\"error\",message:a});var o=decodeURIComponent(r||\"\");if(null!=o&&o.startsWith(e)){var c=new URL(o);t.navigate({pathname:c.pathname,search:Object.fromEntries(c.searchParams.entries())},{replace:!0})}else t.navigate({pathname:\"/home\"},{replace:!0})})},[n,e,t]),null})}","map":"{\"version\":3,\"sources\":[\"client/views/root/SAMLLoginRoute.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { LocationPathname } from '@rocket.chat/ui-contexts';\\nimport { useRouter, useToastMessageDispatch, useAbsoluteUrl } from '@rocket.chat/ui-contexts';\\nimport { Meteor } from 'meteor/meteor';\\nimport { useEffect } from 'react';\\n\\nconst SAMLLoginRoute = () => {\\n\\tconst rootUrl = useAbsoluteUrl()('');\\n\\tconst router = useRouter();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tuseEffect(() => {\\n\\t\\tconst { token } = router.getRouteParameters();\\n\\t\\tconst { redirectUrl } = router.getSearchParameters();\\n\\n\\t\\tMeteor.loginWithSamlToken(token, (error?: unknown) => {\\n\\t\\t\\tif (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst decodedRedirectUrl = decodeURIComponent(redirectUrl || '');\\n\\t\\t\\tif (decodedRedirectUrl?.startsWith(rootUrl)) {\\n\\t\\t\\t\\tconst redirect = new URL(decodedRedirectUrl);\\n\\t\\t\\t\\trouter.navigate(\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\tpathname: redirect.pathname as LocationPathname,\\n\\t\\t\\t\\t\\t\\tsearch: Object.fromEntries(redirect.searchParams.entries()),\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t{ replace: true },\\n\\t\\t\\t\\t);\\n\\t\\t\\t} else {\\n\\t\\t\\t\\trouter.navigate(\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\tpathname: '/home',\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t{ replace: true },\\n\\t\\t\\t\\t);\\n\\t\\t\\t}\\n\\t\\t});\\n\\t}, [dispatchToastMessage, rootUrl, router]);\\n\\n\\treturn null;\\n};\\n\\nexport default SAMLLoginRoute;\\n\",null],\"names\":[\"useRouter\",\"useToastMessageDispatch\",\"useAbsoluteUrl\",\"Meteor\",\"useEffect\",\"module\",\"link\",\"v\",\"exportDefault\",\"rootUrl\",\"router\",\"dispatchToastMessage\",\"token\",\"_router$getRouteParam\",\"getRouteParameters\",\"redirectUrl\",\"_router$getSearchPara\",\"getSearchParameters\",\"loginWithSamlToken\",\"error\",\"type\",\"message\",\"decodedRedirectUrl\",\"decodeURIComponent\",\"startsWith\",\"redirect\",\"URL\",\"navigate\",\"pathname\",\"search\",\"Object\",\"fromEntries\",\"searchParams\",\"entries\",\"replace\"],\"mappings\":\"uBAKA,IAJAA,EAASC,EAAWC,EAA0EC,EAAAC,EAAjDC,EAAcC,IAAE,CAAA,2BAAM,CAA0BN,UAAC,SAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,wBAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,eAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gBAAA,CAAAH,OAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAF,UAAA,SAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAA9FF,EAAOG,aAAa,CAIG,WACtB,IAAMC,EAAUP,IAAiB,IAC3BQ,EAASV,IACTW,EAAuBV,IAgC7B,OA9BAG,EAAU,WACT,IAAQQ,EAAKC,AAAKH,EAAOI,kBAAkB,GAAnCF,KAAK,CACLG,EAAWC,AAAKN,EAAOO,mBAAmB,GAA1CF,WAAW,CAEnBZ,EAAOe,kBAAkB,CAACN,EAAO,SAACO,CAAe,EAC5CA,GACHR,EAAqB,CAAES,KAAM,QAASC,QAASF,CAAK,GAGrD,IAAMG,EAAqBC,mBAAmBR,GAAe,IAC7D,GAAIO,MAAAA,GAAAA,EAAoBE,UAAU,CAACf,GAAU,CAC5C,IAAMgB,EAAW,IAAIC,IAAIJ,GACzBZ,EAAOiB,QAAQ,CACd,CACCC,SAAUH,EAASG,QAA4B,CAC/CC,OAAQC,OAAOC,WAAW,CAACN,EAASO,YAAY,CAACC,OAAO,KAEzD,CAAEC,QAAS,CAAA,CAAI,EAEjB,MACCxB,EAAOiB,QAAQ,CACd,CACCC,SAAU,SAEX,CAAEM,QAAS,CAAA,CAAI,EAGlB,EACD,EAAG,CAACvB,EAAsBF,EAASC,EAAO,EAEnC,IACR\"}"}