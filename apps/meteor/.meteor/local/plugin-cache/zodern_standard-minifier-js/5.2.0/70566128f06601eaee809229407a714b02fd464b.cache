{"code":"function module(e,o,r){let t,i,l,n,u;r.link(\"meteor/meteor\",{Meteor(e){t=e}},0),r.link(\"meteor/tracker\",{Tracker(e){i=e}},1),r.link(\"../../app/ui-utils/client\",{LegacyRoomManager(e){l=e}},2),r.link(\"../lib/rooms/roomCoordinator\",{roomCoordinator(e){n=e}},3),r.link(\"../providers/RouterProvider\",{router(e){u=e}},4),t.startup(()=>{let e;i.autorun(()=>{let o=t.user();if(void 0===e&&(o?o.username:void 0)){e=null==o?void 0:o.username,l.closeAllRooms();let r=u.getRouteName();if(!r)return;n.getRouteNameIdentifier(r)}})})}","map":"{\"version\":3,\"sources\":[\"client/startup/reloadRoomAfterLogin.ts\",\"<anon>\"],\"sourcesContent\":[\"import { Meteor } from 'meteor/meteor';\\nimport { Tracker } from 'meteor/tracker';\\n\\nimport { LegacyRoomManager } from '../../app/ui-utils/client';\\nimport { roomCoordinator } from '../lib/rooms/roomCoordinator';\\nimport { router } from '../providers/RouterProvider';\\n\\nMeteor.startup(() => {\\n\\t// Reload rooms after login\\n\\tlet currentUsername: string | undefined = undefined;\\n\\tTracker.autorun(() => {\\n\\t\\tconst user = Meteor.user();\\n\\t\\tif (currentUsername === undefined && (user ? user.username : undefined)) {\\n\\t\\t\\tcurrentUsername = user?.username;\\n\\t\\t\\tLegacyRoomManager.closeAllRooms();\\n\\t\\t\\t// Reload only if the current route is a channel route\\n\\t\\t\\tconst routeName = router.getRouteName();\\n\\t\\t\\tif (!routeName) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tconst roomType = roomCoordinator.getRouteNameIdentifier(routeName);\\n\\t\\t\\tif (roomType) {\\n\\t\\t\\t\\trouter; // TODO: fix this\\n\\t\\t\\t\\t// router.navigate(0);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t});\\n});\\n\",null],\"names\":[\"Meteor\",\"Tracker\",\"LegacyRoomManager\",\"roomCoordinator\",\"router\",\"module\",\"link\",\"v\",\"startup\",\"currentUsername\",\"autorun\",\"user\",\"undefined\",\"username\",\"closeAllRooms\",\"routeName\",\"getRouteName\",\"getRouteNameIdentifier\"],\"mappings\":\"2BAAAA,EAAuCC,EAAAC,EAAAC,EAAAC,EAA9BC,EAAQC,IAAA,CAAM,gBAAgB,CAAAN,OAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iBAAA,CAAAL,QAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,4BAAA,CAAAJ,kBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,+BAAA,CAAAH,gBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,8BAAA,CAAAF,OAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAOvCP,EAAOQ,OAAO,CAAC,KAEd,IAAIC,EACJR,EAAQS,OAAO,CAAC,KACf,IAAMC,EAAOX,EAAOW,IAAI,GACxB,GAAIF,AAAoBG,KAAAA,IAApBH,GAAkCE,CAAAA,EAAOA,EAAKE,QAAQ,CAAGD,KAAAA,CAAAA,EAAY,CACxEH,EAAkBE,MAAAA,EAAI,KAAA,EAAJA,EAAME,QAAQ,CAChCX,EAAkBY,aAAa,GAE/B,IAAMC,EAAYX,EAAOY,YAAY,GACrC,GAAI,CAACD,EACJ,OAEgBZ,EAAgBc,sBAAsB,CAACF,EAKzD,CACD,EACD\"}"}