{"code":"function module(e,t,n){let i,l,s,o,a,r,c,u,d,k,m,h,b,A,p,E,f,g,S;let U=[\"label\"];n.link(\"@babel/runtime/helpers/extends\",{default(e){i=e}},0),n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){l=e}},1),n.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){s=e}},2),n.link(\"@rocket.chat/fuselage\",{ButtonGroup(e){o=e},Menu(e){a=e},Option(e){r=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useRoute(e){c=e},usePermission(e){u=e},useTranslation(e){d=e}},1),n.link(\"react\",{default(e){k=e},useCallback(e){m=e},useMemo(e){h=e}},2),n.link(\"../../../components/UserInfo\",{UserInfoAction(e){b=e}},3),n.link(\"../../hooks/useActionSpread\",{useActionSpread(e){A=e}},4),n.link(\"./hooks/useChangeAdminStatusAction\",{useChangeAdminStatusAction(e){p=e}},5),n.link(\"./hooks/useChangeUserStatusAction\",{useChangeUserStatusAction(e){E=e}},6),n.link(\"./hooks/useDeleteUserAction\",{useDeleteUserAction(e){f=e}},7),n.link(\"./hooks/useResetE2EEKeyAction\",{useResetE2EEKeyAction(e){g=e}},8),n.link(\"./hooks/useResetTOTPAction\",{useResetTOTPAction(e){S=e}},9),n.exportDefault(e=>{let{username:t,userId:n,isFederatedUser:T,isActive:y,isAdmin:C,tab:D,onChange:_,onReload:x}=e,M=d(),P=c(\"direct\"),R=c(\"admin-users\"),I=u(\"create-d\"),O=u(\"edit-other-user-info\"),v=p(n,C,_),K=E(n,y,_),j=f(n,_,x),B=S(n),q=g(n),w=m(()=>t&&P.push({rid:t}),[P,t]),F=m(()=>R.push({context:\"edit\",id:n}),[n,R]),G=\"pending\"!==D&&\"deactivated\"!==D&&!T,N=h(()=>s(s(s(s(s(s(s({},I&&{directMessage:{icon:\"balloon\",label:M(\"Direct_Message\"),title:M(\"Direct_Message\"),action:w}}),O&&{editUser:{icon:\"edit\",label:M(\"Edit\"),title:T?M(\"Edit_Federated_User_Not_Allowed\"):M(\"Edit\"),action:F,disabled:T}}),G&&v&&{makeAdmin:v}),G&&q&&{resetE2EKey:q}),G&&B&&{resetTOTP:B}),K&&!T&&{changeActiveStatus:K}),j&&{delete:j}),[I,O,v,K,j,w,F,T,G,q,B,M]),{actions:W,menu:z}=A(N),H=h(()=>z?k.createElement(a,{mi:4,placement:\"bottom-start\",small:!1,secondary:!0,flexShrink:0,key:\"menu\",renderItem:e=>{let{label:{label:t,icon:n}}=e,s=l(e,U);return k.createElement(r,i({label:t,title:t,icon:n,variant:\"Delete\"===t?\"danger\":\"\"},s))},options:z}):null,[z]),J=h(()=>[...W.map(e=>{let[t,{label:n,icon:i,action:l,disabled:s,title:o}]=e;return k.createElement(b,{key:t,title:o,label:n,onClick:l,disabled:s,icon:i})}),H].filter(Boolean),[W,H]);return k.createElement(o,{align:\"center\",\"data-qa-id\":\"UserInfoActions\"},J)})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/users/AdminUserInfoActions.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { ButtonGroup, Menu, Option } from '@rocket.chat/fuselage';\\nimport { useRoute, usePermission, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback, useMemo } from 'react';\\n\\nimport { UserInfoAction } from '../../../components/UserInfo';\\nimport { useActionSpread } from '../../hooks/useActionSpread';\\nimport type { AdminUsersTab } from './AdminUsersPage';\\nimport { useChangeAdminStatusAction } from './hooks/useChangeAdminStatusAction';\\nimport { useChangeUserStatusAction } from './hooks/useChangeUserStatusAction';\\nimport { useDeleteUserAction } from './hooks/useDeleteUserAction';\\nimport { useResetE2EEKeyAction } from './hooks/useResetE2EEKeyAction';\\nimport { useResetTOTPAction } from './hooks/useResetTOTPAction';\\n\\ntype AdminUserInfoActionsProps = {\\n\\tusername: IUser['username'];\\n\\tuserId: IUser['_id'];\\n\\tisFederatedUser: IUser['federated'];\\n\\tisActive: boolean;\\n\\tisAdmin: boolean;\\n\\ttab: AdminUsersTab;\\n\\tonChange: () => void;\\n\\tonReload: () => void;\\n};\\n\\n// TODO: Replace menu\\nconst AdminUserInfoActions = ({\\n\\tusername,\\n\\tuserId,\\n\\tisFederatedUser,\\n\\tisActive,\\n\\tisAdmin,\\n\\ttab,\\n\\tonChange,\\n\\tonReload,\\n}: AdminUserInfoActionsProps): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst directRoute = useRoute('direct');\\n\\tconst userRoute = useRoute('admin-users');\\n\\tconst canDirectMessage = usePermission('create-d');\\n\\tconst canEditOtherUserInfo = usePermission('edit-other-user-info');\\n\\n\\tconst changeAdminStatusAction = useChangeAdminStatusAction(userId, isAdmin, onChange);\\n\\tconst changeUserStatusAction = useChangeUserStatusAction(userId, isActive, onChange);\\n\\tconst deleteUserAction = useDeleteUserAction(userId, onChange, onReload);\\n\\tconst resetTOTPAction = useResetTOTPAction(userId);\\n\\tconst resetE2EKeyAction = useResetE2EEKeyAction(userId);\\n\\n\\tconst directMessageClick = useCallback(\\n\\t\\t() =>\\n\\t\\t\\tusername &&\\n\\t\\t\\tdirectRoute.push({\\n\\t\\t\\t\\trid: username,\\n\\t\\t\\t}),\\n\\t\\t[directRoute, username],\\n\\t);\\n\\n\\tconst editUserClick = useCallback(\\n\\t\\t() =>\\n\\t\\t\\tuserRoute.push({\\n\\t\\t\\t\\tcontext: 'edit',\\n\\t\\t\\t\\tid: userId,\\n\\t\\t\\t}),\\n\\t\\t[userId, userRoute],\\n\\t);\\n\\n\\tconst isNotPendingDeactivatedNorFederated = tab !== 'pending' && tab !== 'deactivated' && !isFederatedUser;\\n\\tconst options = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\t...(canDirectMessage && {\\n\\t\\t\\t\\tdirectMessage: {\\n\\t\\t\\t\\t\\ticon: 'balloon' as const,\\n\\t\\t\\t\\t\\tlabel: t('Direct_Message'),\\n\\t\\t\\t\\t\\ttitle: t('Direct_Message'),\\n\\t\\t\\t\\t\\taction: directMessageClick,\\n\\t\\t\\t\\t},\\n\\t\\t\\t}),\\n\\t\\t\\t...(canEditOtherUserInfo && {\\n\\t\\t\\t\\teditUser: {\\n\\t\\t\\t\\t\\ticon: 'edit' as const,\\n\\t\\t\\t\\t\\tlabel: t('Edit'),\\n\\t\\t\\t\\t\\ttitle: isFederatedUser ? t('Edit_Federated_User_Not_Allowed') : t('Edit'),\\n\\t\\t\\t\\t\\taction: editUserClick,\\n\\t\\t\\t\\t\\tdisabled: isFederatedUser,\\n\\t\\t\\t\\t},\\n\\t\\t\\t}),\\n\\t\\t\\t...(isNotPendingDeactivatedNorFederated && changeAdminStatusAction && { makeAdmin: changeAdminStatusAction }),\\n\\t\\t\\t...(isNotPendingDeactivatedNorFederated && resetE2EKeyAction && { resetE2EKey: resetE2EKeyAction }),\\n\\t\\t\\t...(isNotPendingDeactivatedNorFederated && resetTOTPAction && { resetTOTP: resetTOTPAction }),\\n\\t\\t\\t...(changeUserStatusAction && !isFederatedUser && { changeActiveStatus: changeUserStatusAction }),\\n\\t\\t\\t...(deleteUserAction && { delete: deleteUserAction }),\\n\\t\\t}),\\n\\t\\t[\\n\\t\\t\\tcanDirectMessage,\\n\\t\\t\\tcanEditOtherUserInfo,\\n\\t\\t\\tchangeAdminStatusAction,\\n\\t\\t\\tchangeUserStatusAction,\\n\\t\\t\\tdeleteUserAction,\\n\\t\\t\\tdirectMessageClick,\\n\\t\\t\\teditUserClick,\\n\\t\\t\\tisFederatedUser,\\n\\t\\t\\tisNotPendingDeactivatedNorFederated,\\n\\t\\t\\tresetE2EKeyAction,\\n\\t\\t\\tresetTOTPAction,\\n\\t\\t\\tt,\\n\\t\\t],\\n\\t);\\n\\n\\tconst { actions: actionsDefinition, menu: menuOptions } = useActionSpread(options);\\n\\n\\tconst menu = useMemo(() => {\\n\\t\\tif (!menuOptions) {\\n\\t\\t\\treturn null;\\n\\t\\t}\\n\\n\\t\\treturn (\\n\\t\\t\\t<Menu\\n\\t\\t\\t\\tmi={4}\\n\\t\\t\\t\\tplacement='bottom-start'\\n\\t\\t\\t\\tsmall={false}\\n\\t\\t\\t\\tsecondary\\n\\t\\t\\t\\tflexShrink={0}\\n\\t\\t\\t\\tkey='menu'\\n\\t\\t\\t\\trenderItem={({ label: { label, icon }, ...props }): ReactElement => (\\n\\t\\t\\t\\t\\t<Option label={label} title={label} icon={icon} variant={label === 'Delete' ? 'danger' : ''} {...props} />\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\toptions={menuOptions}\\n\\t\\t\\t/>\\n\\t\\t);\\n\\t}, [menuOptions]);\\n\\n\\t// TODO: sanitize Action type to avoid any\\n\\tconst actions = useMemo(() => {\\n\\t\\tconst mapAction = ([key, { label, icon, action, disabled, title }]: any): ReactElement => (\\n\\t\\t\\t<UserInfoAction key={key} title={title} label={label} onClick={action} disabled={disabled} icon={icon} />\\n\\t\\t);\\n\\t\\treturn [...actionsDefinition.map(mapAction), menu].filter(Boolean);\\n\\t}, [actionsDefinition, menu]);\\n\\n\\treturn (\\n\\t\\t<ButtonGroup align='center' data-qa-id='UserInfoActions'>\\n\\t\\t\\t{actions}\\n\\t\\t</ButtonGroup>\\n\\t);\\n};\\n\\nexport default AdminUserInfoActions;\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"_objectSpread\",\"ButtonGroup\",\"Menu\",\"Option\",\"useRoute\",\"usePermission\",\"useTranslation\",\"React\",\"useCallback\",\"useMemo\",\"UserInfoAction\",\"useActionSpread\",\"useChangeAdminStatusAction\",\"useChangeUserStatusAction\",\"useDeleteUserAction\",\"useResetE2EEKeyAction\",\"useResetTOTPAction\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"username\",\"userId\",\"isFederatedUser\",\"isActive\",\"isAdmin\",\"tab\",\"onChange\",\"onReload\",\"t\",\"directRoute\",\"userRoute\",\"canDirectMessage\",\"canEditOtherUserInfo\",\"changeAdminStatusAction\",\"changeUserStatusAction\",\"deleteUserAction\",\"resetTOTPAction\",\"resetE2EKeyAction\",\"directMessageClick\",\"push\",\"rid\",\"editUserClick\",\"context\",\"id\",\"isNotPendingDeactivatedNorFederated\",\"options\",\"directMessage\",\"icon\",\"label\",\"title\",\"action\",\"editUser\",\"disabled\",\"makeAdmin\",\"resetE2EKey\",\"resetTOTP\",\"changeActiveStatus\",\"delete\",\"actions\",\"actionsDefinition\",\"menu\",\"menuOptions\",\"createElement\",\"mi\",\"placement\",\"small\",\"secondary\",\"flexShrink\",\"key\",\"renderItem\",\"_ref2\",\"props\",\"_excluded\",\"variant\",\"map\",\"_ref3\",\"onClick\",\"filter\",\"Boolean\",\"align\"],\"mappings\":\"2BACAA,EAAkEC,EAAAC,EAAlEC,EAASC,EAAWC,EAA8CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,kBAAzDC,EAAWC,IAAE,CAAA,iCAAoB,CAAAC,QAAwBC,CAAA,EAAAtB,EAAAsB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iDAAA,CAAAC,QAAAC,CAAA,EAAArB,EAAAqB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAAC,CAAA,EAAApB,EAAAoB,CAAA,CAAA,EAAA,GAAtCH,EAAMC,IAAE,CAAA,wBAAM,CAAuBjB,YAACmB,CAAA,EAAAnB,EAAAmB,CAAA,EAAAlB,KAAAkB,CAAA,EAAAlB,EAAAkB,CAAA,EAAAjB,OAAAiB,CAAA,EAAAjB,EAAAiB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAd,SAAAgB,CAAA,EAAAhB,EAAAgB,CAAA,EAAAf,cAAAe,CAAA,EAAAf,EAAAe,CAAA,EAAAd,eAAAc,CAAA,EAAAd,EAAAc,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,YAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,QAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,+BAAA,CAAAR,eAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAP,gBAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qCAAA,CAAAN,2BAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oCAAA,CAAAL,0BAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAJ,oBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gCAAA,CAAAH,sBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAAF,mBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAlEH,EAAOI,aAAa,CA0BSC,IASiB,GAThB,CAC7BC,SAAAA,CAAQ,CACRC,OAAAA,CAAM,CACNC,gBAAAA,CAAe,CACfC,SAAAA,CAAQ,CACRC,QAAAA,CAAO,CACPC,IAAAA,CAAG,CACHC,SAAAA,CAAQ,CACRC,SAAAA,CAAAA,CAC2B,CAAAR,EACrBS,EAAIzB,IACJ0B,EAAc5B,EAAS,UACvB6B,EAAY7B,EAAS,eACrB8B,EAAmB7B,EAAc,YACjC8B,EAAuB9B,EAAc,wBAErC+B,EAA0BxB,EAA2BY,EAAQG,EAASE,GACtEQ,EAAyBxB,EAA0BW,EAAQE,EAAUG,GACrES,EAAmBxB,EAAoBU,EAAQK,EAAUC,GACzDS,EAAkBvB,EAAmBQ,GACrCgB,EAAoBzB,EAAsBS,GAE1CiB,EAAqBjC,EAC1B,IACCe,GACAS,EAAYU,IAAI,CAAC,CAChBC,IAAKpB,IAEP,CAACS,EAAaT,EAAS,EAGlBqB,EAAgBpC,EACrB,IACCyB,EAAUS,IAAI,CAAC,CACdG,QAAS,OACTC,GAAItB,IAEN,CAACA,EAAQS,EAAU,EAGdc,EAAsCnB,AAAQ,YAARA,GAAqBA,AAAQ,gBAARA,GAAyB,CAACH,EACrFuB,EAAUvC,EACf,IAAAT,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAA,CAAA,EACKkC,GAAoB,CACvBe,cAAe,CACdC,KAAM,UACNC,MAAOpB,EAAE,kBACTqB,MAAOrB,EAAE,kBACTsB,OAAQZ,KAGNN,GAAwB,CAC3BmB,SAAU,CACTJ,KAAM,OACNC,MAAOpB,EAAE,QACTqB,MAAO3B,EAAkBM,EAAE,mCAAqCA,EAAE,QAClEsB,OAAQT,EACRW,SAAU9B,KAGRsB,GAAuCX,GAA2B,CAAEoB,UAAWpB,CAAuB,GACtGW,GAAuCP,GAAqB,CAAEiB,YAAajB,CAAiB,GAC5FO,GAAuCR,GAAmB,CAAEmB,UAAWnB,CAAe,GACtFF,GAA0B,CAACZ,GAAmB,CAAEkC,mBAAoBtB,CAAsB,GAC1FC,GAAoB,CAAEsB,OAAQtB,CAAgB,GAEnD,CACCJ,EACAC,EACAC,EACAC,EACAC,EACAG,EACAG,EACAnB,EACAsB,EACAP,EACAD,EACAR,EACA,EAGI,CAAE8B,QAASC,CAAiB,CAAEC,KAAMC,CAAAA,CAAa,CAAGrD,EAAgBqC,GAEpEe,EAAOtD,EAAQ,IACpB,AAAKuD,EAKJzD,EAAA0D,aAAA,CAAC/D,EAAI,CACJgE,GAAI,EACJC,UAAU,eACVC,MAAO,CAAA,EACPC,UAAS,CAAA,EACTC,WAAY,EACZC,IAAI,OACJC,WAAYC,IAAA,GAAC,CAAEtB,MAAO,CAAEA,MAAAA,CAAK,CAAED,KAAAA,CAAAA,CAAI,CAAc,CAAAuB,EAAPC,EAAK3E,EAAA0E,EAAAE,GAAA,OAC9CpE,EAAA0D,aAAA,CAAC9D,EAAML,EAAA,CAACqD,MAAOA,EAAOC,MAAOD,EAAOD,KAAMA,EAAM0B,QAASzB,AAAU,WAAVA,EAAqB,SAAW,EAAG,EAAKuB,GAAS,EAE3G1B,QAASgB,CAAY,GAdf,KAiBN,CAACA,EAAY,EAGVH,EAAUpD,EAAQ,IAIhB,IAAIqD,EAAkBe,GAAG,CAHdC,IAAA,GAAC,CAACP,EAAK,CAAEpB,MAAAA,CAAK,CAAED,KAAAA,CAAI,CAAEG,OAAAA,CAAM,CAAEE,SAAAA,CAAQ,CAAEH,MAAAA,CAAAA,CAAO,CAAM,CAAA0B,EAAA,OACtEvE,EAAA0D,aAAA,CAACvD,EAAc,CAAC6D,IAAKA,EAAKnB,MAAOA,EAAOD,MAAOA,EAAO4B,QAAS1B,EAAQE,SAAUA,EAAUL,KAAMA,CAAK,EAAG,GAE7Da,EAAK,CAACiB,MAAM,CAACC,SACxD,CAACnB,EAAmBC,EAAK,EAE5B,OACCxD,EAAA0D,aAAA,CAAChE,EAAW,CAACiF,MAAM,SAAS,aAAW,iBAAiB,EACtDrB,EAGJ\"}"}