{"code":"function module(e,n,u){var l,t,o,i,r,a,s,c;u.link(\"@rocket.chat/ui-contexts\",{useUserId:function(e){l=e},useSetting:function(e){t=e}},0),u.link(\"react\",{default:function(e){o=e},useCallback:function(e){i=e}},1),u.link(\"../../../hooks/useReactiveValue\",{useReactiveValue:function(e){r=e}},2),u.link(\"../../../hooks/useUserInfoQuery\",{useUserInfoQuery:function(e){a=e}},3),u.link(\"./PasswordChangeCheck\",{default:function(e){s=e}},4),u.link(\"./RegisterUsername\",{default:function(e){c=e}},5),u.exportDefault(function(e){var n,u=e.children,f=l(),d=a({userId:f||\"\"}),k=d.data,v=d.isLoading,h=null!==(n=t(\"Accounts_AllowAnonymousRead\"))&&void 0!==n&&n,m=r(i(function(){var e,n=!!(null!=k&&k.user),u=!!(null!=k&&null!==(e=k.user)&&void 0!==e&&e.username);return f?!n||!u:!h},[null==k?void 0:k.user,f,h]));return!v&&m?o.createElement(c,null):o.createElement(s,null,u)})}","map":"{\"version\":3,\"sources\":[\"client/views/root/MainLayout/UsernameCheck.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useUserId, useSetting } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ReactNode } from 'react';\\nimport React, { useCallback } from 'react';\\n\\nimport { useReactiveValue } from '../../../hooks/useReactiveValue';\\nimport { useUserInfoQuery } from '../../../hooks/useUserInfoQuery';\\nimport PasswordChangeCheck from './PasswordChangeCheck';\\nimport RegisterUsername from './RegisterUsername';\\n\\nconst UsernameCheck = ({ children }: { children: ReactNode }): ReactElement => {\\n\\tconst userId = useUserId();\\n\\tconst { data: userData, isLoading } = useUserInfoQuery({ userId: userId || '' });\\n\\n\\tconst allowAnonymousRead = useSetting<boolean>('Accounts_AllowAnonymousRead') ?? false;\\n\\n\\tconst shouldRegisterUsername = useReactiveValue(\\n\\t\\tuseCallback(() => {\\n\\t\\t\\tconst hasUserInCollection = !!userData?.user;\\n\\t\\t\\tconst hasUsername = !!userData?.user?.username;\\n\\n\\t\\t\\tif (!userId) {\\n\\t\\t\\t\\treturn !allowAnonymousRead;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (!hasUserInCollection) {\\n\\t\\t\\t\\treturn true;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn !hasUsername;\\n\\t\\t}, [userData?.user, userId, allowAnonymousRead]),\\n\\t);\\n\\n\\tif (!isLoading && shouldRegisterUsername) {\\n\\t\\treturn <RegisterUsername />;\\n\\t}\\n\\n\\treturn <PasswordChangeCheck>{children}</PasswordChangeCheck>;\\n};\\n\\nexport default UsernameCheck;\\n\",null],\"names\":[\"useUserId\",\"useSetting\",\"React\",\"useCallback\",\"useReactiveValue\",\"useUserInfoQuery\",\"PasswordChangeCheck\",\"RegisterUsername\",\"module\",\"link\",\"v\",\"exportDefault\",\"_ref\",\"_useSetting\",\"children\",\"userId\",\"_useUserInfoQuery\",\"userData\",\"data\",\"isLoading\",\"allowAnonymousRead\",\"shouldRegisterUsername\",\"_userData$user\",\"hasUserInCollection\",\"user\",\"hasUsername\",\"username\",\"createElement\"],\"mappings\":\"uBASA,IATAA,EAASC,EAAwDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA7CC,EAAYC,IAAA,CAAA,2BAAgC,CAACT,UAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,WAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAC,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,YAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kCAAA,CAAAL,iBAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kCAAA,CAAAJ,iBAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wBAAA,CAAA,QAAA,SAAAC,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,qBAAA,CAAA,QAAA,SAAAC,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAAjEF,EAAOG,aAAa,CASE,SAAAC,CAAA,EAAwD,IAAAC,EAArDC,EAAQF,EAARE,QAAQ,CAC1BC,EAASf,IACfgB,EAAsCX,EAAiB,CAAEU,OAAQA,GAAU,EAAE,GAA/DE,EAAQD,EAAdE,IAAI,CAAYC,EAASH,EAATG,SAAS,CAE3BC,EAAkB,AAAqD,OAArDP,CAAAA,EAAGZ,EAAoB,8BAA6B,GAACY,AAAA,KAAA,IAAAA,GAAAA,EAEvEQ,EAAyBjB,EAC9BD,EAAY,WACX,IADgBmB,EACVC,EAAsB,CAAC,CAACN,CAAAA,MAAAA,GAAAA,EAAUO,IAAI,AAAJA,EAClCC,EAAc,CAAC,CAACR,CAAAA,MAAAA,GAAQ,AAAM,OAANK,CAAAA,EAARL,EAAUO,IAAI,AAAJA,GAAIF,AAAA,KAAA,IAAAA,GAAdA,EAAgBI,QAAQ,AAARA,SAEtC,AAAKX,GAIAQ,GAIE,CAACE,EAPA,CAACL,CAQV,EAAG,CAACH,MAAAA,EAAQ,KAAA,EAARA,EAAUO,IAAI,CAAET,EAAQK,EAAmB,SAGhD,AAAI,CAACD,GAAaE,EACVnB,EAAAyB,aAAA,CAACpB,EAAgB,MAGlBL,EAAAyB,aAAA,CAACrB,EAAmB,KAAEQ,EAC9B\"}"}