{"code":"function module(t,e,n){n.link(\"@babel/runtime/regenerator\",{default:function(t){i=t}},0),n.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(t){r=t}},1),n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(t){u=t}},2),n.export({useTagsList:function(){return d}}),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(t){o=t}},0),n.link(\"react\",{useCallback:function(t){l=t},useState:function(t){a=t}},1),n.link(\"../lib/lists/RecordList\",{RecordList:function(t){s=t}},2),n.link(\"./lists/useScrollableRecordList\",{useScrollableRecordList:function(t){c=t}},3),n.link(\"./useComponentDidUpdate\",{useComponentDidUpdate:function(t){f=t}},4);var i,r,u,o,l,a,s,c,f,d=function(t){var e=t.viewAll,n=t.department,d=t.filter,m=a(function(){return new s}),p=u(m,2),b=p[0],k=p[1],v=l(function(){return k(new s)},[]),w=o(\"GET\",\"/v1/livechat/tags\");f(function(){t&&v()},[t,v]);var C=l(function(t,u){var o,l,a;return i.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,i.awrap(w(r(r(r({text:d,offset:t,count:u+t},e&&{viewAll:\"true\"}),n&&{department:n}),{},{sort:JSON.stringify({name:1})})));case 2:return l=(o=s.sent).tags,a=o.total,s.abrupt(\"return\",{items:l.map(function(t){return{_id:t._id,label:t.name,value:t.name}}),itemCount:a});case 6:case\"end\":return s.stop()}},null,null,null,Promise)},[w,d,e,n]),L=c(b,C,25);return{reload:v,itemsList:b,loadMoreItems:L.loadMoreItems,initialItemCount:L.initialItemCount}}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useTagsList.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useState } from 'react';\\n\\nimport { RecordList } from '../lib/lists/RecordList';\\nimport { useScrollableRecordList } from './lists/useScrollableRecordList';\\nimport { useComponentDidUpdate } from './useComponentDidUpdate';\\n\\ntype TagsListOptions = {\\n\\tfilter: string;\\n\\tdepartment?: string;\\n\\tviewAll?: boolean;\\n};\\n\\ntype TagListItem = { _id: string; label: string; value: string; _updatedAt: Date };\\n\\ntype UseTagsListResult = {\\n\\titemsList: RecordList<TagListItem>;\\n\\tinitialItemCount: number;\\n\\treload: () => void;\\n\\tloadMoreItems: (start: number, end: number) => void;\\n};\\n\\nexport const useTagsList = (options: TagsListOptions): UseTagsListResult => {\\n\\tconst { viewAll, department, filter } = options;\\n\\tconst [itemsList, setItemsList] = useState(() => new RecordList<TagListItem>());\\n\\tconst reload = useCallback(() => setItemsList(new RecordList<TagListItem>()), []);\\n\\n\\tconst getTags = useEndpoint('GET', '/v1/livechat/tags');\\n\\n\\tuseComponentDidUpdate(() => {\\n\\t\\toptions && reload();\\n\\t}, [options, reload]);\\n\\n\\tconst fetchData = useCallback(\\n\\t\\tasync (start, end) => {\\n\\t\\t\\tconst { tags, total } = await getTags({\\n\\t\\t\\t\\ttext: filter,\\n\\t\\t\\t\\toffset: start,\\n\\t\\t\\t\\tcount: end + start,\\n\\t\\t\\t\\t...(viewAll && { viewAll: 'true' }),\\n\\t\\t\\t\\t...(department && { department }),\\n\\t\\t\\t\\tsort: JSON.stringify({ name: 1 }),\\n\\t\\t\\t});\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\titems: tags.map<any>((tag: any) => ({\\n\\t\\t\\t\\t\\t_id: tag._id,\\n\\t\\t\\t\\t\\tlabel: tag.name,\\n\\t\\t\\t\\t\\tvalue: tag.name,\\n\\t\\t\\t\\t})),\\n\\t\\t\\t\\titemCount: total,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t[getTags, filter, viewAll, department],\\n\\t);\\n\\n\\tconst { loadMoreItems, initialItemCount } = useScrollableRecordList(itemsList, fetchData, 25);\\n\\n\\treturn {\\n\\t\\treload,\\n\\t\\titemsList,\\n\\t\\tloadMoreItems,\\n\\t\\tinitialItemCount,\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_objectSpread\",\"_slicedToArray\",\"export\",\"useTagsList\",\"useEndpoint\",\"useCallback\",\"useState\",\"RecordList\",\"useScrollableRecordList\",\"useComponentDidUpdate\",\"options\",\"viewAll\",\"department\",\"filter\",\"_useState\",\"_useState2\",\"itemsList\",\"setItemsList\",\"reload\",\"getTags\",\"fetchData\",\"start\",\"end\",\"_await$getTags\",\"tags\",\"total\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"text\",\"offset\",\"count\",\"sort\",\"JSON\",\"stringify\",\"name\",\"sent\",\"abrupt\",\"items\",\"map\",\"tag\",\"_id\",\"label\",\"value\",\"itemCount\",\"stop\",\"Promise\",\"_useScrollableRecordL\",\"loadMoreItems\",\"initialItemCount\"],\"mappings\":\"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\"}"}