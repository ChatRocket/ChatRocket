{"code":"function module(e,t,n){let a,l,r,s,o,i,c,m,g,u,d,p,f,E,h,k,_,w;n.link(\"@rocket.chat/fuselage\",{Box(e){a=e},Callout(e){l=e},Message(e){r=e},StatesAction(e){s=e},StatesActions(e){o=e},StatesIcon(e){i=e},StatesTitle(e){c=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){m=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){g=e},useToastMessageDispatch(e){u=e}},2),n.link(\"@tanstack/react-query\",{useQuery(e){d=e}},3),n.link(\"react\",{default(e){p=e},Fragment(e){f=e}},4),n.link(\"react-i18next\",{useTranslation(e){E=e}},5),n.link(\"../../../components/Contextualbar\",{ContextualbarFooter(e){h=e}},6),n.link(\"../../../components/GenericNoResults\",{default(e){k=e}},7),n.link(\"./MessageContextFooter\",{default(e){_=e}},8),n.link(\"./helpers/ContextMessage\",{default(e){w=e}},9),n.exportDefault(e=>{let{userId:t,onRedirect:n}=e,{t:x}=E(),y=u(),M=g(\"GET\",\"/v1/moderation.user.reportedMessages\"),{data:C,refetch:D,isLoading:b,isSuccess:S,isError:v}=d([\"moderation\",\"msgReports\",\"fetchDetails\",{userId:t}],async()=>{let e=await M({userId:t});return e},{onError:e=>{y({type:\"error\",message:e})}}),F=m(()=>{D()});return p.createElement(p.Fragment,null,p.createElement(a,{display:\"flex\",flexDirection:\"column\",width:\"full\",height:\"full\",overflowY:\"auto\",overflowX:\"hidden\"},b&&p.createElement(r,null,x(\"Loading\")),S&&p.createElement(a,{padding:24},C.messages.length>0&&p.createElement(l,{title:x(\"Moderation_Duplicate_messages\"),type:\"warning\",icon:\"warning\"},x(\"Moderation_Duplicate_messages_warning\")),!C.user&&p.createElement(l,{mbs:8,type:\"warning\",icon:\"warning\"},x(\"Moderation_User_deleted_warning\"))),S&&C.messages.length>0&&C.messages.map(e=>p.createElement(f,{key:e._id},p.createElement(w,{message:e.message,room:e.room,onRedirect:n,onChange:F,deleted:!C.user}))),S&&0===C.messages.length&&p.createElement(k,{title:x(\"No_message_reports\"),icon:\"message\"}),v&&p.createElement(a,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",pb:20,color:\"default\"},p.createElement(i,{name:\"warning\",variation:\"danger\"}),p.createElement(c,null,x(\"Something_went_wrong\")),p.createElement(o,null,p.createElement(s,{onClick:F},x(\"Reload_page\"))))),S&&C.messages.length>0&&p.createElement(h,null,p.createElement(_,{userId:t,deleted:!C.user})))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/moderation/UserMessages.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Callout, Message, StatesAction, StatesActions, StatesIcon, StatesTitle } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useEndpoint, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport React, { Fragment } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { ContextualbarFooter } from '../../../components/Contextualbar';\\nimport GenericNoResults from '../../../components/GenericNoResults';\\nimport MessageContextFooter from './MessageContextFooter';\\nimport ContextMessage from './helpers/ContextMessage';\\n\\nconst UserMessages = ({ userId, onRedirect }: { userId: string; onRedirect: (mid: string) => void }) => {\\n\\tconst { t } = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst getUserMessages = useEndpoint('GET', '/v1/moderation.user.reportedMessages');\\n\\n\\tconst {\\n\\t\\tdata: report,\\n\\t\\trefetch: reloadUserMessages,\\n\\t\\tisLoading,\\n\\t\\tisSuccess,\\n\\t\\tisError,\\n\\t} = useQuery(\\n\\t\\t['moderation', 'msgReports', 'fetchDetails', { userId }],\\n\\t\\tasync () => {\\n\\t\\t\\tconst messages = await getUserMessages({ userId });\\n\\t\\t\\treturn messages;\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tonError: (error) => {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n\\n\\tconst handleChange = useMutableCallback(() => {\\n\\t\\treloadUserMessages();\\n\\t});\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<Box display='flex' flexDirection='column' width='full' height='full' overflowY='auto' overflowX='hidden'>\\n\\t\\t\\t\\t{isLoading && <Message>{t('Loading')}</Message>}\\n\\t\\t\\t\\t{isSuccess && (\\n\\t\\t\\t\\t\\t<Box padding={24}>\\n\\t\\t\\t\\t\\t\\t{report.messages.length > 0 && (\\n\\t\\t\\t\\t\\t\\t\\t<Callout title={t('Moderation_Duplicate_messages')} type='warning' icon='warning'>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Moderation_Duplicate_messages_warning')}\\n\\t\\t\\t\\t\\t\\t\\t</Callout>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t{!report.user && (\\n\\t\\t\\t\\t\\t\\t\\t<Callout mbs={8} type='warning' icon='warning'>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Moderation_User_deleted_warning')}\\n\\t\\t\\t\\t\\t\\t\\t</Callout>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t{isSuccess &&\\n\\t\\t\\t\\t\\treport.messages.length > 0 &&\\n\\t\\t\\t\\t\\treport.messages.map((message) => (\\n\\t\\t\\t\\t\\t\\t<Fragment key={message._id}>\\n\\t\\t\\t\\t\\t\\t\\t<ContextMessage\\n\\t\\t\\t\\t\\t\\t\\t\\tmessage={message.message}\\n\\t\\t\\t\\t\\t\\t\\t\\troom={message.room}\\n\\t\\t\\t\\t\\t\\t\\t\\tonRedirect={onRedirect}\\n\\t\\t\\t\\t\\t\\t\\t\\tonChange={handleChange}\\n\\t\\t\\t\\t\\t\\t\\t\\tdeleted={!report.user}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</Fragment>\\n\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t{isSuccess && report.messages.length === 0 && <GenericNoResults title={t('No_message_reports')} icon='message' />}\\n\\t\\t\\t\\t{isError && (\\n\\t\\t\\t\\t\\t<Box display='flex' flexDirection='column' alignItems='center' pb={20} color='default'>\\n\\t\\t\\t\\t\\t\\t<StatesIcon name='warning' variation='danger' />\\n\\t\\t\\t\\t\\t\\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\\n\\t\\t\\t\\t\\t\\t<StatesActions>\\n\\t\\t\\t\\t\\t\\t\\t<StatesAction onClick={handleChange}>{t('Reload_page')}</StatesAction>\\n\\t\\t\\t\\t\\t\\t</StatesActions>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</Box>\\n\\t\\t\\t{isSuccess && report.messages.length > 0 && (\\n\\t\\t\\t\\t<ContextualbarFooter>\\n\\t\\t\\t\\t\\t<MessageContextFooter userId={userId} deleted={!report.user} />\\n\\t\\t\\t\\t</ContextualbarFooter>\\n\\t\\t\\t)}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default UserMessages;\\n\",null],\"names\":[\"Box\",\"Callout\",\"Message\",\"StatesAction\",\"StatesActions\",\"StatesIcon\",\"StatesTitle\",\"useMutableCallback\",\"useEndpoint\",\"useToastMessageDispatch\",\"useQuery\",\"React\",\"Fragment\",\"useTranslation\",\"ContextualbarFooter\",\"GenericNoResults\",\"MessageContextFooter\",\"ContextMessage\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"userId\",\"onRedirect\",\"t\",\"dispatchToastMessage\",\"getUserMessages\",\"data\",\"report\",\"refetch\",\"reloadUserMessages\",\"isLoading\",\"isSuccess\",\"isError\",\"messages\",\"onError\",\"error\",\"type\",\"message\",\"handleChange\",\"createElement\",\"display\",\"flexDirection\",\"width\",\"height\",\"overflowY\",\"overflowX\",\"padding\",\"length\",\"title\",\"icon\",\"user\",\"mbs\",\"map\",\"key\",\"_id\",\"room\",\"onChange\",\"deleted\",\"alignItems\",\"pb\",\"color\",\"name\",\"variation\",\"onClick\"],\"mappings\":\"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\"}"}