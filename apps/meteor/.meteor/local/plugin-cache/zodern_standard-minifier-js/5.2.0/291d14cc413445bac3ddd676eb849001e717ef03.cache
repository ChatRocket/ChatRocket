{"code":"function module(e,i,n){let o,r,t,a,l,c,s;n.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){o=e}},0),n.link(\"../../../client/lib/rooms/roomCoordinator\",{roomCoordinator(e){r=e}},0),n.link(\"../../../client/providers/RouterProvider\",{router(e){t=e}},1),n.link(\"../../models/client\",{Subscriptions(e){a=e},ChatSubscription(e){l=e}},2),n.link(\"../../utils/client/lib/SDKClient\",{sdk(e){c=e}},3),n.link(\"../../utils/client/slashCommand\",{slashCommands(e){s=e}},4),s.add({command:\"open\",callback:async function e(e){let{params:i}=e,n=i.trim().replace(/#|@/,\"\"),s={\"#\":[\"c\",\"p\"],\"@\":[\"d\"]}[i.trim()[0]]||[],m=o({name:n},s&&{t:{$in:s}}),d=l.findOne(m);if(d&&r.openRouteLink(d.t,d,t.getSearchParameters()),!s||-1!==s.indexOf(\"d\"))try{await c.call(\"createDirectMessage\",n);let e=a.findOne(m);if(!e)return;r.openRouteLink(e.t,e,t.getSearchParameters())}catch(e){}},options:{description:\"Opens_a_channel_group_or_direct_message\",params:\"room_name\",clientOnly:!0,permission:[\"view-c-room\",\"view-c-room\",\"view-d-room\",\"view-joined-room\",\"create-d\"]}})}","map":"{\"version\":3,\"sources\":[\"app/slashcommands-open/client/client.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { RoomType, ISubscription, SlashCommandCallbackParams } from '@rocket.chat/core-typings';\\nimport type { Mongo } from 'meteor/mongo';\\n\\nimport { roomCoordinator } from '../../../client/lib/rooms/roomCoordinator';\\nimport { router } from '../../../client/providers/RouterProvider';\\nimport { Subscriptions, ChatSubscription } from '../../models/client';\\nimport { sdk } from '../../utils/client/lib/SDKClient';\\nimport { slashCommands } from '../../utils/client/slashCommand';\\n\\nslashCommands.add({\\n\\tcommand: 'open',\\n\\tcallback: async function Open({ params }: SlashCommandCallbackParams<'open'>): Promise<void> {\\n\\t\\tconst dict: Record<string, RoomType[]> = {\\n\\t\\t\\t'#': ['c', 'p'],\\n\\t\\t\\t'@': ['d'],\\n\\t\\t};\\n\\n\\t\\tconst room = params.trim().replace(/#|@/, '');\\n\\t\\tconst type = dict[params.trim()[0]] || [];\\n\\n\\t\\tconst query: Mongo.Selector<ISubscription> = {\\n\\t\\t\\tname: room,\\n\\t\\t\\t...(type && { t: { $in: type } }),\\n\\t\\t};\\n\\n\\t\\tconst subscription = ChatSubscription.findOne(query);\\n\\n\\t\\tif (subscription) {\\n\\t\\t\\troomCoordinator.openRouteLink(subscription.t, subscription, router.getSearchParameters());\\n\\t\\t}\\n\\n\\t\\tif (type && type.indexOf('d') === -1) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\ttry {\\n\\t\\t\\tawait sdk.call('createDirectMessage', room);\\n\\t\\t\\tconst subscription = Subscriptions.findOne(query);\\n\\t\\t\\tif (!subscription) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\troomCoordinator.openRouteLink(subscription.t, subscription, router.getSearchParameters());\\n\\t\\t} catch (err: unknown) {\\n\\t\\t\\t// noop\\n\\t\\t}\\n\\t},\\n\\toptions: {\\n\\t\\tdescription: 'Opens_a_channel_group_or_direct_message',\\n\\t\\tparams: 'room_name',\\n\\t\\tclientOnly: true,\\n\\t\\tpermission: ['view-c-room', 'view-c-room', 'view-d-room', 'view-joined-room', 'create-d'],\\n\\t},\\n});\\n\",null],\"names\":[\"_objectSpread\",\"roomCoordinator\",\"router\",\"Subscriptions\",\"ChatSubscription\",\"sdk\",\"slashCommands\",\"module\",\"link\",\"default\",\"v\",\"add\",\"command\",\"callback\",\"Open\",\"_ref\",\"params\",\"room\",\"trim\",\"replace\",\"type\",\"dict\",\"query\",\"name\",\"t\",\"$in\",\"subscription\",\"findOne\",\"openRouteLink\",\"getSearchParameters\",\"indexOf\",\"call\",\"err\",\"options\",\"description\",\"clientOnly\",\"permission\"],\"mappings\":\"2BAGAA,EAAAC,EAA4EC,EAAAC,EAAAC,EAAAC,EAAAC,EAAnEC,EAAeC,IAAE,CAAA,uCAAM,CAAAC,QAA4CC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAnEH,EAAiBC,IAAA,CAAM,4CAA4C,CAAAP,gBAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAAN,OAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sBAAA,CAAAL,cAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,iBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,mCAAA,CAAAH,IAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kCAAA,CAAAF,cAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAM5EJ,EAAcK,GAAG,CAAC,CACjBC,QAAS,OACTC,SAAU,eAAeC,EAAIC,CAAA,EAA+C,GAA9C,CAAEC,OAAAA,CAAAA,CAA4C,CAAAD,EAMrEE,EAAOD,EAAOE,IAAI,GAAGC,OAAO,CAAC,MAAO,IACpCC,EAAOC,AAN4B,CACxC,IAAK,CAAC,IAAK,IAAI,CACf,IAAK,CAAC,IAAG,CAIO,CAACL,EAAOE,IAAI,EAAE,CAAC,EAAE,CAAC,EAAI,EAAE,CAEnCI,EAAKtB,EAAA,CACVuB,KAAMN,CAAI,EACNG,GAAQ,CAAEI,EAAG,CAAEC,IAAKL,CAAI,CAAE,GAGzBM,EAAetB,EAAiBuB,OAAO,CAACL,GAM9C,GAJII,GACHzB,EAAgB2B,aAAa,CAACF,EAAaF,CAAC,CAAEE,EAAcxB,EAAO2B,mBAAmB,IAGnFT,CAAAA,GAAQA,AAAsB,KAAtBA,EAAKU,OAAO,CAAC,KAGzB,GAAI,CACH,MAAMzB,EAAI0B,IAAI,CAAC,sBAAuBd,GACtC,IAAMS,EAAevB,EAAcwB,OAAO,CAACL,GAC3C,GAAI,CAACI,EACJ,OAEDzB,EAAgB2B,aAAa,CAACF,EAAaF,CAAC,CAAEE,EAAcxB,EAAO2B,mBAAmB,GACvF,CAAE,MAAOG,EAAc,CACtB,CAEF,EACAC,QAAS,CACRC,YAAa,0CACblB,OAAQ,YACRmB,WAAY,CAAA,EACZC,WAAY,CAAC,cAAe,cAAe,cAAe,mBAAoB,WAAU\"}"}