{"code":"function module(t,n,e){e.link(\"@babel/runtime/regenerator\",{default:function(t){i=t}},0),e.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(t){o=t}},1),e.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(t){r=t}},2),e.export({useMonitorsList:function(){return d}}),e.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(t){u=t}},0),e.link(\"react\",{useCallback:function(t){l=t},useState:function(t){s=t}},1),e.link(\"../../hooks/lists/useScrollableRecordList\",{useScrollableRecordList:function(t){a=t}},2),e.link(\"../../hooks/useComponentDidUpdate\",{useComponentDidUpdate:function(t){c=t}},3),e.link(\"../../lib/lists/RecordList\",{RecordList:function(t){f=t}},4);var i,o,r,u,l,s,a,c,f,d=function(t){var n=s(function(){return new f}),e=r(n,2),d=e[0],m=e[1],p=l(function(){return m(new f)},[]),b=u(\"GET\",\"/v1/livechat/monitors\");c(function(){t&&p()},[t,p]);var k=l(function(n,e){var r,u,l;return i.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,i.awrap(b({text:t.filter,offset:n,count:e+n,sort:JSON.stringify({username:1})}));case 2:return u=(r=s.sent).monitors,l=r.total,s.abrupt(\"return\",{items:u.map(function(t){return o(o({},t),{},{label:t.username,value:t._id})}),itemCount:l});case 6:case\"end\":return s.stop()}},null,null,null,Promise)},[b,t.filter]),v=a(d,k,25);return{reload:p,itemsList:d,loadMoreItems:v.loadMoreItems,initialItemCount:v.initialItemCount}}}","map":"{\"version\":3,\"sources\":[\"client/views/hooks/useMonitorsList.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatMonitorRecord } from '@rocket.chat/core-typings';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useState } from 'react';\\n\\nimport { useScrollableRecordList } from '../../hooks/lists/useScrollableRecordList';\\nimport { useComponentDidUpdate } from '../../hooks/useComponentDidUpdate';\\nimport { RecordList } from '../../lib/lists/RecordList';\\n\\ntype MonitorsListOptions = {\\n\\tfilter: string;\\n};\\n\\nexport const useMonitorsList = (\\n\\toptions: MonitorsListOptions,\\n): {\\n\\titemsList: RecordList<ILivechatMonitorRecord>;\\n\\tinitialItemCount: number;\\n\\treload: () => void;\\n\\tloadMoreItems: (start: number, end: number) => void;\\n} => {\\n\\tconst [itemsList, setItemsList] = useState(() => new RecordList<ILivechatMonitorRecord>());\\n\\tconst reload = useCallback(() => setItemsList(new RecordList<ILivechatMonitorRecord>()), []);\\n\\n\\tconst getMonitors = useEndpoint('GET', '/v1/livechat/monitors');\\n\\n\\tuseComponentDidUpdate(() => {\\n\\t\\toptions && reload();\\n\\t}, [options, reload]);\\n\\n\\tconst fetchData = useCallback(\\n\\t\\tasync (start, end) => {\\n\\t\\t\\tconst { monitors, total } = await getMonitors({\\n\\t\\t\\t\\ttext: options.filter,\\n\\t\\t\\t\\toffset: start,\\n\\t\\t\\t\\tcount: end + start,\\n\\t\\t\\t\\tsort: JSON.stringify({ username: 1 }),\\n\\t\\t\\t});\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\titems: monitors.map((members: any) => ({\\n\\t\\t\\t\\t\\t...members,\\n\\t\\t\\t\\t\\tlabel: members.username,\\n\\t\\t\\t\\t\\tvalue: members._id,\\n\\t\\t\\t\\t})),\\n\\t\\t\\t\\titemCount: total,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t[getMonitors, options.filter],\\n\\t);\\n\\n\\tconst { loadMoreItems, initialItemCount } = useScrollableRecordList(itemsList, fetchData, 25);\\n\\treturn {\\n\\t\\treload,\\n\\t\\titemsList,\\n\\t\\tloadMoreItems,\\n\\t\\tinitialItemCount,\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_objectSpread\",\"_slicedToArray\",\"export\",\"useMonitorsList\",\"useEndpoint\",\"useCallback\",\"useState\",\"useScrollableRecordList\",\"useComponentDidUpdate\",\"RecordList\",\"options\",\"_useState\",\"_useState2\",\"itemsList\",\"setItemsList\",\"reload\",\"getMonitors\",\"fetchData\",\"start\",\"end\",\"_await$getMonitors\",\"monitors\",\"total\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"text\",\"filter\",\"offset\",\"count\",\"sort\",\"JSON\",\"stringify\",\"username\",\"sent\",\"abrupt\",\"items\",\"map\",\"members\",\"label\",\"value\",\"_id\",\"itemCount\",\"stop\",\"Promise\",\"_useScrollableRecordL\",\"loadMoreItems\",\"initialItemCount\"],\"mappings\":\"uBACsBA,EAAMC,IAAA,CAAA,6BAA2B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAvDH,EAAOO,MAAE,CAAA,CAAAC,gBAAmB,WAAA,OAAAA,CAA2B,CAAA,GAAAR,EAAAC,IAAA,CAAA,2BAAA,CAAAQ,YAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAS,YAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,EAAAQ,SAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,4CAAA,CAAAW,wBAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oCAAA,CAAAY,sBAAA,SAAAV,CAAA,EAAAU,EAAAV,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAAa,WAAA,SAAAX,CAAA,EAAAW,EAAAX,CAAA,CAAA,EAAA,GAWhD,IAXPC,EAAuDC,EAAAC,EAAAG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAW1CN,EAAkB,SAC9BO,CAA4B,EAO5B,IAAAC,EAAkCL,EAAS,WAAA,OAAM,IAAIG,CAAoC,GAACG,EAAAX,EAAAU,EAAA,GAAnFE,EAASD,CAAA,CAAA,EAAA,CAAEE,EAAYF,CAAA,CAAA,EAAA,CACxBG,EAASV,EAAY,WAAA,OAAMS,EAAa,IAAIL,EAAqC,EAAE,EAAE,EAErFO,EAAcZ,EAAY,MAAO,yBAEvCI,EAAsB,WACrBE,GAAWK,GACZ,EAAG,CAACL,EAASK,EAAO,EAEpB,IAAME,EAAYZ,EACjB,SAAOa,CAAK,CAAEC,CAAG,EAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAvB,EAAAwB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAA3B,EAAA4B,KAAA,CACkBX,EAAY,CAC7CY,KAAMlB,EAAQmB,MAAM,CACpBC,OAAQZ,EACRa,MAAOZ,EAAMD,EACbc,KAAMC,KAAKC,SAAS,CAAC,CAAEC,SAAU,CAAC,KACjC,MAAA,EALqB,OAAfd,EAAQD,AAKdA,CAAAA,EAAAI,EAAAY,IAAA,AAAAA,EALMf,QAAQ,CAAEC,EAAKF,EAALE,KAAK,CAAAE,EAAAa,MAAA,CAAA,SAOhB,CACNC,MAAOjB,EAASkB,GAAG,CAAC,SAACC,CAAY,EAAA,OAAAxC,EAAAA,EAAA,CAAA,EAC7BwC,GAAO,CAAA,EAAA,CACVC,MAAOD,EAAQL,QAAQ,CACvBO,MAAOF,EAAQG,GAAAA,AAAG,EAAA,GAEnBC,UAAWtB,GACX,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAqB,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEF,CAAC9B,EAAaN,EAAQmB,MAAM,CAAC,EAG9BkB,EAA4CxC,EAAwBM,EAAWI,EAAW,IAC1F,MAAO,CACNF,OAAAA,EACAF,UAAAA,EACAmC,cAJoBD,EAAbC,aAAa,CAKpBC,iBALsCF,EAAhBE,gBAAgB,CAOxC\"}"}