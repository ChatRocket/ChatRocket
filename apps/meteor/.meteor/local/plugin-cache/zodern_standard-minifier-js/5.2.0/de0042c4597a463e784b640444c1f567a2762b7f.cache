{"code":"function module(e,t,n){var o,i,l,r,a,c,u,s,f,m,d,x,h,E,C,k,b,S,p,y,g,I,v,_,w,L,T;n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){o=e}},0),n.link(\"@rocket.chat/fuselage\",{Box:function(e){i=e},Margins:function(e){l=e},TextInput:function(e){r=e},Icon:function(e){a=e},Throbber:function(e){c=e},States:function(e){u=e},StatesIcon:function(e){s=e},StatesTitle:function(e){f=e},StatesSubtitle:function(e){m=e}},0),n.link(\"react\",{default:function(e){d=e},useMemo:function(e){x=e},useState:function(e){h=e}},1),n.link(\"react-i18next\",{useTranslation:function(e){E=e}},2),n.link(\"react-virtuoso\",{Virtuoso:function(e){C=e}},3),n.link(\"../../../components/Contextualbar\",{ContextualbarHeader:function(e){k=e},ContextualbarContent:function(e){b=e},ContextualbarTitle:function(e){S=e},ContextualbarIcon:function(e){p=e},ContextualbarClose:function(e){y=e},ContextualbarEmptyContent:function(e){g=e}},4),n.link(\"../../../components/CustomScrollbars\",{VirtuosoScrollbars:function(e){I=e}},5),n.link(\"../../../hooks/lists/useRecordList\",{useRecordList:function(e){v=e}},6),n.link(\"../../../lib/asyncState\",{AsyncStatePhase:function(e){_=e}},7),n.link(\"../../room/contexts/RoomContext\",{useOmnichannelRoom:function(e){w=e}},8),n.link(\"./ContactHistoryItem\",{default:function(e){L=e}},9),n.link(\"./useHistoryList\",{useHistoryList:function(e){T=e}},10),n.exportDefault(function(e){var t=e.setChatId,n=e.close,D=h(\"\"),H=o(D,2),A=H[0],G=H[1],R=E().t,B=w(),M=T(x(function(){return{roomId:B._id,filter:A,visitorId:B.v._id}},[B,A])),N=M.itemsList,O=M.loadMoreItems,z=v(N),V=z.phase,F=z.error,P=z.items,W=z.itemCount;return d.createElement(d.Fragment,null,d.createElement(k,null,d.createElement(p,{name:\"history\"}),d.createElement(S,null,R(\"Contact_Chat_History\")),d.createElement(y,{onClick:n})),d.createElement(b,{paddingInline:0},d.createElement(i,{display:\"flex\",flexDirection:\"row\",p:24,borderBlockEndWidth:\"default\",borderBlockEndStyle:\"solid\",borderBlockEndColor:\"extra-light\",flexShrink:0},d.createElement(i,{display:\"flex\",flexDirection:\"row\",flexGrow:1,mi:\"neg-x4\"},d.createElement(l,{inline:4},d.createElement(r,{placeholder:R(\"Search_Chat_History\"),value:A,onChange:function(e){G(e.currentTarget.value)},addon:d.createElement(a,{name:\"magnifier\",size:\"x20\"})})))),V===_.LOADING&&d.createElement(i,{pi:24,pb:12},d.createElement(c,{size:\"x12\"})),F&&d.createElement(u,null,d.createElement(s,{name:\"warning\",variation:\"danger\"}),d.createElement(f,null,R(\"Something_went_wrong\")),d.createElement(m,null,F.toString())),V!==_.LOADING&&0===W&&d.createElement(g,{title:R(\"No_results_found\")}),d.createElement(i,{flexGrow:1,flexShrink:1,overflow:\"hidden\",display:\"flex\"},!F&&W>0&&P.length>0&&d.createElement(C,{totalCount:W,endReached:V===_.LOADING?function(){}:function(e){return O(e,Math.min(50,W-e))},overscan:25,data:P,components:{Scroller:I},itemContent:function(e,n){return d.createElement(L,{key:e,history:n,setChatId:t})}}))))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/contactHistory/ContactHistoryList.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Margins, TextInput, Icon, Throbber, States, StatesIcon, StatesTitle, StatesSubtitle } from '@rocket.chat/fuselage';\\nimport type { ChangeEvent, Dispatch, ReactElement, SetStateAction } from 'react';\\nimport React, { useMemo, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\nimport { Virtuoso } from 'react-virtuoso';\\n\\nimport {\\n\\tContextualbarHeader,\\n\\tContextualbarContent,\\n\\tContextualbarTitle,\\n\\tContextualbarIcon,\\n\\tContextualbarClose,\\n\\tContextualbarEmptyContent,\\n} from '../../../components/Contextualbar';\\nimport { VirtuosoScrollbars } from '../../../components/CustomScrollbars';\\nimport { useRecordList } from '../../../hooks/lists/useRecordList';\\nimport { AsyncStatePhase } from '../../../lib/asyncState';\\nimport { useOmnichannelRoom } from '../../room/contexts/RoomContext';\\nimport ContactHistoryItem from './ContactHistoryItem';\\nimport { useHistoryList } from './useHistoryList';\\n\\nconst ContactHistoryList = ({ setChatId, close }: { setChatId: Dispatch<SetStateAction<string>>; close: () => void }): ReactElement => {\\n\\tconst [text, setText] = useState('');\\n\\tconst { t } = useTranslation();\\n\\tconst room = useOmnichannelRoom();\\n\\tconst { itemsList: historyList, loadMoreItems } = useHistoryList(\\n\\t\\tuseMemo(() => ({ roomId: room._id, filter: text, visitorId: room.v._id }), [room, text]),\\n\\t);\\n\\n\\tconst handleSearchChange = (event: ChangeEvent<HTMLInputElement>): void => {\\n\\t\\tsetText(event.currentTarget.value);\\n\\t};\\n\\n\\tconst { phase, error, items: history, itemCount: totalItemCount } = useRecordList(historyList);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<ContextualbarHeader>\\n\\t\\t\\t\\t<ContextualbarIcon name='history' />\\n\\t\\t\\t\\t<ContextualbarTitle>{t('Contact_Chat_History')}</ContextualbarTitle>\\n\\t\\t\\t\\t<ContextualbarClose onClick={close} />\\n\\t\\t\\t</ContextualbarHeader>\\n\\n\\t\\t\\t<ContextualbarContent paddingInline={0}>\\n\\t\\t\\t\\t<Box\\n\\t\\t\\t\\t\\tdisplay='flex'\\n\\t\\t\\t\\t\\tflexDirection='row'\\n\\t\\t\\t\\t\\tp={24}\\n\\t\\t\\t\\t\\tborderBlockEndWidth='default'\\n\\t\\t\\t\\t\\tborderBlockEndStyle='solid'\\n\\t\\t\\t\\t\\tborderBlockEndColor='extra-light'\\n\\t\\t\\t\\t\\tflexShrink={0}\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<Box display='flex' flexDirection='row' flexGrow={1} mi='neg-x4'>\\n\\t\\t\\t\\t\\t\\t<Margins inline={4}>\\n\\t\\t\\t\\t\\t\\t\\t<TextInput\\n\\t\\t\\t\\t\\t\\t\\t\\tplaceholder={t('Search_Chat_History')}\\n\\t\\t\\t\\t\\t\\t\\t\\tvalue={text}\\n\\t\\t\\t\\t\\t\\t\\t\\tonChange={handleSearchChange}\\n\\t\\t\\t\\t\\t\\t\\t\\taddon={<Icon name='magnifier' size='x20' />}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</Margins>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t{phase === AsyncStatePhase.LOADING && (\\n\\t\\t\\t\\t\\t<Box pi={24} pb={12}>\\n\\t\\t\\t\\t\\t\\t<Throbber size='x12' />\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t{error && (\\n\\t\\t\\t\\t\\t<States>\\n\\t\\t\\t\\t\\t\\t<StatesIcon name='warning' variation='danger' />\\n\\t\\t\\t\\t\\t\\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\\n\\t\\t\\t\\t\\t\\t<StatesSubtitle>{error.toString()}</StatesSubtitle>\\n\\t\\t\\t\\t\\t</States>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t{phase !== AsyncStatePhase.LOADING && totalItemCount === 0 && <ContextualbarEmptyContent title={t('No_results_found')} />}\\n\\t\\t\\t\\t<Box flexGrow={1} flexShrink={1} overflow='hidden' display='flex'>\\n\\t\\t\\t\\t\\t{!error && totalItemCount > 0 && history.length > 0 && (\\n\\t\\t\\t\\t\\t\\t<Virtuoso\\n\\t\\t\\t\\t\\t\\t\\ttotalCount={totalItemCount}\\n\\t\\t\\t\\t\\t\\t\\tendReached={\\n\\t\\t\\t\\t\\t\\t\\t\\tphase === AsyncStatePhase.LOADING\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t? (): void => undefined\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t: (start): unknown => loadMoreItems(start, Math.min(50, totalItemCount - start))\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\toverscan={25}\\n\\t\\t\\t\\t\\t\\t\\tdata={history}\\n\\t\\t\\t\\t\\t\\t\\tcomponents={{ Scroller: VirtuosoScrollbars }}\\n\\t\\t\\t\\t\\t\\t\\titemContent={(index, data): ReactElement => <ContactHistoryItem key={index} history={data} setChatId={setChatId} />}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</ContextualbarContent>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default ContactHistoryList;\\n\",null],\"names\":[\"_slicedToArray\",\"Box\",\"Margins\",\"TextInput\",\"Icon\",\"Throbber\",\"States\",\"StatesIcon\",\"StatesTitle\",\"StatesSubtitle\",\"React\",\"useMemo\",\"useState\",\"useTranslation\",\"Virtuoso\",\"ContextualbarHeader\",\"ContextualbarContent\",\"ContextualbarTitle\",\"ContextualbarIcon\",\"ContextualbarClose\",\"ContextualbarEmptyContent\",\"VirtuosoScrollbars\",\"useRecordList\",\"AsyncStatePhase\",\"useOmnichannelRoom\",\"ContactHistoryItem\",\"useHistoryList\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"setChatId\",\"close\",\"_useState\",\"_useState2\",\"text\",\"setText\",\"t\",\"_useTranslation\",\"room\",\"_useHistoryList\",\"roomId\",\"_id\",\"filter\",\"visitorId\",\"historyList\",\"itemsList\",\"loadMoreItems\",\"_useRecordList\",\"phase\",\"error\",\"history\",\"items\",\"totalItemCount\",\"itemCount\",\"createElement\",\"Fragment\",\"name\",\"onClick\",\"paddingInline\",\"display\",\"flexDirection\",\"p\",\"borderBlockEndWidth\",\"borderBlockEndStyle\",\"borderBlockEndColor\",\"flexShrink\",\"flexGrow\",\"mi\",\"inline\",\"placeholder\",\"value\",\"onChange\",\"event\",\"currentTarget\",\"addon\",\"size\",\"LOADING\",\"pi\",\"pb\",\"variation\",\"toString\",\"title\",\"overflow\",\"length\",\"totalCount\",\"endReached\",\"start\",\"Math\",\"min\",\"overscan\",\"data\",\"components\",\"Scroller\",\"itemContent\",\"index\",\"key\"],\"mappings\":\"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\"}"}