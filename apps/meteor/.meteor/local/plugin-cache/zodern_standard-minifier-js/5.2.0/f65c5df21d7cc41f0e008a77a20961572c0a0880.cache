{"code":"function module(e,t,n){n.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),n.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){a=e}},1),n.export({processMessageEditing:function(){return i}}),n.link(\"../../../../app/ui-utils/client\",{MessageTypes:function(e){s=e}},0),n.link(\"../../toast\",{dispatchToastMessage:function(e){u=e}},1);var r,a,s,u,i=function(e,t,n){var i;return r.async(function(c){for(;;)switch(c.prev=c.next){case 0:if(e.currentEditing){c.next=2;break}return c.abrupt(\"return\",!1);case 2:if(!s.isSystemMessage(t)){c.next=4;break}return c.abrupt(\"return\",!1);case 4:if(!(!t.msg&&!(null!==(i=t.attachments)&&void 0!==i&&i.length)&&!t.content)){c.next=6;break}return c.abrupt(\"return\",!1);case 6:return c.prev=6,c.next=9,r.awrap(e.data.updateMessage(a(a({},t),{},{_id:e.currentEditing.mid}),n));case 9:c.next=14;break;case 11:c.prev=11,c.t0=c.catch(6),u({type:\"error\",message:c.t0});case 14:return e.currentEditing.stop(),c.abrupt(\"return\",!0);case 16:case\"end\":return c.stop()}},null,null,[[6,11]],Promise)}}","map":"{\"version\":3,\"sources\":[\"client/lib/chats/flows/processMessageEditing.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\n\\nimport { MessageTypes } from '../../../../app/ui-utils/client';\\nimport { dispatchToastMessage } from '../../toast';\\nimport type { ChatAPI } from '../ChatAPI';\\n\\nexport const processMessageEditing = async (\\n\\tchat: ChatAPI,\\n\\tmessage: Pick<IMessage, '_id' | 't'> & Partial<Omit<IMessage, '_id' | 't'>>,\\n\\tpreviewUrls?: string[],\\n): Promise<boolean> => {\\n\\tif (!chat.currentEditing) {\\n\\t\\treturn false;\\n\\t}\\n\\n\\tif (MessageTypes.isSystemMessage(message)) {\\n\\t\\treturn false;\\n\\t}\\n\\n\\tif (!message.msg && !message.attachments?.length && !message.content) {\\n\\t\\treturn false;\\n\\t}\\n\\n\\ttry {\\n\\t\\tawait chat.data.updateMessage({ ...message, _id: chat.currentEditing.mid }, previewUrls);\\n\\t} catch (error) {\\n\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t}\\n\\n\\tchat.currentEditing.stop();\\n\\n\\treturn true;\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_objectSpread\",\"export\",\"processMessageEditing\",\"MessageTypes\",\"dispatchToastMessage\",\"chat\",\"message\",\"previewUrls\",\"_message$attachments\",\"async\",\"_context\",\"prev\",\"next\",\"currentEditing\",\"abrupt\",\"isSystemMessage\",\"msg\",\"attachments\",\"length\",\"content\",\"awrap\",\"data\",\"updateMessage\",\"_id\",\"mid\",\"t0\",\"type\",\"stop\",\"Promise\"],\"mappings\":\"uBAEuBA,EAAMC,IAAA,CAAA,6BAAkC,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAA/DH,EAAOM,MAAE,CAAA,CAAAC,sBAAoB,WAAA,OAAAA,CAAkC,CAAA,GAAAP,EAAAC,IAAA,CAAA,kCAAA,CAAAO,aAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,cAAA,CAAAQ,qBAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAIxD,IAJPC,EAA+DC,EAAAG,EAAAC,EAIlDF,EAAwB,SACpCG,CAAa,CACbC,CAA2E,CAC3EC,CAAsB,EAAA,IAAAC,EAAA,OAAAT,EAAAU,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,GAEjBP,EAAKQ,cAAc,CAAA,CAAAH,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAI,MAAA,CAAA,SAChB,CAAA,EAAK,MAAA,EAAA,GAAA,CAGTX,EAAaY,eAAe,CAACT,GAAQ,CAAAI,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAI,MAAA,CAAA,SACjC,CAAA,EAAK,MAAA,EAAA,GAAA,CAGT,CAAA,CAACR,EAAQU,GAAG,EAAI,CAAA,CAAA,AAAoB,OAApBR,CAAAA,EAACF,EAAQW,WAAW,AAAXA,GAAWT,AAAA,KAAA,IAAAA,GAAnBA,EAAqBU,MAAM,AAANA,GAAU,CAACZ,EAAQa,OAAO,AAAPA,EAAO,CAAAT,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,OAAAF,EAAAI,MAAA,CAAA,SAC5D,CAAA,EAAK,MAAA,EAAA,OAAAJ,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAAb,EAAAqB,KAAA,CAINf,EAAKgB,IAAI,CAACC,aAAa,CAAAtB,EAAAA,EAAA,CAAA,EAAMM,GAAO,CAAA,EAAA,CAAEiB,IAAKlB,EAAKQ,cAAc,CAACW,GAAAA,AAAG,GAAIjB,GAAY,MAAA,EAAAG,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,GAAAF,EAAAC,IAAA,CAAA,GAAAD,EAAAe,EAAA,CAAAf,EAAA,KAAA,CAAA,GAExFN,EAAqB,CAAEsB,KAAM,QAASpB,QAAOI,EAAAe,EAAAA,AAAO,EAAI,MAAA,GAG9B,OAA3BpB,EAAKQ,cAAc,CAACc,IAAI,GAAGjB,EAAAI,MAAA,CAAA,SAEpB,CAAA,EAAI,MAAA,GAAA,IAAA,MAAA,OAAAJ,EAAAiB,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,GAAA,CAAA,CAAAC,QAAA\"}"}