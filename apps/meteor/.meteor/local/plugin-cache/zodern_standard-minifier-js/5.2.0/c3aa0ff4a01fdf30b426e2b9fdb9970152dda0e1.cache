{"code":"function module(e,n,t){let a,r,l,c,i,s,o,m,u,d,f,h,E,P,g,p,k,v;t.link(\"@rocket.chat/fuselage\",{ButtonGroup(e){a=e},Button(e){r=e},Box(e){l=e},Accordion(e){c=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){i=e},useTranslation(e){s=e},useEndpoint(e){o=e},useUserPreference(e){m=e},useSetting(e){u=e}},1),t.link(\"react\",{default(e){d=e}},2),t.link(\"react-hook-form\",{useForm(e){f=e},FormProvider(e){h=e}},3),t.link(\"../../../components/Page\",{Page(e){E=e},PageHeader(e){P=e},PageScrollableContentWithShadow(e){g=e},PageFooter(e){p=e}},4),t.link(\"./PreferencesConversationTranscript\",{default(e){k=e}},5),t.link(\"./PreferencesGeneral\",{PreferencesGeneral(e){v=e}},6),t.exportDefault(()=>{var e,n,t;let S=s(),y=i(),C=u(\"Livechat_transcript_send_always\"),T=null!==(e=m(\"omnichannelTranscriptPDF\"))&&void 0!==e&&e,x=null!==(n=m(\"omnichannelTranscriptEmail\"))&&void 0!==n&&n,_=null===(t=m(\"omnichannelHideConversationAfterClosing\"))||void 0===t||t,w=f({defaultValues:{omnichannelTranscriptPDF:T,omnichannelTranscriptEmail:C||x,omnichannelHideConversationAfterClosing:_}}),{handleSubmit:D,formState:{isDirty:F},reset:b}=w,B=o(\"POST\",\"/v1/users.setPreferences\"),G=async e=>{try{await B({data:e}),b(e),y({type:\"success\",message:S(\"Preferences_saved\")})}catch(e){y({type:\"error\",message:e})}};return d.createElement(E,null,d.createElement(P,{title:S(\"Omnichannel\")}),d.createElement(g,{is:\"form\",onSubmit:D(G)},d.createElement(l,{maxWidth:\"x600\",w:\"full\",alignSelf:\"center\"},d.createElement(c,null,d.createElement(h,w,d.createElement(v,null),d.createElement(k,null))))),d.createElement(p,{isDirty:F},d.createElement(a,null,d.createElement(r,{onClick:()=>b({omnichannelTranscriptPDF:T,omnichannelTranscriptEmail:x})},S(\"Cancel\")),d.createElement(r,{primary:!0,disabled:!F,onClick:D(G)},S(\"Save_changes\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/account/omnichannel/OmnichannelPreferencesPage.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { ButtonGroup, Button, Box, Accordion } from '@rocket.chat/fuselage';\\nimport { useToastMessageDispatch, useTranslation, useEndpoint, useUserPreference, useSetting } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React from 'react';\\nimport { useForm, FormProvider } from 'react-hook-form';\\n\\nimport { Page, PageHeader, PageScrollableContentWithShadow, PageFooter } from '../../../components/Page';\\nimport PreferencesConversationTranscript from './PreferencesConversationTranscript';\\nimport { PreferencesGeneral } from './PreferencesGeneral';\\n\\ntype FormData = {\\n\\tomnichannelTranscriptPDF: boolean;\\n\\tomnichannelTranscriptEmail: boolean;\\n};\\n\\nconst OmnichannelPreferencesPage = (): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst alwaysSendEmailTranscript = useSetting<boolean>('Livechat_transcript_send_always');\\n\\tconst omnichannelTranscriptPDF = useUserPreference<boolean>('omnichannelTranscriptPDF') ?? false;\\n\\tconst omnichannelTranscriptEmail = useUserPreference<boolean>('omnichannelTranscriptEmail') ?? false;\\n\\tconst omnichannelHideConversationAfterClosing = useUserPreference<boolean>('omnichannelHideConversationAfterClosing') ?? true;\\n\\n\\tconst methods = useForm({\\n\\t\\tdefaultValues: {\\n\\t\\t\\tomnichannelTranscriptPDF,\\n\\t\\t\\tomnichannelTranscriptEmail: alwaysSendEmailTranscript || omnichannelTranscriptEmail,\\n\\t\\t\\tomnichannelHideConversationAfterClosing,\\n\\t\\t},\\n\\t});\\n\\n\\tconst {\\n\\t\\thandleSubmit,\\n\\t\\tformState: { isDirty },\\n\\t\\treset,\\n\\t} = methods;\\n\\n\\tconst saveFn = useEndpoint('POST', '/v1/users.setPreferences');\\n\\n\\tconst handleSave = async (data: FormData) => {\\n\\t\\ttry {\\n\\t\\t\\tawait saveFn({ data });\\n\\t\\t\\treset(data);\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Preferences_saved') });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t};\\n\\n\\treturn (\\n\\t\\t<Page>\\n\\t\\t\\t<PageHeader title={t('Omnichannel')} />\\n\\t\\t\\t<PageScrollableContentWithShadow is='form' onSubmit={handleSubmit(handleSave)}>\\n\\t\\t\\t\\t<Box maxWidth='x600' w='full' alignSelf='center'>\\n\\t\\t\\t\\t\\t<Accordion>\\n\\t\\t\\t\\t\\t\\t<FormProvider {...methods}>\\n\\t\\t\\t\\t\\t\\t\\t<PreferencesGeneral />\\n\\t\\t\\t\\t\\t\\t\\t<PreferencesConversationTranscript />\\n\\t\\t\\t\\t\\t\\t</FormProvider>\\n\\t\\t\\t\\t\\t</Accordion>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</PageScrollableContentWithShadow>\\n\\t\\t\\t<PageFooter isDirty={isDirty}>\\n\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t<Button onClick={() => reset({ omnichannelTranscriptPDF, omnichannelTranscriptEmail })}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button primary disabled={!isDirty} onClick={handleSubmit(handleSave)}>\\n\\t\\t\\t\\t\\t\\t{t('Save_changes')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</PageFooter>\\n\\t\\t</Page>\\n\\t);\\n};\\n\\nexport default OmnichannelPreferencesPage;\\n\",null],\"names\":[\"ButtonGroup\",\"Button\",\"Box\",\"Accordion\",\"useToastMessageDispatch\",\"useTranslation\",\"useEndpoint\",\"useUserPreference\",\"useSetting\",\"React\",\"useForm\",\"FormProvider\",\"Page\",\"PageHeader\",\"PageScrollableContentWithShadow\",\"PageFooter\",\"PreferencesConversationTranscript\",\"PreferencesGeneral\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"OmnichannelPreferencesPage\",\"_useUserPreference\",\"_useUserPreference2\",\"_useUserPreference3\",\"t\",\"dispatchToastMessage\",\"alwaysSendEmailTranscript\",\"omnichannelTranscriptPDF\",\"omnichannelTranscriptEmail\",\"omnichannelHideConversationAfterClosing\",\"methods\",\"defaultValues\",\"handleSubmit\",\"formState\",\"isDirty\",\"reset\",\"saveFn\",\"handleSave\",\"data\",\"type\",\"message\",\"error\",\"createElement\",\"title\",\"is\",\"onSubmit\",\"maxWidth\",\"w\",\"alignSelf\",\"onClick\",\"primary\",\"disabled\"],\"mappings\":\"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\"}"}