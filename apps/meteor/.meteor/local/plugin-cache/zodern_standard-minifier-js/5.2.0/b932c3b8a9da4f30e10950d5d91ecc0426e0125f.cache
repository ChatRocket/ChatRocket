{"code":"function module(n,t,e){e.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(n){u=n}},0),e.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(n){o=n}},1),e.export({useAsyncState:function(){return d},AsyncStatePhase:function(){return a},AsyncState:function(){return l}}),e.link(\"@rocket.chat/fuselage-hooks\",{useSafely:function(n){c=n}},0),e.link(\"react\",{useCallback:function(n){r=n},useMemo:function(n){i=n},useState:function(n){f=n}},1),e.link(\"../lib/asyncState\",{AsyncStatePhase:function(n){a=n},AsyncState:function(n){l=n},asyncState:function(n){s=n}},2);var u,o,c,r,i,f,a,l,s,d=function(n){var t=c(f(function(){return void 0===n?s.loading():s.resolved(\"function\"==typeof n?n():n)})),e=o(t,2),a=e[0],l=e[1],d=r(function(n){l(function(t){return\"function\"==typeof n?s.resolve(t,n(t.value)):s.resolve(t,n)})},[l]),y=r(function(n){l(function(t){return s.reject(t,n)})},[l]),S=r(function(){l(function(n){return s.update(n)})},[l]),k=r(function(){l(function(n){return s.reload(n)})},[l]);return i(function(){return u(u({},a),{},{resolve:d,reject:y,reset:k,update:S})},[a,d,y,k,S])}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useAsyncState.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useSafely } from '@rocket.chat/fuselage-hooks';\\nimport { useCallback, useMemo, useState } from 'react';\\n\\nimport { AsyncStatePhase, AsyncState, asyncState } from '../lib/asyncState';\\n\\ntype AsyncStateObject<T> = AsyncState<T> & {\\n\\tresolve: (value: T | ((prev: T | undefined) => T)) => void;\\n\\treject: (error: Error) => void;\\n\\treset: () => void;\\n\\tupdate: () => void;\\n};\\n\\nexport const useAsyncState = <T>(initialValue?: T | (() => T)): AsyncStateObject<T> => {\\n\\tconst [state, setState] = useSafely(\\n\\t\\tuseState<AsyncState<T>>(() => {\\n\\t\\t\\tif (typeof initialValue === 'undefined') {\\n\\t\\t\\t\\treturn asyncState.loading<T>();\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn asyncState.resolved<T>(typeof initialValue === 'function' ? (initialValue as () => T)() : initialValue);\\n\\t\\t}),\\n\\t);\\n\\n\\tconst resolve = useCallback(\\n\\t\\t(value: T | ((prev: T | undefined) => T)) => {\\n\\t\\t\\tsetState((state) => {\\n\\t\\t\\t\\tif (typeof value === 'function') {\\n\\t\\t\\t\\t\\treturn asyncState.resolve(state, (value as (prev: T | undefined) => T)(state.value));\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn asyncState.resolve(state, value);\\n\\t\\t\\t});\\n\\t\\t},\\n\\t\\t[setState],\\n\\t);\\n\\n\\tconst reject = useCallback(\\n\\t\\t(error: Error) => {\\n\\t\\t\\tsetState((state) => asyncState.reject(state, error));\\n\\t\\t},\\n\\t\\t[setState],\\n\\t);\\n\\n\\tconst update = useCallback(() => {\\n\\t\\tsetState((state) => asyncState.update(state));\\n\\t}, [setState]);\\n\\n\\tconst reset = useCallback(() => {\\n\\t\\tsetState((state) => asyncState.reload(state));\\n\\t}, [setState]);\\n\\n\\treturn useMemo(\\n\\t\\t() => ({\\n\\t\\t\\t...state,\\n\\t\\t\\tresolve,\\n\\t\\t\\treject,\\n\\t\\t\\treset,\\n\\t\\t\\tupdate,\\n\\t\\t}),\\n\\t\\t[state, resolve, reject, reset, update],\\n\\t);\\n};\\n\\nexport { AsyncStatePhase, AsyncState };\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"_slicedToArray\",\"export\",\"useAsyncState\",\"AsyncStatePhase\",\"AsyncState\",\"useSafely\",\"useCallback\",\"useMemo\",\"useState\",\"asyncState\",\"initialValue\",\"_useSafely\",\"loading\",\"resolved\",\"_useSafely2\",\"state\",\"setState\",\"resolve\",\"value\",\"reject\",\"error\",\"update\",\"reset\",\"reload\"],\"mappings\":\"uBAAkBA,EAAEC,IAAM,CAAA,uCAA8B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAxDH,EAAOM,MAAE,CAAA,CAAAC,cAAiB,WAAA,OAAAA,CAA8B,EAAAC,gBAAA,WAAA,OAAAA,CAAA,EAAAC,WAAA,WAAA,OAAAA,CAAA,CAAA,GAAAT,EAAAC,IAAA,CAAA,8BAAA,CAAAS,UAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAU,YAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,EAAAS,QAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,EAAAU,SAAA,SAAAV,CAAA,EAAAU,EAAAV,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oBAAA,CAAAO,gBAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,EAAAM,WAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,EAAAW,WAAA,SAAAX,CAAA,EAAAW,EAAAX,CAAA,CAAA,EAAA,GAYjD,IAZPC,EAAwDC,EAAAK,EAAAC,EAAAC,EAAAC,EAAAL,EAAAC,EAAAK,EAY3CP,EAAgB,SAAIQ,CAA4B,EAC5D,IAAAC,EAA0BN,EACzBG,EAAwB,kBACvB,AAAI,AAAwB,KAAA,IAAjBE,EACHD,EAAWG,OAAO,GAGnBH,EAAWI,QAAQ,CAAI,AAAwB,YAAxB,OAAOH,EAA+BA,IAA6BA,EAClG,IACAI,EAAAd,EAAAW,EAAA,GARMI,EAAKD,CAAA,CAAA,EAAA,CAAEE,EAAQF,CAAA,CAAA,EAAA,CAUhBG,EAAUX,EACf,SAACY,CAAuC,EACvCF,EAAS,SAACD,CAAK,QACd,AAAI,AAAiB,YAAjB,OAAOG,EACHT,EAAWQ,OAAO,CAACF,EAAQG,EAAqCH,EAAMG,KAAK,GAG5ET,EAAWQ,OAAO,CAACF,EAAOG,EAClC,EACD,EACA,CAACF,EAAS,EAGLG,EAASb,EACd,SAACc,CAAY,EACZJ,EAAS,SAACD,CAAK,EAAA,OAAKN,EAAWU,MAAM,CAACJ,EAAOK,EAAM,EACpD,EACA,CAACJ,EAAS,EAGLK,EAASf,EAAY,WAC1BU,EAAS,SAACD,CAAK,EAAA,OAAKN,EAAWY,MAAM,CAACN,EAAM,EAC7C,EAAG,CAACC,EAAS,EAEPM,EAAQhB,EAAY,WACzBU,EAAS,SAACD,CAAK,EAAA,OAAKN,EAAWc,MAAM,CAACR,EAAM,EAC7C,EAAG,CAACC,EAAS,EAEb,OAAOT,EACN,WAAA,OAAAR,EAAAA,EAAA,CAAA,EACIgB,GAAK,CAAA,EAAA,CACRE,QAAAA,EACAE,OAAAA,EACAG,MAAAA,EACAD,OAAAA,CAAM,EAAA,EAEP,CAACN,EAAOE,EAASE,EAAQG,EAAOD,EAAO,CAEzC\"}"}