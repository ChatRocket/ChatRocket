{"code":"function module(e,t,a){let l,o,n,r,s,i,c;let d=[\"attachmentName\",\"headers\",\"dataAvailable\",\"dataExtractor\"];a.link(\"@babel/runtime/helpers/extends\",{default(e){l=e}},0),a.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){o=e}},1),a.link(\"@rocket.chat/fuselage\",{IconButton(e){n=e}},0),a.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){r=e},useTranslation(e){s=e}},1),a.link(\"react\",{default(e){i=e}},2),a.link(\"../../lib/download\",{downloadCsvAs(e){c=e}},3),a.exportDefault(e=>{let{attachmentName:t,headers:a,dataAvailable:u,dataExtractor:h}=e,b=o(e,d),k=s(),m=r();return i.createElement(n,l({secondary:!0,small:!0,disabled:!u,onClick:()=>{u&&Promise.resolve(h()).then(e=>{e&&c([a,...e],t)}).catch(e=>{m({type:\"error\",message:e})})},\"aria-label\":k(\"Download_Info\"),icon:\"download\"},b))})}","map":"{\"version\":3,\"sources\":[\"client/components/dashboards/DownloadDataButton.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { Box } from '@rocket.chat/fuselage';\\nimport { IconButton } from '@rocket.chat/fuselage';\\nimport { useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ComponentProps, ReactElement } from 'react';\\nimport React from 'react';\\n\\nimport { downloadCsvAs } from '../../lib/download';\\n\\ntype RowFor<THeaders extends readonly string[]> = readonly unknown[] & {\\n\\tlength: THeaders['length'];\\n};\\n\\ntype DownloadDataButtonProps<THeaders extends readonly string[]> = {\\n\\tattachmentName: string;\\n\\theaders: RowFor<THeaders>;\\n\\tdataAvailable: boolean;\\n\\tdataExtractor: () => Promise<RowFor<THeaders>[] | undefined> | RowFor<THeaders>[] | undefined;\\n} & Omit<ComponentProps<typeof Box>, 'attachmentName' | 'headers' | 'data'>;\\n\\nconst DownloadDataButton = <H extends readonly string[]>({\\n\\tattachmentName,\\n\\theaders,\\n\\tdataAvailable,\\n\\tdataExtractor,\\n\\t...props\\n}: DownloadDataButtonProps<H>): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst handleClick = (): void => {\\n\\t\\tif (!dataAvailable) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tPromise.resolve(dataExtractor())\\n\\t\\t\\t.then((data) => {\\n\\t\\t\\t\\tif (!data) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tdownloadCsvAs([headers, ...data], attachmentName);\\n\\t\\t\\t})\\n\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t});\\n\\t};\\n\\n\\treturn (\\n\\t\\t<IconButton\\n\\t\\t\\tsecondary\\n\\t\\t\\tsmall\\n\\t\\t\\tdisabled={!dataAvailable}\\n\\t\\t\\tonClick={handleClick}\\n\\t\\t\\taria-label={t('Download_Info')}\\n\\t\\t\\ticon='download'\\n\\t\\t\\t{...props}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default DownloadDataButton;\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"IconButton\",\"useToastMessageDispatch\",\"useTranslation\",\"React\",\"downloadCsvAs\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"attachmentName\",\"headers\",\"dataAvailable\",\"dataExtractor\",\"props\",\"_excluded\",\"t\",\"dispatchToastMessage\",\"createElement\",\"secondary\",\"small\",\"disabled\",\"onClick\",\"handleClick\",\"Promise\",\"resolve\",\"then\",\"data\",\"catch\",\"error\",\"type\",\"message\",\"icon\"],\"mappings\":\"2BACAA,EAAmDC,EAAnDC,EAAmDC,EAAAC,EAAAC,EAAAC,qEAA1CC,EAAUC,IAAE,CAAA,iCAA8B,CAAAC,QAAAC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iDAAA,CAAAC,QAAAC,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAA1CH,EAAYC,IAAA,CAAM,wBAAwB,CAAAN,WAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAL,wBAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,eAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qBAAA,CAAAF,cAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAnDH,EAAOI,aAAY,CAkBQC,IAMoB,GANU,CACxDC,eAAAA,CAAc,CACdC,QAAAA,CAAO,CACPC,cAAAA,CAAa,CACbC,cAAAA,CAAAA,CAE4B,CAAAJ,EADzBK,EAAKhB,EAAAW,EAAAM,GAEFC,EAAIf,IACJgB,EAAuBjB,IAoB7B,OACCE,EAAAgB,aAAA,CAACnB,EAAUF,EAAA,CACVsB,UAAS,CAAA,EACTC,MAAK,CAAA,EACLC,SAAU,CAACT,EACXU,QAvBkBC,KACdX,GAILY,QAAQC,OAAO,CAACZ,KACda,IAAI,CAAEC,IACDA,GAILxB,EAAc,CAACQ,KAAYgB,EAAK,CAAEjB,EACnC,GACCkB,KAAK,CAAEC,IACPZ,EAAqB,CAAEa,KAAM,QAASC,QAASF,CAAK,EACrD,EACF,EAQE,aAAYb,EAAE,iBACdgB,KAAK,UAAU,EACXlB,GAGP\"}"}