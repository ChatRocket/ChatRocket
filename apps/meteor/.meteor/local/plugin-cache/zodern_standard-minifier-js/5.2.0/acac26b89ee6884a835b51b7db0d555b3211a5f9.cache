{"code":"function module(e,t,l){let n,o,a,r,i,u,m,c,s,d,p,v,k,f;let h=[\"value\",\"onChange\",\"scope\",\"renderRoomIcon\",\"setSelectedRoom\"],b=[\"value\",\"label\"];l.link(\"@babel/runtime/helpers/extends\",{default(e){n=e}},0),l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){o=e}},1),l.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){a=e}},2),l.link(\"@rocket.chat/fuselage\",{AutoComplete(e){r=e},Option(e){i=e},Box(e){u=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue(e){m=e}},1),l.link(\"@rocket.chat/ui-avatar\",{RoomAvatar(e){c=e}},2),l.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){s=e}},3),l.link(\"@tanstack/react-query\",{useQuery(e){d=e}},4),l.link(\"react\",{default(e){p=e},memo(e){v=e},useMemo(e){k=e},useState(e){f=e}},5);let g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\";return{selector:JSON.stringify({name:e})}},y={admin:{endpoint:\"/v1/rooms.autocomplete.adminRooms\",key:\"roomsAutoCompleteAdmin\"},regular:{endpoint:\"/v1/rooms.autocomplete.channelAndPrivate\",key:\"roomsAutoCompleteRegular\"}};l.exportDefault(v(e=>{var t;let{value:l,onChange:v,scope:E=\"regular\",renderRoomIcon:S,setSelectedRoom:x}=e,A=a(e,h),[C,R]=f(\"\"),D=m(C,300),P=s(\"GET\",y[E].endpoint),j=d([y[E].key,D],()=>P(g(D)),{keepPreviousData:!0}),z=k(()=>j.isSuccess?j.data.items.map(e=>{let{name:t,fname:l,_id:n,avatarETag:o,t:a,encrypted:r}=e;return{value:n,label:{name:l||t,avatarETag:o,type:a,encrypted:r}}}):[],[null===(t=j.data)||void 0===t?void 0:t.items,j.isSuccess]);return p.createElement(r,n({},A,{value:l,onChange:e=>{if(v(e),x&&\"function\"==typeof x){var t;let l=null==j?void 0:null===(t=j.data)||void 0===t?void 0:t.items.find(t=>{let{_id:l}=t;return l===e});x(l)}},filter:C,setFilter:R,renderSelected:e=>{let{selected:{value:t,label:l}}=e;return p.createElement(p.Fragment,null,p.createElement(u,{margin:\"none\",mi:2},p.createElement(c,{size:\"x20\",room:o({type:(null==l?void 0:l.type)||\"c\",_id:t},l)})),p.createElement(u,{margin:\"none\",mi:2},null==l?void 0:l.name),null==S?void 0:S(o({},l)))},renderItem:e=>{let{value:t,label:l}=e,r=a(e,b);return p.createElement(i,n({},r,{label:l.name,avatar:p.createElement(c,{size:\"x20\",room:o({_id:t},l)})}))},options:z}))}))}","map":"{\"version\":3,\"sources\":[\"client/components/RoomAutoComplete/RoomAutoComplete.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { AutoComplete, Option, Box } from '@rocket.chat/fuselage';\\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\\nimport { RoomAvatar } from '@rocket.chat/ui-avatar';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ComponentProps, ReactElement } from 'react';\\nimport React, { memo, useMemo, useState } from 'react';\\n\\nconst generateQuery = (\\n\\tterm = '',\\n): {\\n\\tselector: string;\\n} => ({ selector: JSON.stringify({ name: term }) });\\n\\ntype RoomAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'> & {\\n\\tscope?: 'admin' | 'regular';\\n\\trenderRoomIcon?: (props: { encrypted: IRoom['encrypted']; type: IRoom['t'] }) => ReactElement | null;\\n\\tsetSelectedRoom?: React.Dispatch<React.SetStateAction<IRoom | undefined>>;\\n};\\n\\nconst AVATAR_SIZE = 'x20';\\n\\nconst ROOM_AUTOCOMPLETE_PARAMS = {\\n\\tadmin: {\\n\\t\\tendpoint: '/v1/rooms.autocomplete.adminRooms',\\n\\t\\tkey: 'roomsAutoCompleteAdmin',\\n\\t},\\n\\tregular: {\\n\\t\\tendpoint: '/v1/rooms.autocomplete.channelAndPrivate',\\n\\t\\tkey: 'roomsAutoCompleteRegular',\\n\\t},\\n} as const;\\n\\nconst RoomAutoComplete = ({ value, onChange, scope = 'regular', renderRoomIcon, setSelectedRoom, ...props }: RoomAutoCompleteProps) => {\\n\\tconst [filter, setFilter] = useState('');\\n\\tconst filterDebounced = useDebouncedValue(filter, 300);\\n\\tconst roomsAutoCompleteEndpoint = useEndpoint('GET', ROOM_AUTOCOMPLETE_PARAMS[scope].endpoint);\\n\\n\\tconst result = useQuery(\\n\\t\\t[ROOM_AUTOCOMPLETE_PARAMS[scope].key, filterDebounced],\\n\\t\\t() => roomsAutoCompleteEndpoint(generateQuery(filterDebounced)),\\n\\t\\t{\\n\\t\\t\\tkeepPreviousData: true,\\n\\t\\t},\\n\\t);\\n\\n\\tconst options = useMemo(\\n\\t\\t() =>\\n\\t\\t\\tresult.isSuccess\\n\\t\\t\\t\\t? result.data.items.map(({ name, fname, _id, avatarETag, t, encrypted }) => ({\\n\\t\\t\\t\\t\\t\\tvalue: _id,\\n\\t\\t\\t\\t\\t\\tlabel: { name: fname || name, avatarETag, type: t, encrypted },\\n\\t\\t\\t\\t  }))\\n\\t\\t\\t\\t: [],\\n\\t\\t[result.data?.items, result.isSuccess],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<AutoComplete\\n\\t\\t\\t{...props}\\n\\t\\t\\tvalue={value}\\n\\t\\t\\tonChange={(val) => {\\n\\t\\t\\t\\tonChange(val);\\n\\n\\t\\t\\t\\tif (setSelectedRoom && typeof setSelectedRoom === 'function') {\\n\\t\\t\\t\\t\\tconst selectedRoom = result?.data?.items.find(({ _id }) => _id === val) as unknown as IRoom;\\n\\t\\t\\t\\t\\tsetSelectedRoom(selectedRoom);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}}\\n\\t\\t\\tfilter={filter}\\n\\t\\t\\tsetFilter={setFilter}\\n\\t\\t\\trenderSelected={({ selected: { value, label } }) => (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<Box margin='none' mi={2}>\\n\\t\\t\\t\\t\\t\\t<RoomAvatar size={AVATAR_SIZE} room={{ type: label?.type || 'c', _id: value, ...label }} />\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t<Box margin='none' mi={2}>\\n\\t\\t\\t\\t\\t\\t{label?.name}\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t{renderRoomIcon?.({ ...label })}\\n\\t\\t\\t\\t</>\\n\\t\\t\\t)}\\n\\t\\t\\trenderItem={({ value, label, ...props }) => (\\n\\t\\t\\t\\t<Option {...props} label={label.name} avatar={<RoomAvatar size={AVATAR_SIZE} room={{ _id: value, ...label }} />} />\\n\\t\\t\\t)}\\n\\t\\t\\toptions={options}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(RoomAutoComplete);\\n\",null],\"names\":[\"_extends\",\"_objectSpread\",\"_objectWithoutProperties\",\"AutoComplete\",\"Option\",\"Box\",\"useDebouncedValue\",\"RoomAvatar\",\"useEndpoint\",\"useQuery\",\"React\",\"memo\",\"useMemo\",\"useState\",\"module\",\"link\",\"default\",\"v\",\"generateQuery\",\"term\",\"arguments\",\"length\",\"undefined\",\"selector\",\"JSON\",\"stringify\",\"name\",\"ROOM_AUTOCOMPLETE_PARAMS\",\"admin\",\"endpoint\",\"key\",\"regular\",\"exportDefault\",\"_ref\",\"_result$data\",\"value\",\"onChange\",\"scope\",\"renderRoomIcon\",\"setSelectedRoom\",\"props\",\"_excluded\",\"filter\",\"setFilter\",\"filterDebounced\",\"roomsAutoCompleteEndpoint\",\"result\",\"keepPreviousData\",\"options\",\"isSuccess\",\"data\",\"items\",\"map\",\"_ref2\",\"fname\",\"_id\",\"avatarETag\",\"t\",\"encrypted\",\"label\",\"type\",\"createElement\",\"val\",\"_result$data2\",\"selectedRoom\",\"find\",\"_ref3\",\"renderSelected\",\"_ref4\",\"selected\",\"Fragment\",\"margin\",\"mi\",\"size\",\"room\",\"renderItem\",\"_ref5\",\"_excluded2\",\"avatar\"],\"mappings\":\"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\"}"}