{"code":"function module(e,n,t){var l,r,a,u,i,o,c,f,s,m,d,g,k,h,p,v;t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){l=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){r=e}},1),t.link(\"@rocket.chat/fuselage\",{TextInput:function(e){a=e},Chip:function(e){u=e},Button:function(e){i=e},FieldLabel:function(e){o=e},FieldRow:function(e){c=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){f=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){s=e}},2),t.link(\"react\",{default:function(e){m=e},useMemo:function(e){d=e},useState:function(e){g=e}},3),t.link(\"react-i18next\",{useTranslation:function(e){k=e}},4),t.link(\"../../views/omnichannel/additionalForms\",{CurrentChatTags:function(e){h=e}},5),t.link(\"./Skeleton\",{FormSkeleton:function(e){p=e}},6),t.link(\"./hooks/useLivechatTags\",{useLivechatTags:function(e){v=e}},7),t.exportDefault(function(e){var n=e.tags,t=void 0===n?[]:n,E=e.handler,b=e.error,T=e.tagRequired,C=e.department,x=k().t,y=v({department:C,viewAll:!C}),A=y.data,F=y.isInitialLoading,_=d(function(){return t.filter(function(e){return!(null!=A&&A.tags.find(function(n){return n.name===e}))})},[t,null==A?void 0:A.tags]),w=s(),L=g(\"\"),M=r(L,2),S=M[0],q=M[1],D=d(function(){return t.map(function(e){return{label:e,value:e}})},[t]),I=function(e){t&&E(t.filter(function(n){return n!==e}))},R=f(function(){if(t){if(!S||\"\"===S.trim()){w({type:\"error\",message:x(\"Enter_a_tag\")}),q(\"\");return}if(t.includes(S)){w({type:\"error\",message:x(\"Tag_already_exists\")});return}E([].concat(l(t),[S])),q(\"\")}});return F?m.createElement(p,null):m.createElement(m.Fragment,null,m.createElement(o,{required:T,mb:4},x(\"Tags\")),null!=A&&A.tags&&null!=A&&A.tags.length?m.createElement(c,null,m.createElement(h,{value:D,handler:function(e){E(e.map(function(e){return e.label}))},department:C,viewAll:!C})):m.createElement(m.Fragment,null,m.createElement(c,null,m.createElement(a,{error:b,value:S,onChange:function(e){return q(e.currentTarget.value)},flexGrow:1,placeholder:x(\"Enter_a_tag\")}),m.createElement(i,{disabled:!S,mis:8,title:x(\"Add\"),onClick:R},x(\"Add\")))),_.length>0&&m.createElement(c,{justifyContent:\"flex-start\"},null==_?void 0:_.map(function(e,n){return m.createElement(u,{key:n,onClick:function(){return I(e)},mie:8},e)})))})}","map":"{\"version\":3,\"sources\":[\"client/components/Omnichannel/Tags.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { TextInput, Chip, Button, FieldLabel, FieldRow } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport type { ChangeEvent, ReactElement } from 'react';\\nimport React, { useMemo, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { CurrentChatTags } from '../../views/omnichannel/additionalForms';\\nimport { FormSkeleton } from './Skeleton';\\nimport { useLivechatTags } from './hooks/useLivechatTags';\\n\\ntype TagsProps = {\\n\\ttags?: string[];\\n\\thandler: (value: string[]) => void;\\n\\terror?: string;\\n\\ttagRequired?: boolean;\\n\\tdepartment?: string;\\n};\\n\\nconst Tags = ({ tags = [], handler, error, tagRequired, department }: TagsProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst { data: tagsResult, isInitialLoading } = useLivechatTags({\\n\\t\\tdepartment,\\n\\t\\tviewAll: !department,\\n\\t});\\n\\n\\tconst customTags = useMemo(() => {\\n\\t\\treturn tags.filter((tag) => !tagsResult?.tags.find((rtag) => rtag.name === tag));\\n\\t}, [tags, tagsResult?.tags]);\\n\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst [tagValue, handleTagValue] = useState('');\\n\\n\\tconst paginatedTagValue = useMemo(() => tags.map((tag) => ({ label: tag, value: tag })), [tags]);\\n\\n\\tconst removeTag = (tagToRemove: string): void => {\\n\\t\\tif (!tags) return;\\n\\n\\t\\thandler(tags.filter((tag) => tag !== tagToRemove));\\n\\t};\\n\\n\\tconst handleTagTextSubmit = useMutableCallback(() => {\\n\\t\\tif (!tags) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (!tagValue || tagValue.trim() === '') {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: t('Enter_a_tag') });\\n\\t\\t\\thandleTagValue('');\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (tags.includes(tagValue)) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: t('Tag_already_exists') });\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\thandler([...tags, tagValue]);\\n\\t\\thandleTagValue('');\\n\\t});\\n\\n\\tif (isInitialLoading) {\\n\\t\\treturn <FormSkeleton />;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<FieldLabel required={tagRequired} mb={4}>\\n\\t\\t\\t\\t{t('Tags')}\\n\\t\\t\\t</FieldLabel>\\n\\n\\t\\t\\t{tagsResult?.tags && tagsResult?.tags.length ? (\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<CurrentChatTags\\n\\t\\t\\t\\t\\t\\tvalue={paginatedTagValue}\\n\\t\\t\\t\\t\\t\\thandler={(tags: { label: string; value: string }[]): void => {\\n\\t\\t\\t\\t\\t\\t\\thandler(tags.map((tag) => tag.label));\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\tdepartment={department}\\n\\t\\t\\t\\t\\t\\tviewAll={!department}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t) : (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<TextInput\\n\\t\\t\\t\\t\\t\\t\\terror={error}\\n\\t\\t\\t\\t\\t\\t\\tvalue={tagValue}\\n\\t\\t\\t\\t\\t\\t\\tonChange={({ currentTarget }: ChangeEvent<HTMLInputElement>): void => handleTagValue(currentTarget.value)}\\n\\t\\t\\t\\t\\t\\t\\tflexGrow={1}\\n\\t\\t\\t\\t\\t\\t\\tplaceholder={t('Enter_a_tag')}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t<Button disabled={!tagValue} mis={8} title={t('Add')} onClick={handleTagTextSubmit}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Add')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t</>\\n\\t\\t\\t)}\\n\\n\\t\\t\\t{customTags.length > 0 && (\\n\\t\\t\\t\\t<FieldRow justifyContent='flex-start'>\\n\\t\\t\\t\\t\\t{customTags?.map((tag, i) => (\\n\\t\\t\\t\\t\\t\\t<Chip key={i} onClick={(): void => removeTag(tag)} mie={8}>\\n\\t\\t\\t\\t\\t\\t\\t{tag}\\n\\t\\t\\t\\t\\t\\t</Chip>\\n\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t)}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default Tags;\\n\",null],\"names\":[\"_toConsumableArray\",\"_slicedToArray\",\"TextInput\",\"Chip\",\"Button\",\"FieldLabel\",\"FieldRow\",\"useMutableCallback\",\"useToastMessageDispatch\",\"React\",\"useMemo\",\"useState\",\"useTranslation\",\"CurrentChatTags\",\"FormSkeleton\",\"useLivechatTags\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_ref$tags\",\"tags\",\"handler\",\"error\",\"tagRequired\",\"department\",\"t\",\"_useTranslation\",\"_useLivechatTags\",\"viewAll\",\"tagsResult\",\"data\",\"isInitialLoading\",\"customTags\",\"filter\",\"tag\",\"find\",\"rtag\",\"name\",\"dispatchToastMessage\",\"_useState\",\"_useState2\",\"tagValue\",\"handleTagValue\",\"paginatedTagValue\",\"map\",\"label\",\"value\",\"removeTag\",\"tagToRemove\",\"handleTagTextSubmit\",\"trim\",\"type\",\"message\",\"includes\",\"concat\",\"createElement\",\"Fragment\",\"required\",\"mb\",\"length\",\"onChange\",\"_ref2\",\"currentTarget\",\"flexGrow\",\"placeholder\",\"disabled\",\"mis\",\"title\",\"onClick\",\"justifyContent\",\"i\",\"key\",\"mie\"],\"mappings\":\"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\"}"}