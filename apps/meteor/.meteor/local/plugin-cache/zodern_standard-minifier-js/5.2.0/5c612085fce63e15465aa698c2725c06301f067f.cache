{"code":"function module(e,n,s){s.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){o=e}},0),s.export({useRoomList:function(){return m}}),s.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue:function(e){t=e}},0),s.link(\"@rocket.chat/ui-contexts\",{useUserPreference:function(e){i=e},useUserSubscriptions:function(e){u=e},useSetting:function(e){r=e}},1),s.link(\"react\",{useMemo:function(e){a=e}},2),s.link(\"../../contexts/VideoConfContext\",{useVideoConfIncomingCalls:function(e){d=e}},3),s.link(\"../../hooks/omnichannel/useOmnichannelEnabled\",{useOmnichannelEnabled:function(e){c=e}},4),s.link(\"../../hooks/omnichannel/useQueuedInquiries\",{useQueuedInquiries:function(e){l=e}},5),s.link(\"./useQueryOptions\",{useQueryOptions:function(e){p=e}},6);var o,t,i,u,r,a,d,c,l,p,h={open:{$ne:!1}},f=[],g=[\"Incoming_Calls\",\"Incoming_Livechats\",\"Open_Livechats\",\"On_Hold_Chats\",\"Unread\",\"Favorites\",\"Teams\",\"Discussions\",\"Channels\",\"Direct_Messages\",\"Conversations\"],m=function(e){var n,s=e.collapsedGroups,m=c(),v=i(\"sidebarGroupByType\"),C=i(\"sidebarShowFavorites\"),L=null!==(n=i(\"sidebarSectionsOrder\"))&&void 0!==n?n:g,S=r(\"Discussion_enabled\"),b=i(\"sidebarShowUnread\"),w=p(),k=u(h,w),_=l(),z=d(),O=_.enabled?_.queue:f,I=t(a(function(){var e=new Set,n=new Set,t=new Set,i=new Set,u=new Set,r=new Set,a=new Set,d=new Set,c=new Set,l=new Set;k.forEach(function(s){return s.archived?void 0:z.find(function(e){return e.rid===s.rid})?e.add(s):b&&(s.alert||s.unread)?u.add(s):C&&s.f?n.add(s):v&&s.teamMain?t.add(s):v&&S&&s.prid?d.add(s):((\"c\"===s.t||\"p\"===s.t)&&r.add(s),\"l\"===s.t&&s.onHold)?m&&l.add(s):\"l\"===s.t?m&&i.add(s):void(\"d\"===s.t&&a.add(s),c.add(s))});var p=new Map;e.size&&p.set(\"Incoming_Calls\",e),m&&_.enabled&&O.length&&p.set(\"Incoming_Livechats\",new Set(O)),m&&i.size&&p.set(\"Open_Livechats\",i),m&&l.size&&p.set(\"On_Hold_Chats\",l),b&&u.size&&p.set(\"Unread\",u),C&&n.size&&p.set(\"Favorites\",n),v&&t.size&&p.set(\"Teams\",t),v&&S&&d.size&&p.set(\"Discussions\",d),v&&r.size&&p.set(\"Channels\",r),v&&a.size&&p.set(\"Direct_Messages\",a),v||p.set(\"Conversations\",c);var h=L.reduce(function(e,n){var t,i=p.get(n);return i&&((e.groupsList.push(n),null==s?void 0:s.includes(n))?e.groupsCount.push(0):(e.groupsCount.push(i.size),(t=e.roomList).push.apply(t,o(i)))),e},{groupsCount:[],groupsList:[],roomList:[]});return{groupsCount:h.groupsCount,groupsList:h.groupsList,roomList:h.roomList}},[k,m,_.enabled,O,b,C,v,S,L,s,z]),50),y=I.groupsCount,D=I.groupsList;return{roomList:I.roomList,groupsCount:y,groupsList:D}}}","map":"{\"version\":3,\"sources\":[\"client/sidebarv2/hooks/useRoomList.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatInquiryRecord, IRoom, ISubscription } from '@rocket.chat/core-typings';\\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useUserPreference, useUserSubscriptions, useSetting } from '@rocket.chat/ui-contexts';\\nimport { useMemo } from 'react';\\n\\nimport { useVideoConfIncomingCalls } from '../../contexts/VideoConfContext';\\nimport { useOmnichannelEnabled } from '../../hooks/omnichannel/useOmnichannelEnabled';\\nimport { useQueuedInquiries } from '../../hooks/omnichannel/useQueuedInquiries';\\nimport { useQueryOptions } from './useQueryOptions';\\n\\nconst query = { open: { $ne: false } };\\n\\nconst emptyQueue: ILivechatInquiryRecord[] = [];\\n\\nconst order = [\\n\\t'Incoming_Calls',\\n\\t'Incoming_Livechats',\\n\\t'Open_Livechats',\\n\\t'On_Hold_Chats',\\n\\t'Unread',\\n\\t'Favorites',\\n\\t'Teams',\\n\\t'Discussions',\\n\\t'Channels',\\n\\t'Direct_Messages',\\n\\t'Conversations',\\n] as const;\\n\\nexport const useRoomList = ({\\n\\tcollapsedGroups,\\n}: {\\n\\tcollapsedGroups?: string[];\\n}): {\\n\\troomList: Array<ISubscription & IRoom>;\\n\\tgroupsCount: number[];\\n\\tgroupsList: TranslationKey[];\\n} => {\\n\\tconst showOmnichannel = useOmnichannelEnabled();\\n\\tconst sidebarGroupByType = useUserPreference('sidebarGroupByType');\\n\\tconst favoritesEnabled = useUserPreference('sidebarShowFavorites');\\n\\tconst sidebarOrder = useUserPreference<typeof order>('sidebarSectionsOrder') ?? order;\\n\\tconst isDiscussionEnabled = useSetting('Discussion_enabled');\\n\\tconst sidebarShowUnread = useUserPreference('sidebarShowUnread');\\n\\n\\tconst options = useQueryOptions();\\n\\n\\tconst rooms = useUserSubscriptions(query, options);\\n\\n\\tconst inquiries = useQueuedInquiries();\\n\\n\\tconst incomingCalls = useVideoConfIncomingCalls();\\n\\n\\tconst queue = inquiries.enabled ? inquiries.queue : emptyQueue;\\n\\n\\tconst { groupsCount, groupsList, roomList } = useDebouncedValue(\\n\\t\\tuseMemo(() => {\\n\\t\\t\\tconst isCollapsed = (groupTitle: string) => collapsedGroups?.includes(groupTitle);\\n\\n\\t\\t\\tconst incomingCall = new Set();\\n\\t\\t\\tconst favorite = new Set();\\n\\t\\t\\tconst team = new Set();\\n\\t\\t\\tconst omnichannel = new Set();\\n\\t\\t\\tconst unread = new Set();\\n\\t\\t\\tconst channels = new Set();\\n\\t\\t\\tconst direct = new Set();\\n\\t\\t\\tconst discussion = new Set();\\n\\t\\t\\tconst conversation = new Set();\\n\\t\\t\\tconst onHold = new Set();\\n\\n\\t\\t\\trooms.forEach((room) => {\\n\\t\\t\\t\\tif (room.archived) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (incomingCalls.find((call) => call.rid === room.rid)) {\\n\\t\\t\\t\\t\\treturn incomingCall.add(room);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (sidebarShowUnread && (room.alert || room.unread)) {\\n\\t\\t\\t\\t\\treturn unread.add(room);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (favoritesEnabled && room.f) {\\n\\t\\t\\t\\t\\treturn favorite.add(room);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (sidebarGroupByType && room.teamMain) {\\n\\t\\t\\t\\t\\treturn team.add(room);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (sidebarGroupByType && isDiscussionEnabled && room.prid) {\\n\\t\\t\\t\\t\\treturn discussion.add(room);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (room.t === 'c' || room.t === 'p') {\\n\\t\\t\\t\\t\\tchannels.add(room);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (room.t === 'l' && room.onHold) {\\n\\t\\t\\t\\t\\treturn showOmnichannel && onHold.add(room);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (room.t === 'l') {\\n\\t\\t\\t\\t\\treturn showOmnichannel && omnichannel.add(room);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (room.t === 'd') {\\n\\t\\t\\t\\t\\tdirect.add(room);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tconversation.add(room);\\n\\t\\t\\t});\\n\\n\\t\\t\\tconst groups = new Map<string, Set<any>>();\\n\\t\\t\\tincomingCall.size && groups.set('Incoming_Calls', incomingCall);\\n\\n\\t\\t\\tshowOmnichannel && inquiries.enabled && queue.length && groups.set('Incoming_Livechats', new Set(queue));\\n\\t\\t\\tshowOmnichannel && omnichannel.size && groups.set('Open_Livechats', omnichannel);\\n\\t\\t\\tshowOmnichannel && onHold.size && groups.set('On_Hold_Chats', onHold);\\n\\n\\t\\t\\tsidebarShowUnread && unread.size && groups.set('Unread', unread);\\n\\n\\t\\t\\tfavoritesEnabled && favorite.size && groups.set('Favorites', favorite);\\n\\n\\t\\t\\tsidebarGroupByType && team.size && groups.set('Teams', team);\\n\\n\\t\\t\\tsidebarGroupByType && isDiscussionEnabled && discussion.size && groups.set('Discussions', discussion);\\n\\n\\t\\t\\tsidebarGroupByType && channels.size && groups.set('Channels', channels);\\n\\n\\t\\t\\tsidebarGroupByType && direct.size && groups.set('Direct_Messages', direct);\\n\\n\\t\\t\\t!sidebarGroupByType && groups.set('Conversations', conversation);\\n\\n\\t\\t\\tconst { groupsCount, groupsList, roomList } = sidebarOrder.reduce(\\n\\t\\t\\t\\t(acc, key) => {\\n\\t\\t\\t\\t\\tconst value = groups.get(key);\\n\\n\\t\\t\\t\\t\\tif (!value) {\\n\\t\\t\\t\\t\\t\\treturn acc;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tacc.groupsList.push(key as TranslationKey);\\n\\t\\t\\t\\t\\tif (isCollapsed(key)) {\\n\\t\\t\\t\\t\\t\\tacc.groupsCount.push(0);\\n\\t\\t\\t\\t\\t\\treturn acc;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tacc.groupsCount.push(value.size);\\n\\t\\t\\t\\t\\tacc.roomList.push(...value);\\n\\t\\t\\t\\t\\treturn acc;\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tgroupsCount: [],\\n\\t\\t\\t\\t\\tgroupsList: [],\\n\\t\\t\\t\\t\\troomList: [],\\n\\t\\t\\t\\t} as {\\n\\t\\t\\t\\t\\tgroupsCount: number[];\\n\\t\\t\\t\\t\\tgroupsList: TranslationKey[];\\n\\t\\t\\t\\t\\troomList: Array<ISubscription & IRoom>;\\n\\t\\t\\t\\t},\\n\\t\\t\\t);\\n\\n\\t\\t\\treturn { groupsCount, groupsList, roomList };\\n\\t\\t}, [\\n\\t\\t\\trooms,\\n\\t\\t\\tshowOmnichannel,\\n\\t\\t\\tinquiries.enabled,\\n\\t\\t\\tqueue,\\n\\t\\t\\tsidebarShowUnread,\\n\\t\\t\\tfavoritesEnabled,\\n\\t\\t\\tsidebarGroupByType,\\n\\t\\t\\tisDiscussionEnabled,\\n\\t\\t\\tsidebarOrder,\\n\\t\\t\\tcollapsedGroups,\\n\\t\\t\\tincomingCalls,\\n\\t\\t]),\\n\\t\\t50,\\n\\t);\\n\\n\\treturn {\\n\\t\\troomList,\\n\\t\\tgroupsCount,\\n\\t\\tgroupsList,\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_toConsumableArray\",\"export\",\"useRoomList\",\"useDebouncedValue\",\"useUserPreference\",\"useUserSubscriptions\",\"useSetting\",\"useMemo\",\"useVideoConfIncomingCalls\",\"useOmnichannelEnabled\",\"useQueuedInquiries\",\"useQueryOptions\",\"query\",\"open\",\"$ne\",\"emptyQueue\",\"order\",\"_ref\",\"_useUserPreference\",\"collapsedGroups\",\"showOmnichannel\",\"sidebarGroupByType\",\"favoritesEnabled\",\"sidebarOrder\",\"isDiscussionEnabled\",\"sidebarShowUnread\",\"options\",\"rooms\",\"inquiries\",\"incomingCalls\",\"queue\",\"enabled\",\"_useDebouncedValue\",\"incomingCall\",\"Set\",\"favorite\",\"team\",\"omnichannel\",\"unread\",\"channels\",\"direct\",\"discussion\",\"conversation\",\"onHold\",\"forEach\",\"room\",\"archived\",\"find\",\"call\",\"rid\",\"add\",\"alert\",\"f\",\"teamMain\",\"prid\",\"t\",\"groups\",\"Map\",\"size\",\"set\",\"length\",\"_sidebarOrder$reduce\",\"reduce\",\"acc\",\"key\",\"_acc$roomList\",\"value\",\"get\",\"groupsList\",\"push\",\"includes\",\"groupsCount\",\"roomList\",\"apply\"],\"mappings\":\"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\"}"}