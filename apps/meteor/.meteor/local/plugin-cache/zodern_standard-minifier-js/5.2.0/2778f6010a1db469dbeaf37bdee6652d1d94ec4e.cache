{"code":"function module(e,t,l){let n,i,a,o,s,r,c,u,d,m,p,f,g;l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),l.link(\"@rocket.chat/fuselage\",{Box(e){i=e},Option(e){a=e},OptionSkeleton(e){o=e},Tile(e){s=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){r=e},useContentBoxSize(e){c=e}},1),l.link(\"react\",{default(e){u=e},useEffect(e){d=e},memo(e){m=e},useMemo(e){p=e},useRef(e){f=e}},2),l.link(\"react-i18next\",{useTranslation(e){g=e}},3),l.exportDefault(m(function(e){let{title:t,items:l,focused:m,select:b,renderItem:h=e=>{let{item:t}=e;return u.createElement(u.Fragment,null,JSON.stringify(t))}}=e,{t:k}=g(),_=r(),E=f(null),S=c(E),x=S&&S.inlineSize<480?\"small\":\"large\",v=e=>\"small\"!==x?void 0:e.outside?k(\"Not_in_channel\"):e.suggestion?k(\"Suggestion_from_recent_messages\"):e.disabled?k(\"Unavailable_in_encrypted_channels\"):void 0,y=p(()=>l.flatMap(e=>e.isSuccess?e.data:[]).sort((e,t)=>(\"sort\"in e&&e.sort||0)-(\"sort\"in t&&t.sort||0)),[l]),N=l.some(e=>e.isLoading&&\"idle\"!==e.fetchStatus);return d(()=>{if(m){let e=document.getElementById(\"popup-item-\".concat(m._id));e&&e.scrollIntoView({behavior:\"smooth\",block:\"nearest\"})}},[m]),u.createElement(i,{className:\"message-popup-position\",position:\"relative\"},u.createElement(s,{ref:E,className:\"message-popup\",padding:0,role:\"menu\",mbe:8,overflow:\"hidden\",\"aria-labelledby\":_},t&&u.createElement(i,{bg:\"tint\",pi:16,pb:8,id:_},t),u.createElement(i,{pb:8,maxHeight:\"x320\"},!N&&0===y.length&&u.createElement(a,null,k(\"No_results_found\")),N&&u.createElement(o,null),y.map((e,t)=>u.createElement(a,{title:v(e),onClick:()=>b(e),selected:e===m,key:t,id:\"popup-item-\".concat(e._id),tabIndex:e===m?0:-1,\"aria-selected\":e===m,disabled:e.disabled},h({item:n(n({},e),{},{variant:x})}))))))}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/ComposerBoxPopup.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Option, OptionSkeleton, Tile } from '@rocket.chat/fuselage';\\nimport { useUniqueId, useContentBoxSize } from '@rocket.chat/fuselage-hooks';\\nimport type { UseQueryResult } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React, { useEffect, memo, useMemo, useRef } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nexport type ComposerBoxPopupProps<\\n\\tT extends {\\n\\t\\t_id: string;\\n\\t\\tsort?: number;\\n\\t\\tdisabled?: boolean;\\n\\t},\\n> = {\\n\\ttitle?: string;\\n\\tfocused?: T;\\n\\titems: UseQueryResult<T[]>[];\\n\\tselect: (item: T) => void;\\n\\trenderItem?: ({ item }: { item: T }) => ReactElement;\\n};\\n\\nfunction ComposerBoxPopup<\\n\\tT extends {\\n\\t\\t_id: string;\\n\\t\\tsort?: number;\\n\\t\\tdisabled?: boolean;\\n\\t},\\n>({\\n\\ttitle,\\n\\titems,\\n\\tfocused,\\n\\tselect,\\n\\trenderItem = ({ item }: { item: T }) => <>{JSON.stringify(item)}</>,\\n}: ComposerBoxPopupProps<T>): ReactElement | null {\\n\\tconst { t } = useTranslation();\\n\\tconst id = useUniqueId();\\n\\tconst composerBoxPopupRef = useRef<HTMLElement>(null);\\n\\tconst popupSizes = useContentBoxSize(composerBoxPopupRef);\\n\\n\\tconst variant = popupSizes && popupSizes.inlineSize < 480 ? 'small' : 'large';\\n\\n\\tconst getOptionTitle = <T extends { _id: string; sort?: number; outside?: boolean; suggestion?: boolean; disabled?: boolean }>(\\n\\t\\titem: T,\\n\\t) => {\\n\\t\\tif (variant !== 'small') {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\tif (item.outside) {\\n\\t\\t\\treturn t('Not_in_channel');\\n\\t\\t}\\n\\n\\t\\tif (item.suggestion) {\\n\\t\\t\\treturn t('Suggestion_from_recent_messages');\\n\\t\\t}\\n\\n\\t\\tif (item.disabled) {\\n\\t\\t\\treturn t('Unavailable_in_encrypted_channels');\\n\\t\\t}\\n\\t};\\n\\n\\tconst itemsFlat = useMemo(\\n\\t\\t() =>\\n\\t\\t\\titems\\n\\t\\t\\t\\t.flatMap((item) => {\\n\\t\\t\\t\\t\\tif (item.isSuccess) {\\n\\t\\t\\t\\t\\t\\treturn item.data;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\treturn [];\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.sort((a, b) => (('sort' in a && a.sort) || 0) - (('sort' in b && b.sort) || 0)),\\n\\t\\t[items],\\n\\t);\\n\\n\\tconst isLoading = items.some((item) => item.isLoading && item.fetchStatus !== 'idle');\\n\\n\\tuseEffect(() => {\\n\\t\\tif (focused) {\\n\\t\\t\\tconst element = document.getElementById(`popup-item-${focused._id}`);\\n\\t\\t\\tif (element) {\\n\\t\\t\\t\\telement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}, [focused]);\\n\\n\\treturn (\\n\\t\\t<Box className='message-popup-position' position='relative'>\\n\\t\\t\\t<Tile ref={composerBoxPopupRef} className='message-popup' padding={0} role='menu' mbe={8} overflow='hidden' aria-labelledby={id}>\\n\\t\\t\\t\\t{title && (\\n\\t\\t\\t\\t\\t<Box bg='tint' pi={16} pb={8} id={id}>\\n\\t\\t\\t\\t\\t\\t{title}\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t<Box pb={8} maxHeight='x320'>\\n\\t\\t\\t\\t\\t{!isLoading && itemsFlat.length === 0 && <Option>{t('No_results_found')}</Option>}\\n\\t\\t\\t\\t\\t{isLoading && <OptionSkeleton />}\\n\\t\\t\\t\\t\\t{itemsFlat.map((item, index) => {\\n\\t\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\t\\t<Option\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle={getOptionTitle(item)}\\n\\t\\t\\t\\t\\t\\t\\t\\tonClick={() => select(item)}\\n\\t\\t\\t\\t\\t\\t\\t\\tselected={item === focused}\\n\\t\\t\\t\\t\\t\\t\\t\\tkey={index}\\n\\t\\t\\t\\t\\t\\t\\t\\tid={`popup-item-${item._id}`}\\n\\t\\t\\t\\t\\t\\t\\t\\ttabIndex={item === focused ? 0 : -1}\\n\\t\\t\\t\\t\\t\\t\\t\\taria-selected={item === focused}\\n\\t\\t\\t\\t\\t\\t\\t\\tdisabled={item.disabled}\\n\\t\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t\\t{renderItem({ item: { ...item, variant } })}\\n\\t\\t\\t\\t\\t\\t\\t</Option>\\n\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t})}\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</Tile>\\n\\t\\t</Box>\\n\\t);\\n}\\n\\nexport default memo(ComposerBoxPopup);\\n\",null],\"names\":[\"_objectSpread\",\"Box\",\"Option\",\"OptionSkeleton\",\"Tile\",\"useUniqueId\",\"useContentBoxSize\",\"React\",\"useEffect\",\"memo\",\"useMemo\",\"useRef\",\"useTranslation\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"title\",\"items\",\"focused\",\"select\",\"renderItem\",\"_ref2\",\"item\",\"createElement\",\"Fragment\",\"JSON\",\"stringify\",\"t\",\"id\",\"composerBoxPopupRef\",\"popupSizes\",\"variant\",\"inlineSize\",\"getOptionTitle\",\"outside\",\"suggestion\",\"disabled\",\"itemsFlat\",\"flatMap\",\"isSuccess\",\"data\",\"sort\",\"a\",\"b\",\"isLoading\",\"some\",\"fetchStatus\",\"element\",\"document\",\"getElementById\",\"concat\",\"_id\",\"scrollIntoView\",\"behavior\",\"block\",\"className\",\"position\",\"ref\",\"padding\",\"role\",\"mbe\",\"overflow\",\"bg\",\"pi\",\"pb\",\"maxHeight\",\"length\",\"map\",\"index\",\"onClick\",\"selected\",\"key\",\"tabIndex\"],\"mappings\":\"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\"}"}