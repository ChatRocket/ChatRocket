{"code":"function module(n,e,t){var r,u,i,o,c,a;function f(n,e){var t=i([\"rooms\",n],function(){var e;return u.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",null!==(e=c.findOne({_id:n},{reactive:!1}))&&void 0!==e?e:null);case 1:case\"end\":return t.stop()}},null,null,null,Promise)},r({staleTime:1/0},e)),f=t.refetch;return o(function(){var e=c.find({_id:n}).observe({added:function(){return a(function(){return f({exact:!1})})},changed:function(){return a(function(){return f({exact:!1})})},removed:function(){return a(function(){return f({exact:!1})})}});return function(){e.stop()}},[f,n]),t}t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(n){r=n}},0),t.link(\"@babel/runtime/regenerator\",{default:function(n){u=n}},1),t.export({useRoomQuery:function(){return f}}),t.link(\"@tanstack/react-query\",{useQuery:function(n){i=n}},0),t.link(\"react\",{useEffect:function(n){o=n}},1),t.link(\"../../../../../app/models/client\",{ChatRoom:function(n){c=n}},2),t.link(\"../../../../lib/utils/queueMicrotask\",{queueMicrotask:function(n){a=n}},3)}","map":"{\"version\":3,\"sources\":[\"client/views/room/providers/hooks/useRoomQuery.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport type { UseQueryOptions, UseQueryResult } from '@tanstack/react-query';\\nimport { useQuery } from '@tanstack/react-query';\\nimport { useEffect } from 'react';\\n\\nimport { ChatRoom } from '../../../../../app/models/client';\\nimport { queueMicrotask } from '../../../../lib/utils/queueMicrotask';\\n\\nexport function useRoomQuery(\\n\\trid: IRoom['_id'],\\n\\toptions?: UseQueryOptions<IRoom | null, Error, IRoom | null, readonly ['rooms', IRoom['_id']]>,\\n): UseQueryResult<IRoom | null, Error> {\\n\\tconst queryKey = ['rooms', rid] as const;\\n\\n\\tconst queryResult = useQuery(queryKey, async (): Promise<IRoom | null> => ChatRoom.findOne({ _id: rid }, { reactive: false }) ?? null, {\\n\\t\\tstaleTime: Infinity,\\n\\t\\t...options,\\n\\t});\\n\\n\\tconst { refetch } = queryResult;\\n\\n\\tuseEffect(() => {\\n\\t\\tconst liveQueryHandle = ChatRoom.find({ _id: rid }).observe({\\n\\t\\t\\tadded: () => queueMicrotask(() => refetch({ exact: false })),\\n\\t\\t\\tchanged: () => queueMicrotask(() => refetch({ exact: false })),\\n\\t\\t\\tremoved: () => queueMicrotask(() => refetch({ exact: false })),\\n\\t\\t});\\n\\n\\t\\treturn () => {\\n\\t\\t\\tliveQueryHandle.stop();\\n\\t\\t};\\n\\t}, [refetch, rid]);\\n\\n\\treturn queryResult;\\n}\\n\",null],\"names\":[\"_objectSpread\",\"_regeneratorRuntime\",\"useQuery\",\"useEffect\",\"ChatRoom\",\"queueMicrotask\",\"useRoomQuery\",\"rid\",\"options\",\"queryResult\",\"_ChatRoom$findOne\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"findOne\",\"_id\",\"reactive\",\"stop\",\"Promise\",\"staleTime\",\"Infinity\",\"refetch\",\"liveQueryHandle\",\"find\",\"observe\",\"added\",\"exact\",\"changed\",\"removed\",\"module\",\"link\",\"default\",\"v\",\"export\"],\"mappings\":\"2BAEAA,EAAiDC,EAAAC,EAAAC,EAAAC,EAAAC,EAM3C,SAAUC,EACfC,CAAiB,CACjBC,CAA8F,EAI9F,IAAMC,EAAcP,EAFH,CAAC,QAASK,EAAa,CAED,WAAA,IAAAG,EAAA,OAAAT,EAAAU,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAG,MAAA,CAAA,SAAA,AAAsF,OAAtFL,CAAAA,EAAmCN,EAASY,OAAO,CAAC,CAAEC,IAAKV,CAAG,EAAI,CAAEW,SAAU,CAAA,CAAK,EAAE,GAACR,AAAA,KAAA,IAAAA,EAAAA,EAAI,KAAI,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAO,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAAApB,EAAA,CACpIqB,UAAWC,GAAQ,EAChBd,IAGIe,EAAYd,EAAZc,OAAO,CAcf,OAZApB,EAAU,WACT,IAAMqB,EAAkBpB,EAASqB,IAAI,CAAC,CAAER,IAAKV,CAAG,GAAImB,OAAO,CAAC,CAC3DC,MAAO,WAAA,OAAMtB,EAAe,WAAA,OAAMkB,EAAQ,CAAEK,MAAO,CAAA,CAAK,EAAG,EAAC,EAC5DC,QAAS,WAAA,OAAMxB,EAAe,WAAA,OAAMkB,EAAQ,CAAEK,MAAO,CAAA,CAAK,EAAG,EAAC,EAC9DE,QAAS,WAAA,OAAMzB,EAAe,WAAA,OAAMkB,EAAQ,CAAEK,MAAO,CAAA,CAAK,EAAG,EAAC,IAG/D,OAAO,WACNJ,EAAgBL,IAAI,EACrB,CACD,EAAG,CAACI,EAAShB,EAAI,EAEVE,CACR,CAhCiBsB,EAAQC,IAAA,CAAA,uCAAwB,CAAAC,QAAA,SAAAC,CAAA,EAAAlC,EAAAkC,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAjC,EAAAiC,CAAA,CAAA,EAAA,GAAjDH,EAAOI,MAAE,CAAA,CAAA7B,aAAgB,WAAA,OAAAA,CAAwB,CAAA,GAAAyB,EAAAC,IAAA,CAAA,wBAAA,CAAA9B,SAAA,SAAAgC,CAAA,EAAAhC,EAAAgC,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA7B,UAAA,SAAA+B,CAAA,EAAA/B,EAAA+B,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,mCAAA,CAAA5B,SAAA,SAAA8B,CAAA,EAAA9B,EAAA8B,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAA3B,eAAA,SAAA6B,CAAA,EAAA7B,EAAA6B,CAAA,CAAA,EAAA\"}"}