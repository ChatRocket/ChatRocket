{"code":"function module(e,n,t){var r,s,u,a,o,i,l,c,f,d,m,k,p,v,b,g,E,U,h,A,x;t.link(\"@babel/runtime/helpers/extends\",{default:function(e){r=e}},0),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){s=e}},1),t.link(\"@babel/runtime/regenerator\",{default:function(e){u=e}},2),t.link(\"@rocket.chat/fuselage\",{Callout:function(e){a=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){o=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useSetting:function(e){i=e},useRolesDescription:function(e){l=e},useTranslation:function(e){c=e},useEndpoint:function(e){f=e},useToastMessageDispatch:function(e){d=e}},2),t.link(\"@tanstack/react-query\",{useQuery:function(e){m=e}},3),t.link(\"react\",{default:function(e){k=e},useMemo:function(e){p=e}},4),t.link(\"../../../../lib/getUserEmailAddress\",{getUserEmailAddress:function(e){v=e}},5),t.link(\"../../../components/Contextualbar\",{ContextualbarContent:function(e){b=e}},6),t.link(\"../../../components/Skeleton\",{FormSkeleton:function(e){g=e}},7),t.link(\"../../../components/UserCard\",{UserCardRole:function(e){E=e}},8),t.link(\"../../../components/UserInfo\",{UserInfo:function(e){U=e}},9),t.link(\"../../../components/UserStatus\",{UserStatus:function(e){h=e}},10),t.link(\"../../../lib/utils/getUserEmailVerified\",{getUserEmailVerified:function(e){A=e}},11),t.link(\"./AdminUserInfoActions\",{default:function(e){x=e}},12),t.exportDefault(function(e){var n,t=e.uid,C=e.onReload,y=e.tab,I=c(),T=l(),S=i(\"Accounts_ManuallyApproveNewUsers\"),w=f(\"GET\",\"/v1/users.info\"),R=p(function(){return{userId:t}},[t]),F=d(),M=m([\"users\",R,\"admin\"],function(){var e;return u.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.awrap(w(R));case 2:return e=n.sent,n.abrupt(\"return\",e);case 4:case\"end\":return n.stop()}},null,null,null,Promise)},{onError:function(e){F({type:\"error\",message:e})}}),V=M.data,_=M.isLoading,D=M.error,L=M.refetch,O=o(function(){C(),L()}),j=p(function(){if(null!=V&&V.user){var e=V.user,n=e.avatarETag,t=e.name,r=e.username,u=e.phone,a=e.createdAt,o=e.roles,i=void 0===o?[]:o,l=e.status,c=e.statusText,f=e.bio,d=e.utcOffset,m=e.lastLogin,p=e.nickname,b=e.canViewAllInfo,g=e.reason;return{avatarETag:n,name:t,username:r,lastLogin:m,roles:T(i).map(function(e,n){return k.createElement(E,{key:n},e)}),bio:f,canViewAllInfo:b,phone:u,utcOffset:d,customFields:s(s({},V.user.customFields),S&&!V.user.active&&V.user.reason?{Reason:V.user.reason}:void 0),verified:A(V.user),email:v(V.user),createdAt:a,status:k.createElement(h,{status:l}),statusText:c,nickname:p,reason:g}}},[S,V,T]);return _?k.createElement(b,null,k.createElement(g,null)):!D&&j&&null!=V&&V.user?k.createElement(U,r({},j,{actions:k.createElement(x,{isActive:null==V?void 0:V.user.active,isAdmin:null==V?void 0:null===(n=V.user.roles)||void 0===n?void 0:n.includes(\"admin\"),userId:null==V?void 0:V.user._id,username:j.username,isFederatedUser:!!V.user.federated,onChange:O,onReload:C,tab:y})})):k.createElement(b,{pb:16},k.createElement(a,{type:\"danger\"},I(\"User_not_found\")))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/users/AdminUserInfoWithData.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { Callout } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useSetting, useRolesDescription, useTranslation, useEndpoint, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React, { useMemo } from 'react';\\n\\nimport { getUserEmailAddress } from '../../../../lib/getUserEmailAddress';\\nimport { ContextualbarContent } from '../../../components/Contextualbar';\\nimport { FormSkeleton } from '../../../components/Skeleton';\\nimport { UserCardRole } from '../../../components/UserCard';\\nimport { UserInfo } from '../../../components/UserInfo';\\nimport { UserStatus } from '../../../components/UserStatus';\\nimport { getUserEmailVerified } from '../../../lib/utils/getUserEmailVerified';\\nimport AdminUserInfoActions from './AdminUserInfoActions';\\nimport type { AdminUsersTab } from './AdminUsersPage';\\n\\ntype AdminUserInfoWithDataProps = {\\n\\tuid: IUser['_id'];\\n\\tonReload: () => void;\\n\\ttab: AdminUsersTab;\\n};\\n\\nconst AdminUserInfoWithData = ({ uid, onReload, tab }: AdminUserInfoWithDataProps): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst getRoles = useRolesDescription();\\n\\tconst approveManuallyUsers = useSetting('Accounts_ManuallyApproveNewUsers');\\n\\n\\tconst getUsersInfo = useEndpoint('GET', '/v1/users.info');\\n\\n\\tconst query = useMemo(() => ({ userId: uid }), [uid]);\\n\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst { data, isLoading, error, refetch } = useQuery(\\n\\t\\t['users', query, 'admin'],\\n\\t\\tasync () => {\\n\\t\\t\\tconst usersInfo = await getUsersInfo(query);\\n\\t\\t\\treturn usersInfo;\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tonError: (error) => {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n\\n\\tconst onChange = useMutableCallback(() => {\\n\\t\\tonReload();\\n\\t\\trefetch();\\n\\t});\\n\\n\\tconst user = useMemo(() => {\\n\\t\\tif (!data?.user) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst {\\n\\t\\t\\tavatarETag,\\n\\t\\t\\tname,\\n\\t\\t\\tusername,\\n\\t\\t\\tphone,\\n\\t\\t\\tcreatedAt,\\n\\t\\t\\troles = [],\\n\\t\\t\\tstatus,\\n\\t\\t\\tstatusText,\\n\\t\\t\\tbio,\\n\\t\\t\\tutcOffset,\\n\\t\\t\\tlastLogin,\\n\\t\\t\\tnickname,\\n\\t\\t\\tcanViewAllInfo,\\n\\t\\t\\treason,\\n\\t\\t} = data.user;\\n\\n\\t\\treturn {\\n\\t\\t\\tavatarETag,\\n\\t\\t\\tname,\\n\\t\\t\\tusername,\\n\\t\\t\\tlastLogin,\\n\\t\\t\\troles: getRoles(roles).map((role, index) => <UserCardRole key={index}>{role}</UserCardRole>),\\n\\t\\t\\tbio,\\n\\t\\t\\tcanViewAllInfo,\\n\\t\\t\\tphone,\\n\\t\\t\\tutcOffset,\\n\\t\\t\\tcustomFields: {\\n\\t\\t\\t\\t...data.user.customFields,\\n\\t\\t\\t\\t...(approveManuallyUsers && !data.user.active && data.user.reason ? { Reason: data.user.reason } : undefined),\\n\\t\\t\\t},\\n\\t\\t\\tverified: getUserEmailVerified(data.user),\\n\\t\\t\\temail: getUserEmailAddress(data.user),\\n\\t\\t\\tcreatedAt,\\n\\t\\t\\tstatus: <UserStatus status={status} />,\\n\\t\\t\\tstatusText,\\n\\t\\t\\tnickname,\\n\\t\\t\\treason,\\n\\t\\t};\\n\\t}, [approveManuallyUsers, data, getRoles]);\\n\\n\\tif (isLoading) {\\n\\t\\treturn (\\n\\t\\t\\t<ContextualbarContent>\\n\\t\\t\\t\\t<FormSkeleton />\\n\\t\\t\\t</ContextualbarContent>\\n\\t\\t);\\n\\t}\\n\\n\\tif (error || !user || !data?.user) {\\n\\t\\treturn (\\n\\t\\t\\t<ContextualbarContent pb={16}>\\n\\t\\t\\t\\t<Callout type='danger'>{t('User_not_found')}</Callout>\\n\\t\\t\\t</ContextualbarContent>\\n\\t\\t);\\n\\t}\\n\\n\\treturn (\\n\\t\\t<UserInfo\\n\\t\\t\\t{...user}\\n\\t\\t\\tactions={\\n\\t\\t\\t\\t<AdminUserInfoActions\\n\\t\\t\\t\\t\\tisActive={data?.user.active}\\n\\t\\t\\t\\t\\tisAdmin={data?.user.roles?.includes('admin')}\\n\\t\\t\\t\\t\\tuserId={data?.user._id}\\n\\t\\t\\t\\t\\tusername={user.username}\\n\\t\\t\\t\\t\\tisFederatedUser={!!data.user.federated}\\n\\t\\t\\t\\t\\tonChange={onChange}\\n\\t\\t\\t\\t\\tonReload={onReload}\\n\\t\\t\\t\\t\\ttab={tab}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default AdminUserInfoWithData;\\n\",null],\"names\":[\"_extends\",\"_objectSpread\",\"_regeneratorRuntime\",\"Callout\",\"useMutableCallback\",\"useSetting\",\"useRolesDescription\",\"useTranslation\",\"useEndpoint\",\"useToastMessageDispatch\",\"useQuery\",\"React\",\"useMemo\",\"getUserEmailAddress\",\"ContextualbarContent\",\"FormSkeleton\",\"UserCardRole\",\"UserInfo\",\"UserStatus\",\"getUserEmailVerified\",\"AdminUserInfoActions\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_data$user$roles2\",\"uid\",\"onReload\",\"tab\",\"t\",\"getRoles\",\"approveManuallyUsers\",\"getUsersInfo\",\"query\",\"userId\",\"dispatchToastMessage\",\"_useQuery\",\"usersInfo\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"sent\",\"abrupt\",\"stop\",\"Promise\",\"onError\",\"error\",\"type\",\"message\",\"data\",\"isLoading\",\"refetch\",\"onChange\",\"user\",\"_data$user\",\"avatarETag\",\"name\",\"username\",\"phone\",\"createdAt\",\"_data$user$roles\",\"roles\",\"status\",\"statusText\",\"bio\",\"utcOffset\",\"lastLogin\",\"nickname\",\"canViewAllInfo\",\"reason\",\"map\",\"role\",\"index\",\"createElement\",\"key\",\"customFields\",\"active\",\"Reason\",\"undefined\",\"verified\",\"email\",\"actions\",\"isActive\",\"isAdmin\",\"includes\",\"_id\",\"isFederatedUser\",\"federated\",\"pb\"],\"mappings\":\"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\"}"}