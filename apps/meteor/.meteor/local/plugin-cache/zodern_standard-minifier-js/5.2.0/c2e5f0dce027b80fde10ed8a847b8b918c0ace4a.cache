{"code":"function module(e,t,r){let a,s,n,o,l,c,i,u;r.link(\"@rocket.chat/fuselage-toastbar\",{ToastBarProvider(e){a=e},useToastBarDispatch(e){s=e}},0),r.link(\"@rocket.chat/ui-contexts\",{ToastMessagesContext(e){n=e}},1),r.link(\"react\",{default(e){o=e},useEffect(e){l=e}},2),r.link(\"../lib/errorHandling\",{getErrorMessage(e){c=e}},3),r.link(\"../lib/toast\",{dispatchToastMessage(e){i=e},subscribeToToastMessages(e){u=e}},4);let g={dispatch:i},f=e=>{let{children:t}=e,r=s();return l(()=>u(e=>{let{type:t,message:a,title:s=\"\"}=e;if(\"error\"===t&&\"object\"==typeof a){r({type:t,message:c(a)});return}\"string\"!=typeof a&&a instanceof Error&&(a=\"[\".concat(a.name,\"] \").concat(a.message)),\"warning\"!==t&&r({type:t,message:s+a})}),[r]),o.createElement(n.Provider,{children:t,value:g})};r.exportDefault(e=>{let{children:t}=e;return o.createElement(a,null,o.createElement(f,{children:t}))})}","map":"{\"version\":3,\"sources\":[\"client/providers/ToastMessagesProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { ToastBarProvider, useToastBarDispatch } from '@rocket.chat/fuselage-toastbar';\\nimport { ToastMessagesContext } from '@rocket.chat/ui-contexts';\\nimport type { ReactNode } from 'react';\\nimport React, { useEffect } from 'react';\\n\\nimport { getErrorMessage } from '../lib/errorHandling';\\nimport { dispatchToastMessage, subscribeToToastMessages } from '../lib/toast';\\n\\nconst contextValue = {\\n\\tdispatch: dispatchToastMessage,\\n};\\n\\ntype ToastMessageInnerProviderProps = {\\n\\tchildren?: ReactNode;\\n};\\n\\nconst ToastMessageInnerProvider = ({ children }: ToastMessageInnerProviderProps) => {\\n\\tconst dispatchToastBar = useToastBarDispatch();\\n\\n\\tuseEffect(\\n\\t\\t() =>\\n\\t\\t\\tsubscribeToToastMessages(({ type, message, title = '' }) => {\\n\\t\\t\\t\\tif (type === 'error' && typeof message === 'object') {\\n\\t\\t\\t\\t\\tdispatchToastBar({ type, message: getErrorMessage(message) });\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (typeof message !== 'string' && message instanceof Error) {\\n\\t\\t\\t\\t\\tmessage = `[${message.name}] ${message.message}`;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (type === 'warning') {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tdispatchToastBar({ type, message: title + message });\\n\\t\\t\\t}),\\n\\t\\t[dispatchToastBar],\\n\\t);\\n\\n\\treturn <ToastMessagesContext.Provider children={children} value={contextValue} />;\\n};\\n\\ntype ToastMessagesProviderProps = {\\n\\tchildren?: ReactNode;\\n};\\n\\n// eslint-disable-next-line react/no-multi-comp\\nconst ToastMessagesProvider = ({ children }: ToastMessagesProviderProps) => (\\n\\t<ToastBarProvider>\\n\\t\\t<ToastMessageInnerProvider children={children} />\\n\\t</ToastBarProvider>\\n);\\n\\nexport default ToastMessagesProvider;\\n\",null],\"names\":[\"ToastBarProvider\",\"useToastBarDispatch\",\"ToastMessagesContext\",\"React\",\"useEffect\",\"getErrorMessage\",\"dispatchToastMessage\",\"subscribeToToastMessages\",\"module\",\"link\",\"v\",\"default\",\"contextValue\",\"dispatch\",\"ToastMessageInnerProvider\",\"_ref\",\"children\",\"dispatchToastBar\",\"_ref2\",\"type\",\"message\",\"title\",\"Error\",\"concat\",\"name\",\"createElement\",\"Provider\",\"value\",\"exportDefault\",\"_ref3\"],\"mappings\":\"2BAAAA,EAASC,EAA8EC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA5DC,EAAqBC,IAAA,CAAA,iCAAsC,CAACT,iBAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,oBAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2BAAA,CAAAP,qBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAP,EAAAO,CAAA,EAAAN,UAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,uBAAA,CAAAJ,gBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,eAAA,CAAAH,qBAAAI,CAAA,EAAAJ,EAAAI,CAAA,EAAAH,yBAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAQvF,IAAME,EAAe,CACpBC,SAAUP,GAOLQ,EAA4BC,IAAiD,GAAhD,CAAEC,SAAAA,CAAAA,CAA0C,CAAAD,EACxEE,EAAmBhB,IAuBzB,OArBAG,EACC,IACCG,EAAyBW,IAAkC,GAAjC,CAAEC,KAAAA,CAAI,CAAEC,QAAAA,CAAO,CAAEC,MAAAA,EAAQ,EAAA,CAAI,CAAAH,EACtD,GAAIC,AAAS,UAATA,GAAoB,AAAmB,UAAnB,OAAOC,EAAsB,CACpDH,EAAiB,CAAEE,KAAAA,EAAMC,QAASf,EAAgBe,EAAQ,GAC1D,MACD,CAEuB,UAAnB,OAAOA,GAAwBA,aAAmBE,OACrDF,CAAAA,EAAO,IAAAG,MAAA,CAAOH,EAAQI,IAAI,CAAA,MAAAD,MAAA,CAAKH,EAAQA,OAAO,CAAA,EAGlC,YAATD,GAIJF,EAAiB,CAAEE,KAAAA,EAAMC,QAASC,EAAQD,CAAO,EAClD,GACD,CAACH,EAAiB,EAGZd,EAAAsB,aAAA,CAACvB,EAAqBwB,QAAQ,CAAA,CAACV,SAAUA,EAAUW,MAAOf,CAAa,EAC/E,EAzCAJ,EAAOoB,aAAE,CAgDqBC,IAAA,GAAC,CAAEb,SAAAA,CAAAA,CAAsC,CAAAa,EAAA,OACtE1B,EAAAsB,aAAA,CAACzB,EAAgB,KAChBG,EAAAsB,aAAA,CAACX,EAAyB,CAACE,SAAUA,CAAS,GAC5B\"}"}