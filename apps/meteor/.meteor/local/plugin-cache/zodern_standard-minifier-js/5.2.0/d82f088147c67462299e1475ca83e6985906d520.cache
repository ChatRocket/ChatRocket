{"code":"function module(t,e,i){let n,o,a,r,l,c,s,u,p,d,m,k,g;i.export({useAppsRoomStarActions:()=>A}),i.link(\"@rocket.chat/fuselage\",{Box(t){n=t}},0),i.link(\"@rocket.chat/ui-client\",{GenericMenu(t){o=t},HeaderToolbarAction(t){a=t}},1),i.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(t){r=t}},2),i.link(\"react\",{default(t){l=t},useMemo(t){c=t}},3),i.link(\"react-i18next\",{useTranslation(t){s=t}},4),i.link(\"../../../app/ui-message/client/UiKitTriggerTimeoutError\",{UiKitTriggerTimeoutError(t){u=t}},5),i.link(\"../../../ee/lib/misc/Utilities\",{Utilities(t){p=t}},6),i.link(\"../../uikit/hooks/useUiKitActionManager\",{useUiKitActionManager(t){d=t}},7),i.link(\"../../views/room/contexts/RoomContext\",{useRoom(t){m=t}},8),i.link(\"../useAppActionButtons\",{useAppActionButtons(t){k=t}},9),i.link(\"../useApplyButtonFilters\",{useApplyButtonFilters(t){g=t}},10);let A=()=>{let t=k(\"roomAction\"),e=d(),i=g(\"ai\"),A=m(),{t:I}=s(),y=r();return c(()=>{if(!t.data)return;let r=t.data.filter(i);if(0!==r.length)return{id:\"ai-actions\",title:\"AI_Actions\",icon:\"stars\",groups:[\"group\",\"channel\",\"live\",\"team\",\"direct\",\"direct_multiple\"],featured:!0,renderToolboxItem:t=>{let{id:i,icon:c,title:s,disabled:d,className:m}=t;return l.createElement(o,{button:l.createElement(a,null),key:i,title:s,disabled:d,items:r.map(t=>({id:t.actionId,icon:void 0,title:p.getI18nKeyForApp(t.labelI18n,t.appId),content:l.createElement(n,{is:\"span\"},I(\"\".concat(p.getI18nKeyForApp(t.labelI18n,t.appId)))),variant:t.variant,groups:[\"group\",\"channel\",\"live\",\"team\",\"direct\",\"direct_multiple\"],onClick:()=>{e.emitInteraction(t.appId,{type:\"actionButton\",actionId:t.actionId,rid:A._id,payload:{context:t.context}}).catch(async t=>{if(t instanceof u){y({type:\"error\",message:I(\"UIKit_Interaction_Timeout\")});return}return t})},type:\"apps\"})),className:m,placement:\"bottom-start\",icon:c})}}},[e,i,y,t.data,A._id,I])}}","map":"{\"version\":3,\"sources\":[\"client/hooks/roomActions/useAppsRoomStarActions.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box } from '@rocket.chat/fuselage';\\nimport { GenericMenu, HeaderToolbarAction } from '@rocket.chat/ui-client';\\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport React, { useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { UiKitTriggerTimeoutError } from '../../../app/ui-message/client/UiKitTriggerTimeoutError';\\nimport { Utilities } from '../../../ee/lib/misc/Utilities';\\nimport { useUiKitActionManager } from '../../uikit/hooks/useUiKitActionManager';\\nimport { useRoom } from '../../views/room/contexts/RoomContext';\\nimport type { RoomToolboxActionConfig } from '../../views/room/contexts/RoomToolboxContext';\\nimport { useAppActionButtons } from '../useAppActionButtons';\\nimport { useApplyButtonFilters } from '../useApplyButtonFilters';\\n\\nexport const useAppsRoomStarActions = () => {\\n\\tconst result = useAppActionButtons('roomAction');\\n\\tconst actionManager = useUiKitActionManager();\\n\\tconst applyButtonFilters = useApplyButtonFilters('ai');\\n\\tconst room = useRoom();\\n\\tconst { t } = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\treturn useMemo((): RoomToolboxActionConfig | undefined => {\\n\\t\\tif (!result.data) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\tconst filteredActions = result.data.filter(applyButtonFilters);\\n\\n\\t\\tif (filteredActions.length === 0) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\treturn {\\n\\t\\t\\tid: 'ai-actions',\\n\\t\\t\\ttitle: 'AI_Actions',\\n\\t\\t\\ticon: 'stars',\\n\\t\\t\\tgroups: ['group', 'channel', 'live', 'team', 'direct', 'direct_multiple'],\\n\\t\\t\\tfeatured: true,\\n\\t\\t\\trenderToolboxItem: ({ id, icon, title, disabled, className }) => (\\n\\t\\t\\t\\t<GenericMenu\\n\\t\\t\\t\\t\\tbutton={<HeaderToolbarAction />}\\n\\t\\t\\t\\t\\tkey={id}\\n\\t\\t\\t\\t\\ttitle={title}\\n\\t\\t\\t\\t\\tdisabled={disabled}\\n\\t\\t\\t\\t\\titems={filteredActions.map((action) => ({\\n\\t\\t\\t\\t\\t\\tid: action.actionId,\\n\\t\\t\\t\\t\\t\\ticon: undefined,\\n\\t\\t\\t\\t\\t\\ttitle: Utilities.getI18nKeyForApp(action.labelI18n, action.appId),\\n\\t\\t\\t\\t\\t\\tcontent: <Box is='span'>{t(`${Utilities.getI18nKeyForApp(action.labelI18n, action.appId)}`)}</Box>,\\n\\t\\t\\t\\t\\t\\tvariant: action.variant,\\n\\t\\t\\t\\t\\t\\tgroups: ['group', 'channel', 'live', 'team', 'direct', 'direct_multiple'],\\n\\t\\t\\t\\t\\t\\tonClick: () => {\\n\\t\\t\\t\\t\\t\\t\\tvoid actionManager\\n\\t\\t\\t\\t\\t\\t\\t\\t.emitInteraction(action.appId, {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttype: 'actionButton',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tactionId: action.actionId,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\trid: room._id,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tpayload: { context: action.context },\\n\\t\\t\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t\\t\\t.catch(async (reason) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif (reason instanceof UiKitTriggerTimeoutError) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmessage: t('UIKit_Interaction_Timeout'),\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\treturn reason;\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\ttype: 'apps',\\n\\t\\t\\t\\t\\t}))}\\n\\t\\t\\t\\t\\tclassName={className}\\n\\t\\t\\t\\t\\tplacement='bottom-start'\\n\\t\\t\\t\\t\\ticon={icon}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t),\\n\\t\\t};\\n\\t}, [actionManager, applyButtonFilters, dispatchToastMessage, result.data, room._id, t]);\\n};\\n\",null],\"names\":[\"Box\",\"GenericMenu\",\"HeaderToolbarAction\",\"useToastMessageDispatch\",\"React\",\"useMemo\",\"useTranslation\",\"UiKitTriggerTimeoutError\",\"Utilities\",\"useUiKitActionManager\",\"useRoom\",\"useAppActionButtons\",\"useApplyButtonFilters\",\"module\",\"export\",\"useAppsRoomStarActions\",\"link\",\"v\",\"default\",\"result\",\"actionManager\",\"applyButtonFilters\",\"room\",\"t\",\"dispatchToastMessage\",\"data\",\"filteredActions\",\"filter\",\"length\",\"id\",\"title\",\"icon\",\"groups\",\"featured\",\"renderToolboxItem\",\"_ref\",\"disabled\",\"className\",\"createElement\",\"button\",\"key\",\"items\",\"map\",\"action\",\"actionId\",\"undefined\",\"getI18nKeyForApp\",\"labelI18n\",\"appId\",\"content\",\"is\",\"concat\",\"variant\",\"onClick\",\"emitInteraction\",\"type\",\"rid\",\"_id\",\"payload\",\"context\",\"catch\",\"reason\",\"message\",\"placement\"],\"mappings\":\"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\"}"}