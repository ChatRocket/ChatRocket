{"code":"function module(e,t,r){r.link(\"@babel/runtime/regenerator\",{default:function(e){n=e}},0),r.export({useEndpointUpload:function(){return c}}),r.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){s=e},useUpload:function(e){u=e}},0),r.link(\"react\",{useCallback:function(e){a=e}},1);var n,s,u,a,c=function(e,t){var r=u(e),c=s();return a(function(e){var s,u,a;return n.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,u=(s=r(e))instanceof Promise?s:s.promise,o.next=5,n.awrap(u);case 5:if((a=o.sent).success){o.next=8;break}throw Error(String(a.status));case 8:return t&&c({type:\"success\",message:t}),o.abrupt(\"return\",a);case 12:return o.prev=12,o.t0=o.catch(0),c({type:\"error\",message:o.t0}),o.abrupt(\"return\",{success:!1});case 16:case\"end\":return o.stop()}},null,null,[[0,12]],Promise)},[c,r,t])}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useEndpointUpload.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { UploadResult } from '@rocket.chat/ui-contexts';\\nimport { useToastMessageDispatch, useUpload } from '@rocket.chat/ui-contexts';\\nimport { useCallback } from 'react';\\n\\nexport const useEndpointUpload = (\\n\\tendpoint: Parameters<typeof useUpload>[0],\\n\\tsuccessMessage: string,\\n): ((formData: FormData) => Promise<{ success: boolean }>) => {\\n\\tconst sendData = useUpload(endpoint);\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\treturn useCallback(\\n\\t\\tasync (formData: FormData) => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst data = sendData(formData);\\n\\n\\t\\t\\t\\tconst promise = data instanceof Promise ? data : data.promise;\\n\\n\\t\\t\\t\\tconst result = await (promise as unknown as Promise<UploadResult>);\\n\\n\\t\\t\\t\\tif (!result.success) {\\n\\t\\t\\t\\t\\tthrow new Error(String(result.status));\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tsuccessMessage && dispatchToastMessage({ type: 'success', message: successMessage });\\n\\n\\t\\t\\t\\treturn result as any;\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t\\treturn { success: false };\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[dispatchToastMessage, sendData, successMessage],\\n\\t);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"export\",\"useEndpointUpload\",\"useToastMessageDispatch\",\"useUpload\",\"useCallback\",\"endpoint\",\"successMessage\",\"sendData\",\"dispatchToastMessage\",\"formData\",\"data\",\"promise\",\"result\",\"async\",\"_context\",\"prev\",\"next\",\"Promise\",\"awrap\",\"sent\",\"success\",\"Error\",\"String\",\"status\",\"type\",\"message\",\"abrupt\",\"t0\",\"stop\"],\"mappings\":\"uBACSA,EAAAC,IAAyB,CAAA,6BAAiB,CAAAC,QAAA,SAA2BC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAA9EH,EAAOK,MAAE,CAAA,CAAAC,kBAAuB,WAAW,OAAQA,CAAA,CAAA,GAA2BN,EAAAC,IAAA,CAAA,2BAAA,CAAAM,wBAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,EAAAK,UAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAQ,YAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAGvE,IAHPC,EAAmDG,EAA2BC,EAAAC,EAGjEH,EAAoB,SAChCI,CAAyC,CACzCC,CAAsB,EAEtB,IAAMC,EAAWJ,EAAUE,GACrBG,EAAuBN,IAE7B,OAAOE,EACN,SAAOK,CAAkB,EAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAAb,EAAAc,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAIsC,OAJtCF,EAAAC,IAAA,CAAA,EAIjBJ,EAAUD,AAFVA,CAAAA,EAAOH,EAASE,EAAQ,YAEEQ,QAAUP,EAAOA,EAAKC,OAAO,CAAAG,EAAAE,IAAA,CAAA,EAAAjB,EAAAmB,KAAA,CAEvCP,EAA4C,MAAA,EAAtD,GAEPC,AAFCA,CAAAA,EAAME,EAAAK,IAAA,AAAAA,EAEAC,OAAO,CAAA,CAAAN,EAAAE,IAAA,CAAA,EAAA,KAAA,CAAA,MACZ,AAAIK,MAAMC,OAAOV,EAAOW,MAAM,EAAE,MAAA,EAG8C,OAArFjB,GAAkBE,EAAqB,CAAEgB,KAAM,UAAWC,QAASnB,CAAc,GAAIQ,EAAAY,MAAA,CAAA,SAE9Ed,EAAa,MAAA,GAEoC,OAFpCE,EAAAC,IAAA,CAAA,GAAAD,EAAAa,EAAA,CAAAb,EAAA,KAAA,CAAA,GAEpBN,EAAqB,CAAEgB,KAAM,QAASC,QAAOX,EAAAa,EAAAA,AAAO,GAAIb,EAAAY,MAAA,CAAA,SACjD,CAAEN,QAAS,CAAA,CAAK,EAAE,MAAA,GAAA,IAAA,MAAA,OAAAN,EAAAc,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,GAAA,CAAA,CAAAX,QAAA,EAG3B,CAACT,EAAsBD,EAAUD,EAAe,CAElD\"}"}