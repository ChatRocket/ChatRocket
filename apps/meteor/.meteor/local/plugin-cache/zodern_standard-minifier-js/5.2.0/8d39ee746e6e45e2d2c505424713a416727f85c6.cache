{"code":"function module(e,t,n){let l,r,i,a,s,o;n.export({timeAgo:()=>m}),n.link(\"meteor/meteor\",{Meteor(e){l=e}},0),n.link(\"meteor/tracker\",{Tracker(e){r=e}},1),n.link(\"moment\",{default(e){i=e}},2),n.link(\"../../../app/settings/client\",{settings(e){a=e}},3),n.link(\"../../../app/utils/client\",{getUserPreference(e){s=e}},4),n.link(\"../../../app/utils/lib/i18n\",{t(e){o=e}},5);let c=[\"h:mm A\",\"H:mm\"],m=async e=>{let t=r.nonreactive(()=>s(l.userId(),\"clockMode\",!1)),n=r.nonreactive(()=>a.get(\"Message_TimeFormat\")),m=(\"number\"==typeof t?c[t-1]:void 0)||n;return i(e).calendar(null,{lastDay:\"[\".concat(o(\"yesterday\"),\"]\"),sameDay:m,lastWeek:\"dddd\",sameElse(e){let t=Math.ceil(this.diff(e,\"years\",!0));return t<0?\"MMM D YYYY\":\"MMM D\"}})}}","map":"{\"version\":3,\"sources\":[\"client/lib/utils/timeAgo.ts\",\"<anon>\"],\"sourcesContent\":[\"import { Meteor } from 'meteor/meteor';\\nimport { Tracker } from 'meteor/tracker';\\nimport type { Moment, MomentInput } from 'moment';\\nimport moment from 'moment';\\n\\nimport { settings } from '../../../app/settings/client';\\nimport { getUserPreference } from '../../../app/utils/client';\\nimport { t } from '../../../app/utils/lib/i18n';\\n\\nconst dayFormat = ['h:mm A', 'H:mm'];\\n\\nexport const timeAgo = async (date: MomentInput): Promise<string> => {\\n\\tconst clockMode = Tracker.nonreactive(() => getUserPreference(Meteor.userId(), 'clockMode', false) as number | boolean);\\n\\tconst messageTimeFormat = Tracker.nonreactive(() => settings.get('Message_TimeFormat'));\\n\\tconst sameDay = (typeof clockMode === 'number' ? dayFormat[clockMode - 1] : undefined) || messageTimeFormat;\\n\\n\\treturn moment(date).calendar(null, {\\n\\t\\tlastDay: `[${t('yesterday')}]`,\\n\\t\\tsameDay,\\n\\t\\tlastWeek: 'dddd',\\n\\t\\tsameElse(this: Moment, now) {\\n\\t\\t\\tconst diff = Math.ceil(this.diff(now, 'years', true));\\n\\t\\t\\treturn diff < 0 ? 'MMM D YYYY' : 'MMM D';\\n\\t\\t},\\n\\t});\\n};\\n\",null],\"names\":[\"Meteor\",\"Tracker\",\"moment\",\"settings\",\"getUserPreference\",\"t\",\"module\",\"export\",\"timeAgo\",\"link\",\"v\",\"default\",\"dayFormat\",\"date\",\"clockMode\",\"nonreactive\",\"userId\",\"messageTimeFormat\",\"get\",\"sameDay\",\"undefined\",\"calendar\",\"lastDay\",\"concat\",\"lastWeek\",\"sameElse\",\"now\",\"diff\",\"Math\",\"ceil\"],\"mappings\":\"2BAAuCA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAvCC,EAAOC,MAAE,CAAA,CAAMC,QAAQA,IAAAA,CAAA,GAAgBF,EAAAG,IAAA,CAAA,gBAAA,CAAAT,OAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,iBAAA,CAAAR,QAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,SAAA,CAAAE,QAAAD,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,+BAAA,CAAAN,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,4BAAA,CAAAL,kBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,8BAAA,CAAAJ,EAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GASvC,IAAME,EAAY,CAAC,SAAU,OAAO,CAEvBJ,EAAU,MAAOK,IAC7B,IAAMC,EAAYb,EAAQc,WAAW,CAAC,IAAMX,EAAkBJ,EAAOgB,MAAM,GAAI,YAAa,CAAA,IACtFC,EAAoBhB,EAAQc,WAAW,CAAC,IAAMZ,EAASe,GAAG,CAAC,uBAC3DC,EAAU,AAAC,CAAA,AAAqB,UAArB,OAAOL,EAAyBF,CAAS,CAACE,EAAY,EAAE,CAAGM,KAAAA,CAAAA,GAAcH,EAE1F,OAAOf,EAAOW,GAAMQ,QAAQ,CAAC,KAAM,CAClCC,QAAO,IAAAC,MAAA,CAAMlB,EAAE,aAAY,KAC3Bc,QAAAA,EACAK,SAAU,OACVC,SAAuBC,CAAG,EACzB,IAAMC,EAAOC,KAAKC,IAAI,CAAC,IAAI,CAACF,IAAI,CAACD,EAAK,QAAS,CAAA,IAC/C,OAAOC,EAAO,EAAI,aAAe,OAClC,GAEF\"}"}