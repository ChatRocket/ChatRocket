{"code":"function module(e,t,n){var i,a,o,l,c;n.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){i=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId:function(e){a=e}},0),n.link(\"@rocket.chat/ui-client\",{GenericMenu:function(e){o=e}},1),n.link(\"react\",{default:function(e){l=e}},2),n.link(\"react-i18next\",{useTranslation:function(e){c=e}},3),n.exportDefault(function(e){var t=e.options,n=e.onChangeMenuVisibility,d=e.context,u=e.isMessageEncrypted,r=c().t,p=a(),s=t.map(function(e){var t,n;return i(i({variant:\"alert\"===e.color?\"danger\":\"\",id:e.id,icon:e.icon,content:r(e.label),onClick:e.action,type:e.type},e.disabled&&{disabled:null==e?void 0:null===(t=e.disabled)||void 0===t?void 0:t.call(e,d)}),e.disabled&&(null==e?void 0:null===(n=e.disabled)||void 0===n?void 0:n.call(e,d))&&{tooltip:r(\"Action_not_available_encrypted_content\",{action:r(e.label)})})}).reduce(function(e,t){var n=t.type?t.type:\"\",i=e.find(function(e){return e.id===n});if(i)return i.items.push(t),e;var a={id:n,title:\"apps\"===n?r(\"Apps\"):\"\",items:[t]};return e.push(a),e},[]).map(function(e){return\"apps\"===e.id&&u?{id:\"apps\",title:r(\"Apps\"),items:[{content:r(\"Unavailable\"),type:\"apps\",id:p,disabled:!0,gap:!1,tooltip:r(\"Action_not_available_encrypted_content\",{action:r(\"Apps\")})}]}:e});return l.createElement(o,{onOpenChange:n,detached:!0,title:r(\"More\"),\"data-qa-id\":\"menu\",\"data-qa-type\":\"message-action-menu\",sections:s,placement:\"bottom-end\"})})}","map":"{\"version\":3,\"sources\":[\"client/components/message/toolbar/MessageActionMenu.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { GenericMenu, type GenericMenuItemProps } from '@rocket.chat/ui-client';\\nimport type { MouseEvent, ReactElement } from 'react';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport type { MessageActionConditionProps, MessageActionConfig } from '../../../../app/ui-utils/client/lib/MessageAction';\\n\\ntype MessageActionConfigOption = Omit<MessageActionConfig, 'condition' | 'context' | 'order' | 'action'> & {\\n\\taction: (e?: MouseEvent<HTMLElement>) => void;\\n};\\n\\ntype MessageActionSection = {\\n\\tid: string;\\n\\ttitle: string;\\n\\titems: GenericMenuItemProps[];\\n};\\n\\ntype MessageActionMenuProps = {\\n\\tonChangeMenuVisibility: (visible: boolean) => void;\\n\\toptions: MessageActionConfigOption[];\\n\\tcontext: MessageActionConditionProps;\\n\\tisMessageEncrypted: boolean;\\n};\\n\\nconst MessageActionMenu = ({ options, onChangeMenuVisibility, context, isMessageEncrypted }: MessageActionMenuProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst id = useUniqueId();\\n\\tconst groupOptions = options\\n\\t\\t.map((option) => ({\\n\\t\\t\\tvariant: option.color === 'alert' ? 'danger' : '',\\n\\t\\t\\tid: option.id,\\n\\t\\t\\ticon: option.icon,\\n\\t\\t\\tcontent: t(option.label),\\n\\t\\t\\tonClick: option.action,\\n\\t\\t\\ttype: option.type,\\n\\t\\t\\t...(option.disabled && { disabled: option?.disabled?.(context) }),\\n\\t\\t\\t...(option.disabled &&\\n\\t\\t\\t\\toption?.disabled?.(context) && { tooltip: t('Action_not_available_encrypted_content', { action: t(option.label) }) }),\\n\\t\\t}))\\n\\t\\t.reduce((acc, option) => {\\n\\t\\t\\tconst group = option.type ? option.type : '';\\n\\t\\t\\tconst section = acc.find((section: { id: string }) => section.id === group);\\n\\t\\t\\tif (section) {\\n\\t\\t\\t\\tsection.items.push(option);\\n\\t\\t\\t\\treturn acc;\\n\\t\\t\\t}\\n\\t\\t\\tconst newSection = { id: group, title: group === 'apps' ? t('Apps') : '', items: [option] };\\n\\t\\t\\tacc.push(newSection);\\n\\n\\t\\t\\treturn acc;\\n\\t\\t}, [] as unknown as MessageActionSection[])\\n\\t\\t.map((section) => {\\n\\t\\t\\tif (section.id !== 'apps') {\\n\\t\\t\\t\\treturn section;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (!isMessageEncrypted) {\\n\\t\\t\\t\\treturn section;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\tid: 'apps',\\n\\t\\t\\t\\ttitle: t('Apps'),\\n\\t\\t\\t\\titems: [\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\tcontent: t('Unavailable'),\\n\\t\\t\\t\\t\\t\\ttype: 'apps',\\n\\t\\t\\t\\t\\t\\tid,\\n\\t\\t\\t\\t\\t\\tdisabled: true,\\n\\t\\t\\t\\t\\t\\tgap: false,\\n\\t\\t\\t\\t\\t\\ttooltip: t('Action_not_available_encrypted_content', { action: t('Apps') }),\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t],\\n\\t\\t\\t};\\n\\t\\t});\\n\\n\\treturn (\\n\\t\\t<GenericMenu\\n\\t\\t\\tonOpenChange={onChangeMenuVisibility}\\n\\t\\t\\tdetached\\n\\t\\t\\ttitle={t('More')}\\n\\t\\t\\tdata-qa-id='menu'\\n\\t\\t\\tdata-qa-type='message-action-menu'\\n\\t\\t\\tsections={groupOptions}\\n\\t\\t\\tplacement='bottom-end'\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default MessageActionMenu;\\n\",null],\"names\":[\"_objectSpread\",\"useUniqueId\",\"GenericMenu\",\"React\",\"useTranslation\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"options\",\"onChangeMenuVisibility\",\"context\",\"isMessageEncrypted\",\"t\",\"_useTranslation\",\"id\",\"groupOptions\",\"map\",\"option\",\"_option$disabled\",\"_option$disabled2\",\"variant\",\"color\",\"icon\",\"content\",\"label\",\"onClick\",\"action\",\"type\",\"disabled\",\"call\",\"tooltip\",\"reduce\",\"acc\",\"group\",\"section\",\"find\",\"items\",\"push\",\"newSection\",\"title\",\"gap\",\"createElement\",\"onOpenChange\",\"detached\",\"sections\",\"placement\"],\"mappings\":\"uBAyBA,IAzBAA,EAAAC,EAA0DC,EAAAC,EAAAC,EAAjDC,EAAaC,IAAM,CAAA,uCAA8B,CAAAC,QAAA,SAAAC,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAjDH,EAAaC,IAAA,CAAM,8BAA8B,CAAAL,YAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yBAAA,CAAAJ,YAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAF,eAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA1DH,EAAOI,aAAa,CAyBM,SAAAC,CAAA,EAA2G,IAAxGC,EAAOD,EAAPC,OAAO,CAAEC,EAAsBF,EAAtBE,sBAAsB,CAAEC,EAAOH,EAAPG,OAAO,CAAEC,EAAkBJ,EAAlBI,kBAAkB,CAChFC,EAACC,AAAKZ,IAANW,CAAC,CACHE,EAAKhB,IACLiB,EAAeP,EACnBQ,GAAG,CAAC,SAACC,CAAM,EAAA,IAAAC,EAAAC,EAAA,OAAAtB,EAAAA,EAAA,CACXuB,QAASH,AAAiB,UAAjBA,EAAOI,KAAK,CAAe,SAAW,GAC/CP,GAAIG,EAAOH,EAAE,CACbQ,KAAML,EAAOK,IAAI,CACjBC,QAASX,EAAEK,EAAOO,KAAK,EACvBC,QAASR,EAAOS,MAAM,CACtBC,KAAMV,EAAOU,IAAAA,AAAI,EACbV,EAAOW,QAAQ,EAAI,CAAEA,SAAUX,MAAAA,EAAM,KAAA,EAAA,AAAU,OAAVC,CAAAA,EAAND,EAAQW,QAAQ,AAARA,GAAQV,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAhBA,EAAAW,IAAA,CAAAZ,EAAmBP,EAAQ,GAC1DO,EAAOW,QAAQ,EAClBX,CAAAA,MAAAA,EAAM,KAAA,EAAA,AAAU,OAAVE,CAAAA,EAANF,EAAQW,QAAQ,AAARA,GAAQT,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAhBA,EAAAU,IAAA,CAAAZ,EAAmBP,EAAO,GAAK,CAAEoB,QAASlB,EAAE,yCAA0C,CAAEc,OAAQd,EAAEK,EAAOO,KAAK,CAAC,EAAG,EAAE,GAErHO,MAAM,CAAC,SAACC,CAAG,CAAEf,CAAM,EACnB,IAAMgB,EAAQhB,EAAOU,IAAI,CAAGV,EAAOU,IAAI,CAAG,GACpCO,EAAUF,EAAIG,IAAI,CAAC,SAACD,CAAuB,EAAA,OAAKA,EAAQpB,EAAE,GAAKmB,CAAK,GAC1E,GAAIC,EAEH,OADAA,EAAQE,KAAK,CAACC,IAAI,CAACpB,GACZe,EAER,IAAMM,EAAa,CAAExB,GAAImB,EAAOM,MAAON,AAAU,SAAVA,EAAmBrB,EAAE,QAAU,GAAIwB,MAAO,CAACnB,EAAM,AAAC,EAGzF,OAFAe,EAAIK,IAAI,CAACC,GAEFN,CACR,EAAG,EAAuC,EACzChB,GAAG,CAAC,SAACkB,CAAO,QACZ,AAAmB,SAAfA,EAAQpB,EAAE,EAITH,EAIE,CACNG,GAAI,OACJyB,MAAO3B,EAAE,QACTwB,MAAO,CACN,CACCb,QAASX,EAAE,eACXe,KAAM,OACNb,GAAAA,EACAc,SAAU,CAAA,EACVY,IAAK,CAAA,EACLV,QAASlB,EAAE,yCAA0C,CAAEc,OAAQd,EAAE,OAAO,IACxE,EAlBKsB,CAqBT,GAED,OACClC,EAAAyC,aAAA,CAAC1C,EAAW,CACX2C,aAAcjC,EACdkC,SAAQ,CAAA,EACRJ,MAAO3B,EAAE,QACT,aAAW,OACX,eAAa,sBACbgC,SAAU7B,EACV8B,UAAU,YAAY,EAGzB\"}"}