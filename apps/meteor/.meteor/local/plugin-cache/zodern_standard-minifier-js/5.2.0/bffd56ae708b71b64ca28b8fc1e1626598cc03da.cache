{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){i=e}},0),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){o=e}},1),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){u=e}},2),t.export({useAvailableAgentsList:function(){return f}}),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){r=e}},0),t.link(\"react\",{useCallback:function(e){l=e},useState:function(e){a=e}},1),t.link(\"../../../hooks/lists/useScrollableRecordList\",{useScrollableRecordList:function(e){s=e}},2),t.link(\"../../../hooks/useComponentDidUpdate\",{useComponentDidUpdate:function(e){c=e}},3),t.link(\"../../../lib/lists/RecordList\",{RecordList:function(e){d=e}},4);var i,o,u,r,l,a,s,c,d,f=function(e){var n=a(function(){return new d}),t=u(n,2),f=t[0],m=t[1],p=l(function(){return m(new d)},[]),b=r(\"GET\",\"/v1/omnichannel/agents/available\");c(function(){e&&p()},[e,p]);var k=l(function(n,t){var u,r,l,a;return i.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,i.awrap(b(o(o(o({},e.text&&{text:e.text}),e.includeExtension&&{includeExtension:e.includeExtension}),{},{offset:n,count:t+n,sort:'{ \"name\": 1 }'})));case 2:return r=(u=s.sent).agents,l=u.total,a=r.map(function(e){return e._updatedAt=new Date(e._updatedAt),e.label=e.username,e.value=e._id,e}),s.abrupt(\"return\",{items:a,itemCount:l});case 7:case\"end\":return s.stop()}},null,null,null,Promise)},[b,e.includeExtension,e.text]),x=s(f,k,25);return{reload:p,itemsList:f,loadMoreItems:x.loadMoreItems,initialItemCount:x.initialItemCount}}}","map":"{\"version\":3,\"sources\":[\"client/components/Omnichannel/hooks/useAvailableAgentsList.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatAgent } from '@rocket.chat/core-typings';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useState } from 'react';\\n\\nimport { useScrollableRecordList } from '../../../hooks/lists/useScrollableRecordList';\\nimport { useComponentDidUpdate } from '../../../hooks/useComponentDidUpdate';\\nimport { RecordList } from '../../../lib/lists/RecordList';\\n\\ntype AgentsListOptions = {\\n\\ttext: string;\\n\\tincludeExtension?: string;\\n};\\n\\nexport const useAvailableAgentsList = (\\n\\toptions: AgentsListOptions,\\n): {\\n\\titemsList: RecordList<ILivechatAgent>;\\n\\tinitialItemCount: number;\\n\\treload: () => void;\\n\\tloadMoreItems: (start: number, end: number) => void;\\n} => {\\n\\tconst [itemsList, setItemsList] = useState(() => new RecordList<ILivechatAgent>());\\n\\tconst reload = useCallback(() => setItemsList(new RecordList<ILivechatAgent>()), []);\\n\\n\\tconst getAgents = useEndpoint('GET', '/v1/omnichannel/agents/available');\\n\\n\\tuseComponentDidUpdate(() => {\\n\\t\\toptions && reload();\\n\\t}, [options, reload]);\\n\\n\\tconst fetchData = useCallback(\\n\\t\\tasync (start, end) => {\\n\\t\\t\\tconst { agents, total } = await getAgents({\\n\\t\\t\\t\\t...(options.text && { text: options.text }),\\n\\t\\t\\t\\t...(options.includeExtension && { includeExtension: options.includeExtension }),\\n\\t\\t\\t\\toffset: start,\\n\\t\\t\\t\\tcount: end + start,\\n\\t\\t\\t\\tsort: `{ \\\"name\\\": 1 }`,\\n\\t\\t\\t});\\n\\n\\t\\t\\tconst items = agents.map((agent: any) => {\\n\\t\\t\\t\\tagent._updatedAt = new Date(agent._updatedAt);\\n\\t\\t\\t\\tagent.label = agent.username;\\n\\t\\t\\t\\tagent.value = agent._id;\\n\\t\\t\\t\\treturn agent;\\n\\t\\t\\t});\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\titems,\\n\\t\\t\\t\\titemCount: total,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t[getAgents, options.includeExtension, options.text],\\n\\t);\\n\\n\\tconst { loadMoreItems, initialItemCount } = useScrollableRecordList(itemsList, fetchData, 25);\\n\\n\\treturn {\\n\\t\\treload,\\n\\t\\titemsList,\\n\\t\\tloadMoreItems,\\n\\t\\tinitialItemCount,\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_objectSpread\",\"_slicedToArray\",\"export\",\"useAvailableAgentsList\",\"useEndpoint\",\"useCallback\",\"useState\",\"useScrollableRecordList\",\"useComponentDidUpdate\",\"RecordList\",\"options\",\"_useState\",\"_useState2\",\"itemsList\",\"setItemsList\",\"reload\",\"getAgents\",\"fetchData\",\"start\",\"end\",\"_await$getAgents\",\"agents\",\"total\",\"items\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"text\",\"includeExtension\",\"offset\",\"count\",\"sort\",\"sent\",\"map\",\"agent\",\"_updatedAt\",\"Date\",\"label\",\"username\",\"value\",\"_id\",\"abrupt\",\"itemCount\",\"stop\",\"Promise\",\"_useScrollableRecordL\",\"loadMoreItems\",\"initialItemCount\"],\"mappings\":\"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\"}"}