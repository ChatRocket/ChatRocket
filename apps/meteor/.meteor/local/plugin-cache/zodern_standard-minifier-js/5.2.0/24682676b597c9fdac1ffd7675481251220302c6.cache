{"code":"function module(e,t,n){let i,o,s,c,r,l,u,a,d,A,k,U,g,h,p,C,m;n.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){i=e}},0),n.export({useUserInfoActions:()=>M}),n.link(\"@rocket.chat/ui-contexts\",{useLayoutHiddenActions(e){o=e}},0),n.link(\"react\",{useMemo(e){s=e}},1),n.link(\"../../../../hooks/useEmbeddedLayout\",{useEmbeddedLayout(e){c=e}},2),n.link(\"./actions/useAddUserAction\",{useAddUserAction(e){r=e}},3),n.link(\"./actions/useBlockUserAction\",{useBlockUserAction(e){l=e}},4),n.link(\"./actions/useChangeLeaderAction\",{useChangeLeaderAction(e){u=e}},5),n.link(\"./actions/useChangeModeratorAction\",{useChangeModeratorAction(e){a=e}},6),n.link(\"./actions/useChangeOwnerAction\",{useChangeOwnerAction(e){d=e}},7),n.link(\"./actions/useDirectMessageAction\",{useDirectMessageAction(e){A=e}},8),n.link(\"./actions/useIgnoreUserAction\",{useIgnoreUserAction(e){k=e}},9),n.link(\"./actions/useMuteUserAction\",{useMuteUserAction(e){U=e}},10),n.link(\"./actions/useRedirectModerationConsole\",{useRedirectModerationConsole(e){g=e}},11),n.link(\"./actions/useRemoveUserAction\",{useRemoveUserAction(e){h=e}},12),n.link(\"./actions/useReportUser\",{useReportUser(e){p=e}},13),n.link(\"./actions/useVideoCallAction\",{useVideoCallAction(e){C=e}},14),n.link(\"./actions/useVoipCallAction\",{useVoipCallAction(e){m=e}},15);let M=e=>{let{user:t,rid:n,reload:M,size:b=2,isMember:R}=e,f=r(t,n,M),y=l(t,n),L=u(t,n),V=a(t,n),x=g(t._id),B=d(t,n),I=A(t,n),O=k(t,n),j=U(t,n),v=h(t,n,M),w=C(t),D=m(t),E=p(t),H=c(),{userToolbox:S}=o(),T=s(()=>i(i(i(i(i(i(i(i(i(i(i(i(i({},I&&!H&&{openDirectMessage:I}),w&&{videoCall:w}),D&&{voipCall:D}),!R&&f&&{addUser:f}),R&&B&&{changeOwner:B}),R&&L&&{changeLeader:L}),R&&V&&{changeModerator:V}),R&&x&&{openModerationConsole:x}),R&&O&&{ignoreUser:O}),R&&j&&{muteUser:j}),y&&{toggleBlock:y}),E&&{reportUser:E}),R&&v&&{removeUser:v}),[I,H,w,D,B,L,V,O,j,y,v,E,x,f,R]),_=s(()=>{let e=Object.entries(T).filter(e=>{let[t]=e;return!S.includes(t)}),t=e.slice(0,b),n=e.slice(b,e.length),o=n.reduce((e,t)=>{let[n,o]=t,s=o.type?o.type:\"\",c=e.find(e=>e.id===s),r=i(i({},o),{},{id:o.content||o.title||\"\",content:o.content||o.title});return c?c.items.push(r):e.push({id:s,title:\"\",items:[r]}),e},[]);return{actions:t,menuActions:o}},[b,T,S]);return _}}","map":"{\"version\":3,\"sources\":[\"client/views/room/hooks/useUserInfoActions/useUserInfoActions.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, IUser } from '@rocket.chat/core-typings';\\nimport type { Icon } from '@rocket.chat/fuselage';\\nimport type { GenericMenuItemProps } from '@rocket.chat/ui-client';\\nimport { useLayoutHiddenActions } from '@rocket.chat/ui-contexts';\\nimport type { ComponentProps } from 'react';\\nimport { useMemo } from 'react';\\n\\nimport { useEmbeddedLayout } from '../../../../hooks/useEmbeddedLayout';\\nimport { useAddUserAction } from './actions/useAddUserAction';\\nimport { useBlockUserAction } from './actions/useBlockUserAction';\\nimport { useChangeLeaderAction } from './actions/useChangeLeaderAction';\\nimport { useChangeModeratorAction } from './actions/useChangeModeratorAction';\\nimport { useChangeOwnerAction } from './actions/useChangeOwnerAction';\\nimport { useDirectMessageAction } from './actions/useDirectMessageAction';\\nimport { useIgnoreUserAction } from './actions/useIgnoreUserAction';\\nimport { useMuteUserAction } from './actions/useMuteUserAction';\\nimport { useRedirectModerationConsole } from './actions/useRedirectModerationConsole';\\nimport { useRemoveUserAction } from './actions/useRemoveUserAction';\\nimport { useReportUser } from './actions/useReportUser';\\nimport { useVideoCallAction } from './actions/useVideoCallAction';\\nimport { useVoipCallAction } from './actions/useVoipCallAction';\\n\\nexport type UserInfoActionType = 'communication' | 'privileges' | 'management' | 'moderation';\\n\\ntype UserInfoActionWithOnlyIcon = {\\n\\ttype?: UserInfoActionType;\\n\\tcontent?: string;\\n\\ticon: ComponentProps<typeof Icon>['name'];\\n\\ttitle: string;\\n\\tvariant?: 'danger';\\n\\tonClick: () => void;\\n};\\n\\ntype UserInfoActionWithContent = {\\n\\ttype?: UserInfoActionType;\\n\\tcontent: string;\\n\\ticon?: ComponentProps<typeof Icon>['name'];\\n\\ttitle?: string;\\n\\tvariant?: 'danger';\\n\\tonClick: () => void;\\n};\\n\\nexport type UserInfoAction = UserInfoActionWithContent | UserInfoActionWithOnlyIcon;\\n\\ntype UserMenuAction = {\\n\\tid: string;\\n\\ttitle: string;\\n\\titems: GenericMenuItemProps[];\\n}[];\\n\\ntype UserInfoActionsParams = {\\n\\tuser: Pick<IUser, '_id' | 'username' | 'name' | 'freeSwitchExtension'>;\\n\\trid: IRoom['_id'];\\n\\treload?: () => void;\\n\\tsize?: number;\\n\\tisMember?: boolean;\\n};\\n\\nexport const useUserInfoActions = ({\\n\\tuser,\\n\\trid,\\n\\treload,\\n\\tsize = 2,\\n\\tisMember,\\n}: UserInfoActionsParams): { actions: [string, UserInfoAction][]; menuActions: any | undefined } => {\\n\\tconst addUser = useAddUserAction(user, rid, reload);\\n\\tconst blockUser = useBlockUserAction(user, rid);\\n\\tconst changeLeader = useChangeLeaderAction(user, rid);\\n\\tconst changeModerator = useChangeModeratorAction(user, rid);\\n\\tconst openModerationConsole = useRedirectModerationConsole(user._id);\\n\\tconst changeOwner = useChangeOwnerAction(user, rid);\\n\\tconst openDirectMessage = useDirectMessageAction(user, rid);\\n\\tconst ignoreUser = useIgnoreUserAction(user, rid);\\n\\tconst muteUser = useMuteUserAction(user, rid);\\n\\tconst removeUser = useRemoveUserAction(user, rid, reload);\\n\\tconst videoCall = useVideoCallAction(user);\\n\\tconst voipCall = useVoipCallAction(user);\\n\\tconst reportUserOption = useReportUser(user);\\n\\tconst isLayoutEmbedded = useEmbeddedLayout();\\n\\tconst { userToolbox: hiddenActions } = useLayoutHiddenActions();\\n\\n\\tconst userinfoActions = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\t...(openDirectMessage && !isLayoutEmbedded && { openDirectMessage }),\\n\\t\\t\\t...(videoCall && { videoCall }),\\n\\t\\t\\t...(voipCall && { voipCall }),\\n\\t\\t\\t...(!isMember && addUser && { addUser }),\\n\\t\\t\\t...(isMember && changeOwner && { changeOwner }),\\n\\t\\t\\t...(isMember && changeLeader && { changeLeader }),\\n\\t\\t\\t...(isMember && changeModerator && { changeModerator }),\\n\\t\\t\\t...(isMember && openModerationConsole && { openModerationConsole }),\\n\\t\\t\\t...(isMember && ignoreUser && { ignoreUser }),\\n\\t\\t\\t...(isMember && muteUser && { muteUser }),\\n\\t\\t\\t...(blockUser && { toggleBlock: blockUser }),\\n\\t\\t\\t...(reportUserOption && { reportUser: reportUserOption }),\\n\\t\\t\\t...(isMember && removeUser && { removeUser }),\\n\\t\\t}),\\n\\t\\t[\\n\\t\\t\\topenDirectMessage,\\n\\t\\t\\tisLayoutEmbedded,\\n\\t\\t\\tvideoCall,\\n\\t\\t\\tvoipCall,\\n\\t\\t\\tchangeOwner,\\n\\t\\t\\tchangeLeader,\\n\\t\\t\\tchangeModerator,\\n\\t\\t\\tignoreUser,\\n\\t\\t\\tmuteUser,\\n\\t\\t\\tblockUser,\\n\\t\\t\\tremoveUser,\\n\\t\\t\\treportUserOption,\\n\\t\\t\\topenModerationConsole,\\n\\t\\t\\taddUser,\\n\\t\\t\\tisMember,\\n\\t\\t],\\n\\t);\\n\\n\\tconst actionSpread = useMemo(() => {\\n\\t\\tconst entries = Object.entries(userinfoActions).filter(([key]) => !hiddenActions.includes(key));\\n\\n\\t\\tconst options = entries.slice(0, size);\\n\\t\\tconst slicedOptions = entries.slice(size, entries.length);\\n\\n\\t\\tconst menuActions = slicedOptions.reduce((acc, [_key, item]) => {\\n\\t\\t\\tconst group = item.type ? item.type : '';\\n\\t\\t\\tconst section = acc.find((section: { id: string }) => section.id === group);\\n\\n\\t\\t\\tconst newItem = {\\n\\t\\t\\t\\t...item,\\n\\t\\t\\t\\tid: item.content || item.title || '',\\n\\t\\t\\t\\tcontent: item.content || item.title,\\n\\t\\t\\t};\\n\\n\\t\\t\\tif (section) {\\n\\t\\t\\t\\tsection.items.push(newItem);\\n\\t\\t\\t\\treturn acc;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst newSection = { id: group, title: '', items: [newItem] };\\n\\t\\t\\tacc.push(newSection);\\n\\n\\t\\t\\treturn acc;\\n\\t\\t}, [] as UserMenuAction);\\n\\n\\t\\treturn { actions: options, menuActions };\\n\\t}, [size, userinfoActions, hiddenActions]);\\n\\n\\treturn actionSpread;\\n};\\n\",null],\"names\":[\"_objectSpread\",\"useLayoutHiddenActions\",\"useMemo\",\"useEmbeddedLayout\",\"useAddUserAction\",\"useBlockUserAction\",\"useChangeLeaderAction\",\"useChangeModeratorAction\",\"useChangeOwnerAction\",\"useDirectMessageAction\",\"useIgnoreUserAction\",\"useMuteUserAction\",\"useRedirectModerationConsole\",\"useRemoveUserAction\",\"useReportUser\",\"useVideoCallAction\",\"useVoipCallAction\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useUserInfoActions\",\"_ref\",\"user\",\"rid\",\"reload\",\"size\",\"isMember\",\"addUser\",\"blockUser\",\"changeLeader\",\"changeModerator\",\"openModerationConsole\",\"_id\",\"changeOwner\",\"openDirectMessage\",\"ignoreUser\",\"muteUser\",\"removeUser\",\"videoCall\",\"voipCall\",\"reportUserOption\",\"isLayoutEmbedded\",\"userToolbox\",\"hiddenActions\",\"userinfoActions\",\"toggleBlock\",\"reportUser\",\"actionSpread\",\"entries\",\"Object\",\"filter\",\"_ref2\",\"key\",\"includes\",\"options\",\"slice\",\"slicedOptions\",\"length\",\"menuActions\",\"reduce\",\"acc\",\"_ref3\",\"_key\",\"item\",\"group\",\"type\",\"section\",\"find\",\"id\",\"newItem\",\"content\",\"title\",\"items\",\"push\",\"actions\"],\"mappings\":\"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\"}"}