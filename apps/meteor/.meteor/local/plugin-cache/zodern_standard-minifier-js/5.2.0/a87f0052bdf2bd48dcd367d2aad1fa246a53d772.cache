{"code":"function module(n,e,t){t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(n){o=n}},0),t.export({PrivateRoomType:function(){return _}}),t.link(\"@rocket.chat/core-typings\",{isRoomFederated:function(n){r=n}},0),t.link(\"meteor/meteor\",{Meteor:function(n){i=n}},1),t.link(\"../../../../app/authorization/client\",{hasPermission:function(n){a=n}},2),t.link(\"../../../../app/models/client\",{ChatRoom:function(n){c=n}},3),t.link(\"../../../../app/settings/client\",{settings:function(n){u=n}},4),t.link(\"../../../../app/utils/client\",{getUserPreference:function(n){l=n}},5),t.link(\"../../../../app/utils/client/getRoomAvatarURL\",{getRoomAvatarURL:function(n){s=n}},6),t.link(\"../../../../definition/IRoomTypeConfig\",{RoomSettingsEnum:function(n){m=n},RoomMemberActions:function(n){f=n},UiTextContext:function(n){p=n}},7),t.link(\"../../../../lib/rooms/roomTypes/private\",{getPrivateRoomType:function(n){d=n}},8),t.link(\"../../federation/Federation\",{\"*\":function(n){g=n}},9),t.link(\"../roomCoordinator\",{roomCoordinator:function(n){R=n}},10);var o,r,i,a,c,u,l,s,m,f,p,d,g,R,_=d(R);R.add(o(o({},_),{},{label:\"Private_Groups\"}),{allowRoomSettingChange:function(n,e){if(r(n))return g.isRoomSettingAllowed(n,e);switch(e){case m.JOIN_CODE:return!1;case m.BROADCAST:return!!n.broadcast;case m.READ_ONLY:return!n.broadcast;case m.REACT_WHEN_READ_ONLY:return!!(!n.broadcast&&n.ro);case m.E2E:return!0===u.get(\"E2E_Enable\");case m.SYSTEM_MESSAGES:default:return!0}},allowMemberAction:function(n,e,t,o){return r(n)?g.actionAllowed(n,e,t,o):e!==f.BLOCK},roomName:function(n){return n.prid||r(n)?n.fname:u.get(\"UI_Allow_room_names_with_special_chars\")&&n.fname||n.name},isGroupChat:function(n){return!0},getUiText:function(n){switch(n){case p.HIDE_WARNING:return\"Hide_Group_Warning\";case p.LEAVE_WARNING:return\"Leave_Group_Warning\";default:return\"\"}},condition:function(){return l(i.userId(),\"sidebarGroupByType\")&&a(\"view-p-room\")},getAvatarPath:function(n){return s({roomId:n._id,cache:n.avatarETag})},getIcon:function(n){return n.prid?\"discussion\":n.teamMain?\"team-lock\":r(n)?\"globe\":\"hashtag-lock\"},extractOpenRoomParams:function(n){return{type:\"p\",reference:n.name}},findRoom:function(n){return c.findOne({t:\"p\",name:n})}})}","map":"{\"version\":3,\"sources\":[\"client/lib/rooms/roomTypes/private.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { AtLeast, IRoom } from '@rocket.chat/core-typings';\\nimport { isRoomFederated } from '@rocket.chat/core-typings';\\nimport { Meteor } from 'meteor/meteor';\\nimport type { Mongo } from 'meteor/mongo';\\n\\nimport { hasPermission } from '../../../../app/authorization/client';\\nimport { ChatRoom } from '../../../../app/models/client';\\nimport { settings } from '../../../../app/settings/client';\\nimport { getUserPreference } from '../../../../app/utils/client';\\nimport { getRoomAvatarURL } from '../../../../app/utils/client/getRoomAvatarURL';\\nimport type { IRoomTypeClientDirectives } from '../../../../definition/IRoomTypeConfig';\\nimport { RoomSettingsEnum, RoomMemberActions, UiTextContext } from '../../../../definition/IRoomTypeConfig';\\nimport { getPrivateRoomType } from '../../../../lib/rooms/roomTypes/private';\\nimport * as Federation from '../../federation/Federation';\\nimport { roomCoordinator } from '../roomCoordinator';\\n\\nexport const PrivateRoomType = getPrivateRoomType(roomCoordinator);\\n\\nroomCoordinator.add(\\n\\t{\\n\\t\\t...PrivateRoomType,\\n\\t\\tlabel: 'Private_Groups',\\n\\t},\\n\\t{\\n\\t\\tallowRoomSettingChange(room, setting) {\\n\\t\\t\\tif (isRoomFederated(room as IRoom)) {\\n\\t\\t\\t\\treturn Federation.isRoomSettingAllowed(room, setting);\\n\\t\\t\\t}\\n\\t\\t\\tswitch (setting) {\\n\\t\\t\\t\\tcase RoomSettingsEnum.JOIN_CODE:\\n\\t\\t\\t\\t\\treturn false;\\n\\t\\t\\t\\tcase RoomSettingsEnum.BROADCAST:\\n\\t\\t\\t\\t\\treturn Boolean(room.broadcast);\\n\\t\\t\\t\\tcase RoomSettingsEnum.READ_ONLY:\\n\\t\\t\\t\\t\\treturn !room.broadcast;\\n\\t\\t\\t\\tcase RoomSettingsEnum.REACT_WHEN_READ_ONLY:\\n\\t\\t\\t\\t\\treturn Boolean(!room.broadcast && room.ro);\\n\\t\\t\\t\\tcase RoomSettingsEnum.E2E:\\n\\t\\t\\t\\t\\treturn settings.get('E2E_Enable') === true;\\n\\t\\t\\t\\tcase RoomSettingsEnum.SYSTEM_MESSAGES:\\n\\t\\t\\t\\tdefault:\\n\\t\\t\\t\\t\\treturn true;\\n\\t\\t\\t}\\n\\t\\t},\\n\\n\\t\\tallowMemberAction(_room, action, showingUserId, userSubscription) {\\n\\t\\t\\tif (isRoomFederated(_room as IRoom)) {\\n\\t\\t\\t\\treturn Federation.actionAllowed(_room, action, showingUserId, userSubscription);\\n\\t\\t\\t}\\n\\t\\t\\tswitch (action) {\\n\\t\\t\\t\\tcase RoomMemberActions.BLOCK:\\n\\t\\t\\t\\t\\treturn false;\\n\\t\\t\\t\\tdefault:\\n\\t\\t\\t\\t\\treturn true;\\n\\t\\t\\t}\\n\\t\\t},\\n\\n\\t\\troomName(roomData) {\\n\\t\\t\\tif (roomData.prid || isRoomFederated(roomData)) {\\n\\t\\t\\t\\treturn roomData.fname;\\n\\t\\t\\t}\\n\\t\\t\\tif (settings.get('UI_Allow_room_names_with_special_chars')) {\\n\\t\\t\\t\\treturn roomData.fname || roomData.name;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn roomData.name;\\n\\t\\t},\\n\\n\\t\\tisGroupChat(_room) {\\n\\t\\t\\treturn true;\\n\\t\\t},\\n\\n\\t\\tgetUiText(context) {\\n\\t\\t\\tswitch (context) {\\n\\t\\t\\t\\tcase UiTextContext.HIDE_WARNING:\\n\\t\\t\\t\\t\\treturn 'Hide_Group_Warning';\\n\\t\\t\\t\\tcase UiTextContext.LEAVE_WARNING:\\n\\t\\t\\t\\t\\treturn 'Leave_Group_Warning';\\n\\t\\t\\t\\tdefault:\\n\\t\\t\\t\\t\\treturn '';\\n\\t\\t\\t}\\n\\t\\t},\\n\\n\\t\\tcondition() {\\n\\t\\t\\tconst groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\\n\\t\\t\\treturn groupByType && hasPermission('view-p-room');\\n\\t\\t},\\n\\n\\t\\tgetAvatarPath(room) {\\n\\t\\t\\treturn getRoomAvatarURL({ roomId: room._id, cache: room.avatarETag });\\n\\t\\t},\\n\\n\\t\\tgetIcon(room) {\\n\\t\\t\\tif (room.prid) {\\n\\t\\t\\t\\treturn 'discussion';\\n\\t\\t\\t}\\n\\t\\t\\tif (room.teamMain) {\\n\\t\\t\\t\\treturn 'team-lock';\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (isRoomFederated(room)) {\\n\\t\\t\\t\\treturn 'globe';\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn 'hashtag-lock';\\n\\t\\t},\\n\\n\\t\\textractOpenRoomParams({ name }) {\\n\\t\\t\\treturn { type: 'p', reference: name };\\n\\t\\t},\\n\\n\\t\\tfindRoom(identifier) {\\n\\t\\t\\tconst query: Mongo.Selector<IRoom> = {\\n\\t\\t\\t\\tt: 'p',\\n\\t\\t\\t\\tname: identifier,\\n\\t\\t\\t};\\n\\n\\t\\t\\treturn ChatRoom.findOne(query);\\n\\t\\t},\\n\\t} as AtLeast<IRoomTypeClientDirectives, 'isGroupChat' | 'roomName'>,\\n);\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"export\",\"PrivateRoomType\",\"isRoomFederated\",\"Meteor\",\"hasPermission\",\"ChatRoom\",\"settings\",\"getUserPreference\",\"getRoomAvatarURL\",\"RoomSettingsEnum\",\"RoomMemberActions\",\"UiTextContext\",\"getPrivateRoomType\",\"Federation\",\"roomCoordinator\",\"add\",\"label\",\"allowRoomSettingChange\",\"room\",\"setting\",\"isRoomSettingAllowed\",\"JOIN_CODE\",\"BROADCAST\",\"Boolean\",\"broadcast\",\"READ_ONLY\",\"REACT_WHEN_READ_ONLY\",\"ro\",\"E2E\",\"get\",\"SYSTEM_MESSAGES\",\"allowMemberAction\",\"_room\",\"action\",\"showingUserId\",\"userSubscription\",\"actionAllowed\",\"BLOCK\",\"roomName\",\"roomData\",\"prid\",\"fname\",\"name\",\"isGroupChat\",\"getUiText\",\"context\",\"HIDE_WARNING\",\"LEAVE_WARNING\",\"condition\",\"groupByType\",\"userId\",\"getAvatarPath\",\"roomId\",\"_id\",\"cache\",\"avatarETag\",\"getIcon\",\"teamMain\",\"extractOpenRoomParams\",\"_ref\",\"type\",\"reference\",\"findRoom\",\"identifier\",\"findOne\",\"t\"],\"mappings\":\"uBACSA,EAAeC,IAAE,CAAA,uCAAkC,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAA5DH,EAAOK,MAAE,CAAA,CAAAC,gBAAiB,WAAM,OAAAA,CAA4B,CAAA,GAAAN,EAAAC,IAAA,CAAA,4BAAA,CAAAM,gBAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAO,OAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAQ,cAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gCAAA,CAAAS,SAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kCAAA,CAAAU,SAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,+BAAA,CAAAW,kBAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gDAAA,CAAAY,iBAAA,SAAAV,CAAA,EAAAU,EAAAV,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yCAAA,CAAAa,iBAAA,SAAAX,CAAA,EAAAW,EAAAX,CAAA,EAAAY,kBAAA,SAAAZ,CAAA,EAAAY,EAAAZ,CAAA,EAAAa,cAAA,SAAAb,CAAA,EAAAa,EAAAb,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0CAAA,CAAAgB,mBAAA,SAAAd,CAAA,EAAAc,EAAAd,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAA,IAAA,SAAAE,CAAA,EAAAe,EAAAf,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qBAAA,CAAAkB,gBAAA,SAAAhB,CAAA,EAAAgB,EAAAhB,CAAA,CAAA,EAAA,IAerD,IAfPC,EAA4DG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAe/Cb,EAAkBW,EAAmBE,GAElDA,EAAgBC,GAAG,CAAAhB,EAAAA,EAAA,CAAA,EAEdE,GAAe,CAAA,EAAA,CAClBe,MAAO,gBAAgB,GAExB,CACCC,uBAAsB,SAACC,CAAI,CAAEC,CAAO,EACnC,GAAIjB,EAAgBgB,GACnB,OAAOL,EAAWO,oBAAoB,CAACF,EAAMC,GAE9C,OAAQA,GACP,KAAKV,EAAiBY,SAAS,CAC9B,MAAO,CAAA,CACR,MAAKZ,EAAiBa,SAAS,CAC9B,MAAOC,CAAAA,CAAQL,EAAKM,SAAS,AAC9B,MAAKf,EAAiBgB,SAAS,CAC9B,MAAO,CAACP,EAAKM,SAAS,AACvB,MAAKf,EAAiBiB,oBAAoB,CACzC,MAAOH,CAAAA,CAAQ,CAAA,CAACL,EAAKM,SAAS,EAAIN,EAAKS,EAAE,AAAFA,CACxC,MAAKlB,EAAiBmB,GAAG,CACxB,MAAOtB,AAA+B,CAAA,IAA/BA,EAASuB,GAAG,CAAC,aACrB,MAAKpB,EAAiBqB,eAAe,CACrC,QACC,MAAO,CAAA,CACT,CACD,EAEAC,kBAAiB,SAACC,CAAK,CAAEC,CAAM,CAAEC,CAAa,CAAEC,CAAgB,SAC/D,AAAIjC,EAAgB8B,GACZnB,EAAWuB,aAAa,CAACJ,EAAOC,EAAQC,EAAeC,GAEvDF,IACFvB,EAAkB2B,KAAK,AAK9B,EAEAC,SAAQ,SAACC,CAAQ,SAChB,AAAIA,EAASC,IAAI,EAAItC,EAAgBqC,GAC7BA,EAASE,KAAK,CAElBnC,EAASuB,GAAG,CAAC,2CACTU,EAASE,KAAK,EAAIF,EAASG,IAAI,AAIxC,EAEAC,YAAW,SAACX,CAAK,EAChB,MAAO,CAAA,CACR,EAEAY,UAAS,SAACC,CAAO,EAChB,OAAQA,GACP,KAAKlC,EAAcmC,YAAY,CAC9B,MAAO,oBACR,MAAKnC,EAAcoC,aAAa,CAC/B,MAAO,qBACR,SACC,MAAO,EACT,CACD,EAEAC,UAAS,WAER,OAAOC,AADa1C,EAAkBJ,EAAO+C,MAAM,GAAI,uBACjC9C,EAAc,cACrC,EAEA+C,cAAa,SAACjC,CAAI,EACjB,OAAOV,EAAiB,CAAE4C,OAAQlC,EAAKmC,GAAG,CAAEC,MAAOpC,EAAKqC,UAAAA,AAAU,EACnE,EAEAC,QAAO,SAACtC,CAAI,SACX,AAAIA,EAAKsB,IAAI,CACL,aAEJtB,EAAKuC,QAAQ,CACT,YAGJvD,EAAgBgB,GACZ,QAGD,cACR,EAEAwC,sBAAqB,SAAAC,CAAA,EACpB,MAAO,CAAEC,KAAM,IAAKC,UADOF,EAAJjB,IAAI,AACQ,CACpC,EAEAoB,SAAQ,SAACC,CAAU,EAMlB,OAAO1D,EAAS2D,OAAO,CALc,CACpCC,EAAG,IACHvB,KAAMqB,GAIR\"}"}