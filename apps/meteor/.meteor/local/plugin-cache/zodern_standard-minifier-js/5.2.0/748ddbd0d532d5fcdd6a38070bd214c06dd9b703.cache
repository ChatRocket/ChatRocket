{"code":"function module(e,t,s){let a,n,c,i,l,r;s.export({useDecryptedMessage:()=>o}),s.link(\"@rocket.chat/core-typings\",{isE2EEMessage(e){a=e}},0),s.link(\"@rocket.chat/fuselage-hooks\",{useSafely(e){n=e}},1),s.link(\"react\",{useState(e){c=e},useEffect(e){i=e}},2),s.link(\"react-i18next\",{useTranslation(e){l=e}},3),s.link(\"../../app/e2e/client/rocketchat.e2e\",{e2e(e){r=e}},4);let o=e=>{let{t}=l(),[s,o]=n(c(t(\"E2E_message_encrypted_placeholder\")));return i(()=>{a(e)&&r.decryptMessage(e).then(e=>{var s;e.msg&&o(e.msg),e.attachments&&(null===(s=e.attachments)||void 0===s?void 0:s.length)>0&&(e.attachments[0].description?o(e.attachments[0].description):o(t(\"Message_with_attachment\")))})},[e,t,o]),a(e)?s:e.msg}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useDecryptedMessage.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { isE2EEMessage } from '@rocket.chat/core-typings';\\nimport { useSafely } from '@rocket.chat/fuselage-hooks';\\nimport { useState, useEffect } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { e2e } from '../../app/e2e/client/rocketchat.e2e';\\n\\nexport const useDecryptedMessage = (message: IMessage): string => {\\n\\tconst { t } = useTranslation();\\n\\tconst [decryptedMessage, setDecryptedMessage] = useSafely(useState(t('E2E_message_encrypted_placeholder')));\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!isE2EEMessage(message)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\te2e.decryptMessage(message).then((decryptedMsg) => {\\n\\t\\t\\tif (decryptedMsg.msg) {\\n\\t\\t\\t\\tsetDecryptedMessage(decryptedMsg.msg);\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (decryptedMsg.attachments && decryptedMsg.attachments?.length > 0) {\\n\\t\\t\\t\\tif (decryptedMsg.attachments[0].description) {\\n\\t\\t\\t\\t\\tsetDecryptedMessage(decryptedMsg.attachments[0].description);\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tsetDecryptedMessage(t('Message_with_attachment'));\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t});\\n\\t}, [message, t, setDecryptedMessage]);\\n\\n\\treturn isE2EEMessage(message) ? decryptedMessage : message.msg;\\n};\\n\",null],\"names\":[\"isE2EEMessage\",\"useSafely\",\"useState\",\"useEffect\",\"useTranslation\",\"e2e\",\"module\",\"export\",\"useDecryptedMessage\",\"link\",\"v\",\"message\",\"t\",\"decryptedMessage\",\"setDecryptedMessage\",\"decryptMessage\",\"then\",\"decryptedMsg\",\"_decryptedMsg$attachm\",\"msg\",\"attachments\",\"length\",\"description\"],\"mappings\":\"2BAC0DA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA1DC,EAAOC,MAAE,CAAA,CAAAC,oBAAqBA,IAAAA,CAA4B,GAAAF,EAAAG,IAAA,CAAA,4BAAA,CAAAT,cAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,8BAAA,CAAAR,UAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAP,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,UAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,gBAAA,CAAAL,eAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,sCAAA,CAAAJ,IAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAOnD,IAAMF,EAAuBG,IACnC,GAAM,CAAEC,CAAAA,CAAG,CAAGR,IACR,CAACS,EAAkBC,EAAoB,CAAGb,EAAUC,EAASU,EAAE,uCAsBrE,OApBAT,EAAU,KACJH,EAAcW,IAInBN,EAAIU,cAAc,CAACJ,GAASK,IAAI,CAAEC,IAAgB,IAAAC,CAC7CD,CAAAA,EAAaE,GAAG,EACnBL,EAAoBG,EAAaE,GAAG,EAGjCF,EAAaG,WAAW,EAAI,CAAA,AAAwB,OAAxBF,CAAAA,EAAAD,EAAaG,WAAW,AAAXA,GAAWF,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAxBA,EAA0BG,MAAM,AAANA,EAAS,IAC9DJ,EAAaG,WAAW,CAAC,EAAE,CAACE,WAAW,CAC1CR,EAAoBG,EAAaG,WAAW,CAAC,EAAE,CAACE,WAAW,EAE3DR,EAAoBF,EAAE,4BAGzB,EACD,EAAG,CAACD,EAASC,EAAGE,EAAoB,EAE7Bd,EAAcW,GAAWE,EAAmBF,EAAQQ,GAAG,AAC/D\"}"}