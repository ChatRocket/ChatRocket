{"code":"function module(n,o,t){t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(n){i=n}},0),t.export({useContinuousSoundNotification:function(){return a}}),t.link(\"@rocket.chat/ui-contexts\",{useSetting:function(n){u=n},useUserPreference:function(n){e=n},useUserSubscriptions:function(n){c=n}},0),t.link(\"react\",{useEffect:function(n){s=n}},1),t.link(\"../../app/custom-sounds/client/lib/CustomSounds\",{CustomSounds:function(n){r=n}},2);var i,u,e,c,s,r,f={t:\"l\",ls:{$exists:!1},open:!0},a=function(){var n=c(f),o=u(\"Livechat_continuous_sound_notification_new_livechat_room\"),t=e(\"newRoomNotification\"),a=e(\"notificationsSoundVolume\"),l=t&&t+\"-continuous\",d=void 0!==a?Number((a/100).toPrecision(2)):1;s(function(){var n;return o&&l&&(n=i(i({},r.getSound(t)),{},{_id:l}),r.add(n)),function(){n&&r.remove(n)}},[l,t,o]),s(function(){if(l){if(!o||0===n.length){r.pause(l);return}r.play(l,{volume:d,loop:!0})}},[l,o,n,d])}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useContinuousSoundNotification.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { ICustomSound } from '@rocket.chat/core-typings';\\nimport { useSetting, useUserPreference, useUserSubscriptions } from '@rocket.chat/ui-contexts';\\nimport { useEffect } from 'react';\\n\\nimport { CustomSounds } from '../../app/custom-sounds/client/lib/CustomSounds';\\n\\nconst query = { t: 'l', ls: { $exists: false }, open: true };\\nexport const useContinuousSoundNotification = () => {\\n\\tconst userSubscriptions = useUserSubscriptions(query);\\n\\n\\tconst playNewRoomSoundContinuously = useSetting('Livechat_continuous_sound_notification_new_livechat_room');\\n\\n\\tconst newRoomNotification = useUserPreference<string>('newRoomNotification');\\n\\tconst audioVolume = useUserPreference<number>('notificationsSoundVolume');\\n\\n\\tconst continuousCustomSoundId = newRoomNotification && `${newRoomNotification}-continuous`;\\n\\n\\tconst volume = audioVolume !== undefined ? Number((audioVolume / 100).toPrecision(2)) : 1;\\n\\n\\tuseEffect(() => {\\n\\t\\tlet audio: ICustomSound;\\n\\t\\tif (playNewRoomSoundContinuously && continuousCustomSoundId) {\\n\\t\\t\\taudio = { ...CustomSounds.getSound(newRoomNotification), _id: continuousCustomSoundId };\\n\\t\\t\\tCustomSounds.add(audio);\\n\\t\\t}\\n\\n\\t\\treturn () => {\\n\\t\\t\\tif (audio) {\\n\\t\\t\\t\\tCustomSounds.remove(audio);\\n\\t\\t\\t}\\n\\t\\t};\\n\\t}, [continuousCustomSoundId, newRoomNotification, playNewRoomSoundContinuously]);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!continuousCustomSoundId) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tif (!playNewRoomSoundContinuously) {\\n\\t\\t\\tCustomSounds.pause(continuousCustomSoundId);\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (userSubscriptions.length === 0) {\\n\\t\\t\\tCustomSounds.pause(continuousCustomSoundId);\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tCustomSounds.play(continuousCustomSoundId, {\\n\\t\\t\\tvolume,\\n\\t\\t\\tloop: true,\\n\\t\\t});\\n\\t}, [continuousCustomSoundId, playNewRoomSoundContinuously, userSubscriptions, volume]);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"export\",\"useContinuousSoundNotification\",\"useSetting\",\"useUserPreference\",\"useUserSubscriptions\",\"useEffect\",\"CustomSounds\",\"query\",\"t\",\"ls\",\"$exists\",\"open\",\"userSubscriptions\",\"playNewRoomSoundContinuously\",\"newRoomNotification\",\"audioVolume\",\"continuousCustomSoundId\",\"volume\",\"undefined\",\"Number\",\"toPrecision\",\"audio\",\"getSound\",\"_id\",\"add\",\"remove\",\"length\",\"pause\",\"play\",\"loop\"],\"mappings\":\"uBACSA,EAAYC,IAAA,CAAA,uCAA+C,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAA2BD,CAAA,CAAA,EAAA,GAA/FH,EAAOK,MAAE,CAAA,CAAAC,+BAA+B,WAAA,OAAsBA,CAAgC,CAAC,GAAAN,EAAAC,IAAA,CAAA,2BAAA,CAAAM,WAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,EAAAK,kBAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,EAAAM,qBAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAS,UAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kDAAA,CAAAU,aAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAK/F,IALAC,EAA+FG,EAAAC,EAAAC,EAAAC,EAAAC,EAKzFC,EAAQ,CAAEC,EAAG,IAAKC,GAAI,CAAEC,QAAS,CAAA,CAAK,EAAIC,KAAM,CAAA,CAAI,EAC7CV,EAAiC,WAC7C,IAAMW,EAAoBR,EAAqBG,GAEzCM,EAA+BX,EAAW,4DAE1CY,EAAsBX,EAA0B,uBAChDY,EAAcZ,EAA0B,4BAExCa,EAA0BF,GAA0BA,EAAmB,cAEvEG,EAASF,AAAgBG,KAAAA,IAAhBH,EAA4BI,OAAO,AAACJ,CAAAA,EAAc,GAAA,EAAKK,WAAW,CAAC,IAAM,EAExFf,EAAU,WACT,IAAIgB,EAMJ,OALIR,GAAgCG,IACnCK,EAAKtB,EAAAA,EAAA,CAAA,EAAQO,EAAagB,QAAQ,CAACR,IAAoB,CAAA,EAAA,CAAES,IAAKP,CAAuB,GACrFV,EAAakB,GAAG,CAACH,IAGX,WACFA,GACHf,EAAamB,MAAM,CAACJ,EAEtB,CACD,EAAG,CAACL,EAAyBF,EAAqBD,EAA6B,EAE/ER,EAAU,WACT,GAAKW,GAGL,GAAI,CAACH,GAKDD,AAA6B,IAA7BA,EAAkBc,MAAM,CALO,CAClCpB,EAAaqB,KAAK,CAACX,GACnB,MACD,CAOAV,EAAasB,IAAI,CAACZ,EAAyB,CAC1CC,OAAAA,EACAY,KAAM,CAAA,IAER,EAAG,CAACb,EAAyBH,EAA8BD,EAAmBK,EAAO,CACtF\"}"}