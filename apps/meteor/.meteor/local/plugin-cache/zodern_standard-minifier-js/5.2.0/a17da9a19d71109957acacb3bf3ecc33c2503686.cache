{"code":"function module(n,e,o){o.export({useThreadRoomAction:function(){return m}}),o.link(\"@rocket.chat/ui-contexts\",{useSetting:function(n){t=n}},0),o.link(\"react\",{default:function(n){i=n},lazy:function(n){r=n},useMemo:function(n){l=n}},1),o.link(\"react-i18next\",{useTranslation:function(n){a=n}},2),o.link(\"../../components/Header\",{HeaderToolbarAction:function(n){u=n},HeaderToolbarActionBadge:function(n){d=n}},3),o.link(\"../../views/room/contexts/RoomContext\",{useRoomSubscription:function(n){c=n}},4);var t,i,r,l,a,u,d,c,s=r(function(){return o.dynamicImport(\"../../views/room/contextualBar/Threads\")}),m=function(){var n,e,o,r,m,v,f=t(\"Threads_enabled\",!1),p=c(),h=null!==(n=null==p?void 0:null===(e=p.tunread)||void 0===e?void 0:e.length)&&void 0!==n?n:0,b=null!==(o=null==p?void 0:null===(r=p.tunreadUser)||void 0===r?void 0:r.length)&&void 0!==o?o:0,x=null!==(m=null==p?void 0:null===(v=p.tunreadGroup)||void 0===v?void 0:v.length)&&void 0!==m?m:0,g=h>99?\"99+\":h,T=b>0?\"danger\":x>0?\"warning\":\"primary\",k=a().t;return l(function(){if(f)return{id:\"thread\",groups:[\"channel\",\"group\",\"direct\",\"direct_multiple\",\"team\"],full:!0,title:\"Threads\",icon:\"thread\",tabComponent:s,order:2,renderToolboxItem:function(n){var e=n.id,o=n.className,t=n.index,r=n.icon,l=n.title,a=n.toolbox.tab,c=n.action,s=n.disabled,m=n.tooltip;return i.createElement(u,{key:e,className:o,index:t,id:e,icon:r,title:k(l),pressed:e===(null==a?void 0:a.id),action:c,disabled:s,tooltip:m},!!g&&i.createElement(d,{variant:T},g))}}},[f,k,g,T])}}","map":"{\"version\":3,\"sources\":[\"client/hooks/roomActions/useThreadRoomAction.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { BadgeProps } from '@rocket.chat/fuselage';\\nimport { useSetting } from '@rocket.chat/ui-contexts';\\nimport React, { lazy, useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { HeaderToolbarAction, HeaderToolbarActionBadge } from '../../components/Header';\\nimport { useRoomSubscription } from '../../views/room/contexts/RoomContext';\\nimport type { RoomToolboxActionConfig } from '../../views/room/contexts/RoomToolboxContext';\\n\\nconst getVariant = (tunreadUser: number, tunreadGroup: number): BadgeProps['variant'] => {\\n\\tif (tunreadUser > 0) {\\n\\t\\treturn 'danger';\\n\\t}\\n\\n\\tif (tunreadGroup > 0) {\\n\\t\\treturn 'warning';\\n\\t}\\n\\n\\treturn 'primary';\\n};\\n\\nconst Threads = lazy(() => import('../../views/room/contextualBar/Threads'));\\n\\nexport const useThreadRoomAction = () => {\\n\\tconst enabled = useSetting('Threads_enabled', false);\\n\\tconst subscription = useRoomSubscription();\\n\\n\\tconst tunread = subscription?.tunread?.length ?? 0;\\n\\tconst tunreadUser = subscription?.tunreadUser?.length ?? 0;\\n\\tconst tunreadGroup = subscription?.tunreadGroup?.length ?? 0;\\n\\tconst unread = tunread > 99 ? '99+' : tunread;\\n\\tconst variant = getVariant(tunreadUser, tunreadGroup);\\n\\tconst { t } = useTranslation();\\n\\n\\treturn useMemo((): RoomToolboxActionConfig | undefined => {\\n\\t\\tif (!enabled) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\treturn {\\n\\t\\t\\tid: 'thread',\\n\\t\\t\\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\\n\\t\\t\\tfull: true,\\n\\t\\t\\ttitle: 'Threads',\\n\\t\\t\\ticon: 'thread',\\n\\t\\t\\ttabComponent: Threads,\\n\\t\\t\\torder: 2,\\n\\t\\t\\trenderToolboxItem: ({ id, className, index, icon, title, toolbox: { tab }, action, disabled, tooltip }) => (\\n\\t\\t\\t\\t<HeaderToolbarAction\\n\\t\\t\\t\\t\\tkey={id}\\n\\t\\t\\t\\t\\tclassName={className}\\n\\t\\t\\t\\t\\tindex={index}\\n\\t\\t\\t\\t\\tid={id}\\n\\t\\t\\t\\t\\ticon={icon}\\n\\t\\t\\t\\t\\ttitle={t(title)}\\n\\t\\t\\t\\t\\tpressed={id === tab?.id}\\n\\t\\t\\t\\t\\taction={action}\\n\\t\\t\\t\\t\\tdisabled={disabled}\\n\\t\\t\\t\\t\\ttooltip={tooltip}\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t{!!unread && <HeaderToolbarActionBadge variant={variant}>{unread}</HeaderToolbarActionBadge>}\\n\\t\\t\\t\\t</HeaderToolbarAction>\\n\\t\\t\\t),\\n\\t\\t};\\n\\t}, [enabled, t, unread, variant]);\\n};\\n\",null],\"names\":[\"module\",\"export\",\"useThreadRoomAction\",\"link\",\"useSetting\",\"v\",\"React\",\"lazy\",\"useMemo\",\"useTranslation\",\"HeaderToolbarAction\",\"HeaderToolbarActionBadge\",\"useRoomSubscription\",\"Threads\",\"dynamicImport\",\"_subscription$tunread\",\"_subscription$tunread2\",\"_subscription$tunread3\",\"_subscription$tunread4\",\"_subscription$tunread5\",\"_subscription$tunread6\",\"enabled\",\"subscription\",\"tunread\",\"length\",\"tunreadUser\",\"tunreadGroup\",\"unread\",\"variant\",\"t\",\"_useTranslation\",\"id\",\"groups\",\"full\",\"title\",\"icon\",\"tabComponent\",\"order\",\"renderToolboxItem\",\"_ref\",\"className\",\"index\",\"tab\",\"toolbox\",\"action\",\"disabled\",\"tooltip\",\"createElement\",\"key\",\"pressed\"],\"mappings\":\"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\"}"}