{"code":"function module(e,n,t){var i,o,l,a,u,r,c,s,f,d,m,p,g;t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){i=e}},0),t.link(\"@rocket.chat/fuselage\",{Box:function(e){o=e},Option:function(e){l=e},OptionSkeleton:function(e){a=e},Tile:function(e){u=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId:function(e){r=e},useContentBoxSize:function(e){c=e}},1),t.link(\"react\",{default:function(e){s=e},useEffect:function(e){f=e},memo:function(e){d=e},useMemo:function(e){m=e},useRef:function(e){p=e}},2),t.link(\"react-i18next\",{useTranslation:function(e){g=e}},3),t.exportDefault(d(function(e){var n=e.title,t=e.items,d=e.focused,b=e.select,h=e.renderItem,k=void 0===h?function(e){var n=e.item;return s.createElement(s.Fragment,null,JSON.stringify(n))}:h,v=g().t,_=r(),E=p(null),S=c(E),x=S&&S.inlineSize<480?\"small\":\"large\",y=m(function(){return t.flatMap(function(e){return e.isSuccess?e.data:[]}).sort(function(e,n){return(\"sort\"in e&&e.sort||0)-(\"sort\"in n&&n.sort||0)})},[t]),I=t.some(function(e){return e.isLoading&&\"idle\"!==e.fetchStatus});return f(function(){if(d){var e=document.getElementById(\"popup-item-\"+d._id);e&&e.scrollIntoView({behavior:\"smooth\",block:\"nearest\"})}},[d]),s.createElement(o,{className:\"message-popup-position\",position:\"relative\"},s.createElement(u,{ref:E,className:\"message-popup\",padding:0,role:\"menu\",mbe:8,overflow:\"hidden\",\"aria-labelledby\":_},n&&s.createElement(o,{bg:\"tint\",pi:16,pb:8,id:_},n),s.createElement(o,{pb:8,maxHeight:\"x320\"},!I&&0===y.length&&s.createElement(l,null,v(\"No_results_found\")),I&&s.createElement(a,null),y.map(function(e,n){return s.createElement(l,{title:\"small\"!==x?void 0:e.outside?v(\"Not_in_channel\"):e.suggestion?v(\"Suggestion_from_recent_messages\"):e.disabled?v(\"Unavailable_in_encrypted_channels\"):void 0,onClick:function(){return b(e)},selected:e===d,key:n,id:\"popup-item-\"+e._id,tabIndex:e===d?0:-1,\"aria-selected\":e===d,disabled:e.disabled},k({item:i(i({},e),{},{variant:x})}))}))))}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/ComposerBoxPopup.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Option, OptionSkeleton, Tile } from '@rocket.chat/fuselage';\\nimport { useUniqueId, useContentBoxSize } from '@rocket.chat/fuselage-hooks';\\nimport type { UseQueryResult } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React, { useEffect, memo, useMemo, useRef } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nexport type ComposerBoxPopupProps<\\n\\tT extends {\\n\\t\\t_id: string;\\n\\t\\tsort?: number;\\n\\t\\tdisabled?: boolean;\\n\\t},\\n> = {\\n\\ttitle?: string;\\n\\tfocused?: T;\\n\\titems: UseQueryResult<T[]>[];\\n\\tselect: (item: T) => void;\\n\\trenderItem?: ({ item }: { item: T }) => ReactElement;\\n};\\n\\nfunction ComposerBoxPopup<\\n\\tT extends {\\n\\t\\t_id: string;\\n\\t\\tsort?: number;\\n\\t\\tdisabled?: boolean;\\n\\t},\\n>({\\n\\ttitle,\\n\\titems,\\n\\tfocused,\\n\\tselect,\\n\\trenderItem = ({ item }: { item: T }) => <>{JSON.stringify(item)}</>,\\n}: ComposerBoxPopupProps<T>): ReactElement | null {\\n\\tconst { t } = useTranslation();\\n\\tconst id = useUniqueId();\\n\\tconst composerBoxPopupRef = useRef<HTMLElement>(null);\\n\\tconst popupSizes = useContentBoxSize(composerBoxPopupRef);\\n\\n\\tconst variant = popupSizes && popupSizes.inlineSize < 480 ? 'small' : 'large';\\n\\n\\tconst getOptionTitle = <T extends { _id: string; sort?: number; outside?: boolean; suggestion?: boolean; disabled?: boolean }>(\\n\\t\\titem: T,\\n\\t) => {\\n\\t\\tif (variant !== 'small') {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\tif (item.outside) {\\n\\t\\t\\treturn t('Not_in_channel');\\n\\t\\t}\\n\\n\\t\\tif (item.suggestion) {\\n\\t\\t\\treturn t('Suggestion_from_recent_messages');\\n\\t\\t}\\n\\n\\t\\tif (item.disabled) {\\n\\t\\t\\treturn t('Unavailable_in_encrypted_channels');\\n\\t\\t}\\n\\t};\\n\\n\\tconst itemsFlat = useMemo(\\n\\t\\t() =>\\n\\t\\t\\titems\\n\\t\\t\\t\\t.flatMap((item) => {\\n\\t\\t\\t\\t\\tif (item.isSuccess) {\\n\\t\\t\\t\\t\\t\\treturn item.data;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\treturn [];\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.sort((a, b) => (('sort' in a && a.sort) || 0) - (('sort' in b && b.sort) || 0)),\\n\\t\\t[items],\\n\\t);\\n\\n\\tconst isLoading = items.some((item) => item.isLoading && item.fetchStatus !== 'idle');\\n\\n\\tuseEffect(() => {\\n\\t\\tif (focused) {\\n\\t\\t\\tconst element = document.getElementById(`popup-item-${focused._id}`);\\n\\t\\t\\tif (element) {\\n\\t\\t\\t\\telement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}, [focused]);\\n\\n\\treturn (\\n\\t\\t<Box className='message-popup-position' position='relative'>\\n\\t\\t\\t<Tile ref={composerBoxPopupRef} className='message-popup' padding={0} role='menu' mbe={8} overflow='hidden' aria-labelledby={id}>\\n\\t\\t\\t\\t{title && (\\n\\t\\t\\t\\t\\t<Box bg='tint' pi={16} pb={8} id={id}>\\n\\t\\t\\t\\t\\t\\t{title}\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t<Box pb={8} maxHeight='x320'>\\n\\t\\t\\t\\t\\t{!isLoading && itemsFlat.length === 0 && <Option>{t('No_results_found')}</Option>}\\n\\t\\t\\t\\t\\t{isLoading && <OptionSkeleton />}\\n\\t\\t\\t\\t\\t{itemsFlat.map((item, index) => {\\n\\t\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\t\\t<Option\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle={getOptionTitle(item)}\\n\\t\\t\\t\\t\\t\\t\\t\\tonClick={() => select(item)}\\n\\t\\t\\t\\t\\t\\t\\t\\tselected={item === focused}\\n\\t\\t\\t\\t\\t\\t\\t\\tkey={index}\\n\\t\\t\\t\\t\\t\\t\\t\\tid={`popup-item-${item._id}`}\\n\\t\\t\\t\\t\\t\\t\\t\\ttabIndex={item === focused ? 0 : -1}\\n\\t\\t\\t\\t\\t\\t\\t\\taria-selected={item === focused}\\n\\t\\t\\t\\t\\t\\t\\t\\tdisabled={item.disabled}\\n\\t\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t\\t{renderItem({ item: { ...item, variant } })}\\n\\t\\t\\t\\t\\t\\t\\t</Option>\\n\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t})}\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</Tile>\\n\\t\\t</Box>\\n\\t);\\n}\\n\\nexport default memo(ComposerBoxPopup);\\n\",null],\"names\":[\"_objectSpread\",\"Box\",\"Option\",\"OptionSkeleton\",\"Tile\",\"useUniqueId\",\"useContentBoxSize\",\"React\",\"useEffect\",\"memo\",\"useMemo\",\"useRef\",\"useTranslation\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"title\",\"items\",\"focused\",\"select\",\"_ref$renderItem\",\"renderItem\",\"_ref2\",\"item\",\"createElement\",\"Fragment\",\"JSON\",\"stringify\",\"t\",\"_useTranslation\",\"id\",\"composerBoxPopupRef\",\"popupSizes\",\"variant\",\"inlineSize\",\"itemsFlat\",\"flatMap\",\"isSuccess\",\"data\",\"sort\",\"a\",\"b\",\"isLoading\",\"some\",\"fetchStatus\",\"element\",\"document\",\"getElementById\",\"_id\",\"scrollIntoView\",\"behavior\",\"block\",\"className\",\"position\",\"ref\",\"padding\",\"role\",\"mbe\",\"overflow\",\"bg\",\"pi\",\"pb\",\"maxHeight\",\"length\",\"map\",\"index\",\"outside\",\"suggestion\",\"disabled\",\"onClick\",\"selected\",\"key\",\"tabIndex\"],\"mappings\":\"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\"}"}