{"code":"function module(e,n,t){var r,u,a,o,c,i,l,s,f,m,k,d,g,p,h,b,P,E,T,y,C,G,v,x,S,D=[\"current\",\"itemsPerPage\",\"setItemsPerPage\",\"setCurrent\"];t.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),t.link(\"@babel/runtime/helpers/extends\",{default:function(e){u=e}},1),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){a=e}},2),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){o=e}},3),t.link(\"@rocket.chat/fuselage\",{Pagination:function(e){c=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue:function(e){i=e}},1),t.link(\"@rocket.chat/string-helpers\",{escapeRegExp:function(e){l=e}},2),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){s=e},useToastMessageDispatch:function(e){f=e},useTranslation:function(e){m=e}},3),t.link(\"@tanstack/react-query\",{useQuery:function(e){k=e}},4),t.link(\"react\",{default:function(e){d=e},useState:function(e){g=e},useMemo:function(e){p=e},useEffect:function(e){h=e}},5),t.link(\"../../../../components/FilterByText\",{default:function(e){b=e}},6),t.link(\"../../../../components/GenericNoResults\",{default:function(e){P=e}},7),t.link(\"../../../../components/GenericTable\",{GenericTable:function(e){E=e},GenericTableHeader:function(e){T=e},GenericTableHeaderCell:function(e){y=e},GenericTableBody:function(e){C=e},GenericTableLoadingTable:function(e){G=e}},8),t.link(\"../../../../components/GenericTable/hooks/usePagination\",{usePagination:function(e){v=e}},9),t.link(\"../../../../components/GenericTable/hooks/useSort\",{useSort:function(e){x=e}},10),t.link(\"./CustomUserStatusRow\",{default:function(e){S=e}},11),t.exportDefault(function(e){var n=e.reload,t=e.onClick,F=m(),w=g(\"\"),B=o(w,2),I=B[0],R=B[1],H=v(),L=H.current,M=H.itemsPerPage,N=H.setItemsPerPage,j=H.setCurrent,q=a(H,D),A=x(\"name\"),Q=A.sortBy,U=A.sortDirection,V=A.setSort,W=i(p(function(){return{name:l(I),sort:'{ \"'+Q+'\": '+(\"asc\"===U?1:-1)+\" }\",count:M,offset:L}},[I,M,L,Q,U]),500),_=s(\"GET\",\"/v1/custom-user-status.list\"),z=f(),J=k([\"custom-user-statuses\",W],function(){var e;return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.awrap(_(W));case 2:return e=n.sent.statuses,n.abrupt(\"return\",e);case 5:case\"end\":return n.stop()}},null,null,null,Promise)},{onError:function(e){z({type:\"error\",message:e})}}),K=J.data,O=J.isLoading,X=J.refetch,Y=J.isFetched;return(h(function(){n.current=X},[n,X]),K)?d.createElement(d.Fragment,null,d.createElement(b,{onChange:R}),0===K.length&&d.createElement(P,null),K&&K.length>0&&d.createElement(d.Fragment,null,d.createElement(E,null,d.createElement(T,null,d.createElement(y,{key:\"name\",direction:U,active:\"name\"===Q,onClick:V,sort:\"name\"},F(\"Name\")),d.createElement(y,{key:\"presence\",direction:U,active:\"statusType\"===Q,onClick:V,sort:\"statusType\"},F(\"Presence\"))),d.createElement(C,null,O&&d.createElement(G,{headerCells:2}),null==K?void 0:K.map(function(e){return d.createElement(S,{key:e._id,status:e,onClick:t})}))),Y&&d.createElement(c,u({current:L,itemsPerPage:M,count:K.length,onSetItemsPerPage:N,onSetCurrent:j},q)))):null})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/customUserStatus/CustomUserStatusTable/CustomUserStatusTable.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Pagination } from '@rocket.chat/fuselage';\\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\\nimport { useEndpoint, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ReactElement, MutableRefObject } from 'react';\\nimport React, { useState, useMemo, useEffect } from 'react';\\n\\nimport FilterByText from '../../../../components/FilterByText';\\nimport GenericNoResult from '../../../../components/GenericNoResults';\\nimport {\\n\\tGenericTable,\\n\\tGenericTableHeader,\\n\\tGenericTableHeaderCell,\\n\\tGenericTableBody,\\n\\tGenericTableLoadingTable,\\n} from '../../../../components/GenericTable';\\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\\nimport CustomUserStatusRow from './CustomUserStatusRow';\\n\\ntype CustomUserStatusProps = {\\n\\treload: MutableRefObject<() => void>;\\n\\tonClick: (id: string) => void;\\n};\\n\\n// TODO: Missing error state\\nconst CustomUserStatus = ({ reload, onClick }: CustomUserStatusProps): ReactElement | null => {\\n\\tconst t = useTranslation();\\n\\tconst [text, setText] = useState('');\\n\\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = usePagination();\\n\\tconst { sortBy, sortDirection, setSort } = useSort<'name' | 'statusType'>('name');\\n\\n\\tconst query = useDebouncedValue(\\n\\t\\tuseMemo(\\n\\t\\t\\t() => ({\\n\\t\\t\\t\\tname: escapeRegExp(text),\\n\\t\\t\\t\\tsort: `{ \\\"${sortBy}\\\": ${sortDirection === 'asc' ? 1 : -1} }`,\\n\\t\\t\\t\\tcount: itemsPerPage,\\n\\t\\t\\t\\toffset: current,\\n\\t\\t\\t}),\\n\\t\\t\\t[text, itemsPerPage, current, sortBy, sortDirection],\\n\\t\\t),\\n\\t\\t500,\\n\\t);\\n\\n\\tconst getCustomUserStatus = useEndpoint('GET', '/v1/custom-user-status.list');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst { data, isLoading, refetch, isFetched } = useQuery(\\n\\t\\t['custom-user-statuses', query],\\n\\t\\tasync () => {\\n\\t\\t\\tconst { statuses } = await getCustomUserStatus(query);\\n\\t\\t\\treturn statuses;\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tonError: (error) => {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n\\n\\tuseEffect(() => {\\n\\t\\treload.current = refetch;\\n\\t}, [reload, refetch]);\\n\\n\\tif (!data) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<FilterByText onChange={setText} />\\n\\t\\t\\t{data.length === 0 && <GenericNoResult />}\\n\\t\\t\\t{data && data.length > 0 && (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<GenericTable>\\n\\t\\t\\t\\t\\t\\t<GenericTableHeader>\\n\\t\\t\\t\\t\\t\\t\\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name'>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Name')}\\n\\t\\t\\t\\t\\t\\t\\t</GenericTableHeaderCell>\\n\\t\\t\\t\\t\\t\\t\\t<GenericTableHeaderCell\\n\\t\\t\\t\\t\\t\\t\\t\\tkey='presence'\\n\\t\\t\\t\\t\\t\\t\\t\\tdirection={sortDirection}\\n\\t\\t\\t\\t\\t\\t\\t\\tactive={sortBy === 'statusType'}\\n\\t\\t\\t\\t\\t\\t\\t\\tonClick={setSort}\\n\\t\\t\\t\\t\\t\\t\\t\\tsort='statusType'\\n\\t\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Presence')}\\n\\t\\t\\t\\t\\t\\t\\t</GenericTableHeaderCell>\\n\\t\\t\\t\\t\\t\\t</GenericTableHeader>\\n\\t\\t\\t\\t\\t\\t<GenericTableBody>\\n\\t\\t\\t\\t\\t\\t\\t{isLoading && <GenericTableLoadingTable headerCells={2} />}\\n\\t\\t\\t\\t\\t\\t\\t{data?.map((status) => (\\n\\t\\t\\t\\t\\t\\t\\t\\t<CustomUserStatusRow key={status._id} status={status} onClick={onClick} />\\n\\t\\t\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t\\t\\t</GenericTableBody>\\n\\t\\t\\t\\t\\t</GenericTable>\\n\\t\\t\\t\\t\\t{isFetched && (\\n\\t\\t\\t\\t\\t\\t<Pagination\\n\\t\\t\\t\\t\\t\\t\\tcurrent={current}\\n\\t\\t\\t\\t\\t\\t\\titemsPerPage={itemsPerPage}\\n\\t\\t\\t\\t\\t\\t\\tcount={data.length}\\n\\t\\t\\t\\t\\t\\t\\tonSetItemsPerPage={onSetItemsPerPage}\\n\\t\\t\\t\\t\\t\\t\\tonSetCurrent={onSetCurrent}\\n\\t\\t\\t\\t\\t\\t\\t{...paginationProps}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</>\\n\\t\\t\\t)}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default CustomUserStatus;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_extends\",\"_objectWithoutProperties\",\"_slicedToArray\",\"Pagination\",\"useDebouncedValue\",\"escapeRegExp\",\"useEndpoint\",\"useToastMessageDispatch\",\"useTranslation\",\"useQuery\",\"React\",\"useState\",\"useMemo\",\"useEffect\",\"FilterByText\",\"GenericNoResult\",\"GenericTable\",\"GenericTableHeader\",\"GenericTableHeaderCell\",\"GenericTableBody\",\"GenericTableLoadingTable\",\"usePagination\",\"useSort\",\"CustomUserStatusRow\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"reload\",\"onClick\",\"t\",\"_useState\",\"_useState2\",\"text\",\"setText\",\"_usePagination\",\"current\",\"itemsPerPage\",\"onSetItemsPerPage\",\"setItemsPerPage\",\"onSetCurrent\",\"setCurrent\",\"paginationProps\",\"_excluded\",\"_useSort\",\"sortBy\",\"sortDirection\",\"setSort\",\"query\",\"name\",\"sort\",\"count\",\"offset\",\"getCustomUserStatus\",\"dispatchToastMessage\",\"_useQuery\",\"statuses\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"_await$getCustomUserS\",\"sent\",\"abrupt\",\"stop\",\"Promise\",\"onError\",\"error\",\"type\",\"message\",\"data\",\"isLoading\",\"refetch\",\"isFetched\",\"createElement\",\"Fragment\",\"onChange\",\"length\",\"key\",\"direction\",\"active\",\"headerCells\",\"map\",\"status\",\"_id\"],\"mappings\":\"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\"}"}