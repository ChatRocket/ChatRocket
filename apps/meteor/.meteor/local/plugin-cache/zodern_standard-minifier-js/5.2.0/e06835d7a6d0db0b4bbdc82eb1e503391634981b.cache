{"code":"function module(e,o,t){let s,n,l,a,i,u,r,c,d,m,k,p,C,R,v,x,L,h,f,b;t.export({WrapCannedResponseList:()=>g}),t.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue(e){s=e},useLocalStorage(e){n=e},useMutableCallback(e){l=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useSetModal(e){a=e},useRouter(e){i=e}},1),t.link(\"react\",{default(e){u=e},memo(e){r=e},useCallback(e){c=e},useMemo(e){d=e},useState(e){m=e}},2),t.link(\"../../../../hooks/lists/useRecordList\",{useRecordList(e){k=e}},3),t.link(\"../../../../hooks/omnichannel/useIsRoomOverMacLimit\",{useIsRoomOverMacLimit(e){p=e}},4),t.link(\"../../../../lib/asyncState\",{AsyncStatePhase(e){C=e}},5),t.link(\"../../../../views/room/contexts/ChatContext\",{useChat(e){R=e}},6),t.link(\"../../../../views/room/contexts/RoomContext\",{useRoom(e){v=e}},7),t.link(\"../../../../views/room/contexts/RoomToolboxContext\",{useRoomToolbox(e){x=e}},8),t.link(\"../../../hooks/useCannedResponseFilterOptions\",{useCannedResponseFilterOptions(e){L=e}},9),t.link(\"../../../hooks/useCannedResponseList\",{useCannedResponseList(e){h=e}},10),t.link(\"../../modals/CreateCannedResponse\",{default(e){f=e}},11),t.link(\"./CannedResponseList\",{default(e){b=e}},12);let g=()=>{var e;let o=v(),{closeTab:t}=x(),r=i(),g=a(),M=L(),[I,O]=m(\"\"),[T,y]=n(\"canned-response-list-type\",\"all\"),S=p(o),D=c(e=>{O(e.currentTarget.value)},[]),w=s(I,400),{cannedList:A,loadMoreItems:E,reload:F}=h(d(()=>({filter:w,type:T}),[w,T])),{phase:N,items:P,itemCount:_}=k(A),G=l(e=>{var t;let{_id:s}=e;r.navigate({name:null!==(t=r.getRouteName())&&void 0!==t?t:\"live\",params:{id:o._id,tab:\"canned-responses\",context:s}})}),U=null===(e=R())||void 0===e?void 0:e.composer;return u.createElement(b,{loadMoreItems:E,cannedItems:P,itemCount:_,onClose:t,loading:N===C.LOADING,options:M,text:I,setText:D,type:T,setType:y,isRoomOverMacLimit:S,onClickUse:(e,o)=>{e.preventDefault(),e.stopPropagation(),null==U||U.setText(o),null==U||U.focus()},onClickItem:G,onClickCreate:()=>{g(u.createElement(f,{onClose:()=>g(null),reloadCannedList:F}))},reload:F})};t.exportDefault(r(g))}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/cannedResponses/contextualBar/CannedResponse/WrapCannedResponseList.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useDebouncedValue, useLocalStorage, useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useSetModal, useRouter } from '@rocket.chat/ui-contexts';\\nimport type { MouseEvent } from 'react';\\nimport React, { memo, useCallback, useMemo, useState } from 'react';\\n\\nimport { useRecordList } from '../../../../hooks/lists/useRecordList';\\nimport { useIsRoomOverMacLimit } from '../../../../hooks/omnichannel/useIsRoomOverMacLimit';\\nimport { AsyncStatePhase } from '../../../../lib/asyncState';\\nimport { useChat } from '../../../../views/room/contexts/ChatContext';\\nimport { useRoom } from '../../../../views/room/contexts/RoomContext';\\nimport { useRoomToolbox } from '../../../../views/room/contexts/RoomToolboxContext';\\nimport { useCannedResponseFilterOptions } from '../../../hooks/useCannedResponseFilterOptions';\\nimport { useCannedResponseList } from '../../../hooks/useCannedResponseList';\\nimport CreateCannedResponse from '../../modals/CreateCannedResponse';\\nimport CannedResponseList from './CannedResponseList';\\n\\nexport const WrapCannedResponseList = () => {\\n\\tconst room = useRoom();\\n\\tconst { closeTab } = useRoomToolbox();\\n\\tconst router = useRouter();\\n\\tconst setModal = useSetModal();\\n\\n\\tconst options = useCannedResponseFilterOptions() as [string, string][];\\n\\n\\tconst [text, setText] = useState('');\\n\\tconst [type, setType] = useLocalStorage('canned-response-list-type', 'all');\\n\\n\\tconst isRoomOverMacLimit = useIsRoomOverMacLimit(room);\\n\\n\\tconst handleTextChange = useCallback((event) => {\\n\\t\\tsetText(event.currentTarget.value);\\n\\t}, []);\\n\\n\\tconst debouncedText = useDebouncedValue(text, 400);\\n\\n\\tconst { cannedList, loadMoreItems, reload } = useCannedResponseList(\\n\\t\\tuseMemo(() => ({ filter: debouncedText, type }), [debouncedText, type]),\\n\\t);\\n\\tconst { phase, items, itemCount } = useRecordList(cannedList);\\n\\n\\tconst onClickItem = useMutableCallback((data) => {\\n\\t\\tconst { _id: context } = data;\\n\\n\\t\\trouter.navigate({\\n\\t\\t\\tname: router.getRouteName() ?? 'live',\\n\\t\\t\\tparams: {\\n\\t\\t\\t\\tid: room._id,\\n\\t\\t\\t\\ttab: 'canned-responses',\\n\\t\\t\\t\\tcontext,\\n\\t\\t\\t},\\n\\t\\t});\\n\\t});\\n\\n\\tconst composer = useChat()?.composer;\\n\\n\\tconst onClickUse = (e: MouseEvent<HTMLOrSVGElement>, text: string): void => {\\n\\t\\te.preventDefault();\\n\\t\\te.stopPropagation();\\n\\n\\t\\tcomposer?.setText(text);\\n\\t\\tcomposer?.focus();\\n\\t};\\n\\n\\tconst onClickCreate = (): void => {\\n\\t\\tsetModal(<CreateCannedResponse onClose={() => setModal(null)} reloadCannedList={reload} />);\\n\\t};\\n\\n\\treturn (\\n\\t\\t<CannedResponseList\\n\\t\\t\\tloadMoreItems={loadMoreItems}\\n\\t\\t\\tcannedItems={items}\\n\\t\\t\\titemCount={itemCount}\\n\\t\\t\\tonClose={closeTab}\\n\\t\\t\\tloading={phase === AsyncStatePhase.LOADING}\\n\\t\\t\\toptions={options}\\n\\t\\t\\ttext={text}\\n\\t\\t\\tsetText={handleTextChange}\\n\\t\\t\\ttype={type}\\n\\t\\t\\tsetType={setType}\\n\\t\\t\\tisRoomOverMacLimit={isRoomOverMacLimit}\\n\\t\\t\\tonClickUse={onClickUse}\\n\\t\\t\\tonClickItem={onClickItem}\\n\\t\\t\\tonClickCreate={onClickCreate}\\n\\t\\t\\treload={reload}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(WrapCannedResponseList);\\n\",null],\"names\":[\"useDebouncedValue\",\"useLocalStorage\",\"useMutableCallback\",\"useSetModal\",\"useRouter\",\"React\",\"memo\",\"useCallback\",\"useMemo\",\"useState\",\"useRecordList\",\"useIsRoomOverMacLimit\",\"AsyncStatePhase\",\"useChat\",\"useRoom\",\"useRoomToolbox\",\"useCannedResponseFilterOptions\",\"useCannedResponseList\",\"CreateCannedResponse\",\"CannedResponseList\",\"module\",\"export\",\"WrapCannedResponseList\",\"link\",\"v\",\"default\",\"_useChat\",\"room\",\"closeTab\",\"router\",\"setModal\",\"options\",\"text\",\"setText\",\"type\",\"setType\",\"isRoomOverMacLimit\",\"handleTextChange\",\"event\",\"currentTarget\",\"value\",\"debouncedText\",\"cannedList\",\"loadMoreItems\",\"reload\",\"filter\",\"phase\",\"items\",\"itemCount\",\"onClickItem\",\"data\",\"_router$getRouteName\",\"_id\",\"context\",\"navigate\",\"name\",\"getRouteName\",\"params\",\"id\",\"tab\",\"composer\",\"createElement\",\"cannedItems\",\"onClose\",\"loading\",\"LOADING\",\"onClickUse\",\"e\",\"preventDefault\",\"stopPropagation\",\"focus\",\"onClickCreate\",\"reloadCannedList\",\"exportDefault\"],\"mappings\":\"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\"}"}