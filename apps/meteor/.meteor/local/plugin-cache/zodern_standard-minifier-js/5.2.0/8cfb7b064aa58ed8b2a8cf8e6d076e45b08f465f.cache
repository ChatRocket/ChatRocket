{"code":"function module(e,t,l){let n,r,a,i,o,m,c,s,u,d,E,f,p,h,k,y,_,x,F,T,w;l.link(\"@babel/runtime/helpers/extends\",{default(e){n=e}},0),l.link(\"@rocket.chat/fuselage\",{InputBox(e){r=e},Field(e){a=e},MultiSelect(e){i=e},FieldGroup(e){o=e},Box(e){m=e},Select(e){c=e},FieldLabel(e){s=e},FieldRow(e){u=e},Callout(e){d=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){E=e}},1),l.link(\"react\",{default(e){f=e},useMemo(e){p=e}},2),l.link(\"react-hook-form\",{useFormContext(e){h=e},Controller(e){k=e},useFieldArray(e){y=e}},3),l.link(\"react-i18next\",{useTranslation(e){_=e}},4),l.link(\"../../../hooks/useTimezoneNameList\",{useTimezoneNameList(e){x=e}},5),l.link(\"../additionalForms\",{BusinessHoursMultiple(e){F=e}},6),l.link(\"./mapBusinessHoursForm\",{defaultWorkHours(e){T=e},DAYS_OF_WEEK(e){w=e}},7),l.exportDefault(e=>{let{type:t}=e,{t:l}=_(),B=x(),g=p(()=>B.map(e=>[e,l(e)]),[l,B]),C=p(()=>w.map(e=>[e,l(e)]),[l]),{watch:D,control:b}=h(),{daysTime:z}=D(),{fields:O,replace:S}=y({control:b,name:\"daysTime\"}),G=E(),H=E(),L=E(),M=e=>{let t=e.map(e=>z.find(t=>{let{day:l}=t;return l===e})||T(!0).find(t=>{let{day:l}=t;return l===e})).filter(e=>!!e);S(t)};return f.createElement(o,null,\"custom\"===t&&f.createElement(F,null),f.createElement(a,null,f.createElement(s,{htmlFor:G},l(\"Timezone\")),f.createElement(u,null,f.createElement(k,{name:\"timezoneName\",control:b,render:e=>{let{field:t}=e;return f.createElement(c,n({id:G},t,{options:g}))}})),f.createElement(d,{title:l(\"Daylight_savings_time\"),type:\"info\",mbs:\"x8\"},l(\"Business_hours_will_update_automatically\"))),f.createElement(a,null,f.createElement(s,{htmlFor:H},l(\"Open_days_of_the_week\")),f.createElement(u,null,f.createElement(k,{name:\"daysOpen\",control:b,render:e=>{let{field:{onChange:t,value:n,name:r,onBlur:a}}=e;return f.createElement(i,{id:H,onBlur:a,name:r,onChange:e=>{M(e),t(e)},options:C,value:n,placeholder:l(\"Select_an_option\"),w:\"full\"})}}))),O.map((e,t)=>f.createElement(a,{key:e.id},f.createElement(s,null,l(e.day)),f.createElement(u,null,f.createElement(m,{display:\"flex\",flexDirection:\"column\",flexGrow:1,mie:2},f.createElement(s,{htmlFor:\"\".concat(L+t,\"-start\")},l(\"Open\")),f.createElement(k,{name:\"daysTime.\".concat(t,\".start.time\"),render:e=>{let{field:l}=e;return f.createElement(r,n({id:\"\".concat(L+t,\"-start\"),type:\"time\"},l))}})),f.createElement(m,{display:\"flex\",flexDirection:\"column\",flexGrow:1,mis:2},f.createElement(s,{htmlFor:\"\".concat(L+t,\"-finish\")},l(\"Close\")),f.createElement(k,{name:\"daysTime.\".concat(t,\".finish.time\"),render:e=>{let{field:l}=e;return f.createElement(r,n({id:\"\".concat(L+t,\"-finish\"),type:\"time\"},l))}}))))))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/businessHours/BusinessHoursForm.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { SelectOption } from '@rocket.chat/fuselage';\\nimport { InputBox, Field, MultiSelect, FieldGroup, Box, Select, FieldLabel, FieldRow, Callout } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport React, { useMemo } from 'react';\\nimport { useFormContext, Controller, useFieldArray } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useTimezoneNameList } from '../../../hooks/useTimezoneNameList';\\nimport { BusinessHoursMultiple } from '../additionalForms';\\nimport { defaultWorkHours, DAYS_OF_WEEK } from './mapBusinessHoursForm';\\n\\ntype mappedDayTime = {\\n\\tday: string;\\n\\tstart: {\\n\\t\\ttime: string;\\n\\t};\\n\\tfinish: {\\n\\t\\ttime: string;\\n\\t};\\n\\topen: boolean;\\n};\\n\\nexport type BusinessHoursFormData = {\\n\\tname: string;\\n\\ttimezoneName: string;\\n\\tdaysOpen: string[];\\n\\tdaysTime: mappedDayTime[];\\n\\tdepartmentsToApplyBusinessHour: string;\\n\\tactive: boolean;\\n\\tdepartments: {\\n\\t\\tvalue: string;\\n\\t\\tlabel: string;\\n\\t}[];\\n};\\n\\n// TODO: replace `Select` in favor `SelectFiltered`\\n// TODO: add time validation for start and finish not be equal on UI\\n// TODO: add time validation for start not be higher than finish on UI\\nconst BusinessHoursForm = ({ type }: { type?: 'default' | 'custom' }) => {\\n\\tconst { t } = useTranslation();\\n\\tconst timeZones = useTimezoneNameList();\\n\\tconst timeZonesOptions: SelectOption[] = useMemo(() => timeZones.map((name) => [name, t(name as TranslationKey)]), [t, timeZones]);\\n\\tconst daysOptions: SelectOption[] = useMemo(() => DAYS_OF_WEEK.map((day) => [day, t(day as TranslationKey)]), [t]);\\n\\n\\tconst { watch, control } = useFormContext<BusinessHoursFormData>();\\n\\tconst { daysTime } = watch();\\n\\tconst { fields: daysTimeFields, replace } = useFieldArray({ control, name: 'daysTime' });\\n\\n\\tconst timezoneField = useUniqueId();\\n\\tconst daysOpenField = useUniqueId();\\n\\tconst daysTimeField = useUniqueId();\\n\\n\\tconst handleChangeDaysTime = (values: string[]) => {\\n\\t\\tconst newValues = values\\n\\t\\t\\t.map((item) => daysTime.find(({ day }) => day === item) || defaultWorkHours(true).find(({ day }) => day === item))\\n\\t\\t\\t.filter((item): item is mappedDayTime => Boolean(item));\\n\\t\\treplace(newValues);\\n\\t};\\n\\n\\treturn (\\n\\t\\t<FieldGroup>\\n\\t\\t\\t{type === 'custom' && <BusinessHoursMultiple />}\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<FieldLabel htmlFor={timezoneField}>{t('Timezone')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tname='timezoneName'\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\trender={({ field }) => <Select id={timezoneField} {...field} options={timeZonesOptions} />}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t<Callout title={t('Daylight_savings_time')} type='info' mbs='x8'>\\n\\t\\t\\t\\t\\t{t('Business_hours_will_update_automatically')}\\n\\t\\t\\t\\t</Callout>\\n\\t\\t\\t</Field>\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<FieldLabel htmlFor={daysOpenField}>{t('Open_days_of_the_week')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tname='daysOpen'\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\trender={({ field: { onChange, value, name, onBlur } }) => (\\n\\t\\t\\t\\t\\t\\t\\t<MultiSelect\\n\\t\\t\\t\\t\\t\\t\\t\\tid={daysOpenField}\\n\\t\\t\\t\\t\\t\\t\\t\\tonBlur={onBlur}\\n\\t\\t\\t\\t\\t\\t\\t\\tname={name}\\n\\t\\t\\t\\t\\t\\t\\t\\tonChange={(values) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\thandleChangeDaysTime(values);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tonChange(values);\\n\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\toptions={daysOptions}\\n\\t\\t\\t\\t\\t\\t\\t\\tvalue={value}\\n\\t\\t\\t\\t\\t\\t\\t\\tplaceholder={t('Select_an_option')}\\n\\t\\t\\t\\t\\t\\t\\t\\tw='full'\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t</Field>\\n\\t\\t\\t{daysTimeFields.map((dayTime, index) => (\\n\\t\\t\\t\\t<Field key={dayTime.id}>\\n\\t\\t\\t\\t\\t<FieldLabel>{t(dayTime.day as TranslationKey)}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<Box display='flex' flexDirection='column' flexGrow={1} mie={2}>\\n\\t\\t\\t\\t\\t\\t\\t<FieldLabel htmlFor={`${daysTimeField + index}-start`}>{t('Open')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\t\\tname={`daysTime.${index}.start.time`}\\n\\t\\t\\t\\t\\t\\t\\t\\trender={({ field }) => <InputBox id={`${daysTimeField + index}-start`} type='time' {...field} />}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t<Box display='flex' flexDirection='column' flexGrow={1} mis={2}>\\n\\t\\t\\t\\t\\t\\t\\t<FieldLabel htmlFor={`${daysTimeField + index}-finish`}>{t('Close')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\t\\tname={`daysTime.${index}.finish.time`}\\n\\t\\t\\t\\t\\t\\t\\t\\trender={({ field }) => <InputBox id={`${daysTimeField + index}-finish`} type='time' {...field} />}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t))}\\n\\t\\t</FieldGroup>\\n\\t);\\n};\\n\\nexport default BusinessHoursForm;\\n\",null],\"names\":[\"_extends\",\"InputBox\",\"Field\",\"MultiSelect\",\"FieldGroup\",\"Box\",\"Select\",\"FieldLabel\",\"FieldRow\",\"Callout\",\"useUniqueId\",\"React\",\"useMemo\",\"useFormContext\",\"Controller\",\"useFieldArray\",\"useTranslation\",\"useTimezoneNameList\",\"BusinessHoursMultiple\",\"defaultWorkHours\",\"DAYS_OF_WEEK\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"type\",\"t\",\"timeZones\",\"timeZonesOptions\",\"map\",\"name\",\"daysOptions\",\"day\",\"watch\",\"control\",\"daysTime\",\"fields\",\"daysTimeFields\",\"replace\",\"timezoneField\",\"daysOpenField\",\"daysTimeField\",\"handleChangeDaysTime\",\"values\",\"newValues\",\"item\",\"find\",\"_ref2\",\"_ref3\",\"filter\",\"Boolean\",\"createElement\",\"htmlFor\",\"render\",\"_ref4\",\"field\",\"id\",\"options\",\"title\",\"mbs\",\"_ref5\",\"onChange\",\"value\",\"onBlur\",\"placeholder\",\"w\",\"dayTime\",\"index\",\"key\",\"display\",\"flexDirection\",\"flexGrow\",\"mie\",\"concat\",\"_ref6\",\"mis\",\"_ref7\"],\"mappings\":\"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\"}"}