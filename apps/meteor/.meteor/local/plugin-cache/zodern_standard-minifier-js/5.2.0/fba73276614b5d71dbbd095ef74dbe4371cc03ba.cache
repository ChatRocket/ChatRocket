{"code":"function module(e,t,n){let o,l,a,c,r,i,s,m,d,u,E;n.link(\"@rocket.chat/fuselage\",{Button(e){o=e},Card(e){l=e},CardControls(e){a=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){c=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useSetModal(e){r=e},useTranslation(e){i=e}},2),n.link(\"react\",{default(e){s=e},memo(e){m=e}},3),n.link(\"../../../../hooks/useFormatDateAndTime\",{useFormatDateAndTime(e){d=e}},4),n.link(\"../components/WorkspaceCardSection\",{default(e){u=e}},5),n.link(\"./components/InstancesModal\",{default(e){E=e}},6),n.exportDefault(m(e=>{let{serverInfo:{info:t,cloudWorkspaceId:n},statistics:m,instances:b}=e,k=i(),g=d(),p=r(),{commit:h={},marketplaceApiVersion:y}=t||{},D=c(()=>{p(s.createElement(E,{instances:b,onClose:()=>p()}))});return s.createElement(l,{\"data-qa-id\":\"deployment-card\",height:\"full\"},s.createElement(u,{title:k(\"Deployment\")}),s.createElement(u,{title:k(\"Version\"),body:m.version}),s.createElement(u,{title:k(\"Deployment_ID\"),body:m.uniqueId}),n&&s.createElement(u,{title:k(\"Cloud_Workspace_Id\"),body:n}),y&&s.createElement(u,{title:k(\"Apps_Engine_Version\"),body:y}),s.createElement(u,{title:k(\"Node_version\"),body:m.process.nodeVersion}),s.createElement(u,{title:k(\"DB_Migration\"),body:\"\".concat(m.migration.version,\" (\").concat(g(m.migration.lockedAt),\")\")}),s.createElement(u,{title:k(\"MongoDB\"),body:\"\".concat(m.mongoVersion,\" / \").concat(m.mongoStorageEngine,\" \").concat(m.msEnabled?\"\":\"(oplog \".concat(k(m.oplogEnabled?\"Enabled\":\"Disabled\"),\")\"))}),s.createElement(u,{title:k(\"Commit_details\"),body:s.createElement(s.Fragment,null,k(\"github_HEAD\"),\": (\",h.hash?h.hash.slice(0,9):\"\",\") \",s.createElement(\"br\",null),k(\"Branch\"),\": \",h.branch,\" \",s.createElement(\"br\",null),h.subject)}),s.createElement(u,{title:k(\"PID\"),body:m.process.pid}),!!b.length&&s.createElement(a,null,s.createElement(o,{medium:!0,onClick:D},k(\"Instances\"))))}))}","map":"{\"version\":3,\"sources\":[\"client/views/admin/workspace/DeploymentCard/DeploymentCard.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IWorkspaceInfo, IStats } from '@rocket.chat/core-typings';\\nimport { Button, Card, CardControls } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport type { IInstance } from '@rocket.chat/rest-typings';\\nimport { useSetModal, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { memo } from 'react';\\n\\nimport { useFormatDateAndTime } from '../../../../hooks/useFormatDateAndTime';\\nimport WorkspaceCardSection from '../components/WorkspaceCardSection';\\nimport InstancesModal from './components/InstancesModal';\\n\\ntype DeploymentCardProps = {\\n\\tserverInfo: IWorkspaceInfo;\\n\\tinstances: IInstance[];\\n\\tstatistics: IStats;\\n};\\n\\nconst DeploymentCard = ({ serverInfo: { info, cloudWorkspaceId }, statistics, instances }: DeploymentCardProps): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst formatDateAndTime = useFormatDateAndTime();\\n\\tconst setModal = useSetModal();\\n\\n\\tconst { commit = {}, marketplaceApiVersion: appsEngineVersion } = info || {};\\n\\n\\tconst handleInstancesModal = useMutableCallback(() => {\\n\\t\\tsetModal(<InstancesModal instances={instances} onClose={(): void => setModal()} />);\\n\\t});\\n\\n\\treturn (\\n\\t\\t<Card data-qa-id='deployment-card' height='full'>\\n\\t\\t\\t<WorkspaceCardSection title={t('Deployment')} />\\n\\t\\t\\t<WorkspaceCardSection title={t('Version')} body={statistics.version} />\\n\\t\\t\\t<WorkspaceCardSection title={t('Deployment_ID')} body={statistics.uniqueId} />\\n\\n\\t\\t\\t{cloudWorkspaceId && <WorkspaceCardSection title={t('Cloud_Workspace_Id')} body={cloudWorkspaceId} />}\\n\\n\\t\\t\\t{appsEngineVersion && <WorkspaceCardSection title={t('Apps_Engine_Version')} body={appsEngineVersion} />}\\n\\t\\t\\t<WorkspaceCardSection title={t('Node_version')} body={statistics.process.nodeVersion} />\\n\\t\\t\\t<WorkspaceCardSection\\n\\t\\t\\t\\ttitle={t('DB_Migration')}\\n\\t\\t\\t\\tbody={`${statistics.migration.version} (${formatDateAndTime(statistics.migration.lockedAt)})`}\\n\\t\\t\\t/>\\n\\t\\t\\t<WorkspaceCardSection\\n\\t\\t\\t\\ttitle={t('MongoDB')}\\n\\t\\t\\t\\tbody={`${statistics.mongoVersion} / ${statistics.mongoStorageEngine} ${\\n\\t\\t\\t\\t\\t!statistics.msEnabled ? `(oplog ${statistics.oplogEnabled ? t('Enabled') : t('Disabled')})` : ''\\n\\t\\t\\t\\t}`}\\n\\t\\t\\t/>\\n\\t\\t\\t<WorkspaceCardSection\\n\\t\\t\\t\\ttitle={t('Commit_details')}\\n\\t\\t\\t\\tbody={\\n\\t\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t\\t{t('github_HEAD')}: ({commit.hash ? commit.hash.slice(0, 9) : ''}) <br />\\n\\t\\t\\t\\t\\t\\t{t('Branch')}: {commit.branch} <br />\\n\\t\\t\\t\\t\\t\\t{commit.subject}\\n\\t\\t\\t\\t\\t</>\\n\\t\\t\\t\\t}\\n\\t\\t\\t/>\\n\\t\\t\\t<WorkspaceCardSection title={t('PID')} body={statistics.process.pid} />\\n\\n\\t\\t\\t{!!instances.length && (\\n\\t\\t\\t\\t<CardControls>\\n\\t\\t\\t\\t\\t<Button medium onClick={handleInstancesModal}>\\n\\t\\t\\t\\t\\t\\t{t('Instances')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</CardControls>\\n\\t\\t\\t)}\\n\\t\\t</Card>\\n\\t);\\n};\\n\\nexport default memo(DeploymentCard);\\n\",null],\"names\":[\"Button\",\"Card\",\"CardControls\",\"useMutableCallback\",\"useSetModal\",\"useTranslation\",\"React\",\"memo\",\"useFormatDateAndTime\",\"WorkspaceCardSection\",\"InstancesModal\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"serverInfo\",\"info\",\"cloudWorkspaceId\",\"statistics\",\"instances\",\"t\",\"formatDateAndTime\",\"setModal\",\"commit\",\"marketplaceApiVersion\",\"appsEngineVersion\",\"handleInstancesModal\",\"createElement\",\"onClose\",\"height\",\"title\",\"body\",\"version\",\"uniqueId\",\"process\",\"nodeVersion\",\"concat\",\"migration\",\"lockedAt\",\"mongoVersion\",\"mongoStorageEngine\",\"msEnabled\",\"oplogEnabled\",\"Fragment\",\"hash\",\"slice\",\"branch\",\"subject\",\"pid\",\"length\",\"medium\",\"onClick\"],\"mappings\":\"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\"}"}