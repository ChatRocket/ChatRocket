{"code":"function module(t,n,i){let o,e,a,r,s,l,u,h,d,c,f,y,x,m,g,k,p,W;function v(){return(v=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t}).apply(this,arguments)}i.export({Annotation:()=>N,bindAnnotations:()=>S,computeAnnotation:()=>T,defaultProps:()=>b,getLinkAngle:()=>O,isCanvasNote:()=>z,isCircleAnnotation:()=>C,isDotAnnotation:()=>P,isRectAnnotation:()=>A,isSvgNote:()=>w,renderAnnotationsToCanvas:()=>J,useAnnotations:()=>j,useComputedAnnotation:()=>E,useComputedAnnotations:()=>M}),i.link(\"react\",{isValidElement(t){o=t},useMemo(t){e=t},createElement(t){a=t}},0),i.link(\"lodash/filter\",{default(t){r=t}},1),i.link(\"lodash/isNumber\",{default(t){s=t}},2),i.link(\"lodash/omit\",{default(t){l=t}},3),i.link(\"@nivo/core\",{absoluteAngleDegrees(t){u=t},radiansToDegrees(t){h=t},positionFromAngle(t){d=t},degreesToRadians(t){c=t},useTheme(t){f=t},useMotionConfig(t){y=t},useAnimatedPath(t){x=t}},4),i.link(\"@react-spring/web\",{useSpring(t){m=t},animated(t){g=t}},5),i.link(\"react/jsx-runtime\",{jsxs(t){k=t},Fragment(t){p=t},jsx(t){W=t}},6);var b={dotSize:4,noteWidth:120,noteTextOffset:8,animate:!0},w=function(t){var n=typeof t;return o(t)||\"string\"===n||\"function\"===n||\"object\"===n},z=function(t){var n=typeof t;return\"string\"===n||\"function\"===n},C=function(t){return\"circle\"===t.type},P=function(t){return\"dot\"===t.type},A=function(t){return\"rect\"===t.type},S=function(t){var n=t.data,i=t.annotations,o=t.getPosition,e=t.getDimensions;return i.reduce(function(t,i){var a=i.offset||0;return[].concat(t,r(n,i.match).map(function(t){var n=o(t),r=e(t);return(C(i)||A(i))&&(r.size=r.size+2*a,r.width=r.width+2*a,r.height=r.height+2*a),v({},l(i,[\"match\",\"offset\"]),n,r,{size:i.size||r.size,datum:t})}))},[])},O=function(t,n,i,o){return u(h(Math.atan2(o-n,i-t)))},T=function(t){var n,i,o=t.x,e=t.y,a=t.noteX,r=t.noteY,l=t.noteWidth,u=void 0===l?b.noteWidth:l,h=t.noteTextOffset,f=void 0===h?b.noteTextOffset:h;if(s(a))n=o+a;else{if(void 0===a.abs)throw Error(\"noteX should be either a number or an object containing an 'abs' property\");n=a.abs}if(s(r))i=e+r;else{if(void 0===r.abs)throw Error(\"noteY should be either a number or an object containing an 'abs' property\");i=r.abs}var y=o,x=e,m=O(o,e,n,i);if(C(t)){var g=d(c(m),t.size/2);y+=g.x,x+=g.y}if(A(t)){var k=Math.round((m+90)/45)%8;0===k&&(x-=t.height/2),1===k&&(y+=t.width/2,x-=t.height/2),2===k&&(y+=t.width/2),3===k&&(y+=t.width/2,x+=t.height/2),4===k&&(x+=t.height/2),5===k&&(y-=t.width/2,x+=t.height/2),6===k&&(y-=t.width/2),7===k&&(y-=t.width/2,x-=t.height/2)}var p=n,W=n;return(m+90)%360>180?(p-=u,W-=u):W+=u,{points:[[y,x],[n,i],[W,i]],text:[p,i-f],angle:m+90}},j=function(t){var n=t.data,i=t.annotations,o=t.getPosition,a=t.getDimensions;return e(function(){return S({data:n,annotations:i,getPosition:o,getDimensions:a})},[n,i,o,a])},M=function(t){var n=t.annotations;return e(function(){return n.map(function(t){return v({},t,{computed:T(v({},t))})})},[n])},E=function(t){return e(function(){return T(t)},[t])},D=function(t){var n=t.datum,i=t.x,o=t.y,e=t.note,r=f(),s=y(),u=s.animate,h=s.config,d=m({x:i,y:o,config:h,immediate:!u});return\"function\"==typeof e?a(e,{x:i,y:o,datum:n}):k(p,{children:[r.annotations.text.outlineWidth>0&&W(g.text,{x:d.x,y:d.y,style:v({},r.annotations.text,{strokeLinejoin:\"round\",strokeWidth:2*r.annotations.text.outlineWidth,stroke:r.annotations.text.outlineColor}),children:e}),W(g.text,{x:d.x,y:d.y,style:l(r.annotations.text,[\"outlineWidth\",\"outlineColor\"]),children:e})]})},R=function(t){var n=t.points,i=t.isOutline,o=void 0!==i&&i,a=f(),r=e(function(){var t=n[0];return n.slice(1).reduce(function(t,n){return t+\" L\"+n[0]+\",\"+n[1]},\"M\"+t[0]+\",\"+t[1])},[n]),s=x(r);if(o&&a.annotations.link.outlineWidth<=0)return null;var l=v({},a.annotations.link);return o&&(l.strokeLinecap=\"square\",l.strokeWidth=a.annotations.link.strokeWidth+2*a.annotations.link.outlineWidth,l.stroke=a.annotations.link.outlineColor,l.opacity=a.annotations.link.outlineOpacity),W(g.path,{fill:\"none\",d:s,style:l})},I=function(t){var n=t.x,i=t.y,o=t.size,e=f(),a=y(),r=a.animate,s=a.config,l=m({x:n,y:i,radius:o/2,config:s,immediate:!r});return k(p,{children:[e.annotations.outline.outlineWidth>0&&W(g.circle,{cx:l.x,cy:l.y,r:l.radius,style:v({},e.annotations.outline,{fill:\"none\",strokeWidth:e.annotations.outline.strokeWidth+2*e.annotations.outline.outlineWidth,stroke:e.annotations.outline.outlineColor,opacity:e.annotations.outline.outlineOpacity})}),W(g.circle,{cx:l.x,cy:l.y,r:l.radius,style:e.annotations.outline})]})},L=function(t){var n=t.x,i=t.y,o=t.size,e=void 0===o?b.dotSize:o,a=f(),r=y(),s=r.animate,l=r.config,u=m({x:n,y:i,radius:e/2,config:l,immediate:!s});return k(p,{children:[a.annotations.outline.outlineWidth>0&&W(g.circle,{cx:u.x,cy:u.y,r:u.radius,style:v({},a.annotations.outline,{fill:\"none\",strokeWidth:2*a.annotations.outline.outlineWidth,stroke:a.annotations.outline.outlineColor,opacity:a.annotations.outline.outlineOpacity})}),W(g.circle,{cx:u.x,cy:u.y,r:u.radius,style:a.annotations.symbol})]})},F=function(t){var n=t.x,i=t.y,o=t.width,e=t.height,a=t.borderRadius,r=void 0===a?6:a,s=f(),l=y(),u=l.animate,h=l.config,d=m({x:n-o/2,y:i-e/2,width:o,height:e,config:h,immediate:!u});return k(p,{children:[s.annotations.outline.outlineWidth>0&&W(g.rect,{x:d.x,y:d.y,rx:r,ry:r,width:d.width,height:d.height,style:v({},s.annotations.outline,{fill:\"none\",strokeWidth:s.annotations.outline.strokeWidth+2*s.annotations.outline.outlineWidth,stroke:s.annotations.outline.outlineColor,opacity:s.annotations.outline.outlineOpacity})}),W(g.rect,{x:d.x,y:d.y,rx:r,ry:r,width:d.width,height:d.height,style:s.annotations.outline})]})},N=function(t){var n=t.datum,i=t.x,o=t.y,e=t.note,a=E(t);if(!w(e))throw Error(\"note should be a valid react element\");return k(p,{children:[W(R,{points:a.points,isOutline:!0}),C(t)&&W(I,{x:i,y:o,size:t.size}),P(t)&&W(L,{x:i,y:o,size:t.size}),A(t)&&W(F,{x:i,y:o,width:t.width,height:t.height,borderRadius:t.borderRadius}),W(R,{points:a.points}),W(D,{datum:n,x:a.text[0],y:a.text[1],note:e})]})},q=function(t,n){n.forEach(function(n,i){var o=n[0],e=n[1];0===i?t.moveTo(o,e):t.lineTo(o,e)})},J=function(t,n){var i=n.annotations,o=n.theme;0!==i.length&&(t.save(),i.forEach(function(n){if(!z(n.note))throw Error(\"note is invalid for canvas implementation\");o.annotations.link.outlineWidth>0&&(t.lineCap=\"square\",t.strokeStyle=o.annotations.link.outlineColor,t.lineWidth=o.annotations.link.strokeWidth+2*o.annotations.link.outlineWidth,t.beginPath(),q(t,n.computed.points),t.stroke(),t.lineCap=\"butt\"),C(n)&&o.annotations.outline.outlineWidth>0&&(t.strokeStyle=o.annotations.outline.outlineColor,t.lineWidth=o.annotations.outline.strokeWidth+2*o.annotations.outline.outlineWidth,t.beginPath(),t.arc(n.x,n.y,n.size/2,0,2*Math.PI),t.stroke()),P(n)&&o.annotations.symbol.outlineWidth>0&&(t.strokeStyle=o.annotations.symbol.outlineColor,t.lineWidth=2*o.annotations.symbol.outlineWidth,t.beginPath(),t.arc(n.x,n.y,n.size/2,0,2*Math.PI),t.stroke()),A(n)&&o.annotations.outline.outlineWidth>0&&(t.strokeStyle=o.annotations.outline.outlineColor,t.lineWidth=o.annotations.outline.strokeWidth+2*o.annotations.outline.outlineWidth,t.beginPath(),t.rect(n.x-n.width/2,n.y-n.height/2,n.width,n.height),t.stroke()),t.strokeStyle=o.annotations.link.stroke,t.lineWidth=o.annotations.link.strokeWidth,t.beginPath(),q(t,n.computed.points),t.stroke(),C(n)&&(t.strokeStyle=o.annotations.outline.stroke,t.lineWidth=o.annotations.outline.strokeWidth,t.beginPath(),t.arc(n.x,n.y,n.size/2,0,2*Math.PI),t.stroke()),P(n)&&(t.fillStyle=o.annotations.symbol.fill,t.beginPath(),t.arc(n.x,n.y,n.size/2,0,2*Math.PI),t.fill()),A(n)&&(t.strokeStyle=o.annotations.outline.stroke,t.lineWidth=o.annotations.outline.strokeWidth,t.beginPath(),t.rect(n.x-n.width/2,n.y-n.height/2,n.width,n.height),t.stroke()),\"function\"==typeof n.note?n.note(t,{datum:n.datum,x:n.computed.text[0],y:n.computed.text[1],theme:o}):(t.font=o.annotations.text.fontSize+\"px \"+o.annotations.text.fontFamily,t.textAlign=\"left\",t.textBaseline=\"alphabetic\",t.fillStyle=o.annotations.text.fill,t.strokeStyle=o.annotations.text.outlineColor,t.lineWidth=2*o.annotations.text.outlineWidth,o.annotations.text.outlineWidth>0&&(t.lineJoin=\"round\",t.strokeText(n.note,n.computed.text[0],n.computed.text[1]),t.lineJoin=\"miter\"),t.fillText(n.note,n.computed.text[0],n.computed.text[1]))}),t.restore())}}","map":"{\"version\":3,\"sources\":[\"<anon>\"],\"names\":[],\"mappings\":\"\"}"}