{"code":"function module(e,t,a){let l,o,u,n,i,r,s;a.link(\"@rocket.chat/fuselage-hooks\",{usePrefersReducedData(e){l=e}},0),a.link(\"@rocket.chat/ui-contexts\",{AttachmentContext(e){o=e},useLayout(e){u=e},useUserPreference(e){n=e}},1),a.link(\"react\",{default(e){i=e},useMemo(e){r=e}},2),a.link(\"../../app/utils/client\",{getURL(e){s=e}},3),a.exportDefault(e=>{let{children:t,width:a=360,height:c=360}=e,{isMobile:d}=u(),f=l(),k=!!n(\"collapseMediaByDefault\"),m=!!n(\"autoImageLoad\"),h=!!n(\"saveMobileBandwidth\"),L=r(()=>({getURL:e=>s(e,{full:!0}),collapsedByDefault:k,autoLoadEmbedMedias:!f&&m&&(!h||!d),dimensions:{width:a,height:c}}),[k,f,m,h,d,a,c]);return i.createElement(o.Provider,{children:t,value:L})})}","map":"{\"version\":3,\"sources\":[\"client/providers/AttachmentProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { usePrefersReducedData } from '@rocket.chat/fuselage-hooks';\\nimport type { AttachmentContextValue } from '@rocket.chat/ui-contexts';\\nimport { AttachmentContext, useLayout, useUserPreference } from '@rocket.chat/ui-contexts';\\nimport type { ReactNode } from 'react';\\nimport React, { useMemo } from 'react';\\n\\nimport { getURL } from '../../app/utils/client';\\n\\ntype AttachmentProviderProps = {\\n\\tchildren?: ReactNode;\\n\\twidth?: number;\\n\\theight?: number;\\n};\\n\\nconst AttachmentProvider = ({ children, width = 360, height = 360 }: AttachmentProviderProps) => {\\n\\tconst { isMobile } = useLayout();\\n\\tconst reducedData = usePrefersReducedData();\\n\\tconst collapsedByDefault = !!useUserPreference<boolean>('collapseMediaByDefault');\\n\\tconst autoLoadEmbedMedias = !!useUserPreference<boolean>('autoImageLoad');\\n\\tconst saveMobileBandwidth = !!useUserPreference<boolean>('saveMobileBandwidth');\\n\\n\\tconst contextValue: AttachmentContextValue = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\tgetURL: (url: string): string => getURL(url, { full: true }),\\n\\t\\t\\tcollapsedByDefault,\\n\\t\\t\\tautoLoadEmbedMedias: !reducedData && autoLoadEmbedMedias && (!saveMobileBandwidth || !isMobile),\\n\\t\\t\\tdimensions: {\\n\\t\\t\\t\\twidth,\\n\\t\\t\\t\\theight,\\n\\t\\t\\t},\\n\\t\\t}),\\n\\t\\t[collapsedByDefault, reducedData, autoLoadEmbedMedias, saveMobileBandwidth, isMobile, width, height],\\n\\t);\\n\\n\\treturn <AttachmentContext.Provider children={children} value={contextValue} />;\\n};\\n\\nexport default AttachmentProvider;\\n\",null],\"names\":[\"usePrefersReducedData\",\"AttachmentContext\",\"useLayout\",\"useUserPreference\",\"React\",\"useMemo\",\"getURL\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"children\",\"width\",\"height\",\"isMobile\",\"reducedData\",\"collapsedByDefault\",\"autoLoadEmbedMedias\",\"saveMobileBandwidth\",\"contextValue\",\"url\",\"full\",\"dimensions\",\"createElement\",\"Provider\",\"value\"],\"mappings\":\"2BAAAA,EAAoEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA3DC,EAAuBC,IAAA,CAAM,8BAA8B,CAAAR,sBAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2BAAA,CAAAP,kBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,UAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,kBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,QAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,yBAAA,CAAAF,OAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAApEF,EAAOI,aAAE,CAckBC,IAAqE,GAApE,CAAEC,SAAAA,CAAQ,CAAEC,MAAAA,EAAQ,GAAG,CAAEC,OAAAA,EAAS,GAAA,CAA8B,CAAAH,EACrF,CAAEI,SAAAA,CAAAA,CAAU,CAAGd,IACfe,EAAcjB,IACdkB,EAAqB,CAAC,CAACf,EAA2B,0BAClDgB,EAAsB,CAAC,CAAChB,EAA2B,iBACnDiB,EAAsB,CAAC,CAACjB,EAA2B,uBAEnDkB,EAAuChB,EAC5C,IAAO,CAAA,CACNC,OAASgB,GAAwBhB,EAAOgB,EAAK,CAAEC,KAAM,CAAA,CAAI,GACzDL,mBAAAA,EACAC,oBAAqB,CAACF,GAAeE,GAAwB,CAAA,CAACC,GAAuB,CAACJ,CAAAA,EACtFQ,WAAY,CACXV,MAAAA,EACAC,OAAAA,KAGF,CAACG,EAAoBD,EAAaE,EAAqBC,EAAqBJ,EAAUF,EAAOC,EAAO,EAGrG,OAAOX,EAAAqB,aAAA,CAACxB,EAAkByB,QAAQ,CAAA,CAACb,SAAUA,EAAUc,MAAON,CAAa,EAC5E\"}"}