{"code":"function module(e,t,n){n.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){r=e}},0),n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){i=e}},1),n.export({useRecordList:function(){return c}}),n.link(\"react\",{useEffect:function(e){o=e},useState:function(e){u=e}},0);var r,i,o,u,c=function(e){var t=u(function(){return{phase:e.phase,items:e.items,itemCount:e.itemCount,error:void 0}}),n=i(t,2),c=n[0],s=n[1];return o(function(){var t=e.on(\"mutating\",function(){s(function(){return{phase:e.phase,items:e.items,itemCount:e.itemCount,error:void 0}})}),n=e.on(\"mutated\",function(){s(function(t){return{phase:e.phase,items:e.items,itemCount:e.itemCount,error:t.error}})}),i=e.on(\"cleared\",function(){s(function(){return{phase:e.phase,items:e.items,itemCount:e.itemCount,error:void 0}})}),o=e.on(\"errored\",function(e){s(function(t){return r(r({},t),{},{error:e})})});return function(){t(),n(),i(),o()}},[e]),c}}","map":"{\"version\":3,\"sources\":[\"client/hooks/lists/useRecordList.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useEffect, useState } from 'react';\\n\\nimport type { AsyncStatePhase } from '../../lib/asyncState';\\nimport type { RecordList } from '../../lib/lists/RecordList';\\n\\ntype RecordListValue<T> = {\\n\\tphase: AsyncStatePhase;\\n\\titems: T[];\\n\\titemCount: number;\\n\\terror: Error | undefined;\\n};\\n\\nexport const useRecordList = <T extends { _id: string; _updatedAt?: Date }>(recordList: RecordList<T>): RecordListValue<T> => {\\n\\tconst [state, setState] = useState<RecordListValue<T>>(() => ({\\n\\t\\tphase: recordList.phase,\\n\\t\\titems: recordList.items,\\n\\t\\titemCount: recordList.itemCount,\\n\\t\\terror: undefined,\\n\\t}));\\n\\n\\tuseEffect(() => {\\n\\t\\tconst disconnectMutatingEvent = recordList.on('mutating', () => {\\n\\t\\t\\tsetState(() => ({\\n\\t\\t\\t\\tphase: recordList.phase,\\n\\t\\t\\t\\titems: recordList.items,\\n\\t\\t\\t\\titemCount: recordList.itemCount,\\n\\t\\t\\t\\terror: undefined,\\n\\t\\t\\t}));\\n\\t\\t});\\n\\n\\t\\tconst disconnectMutatedEvent = recordList.on('mutated', () => {\\n\\t\\t\\tsetState((prevState) => ({\\n\\t\\t\\t\\tphase: recordList.phase,\\n\\t\\t\\t\\titems: recordList.items,\\n\\t\\t\\t\\titemCount: recordList.itemCount,\\n\\t\\t\\t\\terror: prevState.error,\\n\\t\\t\\t}));\\n\\t\\t});\\n\\n\\t\\tconst disconnectClearedEvent = recordList.on('cleared', () => {\\n\\t\\t\\tsetState(() => ({\\n\\t\\t\\t\\tphase: recordList.phase,\\n\\t\\t\\t\\titems: recordList.items,\\n\\t\\t\\t\\titemCount: recordList.itemCount,\\n\\t\\t\\t\\terror: undefined,\\n\\t\\t\\t}));\\n\\t\\t});\\n\\n\\t\\tconst disconnectErroredEvent = recordList.on('errored', (error) => {\\n\\t\\t\\tsetState((state) => ({ ...state, error }));\\n\\t\\t});\\n\\n\\t\\treturn (): void => {\\n\\t\\t\\tdisconnectMutatingEvent();\\n\\t\\t\\tdisconnectMutatedEvent();\\n\\t\\t\\tdisconnectClearedEvent();\\n\\t\\t\\tdisconnectErroredEvent();\\n\\t\\t};\\n\\t}, [recordList]);\\n\\n\\treturn state;\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"_slicedToArray\",\"export\",\"useRecordList\",\"useEffect\",\"useState\",\"recordList\",\"_useState\",\"phase\",\"items\",\"itemCount\",\"error\",\"undefined\",\"_useState2\",\"state\",\"setState\",\"disconnectMutatingEvent\",\"on\",\"disconnectMutatedEvent\",\"prevState\",\"disconnectClearedEvent\",\"disconnectErroredEvent\"],\"mappings\":\"uBAAkBA,EAAEC,IAAQ,CAAE,uCAAc,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAA5CH,EAAOM,MAAE,CAAA,CAAAC,cAAmB,WAAQ,OAAQA,CAAA,CAAA,GAAAP,EAAAC,IAAA,CAAA,QAAA,CAAAO,UAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,EAAAM,SAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAYrC,IAZPC,EAA4CC,EAAAG,EAAAC,EAY/BF,EAAgB,SAA+CG,CAAyB,EACpG,IAAAC,EAA0BF,EAA6B,WAAA,MAAO,CAC7DG,MAAOF,EAAWE,KAAK,CACvBC,MAAOH,EAAWG,KAAK,CACvBC,UAAWJ,EAAWI,SAAS,CAC/BC,MAAOC,KAAAA,EACP,GAAEC,EAAAZ,EAAAM,EAAA,GALIO,EAAKD,CAAA,CAAA,EAAA,CAAEE,EAAQF,CAAA,CAAA,EAAA,CA+CtB,OAxCAT,EAAU,WACT,IAAMY,EAA0BV,EAAWW,EAAE,CAAC,WAAY,WACzDF,EAAS,WAAA,MAAO,CACfP,MAAOF,EAAWE,KAAK,CACvBC,MAAOH,EAAWG,KAAK,CACvBC,UAAWJ,EAAWI,SAAS,CAC/BC,MAAOC,KAAAA,EACP,EACF,GAEMM,EAAyBZ,EAAWW,EAAE,CAAC,UAAW,WACvDF,EAAS,SAACI,CAAS,EAAA,MAAM,CACxBX,MAAOF,EAAWE,KAAK,CACvBC,MAAOH,EAAWG,KAAK,CACvBC,UAAWJ,EAAWI,SAAS,CAC/BC,MAAOQ,EAAUR,KAAAA,CACjB,EACF,GAEMS,EAAyBd,EAAWW,EAAE,CAAC,UAAW,WACvDF,EAAS,WAAA,MAAO,CACfP,MAAOF,EAAWE,KAAK,CACvBC,MAAOH,EAAWG,KAAK,CACvBC,UAAWJ,EAAWI,SAAS,CAC/BC,MAAOC,KAAAA,EACP,EACF,GAEMS,EAAyBf,EAAWW,EAAE,CAAC,UAAW,SAACN,CAAK,EAC7DI,EAAS,SAACD,CAAK,EAAA,OAAAd,EAAAA,EAAA,CAAA,EAAWc,GAAK,CAAA,EAAA,CAAEH,MAAAA,CAAK,EAAA,EACvC,GAEA,OAAO,WACNK,IACAE,IACAE,IACAC,GACD,CACD,EAAG,CAACf,EAAW,EAERQ,CACR\"}"}