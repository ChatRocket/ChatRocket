{"code":"function module(n,e,t){t.export({OmnichannelRoomIconProvider:function(){return m}}),t.link(\"react\",{default:function(n){o=n},useCallback:function(n){r=n},useMemo:function(n){c=n}},0),t.link(\"react-dom\",{createPortal:function(n){i=n}},1),t.link(\"use-sync-external-store/shim\",{useSyncExternalStore:function(n){u=n}},2),t.link(\"../../../../lib/asyncState/AsyncStatePhase\",{AsyncStatePhase:function(n){a=n}},3),t.link(\"../context/OmnichannelRoomIconContext\",{OmnichannelRoomIconContext:function(n){l=n}},4),t.link(\"../lib/OmnichannelRoomIconManager\",{default:function(n){s=n}},5);var o,r,c,i,u,a,l,s,f=Array.from(s.icons.values()),m=function(n){var e=n.children,t=u(r(function(n){return s.on(\"change\",function(){f=Array.from(s.icons.values()),n()})},[]),function(){return f});return o.createElement(l.Provider,{value:c(function(){var n=function(n,e){var t=s.get(n,e);return t?{phase:a.RESOLVED,value:t,error:void 0}:{phase:a.LOADING,value:void 0,error:void 0}},e=new Map;return{queryIcon:function(t,o){return[function(r){return s.on(t+\"-\"+o,function(){e.set(t+\"-\"+o,n(t,o)),r()})},function(){var r=e.get(t+\"-\"+o);return r||(r=n(t,o),e.set(t+\"-\"+o,r)),r}]}}},[])},i(o.createElement(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",xmlnsXlink:\"http://www.w3.org/1999/xlink\",style:{display:\"none\"},dangerouslySetInnerHTML:{__html:t.join(\"\")}}),document.body,\"custom-icons\"),e)}}","map":"{\"version\":3,\"sources\":[\"client/components/RoomIcon/OmnichannelRoomIcon/provider/OmnichannelRoomIconProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ReactNode } from 'react';\\nimport React, { useCallback, useMemo } from 'react';\\nimport { createPortal } from 'react-dom';\\nimport { useSyncExternalStore } from 'use-sync-external-store/shim';\\n\\nimport type { AsyncState } from '../../../../lib/asyncState/AsyncState';\\nimport { AsyncStatePhase } from '../../../../lib/asyncState/AsyncStatePhase';\\nimport { OmnichannelRoomIconContext } from '../context/OmnichannelRoomIconContext';\\nimport OmnichannelRoomIconManager from '../lib/OmnichannelRoomIconManager';\\n\\nlet icons = Array.from(OmnichannelRoomIconManager.icons.values());\\n\\ntype OmnichannelRoomIconProviderProps = {\\n\\tchildren?: ReactNode;\\n};\\n\\nexport const OmnichannelRoomIconProvider = ({ children }: OmnichannelRoomIconProviderProps) => {\\n\\tconst svgIcons = useSyncExternalStore(\\n\\t\\tuseCallback(\\n\\t\\t\\t(callback): (() => void) =>\\n\\t\\t\\t\\tOmnichannelRoomIconManager.on('change', () => {\\n\\t\\t\\t\\t\\ticons = Array.from(OmnichannelRoomIconManager.icons.values());\\n\\t\\t\\t\\t\\tcallback();\\n\\t\\t\\t\\t}),\\n\\t\\t\\t[],\\n\\t\\t),\\n\\t\\t(): string[] => icons,\\n\\t);\\n\\n\\treturn (\\n\\t\\t<OmnichannelRoomIconContext.Provider\\n\\t\\t\\tvalue={useMemo(() => {\\n\\t\\t\\t\\tconst extractSnapshot = (app: string, iconName: string): AsyncState<string> => {\\n\\t\\t\\t\\t\\tconst icon = OmnichannelRoomIconManager.get(app, iconName);\\n\\n\\t\\t\\t\\t\\tif (icon) {\\n\\t\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\t\\tphase: AsyncStatePhase.RESOLVED,\\n\\t\\t\\t\\t\\t\\t\\tvalue: icon,\\n\\t\\t\\t\\t\\t\\t\\terror: undefined,\\n\\t\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\tphase: AsyncStatePhase.LOADING,\\n\\t\\t\\t\\t\\t\\tvalue: undefined,\\n\\t\\t\\t\\t\\t\\terror: undefined,\\n\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t};\\n\\n\\t\\t\\t\\t// We cache all the icons here, so that we can use them in the OmnichannelRoomIcon component\\n\\t\\t\\t\\tconst snapshots = new Map<string, AsyncState<string>>();\\n\\n\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\tqueryIcon: (\\n\\t\\t\\t\\t\\t\\tapp: string,\\n\\t\\t\\t\\t\\t\\ticonName: string,\\n\\t\\t\\t\\t\\t): [subscribe: (onStoreChange: () => void) => () => void, getSnapshot: () => AsyncState<string>] => [\\n\\t\\t\\t\\t\\t\\t(callback): (() => void) =>\\n\\t\\t\\t\\t\\t\\t\\tOmnichannelRoomIconManager.on(`${app}-${iconName}`, () => {\\n\\t\\t\\t\\t\\t\\t\\t\\tsnapshots.set(`${app}-${iconName}`, extractSnapshot(app, iconName));\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t// Then we call the callback (onStoreChange), signaling React to re-render\\n\\t\\t\\t\\t\\t\\t\\t\\tcallback();\\n\\t\\t\\t\\t\\t\\t\\t}),\\n\\n\\t\\t\\t\\t\\t\\t// No problem here, because it's return value is a cached in the snapshots map on subsequent calls\\n\\t\\t\\t\\t\\t\\t(): AsyncState<string> => {\\n\\t\\t\\t\\t\\t\\t\\tlet snapshot = snapshots.get(`${app}-${iconName}`);\\n\\n\\t\\t\\t\\t\\t\\t\\tif (!snapshot) {\\n\\t\\t\\t\\t\\t\\t\\t\\tsnapshot = extractSnapshot(app, iconName);\\n\\t\\t\\t\\t\\t\\t\\t\\tsnapshots.set(`${app}-${iconName}`, snapshot);\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\treturn snapshot;\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t],\\n\\t\\t\\t\\t};\\n\\t\\t\\t}, [])}\\n\\t\\t>\\n\\t\\t\\t{createPortal(\\n\\t\\t\\t\\t<svg\\n\\t\\t\\t\\t\\txmlns='http://www.w3.org/2000/svg'\\n\\t\\t\\t\\t\\txmlnsXlink='http://www.w3.org/1999/xlink'\\n\\t\\t\\t\\t\\tstyle={{ display: 'none' }}\\n\\t\\t\\t\\t\\tdangerouslySetInnerHTML={{ __html: svgIcons.join('') }}\\n\\t\\t\\t\\t/>,\\n\\t\\t\\t\\tdocument.body,\\n\\t\\t\\t\\t'custom-icons',\\n\\t\\t\\t)}\\n\\t\\t\\t{children}\\n\\t\\t</OmnichannelRoomIconContext.Provider>\\n\\t);\\n};\\n\",null],\"names\":[\"module\",\"export\",\"OmnichannelRoomIconProvider\",\"link\",\"v\",\"React\",\"useCallback\",\"useMemo\",\"createPortal\",\"useSyncExternalStore\",\"AsyncStatePhase\",\"OmnichannelRoomIconContext\",\"OmnichannelRoomIconManager\",\"icons\",\"Array\",\"from\",\"values\",\"_ref\",\"children\",\"svgIcons\",\"callback\",\"on\",\"createElement\",\"Provider\",\"value\",\"extractSnapshot\",\"app\",\"iconName\",\"icon\",\"get\",\"phase\",\"RESOLVED\",\"error\",\"undefined\",\"LOADING\",\"snapshots\",\"Map\",\"queryIcon\",\"set\",\"snapshot\",\"xmlns\",\"xmlnsXlink\",\"style\",\"display\",\"dangerouslySetInnerHTML\",\"__html\",\"join\",\"document\",\"body\"],\"mappings\":\"uBACAA,EAAOC,MAAK,CAAE,CAAAC,4BAAwB,WAAc,OAAAA,CAAA,CAAA,GAAAF,EAAAG,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,EAAAE,YAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,EAAAG,QAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,YAAA,CAAAK,aAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,+BAAA,CAAAM,qBAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,6CAAA,CAAAO,gBAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,wCAAA,CAAAQ,2BAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,oCAAA,CAAA,QAAA,SAAAC,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GASpD,IAToDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAShDC,EAAQC,MAAMC,IAAI,CAACH,EAA2BC,KAAK,CAACG,MAAM,IAMjDd,EAA8B,SAAAe,CAAA,EAAmD,IAAhDC,EAAQD,EAARC,QAAQ,CAC/CC,EAAWV,EAChBH,EACC,SAACc,CAAQ,EAAA,OACRR,EAA2BS,EAAE,CAAC,SAAU,WACvCR,EAAQC,MAAMC,IAAI,CAACH,EAA2BC,KAAK,CAACG,MAAM,IAC1DI,GACD,EAAE,EACH,EAAE,EAEH,WAAA,OAAgBP,CAAK,GAGtB,OACCR,EAAAiB,aAAA,CAACX,EAA2BY,QAAQ,CAAA,CACnCC,MAAOjB,EAAQ,WACd,IAAMkB,EAAkB,SAACC,CAAW,CAAEC,CAAgB,EACrD,IAAMC,EAAOhB,EAA2BiB,GAAG,CAACH,EAAKC,UAEjD,AAAIC,EACI,CACNE,MAAOpB,EAAgBqB,QAAQ,CAC/BP,MAAOI,EACPI,MAAOC,KAAAA,GAIF,CACNH,MAAOpB,EAAgBwB,OAAO,CAC9BV,MAAOS,KAAAA,EACPD,MAAOC,KAAAA,EAET,EAGME,EAAY,IAAIC,IAEtB,MAAO,CACNC,UAAW,SACVX,CAAW,CACXC,CAAgB,EAAA,MACmF,CACnG,SAACP,CAAQ,EAAA,OACRR,EAA2BS,EAAE,CAAIK,EAAG,IAAIC,EAAY,WACnDQ,EAAUG,GAAG,CAAIZ,EAAG,IAAIC,EAAYF,EAAgBC,EAAKC,IAGzDP,GACD,EAAE,EAGH,WACC,IAAImB,EAAWJ,EAAUN,GAAG,CAAIH,EAAG,IAAIC,GAOvC,OALKY,IACJA,EAAWd,EAAgBC,EAAKC,GAChCQ,EAAUG,GAAG,CAAIZ,EAAG,IAAIC,EAAYY,IAG9BA,CACR,EACA,EAEH,EAAG,EAAE,CAAE,EAEN/B,EACAH,EAAAiB,aAAA,CAAA,MAAA,CACCkB,MAAM,6BACNC,WAAW,+BACXC,MAAO,CAAEC,QAAS,MAAM,EACxBC,wBAAyB,CAAEC,OAAQ1B,EAAS2B,IAAI,CAAC,GAAG,CAAG,GAExDC,SAASC,IAAI,CACb,gBAEA9B,EAGJ\"}"}