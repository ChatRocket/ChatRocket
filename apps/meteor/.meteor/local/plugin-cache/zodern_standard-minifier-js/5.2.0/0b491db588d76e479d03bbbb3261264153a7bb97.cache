{"code":"function module(t,e,l){let r,i,n,o,u,a,s,c,d,v,m,b;l.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedState(t){r=t},useMediaQuery(t){i=t}},0),l.link(\"@rocket.chat/ui-client\",{TooltipComponent(t){n=t}},1),l.link(\"@rocket.chat/ui-contexts\",{TooltipContext(t){o=t}},2),l.link(\"react\",{default(t){u=t},useEffect(t){a=t},useMemo(t){s=t},useRef(t){c=t},memo(t){d=t},useCallback(t){v=t},useState(t){m=t}},3),l.link(\"../portals/TooltipPortal\",{default(t){b=t}},4),l.exportDefault(d(t=>{let{children:e}=t,l=c(),d=!i(\"(hover: none)\"),[f,p]=r(null,300),k=v(t=>{setTimeout(()=>{if(t&&!t.getAttribute(\"title\")){var e;t.setAttribute(\"title\",null!==(e=t.getAttribute(\"data-title\"))&&void 0!==e?e:\"\"),t.removeAttribute(\"data-title\")}},0)},[]),A=s(()=>({open:(t,e)=>{let r=l.current;p(u.createElement(n,{key:new Date().toISOString(),title:t,anchor:e})),l.current=e,r&&k(r)},close:()=>{let t=l.current;p(null),p.flush(),l.current=void 0,t&&k(t)},dismiss:()=>{p(null),p.flush()}}),[p,k]);return a(()=>{if(!d)return;let t=t=>{var e,r;let i=t.target;if(l.current===i)return;let n=i.closest(\"[title], [data-tooltip]\");if(l.current===n)return;if(!n){A.close();return}let o=null!==(e=null!==(r=n.getAttribute(\"title\"))&&void 0!==r?r:n.getAttribute(\"data-tooltip\"))&&void 0!==e?e:\"\";if(!o){A.close();return}A.open(u.createElement(()=>{let[t,e]=m(o);return a(()=>{let t=()=>A.close();n.setAttribute(\"data-title\",o),n.setAttribute(\"title\",\"\"),n.addEventListener(\"mouseleave\",t);let l=new MutationObserver(()=>{var t,l;let r=null!==(t=null!==(l=n.getAttribute(\"title\"))&&void 0!==l?l:n.getAttribute(\"data-tooltip\"))&&void 0!==t?t:\"\";\"\"!==r&&(n.setAttribute(\"data-title\",r),n.setAttribute(\"title\",\"\"),e(r))});return l.observe(n,{attributes:!0,attributeFilter:[\"title\",\"data-tooltip\"]}),()=>{n.removeEventListener(\"mouseleave\",t),l.disconnect()}},[]),u.createElement(u.Fragment,null,t)},null),n)},e=()=>{A.dismiss()};return document.body.addEventListener(\"mouseover\",t,{passive:!0}),document.body.addEventListener(\"click\",e,{capture:!0}),()=>{A.close(),document.body.removeEventListener(\"mouseover\",t),document.body.removeEventListener(\"click\",e)}},[A,p,d]),u.createElement(o.Provider,{value:A},e,f&&u.createElement(b,null,f))}))}","map":"{\"version\":3,\"sources\":[\"client/providers/TooltipProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useDebouncedState, useMediaQuery } from '@rocket.chat/fuselage-hooks';\\nimport { TooltipComponent } from '@rocket.chat/ui-client';\\nimport { TooltipContext } from '@rocket.chat/ui-contexts';\\nimport type { ReactNode } from 'react';\\nimport React, { useEffect, useMemo, useRef, memo, useCallback, useState } from 'react';\\n\\nimport TooltipPortal from '../portals/TooltipPortal';\\n\\ntype TooltipProviderProps = {\\n\\tchildren?: ReactNode;\\n};\\n\\nconst TooltipProvider = ({ children }: TooltipProviderProps) => {\\n\\tconst lastAnchor = useRef<HTMLElement>();\\n\\tconst hasHover = !useMediaQuery('(hover: none)');\\n\\n\\tconst [tooltip, setTooltip] = useDebouncedState<ReactNode>(null, 300);\\n\\n\\tconst restoreTitle = useCallback((previousAnchor: HTMLElement | undefined): void => {\\n\\t\\tsetTimeout(() => {\\n\\t\\t\\tif (previousAnchor && !previousAnchor.getAttribute('title')) {\\n\\t\\t\\t\\tpreviousAnchor.setAttribute('title', previousAnchor.getAttribute('data-title') ?? '');\\n\\t\\t\\t\\tpreviousAnchor.removeAttribute('data-title');\\n\\t\\t\\t}\\n\\t\\t}, 0);\\n\\t}, []);\\n\\n\\tconst contextValue = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\topen: (tooltip: ReactNode, anchor: HTMLElement): void => {\\n\\t\\t\\t\\tconst previousAnchor = lastAnchor.current;\\n\\t\\t\\t\\tsetTooltip(<TooltipComponent key={new Date().toISOString()} title={tooltip} anchor={anchor} />);\\n\\t\\t\\t\\tlastAnchor.current = anchor;\\n\\t\\t\\t\\tpreviousAnchor && restoreTitle(previousAnchor);\\n\\t\\t\\t},\\n\\t\\t\\tclose: (): void => {\\n\\t\\t\\t\\tconst previousAnchor = lastAnchor.current;\\n\\t\\t\\t\\tsetTooltip(null);\\n\\t\\t\\t\\tsetTooltip.flush();\\n\\t\\t\\t\\tlastAnchor.current = undefined;\\n\\t\\t\\t\\tpreviousAnchor && restoreTitle(previousAnchor);\\n\\t\\t\\t},\\n\\t\\t\\tdismiss: (): void => {\\n\\t\\t\\t\\tsetTooltip(null);\\n\\t\\t\\t\\tsetTooltip.flush();\\n\\t\\t\\t},\\n\\t\\t}),\\n\\t\\t[setTooltip, restoreTitle],\\n\\t);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!hasHover) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst handleMouseOver = (e: MouseEvent): void => {\\n\\t\\t\\tconst target = e.target as HTMLElement;\\n\\t\\t\\tif (lastAnchor.current === target) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst anchor = target.closest('[title], [data-tooltip]') as HTMLElement;\\n\\n\\t\\t\\tif (lastAnchor.current === anchor) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (!anchor) {\\n\\t\\t\\t\\tcontextValue.close();\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst title = anchor.getAttribute('title') ?? anchor.getAttribute('data-tooltip') ?? '';\\n\\t\\t\\tif (!title) {\\n\\t\\t\\t\\tcontextValue.close();\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\t// eslint-disable-next-line react/no-multi-comp\\n\\t\\t\\tconst Handler = () => {\\n\\t\\t\\t\\tconst [state, setState] = useState(title);\\n\\t\\t\\t\\tuseEffect(() => {\\n\\t\\t\\t\\t\\tconst close = (): void => contextValue.close();\\n\\t\\t\\t\\t\\t// store the title in a data attribute\\n\\t\\t\\t\\t\\tanchor.setAttribute('data-title', title);\\n\\t\\t\\t\\t\\t// Removes the title attribute to prevent the browser's tooltip from showing\\n\\t\\t\\t\\t\\tanchor.setAttribute('title', '');\\n\\n\\t\\t\\t\\t\\tanchor.addEventListener('mouseleave', close);\\n\\n\\t\\t\\t\\t\\tconst observer = new MutationObserver(() => {\\n\\t\\t\\t\\t\\t\\tconst title = anchor.getAttribute('title') ?? anchor.getAttribute('data-tooltip') ?? '';\\n\\n\\t\\t\\t\\t\\t\\tif (title === '') {\\n\\t\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t// store the title in a data attribute\\n\\t\\t\\t\\t\\t\\tanchor.setAttribute('data-title', title);\\n\\t\\t\\t\\t\\t\\t// Removes the title attribute to prevent the browser's tooltip from showing\\n\\t\\t\\t\\t\\t\\tanchor.setAttribute('title', '');\\n\\n\\t\\t\\t\\t\\t\\tsetState(title);\\n\\t\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\t\\tobserver.observe(anchor, {\\n\\t\\t\\t\\t\\t\\tattributes: true,\\n\\t\\t\\t\\t\\t\\tattributeFilter: ['title', 'data-tooltip'],\\n\\t\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\t\\treturn () => {\\n\\t\\t\\t\\t\\t\\tanchor.removeEventListener('mouseleave', close);\\n\\t\\t\\t\\t\\t\\tobserver.disconnect();\\n\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t}, []);\\n\\t\\t\\t\\treturn <>{state}</>;\\n\\t\\t\\t};\\n\\t\\t\\tcontextValue.open(<Handler />, anchor);\\n\\t\\t};\\n\\n\\t\\tconst dismissOnClick = (): void => {\\n\\t\\t\\tcontextValue.dismiss();\\n\\t\\t};\\n\\n\\t\\tdocument.body.addEventListener('mouseover', handleMouseOver, {\\n\\t\\t\\tpassive: true,\\n\\t\\t});\\n\\t\\tdocument.body.addEventListener('click', dismissOnClick, { capture: true });\\n\\n\\t\\treturn (): void => {\\n\\t\\t\\tcontextValue.close();\\n\\t\\t\\tdocument.body.removeEventListener('mouseover', handleMouseOver);\\n\\t\\t\\tdocument.body.removeEventListener('click', dismissOnClick);\\n\\t\\t};\\n\\t}, [contextValue, setTooltip, hasHover]);\\n\\n\\treturn (\\n\\t\\t<TooltipContext.Provider value={contextValue}>\\n\\t\\t\\t{children}\\n\\t\\t\\t{tooltip && <TooltipPortal>{tooltip}</TooltipPortal>}\\n\\t\\t</TooltipContext.Provider>\\n\\t);\\n};\\n\\nexport default memo<typeof TooltipProvider>(TooltipProvider);\\n\",null],\"names\":[\"useDebouncedState\",\"useMediaQuery\",\"TooltipComponent\",\"TooltipContext\",\"React\",\"useEffect\",\"useMemo\",\"useRef\",\"memo\",\"useCallback\",\"useState\",\"TooltipPortal\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"children\",\"lastAnchor\",\"hasHover\",\"tooltip\",\"setTooltip\",\"restoreTitle\",\"previousAnchor\",\"setTimeout\",\"getAttribute\",\"_previousAnchor$getAt\",\"setAttribute\",\"removeAttribute\",\"contextValue\",\"open\",\"anchor\",\"current\",\"createElement\",\"key\",\"Date\",\"toISOString\",\"title\",\"close\",\"flush\",\"undefined\",\"dismiss\",\"handleMouseOver\",\"e\",\"_ref2\",\"_anchor$getAttribute\",\"target\",\"closest\",\"Handler\",\"state\",\"setState\",\"addEventListener\",\"observer\",\"MutationObserver\",\"_ref3\",\"_anchor$getAttribute2\",\"observe\",\"attributes\",\"attributeFilter\",\"removeEventListener\",\"disconnect\",\"Fragment\",\"dismissOnClick\",\"document\",\"body\",\"passive\",\"capture\",\"Provider\",\"value\"],\"mappings\":\"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\"}"}