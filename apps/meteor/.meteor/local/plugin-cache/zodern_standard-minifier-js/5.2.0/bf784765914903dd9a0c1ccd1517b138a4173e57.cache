{"code":"function module(e,t,l){let i,n,a,r,s,o,u,c,d,h,m,k,f,p;let b=[\"label\"];l.link(\"@babel/runtime/helpers/extends\",{default(e){i=e}},0),l.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){n=e}},1),l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){a=e}},2),l.link(\"@rocket.chat/fuselage\",{CheckOption(e){r=e},PaginatedMultiSelectFiltered(e){s=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue(e){o=e}},1),l.link(\"react\",{default(e){u=e},memo(e){c=e},useMemo(e){d=e},useState(e){h=e}},2),l.link(\"react-i18next\",{useTranslation(e){m=e}},3),l.link(\"../hooks/lists/useRecordList\",{useRecordList(e){k=e}},4),l.link(\"../hooks/useAsyncState\",{AsyncStatePhase(e){f=e}},5),l.link(\"./Omnichannel/hooks/useDepartmentsList\",{useDepartmentsList(e){p=e}},6),l.exportDefault(c(e=>{let{value:t=[],onlyMyDepartments:l=!1,showArchived:c=!1,enabled:v=!1,onChange:S=()=>void 0}=e,{t:L}=m(),[w,x]=h(\"\"),D=o(w,500),{itemsList:g,loadMoreItems:A}=p(d(()=>a(a({filter:D,onlyMyDepartments:l},c&&{showArchived:!0}),{},{enabled:v}),[D,v,l,c])),{phase:M,items:y,itemCount:C}=k(g),E=d(()=>{let e=t.filter(e=>{let{value:t}=e;return!y.find(e=>e.value===t)})||[];return[...y,...e]},[y,t]);return u.createElement(s,{withTitle:!0,value:t,onChange:S,filter:w,setFilter:x,options:E,width:\"100%\",flexShrink:0,flexGrow:0,placeholder:L(\"Select_an_option\"),endReached:M===f.LOADING?()=>void 0:e=>{if(void 0!==e)return A(e,Math.min(50,C))},renderItem:e=>{let{label:l}=e,a=n(e,b);return u.createElement(r,i({},a,{label:u.createElement(\"span\",{style:{whiteSpace:\"normal\"}},l),selected:t.some(e=>e.value===a.value)}))}})}))}","map":"{\"version\":3,\"sources\":[\"client/components/AutoCompleteDepartmentMultiple.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { CheckOption, PaginatedMultiSelectFiltered } from '@rocket.chat/fuselage';\\nimport type { PaginatedMultiSelectOption } from '@rocket.chat/fuselage';\\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\\nimport type { ComponentProps } from 'react';\\nimport React, { memo, useMemo, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useRecordList } from '../hooks/lists/useRecordList';\\nimport { AsyncStatePhase } from '../hooks/useAsyncState';\\nimport { useDepartmentsList } from './Omnichannel/hooks/useDepartmentsList';\\n\\ntype AutoCompleteDepartmentMultipleProps = {\\n\\tvalue?: PaginatedMultiSelectOption[];\\n\\tonChange: (value: PaginatedMultiSelectOption[]) => void;\\n\\tonlyMyDepartments?: boolean;\\n\\tshowArchived?: boolean;\\n\\tenabled?: boolean;\\n} & Omit<ComponentProps<typeof PaginatedMultiSelectFiltered>, 'options'>;\\n\\nconst AutoCompleteDepartmentMultiple = ({\\n\\tvalue = [],\\n\\tonlyMyDepartments = false,\\n\\tshowArchived = false,\\n\\tenabled = false,\\n\\tonChange = () => undefined,\\n}: AutoCompleteDepartmentMultipleProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst [departmentsFilter, setDepartmentsFilter] = useState('');\\n\\n\\tconst debouncedDepartmentsFilter = useDebouncedValue(departmentsFilter, 500);\\n\\n\\tconst { itemsList: departmentsList, loadMoreItems: loadMoreDepartments } = useDepartmentsList(\\n\\t\\tuseMemo(\\n\\t\\t\\t() => ({ filter: debouncedDepartmentsFilter, onlyMyDepartments, ...(showArchived && { showArchived: true }), enabled }),\\n\\t\\t\\t[debouncedDepartmentsFilter, enabled, onlyMyDepartments, showArchived],\\n\\t\\t),\\n\\t);\\n\\n\\tconst { phase: departmentsPhase, items: departmentsItems, itemCount: departmentsTotal } = useRecordList(departmentsList);\\n\\n\\tconst departmentOptions = useMemo(() => {\\n\\t\\tconst pending = value.filter(({ value }) => !departmentsItems.find((dep) => dep.value === value)) || [];\\n\\t\\treturn [...departmentsItems, ...pending];\\n\\t}, [departmentsItems, value]);\\n\\n\\treturn (\\n\\t\\t<PaginatedMultiSelectFiltered\\n\\t\\t\\twithTitle\\n\\t\\t\\tvalue={value}\\n\\t\\t\\tonChange={onChange}\\n\\t\\t\\tfilter={departmentsFilter}\\n\\t\\t\\tsetFilter={setDepartmentsFilter}\\n\\t\\t\\toptions={departmentOptions}\\n\\t\\t\\twidth='100%'\\n\\t\\t\\tflexShrink={0}\\n\\t\\t\\tflexGrow={0}\\n\\t\\t\\tplaceholder={t('Select_an_option')}\\n\\t\\t\\tendReached={\\n\\t\\t\\t\\tdepartmentsPhase === AsyncStatePhase.LOADING\\n\\t\\t\\t\\t\\t? () => undefined\\n\\t\\t\\t\\t\\t: (start?: number) => {\\n\\t\\t\\t\\t\\t\\t\\tif (start === undefined) {\\n\\t\\t\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\treturn loadMoreDepartments(start, Math.min(50, departmentsTotal));\\n\\t\\t\\t\\t\\t  }\\n\\t\\t\\t}\\n\\t\\t\\trenderItem={({ label, ...props }) => (\\n\\t\\t\\t\\t<CheckOption\\n\\t\\t\\t\\t\\t{...props}\\n\\t\\t\\t\\t\\tlabel={<span style={{ whiteSpace: 'normal' }}>{label}</span>}\\n\\t\\t\\t\\t\\tselected={value.some((item) => item.value === props.value)}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(AutoCompleteDepartmentMultiple);\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"_objectSpread\",\"CheckOption\",\"PaginatedMultiSelectFiltered\",\"useDebouncedValue\",\"React\",\"memo\",\"useMemo\",\"useState\",\"useTranslation\",\"useRecordList\",\"AsyncStatePhase\",\"useDepartmentsList\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"value\",\"onlyMyDepartments\",\"showArchived\",\"enabled\",\"onChange\",\"undefined\",\"t\",\"departmentsFilter\",\"setDepartmentsFilter\",\"debouncedDepartmentsFilter\",\"itemsList\",\"departmentsList\",\"loadMoreItems\",\"loadMoreDepartments\",\"filter\",\"phase\",\"departmentsPhase\",\"items\",\"departmentsItems\",\"itemCount\",\"departmentsTotal\",\"departmentOptions\",\"pending\",\"_ref2\",\"find\",\"dep\",\"createElement\",\"withTitle\",\"setFilter\",\"options\",\"width\",\"flexShrink\",\"flexGrow\",\"placeholder\",\"endReached\",\"LOADING\",\"start\",\"Math\",\"min\",\"renderItem\",\"_ref3\",\"label\",\"props\",\"_excluded\",\"style\",\"whiteSpace\",\"selected\",\"some\",\"item\"],\"mappings\":\"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\"}"}