{"code":"function module(e,n,o){o.export({useFileUpload:function(){return r}}),o.link(\"react\",{useCallback:function(e){t=e},useEffect:function(e){l=e}},0),o.link(\"use-sync-external-store/shim\",{useSyncExternalStore:function(e){u=e}},1),o.link(\"../../contexts/ChatContext\",{useChat:function(e){a=e}},2),o.link(\"./useFileUploadDropTarget\",{useFileUploadDropTarget:function(e){i=e}},3);var t,l,u,a,i,r=function(){var e=a();if(!e)throw Error(\"No ChatContext provided\");return l(function(){e.uploads.wipeFailedOnes()},[e]),{uploads:u(e.uploads.subscribe,e.uploads.get),handleUploadProgressClose:t(function(n){e.uploads.cancel(n)},[e]),handleUploadFiles:t(function(n){e.flows.uploadFiles(n)},[e]),targeDrop:i()}}}","map":"{\"version\":3,\"sources\":[\"client/views/room/body/hooks/useFileUpload.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useCallback, useEffect } from 'react';\\nimport { useSyncExternalStore } from 'use-sync-external-store/shim';\\n\\nimport type { Upload } from '../../../../lib/chats/Upload';\\nimport { useChat } from '../../contexts/ChatContext';\\nimport { useFileUploadDropTarget } from './useFileUploadDropTarget';\\n\\nexport const useFileUpload = () => {\\n\\tconst chat = useChat();\\n\\tif (!chat) {\\n\\t\\tthrow new Error('No ChatContext provided');\\n\\t}\\n\\n\\tuseEffect(() => {\\n\\t\\tchat.uploads.wipeFailedOnes();\\n\\t}, [chat]);\\n\\n\\tconst uploads = useSyncExternalStore(chat.uploads.subscribe, chat.uploads.get);\\n\\n\\tconst handleUploadProgressClose = useCallback(\\n\\t\\t(id: Upload['id']) => {\\n\\t\\t\\tchat.uploads.cancel(id);\\n\\t\\t},\\n\\t\\t[chat],\\n\\t);\\n\\n\\tconst handleUploadFiles = useCallback(\\n\\t\\t(files: readonly File[]): void => {\\n\\t\\t\\tchat.flows.uploadFiles(files);\\n\\t\\t},\\n\\t\\t[chat],\\n\\t);\\n\\n\\treturn {\\n\\t\\tuploads,\\n\\t\\thandleUploadProgressClose,\\n\\t\\thandleUploadFiles,\\n\\t\\ttargeDrop: useFileUploadDropTarget(),\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"export\",\"useFileUpload\",\"link\",\"useCallback\",\"v\",\"useEffect\",\"useSyncExternalStore\",\"useChat\",\"useFileUploadDropTarget\",\"chat\",\"Error\",\"uploads\",\"wipeFailedOnes\",\"subscribe\",\"get\",\"handleUploadProgressClose\",\"id\",\"cancel\",\"handleUploadFiles\",\"files\",\"flows\",\"uploadFiles\",\"targeDrop\"],\"mappings\":\"uBAAAA,EAAOC,MAAE,CAAA,CAAAC,cAAa,WAAiB,OAAQA,CAAA,CAAA,GAAAF,EAAAG,IAAA,CAAA,QAAA,CAAAC,YAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,EAAAC,UAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,+BAAA,CAAAI,qBAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,6BAAA,CAAAK,QAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,4BAAA,CAAAM,wBAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAOxC,IAPwCD,EAAAE,EAAAC,EAAAC,EAAAC,EAOlCP,EAAgB,WAC5B,IAAMQ,EAAOF,IACb,GAAI,CAACE,EACJ,MAAM,AAAIC,MAAM,2BAuBjB,OApBAL,EAAU,WACTI,EAAKE,OAAO,CAACC,cAAc,EAC5B,EAAG,CAACH,EAAK,EAkBF,CACNE,QAjBeL,EAAqBG,EAAKE,OAAO,CAACE,SAAS,CAAEJ,EAAKE,OAAO,CAACG,GAAG,EAkB5EC,0BAhBiCZ,EACjC,SAACa,CAAgB,EAChBP,EAAKE,OAAO,CAACM,MAAM,CAACD,EACrB,EACA,CAACP,EAAK,EAaNS,kBAVyBf,EACzB,SAACgB,CAAsB,EACtBV,EAAKW,KAAK,CAACC,WAAW,CAACF,EACxB,EACA,CAACV,EAAK,EAONa,UAAWd,IAEb\"}"}