{"code":"function module(e,t,l){let n,i,o,a,r,u,c,s,k,m,d,p,x,C,b,E,v,h,f,w,y,g,B,I,S,U;l.link(\"@babel/runtime/helpers/extends\",{default(e){n=e}},0),l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){i=e}},1),l.link(\"@rocket.chat/fuselage\",{Avatar(e){o=e},Box(e){a=e},Button(e){r=e},ButtonGroup(e){u=e},ContextualbarFooter(e){c=e},ContextualbarHeader(e){s=e},ContextualbarTitle(e){k=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useEffectEvent(e){m=e}},1),l.link(\"@rocket.chat/fuselage-ui-kit\",{UiKitComponent(e){d=e},UiKitContextualBar(e){p=e},contextualBarParser(e){x=e},UiKitContext(e){C=e}},2),l.link(\"@rocket.chat/ui-kit\",{BlockContext(e){b=e}},3),l.link(\"react\",{default(e){E=e},memo(e){v=e}},4),l.link(\"../../../../../app/utils/client\",{getURL(e){h=e}},5),l.link(\"../../../../components/Contextualbar\",{ContextualbarClose(e){f=e},ContextualbarScrollableContent(e){w=e}},6),l.link(\"../../../../lib/utils/preventSyntheticEvent\",{preventSyntheticEvent(e){y=e}},7),l.link(\"../../../../uikit/hooks/useContextualBarContextValue\",{useContextualBarContextValue(e){g=e}},8),l.link(\"../../../../uikit/hooks/useUiKitActionManager\",{useUiKitActionManager(e){B=e}},9),l.link(\"../../../../uikit/hooks/useUiKitView\",{useUiKitView(e){I=e}},10),l.link(\"../../../modal/uikit/getButtonStyle\",{getButtonStyle(e){S=e}},11),l.link(\"../../contexts/RoomToolboxContext\",{useRoomToolbox(e){U=e}},12),l.exportDefault(v(e=>{let{initialView:t}=e,l=B(),{view:v,values:K,updateValues:N,state:V}=I(t),A=g({view:v,values:K,updateValues:N}),{closeTab:O}=U(),R=m(e=>{y(e),O(),l.emitInteraction(v.appId,{type:\"viewSubmit\",payload:{view:i(i({},v),{},{state:V})},viewId:v.id})}),T=m(e=>{y(e),O(),l.emitInteraction(v.appId,{type:\"viewClosed\",payload:{viewId:v.id,view:i(i({},v),{},{state:V}),isCleared:!1}})}),M=m(e=>{y(e),O(),l.emitInteraction(v.appId,{type:\"viewClosed\",payload:{viewId:v.id,view:i(i({},v),{},{state:V}),isCleared:!0}})});return E.createElement(C.Provider,{value:A},E.createElement(s,null,E.createElement(o,{url:h(\"/api/apps/\".concat(v.appId,\"/icon\"))}),E.createElement(k,null,x.text(v.title,b.NONE,0)),M&&E.createElement(f,{onClick:M})),E.createElement(w,null,E.createElement(a,{is:\"form\",method:\"post\",action:\"#\",onSubmit:R},E.createElement(d,{render:p,blocks:v.blocks}))),E.createElement(c,null,E.createElement(u,{stretch:!0},v.close&&E.createElement(r,{danger:\"danger\"===v.close.style,onClick:T},x.text(v.close.text,b.NONE,0)),v.submit&&E.createElement(r,n({},S(v.submit),{onClick:R}),x.text(v.submit.text,b.NONE,1)))))}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/uikit/UiKitContextualBar.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Avatar, Box, Button, ButtonGroup, ContextualbarFooter, ContextualbarHeader, ContextualbarTitle } from '@rocket.chat/fuselage';\\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\\nimport {\\n\\tUiKitComponent,\\n\\tUiKitContextualBar as UiKitContextualBarSurfaceRender,\\n\\tcontextualBarParser,\\n\\tUiKitContext,\\n} from '@rocket.chat/fuselage-ui-kit';\\nimport type * as UiKit from '@rocket.chat/ui-kit';\\nimport { BlockContext } from '@rocket.chat/ui-kit';\\nimport type { FormEvent, UIEvent } from 'react';\\nimport React, { memo } from 'react';\\n\\nimport { getURL } from '../../../../../app/utils/client';\\nimport { ContextualbarClose, ContextualbarScrollableContent } from '../../../../components/Contextualbar';\\nimport { preventSyntheticEvent } from '../../../../lib/utils/preventSyntheticEvent';\\nimport { useContextualBarContextValue } from '../../../../uikit/hooks/useContextualBarContextValue';\\nimport { useUiKitActionManager } from '../../../../uikit/hooks/useUiKitActionManager';\\nimport { useUiKitView } from '../../../../uikit/hooks/useUiKitView';\\nimport { getButtonStyle } from '../../../modal/uikit/getButtonStyle';\\nimport { useRoomToolbox } from '../../contexts/RoomToolboxContext';\\n\\ntype UiKitContextualBarProps = {\\n\\tkey: UiKit.ContextualBarView['id']; // force re-mount when viewId changes\\n\\tinitialView: UiKit.ContextualBarView;\\n};\\n\\nconst UiKitContextualBar = ({ initialView }: UiKitContextualBarProps): JSX.Element => {\\n\\tconst actionManager = useUiKitActionManager();\\n\\tconst { view, values, updateValues, state } = useUiKitView(initialView);\\n\\tconst contextValue = useContextualBarContextValue({ view, values, updateValues });\\n\\n\\tconst { closeTab } = useRoomToolbox();\\n\\n\\tconst handleSubmit = useEffectEvent((e: FormEvent) => {\\n\\t\\tpreventSyntheticEvent(e);\\n\\t\\tcloseTab();\\n\\t\\tvoid actionManager.emitInteraction(view.appId, {\\n\\t\\t\\ttype: 'viewSubmit',\\n\\t\\t\\tpayload: {\\n\\t\\t\\t\\tview: {\\n\\t\\t\\t\\t\\t...view,\\n\\t\\t\\t\\t\\tstate,\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t\\tviewId: view.id,\\n\\t\\t});\\n\\t});\\n\\n\\tconst handleCancel = useEffectEvent((e: UIEvent) => {\\n\\t\\tpreventSyntheticEvent(e);\\n\\t\\tcloseTab();\\n\\t\\tvoid actionManager.emitInteraction(view.appId, {\\n\\t\\t\\ttype: 'viewClosed',\\n\\t\\t\\tpayload: {\\n\\t\\t\\t\\tviewId: view.id,\\n\\t\\t\\t\\tview: {\\n\\t\\t\\t\\t\\t...view,\\n\\t\\t\\t\\t\\tstate,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tisCleared: false,\\n\\t\\t\\t},\\n\\t\\t});\\n\\t});\\n\\n\\tconst handleClose = useEffectEvent((e: UIEvent) => {\\n\\t\\tpreventSyntheticEvent(e);\\n\\t\\tcloseTab();\\n\\t\\tvoid actionManager.emitInteraction(view.appId, {\\n\\t\\t\\ttype: 'viewClosed',\\n\\t\\t\\tpayload: {\\n\\t\\t\\t\\tviewId: view.id,\\n\\t\\t\\t\\tview: {\\n\\t\\t\\t\\t\\t...view,\\n\\t\\t\\t\\t\\tstate,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tisCleared: true,\\n\\t\\t\\t},\\n\\t\\t});\\n\\t});\\n\\n\\treturn (\\n\\t\\t<UiKitContext.Provider value={contextValue}>\\n\\t\\t\\t<ContextualbarHeader>\\n\\t\\t\\t\\t<Avatar url={getURL(`/api/apps/${view.appId}/icon`)} />\\n\\t\\t\\t\\t<ContextualbarTitle>{contextualBarParser.text(view.title, BlockContext.NONE, 0)}</ContextualbarTitle>\\n\\t\\t\\t\\t{handleClose && <ContextualbarClose onClick={handleClose} />}\\n\\t\\t\\t</ContextualbarHeader>\\n\\t\\t\\t<ContextualbarScrollableContent>\\n\\t\\t\\t\\t<Box is='form' method='post' action='#' onSubmit={handleSubmit}>\\n\\t\\t\\t\\t\\t<UiKitComponent render={UiKitContextualBarSurfaceRender} blocks={view.blocks} />\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</ContextualbarScrollableContent>\\n\\t\\t\\t<ContextualbarFooter>\\n\\t\\t\\t\\t<ButtonGroup stretch>\\n\\t\\t\\t\\t\\t{view.close && (\\n\\t\\t\\t\\t\\t\\t<Button danger={view.close.style === 'danger'} onClick={handleCancel}>\\n\\t\\t\\t\\t\\t\\t\\t{contextualBarParser.text(view.close.text, BlockContext.NONE, 0)}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t)}\\n\\n\\t\\t\\t\\t\\t{view.submit && (\\n\\t\\t\\t\\t\\t\\t<Button {...getButtonStyle(view.submit)} onClick={handleSubmit}>\\n\\t\\t\\t\\t\\t\\t\\t{contextualBarParser.text(view.submit.text, BlockContext.NONE, 1)}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</ContextualbarFooter>\\n\\t\\t</UiKitContext.Provider>\\n\\t);\\n};\\n\\nexport default memo(UiKitContextualBar);\\n\",null],\"names\":[\"_extends\",\"_objectSpread\",\"Avatar\",\"Box\",\"Button\",\"ButtonGroup\",\"ContextualbarFooter\",\"ContextualbarHeader\",\"ContextualbarTitle\",\"useEffectEvent\",\"UiKitComponent\",\"UiKitContextualBarSurfaceRender\",\"contextualBarParser\",\"UiKitContext\",\"BlockContext\",\"React\",\"memo\",\"getURL\",\"ContextualbarClose\",\"ContextualbarScrollableContent\",\"preventSyntheticEvent\",\"useContextualBarContextValue\",\"useUiKitActionManager\",\"useUiKitView\",\"getButtonStyle\",\"useRoomToolbox\",\"module\",\"link\",\"default\",\"v\",\"UiKitContextualBar\",\"exportDefault\",\"_ref\",\"initialView\",\"actionManager\",\"view\",\"values\",\"updateValues\",\"state\",\"contextValue\",\"closeTab\",\"handleSubmit\",\"e\",\"emitInteraction\",\"appId\",\"type\",\"payload\",\"viewId\",\"id\",\"handleCancel\",\"isCleared\",\"handleClose\",\"createElement\",\"Provider\",\"value\",\"url\",\"concat\",\"text\",\"title\",\"NONE\",\"onClick\",\"is\",\"method\",\"action\",\"onSubmit\",\"render\",\"blocks\",\"stretch\",\"close\",\"danger\",\"style\",\"submit\"],\"mappings\":\"2BAAAA,EAAqFC,EAArFC,EAASC,EAAMC,EAAOC,EAAQC,EAAaC,EAAqBC,EAAuEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9HC,EAAWC,IAAE,CAAA,iCAAqB,CAAAC,QAAqBC,CAAA,EAAA7B,EAAA6B,CAAA,CAAA,EAAmB,GAAoBH,EAAQC,IAAA,CAAA,uCAAwB,CAAAC,QAAAC,CAAA,EAAA5B,EAAA4B,CAAA,CAAA,EAAA,GAAlDH,EAAAC,IAAkB,CAAE,wBAAM,CAAAzB,OAAwB2B,CAAA,EAAA3B,EAAA2B,CAAA,EAAA1B,IAAA0B,CAAA,EAAA1B,EAAA0B,CAAA,EAAAzB,OAAAyB,CAAA,EAAAzB,EAAAyB,CAAA,EAAAxB,YAAAwB,CAAA,EAAAxB,EAAAwB,CAAA,EAAAvB,oBAAAuB,CAAA,EAAAvB,EAAAuB,CAAA,EAAAtB,oBAAAsB,CAAA,EAAAtB,EAAAsB,CAAA,EAAArB,mBAAAqB,CAAA,EAAArB,EAAAqB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAlB,eAAAoB,CAAA,EAAApB,EAAAoB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,+BAAA,CAAAjB,eAAAmB,CAAA,EAAAnB,EAAAmB,CAAA,EAAAC,mBAAAD,CAAA,EAAAlB,EAAAkB,CAAA,EAAAjB,oBAAAiB,CAAA,EAAAjB,EAAAiB,CAAA,EAAAhB,aAAAgB,CAAA,EAAAhB,EAAAgB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sBAAA,CAAAb,aAAAe,CAAA,EAAAf,EAAAe,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAd,EAAAc,CAAA,EAAAb,KAAAa,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kCAAA,CAAAV,OAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAT,mBAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,+BAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8CAAA,CAAAP,sBAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uDAAA,CAAAN,6BAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gDAAA,CAAAL,sBAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAJ,aAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,IAAAH,EAAAC,IAAA,CAAA,sCAAA,CAAAH,eAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,IAAAH,EAAAC,IAAA,CAAA,oCAAA,CAAAF,eAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,IAAvIH,EAAOK,aAAa,CAgHLf,EArFYgB,IAA0D,GAAzD,CAAEC,YAAAA,CAAAA,CAAsC,CAAAD,EAC7DE,EAAgBZ,IAChB,CAAEa,KAAAA,CAAI,CAAEC,OAAAA,CAAM,CAAEC,aAAAA,CAAY,CAAEC,MAAAA,CAAAA,CAAO,CAAGf,EAAaU,GACrDM,EAAelB,EAA6B,CAAEc,KAAAA,EAAMC,OAAAA,EAAQC,aAAAA,CAAY,GAExE,CAAEG,SAAAA,CAAAA,CAAU,CAAGf,IAEfgB,EAAehC,EAAgBiC,IACpCtB,EAAsBsB,GACtBF,IACKN,EAAcS,eAAe,CAACR,EAAKS,KAAK,CAAE,CAC9CC,KAAM,aACNC,QAAS,CACRX,KAAIlC,EAAAA,EAAA,CAAA,EACAkC,GAAI,CAAA,EAAA,CACPG,MAAAA,CAAK,IAGPS,OAAQZ,EAAKa,EAAAA,EAEf,GAEMC,EAAexC,EAAgBiC,IACpCtB,EAAsBsB,GACtBF,IACKN,EAAcS,eAAe,CAACR,EAAKS,KAAK,CAAE,CAC9CC,KAAM,aACNC,QAAS,CACRC,OAAQZ,EAAKa,EAAE,CACfb,KAAIlC,EAAAA,EAAA,CAAA,EACAkC,GAAI,CAAA,EAAA,CACPG,MAAAA,CAAK,GAENY,UAAW,CAAA,IAGd,GAEMC,EAAc1C,EAAgBiC,IACnCtB,EAAsBsB,GACtBF,IACKN,EAAcS,eAAe,CAACR,EAAKS,KAAK,CAAE,CAC9CC,KAAM,aACNC,QAAS,CACRC,OAAQZ,EAAKa,EAAE,CACfb,KAAIlC,EAAAA,EAAA,CAAA,EACAkC,GAAI,CAAA,EAAA,CACPG,MAAAA,CAAK,GAENY,UAAW,CAAA,IAGd,GAEA,OACCnC,EAAAqC,aAAA,CAACvC,EAAawC,QAAQ,CAAA,CAACC,MAAOf,CAAa,EAC1CxB,EAAAqC,aAAA,CAAC7C,EAAmB,KACnBQ,EAAAqC,aAAA,CAAClD,EAAM,CAACqD,IAAKtC,EAAM,aAAAuC,MAAA,CAAcrB,EAAKS,KAAK,CAAA,SAAS,GACpD7B,EAAAqC,aAAA,CAAC5C,EAAkB,KAAEI,EAAoB6C,IAAI,CAACtB,EAAKuB,KAAK,CAAE5C,EAAa6C,IAAI,CAAE,IAC5ER,GAAepC,EAAAqC,aAAA,CAAClC,EAAkB,CAAC0C,QAAST,CAAY,IAE1DpC,EAAAqC,aAAA,CAACjC,EAA8B,KAC9BJ,EAAAqC,aAAA,CAACjD,EAAG,CAAC0D,GAAG,OAAOC,OAAO,OAAOC,OAAO,IAAIC,SAAUvB,CAAa,EAC9D1B,EAAAqC,aAAA,CAAC1C,EAAc,CAACuD,OAAQtD,EAAiCuD,OAAQ/B,EAAK+B,MAAAA,AAAO,KAG/EnD,EAAAqC,aAAA,CAAC9C,EAAmB,KACnBS,EAAAqC,aAAA,CAAC/C,EAAW,CAAC8D,QAAO,CAAA,CAAA,EAClBhC,EAAKiC,KAAK,EACVrD,EAAAqC,aAAA,CAAChD,EAAM,CAACiE,OAAQlC,AAAqB,WAArBA,EAAKiC,KAAK,CAACE,KAAK,CAAeV,QAASX,CAAa,EACnErC,EAAoB6C,IAAI,CAACtB,EAAKiC,KAAK,CAACX,IAAI,CAAE3C,EAAa6C,IAAI,CAAE,IAI/DxB,EAAKoC,MAAM,EACXxD,EAAAqC,aAAA,CAAChD,EAAMJ,EAAA,CAAA,EAAKwB,EAAeW,EAAKoC,MAAM,EAAC,CAAEX,QAASnB,CAAa,GAC7D7B,EAAoB6C,IAAI,CAACtB,EAAKoC,MAAM,CAACd,IAAI,CAAE3C,EAAa6C,IAAI,CAAE,MAOtE\"}"}