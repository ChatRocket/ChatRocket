{"code":"function module(e,t,s){let i,a,l,r,n,o,u;s.export({useThreadsList:()=>c}),s.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){i=e}},0),s.link(\"react\",{useCallback(e){a=e},useMemo(e){l=e}},1),s.link(\"../../../../../hooks/lists/useScrollableMessageList\",{useScrollableMessageList(e){r=e}},2),s.link(\"../../../../../hooks/lists/useStreamUpdatesForMessageList\",{useStreamUpdatesForMessageList(e){n=e}},3),s.link(\"../../../../../lib/lists/ThreadsList\",{ThreadsList(e){o=e}},4),s.link(\"../../../../../lib/utils/getConfig\",{getConfig(e){u=e}},5);let c=(e,t)=>{let s=l(()=>new o(e),[e]),c=i(\"GET\",\"/v1/chat.getThreadsList\"),d=a(async(t,s)=>{let{threads:i,total:a}=await c({rid:e.rid,type:e.type,text:e.text,offset:t,count:s});return{items:i,itemCount:a}},[c,e.rid,e.text,e.type]),{loadMoreItems:k,initialItemCount:g}=r(s,d,l(()=>parseInt(\"\".concat(u(\"threadsListSize\",10))),[]));return n(s,t,e.rid),{threadsList:s,loadMoreItems:k,initialItemCount:g}}}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/Threads/hooks/useThreadsList.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useMemo } from 'react';\\n\\nimport { useScrollableMessageList } from '../../../../../hooks/lists/useScrollableMessageList';\\nimport { useStreamUpdatesForMessageList } from '../../../../../hooks/lists/useStreamUpdatesForMessageList';\\nimport type { ThreadsListOptions } from '../../../../../lib/lists/ThreadsList';\\nimport { ThreadsList } from '../../../../../lib/lists/ThreadsList';\\nimport { getConfig } from '../../../../../lib/utils/getConfig';\\n\\nexport const useThreadsList = (\\n\\toptions: ThreadsListOptions,\\n\\tuid: IUser['_id'] | null,\\n): {\\n\\tthreadsList: ThreadsList;\\n\\tinitialItemCount: number;\\n\\tloadMoreItems: (start: number, end: number) => void;\\n} => {\\n\\tconst threadsList = useMemo(() => new ThreadsList(options), [options]);\\n\\n\\tconst getThreadsList = useEndpoint('GET', '/v1/chat.getThreadsList');\\n\\n\\tconst fetchMessages = useCallback(\\n\\t\\tasync (start, end) => {\\n\\t\\t\\tconst { threads, total } = await getThreadsList({\\n\\t\\t\\t\\trid: options.rid,\\n\\t\\t\\t\\ttype: options.type,\\n\\t\\t\\t\\ttext: options.text,\\n\\t\\t\\t\\toffset: start,\\n\\t\\t\\t\\tcount: end,\\n\\t\\t\\t});\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\titems: threads,\\n\\t\\t\\t\\titemCount: total,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t[getThreadsList, options.rid, options.text, options.type],\\n\\t);\\n\\n\\tconst { loadMoreItems, initialItemCount } = useScrollableMessageList(\\n\\t\\tthreadsList,\\n\\t\\tfetchMessages,\\n\\t\\tuseMemo(() => parseInt(`${getConfig('threadsListSize', 10)}`), []),\\n\\t);\\n\\tuseStreamUpdatesForMessageList(threadsList, uid, options.rid);\\n\\n\\treturn {\\n\\t\\tthreadsList,\\n\\t\\tloadMoreItems,\\n\\t\\tinitialItemCount,\\n\\t};\\n};\\n\",null],\"names\":[\"useEndpoint\",\"useCallback\",\"useMemo\",\"useScrollableMessageList\",\"useStreamUpdatesForMessageList\",\"ThreadsList\",\"getConfig\",\"module\",\"export\",\"useThreadsList\",\"link\",\"v\",\"options\",\"uid\",\"threadsList\",\"getThreadsList\",\"fetchMessages\",\"start\",\"end\",\"threads\",\"total\",\"rid\",\"type\",\"text\",\"offset\",\"count\",\"items\",\"itemCount\",\"loadMoreItems\",\"initialItemCount\",\"parseInt\",\"concat\"],\"mappings\":\"2BACuDA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAvDC,EAAOC,MAAE,CAAA,CAAAC,eAAmBA,IAAAA,CAAA,GAA2BF,EAAAG,IAAA,CAAA,2BAAA,CAAAV,YAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAT,YAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,QAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,sDAAA,CAAAP,yBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,4DAAA,CAAAN,+BAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,uCAAA,CAAAL,YAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,qCAAA,CAAAJ,UAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAShD,IAAMF,EAAiBA,CAC7BG,EACAC,KAMA,IAAMC,EAAcZ,EAAQ,IAAM,IAAIG,EAAYO,GAAU,CAACA,EAAQ,EAE/DG,EAAiBf,EAAY,MAAO,2BAEpCgB,EAAgBf,EACrB,MAAOgB,EAAOC,KACb,GAAM,CAAEC,QAAAA,CAAO,CAAEC,MAAAA,CAAAA,CAAO,CAAG,MAAML,EAAe,CAC/CM,IAAKT,EAAQS,GAAG,CAChBC,KAAMV,EAAQU,IAAI,CAClBC,KAAMX,EAAQW,IAAI,CAClBC,OAAQP,EACRQ,MAAOP,IAGR,MAAO,CACNQ,MAAOP,EACPQ,UAAWP,EAEb,EACA,CAACL,EAAgBH,EAAQS,GAAG,CAAET,EAAQW,IAAI,CAAEX,EAAQU,IAAI,CAAC,EAGpD,CAAEM,cAAAA,CAAa,CAAEC,iBAAAA,CAAAA,CAAkB,CAAG1B,EAC3CW,EACAE,EACAd,EAAQ,IAAM4B,SAAQ,GAAAC,MAAA,CAAIzB,EAAU,kBAAmB,MAAQ,EAAE,GAIlE,OAFAF,EAA+BU,EAAaD,EAAKD,EAAQS,GAAG,EAErD,CACNP,YAAAA,EACAc,cAAAA,EACAC,iBAAAA,EAEF\"}"}