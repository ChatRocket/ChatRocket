{"code":"function module(n,e,o){var i,t,u,a,c,r,s,l;function m(n,e){var o=t(),m=c(),f=a(),d=u(\"notify-user\"),v=s().t,h=l().navigateHome;r(function(){if(e)return d(e+\"/subscriptions-changed\",function(e,t){if(\"removed\"===e&&t.rid===n._id){if(m.invalidateQueries([\"rooms\",n._id]),i({t:n.t})){h();return}f({type:\"info\",message:v(\"You_have_been_removed_from__roomName_\",{roomName:(null==n?void 0:n.fname)||(null==n?void 0:n.name)||\"\"})}),o.navigate(\"/home\")}})},[e,o,d,n._id,n.t,null==n?void 0:n.fname,null==n?void 0:n.name,v,f,m,h])}o.export({useGoToHomeOnRemoved:function(){return m}}),o.link(\"@rocket.chat/core-typings\",{isOmnichannelRoom:function(n){i=n}},0),o.link(\"@rocket.chat/ui-contexts\",{useRouter:function(n){t=n},useStream:function(n){u=n},useToastMessageDispatch:function(n){a=n}},1),o.link(\"@tanstack/react-query\",{useQueryClient:function(n){c=n}},2),o.link(\"react\",{useEffect:function(n){r=n}},3),o.link(\"react-i18next\",{useTranslation:function(n){s=n}},4),o.link(\"../../../../hooks/omnichannel/useOmnichannelCloseRoute\",{useOmnichannelCloseRoute:function(n){l=n}},5)}","map":"{\"version\":3,\"sources\":[\"client/views/room/body/hooks/useGoToHomeOnRemoved.ts\",\"<anon>\"],\"sourcesContent\":[\"import { isOmnichannelRoom, type IRoom } from '@rocket.chat/core-typings';\\nimport { useRouter, useStream, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport { useQueryClient } from '@tanstack/react-query';\\nimport { useEffect } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useOmnichannelCloseRoute } from '../../../../hooks/omnichannel/useOmnichannelCloseRoute';\\n\\nexport function useGoToHomeOnRemoved(room: IRoom, userId?: string): void {\\n\\tconst router = useRouter();\\n\\tconst queryClient = useQueryClient();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst subscribeToNotifyUser = useStream('notify-user');\\n\\tconst { t } = useTranslation();\\n\\tconst { navigateHome } = useOmnichannelCloseRoute();\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!userId) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\treturn subscribeToNotifyUser(`${userId}/subscriptions-changed`, (event, subscription) => {\\n\\t\\t\\tif (event === 'removed' && subscription.rid === room._id) {\\n\\t\\t\\t\\tqueryClient.invalidateQueries(['rooms', room._id]);\\n\\n\\t\\t\\t\\tif (isOmnichannelRoom({ t: room.t })) {\\n\\t\\t\\t\\t\\tnavigateHome();\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\ttype: 'info',\\n\\t\\t\\t\\t\\tmessage: t('You_have_been_removed_from__roomName_', {\\n\\t\\t\\t\\t\\t\\troomName: room?.fname || room?.name || '',\\n\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\trouter.navigate('/home');\\n\\t\\t\\t}\\n\\t\\t});\\n\\t}, [\\n\\t\\tuserId,\\n\\t\\trouter,\\n\\t\\tsubscribeToNotifyUser,\\n\\t\\troom._id,\\n\\t\\troom.t,\\n\\t\\troom?.fname,\\n\\t\\troom?.name,\\n\\t\\tt,\\n\\t\\tdispatchToastMessage,\\n\\t\\tqueryClient,\\n\\t\\tnavigateHome,\\n\\t]);\\n}\\n\",null],\"names\":[\"isOmnichannelRoom\",\"useRouter\",\"useStream\",\"useToastMessageDispatch\",\"useQueryClient\",\"useEffect\",\"useTranslation\",\"useOmnichannelCloseRoute\",\"useGoToHomeOnRemoved\",\"room\",\"userId\",\"router\",\"queryClient\",\"dispatchToastMessage\",\"subscribeToNotifyUser\",\"t\",\"_useTranslation\",\"navigateHome\",\"_useOmnichannelCloseR\",\"event\",\"subscription\",\"rid\",\"_id\",\"invalidateQueries\",\"type\",\"message\",\"roomName\",\"fname\",\"name\",\"navigate\",\"module\",\"export\",\"link\",\"v\"],\"mappings\":\"2BAA0EA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAQpE,SAAUC,EAAqBC,CAAW,CAAEC,CAAe,EAChE,IAAMC,EAASV,IACTW,EAAcR,IACdS,EAAuBV,IACvBW,EAAwBZ,EAAU,eAChCa,EAACC,AAAKV,IAANS,CAAC,CACDE,EAAYC,AAAKX,IAAjBU,YAAY,CAEpBZ,EAAU,WACT,GAAKK,EAIL,OAAOI,EAAyBJ,EAAM,yBAA0B,SAACS,CAAK,CAAEC,CAAY,EACnF,GAAID,AAAU,YAAVA,GAAuBC,EAAaC,GAAG,GAAKZ,EAAKa,GAAG,CAAE,CAGzD,GAFAV,EAAYW,iBAAiB,CAAC,CAAC,QAASd,EAAKa,GAAG,CAAC,EAE7CtB,EAAkB,CAAEe,EAAGN,EAAKM,CAAAA,AAAC,GAAK,CACrCE,IACA,MACD,CAEAJ,EAAqB,CACpBW,KAAM,OACNC,QAASV,EAAE,wCAAyC,CACnDW,SAAU,AAAAjB,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMkB,KAAK,AAALA,GAASlB,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMmB,IAAI,AAAJA,GAAQ,OAIzCjB,EAAOkB,QAAQ,CAAC,QACjB,CACD,EACD,EAAG,CACFnB,EACAC,EACAG,EACAL,EAAKa,GAAG,CACRb,EAAKM,CAAC,CACNN,MAAAA,EAAI,KAAA,EAAJA,EAAMkB,KAAK,CACXlB,MAAAA,EAAI,KAAA,EAAJA,EAAMmB,IAAI,CACVb,EACAF,EACAD,EACAK,EACA,CACF,CArDAa,EAAOC,MAAE,CAAA,CAAAvB,qBAAqC,WAAA,OAAAA,CAA4B,CAAA,GAAAsB,EAAAE,IAAA,CAAA,4BAAA,CAAAhC,kBAAA,SAAAiC,CAAA,EAAAjC,EAAAiC,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,2BAAA,CAAA/B,UAAA,SAAAgC,CAAA,EAAAhC,EAAAgC,CAAA,EAAA/B,UAAA,SAAA+B,CAAA,EAAA/B,EAAA+B,CAAA,EAAA9B,wBAAA,SAAA8B,CAAA,EAAA9B,EAAA8B,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,wBAAA,CAAA5B,eAAA,SAAA6B,CAAA,EAAA7B,EAAA6B,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,QAAA,CAAA3B,UAAA,SAAA4B,CAAA,EAAA5B,EAAA4B,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,gBAAA,CAAA1B,eAAA,SAAA2B,CAAA,EAAA3B,EAAA2B,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,yDAAA,CAAAzB,yBAAA,SAAA0B,CAAA,EAAA1B,EAAA0B,CAAA,CAAA,EAAA\"}"}