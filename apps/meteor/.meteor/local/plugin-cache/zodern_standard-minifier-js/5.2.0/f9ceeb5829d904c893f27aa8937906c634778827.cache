{"code":"function module(e,t,n){let a,l,r,s,c,o,u,i,m,k,g,d,p,h,E,b,P,T,f,y,C,G,x;let S=[\"current\",\"itemsPerPage\",\"setItemsPerPage\",\"setCurrent\"];n.link(\"@babel/runtime/helpers/extends\",{default(e){a=e}},0),n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){l=e}},1),n.link(\"@rocket.chat/fuselage\",{Pagination(e){r=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue(e){s=e}},1),n.link(\"@rocket.chat/string-helpers\",{escapeRegExp(e){c=e}},2),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){o=e},useToastMessageDispatch(e){u=e}},3),n.link(\"@tanstack/react-query\",{useQuery(e){i=e}},4),n.link(\"react\",{default(e){m=e},useState(e){k=e},useMemo(e){g=e},useEffect(e){d=e}},5),n.link(\"react-i18next\",{useTranslation(e){p=e}},6),n.link(\"../../../../components/FilterByText\",{default(e){h=e}},7),n.link(\"../../../../components/GenericNoResults\",{default(e){E=e}},8),n.link(\"../../../../components/GenericTable\",{GenericTable(e){b=e},GenericTableHeader(e){P=e},GenericTableHeaderCell(e){T=e},GenericTableBody(e){f=e},GenericTableLoadingTable(e){y=e}},9),n.link(\"../../../../components/GenericTable/hooks/usePagination\",{usePagination(e){C=e}},10),n.link(\"../../../../components/GenericTable/hooks/useSort\",{useSort(e){G=e}},11),n.link(\"./CustomUserStatusRow\",{default(e){x=e}},12),n.exportDefault(e=>{let{reload:t,onClick:n}=e,{t:v}=p(),[D,F]=k(\"\"),I=C(),{current:R,itemsPerPage:w,setItemsPerPage:B,setCurrent:H}=I,M=l(I,S),{sortBy:N,sortDirection:j,setSort:q}=G(\"name\"),L=s(g(()=>({name:c(D),sort:'{ \"'.concat(N,'\": ').concat(\"asc\"===j?1:-1,\" }\"),count:w,offset:R}),[D,w,R,N,j]),500),Q=o(\"GET\",\"/v1/custom-user-status.list\"),U=u(),{data:V,isLoading:W,refetch:_,isFetched:z}=i([\"custom-user-statuses\",L],async()=>{let{statuses:e}=await Q(L);return e},{onError:e=>{U({type:\"error\",message:e})}});return(d(()=>{t.current=_},[t,_]),V)?m.createElement(m.Fragment,null,m.createElement(h,{onChange:F}),0===V.length&&m.createElement(E,null),V&&V.length>0&&m.createElement(m.Fragment,null,m.createElement(b,null,m.createElement(P,null,m.createElement(T,{key:\"name\",direction:j,active:\"name\"===N,onClick:q,sort:\"name\"},v(\"Name\")),m.createElement(T,{key:\"presence\",direction:j,active:\"statusType\"===N,onClick:q,sort:\"statusType\"},v(\"Presence\"))),m.createElement(f,null,W&&m.createElement(y,{headerCells:2}),null==V?void 0:V.map(e=>m.createElement(x,{key:e._id,status:e,onClick:n})))),z&&m.createElement(r,a({current:R,itemsPerPage:w,count:V.length,onSetItemsPerPage:B,onSetCurrent:H},M)))):null})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/customUserStatus/CustomUserStatusTable/CustomUserStatusTable.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Pagination } from '@rocket.chat/fuselage';\\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\\nimport { useEndpoint, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ReactElement, MutableRefObject } from 'react';\\nimport React, { useState, useMemo, useEffect } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport FilterByText from '../../../../components/FilterByText';\\nimport GenericNoResult from '../../../../components/GenericNoResults';\\nimport {\\n\\tGenericTable,\\n\\tGenericTableHeader,\\n\\tGenericTableHeaderCell,\\n\\tGenericTableBody,\\n\\tGenericTableLoadingTable,\\n} from '../../../../components/GenericTable';\\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\\nimport CustomUserStatusRow from './CustomUserStatusRow';\\n\\ntype CustomUserStatusProps = {\\n\\treload: MutableRefObject<() => void>;\\n\\tonClick: (id: string) => void;\\n};\\n\\n// TODO: Missing error state\\nconst CustomUserStatus = ({ reload, onClick }: CustomUserStatusProps): ReactElement | null => {\\n\\tconst { t } = useTranslation();\\n\\tconst [text, setText] = useState('');\\n\\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = usePagination();\\n\\tconst { sortBy, sortDirection, setSort } = useSort<'name' | 'statusType'>('name');\\n\\n\\tconst query = useDebouncedValue(\\n\\t\\tuseMemo(\\n\\t\\t\\t() => ({\\n\\t\\t\\t\\tname: escapeRegExp(text),\\n\\t\\t\\t\\tsort: `{ \\\"${sortBy}\\\": ${sortDirection === 'asc' ? 1 : -1} }`,\\n\\t\\t\\t\\tcount: itemsPerPage,\\n\\t\\t\\t\\toffset: current,\\n\\t\\t\\t}),\\n\\t\\t\\t[text, itemsPerPage, current, sortBy, sortDirection],\\n\\t\\t),\\n\\t\\t500,\\n\\t);\\n\\n\\tconst getCustomUserStatus = useEndpoint('GET', '/v1/custom-user-status.list');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst { data, isLoading, refetch, isFetched } = useQuery(\\n\\t\\t['custom-user-statuses', query],\\n\\t\\tasync () => {\\n\\t\\t\\tconst { statuses } = await getCustomUserStatus(query);\\n\\t\\t\\treturn statuses;\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tonError: (error) => {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n\\n\\tuseEffect(() => {\\n\\t\\treload.current = refetch;\\n\\t}, [reload, refetch]);\\n\\n\\tif (!data) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<FilterByText onChange={setText} />\\n\\t\\t\\t{data.length === 0 && <GenericNoResult />}\\n\\t\\t\\t{data && data.length > 0 && (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<GenericTable>\\n\\t\\t\\t\\t\\t\\t<GenericTableHeader>\\n\\t\\t\\t\\t\\t\\t\\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name'>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Name')}\\n\\t\\t\\t\\t\\t\\t\\t</GenericTableHeaderCell>\\n\\t\\t\\t\\t\\t\\t\\t<GenericTableHeaderCell\\n\\t\\t\\t\\t\\t\\t\\t\\tkey='presence'\\n\\t\\t\\t\\t\\t\\t\\t\\tdirection={sortDirection}\\n\\t\\t\\t\\t\\t\\t\\t\\tactive={sortBy === 'statusType'}\\n\\t\\t\\t\\t\\t\\t\\t\\tonClick={setSort}\\n\\t\\t\\t\\t\\t\\t\\t\\tsort='statusType'\\n\\t\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Presence')}\\n\\t\\t\\t\\t\\t\\t\\t</GenericTableHeaderCell>\\n\\t\\t\\t\\t\\t\\t</GenericTableHeader>\\n\\t\\t\\t\\t\\t\\t<GenericTableBody>\\n\\t\\t\\t\\t\\t\\t\\t{isLoading && <GenericTableLoadingTable headerCells={2} />}\\n\\t\\t\\t\\t\\t\\t\\t{data?.map((status) => (\\n\\t\\t\\t\\t\\t\\t\\t\\t<CustomUserStatusRow key={status._id} status={status} onClick={onClick} />\\n\\t\\t\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t\\t\\t</GenericTableBody>\\n\\t\\t\\t\\t\\t</GenericTable>\\n\\t\\t\\t\\t\\t{isFetched && (\\n\\t\\t\\t\\t\\t\\t<Pagination\\n\\t\\t\\t\\t\\t\\t\\tcurrent={current}\\n\\t\\t\\t\\t\\t\\t\\titemsPerPage={itemsPerPage}\\n\\t\\t\\t\\t\\t\\t\\tcount={data.length}\\n\\t\\t\\t\\t\\t\\t\\tonSetItemsPerPage={onSetItemsPerPage}\\n\\t\\t\\t\\t\\t\\t\\tonSetCurrent={onSetCurrent}\\n\\t\\t\\t\\t\\t\\t\\t{...paginationProps}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</>\\n\\t\\t\\t)}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default CustomUserStatus;\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"Pagination\",\"useDebouncedValue\",\"escapeRegExp\",\"useEndpoint\",\"useToastMessageDispatch\",\"useQuery\",\"React\",\"useState\",\"useMemo\",\"useEffect\",\"useTranslation\",\"FilterByText\",\"GenericNoResult\",\"GenericTable\",\"GenericTableHeader\",\"GenericTableHeaderCell\",\"GenericTableBody\",\"GenericTableLoadingTable\",\"usePagination\",\"useSort\",\"CustomUserStatusRow\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"reload\",\"onClick\",\"t\",\"text\",\"setText\",\"_usePagination\",\"current\",\"itemsPerPage\",\"setItemsPerPage\",\"onSetItemsPerPage\",\"setCurrent\",\"onSetCurrent\",\"paginationProps\",\"_excluded\",\"sortBy\",\"sortDirection\",\"setSort\",\"query\",\"name\",\"sort\",\"concat\",\"count\",\"offset\",\"getCustomUserStatus\",\"dispatchToastMessage\",\"data\",\"isLoading\",\"refetch\",\"isFetched\",\"statuses\",\"onError\",\"error\",\"type\",\"message\",\"createElement\",\"Fragment\",\"onChange\",\"length\",\"key\",\"direction\",\"active\",\"headerCells\",\"map\",\"status\",\"_id\"],\"mappings\":\"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\"}"}