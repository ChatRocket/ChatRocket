{"code":"function module(e,n,t){t.export({useUsersNameChanged:function(){return m}}),t.link(\"@rocket.chat/ui-contexts\",{useStream:function(e){u=e}},0),t.link(\"react\",{useEffect:function(e){i=e}},1),t.link(\"../../../../../app/models/client\",{Messages:function(e){a=e},Subscriptions:function(e){s=e}},2);var u,i,a,s,m=function(){var e=u(\"notify-logged\");i(function(){return e(\"Users:NameChanged\",function(e){var n=e._id,t=e.name,u=e.username;a.update({\"u._id\":n},{$set:{\"u.username\":u,\"u.name\":t}},{multi:!0}),a.update({\"editedBy._id\":n},{$set:{\"editedBy.username\":u}},{multi:!0}),a.update({mentions:{$elemMatch:{_id:n}}},{$set:{\"mentions.$.username\":u,\"mentions.$.name\":t}},{multi:!0}),s.update({name:u,t:\"d\"},{$set:{fname:t}})})},[e])}}","map":"{\"version\":3,\"sources\":[\"client/views/room/providers/hooks/useUsersNameChanged.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useStream } from '@rocket.chat/ui-contexts';\\nimport { useEffect } from 'react';\\n\\nimport { Messages, Subscriptions } from '../../../../../app/models/client';\\n\\nexport const useUsersNameChanged = () => {\\n\\tconst notify = useStream('notify-logged');\\n\\tuseEffect(() => {\\n\\t\\treturn notify('Users:NameChanged', ({ _id, name, username }) => {\\n\\t\\t\\tMessages.update(\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t'u._id': _id,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t$set: {\\n\\t\\t\\t\\t\\t\\t'u.username': username,\\n\\t\\t\\t\\t\\t\\t'u.name': name,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tmulti: true,\\n\\t\\t\\t\\t},\\n\\t\\t\\t);\\n\\n\\t\\t\\tMessages.update(\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t'editedBy._id': _id,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t$set: {\\n\\t\\t\\t\\t\\t\\t'editedBy.username': username,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tmulti: true,\\n\\t\\t\\t\\t},\\n\\t\\t\\t);\\n\\n\\t\\t\\tMessages.update(\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tmentions: {\\n\\t\\t\\t\\t\\t\\t$elemMatch: { _id },\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t$set: {\\n\\t\\t\\t\\t\\t\\t'mentions.$.username': username,\\n\\t\\t\\t\\t\\t\\t'mentions.$.name': name,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tmulti: true,\\n\\t\\t\\t\\t},\\n\\t\\t\\t);\\n\\n\\t\\t\\tSubscriptions.update(\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tname: username,\\n\\t\\t\\t\\t\\tt: 'd',\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t$set: {\\n\\t\\t\\t\\t\\t\\tfname: name,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t);\\n\\t\\t});\\n\\t}, [notify]);\\n};\\n\",null],\"names\":[\"module\",\"export\",\"useUsersNameChanged\",\"link\",\"useStream\",\"v\",\"useEffect\",\"Messages\",\"Subscriptions\",\"notify\",\"_ref\",\"_id\",\"name\",\"username\",\"update\",\"$set\",\"multi\",\"mentions\",\"$elemMatch\",\"t\",\"fname\"],\"mappings\":\"uBAAAA,EAAOC,MAAE,CAAA,CAAAC,oBAAiB,WAAA,OAA2BA,CAAA,CAAA,GAAAF,EAAAG,IAAA,CAAA,2BAAA,CAAAC,UAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,QAAA,CAAAG,UAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,mCAAA,CAAAI,SAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,EAAAG,cAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAK9C,IAL8CD,EAAAE,EAAAC,EAAAC,EAKxCN,EAAsB,WAClC,IAAMO,EAASL,EAAU,iBACzBE,EAAU,WACT,OAAOG,EAAO,oBAAqB,SAAAC,CAAA,EAA4B,IAAzBC,EAAGD,EAAHC,GAAG,CAAEC,EAAIF,EAAJE,IAAI,CAAEC,EAAQH,EAARG,QAAQ,CACxDN,EAASO,MAAM,CACd,CACC,QAASH,GAEV,CACCI,KAAM,CACL,aAAcF,EACd,SAAUD,IAGZ,CACCI,MAAO,CAAA,IAITT,EAASO,MAAM,CACd,CACC,eAAgBH,GAEjB,CACCI,KAAM,CACL,oBAAqBF,IAGvB,CACCG,MAAO,CAAA,IAITT,EAASO,MAAM,CACd,CACCG,SAAU,CACTC,WAAY,CAAEP,IAAAA,CAAG,IAGnB,CACCI,KAAM,CACL,sBAAuBF,EACvB,kBAAmBD,IAGrB,CACCI,MAAO,CAAA,IAITR,EAAcM,MAAM,CACnB,CACCF,KAAMC,EACNM,EAAG,KAEJ,CACCJ,KAAM,CACLK,MAAOR,IAIX,EACD,EAAG,CAACH,EAAO,CACZ\"}"}