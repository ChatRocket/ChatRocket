{"code":"function module(e,n,t){var l,o,a,u,i,r,c,s,f,m,d,p,E,k,h,x,b,v,g,A,C;t.link(\"@babel/runtime/regenerator\",{default:function(e){l=e}},0),t.link(\"@babel/runtime/helpers/extends\",{default:function(e){o=e}},1),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){a=e}},2),t.link(\"@rocket.chat/fuselage\",{Button:function(e){u=e},Modal:function(e){i=e},Select:function(e){r=e},Field:function(e){c=e},FieldGroup:function(e){s=e},FieldLabel:function(e){f=e},FieldRow:function(e){m=e},Box:function(e){d=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){p=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){E=e},useEndpoint:function(e){k=e}},2),t.link(\"react\",{default:function(e){h=e},useState:function(e){x=e},useMemo:function(e){b=e}},3),t.link(\"react-i18next\",{useTranslation:function(e){v=e}},4),t.link(\"../../../../../components/AutoCompleteAgentWithoutExtension\",{default:function(e){g=e}},5),t.link(\"../../../../../hooks/useAsyncState\",{AsyncStatePhase:function(e){A=e}},6),t.link(\"../../../../../hooks/useEndpointData\",{useEndpointData:function(e){C=e}},7),t.exportDefault(function(e){var n,t=e.existingExtension,_=e.closeModal,y=e.reload,F=v().t,S=E(),D=x(\"\"),M=a(D,2),T=M[0],w=M[1],P=x(t||\"\"),B=a(P,2),G=B[0],I=B[1],L=b(function(){return{type:\"available\",userId:T}},[T]),N=k(\"POST\",\"/v1/omnichannel/agent/extension\"),O=p(function(e){return l.async(function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,n.next=4,l.awrap(N({username:T,extension:G}));case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),S({type:\"error\",message:n.t0});case 9:y(),_();case 11:case\"end\":return n.stop()}},null,null,[[1,6]],Promise)}),W=p(function(e){return w(e)}),H=C(\"/v1/omnichannel/extension\",{params:L}),R=H.value,j=H.phase;return h.createElement(i,{wrapperFunction:function(e){return h.createElement(d,o({is:\"form\",onSubmit:O},e))}},h.createElement(i.Header,null,h.createElement(i.Title,null,F(\"Associate_Agent_to_Extension\")),h.createElement(i.Close,{onClick:_})),h.createElement(i.Content,null,h.createElement(s,null,h.createElement(c,null,h.createElement(f,null,F(\"Agent_Without_Extensions\")),h.createElement(m,null,h.createElement(g,{value:T,onChange:W,currentExtension:G}))),h.createElement(c,null,h.createElement(f,null,F(\"Free_Extension_Numbers\")),h.createElement(m,null,h.createElement(r,{disabled:j===A.LOADING||\"\"===T,options:(null==R?void 0:null===(n=R.extensions)||void 0===n?void 0:n.map(function(e){return[e,e]}))||[],value:G,placeholder:F(\"Select_an_option\"),onChange:function(e){return I(String(e))}}))))),h.createElement(i.Footer,null,h.createElement(i.FooterControllers,null,h.createElement(u,{onClick:_},F(\"Cancel\")),h.createElement(u,{primary:!0,disabled:!T||!G,type:\"submit\"},F(\"Associate\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/settings/groups/VoipGroupPage/AssignAgentModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Button, Modal, Select, Field, FieldGroup, FieldLabel, FieldRow, Box } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport React, { useState, useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport AutoCompleteAgentWithoutExtension from '../../../../../components/AutoCompleteAgentWithoutExtension';\\nimport { AsyncStatePhase } from '../../../../../hooks/useAsyncState';\\nimport { useEndpointData } from '../../../../../hooks/useEndpointData';\\n\\ntype AssignAgentModalProps = {\\n\\tcloseModal: () => void;\\n\\treload: () => void;\\n\\texistingExtension?: string;\\n};\\n\\nconst AssignAgentModal = ({ existingExtension, closeModal, reload }: AssignAgentModalProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst [agent, setAgent] = useState('');\\n\\tconst [extension, setExtension] = useState(existingExtension || '');\\n\\tconst query = useMemo(() => ({ type: 'available' as const, userId: agent }), [agent]);\\n\\n\\tconst assignAgent = useEndpoint('POST', '/v1/omnichannel/agent/extension');\\n\\n\\tconst handleAssignment = useMutableCallback(async (e) => {\\n\\t\\te.preventDefault();\\n\\t\\ttry {\\n\\t\\t\\tawait assignAgent({ username: agent, extension });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t\\treload();\\n\\t\\tcloseModal();\\n\\t});\\n\\tconst handleAgentChange = useMutableCallback((e) => setAgent(e));\\n\\n\\tconst { value: availableExtensions, phase: state } = useEndpointData('/v1/omnichannel/extension', { params: query });\\n\\n\\treturn (\\n\\t\\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleAssignment} {...props} />}>\\n\\t\\t\\t<Modal.Header>\\n\\t\\t\\t\\t<Modal.Title>{t('Associate_Agent_to_Extension')}</Modal.Title>\\n\\t\\t\\t\\t<Modal.Close onClick={closeModal} />\\n\\t\\t\\t</Modal.Header>\\n\\t\\t\\t<Modal.Content>\\n\\t\\t\\t\\t<FieldGroup>\\n\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t<FieldLabel>{t('Agent_Without_Extensions')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<AutoCompleteAgentWithoutExtension value={agent} onChange={handleAgentChange} currentExtension={extension} />\\n\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t<FieldLabel>{t('Free_Extension_Numbers')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<Select\\n\\t\\t\\t\\t\\t\\t\\t\\tdisabled={state === AsyncStatePhase.LOADING || agent === ''}\\n\\t\\t\\t\\t\\t\\t\\t\\toptions={availableExtensions?.extensions?.map((extension) => [extension, extension]) || []}\\n\\t\\t\\t\\t\\t\\t\\t\\tvalue={extension}\\n\\t\\t\\t\\t\\t\\t\\t\\tplaceholder={t('Select_an_option')}\\n\\t\\t\\t\\t\\t\\t\\t\\tonChange={(value) => setExtension(String(value))}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t</FieldGroup>\\n\\t\\t\\t</Modal.Content>\\n\\t\\t\\t<Modal.Footer>\\n\\t\\t\\t\\t<Modal.FooterControllers>\\n\\t\\t\\t\\t\\t<Button onClick={closeModal}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button primary disabled={!agent || !extension} type='submit'>\\n\\t\\t\\t\\t\\t\\t{t('Associate')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</Modal.FooterControllers>\\n\\t\\t\\t</Modal.Footer>\\n\\t\\t</Modal>\\n\\t);\\n};\\n\\nexport default AssignAgentModal;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_extends\",\"_slicedToArray\",\"Button\",\"Modal\",\"Select\",\"Field\",\"FieldGroup\",\"FieldLabel\",\"FieldRow\",\"Box\",\"useMutableCallback\",\"useToastMessageDispatch\",\"useEndpoint\",\"React\",\"useState\",\"useMemo\",\"useTranslation\",\"AutoCompleteAgentWithoutExtension\",\"AsyncStatePhase\",\"useEndpointData\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_availableExtensions$\",\"existingExtension\",\"closeModal\",\"reload\",\"t\",\"_useTranslation\",\"dispatchToastMessage\",\"_useState\",\"_useState2\",\"agent\",\"setAgent\",\"_useState3\",\"_useState4\",\"extension\",\"setExtension\",\"query\",\"type\",\"userId\",\"assignAgent\",\"handleAssignment\",\"e\",\"async\",\"_context\",\"prev\",\"next\",\"preventDefault\",\"awrap\",\"username\",\"t0\",\"message\",\"stop\",\"Promise\",\"handleAgentChange\",\"_useEndpointData\",\"params\",\"availableExtensions\",\"value\",\"state\",\"phase\",\"createElement\",\"wrapperFunction\",\"props\",\"is\",\"onSubmit\",\"Header\",\"Title\",\"Close\",\"onClick\",\"Content\",\"onChange\",\"currentExtension\",\"disabled\",\"LOADING\",\"options\",\"extensions\",\"map\",\"placeholder\",\"String\",\"Footer\",\"FooterControllers\",\"primary\"],\"mappings\":\"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\"}"}