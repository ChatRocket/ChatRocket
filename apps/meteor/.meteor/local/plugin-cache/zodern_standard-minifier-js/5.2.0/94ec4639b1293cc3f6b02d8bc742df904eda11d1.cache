{"code":"function module(e,t,a){var n,o,l,i,c,r,u,s,d=[\"attachmentName\",\"headers\",\"dataAvailable\",\"dataExtractor\"];a.link(\"@babel/runtime/helpers/extends\",{default:function(e){n=e}},0),a.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){o=e}},1),a.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){l=e}},2),a.link(\"@rocket.chat/fuselage\",{IconButton:function(e){i=e}},0),a.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){c=e},useTranslation:function(e){r=e}},1),a.link(\"react\",{default:function(e){u=e}},2),a.link(\"../../lib/download\",{downloadCsvAs:function(e){s=e}},3),a.exportDefault(function(e){var t=e.attachmentName,a=e.headers,f=e.dataAvailable,b=e.dataExtractor,h=l(e,d),m=r(),k=c();return u.createElement(i,n({secondary:!0,small:!0,disabled:!f,onClick:function(){f&&Promise.resolve(b()).then(function(e){e&&s([a].concat(o(e)),t)}).catch(function(e){k({type:\"error\",message:e})})},\"aria-label\":m(\"Download_Info\"),icon:\"download\"},h))})}","map":"{\"version\":3,\"sources\":[\"client/components/dashboards/DownloadDataButton.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { Box } from '@rocket.chat/fuselage';\\nimport { IconButton } from '@rocket.chat/fuselage';\\nimport { useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ComponentProps, ReactElement } from 'react';\\nimport React from 'react';\\n\\nimport { downloadCsvAs } from '../../lib/download';\\n\\ntype RowFor<THeaders extends readonly string[]> = readonly unknown[] & {\\n\\tlength: THeaders['length'];\\n};\\n\\ntype DownloadDataButtonProps<THeaders extends readonly string[]> = {\\n\\tattachmentName: string;\\n\\theaders: RowFor<THeaders>;\\n\\tdataAvailable: boolean;\\n\\tdataExtractor: () => Promise<RowFor<THeaders>[] | undefined> | RowFor<THeaders>[] | undefined;\\n} & Omit<ComponentProps<typeof Box>, 'attachmentName' | 'headers' | 'data'>;\\n\\nconst DownloadDataButton = <H extends readonly string[]>({\\n\\tattachmentName,\\n\\theaders,\\n\\tdataAvailable,\\n\\tdataExtractor,\\n\\t...props\\n}: DownloadDataButtonProps<H>): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst handleClick = (): void => {\\n\\t\\tif (!dataAvailable) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tPromise.resolve(dataExtractor())\\n\\t\\t\\t.then((data) => {\\n\\t\\t\\t\\tif (!data) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tdownloadCsvAs([headers, ...data], attachmentName);\\n\\t\\t\\t})\\n\\t\\t\\t.catch((error) => {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t});\\n\\t};\\n\\n\\treturn (\\n\\t\\t<IconButton\\n\\t\\t\\tsecondary\\n\\t\\t\\tsmall\\n\\t\\t\\tdisabled={!dataAvailable}\\n\\t\\t\\tonClick={handleClick}\\n\\t\\t\\taria-label={t('Download_Info')}\\n\\t\\t\\ticon='download'\\n\\t\\t\\t{...props}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default DownloadDataButton;\\n\",null],\"names\":[\"_extends\",\"_toConsumableArray\",\"_objectWithoutProperties\",\"IconButton\",\"useToastMessageDispatch\",\"useTranslation\",\"React\",\"downloadCsvAs\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"attachmentName\",\"headers\",\"dataAvailable\",\"dataExtractor\",\"props\",\"_excluded\",\"t\",\"dispatchToastMessage\",\"createElement\",\"secondary\",\"small\",\"disabled\",\"onClick\",\"Promise\",\"resolve\",\"then\",\"data\",\"concat\",\"catch\",\"error\",\"type\",\"message\",\"icon\"],\"mappings\":\"2BACAA,EAAmDC,EAAAC,EAAnDC,EAAmDC,EAAAC,EAAAC,EAAAC,iEAA1CC,EAAUC,IAAE,CAAA,iCAA8B,CAAAC,QAAA,SAAAC,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iDAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAA1CH,EAAYC,IAAA,CAAM,wBAAwB,CAAAN,WAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAL,wBAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,eAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qBAAA,CAAAF,cAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAnDH,EAAOI,aAAY,CAkBQ,SAAAC,CAAA,EAMoB,IAL9CC,EAAcD,EAAdC,cAAc,CACdC,EAAOF,EAAPE,OAAO,CACPC,EAAaH,EAAbG,aAAa,CACbC,EAAaJ,EAAbI,aAAa,CACVC,EAAKhB,EAAAW,EAAAM,GAEFC,EAAIf,IACJgB,EAAuBjB,IAoB7B,OACCE,EAAAgB,aAAA,CAACnB,EAAUH,EAAA,CACVuB,UAAS,CAAA,EACTC,MAAK,CAAA,EACLC,SAAU,CAACT,EACXU,QAvBkB,WACdV,GAILW,QAAQC,OAAO,CAACX,KACdY,IAAI,CAAC,SAACC,CAAI,EACLA,GAILvB,EAAa,CAAEQ,EAAO,CAAAgB,MAAA,CAAA9B,EAAK6B,IAAOhB,EACnC,GACCkB,KAAK,CAAC,SAACC,CAAK,EACZZ,EAAqB,CAAEa,KAAM,QAASC,QAASF,CAAK,EACrD,EACF,EAQE,aAAYb,EAAE,iBACdgB,KAAK,UAAU,EACXlB,GAGP\"}"}