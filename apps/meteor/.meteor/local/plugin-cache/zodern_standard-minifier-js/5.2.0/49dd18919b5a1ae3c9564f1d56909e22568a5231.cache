{"code":"function module(e,o,t){let n,l,r,i,s,a,u,c,d,m,p,g,v,f,k,b,C,E,M,h,x,y,P,A,w,R,_,B,D,I,S,F,K,T,V,L,j,U,N,O,z,G,q,H,J,W;t.link(\"@rocket.chat/fuselage-hooks\",{useContentBoxSize(e){n=e},useMutableCallback(e){l=e}},0),t.link(\"@rocket.chat/ui-composer\",{MessageComposerAction(e){r=e},MessageComposerToolbarActions(e){i=e},MessageComposer(e){s=e},MessageComposerInput(e){a=e},MessageComposerToolbar(e){u=e},MessageComposerActionsDivider(e){c=e},MessageComposerToolbarSubmit(e){d=e},MessageComposerButton(e){m=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useTranslation(e){p=e},useUserPreference(e){g=e},useLayout(e){v=e},useSetting(e){f=e}},2),t.link(\"@tanstack/react-query\",{useMutation(e){k=e}},3),t.link(\"react\",{default(e){b=e},memo(e){C=e},useRef(e){E=e},useReducer(e){M=e},useCallback(e){h=e}},4),t.link(\"use-subscription\",{useSubscription(e){x=e}},5),t.link(\"../../../../../app/ui-message/client/messageBox/createComposerAPI\",{createComposerAPI(e){y=e}},6),t.link(\"../../../../../app/ui-message/client/messageBox/messageBoxFormatting\",{formattingButtons(e){P=e}},7),t.link(\"../../../../../lib/getImageExtensionFromMime\",{getImageExtensionFromMime(e){A=e}},8),t.link(\"../../../../hooks/useFormatDateAndTime\",{useFormatDateAndTime(e){w=e}},9),t.link(\"../../../../hooks/useReactiveValue\",{useReactiveValue(e){R=e}},10),t.link(\"../../../../lib/rooms/roomCoordinator\",{roomCoordinator(e){_=e}},11),t.link(\"../../../../lib/utils/keyCodes\",{keyCodes(e){B=e}},12),t.link(\"../../../composer/AudioMessageRecorder\",{default(e){D=e}},13),t.link(\"../../../composer/VideoMessageRecorder\",{default(e){I=e}},14),t.link(\"../../contexts/ChatContext\",{useChat(e){S=e}},15),t.link(\"../../contexts/ComposerPopupContext\",{useComposerPopup(e){F=e}},16),t.link(\"../../contexts/RoomContext\",{useRoom(e){K=e}},17),t.link(\"../ComposerBoxPopup\",{default(e){T=e}},18),t.link(\"../ComposerBoxPopupPreview\",{default(e){V=e}},19),t.link(\"../ComposerUserActionIndicator\",{default(e){L=e}},20),t.link(\"../RoomComposer/hooks/useAutoGrow\",{useAutoGrow(e){j=e}},21),t.link(\"../hooks/useComposerBoxPopup\",{useComposerBoxPopup(e){U=e}},22),t.link(\"../hooks/useEnablePopupPreview\",{useEnablePopupPreview(e){N=e}},23),t.link(\"../hooks/useMessageComposerMergedRefs\",{useMessageComposerMergedRefs(e){O=e}},24),t.link(\"./MessageBoxActionsToolbar\",{default(e){z=e}},25),t.link(\"./MessageBoxFormattingToolbar\",{default(e){G=e}},26),t.link(\"./MessageBoxHint\",{default(e){q=e}},27),t.link(\"./MessageBoxReplies\",{default(e){H=e}},28),t.link(\"./hooks/useMessageBoxAutoFocus\",{useMessageBoxAutoFocus(e){J=e}},29),t.link(\"./hooks/useMessageBoxPlaceholder\",{useMessageBoxPlaceholder(e){W=e}},30);let Q=(e,o)=>{let t=o.target;return!!t.value.trim()},X=(e,o,t)=>{let n=-1!==navigator.platform.indexOf(\"Mac\"),l=n&&e.metaKey||!n&&e.ctrlKey;if(!l)return!1;let r=e.key.toLowerCase(),i=o.find(e=>\"command\"in e&&e.command===r);return!!i&&\"pattern\"in i&&(t.wrapSelection(i.pattern),!0)},Y=()=>()=>void 0,Z=()=>!1,$=[],ee=()=>$;t.exportDefault(C(e=>{var o,t,C,$,eo,et,en,el,er,ei,es,ea,eu,ec,ed,em,ep,eg,ev,ef,ek;let{tmid:eb,onSend:eC,onJoin:eE,onNavigateToNextMessage:eM,onNavigateToPreviousMessage:eh,onUploadFiles:ex,onEscape:ey,onTyping:eP,tshow:eA,previewUrls:ew}=e,eR=S(),e_=K(),eB=p(),eD=f(\"E2E_Enable\"),eI=f(\"E2E_Allow_Unencrypted_Messages\"),eS=!eD||!e_.encrypted||eI,eF=W(eB(\"Message\"),e_),[eK,eT]=M(Q,!1),{isMobile:eV}=v(),eL=g(\"sendOnEnter\")||eV,ej=null==eL||\"normal\"===eL||\"desktop\"===eL&&!eV;if(!eR)throw Error(\"Chat context not found\");let eU=E(null),eN=E(null),eO=E(null),ez=\"messagebox_\".concat(e_._id).concat(eb?\"-\".concat(eb):\"\"),eG=h(e=>{null===e||eR.composer||eR.setComposerAPI(y(e,ez))},[eR,ez]),eq=J(!eV),eH=g(\"useEmojis\"),eJ=l(e=>{if(e.stopPropagation(),e.preventDefault(),!eH)return;let o=eN.current;eR.emojiPicker.open(o,e=>{var o;return null===(o=eR.composer)||void 0===o?void 0:o.insertText(\" :\".concat(e,\": \"))})}),eW=l(()=>{var e,o,t;let n=null!==(e=null===(o=eR.composer)||void 0===o?void 0:o.text)&&void 0!==e?e:\"\";null===(t=eR.composer)||void 0===t||t.clear(),oc(),null==eC||eC({value:n,tshow:eA,previewUrls:ew,isSlashCommandAllowed:eS})}),eQ=e=>{eR.currentEditing&&(e.preventDefault(),e.stopPropagation(),eR.currentEditing.reset().then(e=>{if(!e){var o;null===(o=eR.currentEditing)||void 0===o||o.cancel()}}))},eX=l(e=>{let{which:o}=e,t=e.target,n=o===B.CARRIAGE_RETURN||o===B.NEW_LINE;if(n){let o=e.shiftKey||e.ctrlKey||e.altKey||e.metaKey;if(e.preventDefault(),!(ej&&!o||!ej&&o)){var l;return null===(l=eR.composer)||void 0===l||l.insertNewLine(),!1}return eW(),!1}if(!(eR.composer&&X(e,[...P],eR.composer))&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey){switch(e.key){case\"Escape\":eQ(e),t.value.trim()||null==ey||ey();return;case\"ArrowUp\":0===t.selectionEnd&&(e.preventDefault(),e.stopPropagation(),null==eh||eh(),e.altKey&&t.setSelectionRange(0,0));return;case\"ArrowDown\":t.selectionEnd===t.value.length&&(e.preventDefault(),e.stopPropagation(),null==eM||eM(),e.altKey&&t.setSelectionRange(t.value.length,t.value.length))}null==eP||eP()}}),eY=x({getCurrentValue:null!==(o=null===(t=eR.composer)||void 0===t?void 0:t.editing.get)&&void 0!==o?o:Z,subscribe:null!==(C=null===($=eR.composer)||void 0===$?void 0:$.editing.subscribe)&&void 0!==C?C:Y}),eZ=x({getCurrentValue:null!==(eo=null===(et=eR.composer)||void 0===et?void 0:et.recording.get)&&void 0!==eo?eo:Z,subscribe:null!==(en=null===(el=eR.composer)||void 0===el?void 0:el.recording.subscribe)&&void 0!==en?en:Y}),e$=x({getCurrentValue:null!==(er=null===(ei=eR.composer)||void 0===ei?void 0:ei.isMicrophoneDenied.get)&&void 0!==er?er:Z,subscribe:null!==(es=null===(ea=eR.composer)||void 0===ea?void 0:ea.isMicrophoneDenied.subscribe)&&void 0!==es?es:Y}),e0=x({getCurrentValue:null!==(eu=null===(ec=eR.composer)||void 0===ec?void 0:ec.recordingVideo.get)&&void 0!==eu?eu:Z,subscribe:null!==(ed=null===(em=eR.composer)||void 0===em?void 0:em.recordingVideo.subscribe)&&void 0!==ed?ed:Y}),e1=x({getCurrentValue:null!==(ep=null===(eg=eR.composer)||void 0===eg?void 0:eg.formatters.get)&&void 0!==ep?ep:ee,subscribe:null!==(ev=null===(ef=eR.composer)||void 0===ef?void 0:ef.formatters.subscribe)&&void 0!==ev?ev:Y}),e2=eZ||e0,{textAreaStyle:e4,shadowStyle:e8}=j(eU,eO,eZ),e3=R(h(()=>_.verifyCanSendMessage(e_._id),[e_._id])),e5=n(eU),e6=w(),e7=k(async()=>null==eE?void 0:eE()),e9=l(e=>{let{clipboardData:o}=e;if(!o)return;let t=Array.from(o.items);if(t.some(e=>{let{kind:o,type:t}=e;return\"string\"===o&&\"text/plain\"===t}))return;let n=t.filter(e=>\"file\"===e.kind&&-1!==e.type.indexOf(\"image/\")).map(e=>{let o=e.getAsFile();if(!o)return;let t=o?A(o.type):void 0,n=t?\".\".concat(t):\"\";return Object.defineProperty(o,\"name\",{writable:!0,value:\"Clipboard - \".concat(e6(new Date)).concat(n)}),o}).filter(e=>!!e);n.length&&(e.preventDefault(),null==ex||ex(n))}),oe=F(),{popup:oo,focused:ot,items:on,ariaActiveDescendant:ol,suspended:or,select:oi,commandsRef:os,callbackRef:oa,filter:ou,clearPopup:oc}=U({configurations:oe}),od=h(e=>{null!==e&&e.addEventListener(\"keydown\",e=>{eX(e)})},[eX]),om=O(oa,eU,eG,eq,od),op=N(ou,oo);return b.createElement(b.Fragment,null,(null===(ek=eR.composer)||void 0===ek?void 0:ek.quotedMessages)&&b.createElement(H,null),op&&oo&&b.createElement(T,{select:oi,items:on,focused:ot,title:oo.title,renderItem:oo.renderItem}),(null==oo?void 0:oo.preview)&&b.createElement(V,{select:oi,items:on,focused:ot,renderItem:oo.renderItem,ref:os,rid:e_._id,tmid:eb,suspended:or}),b.createElement(q,{isEditing:eY,e2eEnabled:eD,unencryptedMessagesAllowed:eI,isMobile:eV}),e0&&b.createElement(I,{reference:eN,rid:e_._id,tmid:eb}),b.createElement(s,{ref:eN,variant:eY?\"editing\":void 0},eZ&&b.createElement(D,{rid:e_._id,isMicrophoneDenied:e$}),b.createElement(a,{ref:om,\"aria-label\":eF,name:\"msg\",disabled:e2||!e3,onChange:eT,style:e4,placeholder:eF,onPaste:e9,\"aria-activedescendant\":ol}),b.createElement(\"div\",{ref:eO,style:e8}),b.createElement(u,null,b.createElement(i,{\"aria-label\":eB(\"Message_composer_toolbox_primary_actions\")},b.createElement(r,{icon:\"emoji\",disabled:!eH||e2||!e3,onClick:eJ,title:eB(\"Emoji\")}),b.createElement(c,null),eR.composer&&e1.length>0&&b.createElement(G,{composer:eR.composer,variant:e5.inlineSize<480?\"small\":\"large\",items:e1,disabled:e2||!e3}),b.createElement(z,{canSend:e3,typing:eK,isMicrophoneDenied:e$,rid:e_._id,tmid:eb,isRecording:e2,variant:e5.inlineSize<480?\"small\":\"large\"})),b.createElement(d,null,!e3&&b.createElement(m,{primary:!0,onClick:eE,loading:e7.isLoading},eB(\"Join\")),e3&&b.createElement(b.Fragment,null,eY&&b.createElement(m,{onClick:eQ},eB(\"Cancel\")),b.createElement(r,{\"aria-label\":eB(\"Send\"),icon:\"send\",disabled:!e3||!eK&&!eY,onClick:eW,secondary:eK||eY,info:eK||eY}))))),b.createElement(L,{rid:e_._id,tmid:eb}))}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/messageBox/MessageBox.tsx\",\"<anon>\"],\"sourcesContent\":[\"/* eslint-disable complexity */\\nimport type { IMessage, ISubscription } from '@rocket.chat/core-typings';\\nimport { useContentBoxSize, useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport {\\n\\tMessageComposerAction,\\n\\tMessageComposerToolbarActions,\\n\\tMessageComposer,\\n\\tMessageComposerInput,\\n\\tMessageComposerToolbar,\\n\\tMessageComposerActionsDivider,\\n\\tMessageComposerToolbarSubmit,\\n\\tMessageComposerButton,\\n} from '@rocket.chat/ui-composer';\\nimport { useTranslation, useUserPreference, useLayout, useSetting } from '@rocket.chat/ui-contexts';\\nimport { useMutation } from '@tanstack/react-query';\\nimport type { ReactElement, MouseEventHandler, FormEvent, ClipboardEventHandler, MouseEvent } from 'react';\\nimport React, { memo, useRef, useReducer, useCallback } from 'react';\\nimport { useSubscription } from 'use-subscription';\\n\\nimport { createComposerAPI } from '../../../../../app/ui-message/client/messageBox/createComposerAPI';\\nimport type { FormattingButton } from '../../../../../app/ui-message/client/messageBox/messageBoxFormatting';\\nimport { formattingButtons } from '../../../../../app/ui-message/client/messageBox/messageBoxFormatting';\\nimport { getImageExtensionFromMime } from '../../../../../lib/getImageExtensionFromMime';\\nimport { useFormatDateAndTime } from '../../../../hooks/useFormatDateAndTime';\\nimport { useReactiveValue } from '../../../../hooks/useReactiveValue';\\nimport type { ComposerAPI } from '../../../../lib/chats/ChatAPI';\\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\\nimport { keyCodes } from '../../../../lib/utils/keyCodes';\\nimport AudioMessageRecorder from '../../../composer/AudioMessageRecorder';\\nimport VideoMessageRecorder from '../../../composer/VideoMessageRecorder';\\nimport { useChat } from '../../contexts/ChatContext';\\nimport { useComposerPopup } from '../../contexts/ComposerPopupContext';\\nimport { useRoom } from '../../contexts/RoomContext';\\nimport ComposerBoxPopup from '../ComposerBoxPopup';\\nimport ComposerBoxPopupPreview from '../ComposerBoxPopupPreview';\\nimport ComposerUserActionIndicator from '../ComposerUserActionIndicator';\\nimport { useAutoGrow } from '../RoomComposer/hooks/useAutoGrow';\\nimport { useComposerBoxPopup } from '../hooks/useComposerBoxPopup';\\nimport { useEnablePopupPreview } from '../hooks/useEnablePopupPreview';\\nimport { useMessageComposerMergedRefs } from '../hooks/useMessageComposerMergedRefs';\\nimport MessageBoxActionsToolbar from './MessageBoxActionsToolbar';\\nimport MessageBoxFormattingToolbar from './MessageBoxFormattingToolbar';\\nimport MessageBoxHint from './MessageBoxHint';\\nimport MessageBoxReplies from './MessageBoxReplies';\\nimport { useMessageBoxAutoFocus } from './hooks/useMessageBoxAutoFocus';\\nimport { useMessageBoxPlaceholder } from './hooks/useMessageBoxPlaceholder';\\n\\nconst reducer = (_: unknown, event: FormEvent<HTMLInputElement>): boolean => {\\n\\tconst target = event.target as HTMLInputElement;\\n\\n\\treturn Boolean(target.value.trim());\\n};\\n\\nconst handleFormattingShortcut = (event: KeyboardEvent, formattingButtons: FormattingButton[], composer: ComposerAPI) => {\\n\\tconst isMacOS = navigator.platform.indexOf('Mac') !== -1;\\n\\tconst isCmdOrCtrlPressed = (isMacOS && event.metaKey) || (!isMacOS && event.ctrlKey);\\n\\n\\tif (!isCmdOrCtrlPressed) {\\n\\t\\treturn false;\\n\\t}\\n\\n\\tconst key = event.key.toLowerCase();\\n\\n\\tconst formatter = formattingButtons.find((formatter) => 'command' in formatter && formatter.command === key);\\n\\n\\tif (!formatter || !('pattern' in formatter)) {\\n\\t\\treturn false;\\n\\t}\\n\\n\\tcomposer.wrapSelection(formatter.pattern);\\n\\treturn true;\\n};\\n\\nconst emptySubscribe = () => () => undefined;\\nconst getEmptyFalse = () => false;\\nconst a: any[] = [];\\nconst getEmptyArray = () => a;\\n\\ntype MessageBoxProps = {\\n\\ttmid?: IMessage['_id'];\\n\\tonSend?: (params: { value: string; tshow?: boolean; previewUrls?: string[]; isSlashCommandAllowed?: boolean }) => Promise<void>;\\n\\tonJoin?: () => Promise<void>;\\n\\tonResize?: () => void;\\n\\tonTyping?: () => void;\\n\\tonEscape?: () => void;\\n\\tonNavigateToPreviousMessage?: () => void;\\n\\tonNavigateToNextMessage?: () => void;\\n\\tonUploadFiles?: (files: readonly File[]) => void;\\n\\ttshow?: IMessage['tshow'];\\n\\tpreviewUrls?: string[];\\n\\tsubscription?: ISubscription;\\n\\tshowFormattingTips: boolean;\\n\\tisEmbedded?: boolean;\\n};\\n\\nconst MessageBox = ({\\n\\ttmid,\\n\\tonSend,\\n\\tonJoin,\\n\\tonNavigateToNextMessage,\\n\\tonNavigateToPreviousMessage,\\n\\tonUploadFiles,\\n\\tonEscape,\\n\\tonTyping,\\n\\ttshow,\\n\\tpreviewUrls,\\n}: MessageBoxProps): ReactElement => {\\n\\tconst chat = useChat();\\n\\tconst room = useRoom();\\n\\tconst t = useTranslation();\\n\\tconst e2eEnabled = useSetting<boolean>('E2E_Enable');\\n\\tconst unencryptedMessagesAllowed = useSetting<boolean>('E2E_Allow_Unencrypted_Messages');\\n\\tconst isSlashCommandAllowed = !e2eEnabled || !room.encrypted || unencryptedMessagesAllowed;\\n\\tconst composerPlaceholder = useMessageBoxPlaceholder(t('Message'), room);\\n\\n\\tconst [typing, setTyping] = useReducer(reducer, false);\\n\\n\\tconst { isMobile } = useLayout();\\n\\tconst sendOnEnterBehavior = useUserPreference<'normal' | 'alternative' | 'desktop'>('sendOnEnter') || isMobile;\\n\\tconst sendOnEnter = sendOnEnterBehavior == null || sendOnEnterBehavior === 'normal' || (sendOnEnterBehavior === 'desktop' && !isMobile);\\n\\n\\tif (!chat) {\\n\\t\\tthrow new Error('Chat context not found');\\n\\t}\\n\\n\\tconst textareaRef = useRef<HTMLTextAreaElement>(null);\\n\\tconst messageComposerRef = useRef<HTMLElement>(null);\\n\\tconst shadowRef = useRef<HTMLDivElement>(null);\\n\\n\\tconst storageID = `messagebox_${room._id}${tmid ? `-${tmid}` : ''}`;\\n\\n\\tconst callbackRef = useCallback(\\n\\t\\t(node: HTMLTextAreaElement) => {\\n\\t\\t\\tif (node === null || chat.composer) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tchat.setComposerAPI(createComposerAPI(node, storageID));\\n\\t\\t},\\n\\t\\t[chat, storageID],\\n\\t);\\n\\n\\tconst autofocusRef = useMessageBoxAutoFocus(!isMobile);\\n\\n\\tconst useEmojis = useUserPreference<boolean>('useEmojis');\\n\\n\\tconst handleOpenEmojiPicker: MouseEventHandler<HTMLElement> = useMutableCallback((e) => {\\n\\t\\te.stopPropagation();\\n\\t\\te.preventDefault();\\n\\n\\t\\tif (!useEmojis) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst ref = messageComposerRef.current as HTMLElement;\\n\\t\\tchat.emojiPicker.open(ref, (emoji: string) => chat.composer?.insertText(` :${emoji}: `));\\n\\t});\\n\\n\\tconst handleSendMessage = useMutableCallback(() => {\\n\\t\\tconst text = chat.composer?.text ?? '';\\n\\t\\tchat.composer?.clear();\\n\\t\\tclearPopup();\\n\\n\\t\\tonSend?.({\\n\\t\\t\\tvalue: text,\\n\\t\\t\\ttshow,\\n\\t\\t\\tpreviewUrls,\\n\\t\\t\\tisSlashCommandAllowed,\\n\\t\\t});\\n\\t});\\n\\n\\tconst closeEditing = (event: KeyboardEvent | MouseEvent<HTMLElement>) => {\\n\\t\\tif (chat.currentEditing) {\\n\\t\\t\\tevent.preventDefault();\\n\\t\\t\\tevent.stopPropagation();\\n\\n\\t\\t\\tchat.currentEditing.reset().then((reset) => {\\n\\t\\t\\t\\tif (!reset) {\\n\\t\\t\\t\\t\\tchat.currentEditing?.cancel();\\n\\t\\t\\t\\t}\\n\\t\\t\\t});\\n\\t\\t}\\n\\t};\\n\\n\\tconst handler = useMutableCallback((event: KeyboardEvent) => {\\n\\t\\tconst { which: keyCode } = event;\\n\\n\\t\\tconst input = event.target as HTMLTextAreaElement;\\n\\n\\t\\tconst isSubmitKey = keyCode === keyCodes.CARRIAGE_RETURN || keyCode === keyCodes.NEW_LINE;\\n\\n\\t\\tif (isSubmitKey) {\\n\\t\\t\\tconst withModifier = event.shiftKey || event.ctrlKey || event.altKey || event.metaKey;\\n\\t\\t\\tconst isSending = (sendOnEnter && !withModifier) || (!sendOnEnter && withModifier);\\n\\n\\t\\t\\tevent.preventDefault();\\n\\t\\t\\tif (!isSending) {\\n\\t\\t\\t\\tchat.composer?.insertNewLine();\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\t\\t\\thandleSendMessage();\\n\\t\\t\\treturn false;\\n\\t\\t}\\n\\n\\t\\tif (chat.composer && handleFormattingShortcut(event, [...formattingButtons], chat.composer)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (event.shiftKey || event.ctrlKey || event.metaKey) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tswitch (event.key) {\\n\\t\\t\\tcase 'Escape': {\\n\\t\\t\\t\\tcloseEditing(event);\\n\\t\\t\\t\\tif (!input.value.trim()) onEscape?.();\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tcase 'ArrowUp': {\\n\\t\\t\\t\\tif (input.selectionEnd === 0) {\\n\\t\\t\\t\\t\\tevent.preventDefault();\\n\\t\\t\\t\\t\\tevent.stopPropagation();\\n\\n\\t\\t\\t\\t\\tonNavigateToPreviousMessage?.();\\n\\n\\t\\t\\t\\t\\tif (event.altKey) {\\n\\t\\t\\t\\t\\t\\tinput.setSelectionRange(0, 0);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tcase 'ArrowDown': {\\n\\t\\t\\t\\tif (input.selectionEnd === input.value.length) {\\n\\t\\t\\t\\t\\tevent.preventDefault();\\n\\t\\t\\t\\t\\tevent.stopPropagation();\\n\\n\\t\\t\\t\\t\\tonNavigateToNextMessage?.();\\n\\n\\t\\t\\t\\t\\tif (event.altKey) {\\n\\t\\t\\t\\t\\t\\tinput.setSelectionRange(input.value.length, input.value.length);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tonTyping?.();\\n\\t});\\n\\n\\tconst isEditing = useSubscription({\\n\\t\\tgetCurrentValue: chat.composer?.editing.get ?? getEmptyFalse,\\n\\t\\tsubscribe: chat.composer?.editing.subscribe ?? emptySubscribe,\\n\\t});\\n\\n\\tconst isRecordingAudio = useSubscription({\\n\\t\\tgetCurrentValue: chat.composer?.recording.get ?? getEmptyFalse,\\n\\t\\tsubscribe: chat.composer?.recording.subscribe ?? emptySubscribe,\\n\\t});\\n\\n\\tconst isMicrophoneDenied = useSubscription({\\n\\t\\tgetCurrentValue: chat.composer?.isMicrophoneDenied.get ?? getEmptyFalse,\\n\\t\\tsubscribe: chat.composer?.isMicrophoneDenied.subscribe ?? emptySubscribe,\\n\\t});\\n\\n\\tconst isRecordingVideo = useSubscription({\\n\\t\\tgetCurrentValue: chat.composer?.recordingVideo.get ?? getEmptyFalse,\\n\\t\\tsubscribe: chat.composer?.recordingVideo.subscribe ?? emptySubscribe,\\n\\t});\\n\\n\\tconst formatters = useSubscription({\\n\\t\\tgetCurrentValue: chat.composer?.formatters.get ?? getEmptyArray,\\n\\t\\tsubscribe: chat.composer?.formatters.subscribe ?? emptySubscribe,\\n\\t});\\n\\n\\tconst isRecording = isRecordingAudio || isRecordingVideo;\\n\\n\\tconst { textAreaStyle, shadowStyle } = useAutoGrow(textareaRef, shadowRef, isRecordingAudio);\\n\\n\\tconst canSend = useReactiveValue(useCallback(() => roomCoordinator.verifyCanSendMessage(room._id), [room._id]));\\n\\n\\tconst sizes = useContentBoxSize(textareaRef);\\n\\n\\tconst format = useFormatDateAndTime();\\n\\n\\tconst joinMutation = useMutation(async () => onJoin?.());\\n\\n\\tconst handlePaste: ClipboardEventHandler<HTMLTextAreaElement> = useMutableCallback((event) => {\\n\\t\\tconst { clipboardData } = event;\\n\\n\\t\\tif (!clipboardData) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst items = Array.from(clipboardData.items);\\n\\n\\t\\tif (items.some(({ kind, type }) => kind === 'string' && type === 'text/plain')) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst files = items\\n\\t\\t\\t.filter((item) => item.kind === 'file' && item.type.indexOf('image/') !== -1)\\n\\t\\t\\t.map((item) => {\\n\\t\\t\\t\\tconst fileItem = item.getAsFile();\\n\\n\\t\\t\\t\\tif (!fileItem) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tconst imageExtension = fileItem ? getImageExtensionFromMime(fileItem.type) : undefined;\\n\\n\\t\\t\\t\\tconst extension = imageExtension ? `.${imageExtension}` : '';\\n\\n\\t\\t\\t\\tObject.defineProperty(fileItem, 'name', {\\n\\t\\t\\t\\t\\twritable: true,\\n\\t\\t\\t\\t\\tvalue: `Clipboard - ${format(new Date())}${extension}`,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\treturn fileItem;\\n\\t\\t\\t})\\n\\t\\t\\t.filter((file): file is File => !!file);\\n\\n\\t\\tif (files.length) {\\n\\t\\t\\tevent.preventDefault();\\n\\t\\t\\tonUploadFiles?.(files);\\n\\t\\t}\\n\\t});\\n\\n\\tconst composerPopupConfig = useComposerPopup();\\n\\n\\tconst {\\n\\t\\tpopup,\\n\\t\\tfocused,\\n\\t\\titems,\\n\\t\\tariaActiveDescendant,\\n\\t\\tsuspended,\\n\\t\\tselect,\\n\\t\\tcommandsRef,\\n\\t\\tcallbackRef: c,\\n\\t\\tfilter,\\n\\t\\tclearPopup,\\n\\t} = useComposerBoxPopup<{ _id: string; sort?: number }>({\\n\\t\\tconfigurations: composerPopupConfig,\\n\\t});\\n\\n\\tconst keyDownHandlerCallbackRef = useCallback(\\n\\t\\t(node: HTMLTextAreaElement) => {\\n\\t\\t\\tif (node === null) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tnode.addEventListener('keydown', (e: KeyboardEvent) => {\\n\\t\\t\\t\\thandler(e);\\n\\t\\t\\t});\\n\\t\\t},\\n\\t\\t[handler],\\n\\t);\\n\\n\\tconst mergedRefs = useMessageComposerMergedRefs(c, textareaRef, callbackRef, autofocusRef, keyDownHandlerCallbackRef);\\n\\n\\tconst shouldPopupPreview = useEnablePopupPreview(filter, popup);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t{chat.composer?.quotedMessages && <MessageBoxReplies />}\\n\\t\\t\\t{shouldPopupPreview && popup && (\\n\\t\\t\\t\\t<ComposerBoxPopup select={select} items={items} focused={focused} title={popup.title} renderItem={popup.renderItem} />\\n\\t\\t\\t)}\\n\\t\\t\\t{/*\\n\\t\\t\\t\\tSlashCommand Preview popup works in a weird way\\n\\t\\t\\t\\tThere is only one trigger for all the commands: \\\"/\\\"\\n\\t\\t\\t\\tAfter that we need to the slashcommand list and check if the command exists and provide the preview\\n\\t\\t\\t\\tif not the query is `suspend` which means the slashcommand is not found or doesn't have a preview\\n\\t\\t\\t*/}\\n\\t\\t\\t{popup?.preview && (\\n\\t\\t\\t\\t<ComposerBoxPopupPreview\\n\\t\\t\\t\\t\\tselect={select}\\n\\t\\t\\t\\t\\titems={items as any}\\n\\t\\t\\t\\t\\tfocused={focused as any}\\n\\t\\t\\t\\t\\trenderItem={popup.renderItem}\\n\\t\\t\\t\\t\\tref={commandsRef}\\n\\t\\t\\t\\t\\trid={room._id}\\n\\t\\t\\t\\t\\ttmid={tmid}\\n\\t\\t\\t\\t\\tsuspended={suspended}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\t\\t\\t<MessageBoxHint\\n\\t\\t\\t\\tisEditing={isEditing}\\n\\t\\t\\t\\te2eEnabled={e2eEnabled}\\n\\t\\t\\t\\tunencryptedMessagesAllowed={unencryptedMessagesAllowed}\\n\\t\\t\\t\\tisMobile={isMobile}\\n\\t\\t\\t/>\\n\\t\\t\\t{isRecordingVideo && <VideoMessageRecorder reference={messageComposerRef} rid={room._id} tmid={tmid} />}\\n\\t\\t\\t<MessageComposer ref={messageComposerRef} variant={isEditing ? 'editing' : undefined}>\\n\\t\\t\\t\\t{isRecordingAudio && <AudioMessageRecorder rid={room._id} isMicrophoneDenied={isMicrophoneDenied} />}\\n\\t\\t\\t\\t<MessageComposerInput\\n\\t\\t\\t\\t\\tref={mergedRefs}\\n\\t\\t\\t\\t\\taria-label={composerPlaceholder}\\n\\t\\t\\t\\t\\tname='msg'\\n\\t\\t\\t\\t\\tdisabled={isRecording || !canSend}\\n\\t\\t\\t\\t\\tonChange={setTyping}\\n\\t\\t\\t\\t\\tstyle={textAreaStyle}\\n\\t\\t\\t\\t\\tplaceholder={composerPlaceholder}\\n\\t\\t\\t\\t\\tonPaste={handlePaste}\\n\\t\\t\\t\\t\\taria-activedescendant={ariaActiveDescendant}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t\\t<div ref={shadowRef} style={shadowStyle} />\\n\\t\\t\\t\\t<MessageComposerToolbar>\\n\\t\\t\\t\\t\\t<MessageComposerToolbarActions aria-label={t('Message_composer_toolbox_primary_actions')}>\\n\\t\\t\\t\\t\\t\\t<MessageComposerAction\\n\\t\\t\\t\\t\\t\\t\\ticon='emoji'\\n\\t\\t\\t\\t\\t\\t\\tdisabled={!useEmojis || isRecording || !canSend}\\n\\t\\t\\t\\t\\t\\t\\tonClick={handleOpenEmojiPicker}\\n\\t\\t\\t\\t\\t\\t\\ttitle={t('Emoji')}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t<MessageComposerActionsDivider />\\n\\t\\t\\t\\t\\t\\t{chat.composer && formatters.length > 0 && (\\n\\t\\t\\t\\t\\t\\t\\t<MessageBoxFormattingToolbar\\n\\t\\t\\t\\t\\t\\t\\t\\tcomposer={chat.composer}\\n\\t\\t\\t\\t\\t\\t\\t\\tvariant={sizes.inlineSize < 480 ? 'small' : 'large'}\\n\\t\\t\\t\\t\\t\\t\\t\\titems={formatters}\\n\\t\\t\\t\\t\\t\\t\\t\\tdisabled={isRecording || !canSend}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t<MessageBoxActionsToolbar\\n\\t\\t\\t\\t\\t\\t\\tcanSend={canSend}\\n\\t\\t\\t\\t\\t\\t\\ttyping={typing}\\n\\t\\t\\t\\t\\t\\t\\tisMicrophoneDenied={isMicrophoneDenied}\\n\\t\\t\\t\\t\\t\\t\\trid={room._id}\\n\\t\\t\\t\\t\\t\\t\\ttmid={tmid}\\n\\t\\t\\t\\t\\t\\t\\tisRecording={isRecording}\\n\\t\\t\\t\\t\\t\\t\\tvariant={sizes.inlineSize < 480 ? 'small' : 'large'}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</MessageComposerToolbarActions>\\n\\t\\t\\t\\t\\t<MessageComposerToolbarSubmit>\\n\\t\\t\\t\\t\\t\\t{!canSend && (\\n\\t\\t\\t\\t\\t\\t\\t<MessageComposerButton primary onClick={onJoin} loading={joinMutation.isLoading}>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Join')}\\n\\t\\t\\t\\t\\t\\t\\t</MessageComposerButton>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t{canSend && (\\n\\t\\t\\t\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t\\t\\t\\t{isEditing && <MessageComposerButton onClick={closeEditing}>{t('Cancel')}</MessageComposerButton>}\\n\\t\\t\\t\\t\\t\\t\\t\\t<MessageComposerAction\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taria-label={t('Send')}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ticon='send'\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tdisabled={!canSend || (!typing && !isEditing)}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tonClick={handleSendMessage}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsecondary={typing || isEditing}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tinfo={typing || isEditing}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t</>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</MessageComposerToolbarSubmit>\\n\\t\\t\\t\\t</MessageComposerToolbar>\\n\\t\\t\\t</MessageComposer>\\n\\t\\t\\t<ComposerUserActionIndicator rid={room._id} tmid={tmid} />\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default memo(MessageBox);\\n\",null],\"names\":[\"useContentBoxSize\",\"useMutableCallback\",\"MessageComposerAction\",\"MessageComposerToolbarActions\",\"MessageComposer\",\"MessageComposerInput\",\"MessageComposerToolbar\",\"MessageComposerActionsDivider\",\"MessageComposerToolbarSubmit\",\"MessageComposerButton\",\"useTranslation\",\"useUserPreference\",\"useLayout\",\"useSetting\",\"useMutation\",\"React\",\"memo\",\"useRef\",\"useReducer\",\"useCallback\",\"useSubscription\",\"createComposerAPI\",\"formattingButtons\",\"getImageExtensionFromMime\",\"useFormatDateAndTime\",\"useReactiveValue\",\"roomCoordinator\",\"keyCodes\",\"AudioMessageRecorder\",\"VideoMessageRecorder\",\"useChat\",\"useComposerPopup\",\"useRoom\",\"ComposerBoxPopup\",\"ComposerBoxPopupPreview\",\"ComposerUserActionIndicator\",\"useAutoGrow\",\"useComposerBoxPopup\",\"useEnablePopupPreview\",\"useMessageComposerMergedRefs\",\"MessageBoxActionsToolbar\",\"MessageBoxFormattingToolbar\",\"MessageBoxHint\",\"MessageBoxReplies\",\"useMessageBoxAutoFocus\",\"useMessageBoxPlaceholder\",\"module\",\"link\",\"v\",\"default\",\"reducer\",\"_\",\"event\",\"target\",\"Boolean\",\"value\",\"trim\",\"handleFormattingShortcut\",\"composer\",\"isMacOS\",\"navigator\",\"platform\",\"indexOf\",\"isCmdOrCtrlPressed\",\"metaKey\",\"ctrlKey\",\"key\",\"toLowerCase\",\"formatter\",\"find\",\"command\",\"wrapSelection\",\"pattern\",\"emptySubscribe\",\"undefined\",\"getEmptyFalse\",\"a\",\"getEmptyArray\",\"exportDefault\",\"_ref\",\"_chat$composer$editin\",\"_chat$composer5\",\"_chat$composer$editin2\",\"_chat$composer6\",\"_chat$composer$record\",\"_chat$composer7\",\"_chat$composer$record2\",\"_chat$composer8\",\"_chat$composer$isMicr\",\"_chat$composer9\",\"_chat$composer$isMicr2\",\"_chat$composer10\",\"_chat$composer$record3\",\"_chat$composer11\",\"_chat$composer$record4\",\"_chat$composer12\",\"_chat$composer$format\",\"_chat$composer13\",\"_chat$composer$format2\",\"_chat$composer14\",\"_chat$composer15\",\"tmid\",\"onSend\",\"onJoin\",\"onNavigateToNextMessage\",\"onNavigateToPreviousMessage\",\"onUploadFiles\",\"onEscape\",\"onTyping\",\"tshow\",\"previewUrls\",\"chat\",\"room\",\"t\",\"e2eEnabled\",\"unencryptedMessagesAllowed\",\"isSlashCommandAllowed\",\"encrypted\",\"composerPlaceholder\",\"typing\",\"setTyping\",\"isMobile\",\"sendOnEnterBehavior\",\"sendOnEnter\",\"Error\",\"textareaRef\",\"messageComposerRef\",\"shadowRef\",\"storageID\",\"concat\",\"_id\",\"callbackRef\",\"node\",\"setComposerAPI\",\"autofocusRef\",\"useEmojis\",\"handleOpenEmojiPicker\",\"e\",\"stopPropagation\",\"preventDefault\",\"ref\",\"current\",\"emojiPicker\",\"open\",\"emoji\",\"_chat$composer\",\"insertText\",\"handleSendMessage\",\"_chat$composer$text\",\"_chat$composer2\",\"_chat$composer3\",\"text\",\"clear\",\"clearPopup\",\"closeEditing\",\"currentEditing\",\"reset\",\"then\",\"_chat$currentEditing\",\"cancel\",\"handler\",\"which\",\"keyCode\",\"input\",\"isSubmitKey\",\"CARRIAGE_RETURN\",\"NEW_LINE\",\"withModifier\",\"shiftKey\",\"altKey\",\"_chat$composer4\",\"insertNewLine\",\"selectionEnd\",\"setSelectionRange\",\"length\",\"isEditing\",\"getCurrentValue\",\"editing\",\"get\",\"subscribe\",\"isRecordingAudio\",\"recording\",\"isMicrophoneDenied\",\"isRecordingVideo\",\"recordingVideo\",\"formatters\",\"isRecording\",\"textAreaStyle\",\"shadowStyle\",\"canSend\",\"verifyCanSendMessage\",\"sizes\",\"format\",\"joinMutation\",\"handlePaste\",\"clipboardData\",\"items\",\"Array\",\"from\",\"some\",\"_ref2\",\"kind\",\"type\",\"files\",\"filter\",\"item\",\"map\",\"fileItem\",\"getAsFile\",\"imageExtension\",\"extension\",\"Object\",\"defineProperty\",\"writable\",\"Date\",\"file\",\"composerPopupConfig\",\"popup\",\"focused\",\"ariaActiveDescendant\",\"suspended\",\"select\",\"commandsRef\",\"c\",\"configurations\",\"keyDownHandlerCallbackRef\",\"addEventListener\",\"mergedRefs\",\"shouldPopupPreview\",\"createElement\",\"Fragment\",\"quotedMessages\",\"title\",\"renderItem\",\"preview\",\"rid\",\"reference\",\"variant\",\"name\",\"disabled\",\"onChange\",\"style\",\"placeholder\",\"onPaste\",\"icon\",\"onClick\",\"inlineSize\",\"primary\",\"loading\",\"isLoading\",\"secondary\",\"info\"],\"mappings\":\"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\"}"}