{"code":"function module(n,e,t){var i,o,a,r,l,c,u,s,f,d,k,g,m,p,h,E,P,b;t.link(\"@babel/runtime/regenerator\",{default:function(n){i=n}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(n){o=n}},1),t.link(\"@rocket.chat/fuselage\",{Callout:function(n){a=n},ButtonGroup:function(n){r=n},Button:function(n){l=n}},0),t.link(\"@rocket.chat/ui-contexts\",{usePermission:function(n){c=n}},1),t.link(\"react\",{default:function(n){u=n},memo:function(n){s=n},useState:function(n){f=n}},2),t.link(\"react-i18next\",{useTranslation:function(n){d=n}},3),t.link(\"../../../components/Page\",{Page:function(n){k=n},PageHeader:function(n){g=n},PageScrollableContentWithShadow:function(n){m=n}},4),t.link(\"../../../components/PageSkeleton\",{default:function(n){p=n}},5),t.link(\"../../../hooks/useWorkspaceInfo\",{useWorkspaceInfo:function(n){h=n}},6),t.link(\"../../../lib/download\",{downloadJsonAs:function(n){E=n}},7),t.link(\"../../notAuthorized/NotAuthorizedPage\",{default:function(n){P=n}},8),t.link(\"./WorkspacePage\",{default:function(n){b=n}},9),t.exportDefault(s(function(){var n=d().t,e=c(\"view-statistics\"),t=f(!1),s=o(t,2),w=s[0],v=s[1],L=h({refreshStatistics:w}),S=o(L,3),y=S[0],C=S[1],I=S[2];if(!e)return u.createElement(P,null);if(y.isLoading||C.isLoading||I.isLoading)return u.createElement(p,null);var W=function(){return i.async(function(n){for(;;)switch(n.prev=n.next){case 0:v(!0),I.refetch();case 2:case\"end\":return n.stop()}},null,null,null,Promise)};return y.isError||C.isError||I.isError?u.createElement(k,null,u.createElement(g,{title:n(\"Workspace\")},u.createElement(r,null,u.createElement(l,{icon:\"reload\",primary:!0,type:\"button\",onClick:W,loading:I.isLoading},n(\"Refresh\")))),u.createElement(m,null,u.createElement(a,{type:\"danger\"},n(\"Error_loading_pages\")))):u.createElement(b,{canViewStatistics:e,serverInfo:y.data,statistics:I.data,statisticsIsLoading:I.isLoading,instances:C.data,onClickRefreshButton:W,onClickDownloadInfo:function(){E(I.data,\"statistics\")}})}))}","map":"{\"version\":3,\"sources\":[\"client/views/admin/workspace/WorkspaceRoute.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Callout, ButtonGroup, Button } from '@rocket.chat/fuselage';\\nimport { usePermission } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { memo, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { Page, PageHeader, PageScrollableContentWithShadow } from '../../../components/Page';\\nimport PageSkeleton from '../../../components/PageSkeleton';\\nimport { useWorkspaceInfo } from '../../../hooks/useWorkspaceInfo';\\nimport { downloadJsonAs } from '../../../lib/download';\\nimport NotAuthorizedPage from '../../notAuthorized/NotAuthorizedPage';\\nimport WorkspacePage from './WorkspacePage';\\n\\nconst WorkspaceRoute = (): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst canViewStatistics = usePermission('view-statistics');\\n\\n\\tconst [refreshStatistics, setRefreshStatistics] = useState(false);\\n\\tconst [serverInfoQuery, instancesQuery, statisticsQuery] = useWorkspaceInfo({ refreshStatistics });\\n\\n\\tif (!canViewStatistics) {\\n\\t\\treturn <NotAuthorizedPage />;\\n\\t}\\n\\n\\tif (serverInfoQuery.isLoading || instancesQuery.isLoading || statisticsQuery.isLoading) {\\n\\t\\treturn <PageSkeleton />;\\n\\t}\\n\\n\\tconst handleClickRefreshButton = async () => {\\n\\t\\tsetRefreshStatistics(true);\\n\\t\\tstatisticsQuery.refetch();\\n\\t};\\n\\n\\tconst handleClickDownloadInfo = (): void => {\\n\\t\\tdownloadJsonAs(statisticsQuery.data, 'statistics');\\n\\t};\\n\\n\\tif (serverInfoQuery.isError || instancesQuery.isError || statisticsQuery.isError) {\\n\\t\\treturn (\\n\\t\\t\\t<Page>\\n\\t\\t\\t\\t<PageHeader title={t('Workspace')}>\\n\\t\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t\\t<Button icon='reload' primary type='button' onClick={handleClickRefreshButton} loading={statisticsQuery.isLoading}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Refresh')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t\\t</PageHeader>\\n\\t\\t\\t\\t<PageScrollableContentWithShadow>\\n\\t\\t\\t\\t\\t<Callout type='danger'>{t('Error_loading_pages')}</Callout>\\n\\t\\t\\t\\t</PageScrollableContentWithShadow>\\n\\t\\t\\t</Page>\\n\\t\\t);\\n\\t}\\n\\n\\treturn (\\n\\t\\t<WorkspacePage\\n\\t\\t\\tcanViewStatistics={canViewStatistics}\\n\\t\\t\\tserverInfo={serverInfoQuery.data}\\n\\t\\t\\tstatistics={statisticsQuery.data}\\n\\t\\t\\tstatisticsIsLoading={statisticsQuery.isLoading}\\n\\t\\t\\tinstances={instancesQuery.data}\\n\\t\\t\\tonClickRefreshButton={handleClickRefreshButton}\\n\\t\\t\\tonClickDownloadInfo={handleClickDownloadInfo}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(WorkspaceRoute);\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_slicedToArray\",\"Callout\",\"ButtonGroup\",\"Button\",\"usePermission\",\"React\",\"memo\",\"useState\",\"useTranslation\",\"Page\",\"PageHeader\",\"PageScrollableContentWithShadow\",\"PageSkeleton\",\"useWorkspaceInfo\",\"downloadJsonAs\",\"NotAuthorizedPage\",\"WorkspacePage\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"t\",\"_useTranslation\",\"canViewStatistics\",\"_useState\",\"_useState2\",\"refreshStatistics\",\"setRefreshStatistics\",\"_useWorkspaceInfo\",\"_useWorkspaceInfo2\",\"serverInfoQuery\",\"instancesQuery\",\"statisticsQuery\",\"createElement\",\"isLoading\",\"handleClickRefreshButton\",\"async\",\"_context\",\"prev\",\"next\",\"refetch\",\"stop\",\"Promise\",\"isError\",\"title\",\"icon\",\"primary\",\"type\",\"onClick\",\"loading\",\"serverInfo\",\"data\",\"statistics\",\"statisticsIsLoading\",\"instances\",\"onClickRefreshButton\",\"onClickDownloadInfo\"],\"mappings\":\"uBAaA,IAbAA,EAAqEC,EAArEC,EAASC,EAASC,EAAmDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAnDC,EAAaC,IAAA,CAAA,6BAAc,CAAAC,QAAwB,SAAAC,CAAA,EAAArB,EAAAqB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAApB,EAAAoB,CAAA,CAAA,EAAA,GAAtCH,EAAMC,IAAE,CAAA,wBAAM,CAAuBjB,QAAC,SAAAmB,CAAA,EAAAnB,EAAAmB,CAAA,EAAAlB,YAAA,SAAAkB,CAAA,EAAAlB,EAAAkB,CAAA,EAAAjB,OAAA,SAAAiB,CAAA,EAAAjB,EAAAiB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAd,cAAA,SAAAgB,CAAA,EAAAhB,EAAAgB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAf,EAAAe,CAAA,EAAAd,KAAA,SAAAc,CAAA,EAAAd,EAAAc,CAAA,EAAAb,SAAA,SAAAa,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAV,eAAA,SAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAT,KAAA,SAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,WAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,gCAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,mCAAA,CAAA,QAAA,SAAAE,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kCAAA,CAAAL,iBAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAJ,eAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wCAAA,CAAA,QAAA,SAAAE,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kBAAA,CAAA,QAAA,SAAAE,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAArEH,EAAOI,aAAW,CAmEHf,EAtDQ,WACtB,IAAQgB,EAACC,AAAKf,IAANc,CAAC,CACHE,EAAoBpB,EAAc,mBAExCqB,EAAkDlB,EAAS,CAAA,GAAMmB,EAAA1B,EAAAyB,EAAA,GAA1DE,EAAiBD,CAAA,CAAA,EAAA,CAAEE,EAAoBF,CAAA,CAAA,EAAA,CAC9CG,EAA2DhB,EAAiB,CAAEc,kBAAAA,CAAiB,GAAGG,EAAA9B,EAAA6B,EAAA,GAA3FE,EAAeD,CAAA,CAAA,EAAA,CAAEE,EAAcF,CAAA,CAAA,EAAA,CAAEG,EAAeH,CAAA,CAAA,EAAA,CAEvD,GAAI,CAACN,EACJ,OAAOnB,EAAA6B,aAAA,CAACnB,EAAiB,MAG1B,GAAIgB,EAAgBI,SAAS,EAAIH,EAAeG,SAAS,EAAIF,EAAgBE,SAAS,CACrF,OAAO9B,EAAA6B,aAAA,CAACtB,EAAY,MAGrB,IAAMwB,EAA2B,WAAA,OAAArC,EAAAsC,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAChCZ,EAAqB,CAAA,GACrBK,EAAgBQ,OAAO,EAAG,MAAA,EAAA,IAAA,MAAA,OAAAH,EAAAI,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,SAO3B,AAAIZ,EAAgBa,OAAO,EAAIZ,EAAeY,OAAO,EAAIX,EAAgBW,OAAO,CAE9EvC,EAAA6B,aAAA,CAACzB,EAAI,KACJJ,EAAA6B,aAAA,CAACxB,EAAU,CAACmC,MAAOvB,EAAE,YAAa,EACjCjB,EAAA6B,aAAA,CAAChC,EAAW,KACXG,EAAA6B,aAAA,CAAC/B,EAAM,CAAC2C,KAAK,SAASC,QAAO,CAAA,EAACC,KAAK,SAASC,QAASb,EAA0Bc,QAASjB,EAAgBE,SAAAA,AAAU,EAChHb,EAAE,cAINjB,EAAA6B,aAAA,CAACvB,EAA+B,KAC/BN,EAAA6B,aAAA,CAACjC,EAAO,CAAC+C,KAAK,QAAQ,EAAE1B,EAAE,0BAO7BjB,EAAA6B,aAAA,CAAClB,EAAa,CACbQ,kBAAmBA,EACnB2B,WAAYpB,EAAgBqB,IAAK,CACjCC,WAAYpB,EAAgBmB,IAAK,CACjCE,oBAAqBrB,EAAgBE,SAAU,CAC/CoB,UAAWvB,EAAeoB,IAAK,CAC/BI,qBAAsBpB,EACtBqB,oBA7B8B,WAC/B3C,EAAemB,EAAgBmB,IAAI,CAAE,aACtC,CA2B+C,EAGhD\"}"}