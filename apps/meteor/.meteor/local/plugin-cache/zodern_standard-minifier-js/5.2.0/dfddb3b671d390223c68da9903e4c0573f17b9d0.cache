{"code":"function module(e,l,t){let o,n,a,i,r,m,s,u;t.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){o=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){n=e}},0),t.link(\"react\",{default(e){a=e},useState(e){i=e},useCallback(e){r=e},useMemo(e){m=e}},1),t.link(\"./LeaveTeamModalChannels\",{default(e){s=e}},2),t.link(\"./LeaveTeamModalConfirmation\",{default(e){u=e}},3);let c={LIST_ROOMS:\"LIST_ROOMS\",CONFIRM_LEAVE:\"CONFIRM_LEAVE\"};t.exportDefault(e=>{let{rooms:l,onCancel:t,onConfirm:d}=e,C=m(()=>l,[l]),[O,f]=i(0===C.length?c.CONFIRM_LEAVE:c.LIST_ROOMS),[R,E]=i({}),M=l.filter(e=>{let{isLastOwner:l}=e;return l}),_=r(()=>f(c.CONFIRM_LEAVE),[]),L=r(()=>f(c.LIST_ROOMS),[]),g=r(e=>{E(l=>l[e._id]?(delete l[e._id],o({},l)):o(o({},l),{},{[e._id]:e}))},[]),h=n(()=>{E(e=>0===Object.values(e).filter(Boolean).length?Object.fromEntries(l.filter(e=>{let{isLastOwner:l}=e;return!l}).map(e=>[e._id,e])):{})});return O===c.CONFIRM_LEAVE?a.createElement(u,{selectedRooms:R,onConfirm:d,onClose:t,onCancel:l.length>0?L:void 0}):a.createElement(s,{rooms:l,onCancel:t,eligibleRoomsLength:l.length-M.length,selectedRooms:R,onToggleAllRooms:h,onConfirm:_,onChangeRoomSelection:g})})}","map":"{\"version\":3,\"sources\":[\"client/views/teams/contextualBar/info/LeaveTeam/LeaveTeamModal/LeaveTeamModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, Serialized } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport type { ReactElement } from 'react';\\nimport React, { useState, useCallback, useMemo } from 'react';\\n\\nimport LeaveTeamModalChannels from './LeaveTeamModalChannels';\\nimport LeaveTeamModalConfirmation from './LeaveTeamModalConfirmation';\\n\\nconst LEAVE_TEAM_STEPS = {\\n\\tLIST_ROOMS: 'LIST_ROOMS',\\n\\tCONFIRM_LEAVE: 'CONFIRM_LEAVE',\\n} as const;\\n\\ntype LeaveTeamModalProps = {\\n\\trooms: (Serialized<IRoom> & { isLastOwner?: boolean })[];\\n\\tonCancel: () => void;\\n\\tonConfirm: () => void;\\n};\\n\\nconst LeaveTeamModal = ({ rooms, onCancel, onConfirm }: LeaveTeamModalProps): ReactElement => {\\n\\tconst memoizedRooms = useMemo(() => rooms, [rooms]);\\n\\tconst [step, setStep] = useState(memoizedRooms.length === 0 ? LEAVE_TEAM_STEPS.CONFIRM_LEAVE : LEAVE_TEAM_STEPS.LIST_ROOMS);\\n\\n\\tconst [selectedRooms, setSelectedRooms] = useState<{ [key: string]: Serialized<IRoom> & { isLastOwner?: boolean } }>({});\\n\\tconst lastOwnerRooms = rooms.filter(({ isLastOwner }) => isLastOwner);\\n\\n\\tconst handleContinue = useCallback(() => setStep(LEAVE_TEAM_STEPS.CONFIRM_LEAVE), []);\\n\\tconst handleReturn = useCallback(() => setStep(LEAVE_TEAM_STEPS.LIST_ROOMS), []);\\n\\n\\tconst onChangeRoomSelection = useCallback((room) => {\\n\\t\\tsetSelectedRooms((selectedRooms) => {\\n\\t\\t\\tif (selectedRooms[room._id]) {\\n\\t\\t\\t\\tdelete selectedRooms[room._id];\\n\\t\\t\\t\\treturn { ...selectedRooms };\\n\\t\\t\\t}\\n\\t\\t\\treturn { ...selectedRooms, [room._id]: room };\\n\\t\\t});\\n\\t}, []);\\n\\n\\tconst onToggleAllRooms = useMutableCallback(() => {\\n\\t\\tsetSelectedRooms((selectedRooms) => {\\n\\t\\t\\tif (Object.values(selectedRooms).filter(Boolean).length === 0) {\\n\\t\\t\\t\\treturn Object.fromEntries(rooms.filter(({ isLastOwner }) => !isLastOwner).map((room) => [room._id, room]));\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn {};\\n\\t\\t});\\n\\t});\\n\\n\\tif (step === LEAVE_TEAM_STEPS.CONFIRM_LEAVE) {\\n\\t\\treturn (\\n\\t\\t\\t<LeaveTeamModalConfirmation\\n\\t\\t\\t\\tselectedRooms={selectedRooms}\\n\\t\\t\\t\\tonConfirm={onConfirm}\\n\\t\\t\\t\\tonClose={onCancel}\\n\\t\\t\\t\\tonCancel={rooms.length > 0 ? handleReturn : undefined}\\n\\t\\t\\t/>\\n\\t\\t);\\n\\t}\\n\\n\\treturn (\\n\\t\\t<LeaveTeamModalChannels\\n\\t\\t\\trooms={rooms}\\n\\t\\t\\tonCancel={onCancel}\\n\\t\\t\\teligibleRoomsLength={rooms.length - lastOwnerRooms.length}\\n\\t\\t\\tselectedRooms={selectedRooms}\\n\\t\\t\\tonToggleAllRooms={onToggleAllRooms}\\n\\t\\t\\tonConfirm={handleContinue}\\n\\t\\t\\tonChangeRoomSelection={onChangeRoomSelection}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default LeaveTeamModal;\\n\",null],\"names\":[\"_objectSpread\",\"useMutableCallback\",\"React\",\"useState\",\"useCallback\",\"useMemo\",\"LeaveTeamModalChannels\",\"LeaveTeamModalConfirmation\",\"module\",\"link\",\"default\",\"v\",\"LEAVE_TEAM_STEPS\",\"LIST_ROOMS\",\"CONFIRM_LEAVE\",\"exportDefault\",\"_ref\",\"rooms\",\"onCancel\",\"onConfirm\",\"memoizedRooms\",\"step\",\"setStep\",\"length\",\"selectedRooms\",\"setSelectedRooms\",\"lastOwnerRooms\",\"filter\",\"_ref2\",\"isLastOwner\",\"handleContinue\",\"handleReturn\",\"onChangeRoomSelection\",\"room\",\"_id\",\"onToggleAllRooms\",\"Object\",\"values\",\"Boolean\",\"fromEntries\",\"_ref3\",\"map\",\"createElement\",\"onClose\",\"undefined\",\"eligibleRoomsLength\"],\"mappings\":\"2BACAA,EAAAC,EAAiEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAxDC,EAAAC,IAAoB,CAAA,uCAAoC,CAAAC,QAAAC,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAxDH,EAAoBC,IAAA,CAAM,8BAA8B,CAAAR,mBAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAT,EAAAS,CAAA,EAAAR,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,YAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,QAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAC,QAAAC,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,+BAAA,CAAAC,QAAAC,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAOjE,IAAMC,EAAmB,CACxBC,WAAY,aACZC,cAAe,iBAThBN,EAAOO,aAAE,CAkBcC,IAAsE,GAArE,CAAEC,MAAAA,CAAK,CAAEC,SAAAA,CAAQ,CAAEC,UAAAA,CAAAA,CAAgC,CAAAH,EACpEI,EAAgBf,EAAQ,IAAMY,EAAO,CAACA,EAAM,EAC5C,CAACI,EAAMC,EAAQ,CAAGnB,EAASiB,AAAyB,IAAzBA,EAAcG,MAAM,CAASX,EAAiBE,aAAa,CAAGF,EAAiBC,UAAU,EAEpH,CAACW,EAAeC,EAAiB,CAAGtB,EAA2E,CAAA,GAC/GuB,EAAiBT,EAAMU,MAAM,CAACC,IAAA,GAAC,CAAEC,YAAAA,CAAAA,CAAa,CAAAD,EAAA,OAAKC,CAAW,GAE9DC,EAAiB1B,EAAY,IAAMkB,EAAQV,EAAiBE,aAAa,EAAG,EAAE,EAC9EiB,EAAe3B,EAAY,IAAMkB,EAAQV,EAAiBC,UAAU,EAAG,EAAE,EAEzEmB,EAAwB5B,EAAa6B,IAC1CR,EAAkBD,GACjB,AAAIA,CAAa,CAACS,EAAKC,GAAG,CAAC,EAC1B,OAAOV,CAAa,CAACS,EAAKC,GAAG,CAAC,CAC9BlC,EAAA,CAAA,EAAYwB,IAEbxB,EAAAA,EAAA,CAAA,EAAYwB,GAAa,CAAA,EAAA,CAAE,CAACS,EAAKC,GAAG,CAAA,CAAGD,CAAI,GAE7C,EAAG,EAAE,EAECE,EAAmBlC,EAAmB,KAC3CwB,EAAkBD,GACjB,AAAIY,AAAwD,IAAxDA,OAAOC,MAAM,CAACb,GAAeG,MAAM,CAACW,SAASf,MAAM,CAC/Ca,OAAOG,WAAW,CAACtB,EAAMU,MAAM,CAACa,IAAA,GAAC,CAAEX,YAAAA,CAAAA,CAAa,CAAAW,EAAA,MAAK,CAACX,CAAW,GAAEY,GAAG,CAAER,GAAS,CAACA,EAAKC,GAAG,CAAED,EAAK,GAGlG,CAAA,EAET,UAEA,AAAIZ,IAAST,EAAiBE,aAAa,CAEzCZ,EAAAwC,aAAA,CAACnC,EAA0B,CAC1BiB,cAAeA,EACfL,UAAWA,EACXwB,QAASzB,EACTA,SAAUD,EAAMM,MAAM,CAAG,EAAIQ,EAAea,KAAAA,CAAU,GAMxD1C,EAAAwC,aAAA,CAACpC,EAAsB,CACtBW,MAAOA,EACPC,SAAUA,EACV2B,oBAAqB5B,EAAMM,MAAM,CAAGG,EAAeH,MAAO,CAC1DC,cAAeA,EACfW,iBAAkBA,EAClBhB,UAAWW,EACXE,sBAAuBA,CAAsB,EAGhD\"}"}