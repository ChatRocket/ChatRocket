{"code":"function module(e,i,r){let n,o;r.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),r.export({getVersionStatus:()=>t}),r.link(\"semver\",{default(e){o=e}},0);let t=(e,i)=>{let r=i.sort((e,i)=>o.compare(i.version,e.version)).filter(i=>{let[r]=o.prerelease(i.version)||[],[n]=o.prerelease(e)||[];return!r||r===n})[0],t=i.find(i=>i.version===e)||i.find(i=>o.satisfies(String(o.coerce(i.version)),\"=\".concat(o.major(e),\".\").concat(o.minor(e),\".x\"))),l=(null==t?void 0:t.expiration)&&new Date(t.expiration)<new Date,a=!l&&!!t;return n(n(n({label:\"outdated\",version:e},a&&o.gte(null==t?void 0:t.version,r.version)&&{label:\"latest\"}),a&&o.gt(r.version,null==t?void 0:t.version)&&{label:\"available_version\",version:r.version}),{},{expiration:null==t?void 0:t.expiration})}}","map":"{\"version\":3,\"sources\":[\"client/views/admin/workspace/VersionCard/getVersionStatus.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { SupportedVersions } from '@rocket.chat/server-cloud-communication';\\nimport semver from 'semver';\\n\\nimport type { VersionStatus } from './components/VersionTag';\\n\\nexport const getVersionStatus = (\\n\\tserverVersion: string,\\n\\tversions: SupportedVersions['versions'],\\n): { label: VersionStatus; expiration: Date | undefined; version: string } => {\\n\\tconst highestVersion = versions\\n\\t\\t.sort((prev, current) => semver.compare(current.version, prev.version))\\n\\t\\t.filter((v) => {\\n\\t\\t\\tconst [prerelease] = semver.prerelease(v.version) || [];\\n\\t\\t\\tconst [currentPrerelease] = semver.prerelease(serverVersion) || [];\\n\\n\\t\\t\\treturn !prerelease || prerelease === currentPrerelease;\\n\\t\\t})[0];\\n\\n\\tconst currentVersionData =\\n\\t\\tversions.find((v) => v.version === serverVersion) ||\\n\\t\\tversions.find((v) =>\\n\\t\\t\\tsemver.satisfies(String(semver.coerce(v.version)), `=${semver.major(serverVersion)}.${semver.minor(serverVersion)}.x`),\\n\\t\\t);\\n\\n\\tconst currentVersionIsExpired = currentVersionData?.expiration && new Date(currentVersionData.expiration) < new Date();\\n\\n\\tconst isSupported = !currentVersionIsExpired && !!currentVersionData;\\n\\n\\treturn {\\n\\t\\tlabel: 'outdated',\\n\\t\\tversion: serverVersion,\\n\\t\\t...(isSupported && semver.gte(currentVersionData?.version, highestVersion.version) && { label: 'latest' }),\\n\\t\\t...(isSupported &&\\n\\t\\t\\tsemver.gt(highestVersion.version, currentVersionData?.version) && { label: 'available_version', version: highestVersion.version }),\\n\\t\\texpiration: currentVersionData?.expiration,\\n\\t};\\n};\\n\",null],\"names\":[\"_objectSpread\",\"semver\",\"module\",\"link\",\"default\",\"v\",\"export\",\"getVersionStatus\",\"serverVersion\",\"versions\",\"highestVersion\",\"sort\",\"prev\",\"current\",\"compare\",\"version\",\"filter\",\"prerelease\",\"currentPrerelease\",\"currentVersionData\",\"find\",\"satisfies\",\"String\",\"coerce\",\"concat\",\"major\",\"minor\",\"currentVersionIsExpired\",\"expiration\",\"Date\",\"isSupported\",\"label\",\"gte\",\"gt\"],\"mappings\":\"2BACAA,EAA4BC,EAAfC,EAAMC,IAAS,CAAA,uCAAA,CAAAC,QAAAC,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAA5BH,EAAOI,MAAM,CAAA,CAAAC,iBAAeA,IAAAA,CAAA,GAAAL,EAAAC,IAAA,CAAA,SAAA,CAAAC,QAAAC,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAIrB,IAAME,EAAmBA,CAC/BC,EACAC,KAEA,IAAMC,EAAiBD,EACrBE,IAAI,CAAC,CAACC,EAAMC,IAAYZ,EAAOa,OAAO,CAACD,EAAQE,OAAO,CAAEH,EAAKG,OAAO,GACpEC,MAAM,CAAEX,IACR,GAAM,CAACY,EAAW,CAAGhB,EAAOgB,UAAU,CAACZ,EAAEU,OAAO,GAAK,EAAE,CACjD,CAACG,EAAkB,CAAGjB,EAAOgB,UAAU,CAACT,IAAkB,EAAE,CAElE,MAAO,CAACS,GAAcA,IAAeC,CACtC,EAAE,CAAC,EAAE,CAEAC,EACLV,EAASW,IAAI,CAAEf,GAAMA,EAAEU,OAAO,GAAKP,IACnCC,EAASW,IAAI,CAAEf,GACdJ,EAAOoB,SAAS,CAACC,OAAOrB,EAAOsB,MAAM,CAAClB,EAAEU,OAAO,GAAE,IAAAS,MAAA,CAAMvB,EAAOwB,KAAK,CAACjB,GAAc,KAAAgB,MAAA,CAAIvB,EAAOyB,KAAK,CAAClB,GAAc,QAG7GmB,EAA0B,AAAAR,CAAAA,MAAAA,EAAkB,KAAA,EAAlBA,EAAoBS,UAAU,AAAVA,GAAc,IAAIC,KAAKV,EAAmBS,UAAU,EAAI,IAAIC,KAE1GC,EAAc,CAACH,GAA2B,CAAC,CAACR,EAElD,OAAAnB,EAAAA,EAAAA,EAAA,CACC+B,MAAO,WACPhB,QAASP,CAAa,EAClBsB,GAAe7B,EAAO+B,GAAG,CAACb,MAAAA,EAAkB,KAAA,EAAlBA,EAAoBJ,OAAO,CAAEL,EAAeK,OAAO,GAAK,CAAEgB,MAAO,QAAQ,GACnGD,GACH7B,EAAOgC,EAAE,CAACvB,EAAeK,OAAO,CAAEI,MAAAA,EAAkB,KAAA,EAAlBA,EAAoBJ,OAAO,GAAK,CAAEgB,MAAO,oBAAqBhB,QAASL,EAAeK,OAAAA,AAAO,GAAE,CAAA,EAAA,CAClIa,WAAYT,MAAAA,EAAkB,KAAA,EAAlBA,EAAoBS,UAAAA,AAAU,EAE5C\"}"}