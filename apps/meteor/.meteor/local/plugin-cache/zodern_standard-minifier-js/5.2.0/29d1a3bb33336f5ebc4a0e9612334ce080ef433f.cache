{"code":"function module(e,n,t){var a,i,u,l,o,r,c,f,s,p,d,k,m=[\"id\",\"type\",\"i18nLabel\",\"i18nDescription\",\"values\",\"value\",\"packageValue\"];t.link(\"@babel/runtime/helpers/extends\",{default:function(e){a=e}},0),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){i=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useRouteParameter:function(e){u=e},useTranslation:function(e){l=e}},0),t.link(\"react\",{default:function(e){o=e},useMemo:function(e){r=e},useCallback:function(e){c=e}},1),t.link(\"react-hook-form\",{Controller:function(e){f=e},useFormContext:function(e){s=e}},2),t.link(\"../../../../../../ee/lib/misc/Utilities\",{Utilities:function(e){p=e}},3),t.link(\"../../../../../components/MarkdownText\",{default:function(e){d=e}},4),t.link(\"../../../../admin/settings/Setting/MemoizedSetting\",{default:function(e){k=e}},5);var v=function(e){var n=l();return Object.assign(c(function(t){if(!t)return\"\";for(var a=p.getI18nKeyForApp(t,e),i=arguments.length,u=Array(i>1?i-1:0),l=1;l<i;l++)u[l-1]=arguments[l];return n.has(a)?n.apply(void 0,[a].concat(u)):n.has(t)?n.apply(void 0,[t].concat(u)):t},[n,e]),{has:c(function(t){return!!t&&(n.has(p.getI18nKeyForApp(t,e))||n.has(t))},[n,e])})};t.exportDefault(function(e){var n,t=e.id,l=e.type,c=e.i18nLabel,p=e.i18nDescription,h=e.values,b=e.value,g=e.packageValue,y=i(e,m),x=v(u(\"id\")||\"\"),C=c&&x(c)||t||x(t),V=r(function(){return p&&o.createElement(d,{content:x(p)})},[p,x]),L=s().control;return null!=h&&h.length&&(n=h.map(function(e){var n=e.key,t=e.i18nLabel;return t?{key:n,i18nLabel:x(t)}:e})),o.createElement(f,{defaultValue:b||g,name:t,control:L,render:function(e){var i=e.field,u=i.onChange,r=i.value;return o.createElement(k,a({packageValue:g,type:l,label:C,hint:V,_id:t},n&&{values:n},y,{onChangeValue:u,value:r}))}})})}","map":"{\"version\":3,\"sources\":[\"client/views/marketplace/AppDetailsPage/tabs/AppSettings/AppSetting.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ISettingSelectValue } from '@rocket.chat/apps-engine/definition/settings';\\nimport type { ISetting } from '@rocket.chat/apps-engine/definition/settings/ISetting';\\nimport { useRouteParameter, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useMemo, useCallback } from 'react';\\nimport { Controller, useFormContext } from 'react-hook-form';\\n\\nimport { Utilities } from '../../../../../../ee/lib/misc/Utilities';\\nimport MarkdownText from '../../../../../components/MarkdownText';\\nimport MemoizedSetting from '../../../../admin/settings/Setting/MemoizedSetting';\\n\\ntype AppTranslationFunction = {\\n\\t(key: string, ...replaces: unknown[]): string;\\n\\thas: (key: string | undefined) => boolean;\\n};\\n\\nconst useAppTranslation = (appId: string): AppTranslationFunction => {\\n\\tconst t = useTranslation();\\n\\n\\tconst tApp = useCallback(\\n\\t\\t(key: string, ...args: unknown[]) => {\\n\\t\\t\\tif (!key) {\\n\\t\\t\\t\\treturn '';\\n\\t\\t\\t}\\n\\t\\t\\tconst appKey = Utilities.getI18nKeyForApp(key, appId);\\n\\n\\t\\t\\tif (t.has(appKey)) {\\n\\t\\t\\t\\treturn t(appKey, ...args);\\n\\t\\t\\t}\\n\\t\\t\\tif (t.has(key)) {\\n\\t\\t\\t\\treturn t(key, ...args);\\n\\t\\t\\t}\\n\\t\\t\\treturn key;\\n\\t\\t},\\n\\t\\t[t, appId],\\n\\t);\\n\\n\\treturn Object.assign(tApp, {\\n\\t\\thas: useCallback(\\n\\t\\t\\t(key: string | undefined) => {\\n\\t\\t\\t\\tif (!key) {\\n\\t\\t\\t\\t\\treturn false;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn t.has(Utilities.getI18nKeyForApp(key, appId)) || t.has(key);\\n\\t\\t\\t},\\n\\t\\t\\t[t, appId],\\n\\t\\t),\\n\\t});\\n};\\n\\nconst AppSetting = ({ id, type, i18nLabel, i18nDescription, values, value, packageValue, ...props }: ISetting): ReactElement => {\\n\\tconst appId = useRouteParameter('id');\\n\\tconst tApp = useAppTranslation(appId || '');\\n\\n\\tconst label = (i18nLabel && tApp(i18nLabel)) || id || tApp(id);\\n\\tconst hint = useMemo(() => i18nDescription && <MarkdownText content={tApp(i18nDescription)} />, [i18nDescription, tApp]);\\n\\n\\tconst { control } = useFormContext();\\n\\n\\tlet translatedValues: ISettingSelectValue[];\\n\\tif (values?.length) {\\n\\t\\ttranslatedValues = values.map((selectFieldEntry) => {\\n\\t\\t\\tconst { key, i18nLabel } = selectFieldEntry;\\n\\n\\t\\t\\tif (!i18nLabel) {\\n\\t\\t\\t\\treturn selectFieldEntry;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\tkey,\\n\\t\\t\\t\\ti18nLabel: tApp(i18nLabel),\\n\\t\\t\\t};\\n\\t\\t});\\n\\t}\\n\\n\\treturn (\\n\\t\\t<Controller\\n\\t\\t\\tdefaultValue={value || packageValue}\\n\\t\\t\\tname={id}\\n\\t\\t\\tcontrol={control}\\n\\t\\t\\trender={({ field: { onChange, value } }) => (\\n\\t\\t\\t\\t<MemoizedSetting\\n\\t\\t\\t\\t\\tpackageValue={packageValue}\\n\\t\\t\\t\\t\\ttype={type}\\n\\t\\t\\t\\t\\tlabel={label}\\n\\t\\t\\t\\t\\thint={hint}\\n\\t\\t\\t\\t\\t_id={id}\\n\\t\\t\\t\\t\\t{...(translatedValues && { values: translatedValues })}\\n\\t\\t\\t\\t\\t{...props}\\n\\t\\t\\t\\t\\tonChangeValue={onChange}\\n\\t\\t\\t\\t\\tvalue={value}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default AppSetting;\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"useRouteParameter\",\"useTranslation\",\"React\",\"useMemo\",\"useCallback\",\"Controller\",\"useFormContext\",\"Utilities\",\"MarkdownText\",\"MemoizedSetting\",\"module\",\"link\",\"default\",\"v\",\"useAppTranslation\",\"appId\",\"t\",\"Object\",\"assign\",\"key\",\"appKey\",\"getI18nKeyForApp\",\"_len\",\"arguments\",\"length\",\"args\",\"Array\",\"_key\",\"has\",\"apply\",\"concat\",\"exportDefault\",\"_ref\",\"translatedValues\",\"id\",\"type\",\"i18nLabel\",\"i18nDescription\",\"values\",\"value\",\"packageValue\",\"props\",\"_excluded\",\"tApp\",\"label\",\"hint\",\"createElement\",\"content\",\"control\",\"_useFormContext\",\"map\",\"selectFieldEntry\",\"defaultValue\",\"name\",\"render\",\"_ref2\",\"_ref2$field\",\"field\",\"onChange\",\"_id\",\"onChangeValue\"],\"mappings\":\"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\"}"}