{"code":"function module(e,t,s){let n,r,l,c,a,i;s.link(\"@rocket.chat/ui-contexts\",{useSetting(e){n=e}},0),s.link(\"react\",{default(e){r=e},useMemo(e){l=e},useEffect(e){c=e}},1),s.link(\"../contexts/UserPresenceContext\",{UserPresenceContext(e){a=e}},2),s.link(\"../lib/presence\",{Presence(e){i=e}},3),s.exportDefault(e=>{let{children:t}=e,s=n(\"Presence_broadcast_disabled\");return c(()=>{i.setStatus(s?\"disabled\":\"enabled\")},[s]),r.createElement(a.Provider,{value:l(()=>({queryUserData:e=>({subscribe:t=>(i.listen(e,t),()=>{i.stop(e,t)}),get:()=>i.store.get(e)})}),[])},t)})}","map":"{\"version\":3,\"sources\":[\"client/providers/UserPresenceProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useSetting } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ReactNode } from 'react';\\nimport React, { useMemo, useEffect } from 'react';\\n\\nimport { UserPresenceContext } from '../contexts/UserPresenceContext';\\nimport { Presence } from '../lib/presence';\\n\\ntype UserPresenceProviderProps = {\\n\\tchildren?: ReactNode;\\n};\\n\\nconst UserPresenceProvider = ({ children }: UserPresenceProviderProps): ReactElement => {\\n\\tconst usePresenceDisabled = useSetting<boolean>('Presence_broadcast_disabled');\\n\\n\\tuseEffect(() => {\\n\\t\\tPresence.setStatus(usePresenceDisabled ? 'disabled' : 'enabled');\\n\\t}, [usePresenceDisabled]);\\n\\n\\treturn (\\n\\t\\t<UserPresenceContext.Provider\\n\\t\\t\\tvalue={useMemo(\\n\\t\\t\\t\\t() => ({\\n\\t\\t\\t\\t\\tqueryUserData: (uid) => {\\n\\t\\t\\t\\t\\t\\tconst subscribe = (callback: () => void) => {\\n\\t\\t\\t\\t\\t\\t\\tPresence.listen(uid, callback);\\n\\n\\t\\t\\t\\t\\t\\t\\treturn () => {\\n\\t\\t\\t\\t\\t\\t\\t\\tPresence.stop(uid, callback);\\n\\t\\t\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t\\t\\t};\\n\\n\\t\\t\\t\\t\\t\\tconst get = () => Presence.store.get(uid);\\n\\n\\t\\t\\t\\t\\t\\treturn { subscribe, get };\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t}),\\n\\t\\t\\t\\t[],\\n\\t\\t\\t)}\\n\\t\\t>\\n\\t\\t\\t{children}\\n\\t\\t</UserPresenceContext.Provider>\\n\\t);\\n};\\n\\nexport default UserPresenceProvider;\\n\",null],\"names\":[\"useSetting\",\"React\",\"useMemo\",\"useEffect\",\"UserPresenceContext\",\"Presence\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"children\",\"usePresenceDisabled\",\"setStatus\",\"createElement\",\"Provider\",\"value\",\"queryUserData\",\"uid\",\"subscribe\",\"callback\",\"listen\",\"stop\",\"get\",\"store\"],\"mappings\":\"2BAAAA,EAAsDC,EAAAC,EAAAC,EAAAC,EAAAC,EAA7CC,EAAYC,IAAA,CAAM,2BAA2B,CAAAP,WAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAP,EAAAO,CAAA,EAAAN,QAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,UAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kCAAA,CAAAH,oBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kBAAA,CAAAF,SAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAAtDF,EAAOI,aAAY,CAWUC,IAA0D,GAAzD,CAAEC,SAAAA,CAAAA,CAAqC,CAAAD,EAC9DE,EAAsBb,EAAoB,+BAMhD,OAJAG,EAAU,KACTE,EAASS,SAAS,CAACD,EAAsB,WAAa,UACvD,EAAG,CAACA,EAAoB,EAGvBZ,EAAAc,aAAA,CAACX,EAAoBY,QAAQ,CAAA,CAC5BC,MAAOf,EACN,IAAO,CAAA,CACNgB,cAAgBC,GAWR,CAAA,CAAEC,UAVUC,IAClBhB,EAASiB,MAAM,CAACH,EAAKE,GAEd,KACNhB,EAASkB,IAAI,CAACJ,EAAKE,EACpB,GAKmBG,IAFRA,IAAMnB,EAASoB,KAAK,CAACD,GAAG,CAACL,EAEd,CAAA,IAGzB,EAAE,CACD,EAEDP,EAGJ\"}"}