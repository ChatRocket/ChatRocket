{"code":"function module(e,t,n){var l,i,r,a,o,u,c,m,f,s,d,p,E,k,b,g,h,x,y,S;n.link(\"@babel/runtime/helpers/extends\",{default:function(e){l=e}},0),n.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){i=e}},1),n.link(\"@rocket.chat/fuselage\",{Box:function(e){r=e},Field:function(e){a=e},FieldLabel:function(e){o=e},FieldRow:function(e){u=e},FieldError:function(e){c=e},TextInput:function(e){m=e},Button:function(e){f=e},ButtonGroup:function(e){s=e}},0),n.link(\"react\",{default:function(e){d=e}},1),n.link(\"react-hook-form\",{useController:function(e){p=e}},2),n.link(\"react-i18next\",{useTranslation:function(e){E=e}},3),n.link(\"../hooks/useAuditForm\",{useAuditForm:function(e){k=e}},4),n.link(\"../hooks/useSendTelemetryMutation\",{useSendTelemetryMutation:function(e){b=e}},5),n.link(\"./forms/DateRangePicker\",{default:function(e){g=e}},6),n.link(\"./tabs/DirectTab\",{default:function(e){h=e}},7),n.link(\"./tabs/OmnichannelTab\",{default:function(e){x=e}},8),n.link(\"./tabs/RoomsTab\",{default:function(e){y=e}},9),n.link(\"./tabs/UsersTab\",{default:function(e){S=e}},10),n.exportDefault(function(e){var t,n,v=e.type,D=e.onSubmit,T=e.setSelectedRoom,w=E().t,C=k(),F=C.control,R=C.handleSubmit,I=C.register,A=p({name:\"dateRange\",control:F}),M=A.field,_=A.fieldState,B=b();return d.createElement(\"form\",{onSubmit:R(function(){B.mutate({params:[{eventName:\"updateCounter\",settingsId:\"Message_Auditing_Apply_Count\",timestamp:Date.now()}]}),null==D||D(i({type:v},C.getValues()))})},d.createElement(r,{display:\"flex\",flexDirection:\"row\",justifyContent:\"stretch\",marginInline:-4},d.createElement(a,{flexShrink:1,marginInline:4},d.createElement(o,null,w(\"Message\")),d.createElement(u,null,d.createElement(m,l({placeholder:w(\"Search\")},I(\"msg\"))))),d.createElement(a,{flexShrink:1,marginInline:4},d.createElement(o,null,w(\"Date\")),d.createElement(u,null,d.createElement(g,{value:M.value,onChange:M.onChange,display:\"flex\",flexGrow:1}),(null===(t=_.error)||void 0===t?void 0:t.type)===\"required\"&&d.createElement(c,null,w(\"Required_field\",{field:w(\"Date\")})),(null===(n=_.error)||void 0===n?void 0:n.type)===\"validate\"&&d.createElement(c,null,_.error.message)))),d.createElement(r,{display:\"flex\",flexDirection:\"row\",alignItems:\"flex-start\"},\"\"===v&&d.createElement(y,{form:C,setSelectedRoom:T}),\"u\"===v&&d.createElement(S,{form:C}),\"d\"===v&&d.createElement(h,{form:C}),\"l\"===v&&d.createElement(x,{form:C}),d.createElement(r,{flexShrink:0,mbs:28,mis:8},d.createElement(s,{align:\"end\"},d.createElement(f,{secondary:!0,onClick:function(){return window.print()}},w(\"Export\"),\" \",w(\"PDF\")),d.createElement(f,{primary:!0,type:\"submit\"},w(\"Apply\"))))))})}","map":"{\"version\":3,\"sources\":[\"client/views/audit/components/AuditForm.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IAuditLog, IRoom } from '@rocket.chat/core-typings';\\nimport { Box, Field, FieldLabel, FieldRow, FieldError, TextInput, Button, ButtonGroup } from '@rocket.chat/fuselage';\\nimport React from 'react';\\nimport { useController } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport type { AuditFields } from '../hooks/useAuditForm';\\nimport { useAuditForm } from '../hooks/useAuditForm';\\nimport { useSendTelemetryMutation } from '../hooks/useSendTelemetryMutation';\\nimport DateRangePicker from './forms/DateRangePicker';\\nimport DirectTab from './tabs/DirectTab';\\nimport OmnichannelTab from './tabs/OmnichannelTab';\\nimport RoomsTab from './tabs/RoomsTab';\\nimport UsersTab from './tabs/UsersTab';\\n\\ntype AuditFormProps = {\\n\\ttype: IAuditLog['fields']['type'];\\n\\tonSubmit?: (payload: { type: IAuditLog['fields']['type'] } & AuditFields) => void;\\n\\tsetSelectedRoom: React.Dispatch<React.SetStateAction<IRoom | undefined>>;\\n};\\n\\nconst AuditForm = ({ type, onSubmit, setSelectedRoom }: AuditFormProps) => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst form = useAuditForm();\\n\\tconst { control, handleSubmit, register } = form;\\n\\n\\tconst { field: dateRangeField, fieldState: dateRangeFieldState } = useController({ name: 'dateRange', control });\\n\\n\\tconst sendTelemetryMutation = useSendTelemetryMutation();\\n\\n\\tconst submit = () => {\\n\\t\\tsendTelemetryMutation.mutate({\\n\\t\\t\\tparams: [{ eventName: 'updateCounter', settingsId: 'Message_Auditing_Apply_Count', timestamp: Date.now() }],\\n\\t\\t});\\n\\n\\t\\tonSubmit?.({ type, ...form.getValues() });\\n\\t};\\n\\n\\treturn (\\n\\t\\t<form onSubmit={handleSubmit(submit)}>\\n\\t\\t\\t<Box display='flex' flexDirection='row' justifyContent='stretch' marginInline={-4}>\\n\\t\\t\\t\\t<Field flexShrink={1} marginInline={4}>\\n\\t\\t\\t\\t\\t<FieldLabel>{t('Message')}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<TextInput placeholder={t('Search')} {...register('msg')} />\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t<Field flexShrink={1} marginInline={4}>\\n\\t\\t\\t\\t\\t<FieldLabel>{t('Date')}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<DateRangePicker value={dateRangeField.value} onChange={dateRangeField.onChange} display='flex' flexGrow={1} />\\n\\t\\t\\t\\t\\t\\t{dateRangeFieldState.error?.type === 'required' && <FieldError>{t('Required_field', { field: t('Date') })}</FieldError>}\\n\\t\\t\\t\\t\\t\\t{dateRangeFieldState.error?.type === 'validate' && <FieldError>{dateRangeFieldState.error.message}</FieldError>}\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t</Box>\\n\\t\\t\\t<Box display='flex' flexDirection='row' alignItems='flex-start'>\\n\\t\\t\\t\\t{type === '' && <RoomsTab form={form} setSelectedRoom={setSelectedRoom} />}\\n\\t\\t\\t\\t{type === 'u' && <UsersTab form={form} />}\\n\\t\\t\\t\\t{type === 'd' && <DirectTab form={form} />}\\n\\t\\t\\t\\t{type === 'l' && <OmnichannelTab form={form} />}\\n\\t\\t\\t\\t<Box flexShrink={0} mbs={28} mis={8}>\\n\\t\\t\\t\\t\\t<ButtonGroup align='end'>\\n\\t\\t\\t\\t\\t\\t<Button secondary onClick={() => window.print()}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Export')} {t('PDF')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t\\t<Button primary type='submit'>\\n\\t\\t\\t\\t\\t\\t\\t{t('Apply')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</Box>\\n\\t\\t</form>\\n\\t);\\n};\\n\\nexport default AuditForm;\\n\",null],\"names\":[\"_extends\",\"_objectSpread\",\"Box\",\"Field\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"TextInput\",\"Button\",\"ButtonGroup\",\"React\",\"useController\",\"useTranslation\",\"useAuditForm\",\"useSendTelemetryMutation\",\"DateRangePicker\",\"DirectTab\",\"OmnichannelTab\",\"RoomsTab\",\"UsersTab\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_dateRangeFieldState$\",\"_dateRangeFieldState$2\",\"type\",\"onSubmit\",\"setSelectedRoom\",\"t\",\"_useTranslation\",\"form\",\"control\",\"handleSubmit\",\"register\",\"_useController\",\"name\",\"dateRangeField\",\"field\",\"dateRangeFieldState\",\"fieldState\",\"sendTelemetryMutation\",\"createElement\",\"mutate\",\"params\",\"eventName\",\"settingsId\",\"timestamp\",\"Date\",\"now\",\"getValues\",\"display\",\"flexDirection\",\"justifyContent\",\"marginInline\",\"flexShrink\",\"placeholder\",\"value\",\"onChange\",\"flexGrow\",\"error\",\"message\",\"alignItems\",\"mbs\",\"mis\",\"align\",\"secondary\",\"onClick\",\"window\",\"print\",\"primary\"],\"mappings\":\"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\"}"}