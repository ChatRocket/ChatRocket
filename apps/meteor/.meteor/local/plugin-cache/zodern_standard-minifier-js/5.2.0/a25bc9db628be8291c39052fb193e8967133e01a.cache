{"code":"function module(e,t,a){let n,l,o,r,s,d,u,i,c,D,_;a.link(\"@rocket.chat/fuselage\",{Accordion(e){n=e},ButtonGroup(e){l=e},Button(e){o=e},Box(e){r=e}},0),a.link(\"@rocket.chat/ui-contexts\",{useSetModal(e){s=e},useToastMessageDispatch(e){d=e},useMethod(e){u=e},useTranslation(e){i=e}},1),a.link(\"react\",{default(e){c=e},useCallback(e){D=e}},2),a.link(\"./MyDataModal\",{default(e){_=e}},3),a.exportDefault(()=>{let e=i(),t=s(),a=d(),m=u(\"requestDataDownload\"),p=D(async n=>{try{let a=await m({fullExport:n});if(a.requested){let n=e(\"UserDataDownload_Requested_Text\",{pending_operations:a.pendingOperationsBeforeMyRequest});t(c.createElement(_,{title:e(\"UserDataDownload_Requested\"),text:c.createElement(r,{dangerouslySetInnerHTML:{__html:n}}),onCancel:()=>t(null)}));return}if(a.exportOperation){if(\"completed\"===a.exportOperation.status){let n=a.url?e(\"UserDataDownload_CompletedRequestExistedWithLink_Text\",{download_link:a.url}):e(\"UserDataDownload_CompletedRequestExisted_Text\");t(c.createElement(_,{title:e(\"UserDataDownload_Requested\"),text:c.createElement(r,{dangerouslySetInnerHTML:{__html:n}}),onCancel:()=>t(null)}));return}let n=e(\"UserDataDownload_RequestExisted_Text\",{pending_operations:a.pendingOperationsBeforeMyRequest});t(c.createElement(_,{title:e(\"UserDataDownload_Requested\"),text:c.createElement(r,{dangerouslySetInnerHTML:{__html:n}}),onCancel:()=>t(null)}));return}t(c.createElement(_,{title:e(\"UserDataDownload_Requested\"),onCancel:()=>t(null)}))}catch(e){a({type:\"error\",message:e})}},[a,m,t,e]),x=D(()=>p(!1),[p]),E=D(()=>p(!0),[p]);return c.createElement(n.Item,{title:e(\"My Data\")},c.createElement(l,{stretch:!0},c.createElement(o,{icon:\"download\",onClick:x},e(\"Download_My_Data\")),c.createElement(o,{icon:\"download\",onClick:E},e(\"Export_My_Data\"))))})}","map":"{\"version\":3,\"sources\":[\"client/views/account/preferences/PreferencesMyDataSection.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Accordion, ButtonGroup, Button, Box } from '@rocket.chat/fuselage';\\nimport { useSetModal, useToastMessageDispatch, useMethod, useTranslation } from '@rocket.chat/ui-contexts';\\nimport React, { useCallback } from 'react';\\n\\nimport MyDataModal from './MyDataModal';\\n\\nconst PreferencesMyDataSection = () => {\\n\\tconst t = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst requestDataDownload = useMethod('requestDataDownload');\\n\\n\\tconst downloadData = useCallback(\\n\\t\\tasync (fullExport) => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst result = await requestDataDownload({ fullExport });\\n\\t\\t\\t\\tif (result.requested) {\\n\\t\\t\\t\\t\\tconst text = t('UserDataDownload_Requested_Text', {\\n\\t\\t\\t\\t\\t\\tpending_operations: result.pendingOperationsBeforeMyRequest,\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\tsetModal(\\n\\t\\t\\t\\t\\t\\t<MyDataModal\\n\\t\\t\\t\\t\\t\\t\\ttitle={t('UserDataDownload_Requested')}\\n\\t\\t\\t\\t\\t\\t\\ttext={<Box dangerouslySetInnerHTML={{ __html: text }} />}\\n\\t\\t\\t\\t\\t\\t\\tonCancel={() => setModal(null)}\\n\\t\\t\\t\\t\\t\\t/>,\\n\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (result.exportOperation) {\\n\\t\\t\\t\\t\\tif (result.exportOperation.status === 'completed') {\\n\\t\\t\\t\\t\\t\\tconst text = result.url\\n\\t\\t\\t\\t\\t\\t\\t? t('UserDataDownload_CompletedRequestExistedWithLink_Text', {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tdownload_link: result.url,\\n\\t\\t\\t\\t\\t\\t\\t  })\\n\\t\\t\\t\\t\\t\\t\\t: t('UserDataDownload_CompletedRequestExisted_Text');\\n\\n\\t\\t\\t\\t\\t\\tsetModal(\\n\\t\\t\\t\\t\\t\\t\\t<MyDataModal\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle={t('UserDataDownload_Requested')}\\n\\t\\t\\t\\t\\t\\t\\t\\ttext={<Box dangerouslySetInnerHTML={{ __html: text }} />}\\n\\t\\t\\t\\t\\t\\t\\t\\tonCancel={() => setModal(null)}\\n\\t\\t\\t\\t\\t\\t\\t/>,\\n\\t\\t\\t\\t\\t\\t);\\n\\n\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tconst text = t('UserDataDownload_RequestExisted_Text', {\\n\\t\\t\\t\\t\\t\\tpending_operations: result.pendingOperationsBeforeMyRequest,\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\tsetModal(\\n\\t\\t\\t\\t\\t\\t<MyDataModal\\n\\t\\t\\t\\t\\t\\t\\ttitle={t('UserDataDownload_Requested')}\\n\\t\\t\\t\\t\\t\\t\\ttext={<Box dangerouslySetInnerHTML={{ __html: text }} />}\\n\\t\\t\\t\\t\\t\\t\\tonCancel={() => setModal(null)}\\n\\t\\t\\t\\t\\t\\t/>,\\n\\t\\t\\t\\t\\t);\\n\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tsetModal(<MyDataModal title={t('UserDataDownload_Requested')} onCancel={() => setModal(null)} />);\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[dispatchToastMessage, requestDataDownload, setModal, t],\\n\\t);\\n\\n\\tconst handleClickDownload = useCallback(() => downloadData(false), [downloadData]);\\n\\tconst handleClickExport = useCallback(() => downloadData(true), [downloadData]);\\n\\n\\treturn (\\n\\t\\t<Accordion.Item title={t('My Data')}>\\n\\t\\t\\t<ButtonGroup stretch>\\n\\t\\t\\t\\t<Button icon='download' onClick={handleClickDownload}>\\n\\t\\t\\t\\t\\t{t('Download_My_Data')}\\n\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t<Button icon='download' onClick={handleClickExport}>\\n\\t\\t\\t\\t\\t{t('Export_My_Data')}\\n\\t\\t\\t\\t</Button>\\n\\t\\t\\t</ButtonGroup>\\n\\t\\t</Accordion.Item>\\n\\t);\\n};\\n\\nexport default PreferencesMyDataSection;\\n\",null],\"names\":[\"Accordion\",\"ButtonGroup\",\"Button\",\"Box\",\"useSetModal\",\"useToastMessageDispatch\",\"useMethod\",\"useTranslation\",\"React\",\"useCallback\",\"MyDataModal\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"PreferencesMyDataSection\",\"t\",\"setModal\",\"dispatchToastMessage\",\"requestDataDownload\",\"downloadData\",\"fullExport\",\"result\",\"requested\",\"text\",\"pending_operations\",\"pendingOperationsBeforeMyRequest\",\"createElement\",\"title\",\"dangerouslySetInnerHTML\",\"__html\",\"onCancel\",\"exportOperation\",\"status\",\"url\",\"download_link\",\"error\",\"type\",\"message\",\"handleClickDownload\",\"handleClickExport\",\"Item\",\"stretch\",\"icon\",\"onClick\"],\"mappings\":\"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\"}"}