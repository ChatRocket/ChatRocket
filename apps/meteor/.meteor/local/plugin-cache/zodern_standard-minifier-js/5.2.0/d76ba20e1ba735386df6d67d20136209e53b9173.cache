{"code":"function module(e,n,o){var i,t,r,a,s;o.link(\"meteor/meteor\",{Meteor:function(e){i=e}},0),o.link(\"../../../client/lib/rooms/roomCoordinator\",{roomCoordinator:function(e){t=e}},1),o.link(\"../../../client/lib/utils/messageArgs\",{messageArgs:function(e){r=e}},2),o.link(\"../../ui-utils/client\",{MessageAction:function(e){a=e}},3),o.link(\"../../utils/client/lib/SDKClient\",{sdk:function(e){s=e}},4),i.startup(function(){a.addButton({id:\"reaction-message\",icon:\"add-reaction\",label:\"Add_Reaction\",context:[\"message\",\"message-mobile\",\"threads\",\"federated\",\"videoconf\",\"videoconf-threads\"],action:function(e,n){var o=n.message,i=void 0===o?r(this).msg:o,t=n.chat;null==e||e.stopPropagation(),null==t||t.emojiPicker.open(null==e?void 0:e.currentTarget,function(e){return s.call(\"setReaction\",\":\"+e+\":\",i._id)})},condition:function(e){var n=e.message,o=e.user,i=e.room,r=e.subscription;return!(!i||!r||n.private||t.readOnly(i._id,o)&&!i.reactWhenReadOnly)&&!t.isLivechatRoom(i.t)},order:-3,group:\"message\"})})}","map":"{\"version\":3,\"sources\":[\"app/reactions/client/init.ts\",\"<anon>\"],\"sourcesContent\":[\"import { Meteor } from 'meteor/meteor';\\n\\nimport { roomCoordinator } from '../../../client/lib/rooms/roomCoordinator';\\nimport { messageArgs } from '../../../client/lib/utils/messageArgs';\\nimport { MessageAction } from '../../ui-utils/client';\\nimport { sdk } from '../../utils/client/lib/SDKClient';\\n\\nMeteor.startup(() => {\\n\\tMessageAction.addButton({\\n\\t\\tid: 'reaction-message',\\n\\t\\ticon: 'add-reaction',\\n\\t\\tlabel: 'Add_Reaction',\\n\\t\\tcontext: ['message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\\n\\t\\taction(event, props) {\\n\\t\\t\\tconst { message = messageArgs(this).msg, chat } = props;\\n\\t\\t\\tevent?.stopPropagation();\\n\\t\\t\\tchat?.emojiPicker.open(event?.currentTarget as Element, (emoji) => sdk.call('setReaction', `:${emoji}:`, message._id));\\n\\t\\t},\\n\\t\\tcondition({ message, user, room, subscription }) {\\n\\t\\t\\tif (!room) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (!subscription) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (message.private) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (roomCoordinator.readOnly(room._id, user!) && !room.reactWhenReadOnly) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\t\\t\\tconst isLivechatRoom = roomCoordinator.isLivechatRoom(room.t);\\n\\t\\t\\tif (isLivechatRoom) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn true;\\n\\t\\t},\\n\\t\\torder: -3,\\n\\t\\tgroup: 'message',\\n\\t});\\n});\\n\",null],\"names\":[\"Meteor\",\"roomCoordinator\",\"messageArgs\",\"MessageAction\",\"sdk\",\"module\",\"link\",\"v\",\"startup\",\"addButton\",\"id\",\"icon\",\"label\",\"context\",\"action\",\"event\",\"props\",\"_props$message\",\"message\",\"msg\",\"chat\",\"stopPropagation\",\"emojiPicker\",\"open\",\"currentTarget\",\"emoji\",\"call\",\"_id\",\"condition\",\"_ref\",\"user\",\"room\",\"subscription\",\"private\",\"readOnly\",\"reactWhenReadOnly\",\"isLivechatRoom\",\"t\",\"order\",\"group\"],\"mappings\":\"2BAAAA,EAAuCC,EAAAC,EAAAC,EAAAC,EAA9BC,EAAQC,IAAA,CAAM,gBAAgB,CAAAN,OAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,4CAAA,CAAAL,gBAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wCAAA,CAAAJ,YAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wBAAA,CAAAH,cAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,mCAAA,CAAAF,IAAA,SAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAOvCP,EAAOQ,OAAO,CAAC,WACdL,EAAcM,SAAS,CAAC,CACvBC,GAAI,mBACJC,KAAM,eACNC,MAAO,eACPC,QAAS,CAAC,UAAW,iBAAkB,UAAW,YAAa,YAAa,oBAAoB,CAChGC,OAAM,SAACC,CAAK,CAAEC,CAAK,EAClB,IAAAC,EAAkDD,EAA1CE,OAAO,CAAPA,EAAOD,AAAA,KAAA,IAAAA,EAAGf,EAAY,IAAI,EAAEiB,GAAG,CAAAF,EAAEG,EAASJ,EAATI,IAAI,AAC7CL,OAAAA,GAAAA,EAAOM,eAAe,GACtBD,MAAAA,GAAAA,EAAME,WAAW,CAACC,IAAI,CAACR,MAAAA,EAAK,KAAA,EAALA,EAAOS,aAAwB,CAAE,SAACC,CAAK,EAAA,OAAKrB,EAAIsB,IAAI,CAAC,cAAa,IAAMD,EAAK,IAAKP,EAAQS,GAAG,CAAC,EACtH,EACAC,UAAS,SAAAC,CAAA,EAAsC,IAAnCX,EAAOW,EAAPX,OAAO,CAAEY,EAAID,EAAJC,IAAI,CAAEC,EAAIF,EAAJE,IAAI,CAAEC,EAAYH,EAAZG,YAAY,OAC5C,EAAI,CAACD,GAID,CAACC,GAIDd,EAAQe,OAAO,EAIfhC,EAAgBiC,QAAQ,CAACH,EAAKJ,GAAG,CAAEG,IAAU,CAACC,EAAKI,iBAAiB,IAGjDlC,EAAgBmC,cAAc,CAACL,EAAKM,CAAC,CAM7D,EACAC,MAAO,GACPC,MAAO,WAET\"}"}