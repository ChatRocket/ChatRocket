{"code":"function module(e,t,n){let l,a,o,s,r,i,u,d,c,m,p,k,f,g,h,v,C,_,E,R,b,y;let P=[\"departmentId\"];n.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){l=e}},0),n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){a=e}},1),n.link(\"@rocket.chat/fuselage\",{Box(e){o=e},Button(e){s=e},ButtonGroup(e){r=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){i=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){u=e},useEndpoint(e){d=e},useTranslation(e){c=e},useRouter(e){m=e}},2),n.link(\"@tanstack/react-query\",{useQueryClient(e){p=e}},3),n.link(\"react\",{default(e){k=e},memo(e){f=e},useCallback(e){g=e}},4),n.link(\"react-hook-form\",{FormProvider(e){h=e},useForm(e){v=e}},5),n.link(\"../../components/Page\",{Page(e){C=e},PageHeader(e){_=e},PageScrollableContentWithShadow(e){E=e},PageFooter(e){R=e}},6),n.link(\"./components/cannedResponseForm\",{default(e){b=e}},7),n.link(\"./useRemoveCannedResponse\",{useRemoveCannedResponse(e){y=e}},8);let S=e=>({_id:(null==e?void 0:e._id)||\"\",shortcut:(null==e?void 0:e.shortcut)||\"\",text:(null==e?void 0:e.text)||\"\",tags:(null==e?void 0:e.tags)||[],scope:(null==e?void 0:e.scope)||\"user\",departmentId:(null==e?void 0:e.departmentId)||\"\"});n.exportDefault(f(e=>{let{cannedResponseData:t}=e,n=c(),f=m(),x=u(),w=p(),B=d(\"POST\",\"/v1/canned-responses\"),D=v({defaultValues:S(t)}),{handleSubmit:F,reset:I,formState:{isDirty:T}}=D,W=y(),j=g(async e=>{let{departmentId:o}=e,s=a(e,P);try{await B(l(l({_id:null==t?void 0:t._id},s),o&&{departmentId:o})),x({type:\"success\",message:n(null!=t&&t._id?\"Canned_Response_Updated\":\"Canned_Response_Created\")}),f.navigate(\"/omnichannel/canned-responses\"),w.invalidateQueries([\"getCannedResponses\"])}catch(e){x({type:\"error\",message:e})}},[null==t?void 0:t._id,w,B,x,n,f]),q=i();return k.createElement(C,null,k.createElement(_,{title:null!=t&&t._id?n(\"Edit_CannedResponse\"):n(\"New_CannedResponse\"),onClickBack:()=>f.navigate(\"/omnichannel/canned-responses\")},(null==t?void 0:t._id)&&k.createElement(r,null,k.createElement(s,{danger:!0,onClick:()=>W(t._id)},n(\"Delete\")))),k.createElement(E,null,k.createElement(h,D,k.createElement(o,{id:q,onSubmit:F(j),w:\"full\",alignSelf:\"center\",maxWidth:\"x600\",is:\"form\",autoComplete:\"off\"},k.createElement(b,null)))),k.createElement(R,{isDirty:T},k.createElement(r,null,k.createElement(s,{onClick:()=>I()},n(\"Cancel\")),k.createElement(s,{form:q,primary:!0,type:\"submit\"},n(\"Save\")))))}))}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/cannedResponses/CannedResponseEdit.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatDepartment, IOmnichannelCannedResponse, Serialized } from '@rocket.chat/core-typings';\\nimport { Box, Button, ButtonGroup } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useEndpoint, useTranslation, useRouter } from '@rocket.chat/ui-contexts';\\nimport { useQueryClient } from '@tanstack/react-query';\\nimport React, { memo, useCallback } from 'react';\\nimport { FormProvider, useForm } from 'react-hook-form';\\n\\nimport { Page, PageHeader, PageScrollableContentWithShadow, PageFooter } from '../../components/Page';\\nimport CannedResponseForm from './components/cannedResponseForm';\\nimport { useRemoveCannedResponse } from './useRemoveCannedResponse';\\n\\ntype CannedResponseEditProps = {\\n\\tcannedResponseData?: Serialized<IOmnichannelCannedResponse>;\\n\\tdepartmentData?: Serialized<ILivechatDepartment>;\\n};\\n\\nconst getInitialData = (cannedResponseData: Serialized<IOmnichannelCannedResponse> | undefined) => ({\\n\\t_id: cannedResponseData?._id || '',\\n\\tshortcut: cannedResponseData?.shortcut || '',\\n\\ttext: cannedResponseData?.text || '',\\n\\ttags: cannedResponseData?.tags || [],\\n\\tscope: cannedResponseData?.scope || 'user',\\n\\tdepartmentId: cannedResponseData?.departmentId || '',\\n});\\n\\nconst CannedResponseEdit = ({ cannedResponseData }: CannedResponseEditProps) => {\\n\\tconst t = useTranslation();\\n\\tconst router = useRouter();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst queryClient = useQueryClient();\\n\\n\\tconst saveCannedResponse = useEndpoint('POST', '/v1/canned-responses');\\n\\n\\tconst methods = useForm({ defaultValues: getInitialData(cannedResponseData) });\\n\\n\\tconst {\\n\\t\\thandleSubmit,\\n\\t\\treset,\\n\\t\\tformState: { isDirty },\\n\\t} = methods;\\n\\n\\tconst handleDelete = useRemoveCannedResponse();\\n\\n\\tconst handleSave = useCallback(\\n\\t\\tasync ({ departmentId, ...data }) => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tawait saveCannedResponse({\\n\\t\\t\\t\\t\\t_id: cannedResponseData?._id,\\n\\t\\t\\t\\t\\t...data,\\n\\t\\t\\t\\t\\t...(departmentId && { departmentId }),\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\ttype: 'success',\\n\\t\\t\\t\\t\\tmessage: t(cannedResponseData?._id ? 'Canned_Response_Updated' : 'Canned_Response_Created'),\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\trouter.navigate('/omnichannel/canned-responses');\\n\\t\\t\\t\\tqueryClient.invalidateQueries(['getCannedResponses']);\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[cannedResponseData?._id, queryClient, saveCannedResponse, dispatchToastMessage, t, router],\\n\\t);\\n\\tconst formId = useUniqueId();\\n\\n\\treturn (\\n\\t\\t<Page>\\n\\t\\t\\t<PageHeader\\n\\t\\t\\t\\ttitle={cannedResponseData?._id ? t('Edit_CannedResponse') : t('New_CannedResponse')}\\n\\t\\t\\t\\tonClickBack={() => router.navigate('/omnichannel/canned-responses')}\\n\\t\\t\\t>\\n\\t\\t\\t\\t{cannedResponseData?._id && (\\n\\t\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t\\t<Button danger onClick={() => handleDelete(cannedResponseData._id)}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Delete')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</PageHeader>\\n\\t\\t\\t<PageScrollableContentWithShadow>\\n\\t\\t\\t\\t<FormProvider {...methods}>\\n\\t\\t\\t\\t\\t<Box id={formId} onSubmit={handleSubmit(handleSave)} w='full' alignSelf='center' maxWidth='x600' is='form' autoComplete='off'>\\n\\t\\t\\t\\t\\t\\t<CannedResponseForm />\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t</FormProvider>\\n\\t\\t\\t</PageScrollableContentWithShadow>\\n\\t\\t\\t<PageFooter isDirty={isDirty}>\\n\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t<Button onClick={() => reset()}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button form={formId} primary type='submit'>\\n\\t\\t\\t\\t\\t\\t{t('Save')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</PageFooter>\\n\\t\\t</Page>\\n\\t);\\n};\\n\\nexport default memo(CannedResponseEdit);\\n\",null],\"names\":[\"_objectSpread\",\"_objectWithoutProperties\",\"Box\",\"Button\",\"ButtonGroup\",\"useUniqueId\",\"useToastMessageDispatch\",\"useEndpoint\",\"useTranslation\",\"useRouter\",\"useQueryClient\",\"React\",\"memo\",\"useCallback\",\"FormProvider\",\"useForm\",\"Page\",\"PageHeader\",\"PageScrollableContentWithShadow\",\"PageFooter\",\"CannedResponseForm\",\"useRemoveCannedResponse\",\"module\",\"link\",\"default\",\"v\",\"getInitialData\",\"cannedResponseData\",\"_id\",\"shortcut\",\"text\",\"tags\",\"scope\",\"departmentId\",\"exportDefault\",\"_ref\",\"t\",\"router\",\"dispatchToastMessage\",\"queryClient\",\"saveCannedResponse\",\"methods\",\"defaultValues\",\"handleSubmit\",\"reset\",\"formState\",\"isDirty\",\"handleDelete\",\"handleSave\",\"_ref2\",\"data\",\"_excluded\",\"type\",\"message\",\"navigate\",\"invalidateQueries\",\"error\",\"formId\",\"createElement\",\"title\",\"onClickBack\",\"danger\",\"onClick\",\"id\",\"onSubmit\",\"w\",\"alignSelf\",\"maxWidth\",\"is\",\"autoComplete\",\"form\",\"primary\"],\"mappings\":\"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\"}"}