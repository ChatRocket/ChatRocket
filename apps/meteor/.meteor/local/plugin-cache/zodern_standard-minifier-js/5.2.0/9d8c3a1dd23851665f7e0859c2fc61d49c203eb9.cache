{"code":"function module(e,t,n){let l,a,s,r,u,o,c,i,m,d,E,C,k,p,_,x,f,h,b,P,g,v,S,U,w;n.link(\"@rocket.chat/fuselage\",{Button(e){l=e},ButtonGroup(e){a=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useRoute(e){s=e},useRouteParameter(e){r=e},usePermission(e){u=e},useTranslation(e){o=e},useSetting(e){c=e}},1),n.link(\"react\",{default(e){i=e},useCallback(e){m=e},useRef(e){d=e},useEffect(e){E=e}},2),n.link(\"../../../components/Contextualbar\",{Contextualbar(e){C=e},ContextualbarHeader(e){k=e},ContextualbarClose(e){p=e},ContextualbarTitle(e){_=e},ContextualbarDialog(e){x=e}},3),n.link(\"../../../components/Page\",{Page(e){f=e},PageHeader(e){h=e},PageContent(e){b=e}},4),n.link(\"../../../hooks/useIsEnterprise\",{useIsEnterprise(e){P=e}},5),n.link(\"../../notAuthorized/NotAuthorizedPage\",{default(e){g=e}},6),n.link(\"./CustomUserActiveConnections\",{default(e){v=e}},7),n.link(\"./CustomUserStatusFormWithData\",{default(e){S=e}},8),n.link(\"./CustomUserStatusService\",{default(e){U=e}},9),n.link(\"./CustomUserStatusTable\",{default(e){w=e}},10),n.exportDefault(()=>{let e=o(),t=s(\"user-status\"),n=r(\"context\"),A=r(\"id\"),D=u(\"manage-user-status\"),{data:R}=P(),T=c(\"Presence_broadcast_disabled\");E(()=>{T&&t.push({context:\"presence-service\"})},[T,t]);let z=m(()=>{t.push({context:\"new\"})},[t]),B=m(()=>{t.push({context:\"presence-service\"})},[t]),H=m(()=>{t.push({})},[t]),I=d(()=>null),N=m(()=>{I.current()},[I]);return D?i.createElement(f,{flexDirection:\"row\"},i.createElement(f,{name:\"admin-user-status\"},i.createElement(h,{title:e(\"User_Status\")},!(null!=R&&R.isEnterprise)&&i.createElement(v,null),i.createElement(a,null,i.createElement(l,{onClick:B},e(\"Presence_service\")),i.createElement(l,{onClick:z},e(\"New_custom_status\")))),i.createElement(b,null,i.createElement(w,{reload:I,onClick:e=>{t.push({context:\"edit\",id:e})}}))),n&&i.createElement(x,null,i.createElement(C,null,i.createElement(k,null,i.createElement(_,null,\"edit\"===n&&e(\"Custom_User_Status_Edit\"),\"new\"===n&&e(\"Custom_User_Status_Add\"),\"presence-service\"===n&&e(\"Presence_service_cap\")),i.createElement(p,{onClick:H})),\"presence-service\"===n&&i.createElement(U,null),(\"new\"===n||\"edit\"===n)&&i.createElement(S,{_id:A,onClose:H,onReload:N})))):i.createElement(g,null)})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/customUserStatus/CustomUserStatusRoute.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Button, ButtonGroup } from '@rocket.chat/fuselage';\\nimport { useRoute, useRouteParameter, usePermission, useTranslation, useSetting } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback, useRef, useEffect } from 'react';\\n\\nimport {\\n\\tContextualbar,\\n\\tContextualbarHeader,\\n\\tContextualbarClose,\\n\\tContextualbarTitle,\\n\\tContextualbarDialog,\\n} from '../../../components/Contextualbar';\\nimport { Page, PageHeader, PageContent } from '../../../components/Page';\\nimport { useIsEnterprise } from '../../../hooks/useIsEnterprise';\\nimport NotAuthorizedPage from '../../notAuthorized/NotAuthorizedPage';\\nimport CustomUserActiveConnections from './CustomUserActiveConnections';\\nimport CustomUserStatusFormWithData from './CustomUserStatusFormWithData';\\nimport CustomUserStatusService from './CustomUserStatusService';\\nimport CustomUserStatusTable from './CustomUserStatusTable';\\n\\nconst CustomUserStatusRoute = (): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst route = useRoute('user-status');\\n\\tconst context = useRouteParameter('context');\\n\\tconst id = useRouteParameter('id');\\n\\tconst canManageUserStatus = usePermission('manage-user-status');\\n\\tconst { data: license } = useIsEnterprise();\\n\\tconst presenceDisabled = useSetting<boolean>('Presence_broadcast_disabled');\\n\\n\\tuseEffect(() => {\\n\\t\\tpresenceDisabled && route.push({ context: 'presence-service' });\\n\\t}, [presenceDisabled, route]);\\n\\n\\tconst handleItemClick = (id: string): void => {\\n\\t\\troute.push({\\n\\t\\t\\tcontext: 'edit',\\n\\t\\t\\tid,\\n\\t\\t});\\n\\t};\\n\\n\\tconst handleNewButtonClick = useCallback(() => {\\n\\t\\troute.push({ context: 'new' });\\n\\t}, [route]);\\n\\n\\tconst handlePresenceServiceClick = useCallback(() => {\\n\\t\\troute.push({ context: 'presence-service' });\\n\\t}, [route]);\\n\\n\\tconst handleClose = useCallback(() => {\\n\\t\\troute.push({});\\n\\t}, [route]);\\n\\n\\tconst reload = useRef(() => null);\\n\\n\\tconst handleReload = useCallback(() => {\\n\\t\\treload.current();\\n\\t}, [reload]);\\n\\n\\tif (!canManageUserStatus) {\\n\\t\\treturn <NotAuthorizedPage />;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<Page flexDirection='row'>\\n\\t\\t\\t<Page name='admin-user-status'>\\n\\t\\t\\t\\t<PageHeader title={t('User_Status')}>\\n\\t\\t\\t\\t\\t{!license?.isEnterprise && <CustomUserActiveConnections />}\\n\\t\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t\\t<Button onClick={handlePresenceServiceClick}>{t('Presence_service')}</Button>\\n\\t\\t\\t\\t\\t\\t<Button onClick={handleNewButtonClick}>{t('New_custom_status')}</Button>\\n\\t\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t\\t</PageHeader>\\n\\t\\t\\t\\t<PageContent>\\n\\t\\t\\t\\t\\t<CustomUserStatusTable reload={reload} onClick={handleItemClick} />\\n\\t\\t\\t\\t</PageContent>\\n\\t\\t\\t</Page>\\n\\t\\t\\t{context && (\\n\\t\\t\\t\\t<ContextualbarDialog>\\n\\t\\t\\t\\t\\t<Contextualbar>\\n\\t\\t\\t\\t\\t\\t<ContextualbarHeader>\\n\\t\\t\\t\\t\\t\\t\\t<ContextualbarTitle>\\n\\t\\t\\t\\t\\t\\t\\t\\t{context === 'edit' && t('Custom_User_Status_Edit')}\\n\\t\\t\\t\\t\\t\\t\\t\\t{context === 'new' && t('Custom_User_Status_Add')}\\n\\t\\t\\t\\t\\t\\t\\t\\t{context === 'presence-service' && t('Presence_service_cap')}\\n\\t\\t\\t\\t\\t\\t\\t</ContextualbarTitle>\\n\\t\\t\\t\\t\\t\\t\\t<ContextualbarClose onClick={handleClose} />\\n\\t\\t\\t\\t\\t\\t</ContextualbarHeader>\\n\\t\\t\\t\\t\\t\\t{context === 'presence-service' && <CustomUserStatusService />}\\n\\t\\t\\t\\t\\t\\t{(context === 'new' || context === 'edit') && (\\n\\t\\t\\t\\t\\t\\t\\t<CustomUserStatusFormWithData _id={id} onClose={handleClose} onReload={handleReload} />\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</Contextualbar>\\n\\t\\t\\t\\t</ContextualbarDialog>\\n\\t\\t\\t)}\\n\\t\\t</Page>\\n\\t);\\n};\\n\\nexport default CustomUserStatusRoute;\\n\",null],\"names\":[\"Button\",\"ButtonGroup\",\"useRoute\",\"useRouteParameter\",\"usePermission\",\"useTranslation\",\"useSetting\",\"React\",\"useCallback\",\"useRef\",\"useEffect\",\"Contextualbar\",\"ContextualbarHeader\",\"ContextualbarClose\",\"ContextualbarTitle\",\"ContextualbarDialog\",\"Page\",\"PageHeader\",\"PageContent\",\"useIsEnterprise\",\"NotAuthorizedPage\",\"CustomUserActiveConnections\",\"CustomUserStatusFormWithData\",\"CustomUserStatusService\",\"CustomUserStatusTable\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"CustomUserStatusRoute\",\"t\",\"route\",\"context\",\"id\",\"canManageUserStatus\",\"data\",\"license\",\"presenceDisabled\",\"push\",\"handleNewButtonClick\",\"handlePresenceServiceClick\",\"handleClose\",\"reload\",\"handleReload\",\"current\",\"createElement\",\"flexDirection\",\"name\",\"title\",\"isEnterprise\",\"onClick\",\"_id\",\"onClose\",\"onReload\"],\"mappings\":\"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\"}"}