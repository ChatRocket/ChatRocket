{"code":"function module(e,n,t){var i,l,o,u,r,a,c,s,f,d,m,h,p,k,b,v,L,w,E,x,F=[\"label\"];t.link(\"@babel/runtime/helpers/extends\",{default:function(e){i=e}},0),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){l=e}},1),t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){o=e}},2),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){u=e}},3),t.export({DepartmentForwarding:function(){return _}}),t.link(\"@rocket.chat/fuselage\",{Field:function(e){r=e},FieldLabel:function(e){a=e},FieldRow:function(e){c=e},FieldHint:function(e){s=e},Box:function(e){f=e},PaginatedMultiSelectFiltered:function(e){d=e},CheckOption:function(e){m=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue:function(e){h=e}},1),t.link(\"react\",{default:function(e){p=e},useMemo:function(e){k=e},useState:function(e){b=e}},2),t.link(\"react-i18next\",{useTranslation:function(e){v=e}},3),t.link(\"../../components/Omnichannel/hooks/useDepartmentsList\",{useDepartmentsList:function(e){L=e}},4),t.link(\"../../hooks/lists/useRecordList\",{useRecordList:function(e){w=e}},5),t.link(\"../../hooks/useAsyncState\",{AsyncStatePhase:function(e){E=e}},6),t.link(\"../../hooks/useHasLicenseModule\",{useHasLicenseModule:function(e){x=e}},7);var _=function(e){var n=e.departmentId,t=e.value,_=void 0===t?[]:t,A=e.handler,D=e.label,M=v().t,S=b(\"\"),g=u(S,2),y=g[0],I=g[1],C=x(\"livechat-enterprise\"),R=h(y,500),H=L(k(function(){return{filter:y,departmentId:n,showArchived:!0}},[n,y])),O=H.itemsList,P=H.loadMoreItems,T=w(O),G=T.phase,W=T.items,j=T.itemCount,B=k(function(){var e=_.filter(function(e){var n=e.value;return!W.find(function(e){return e.value===n})});return[].concat(o(W),o(e))},[W,_]);return C?p.createElement(r,null,p.createElement(a,null,M(D)),p.createElement(c,null,p.createElement(f,{w:\"100%\"},p.createElement(d,{withTitle:!0,maxWidth:\"100%\",w:\"100%\",flexGrow:1,filter:R,setFilter:I,onChange:A,options:B,value:_,placeholder:M(\"Select_an_option\"),endReached:G===E.LOADING?function(){}:function(e){void 0!==e&&P(e,Math.min(50,j))},renderItem:function(e){var n=e.label,t=l(e,F);return p.createElement(m,i({},t,{label:p.createElement(\"span\",{style:{whiteSpace:\"normal\"}},n),selected:_.some(function(e){return e.value===t.value})}))}}))),p.createElement(s,null,M(\"List_of_departments_for_forward_description\"))):null};t.exportDefault(_)}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/additionalForms/DepartmentForwarding.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Field, FieldLabel, FieldRow, FieldHint, Box, PaginatedMultiSelectFiltered, CheckOption } from '@rocket.chat/fuselage';\\nimport type { PaginatedMultiSelectOption } from '@rocket.chat/fuselage';\\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport React, { useMemo, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useDepartmentsList } from '../../components/Omnichannel/hooks/useDepartmentsList';\\nimport { useRecordList } from '../../hooks/lists/useRecordList';\\nimport { AsyncStatePhase } from '../../hooks/useAsyncState';\\nimport { useHasLicenseModule } from '../../hooks/useHasLicenseModule';\\n\\ntype DepartmentForwardingProps = {\\n\\tdepartmentId: string;\\n\\tvalue?: PaginatedMultiSelectOption[];\\n\\thandler: (value: PaginatedMultiSelectOption[]) => void;\\n\\tlabel: TranslationKey;\\n};\\n\\nexport const DepartmentForwarding = ({ departmentId, value = [], handler, label }: DepartmentForwardingProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst [departmentsFilter, setDepartmentsFilter] = useState('');\\n\\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\\n\\n\\tconst debouncedDepartmentsFilter = useDebouncedValue(departmentsFilter, 500);\\n\\n\\tconst { itemsList: departmentsList, loadMoreItems: loadMoreDepartments } = useDepartmentsList(\\n\\t\\tuseMemo(() => ({ filter: departmentsFilter, departmentId, showArchived: true }), [departmentId, departmentsFilter]),\\n\\t);\\n\\n\\tconst { phase: departmentsPhase, items: departmentsItems, itemCount: departmentsTotal } = useRecordList(departmentsList);\\n\\n\\tconst options = useMemo(() => {\\n\\t\\tconst pending = value.filter(({ value }) => !departmentsItems.find((dep) => dep.value === value));\\n\\t\\treturn [...departmentsItems, ...pending];\\n\\t}, [departmentsItems, value]);\\n\\n\\tif (!hasLicense) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<Field>\\n\\t\\t\\t<FieldLabel>{t(label)}</FieldLabel>\\n\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t<Box w='100%'>\\n\\t\\t\\t\\t\\t<PaginatedMultiSelectFiltered\\n\\t\\t\\t\\t\\t\\twithTitle\\n\\t\\t\\t\\t\\t\\tmaxWidth='100%'\\n\\t\\t\\t\\t\\t\\tw='100%'\\n\\t\\t\\t\\t\\t\\tflexGrow={1}\\n\\t\\t\\t\\t\\t\\tfilter={debouncedDepartmentsFilter}\\n\\t\\t\\t\\t\\t\\tsetFilter={setDepartmentsFilter}\\n\\t\\t\\t\\t\\t\\tonChange={handler}\\n\\t\\t\\t\\t\\t\\toptions={options}\\n\\t\\t\\t\\t\\t\\tvalue={value}\\n\\t\\t\\t\\t\\t\\tplaceholder={t('Select_an_option')}\\n\\t\\t\\t\\t\\t\\tendReached={\\n\\t\\t\\t\\t\\t\\t\\tdepartmentsPhase === AsyncStatePhase.LOADING\\n\\t\\t\\t\\t\\t\\t\\t\\t? () => undefined\\n\\t\\t\\t\\t\\t\\t\\t\\t: (start?: number) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif (start === undefined) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tloadMoreDepartments(start, Math.min(50, departmentsTotal));\\n\\t\\t\\t\\t\\t\\t\\t\\t  }\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\trenderItem={({ label, ...props }) => (\\n\\t\\t\\t\\t\\t\\t\\t<CheckOption\\n\\t\\t\\t\\t\\t\\t\\t\\t{...props}\\n\\t\\t\\t\\t\\t\\t\\t\\tlabel={<span style={{ whiteSpace: 'normal' }}>{label}</span>}\\n\\t\\t\\t\\t\\t\\t\\t\\tselected={value.some((item) => item.value === props.value)}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</FieldRow>\\n\\t\\t\\t<FieldHint>{t('List_of_departments_for_forward_description')}</FieldHint>\\n\\t\\t</Field>\\n\\t);\\n};\\n\\nexport default DepartmentForwarding;\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"_toConsumableArray\",\"_slicedToArray\",\"Field\",\"FieldLabel\",\"FieldRow\",\"FieldHint\",\"Box\",\"PaginatedMultiSelectFiltered\",\"CheckOption\",\"useDebouncedValue\",\"React\",\"useMemo\",\"useState\",\"useTranslation\",\"useDepartmentsList\",\"useRecordList\",\"AsyncStatePhase\",\"useHasLicenseModule\",\"module\",\"link\",\"default\",\"v\",\"export\",\"DepartmentForwarding\",\"_ref\",\"departmentId\",\"_ref$value\",\"value\",\"handler\",\"label\",\"t\",\"_useTranslation\",\"_useState\",\"_useState2\",\"departmentsFilter\",\"setDepartmentsFilter\",\"hasLicense\",\"debouncedDepartmentsFilter\",\"_useDepartmentsList\",\"filter\",\"showArchived\",\"departmentsList\",\"itemsList\",\"loadMoreDepartments\",\"loadMoreItems\",\"_useRecordList\",\"departmentsPhase\",\"phase\",\"departmentsItems\",\"items\",\"departmentsTotal\",\"itemCount\",\"options\",\"pending\",\"_ref2\",\"find\",\"dep\",\"concat\",\"createElement\",\"w\",\"withTitle\",\"maxWidth\",\"flexGrow\",\"setFilter\",\"onChange\",\"placeholder\",\"endReached\",\"LOADING\",\"start\",\"undefined\",\"Math\",\"min\",\"renderItem\",\"_ref3\",\"props\",\"_excluded\",\"style\",\"whiteSpace\",\"selected\",\"some\",\"item\",\"exportDefault\"],\"mappings\":\"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\"}"}