{"code":"function module(e,n,t){var a,o,u,i,s,l,c,r,g,f,d,m,p,b,h,k;t.link(\"@rocket.chat/ui-contexts\",{usePermission:function(e){a=e},useRouter:function(e){o=e},useSetModal:function(e){u=e},useCurrentModal:function(e){i=e},useTranslation:function(e){s=e},useRouteParameter:function(e){l=e},useEndpoint:function(e){c=e}},0),t.link(\"react\",{default:function(e){r=e},useEffect:function(e){g=e}},1),t.link(\"../../../../app/utils/client/getURL\",{getURL:function(e){f=e}},2),t.link(\"../../../components/GenericUpsellModal\",{default:function(e){d=e}},3),t.link(\"../../../components/GenericUpsellModal/hooks\",{useUpsellActions:function(e){m=e}},4),t.link(\"../../../components/PageSkeleton\",{default:function(e){p=e}},5),t.link(\"../../../hooks/useHasLicenseModule\",{useHasLicenseModule:function(e){b=e}},6),t.link(\"../../notAuthorized/NotAuthorizedPage\",{default:function(e){h=e}},7),t.link(\"./EngagementDashboardPage\",{default:function(e){k=e}},8),t.exportDefault(function(){var e=s(),n=a(\"view-engagement-dashboard\"),t=u(),E=!!i(),_=o(),v=l(\"tab\"),C=c(\"POST\",\"/v1/statistics.telemetry\"),M=b(\"engagement-dashboard\"),P=m(M),S=P.shouldShowUpsell,U=P.handleManageSubscription;return(g(function(){S&&t(r.createElement(d,{\"aria-label\":e(\"Engagement_Dashboard\"),title:e(\"Engagement_Dashboard\"),img:f(\"images/engagement.png\"),subtitle:e(\"Analyze_practical_usage\"),description:e(\"Enrich_your_workspace\"),onClose:function(){return t(null)},onConfirm:U,onCancel:function(){return t(null)}})),_.subscribeToRouteChange(function(){\"string\"==typeof v&&[\"users\",\"messages\",\"channels\"].includes(v)||_.navigate({pattern:\"/admin/engagement/:tab?\",params:{tab:\"users\"}},{replace:!0})})},[S,_,v,t,e,U]),E)?r.createElement(p,null):n&&M?(C({params:[{eventName:\"updateCounter\",settingsId:\"Engagement_Dashboard_Load_Count\"}]}),r.createElement(k,{tab:v,onSelectTab:function(e){return _.navigate({pattern:\"/admin/engagement/:tab?\",params:{tab:e}})}})):r.createElement(h,null)})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/engagementDashboard/EngagementDashboardRoute.tsx\",\"<anon>\"],\"sourcesContent\":[\"import {\\n\\tusePermission,\\n\\tuseRouter,\\n\\tuseSetModal,\\n\\tuseCurrentModal,\\n\\tuseTranslation,\\n\\tuseRouteParameter,\\n\\tuseEndpoint,\\n} from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useEffect } from 'react';\\n\\nimport { getURL } from '../../../../app/utils/client/getURL';\\nimport GenericUpsellModal from '../../../components/GenericUpsellModal';\\nimport { useUpsellActions } from '../../../components/GenericUpsellModal/hooks';\\nimport PageSkeleton from '../../../components/PageSkeleton';\\nimport { useHasLicenseModule } from '../../../hooks/useHasLicenseModule';\\nimport NotAuthorizedPage from '../../notAuthorized/NotAuthorizedPage';\\nimport EngagementDashboardPage from './EngagementDashboardPage';\\n\\nconst isValidTab = (tab: string | undefined): tab is 'users' | 'messages' | 'channels' =>\\n\\ttypeof tab === 'string' && ['users', 'messages', 'channels'].includes(tab);\\n\\nconst EngagementDashboardRoute = (): ReactElement | null => {\\n\\tconst t = useTranslation();\\n\\tconst canViewEngagementDashboard = usePermission('view-engagement-dashboard');\\n\\tconst setModal = useSetModal();\\n\\tconst isModalOpen = !!useCurrentModal();\\n\\n\\tconst router = useRouter();\\n\\tconst tab = useRouteParameter('tab');\\n\\tconst eventStats = useEndpoint('POST', '/v1/statistics.telemetry');\\n\\n\\tconst hasEngagementDashboard = useHasLicenseModule('engagement-dashboard') as boolean;\\n\\n\\tconst { shouldShowUpsell, handleManageSubscription } = useUpsellActions(hasEngagementDashboard);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (shouldShowUpsell) {\\n\\t\\t\\tsetModal(\\n\\t\\t\\t\\t<GenericUpsellModal\\n\\t\\t\\t\\t\\taria-label={t('Engagement_Dashboard')}\\n\\t\\t\\t\\t\\ttitle={t('Engagement_Dashboard')}\\n\\t\\t\\t\\t\\timg={getURL('images/engagement.png')}\\n\\t\\t\\t\\t\\tsubtitle={t('Analyze_practical_usage')}\\n\\t\\t\\t\\t\\tdescription={t('Enrich_your_workspace')}\\n\\t\\t\\t\\t\\tonClose={() => setModal(null)}\\n\\t\\t\\t\\t\\tonConfirm={handleManageSubscription}\\n\\t\\t\\t\\t\\tonCancel={() => setModal(null)}\\n\\t\\t\\t\\t/>,\\n\\t\\t\\t);\\n\\t\\t}\\n\\n\\t\\trouter.subscribeToRouteChange(() => {\\n\\t\\t\\tif (!isValidTab(tab)) {\\n\\t\\t\\t\\trouter.navigate(\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\tpattern: '/admin/engagement/:tab?',\\n\\t\\t\\t\\t\\t\\tparams: { tab: 'users' },\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t{ replace: true },\\n\\t\\t\\t\\t);\\n\\t\\t\\t}\\n\\t\\t});\\n\\t}, [shouldShowUpsell, router, tab, setModal, t, handleManageSubscription]);\\n\\n\\tif (isModalOpen) {\\n\\t\\treturn <PageSkeleton />;\\n\\t}\\n\\n\\tif (!canViewEngagementDashboard || !hasEngagementDashboard) {\\n\\t\\treturn <NotAuthorizedPage />;\\n\\t}\\n\\n\\teventStats({\\n\\t\\tparams: [{ eventName: 'updateCounter', settingsId: 'Engagement_Dashboard_Load_Count' }],\\n\\t});\\n\\n\\treturn (\\n\\t\\t<EngagementDashboardPage\\n\\t\\t\\ttab={tab as 'users' | 'messages' | 'channels'}\\n\\t\\t\\tonSelectTab={(tab) =>\\n\\t\\t\\t\\trouter.navigate({\\n\\t\\t\\t\\t\\tpattern: '/admin/engagement/:tab?',\\n\\t\\t\\t\\t\\tparams: { tab },\\n\\t\\t\\t\\t})\\n\\t\\t\\t}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default EngagementDashboardRoute;\\n\",null],\"names\":[\"usePermission\",\"useRouter\",\"useSetModal\",\"useCurrentModal\",\"useTranslation\",\"useRouteParameter\",\"useEndpoint\",\"React\",\"useEffect\",\"getURL\",\"GenericUpsellModal\",\"useUpsellActions\",\"PageSkeleton\",\"useHasLicenseModule\",\"NotAuthorizedPage\",\"EngagementDashboardPage\",\"module\",\"link\",\"v\",\"exportDefault\",\"t\",\"canViewEngagementDashboard\",\"setModal\",\"isModalOpen\",\"router\",\"tab\",\"eventStats\",\"hasEngagementDashboard\",\"_useUpsellActions\",\"shouldShowUpsell\",\"handleManageSubscription\",\"createElement\",\"title\",\"img\",\"subtitle\",\"description\",\"onClose\",\"onConfirm\",\"onCancel\",\"subscribeToRouteChange\",\"includes\",\"navigate\",\"pattern\",\"params\",\"replace\",\"eventName\",\"settingsId\",\"onSelectTab\"],\"mappings\":\"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\"}"}