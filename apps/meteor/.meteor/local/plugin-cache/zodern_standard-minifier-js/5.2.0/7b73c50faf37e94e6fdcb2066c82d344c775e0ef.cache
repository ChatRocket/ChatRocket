{"code":"function module(e,n,t){t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){a=e}},0),t.link(\"@babel/runtime/regenerator\",{default:function(e){i=e}},1),t.link(\"@rocket.chat/fuselage\",{Box:function(e){r=e},Icon:function(e){c=e},Menu:function(e){u=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){l=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){o=e},useEndpoint:function(e){s=e},useRoute:function(e){d=e},useSetModal:function(e){m=e},useTranslation:function(e){f=e},useSetting:function(e){v=e}},2),t.link(\"@tanstack/react-query\",{useQueryClient:function(e){h=e}},3),t.link(\"react\",{default:function(e){p=e},useCallback:function(e){b=e}},4),t.link(\"./RemoveDepartmentModal\",{default:function(e){k=e}},5);var a,i,r,c,u,l,o,s,d,m,f,v,h,p,b,k,_={archive:\"/v1/livechat/department/:_id/archive\",unarchive:\"/v1/livechat/department/:_id/unarchive\"};t.exportDefault(function(e){var n,t=e.department,x=e.archived,E=f(),g=h(),D=m(),w=o(),y=d(\"omnichannel-departments\"),M=v(\"Omnichannel_enable_department_removal\"),C=t._id,S=t.name,z=s(\"POST\",x?_.unarchive:_.archive,{_id:C}),P=l(function(){y.push({context:\"edit\",id:C})}),Q=b(function(){return i.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.awrap(g.invalidateQueries([\"livechat-departments\"]));case 2:case\"end\":return e.stop()}},null,null,null,Promise)},[g]),R=l(function(){return i.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.awrap(z());case 3:w({type:\"success\",message:x?E(\"Department_unarchived\"):E(\"Department_archived\")}),g.removeQueries([\"/v1/livechat/department/:_id\",t._id]),Q(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),w({type:\"error\",message:e.t0});case 11:case\"end\":return e.stop()}},null,null,[[0,8]],Promise)}),T=l(function(){D(p.createElement(k,{_id:C,reset:Q,onClose:function(){return D(null)},name:S}))}),F=a(a({},!x&&{edit:{label:p.createElement(p.Fragment,null,p.createElement(c,{name:\"edit\",size:\"x16\",mie:4}),E(\"Edit\")),action:function(){return P()}}}),{},((n={})[x?\"unarchive\":\"archive\"]={label:p.createElement(p.Fragment,null,p.createElement(c,{name:x?\"undo\":\"arrow-down-box\",size:\"x16\",mie:4}),x?E(\"Unarchive\"):E(\"Archive\")),action:function(){return R()}},n.delete={label:p.createElement(r,{\"data-tooltip\":M?void 0:E(\"Department_Removal_Disabled\")},p.createElement(c,{name:\"trash\",size:\"x16\",mie:4}),E(\"Delete\")),action:function(){return T()},disabled:!M},n));return p.createElement(u,{options:F})})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/departments/DepartmentsTable/DepartmentItemMenu.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatDepartment } from '@rocket.chat/core-typings';\\nimport { Box, Icon, Menu } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useEndpoint, useRoute, useSetModal, useTranslation, useSetting } from '@rocket.chat/ui-contexts';\\nimport { useQueryClient } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback } from 'react';\\n\\nimport RemoveDepartmentModal from './RemoveDepartmentModal';\\n\\nconst ARCHIVE_DEPARTMENT_ENDPOINTS = {\\n\\tarchive: '/v1/livechat/department/:_id/archive',\\n\\tunarchive: '/v1/livechat/department/:_id/unarchive',\\n} as const;\\n\\ntype DepartmentItemMenuProps = {\\n\\tdepartment: Omit<ILivechatDepartment, '_updatedAt'>;\\n\\tarchived: boolean;\\n};\\n\\nconst DepartmentItemMenu = ({ department, archived }: DepartmentItemMenuProps): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst queryClient = useQueryClient();\\n\\tconst setModal = useSetModal();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst route = useRoute('omnichannel-departments');\\n\\tconst departmentRemovalEnabled = useSetting('Omnichannel_enable_department_removal');\\n\\tconst { _id, name } = department;\\n\\n\\tconst toggleArchive = useEndpoint('POST', archived ? ARCHIVE_DEPARTMENT_ENDPOINTS.unarchive : ARCHIVE_DEPARTMENT_ENDPOINTS.archive, {\\n\\t\\t_id,\\n\\t});\\n\\n\\tconst handleEdit = useMutableCallback(() => {\\n\\t\\troute.push({ context: 'edit', id: _id });\\n\\t});\\n\\n\\tconst handleReload = useCallback(async () => {\\n\\t\\tawait queryClient.invalidateQueries(['livechat-departments']);\\n\\t}, [queryClient]);\\n\\n\\tconst handleToggleArchive = useMutableCallback(async () => {\\n\\t\\ttry {\\n\\t\\t\\tawait toggleArchive();\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: archived ? t('Department_unarchived') : t('Department_archived') });\\n\\t\\t\\tqueryClient.removeQueries(['/v1/livechat/department/:_id', department._id]);\\n\\t\\t\\thandleReload();\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t});\\n\\n\\tconst handlePermanentDepartmentRemoval = useMutableCallback(() => {\\n\\t\\tsetModal(<RemoveDepartmentModal _id={_id} reset={handleReload} onClose={() => setModal(null)} name={name} />);\\n\\t});\\n\\n\\tconst menuOptions = {\\n\\t\\t...(!archived && {\\n\\t\\t\\tedit: {\\n\\t\\t\\t\\tlabel: (\\n\\t\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t\\t<Icon name='edit' size='x16' mie={4} />\\n\\t\\t\\t\\t\\t\\t{t('Edit')}\\n\\t\\t\\t\\t\\t</>\\n\\t\\t\\t\\t),\\n\\t\\t\\t\\taction: (): void => handleEdit(),\\n\\t\\t\\t},\\n\\t\\t}),\\n\\t\\t[archived ? 'unarchive' : 'archive']: {\\n\\t\\t\\tlabel: (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<Icon name={archived ? 'undo' : 'arrow-down-box'} size='x16' mie={4} />\\n\\t\\t\\t\\t\\t{archived ? t('Unarchive') : t('Archive')}\\n\\t\\t\\t\\t</>\\n\\t\\t\\t),\\n\\t\\t\\taction: (): Promise<void> => handleToggleArchive(),\\n\\t\\t},\\n\\t\\tdelete: {\\n\\t\\t\\tlabel: (\\n\\t\\t\\t\\t<Box data-tooltip={!departmentRemovalEnabled ? t('Department_Removal_Disabled') : undefined}>\\n\\t\\t\\t\\t\\t<Icon name='trash' size='x16' mie={4} />\\n\\t\\t\\t\\t\\t{t('Delete')}\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t),\\n\\t\\t\\taction: (): void => handlePermanentDepartmentRemoval(),\\n\\t\\t\\tdisabled: !departmentRemovalEnabled,\\n\\t\\t},\\n\\t};\\n\\treturn <Menu options={menuOptions} />;\\n};\\n\\nexport default DepartmentItemMenu;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"_regeneratorRuntime\",\"Box\",\"Icon\",\"Menu\",\"useMutableCallback\",\"useToastMessageDispatch\",\"useEndpoint\",\"useRoute\",\"useSetModal\",\"useTranslation\",\"useSetting\",\"useQueryClient\",\"React\",\"useCallback\",\"RemoveDepartmentModal\",\"ARCHIVE_DEPARTMENT_ENDPOINTS\",\"archive\",\"unarchive\",\"exportDefault\",\"_ref\",\"_objectSpread2\",\"department\",\"archived\",\"t\",\"queryClient\",\"setModal\",\"dispatchToastMessage\",\"route\",\"departmentRemovalEnabled\",\"_id\",\"name\",\"toggleArchive\",\"handleEdit\",\"push\",\"context\",\"id\",\"handleReload\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"invalidateQueries\",\"stop\",\"Promise\",\"handleToggleArchive\",\"_context2\",\"type\",\"message\",\"removeQueries\",\"t0\",\"handlePermanentDepartmentRemoval\",\"createElement\",\"reset\",\"onClose\",\"menuOptions\",\"edit\",\"label\",\"Fragment\",\"size\",\"mie\",\"action\",\"undefined\",\"disabled\",\"options\"],\"mappings\":\"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\"}"}