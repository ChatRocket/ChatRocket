{"code":"function module(e,t,l){let n,a,r,i,o,m,u,s,d,c,f,p,E,k,b,g,x,h,y,S;l.link(\"@babel/runtime/helpers/extends\",{default(e){n=e}},0),l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){a=e}},1),l.link(\"@rocket.chat/fuselage\",{Box(e){r=e},Field(e){i=e},FieldLabel(e){o=e},FieldRow(e){m=e},FieldError(e){u=e},TextInput(e){s=e},Button(e){d=e},ButtonGroup(e){c=e}},0),l.link(\"react\",{default(e){f=e}},1),l.link(\"react-hook-form\",{useController(e){p=e}},2),l.link(\"react-i18next\",{useTranslation(e){E=e}},3),l.link(\"../hooks/useAuditForm\",{useAuditForm(e){k=e}},4),l.link(\"../hooks/useSendTelemetryMutation\",{useSendTelemetryMutation(e){b=e}},5),l.link(\"./forms/DateRangePicker\",{default(e){g=e}},6),l.link(\"./tabs/DirectTab\",{default(e){x=e}},7),l.link(\"./tabs/OmnichannelTab\",{default(e){h=e}},8),l.link(\"./tabs/RoomsTab\",{default(e){y=e}},9),l.link(\"./tabs/UsersTab\",{default(e){S=e}},10),l.exportDefault(e=>{var t,l;let{type:v,onSubmit:D,setSelectedRoom:T}=e,{t:w}=E(),C=k(),{control:F,handleSubmit:I,register:R}=C,{field:A,fieldState:M}=p({name:\"dateRange\",control:F}),_=b();return f.createElement(\"form\",{onSubmit:I(()=>{_.mutate({params:[{eventName:\"updateCounter\",settingsId:\"Message_Auditing_Apply_Count\",timestamp:Date.now()}]}),null==D||D(a({type:v},C.getValues()))})},f.createElement(r,{display:\"flex\",flexDirection:\"row\",justifyContent:\"stretch\",marginInline:-4},f.createElement(i,{flexShrink:1,marginInline:4},f.createElement(o,null,w(\"Message\")),f.createElement(m,null,f.createElement(s,n({placeholder:w(\"Search\")},R(\"msg\"))))),f.createElement(i,{flexShrink:1,marginInline:4},f.createElement(o,null,w(\"Date\")),f.createElement(m,null,f.createElement(g,{value:A.value,onChange:A.onChange,display:\"flex\",flexGrow:1}),(null===(t=M.error)||void 0===t?void 0:t.type)===\"required\"&&f.createElement(u,null,w(\"Required_field\",{field:w(\"Date\")})),(null===(l=M.error)||void 0===l?void 0:l.type)===\"validate\"&&f.createElement(u,null,M.error.message)))),f.createElement(r,{display:\"flex\",flexDirection:\"row\",alignItems:\"flex-start\"},\"\"===v&&f.createElement(y,{form:C,setSelectedRoom:T}),\"u\"===v&&f.createElement(S,{form:C}),\"d\"===v&&f.createElement(x,{form:C}),\"l\"===v&&f.createElement(h,{form:C}),f.createElement(r,{flexShrink:0,mbs:28,mis:8},f.createElement(c,{align:\"end\"},f.createElement(d,{secondary:!0,onClick:()=>window.print()},w(\"Export\"),\" \",w(\"PDF\")),f.createElement(d,{primary:!0,type:\"submit\"},w(\"Apply\"))))))})}","map":"{\"version\":3,\"sources\":[\"client/views/audit/components/AuditForm.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IAuditLog, IRoom } from '@rocket.chat/core-typings';\\nimport { Box, Field, FieldLabel, FieldRow, FieldError, TextInput, Button, ButtonGroup } from '@rocket.chat/fuselage';\\nimport React from 'react';\\nimport { useController } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport type { AuditFields } from '../hooks/useAuditForm';\\nimport { useAuditForm } from '../hooks/useAuditForm';\\nimport { useSendTelemetryMutation } from '../hooks/useSendTelemetryMutation';\\nimport DateRangePicker from './forms/DateRangePicker';\\nimport DirectTab from './tabs/DirectTab';\\nimport OmnichannelTab from './tabs/OmnichannelTab';\\nimport RoomsTab from './tabs/RoomsTab';\\nimport UsersTab from './tabs/UsersTab';\\n\\ntype AuditFormProps = {\\n\\ttype: IAuditLog['fields']['type'];\\n\\tonSubmit?: (payload: { type: IAuditLog['fields']['type'] } & AuditFields) => void;\\n\\tsetSelectedRoom: React.Dispatch<React.SetStateAction<IRoom | undefined>>;\\n};\\n\\nconst AuditForm = ({ type, onSubmit, setSelectedRoom }: AuditFormProps) => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst form = useAuditForm();\\n\\tconst { control, handleSubmit, register } = form;\\n\\n\\tconst { field: dateRangeField, fieldState: dateRangeFieldState } = useController({ name: 'dateRange', control });\\n\\n\\tconst sendTelemetryMutation = useSendTelemetryMutation();\\n\\n\\tconst submit = () => {\\n\\t\\tsendTelemetryMutation.mutate({\\n\\t\\t\\tparams: [{ eventName: 'updateCounter', settingsId: 'Message_Auditing_Apply_Count', timestamp: Date.now() }],\\n\\t\\t});\\n\\n\\t\\tonSubmit?.({ type, ...form.getValues() });\\n\\t};\\n\\n\\treturn (\\n\\t\\t<form onSubmit={handleSubmit(submit)}>\\n\\t\\t\\t<Box display='flex' flexDirection='row' justifyContent='stretch' marginInline={-4}>\\n\\t\\t\\t\\t<Field flexShrink={1} marginInline={4}>\\n\\t\\t\\t\\t\\t<FieldLabel>{t('Message')}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<TextInput placeholder={t('Search')} {...register('msg')} />\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t<Field flexShrink={1} marginInline={4}>\\n\\t\\t\\t\\t\\t<FieldLabel>{t('Date')}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<DateRangePicker value={dateRangeField.value} onChange={dateRangeField.onChange} display='flex' flexGrow={1} />\\n\\t\\t\\t\\t\\t\\t{dateRangeFieldState.error?.type === 'required' && <FieldError>{t('Required_field', { field: t('Date') })}</FieldError>}\\n\\t\\t\\t\\t\\t\\t{dateRangeFieldState.error?.type === 'validate' && <FieldError>{dateRangeFieldState.error.message}</FieldError>}\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t</Box>\\n\\t\\t\\t<Box display='flex' flexDirection='row' alignItems='flex-start'>\\n\\t\\t\\t\\t{type === '' && <RoomsTab form={form} setSelectedRoom={setSelectedRoom} />}\\n\\t\\t\\t\\t{type === 'u' && <UsersTab form={form} />}\\n\\t\\t\\t\\t{type === 'd' && <DirectTab form={form} />}\\n\\t\\t\\t\\t{type === 'l' && <OmnichannelTab form={form} />}\\n\\t\\t\\t\\t<Box flexShrink={0} mbs={28} mis={8}>\\n\\t\\t\\t\\t\\t<ButtonGroup align='end'>\\n\\t\\t\\t\\t\\t\\t<Button secondary onClick={() => window.print()}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Export')} {t('PDF')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t\\t<Button primary type='submit'>\\n\\t\\t\\t\\t\\t\\t\\t{t('Apply')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</Box>\\n\\t\\t</form>\\n\\t);\\n};\\n\\nexport default AuditForm;\\n\",null],\"names\":[\"_extends\",\"_objectSpread\",\"Box\",\"Field\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"TextInput\",\"Button\",\"ButtonGroup\",\"React\",\"useController\",\"useTranslation\",\"useAuditForm\",\"useSendTelemetryMutation\",\"DateRangePicker\",\"DirectTab\",\"OmnichannelTab\",\"RoomsTab\",\"UsersTab\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_dateRangeFieldState$\",\"_dateRangeFieldState$2\",\"type\",\"onSubmit\",\"setSelectedRoom\",\"t\",\"form\",\"control\",\"handleSubmit\",\"register\",\"field\",\"dateRangeField\",\"fieldState\",\"dateRangeFieldState\",\"name\",\"sendTelemetryMutation\",\"createElement\",\"submit\",\"mutate\",\"params\",\"eventName\",\"settingsId\",\"timestamp\",\"Date\",\"now\",\"getValues\",\"display\",\"flexDirection\",\"justifyContent\",\"marginInline\",\"flexShrink\",\"placeholder\",\"value\",\"onChange\",\"flexGrow\",\"error\",\"message\",\"alignItems\",\"mbs\",\"mis\",\"align\",\"secondary\",\"onClick\",\"window\",\"print\",\"primary\"],\"mappings\":\"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\"}"}