{"code":"function module(e,t,n){var l,r,a,c,i,o,u,m,s,f,d,_,E,p,g,h,v,b,k,C,F,T,S,y,q,j,w,x;n.link(\"@babel/runtime/helpers/extends\",{default:function(e){l=e}},0),n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){r=e}},1),n.link(\"@rocket.chat/fuselage\",{Field:function(e){a=e},FieldGroup:function(e){c=e},Button:function(e){i=e},TextInput:function(e){o=e},Modal:function(e){u=e},Box:function(e){m=e},CheckBox:function(e){s=e},Divider:function(e){f=e},EmailInput:function(e){d=e},FieldLabel:function(e){_=e},FieldRow:function(e){E=e},FieldError:function(e){p=e}},0),n.link(\"@rocket.chat/ui-contexts\",{usePermission:function(e){g=e},useSetting:function(e){h=e},useTranslation:function(e){v=e},useUserPreference:function(e){b=e}},1),n.link(\"react\",{default:function(e){k=e},useCallback:function(e){C=e},useState:function(e){F=e},useEffect:function(e){T=e},useMemo:function(e){S=e}},2),n.link(\"react-hook-form\",{useForm:function(e){y=e}},3),n.link(\"../../../hooks/useHasLicenseModule\",{useHasLicenseModule:function(e){q=e}},4),n.link(\"../../../lib/toast\",{dispatchToastMessage:function(e){j=e}},5),n.link(\"../../GenericModal\",{default:function(e){w=e}},6),n.link(\"../Tags\",{default:function(e){x=e}},7),n.exportDefault(function(e){var t,n,B,M,P,D=e.department,L=e.visitorEmail,R=e.onCancel,G=e.onConfirm,A=v(),O=y(),H=O.formState.errors,I=O.handleSubmit,N=O.register,U=O.setError,V=O.setFocus,W=O.setValue,z=O.watch,J=h(\"Livechat_request_comment_when_closing_conversation\"),K=h(\"Livechat_transcript_send_always\"),Q=h(\"Livechat_transcript_email_subject\"),X=F(!1),Y=r(X,2),Z=Y[0],$=Y[1],ee=z(\"tags\"),et=z(\"comment\"),en=z(\"transcriptEmail\"),el=z(\"subject\"),er=null!==(t=b(\"omnichannelTranscriptEmail\"))&&void 0!==t&&t,ea=null!==(n=b(\"omnichannelTranscriptPDF\"))&&void 0!==n&&n,ec=q(\"livechat-enterprise\"),ei=g(\"request-pdf-transcript\"),eo=g(\"send-omnichannel-chat-transcript\")&&L&&!K,eu=ei&&ec,em=eo||eu,es=C(function(e){var t=e.comment,n=e.tags,l=e.transcriptPDF,r=e.transcriptEmail,a=e.subject,c=r&&L?{email:L,subject:a}:void 0;!(null!=t&&t.trim())&&J&&U(\"comment\",{type:\"custom\",message:A(\"Required_field\",{field:A(\"Comment\")})}),r&&!a&&U(\"subject\",{type:\"custom\",message:A(\"Required_field\",{field:A(\"Subject\")})}),!(null!=n&&n.length)&&Z&&U(\"tags\",{type:\"custom\",message:A(\"error-tags-must-be-assigned-before-closing-chat\")}),(!H.comment||H.tags)&&G(t,n,{omnichannelTranscriptPDF:!!l,omnichannelTranscriptEmail:!!K||!!r},c)},[J,Z,L,H,U,A,G,K]),ef=S(function(){var e=Z&&!(null!=ee&&ee.length)||H.tags,t=J&&!(null!=et&&et.trim())||H.comment,n=en&&(!L||!el);return!!(e||t||n)},[et,J,H,Z,ee,en,L,el]);return(T(function(){null!=D&&D.requestTagBeforeClosingChat&&$(!0)},[D]),T(function(){J&&V(\"comment\")},[J,V]),T(function(){Z&&N(\"tags\")},[N,Z]),T(function(){if(en){if(!L){j({type:\"error\",message:A(\"Customer_without_registered_email\")});return}W(\"subject\",el||Q||A(\"Transcript_of_your_livechat_conversation\"))}},[en,W,L,el,A,Q]),J||Z||em)?k.createElement(u,{wrapperFunction:function(e){return k.createElement(m,l({is:\"form\",onSubmit:I(es)},e,{\"data-qa-id\":\"close-chat-modal\"}))}},k.createElement(u.Header,null,k.createElement(u.Icon,{name:\"baloon-close-top-right\"}),k.createElement(u.Title,null,A(\"Wrap_up_conversation\")),k.createElement(u.Close,{onClick:R})),k.createElement(u.Content,{fontScale:\"p2\"},k.createElement(m,{color:\"annotation\"},A(\"Close_room_description\")),k.createElement(c,null,k.createElement(a,null,k.createElement(_,{required:J},A(\"Comment\")),k.createElement(E,null,k.createElement(o,l({},N(\"comment\"),{error:H.comment&&A(\"Required_field\",{field:A(\"Comment\")}),flexGrow:1,placeholder:A(\"Please_add_a_comment\")}))),k.createElement(p,null,null===(B=H.comment)||void 0===B?void 0:B.message)),k.createElement(a,null,k.createElement(x,l({tagRequired:Z,tags:ee,handler:function(e){W(\"tags\",e)}},D&&{department:D._id})),k.createElement(p,null,null===(M=H.tags)||void 0===M?void 0:M.message)),em&&k.createElement(k.Fragment,null,k.createElement(a,null,k.createElement(f,null),k.createElement(_,{marginBlockStart:8},A(\"Chat_transcript\"))),eu&&k.createElement(a,{marginBlockStart:10},k.createElement(E,null,k.createElement(_,{htmlFor:\"transcript-pdf\"},A(\"Omnichannel_transcript_pdf\")),k.createElement(s,l({id:\"transcript-pdf\"},N(\"transcriptPDF\",{value:ea}))))),eo&&k.createElement(k.Fragment,null,k.createElement(a,{marginBlockStart:10},k.createElement(E,null,k.createElement(_,{htmlFor:\"transcript-email\"},A(\"Omnichannel_transcript_email\")),k.createElement(s,l({id:\"transcript-email\"},N(\"transcriptEmail\",{value:er}))))),en&&k.createElement(k.Fragment,null,k.createElement(a,{marginBlockStart:14},k.createElement(_,{required:!0},A(\"Contact_email\")),k.createElement(E,null,k.createElement(d,{value:L,required:!0,disabled:!0,flexGrow:1}))),k.createElement(a,{marginBlockStart:12},k.createElement(_,{required:!0},A(\"Subject\")),k.createElement(E,null,k.createElement(o,l({},N(\"subject\",{required:!0}),{className:\"active\",error:H.subject&&A(\"Required_field\",{field:A(\"Subject\")}),flexGrow:1}))),k.createElement(p,null,null===(P=H.subject)||void 0===P?void 0:P.message)))),k.createElement(a,{marginBlockStart:16},k.createElement(_,{color:\"annotation\",fontScale:\"c1\"},eu&&eo?A(\"These_options_affect_this_conversation_only_To_set_default_selections_go_to_My_Account_Omnichannel\"):A(\"This_option_affect_this_conversation_only_To_set_default_selection_go_to_My_Account_Omnichannel\")))))),k.createElement(u.Footer,null,k.createElement(u.FooterControllers,null,k.createElement(i,{onClick:R},A(\"Cancel\")),k.createElement(i,{type:\"submit\",disabled:ef,primary:!0},A(\"Confirm\"))))):k.createElement(w,{variant:\"warning\",title:A(\"Are_you_sure_you_want_to_close_this_chat\"),onConfirm:function(){return G()},onCancel:R,onClose:R,confirmText:A(\"Confirm\")})})}","map":"{\"version\":3,\"sources\":[\"client/components/Omnichannel/modals/CloseChatModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatDepartment, Serialized } from '@rocket.chat/core-typings';\\nimport {\\n\\tField,\\n\\tFieldGroup,\\n\\tButton,\\n\\tTextInput,\\n\\tModal,\\n\\tBox,\\n\\tCheckBox,\\n\\tDivider,\\n\\tEmailInput,\\n\\tFieldLabel,\\n\\tFieldRow,\\n\\tFieldError,\\n} from '@rocket.chat/fuselage';\\nimport { usePermission, useSetting, useTranslation, useUserPreference } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback, useState, useEffect, useMemo } from 'react';\\nimport { useForm } from 'react-hook-form';\\n\\nimport { useHasLicenseModule } from '../../../hooks/useHasLicenseModule';\\nimport { dispatchToastMessage } from '../../../lib/toast';\\nimport GenericModal from '../../GenericModal';\\nimport Tags from '../Tags';\\n\\nconst CloseChatModal = ({\\n\\tdepartment,\\n\\tvisitorEmail,\\n\\tonCancel,\\n\\tonConfirm,\\n}: {\\n\\tdepartment?: Serialized<ILivechatDepartment | null>;\\n\\tvisitorEmail?: string;\\n\\tonCancel: () => void;\\n\\tonConfirm: (\\n\\t\\tcomment?: string,\\n\\t\\ttags?: string[],\\n\\t\\tpreferences?: { omnichannelTranscriptPDF: boolean; omnichannelTranscriptEmail: boolean },\\n\\t\\trequestData?: { email: string; subject: string },\\n\\t) => Promise<void>;\\n}): ReactElement => {\\n\\tconst t = useTranslation();\\n\\n\\tconst {\\n\\t\\tformState: { errors },\\n\\t\\thandleSubmit,\\n\\t\\tregister,\\n\\t\\tsetError,\\n\\t\\tsetFocus,\\n\\t\\tsetValue,\\n\\t\\twatch,\\n\\t} = useForm();\\n\\n\\tconst commentRequired = useSetting('Livechat_request_comment_when_closing_conversation') as boolean;\\n\\tconst alwaysSendTranscript = useSetting<boolean>('Livechat_transcript_send_always');\\n\\tconst customSubject = useSetting<string>('Livechat_transcript_email_subject');\\n\\tconst [tagRequired, setTagRequired] = useState(false);\\n\\n\\tconst tags = watch('tags');\\n\\tconst comment = watch('comment');\\n\\tconst transcriptEmail = watch('transcriptEmail');\\n\\tconst subject = watch('subject');\\n\\n\\tconst userTranscriptEmail = useUserPreference<boolean>('omnichannelTranscriptEmail') ?? false;\\n\\tconst userTranscriptPDF = useUserPreference<boolean>('omnichannelTranscriptPDF') ?? false;\\n\\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\\n\\tconst transcriptPDFPermission = usePermission('request-pdf-transcript');\\n\\tconst transcriptEmailPermission = usePermission('send-omnichannel-chat-transcript');\\n\\n\\tconst canSendTranscriptEmail = transcriptEmailPermission && visitorEmail && !alwaysSendTranscript;\\n\\tconst canSendTranscriptPDF = transcriptPDFPermission && hasLicense;\\n\\tconst canSendTranscript = canSendTranscriptEmail || canSendTranscriptPDF;\\n\\n\\tconst handleTags = (value: string[]): void => {\\n\\t\\tsetValue('tags', value);\\n\\t};\\n\\n\\tconst onSubmit = useCallback(\\n\\t\\t({ comment, tags, transcriptPDF, transcriptEmail, subject }): void => {\\n\\t\\t\\tconst preferences = {\\n\\t\\t\\t\\tomnichannelTranscriptPDF: !!transcriptPDF,\\n\\t\\t\\t\\tomnichannelTranscriptEmail: alwaysSendTranscript ? true : !!transcriptEmail,\\n\\t\\t\\t};\\n\\t\\t\\tconst requestData = transcriptEmail && visitorEmail ? { email: visitorEmail, subject } : undefined;\\n\\n\\t\\t\\tif (!comment?.trim() && commentRequired) {\\n\\t\\t\\t\\tsetError('comment', { type: 'custom', message: t('Required_field', { field: t('Comment') }) });\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (transcriptEmail && !subject) {\\n\\t\\t\\t\\tsetError('subject', { type: 'custom', message: t('Required_field', { field: t('Subject') }) });\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (!tags?.length && tagRequired) {\\n\\t\\t\\t\\tsetError('tags', { type: 'custom', message: t('error-tags-must-be-assigned-before-closing-chat') });\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (!errors.comment || errors.tags) {\\n\\t\\t\\t\\tonConfirm(comment, tags, preferences, requestData);\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[commentRequired, tagRequired, visitorEmail, errors, setError, t, onConfirm, alwaysSendTranscript],\\n\\t);\\n\\n\\tconst cannotSubmit = useMemo(() => {\\n\\t\\tconst cannotSendTag = (tagRequired && !tags?.length) || errors.tags;\\n\\t\\tconst cannotSendComment = (commentRequired && !comment?.trim()) || errors.comment;\\n\\t\\tconst cannotSendTranscriptEmail = transcriptEmail && (!visitorEmail || !subject);\\n\\n\\t\\treturn Boolean(cannotSendTag || cannotSendComment || cannotSendTranscriptEmail);\\n\\t}, [comment, commentRequired, errors, tagRequired, tags, transcriptEmail, visitorEmail, subject]);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (department?.requestTagBeforeClosingChat) {\\n\\t\\t\\tsetTagRequired(true);\\n\\t\\t}\\n\\t}, [department]);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (commentRequired) {\\n\\t\\t\\tsetFocus('comment');\\n\\t\\t}\\n\\t}, [commentRequired, setFocus]);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (tagRequired) {\\n\\t\\t\\tregister('tags');\\n\\t\\t}\\n\\t}, [register, tagRequired]);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (transcriptEmail) {\\n\\t\\t\\tif (!visitorEmail) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: t('Customer_without_registered_email') });\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tsetValue('subject', subject || customSubject || t('Transcript_of_your_livechat_conversation'));\\n\\t\\t}\\n\\t}, [transcriptEmail, setValue, visitorEmail, subject, t, customSubject]);\\n\\n\\tif (commentRequired || tagRequired || canSendTranscript) {\\n\\t\\treturn (\\n\\t\\t\\t<Modal wrapperFunction={(props) => <Box is='form' onSubmit={handleSubmit(onSubmit)} {...props} data-qa-id='close-chat-modal' />}>\\n\\t\\t\\t\\t<Modal.Header>\\n\\t\\t\\t\\t\\t<Modal.Icon name='baloon-close-top-right' />\\n\\t\\t\\t\\t\\t<Modal.Title>{t('Wrap_up_conversation')}</Modal.Title>\\n\\t\\t\\t\\t\\t<Modal.Close onClick={onCancel} />\\n\\t\\t\\t\\t</Modal.Header>\\n\\t\\t\\t\\t<Modal.Content fontScale='p2'>\\n\\t\\t\\t\\t\\t<Box color='annotation'>{t('Close_room_description')}</Box>\\n\\t\\t\\t\\t\\t<FieldGroup>\\n\\t\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t\\t<FieldLabel required={commentRequired}>{t('Comment')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t<TextInput\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{...register('comment')}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\terror={errors.comment && t('Required_field', { field: t('Comment') })}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tflexGrow={1}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tplaceholder={t('Please_add_a_comment')}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<FieldError>{errors.comment?.message}</FieldError>\\n\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t\\t<Tags tagRequired={tagRequired} tags={tags} handler={handleTags} {...(department && { department: department._id })} />\\n\\t\\t\\t\\t\\t\\t\\t<FieldError>{errors.tags?.message}</FieldError>\\n\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t{canSendTranscript && (\\n\\t\\t\\t\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Divider />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldLabel marginBlockStart={8}>{t('Chat_transcript')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t\\t\\t{canSendTranscriptPDF && (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Field marginBlockStart={10}>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldLabel htmlFor='transcript-pdf'>{t('Omnichannel_transcript_pdf')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<CheckBox id='transcript-pdf' {...register('transcriptPDF', { value: userTranscriptPDF })} />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t\\t\\t{canSendTranscriptEmail && (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Field marginBlockStart={10}>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldLabel htmlFor='transcript-email'>{t('Omnichannel_transcript_email')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<CheckBox id='transcript-email' {...register('transcriptEmail', { value: userTranscriptEmail })} />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{transcriptEmail && (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Field marginBlockStart={14}>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldLabel required>{t('Contact_email')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<EmailInput value={visitorEmail} required disabled flexGrow={1} />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Field marginBlockStart={12}>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldLabel required>{t('Subject')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<TextInput\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{...register('subject', { required: true })}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclassName='active'\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\terror={errors.subject && t('Required_field', { field: t('Subject') })}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tflexGrow={1}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldError>{errors.subject?.message}</FieldError>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</>\\n\\t\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t\\t\\t<Field marginBlockStart={16}>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<FieldLabel color='annotation' fontScale='c1'>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{canSendTranscriptPDF && canSendTranscriptEmail\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t? t('These_options_affect_this_conversation_only_To_set_default_selections_go_to_My_Account_Omnichannel')\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t: t('This_option_affect_this_conversation_only_To_set_default_selection_go_to_My_Account_Omnichannel')}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t\\t</>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</FieldGroup>\\n\\t\\t\\t\\t</Modal.Content>\\n\\t\\t\\t\\t<Modal.Footer>\\n\\t\\t\\t\\t\\t<Modal.FooterControllers>\\n\\t\\t\\t\\t\\t\\t<Button onClick={onCancel}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t\\t<Button type='submit' disabled={cannotSubmit} primary>\\n\\t\\t\\t\\t\\t\\t\\t{t('Confirm')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t</Modal.FooterControllers>\\n\\t\\t\\t\\t</Modal.Footer>\\n\\t\\t\\t</Modal>\\n\\t\\t);\\n\\t}\\n\\n\\treturn (\\n\\t\\t<GenericModal\\n\\t\\t\\tvariant='warning'\\n\\t\\t\\ttitle={t('Are_you_sure_you_want_to_close_this_chat')}\\n\\t\\t\\tonConfirm={(): Promise<void> => onConfirm()}\\n\\t\\t\\tonCancel={onCancel}\\n\\t\\t\\tonClose={onCancel}\\n\\t\\t\\tconfirmText={t('Confirm')}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default CloseChatModal;\\n\",null],\"names\":[\"_extends\",\"_slicedToArray\",\"Field\",\"FieldGroup\",\"Button\",\"TextInput\",\"Modal\",\"Box\",\"CheckBox\",\"Divider\",\"EmailInput\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"usePermission\",\"useSetting\",\"useTranslation\",\"useUserPreference\",\"React\",\"useCallback\",\"useState\",\"useEffect\",\"useMemo\",\"useForm\",\"useHasLicenseModule\",\"dispatchToastMessage\",\"GenericModal\",\"Tags\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_useUserPreference\",\"_useUserPreference2\",\"_errors$comment\",\"_errors$tags\",\"_errors$subject\",\"department\",\"visitorEmail\",\"onCancel\",\"onConfirm\",\"t\",\"_useForm\",\"errors\",\"formState\",\"handleSubmit\",\"register\",\"setError\",\"setFocus\",\"setValue\",\"watch\",\"commentRequired\",\"alwaysSendTranscript\",\"customSubject\",\"_useState\",\"_useState2\",\"tagRequired\",\"setTagRequired\",\"tags\",\"comment\",\"transcriptEmail\",\"subject\",\"userTranscriptEmail\",\"userTranscriptPDF\",\"hasLicense\",\"transcriptPDFPermission\",\"canSendTranscriptEmail\",\"transcriptEmailPermission\",\"canSendTranscriptPDF\",\"canSendTranscript\",\"onSubmit\",\"_ref2\",\"transcriptPDF\",\"requestData\",\"email\",\"undefined\",\"trim\",\"type\",\"message\",\"field\",\"length\",\"omnichannelTranscriptPDF\",\"omnichannelTranscriptEmail\",\"cannotSubmit\",\"cannotSendTag\",\"cannotSendComment\",\"cannotSendTranscriptEmail\",\"Boolean\",\"requestTagBeforeClosingChat\",\"createElement\",\"wrapperFunction\",\"props\",\"is\",\"Header\",\"Icon\",\"name\",\"Title\",\"Close\",\"onClick\",\"Content\",\"fontScale\",\"color\",\"required\",\"error\",\"flexGrow\",\"placeholder\",\"handler\",\"value\",\"_id\",\"Fragment\",\"marginBlockStart\",\"htmlFor\",\"id\",\"disabled\",\"className\",\"Footer\",\"FooterControllers\",\"primary\",\"variant\",\"title\",\"onClose\",\"confirmText\"],\"mappings\":\"uBAyBA,IAxBAA,EAUCC,EAVDC,EACCC,EACAC,EACAC,EACAC,EAAAC,EACAC,EACGC,EACHC,EACOC,EACPC,EACAC,EAG8BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAZ9BC,EACAC,IAAA,CAAA,iCAIG,CACHC,QAAQ,SACDC,CAAA,EACP/B,EAAU+B,CAAA,CACV,EAAA,GAEAH,EAAAC,IACA,CAAA,uCAA8B,CAAAC,QAAA,SAAAC,CAAA,EAAA9B,EAAA8B,CAAA,CAAA,EAAA,GAF9BH,EACAC,IAAA,CAAA,wBACM,CAAA3B,MAAA,SAAwB6B,CAAA,EAAA7B,EAAA6B,CAAA,EAAA5B,WAAA,SAAA4B,CAAA,EAAA5B,EAAA4B,CAAA,EAAA3B,OAAA,SAAA2B,CAAA,EAAA3B,EAAA2B,CAAA,EAAA1B,UAAA,SAAA0B,CAAA,EAAA1B,EAAA0B,CAAA,EAAAzB,MAAA,SAAAyB,CAAA,EAAAzB,EAAAyB,CAAA,EAAAxB,IAAA,SAAAwB,CAAA,EAAAxB,EAAAwB,CAAA,EAAAvB,SAAA,SAAAuB,CAAA,EAAAvB,EAAAuB,CAAA,EAAAtB,QAAA,SAAAsB,CAAA,EAAAtB,EAAAsB,CAAA,EAAArB,WAAA,SAAAqB,CAAA,EAAArB,EAAAqB,CAAA,EAAApB,WAAA,SAAAoB,CAAA,EAAApB,EAAAoB,CAAA,EAAAnB,SAAA,SAAAmB,CAAA,EAAAnB,EAAAmB,CAAA,EAAAlB,WAAA,SAAAkB,CAAA,EAAAlB,EAAAkB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAf,cAAA,SAAAiB,CAAA,EAAAjB,EAAAiB,CAAA,EAAAhB,WAAA,SAAAgB,CAAA,EAAAhB,EAAAgB,CAAA,EAAAf,eAAA,SAAAe,CAAA,EAAAf,EAAAe,CAAA,EAAAd,kBAAA,SAAAc,CAAA,EAAAd,EAAAc,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,YAAA,SAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,SAAA,SAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,UAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,QAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kBAAA,CAAAN,QAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qCAAA,CAAAL,oBAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qBAAA,CAAAJ,qBAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qBAAA,CAAA,QAAA,SAAAE,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,UAAA,CAAA,QAAA,SAAAE,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAb/BH,EAAOI,aAEN,CAsBsB,SAAAC,CAAA,EAeJ,IAAAC,EAAAC,EAoGuCC,EAAAC,EAAAC,EAlHzDC,EAAUN,EAAVM,UAAU,CACVC,EAAYP,EAAZO,YAAY,CACZC,EAAQR,EAARQ,QAAQ,CACRC,EAAST,EAATS,SAAS,CAYHC,EAAI3B,IAEV4B,EAQIrB,IAPUsB,EAAMD,EAAnBE,SAAS,CAAID,MAAM,CACnBE,EAAYH,EAAZG,YAAY,CACZC,EAAQJ,EAARI,QAAQ,CACRC,EAAQL,EAARK,QAAQ,CACRC,EAAQN,EAARM,QAAQ,CACRC,EAAQP,EAARO,QAAQ,CACRC,EAAKR,EAALQ,KAAK,CAGAC,EAAkBtC,EAAW,sDAC7BuC,EAAuBvC,EAAoB,mCAC3CwC,EAAgBxC,EAAmB,qCACzCyC,EAAsCpC,EAAS,CAAA,GAAMqC,EAAAxD,EAAAuD,EAAA,GAA9CE,EAAWD,CAAA,CAAA,EAAA,CAAEE,EAAcF,CAAA,CAAA,EAAA,CAE5BG,GAAOR,EAAM,QACbS,GAAUT,EAAM,WAChBU,GAAkBV,EAAM,mBACxBW,GAAUX,EAAM,WAEhBY,GAAmB,AAA2D,OAA3D9B,CAAAA,EAAGjB,EAA2B,6BAA4B,GAACiB,AAAA,KAAA,IAAAA,GAAAA,EAC9E+B,GAAiB,AAAyD,OAAzD9B,CAAAA,EAAGlB,EAA2B,2BAA0B,GAACkB,AAAA,KAAA,IAAAA,GAAAA,EAC1E+B,GAAa1C,EAAoB,uBACjC2C,GAA0BrD,EAAc,0BAGxCsD,GAAyBC,AAFGvD,EAAc,qCAEY0B,GAAgB,CAACc,EACvEgB,GAAuBH,IAA2BD,GAClDK,GAAoBH,IAA0BE,GAM9CE,GAAWrD,EAChB,SAAAsD,CAAA,EAAqE,IAAlEZ,EAAOY,EAAPZ,OAAO,CAAED,EAAIa,EAAJb,IAAI,CAAEc,EAAaD,EAAbC,aAAa,CAAEZ,EAAeW,EAAfX,eAAe,CAAEC,EAAOU,EAAPV,OAAO,CAKlDY,EAAcb,GAAmBtB,EAAe,CAAEoC,MAAOpC,EAAcuB,QAAAA,CAAO,EAAKc,KAAAA,CAErF,EAAChB,CAAAA,MAAAA,GAAAA,EAASiB,IAAI,EAAA,GAAMzB,GACvBJ,EAAS,UAAW,CAAE8B,KAAM,SAAUC,QAASrC,EAAE,iBAAkB,CAAEsC,MAAOtC,EAAE,UAAU,EAAG,GAGxFmB,GAAmB,CAACC,GACvBd,EAAS,UAAW,CAAE8B,KAAM,SAAUC,QAASrC,EAAE,iBAAkB,CAAEsC,MAAOtC,EAAE,UAAU,EAAG,GAGxF,CAACiB,CAAAA,MAAAA,GAAAA,EAAMsB,MAAM,AAANA,GAAUxB,GACpBT,EAAS,OAAQ,CAAE8B,KAAM,SAAUC,QAASrC,EAAE,kDAAkD,GAG7F,CAAA,CAACE,EAAOgB,OAAO,EAAIhB,EAAOe,IAAI,AAAJA,GAC7BlB,EAAUmB,EAASD,EAnBA,CACnBuB,yBAA0B,CAAC,CAACT,EAC5BU,2BAA4B9B,EAAAA,GAA8B,CAAC,CAACQ,GAiBtBa,EAExC,EACA,CAACtB,EAAiBK,EAAalB,EAAcK,EAAQI,EAAUN,EAAGD,EAAWY,EAAqB,EAG7F+B,GAAe/D,EAAQ,WAC5B,IAAMgE,EAAiB5B,GAAe,CAACE,CAAAA,MAAAA,IAAAA,GAAMsB,MAAM,AAANA,GAAWrC,EAAOe,IAAI,CAC7D2B,EAAqBlC,GAAmB,CAACQ,CAAAA,MAAAA,IAAAA,GAASiB,IAAI,EAAA,GAAOjC,EAAOgB,OAAO,CAC3E2B,EAA4B1B,IAAoB,CAAA,CAACtB,GAAgB,CAACuB,EAAAA,EAExE,MAAO0B,CAAAA,CAAQH,CAAAA,GAAiBC,GAAqBC,CAAAA,CACtD,EAAG,CAAC3B,GAASR,EAAiBR,EAAQa,EAAaE,GAAME,GAAiBtB,EAAcuB,GAAQ,QA8BhG,CA5BA1C,EAAU,iBACLkB,GAAAA,EAAYmD,2BAA2B,EAC1C/B,EAAe,CAAA,EAEjB,EAAG,CAACpB,EAAW,EAEflB,EAAU,WACLgC,GACHH,EAAS,UAEX,EAAG,CAACG,EAAiBH,EAAS,EAE9B7B,EAAU,WACLqC,GACHV,EAAS,OAEX,EAAG,CAACA,EAAUU,EAAY,EAE1BrC,EAAU,WACT,GAAIyC,GAAiB,CACpB,GAAI,CAACtB,EAAc,CAClBf,EAAqB,CAAEsD,KAAM,QAASC,QAASrC,EAAE,oCAAoC,GACrF,MACD,CACAQ,EAAS,UAAWY,IAAWR,GAAiBZ,EAAE,4CACnD,CACD,EAAG,CAACmB,GAAiBX,EAAUX,EAAcuB,GAASpB,EAAGY,EAAc,EAEnEF,GAAmBK,GAAea,IAEpCrD,EAAAyE,aAAA,CAACrF,EAAK,CAACsF,gBAAiB,SAACC,CAAK,EAAA,OAAK3E,EAAAyE,aAAA,CAACpF,EAAGP,EAAA,CAAC8F,GAAG,OAAOtB,SAAUzB,EAAayB,GAAU,EAAKqB,EAAK,CAAE,aAAW,kBAAkB,GAAG,CAAC,EAC/H3E,EAAAyE,aAAA,CAACrF,EAAMyF,MAAM,CAAA,KACZ7E,EAAAyE,aAAA,CAACrF,EAAM0F,IAAI,CAAA,CAACC,KAAK,wBAAwB,GACzC/E,EAAAyE,aAAA,CAACrF,EAAM4F,KAAK,CAAA,KAAEvD,EAAE,yBAChBzB,EAAAyE,aAAA,CAACrF,EAAM6F,KAAK,CAAA,CAACC,QAAS3D,CAAS,IAEhCvB,EAAAyE,aAAA,CAACrF,EAAM+F,OAAO,CAAA,CAACC,UAAU,IAAI,EAC5BpF,EAAAyE,aAAA,CAACpF,EAAG,CAACgG,MAAM,YAAY,EAAE5D,EAAE,2BAC3BzB,EAAAyE,aAAA,CAACxF,EAAU,KACVe,EAAAyE,aAAA,CAACzF,EAAK,KACLgB,EAAAyE,aAAA,CAAChF,EAAU,CAAC6F,SAAUnD,CAAgB,EAAEV,EAAE,YAC1CzB,EAAAyE,aAAA,CAAC/E,EAAQ,KACRM,EAAAyE,aAAA,CAACtF,EAASL,EAAA,CAAA,EACLgD,EAAS,WAAU,CACvByD,MAAO5D,EAAOgB,OAAO,EAAIlB,EAAE,iBAAkB,CAAEsC,MAAOtC,EAAE,UAAU,GAClE+D,SAAU,EACVC,YAAahE,EAAE,uBAAwB,KAGzCzB,EAAAyE,aAAA,CAAC9E,EAAU,KAAA,AAAgB,OAAhBuB,CAAAA,EAAES,EAAOgB,OAAO,AAAPA,GAAOzB,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgB4C,OAAoB,GAElD9D,EAAAyE,aAAA,CAACzF,EAAK,KACLgB,EAAAyE,aAAA,CAAChE,EAAI3B,EAAA,CAAC0D,YAAaA,EAAaE,KAAMA,GAAMgD,QA3F/B,SAACC,CAAe,EAClC1D,EAAS,OAAQ0D,EAClB,CAyFsE,EAAMtE,GAAc,CAAEA,WAAYA,EAAWuE,GAAAA,AAAG,IAChH5F,EAAAyE,aAAA,CAAC9E,EAAU,KAAA,AAAa,OAAbwB,CAAAA,EAAEQ,EAAOe,IAAI,AAAJA,GAAIvB,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAXA,EAAa2C,OAAoB,GAE9CT,IACArD,EAAAyE,aAAA,CAAAzE,EAAA6F,QAAA,CAAA,KACC7F,EAAAyE,aAAA,CAACzF,EAAK,KACLgB,EAAAyE,aAAA,CAAClF,EAAO,MACRS,EAAAyE,aAAA,CAAChF,EAAU,CAACqG,iBAAkB,CAAE,EAAErE,EAAE,qBAEpC2B,IACApD,EAAAyE,aAAA,CAACzF,EAAK,CAAC8G,iBAAkB,EAAG,EAC3B9F,EAAAyE,aAAA,CAAC/E,EAAQ,KACRM,EAAAyE,aAAA,CAAChF,EAAU,CAACsG,QAAQ,gBAAgB,EAAEtE,EAAE,+BACxCzB,EAAAyE,aAAA,CAACnF,EAAQR,EAAA,CAACkH,GAAG,gBAAgB,EAAKlE,EAAS,gBAAiB,CAAE6D,MAAO5C,EAAiB,OAIxFG,IACAlD,EAAAyE,aAAA,CAAAzE,EAAA6F,QAAA,CAAA,KACC7F,EAAAyE,aAAA,CAACzF,EAAK,CAAC8G,iBAAkB,EAAG,EAC3B9F,EAAAyE,aAAA,CAAC/E,EAAQ,KACRM,EAAAyE,aAAA,CAAChF,EAAU,CAACsG,QAAQ,kBAAkB,EAAEtE,EAAE,iCAC1CzB,EAAAyE,aAAA,CAACnF,EAAQR,EAAA,CAACkH,GAAG,kBAAkB,EAAKlE,EAAS,kBAAmB,CAAE6D,MAAO7C,EAAmB,OAG7FF,IACA5C,EAAAyE,aAAA,CAAAzE,EAAA6F,QAAA,CAAA,KACC7F,EAAAyE,aAAA,CAACzF,EAAK,CAAC8G,iBAAkB,EAAG,EAC3B9F,EAAAyE,aAAA,CAAChF,EAAU,CAAC6F,SAAQ,CAAA,CAAA,EAAE7D,EAAE,kBACxBzB,EAAAyE,aAAA,CAAC/E,EAAQ,KACRM,EAAAyE,aAAA,CAACjF,EAAU,CAACmG,MAAOrE,EAAcgE,SAAQ,CAAA,EAACW,SAAQ,CAAA,EAACT,SAAU,CAAE,KAGjExF,EAAAyE,aAAA,CAACzF,EAAK,CAAC8G,iBAAkB,EAAG,EAC3B9F,EAAAyE,aAAA,CAAChF,EAAU,CAAC6F,SAAQ,CAAA,CAAA,EAAE7D,EAAE,YACxBzB,EAAAyE,aAAA,CAAC/E,EAAQ,KACRM,EAAAyE,aAAA,CAACtF,EAASL,EAAA,CAAA,EACLgD,EAAS,UAAW,CAAEwD,SAAU,CAAA,CAAI,GAAG,CAC3CY,UAAU,SACVX,MAAO5D,EAAOkB,OAAO,EAAIpB,EAAE,iBAAkB,CAAEsC,MAAOtC,EAAE,UAAU,GAClE+D,SAAU,CAAE,KAGdxF,EAAAyE,aAAA,CAAC9E,EAAU,KAAA,AAAgB,OAAhByB,CAAAA,EAAEO,EAAOkB,OAAO,AAAPA,GAAOzB,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAdA,EAAgB0C,OAAoB,KAMtD9D,EAAAyE,aAAA,CAACzF,EAAK,CAAC8G,iBAAkB,EAAG,EAC3B9F,EAAAyE,aAAA,CAAChF,EAAU,CAAC4F,MAAM,aAAaD,UAAU,IAAI,EAC3ChC,IAAwBF,GACtBzB,EAAE,sGACFA,EAAE,wGAOXzB,EAAAyE,aAAA,CAACrF,EAAM+G,MAAM,CAAA,KACZnG,EAAAyE,aAAA,CAACrF,EAAMgH,iBAAiB,CAAA,KACvBpG,EAAAyE,aAAA,CAACvF,EAAM,CAACgG,QAAS3D,CAAS,EAAEE,EAAE,WAC9BzB,EAAAyE,aAAA,CAACvF,EAAM,CAAC2E,KAAK,SAASoC,SAAU9B,GAAckC,QAAO,CAAA,CAAA,EACnD5E,EAAE,eASRzB,EAAAyE,aAAA,CAACjE,EAAY,CACZ8F,QAAQ,UACRC,MAAO9E,EAAE,4CACTD,UAAW,WAAA,OAAqBA,GAAW,EAC3CD,SAAUA,EACViF,QAASjF,EACTkF,YAAahF,EAAE,UAAW,EAG7B\"}"}