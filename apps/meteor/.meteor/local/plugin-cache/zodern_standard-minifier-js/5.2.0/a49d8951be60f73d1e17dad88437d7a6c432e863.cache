{"code":"function module(e,t,i){let u,l,s,n;i.export({useDeleteUser:()=>a}),i.link(\"@rocket.chat/ui-contexts\",{useStream(e){u=e},useUserId(e){l=e}},0),i.link(\"react\",{useEffect(e){s=e}},1),i.link(\"../../../../app/models/client\",{ChatMessage(e){n=e}},2);let a=()=>{let e=u(\"notify-logged\"),t=l();s(()=>{if(t)return e(\"Users:Deleted\",e=>{let{userId:t,messageErasureType:i,replaceByUser:u}=e;if(\"Unlink\"===i&&u)return n.update({\"u._id\":t},{$set:{alias:u.alias,\"u._id\":u._id,\"u.username\":u.username,\"u.name\":void 0}},{multi:!0});n.remove({\"u._id\":t})})},[e,t])}}","map":"{\"version\":3,\"sources\":[\"client/providers/UserProvider/hooks/useDeleteUser.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useStream, useUserId } from '@rocket.chat/ui-contexts';\\nimport { useEffect } from 'react';\\n\\nimport { ChatMessage } from '../../../../app/models/client';\\n\\nexport const useDeleteUser = () => {\\n\\tconst notify = useStream('notify-logged');\\n\\n\\tconst uid = useUserId();\\n\\tuseEffect(() => {\\n\\t\\tif (!uid) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\treturn notify('Users:Deleted', ({ userId, messageErasureType, replaceByUser }) => {\\n\\t\\t\\tif (messageErasureType === 'Unlink' && replaceByUser) {\\n\\t\\t\\t\\treturn ChatMessage.update(\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t'u._id': userId,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t$set: {\\n\\t\\t\\t\\t\\t\\t\\t'alias': replaceByUser.alias,\\n\\t\\t\\t\\t\\t\\t\\t'u._id': replaceByUser._id,\\n\\t\\t\\t\\t\\t\\t\\t'u.username': replaceByUser.username,\\n\\t\\t\\t\\t\\t\\t\\t'u.name': undefined,\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t{ multi: true },\\n\\t\\t\\t\\t);\\n\\t\\t\\t}\\n\\t\\t\\tChatMessage.remove({\\n\\t\\t\\t\\t'u._id': userId,\\n\\t\\t\\t});\\n\\t\\t});\\n\\t}, [notify, uid]);\\n};\\n\",null],\"names\":[\"useStream\",\"useUserId\",\"useEffect\",\"ChatMessage\",\"module\",\"export\",\"useDeleteUser\",\"link\",\"v\",\"notify\",\"uid\",\"_ref\",\"userId\",\"messageErasureType\",\"replaceByUser\",\"update\",\"$set\",\"alias\",\"_id\",\"username\",\"undefined\",\"multi\",\"remove\"],\"mappings\":\"2BAAqCA,EAA0BC,EAACC,EAAAC,EAAhEC,EAAOC,MAAE,CAAA,CAAAC,cAAoBA,IAAEA,CAAM,GAA2BF,EAAAG,IAAA,CAAA,2BAAA,CAAAP,UAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,UAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAL,UAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,gCAAA,CAAAJ,YAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAKzD,IAAMF,EAAgBA,KAC5B,IAAMG,EAAST,EAAU,iBAEnBU,EAAMT,IACZC,EAAU,KACT,GAAKQ,EAGL,OAAOD,EAAO,gBAAiBE,IAAkD,GAAjD,CAAEC,OAAAA,CAAM,CAAEC,mBAAAA,CAAkB,CAAEC,cAAAA,CAAAA,CAAe,CAAAH,EAC5E,GAAIE,AAAuB,WAAvBA,GAAmCC,EACtC,OAAOX,EAAYY,MAAM,CACxB,CACC,QAASH,GAEV,CACCI,KAAM,CACL,MAASF,EAAcG,KAAK,CAC5B,QAASH,EAAcI,GAAG,CAC1B,aAAcJ,EAAcK,QAAQ,CACpC,SAAUC,KAAAA,IAGZ,CAAEC,MAAO,CAAA,CAAI,GAGflB,EAAYmB,MAAM,CAAC,CAClB,QAASV,GAEX,EACD,EAAG,CAACH,EAAQC,EAAI,CACjB\"}"}