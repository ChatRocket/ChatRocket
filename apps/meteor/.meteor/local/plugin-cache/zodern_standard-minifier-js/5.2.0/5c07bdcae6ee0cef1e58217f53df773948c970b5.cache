{"code":"function module(e,t,n){let l,c,r,o,i,a,s,u,m,k,d,E,f,p,g,C,b,h,v,x,M;let S=[\"onChange\"];n.link(\"@babel/runtime/helpers/extends\",{default(e){l=e}},0),n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){c=e}},1),n.link(\"@rocket.chat/fuselage\",{Button(e){r=e},PositionAnimated(e){o=e},Tile(e){i=e}},0),n.link(\"@rocket.chat/ui-composer\",{MessageComposerAction(e){a=e},MessageComposerToolbarActions(e){s=e},MessageComposer(e){u=e},MessageComposerInput(e){m=e},MessageComposerToolbar(e){k=e},MessageComposerActionsDivider(e){d=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useUserPreference(e){E=e},useTranslation(e){f=e}},2),n.link(\"react\",{default(e){p=e},memo(e){g=e},useCallback(e){C=e},useRef(e){b=e},useState(e){h=e}},3),n.link(\"../../../../components/Backdrop\",{Backdrop(e){v=e}},4),n.link(\"../../../../contexts/EmojiPickerContext\",{useEmojiPicker(e){x=e}},5),n.link(\"./InsertPlaceholderDropdown\",{default(e){M=e}},6),n.exportDefault(g(e=>{let{onChange:t}=e,n=c(e,S),g=f(),P=E(\"useEmojis\"),R=b(null),j=b(null),[A,_]=h(!1),{open:w}=x(),B=e=>C(()=>{if(null!=R&&R.current){let n=R.current.value,l=R.current.selectionStart,c=R.current.selectionEnd;\"[]()\"===e?l!==c&&(R.current.value=\"\".concat(n.slice(0,l),\"[\").concat(n.slice(l,c),\"]()\").concat(n.slice(c))):R.current.value=\"\".concat(n.slice(0,l)).concat(e).concat(n.slice(l,c)).concat(e).concat(n.slice(c)),R.current.focus(),\"[]()\"===e?l===c?R.current.setSelectionRange(l,c):R.current.setSelectionRange(c+3,c+3):R.current.setSelectionRange(l+1,c+1),null==t||t(R.current.value)}},[e]),I=e=>{if(null!=R&&R.current){let n=R.current.value,l=R.current.selectionStart,c=\":\".concat(e,\": \");R.current.value=n.slice(0,l)+c+n.slice(l),R.current.focus(),R.current.setSelectionRange(l+c.length,l+c.length),null==t||t(R.current.value)}};return p.createElement(u,null,p.createElement(m,l({ref:R,rows:10,onChange:t},n)),p.createElement(k,null,p.createElement(s,{\"aria-label\":g(\"Message_composer_toolbox_primary_actions\")},p.createElement(a,{icon:\"emoji\",disabled:!P,onClick:()=>{if(P){if(!(null!=R&&R.current))throw Error(\"Missing textAreaRef\");w(R.current,e=>I(e))}},title:g(\"Emoji\")}),p.createElement(d,null),p.createElement(a,{icon:\"bold\",onClick:B(\"*\"),title:g(\"Bold\")}),p.createElement(a,{icon:\"italic\",onClick:B(\"_\"),title:g(\"Italic\")}),p.createElement(a,{icon:\"strike\",onClick:B(\"~\"),title:g(\"Strike\")}),p.createElement(a,{icon:\"link\",onClick:B(\"[]()\"),title:g(\"Link\")}),p.createElement(d,null),p.createElement(r,{ref:j,small:!0,onClick:()=>{(null==R?void 0:R.current)&&R.current.focus(),_(!A)}},g(\"Insert_Placeholder\")),p.createElement(v,{display:A?\"block\":\"none\",onClick:()=>{(null==R?void 0:R.current)&&R.current.focus(),_(!1)}}),p.createElement(o,{visible:A?\"visible\":\"hidden\",anchor:j},p.createElement(i,{elevation:\"1\",w:\"224px\"},p.createElement(M,{onChange:t,textAreaRef:R,setVisible:_}))))))}))}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/cannedResponses/components/CannedResponsesComposer/CannedResponsesComposer.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Button, PositionAnimated, Tile } from '@rocket.chat/fuselage';\\nimport {\\n\\tMessageComposerAction,\\n\\tMessageComposerToolbarActions,\\n\\tMessageComposer,\\n\\tMessageComposerInput,\\n\\tMessageComposerToolbar,\\n\\tMessageComposerActionsDivider,\\n} from '@rocket.chat/ui-composer';\\nimport { useUserPreference, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ComponentProps } from 'react';\\nimport React, { memo, useCallback, useRef, useState } from 'react';\\n\\nimport { Backdrop } from '../../../../components/Backdrop';\\nimport { useEmojiPicker } from '../../../../contexts/EmojiPickerContext';\\nimport InsertPlaceholderDropdown from './InsertPlaceholderDropdown';\\n\\nconst CannedResponsesComposer = ({ onChange, ...props }: ComponentProps<typeof MessageComposerInput>) => {\\n\\tconst t = useTranslation();\\n\\tconst useEmojisPreference = useUserPreference('useEmojis');\\n\\n\\tconst textAreaRef = useRef<HTMLTextAreaElement>(null);\\n\\tconst ref = useRef<HTMLButtonElement>(null);\\n\\n\\tconst [visible, setVisible] = useState(false);\\n\\n\\tconst { open: openEmojiPicker } = useEmojiPicker();\\n\\n\\tconst useMarkdownSyntax = (char: '*' | '_' | '~' | '[]()'): (() => void) =>\\n\\t\\tuseCallback(() => {\\n\\t\\t\\tif (textAreaRef?.current) {\\n\\t\\t\\t\\tconst text = textAreaRef.current.value;\\n\\t\\t\\t\\tconst startPos = textAreaRef.current.selectionStart;\\n\\t\\t\\t\\tconst endPos = textAreaRef.current.selectionEnd;\\n\\n\\t\\t\\t\\tif (char === '[]()') {\\n\\t\\t\\t\\t\\tif (startPos !== endPos) {\\n\\t\\t\\t\\t\\t\\ttextAreaRef.current.value = `${text.slice(0, startPos)}[${text.slice(startPos, endPos)}]()${text.slice(endPos)}`;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\ttextAreaRef.current.value = `${text.slice(0, startPos)}${char}${text.slice(startPos, endPos)}${char}${text.slice(endPos)}`;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\ttextAreaRef.current.focus();\\n\\n\\t\\t\\t\\tif (char === '[]()') {\\n\\t\\t\\t\\t\\tif (startPos === endPos) {\\n\\t\\t\\t\\t\\t\\ttextAreaRef.current.setSelectionRange(startPos, endPos);\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\ttextAreaRef.current.setSelectionRange(endPos + 3, endPos + 3);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\ttextAreaRef.current.setSelectionRange(startPos + 1, endPos + 1);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tonChange?.(textAreaRef.current.value as any);\\n\\t\\t\\t}\\n\\t\\t}, [char]);\\n\\n\\tconst onClickEmoji = (emoji: string): void => {\\n\\t\\tif (textAreaRef?.current) {\\n\\t\\t\\tconst text = textAreaRef.current.value;\\n\\t\\t\\tconst startPos = textAreaRef.current.selectionStart;\\n\\t\\t\\tconst emojiValue = `:${emoji}: `;\\n\\n\\t\\t\\ttextAreaRef.current.value = text.slice(0, startPos) + emojiValue + text.slice(startPos);\\n\\n\\t\\t\\ttextAreaRef.current.focus();\\n\\t\\t\\ttextAreaRef.current.setSelectionRange(startPos + emojiValue.length, startPos + emojiValue.length);\\n\\n\\t\\t\\tonChange?.(textAreaRef.current.value as any);\\n\\t\\t}\\n\\t};\\n\\n\\tconst handleOpenEmojiPicker = (): void => {\\n\\t\\tif (!useEmojisPreference) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (!textAreaRef?.current) {\\n\\t\\t\\tthrow new Error('Missing textAreaRef');\\n\\t\\t}\\n\\n\\t\\topenEmojiPicker(textAreaRef.current, (emoji: string) => onClickEmoji(emoji));\\n\\t};\\n\\n\\tconst openPlaceholderSelect = (): void => {\\n\\t\\ttextAreaRef?.current && textAreaRef.current.focus();\\n\\t\\tsetVisible(!visible);\\n\\t};\\n\\n\\treturn (\\n\\t\\t<MessageComposer>\\n\\t\\t\\t<MessageComposerInput ref={textAreaRef} rows={10} onChange={onChange} {...props} />\\n\\t\\t\\t<MessageComposerToolbar>\\n\\t\\t\\t\\t<MessageComposerToolbarActions aria-label={t('Message_composer_toolbox_primary_actions')}>\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='emoji' disabled={!useEmojisPreference} onClick={handleOpenEmojiPicker} title={t('Emoji')} />\\n\\t\\t\\t\\t\\t<MessageComposerActionsDivider />\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='bold' onClick={useMarkdownSyntax('*')} title={t('Bold')} />\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='italic' onClick={useMarkdownSyntax('_')} title={t('Italic')} />\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='strike' onClick={useMarkdownSyntax('~')} title={t('Strike')} />\\n\\t\\t\\t\\t\\t<MessageComposerAction icon='link' onClick={useMarkdownSyntax('[]()')} title={t('Link')} />\\n\\t\\t\\t\\t\\t<MessageComposerActionsDivider />\\n\\t\\t\\t\\t\\t<Button ref={ref} small onClick={openPlaceholderSelect}>\\n\\t\\t\\t\\t\\t\\t{t('Insert_Placeholder')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t<Backdrop\\n\\t\\t\\t\\t\\t\\tdisplay={visible ? 'block' : 'none'}\\n\\t\\t\\t\\t\\t\\tonClick={(): void => {\\n\\t\\t\\t\\t\\t\\t\\ttextAreaRef?.current && textAreaRef.current.focus();\\n\\t\\t\\t\\t\\t\\t\\tsetVisible(false);\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t<PositionAnimated visible={visible ? 'visible' : 'hidden'} anchor={ref}>\\n\\t\\t\\t\\t\\t\\t<Tile elevation='1' w='224px'>\\n\\t\\t\\t\\t\\t\\t\\t<InsertPlaceholderDropdown onChange={onChange} textAreaRef={textAreaRef} setVisible={setVisible} />\\n\\t\\t\\t\\t\\t\\t</Tile>\\n\\t\\t\\t\\t\\t</PositionAnimated>\\n\\t\\t\\t\\t</MessageComposerToolbarActions>\\n\\t\\t\\t</MessageComposerToolbar>\\n\\t\\t</MessageComposer>\\n\\t);\\n};\\n\\nexport default memo(CannedResponsesComposer);\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"Button\",\"PositionAnimated\",\"Tile\",\"MessageComposerAction\",\"MessageComposerToolbarActions\",\"MessageComposer\",\"MessageComposerInput\",\"MessageComposerToolbar\",\"MessageComposerActionsDivider\",\"useUserPreference\",\"useTranslation\",\"React\",\"memo\",\"useCallback\",\"useRef\",\"useState\",\"Backdrop\",\"useEmojiPicker\",\"InsertPlaceholderDropdown\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"onChange\",\"props\",\"_excluded\",\"t\",\"useEmojisPreference\",\"textAreaRef\",\"ref\",\"visible\",\"setVisible\",\"open\",\"openEmojiPicker\",\"useMarkdownSyntax\",\"char\",\"current\",\"text\",\"value\",\"startPos\",\"selectionStart\",\"endPos\",\"selectionEnd\",\"concat\",\"slice\",\"focus\",\"setSelectionRange\",\"onClickEmoji\",\"emoji\",\"emojiValue\",\"length\",\"createElement\",\"rows\",\"icon\",\"disabled\",\"onClick\",\"handleOpenEmojiPicker\",\"Error\",\"title\",\"small\",\"openPlaceholderSelect\",\"display\",\"anchor\",\"elevation\",\"w\"],\"mappings\":\"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\"}"}