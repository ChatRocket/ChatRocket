{"code":"function module(t,e,i){i.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(t){n=t}},0),i.export({useRegistrationStatus:function(){return a}}),i.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(t){r=t},usePermission:function(t){u=t}},0),i.link(\"@tanstack/react-query\",{useQuery:function(t){o=t}},1);var n,r,u,o,a=function(){var t,e,i=r(\"GET\",\"/v1/cloud.registrationStatus\"),a=u(\"manage-cloud\"),s=o([\"getRegistrationStatus\"],function(){if(!a)throw Error(\"unauthorized api call\");return i()},{keepPreviousData:!0,staleTime:1/0});return n({isRegistered:!s.isLoading&&(null===(t=s.data)||void 0===t?void 0:null===(e=t.registrationStatus)||void 0===e?void 0:e.workspaceRegistered)},s)}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useRegistrationStatus.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { OperationResult } from '@rocket.chat/rest-typings';\\nimport { useEndpoint, usePermission } from '@rocket.chat/ui-contexts';\\nimport type { UseQueryResult } from '@tanstack/react-query';\\nimport { useQuery } from '@tanstack/react-query';\\n\\ntype useRegistrationStatusReturnType = {\\n\\tisRegistered?: boolean;\\n} & UseQueryResult<OperationResult<'GET', '/v1/cloud.registrationStatus'>>;\\n\\nexport const useRegistrationStatus = (): useRegistrationStatusReturnType => {\\n\\tconst getRegistrationStatus = useEndpoint('GET', '/v1/cloud.registrationStatus');\\n\\tconst canViewregistrationStatus = usePermission('manage-cloud');\\n\\n\\tconst queryResult = useQuery(\\n\\t\\t['getRegistrationStatus'],\\n\\t\\t() => {\\n\\t\\t\\tif (!canViewregistrationStatus) {\\n\\t\\t\\t\\tthrow new Error('unauthorized api call');\\n\\t\\t\\t}\\n\\t\\t\\treturn getRegistrationStatus();\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tkeepPreviousData: true,\\n\\t\\t\\tstaleTime: Infinity,\\n\\t\\t},\\n\\t);\\n\\n\\treturn { isRegistered: !queryResult.isLoading && queryResult.data?.registrationStatus?.workspaceRegistered, ...queryResult };\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"export\",\"useRegistrationStatus\",\"useEndpoint\",\"usePermission\",\"useQuery\",\"_queryResult$data\",\"_queryResult$data$reg\",\"getRegistrationStatus\",\"canViewregistrationStatus\",\"queryResult\",\"Error\",\"keepPreviousData\",\"staleTime\",\"Infinity\",\"isRegistered\",\"isLoading\",\"data\",\"registrationStatus\",\"workspaceRegistered\"],\"mappings\":\"uBACSA,EAAaC,IAAA,CAAA,uCAA+C,CAACC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAtEH,EAAOK,MAAE,CAAA,CAAAC,sBAA4B,WAAM,OAAAA,CAA2B,CAAA,GAAAN,EAAAC,IAAA,CAAA,2BAAA,CAAAM,YAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,EAAAK,cAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAQ,SAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAQ/D,IARPC,EAAsEG,EAAAC,EAAAC,EAQzDH,EAAwB,WACpC,IAD0EI,EAAAC,EACpEC,EAAwBL,EAAY,MAAO,gCAC3CM,EAA4BL,EAAc,gBAE1CM,EAAcL,EACnB,CAAC,wBAAwB,CACzB,WACC,GAAI,CAACI,EACJ,MAAM,AAAIE,MAAM,yBAEjB,OAAOH,GACR,EACA,CACCI,iBAAkB,CAAA,EAClBC,UAAWC,MAIb,OAAAd,EAAA,CAASe,aAAc,CAACL,EAAYM,SAAS,EAAA,CAAA,AAAoB,OAApBV,CAAAA,EAAII,EAAYO,IAAI,AAAJA,GAAIX,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAA,AAAoB,OAApBC,CAAAA,EAAhBD,EAAkBY,kBAAkB,AAAlBA,GAAkBX,AAAA,KAAA,IAAAA,EAAA,KAAA,EAApCA,EAAsCY,mBAAmB,AAAnBA,CAAmB,EAAKT,EAChH\"}"}