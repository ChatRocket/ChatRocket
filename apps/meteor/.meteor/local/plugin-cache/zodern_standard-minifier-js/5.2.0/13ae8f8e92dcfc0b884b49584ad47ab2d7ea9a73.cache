{"code":"function module(e,t,r){let l,n,i,o,u;r.export({useListIsAtBottom:()=>s}),r.link(\"@rocket.chat/fuselage-hooks\",{useMergedRefs(e){l=e}},0),r.link(\"react\",{useCallback(e){n=e},useRef(e){i=e}},1),r.link(\"../../../../../app/ui/client/views/app/lib/scrolling\",{isAtBottom(e){o=e}},2),r.link(\"../../../../../lib/utils/highOrderFunctions\",{withThrottling(e){u=e}},3);let s=()=>{let e=i(!0),t=i(null),r=n(()=>{var e,r;null===(e=t.current)||void 0===e||e.scrollTo({left:30,top:null===(r=t.current)||void 0===r?void 0:r.scrollHeight})},[]),s=n(()=>{!0===e.current&&r()},[e,r]),c=n(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return!t.current||o(t.current,e)},[]),a=n(t=>{if(!t)return;let r=t.querySelector(\"ul\");if(!r)return;let l=new ResizeObserver(()=>{!0===e.current&&t.scrollTo({left:30,top:t.scrollHeight})});l.observe(r),t.addEventListener(\"scroll\",u({wait:100})(()=>{e.current=c(100)}),{passive:!0})},[c]);return{atBottomRef:e,innerRef:l(a,t),sendToBottom:r,sendToBottomIfNecessary:s,isAtBottom:c}}}","map":"{\"version\":3,\"sources\":[\"client/views/room/body/hooks/useListIsAtBottom.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useMergedRefs } from '@rocket.chat/fuselage-hooks';\\nimport { useCallback, useRef } from 'react';\\n\\nimport { isAtBottom as isAtBottomLib } from '../../../../../app/ui/client/views/app/lib/scrolling';\\nimport { withThrottling } from '../../../../../lib/utils/highOrderFunctions';\\n\\nexport const useListIsAtBottom = () => {\\n\\tconst atBottomRef = useRef(true);\\n\\n\\tconst innerBoxRef = useRef<HTMLDivElement | null>(null);\\n\\n\\tconst sendToBottom = useCallback(() => {\\n\\t\\tinnerBoxRef.current?.scrollTo({ left: 30, top: innerBoxRef.current?.scrollHeight });\\n\\t}, []);\\n\\n\\tconst sendToBottomIfNecessary = useCallback(() => {\\n\\t\\tif (atBottomRef.current === true) {\\n\\t\\t\\tsendToBottom();\\n\\t\\t}\\n\\t}, [atBottomRef, sendToBottom]);\\n\\n\\tconst isAtBottom = useCallback((threshold = 0) => {\\n\\t\\tif (!innerBoxRef.current) {\\n\\t\\t\\treturn true;\\n\\t\\t}\\n\\t\\treturn isAtBottomLib(innerBoxRef.current, threshold);\\n\\t}, []);\\n\\n\\tconst ref = useCallback(\\n\\t\\t(node: HTMLElement | null) => {\\n\\t\\t\\tif (!node) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst messageList = node.querySelector('ul');\\n\\n\\t\\t\\tif (!messageList) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst observer = new ResizeObserver(() => {\\n\\t\\t\\t\\tif (atBottomRef.current === true) {\\n\\t\\t\\t\\t\\tnode.scrollTo({ left: 30, top: node.scrollHeight });\\n\\t\\t\\t\\t}\\n\\t\\t\\t});\\n\\n\\t\\t\\tobserver.observe(messageList);\\n\\n\\t\\t\\tnode.addEventListener(\\n\\t\\t\\t\\t'scroll',\\n\\t\\t\\t\\twithThrottling({ wait: 100 })(() => {\\n\\t\\t\\t\\t\\tatBottomRef.current = isAtBottom(100);\\n\\t\\t\\t\\t}),\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tpassive: true,\\n\\t\\t\\t\\t},\\n\\t\\t\\t);\\n\\t\\t},\\n\\t\\t[isAtBottom],\\n\\t);\\n\\n\\treturn {\\n\\t\\tatBottomRef,\\n\\t\\tinnerRef: useMergedRefs(ref, innerBoxRef) as unknown as React.MutableRefObject<HTMLDivElement | null>,\\n\\t\\tsendToBottom,\\n\\t\\tsendToBottomIfNecessary,\\n\\t\\tisAtBottom,\\n\\t};\\n};\\n\",null],\"names\":[\"useMergedRefs\",\"useCallback\",\"useRef\",\"isAtBottomLib\",\"withThrottling\",\"module\",\"export\",\"useListIsAtBottom\",\"link\",\"v\",\"isAtBottom\",\"atBottomRef\",\"innerBoxRef\",\"sendToBottom\",\"_innerBoxRef$current\",\"_innerBoxRef$current2\",\"current\",\"scrollTo\",\"left\",\"top\",\"scrollHeight\",\"sendToBottomIfNecessary\",\"threshold\",\"arguments\",\"length\",\"undefined\",\"ref\",\"node\",\"messageList\",\"querySelector\",\"observer\",\"ResizeObserver\",\"observe\",\"addEventListener\",\"wait\",\"passive\",\"innerRef\"],\"mappings\":\"2BAA4DA,EAAAC,EAAAC,EAAAC,EAAAC,EAA5DC,EAAOC,MAAE,CAAA,CAAAC,kBAAqBA,IAAAA,CAAA,GAA8BF,EAAAG,IAAA,CAAA,8BAAA,CAAAR,cAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAP,YAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,OAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,uDAAA,CAAAE,WAAAD,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,8CAAA,CAAAJ,eAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAMrD,IAAMF,EAAoBA,KAChC,IAAMI,EAAcT,EAAO,CAAA,GAErBU,EAAcV,EAA8B,MAE5CW,EAAeZ,EAAY,KAAK,IAAAa,EAAAC,CACrC,AAAmB,QAAnBD,CAAAA,EAAAF,EAAYI,OAAO,AAAPA,GAAOF,AAAA,KAAA,IAAAA,GAAnBA,EAAqBG,QAAQ,CAAC,CAAEC,KAAM,GAAIC,IAAG,AAAqB,OAArBJ,CAAAA,EAAEH,EAAYI,OAAO,AAAPA,GAAOD,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAnBA,EAAqBK,YAAAA,AAAY,EACjF,EAAG,EAAE,EAECC,EAA0BpB,EAAY,KACf,CAAA,IAAxBU,EAAYK,OAAO,EACtBH,GAEF,EAAG,CAACF,EAAaE,EAAa,EAExBH,EAAaT,EAAY,WAAkB,IAAjBqB,EAASC,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,QAC3C,CAAKX,EAAYI,OAAO,EAGjBb,EAAcS,EAAYI,OAAO,CAAEM,EAC3C,EAAG,EAAE,EAECI,EAAMzB,EACV0B,IACA,GAAI,CAACA,EACJ,OAGD,IAAMC,EAAcD,EAAKE,aAAa,CAAC,MAEvC,GAAI,CAACD,EACJ,OAGD,IAAME,EAAW,IAAIC,eAAe,KACP,CAAA,IAAxBpB,EAAYK,OAAO,EACtBW,EAAKV,QAAQ,CAAC,CAAEC,KAAM,GAAIC,IAAKQ,EAAKP,YAAAA,AAAY,EAElD,GAEAU,EAASE,OAAO,CAACJ,GAEjBD,EAAKM,gBAAgB,CACpB,SACA7B,EAAe,CAAE8B,KAAM,GAAG,GAAI,KAC7BvB,EAAYK,OAAO,CAAGN,EAAW,IAClC,GACA,CACCyB,QAAS,CAAA,GAGZ,EACA,CAACzB,EAAW,EAGb,MAAO,CACNC,YAAAA,EACAyB,SAAUpC,EAAc0B,EAAKd,GAC7BC,aAAAA,EACAQ,wBAAAA,EACAX,WAAAA,EAEF\"}"}