{"code":"function module(e,t,s){let i,a,l,r,n,o,d,g;s.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){i=e}},0),s.link(\"meteor/meteor\",{Meteor(e){a=e}},0),s.link(\"../../../app/settings/client\",{settings(e){l=e}},1),s.link(\"../../../app/ui-utils/client\",{MessageAction(e){r=e}},2),s.link(\"../../../app/utils/client/lib/SDKClient\",{sdk(e){n=e}},3),s.link(\"../../lib/queryClient\",{queryClient(e){o=e}},4),s.link(\"../../lib/toast\",{dispatchToastMessage(e){d=e}},5),s.link(\"../../lib/utils/messageArgs\",{messageArgs(e){g=e}},6),a.startup(()=>{r.addButton({id:\"unstar-message\",icon:\"star\",label:\"Unstar_Message\",type:\"interaction\",context:[\"starred\",\"message\",\"message-mobile\",\"threads\",\"federated\",\"videoconf\",\"videoconf-threads\"],async action(e,t){let{message:s=g(this).msg}=t;try{await n.call(\"starMessage\",i(i({},s),{},{starred:!1})),o.invalidateQueries([\"rooms\",s.rid,\"starred-messages\"])}catch(e){d({type:\"error\",message:e})}},condition(e){var t;let{message:s,subscription:i,user:a}=e;return!(null==i&&l.get(\"Message_AllowStarring\"))&&!!(null===(t=s.starred)||void 0===t?void 0:t.find(e=>e._id===(null==a?void 0:a._id)))},order:3,group:\"menu\"})})}","map":"{\"version\":3,\"sources\":[\"client/startup/actionButtons/unstarMessage.ts\",\"<anon>\"],\"sourcesContent\":[\"import { Meteor } from 'meteor/meteor';\\n\\nimport { settings } from '../../../app/settings/client';\\nimport { MessageAction } from '../../../app/ui-utils/client';\\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\\nimport { queryClient } from '../../lib/queryClient';\\nimport { dispatchToastMessage } from '../../lib/toast';\\nimport { messageArgs } from '../../lib/utils/messageArgs';\\n\\nMeteor.startup(() => {\\n\\tMessageAction.addButton({\\n\\t\\tid: 'unstar-message',\\n\\t\\ticon: 'star',\\n\\t\\tlabel: 'Unstar_Message',\\n\\t\\ttype: 'interaction',\\n\\t\\tcontext: ['starred', 'message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\\n\\t\\tasync action(_, props) {\\n\\t\\t\\tconst { message = messageArgs(this).msg } = props;\\n\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tawait sdk.call('starMessage', { ...message, starred: false });\\n\\t\\t\\t\\tqueryClient.invalidateQueries(['rooms', message.rid, 'starred-messages']);\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tcondition({ message, subscription, user }) {\\n\\t\\t\\tif (subscription == null && settings.get('Message_AllowStarring')) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn Boolean(message.starred?.find((star: any) => star._id === user?._id));\\n\\t\\t},\\n\\t\\torder: 3,\\n\\t\\tgroup: 'menu',\\n\\t});\\n});\\n\",null],\"names\":[\"_objectSpread\",\"Meteor\",\"settings\",\"MessageAction\",\"sdk\",\"queryClient\",\"dispatchToastMessage\",\"messageArgs\",\"module\",\"link\",\"default\",\"v\",\"startup\",\"addButton\",\"id\",\"icon\",\"label\",\"type\",\"context\",\"action\",\"_\",\"props\",\"message\",\"msg\",\"call\",\"starred\",\"invalidateQueries\",\"rid\",\"error\",\"condition\",\"_ref\",\"_message$starred\",\"subscription\",\"user\",\"get\",\"Boolean\",\"find\",\"star\",\"_id\",\"order\",\"group\"],\"mappings\":\"2BAAAA,EAAAC,EAAuCC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAtBC,EAAMC,IAAA,CAAA,uCAAgB,CAAAC,QAAAC,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAA9BH,EAAQC,IAAA,CAAM,gBAAgB,CAAAR,OAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,+BAAA,CAAAP,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,+BAAA,CAAAN,cAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0CAAA,CAAAL,IAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAJ,YAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kBAAA,CAAAH,qBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAF,YAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GASvCV,EAAOW,OAAO,CAAC,KACdT,EAAcU,SAAS,CAAC,CACvBC,GAAI,iBACJC,KAAM,OACNC,MAAO,iBACPC,KAAM,cACNC,QAAS,CAAC,UAAW,UAAW,iBAAkB,UAAW,YAAa,YAAa,oBAAoB,CAC3G,MAAMC,OAAOC,CAAC,CAAEC,CAAK,EACpB,GAAM,CAAEC,QAAAA,EAAUf,EAAY,IAAI,EAAEgB,GAAAA,CAAK,CAAGF,EAE5C,GAAI,CACH,MAAMjB,EAAIoB,IAAI,CAAC,cAAaxB,EAAAA,EAAA,CAAA,EAAOsB,GAAO,CAAA,EAAA,CAAEG,QAAS,CAAA,CAAK,IAC1DpB,EAAYqB,iBAAiB,CAAC,CAAC,QAASJ,EAAQK,GAAG,CAAE,mBAAmB,CACzE,CAAE,MAAOC,EAAO,CACftB,EAAqB,CAAEW,KAAM,QAASK,QAASM,CAAK,EACrD,CACD,EACAC,UAASC,CAAA,EAAgC,IAAAC,EAAA,GAA/B,CAAET,QAAAA,CAAO,CAAEU,aAAAA,CAAY,CAAEC,KAAAA,CAAAA,CAAM,CAAAH,QACxC,CAAIE,CAAAA,AAAgB,MAAhBA,GAAwB9B,EAASgC,GAAG,CAAC,wBAAuB,GAIzDC,CAAAA,CAAO,CAAA,AAAgB,OAAhBJ,CAAAA,EAACT,EAAQG,OAAO,AAAPA,GAAOM,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAfA,EAAiBK,IAAI,CAAEC,GAAcA,EAAKC,GAAG,GAAKL,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMK,GAAG,AAAHA,EAAG,CAC3E,EACAC,MAAO,EACPC,MAAO,QAET\"}"}