{"code":"function module(e,n,t){var i,o,r,a,l,c,s,u,d,m,v,f,k,g,p,P,h=[\"current\",\"itemsPerPage\",\"setCurrent\",\"setItemsPerPage\"];t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){i=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){o=e}},1),t.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue:function(e){r=e},useMediaQuery:function(e){a=e}},0),t.link(\"react\",{default:function(e){l=e},useState:function(e){c=e},useMemo:function(e){s=e},useEffect:function(e){u=e}},1),t.link(\"react-i18next\",{useTranslation:function(e){d=e}},2),t.link(\"../../../../components/FilterByText\",{default:function(e){m=e}},3),t.link(\"../../../../components/GenericTable\",{GenericTableHeaderCell:function(e){v=e}},4),t.link(\"../../../../components/GenericTable/hooks/usePagination\",{usePagination:function(e){f=e}},5),t.link(\"../../../../components/GenericTable/hooks/useSort\",{useSort:function(e){k=e}},6),t.link(\"../../../../components/deviceManagement/DeviceManagementTable\",{default:function(e){g=e}},7),t.link(\"../../../../hooks/useEndpointData\",{useEndpointData:function(e){p=e}},8),t.link(\"./DeviceManagementAdminRow\",{default:function(e){P=e}},9);var y={client:\"device.name\",username:\"_user.username\",os:\"device.os.name\",loginAt:\"loginAt\"};t.exportDefault(function(e){var n=e.reloadRef,t=d().t,E=c(\"\"),_=o(E,2),b=_[0],A=_[1],C=f(),D=C.current,T=C.itemsPerPage,S=C.setCurrent,I=C.setItemsPerPage,M=i(C,h),w=k(\"username\"),x=w.sortBy,G=w.sortDirection,R=w.setSort,V=r(s(function(){var e;return{filter:b,sort:JSON.stringify(((e={})[y[x]]=\"asc\"===G?1:-1,e)),count:T,offset:b?void 0:D}},[b,T,D,x,G]),500),N=p(\"/v1/sessions/list.all\",{params:V}),O=N.value,B=N.phase,F=N.error,U=N.reload;u(function(){n.current=U},[n,U]);var j=a(\"(min-width: 1024px)\"),H=s(function(){return[l.createElement(v,{key:\"client\",direction:G,active:\"client\"===x,onClick:R,sort:\"client\"},t(\"Client\")),l.createElement(v,{key:\"rcVersion\"},t(\"Version\")),l.createElement(v,{key:\"os\",direction:G,active:\"os\"===x,onClick:R,sort:\"os\"},t(\"OS\")),l.createElement(v,{key:\"username\",direction:G,active:\"username\"===x,onClick:R,sort:\"username\"},t(\"User\")),j&&l.createElement(v,{key:\"loginAt\",direction:G,active:\"loginAt\"===x,onClick:R,sort:\"loginAt\"},t(\"Last_login\")),j&&l.createElement(v,{key:\"_id\"},t(\"Device_ID\")),j&&l.createElement(v,{key:\"ip\"},t(\"IP_Address\")),l.createElement(v,{width:\"5%\",key:\"menu\"})]},[t,j,R,G,x]);return l.createElement(l.Fragment,null,l.createElement(m,{placeholder:t(\"Search_Devices_Users\"),onChange:A}),l.createElement(g,{data:O,phase:B,error:F,reload:U,headers:H,renderRow:function(e){var n,t,i,o,r,a;return l.createElement(P,{key:e._id,_id:e._id,username:\"_user\"in e?null===(n=e._user)||void 0===n?void 0:n.username:\"\",ip:e.ip,deviceName:null==e?void 0:null===(t=e.device)||void 0===t?void 0:t.name,deviceType:null==e?void 0:null===(i=e.device)||void 0===i?void 0:i.type,deviceOSName:null==e?void 0:null===(o=e.device)||void 0===o?void 0:null===(r=o.os)||void 0===r?void 0:r.name,rcVersion:null==e?void 0:null===(a=e.device)||void 0===a?void 0:a.version,loginAt:e.loginAt,onReload:U})},current:D,itemsPerPage:T,setCurrent:S,setItemsPerPage:I,paginationProps:M}))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/deviceManagement/DeviceManagementAdminTable/DeviceManagementAdminTable.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { DeviceManagementPopulatedSession, DeviceManagementSession, Serialized } from '@rocket.chat/core-typings';\\nimport { useDebouncedValue, useMediaQuery } from '@rocket.chat/fuselage-hooks';\\nimport type { ReactElement, MutableRefObject } from 'react';\\nimport React, { useState, useMemo, useEffect } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport FilterByText from '../../../../components/FilterByText';\\nimport { GenericTableHeaderCell } from '../../../../components/GenericTable';\\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\\nimport DeviceManagementTable from '../../../../components/deviceManagement/DeviceManagementTable';\\nimport { useEndpointData } from '../../../../hooks/useEndpointData';\\nimport DeviceManagementAdminRow from './DeviceManagementAdminRow';\\n\\nconst sortMapping = {\\n\\tclient: 'device.name',\\n\\tusername: '_user.username',\\n\\tos: 'device.os.name',\\n\\tloginAt: 'loginAt',\\n};\\n\\nconst isSessionPopulatedSession = (\\n\\tsession: Serialized<DeviceManagementPopulatedSession | DeviceManagementSession>,\\n): session is Serialized<DeviceManagementPopulatedSession> => '_user' in session;\\n\\nconst DeviceManagementAdminTable = ({ reloadRef }: { reloadRef: MutableRefObject<() => void> }): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst [text, setText] = useState('');\\n\\tconst { current, itemsPerPage, setCurrent, setItemsPerPage, ...paginationProps } = usePagination();\\n\\tconst { sortBy, sortDirection, setSort } = useSort<'client' | 'os' | 'username' | 'loginAt'>('username');\\n\\n\\tconst query = useDebouncedValue(\\n\\t\\tuseMemo(\\n\\t\\t\\t() => ({\\n\\t\\t\\t\\tfilter: text,\\n\\t\\t\\t\\tsort: JSON.stringify({ [sortMapping[sortBy]]: sortDirection === 'asc' ? 1 : -1 }),\\n\\t\\t\\t\\tcount: itemsPerPage,\\n\\t\\t\\t\\toffset: text ? undefined : current,\\n\\t\\t\\t}),\\n\\t\\t\\t[text, itemsPerPage, current, sortBy, sortDirection],\\n\\t\\t),\\n\\t\\t500,\\n\\t);\\n\\n\\tconst { value: data, phase, error, reload } = useEndpointData('/v1/sessions/list.all', { params: query });\\n\\n\\tuseEffect(() => {\\n\\t\\treloadRef.current = reload;\\n\\t}, [reloadRef, reload]);\\n\\n\\tconst mediaQuery = useMediaQuery('(min-width: 1024px)');\\n\\n\\tconst headers = useMemo(\\n\\t\\t() => [\\n\\t\\t\\t<GenericTableHeaderCell key='client' direction={sortDirection} active={sortBy === 'client'} onClick={setSort} sort='client'>\\n\\t\\t\\t\\t{t('Client')}\\n\\t\\t\\t</GenericTableHeaderCell>,\\n\\t\\t\\t<GenericTableHeaderCell key='rcVersion'>{t('Version')}</GenericTableHeaderCell>,\\n\\t\\t\\t<GenericTableHeaderCell key='os' direction={sortDirection} active={sortBy === 'os'} onClick={setSort} sort='os'>\\n\\t\\t\\t\\t{t('OS')}\\n\\t\\t\\t</GenericTableHeaderCell>,\\n\\t\\t\\t<GenericTableHeaderCell key='username' direction={sortDirection} active={sortBy === 'username'} onClick={setSort} sort='username'>\\n\\t\\t\\t\\t{t('User')}\\n\\t\\t\\t</GenericTableHeaderCell>,\\n\\t\\t\\tmediaQuery && (\\n\\t\\t\\t\\t<GenericTableHeaderCell key='loginAt' direction={sortDirection} active={sortBy === 'loginAt'} onClick={setSort} sort='loginAt'>\\n\\t\\t\\t\\t\\t{t('Last_login')}\\n\\t\\t\\t\\t</GenericTableHeaderCell>\\n\\t\\t\\t),\\n\\t\\t\\tmediaQuery && <GenericTableHeaderCell key='_id'>{t('Device_ID')}</GenericTableHeaderCell>,\\n\\t\\t\\tmediaQuery && <GenericTableHeaderCell key='ip'>{t('IP_Address')}</GenericTableHeaderCell>,\\n\\t\\t\\t<GenericTableHeaderCell width='5%' key='menu' />,\\n\\t\\t],\\n\\t\\t[t, mediaQuery, setSort, sortDirection, sortBy],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<FilterByText placeholder={t('Search_Devices_Users')} onChange={setText} />\\n\\t\\t\\t<DeviceManagementTable\\n\\t\\t\\t\\tdata={data}\\n\\t\\t\\t\\tphase={phase}\\n\\t\\t\\t\\terror={error}\\n\\t\\t\\t\\treload={reload}\\n\\t\\t\\t\\theaders={headers}\\n\\t\\t\\t\\trenderRow={(session): ReactElement => (\\n\\t\\t\\t\\t\\t<DeviceManagementAdminRow\\n\\t\\t\\t\\t\\t\\tkey={session._id}\\n\\t\\t\\t\\t\\t\\t_id={session._id}\\n\\t\\t\\t\\t\\t\\tusername={isSessionPopulatedSession(session) ? session._user?.username : ''}\\n\\t\\t\\t\\t\\t\\tip={session.ip}\\n\\t\\t\\t\\t\\t\\tdeviceName={session?.device?.name}\\n\\t\\t\\t\\t\\t\\tdeviceType={session?.device?.type}\\n\\t\\t\\t\\t\\t\\tdeviceOSName={session?.device?.os?.name}\\n\\t\\t\\t\\t\\t\\trcVersion={session?.device?.version}\\n\\t\\t\\t\\t\\t\\tloginAt={session.loginAt}\\n\\t\\t\\t\\t\\t\\tonReload={reload}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\tcurrent={current}\\n\\t\\t\\t\\titemsPerPage={itemsPerPage}\\n\\t\\t\\t\\tsetCurrent={setCurrent}\\n\\t\\t\\t\\tsetItemsPerPage={setItemsPerPage}\\n\\t\\t\\t\\tpaginationProps={paginationProps}\\n\\t\\t\\t/>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default DeviceManagementAdminTable;\\n\",null],\"names\":[\"_objectWithoutProperties\",\"_slicedToArray\",\"useDebouncedValue\",\"useMediaQuery\",\"React\",\"useState\",\"useMemo\",\"useEffect\",\"useTranslation\",\"FilterByText\",\"GenericTableHeaderCell\",\"usePagination\",\"useSort\",\"DeviceManagementTable\",\"useEndpointData\",\"DeviceManagementAdminRow\",\"module\",\"link\",\"default\",\"v\",\"sortMapping\",\"client\",\"username\",\"os\",\"loginAt\",\"exportDefault\",\"_ref\",\"reloadRef\",\"t\",\"_useTranslation\",\"_useState\",\"_useState2\",\"text\",\"setText\",\"_usePagination\",\"current\",\"itemsPerPage\",\"setCurrent\",\"setItemsPerPage\",\"paginationProps\",\"_excluded\",\"_useSort\",\"sortBy\",\"sortDirection\",\"setSort\",\"query\",\"_JSON$stringify\",\"filter\",\"sort\",\"JSON\",\"stringify\",\"count\",\"offset\",\"undefined\",\"_useEndpointData\",\"params\",\"data\",\"value\",\"phase\",\"error\",\"reload\",\"mediaQuery\",\"headers\",\"createElement\",\"key\",\"direction\",\"active\",\"onClick\",\"width\",\"Fragment\",\"placeholder\",\"onChange\",\"renderRow\",\"session\",\"_session$_user\",\"_session$device\",\"_session$device2\",\"_session$device3\",\"_session$device3$os\",\"_session$device4\",\"_id\",\"isSessionPopulatedSession\",\"_user\",\"ip\",\"deviceName\",\"device\",\"name\",\"deviceType\",\"type\",\"deviceOSName\",\"rcVersion\",\"version\",\"onReload\"],\"mappings\":\"2BACAA,EAA+EC,EAA/EC,EAASC,EAAsEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,8DAAnDC,EAAAC,IAAA,CAAa,iDAAsC,CAAAC,QAAA,SAAAC,CAAA,EAAAnB,EAAAmB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAlB,EAAAkB,CAAA,CAAA,EAAA,GAAnDH,EAAeC,IAAA,CAAA,8BAAmC,CAACf,kBAAA,SAAAiB,CAAA,EAAAjB,EAAAiB,CAAA,EAAAhB,cAAA,SAAAgB,CAAA,EAAAhB,EAAAgB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAf,EAAAe,CAAA,EAAAd,SAAA,SAAAc,CAAA,EAAAd,EAAAc,CAAA,EAAAb,QAAA,SAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,UAAA,SAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAT,eAAA,SAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sCAAA,CAAA,QAAA,SAAAE,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sCAAA,CAAAP,uBAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0DAAA,CAAAN,cAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oDAAA,CAAAL,QAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gEAAA,CAAA,QAAA,SAAAE,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oCAAA,CAAAH,gBAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAA,QAAA,SAAAE,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAa/E,IAAMC,EAAc,CACnBC,OAAQ,cACRC,SAAU,iBACVC,GAAI,iBACJC,QAAS,WAjBVR,EAAOS,aAAE,CAwB0B,SAAAC,CAAA,EAA6E,IAA1EC,EAASD,EAATC,SAAS,CACtCC,EAACC,AAAKrB,IAANoB,CAAC,CACTE,EAAwBzB,EAAS,IAAG0B,EAAA9B,EAAA6B,EAAA,GAA7BE,EAAID,CAAA,CAAA,EAAA,CAAEE,EAAOF,CAAA,CAAA,EAAA,CACpBG,EAAmFvB,IAA3EwB,EAAOD,EAAPC,OAAO,CAAEC,EAAYF,EAAZE,YAAY,CAAEC,EAAUH,EAAVG,UAAU,CAAEC,EAAeJ,EAAfI,eAAe,CAAKC,EAAevC,EAAAkC,EAAAM,GAC9EC,EAA2C7B,EAAkD,YAArF8B,EAAMD,EAANC,MAAM,CAAEC,EAAaF,EAAbE,aAAa,CAAEC,EAAOH,EAAPG,OAAO,CAEhCC,EAAQ3C,EACbI,EACC,WAAA,IAAAwC,EAAA,MAAO,CACNC,OAAQf,EACRgB,KAAMC,KAAKC,SAAS,CAAAJ,CAAAA,CAAAA,EAAA,CAAA,CAAA,CAAA,CAAI1B,CAAW,CAACsB,EAAO,CAAA,CAAGC,AAAkB,QAAlBA,EAA0B,EAAI,GAAEG,CAAAA,GAC9EK,MAAOf,EACPgB,OAAQpB,EAAOqB,KAAAA,EAAYlB,EAC3B,EACD,CAACH,EAAMI,EAAcD,EAASO,EAAQC,EAAc,EAErD,KAGDW,EAA8CxC,EAAgB,wBAAyB,CAAEyC,OAAQV,CAAK,GAAvFW,EAAIF,EAAXG,KAAK,CAAQC,EAAKJ,EAALI,KAAK,CAAEC,EAAKL,EAALK,KAAK,CAAEC,EAAMN,EAANM,MAAM,CAEzCrD,EAAU,WACToB,EAAUQ,OAAO,CAAGyB,CACrB,EAAG,CAACjC,EAAWiC,EAAO,EAEtB,IAAMC,EAAa1D,EAAc,uBAE3B2D,EAAUxD,EACf,WAAA,MAAM,CACLF,EAAA2D,aAAA,CAACrD,EAAsB,CAACsD,IAAI,SAASC,UAAWtB,EAAeuB,OAAQxB,AAAW,WAAXA,EAAqByB,QAASvB,EAASI,KAAK,QAAQ,EACzHpB,EAAE,WAEJxB,EAAA2D,aAAA,CAACrD,EAAsB,CAACsD,IAAI,WAAW,EAAEpC,EAAE,YAC3CxB,EAAA2D,aAAA,CAACrD,EAAsB,CAACsD,IAAI,KAAKC,UAAWtB,EAAeuB,OAAQxB,AAAW,OAAXA,EAAiByB,QAASvB,EAASI,KAAK,IAAI,EAC7GpB,EAAE,OAEJxB,EAAA2D,aAAA,CAACrD,EAAsB,CAACsD,IAAI,WAAWC,UAAWtB,EAAeuB,OAAQxB,AAAW,aAAXA,EAAuByB,QAASvB,EAASI,KAAK,UAAU,EAC/HpB,EAAE,SAEJiC,GACCzD,EAAA2D,aAAA,CAACrD,EAAsB,CAACsD,IAAI,UAAUC,UAAWtB,EAAeuB,OAAQxB,AAAW,YAAXA,EAAsByB,QAASvB,EAASI,KAAK,SAAS,EAC5HpB,EAAE,eAGLiC,GAAczD,EAAA2D,aAAA,CAACrD,EAAsB,CAACsD,IAAI,KAAK,EAAEpC,EAAE,cACnDiC,GAAczD,EAAA2D,aAAA,CAACrD,EAAsB,CAACsD,IAAI,IAAI,EAAEpC,EAAE,eAClDxB,EAAA2D,aAAA,CAACrD,EAAsB,CAAC0D,MAAM,KAAKJ,IAAI,MAAM,GAC7C,EACD,CAACpC,EAAGiC,EAAYjB,EAASD,EAAeD,EAAO,EAGhD,OACCtC,EAAA2D,aAAA,CAAA3D,EAAAiE,QAAA,CAAA,KACCjE,EAAA2D,aAAA,CAACtD,EAAY,CAAC6D,YAAa1C,EAAE,wBAAyB2C,SAAUtC,CAAQ,GACxE7B,EAAA2D,aAAA,CAAClD,EAAqB,CACrB2C,KAAMA,EACNE,MAAOA,EACPC,MAAOA,EACPC,OAAQA,EACRE,QAASA,EACTU,UAAW,SAACC,CAAO,EAAA,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAClB3E,EAAA2D,aAAA,CAAChD,EAAwB,CACxBiD,IAAKS,EAAQO,GAAI,CACjBA,IAAKP,EAAQO,GAAI,CACjB1D,SAAU2D,AAlE8C,UAkEpBR,EAAQ,AAAgB,OAAhBC,CAAAA,EAAGD,EAAQS,KAAK,AAALA,GAAKR,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAbA,EAAepD,QAAQ,CAAG,GACzE6D,GAAIV,EAAQU,EAAG,CACfC,WAAYX,MAAAA,EAAO,KAAA,EAAA,AAAQ,OAARE,CAAAA,EAAPF,EAASY,MAAM,AAANA,GAAMV,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAfA,EAAiBW,IAAK,CAClCC,WAAYd,MAAAA,EAAO,KAAA,EAAA,AAAQ,OAARG,CAAAA,EAAPH,EAASY,MAAM,AAANA,GAAMT,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAfA,EAAiBY,IAAK,CAClCC,aAAchB,MAAAA,EAAO,KAAA,EAAA,AAAQ,OAARI,CAAAA,EAAPJ,EAASY,MAAM,AAANA,GAAMR,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAA,AAAI,OAAJC,CAAAA,EAAfD,EAAiBtD,EAAE,AAAFA,GAAEuD,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAnBA,EAAqBQ,IAAK,CACxCI,UAAWjB,MAAAA,EAAO,KAAA,EAAA,AAAQ,OAARM,CAAAA,EAAPN,EAASY,MAAM,AAANA,GAAMN,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAfA,EAAiBY,OAAQ,CACpCnE,QAASiD,EAAQjD,OAAQ,CACzBoE,SAAUhC,CAAO,EAChB,EAEHzB,QAASA,EACTC,aAAcA,EACdC,WAAYA,EACZC,gBAAiBA,EACjBC,gBAAiBA,CAAgB,GAIrC\"}"}