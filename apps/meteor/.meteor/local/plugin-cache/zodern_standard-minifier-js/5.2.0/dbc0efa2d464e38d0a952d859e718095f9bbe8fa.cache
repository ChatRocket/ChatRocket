{"code":"function module(e,t,n){let a,i,l,r,s,o;n.link(\"@rocket.chat/onboarding-ui\",{AdminInfoPage(e){a=e}},0),n.link(\"@rocket.chat/string-helpers\",{escapeRegExp(e){i=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useSetting(e){l=e}},2),n.link(\"react\",{default(e){r=e}},3),n.link(\"react-i18next\",{useTranslation(e){s=e}},4),n.link(\"../contexts/SetupWizardContext\",{useSetupWizardContext(e){o=e}},5);let c=[\"all\",\"here\",\"admin\"].map(e=>RegExp(\"^\".concat(i(e).trim(),\"$\"),\"i\")),u=e=>!!c.length&&c.some(t=>t.test(i(e).trim()));n.exportDefault(()=>{let{t:e}=s(),t=l(\"UTF8_User_Names_Validation\"),n=new RegExp(\"^\".concat(t,\"$\")),{currentStep:i,validateEmail:c,registerAdminUser:d,maxSteps:m}=o(),p=async e=>{d(e)};return r.createElement(a,{validatePassword:e=>e.length>0,passwordRulesHint:\"\",validateUsername:t=>!(!n.test(t)||u(t))||e(\"Invalid_username\"),validateEmail:c,currentStep:i,stepCount:m,onSubmit:p})})}","map":"{\"version\":3,\"sources\":[\"client/views/setupWizard/steps/AdminInfoStep.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { AdminInfoPage } from '@rocket.chat/onboarding-ui';\\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\\nimport { useSetting } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ComponentProps } from 'react';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useSetupWizardContext } from '../contexts/SetupWizardContext';\\n\\nconst toRegExp = (username: string): RegExp => new RegExp(`^${escapeRegExp(username).trim()}$`, 'i');\\nconst usernameBlackList = ['all', 'here', 'admin'].map(toRegExp);\\nconst hasBlockedName = (username: string): boolean =>\\n\\t!!usernameBlackList.length && usernameBlackList.some((restrictedUsername) => restrictedUsername.test(escapeRegExp(username).trim()));\\n\\nconst AdminInfoStep = (): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst regexpForUsernameValidation = useSetting('UTF8_User_Names_Validation');\\n\\tconst usernameRegExp = new RegExp(`^${regexpForUsernameValidation}$`);\\n\\n\\tconst { currentStep, validateEmail, registerAdminUser, maxSteps } = useSetupWizardContext();\\n\\n\\t// TODO: check if username exists\\n\\tconst validateUsername = (username: string): boolean | string => {\\n\\t\\tif (!usernameRegExp.test(username) || hasBlockedName(username)) {\\n\\t\\t\\treturn t('Invalid_username');\\n\\t\\t}\\n\\n\\t\\treturn true;\\n\\t};\\n\\n\\tconst handleSubmit: ComponentProps<typeof AdminInfoPage>['onSubmit'] = async (data) => {\\n\\t\\tregisterAdminUser(data);\\n\\t};\\n\\n\\treturn (\\n\\t\\t<AdminInfoPage\\n\\t\\t\\tvalidatePassword={(password): boolean => password.length > 0}\\n\\t\\t\\tpasswordRulesHint=''\\n\\t\\t\\tvalidateUsername={validateUsername}\\n\\t\\t\\tvalidateEmail={validateEmail}\\n\\t\\t\\tcurrentStep={currentStep}\\n\\t\\t\\tstepCount={maxSteps}\\n\\t\\t\\tonSubmit={handleSubmit}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default AdminInfoStep;\\n\",null],\"names\":[\"AdminInfoPage\",\"escapeRegExp\",\"useSetting\",\"React\",\"useTranslation\",\"useSetupWizardContext\",\"module\",\"link\",\"v\",\"default\",\"usernameBlackList\",\"map\",\"username\",\"RegExp\",\"concat\",\"trim\",\"hasBlockedName\",\"length\",\"some\",\"restrictedUsername\",\"test\",\"exportDefault\",\"AdminInfoStep\",\"t\",\"regexpForUsernameValidation\",\"usernameRegExp\",\"currentStep\",\"validateEmail\",\"registerAdminUser\",\"maxSteps\",\"handleSubmit\",\"data\",\"createElement\",\"validatePassword\",\"password\",\"passwordRulesHint\",\"validateUsername\",\"stepCount\",\"onSubmit\"],\"mappings\":\"2BAAAA,EAA2DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAlDC,EAAeC,IAAA,CAAM,6BAA6B,CAAAP,cAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,8BAAA,CAAAN,aAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2BAAA,CAAAL,WAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gBAAA,CAAAH,eAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iCAAA,CAAAF,sBAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAU3D,IAAME,EAAoB,CAAC,MAAO,OAAQ,QAAQ,CAACC,GAAG,CADpCC,GAA6B,AAAIC,OAAM,IAAAC,MAAA,CAAKb,EAAaW,GAAUG,IAAI,GAAE,KAAK,MAE1FC,EAAkBJ,GACvB,CAAC,CAACF,EAAkBO,MAAM,EAAIP,EAAkBQ,IAAI,CAAEC,GAAuBA,EAAmBC,IAAI,CAACnB,EAAaW,GAAUG,IAAI,KAZjIT,EAAOe,aAAE,CAcaC,KACrB,GAAM,CAAEC,EAAAA,CAAAA,CAAG,CAAGnB,IACRoB,EAA8BtB,EAAW,8BACzCuB,EAAiB,IAAIZ,OAAM,IAAAC,MAAA,CAAKU,EAA2B,MAE3D,CAAEE,YAAAA,CAAW,CAAEC,cAAAA,CAAa,CAAEC,kBAAAA,CAAiB,CAAEC,SAAAA,CAAAA,CAAU,CAAGxB,IAW9DyB,EAAiE,MAAOC,IAC7EH,EAAkBG,EACnB,EAEA,OACC5B,EAAA6B,aAAA,CAAChC,EAAa,CACbiC,iBAAmBC,GAAsBA,EAASjB,MAAM,CAAG,EAC3DkB,kBAAkB,GAClBC,iBAhBwBxB,GACzB,CAAI,CAAA,CAACa,EAAeL,IAAI,CAACR,IAAaI,EAAeJ,EAAQ,GACrDW,EAAE,oBAeTI,cAAeA,EACfD,YAAaA,EACbW,UAAWR,EACXS,SAAUR,CAAa,EAG1B\"}"}