{"code":"function module(e,l,t){let n,o,u,s,i,r,a;t.link(\"react\",{default(e){n=e},useEffect(e){o=e}},0),t.link(\"../../../../../app/otr/lib/OtrRoomState\",{OtrRoomState(e){u=e}},1),t.link(\"../../../../hooks/useOTR\",{useOTR(e){s=e}},2),t.link(\"../../../../hooks/usePresence\",{usePresence(e){i=e}},3),t.link(\"../../contexts/RoomToolboxContext\",{useRoomToolbox(e){r=e}},4),t.link(\"./OTR\",{default(e){a=e}},5),t.exportDefault(()=>{let{otr:e,otrState:l}=s(),{closeTab:t}=r(),k=i(null==e?void 0:e.getPeerId()),c=null==k?void 0:k.status,d=null==k?void 0:k.username,f=![\"offline\",\"loading\"].includes(c||\"\");return o(()=>{if(l!==u.ESTABLISHING)return;let t=setTimeout(()=>{null==e||e.setState(u.TIMEOUT)},1e4);return()=>{clearTimeout(t)}},[e,l]),n.createElement(a,{isOnline:f,onClickClose:t,onClickStart:()=>{null==e||e.handshake()},onClickEnd:()=>{null==e||e.end()},onClickRefresh:()=>{null==e||e.reset(),null==e||e.handshake(!0)},otrState:l,peerUsername:d})})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/OTR/OTRWithData.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ReactElement } from 'react';\\nimport React, { useEffect } from 'react';\\n\\nimport { OtrRoomState } from '../../../../../app/otr/lib/OtrRoomState';\\nimport { useOTR } from '../../../../hooks/useOTR';\\nimport { usePresence } from '../../../../hooks/usePresence';\\nimport { useRoomToolbox } from '../../contexts/RoomToolboxContext';\\nimport OTRComponent from './OTR';\\n\\nconst OTRWithData = (): ReactElement => {\\n\\tconst { otr, otrState } = useOTR();\\n\\tconst { closeTab } = useRoomToolbox();\\n\\n\\tconst peerUserPresence = usePresence(otr?.getPeerId());\\n\\tconst userStatus = peerUserPresence?.status;\\n\\tconst peerUsername = peerUserPresence?.username;\\n\\tconst isOnline = !['offline', 'loading'].includes(userStatus || '');\\n\\n\\tconst handleStart = (): void => {\\n\\t\\totr?.handshake();\\n\\t};\\n\\n\\tconst handleEnd = (): void => {\\n\\t\\totr?.end();\\n\\t};\\n\\n\\tconst handleReset = (): void => {\\n\\t\\totr?.reset();\\n\\t\\totr?.handshake(true);\\n\\t};\\n\\n\\tuseEffect(() => {\\n\\t\\tif (otrState !== OtrRoomState.ESTABLISHING) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst timeout = setTimeout(() => {\\n\\t\\t\\totr?.setState(OtrRoomState.TIMEOUT);\\n\\t\\t}, 10000);\\n\\n\\t\\treturn (): void => {\\n\\t\\t\\tclearTimeout(timeout);\\n\\t\\t};\\n\\t}, [otr, otrState]);\\n\\n\\treturn (\\n\\t\\t<OTRComponent\\n\\t\\t\\tisOnline={isOnline}\\n\\t\\t\\tonClickClose={closeTab}\\n\\t\\t\\tonClickStart={handleStart}\\n\\t\\t\\tonClickEnd={handleEnd}\\n\\t\\t\\tonClickRefresh={handleReset}\\n\\t\\t\\totrState={otrState}\\n\\t\\t\\tpeerUsername={peerUsername}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default OTRWithData;\\n\",null],\"names\":[\"React\",\"useEffect\",\"OtrRoomState\",\"useOTR\",\"usePresence\",\"useRoomToolbox\",\"OTRComponent\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"OTRWithData\",\"otr\",\"otrState\",\"closeTab\",\"peerUserPresence\",\"getPeerId\",\"userStatus\",\"status\",\"peerUsername\",\"username\",\"isOnline\",\"includes\",\"ESTABLISHING\",\"timeout\",\"setTimeout\",\"setState\",\"TIMEOUT\",\"clearTimeout\",\"createElement\",\"onClickClose\",\"onClickStart\",\"handleStart\",\"handshake\",\"onClickEnd\",\"handleEnd\",\"end\",\"onClickRefresh\",\"handleReset\",\"reset\"],\"mappings\":\"2BACAA,EAAOC,EAAkCC,EAAAC,EAAAC,EAAAC,EAAAC,EAAzBC,EAAWC,IAAA,CAAA,QAAa,CAACC,QAAAC,CAAA,EAAAV,EAAAU,CAAA,EAAAT,UAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0CAAA,CAAAN,aAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAL,OAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gCAAA,CAAAJ,YAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oCAAA,CAAAH,eAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAzCH,EAAOI,aAAS,CAQIC,KACnB,GAAM,CAAEC,IAAAA,CAAG,CAAEC,SAAAA,CAAAA,CAAU,CAAGX,IACpB,CAAEY,SAAAA,CAAAA,CAAU,CAAGV,IAEfW,EAAmBZ,EAAYS,MAAAA,EAAG,KAAA,EAAHA,EAAKI,SAAS,IAC7CC,EAAaF,MAAAA,EAAgB,KAAA,EAAhBA,EAAkBG,MAAM,CACrCC,EAAeJ,MAAAA,EAAgB,KAAA,EAAhBA,EAAkBK,QAAQ,CACzCC,EAAW,CAAC,CAAC,UAAW,UAAU,CAACC,QAAQ,CAACL,GAAc,IA6BhE,OAdAjB,EAAU,KACT,GAAIa,IAAaZ,EAAasB,YAAY,CACzC,OAGD,IAAMC,EAAUC,WAAW,KAC1Bb,MAAAA,GAAAA,EAAKc,QAAQ,CAACzB,EAAa0B,OAAO,CACnC,EAAG,KAEH,MAAO,KACNC,aAAaJ,EACd,CACD,EAAG,CAACZ,EAAKC,EAAS,EAGjBd,EAAA8B,aAAA,CAACxB,EAAY,CACZgB,SAAUA,EACVS,aAAchB,EACdiB,aA/BkBC,KACnBpB,MAAAA,GAAAA,EAAKqB,SAAS,EACf,EA8BEC,WA5BgBC,KACjBvB,MAAAA,GAAAA,EAAKwB,GAAG,EACT,EA2BEC,eAzBkBC,KACnB1B,MAAAA,GAAAA,EAAK2B,KAAK,GACV3B,MAAAA,GAAAA,EAAKqB,SAAS,CAAC,CAAA,EAChB,EAuBEpB,SAAUA,EACVM,aAAcA,CAAa,EAG9B\"}"}