{"code":"function module(e,t,r){r.link(\"meteor/meteor\",{Meteor:function(e){n=e}},0),r.link(\"meteor/tracker\",{Tracker:function(e){o=e}},1),r.link(\"../../custom-oauth/client/CustomOAuth\",{CustomOAuth:function(e){a=e}},2),r.link(\"../../settings/client\",{settings:function(e){u=e}},3);var n,o,a,u,s={serverURL:\"\",identityPath:\"/oauth2/UserInfo\",authorizePath:\"/oauth2/authorize\",tokenPath:\"/oauth2/token\",scope:\"openid email profile offline_access\",tokenSentVia:\"payload\",usernameField:\"preferred_username\",mergeUsers:!0,addAutopublishFields:{forLoggedInUser:[\"services.drupal\"],forOtherUsers:[\"services.drupal.name\"]},accessTokenParam:\"access_token\"},i=new a(\"drupal\",s);n.startup(function(){o.autorun(function(){u.get(\"API_Drupal_URL\")&&(s.serverURL=u.get(\"API_Drupal_URL\"),i.configure(s))})})}","map":"{\"version\":3,\"sources\":[\"app/drupal/client/lib.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { OauthConfig } from '@rocket.chat/core-typings';\\nimport { Meteor } from 'meteor/meteor';\\nimport { Tracker } from 'meteor/tracker';\\n\\nimport { CustomOAuth } from '../../custom-oauth/client/CustomOAuth';\\nimport { settings } from '../../settings/client';\\n\\n// Drupal Server CallBack URL needs to be http(s)://{rocketchat.server}[:port]/_oauth/drupal\\n// In RocketChat -> Administration the URL needs to be http(s)://{drupal.server}/\\n\\nconst config: OauthConfig = {\\n\\tserverURL: '',\\n\\tidentityPath: '/oauth2/UserInfo',\\n\\tauthorizePath: '/oauth2/authorize',\\n\\ttokenPath: '/oauth2/token',\\n\\tscope: 'openid email profile offline_access',\\n\\ttokenSentVia: 'payload',\\n\\tusernameField: 'preferred_username',\\n\\tmergeUsers: true,\\n\\taddAutopublishFields: {\\n\\t\\tforLoggedInUser: ['services.drupal'],\\n\\t\\tforOtherUsers: ['services.drupal.name'],\\n\\t},\\n\\taccessTokenParam: 'access_token',\\n};\\n\\nconst Drupal = new CustomOAuth('drupal', config);\\n\\nMeteor.startup(() => {\\n\\tTracker.autorun(() => {\\n\\t\\tif (settings.get('API_Drupal_URL')) {\\n\\t\\t\\tconfig.serverURL = settings.get('API_Drupal_URL');\\n\\t\\t\\tDrupal.configure(config);\\n\\t\\t}\\n\\t});\\n});\\n\",null],\"names\":[\"module\",\"link\",\"Meteor\",\"v\",\"Tracker\",\"CustomOAuth\",\"settings\",\"config\",\"serverURL\",\"identityPath\",\"authorizePath\",\"tokenPath\",\"scope\",\"tokenSentVia\",\"usernameField\",\"mergeUsers\",\"addAutopublishFields\",\"forLoggedInUser\",\"forOtherUsers\",\"accessTokenParam\",\"Drupal\",\"startup\",\"autorun\",\"get\",\"configure\"],\"mappings\":\"uBACSA,EAAQC,IAAA,CAAM,gBAAgB,CAAAC,OAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iBAAA,CAAAG,QAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wCAAA,CAAAI,YAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAK,SAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GASvC,IATAD,EAAuCE,EAAAC,EAAAC,EASjCC,EAAsB,CAC3BC,UAAW,GACXC,aAAc,mBACdC,cAAe,oBACfC,UAAW,gBACXC,MAAO,sCACPC,aAAc,UACdC,cAAe,qBACfC,WAAY,CAAA,EACZC,qBAAsB,CACrBC,gBAAiB,CAAC,kBAAkB,CACpCC,cAAe,CAAC,uBAAsB,EAEvCC,iBAAkB,gBAGbC,EAAS,IAAIf,EAAY,SAAUE,GAEzCL,EAAOmB,OAAO,CAAC,WACdjB,EAAQkB,OAAO,CAAC,WACXhB,EAASiB,GAAG,CAAC,oBAChBhB,EAAOC,SAAS,CAAGF,EAASiB,GAAG,CAAC,kBAChCH,EAAOI,SAAS,CAACjB,GAEnB,EACD\"}"}