{"code":"function module(s,t,e){let i,o,n,l,r,u,a;e.export({useDiscussionsList:()=>c}),e.link(\"@rocket.chat/ui-contexts\",{useEndpoint(s){i=s}},0),e.link(\"react\",{useCallback(s){o=s},useMemo(s){n=s}},1),e.link(\"../../../../hooks/lists/useScrollableMessageList\",{useScrollableMessageList(s){l=s}},2),e.link(\"../../../../hooks/lists/useStreamUpdatesForMessageList\",{useStreamUpdatesForMessageList(s){r=s}},3),e.link(\"../../../../lib/lists/DiscussionsList\",{DiscussionsList(s){u=s}},4),e.link(\"../../../../lib/utils/getConfig\",{getConfig(s){a=s}},5);let c=(s,t)=>{if(!t)throw Error(\"User ID is undefined. Cannot load discussions list\");let e=n(()=>new u(s),[s]),c=i(\"GET\",\"/v1/chat.getDiscussions\"),d=o(async(t,e)=>{let{messages:i,total:o}=await c({roomId:s.rid,text:s.text,offset:t,count:e});return{items:i,itemCount:o}},[c,s.rid,s.text]),{loadMoreItems:k,initialItemCount:g}=l(e,d,n(()=>parseInt(\"\".concat(a(\"discussionListSize\",10))),[]));return r(e,t,s.rid),{discussionsList:e,loadMoreItems:k,initialItemCount:g}}}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/Discussions/useDiscussionsList.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useMemo } from 'react';\\n\\nimport { useScrollableMessageList } from '../../../../hooks/lists/useScrollableMessageList';\\nimport { useStreamUpdatesForMessageList } from '../../../../hooks/lists/useStreamUpdatesForMessageList';\\nimport type { DiscussionsListOptions } from '../../../../lib/lists/DiscussionsList';\\nimport { DiscussionsList } from '../../../../lib/lists/DiscussionsList';\\nimport { getConfig } from '../../../../lib/utils/getConfig';\\n\\nexport const useDiscussionsList = (\\n\\toptions: DiscussionsListOptions,\\n\\tuid: IUser['_id'] | null,\\n): {\\n\\tdiscussionsList: DiscussionsList;\\n\\tinitialItemCount: number;\\n\\tloadMoreItems: (start: number, end: number) => void;\\n} => {\\n\\tif (!uid) {\\n\\t\\tthrow new Error('User ID is undefined. Cannot load discussions list');\\n\\t}\\n\\n\\tconst discussionsList = useMemo(() => new DiscussionsList(options), [options]);\\n\\n\\tconst getDiscussions = useEndpoint('GET', '/v1/chat.getDiscussions');\\n\\n\\tconst fetchMessages = useCallback(\\n\\t\\tasync (start, end) => {\\n\\t\\t\\tconst { messages, total } = await getDiscussions({\\n\\t\\t\\t\\troomId: options.rid,\\n\\t\\t\\t\\ttext: options.text,\\n\\t\\t\\t\\toffset: start,\\n\\t\\t\\t\\tcount: end,\\n\\t\\t\\t});\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\titems: messages,\\n\\t\\t\\t\\titemCount: total,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t[getDiscussions, options.rid, options.text],\\n\\t);\\n\\n\\tconst { loadMoreItems, initialItemCount } = useScrollableMessageList(\\n\\t\\tdiscussionsList,\\n\\t\\tfetchMessages,\\n\\t\\tuseMemo(() => parseInt(`${getConfig('discussionListSize', 10)}`), []),\\n\\t);\\n\\tuseStreamUpdatesForMessageList(discussionsList, uid, options.rid);\\n\\n\\treturn {\\n\\t\\tdiscussionsList,\\n\\t\\tloadMoreItems,\\n\\t\\tinitialItemCount,\\n\\t};\\n};\\n\",null],\"names\":[\"useEndpoint\",\"useCallback\",\"useMemo\",\"useScrollableMessageList\",\"useStreamUpdatesForMessageList\",\"DiscussionsList\",\"getConfig\",\"module\",\"export\",\"useDiscussionsList\",\"link\",\"v\",\"options\",\"uid\",\"Error\",\"discussionsList\",\"getDiscussions\",\"fetchMessages\",\"start\",\"end\",\"messages\",\"total\",\"roomId\",\"rid\",\"text\",\"offset\",\"count\",\"items\",\"itemCount\",\"loadMoreItems\",\"initialItemCount\",\"parseInt\",\"concat\"],\"mappings\":\"2BACuDA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAvDC,EAAOC,MAAE,CAAA,CAAAC,mBAAmBA,IAAAA,CAA2B,GAAAF,EAAAG,IAAA,CAAA,2BAAA,CAAAV,YAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAT,YAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,QAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,mDAAA,CAAAP,yBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,yDAAA,CAAAN,+BAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,wCAAA,CAAAL,gBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,kCAAA,CAAAJ,UAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAShD,IAAMF,EAAqBA,CACjCG,EACAC,KAMA,GAAI,CAACA,EACJ,MAAM,AAAIC,MAAM,sDAGjB,IAAMC,EAAkBb,EAAQ,IAAM,IAAIG,EAAgBO,GAAU,CAACA,EAAQ,EAEvEI,EAAiBhB,EAAY,MAAO,2BAEpCiB,EAAgBhB,EACrB,MAAOiB,EAAOC,KACb,GAAM,CAAEC,SAAAA,CAAQ,CAAEC,MAAAA,CAAAA,CAAO,CAAG,MAAML,EAAe,CAChDM,OAAQV,EAAQW,GAAG,CACnBC,KAAMZ,EAAQY,IAAI,CAClBC,OAAQP,EACRQ,MAAOP,IAGR,MAAO,CACNQ,MAAOP,EACPQ,UAAWP,EAEb,EACA,CAACL,EAAgBJ,EAAQW,GAAG,CAAEX,EAAQY,IAAI,CAAC,EAGtC,CAAEK,cAAAA,CAAa,CAAEC,iBAAAA,CAAAA,CAAkB,CAAG3B,EAC3CY,EACAE,EACAf,EAAQ,IAAM6B,SAAQ,GAAAC,MAAA,CAAI1B,EAAU,qBAAsB,MAAQ,EAAE,GAIrE,OAFAF,EAA+BW,EAAiBF,EAAKD,EAAQW,GAAG,EAEzD,CACNR,gBAAAA,EACAc,cAAAA,EACAC,iBAAAA,EAEF\"}"}