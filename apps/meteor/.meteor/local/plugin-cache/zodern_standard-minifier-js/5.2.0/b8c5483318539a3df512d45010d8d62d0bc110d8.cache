{"code":"function module(e,t,n){let l,o,a,r,i,c,s,m,d;n.link(\"@rocket.chat/fuselage\",{Box(e){l=e}},0),n.link(\"react\",{default(e){o=e},useState(e){a=e}},1),n.link(\"react-i18next\",{useTranslation(e){r=e}},2),n.link(\"../../components/GenericModal\",{default(e){i=e}},3),n.link(\"../../components/UserAutoCompleteMultiple/UserAutoCompleteMultipleFederated\",{default(e){c=e}},4),n.link(\"../../lib/RoomManager\",{useOpenedRoom(e){s=e}},5),n.link(\"../../lib/rooms/roomCoordinator\",{roomCoordinator(e){m=e}},6),n.link(\"../../lib/utils/callWithErrorHandling\",{callWithErrorHandling(e){d=e}},7),n.exportDefault(e=>{let{game:t,onClose:n}=e,{t:u}=r(),[p,k]=a([]),{name:C}=t,_=s(),g=async()=>{let e=\"\".concat(C.replace(/\\s/g,\"-\"),\"-\").concat(Random.id(10));try{let t=await d(\"createPrivateGroup\",e,p);m.openRouteLink(t.t,t),Tracker.autorun(e=>{_===t.rid&&(d(\"sendMessage\",{_id:Random.id(),rid:t.rid,msg:u(\"Apps_Game_Center_Play_Game_Together\",{name:C})}),e.stop())}),n()}catch(e){console.warn(e)}};return o.createElement(o.Fragment,null,o.createElement(i,{onClose:n,onCancel:n,onConfirm:g,title:u(\"Apps_Game_Center_Invite_Friends\")},o.createElement(l,{mbe:16},u(\"Invite_Users\")),o.createElement(l,{mbe:16,display:\"flex\",justifyContent:\"stretch\"},o.createElement(c,{value:p,onChange:k}))))})}","map":"{\"version\":3,\"sources\":[\"client/apps/gameCenter/GameCenterInvitePlayersModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { Box } from '@rocket.chat/fuselage';\\nimport type { ReactElement } from 'react';\\nimport React, { useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport GenericModal from '../../components/GenericModal';\\nimport UserAutoCompleteMultipleFederated from '../../components/UserAutoCompleteMultiple/UserAutoCompleteMultipleFederated';\\nimport { useOpenedRoom } from '../../lib/RoomManager';\\nimport { roomCoordinator } from '../../lib/rooms/roomCoordinator';\\nimport { callWithErrorHandling } from '../../lib/utils/callWithErrorHandling';\\nimport type { IGame } from './GameCenter';\\n\\ntype Username = Exclude<IUser['username'], undefined>;\\n\\ninterface IGameCenterInvitePlayersModalProps {\\n\\tgame: IGame;\\n\\tonClose: () => void;\\n}\\n\\nconst GameCenterInvitePlayersModal = ({ game, onClose }: IGameCenterInvitePlayersModalProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst [users, setUsers] = useState<Array<Username>>([]);\\n\\tconst { name } = game;\\n\\n\\tconst openedRoom = useOpenedRoom();\\n\\n\\tconst sendInvite = async () => {\\n\\t\\tconst privateGroupName = `${name.replace(/\\\\s/g, '-')}-${Random.id(10)}`;\\n\\n\\t\\ttry {\\n\\t\\t\\tconst result = await callWithErrorHandling('createPrivateGroup' as any, privateGroupName, users);\\n\\n\\t\\t\\troomCoordinator.openRouteLink(result.t, result);\\n\\n\\t\\t\\tTracker.autorun((c) => {\\n\\t\\t\\t\\tif (openedRoom !== result.rid) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tcallWithErrorHandling('sendMessage', {\\n\\t\\t\\t\\t\\t_id: Random.id(),\\n\\t\\t\\t\\t\\trid: result.rid,\\n\\t\\t\\t\\t\\tmsg: t('Apps_Game_Center_Play_Game_Together', { name }),\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\tc.stop();\\n\\t\\t\\t});\\n\\t\\t\\tonClose();\\n\\t\\t} catch (err) {\\n\\t\\t\\tconsole.warn(err);\\n\\t\\t}\\n\\t};\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<GenericModal onClose={onClose} onCancel={onClose} onConfirm={sendInvite} title={t('Apps_Game_Center_Invite_Friends')}>\\n\\t\\t\\t\\t<Box mbe={16}>{t('Invite_Users')}</Box>\\n\\t\\t\\t\\t<Box mbe={16} display='flex' justifyContent='stretch'>\\n\\t\\t\\t\\t\\t<UserAutoCompleteMultipleFederated value={users} onChange={setUsers} />\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</GenericModal>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default GameCenterInvitePlayersModal;\\n\",null],\"names\":[\"Box\",\"React\",\"useState\",\"useTranslation\",\"GenericModal\",\"UserAutoCompleteMultipleFederated\",\"useOpenedRoom\",\"roomCoordinator\",\"callWithErrorHandling\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"game\",\"onClose\",\"t\",\"users\",\"setUsers\",\"name\",\"openedRoom\",\"sendInvite\",\"privateGroupName\",\"concat\",\"replace\",\"Random\",\"id\",\"result\",\"openRouteLink\",\"Tracker\",\"autorun\",\"c\",\"rid\",\"_id\",\"msg\",\"stop\",\"err\",\"console\",\"warn\",\"createElement\",\"Fragment\",\"onCancel\",\"onConfirm\",\"title\",\"mbe\",\"display\",\"justifyContent\",\"value\",\"onChange\"],\"mappings\":\"2BACAA,EAA4CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAArCC,EAAOC,IAAA,CAAM,wBAAwB,CAAAV,IAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAV,EAAAU,CAAA,EAAAT,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gBAAA,CAAAP,eAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gCAAA,CAAAE,QAAAD,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,8EAAA,CAAAE,QAAAD,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wBAAA,CAAAJ,cAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kCAAA,CAAAH,gBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wCAAA,CAAAF,sBAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAA5CF,EAAOI,aAAa,CAmBiBC,IAAwE,GAAvE,CAAEC,KAAAA,CAAI,CAAEC,QAAAA,CAAAA,CAA6C,CAAAF,EACpF,CAAEG,EAAAA,CAAAA,CAAG,CAAGd,IACR,CAACe,EAAOC,EAAS,CAAGjB,EAA0B,EAAE,EAChD,CAAEkB,KAAAA,CAAAA,CAAM,CAAGL,EAEXM,EAAaf,IAEbgB,EAAa,UAClB,IAAMC,EAAgB,GAAAC,MAAA,CAAMJ,EAAKK,OAAO,CAAC,MAAO,KAAI,KAAAD,MAAA,CAAIE,OAAOC,EAAE,CAAC,KAElE,GAAI,CACH,IAAMC,EAAS,MAAMpB,EAAsB,qBAA6Be,EAAkBL,GAE1FX,EAAgBsB,aAAa,CAACD,EAAOX,CAAC,CAAEW,GAExCE,QAAQC,OAAO,CAAEC,IACZX,IAAeO,EAAOK,GAAG,GAI7BzB,EAAsB,cAAe,CACpC0B,IAAKR,OAAOC,EAAE,GACdM,IAAKL,EAAOK,GAAG,CACfE,IAAKlB,EAAE,sCAAuC,CAAEG,KAAAA,CAAI,KAGrDY,EAAEI,IAAI,GACP,GACApB,GACD,CAAE,MAAOqB,EAAK,CACbC,QAAQC,IAAI,CAACF,EACd,CACD,EAEA,OACCpC,EAAAuC,aAAA,CAAAvC,EAAAwC,QAAA,CAAA,KACCxC,EAAAuC,aAAA,CAACpC,EAAY,CAACY,QAASA,EAAS0B,SAAU1B,EAAS2B,UAAWrB,EAAYsB,MAAO3B,EAAE,kCAAmC,EACrHhB,EAAAuC,aAAA,CAACxC,EAAG,CAAC6C,IAAK,EAAG,EAAE5B,EAAE,iBACjBhB,EAAAuC,aAAA,CAACxC,EAAG,CAAC6C,IAAK,GAAIC,QAAQ,OAAOC,eAAe,SAAS,EACpD9C,EAAAuC,aAAA,CAACnC,EAAiC,CAAC2C,MAAO9B,EAAO+B,SAAU9B,CAAS,KAKzE\"}"}