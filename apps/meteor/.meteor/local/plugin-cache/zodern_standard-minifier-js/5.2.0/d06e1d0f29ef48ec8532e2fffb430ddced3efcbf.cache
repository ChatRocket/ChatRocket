{"code":"function module(e,t,o){var n,i,l,a,r,u,c,m,s,f,d,x,p,k,C;o.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId:function(e){n=e}},0),o.link(\"react\",{default:function(e){i=e},useMemo:function(e){l=e}},1),o.link(\"react-hook-form\",{FormProvider:function(e){a=e},useForm:function(e){r=e}},2),o.link(\"react-i18next\",{useTranslation:function(e){u=e}},3),o.link(\"../../../../components/Contextualbar\",{ContextualbarHeader:function(e){c=e},ContextualbarIcon:function(e){m=e},ContextualbarTitle:function(e){s=e},ContextualbarClose:function(e){f=e}},4),o.link(\"../../../../lib/rooms/roomCoordinator\",{roomCoordinator:function(e){d=e}},5),o.link(\"../../contexts/RoomContext\",{useRoom:function(e){x=e}},6),o.link(\"../../contexts/RoomToolboxContext\",{useRoomToolbox:function(e){p=e}},7),o.link(\"./FileExport\",{default:function(e){k=e}},8),o.link(\"./MailExportForm\",{default:function(e){C=e}},9),o.exportDefault(function(){var e=u().t,t=x(),o=p().closeTab,E=(null==t?void 0:t.t)&&d.getRoomName(t.t,t),b=r({mode:\"onBlur\",defaultValues:{type:\"email\",dateFrom:\"\",dateTo:\"\",toUsers:[],additionalEmails:\"\",messagesCount:0,subject:e(\"Mail_Messages_Subject\",{postProcess:\"sprintf\",sprintf:[E]}),format:\"html\"}}),_=l(function(){return[[\"email\",e(\"Send_via_email\")],[\"file\",e(\"Export_as_file\")]]},[e]),g=n();return i.createElement(i.Fragment,null,i.createElement(c,null,i.createElement(m,{name:\"mail\"}),i.createElement(s,{id:g+\"-title\"},e(\"Export_Messages\")),i.createElement(f,{onClick:o})),i.createElement(a,b,\"email\"===b.watch(\"type\")&&i.createElement(C,{formId:g,rid:t._id,exportOptions:_,onCancel:o}),\"file\"===b.watch(\"type\")&&i.createElement(k,{formId:g,rid:t._id,exportOptions:_,onCancel:o})))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/ExportMessages/ExportMessages.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { SelectOption } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport React, { useMemo } from 'react';\\nimport { FormProvider, useForm } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { ContextualbarHeader, ContextualbarIcon, ContextualbarTitle, ContextualbarClose } from '../../../../components/Contextualbar';\\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\\nimport { useRoom } from '../../contexts/RoomContext';\\nimport { useRoomToolbox } from '../../contexts/RoomToolboxContext';\\nimport FileExport from './FileExport';\\nimport MailExportForm from './MailExportForm';\\n\\nexport type MailExportFormValues = {\\n\\ttype: 'email' | 'file';\\n\\tdateFrom: string;\\n\\tdateTo: string;\\n\\tformat: 'html' | 'json';\\n\\ttoUsers: string[];\\n\\tadditionalEmails: string;\\n\\tmessagesCount: number;\\n\\tsubject: string;\\n};\\n\\nconst ExportMessages = () => {\\n\\tconst { t } = useTranslation();\\n\\tconst room = useRoom();\\n\\n\\tconst { closeTab } = useRoomToolbox();\\n\\n\\tconst roomName = room?.t && roomCoordinator.getRoomName(room.t, room);\\n\\n\\tconst methods = useForm<MailExportFormValues>({\\n\\t\\tmode: 'onBlur',\\n\\t\\tdefaultValues: {\\n\\t\\t\\ttype: 'email',\\n\\t\\t\\tdateFrom: '',\\n\\t\\t\\tdateTo: '',\\n\\t\\t\\ttoUsers: [],\\n\\t\\t\\tadditionalEmails: '',\\n\\t\\t\\tmessagesCount: 0,\\n\\t\\t\\tsubject: t('Mail_Messages_Subject', {\\n\\t\\t\\t\\tpostProcess: 'sprintf',\\n\\t\\t\\t\\tsprintf: [roomName],\\n\\t\\t\\t}),\\n\\t\\t\\tformat: 'html',\\n\\t\\t},\\n\\t});\\n\\tconst exportOptions = useMemo<SelectOption[]>(\\n\\t\\t() => [\\n\\t\\t\\t['email', t('Send_via_email')],\\n\\t\\t\\t['file', t('Export_as_file')],\\n\\t\\t],\\n\\t\\t[t],\\n\\t);\\n\\n\\tconst formId = useUniqueId();\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<ContextualbarHeader>\\n\\t\\t\\t\\t<ContextualbarIcon name='mail' />\\n\\t\\t\\t\\t<ContextualbarTitle id={`${formId}-title`}>{t('Export_Messages')}</ContextualbarTitle>\\n\\t\\t\\t\\t<ContextualbarClose onClick={closeTab} />\\n\\t\\t\\t</ContextualbarHeader>\\n\\t\\t\\t<FormProvider {...methods}>\\n\\t\\t\\t\\t{methods.watch('type') === 'email' && (\\n\\t\\t\\t\\t\\t<MailExportForm formId={formId} rid={room._id} exportOptions={exportOptions} onCancel={closeTab} />\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t{methods.watch('type') === 'file' && (\\n\\t\\t\\t\\t\\t<FileExport formId={formId} rid={room._id} exportOptions={exportOptions} onCancel={closeTab} />\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</FormProvider>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default ExportMessages;\\n\",null],\"names\":[\"useUniqueId\",\"React\",\"useMemo\",\"FormProvider\",\"useForm\",\"useTranslation\",\"ContextualbarHeader\",\"ContextualbarIcon\",\"ContextualbarTitle\",\"ContextualbarClose\",\"roomCoordinator\",\"useRoom\",\"useRoomToolbox\",\"FileExport\",\"MailExportForm\",\"module\",\"link\",\"v\",\"exportDefault\",\"t\",\"_useTranslation\",\"room\",\"closeTab\",\"_useRoomToolbox\",\"roomName\",\"getRoomName\",\"methods\",\"mode\",\"defaultValues\",\"type\",\"dateFrom\",\"dateTo\",\"toUsers\",\"additionalEmails\",\"messagesCount\",\"subject\",\"postProcess\",\"sprintf\",\"format\",\"exportOptions\",\"formId\",\"createElement\",\"Fragment\",\"name\",\"id\",\"onClick\",\"watch\",\"rid\",\"_id\",\"onCancel\"],\"mappings\":\"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\"}"}