{"code":"function module(n,t,e){var i,u,o,c,r,a,l,s,f,m,d,E,p,k,v,h;e.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(n){i=n}},0),e.link(\"@rocket.chat/core-typings\",{UserStatus:function(n){u=n}},0),e.link(\"@rocket.chat/fuselage\",{Button:function(n){o=n},PositionAnimated:function(n){c=n},Options:function(n){r=n},useCursor:function(n){a=n},Box:function(n){l=n}},1),e.link(\"@rocket.chat/ui-contexts\",{useSetting:function(n){s=n},useTranslation:function(n){f=n}},2),e.link(\"react\",{default:function(n){m=n},useRef:function(n){d=n},useCallback:function(n){E=n},useState:function(n){p=n},useMemo:function(n){k=n},useEffect:function(n){v=n}},3),e.link(\"./UserStatus\",{UserStatus:function(n){h=n}},4),e.exportDefault(function(n){var t=n.margin,e=n.onChange,S=n.initialStatus,g=void 0===S?u.OFFLINE:S,A=n.optionWidth,O=n.placement,b=f(),y=p(g),I=i(y,2),F=I[0],N=I[1],U=s(\"Accounts_AllowInvisibleStatusOption\"),w=k(function(){var n=function(n,t){return m.createElement(l,{display:\"flex\",flexDirection:\"row\",alignItems:\"center\"},m.createElement(l,{marginInlineEnd:8},m.createElement(h,{status:n})),t)},t=[[u.ONLINE,n(u.ONLINE,b(\"Online\"))],[u.AWAY,n(u.AWAY,b(\"Away\"))],[u.BUSY,n(u.BUSY,b(\"Busy\"))]];return U&&t.push([u.OFFLINE,n(u.OFFLINE,b(\"Offline\"))]),t},[b,U]),B=a(-1,w,function(n,t){var e=i(n,1)[0],u=i(t,2)[1];N(e),D(),u()}),L=i(B,5),x=L[0],C=L[1],Y=L[2],D=L[3],W=i(L[4],3),_=W[0],K=W[1],T=W[2],q=d(null),M=E(function(){null!=q&&q.current&&(q.current.focus(),T(),q.current.classList.add(\"focus-visible\"))},[T]),P=E(function(n){N(i(n,1)[0]),D(),K()},[K,D]);return v(function(){return e(F)},[F,e]),m.createElement(m.Fragment,null,m.createElement(o,{ref:q,small:!0,square:!0,secondary:!0,onClick:M,onBlur:K,onKeyUp:Y,onKeyDown:C,margin:t,\"aria-label\":b(\"User_status_menu\")},m.createElement(h,{status:F})),m.createElement(c,{width:\"auto\",visible:_,anchor:q,placement:void 0===O?\"bottom-end\":O},m.createElement(r,{width:void 0===A?void 0:A,onSelect:P,options:w,cursor:x})))})}","map":"{\"version\":3,\"sources\":[\"client/components/UserStatusMenu.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { UserStatus as UserStatusType } from '@rocket.chat/core-typings';\\nimport { Button, PositionAnimated, Options, useCursor, Box } from '@rocket.chat/fuselage';\\nimport { useSetting, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ComponentProps } from 'react';\\nimport React, { useRef, useCallback, useState, useMemo, useEffect } from 'react';\\n\\nimport { UserStatus } from './UserStatus';\\n\\ntype UserStatusMenuProps = {\\n\\tmargin: ComponentProps<typeof Box>['margin'];\\n\\tonChange: (type: UserStatusType) => void;\\n\\tinitialStatus?: UserStatusType;\\n\\toptionWidth?: ComponentProps<typeof Box>['width'];\\n\\tplacement?: ComponentProps<typeof PositionAnimated>['placement'];\\n};\\n\\nconst UserStatusMenu = ({\\n\\tmargin,\\n\\tonChange,\\n\\tinitialStatus = UserStatusType.OFFLINE,\\n\\toptionWidth = undefined,\\n\\tplacement = 'bottom-end',\\n}: UserStatusMenuProps): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst [status, setStatus] = useState(initialStatus);\\n\\tconst allowInvisibleStatus = useSetting('Accounts_AllowInvisibleStatusOption') as boolean;\\n\\n\\tconst options = useMemo(() => {\\n\\t\\tconst renderOption = (status: UserStatusType, label: string): ReactElement => (\\n\\t\\t\\t<Box display='flex' flexDirection='row' alignItems='center'>\\n\\t\\t\\t\\t<Box marginInlineEnd={8}>\\n\\t\\t\\t\\t\\t<UserStatus status={status} />\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t{label}\\n\\t\\t\\t</Box>\\n\\t\\t);\\n\\n\\t\\tconst statuses: Array<[value: UserStatusType, label: ReactElement]> = [\\n\\t\\t\\t[UserStatusType.ONLINE, renderOption(UserStatusType.ONLINE, t('Online'))],\\n\\t\\t\\t[UserStatusType.AWAY, renderOption(UserStatusType.AWAY, t('Away'))],\\n\\t\\t\\t[UserStatusType.BUSY, renderOption(UserStatusType.BUSY, t('Busy'))],\\n\\t\\t];\\n\\n\\t\\tif (allowInvisibleStatus) {\\n\\t\\t\\tstatuses.push([UserStatusType.OFFLINE, renderOption(UserStatusType.OFFLINE, t('Offline'))]);\\n\\t\\t}\\n\\n\\t\\treturn statuses;\\n\\t}, [t, allowInvisibleStatus]);\\n\\n\\tconst [cursor, handleKeyDown, handleKeyUp, reset, [visible, hide, show]] = useCursor(-1, options, ([selected], [, hide]) => {\\n\\t\\tsetStatus(selected);\\n\\t\\treset();\\n\\t\\thide();\\n\\t});\\n\\n\\tconst ref = useRef<HTMLButtonElement>(null);\\n\\tconst onClick = useCallback(() => {\\n\\t\\tif (!ref?.current) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tref.current.focus();\\n\\t\\tshow();\\n\\t\\tref.current.classList.add('focus-visible');\\n\\t}, [show]);\\n\\n\\tconst handleSelection = useCallback(\\n\\t\\t([selected]) => {\\n\\t\\t\\tsetStatus(selected);\\n\\t\\t\\treset();\\n\\t\\t\\thide();\\n\\t\\t},\\n\\t\\t[hide, reset],\\n\\t);\\n\\n\\tuseEffect(() => onChange(status), [status, onChange]);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<Button\\n\\t\\t\\t\\tref={ref}\\n\\t\\t\\t\\tsmall\\n\\t\\t\\t\\tsquare\\n\\t\\t\\t\\tsecondary\\n\\t\\t\\t\\tonClick={onClick}\\n\\t\\t\\t\\tonBlur={hide}\\n\\t\\t\\t\\tonKeyUp={handleKeyUp}\\n\\t\\t\\t\\tonKeyDown={handleKeyDown}\\n\\t\\t\\t\\tmargin={margin}\\n\\t\\t\\t\\taria-label={t('User_status_menu')}\\n\\t\\t\\t>\\n\\t\\t\\t\\t<UserStatus status={status} />\\n\\t\\t\\t</Button>\\n\\t\\t\\t<PositionAnimated width='auto' visible={visible} anchor={ref} placement={placement}>\\n\\t\\t\\t\\t<Options width={optionWidth} onSelect={handleSelection} options={options} cursor={cursor} />\\n\\t\\t\\t</PositionAnimated>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default UserStatusMenu;\\n\",null],\"names\":[\"_slicedToArray\",\"UserStatusType\",\"Button\",\"PositionAnimated\",\"Options\",\"useCursor\",\"Box\",\"useSetting\",\"useTranslation\",\"React\",\"useRef\",\"useCallback\",\"useState\",\"useMemo\",\"useEffect\",\"UserStatus\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"margin\",\"onChange\",\"_ref$initialStatus\",\"initialStatus\",\"OFFLINE\",\"_ref$optionWidth\",\"optionWidth\",\"_ref$placement\",\"placement\",\"t\",\"_useState\",\"_useState2\",\"status\",\"setStatus\",\"allowInvisibleStatus\",\"options\",\"renderOption\",\"label\",\"createElement\",\"display\",\"flexDirection\",\"alignItems\",\"marginInlineEnd\",\"statuses\",\"ONLINE\",\"AWAY\",\"BUSY\",\"push\",\"_useCursor\",\"_ref2\",\"_ref3\",\"selected\",\"_ref4\",\"hide\",\"_ref5\",\"reset\",\"_useCursor2\",\"cursor\",\"handleKeyDown\",\"handleKeyUp\",\"_useCursor2$\",\"visible\",\"show\",\"ref\",\"onClick\",\"current\",\"focus\",\"classList\",\"add\",\"handleSelection\",\"_ref6\",\"_ref7\",\"Fragment\",\"small\",\"square\",\"secondary\",\"onBlur\",\"onKeyUp\",\"onKeyDown\",\"width\",\"anchor\",\"undefined\",\"onSelect\"],\"mappings\":\"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\"}"}