{"code":"function module(n,e,i){i.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(n){o=n}},0),i.export({useMessageRoles:function(){return c}}),i.link(\"react\",{useCallback:function(n){t=n}},0),i.link(\"../../../../../app/models/client\",{RoomRoles:function(n){u=n},UserRoles:function(n){l=n},Roles:function(n){r=n}},1),i.link(\"../../../../hooks/useReactiveValue\",{useReactiveValue:function(n){s=n}},2);var o,t,u,l,r,s,c=function(n,e,i){return s(t(function(){if(!i||!n)return[];var t=l.findOne(n),s=u.findOne({\"u._id\":n,rid:e}),c=[].concat(o((null==t?void 0:t.roles)||[]),o((null==s?void 0:s.roles)||[]));return r.find({_id:{$in:c},description:{$exists:!0,$ne:\"\"}},{fields:{description:1}}).fetch().map(function(n){return n.description})},[n,e,i]))}}","map":"{\"version\":3,\"sources\":[\"client/components/message/header/hooks/useMessageRoles.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, IUser } from '@rocket.chat/core-typings';\\nimport { useCallback } from 'react';\\n\\nimport { RoomRoles, UserRoles, Roles } from '../../../../../app/models/client';\\nimport { useReactiveValue } from '../../../../hooks/useReactiveValue';\\n\\nexport const useMessageRoles = (userId: IUser['_id'] | undefined, roomId: IRoom['_id'], shouldLoadRoles: boolean): Array<string> =>\\n\\tuseReactiveValue(\\n\\t\\tuseCallback(() => {\\n\\t\\t\\tif (!shouldLoadRoles || !userId) {\\n\\t\\t\\t\\treturn [];\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst userRoles = UserRoles.findOne(userId);\\n\\t\\t\\tconst roomRoles = RoomRoles.findOne({\\n\\t\\t\\t\\t'u._id': userId,\\n\\t\\t\\t\\t'rid': roomId,\\n\\t\\t\\t});\\n\\n\\t\\t\\tconst roles = [...(userRoles?.roles || []), ...(roomRoles?.roles || [])];\\n\\n\\t\\t\\tconst result = Roles.find(\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t_id: {\\n\\t\\t\\t\\t\\t\\t$in: roles,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tdescription: {\\n\\t\\t\\t\\t\\t\\t$exists: true,\\n\\t\\t\\t\\t\\t\\t$ne: '',\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tfields: {\\n\\t\\t\\t\\t\\t\\tdescription: 1,\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t},\\n\\t\\t\\t).fetch();\\n\\t\\t\\treturn result.map(({ description }) => description);\\n\\t\\t}, [userId, roomId, shouldLoadRoles]),\\n\\t);\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_toConsumableArray\",\"export\",\"useMessageRoles\",\"useCallback\",\"RoomRoles\",\"UserRoles\",\"Roles\",\"useReactiveValue\",\"userId\",\"roomId\",\"shouldLoadRoles\",\"userRoles\",\"findOne\",\"roomRoles\",\"roles\",\"concat\",\"result\",\"find\",\"_id\",\"$in\",\"description\",\"$exists\",\"$ne\",\"fields\",\"fetch\",\"map\",\"_ref\"],\"mappings\":\"uBACsBA,EAAMC,IAAA,CAAO,2CAAC,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAApCH,EAAOK,MAAE,CAAA,CAAAC,gBAAmB,WAAQ,OAAAA,CAAA,CAAA,GAAAN,EAAAC,IAAA,CAAA,QAAA,CAAAM,YAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,mCAAA,CAAAO,UAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,EAAAM,UAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,EAAAO,MAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qCAAA,CAAAU,iBAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,CAAA,EAAA,GAK7B,IALPC,EAAoCG,EAAAC,EAAAC,EAAAC,EAAAC,EAKvBL,EAAkB,SAACM,CAAgC,CAAEC,CAAoB,CAAEC,CAAwB,EAAA,OAC/GH,EACCJ,EAAY,WACX,GAAI,CAACO,GAAmB,CAACF,EACxB,MAAO,EAAE,CAGV,IAAMG,EAAYN,EAAUO,OAAO,CAACJ,GAC9BK,EAAYT,EAAUQ,OAAO,CAAC,CACnC,QAASJ,EACT,IAAOC,IAGFK,EAAK,EAAA,CAAAC,MAAA,CAAAf,EAAQ,AAAAW,CAAAA,MAAAA,EAAS,KAAA,EAATA,EAAWG,KAAK,AAALA,GAAS,EAAE,EAAAd,EAAO,AAAAa,CAAAA,MAAAA,EAAS,KAAA,EAATA,EAAWC,KAAK,AAALA,GAAS,EAAE,GAkBtE,OAAOE,AAhBQV,EAAMW,IAAI,CACxB,CACCC,IAAK,CACJC,IAAKL,GAENM,YAAa,CACZC,QAAS,CAAA,EACTC,IAAK,KAGP,CACCC,OAAQ,CACPH,YAAa,KAGdI,KAAK,GACOC,GAAG,CAAC,SAAAC,CAAA,EAAc,OAAAA,EAAXN,WAAW,AAAkB,EACnD,EAAG,CAACZ,EAAQC,EAAQC,EAAgB,EACpC\"}"}