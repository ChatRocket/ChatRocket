{"code":"function module(e,t,l){let n,a,i,c,s,u,o,r,d,k;l.link(\"@rocket.chat/ui-contexts\",{useUserId(e){n=e}},0),l.link(\"react\",{default(e){a=e},useEffect(e){i=e}},1),l.link(\"../../../../app/models/client\",{CachedChatSubscription(e){c=e}},2),l.link(\"../../../../app/settings/client\",{settings(e){s=e}},3),l.link(\"../../../../app/ui-cached-collection/client\",{CachedCollectionManager(e){u=e}},4),l.link(\"../../../../app/ui-utils/client\",{mainReady(e){o=e}},5),l.link(\"../../../hooks/useReactiveVar\",{useReactiveVar(e){r=e}},6),l.link(\"../../../lib/userData\",{isSyncReady(e){d=e}},7),l.link(\"../PageLoading\",{default(e){k=e}},8),l.exportDefault(e=>{let{children:t}=e,l=n(),p=r(c.ready),h=r(s.cachedCollection.ready),f=r(d),g=!l||f&&p&&h;return(i(()=>{u.syncEnabled=g,o.set(g)},[g]),g)?a.createElement(a.Fragment,null,t):a.createElement(k,null)})}","map":"{\"version\":3,\"sources\":[\"client/views/root/MainLayout/Preload.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useUserId } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ReactNode } from 'react';\\nimport React, { useEffect } from 'react';\\n\\nimport { CachedChatSubscription } from '../../../../app/models/client';\\nimport { settings } from '../../../../app/settings/client';\\nimport { CachedCollectionManager } from '../../../../app/ui-cached-collection/client';\\nimport { mainReady } from '../../../../app/ui-utils/client';\\nimport { useReactiveVar } from '../../../hooks/useReactiveVar';\\nimport { isSyncReady } from '../../../lib/userData';\\nimport PageLoading from '../PageLoading';\\n\\nconst Preload = ({ children }: { children: ReactNode }): ReactElement => {\\n\\tconst uid = useUserId();\\n\\tconst subscriptionsReady = useReactiveVar(CachedChatSubscription.ready);\\n\\tconst settingsReady = useReactiveVar(settings.cachedCollection.ready);\\n\\tconst userDataReady = useReactiveVar(isSyncReady);\\n\\n\\tconst ready = !uid || (userDataReady && subscriptionsReady && settingsReady);\\n\\n\\tuseEffect(() => {\\n\\t\\tCachedCollectionManager.syncEnabled = ready;\\n\\t\\tmainReady.set(ready);\\n\\t}, [ready]);\\n\\n\\tif (!ready) {\\n\\t\\treturn <PageLoading />;\\n\\t}\\n\\n\\treturn <>{children}</>;\\n};\\n\\nexport default Preload;\\n\",null],\"names\":[\"useUserId\",\"React\",\"useEffect\",\"CachedChatSubscription\",\"settings\",\"CachedCollectionManager\",\"mainReady\",\"useReactiveVar\",\"isSyncReady\",\"PageLoading\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"children\",\"uid\",\"subscriptionsReady\",\"ready\",\"settingsReady\",\"cachedCollection\",\"userDataReady\",\"syncEnabled\",\"set\",\"createElement\",\"Fragment\"],\"mappings\":\"2BAAAA,EAAqDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA5CC,EAAWC,IAAA,CAAM,2BAA2B,CAAAX,UAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAX,EAAAW,CAAA,EAAAV,UAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gCAAA,CAAAR,uBAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kCAAA,CAAAP,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,8CAAA,CAAAN,wBAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kCAAA,CAAAL,UAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gCAAA,CAAAJ,eAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wBAAA,CAAAH,YAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iBAAA,CAAAE,QAAAD,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAArDF,EAAOI,aAAa,CAYJC,IAAwD,GAAvD,CAAEC,SAAAA,CAAAA,CAAmC,CAAAD,EAC/CE,EAAMjB,IACNkB,EAAqBX,EAAeJ,EAAuBgB,KAAK,EAChEC,EAAgBb,EAAeH,EAASiB,gBAAgB,CAACF,KAAK,EAC9DG,EAAgBf,EAAeC,GAE/BW,EAAQ,CAACF,GAAQK,GAAiBJ,GAAsBE,QAO9D,CALAlB,EAAU,KACTG,EAAwBkB,WAAW,CAAGJ,EACtCb,EAAUkB,GAAG,CAACL,EACf,EAAG,CAACA,EAAM,EAELA,GAIElB,EAAAwB,aAAA,CAAAxB,EAAAyB,QAAA,CAAA,KAAGV,GAHFf,EAAAwB,aAAA,CAAChB,EAAW,KAIrB\"}"}