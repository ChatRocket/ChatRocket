{"code":"function module(e,t,n){let l,r,i,o,a,u,c,f,m,s,d;n.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){l=e}},0),n.link(\"@rocket.chat/fuselage\",{Box(e){r=e},Skeleton(e){i=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){o=e},useTranslation(e){a=e}},1),n.link(\"react\",{default(e){u=e},useEffect(e){c=e},useState(e){f=e},useMemo(e){m=e}},2),n.link(\"../realTimeMonitoring/counter/CounterItem\",{default(e){s=e}},3),n.link(\"../realTimeMonitoring/counter/CounterRow\",{default(e){d=e}},4);let k=Array.from({length:3}).map(()=>({title:void 0,value:\"\"})),h=[k,k],p=[k];n.exportDefault(e=>{let{type:t,dateRange:n,departmentId:k}=e,v=a(),{start:b,end:g}=n,x=m(()=>l({name:t,from:b,to:g},k&&{departmentId:k}),[k,g,b,t]),E=o(\"GET\",\"/v1/livechat/analytics/overview\"),[y,w]=f(h);return c(()=>{w(\"Conversations\"===t?h:p)},[t]),c(()=>{(async function e(){if(!b||!g)return;let e=await E(x);if(e){if(e.length>3)return w([e.slice(0,3),e.slice(3)]);w([e])}})()},[b,g,E,x]),u.createElement(r,{pb:28,flexDirection:\"column\"},y.map(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return u.createElement(d,{key:t,border:\"0\",pb:\"none\"},e.map((e,t)=>{let{title:n,value:l}=e;return u.createElement(s,{flexShrink:1,pb:8,flexBasis:\"100%\",key:t,title:n?v(n):u.createElement(i,{width:\"x60\"}),count:l})}))}))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/analytics/Overview.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Skeleton } from '@rocket.chat/fuselage';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\\nimport React, { useEffect, useState, useMemo } from 'react';\\n\\nimport CounterItem from '../realTimeMonitoring/counter/CounterItem';\\nimport CounterRow from '../realTimeMonitoring/counter/CounterRow';\\n\\nconst initialData: { title?: string; value: string | number }[] = Array.from({ length: 3 }).map(() => ({ title: undefined, value: '' }));\\n\\nconst conversationsInitialData = [initialData, initialData];\\nconst productivityInitialData = [initialData];\\n\\nconst Overview = ({ type, dateRange, departmentId }: { type: string; dateRange: { start: string; end: string }; departmentId: string }) => {\\n\\tconst t = useTranslation();\\n\\n\\tconst { start, end } = dateRange;\\n\\n\\tconst params = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\tname: type,\\n\\t\\t\\tfrom: start,\\n\\t\\t\\tto: end,\\n\\t\\t\\t...(departmentId && { departmentId }),\\n\\t\\t}),\\n\\t\\t[departmentId, end, start, type],\\n\\t);\\n\\n\\tconst loadData = useEndpoint('GET', '/v1/livechat/analytics/overview');\\n\\n\\tconst [displayData, setDisplayData] = useState(conversationsInitialData);\\n\\n\\tuseEffect(() => {\\n\\t\\tsetDisplayData(type === 'Conversations' ? conversationsInitialData : productivityInitialData);\\n\\t}, [type]);\\n\\n\\tuseEffect(() => {\\n\\t\\tasync function fetchData() {\\n\\t\\t\\tif (!start || !end) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst value = await loadData(params);\\n\\t\\t\\tif (!value) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (value.length > 3) {\\n\\t\\t\\t\\treturn setDisplayData([value.slice(0, 3), value.slice(3)]);\\n\\t\\t\\t}\\n\\n\\t\\t\\tsetDisplayData([value]);\\n\\t\\t}\\n\\t\\tfetchData();\\n\\t}, [start, end, loadData, params]);\\n\\n\\treturn (\\n\\t\\t<Box pb={28} flexDirection='column'>\\n\\t\\t\\t{displayData.map((items = [], i) => (\\n\\t\\t\\t\\t<CounterRow key={i} border='0' pb='none'>\\n\\t\\t\\t\\t\\t{items.map(({ title, value }, i) => (\\n\\t\\t\\t\\t\\t\\t<CounterItem\\n\\t\\t\\t\\t\\t\\t\\tflexShrink={1}\\n\\t\\t\\t\\t\\t\\t\\tpb={8}\\n\\t\\t\\t\\t\\t\\t\\tflexBasis='100%'\\n\\t\\t\\t\\t\\t\\t\\tkey={i}\\n\\t\\t\\t\\t\\t\\t\\ttitle={title ? t(title as TranslationKey) : <Skeleton width='x60' />}\\n\\t\\t\\t\\t\\t\\t\\tcount={value}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t</CounterRow>\\n\\t\\t\\t))}\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default Overview;\\n\",null],\"names\":[\"_objectSpread\",\"Box\",\"Skeleton\",\"useEndpoint\",\"useTranslation\",\"React\",\"useEffect\",\"useState\",\"useMemo\",\"CounterItem\",\"CounterRow\",\"module\",\"link\",\"default\",\"v\",\"initialData\",\"Array\",\"from\",\"length\",\"map\",\"title\",\"undefined\",\"value\",\"conversationsInitialData\",\"productivityInitialData\",\"exportDefault\",\"_ref\",\"type\",\"dateRange\",\"departmentId\",\"t\",\"start\",\"end\",\"params\",\"name\",\"to\",\"loadData\",\"displayData\",\"setDisplayData\",\"fetchData\",\"slice\",\"createElement\",\"pb\",\"flexDirection\",\"items\",\"arguments\",\"i\",\"key\",\"border\",\"_ref2\",\"flexShrink\",\"flexBasis\",\"width\",\"count\"],\"mappings\":\"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\"}"}