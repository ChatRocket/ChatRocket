{"code":"function module(e,t,n){let l,o,r,a,i,s,c,m,u,d,x,E,C,h,k,f,b,S,g,y,p,I,_,v,w,L;n.link(\"@rocket.chat/fuselage\",{Box(e){l=e},Margins(e){o=e},TextInput(e){r=e},Icon(e){a=e},Throbber(e){i=e},States(e){s=e},StatesIcon(e){c=e},StatesTitle(e){m=e},StatesSubtitle(e){u=e}},0),n.link(\"react\",{default(e){d=e},useMemo(e){x=e},useState(e){E=e}},1),n.link(\"react-i18next\",{useTranslation(e){C=e}},2),n.link(\"react-virtuoso\",{Virtuoso(e){h=e}},3),n.link(\"../../../components/Contextualbar\",{ContextualbarHeader(e){k=e},ContextualbarContent(e){f=e},ContextualbarTitle(e){b=e},ContextualbarIcon(e){S=e},ContextualbarClose(e){g=e},ContextualbarEmptyContent(e){y=e}},4),n.link(\"../../../components/CustomScrollbars\",{VirtuosoScrollbars(e){p=e}},5),n.link(\"../../../hooks/lists/useRecordList\",{useRecordList(e){I=e}},6),n.link(\"../../../lib/asyncState\",{AsyncStatePhase(e){_=e}},7),n.link(\"../../room/contexts/RoomContext\",{useOmnichannelRoom(e){v=e}},8),n.link(\"./ContactHistoryItem\",{default(e){w=e}},9),n.link(\"./useHistoryList\",{useHistoryList(e){L=e}},10),n.exportDefault(e=>{let{setChatId:t,close:n}=e,[D,H]=E(\"\"),{t:T}=C(),G=v(),{itemsList:R,loadMoreItems:A}=L(x(()=>({roomId:G._id,filter:D,visitorId:G.v._id}),[G,D])),{phase:B,error:N,items:O,itemCount:M}=I(R);return d.createElement(d.Fragment,null,d.createElement(k,null,d.createElement(S,{name:\"history\"}),d.createElement(b,null,T(\"Contact_Chat_History\")),d.createElement(g,{onClick:n})),d.createElement(f,{paddingInline:0},d.createElement(l,{display:\"flex\",flexDirection:\"row\",p:24,borderBlockEndWidth:\"default\",borderBlockEndStyle:\"solid\",borderBlockEndColor:\"extra-light\",flexShrink:0},d.createElement(l,{display:\"flex\",flexDirection:\"row\",flexGrow:1,mi:\"neg-x4\"},d.createElement(o,{inline:4},d.createElement(r,{placeholder:T(\"Search_Chat_History\"),value:D,onChange:e=>{H(e.currentTarget.value)},addon:d.createElement(a,{name:\"magnifier\",size:\"x20\"})})))),B===_.LOADING&&d.createElement(l,{pi:24,pb:12},d.createElement(i,{size:\"x12\"})),N&&d.createElement(s,null,d.createElement(c,{name:\"warning\",variation:\"danger\"}),d.createElement(m,null,T(\"Something_went_wrong\")),d.createElement(u,null,N.toString())),B!==_.LOADING&&0===M&&d.createElement(y,{title:T(\"No_results_found\")}),d.createElement(l,{flexGrow:1,flexShrink:1,overflow:\"hidden\",display:\"flex\"},!N&&M>0&&O.length>0&&d.createElement(h,{totalCount:M,endReached:B===_.LOADING?()=>void 0:e=>A(e,Math.min(50,M-e)),overscan:25,data:O,components:{Scroller:p},itemContent:(e,n)=>d.createElement(w,{key:e,history:n,setChatId:t})}))))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/contactHistory/ContactHistoryList.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Margins, TextInput, Icon, Throbber, States, StatesIcon, StatesTitle, StatesSubtitle } from '@rocket.chat/fuselage';\\nimport type { ChangeEvent, Dispatch, ReactElement, SetStateAction } from 'react';\\nimport React, { useMemo, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\nimport { Virtuoso } from 'react-virtuoso';\\n\\nimport {\\n\\tContextualbarHeader,\\n\\tContextualbarContent,\\n\\tContextualbarTitle,\\n\\tContextualbarIcon,\\n\\tContextualbarClose,\\n\\tContextualbarEmptyContent,\\n} from '../../../components/Contextualbar';\\nimport { VirtuosoScrollbars } from '../../../components/CustomScrollbars';\\nimport { useRecordList } from '../../../hooks/lists/useRecordList';\\nimport { AsyncStatePhase } from '../../../lib/asyncState';\\nimport { useOmnichannelRoom } from '../../room/contexts/RoomContext';\\nimport ContactHistoryItem from './ContactHistoryItem';\\nimport { useHistoryList } from './useHistoryList';\\n\\nconst ContactHistoryList = ({ setChatId, close }: { setChatId: Dispatch<SetStateAction<string>>; close: () => void }): ReactElement => {\\n\\tconst [text, setText] = useState('');\\n\\tconst { t } = useTranslation();\\n\\tconst room = useOmnichannelRoom();\\n\\tconst { itemsList: historyList, loadMoreItems } = useHistoryList(\\n\\t\\tuseMemo(() => ({ roomId: room._id, filter: text, visitorId: room.v._id }), [room, text]),\\n\\t);\\n\\n\\tconst handleSearchChange = (event: ChangeEvent<HTMLInputElement>): void => {\\n\\t\\tsetText(event.currentTarget.value);\\n\\t};\\n\\n\\tconst { phase, error, items: history, itemCount: totalItemCount } = useRecordList(historyList);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<ContextualbarHeader>\\n\\t\\t\\t\\t<ContextualbarIcon name='history' />\\n\\t\\t\\t\\t<ContextualbarTitle>{t('Contact_Chat_History')}</ContextualbarTitle>\\n\\t\\t\\t\\t<ContextualbarClose onClick={close} />\\n\\t\\t\\t</ContextualbarHeader>\\n\\n\\t\\t\\t<ContextualbarContent paddingInline={0}>\\n\\t\\t\\t\\t<Box\\n\\t\\t\\t\\t\\tdisplay='flex'\\n\\t\\t\\t\\t\\tflexDirection='row'\\n\\t\\t\\t\\t\\tp={24}\\n\\t\\t\\t\\t\\tborderBlockEndWidth='default'\\n\\t\\t\\t\\t\\tborderBlockEndStyle='solid'\\n\\t\\t\\t\\t\\tborderBlockEndColor='extra-light'\\n\\t\\t\\t\\t\\tflexShrink={0}\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<Box display='flex' flexDirection='row' flexGrow={1} mi='neg-x4'>\\n\\t\\t\\t\\t\\t\\t<Margins inline={4}>\\n\\t\\t\\t\\t\\t\\t\\t<TextInput\\n\\t\\t\\t\\t\\t\\t\\t\\tplaceholder={t('Search_Chat_History')}\\n\\t\\t\\t\\t\\t\\t\\t\\tvalue={text}\\n\\t\\t\\t\\t\\t\\t\\t\\tonChange={handleSearchChange}\\n\\t\\t\\t\\t\\t\\t\\t\\taddon={<Icon name='magnifier' size='x20' />}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</Margins>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t{phase === AsyncStatePhase.LOADING && (\\n\\t\\t\\t\\t\\t<Box pi={24} pb={12}>\\n\\t\\t\\t\\t\\t\\t<Throbber size='x12' />\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t{error && (\\n\\t\\t\\t\\t\\t<States>\\n\\t\\t\\t\\t\\t\\t<StatesIcon name='warning' variation='danger' />\\n\\t\\t\\t\\t\\t\\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\\n\\t\\t\\t\\t\\t\\t<StatesSubtitle>{error.toString()}</StatesSubtitle>\\n\\t\\t\\t\\t\\t</States>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t{phase !== AsyncStatePhase.LOADING && totalItemCount === 0 && <ContextualbarEmptyContent title={t('No_results_found')} />}\\n\\t\\t\\t\\t<Box flexGrow={1} flexShrink={1} overflow='hidden' display='flex'>\\n\\t\\t\\t\\t\\t{!error && totalItemCount > 0 && history.length > 0 && (\\n\\t\\t\\t\\t\\t\\t<Virtuoso\\n\\t\\t\\t\\t\\t\\t\\ttotalCount={totalItemCount}\\n\\t\\t\\t\\t\\t\\t\\tendReached={\\n\\t\\t\\t\\t\\t\\t\\t\\tphase === AsyncStatePhase.LOADING\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t? (): void => undefined\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t: (start): unknown => loadMoreItems(start, Math.min(50, totalItemCount - start))\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\toverscan={25}\\n\\t\\t\\t\\t\\t\\t\\tdata={history}\\n\\t\\t\\t\\t\\t\\t\\tcomponents={{ Scroller: VirtuosoScrollbars }}\\n\\t\\t\\t\\t\\t\\t\\titemContent={(index, data): ReactElement => <ContactHistoryItem key={index} history={data} setChatId={setChatId} />}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</ContextualbarContent>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default ContactHistoryList;\\n\",null],\"names\":[\"Box\",\"Margins\",\"TextInput\",\"Icon\",\"Throbber\",\"States\",\"StatesIcon\",\"StatesTitle\",\"StatesSubtitle\",\"React\",\"useMemo\",\"useState\",\"useTranslation\",\"Virtuoso\",\"ContextualbarHeader\",\"ContextualbarContent\",\"ContextualbarTitle\",\"ContextualbarIcon\",\"ContextualbarClose\",\"ContextualbarEmptyContent\",\"VirtuosoScrollbars\",\"useRecordList\",\"AsyncStatePhase\",\"useOmnichannelRoom\",\"ContactHistoryItem\",\"useHistoryList\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"setChatId\",\"close\",\"text\",\"setText\",\"t\",\"room\",\"itemsList\",\"historyList\",\"loadMoreItems\",\"roomId\",\"_id\",\"filter\",\"visitorId\",\"phase\",\"error\",\"items\",\"history\",\"itemCount\",\"totalItemCount\",\"createElement\",\"Fragment\",\"name\",\"onClick\",\"paddingInline\",\"display\",\"flexDirection\",\"p\",\"borderBlockEndWidth\",\"borderBlockEndStyle\",\"borderBlockEndColor\",\"flexShrink\",\"flexGrow\",\"mi\",\"inline\",\"placeholder\",\"value\",\"onChange\",\"event\",\"currentTarget\",\"addon\",\"size\",\"LOADING\",\"pi\",\"pb\",\"variation\",\"toString\",\"title\",\"overflow\",\"length\",\"totalCount\",\"endReached\",\"undefined\",\"start\",\"Math\",\"min\",\"overscan\",\"data\",\"components\",\"Scroller\",\"itemContent\",\"index\",\"key\"],\"mappings\":\"2BAAAA,EAAOC,EAAOC,EAASC,EAAAC,EAAiBC,EAAAC,EAAkBC,EAAYC,EAA2DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9CC,EAAAC,IAAA,CAAc,wBAAQ,CAAA3B,IAAA4B,CAAA,EAAwB5B,EAAA4B,CAAA,EAAA3B,QAAA2B,CAAA,EAAA3B,EAAA2B,CAAA,EAAA1B,UAAA0B,CAAA,EAAA1B,EAAA0B,CAAA,EAAAzB,KAAAyB,CAAA,EAAAzB,EAAAyB,CAAA,EAAAxB,SAAAwB,CAAA,EAAAxB,EAAAwB,CAAA,EAAAvB,OAAAuB,CAAA,EAAAvB,EAAAuB,CAAA,EAAAtB,WAAAsB,CAAA,EAAAtB,EAAAsB,CAAA,EAAArB,YAAAqB,CAAA,EAAArB,EAAAqB,CAAA,EAAApB,eAAAoB,CAAA,EAAApB,EAAAoB,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAnB,EAAAmB,CAAA,EAAAlB,QAAAkB,CAAA,EAAAlB,EAAAkB,CAAA,EAAAjB,SAAAiB,CAAA,EAAAjB,EAAAiB,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gBAAA,CAAAf,eAAAgB,CAAA,EAAAhB,EAAAgB,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iBAAA,CAAAd,SAAAe,CAAA,EAAAf,EAAAe,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,oCAAA,CAAAb,oBAAAc,CAAA,EAAAd,EAAAc,CAAA,EAAAb,qBAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,mBAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,kBAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,mBAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,0BAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,uCAAA,CAAAP,mBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,qCAAA,CAAAN,cAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,0BAAA,CAAAL,gBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kCAAA,CAAAJ,mBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,uBAAA,CAAAE,QAAAD,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,mBAAA,CAAAF,eAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,IAAjIF,EAAOI,aAAO,CAqBaC,IAA2G,GAA1G,CAAEC,UAAAA,CAAS,CAAEC,MAAAA,CAAAA,CAA2E,CAAAF,EAC7G,CAACG,EAAMC,EAAQ,CAAGxB,EAAS,IAC3B,CAAEyB,EAAAA,CAAAA,CAAG,CAAGxB,IACRyB,EAAOd,IACP,CAAEe,UAAWC,CAAW,CAAEC,cAAAA,CAAAA,CAAe,CAAGf,EACjDf,EAAQ,IAAO,CAAA,CAAE+B,OAAQJ,EAAKK,GAAG,CAAEC,OAAQT,EAAMU,UAAWP,EAAKT,CAAC,CAACc,GAAAA,AAAG,CAAA,EAAK,CAACL,EAAMH,EAAK,GAOlF,CAAEW,MAAAA,CAAK,CAAEC,MAAAA,CAAK,CAAEC,MAAOC,CAAO,CAAEC,UAAWC,CAAAA,CAAgB,CAAG7B,EAAckB,GAElF,OACC9B,EAAA0C,aAAA,CAAA1C,EAAA2C,QAAA,CAAA,KACC3C,EAAA0C,aAAA,CAACrC,EAAmB,KACnBL,EAAA0C,aAAA,CAAClC,EAAiB,CAACoC,KAAK,SAAS,GACjC5C,EAAA0C,aAAA,CAACnC,EAAkB,KAAEoB,EAAE,yBACvB3B,EAAA0C,aAAA,CAACjC,EAAkB,CAACoC,QAASrB,CAAM,IAGpCxB,EAAA0C,aAAA,CAACpC,EAAoB,CAACwC,cAAe,CAAE,EACtC9C,EAAA0C,aAAA,CAACnD,EAAG,CACHwD,QAAQ,OACRC,cAAc,MACdC,EAAG,GACHC,oBAAoB,UACpBC,oBAAoB,QACpBC,oBAAoB,cACpBC,WAAY,CAAE,EAEdrD,EAAA0C,aAAA,CAACnD,EAAG,CAACwD,QAAQ,OAAOC,cAAc,MAAMM,SAAU,EAAGC,GAAG,QAAQ,EAC/DvD,EAAA0C,aAAA,CAAClD,EAAO,CAACgE,OAAQ,CAAE,EAClBxD,EAAA0C,aAAA,CAACjD,EAAS,CACTgE,YAAa9B,EAAE,uBACf+B,MAAOjC,EACPkC,SA7BqBC,IAC3BlC,EAAQkC,EAAMC,aAAa,CAACH,KAAK,CAClC,EA4BOI,MAAO9D,EAAA0C,aAAA,CAAChD,EAAI,CAACkD,KAAK,YAAYmB,KAAK,KAAK,EAAI,MAK/C3B,IAAUvB,EAAgBmD,OAAO,EACjChE,EAAA0C,aAAA,CAACnD,EAAG,CAAC0E,GAAI,GAAIC,GAAI,EAAG,EACnBlE,EAAA0C,aAAA,CAAC/C,EAAQ,CAACoE,KAAK,KAAK,IAGrB1B,GACArC,EAAA0C,aAAA,CAAC9C,EAAM,KACNI,EAAA0C,aAAA,CAAC7C,EAAU,CAAC+C,KAAK,UAAUuB,UAAU,QAAQ,GAC7CnE,EAAA0C,aAAA,CAAC5C,EAAW,KAAE6B,EAAE,yBAChB3B,EAAA0C,aAAA,CAAC3C,EAAc,KAAEsC,EAAM+B,QAAQ,KAGhChC,IAAUvB,EAAgBmD,OAAO,EAAIvB,AAAmB,IAAnBA,GAAwBzC,EAAA0C,aAAA,CAAChC,EAAyB,CAAC2D,MAAO1C,EAAE,mBAAoB,GACtH3B,EAAA0C,aAAA,CAACnD,EAAG,CAAC+D,SAAU,EAAGD,WAAY,EAAGiB,SAAS,SAASvB,QAAQ,MAAM,EAC/D,CAACV,GAASI,EAAiB,GAAKF,EAAQgC,MAAM,CAAG,GACjDvE,EAAA0C,aAAA,CAACtC,EAAQ,CACRoE,WAAY/B,EACZgC,WACCrC,IAAUvB,EAAgBmD,OAAO,CAC9B,IAAYU,KAAAA,EACXC,GAAmB5C,EAAc4C,EAAOC,KAAKC,GAAG,CAAC,GAAIpC,EAAiBkC,IAE3EG,SAAU,GACVC,KAAMxC,EACNyC,WAAY,CAAEC,SAAUtE,CAAkB,EAC1CuE,YAAaA,CAACC,EAAOJ,IAAuB/E,EAAA0C,aAAA,CAAC3B,EAAkB,CAACqE,IAAKD,EAAO5C,QAASwC,EAAMxD,UAAWA,CAAU,EAAI,KAO3H\"}"}