{"code":"function module(e,n,t){var i,a,l,o,u,c,r,s,p,f,d,m,k,E,v,g,h,A;t.link(\"@babel/runtime/helpers/extends\",{default:function(e){i=e}},0),t.link(\"@rocket.chat/fuselage\",{Button:function(e){a=e},ButtonGroup:function(e){l=e},Margins:function(e){o=e}},0),t.link(\"@rocket.chat/ui-contexts\",{usePermission:function(e){u=e},useRoute:function(e){c=e},useRouteParameter:function(e){r=e},useSetModal:function(e){s=e}},1),t.link(\"react\",{default:function(e){p=e}},2),t.link(\"react-i18next\",{useTranslation:function(e){f=e}},3),t.link(\"../../../components/GenericResourceUsage\",{GenericResourceUsageSkeleton:function(e){d=e}},4),t.link(\"../../../components/Page\",{PageHeader:function(e){m=e}},5),t.link(\"../UnlimitedAppsUpsellModal\",{default:function(e){k=e}},6),t.link(\"../hooks/useAppsCountQuery\",{useAppsCountQuery:function(e){E=e}},7),t.link(\"../hooks/usePrivateAppsEnabled\",{usePrivateAppsEnabled:function(e){v=e}},8),t.link(\"./EnabledAppsCount\",{default:function(e){g=e}},9),t.link(\"./PrivateAppInstallModal/PrivateAppInstallModal\",{default:function(e){h=e}},10),t.link(\"./UpdateRocketChatButton\",{default:function(e){A=e}},11),t.exportDefault(function(e){var n=e.title,t=e.unsupportedVersion,P=f().t,x=u(\"manage-apps\"),C=r(\"context\")||\"explore\",U=c(\"marketplace\"),_=s(),b=E(C),M=v(),R=function(){_(null),U.push({context:C,page:\"install\"})};return b.isError?null:p.createElement(m,{title:n},b.isLoading&&p.createElement(d,{mi:16}),!t&&b.isSuccess&&!b.data.hasUnlimitedApps&&p.createElement(o,{inline:16},p.createElement(g,i({},b.data,{tooltip:\"private\"!==C||M?void 0:P(\"Private_apps_premium_message\"),context:C}))),p.createElement(l,{wrap:!0,align:\"end\"},!t&&x&&b.isSuccess&&!b.data.hasUnlimitedApps&&\"private\"!==C&&p.createElement(a,{onClick:function(){_(p.createElement(k,{onClose:function(){return _(null)}}))}},P(\"Enable_unlimited_apps\")),x&&\"private\"===C&&p.createElement(a,{onClick:function(){if(!M){_(p.createElement(h,{onClose:function(){return _(null)},onProceed:R}));return}U.push({context:C,page:\"install\"})}},P(\"Upload_private_app\")),t&&x&&\"private\"!==C&&p.createElement(A,null)))})}","map":"{\"version\":3,\"sources\":[\"client/views/marketplace/components/MarketplaceHeader.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Button, ButtonGroup, Margins } from '@rocket.chat/fuselage';\\nimport { usePermission, useRoute, useRouteParameter, useSetModal } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { GenericResourceUsageSkeleton } from '../../../components/GenericResourceUsage';\\nimport { PageHeader } from '../../../components/Page';\\nimport UnlimitedAppsUpsellModal from '../UnlimitedAppsUpsellModal';\\nimport { useAppsCountQuery } from '../hooks/useAppsCountQuery';\\nimport { usePrivateAppsEnabled } from '../hooks/usePrivateAppsEnabled';\\nimport EnabledAppsCount from './EnabledAppsCount';\\nimport PrivateAppInstallModal from './PrivateAppInstallModal/PrivateAppInstallModal';\\nimport UpdateRocketChatButton from './UpdateRocketChatButton';\\n\\nconst MarketplaceHeader = ({ title, unsupportedVersion }: { title: string; unsupportedVersion: boolean }): ReactElement | null => {\\n\\tconst { t } = useTranslation();\\n\\tconst isAdmin = usePermission('manage-apps');\\n\\tconst context = (useRouteParameter('context') || 'explore') as 'private' | 'explore' | 'installed' | 'premium' | 'requested';\\n\\tconst route = useRoute('marketplace');\\n\\tconst setModal = useSetModal();\\n\\tconst result = useAppsCountQuery(context);\\n\\n\\tconst privateAppsEnabled = usePrivateAppsEnabled();\\n\\n\\tconst handleProceed = (): void => {\\n\\t\\tsetModal(null);\\n\\t\\troute.push({ context, page: 'install' });\\n\\t};\\n\\n\\tconst handleClickPrivate = () => {\\n\\t\\tif (!privateAppsEnabled) {\\n\\t\\t\\tsetModal(<PrivateAppInstallModal onClose={() => setModal(null)} onProceed={handleProceed} />);\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\troute.push({ context, page: 'install' });\\n\\t};\\n\\n\\tif (result.isError) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<PageHeader title={title}>\\n\\t\\t\\t{result.isLoading && <GenericResourceUsageSkeleton mi={16} />}\\n\\n\\t\\t\\t{!unsupportedVersion && result.isSuccess && !result.data.hasUnlimitedApps && (\\n\\t\\t\\t\\t<Margins inline={16}>\\n\\t\\t\\t\\t\\t<EnabledAppsCount\\n\\t\\t\\t\\t\\t\\t{...result.data}\\n\\t\\t\\t\\t\\t\\ttooltip={context === 'private' && !privateAppsEnabled ? t('Private_apps_premium_message') : undefined}\\n\\t\\t\\t\\t\\t\\tcontext={context}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</Margins>\\n\\t\\t\\t)}\\n\\n\\t\\t\\t<ButtonGroup wrap align='end'>\\n\\t\\t\\t\\t{!unsupportedVersion && isAdmin && result.isSuccess && !result.data.hasUnlimitedApps && context !== 'private' && (\\n\\t\\t\\t\\t\\t<Button\\n\\t\\t\\t\\t\\t\\tonClick={() => {\\n\\t\\t\\t\\t\\t\\t\\tsetModal(<UnlimitedAppsUpsellModal onClose={() => setModal(null)} />);\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t{t('Enable_unlimited_apps')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t)}\\n\\n\\t\\t\\t\\t{isAdmin && context === 'private' && <Button onClick={handleClickPrivate}>{t('Upload_private_app')}</Button>}\\n\\t\\t\\t\\t{unsupportedVersion && isAdmin && context !== 'private' && <UpdateRocketChatButton />}\\n\\t\\t\\t</ButtonGroup>\\n\\t\\t</PageHeader>\\n\\t);\\n};\\n\\nexport default MarketplaceHeader;\\n\",null],\"names\":[\"_extends\",\"Button\",\"ButtonGroup\",\"Margins\",\"usePermission\",\"useRoute\",\"useRouteParameter\",\"useSetModal\",\"React\",\"useTranslation\",\"GenericResourceUsageSkeleton\",\"PageHeader\",\"UnlimitedAppsUpsellModal\",\"useAppsCountQuery\",\"usePrivateAppsEnabled\",\"EnabledAppsCount\",\"PrivateAppInstallModal\",\"UpdateRocketChatButton\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"title\",\"unsupportedVersion\",\"t\",\"_useTranslation\",\"isAdmin\",\"context\",\"route\",\"setModal\",\"result\",\"privateAppsEnabled\",\"handleProceed\",\"push\",\"page\",\"isError\",\"createElement\",\"isLoading\",\"mi\",\"isSuccess\",\"data\",\"hasUnlimitedApps\",\"inline\",\"tooltip\",\"undefined\",\"wrap\",\"align\",\"onClick\",\"onClose\",\"onProceed\"],\"mappings\":\"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\"}"}