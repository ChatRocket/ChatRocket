{"code":"function module(e,t,n){var i,o,u,a,c,l,r;n.link(\"@rocket.chat/fuselage-hooks\",{usePrefersReducedData:function(e){i=e}},0),n.link(\"@rocket.chat/ui-contexts\",{AttachmentContext:function(e){o=e},useLayout:function(e){u=e},useUserPreference:function(e){a=e}},1),n.link(\"react\",{default:function(e){c=e},useMemo:function(e){l=e}},2),n.link(\"../../app/utils/client\",{getURL:function(e){r=e}},3),n.exportDefault(function(e){var t=e.children,n=e.width,d=void 0===n?360:n,f=e.height,s=void 0===f?360:f,h=u().isMobile,k=i(),m=!!a(\"collapseMediaByDefault\"),v=!!a(\"autoImageLoad\"),g=!!a(\"saveMobileBandwidth\"),p=l(function(){return{getURL:function(e){return r(e,{full:!0})},collapsedByDefault:m,autoLoadEmbedMedias:!k&&v&&(!g||!h),dimensions:{width:d,height:s}}},[m,k,v,g,h,d,s]);return c.createElement(o.Provider,{children:t,value:p})})}","map":"{\"version\":3,\"sources\":[\"client/providers/AttachmentProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { usePrefersReducedData } from '@rocket.chat/fuselage-hooks';\\nimport type { AttachmentContextValue } from '@rocket.chat/ui-contexts';\\nimport { AttachmentContext, useLayout, useUserPreference } from '@rocket.chat/ui-contexts';\\nimport type { ReactNode } from 'react';\\nimport React, { useMemo } from 'react';\\n\\nimport { getURL } from '../../app/utils/client';\\n\\ntype AttachmentProviderProps = {\\n\\tchildren?: ReactNode;\\n\\twidth?: number;\\n\\theight?: number;\\n};\\n\\nconst AttachmentProvider = ({ children, width = 360, height = 360 }: AttachmentProviderProps) => {\\n\\tconst { isMobile } = useLayout();\\n\\tconst reducedData = usePrefersReducedData();\\n\\tconst collapsedByDefault = !!useUserPreference<boolean>('collapseMediaByDefault');\\n\\tconst autoLoadEmbedMedias = !!useUserPreference<boolean>('autoImageLoad');\\n\\tconst saveMobileBandwidth = !!useUserPreference<boolean>('saveMobileBandwidth');\\n\\n\\tconst contextValue: AttachmentContextValue = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\tgetURL: (url: string): string => getURL(url, { full: true }),\\n\\t\\t\\tcollapsedByDefault,\\n\\t\\t\\tautoLoadEmbedMedias: !reducedData && autoLoadEmbedMedias && (!saveMobileBandwidth || !isMobile),\\n\\t\\t\\tdimensions: {\\n\\t\\t\\t\\twidth,\\n\\t\\t\\t\\theight,\\n\\t\\t\\t},\\n\\t\\t}),\\n\\t\\t[collapsedByDefault, reducedData, autoLoadEmbedMedias, saveMobileBandwidth, isMobile, width, height],\\n\\t);\\n\\n\\treturn <AttachmentContext.Provider children={children} value={contextValue} />;\\n};\\n\\nexport default AttachmentProvider;\\n\",null],\"names\":[\"usePrefersReducedData\",\"AttachmentContext\",\"useLayout\",\"useUserPreference\",\"React\",\"useMemo\",\"getURL\",\"module\",\"link\",\"v\",\"exportDefault\",\"_ref\",\"children\",\"_ref$width\",\"width\",\"_ref$height\",\"height\",\"isMobile\",\"_useLayout\",\"reducedData\",\"collapsedByDefault\",\"autoLoadEmbedMedias\",\"saveMobileBandwidth\",\"contextValue\",\"url\",\"full\",\"dimensions\",\"createElement\",\"Provider\",\"value\"],\"mappings\":\"uBAcA,IAdAA,EAAoEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA3DC,EAAuBC,IAAA,CAAM,8BAA8B,CAAAR,sBAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2BAAA,CAAAP,kBAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,UAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,kBAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAC,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,QAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,yBAAA,CAAAF,OAAA,SAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAApEF,EAAOG,aAAE,CAckB,SAAAC,CAAA,EAAqE,IAAlEC,EAAQD,EAARC,QAAQ,CAAAC,EAAAF,EAAEG,KAAK,CAALA,EAAKD,AAAA,KAAA,IAAAA,EAAG,IAAGA,EAAAE,EAAAJ,EAAEK,MAAM,CAANA,EAAMD,AAAA,KAAA,IAAAA,EAAG,IAAGA,EACxDE,EAAQC,AAAKhB,IAAbe,QAAQ,CACVE,EAAcnB,IACdoB,EAAqB,CAAC,CAACjB,EAA2B,0BAClDkB,EAAsB,CAAC,CAAClB,EAA2B,iBACnDmB,EAAsB,CAAC,CAACnB,EAA2B,uBAEnDoB,EAAuClB,EAC5C,WAAA,MAAO,CACNC,OAAQ,SAACkB,CAAW,EAAA,OAAalB,EAAOkB,EAAK,CAAEC,KAAM,CAAA,CAAI,EAAG,EAC5DL,mBAAAA,EACAC,oBAAqB,CAACF,GAAeE,GAAwB,CAAA,CAACC,GAAuB,CAACL,CAAAA,EACtFS,WAAY,CACXZ,MAAAA,EACAE,OAAAA,GAED,EACD,CAACI,EAAoBD,EAAaE,EAAqBC,EAAqBL,EAAUH,EAAOE,EAAO,EAGrG,OAAOZ,EAAAuB,aAAA,CAAC1B,EAAkB2B,QAAQ,CAAA,CAAChB,SAAUA,EAAUiB,MAAON,CAAa,EAC5E\"}"}