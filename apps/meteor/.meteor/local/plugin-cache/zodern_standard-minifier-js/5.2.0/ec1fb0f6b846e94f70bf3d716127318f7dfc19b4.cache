{"code":"function module(e,n,t){var i,r,l,o,u,a,c,f,s,d,m,p,b,v,h,k,E,g,y,x,I=[\"label\",\"value\"];t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){i=e}},0),t.link(\"@babel/runtime/helpers/extends\",{default:function(e){r=e}},1),t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){l=e}},2),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){o=e}},3),t.export({PrioritiesSelect:function(){return P}}),t.link(\"@rocket.chat/core-typings\",{LivechatPriorityWeight:function(e){u=e}},0),t.link(\"@rocket.chat/fuselage\",{Options:function(e){a=e},Box:function(e){c=e},Option:function(e){f=e},Field:function(e){s=e},FieldLabel:function(e){d=e},FieldRow:function(e){m=e},SelectLegacy:function(e){p=e}},1),t.link(\"react\",{default:function(e){b=e},useCallback:function(e){v=e},forwardRef:function(e){h=e},useMemo:function(e){k=e},useState:function(e){E=e}},2),t.link(\"react-i18next\",{useTranslation:function(e){g=e}},3),t.link(\"../../hooks/useHasLicenseModule\",{useHasLicenseModule:function(e){y=e}},4),t.link(\"../priorities/PriorityIcon\",{PriorityIcon:function(e){x=e}},5);var P=function(e){var n=e.value,t=e.label,P=e.options,C=e.onChange,F=g().t,L=y(\"livechat-enterprise\"),S=E({}),w=o(S,1)[0],O=k(function(){var e=null==P?void 0:P.map(function(e){var n=e.dirty,t=e.name,i=e.i18n,r=e._id,l=e.sortItem,o=n&&t?t:F(i);return w[r]=l,[r,o]});return[[\"\",F(\"Unprioritized\")]].concat(l(e))},[P,w,F]),H=v(function(e,n){return b.createElement(b.Fragment,null,b.createElement(x,{level:w[n]||u.NOT_SPECIFIED,showUnprioritized:!0}),\" \",e)},[w]),M=h(function(e,n){return b.createElement(a,r({ref:n},e,{maxHeight:200}))});return L?b.createElement(s,null,b.createElement(d,null,t),b.createElement(m,null,b.createElement(p,{value:void 0===n?\"\":n,onChange:C,options:O,renderOptions:M,renderSelected:function(e){var n=e.label,t=e.value;return b.createElement(c,{flexGrow:\"1\"},H(n,t))},renderItem:function(e){var n=e.label,t=e.value,l=i(e,I);return b.createElement(f,r({},l,{label:H(n,t)}))}}))):null};t.exportDefault(P)}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/additionalForms/PrioritiesSelect.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatPriority, Serialized } from '@rocket.chat/core-typings';\\nimport { LivechatPriorityWeight } from '@rocket.chat/core-typings';\\nimport type { SelectOption } from '@rocket.chat/fuselage';\\nimport { Options, Box, Option, Field, FieldLabel, FieldRow, SelectLegacy } from '@rocket.chat/fuselage';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport type { ComponentProps } from 'react';\\nimport React, { useCallback, forwardRef, useMemo, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useHasLicenseModule } from '../../hooks/useHasLicenseModule';\\nimport { PriorityIcon } from '../priorities/PriorityIcon';\\n\\ntype PrioritiesSelectProps = {\\n\\tvalue: string;\\n\\tlabel: string;\\n\\toptions: Serialized<ILivechatPriority[]>;\\n\\tonChange: (value: string) => void;\\n};\\n\\nexport const PrioritiesSelect = ({ value = '', label, options, onChange }: PrioritiesSelectProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\\n\\tconst [sorting] = useState<Record<string, LivechatPriorityWeight>>({});\\n\\n\\tconst formattedOptions = useMemo<SelectOption[]>(() => {\\n\\t\\tconst opts: SelectOption[] = options?.map(({ dirty, name, i18n, _id, sortItem }) => {\\n\\t\\t\\tconst label = dirty && name ? name : t(i18n as TranslationKey);\\n\\t\\t\\tsorting[_id] = sortItem;\\n\\t\\t\\treturn [_id, label];\\n\\t\\t});\\n\\t\\treturn [['', t('Unprioritized')], ...opts];\\n\\t}, [options, sorting, t]);\\n\\n\\tconst renderOption = useCallback(\\n\\t\\t(label: string, value: string) => {\\n\\t\\t\\treturn (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<PriorityIcon level={sorting[value] || LivechatPriorityWeight.NOT_SPECIFIED} showUnprioritized /> {label}\\n\\t\\t\\t\\t</>\\n\\t\\t\\t);\\n\\t\\t},\\n\\t\\t[sorting],\\n\\t);\\n\\n\\t// eslint-disable-next-line react/no-multi-comp\\n\\tconst renderOptions = forwardRef<HTMLElement, ComponentProps<typeof Options>>(function OptionsWrapper(props, ref) {\\n\\t\\treturn <Options ref={ref} {...props} maxHeight={200} />;\\n\\t});\\n\\n\\tif (!hasLicense) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<Field>\\n\\t\\t\\t<FieldLabel>{label}</FieldLabel>\\n\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t<SelectLegacy\\n\\t\\t\\t\\t\\tvalue={value}\\n\\t\\t\\t\\t\\tonChange={onChange}\\n\\t\\t\\t\\t\\toptions={formattedOptions}\\n\\t\\t\\t\\t\\trenderOptions={renderOptions}\\n\\t\\t\\t\\t\\trenderSelected={({ label, value }) => <Box flexGrow='1'>{renderOption(label, value)}</Box>}\\n\\t\\t\\t\\t\\trenderItem={({ label, value, ...props }) => <Option {...props} label={renderOption(label, value)} />}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t</FieldRow>\\n\\t\\t</Field>\\n\\t);\\n};\\n\\nexport default PrioritiesSelect;\\n\",null],\"names\":[\"_objectWithoutProperties\",\"_extends\",\"_toConsumableArray\",\"_slicedToArray\",\"LivechatPriorityWeight\",\"Options\",\"Box\",\"Option\",\"Field\",\"FieldLabel\",\"FieldRow\",\"SelectLegacy\",\"React\",\"useCallback\",\"forwardRef\",\"useMemo\",\"useState\",\"useTranslation\",\"useHasLicenseModule\",\"PriorityIcon\",\"module\",\"link\",\"default\",\"v\",\"export\",\"PrioritiesSelect\",\"_ref\",\"_ref$value\",\"value\",\"label\",\"options\",\"onChange\",\"t\",\"_useTranslation\",\"hasLicense\",\"_useState\",\"sorting\",\"_useState2\",\"formattedOptions\",\"opts\",\"map\",\"_ref2\",\"dirty\",\"name\",\"i18n\",\"_id\",\"sortItem\",\"concat\",\"renderOption\",\"createElement\",\"Fragment\",\"level\",\"NOT_SPECIFIED\",\"showUnprioritized\",\"renderOptions\",\"props\",\"ref\",\"maxHeight\",\"renderSelected\",\"_ref3\",\"flexGrow\",\"renderItem\",\"_ref4\",\"_excluded\",\"exportDefault\"],\"mappings\":\"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\"}"}