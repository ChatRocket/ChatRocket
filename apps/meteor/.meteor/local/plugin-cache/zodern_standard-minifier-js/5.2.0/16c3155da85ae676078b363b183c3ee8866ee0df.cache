{"code":"function module(n,t,e){e.export({useUserBanners:function(){return a}}),e.link(\"@rocket.chat/ui-contexts\",{useTranslation:function(n){i=n},useUser:function(n){r=n}},0),e.link(\"react\",{useEffect:function(n){s=n}},1),e.link(\"../../../lib/banners\",{\"*\":function(n){o=n}},2),e.link(\"./useDismissUserBannerMutation\",{useDismissUserBannerMutation:function(n){u=n}},3);var i,r,s,o,u,a=function(){var n=r(),t=i(),e=u().mutate;s(function(){if(null!=n&&n.banners&&0!==Object.keys(n.banners).length){var i=Object.values(n.banners).filter(function(n){return!0!==n.read}).sort(function(n,t){return t.priority-n.priority})[0];i&&o.open({id:i.id,title:t.has(i.title)?t(i.title):i.title,text:t.has(i.text)?t(i.text,i.textArguments):i.text,modifiers:i.modifiers,action:function(){i.link&&window.open(i.link,\"_system\")},onClose:function(){e({id:i.id})}})}},[e,t,null==n?void 0:n.banners])}}","map":"{\"version\":3,\"sources\":[\"client/views/banners/hooks/useUserBanners.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useTranslation, useUser } from '@rocket.chat/ui-contexts';\\nimport { useEffect } from 'react';\\n\\nimport * as banners from '../../../lib/banners';\\nimport { useDismissUserBannerMutation } from './useDismissUserBannerMutation';\\n\\nexport const useUserBanners = () => {\\n\\tconst user = useUser();\\n\\n\\tconst t = useTranslation();\\n\\tconst { mutate: dismissUserBanner } = useDismissUserBannerMutation();\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!user?.banners || Object.keys(user.banners).length === 0) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst firstBanner = Object.values(user.banners)\\n\\t\\t\\t.filter((b) => b.read !== true)\\n\\t\\t\\t.sort((a, b) => b.priority - a.priority)[0];\\n\\n\\t\\tif (!firstBanner) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tbanners.open({\\n\\t\\t\\tid: firstBanner.id,\\n\\t\\t\\ttitle: t.has(firstBanner.title) ? t(firstBanner.title) : firstBanner.title,\\n\\t\\t\\ttext: t.has(firstBanner.text) ? t(firstBanner.text, firstBanner.textArguments) : firstBanner.text,\\n\\t\\t\\tmodifiers: firstBanner.modifiers,\\n\\t\\t\\taction() {\\n\\t\\t\\t\\tif (firstBanner.link) {\\n\\t\\t\\t\\t\\twindow.open(firstBanner.link, '_system');\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\tonClose() {\\n\\t\\t\\t\\tdismissUserBanner({ id: firstBanner.id });\\n\\t\\t\\t},\\n\\t\\t});\\n\\t}, [dismissUserBanner, t, user?.banners]);\\n};\\n\",null],\"names\":[\"module\",\"export\",\"useUserBanners\",\"link\",\"useTranslation\",\"v\",\"useUser\",\"useEffect\",\"banners\",\"useDismissUserBannerMutation\",\"user\",\"t\",\"dismissUserBanner\",\"_useDismissUserBanner\",\"mutate\",\"Object\",\"keys\",\"length\",\"firstBanner\",\"values\",\"filter\",\"b\",\"read\",\"sort\",\"a\",\"priority\",\"open\",\"id\",\"title\",\"has\",\"text\",\"textArguments\",\"modifiers\",\"action\",\"window\",\"onClose\"],\"mappings\":\"uBAAAA,EAAOC,MAAE,CAAA,CAAAC,eAAgB,WAAe,OAAAA,CAAA,CAAA,GAA2BF,EAAAG,IAAA,CAAA,2BAAA,CAAAC,eAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,EAAAC,QAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,QAAA,CAAAI,UAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,uBAAA,CAAA,IAAA,SAAAE,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,iCAAA,CAAAM,6BAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAM5D,IAN4DD,EAAAE,EAAAC,EAAAC,EAAAC,EAMtDP,EAAiB,WAC7B,IAAMQ,EAAOJ,IAEPK,EAAIP,IACMQ,EAAiBC,AAAKJ,IAA9BK,MAAM,CAEdP,EAAU,WACT,GAAI,MAACG,GAAAA,EAAMF,OAAO,EAAIO,AAAqC,IAArCA,OAAOC,IAAI,CAACN,EAAKF,OAAO,EAAES,MAAM,EAItD,IAAMC,EAAcH,OAAOI,MAAM,CAACT,EAAKF,OAAO,EAC5CY,MAAM,CAAC,SAACC,CAAC,EAAA,MAAKA,AAAW,CAAA,IAAXA,EAAEC,IAAI,AAAS,GAC7BC,IAAI,CAAC,SAACC,CAAC,CAAEH,CAAC,EAAA,OAAKA,EAAEI,QAAQ,CAAGD,EAAEC,QAAQ,EAAC,CAAC,EAAE,CAEvCP,GAILV,EAAQkB,IAAI,CAAC,CACZC,GAAIT,EAAYS,EAAE,CAClBC,MAAOjB,EAAEkB,GAAG,CAACX,EAAYU,KAAK,EAAIjB,EAAEO,EAAYU,KAAK,EAAIV,EAAYU,KAAK,CAC1EE,KAAMnB,EAAEkB,GAAG,CAACX,EAAYY,IAAI,EAAInB,EAAEO,EAAYY,IAAI,CAAEZ,EAAYa,aAAa,EAAIb,EAAYY,IAAI,CACjGE,UAAWd,EAAYc,SAAS,CAChCC,OAAM,WACDf,EAAYf,IAAI,EACnB+B,OAAOR,IAAI,CAACR,EAAYf,IAAI,CAAE,UAEhC,EACAgC,QAAO,WACNvB,EAAkB,CAAEe,GAAIT,EAAYS,EAAAA,AAAE,EACvC,IAEF,EAAG,CAACf,EAAmBD,EAAGD,MAAAA,EAAI,KAAA,EAAJA,EAAMF,OAAO,CAAC,CACzC\"}"}