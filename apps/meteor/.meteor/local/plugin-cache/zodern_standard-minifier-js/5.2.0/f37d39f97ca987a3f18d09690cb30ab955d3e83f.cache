{"code":"function module(e,t,n){var a,r,o,l,i,s,c,u,f,p,d;n.link(\"@babel/runtime/helpers/taggedTemplateLiteralLoose\",{default:function(e){r=e}},0),n.link(\"@babel/runtime/regenerator\",{default:function(e){o=e}},1),n.link(\"@babel/runtime/helpers/asyncIterator\",{default:function(e){l=e}},2),n.link(\"@rocket.chat/css-in-js\",{css:function(e){i=e}},0),n.link(\"@rocket.chat/fuselage\",{Box:function(e){s=e}},1),n.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){c=e}},2),n.link(\"react\",{default:function(e){u=e},memo:function(e){f=e}},3),n.link(\"react-i18next\",{useTranslation:function(e){p=e}},4),n.link(\"../../../hooks/useFormatDateAndTime\",{useFormatDateAndTime:function(e){d=e}},5),n.exportDefault(f(function(e){var t=e.enabled,f=e.reason,m=e.onFileDrop,b=e.visible,x=e.onDismiss,k=p().t,v=c(function(e){e.stopPropagation(),null==x||x()}),g=c(function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect=[\"move\",\"linkMove\"].includes(e.dataTransfer.effectAllowed)?\"move\":\"copy\"}),h=d(),y=c(function(e){var t,a,r,i,s,c,u,f,p,d,b,k,v;return o.async(function(g){for(;;)switch(g.prev=g.next){case 0:if(e.stopPropagation(),null==x||x(),e.preventDefault(),t=Array.from(e.dataTransfer.files),!(e.dataTransfer.types.includes(\"text/uri-list\")&&e.dataTransfer.types.includes(\"text/html\"))){g.next=51;break}a=document.createRange().createContextualFragment(e.dataTransfer.getData(\"text/html\")),r=!1,i=!1,g.prev=8,c=l(Array.from(a.querySelectorAll(\"img\")));case 10:return g.next=12,o.awrap(c.next());case 12:if(!(r=!(u=g.sent).done)){g.next=35;break}return f=u.value.src,g.prev=14,g.next=17,o.awrap(fetch(f));case 17:return p=g.sent,g.next=20,o.awrap(p.blob());case 20:return d=g.sent,g.next=23,o.awrap(n.dynamicImport(\"../../../../app/utils/lib/mimeTypes\"));case 23:b=g.sent.mime.extension(d.type),k=\"File - \"+h(new Date)+\".\"+b,v=new File([d],k,{type:d.type}),t.push(v),g.next=32;break;case 29:g.prev=29,g.t0=g.catch(14),console.warn(g.t0);case 32:r=!1,g.next=10;break;case 35:g.next=41;break;case 37:g.prev=37,g.t1=g.catch(8),i=!0,s=g.t1;case 41:if(g.prev=41,g.prev=42,!(r&&null!=c.return)){g.next=46;break}return g.next=46,o.awrap(c.return());case 46:if(g.prev=46,!i){g.next=49;break}throw s;case 49:return g.finish(46);case 50:return g.finish(41);case 51:null==m||m(t);case 52:case\"end\":return g.stop()}},null,null,[[8,37,41,51],[14,29],[42,,46,50]],Promise)});return void 0===b||b?u.createElement(s,{role:\"dialog\",\"data-qa\":\"DropTargetOverlay\",position:\"absolute\",zIndex:1e6,inset:0,display:\"flex\",alignItems:\"center\",justifyContent:\"center\",fontScale:\"hero\",textAlign:\"center\",backgroundColor:\"rgba(255, 255, 255, 0.8)\",borderWidth:4,borderStyle:\"dashed\",borderColor:\"currentColor\",color:t?\"primary\":\"danger\",className:i(a||(a=r([\"\\n\t\t\t\tanimation-name: zoomIn;\\n\t\t\t\tanimation-duration: 0.1s;\\n\t\t\t\"]))),onDragLeave:v,onDragOver:g,onDrop:y},t?k(\"Drop_to_upload_file\"):f):null}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/body/DropTargetOverlay.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { css } from '@rocket.chat/css-in-js';\\nimport { Box } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport type { DragEvent, ReactElement, ReactNode } from 'react';\\nimport React, { memo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useFormatDateAndTime } from '../../../hooks/useFormatDateAndTime';\\n\\ntype DropTargetOverlayProps = {\\n\\tenabled: boolean;\\n\\treason?: ReactNode;\\n\\tonFileDrop?: (files: File[]) => void;\\n\\tvisible?: boolean;\\n\\tonDismiss?: () => void;\\n};\\n\\nfunction DropTargetOverlay({ enabled, reason, onFileDrop, visible = true, onDismiss }: DropTargetOverlayProps): ReactElement | null {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst handleDragLeave = useMutableCallback((event: DragEvent) => {\\n\\t\\tevent.stopPropagation();\\n\\t\\tonDismiss?.();\\n\\t});\\n\\n\\tconst handleDragOver = useMutableCallback((event: DragEvent) => {\\n\\t\\tevent.stopPropagation();\\n\\n\\t\\tevent.preventDefault();\\n\\t\\tevent.dataTransfer.dropEffect = ['move', 'linkMove'].includes(event.dataTransfer.effectAllowed) ? 'move' : 'copy';\\n\\t});\\n\\n\\tconst formatDateAndTime = useFormatDateAndTime();\\n\\n\\tconst handleDrop = useMutableCallback(async (event: DragEvent) => {\\n\\t\\tevent.stopPropagation();\\n\\t\\tonDismiss?.();\\n\\n\\t\\tevent.preventDefault();\\n\\n\\t\\tconst files = Array.from(event.dataTransfer.files);\\n\\n\\t\\tif (event.dataTransfer.types.includes('text/uri-list') && event.dataTransfer.types.includes('text/html')) {\\n\\t\\t\\tconst fragment = document.createRange().createContextualFragment(event.dataTransfer.getData('text/html'));\\n\\t\\t\\tfor await (const { src } of Array.from(fragment.querySelectorAll('img'))) {\\n\\t\\t\\t\\ttry {\\n\\t\\t\\t\\t\\tconst response = await fetch(src);\\n\\t\\t\\t\\t\\tconst data = await response.blob();\\n\\t\\t\\t\\t\\tconst extension = (await import('../../../../app/utils/lib/mimeTypes')).mime.extension(data.type);\\n\\t\\t\\t\\t\\tconst filename = `File - ${formatDateAndTime(new Date())}.${extension}`;\\n\\t\\t\\t\\t\\tconst file = new File([data], filename, { type: data.type });\\n\\t\\t\\t\\t\\tfiles.push(file);\\n\\t\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\t\\tconsole.warn(error);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tonFileDrop?.(files);\\n\\t});\\n\\n\\tif (!visible) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<Box\\n\\t\\t\\trole='dialog'\\n\\t\\t\\tdata-qa='DropTargetOverlay'\\n\\t\\t\\tposition='absolute'\\n\\t\\t\\tzIndex={1_000_000}\\n\\t\\t\\tinset={0}\\n\\t\\t\\tdisplay='flex'\\n\\t\\t\\talignItems='center'\\n\\t\\t\\tjustifyContent='center'\\n\\t\\t\\tfontScale='hero'\\n\\t\\t\\ttextAlign='center'\\n\\t\\t\\tbackgroundColor='rgba(255, 255, 255, 0.8)'\\n\\t\\t\\tborderWidth={4}\\n\\t\\t\\tborderStyle='dashed'\\n\\t\\t\\tborderColor='currentColor'\\n\\t\\t\\tcolor={enabled ? 'primary' : 'danger'}\\n\\t\\t\\tclassName={css`\\n\\t\\t\\t\\tanimation-name: zoomIn;\\n\\t\\t\\t\\tanimation-duration: 0.1s;\\n\\t\\t\\t`}\\n\\t\\t\\tonDragLeave={handleDragLeave}\\n\\t\\t\\tonDragOver={handleDragOver}\\n\\t\\t\\tonDrop={handleDrop}\\n\\t\\t>\\n\\t\\t\\t{enabled ? t('Drop_to_upload_file') : reason}\\n\\t\\t</Box>\\n\\t);\\n}\\n\\nexport default memo(DropTargetOverlay);\\n\",null],\"names\":[\"_taggedTemplateLiteralLoose\",\"_regeneratorRuntime\",\"_asyncIterator\",\"css\",\"Box\",\"useMutableCallback\",\"React\",\"memo\",\"useTranslation\",\"useFormatDateAndTime\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"enabled\",\"reason\",\"onFileDrop\",\"_ref$visible\",\"visible\",\"onDismiss\",\"t\",\"_useTranslation\",\"handleDragLeave\",\"event\",\"stopPropagation\",\"handleDragOver\",\"preventDefault\",\"dataTransfer\",\"dropEffect\",\"includes\",\"effectAllowed\",\"formatDateAndTime\",\"handleDrop\",\"files\",\"fragment\",\"_iteratorAbruptCompletion\",\"_didIteratorError\",\"_iteratorError\",\"_iterator\",\"_step\",\"src\",\"response\",\"data\",\"extension\",\"filename\",\"file\",\"async\",\"_context\",\"prev\",\"next\",\"Array\",\"from\",\"types\",\"document\",\"createRange\",\"createContextualFragment\",\"getData\",\"querySelectorAll\",\"awrap\",\"sent\",\"done\",\"value\",\"fetch\",\"blob\",\"dynamicImport\",\"mime\",\"type\",\"Date\",\"File\",\"push\",\"t0\",\"console\",\"warn\",\"t1\",\"return\",\"finish\",\"stop\",\"Promise\",\"createElement\",\"role\",\"position\",\"zIndex\",\"inset\",\"display\",\"alignItems\",\"justifyContent\",\"fontScale\",\"textAlign\",\"backgroundColor\",\"borderWidth\",\"borderStyle\",\"borderColor\",\"color\",\"className\",\"_templateObject\",\"onDragLeave\",\"onDragOver\",\"onDrop\"],\"mappings\":\"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\"}"}