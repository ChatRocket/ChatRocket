{"code":"function module(e,t,l){let n,a,r,m,i,c,o,s,u,d,E,p,g;l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),l.link(\"@rocket.chat/fuselage\",{CheckBox(e){a=e},Table(e){r=e},Tag(e){m=e},Pagination(e){i=e},TableHead(e){c=e},TableRow(e){o=e},TableCell(e){s=e},TableBody(e){u=e}},0),l.link(\"react\",{default(e){d=e},useState(e){E=e},useCallback(e){p=e}},1),l.link(\"react-i18next\",{useTranslation(e){g=e}},2),l.exportDefault(e=>{let{usersCount:t,users:l,setUsers:h}=e,{t:_}=g(),[b,k]=E(0),[f,P]=E(25),T=p(e=>{let{count:t,current:l,itemsPerPage:n}=e;return _(\"Showing_results_of\",{postProcess:\"sprintf\",sprintf:[l+1,Math.min(l+n,t),t]})},[_]),C=p(()=>_(\"Items_per_page:\"),[_]);return d.createElement(d.Fragment,null,d.createElement(r,null,d.createElement(c,null,d.createElement(o,null,d.createElement(s,{width:\"x36\"},d.createElement(a,{checked:t>0,indeterminate:t>0&&t!==l.length,onChange:()=>{h(e=>{let l=e.some(e=>{let{is_deleted:t,do_import:l}=e;return t&&l});return 0===t?e.map(e=>n(n({},e),{},{do_import:!0})):l?e.map(e=>e.is_deleted?n(n({},e),{},{do_import:!1}):e):e.map(e=>n(n({},e),{},{do_import:!1}))})}})),d.createElement(s,{is:\"th\"},_(\"Username\")),d.createElement(s,{is:\"th\"},_(\"Email\")),d.createElement(s,{is:\"th\"}))),d.createElement(u,null,l.slice(b,b+f).map(e=>d.createElement(o,{key:e.user_id},d.createElement(s,{width:\"x36\"},d.createElement(a,{checked:e.do_import,onChange:t=>{let{checked:l}=t.currentTarget;h(t=>t.map(t=>t===e?n(n({},t),{},{do_import:l}):t))}})),d.createElement(s,null,e.username),d.createElement(s,null,e.email),d.createElement(s,{align:\"end\"},e.is_deleted&&d.createElement(m,{variant:\"danger\"},_(\"Deleted\"))))))),d.createElement(i,{current:b,itemsPerPage:f,count:l.length||0,onSetItemsPerPage:P,onSetCurrent:k,itemsPerPageLabel:C,showingResultsLabel:T}))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/import/PrepareUsers.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { CheckBox, Table, Tag, Pagination, TableHead, TableRow, TableCell, TableBody } from '@rocket.chat/fuselage';\\nimport type { Dispatch, SetStateAction, ChangeEvent } from 'react';\\nimport React, { useState, useCallback } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport type { UserDescriptor } from './UserDescriptor';\\n\\ntype PrepareUsersProps = {\\n\\tusersCount: number;\\n\\tusers: UserDescriptor[];\\n\\tsetUsers: Dispatch<SetStateAction<UserDescriptor[]>>;\\n};\\n\\n// TODO: review inner logic\\nconst PrepareUsers = ({ usersCount, users, setUsers }: PrepareUsersProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst [current, setCurrent] = useState(0);\\n\\tconst [itemsPerPage, setItemsPerPage] = useState<25 | 50 | 100>(25);\\n\\tconst showingResultsLabel = useCallback(\\n\\t\\t({ count, current, itemsPerPage }) =>\\n\\t\\t\\tt('Showing_results_of', { postProcess: 'sprintf', sprintf: [current + 1, Math.min(current + itemsPerPage, count), count] }),\\n\\t\\t[t],\\n\\t);\\n\\tconst itemsPerPageLabel = useCallback(() => t('Items_per_page:'), [t]);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<Table>\\n\\t\\t\\t\\t<TableHead>\\n\\t\\t\\t\\t\\t<TableRow>\\n\\t\\t\\t\\t\\t\\t<TableCell width='x36'>\\n\\t\\t\\t\\t\\t\\t\\t<CheckBox\\n\\t\\t\\t\\t\\t\\t\\t\\tchecked={usersCount > 0}\\n\\t\\t\\t\\t\\t\\t\\t\\tindeterminate={usersCount > 0 && usersCount !== users.length}\\n\\t\\t\\t\\t\\t\\t\\t\\tonChange={(): void => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsetUsers((users) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst hasCheckedDeletedUsers = users.some(({ is_deleted, do_import }) => is_deleted && do_import);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst isChecking = usersCount === 0;\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif (isChecking) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn users.map((user) => ({ ...user, do_import: true }));\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif (hasCheckedDeletedUsers) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn users.map((user) => (user.is_deleted ? { ...user, do_import: false } : user));\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn users.map((user) => ({ ...user, do_import: false }));\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</TableCell>\\n\\t\\t\\t\\t\\t\\t<TableCell is='th'>{t('Username')}</TableCell>\\n\\t\\t\\t\\t\\t\\t<TableCell is='th'>{t('Email')}</TableCell>\\n\\t\\t\\t\\t\\t\\t<TableCell is='th'></TableCell>\\n\\t\\t\\t\\t\\t</TableRow>\\n\\t\\t\\t\\t</TableHead>\\n\\t\\t\\t\\t<TableBody>\\n\\t\\t\\t\\t\\t{users.slice(current, current + itemsPerPage).map((user) => (\\n\\t\\t\\t\\t\\t\\t<TableRow key={user.user_id}>\\n\\t\\t\\t\\t\\t\\t\\t<TableCell width='x36'>\\n\\t\\t\\t\\t\\t\\t\\t\\t<CheckBox\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tchecked={user.do_import}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tonChange={(event: ChangeEvent<HTMLInputElement>): void => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst { checked } = event.currentTarget;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tsetUsers((users) => users.map((_user) => (_user === user ? { ..._user, do_import: checked } : _user)));\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t</TableCell>\\n\\t\\t\\t\\t\\t\\t\\t<TableCell>{user.username}</TableCell>\\n\\t\\t\\t\\t\\t\\t\\t<TableCell>{user.email}</TableCell>\\n\\t\\t\\t\\t\\t\\t\\t<TableCell align='end'>{user.is_deleted && <Tag variant='danger'>{t('Deleted')}</Tag>}</TableCell>\\n\\t\\t\\t\\t\\t\\t</TableRow>\\n\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t</TableBody>\\n\\t\\t\\t</Table>\\n\\t\\t\\t<Pagination\\n\\t\\t\\t\\tcurrent={current}\\n\\t\\t\\t\\titemsPerPage={itemsPerPage}\\n\\t\\t\\t\\tcount={users.length || 0}\\n\\t\\t\\t\\tonSetItemsPerPage={setItemsPerPage}\\n\\t\\t\\t\\tonSetCurrent={setCurrent}\\n\\t\\t\\t\\titemsPerPageLabel={itemsPerPageLabel}\\n\\t\\t\\t\\tshowingResultsLabel={showingResultsLabel}\\n\\t\\t\\t/>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default PrepareUsers;\\n\",null],\"names\":[\"_objectSpread\",\"CheckBox\",\"Table\",\"Tag\",\"Pagination\",\"TableHead\",\"TableRow\",\"TableCell\",\"TableBody\",\"React\",\"useState\",\"useCallback\",\"useTranslation\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"usersCount\",\"users\",\"setUsers\",\"t\",\"current\",\"setCurrent\",\"itemsPerPage\",\"setItemsPerPage\",\"showingResultsLabel\",\"_ref2\",\"count\",\"postProcess\",\"sprintf\",\"Math\",\"min\",\"itemsPerPageLabel\",\"createElement\",\"Fragment\",\"width\",\"checked\",\"indeterminate\",\"length\",\"onChange\",\"hasCheckedDeletedUsers\",\"some\",\"_ref3\",\"is_deleted\",\"do_import\",\"map\",\"user\",\"is\",\"slice\",\"key\",\"user_id\",\"event\",\"currentTarget\",\"_user\",\"username\",\"email\",\"align\",\"variant\",\"onSetItemsPerPage\",\"onSetCurrent\"],\"mappings\":\"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\"}"}