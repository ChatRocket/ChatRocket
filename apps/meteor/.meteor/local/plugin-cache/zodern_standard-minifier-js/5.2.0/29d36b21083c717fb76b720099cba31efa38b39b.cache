{"code":"function module(e,n,t){var i,o,l,u,a,r,c,s,f,d,h,m,k,b,p,v,y=[\"label\"];t.link(\"@babel/runtime/helpers/extends\",{default:function(e){i=e}},0),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){o=e}},1),t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){l=e}},2),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){u=e}},3),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){a=e}},4),t.link(\"@rocket.chat/fuselage\",{CheckOption:function(e){r=e},PaginatedMultiSelectFiltered:function(e){c=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue:function(e){s=e}},1),t.link(\"react\",{default:function(e){f=e},memo:function(e){d=e},useMemo:function(e){h=e},useState:function(e){m=e}},2),t.link(\"react-i18next\",{useTranslation:function(e){k=e}},3),t.link(\"../hooks/lists/useRecordList\",{useRecordList:function(e){b=e}},4),t.link(\"../hooks/useAsyncState\",{AsyncStatePhase:function(e){p=e}},5),t.link(\"./Omnichannel/hooks/useDepartmentsList\",{useDepartmentsList:function(e){v=e}},6),t.exportDefault(d(function(e){var n=e.value,t=void 0===n?[]:n,d=e.onlyMyDepartments,S=void 0!==d&&d,A=e.showArchived,D=void 0!==A&&A,w=e.enabled,L=void 0!==w&&w,M=e.onChange,g=k().t,x=m(\"\"),C=a(x,2),E=C[0],I=C[1],O=s(E,500),P=v(h(function(){return u(u({filter:O,onlyMyDepartments:S},D&&{showArchived:!0}),{},{enabled:L})},[O,L,S,D])),R=P.itemsList,T=P.loadMoreItems,j=b(R),F=j.phase,G=j.items,_=j.itemCount,N=h(function(){var e=t.filter(function(e){var n=e.value;return!G.find(function(e){return e.value===n})})||[];return[].concat(l(G),l(e))},[G,t]);return f.createElement(c,{withTitle:!0,value:t,onChange:void 0===M?function(){}:M,filter:E,setFilter:I,options:N,width:\"100%\",flexShrink:0,flexGrow:0,placeholder:g(\"Select_an_option\"),endReached:F===p.LOADING?function(){}:function(e){if(void 0!==e)return T(e,Math.min(50,_))},renderItem:function(e){var n=e.label,l=o(e,y);return f.createElement(r,i({},l,{label:f.createElement(\"span\",{style:{whiteSpace:\"normal\"}},n),selected:t.some(function(e){return e.value===l.value})}))}})}))}","map":"{\"version\":3,\"sources\":[\"client/components/AutoCompleteDepartmentMultiple.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { CheckOption, PaginatedMultiSelectFiltered } from '@rocket.chat/fuselage';\\nimport type { PaginatedMultiSelectOption } from '@rocket.chat/fuselage';\\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\\nimport type { ComponentProps } from 'react';\\nimport React, { memo, useMemo, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useRecordList } from '../hooks/lists/useRecordList';\\nimport { AsyncStatePhase } from '../hooks/useAsyncState';\\nimport { useDepartmentsList } from './Omnichannel/hooks/useDepartmentsList';\\n\\ntype AutoCompleteDepartmentMultipleProps = {\\n\\tvalue?: PaginatedMultiSelectOption[];\\n\\tonChange: (value: PaginatedMultiSelectOption[]) => void;\\n\\tonlyMyDepartments?: boolean;\\n\\tshowArchived?: boolean;\\n\\tenabled?: boolean;\\n} & Omit<ComponentProps<typeof PaginatedMultiSelectFiltered>, 'options'>;\\n\\nconst AutoCompleteDepartmentMultiple = ({\\n\\tvalue = [],\\n\\tonlyMyDepartments = false,\\n\\tshowArchived = false,\\n\\tenabled = false,\\n\\tonChange = () => undefined,\\n}: AutoCompleteDepartmentMultipleProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst [departmentsFilter, setDepartmentsFilter] = useState('');\\n\\n\\tconst debouncedDepartmentsFilter = useDebouncedValue(departmentsFilter, 500);\\n\\n\\tconst { itemsList: departmentsList, loadMoreItems: loadMoreDepartments } = useDepartmentsList(\\n\\t\\tuseMemo(\\n\\t\\t\\t() => ({ filter: debouncedDepartmentsFilter, onlyMyDepartments, ...(showArchived && { showArchived: true }), enabled }),\\n\\t\\t\\t[debouncedDepartmentsFilter, enabled, onlyMyDepartments, showArchived],\\n\\t\\t),\\n\\t);\\n\\n\\tconst { phase: departmentsPhase, items: departmentsItems, itemCount: departmentsTotal } = useRecordList(departmentsList);\\n\\n\\tconst departmentOptions = useMemo(() => {\\n\\t\\tconst pending = value.filter(({ value }) => !departmentsItems.find((dep) => dep.value === value)) || [];\\n\\t\\treturn [...departmentsItems, ...pending];\\n\\t}, [departmentsItems, value]);\\n\\n\\treturn (\\n\\t\\t<PaginatedMultiSelectFiltered\\n\\t\\t\\twithTitle\\n\\t\\t\\tvalue={value}\\n\\t\\t\\tonChange={onChange}\\n\\t\\t\\tfilter={departmentsFilter}\\n\\t\\t\\tsetFilter={setDepartmentsFilter}\\n\\t\\t\\toptions={departmentOptions}\\n\\t\\t\\twidth='100%'\\n\\t\\t\\tflexShrink={0}\\n\\t\\t\\tflexGrow={0}\\n\\t\\t\\tplaceholder={t('Select_an_option')}\\n\\t\\t\\tendReached={\\n\\t\\t\\t\\tdepartmentsPhase === AsyncStatePhase.LOADING\\n\\t\\t\\t\\t\\t? () => undefined\\n\\t\\t\\t\\t\\t: (start?: number) => {\\n\\t\\t\\t\\t\\t\\t\\tif (start === undefined) {\\n\\t\\t\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\treturn loadMoreDepartments(start, Math.min(50, departmentsTotal));\\n\\t\\t\\t\\t\\t  }\\n\\t\\t\\t}\\n\\t\\t\\trenderItem={({ label, ...props }) => (\\n\\t\\t\\t\\t<CheckOption\\n\\t\\t\\t\\t\\t{...props}\\n\\t\\t\\t\\t\\tlabel={<span style={{ whiteSpace: 'normal' }}>{label}</span>}\\n\\t\\t\\t\\t\\tselected={value.some((item) => item.value === props.value)}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(AutoCompleteDepartmentMultiple);\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"_toConsumableArray\",\"_objectSpread\",\"_slicedToArray\",\"CheckOption\",\"PaginatedMultiSelectFiltered\",\"useDebouncedValue\",\"React\",\"memo\",\"useMemo\",\"useState\",\"useTranslation\",\"useRecordList\",\"AsyncStatePhase\",\"useDepartmentsList\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_ref$value\",\"value\",\"_ref$onlyMyDepartment\",\"onlyMyDepartments\",\"_ref$showArchived\",\"showArchived\",\"_ref$enabled\",\"enabled\",\"_ref$onChange\",\"onChange\",\"t\",\"_useTranslation\",\"_useState\",\"_useState2\",\"departmentsFilter\",\"setDepartmentsFilter\",\"debouncedDepartmentsFilter\",\"_useDepartmentsList\",\"filter\",\"departmentsList\",\"itemsList\",\"loadMoreDepartments\",\"loadMoreItems\",\"_useRecordList\",\"departmentsPhase\",\"phase\",\"departmentsItems\",\"items\",\"departmentsTotal\",\"itemCount\",\"departmentOptions\",\"pending\",\"_ref2\",\"find\",\"dep\",\"concat\",\"createElement\",\"withTitle\",\"setFilter\",\"options\",\"width\",\"flexShrink\",\"flexGrow\",\"placeholder\",\"endReached\",\"LOADING\",\"start\",\"undefined\",\"Math\",\"min\",\"renderItem\",\"_ref3\",\"label\",\"props\",\"_excluded\",\"style\",\"whiteSpace\",\"selected\",\"some\",\"item\"],\"mappings\":\"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\"}"}