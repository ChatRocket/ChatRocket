{"code":"function module(e,t,n){var a,l,r,c,m,i,o,u;n.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){a=e}},0),n.link(\"@rocket.chat/core-typings\",{isQuoteAttachment:function(e){l=e},isE2EEMessage:function(e){r=e}},0),n.link(\"@rocket.chat/gazzodown\",{PreviewMarkup:function(e){c=e}},1),n.link(\"react\",{default:function(e){m=e},memo:function(e){i=e}},2),n.link(\"react-i18next\",{useTranslation:function(e){o=e}},3),n.link(\"../../../GazzodownText\",{default:function(e){u=e}},4),n.exportDefault(i(function(e){var t,n=e.message,i=o().t,s=r(n);return t=n.md&&a(n.md),(n.attachments&&Array.isArray(n.attachments)&&n.attachments.length>0&&l(n.attachments[0])&&(null==t||t.shift()),n.attachments&&\"\"===n.msg)?m.createElement(m.Fragment,null,i(\"Message_with_attachment\")):s&&\"done\"!==n.e2e?s&&\"pending\"===n.e2e?m.createElement(m.Fragment,null,i(\"E2E_message_encrypted_placeholder\")):m.createElement(m.Fragment,null,n.msg):t?m.createElement(u,null,m.createElement(c,{tokens:t})):m.createElement(m.Fragment,null,n.msg)}))}","map":"{\"version\":3,\"sources\":[\"client/components/message/variants/threadPreview/ThreadMessagePreviewBody.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { isQuoteAttachment, isE2EEMessage } from '@rocket.chat/core-typings';\\nimport { PreviewMarkup } from '@rocket.chat/gazzodown';\\nimport type { Root } from '@rocket.chat/message-parser';\\nimport type { ReactElement } from 'react';\\nimport React, { memo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport GazzodownText from '../../../GazzodownText';\\n\\ntype ThreadMessagePreviewBodyProps = {\\n\\tmessage: IMessage;\\n};\\n\\nconst ThreadMessagePreviewBody = ({ message }: ThreadMessagePreviewBodyProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst isEncryptedMessage = isE2EEMessage(message);\\n\\n\\tconst getMessage = () => {\\n\\t\\tconst mdTokens: Root | undefined = message.md && [...message.md];\\n\\t\\tif (\\n\\t\\t\\tmessage.attachments &&\\n\\t\\t\\tArray.isArray(message.attachments) &&\\n\\t\\t\\tmessage.attachments.length > 0 &&\\n\\t\\t\\tisQuoteAttachment(message.attachments[0])\\n\\t\\t) {\\n\\t\\t\\tmdTokens?.shift();\\n\\t\\t}\\n\\t\\tif (message.attachments && message.msg === '') {\\n\\t\\t\\treturn <>{t('Message_with_attachment')}</>;\\n\\t\\t}\\n\\t\\tif (!isEncryptedMessage || message.e2e === 'done') {\\n\\t\\t\\treturn mdTokens ? (\\n\\t\\t\\t\\t<GazzodownText>\\n\\t\\t\\t\\t\\t<PreviewMarkup tokens={mdTokens} />\\n\\t\\t\\t\\t</GazzodownText>\\n\\t\\t\\t) : (\\n\\t\\t\\t\\t<>{message.msg}</>\\n\\t\\t\\t);\\n\\t\\t}\\n\\t\\tif (isEncryptedMessage && message.e2e === 'pending') {\\n\\t\\t\\treturn <>{t('E2E_message_encrypted_placeholder')}</>;\\n\\t\\t}\\n\\t\\treturn <>{message.msg}</>;\\n\\t};\\n\\n\\treturn getMessage();\\n};\\n\\nexport default memo(ThreadMessagePreviewBody);\\n\",null],\"names\":[\"_toConsumableArray\",\"isQuoteAttachment\",\"isE2EEMessage\",\"PreviewMarkup\",\"React\",\"memo\",\"useTranslation\",\"GazzodownText\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"mdTokens\",\"message\",\"t\",\"_useTranslation\",\"isEncryptedMessage\",\"md\",\"attachments\",\"Array\",\"isArray\",\"length\",\"shift\",\"msg\",\"createElement\",\"Fragment\",\"e2e\",\"tokens\"],\"mappings\":\"uBAcA,IAbAA,EAAAC,EAASC,EAAoEC,EAAAC,EAAAC,EAAAC,EAAAC,EAApEC,EAAmBC,IAAA,CAAA,2CAAiD,CAAAC,QAAA,SAAAC,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAjDH,EAAeC,IAAA,CAAA,4BAAiC,CAACR,kBAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,cAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yBAAA,CAAAN,cAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAP,EAAAO,CAAA,EAAAN,KAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAH,eAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yBAAA,CAAA,QAAA,SAAAE,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAA7EH,EAAOI,aAAE,CAgDMP,EAnCkB,SAAAQ,CAAA,EAA6D,IAKtFC,EAL4BC,EAAOF,EAAPE,OAAO,CAClCC,EAACC,AAAKX,IAANU,CAAC,CACHE,EAAqBhB,EAAca,GA8BzC,OA3BOD,EAA6BC,EAAQI,EAAE,EAAAnB,EAAQe,EAAQI,EAAE,EAS/D,CAPCJ,EAAQK,WAAW,EACnBC,MAAMC,OAAO,CAACP,EAAQK,WAAW,GACjCL,EAAQK,WAAW,CAACG,MAAM,CAAG,GAC7BtB,EAAkBc,EAAQK,WAAW,CAAC,EAAE,GAExCN,CAAAA,MAAAA,GAAAA,EAAUU,KAAK,EAAA,EAEZT,EAAQK,WAAW,EAAIL,AAAgB,KAAhBA,EAAQU,GAAG,EAC9BrB,EAAAsB,aAAA,CAAAtB,EAAAuB,QAAA,CAAA,KAAGX,EAAE,4BAET,AAACE,GAAsBH,AAAgB,SAAhBA,EAAQa,GAAG,CASlCV,GAAsBH,AAAgB,YAAhBA,EAAQa,GAAG,CAC7BxB,EAAAsB,aAAA,CAAAtB,EAAAuB,QAAA,CAAA,KAAGX,EAAE,sCAENZ,EAAAsB,aAAA,CAAAtB,EAAAuB,QAAA,CAAA,KAAGZ,EAAQU,GAAI,EAXdX,EACNV,EAAAsB,aAAA,CAACnB,EAAa,KACbH,EAAAsB,aAAA,CAACvB,EAAa,CAAC0B,OAAQf,CAAS,IAGjCV,EAAAsB,aAAA,CAAAtB,EAAAuB,QAAA,CAAA,KAAGZ,EAAQU,GAAI,CAUnB\"}"}