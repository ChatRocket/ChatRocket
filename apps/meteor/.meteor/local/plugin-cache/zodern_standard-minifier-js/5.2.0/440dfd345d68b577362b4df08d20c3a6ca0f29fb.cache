{"code":"function module(e,t,n){n.link(\"@babel/runtime/helpers/typeof\",{default:function(e){r=e}},0),n.link(\"@rocket.chat/fuselage-toastbar\",{ToastBarProvider:function(e){a=e},useToastBarDispatch:function(e){i=e}},0),n.link(\"@rocket.chat/ui-contexts\",{ToastMessagesContext:function(e){o=e}},1),n.link(\"react\",{default:function(e){s=e},useEffect:function(e){c=e}},2),n.link(\"../lib/errorHandling\",{getErrorMessage:function(e){u=e}},3),n.link(\"../lib/toast\",{dispatchToastMessage:function(e){l=e},subscribeToToastMessages:function(e){f=e}},4);var r,a,i,o,s,c,u,l,f,d={dispatch:l},g=function(e){var t=e.children,n=i();return c(function(){return f(function(e){var t=e.type,a=e.message,i=e.title;if(\"error\"===t&&\"object\"===r(a)){n({type:t,message:u(a)});return}\"string\"!=typeof a&&a instanceof Error&&(a=\"[\"+a.name+\"] \"+a.message),\"warning\"!==t&&n({type:t,message:(void 0===i?\"\":i)+a})})},[n]),s.createElement(o.Provider,{children:t,value:d})};n.exportDefault(function(e){var t=e.children;return s.createElement(a,null,s.createElement(g,{children:t}))})}","map":"{\"version\":3,\"sources\":[\"client/providers/ToastMessagesProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { ToastBarProvider, useToastBarDispatch } from '@rocket.chat/fuselage-toastbar';\\nimport { ToastMessagesContext } from '@rocket.chat/ui-contexts';\\nimport type { ReactNode } from 'react';\\nimport React, { useEffect } from 'react';\\n\\nimport { getErrorMessage } from '../lib/errorHandling';\\nimport { dispatchToastMessage, subscribeToToastMessages } from '../lib/toast';\\n\\nconst contextValue = {\\n\\tdispatch: dispatchToastMessage,\\n};\\n\\ntype ToastMessageInnerProviderProps = {\\n\\tchildren?: ReactNode;\\n};\\n\\nconst ToastMessageInnerProvider = ({ children }: ToastMessageInnerProviderProps) => {\\n\\tconst dispatchToastBar = useToastBarDispatch();\\n\\n\\tuseEffect(\\n\\t\\t() =>\\n\\t\\t\\tsubscribeToToastMessages(({ type, message, title = '' }) => {\\n\\t\\t\\t\\tif (type === 'error' && typeof message === 'object') {\\n\\t\\t\\t\\t\\tdispatchToastBar({ type, message: getErrorMessage(message) });\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (typeof message !== 'string' && message instanceof Error) {\\n\\t\\t\\t\\t\\tmessage = `[${message.name}] ${message.message}`;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (type === 'warning') {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tdispatchToastBar({ type, message: title + message });\\n\\t\\t\\t}),\\n\\t\\t[dispatchToastBar],\\n\\t);\\n\\n\\treturn <ToastMessagesContext.Provider children={children} value={contextValue} />;\\n};\\n\\ntype ToastMessagesProviderProps = {\\n\\tchildren?: ReactNode;\\n};\\n\\n// eslint-disable-next-line react/no-multi-comp\\nconst ToastMessagesProvider = ({ children }: ToastMessagesProviderProps) => (\\n\\t<ToastBarProvider>\\n\\t\\t<ToastMessageInnerProvider children={children} />\\n\\t</ToastBarProvider>\\n);\\n\\nexport default ToastMessagesProvider;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_typeof\",\"ToastBarProvider\",\"useToastBarDispatch\",\"ToastMessagesContext\",\"React\",\"useEffect\",\"getErrorMessage\",\"dispatchToastMessage\",\"subscribeToToastMessages\",\"contextValue\",\"dispatch\",\"ToastMessageInnerProvider\",\"_ref\",\"children\",\"dispatchToastBar\",\"_ref2\",\"type\",\"message\",\"_ref2$title\",\"title\",\"Error\",\"name\",\"createElement\",\"Provider\",\"value\",\"exportDefault\",\"_ref3\"],\"mappings\":\"uBAASA,EAAAC,IAAA,CAAA,gCAA6C,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAgC,CAAC,EAAA,GAA5DH,EAAqBC,IAAA,CAAA,iCAAsC,CAACI,iBAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,EAAAG,oBAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAM,qBAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAK,EAAAL,CAAA,EAAAM,UAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uBAAA,CAAAS,gBAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,eAAA,CAAAU,qBAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,EAAAS,yBAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,CAAA,EAAA,GAQvF,IARAC,EAAAC,EAASC,EAA8EC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAQjFC,EAAe,CACpBC,SAAUH,GAOLI,EAA4B,SAAAC,CAAA,EAAiD,IAA9CC,EAAQD,EAARC,QAAQ,CACtCC,EAAmBZ,IAuBzB,OArBAG,EACC,WAAA,OACCG,EAAyB,SAAAO,CAAA,EAAkC,IAA/BC,EAAID,EAAJC,IAAI,CAAEC,EAAOF,EAAPE,OAAO,CAAAC,EAAAH,EAAEI,KAAK,CAC/C,GAAIH,AAAS,UAATA,GAAoBhB,AAAmB,WAAnBA,EAAOiB,GAAsB,CACpDH,EAAiB,CAAEE,KAAAA,EAAMC,QAASX,EAAgBW,EAAQ,GAC1D,MACD,CAEuB,UAAnB,OAAOA,GAAwBA,aAAmBG,OACrDH,CAAAA,EAAO,IAAOA,EAAQI,IAAI,CAAA,KAAKJ,EAAQA,OAAS,AAATA,EAG3B,YAATD,GAIJF,EAAiB,CAAEE,KAAAA,EAAMC,QAASE,AAdaD,CAAAA,AAAA,KAAA,IAAAA,EAAG,GAAEA,CAAAA,EAcVD,CAAO,EAClD,EAAE,EACH,CAACH,EAAiB,EAGZV,EAAAkB,aAAA,CAACnB,EAAqBoB,QAAQ,CAAA,CAACV,SAAUA,EAAUW,MAAOf,CAAa,EAC/E,EAzCAb,EAAO6B,aAAE,CAgDqB,SAAAC,CAAA,EAAA,IAAGb,EAAQa,EAARb,QAAQ,CAAA,OACxCT,EAAAkB,aAAA,CAACrB,EAAgB,KAChBG,EAAAkB,aAAA,CAACX,EAAyB,CAACE,SAAUA,CAAS,GAC5B\"}"}