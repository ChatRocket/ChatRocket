{"code":"function module(e,t,l){let a,n,r,s,u,o,c,m,i,d,p,f,E,y,h,k,b,C,_,S,g,T,v,x,F;l.link(\"@babel/runtime/helpers/extends\",{default(e){a=e}},0),l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},1),l.link(\"@rocket.chat/fuselage\",{FieldGroup(e){r=e},Button(e){s=e},ButtonGroup(e){u=e},TextInput(e){o=e},Field(e){c=e},FieldLabel(e){m=e},FieldRow(e){i=e},FieldError(e){d=e},Select(e){p=e},Box(e){f=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){E=e}},1),l.link(\"@rocket.chat/ui-contexts\",{useSetModal(e){y=e},useRoute(e){h=e},useToastMessageDispatch(e){k=e},useTranslation(e){b=e},useEndpoint(e){C=e}},2),l.link(\"react\",{default(e){_=e},useCallback(e){S=e}},3),l.link(\"react-hook-form\",{useForm(e){g=e},Controller(e){T=e}},4),l.link(\"../../../components/Contextualbar\",{ContextualbarScrollableContent(e){v=e},ContextualbarFooter(e){x=e}},5),l.link(\"../../../components/GenericModal\",{default(e){F=e}},6),l.exportDefault(e=>{var t,l;let{onClose:D,onReload:U,status:q}=e,w=b(),{_id:B,name:P,statusType:O}=q||{},R=y(),G=h(\"user-status\"),I=k(),M=E(),{register:N,control:j,handleSubmit:A,formState:{errors:H}}=g({defaultValues:{name:null!==(t=null==q?void 0:q.name)&&void 0!==t?t:\"\",statusType:null!==(l=null==q?void 0:q.statusType)&&void 0!==l?l:\"\"},mode:\"all\"}),L=C(\"POST\",B?\"/v1/custom-user-status.update\":\"/v1/custom-user-status.create\"),V=C(\"POST\",\"/v1/custom-user-status.delete\"),W=S(async e=>{try{await L(n({_id:B,name:P,statusType:O},e)),I({type:\"success\",message:w(\"Custom_User_Status_Updated_Successfully\")}),U(),G.push({})}catch(e){I({type:\"error\",message:e})}},[L,B,P,O,G,I,w,U]),z=S(()=>{let e=()=>{R(null)},t=async()=>{try{await V({customUserStatusId:B||\"\"}),I({type:\"success\",message:w(\"Custom_User_Status_Has_Been_Deleted\")}),U(),G.push({})}catch(e){I({type:\"error\",message:e})}finally{R(null)}};R(()=>_.createElement(F,{variant:\"danger\",onConfirm:t,onCancel:e,onClose:e,confirmText:w(\"Delete\")},w(\"Custom_User_Status_Delete_Warning\")))},[B,G,V,I,U,R,w]),J=[[\"online\",w(\"Online\")],[\"busy\",w(\"Busy\")],[\"away\",w(\"Away\")],[\"offline\",w(\"Offline\")]];return _.createElement(_.Fragment,null,_.createElement(v,null,_.createElement(r,{id:M,is:\"form\",onSubmit:A(W)},_.createElement(c,null,_.createElement(m,null,w(\"Name\")),_.createElement(i,null,_.createElement(o,a({},N(\"name\",{required:w(\"Required_field\",{field:w(\"Name\")})}),{placeholder:w(\"Name\")}))),H.name&&_.createElement(d,null,H.name.message)),_.createElement(c,null,_.createElement(m,null,w(\"Presence\")),_.createElement(i,null,_.createElement(T,{name:\"statusType\",control:j,rules:{required:w(\"Required_field\",{field:w(\"Presence\")})},render:e=>{let{field:t}=e;return _.createElement(p,a({},t,{placeholder:w(\"Presence\"),options:J}))}})),H.statusType&&_.createElement(d,null,H.statusType.message)))),_.createElement(x,null,_.createElement(u,{stretch:!0},_.createElement(s,{onClick:D},w(\"Cancel\")),_.createElement(s,{form:M,primary:!0,type:\"submit\"},w(\"Save\"))),B&&_.createElement(f,{mbs:8},_.createElement(u,{stretch:!0},_.createElement(s,{icon:\"trash\",danger:!0,onClick:z},w(\"Delete\"))))))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/customUserStatus/CustomUserStatusForm.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IUserStatus } from '@rocket.chat/core-typings';\\nimport type { SelectOption } from '@rocket.chat/fuselage';\\nimport { FieldGroup, Button, ButtonGroup, TextInput, Field, FieldLabel, FieldRow, FieldError, Select, Box } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { useSetModal, useRoute, useToastMessageDispatch, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback } from 'react';\\nimport { useForm, Controller } from 'react-hook-form';\\n\\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../components/Contextualbar';\\nimport GenericModal from '../../../components/GenericModal';\\n\\ntype CustomUserStatusFormProps = {\\n\\tonClose: () => void;\\n\\tonReload: () => void;\\n\\tstatus?: IUserStatus;\\n};\\n\\nconst CustomUserStatusForm = ({ onClose, onReload, status }: CustomUserStatusFormProps): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst { _id, name, statusType } = status || {};\\n\\tconst setModal = useSetModal();\\n\\tconst route = useRoute('user-status');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst formId = useUniqueId();\\n\\n\\tconst {\\n\\t\\tregister,\\n\\t\\tcontrol,\\n\\t\\thandleSubmit,\\n\\t\\tformState: { errors },\\n\\t} = useForm({\\n\\t\\tdefaultValues: { name: status?.name ?? '', statusType: status?.statusType ?? '' },\\n\\t\\tmode: 'all',\\n\\t});\\n\\n\\tconst saveStatus = useEndpoint('POST', _id ? '/v1/custom-user-status.update' : '/v1/custom-user-status.create');\\n\\tconst deleteStatus = useEndpoint('POST', '/v1/custom-user-status.delete');\\n\\n\\tconst handleSave = useCallback(\\n\\t\\tasync (data) => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tawait saveStatus({ _id, name, statusType, ...data });\\n\\n\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\ttype: 'success',\\n\\t\\t\\t\\t\\tmessage: t('Custom_User_Status_Updated_Successfully'),\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\tonReload();\\n\\t\\t\\t\\troute.push({});\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[saveStatus, _id, name, statusType, route, dispatchToastMessage, t, onReload],\\n\\t);\\n\\n\\tconst handleDeleteStatus = useCallback(() => {\\n\\t\\tconst handleCancel = (): void => {\\n\\t\\t\\tsetModal(null);\\n\\t\\t};\\n\\n\\t\\tconst handleDelete = async (): Promise<void> => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tawait deleteStatus({ customUserStatusId: _id || '' });\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Custom_User_Status_Has_Been_Deleted') });\\n\\t\\t\\t\\tonReload();\\n\\t\\t\\t\\troute.push({});\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t} finally {\\n\\t\\t\\t\\tsetModal(null);\\n\\t\\t\\t}\\n\\t\\t};\\n\\n\\t\\tsetModal(() => (\\n\\t\\t\\t<GenericModal variant='danger' onConfirm={handleDelete} onCancel={handleCancel} onClose={handleCancel} confirmText={t('Delete')}>\\n\\t\\t\\t\\t{t('Custom_User_Status_Delete_Warning')}\\n\\t\\t\\t</GenericModal>\\n\\t\\t));\\n\\t}, [_id, route, deleteStatus, dispatchToastMessage, onReload, setModal, t]);\\n\\n\\tconst presenceOptions: SelectOption[] = [\\n\\t\\t['online', t('Online')],\\n\\t\\t['busy', t('Busy')],\\n\\t\\t['away', t('Away')],\\n\\t\\t['offline', t('Offline')],\\n\\t];\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<ContextualbarScrollableContent>\\n\\t\\t\\t\\t<FieldGroup id={formId} is='form' onSubmit={handleSubmit(handleSave)}>\\n\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t<FieldLabel>{t('Name')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<TextInput {...register('name', { required: t('Required_field', { field: t('Name') }) })} placeholder={t('Name')} />\\n\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t{errors.name && <FieldError>{errors.name.message}</FieldError>}\\n\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t<FieldLabel>{t('Presence')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\t\\tname='statusType'\\n\\t\\t\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\t\\t\\trules={{ required: t('Required_field', { field: t('Presence') }) }}\\n\\t\\t\\t\\t\\t\\t\\t\\trender={({ field }): ReactElement => <Select {...field} placeholder={t('Presence')} options={presenceOptions} />}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t{errors.statusType && <FieldError>{errors.statusType.message}</FieldError>}\\n\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t</FieldGroup>\\n\\t\\t\\t</ContextualbarScrollableContent>\\n\\t\\t\\t<ContextualbarFooter>\\n\\t\\t\\t\\t<ButtonGroup stretch>\\n\\t\\t\\t\\t\\t<Button onClick={onClose}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button form={formId} primary type='submit'>\\n\\t\\t\\t\\t\\t\\t{t('Save')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t\\t{_id && (\\n\\t\\t\\t\\t\\t<Box mbs={8}>\\n\\t\\t\\t\\t\\t\\t<ButtonGroup stretch>\\n\\t\\t\\t\\t\\t\\t\\t<Button icon='trash' danger onClick={handleDeleteStatus}>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Delete')}\\n\\t\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</ContextualbarFooter>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default CustomUserStatusForm;\\n\",null],\"names\":[\"_extends\",\"_objectSpread\",\"FieldGroup\",\"Button\",\"ButtonGroup\",\"TextInput\",\"Field\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"Select\",\"Box\",\"useUniqueId\",\"useSetModal\",\"useRoute\",\"useToastMessageDispatch\",\"useTranslation\",\"useEndpoint\",\"React\",\"useCallback\",\"useForm\",\"Controller\",\"ContextualbarScrollableContent\",\"ContextualbarFooter\",\"GenericModal\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_status$name\",\"_status$statusType\",\"onClose\",\"onReload\",\"status\",\"t\",\"_id\",\"name\",\"statusType\",\"setModal\",\"route\",\"dispatchToastMessage\",\"formId\",\"register\",\"control\",\"handleSubmit\",\"formState\",\"errors\",\"defaultValues\",\"mode\",\"saveStatus\",\"deleteStatus\",\"handleSave\",\"data\",\"type\",\"message\",\"push\",\"error\",\"handleDeleteStatus\",\"handleCancel\",\"handleDelete\",\"customUserStatusId\",\"createElement\",\"variant\",\"onConfirm\",\"onCancel\",\"confirmText\",\"presenceOptions\",\"Fragment\",\"id\",\"is\",\"onSubmit\",\"required\",\"field\",\"placeholder\",\"rules\",\"render\",\"_ref2\",\"options\",\"stretch\",\"onClick\",\"form\",\"primary\",\"mbs\",\"icon\",\"danger\"],\"mappings\":\"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\"}"}