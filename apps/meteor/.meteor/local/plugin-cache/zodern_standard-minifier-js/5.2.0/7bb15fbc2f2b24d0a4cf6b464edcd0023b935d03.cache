{"code":"function module(e,t,n){var i,s,r,a,o,l,u,c,d;n.link(\"@babel/runtime/regenerator\",{default:function(e){i=e}},0),n.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){s=e}},1),n.link(\"meteor/meteor\",{Meteor:function(e){r=e}},0),n.link(\"../../../app/settings/client\",{settings:function(e){a=e}},1),n.link(\"../../../app/ui-utils/client\",{MessageAction:function(e){o=e}},2),n.link(\"../../../app/utils/client/lib/SDKClient\",{sdk:function(e){l=e}},3),n.link(\"../../lib/queryClient\",{queryClient:function(e){u=e}},4),n.link(\"../../lib/toast\",{dispatchToastMessage:function(e){c=e}},5),n.link(\"../../lib/utils/messageArgs\",{messageArgs:function(e){d=e}},6),r.startup(function(){o.addButton({id:\"unstar-message\",icon:\"star\",label:\"Unstar_Message\",type:\"interaction\",context:[\"starred\",\"message\",\"message-mobile\",\"threads\",\"federated\",\"videoconf\",\"videoconf-threads\"],action:function(e,t){var n,r;return i.async(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=t.message)?d(this).msg:n,e.prev=1,e.next=4,i.awrap(l.call(\"starMessage\",s(s({},r),{},{starred:!1})));case 4:u.invalidateQueries([\"rooms\",r.rid,\"starred-messages\"]),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),c({type:\"error\",message:e.t0});case 10:case\"end\":return e.stop()}},null,this,[[1,7]],Promise)},condition:function(e){var t,n=e.message,i=e.subscription,s=e.user;return!(null==i&&a.get(\"Message_AllowStarring\"))&&!!(null===(t=n.starred)||void 0===t?void 0:t.find(function(e){return e._id===(null==s?void 0:s._id)}))},order:3,group:\"menu\"})})}","map":"{\"version\":3,\"sources\":[\"client/startup/actionButtons/unstarMessage.ts\",\"<anon>\"],\"sourcesContent\":[\"import { Meteor } from 'meteor/meteor';\\n\\nimport { settings } from '../../../app/settings/client';\\nimport { MessageAction } from '../../../app/ui-utils/client';\\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\\nimport { queryClient } from '../../lib/queryClient';\\nimport { dispatchToastMessage } from '../../lib/toast';\\nimport { messageArgs } from '../../lib/utils/messageArgs';\\n\\nMeteor.startup(() => {\\n\\tMessageAction.addButton({\\n\\t\\tid: 'unstar-message',\\n\\t\\ticon: 'star',\\n\\t\\tlabel: 'Unstar_Message',\\n\\t\\ttype: 'interaction',\\n\\t\\tcontext: ['starred', 'message', 'message-mobile', 'threads', 'federated', 'videoconf', 'videoconf-threads'],\\n\\t\\tasync action(_, props) {\\n\\t\\t\\tconst { message = messageArgs(this).msg } = props;\\n\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tawait sdk.call('starMessage', { ...message, starred: false });\\n\\t\\t\\t\\tqueryClient.invalidateQueries(['rooms', message.rid, 'starred-messages']);\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tcondition({ message, subscription, user }) {\\n\\t\\t\\tif (subscription == null && settings.get('Message_AllowStarring')) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn Boolean(message.starred?.find((star: any) => star._id === user?._id));\\n\\t\\t},\\n\\t\\torder: 3,\\n\\t\\tgroup: 'menu',\\n\\t});\\n});\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_objectSpread\",\"Meteor\",\"settings\",\"MessageAction\",\"sdk\",\"queryClient\",\"dispatchToastMessage\",\"messageArgs\",\"module\",\"link\",\"default\",\"v\",\"startup\",\"addButton\",\"id\",\"icon\",\"label\",\"type\",\"context\",\"action\",\"_\",\"props\",\"_props$message\",\"message\",\"async\",\"_context\",\"prev\",\"next\",\"msg\",\"awrap\",\"call\",\"starred\",\"invalidateQueries\",\"rid\",\"t0\",\"stop\",\"Promise\",\"condition\",\"_ref\",\"_message$starred\",\"subscription\",\"user\",\"get\",\"Boolean\",\"find\",\"star\",\"_id\",\"order\",\"group\"],\"mappings\":\"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\"}"}