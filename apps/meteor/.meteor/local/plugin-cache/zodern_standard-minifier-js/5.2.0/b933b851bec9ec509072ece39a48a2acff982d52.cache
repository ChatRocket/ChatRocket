{"code":"function module(e,t,n){let a,o,i,l,r,s,c,u,d,k,g,f,m,E,p,h;n.link(\"@rocket.chat/fuselage\",{Callout(e){a=e},ButtonGroup(e){o=e},Button(e){i=e}},0),n.link(\"@rocket.chat/ui-contexts\",{usePermission(e){l=e}},1),n.link(\"react\",{default(e){r=e},memo(e){s=e},useState(e){c=e}},2),n.link(\"react-i18next\",{useTranslation(e){u=e}},3),n.link(\"../../../components/Page\",{Page(e){d=e},PageHeader(e){k=e},PageScrollableContentWithShadow(e){g=e}},4),n.link(\"../../../components/PageSkeleton\",{default(e){f=e}},5),n.link(\"../../../hooks/useWorkspaceInfo\",{useWorkspaceInfo(e){m=e}},6),n.link(\"../../../lib/download\",{downloadJsonAs(e){E=e}},7),n.link(\"../../notAuthorized/NotAuthorizedPage\",{default(e){p=e}},8),n.link(\"./WorkspacePage\",{default(e){h=e}},9),n.exportDefault(s(()=>{let{t:e}=u(),t=l(\"view-statistics\"),[n,s]=c(!1),[P,w,L]=m({refreshStatistics:n});if(!t)return r.createElement(p,null);if(P.isLoading||w.isLoading||L.isLoading)return r.createElement(f,null);let C=async()=>{s(!0),L.refetch()};return P.isError||w.isError||L.isError?r.createElement(d,null,r.createElement(k,{title:e(\"Workspace\")},r.createElement(o,null,r.createElement(i,{icon:\"reload\",primary:!0,type:\"button\",onClick:C,loading:L.isLoading},e(\"Refresh\")))),r.createElement(g,null,r.createElement(a,{type:\"danger\"},e(\"Error_loading_pages\")))):r.createElement(h,{canViewStatistics:t,serverInfo:P.data,statistics:L.data,statisticsIsLoading:L.isLoading,instances:w.data,onClickRefreshButton:C,onClickDownloadInfo:()=>{E(L.data,\"statistics\")}})}))}","map":"{\"version\":3,\"sources\":[\"client/views/admin/workspace/WorkspaceRoute.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Callout, ButtonGroup, Button } from '@rocket.chat/fuselage';\\nimport { usePermission } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { memo, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { Page, PageHeader, PageScrollableContentWithShadow } from '../../../components/Page';\\nimport PageSkeleton from '../../../components/PageSkeleton';\\nimport { useWorkspaceInfo } from '../../../hooks/useWorkspaceInfo';\\nimport { downloadJsonAs } from '../../../lib/download';\\nimport NotAuthorizedPage from '../../notAuthorized/NotAuthorizedPage';\\nimport WorkspacePage from './WorkspacePage';\\n\\nconst WorkspaceRoute = (): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst canViewStatistics = usePermission('view-statistics');\\n\\n\\tconst [refreshStatistics, setRefreshStatistics] = useState(false);\\n\\tconst [serverInfoQuery, instancesQuery, statisticsQuery] = useWorkspaceInfo({ refreshStatistics });\\n\\n\\tif (!canViewStatistics) {\\n\\t\\treturn <NotAuthorizedPage />;\\n\\t}\\n\\n\\tif (serverInfoQuery.isLoading || instancesQuery.isLoading || statisticsQuery.isLoading) {\\n\\t\\treturn <PageSkeleton />;\\n\\t}\\n\\n\\tconst handleClickRefreshButton = async () => {\\n\\t\\tsetRefreshStatistics(true);\\n\\t\\tstatisticsQuery.refetch();\\n\\t};\\n\\n\\tconst handleClickDownloadInfo = (): void => {\\n\\t\\tdownloadJsonAs(statisticsQuery.data, 'statistics');\\n\\t};\\n\\n\\tif (serverInfoQuery.isError || instancesQuery.isError || statisticsQuery.isError) {\\n\\t\\treturn (\\n\\t\\t\\t<Page>\\n\\t\\t\\t\\t<PageHeader title={t('Workspace')}>\\n\\t\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t\\t<Button icon='reload' primary type='button' onClick={handleClickRefreshButton} loading={statisticsQuery.isLoading}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Refresh')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t\\t</PageHeader>\\n\\t\\t\\t\\t<PageScrollableContentWithShadow>\\n\\t\\t\\t\\t\\t<Callout type='danger'>{t('Error_loading_pages')}</Callout>\\n\\t\\t\\t\\t</PageScrollableContentWithShadow>\\n\\t\\t\\t</Page>\\n\\t\\t);\\n\\t}\\n\\n\\treturn (\\n\\t\\t<WorkspacePage\\n\\t\\t\\tcanViewStatistics={canViewStatistics}\\n\\t\\t\\tserverInfo={serverInfoQuery.data}\\n\\t\\t\\tstatistics={statisticsQuery.data}\\n\\t\\t\\tstatisticsIsLoading={statisticsQuery.isLoading}\\n\\t\\t\\tinstances={instancesQuery.data}\\n\\t\\t\\tonClickRefreshButton={handleClickRefreshButton}\\n\\t\\t\\tonClickDownloadInfo={handleClickDownloadInfo}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(WorkspaceRoute);\\n\",null],\"names\":[\"Callout\",\"ButtonGroup\",\"Button\",\"usePermission\",\"React\",\"memo\",\"useState\",\"useTranslation\",\"Page\",\"PageHeader\",\"PageScrollableContentWithShadow\",\"PageSkeleton\",\"useWorkspaceInfo\",\"downloadJsonAs\",\"NotAuthorizedPage\",\"WorkspacePage\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"WorkspaceRoute\",\"t\",\"canViewStatistics\",\"refreshStatistics\",\"setRefreshStatistics\",\"serverInfoQuery\",\"instancesQuery\",\"statisticsQuery\",\"createElement\",\"isLoading\",\"handleClickRefreshButton\",\"refetch\",\"isError\",\"title\",\"icon\",\"primary\",\"type\",\"onClick\",\"loading\",\"serverInfo\",\"data\",\"statistics\",\"statisticsIsLoading\",\"instances\",\"onClickRefreshButton\",\"onClickDownloadInfo\",\"handleClickDownloadInfo\"],\"mappings\":\"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\"}"}