{"code":"function module(t,n,e){e.link(\"@babel/runtime/regenerator\",{default:function(t){i=t}},0),e.export({useAppsRoomStarActions:function(){return A}}),e.link(\"@rocket.chat/fuselage\",{Box:function(t){o=t}},0),e.link(\"@rocket.chat/ui-client\",{GenericMenu:function(t){r=t},HeaderToolbarAction:function(t){a=t}},1),e.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(t){c=t}},2),e.link(\"react\",{default:function(t){u=t},useMemo:function(t){l=t}},3),e.link(\"react-i18next\",{useTranslation:function(t){s=t}},4),e.link(\"../../../app/ui-message/client/UiKitTriggerTimeoutError\",{UiKitTriggerTimeoutError:function(t){p=t}},5),e.link(\"../../../ee/lib/misc/Utilities\",{Utilities:function(t){f=t}},6),e.link(\"../../uikit/hooks/useUiKitActionManager\",{useUiKitActionManager:function(t){d=t}},7),e.link(\"../../views/room/contexts/RoomContext\",{useRoom:function(t){m=t}},8),e.link(\"../useAppActionButtons\",{useAppActionButtons:function(t){k=t}},9),e.link(\"../useApplyButtonFilters\",{useApplyButtonFilters:function(t){g=t}},10);var i,o,r,a,c,u,l,s,p,f,d,m,k,g,A=function(){var t=k(\"roomAction\"),n=d(),e=g(\"ai\"),A=m(),I=s().t,b=c();return l(function(){if(t.data){var c=t.data.filter(e);if(0!==c.length)return{id:\"ai-actions\",title:\"AI_Actions\",icon:\"stars\",groups:[\"group\",\"channel\",\"live\",\"team\",\"direct\",\"direct_multiple\"],featured:!0,renderToolboxItem:function(t){var e=t.id,l=t.icon,s=t.title,d=t.disabled,m=t.className;return u.createElement(r,{button:u.createElement(a,null),key:e,title:s,disabled:d,items:c.map(function(t){return{id:t.actionId,icon:void 0,title:f.getI18nKeyForApp(t.labelI18n,t.appId),content:u.createElement(o,{is:\"span\"},I(\"\"+f.getI18nKeyForApp(t.labelI18n,t.appId))),variant:t.variant,groups:[\"group\",\"channel\",\"live\",\"team\",\"direct\",\"direct_multiple\"],onClick:function(){n.emitInteraction(t.appId,{type:\"actionButton\",actionId:t.actionId,rid:A._id,payload:{context:t.context}}).catch(function(t){return i.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t instanceof p)){n.next=3;break}return b({type:\"error\",message:I(\"UIKit_Interaction_Timeout\")}),n.abrupt(\"return\");case 3:return n.abrupt(\"return\",t);case 4:case\"end\":return n.stop()}},null,null,null,Promise)})},type:\"apps\"}}),className:m,placement:\"bottom-start\",icon:l})}}}},[n,e,b,t.data,A._id,I])}}","map":"{\"version\":3,\"sources\":[\"client/hooks/roomActions/useAppsRoomStarActions.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box } from '@rocket.chat/fuselage';\\nimport { GenericMenu, HeaderToolbarAction } from '@rocket.chat/ui-client';\\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport React, { useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { UiKitTriggerTimeoutError } from '../../../app/ui-message/client/UiKitTriggerTimeoutError';\\nimport { Utilities } from '../../../ee/lib/misc/Utilities';\\nimport { useUiKitActionManager } from '../../uikit/hooks/useUiKitActionManager';\\nimport { useRoom } from '../../views/room/contexts/RoomContext';\\nimport type { RoomToolboxActionConfig } from '../../views/room/contexts/RoomToolboxContext';\\nimport { useAppActionButtons } from '../useAppActionButtons';\\nimport { useApplyButtonFilters } from '../useApplyButtonFilters';\\n\\nexport const useAppsRoomStarActions = () => {\\n\\tconst result = useAppActionButtons('roomAction');\\n\\tconst actionManager = useUiKitActionManager();\\n\\tconst applyButtonFilters = useApplyButtonFilters('ai');\\n\\tconst room = useRoom();\\n\\tconst { t } = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\treturn useMemo((): RoomToolboxActionConfig | undefined => {\\n\\t\\tif (!result.data) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\tconst filteredActions = result.data.filter(applyButtonFilters);\\n\\n\\t\\tif (filteredActions.length === 0) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\treturn {\\n\\t\\t\\tid: 'ai-actions',\\n\\t\\t\\ttitle: 'AI_Actions',\\n\\t\\t\\ticon: 'stars',\\n\\t\\t\\tgroups: ['group', 'channel', 'live', 'team', 'direct', 'direct_multiple'],\\n\\t\\t\\tfeatured: true,\\n\\t\\t\\trenderToolboxItem: ({ id, icon, title, disabled, className }) => (\\n\\t\\t\\t\\t<GenericMenu\\n\\t\\t\\t\\t\\tbutton={<HeaderToolbarAction />}\\n\\t\\t\\t\\t\\tkey={id}\\n\\t\\t\\t\\t\\ttitle={title}\\n\\t\\t\\t\\t\\tdisabled={disabled}\\n\\t\\t\\t\\t\\titems={filteredActions.map((action) => ({\\n\\t\\t\\t\\t\\t\\tid: action.actionId,\\n\\t\\t\\t\\t\\t\\ticon: undefined,\\n\\t\\t\\t\\t\\t\\ttitle: Utilities.getI18nKeyForApp(action.labelI18n, action.appId),\\n\\t\\t\\t\\t\\t\\tcontent: <Box is='span'>{t(`${Utilities.getI18nKeyForApp(action.labelI18n, action.appId)}`)}</Box>,\\n\\t\\t\\t\\t\\t\\tvariant: action.variant,\\n\\t\\t\\t\\t\\t\\tgroups: ['group', 'channel', 'live', 'team', 'direct', 'direct_multiple'],\\n\\t\\t\\t\\t\\t\\tonClick: () => {\\n\\t\\t\\t\\t\\t\\t\\tvoid actionManager\\n\\t\\t\\t\\t\\t\\t\\t\\t.emitInteraction(action.appId, {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttype: 'actionButton',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tactionId: action.actionId,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\trid: room._id,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tpayload: { context: action.context },\\n\\t\\t\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t\\t\\t.catch(async (reason) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif (reason instanceof UiKitTriggerTimeoutError) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmessage: t('UIKit_Interaction_Timeout'),\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\treturn reason;\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\ttype: 'apps',\\n\\t\\t\\t\\t\\t}))}\\n\\t\\t\\t\\t\\tclassName={className}\\n\\t\\t\\t\\t\\tplacement='bottom-start'\\n\\t\\t\\t\\t\\ticon={icon}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t),\\n\\t\\t};\\n\\t}, [actionManager, applyButtonFilters, dispatchToastMessage, result.data, room._id, t]);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"export\",\"useAppsRoomStarActions\",\"Box\",\"GenericMenu\",\"HeaderToolbarAction\",\"useToastMessageDispatch\",\"React\",\"useMemo\",\"useTranslation\",\"UiKitTriggerTimeoutError\",\"Utilities\",\"useUiKitActionManager\",\"useRoom\",\"useAppActionButtons\",\"useApplyButtonFilters\",\"result\",\"actionManager\",\"applyButtonFilters\",\"room\",\"t\",\"_useTranslation\",\"dispatchToastMessage\",\"data\",\"filteredActions\",\"filter\",\"length\",\"id\",\"title\",\"icon\",\"groups\",\"featured\",\"renderToolboxItem\",\"_ref\",\"disabled\",\"className\",\"createElement\",\"button\",\"key\",\"items\",\"map\",\"action\",\"actionId\",\"undefined\",\"getI18nKeyForApp\",\"labelI18n\",\"appId\",\"content\",\"is\",\"variant\",\"onClick\",\"emitInteraction\",\"type\",\"rid\",\"_id\",\"payload\",\"context\",\"catch\",\"reason\",\"async\",\"_context\",\"prev\",\"next\",\"message\",\"abrupt\",\"stop\",\"Promise\",\"placement\"],\"mappings\":\"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\"}"}