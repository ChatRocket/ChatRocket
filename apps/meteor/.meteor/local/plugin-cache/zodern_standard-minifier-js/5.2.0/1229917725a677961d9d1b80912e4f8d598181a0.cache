{"code":"function module(e,n,t){var a,i,l,o,s,u,r,c,d,f,m,g,v,k,h,x,p,y,M,S,E,b,D;t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){a=e}},0),t.link(\"@rocket.chat/fuselage\",{Box:function(e){i=e},MessageDivider:function(e){l=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useSetting:function(e){o=e},useTranslation:function(e){s=e},useUserPreference:function(e){u=e}},1),t.link(\"react\",{default:function(e){r=e},Fragment:function(e){c=e},memo:function(e){d=e},useState:function(e){f=e}},2),t.link(\"react-virtuoso\",{Virtuoso:function(e){m=e}},3),t.link(\"../../../../../../app/ui-utils/client\",{MessageTypes:function(e){g=e}},4),t.link(\"../../../../../components/Contextualbar\",{ContextualbarEmptyContent:function(e){v=e}},5),t.link(\"../../../../../components/CustomScrollbars\",{VirtuosoScrollbars:function(e){k=e}},6),t.link(\"../../../../../components/message/variants/RoomMessage\",{default:function(e){h=e}},7),t.link(\"../../../../../components/message/variants/SystemMessage\",{default:function(e){x=e}},8),t.link(\"../../../../../hooks/useFormatDate\",{useFormatDate:function(e){p=e}},9),t.link(\"../../../MessageList/MessageListErrorBoundary\",{default:function(e){y=e}},10),t.link(\"../../../MessageList/lib/isMessageNewDay\",{isMessageNewDay:function(e){M=e}},11),t.link(\"../../../MessageList/providers/MessageListProvider\",{default:function(e){S=e}},12),t.link(\"../../../body/LoadingMessagesIndicator\",{default:function(e){E=e}},13),t.link(\"../../../contexts/RoomContext\",{useRoomSubscription:function(e){b=e}},14),t.link(\"../hooks/useMessageSearchQuery\",{useMessageSearchQuery:function(e){D=e}},15),t.exportDefault(d(function(e){var n,t=e.searchText,d=e.globalSearch,C=s(),L=p(),w=null!==(n=o(\"PageSize\"))&&void 0!==n?n:10,T=f(w),_=a(T,2),A=_[0],B=_[1],F=!!u(\"displayAvatars\"),R=b(),U=D({searchText:t,limit:A,globalSearch:d});return r.createElement(i,{display:\"flex\",flexDirection:\"column\",flexGrow:1,flexShrink:1,flexBasis:0},U.data&&r.createElement(r.Fragment,null,0===U.data.length&&r.createElement(v,{title:C(\"No_results_found\")}),U.data.length>0&&r.createElement(y,null,r.createElement(S,null,r.createElement(i,{is:\"section\",display:\"flex\",flexDirection:\"column\",flexGrow:1,flexShrink:1,flexBasis:\"auto\",height:\"full\"},r.createElement(m,{totalCount:U.data.length,overscan:25,data:U.data,components:{Scroller:k},itemContent:function(e,n){var a,i,o,s,u,d,f=U.data[e-1],m=M(n,f),v=g.isSystemMessage(n),k=null!==(a=null==R?void 0:null===(i=R.tunread)||void 0===i?void 0:i.includes(n._id))&&void 0!==a&&a,p=null!==(o=null==R?void 0:null===(s=R.tunreadUser)||void 0===s?void 0:s.includes(n._id))&&void 0!==o&&o,y=null!==(u=null==R?void 0:null===(d=R.tunreadGroup)||void 0===d?void 0:d.includes(n._id))&&void 0!==u&&u;return r.createElement(c,{key:n._id},m&&r.createElement(l,null,L(n.ts)),v?r.createElement(x,{message:n,showUserAvatar:F}):r.createElement(h,{message:n,sequential:!1,unread:k,mention:p,all:y,context:\"search\",searchText:t,showUserAvatar:F}))},endReached:function(){B(function(e){return e+w})}}))))),t&&U.isLoading&&r.createElement(E,null))}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/MessageSearchTab/components/MessageSearch.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, MessageDivider } from '@rocket.chat/fuselage';\\nimport { useSetting, useTranslation, useUserPreference } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { Fragment, memo, useState } from 'react';\\nimport { Virtuoso } from 'react-virtuoso';\\n\\nimport { MessageTypes } from '../../../../../../app/ui-utils/client';\\nimport { ContextualbarEmptyContent } from '../../../../../components/Contextualbar';\\nimport { VirtuosoScrollbars } from '../../../../../components/CustomScrollbars';\\nimport RoomMessage from '../../../../../components/message/variants/RoomMessage';\\nimport SystemMessage from '../../../../../components/message/variants/SystemMessage';\\nimport { useFormatDate } from '../../../../../hooks/useFormatDate';\\nimport MessageListErrorBoundary from '../../../MessageList/MessageListErrorBoundary';\\nimport { isMessageNewDay } from '../../../MessageList/lib/isMessageNewDay';\\nimport MessageListProvider from '../../../MessageList/providers/MessageListProvider';\\nimport LoadingMessagesIndicator from '../../../body/LoadingMessagesIndicator';\\nimport { useRoomSubscription } from '../../../contexts/RoomContext';\\nimport { useMessageSearchQuery } from '../hooks/useMessageSearchQuery';\\n\\ntype MessageSearchProps = {\\n\\tsearchText: string;\\n\\tglobalSearch: boolean;\\n};\\n\\nconst MessageSearch = ({ searchText, globalSearch }: MessageSearchProps): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst formatDate = useFormatDate();\\n\\tconst pageSize = useSetting<number>('PageSize') ?? 10;\\n\\tconst [limit, setLimit] = useState(pageSize);\\n\\tconst showUserAvatar = !!useUserPreference<boolean>('displayAvatars');\\n\\n\\tconst subscription = useRoomSubscription();\\n\\tconst messageSearchQuery = useMessageSearchQuery({ searchText, limit, globalSearch });\\n\\n\\treturn (\\n\\t\\t<Box display='flex' flexDirection='column' flexGrow={1} flexShrink={1} flexBasis={0}>\\n\\t\\t\\t{messageSearchQuery.data && (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t{messageSearchQuery.data.length === 0 && <ContextualbarEmptyContent title={t('No_results_found')} />}\\n\\t\\t\\t\\t\\t{messageSearchQuery.data.length > 0 && (\\n\\t\\t\\t\\t\\t\\t<MessageListErrorBoundary>\\n\\t\\t\\t\\t\\t\\t\\t<MessageListProvider>\\n\\t\\t\\t\\t\\t\\t\\t\\t<Box is='section' display='flex' flexDirection='column' flexGrow={1} flexShrink={1} flexBasis='auto' height='full'>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Virtuoso\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttotalCount={messageSearchQuery.data.length}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\toverscan={25}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata={messageSearchQuery.data}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcomponents={{ Scroller: VirtuosoScrollbars }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\titemContent={(index, message) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst previous = messageSearchQuery.data[index - 1];\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst newDay = isMessageNewDay(message, previous);\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst system = MessageTypes.isSystemMessage(message);\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst unread = subscription?.tunread?.includes(message._id) ?? false;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst mention = subscription?.tunreadUser?.includes(message._id) ?? false;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst all = subscription?.tunreadGroup?.includes(message._id) ?? false;\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<Fragment key={message._id}>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{newDay && <MessageDivider>{formatDate(message.ts)}</MessageDivider>}\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{system ? (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<SystemMessage message={message} showUserAvatar={showUserAvatar} />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t) : (\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<RoomMessage\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmessage={message}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tsequential={false}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tunread={unread}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmention={mention}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tall={all}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcontext='search'\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tsearchText={searchText}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tshowUserAvatar={showUserAvatar}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</Fragment>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tendReached={() => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tsetLimit((limit) => limit + pageSize);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t\\t</MessageListProvider>\\n\\t\\t\\t\\t\\t\\t</MessageListErrorBoundary>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</>\\n\\t\\t\\t)}\\n\\t\\t\\t{searchText && messageSearchQuery.isLoading && <LoadingMessagesIndicator />}\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default memo(MessageSearch);\\n\",null],\"names\":[\"_slicedToArray\",\"Box\",\"MessageDivider\",\"useSetting\",\"useTranslation\",\"useUserPreference\",\"React\",\"Fragment\",\"memo\",\"useState\",\"Virtuoso\",\"MessageTypes\",\"ContextualbarEmptyContent\",\"VirtuosoScrollbars\",\"RoomMessage\",\"SystemMessage\",\"useFormatDate\",\"MessageListErrorBoundary\",\"isMessageNewDay\",\"MessageListProvider\",\"LoadingMessagesIndicator\",\"useRoomSubscription\",\"useMessageSearchQuery\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_useSetting\",\"searchText\",\"globalSearch\",\"t\",\"formatDate\",\"pageSize\",\"_useState\",\"_useState2\",\"limit\",\"setLimit\",\"showUserAvatar\",\"subscription\",\"messageSearchQuery\",\"createElement\",\"display\",\"flexDirection\",\"flexGrow\",\"flexShrink\",\"flexBasis\",\"data\",\"length\",\"title\",\"is\",\"height\",\"totalCount\",\"overscan\",\"components\",\"Scroller\",\"itemContent\",\"index\",\"message\",\"_subscription$tunread\",\"_subscription$tunread2\",\"_subscription$tunread3\",\"_subscription$tunread4\",\"_subscription$tunread5\",\"_subscription$tunread6\",\"previous\",\"newDay\",\"system\",\"isSystemMessage\",\"unread\",\"tunread\",\"includes\",\"_id\",\"mention\",\"tunreadUser\",\"all\",\"tunreadGroup\",\"key\",\"ts\",\"sequential\",\"context\",\"endReached\",\"isLoading\"],\"mappings\":\"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\"}"}