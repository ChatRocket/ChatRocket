{"code":"function module(e,o,t){let l,n,a,s,i,r,u,m,c,d,k,C,h,x,f,R,E,L,T;t.link(\"@rocket.chat/fuselage-hooks\",{useLocalStorage(e){l=e},useDebouncedValue(e){n=e},useEffectEvent(e){a=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useSetModal(e){s=e},usePermission(e){i=e},useAtLeastOnePermission(e){r=e}},1),t.link(\"react\",{default(e){u=e},useCallback(e){m=e},useMemo(e){c=e},useState(e){d=e}},2),t.link(\"../../../../hooks/lists/useRecordList\",{useRecordList(e){k=e}},3),t.link(\"../../../../lib/asyncState\",{AsyncStatePhase(e){C=e}},4),t.link(\"../../../../lib/rooms/roomCoordinator\",{roomCoordinator(e){h=e}},5),t.link(\"../../../../sidebar/header/CreateChannel\",{default(e){x=e}},6),t.link(\"../../../room/contexts/RoomContext\",{useRoom(e){f=e}},7),t.link(\"../../../room/contexts/RoomToolboxContext\",{useRoomToolbox(e){R=e}},8),t.link(\"./AddExistingModal\",{default(e){E=e}},9),t.link(\"./TeamsChannels\",{default(e){L=e}},10),t.link(\"./hooks/useTeamsChannelList\",{useTeamsChannelList(e){T=e}},11),t.exportDefault(()=>{let e=f(),o=s(),{closeTab:t}=R(),b=i(\"move-room-to-team\",e._id),g=r([\"create-team-channel\",\"create-team-group\"],e._id),{teamId:p}=e;if(!p)throw Error(\"Invalid teamId\");let[I,y]=l(\"channels-list-type\",\"all\"),[A,S]=d(\"\"),v=n(A,800),{teamsChannelList:M,loadMoreItems:w,reload:D}=T(c(()=>({teamId:p,text:v,type:I}),[p,v,I])),{phase:P,items:N,itemCount:O}=k(M),V=m(e=>{S(e.currentTarget.value)},[]),_=a(()=>{o(u.createElement(E,{teamId:p,onClose:()=>o(null),reload:D}))}),G=a(()=>{o(u.createElement(x,{teamId:p,mainRoom:e,onClose:()=>o(null),reload:D}))}),j=a(e=>{h.openRouteLink(e.t,e)});return u.createElement(L,{loading:P===C.LOADING,mainRoom:e,type:I,text:A,setType:y,setText:V,channels:N,total:O,onClickClose:t,onClickAddExisting:b&&_,onClickCreateNew:g&&G,onClickView:j,loadMoreItems:w,reload:D})})}","map":"{\"version\":3,\"sources\":[\"client/views/teams/contextualBar/channels/TeamsChannelsWithData.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { useLocalStorage, useDebouncedValue, useEffectEvent } from '@rocket.chat/fuselage-hooks';\\nimport { useSetModal, usePermission, useAtLeastOnePermission } from '@rocket.chat/ui-contexts';\\nimport React, { useCallback, useMemo, useState } from 'react';\\n\\nimport { useRecordList } from '../../../../hooks/lists/useRecordList';\\nimport { AsyncStatePhase } from '../../../../lib/asyncState';\\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\\nimport CreateChannelWithData from '../../../../sidebar/header/CreateChannel';\\nimport { useRoom } from '../../../room/contexts/RoomContext';\\nimport { useRoomToolbox } from '../../../room/contexts/RoomToolboxContext';\\nimport AddExistingModal from './AddExistingModal';\\nimport TeamsChannels from './TeamsChannels';\\nimport { useTeamsChannelList } from './hooks/useTeamsChannelList';\\n\\nconst TeamsChannelsWithData = () => {\\n\\tconst room = useRoom();\\n\\tconst setModal = useSetModal();\\n\\tconst { closeTab } = useRoomToolbox();\\n\\tconst canAddExistingRoomToTeam = usePermission('move-room-to-team', room._id);\\n\\tconst canCreateRoomInTeam = useAtLeastOnePermission(['create-team-channel', 'create-team-group'], room._id);\\n\\n\\tconst { teamId } = room;\\n\\n\\tif (!teamId) {\\n\\t\\tthrow new Error('Invalid teamId');\\n\\t}\\n\\n\\tconst [type, setType] = useLocalStorage<'all' | 'autoJoin'>('channels-list-type', 'all');\\n\\tconst [text, setText] = useState('');\\n\\tconst debouncedText = useDebouncedValue(text, 800);\\n\\n\\tconst { teamsChannelList, loadMoreItems, reload } = useTeamsChannelList(\\n\\t\\tuseMemo(() => ({ teamId, text: debouncedText, type }), [teamId, debouncedText, type]),\\n\\t);\\n\\n\\tconst { phase, items, itemCount: total } = useRecordList(teamsChannelList);\\n\\n\\tconst handleTextChange = useCallback((event) => {\\n\\t\\tsetText(event.currentTarget.value);\\n\\t}, []);\\n\\n\\tconst handleAddExisting = useEffectEvent(() => {\\n\\t\\tsetModal(<AddExistingModal teamId={teamId} onClose={() => setModal(null)} reload={reload} />);\\n\\t});\\n\\n\\tconst handleCreateNew = useEffectEvent(() => {\\n\\t\\tsetModal(<CreateChannelWithData teamId={teamId} mainRoom={room} onClose={() => setModal(null)} reload={reload} />);\\n\\t});\\n\\n\\tconst goToRoom = useEffectEvent((room: IRoom) => {\\n\\t\\troomCoordinator.openRouteLink(room.t, room);\\n\\t});\\n\\n\\treturn (\\n\\t\\t<TeamsChannels\\n\\t\\t\\tloading={phase === AsyncStatePhase.LOADING}\\n\\t\\t\\tmainRoom={room}\\n\\t\\t\\ttype={type}\\n\\t\\t\\ttext={text}\\n\\t\\t\\tsetType={setType}\\n\\t\\t\\tsetText={handleTextChange}\\n\\t\\t\\tchannels={items}\\n\\t\\t\\ttotal={total}\\n\\t\\t\\tonClickClose={closeTab}\\n\\t\\t\\tonClickAddExisting={canAddExistingRoomToTeam && handleAddExisting}\\n\\t\\t\\tonClickCreateNew={canCreateRoomInTeam && handleCreateNew}\\n\\t\\t\\tonClickView={goToRoom}\\n\\t\\t\\tloadMoreItems={loadMoreItems}\\n\\t\\t\\treload={reload}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default TeamsChannelsWithData;\\n\",null],\"names\":[\"useLocalStorage\",\"useDebouncedValue\",\"useEffectEvent\",\"useSetModal\",\"usePermission\",\"useAtLeastOnePermission\",\"React\",\"useCallback\",\"useMemo\",\"useState\",\"useRecordList\",\"AsyncStatePhase\",\"roomCoordinator\",\"CreateChannelWithData\",\"useRoom\",\"useRoomToolbox\",\"AddExistingModal\",\"TeamsChannels\",\"useTeamsChannelList\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"TeamsChannelsWithData\",\"room\",\"setModal\",\"closeTab\",\"canAddExistingRoomToTeam\",\"_id\",\"canCreateRoomInTeam\",\"teamId\",\"Error\",\"type\",\"setType\",\"text\",\"setText\",\"debouncedText\",\"teamsChannelList\",\"loadMoreItems\",\"reload\",\"phase\",\"items\",\"itemCount\",\"total\",\"handleTextChange\",\"event\",\"currentTarget\",\"value\",\"handleAddExisting\",\"createElement\",\"onClose\",\"handleCreateNew\",\"mainRoom\",\"goToRoom\",\"openRouteLink\",\"t\",\"loading\",\"LOADING\",\"channels\",\"onClickClose\",\"onClickAddExisting\",\"onClickCreateNew\",\"onClickView\"],\"mappings\":\"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\"}"}