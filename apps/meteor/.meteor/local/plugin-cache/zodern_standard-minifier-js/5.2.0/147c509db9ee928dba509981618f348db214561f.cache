{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){o=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){i=e}},1),t.export({CallProvider:function(){return U}}),t.link(\"@rocket.chat/core-typings\",{VoipClientEvents:function(e){r=e},isVoipEventAgentCalled:function(e){u=e},isVoipEventAgentConnected:function(e){l=e},isVoipEventCallerJoined:function(e){a=e},isVoipEventQueueMemberAdded:function(e){c=e},isVoipEventQueueMemberRemoved:function(e){d=e},isVoipEventCallAbandoned:function(e){s=e},UserState:function(e){f=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){v=e}},1),t.link(\"@rocket.chat/random\",{Random:function(e){p=e}},2),t.link(\"@rocket.chat/ui-contexts\",{useRouter:function(e){C=e},useUser:function(e){m=e},useSetting:function(e){g=e},useEndpoint:function(e){b=e},useStream:function(e){k=e},useSetOutputMediaDevice:function(e){E=e},useSetInputMediaDevice:function(e){h=e},useSetModal:function(e){w=e},useTranslation:function(e){x=e}},3),t.link(\"react\",{default:function(e){A=e},useMemo:function(e){q=e},useRef:function(e){N=e},useCallback:function(e){I=e},useEffect:function(e){_=e},useState:function(e){M=e}},4),t.link(\"react-dom\",{createPortal:function(e){R=e}},5),t.link(\"../../contexts/CallContext\",{CallContext:function(e){S=e},useIsVoipEnterprise:function(e){y=e}},6),t.link(\"../../hooks/useDialModal\",{useDialModal:function(e){P=e}},7),t.link(\"../../hooks/useVoipClient\",{isOutboundClient:function(e){D=e},useVoipClient:function(e){V=e}},8),t.link(\"../../lib/rooms/roomCoordinator\",{roomCoordinator:function(e){O=e}},9),t.link(\"../../lib/voip/parseOutboundPhoneNumber\",{parseOutboundPhoneNumber:function(e){T=e}},10),t.link(\"../../voip/components/modals/WrapUpCallModal\",{WrapUpCallModal:function(e){B=e}},11),t.link(\"./hooks/useVoipSounds\",{useVoipSounds:function(e){L=e}},12);var o,i,r,u,l,a,c,d,s,f,v,p,C,m,g,b,k,E,h,w,x,A,q,N,I,_,M,R,S,y,P,D,V,O,T,B,L,U=function(e){var n=e.children,t=M(\"unregistered\"),U=i(t,2),W=U[0],Q=U[1],F=g(\"VoIP_Enabled\"),j=k(\"notify-user\"),H=b(\"POST\",\"/v1/voip/events\"),G=b(\"POST\",\"/v1/livechat/visitor\"),J=b(\"GET\",\"/v1/voip/room\"),z=b(\"POST\",\"/v1/voip/room.close\"),K=b(\"GET\",\"/v1/omnichannel/contact.search\"),X=w(),Y=x(),Z=V(),$=m(),ee=C(),en=E(),et=h(),eo=y(),ei=N(null),er=M(0),eu=i(er,2),el=eu[0],ea=eu[1],ec=M(\"\"),ed=i(ec,2),es=ed[0],ef=ed[1],ev=M({v:{},rid:\"\"}),ep=i(ev,2),eC=ep[0],em=ep[1],eg=P().openDialModal,eb=L(),ek=I(function(){var e,n,t,i=arguments;return o.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(n=i.length>0&&void 0!==i[0]?i[0]:{},r.t0=eC,!r.t0){r.next=5;break}return r.next=5,o.awrap(z({rid:eC.rid,token:eC.v.token||\"\",options:{comment:null==n?void 0:n.comment,tags:null==n?void 0:n.tags}}));case 5:ee.navigate(\"/home\"),(t=null===(e=Z.voipClient)||void 0===e?void 0:e.getAggregator())&&t.callEnded();case 8:case\"end\":return r.stop()}},null,null,null,Promise)},[ee,null==Z?void 0:Z.voipClient,eC,z]),eE=I(function(){X(function(){return A.createElement(B,{closeRoom:ek})})},[ek,X]),eh=v(function(e){(null==ei?void 0:ei.current)&&en({outputDevice:e,HTMLAudioElement:ei.current})}),ew=v(function(e){if(Z.voipClient){var n={audio:{deviceId:{exact:e.id}}};Z.voipClient.changeAudioInputDevice(n),et(e)}}),ex=M(),eA=i(ex,2),eq=eA[0],eN=eA[1],eI=M(\"online\"),e_=i(eI,2),eM=e_[0],eR=e_[1];_(function(){var e=(Z||{}).voipClient;if(e)return eN(e.getAggregator()),function(){if(\"registered\"===W)return e.unregister()}},[Z,W]);var eS=I(function(e){O.openRouteLink(\"v\",{rid:e})},[]),ey=I(function(e){var n,t,i;return o.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=T(e.callerId),r.next=3,o.awrap(K({phone:n}));case 3:if(!(t=r.sent.contact)){r.next=7;break}return r.abrupt(\"return\",t);case 7:return r.next=9,o.awrap(G({visitor:{token:p.id(),phone:n,name:e.callerName||n}}));case 9:return i=r.sent.visitor,r.abrupt(\"return\",i);case 12:case\"end\":return r.stop()}},null,null,null,Promise)},[K,G]),eP=I(function(e){var n,t,i,r,u,l=arguments;return o.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:\"inbound\",$){a.next=3;break}return a.abrupt(\"return\",\"\");case 3:return a.prev=3,a.next=6,o.awrap(ey(e));case 6:return i=a.sent,a.next=9,o.awrap(J({token:i.token,agentId:$._id,direction:n}));case 9:return eS((r=a.sent).room._id),r.room&&em({v:{token:r.room.v.token},rid:r.room._id}),(u=null===(t=Z.voipClient)||void 0===t?void 0:t.getAggregator())&&u.callStarted(),a.abrupt(\"return\",r.room._id);case 17:return a.prev=17,a.t0=a.catch(3),console.error(\"Error while creating a visitor \"+a.t0),a.abrupt(\"return\",\"\");case 21:case\"end\":return a.stop()}},null,null,[[3,17]],Promise)},[eS,Z.voipClient,$,J,ey]);_(function(){if(F&&$&&eq)return j($._id+\"/voip.events\",function(e){var n,t,i,r,f,v;return o.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(!u(e)){o.next=5;break}return n=e.data,eq.callRinging({queuename:n.queue,callerid:n.callerId}),ef(eq.getCurrentQueueName()),o.abrupt(\"return\");case 5:if(!l(e)){o.next=11;break}return t=e.data,eq.callPickedup({queuename:t.queue,queuedcalls:t.queuedCalls,waittimeinqueue:t.waitTimeInQueue}),ef(eq.getCurrentQueueName()),ea(eq.getCallWaitingCount()),o.abrupt(\"return\");case 11:if(!a(e)){o.next=16;break}return i=e.data,eq.queueJoined({queuename:i.queue,callerid:i.callerId,queuedcalls:i.queuedCalls}),ea(eq.getCallWaitingCount()),o.abrupt(\"return\");case 16:if(!c(e)){o.next=22;break}return r=e.data,eq.memberAdded({queuename:r.queue,queuedcalls:r.queuedCalls}),ef(eq.getCurrentQueueName()),ea(eq.getCallWaitingCount()),o.abrupt(\"return\");case 22:if(!d(e)){o.next=27;break}return f=e.data,eq.memberRemoved({queuename:f.queue,queuedcalls:f.queuedCalls}),ea(eq.getCallWaitingCount()),o.abrupt(\"return\");case 27:if(!s(e)){o.next=33;break}return v=e.data,eq.queueAbandoned({queuename:v.queue,queuedcallafterabandon:v.queuedCallAfterAbandon}),ef(eq.getCurrentQueueName()),ea(eq.getCallWaitingCount()),o.abrupt(\"return\");case 33:console.warn(\"Unknown event received\");case 34:case\"end\":return o.stop()}},null,null,null,Promise)})},[j,$,eq,F]),_(function(){if(F&&$&&eq)return j($._id+\"/call.hangup\",function(e){if(ef(eq.getCurrentQueueName()),eo){eE();return}ek(),H({event:r[\"VOIP-CALL-ENDED\"],rid:e.roomId})})},[eE,eq,j,$,F,H,eo,ek]),_(function(){if(Z.voipClient){var e=Z.voipClient.on(\"registered\",function(){return Q(\"registered\")}),n=Z.voipClient.on(\"unregistered\",function(){return Q(\"unregistered\")});return function(){e(),n()}}},[Z.voipClient]),_(function(){Z.voipClient&&ei.current&&Z.voipClient.switchMediaRenderer({remoteMediaElement:ei.current})},[Z.voipClient]),_(function(){if(Z.voipClient&&$){var e=function(e){var n,t,i;return o.async(function(u){for(;;)switch(u.prev=u.next){case 0:if(e.callInfo){u.next=2;break}return u.abrupt(\"return\");case 2:if(eb.stopAll(),!(e.userState!==f.UAC)){u.next=5;break}return u.abrupt(\"return\");case 5:return t=e.callInfo,ei.current&&(null===(n=Z.voipClient)||void 0===n||n.switchMediaRenderer({remoteMediaElement:ei.current})),u.next=9,o.awrap(eP(t,\"outbound\"));case 9:i=u.sent,H({event:r[\"VOIP-CALL-STARTED\"],rid:i});case 11:case\"end\":return u.stop()}},null,null,null,Promise)},n=function(){\"offline\"===eM&&eR(\"online\")},t=function(){var e,n,t;if(\"online\"===eM)switch(eR(\"offline\"),null===(t=Z.voipClient)||void 0===t?void 0:t.callerInfo.state){case\"IN_CALL\":case\"ON_HOLD\":null===(e=Z.voipClient)||void 0===e||e.endCall();break;case\"OFFER_RECEIVED\":case\"ANSWER_SENT\":null===(n=Z.voipClient)||void 0===n||n.rejectCall()}},i=function(){eb.play(\"outbound-call-ringing\")},u=function(){eb.play(\"telephone\")},l=function(){eb.play(\"call-ended\",!1),eb.stopAll()},a=function(e){switch(e){case\"Not Found\":eg({errorMessage:Y(\"Dialed_number_doesnt_exist\")});break;case\"Address Incomplete\":eg({errorMessage:Y(\"Dialed_number_is_incomplete\")});break;case\"Request Terminated\":break;default:eg({errorMessage:Y(\"Something_went_wrong_try_again_later\")})}};return Z.voipClient.onNetworkEvent(\"connected\",n),Z.voipClient.onNetworkEvent(\"disconnected\",t),Z.voipClient.onNetworkEvent(\"connectionerror\",t),Z.voipClient.onNetworkEvent(\"localnetworkonline\",n),Z.voipClient.onNetworkEvent(\"localnetworkoffline\",t),Z.voipClient.on(\"callestablished\",e),Z.voipClient.on(\"ringing\",i),Z.voipClient.on(\"incomingcall\",u),Z.voipClient.on(\"callterminated\",l),D(Z.voipClient)&&Z.voipClient.on(\"callfailed\",a),function(){var o,r,c,d,s,f,v,p,C,m;null===(o=Z.voipClient)||void 0===o||o.offNetworkEvent(\"connected\",n),null===(r=Z.voipClient)||void 0===r||r.offNetworkEvent(\"disconnected\",t),null===(c=Z.voipClient)||void 0===c||c.offNetworkEvent(\"connectionerror\",t),null===(d=Z.voipClient)||void 0===d||d.offNetworkEvent(\"localnetworkonline\",n),null===(s=Z.voipClient)||void 0===s||s.offNetworkEvent(\"localnetworkoffline\",t),null===(f=Z.voipClient)||void 0===f||f.off(\"incomingcall\",u),null===(v=Z.voipClient)||void 0===v||v.off(\"ringing\",i),null===(p=Z.voipClient)||void 0===p||p.off(\"callestablished\",e),null===(C=Z.voipClient)||void 0===C||C.off(\"callterminated\",l),D(Z.voipClient)&&(null===(m=Z.voipClient)||void 0===m||m.off(\"callfailed\",a))}}},[eP,H,eM,eg,Z.voipClient,eb,Y,$]);var eD=q(function(){if(!F||!(null!=$&&$.extension))return{enabled:!1,ready:!1,outBoundCallsAllowed:void 0,outBoundCallsEnabled:void 0,outBoundCallsEnabledForUser:void 0};if(Z.error)return{enabled:!0,ready:!1,error:Z.error,outBoundCallsAllowed:void 0,outBoundCallsEnabled:void 0,outBoundCallsEnabledForUser:void 0};if(!Z.voipClient)return{enabled:!0,ready:!1,outBoundCallsAllowed:void 0,outBoundCallsEnabled:void 0,outBoundCallsEnabledForUser:void 0};var e=Z.registrationInfo,n=Z.voipClient;return{outBoundCallsAllowed:eo,outBoundCallsEnabled:eo,outBoundCallsEnabledForUser:eo&&\"registered\"===W&&![\"IN_CALL\",\"ON_HOLD\"].includes(n.callerInfo.state),enabled:!0,ready:!0,openedRoomInfo:eC,voipClient:n,registrationInfo:e,queueCounter:el,queueName:es,actions:{mute:function(){return n.muteCall(!0)},unmute:function(){return n.muteCall(!1)},pause:function(){return n.holdCall(!0)},resume:function(){return n.holdCall(!1)},end:function(){return n.endCall()},pickUp:function(){return o.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",ei.current&&n.acceptCall({remoteMediaElement:ei.current}));case 1:case\"end\":return e.stop()}},null,null,null,Promise)},reject:function(){return n.rejectCall()}},openRoom:eS,createRoom:eP,closeRoom:ek,networkStatus:eM,openWrapUpModal:eE,changeAudioOutputDevice:eh,changeAudioInputDevice:ew,register:function(){return n.register()},unregister:function(){return n.unregister()}}},[F,null==$?void 0:$.extension,Z,eo,W,eC,el,es,eS,eP,ek,eE,eh,ew,eM]);return A.createElement(S.Provider,{value:eD},n,eD.enabled&&R(A.createElement(\"audio\",{ref:ei},A.createElement(\"track\",{kind:\"captions\"})),document.body))}}","map":"{\"version\":3,\"sources\":[\"client/providers/CallProvider/CallProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IVoipRoom, VoipEventDataSignature, ICallerInfo, ICallDetails, ILivechatVisitor, Serialized } from '@rocket.chat/core-typings';\\nimport {\\n\\tVoipClientEvents,\\n\\tisVoipEventAgentCalled,\\n\\tisVoipEventAgentConnected,\\n\\tisVoipEventCallerJoined,\\n\\tisVoipEventQueueMemberAdded,\\n\\tisVoipEventQueueMemberRemoved,\\n\\tisVoipEventCallAbandoned,\\n\\tUserState,\\n} from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { Random } from '@rocket.chat/random';\\nimport type { Device } from '@rocket.chat/ui-contexts';\\nimport {\\n\\tuseRouter,\\n\\tuseUser,\\n\\tuseSetting,\\n\\tuseEndpoint,\\n\\tuseStream,\\n\\tuseSetOutputMediaDevice,\\n\\tuseSetInputMediaDevice,\\n\\tuseSetModal,\\n\\tuseTranslation,\\n} from '@rocket.chat/ui-contexts';\\nimport type { ReactNode } from 'react';\\nimport React, { useMemo, useRef, useCallback, useEffect, useState } from 'react';\\nimport { createPortal } from 'react-dom';\\nimport type { OutgoingByeRequest } from 'sip.js/lib/core';\\n\\nimport type { CallContextValue } from '../../contexts/CallContext';\\nimport { CallContext, useIsVoipEnterprise } from '../../contexts/CallContext';\\nimport { useDialModal } from '../../hooks/useDialModal';\\nimport { isOutboundClient, useVoipClient } from '../../hooks/useVoipClient';\\nimport { roomCoordinator } from '../../lib/rooms/roomCoordinator';\\nimport type { QueueAggregator } from '../../lib/voip/QueueAggregator';\\nimport { parseOutboundPhoneNumber } from '../../lib/voip/parseOutboundPhoneNumber';\\nimport { WrapUpCallModal } from '../../voip/components/modals/WrapUpCallModal';\\nimport { useVoipSounds } from './hooks/useVoipSounds';\\n\\ntype NetworkState = 'online' | 'offline';\\n\\ntype CallProviderProps = {\\n\\tchildren?: ReactNode;\\n};\\n\\nexport const CallProvider = ({ children }: CallProviderProps) => {\\n\\tconst [clientState, setClientState] = useState<'registered' | 'unregistered'>('unregistered');\\n\\n\\tconst voipEnabled = useSetting('VoIP_Enabled');\\n\\tconst subscribeToNotifyUser = useStream('notify-user');\\n\\tconst dispatchEvent = useEndpoint('POST', '/v1/voip/events');\\n\\tconst visitorEndpoint = useEndpoint('POST', '/v1/livechat/visitor');\\n\\tconst voipEndpoint = useEndpoint('GET', '/v1/voip/room');\\n\\tconst voipCloseRoomEndpoint = useEndpoint('POST', '/v1/voip/room.close');\\n\\tconst getContactBy = useEndpoint('GET', '/v1/omnichannel/contact.search');\\n\\tconst setModal = useSetModal();\\n\\tconst t = useTranslation();\\n\\n\\tconst result = useVoipClient();\\n\\tconst user = useUser();\\n\\tconst router = useRouter();\\n\\tconst setOutputMediaDevice = useSetOutputMediaDevice();\\n\\tconst setInputMediaDevice = useSetInputMediaDevice();\\n\\n\\tconst hasVoIPEnterpriseLicense = useIsVoipEnterprise();\\n\\n\\tconst remoteAudioMediaRef = useRef<HTMLAudioElement>(null); // TODO: Create a dedicated file for the AUDIO and make the controls accessible\\n\\n\\tconst [queueCounter, setQueueCounter] = useState(0);\\n\\tconst [queueName, setQueueName] = useState('');\\n\\tconst [roomInfo, setRoomInfo] = useState<{ v: { token?: string }; rid: string }>({ v: {}, rid: '' });\\n\\n\\tconst { openDialModal } = useDialModal();\\n\\n\\tconst voipSounds = useVoipSounds();\\n\\n\\tconst closeRoom = useCallback(\\n\\t\\tasync (data = {}): Promise<void> => {\\n\\t\\t\\troomInfo &&\\n\\t\\t\\t\\t(await voipCloseRoomEndpoint({\\n\\t\\t\\t\\t\\trid: roomInfo.rid,\\n\\t\\t\\t\\t\\ttoken: roomInfo.v.token || '',\\n\\t\\t\\t\\t\\toptions: { comment: data?.comment, tags: data?.tags },\\n\\t\\t\\t\\t}));\\n\\t\\t\\trouter.navigate('/home');\\n\\n\\t\\t\\tconst queueAggregator = result.voipClient?.getAggregator();\\n\\t\\t\\tif (queueAggregator) {\\n\\t\\t\\t\\tqueueAggregator.callEnded();\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[router, result?.voipClient, roomInfo, voipCloseRoomEndpoint],\\n\\t);\\n\\n\\tconst openWrapUpModal = useCallback((): void => {\\n\\t\\tsetModal(() => <WrapUpCallModal closeRoom={closeRoom} />);\\n\\t}, [closeRoom, setModal]);\\n\\n\\tconst changeAudioOutputDevice = useMutableCallback((selectedAudioDevice: Device): void => {\\n\\t\\tremoteAudioMediaRef?.current &&\\n\\t\\t\\tsetOutputMediaDevice({ outputDevice: selectedAudioDevice, HTMLAudioElement: remoteAudioMediaRef.current });\\n\\t});\\n\\n\\tconst changeAudioInputDevice = useMutableCallback((selectedAudioDevice: Device): void => {\\n\\t\\tif (!result.voipClient) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tconst constraints = { audio: { deviceId: { exact: selectedAudioDevice.id } } };\\n\\n\\t\\t// TODO: Migrate the classes that manage MediaStream to a more react based approach (using contexts/providers perhaps)\\n\\t\\t// For now the MediaStream management is very coupled with the VoIP client,\\n\\t\\t// decoupling it will make it usable by other areas of the project that needs to handle MediaStreams and avoid code duplication\\n\\t\\tresult.voipClient.changeAudioInputDevice(constraints);\\n\\n\\t\\tsetInputMediaDevice(selectedAudioDevice);\\n\\t});\\n\\n\\tconst [queueAggregator, setQueueAggregator] = useState<QueueAggregator>();\\n\\n\\tconst [networkStatus, setNetworkStatus] = useState<NetworkState>('online');\\n\\n\\tuseEffect(() => {\\n\\t\\tconst { voipClient } = result || {};\\n\\n\\t\\tif (!voipClient) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tsetQueueAggregator(voipClient.getAggregator());\\n\\n\\t\\treturn (): void => {\\n\\t\\t\\tif (clientState === 'registered') {\\n\\t\\t\\t\\treturn voipClient.unregister();\\n\\t\\t\\t}\\n\\t\\t};\\n\\t}, [result, clientState]);\\n\\n\\tconst openRoom = useCallback((rid: IVoipRoom['_id']): void => {\\n\\t\\troomCoordinator.openRouteLink('v', { rid });\\n\\t}, []);\\n\\n\\tconst findOrCreateVisitor = useCallback(\\n\\t\\tasync (caller: ICallerInfo): Promise<Serialized<ILivechatVisitor>> => {\\n\\t\\t\\tconst phone = parseOutboundPhoneNumber(caller.callerId);\\n\\n\\t\\t\\tconst { contact } = await getContactBy({ phone });\\n\\n\\t\\t\\tif (contact) {\\n\\t\\t\\t\\treturn contact;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst { visitor } = await visitorEndpoint({\\n\\t\\t\\t\\tvisitor: {\\n\\t\\t\\t\\t\\ttoken: Random.id(),\\n\\t\\t\\t\\t\\tphone,\\n\\t\\t\\t\\t\\tname: caller.callerName || phone,\\n\\t\\t\\t\\t},\\n\\t\\t\\t});\\n\\n\\t\\t\\treturn visitor;\\n\\t\\t},\\n\\t\\t[getContactBy, visitorEndpoint],\\n\\t);\\n\\n\\tconst createRoom = useCallback(\\n\\t\\tasync (caller: ICallerInfo, direction: IVoipRoom['direction'] = 'inbound'): Promise<IVoipRoom['_id']> => {\\n\\t\\t\\tif (!user) {\\n\\t\\t\\t\\treturn '';\\n\\t\\t\\t}\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst visitor = await findOrCreateVisitor(caller);\\n\\t\\t\\t\\tconst voipRoom = await voipEndpoint({ token: visitor.token, agentId: user._id, direction });\\n\\t\\t\\t\\topenRoom(voipRoom.room._id);\\n\\t\\t\\t\\tvoipRoom.room && setRoomInfo({ v: { token: voipRoom.room.v.token }, rid: voipRoom.room._id });\\n\\t\\t\\t\\tconst queueAggregator = result.voipClient?.getAggregator();\\n\\t\\t\\t\\tif (queueAggregator) {\\n\\t\\t\\t\\t\\tqueueAggregator.callStarted();\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\treturn voipRoom.room._id;\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tconsole.error(`Error while creating a visitor ${error}`);\\n\\t\\t\\t\\treturn '';\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[openRoom, result.voipClient, user, voipEndpoint, findOrCreateVisitor],\\n\\t);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!voipEnabled || !user || !queueAggregator) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst handleEventReceived = async (event: VoipEventDataSignature): Promise<void> => {\\n\\t\\t\\tif (isVoipEventAgentCalled(event)) {\\n\\t\\t\\t\\tconst { data } = event;\\n\\t\\t\\t\\tqueueAggregator.callRinging({ queuename: data.queue, callerid: data.callerId });\\n\\t\\t\\t\\tsetQueueName(queueAggregator.getCurrentQueueName());\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tif (isVoipEventAgentConnected(event)) {\\n\\t\\t\\t\\tconst { data } = event;\\n\\t\\t\\t\\tqueueAggregator.callPickedup({ queuename: data.queue, queuedcalls: data.queuedCalls, waittimeinqueue: data.waitTimeInQueue });\\n\\t\\t\\t\\tsetQueueName(queueAggregator.getCurrentQueueName());\\n\\t\\t\\t\\tsetQueueCounter(queueAggregator.getCallWaitingCount());\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tif (isVoipEventCallerJoined(event)) {\\n\\t\\t\\t\\tconst { data } = event;\\n\\t\\t\\t\\tqueueAggregator.queueJoined({ queuename: data.queue, callerid: data.callerId, queuedcalls: data.queuedCalls });\\n\\t\\t\\t\\tsetQueueCounter(queueAggregator.getCallWaitingCount());\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tif (isVoipEventQueueMemberAdded(event)) {\\n\\t\\t\\t\\tconst { data } = event;\\n\\t\\t\\t\\tqueueAggregator.memberAdded({ queuename: data.queue, queuedcalls: data.queuedCalls });\\n\\t\\t\\t\\tsetQueueName(queueAggregator.getCurrentQueueName());\\n\\t\\t\\t\\tsetQueueCounter(queueAggregator.getCallWaitingCount());\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tif (isVoipEventQueueMemberRemoved(event)) {\\n\\t\\t\\t\\tconst { data } = event;\\n\\t\\t\\t\\tqueueAggregator.memberRemoved({ queuename: data.queue, queuedcalls: data.queuedCalls });\\n\\t\\t\\t\\tsetQueueCounter(queueAggregator.getCallWaitingCount());\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tif (isVoipEventCallAbandoned(event)) {\\n\\t\\t\\t\\tconst { data } = event;\\n\\t\\t\\t\\tqueueAggregator.queueAbandoned({ queuename: data.queue, queuedcallafterabandon: data.queuedCallAfterAbandon });\\n\\t\\t\\t\\tsetQueueName(queueAggregator.getCurrentQueueName());\\n\\t\\t\\t\\tsetQueueCounter(queueAggregator.getCallWaitingCount());\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconsole.warn('Unknown event received');\\n\\t\\t};\\n\\n\\t\\treturn subscribeToNotifyUser(`${user._id}/voip.events`, handleEventReceived);\\n\\t}, [subscribeToNotifyUser, user, queueAggregator, voipEnabled]);\\n\\n\\t// This was causing event duplication before, so we'll leave this here for now\\n\\tuseEffect(() => {\\n\\t\\tif (!voipEnabled || !user || !queueAggregator) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\treturn subscribeToNotifyUser(`${user._id}/call.hangup`, (event): void => {\\n\\t\\t\\tsetQueueName(queueAggregator.getCurrentQueueName());\\n\\n\\t\\t\\tif (hasVoIPEnterpriseLicense) {\\n\\t\\t\\t\\topenWrapUpModal();\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tcloseRoom();\\n\\n\\t\\t\\tdispatchEvent({ event: VoipClientEvents['VOIP-CALL-ENDED'], rid: event.roomId });\\n\\t\\t});\\n\\t}, [openWrapUpModal, queueAggregator, subscribeToNotifyUser, user, voipEnabled, dispatchEvent, hasVoIPEnterpriseLicense, closeRoom]);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!result.voipClient) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst offRegistered = result.voipClient.on('registered', (): void => setClientState('registered'));\\n\\t\\tconst offUnregistered = result.voipClient.on('unregistered', (): void => setClientState('unregistered'));\\n\\n\\t\\treturn (): void => {\\n\\t\\t\\toffRegistered();\\n\\t\\t\\toffUnregistered();\\n\\t\\t};\\n\\t}, [result.voipClient]);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!result.voipClient) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\t/*\\n\\t\\t * This code may need a revisit when we handle callinqueue differently.\\n\\t\\t * Check clickup tasks for more details\\n\\t\\t * https://app.clickup.com/t/22hy1k4\\n\\t\\t * When customer called a queue (Either using skype or using internal number), call would get established\\n\\t\\t * customer would hear agent's voice but agent would not hear anything from customer.\\n\\t\\t * This issue was observed on unstable. It was found to be inconsistent to reproduce.\\n\\t\\t * On some developer env, it would happen randomly. On Safari it did not happen if\\n\\t\\t * user refreshes before taking every call.\\n\\t\\t *\\n\\t\\t * The reason behind this was as soon as agent accepts a call, queueCounter would change.\\n\\t\\t * This change will trigger re-rendering of media and creation of audio element.\\n\\t\\t * This audio element gets used by voipClient to render the remote audio.\\n\\t\\t * Because the re-render happened, it would hold a stale reference.\\n\\t\\t *\\n\\t\\t * If the dom is inspected, audio element just before body is usually created by this class.\\n\\t\\t * this audio element.srcObject contains null value. In working case, it should display\\n\\t\\t * valid stream object.\\n\\t\\t *\\n\\t\\t * Reason for inconsistencies :\\n\\t\\t * This element is utilized in VoIPUser::setupRemoteMedia\\n\\t\\t * This function is called when webRTC receives a remote track event. i.e when the webrtc's peer connection\\n\\t\\t * starts receiving media. This event call back depends on several factors. How does asterisk setup streams.\\n\\t\\t * How does it creates a bridge which patches up the agent and customer (Media is flowing thru asterisk).\\n\\t\\t * When it works in de-environment, it was observed that the audio element in dom and the audio element hold\\n\\t\\t * by VoIPUser is different. Nonetheless, this stale audio element holds valid media stream, which is being played.\\n\\t\\t * Hence sometimes the audio is heard.\\n\\t\\t *\\n\\t\\t * Ideally call component once gets stable, should not get rerendered. Queue, Room creation are the parameters\\n\\t\\t * which should be independent and should not control the call component.\\n\\t\\t *\\n\\t\\t * Solution :\\n\\t\\t * Either make the audio elemenent rendered independent of rest of the DOM.\\n\\t\\t * or implement useEffect. This useEffect will reset the rendering elements with the latest audio tag.\\n\\t\\t *\\n\\t\\t * Note : If this code gets refactor, revisit the line below to check if this call is needed.\\n\\t\\t *\\n\\t\\t */\\n\\t\\tremoteAudioMediaRef.current && result.voipClient.switchMediaRenderer({ remoteMediaElement: remoteAudioMediaRef.current });\\n\\t}, [result.voipClient]);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!result.voipClient) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (!user) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst onCallEstablished = async (callDetails: ICallDetails): Promise<undefined> => {\\n\\t\\t\\tif (!callDetails.callInfo) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tvoipSounds.stopAll();\\n\\t\\t\\tif (callDetails.userState !== UserState.UAC) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\t// Agent has sent Invite. So it must create a room.\\n\\t\\t\\tconst { callInfo } = callDetails;\\n\\t\\t\\t// While making the call, there is no remote media element available.\\n\\t\\t\\t// When the call is ringing we have that element created. But we still\\n\\t\\t\\t// do not want it to be attached.\\n\\t\\t\\t// When call gets established, then switch the media renderer.\\n\\t\\t\\tremoteAudioMediaRef.current && result.voipClient?.switchMediaRenderer({ remoteMediaElement: remoteAudioMediaRef.current });\\n\\t\\t\\tconst roomId = await createRoom(callInfo, 'outbound');\\n\\t\\t\\tdispatchEvent({ event: VoipClientEvents['VOIP-CALL-STARTED'], rid: roomId });\\n\\t\\t};\\n\\n\\t\\tconst onNetworkConnected = (): void => {\\n\\t\\t\\tif (networkStatus === 'offline') {\\n\\t\\t\\t\\tsetNetworkStatus('online');\\n\\t\\t\\t}\\n\\t\\t};\\n\\n\\t\\tconst onNetworkDisconnected = (): void => {\\n\\t\\t\\t// Transitioning from online -> offline\\n\\t\\t\\t// If there is ongoing call, terminate it or if we are processing an incoming/outgoing call\\n\\t\\t\\t// reject it.\\n\\t\\t\\tif (networkStatus === 'online') {\\n\\t\\t\\t\\tsetNetworkStatus('offline');\\n\\t\\t\\t\\tswitch (result.voipClient?.callerInfo.state) {\\n\\t\\t\\t\\t\\tcase 'IN_CALL':\\n\\t\\t\\t\\t\\tcase 'ON_HOLD':\\n\\t\\t\\t\\t\\t\\tresult.voipClient?.endCall();\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t\\tcase 'OFFER_RECEIVED':\\n\\t\\t\\t\\t\\tcase 'ANSWER_SENT':\\n\\t\\t\\t\\t\\t\\tresult.voipClient?.rejectCall();\\n\\t\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t};\\n\\n\\t\\tconst onRinging = (): void => {\\n\\t\\t\\tvoipSounds.play('outbound-call-ringing');\\n\\t\\t};\\n\\n\\t\\tconst onIncomingCallRinging = (): void => {\\n\\t\\t\\tvoipSounds.play('telephone');\\n\\t\\t};\\n\\n\\t\\tconst onCallTerminated = (): void => {\\n\\t\\t\\tvoipSounds.play('call-ended', false);\\n\\t\\t\\tvoipSounds.stopAll();\\n\\t\\t};\\n\\n\\t\\tconst onCallFailed = (reason: 'Not Found' | 'Address Incomplete' | 'Request Terminated' | string): void => {\\n\\t\\t\\tswitch (reason) {\\n\\t\\t\\t\\tcase 'Not Found':\\n\\t\\t\\t\\t\\t// This happens when the call matches dialplan and goes to the world, but the trunk doesnt find the number.\\n\\t\\t\\t\\t\\topenDialModal({ errorMessage: t('Dialed_number_doesnt_exist') });\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\tcase 'Address Incomplete':\\n\\t\\t\\t\\t\\t// This happens when the dialed number doesnt match a valid asterisk dialplan pattern or the number is invalid.\\n\\t\\t\\t\\t\\topenDialModal({ errorMessage: t('Dialed_number_is_incomplete') });\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\tcase 'Request Terminated':\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\tdefault:\\n\\t\\t\\t\\t\\topenDialModal({ errorMessage: t('Something_went_wrong_try_again_later') });\\n\\t\\t\\t}\\n\\t\\t};\\n\\n\\t\\tresult.voipClient.onNetworkEvent('connected', onNetworkConnected);\\n\\t\\tresult.voipClient.onNetworkEvent('disconnected', onNetworkDisconnected);\\n\\t\\tresult.voipClient.onNetworkEvent('connectionerror', onNetworkDisconnected);\\n\\t\\tresult.voipClient.onNetworkEvent('localnetworkonline', onNetworkConnected);\\n\\t\\tresult.voipClient.onNetworkEvent('localnetworkoffline', onNetworkDisconnected);\\n\\t\\tresult.voipClient.on('callestablished', onCallEstablished);\\n\\t\\tresult.voipClient.on('ringing', onRinging); // not called for incoming call\\n\\t\\tresult.voipClient.on('incomingcall', onIncomingCallRinging);\\n\\t\\tresult.voipClient.on('callterminated', onCallTerminated);\\n\\n\\t\\tif (isOutboundClient(result.voipClient)) {\\n\\t\\t\\tresult.voipClient.on('callfailed', onCallFailed);\\n\\t\\t}\\n\\n\\t\\treturn (): void => {\\n\\t\\t\\tresult.voipClient?.offNetworkEvent('connected', onNetworkConnected);\\n\\t\\t\\tresult.voipClient?.offNetworkEvent('disconnected', onNetworkDisconnected);\\n\\t\\t\\tresult.voipClient?.offNetworkEvent('connectionerror', onNetworkDisconnected);\\n\\t\\t\\tresult.voipClient?.offNetworkEvent('localnetworkonline', onNetworkConnected);\\n\\t\\t\\tresult.voipClient?.offNetworkEvent('localnetworkoffline', onNetworkDisconnected);\\n\\t\\t\\tresult.voipClient?.off('incomingcall', onIncomingCallRinging);\\n\\t\\t\\tresult.voipClient?.off('ringing', onRinging);\\n\\t\\t\\tresult.voipClient?.off('callestablished', onCallEstablished);\\n\\t\\t\\tresult.voipClient?.off('callterminated', onCallTerminated);\\n\\n\\t\\t\\tif (isOutboundClient(result.voipClient)) {\\n\\t\\t\\t\\tresult.voipClient?.off('callfailed', onCallFailed);\\n\\t\\t\\t}\\n\\t\\t};\\n\\t}, [createRoom, dispatchEvent, networkStatus, openDialModal, result.voipClient, voipSounds, t, user]);\\n\\n\\tconst contextValue: CallContextValue = useMemo(() => {\\n\\t\\tif (!voipEnabled) {\\n\\t\\t\\treturn {\\n\\t\\t\\t\\tenabled: false,\\n\\t\\t\\t\\tready: false,\\n\\t\\t\\t\\toutBoundCallsAllowed: undefined, // set to true only if enterprise license is present.\\n\\t\\t\\t\\toutBoundCallsEnabled: undefined, // set to true even if enterprise license is not present.\\n\\t\\t\\t\\toutBoundCallsEnabledForUser: undefined, // set to true if the user has enterprise license, but is not able to make outbound calls. (busy, or disabled)\\n\\t\\t\\t};\\n\\t\\t}\\n\\n\\t\\tif (!user?.extension) {\\n\\t\\t\\treturn {\\n\\t\\t\\t\\tenabled: false,\\n\\t\\t\\t\\tready: false,\\n\\t\\t\\t\\toutBoundCallsAllowed: undefined, // set to true only if enterprise license is present.\\n\\t\\t\\t\\toutBoundCallsEnabled: undefined, // set to true even if enterprise license is not present.\\n\\t\\t\\t\\toutBoundCallsEnabledForUser: undefined, // set to true if the user has enterprise license, but is not able to make outbound calls. (busy, or disabled)\\n\\t\\t\\t};\\n\\t\\t}\\n\\n\\t\\tif (result.error) {\\n\\t\\t\\treturn {\\n\\t\\t\\t\\tenabled: true,\\n\\t\\t\\t\\tready: false,\\n\\t\\t\\t\\terror: result.error,\\n\\t\\t\\t\\toutBoundCallsAllowed: undefined, // set to true only if enterprise license is present.\\n\\t\\t\\t\\toutBoundCallsEnabled: undefined, // set to true even if enterprise license is not present.\\n\\t\\t\\t\\toutBoundCallsEnabledForUser: undefined, // set to true if the user has enterprise license, but is not able to make outbound calls. (busy, or disabled)\\n\\t\\t\\t};\\n\\t\\t}\\n\\n\\t\\tif (!result.voipClient) {\\n\\t\\t\\treturn {\\n\\t\\t\\t\\tenabled: true,\\n\\t\\t\\t\\tready: false,\\n\\t\\t\\t\\toutBoundCallsAllowed: undefined, // set to true only if enterprise license is present.\\n\\t\\t\\t\\toutBoundCallsEnabled: undefined, // set to true even if enterprise license is not present.\\n\\t\\t\\t\\toutBoundCallsEnabledForUser: undefined, // set to true if the user has enterprise license, but is not able to make outbound calls. (busy, or disabled)\\n\\t\\t\\t};\\n\\t\\t}\\n\\n\\t\\tconst { registrationInfo, voipClient } = result;\\n\\n\\t\\treturn {\\n\\t\\t\\toutBoundCallsAllowed: hasVoIPEnterpriseLicense, // set to true only if enterprise license is present.\\n\\t\\t\\toutBoundCallsEnabled: hasVoIPEnterpriseLicense, // set to true even if enterprise license is not present.\\n\\t\\t\\toutBoundCallsEnabledForUser:\\n\\t\\t\\t\\thasVoIPEnterpriseLicense && clientState === 'registered' && !['IN_CALL', 'ON_HOLD'].includes(voipClient.callerInfo.state), // set to true if the user has enterprise license, but is not able to make outbound calls. (busy, or disabled)\\n\\n\\t\\t\\tenabled: true,\\n\\t\\t\\tready: true,\\n\\t\\t\\topenedRoomInfo: roomInfo,\\n\\t\\t\\tvoipClient,\\n\\t\\t\\tregistrationInfo,\\n\\t\\t\\tqueueCounter,\\n\\t\\t\\tqueueName,\\n\\t\\t\\tactions: {\\n\\t\\t\\t\\tmute: (): Promise<void> => voipClient.muteCall(true), // voipClient.mute(),\\n\\t\\t\\t\\tunmute: (): Promise<void> => voipClient.muteCall(false), // voipClient.unmute()\\n\\t\\t\\t\\tpause: (): Promise<void> => voipClient.holdCall(true), // voipClient.pause()\\n\\t\\t\\t\\tresume: (): Promise<void> => voipClient.holdCall(false), // voipClient.resume()\\n\\t\\t\\t\\tend: (): Promise<OutgoingByeRequest | void> => voipClient.endCall(),\\n\\t\\t\\t\\tpickUp: async (): Promise<void | null> =>\\n\\t\\t\\t\\t\\tremoteAudioMediaRef.current && voipClient.acceptCall({ remoteMediaElement: remoteAudioMediaRef.current }),\\n\\t\\t\\t\\treject: (): Promise<void> => voipClient.rejectCall(),\\n\\t\\t\\t},\\n\\t\\t\\topenRoom,\\n\\t\\t\\tcreateRoom,\\n\\t\\t\\tcloseRoom,\\n\\t\\t\\tnetworkStatus,\\n\\t\\t\\topenWrapUpModal,\\n\\t\\t\\tchangeAudioOutputDevice,\\n\\t\\t\\tchangeAudioInputDevice,\\n\\t\\t\\tregister: (): void => voipClient.register(),\\n\\t\\t\\tunregister: (): void => voipClient.unregister(),\\n\\t\\t};\\n\\t}, [\\n\\t\\tvoipEnabled,\\n\\t\\tuser?.extension,\\n\\t\\tresult,\\n\\t\\thasVoIPEnterpriseLicense,\\n\\t\\tclientState,\\n\\t\\troomInfo,\\n\\t\\tqueueCounter,\\n\\t\\tqueueName,\\n\\t\\topenRoom,\\n\\t\\tcreateRoom,\\n\\t\\tcloseRoom,\\n\\t\\topenWrapUpModal,\\n\\t\\tchangeAudioOutputDevice,\\n\\t\\tchangeAudioInputDevice,\\n\\t\\tnetworkStatus,\\n\\t]);\\n\\n\\treturn (\\n\\t\\t<CallContext.Provider value={contextValue}>\\n\\t\\t\\t{children}\\n\\t\\t\\t{contextValue.enabled &&\\n\\t\\t\\t\\tcreatePortal(\\n\\t\\t\\t\\t\\t<audio ref={remoteAudioMediaRef}>\\n\\t\\t\\t\\t\\t\\t<track kind='captions' />\\n\\t\\t\\t\\t\\t</audio>,\\n\\t\\t\\t\\t\\tdocument.body,\\n\\t\\t\\t\\t)}\\n\\t\\t</CallContext.Provider>\\n\\t);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_slicedToArray\",\"export\",\"CallProvider\",\"VoipClientEvents\",\"isVoipEventAgentCalled\",\"isVoipEventAgentConnected\",\"isVoipEventCallerJoined\",\"isVoipEventQueueMemberAdded\",\"isVoipEventQueueMemberRemoved\",\"isVoipEventCallAbandoned\",\"UserState\",\"useMutableCallback\",\"Random\",\"useRouter\",\"useUser\",\"useSetting\",\"useEndpoint\",\"useStream\",\"useSetOutputMediaDevice\",\"useSetInputMediaDevice\",\"useSetModal\",\"useTranslation\",\"React\",\"useMemo\",\"useRef\",\"useCallback\",\"useEffect\",\"useState\",\"createPortal\",\"CallContext\",\"useIsVoipEnterprise\",\"useDialModal\",\"isOutboundClient\",\"useVoipClient\",\"roomCoordinator\",\"parseOutboundPhoneNumber\",\"WrapUpCallModal\",\"useVoipSounds\",\"_ref\",\"children\",\"_useState\",\"_useState2\",\"clientState\",\"setClientState\",\"voipEnabled\",\"subscribeToNotifyUser\",\"dispatchEvent\",\"visitorEndpoint\",\"voipEndpoint\",\"voipCloseRoomEndpoint\",\"getContactBy\",\"setModal\",\"t\",\"result\",\"user\",\"router\",\"setOutputMediaDevice\",\"setInputMediaDevice\",\"hasVoIPEnterpriseLicense\",\"remoteAudioMediaRef\",\"_useState3\",\"_useState4\",\"queueCounter\",\"setQueueCounter\",\"_useState5\",\"_useState6\",\"queueName\",\"setQueueName\",\"_useState7\",\"rid\",\"_useState8\",\"roomInfo\",\"setRoomInfo\",\"openDialModal\",\"_useDialModal\",\"voipSounds\",\"closeRoom\",\"_result$voipClient\",\"data\",\"queueAggregator\",\"_args\",\"arguments\",\"async\",\"_context\",\"prev\",\"next\",\"length\",\"undefined\",\"t0\",\"awrap\",\"token\",\"options\",\"comment\",\"tags\",\"navigate\",\"voipClient\",\"getAggregator\",\"callEnded\",\"stop\",\"Promise\",\"openWrapUpModal\",\"createElement\",\"changeAudioOutputDevice\",\"selectedAudioDevice\",\"current\",\"outputDevice\",\"HTMLAudioElement\",\"changeAudioInputDevice\",\"constraints\",\"audio\",\"deviceId\",\"exact\",\"id\",\"_useState9\",\"_useState10\",\"setQueueAggregator\",\"_useState11\",\"_useState12\",\"networkStatus\",\"setNetworkStatus\",\"_ref2\",\"unregister\",\"openRoom\",\"openRouteLink\",\"findOrCreateVisitor\",\"caller\",\"phone\",\"contact\",\"visitor\",\"_context2\",\"callerId\",\"_await$getContactBy\",\"sent\",\"abrupt\",\"name\",\"callerName\",\"_await$visitorEndpoin\",\"createRoom\",\"direction\",\"_result$voipClient2\",\"voipRoom\",\"_queueAggregator\",\"_args3\",\"_context3\",\"agentId\",\"_id\",\"room\",\"callStarted\",\"console\",\"error\",\"event\",\"_data\",\"_data2\",\"_data3\",\"_data4\",\"_data5\",\"_context4\",\"callRinging\",\"queuename\",\"queue\",\"callerid\",\"getCurrentQueueName\",\"callPickedup\",\"queuedcalls\",\"queuedCalls\",\"waittimeinqueue\",\"waitTimeInQueue\",\"getCallWaitingCount\",\"queueJoined\",\"memberAdded\",\"memberRemoved\",\"queueAbandoned\",\"queuedcallafterabandon\",\"queuedCallAfterAbandon\",\"warn\",\"roomId\",\"offRegistered\",\"on\",\"offUnregistered\",\"switchMediaRenderer\",\"remoteMediaElement\",\"onCallEstablished\",\"callDetails\",\"_result$voipClient3\",\"callInfo\",\"_context5\",\"stopAll\",\"userState\",\"UAC\",\"onNetworkConnected\",\"onNetworkDisconnected\",\"_result$voipClient5\",\"_result$voipClient6\",\"_result$voipClient4\",\"callerInfo\",\"state\",\"endCall\",\"rejectCall\",\"onRinging\",\"play\",\"onIncomingCallRinging\",\"onCallTerminated\",\"onCallFailed\",\"reason\",\"errorMessage\",\"onNetworkEvent\",\"_result$voipClient7\",\"_result$voipClient8\",\"_result$voipClient9\",\"_result$voipClient10\",\"_result$voipClient11\",\"_result$voipClient12\",\"_result$voipClient13\",\"_result$voipClient14\",\"_result$voipClient15\",\"_result$voipClient16\",\"offNetworkEvent\",\"off\",\"contextValue\",\"extension\",\"enabled\",\"ready\",\"outBoundCallsAllowed\",\"outBoundCallsEnabled\",\"outBoundCallsEnabledForUser\",\"registrationInfo\",\"includes\",\"openedRoomInfo\",\"actions\",\"mute\",\"muteCall\",\"unmute\",\"pause\",\"holdCall\",\"resume\",\"end\",\"pickUp\",\"_context6\",\"acceptCall\",\"reject\",\"register\",\"Provider\",\"value\",\"ref\",\"kind\",\"document\",\"body\"],\"mappings\":\"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\"}"}