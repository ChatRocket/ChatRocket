{"code":"function module(n,r,t){t.export({useMarketplaceActions:function(){return i}}),t.link(\"@tanstack/react-query\",{useMutation:function(n){a=n}},0),t.link(\"../helpers/handleAPIError\",{handleAPIError:function(n){e=n}},1),t.link(\"../helpers/warnAppInstall\",{warnAppInstall:function(n){s=n}},2),t.link(\"../helpers/warnStatusChange\",{warnStatusChange:function(n){o=n}},3),t.link(\"./useAppsOrchestration\",{useAppsOrchestration:function(n){u=n}},4);var a,e,s,o,u,i=function(){var n=u();if(!n)throw Error(\"Apps orchestrator is not available\");var r=a(function(r){var t=r.id,a=r.marketplaceVersion,e=r.permissionsGranted;return n.installApp(t,a,e)},{onSuccess:function(n,r){var t=n.status,a=r.name;t&&s(a,t)},onError:function(n){e(n)}}),t=a(function(r){var t=r.id,a=r.marketplaceVersion,e=r.permissionsGranted;return n.updateApp(t,a,e)},{onSuccess:function(n,r){var t=n.status,a=r.name;t&&o(a,t)},onError:function(n){e(n)}});return{purchase:r.mutateAsync,install:r.mutateAsync,update:t.mutateAsync}}}","map":"{\"version\":3,\"sources\":[\"client/views/marketplace/hooks/useMarketplaceActions.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { App, AppPermission } from '@rocket.chat/core-typings';\\nimport { useMutation } from '@tanstack/react-query';\\n\\nimport { handleAPIError } from '../helpers/handleAPIError';\\nimport { warnAppInstall } from '../helpers/warnAppInstall';\\nimport { warnStatusChange } from '../helpers/warnStatusChange';\\nimport { useAppsOrchestration } from './useAppsOrchestration';\\n\\ntype InstallAppParams = App & {\\n\\tpermissionsGranted?: AppPermission[];\\n};\\n\\ntype UpdateAppParams = App & {\\n\\tpermissionsGranted?: AppPermission[];\\n};\\n\\nexport const useMarketplaceActions = () => {\\n\\tconst appsOrchestrator = useAppsOrchestration();\\n\\n\\tif (!appsOrchestrator) {\\n\\t\\tthrow new Error('Apps orchestrator is not available');\\n\\t}\\n\\n\\tconst installAppMutation = useMutation(\\n\\t\\t({ id, marketplaceVersion, permissionsGranted }: InstallAppParams) =>\\n\\t\\t\\tappsOrchestrator.installApp(id, marketplaceVersion, permissionsGranted),\\n\\t\\t{\\n\\t\\t\\tonSuccess: ({ status }, { name }) => {\\n\\t\\t\\t\\tif (!status) return;\\n\\t\\t\\t\\twarnAppInstall(name, status);\\n\\t\\t\\t},\\n\\t\\t\\tonError: (error) => {\\n\\t\\t\\t\\thandleAPIError(error);\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n\\n\\tconst updateAppMutation = useMutation(\\n\\t\\t({ id, marketplaceVersion, permissionsGranted }: UpdateAppParams) =>\\n\\t\\t\\tappsOrchestrator.updateApp(id, marketplaceVersion, permissionsGranted),\\n\\t\\t{\\n\\t\\t\\tonSuccess: ({ status }, { name }) => {\\n\\t\\t\\t\\tif (!status) return;\\n\\t\\t\\t\\twarnStatusChange(name, status);\\n\\t\\t\\t},\\n\\t\\t\\tonError: (error) => {\\n\\t\\t\\t\\thandleAPIError(error);\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n\\n\\treturn {\\n\\t\\tpurchase: installAppMutation.mutateAsync,\\n\\t\\tinstall: installAppMutation.mutateAsync,\\n\\t\\tupdate: updateAppMutation.mutateAsync,\\n\\t} as const;\\n};\\n\",null],\"names\":[\"module\",\"export\",\"useMarketplaceActions\",\"link\",\"useMutation\",\"v\",\"handleAPIError\",\"warnAppInstall\",\"warnStatusChange\",\"useAppsOrchestration\",\"appsOrchestrator\",\"Error\",\"installAppMutation\",\"_ref\",\"id\",\"marketplaceVersion\",\"permissionsGranted\",\"installApp\",\"onSuccess\",\"_ref2\",\"_ref3\",\"status\",\"name\",\"onError\",\"error\",\"updateAppMutation\",\"_ref4\",\"updateApp\",\"_ref5\",\"_ref6\",\"purchase\",\"mutateAsync\",\"install\",\"update\"],\"mappings\":\"uBACAA,EAAOC,MAAE,CAAA,CAAAC,sBAAmB,WAAA,OAAwBA,CAAA,CAAA,GAAAF,EAAAG,IAAA,CAAA,wBAAA,CAAAC,YAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,4BAAA,CAAAG,eAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,4BAAA,CAAAI,eAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,8BAAA,CAAAK,iBAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,yBAAA,CAAAM,qBAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAe7C,IAf6CD,EAAAE,EAAAC,EAAAC,EAAAC,EAevCP,EAAwB,WACpC,IAAMQ,EAAmBD,IAEzB,GAAI,CAACC,EACJ,MAAM,AAAIC,MAAM,sCAGjB,IAAMC,EAAqBR,EAC1B,SAAAS,CAAA,EAAA,IAAGC,EAAED,EAAFC,EAAE,CAAEC,EAAkBF,EAAlBE,kBAAkB,CAAEC,EAAkBH,EAAlBG,kBAAkB,CAAA,OAC5CN,EAAiBO,UAAU,CAACH,EAAIC,EAAoBC,EAAmB,EACxE,CACCE,UAAW,SAAAC,CAAA,CAAAC,CAAA,EAAyB,IAAtBC,EAAMF,EAANE,MAAM,CAAMC,EAAIF,EAAJE,IAAI,CACxBD,GACLd,EAAee,EAAMD,EACtB,EACAE,QAAS,SAACC,CAAK,EACdlB,EAAekB,EAChB,IAIIC,EAAoBrB,EACzB,SAAAsB,CAAA,EAAA,IAAGZ,EAAEY,EAAFZ,EAAE,CAAEC,EAAkBW,EAAlBX,kBAAkB,CAAEC,EAAkBU,EAAlBV,kBAAkB,CAAA,OAC5CN,EAAiBiB,SAAS,CAACb,EAAIC,EAAoBC,EAAmB,EACvE,CACCE,UAAW,SAAAU,CAAA,CAAAC,CAAA,EAAyB,IAAtBR,EAAMO,EAANP,MAAM,CAAMC,EAAIO,EAAJP,IAAI,CACxBD,GACLb,EAAiBc,EAAMD,EACxB,EACAE,QAAS,SAACC,CAAK,EACdlB,EAAekB,EAChB,IAIF,MAAO,CACNM,SAAUlB,EAAmBmB,WAAW,CACxCC,QAASpB,EAAmBmB,WAAW,CACvCE,OAAQR,EAAkBM,WAAAA,CAE5B\"}"}