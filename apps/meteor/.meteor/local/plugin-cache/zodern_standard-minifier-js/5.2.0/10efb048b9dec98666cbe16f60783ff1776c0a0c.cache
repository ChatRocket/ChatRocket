{"code":"function module(e,n,r){var t,u;function a(e){return String.fromCharCode.apply(String,u(new Uint16Array(e)))}function c(){var e,n;return t.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.awrap(crypto.subtle.generateKey({name:\"AES-GCM\",length:256},!0,[\"encrypt\",\"decrypt\"]));case 2:return e=r.sent,r.next=5,t.awrap(crypto.subtle.exportKey(\"jwk\",e));case 5:return n=r.sent,r.abrupt(\"return\",JSON.stringify(n));case 7:case\"end\":return r.stop()}},null,null,null,Promise)}function o(e){var n;return t.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=JSON.parse(e),r.abrupt(\"return\",crypto.subtle.importKey(\"jwk\",n,{name:\"AES-GCM\",length:256},!0,[\"encrypt\",\"decrypt\"]));case 2:case\"end\":return r.stop()}},null,null,null,Promise)}function s(e,n){var r,u,c,o;return t.async(function(s){for(;;)switch(s.prev=s.next){case 0:return r=crypto.getRandomValues(new Uint8Array(16)),u=new TextEncoder().encode(e),s.next=4,t.awrap(crypto.subtle.encrypt({name:\"AES-GCM\",iv:r},n,u));case 4:return c=s.sent,o=new Uint8Array(c),s.abrupt(\"return\",encodeURIComponent(btoa(a(r)+a(o))));case 7:case\"end\":return s.stop()}},null,null,null,Promise)}r.link(\"@babel/runtime/regenerator\",{default:function(e){t=e}},0),r.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){u=e}},1),r.export({generateKey:function(){return c},getKeyFromString:function(){return o},encrypt:function(){return s}})}","map":"{\"version\":3,\"sources\":[\"app/livechat/client/externalFrame/crypto.ts\",\"<anon>\"],\"sourcesContent\":[\"function ab2str(buf: ArrayBuffer): string {\\n\\treturn String.fromCharCode(...new Uint16Array(buf));\\n}\\n\\nexport async function generateKey(): Promise<string> {\\n\\tconst key = await crypto.subtle.generateKey({ name: 'AES-GCM', length: 256 }, true, ['encrypt', 'decrypt']);\\n\\tconst exportedKey = await crypto.subtle.exportKey('jwk', key);\\n\\treturn JSON.stringify(exportedKey);\\n}\\n\\nexport async function getKeyFromString(keyStr: string): Promise<CryptoKey> {\\n\\tconst key = JSON.parse(keyStr);\\n\\treturn crypto.subtle.importKey('jwk', key, { name: 'AES-GCM', length: 256 }, true, ['encrypt', 'decrypt']);\\n}\\n\\nexport async function encrypt(text: string, key: CryptoKey): Promise<string> {\\n\\tconst vector = crypto.getRandomValues(new Uint8Array(16));\\n\\tconst data = new TextEncoder().encode(text);\\n\\tconst enc = await crypto.subtle.encrypt({ name: 'AES-GCM', iv: vector }, key, data);\\n\\tconst cipherText = new Uint8Array(enc);\\n\\treturn encodeURIComponent(btoa(ab2str(vector) + ab2str(cipherText)));\\n}\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_toConsumableArray\",\"ab2str\",\"buf\",\"String\",\"fromCharCode\",\"apply\",\"Uint16Array\",\"generateKey\",\"key\",\"exportedKey\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"crypto\",\"subtle\",\"name\",\"length\",\"sent\",\"exportKey\",\"abrupt\",\"JSON\",\"stringify\",\"stop\",\"Promise\",\"getKeyFromString\",\"keyStr\",\"_context2\",\"parse\",\"importKey\",\"encrypt\",\"text\",\"vector\",\"data\",\"enc\",\"cipherText\",\"_context3\",\"getRandomValues\",\"Uint8Array\",\"TextEncoder\",\"encode\",\"iv\",\"encodeURIComponent\",\"btoa\",\"module\",\"link\",\"default\",\"v\",\"export\"],\"mappings\":\"2BAAAA,EAAgCC,EAAhC,SAASC,EAAOC,CAAgB,EAC/B,OAAOC,OAAOC,YAAY,CAAAC,KAAA,CAAnBF,OAAMH,EAAiB,IAAIM,YAAYJ,IAC/C,CAEO,SAAeK,IAAW,IAAAC,EAAAC,EAAA,OAAAV,EAAAW,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAAd,EAAAe,KAAA,CACdC,OAAOC,MAAM,CAACT,WAAW,CAAC,CAAEU,KAAM,UAAWC,OAAQ,GAAG,EAAI,CAAA,EAAM,CAAC,UAAW,UAAU,EAAC,MAAA,EAAlG,OAAHV,EAAGG,EAAAQ,IAAA,CAAAR,EAAAE,IAAA,CAAA,EAAAd,EAAAe,KAAA,CACiBC,OAAOC,MAAM,CAACI,SAAS,CAAC,MAAOZ,GAAI,MAAA,EAA5C,OAAXC,EAAWE,EAAAQ,IAAA,CAAAR,EAAAU,MAAA,CAAA,SACVC,KAAKC,SAAS,CAACd,GAAY,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAa,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,CAG5B,SAAeC,EAAiBC,CAAc,EAAA,IAAAnB,EAAA,OAAAT,EAAAW,KAAA,CAAA,SAAAkB,CAAA,EAAA,OAAA,OAAAA,EAAAhB,IAAA,CAAAgB,EAAAf,IAAA,EAAA,KAAA,EACtB,OAAxBL,EAAMc,KAAKO,KAAK,CAACF,GAAOC,EAAAP,MAAA,CAAA,SACvBN,OAAOC,MAAM,CAACc,SAAS,CAAC,MAAOtB,EAAK,CAAES,KAAM,UAAWC,OAAQ,GAAG,EAAI,CAAA,EAAM,CAAC,UAAW,UAAU,EAAC,MAAA,EAAA,IAAA,MAAA,OAAAU,EAAAJ,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,CAGpG,SAAeM,EAAQC,CAAY,CAAExB,CAAc,EAAA,IAAAyB,EAAAC,EAAAC,EAAAC,EAAA,OAAArC,EAAAW,KAAA,CAAA,SAAA2B,CAAA,EAAA,OAAA,OAAAA,EAAAzB,IAAA,CAAAyB,EAAAxB,IAAA,EAAA,KAAA,EAEd,OADrCoB,EAASlB,OAAOuB,eAAe,CAAC,IAAIC,WAAW,KAC/CL,EAAO,IAAIM,cAAcC,MAAM,CAACT,GAAKK,EAAAxB,IAAA,CAAA,EAAAd,EAAAe,KAAA,CACzBC,OAAOC,MAAM,CAACe,OAAO,CAAC,CAAEd,KAAM,UAAWyB,GAAIT,CAAM,EAAIzB,EAAK0B,GAAK,MAAA,EAC7C,OADhCC,EAAGE,EAAAlB,IAAA,CACHiB,EAAa,IAAIG,WAAWJ,GAAIE,EAAAhB,MAAA,CAAA,SAC/BsB,mBAAmBC,KAAK3C,EAAOgC,GAAUhC,EAAOmC,KAAa,MAAA,EAAA,IAAA,MAAA,OAAAC,EAAAb,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,CApBrCoB,EAAAC,IAAA,CAAA,6BAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAjD,EAAAiD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAhD,EAAAgD,CAAA,CAAA,EAAA,GAAhCH,EAAAI,MAAS,CAAA,CAAM1C,YAAiB,WAAA,OAAAA,CAAA,EAAAmB,iBAAA,WAAA,OAAAA,CAAA,EAAAK,QAAA,WAAA,OAAAA,CAAA,CAAA\"}"}