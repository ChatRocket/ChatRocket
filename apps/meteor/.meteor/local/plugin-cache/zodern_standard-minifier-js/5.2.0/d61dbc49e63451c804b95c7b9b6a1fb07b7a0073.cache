{"code":"function module(e,n,t){t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){o=e}},0),t.link(\"@rocket.chat/fuselage\",{Box:function(e){u=e},Tile:function(e){i=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMergedRefs:function(e){r=e},usePosition:function(e){l=e}},1),t.link(\"react\",{default:function(e){c=e},useMemo:function(e){f=e},useRef:function(e){d=e},forwardRef:function(e){a=e}},2);var o,u,i,r,l,c,f,d,a,m=function(e){for(var n,t=null!=e?e:document.body;t!==document.body;t=null!==(n=t.parentElement)&&void 0!==n?n:document.body)if(\"none\"!==getComputedStyle(t).transform||\"fixed\"===getComputedStyle(t).position||\"transform\"===getComputedStyle(t).willChange)return t;return document.body},p=function(e,n){var t,u,i,r=m(e.current),c=document.body.getBoundingClientRect().height,d=null!==(t=null===(u=e.current)||void 0===u?void 0:u.getBoundingClientRect().top)&&void 0!==t?t:0,a=(null===(i=n.current)||void 0===i?void 0:i.getBoundingClientRect().height)||0,p=f(function(){return d>=c/2?\"top-start\":\"bottom-end\"},[a,d]),s=f(function(){return\"bottom-end\"===p?\"482px\":d-12+\"px\"},[p,d]),g=l(e,n,{placement:p,container:r}).style;return f(function(){return o(o({},g),{},{maxHeight:s})},[g])},s=a(function(e,n){var t=e.reference,o=e.children,l=d(null),f=r(n,l),a=p(t,l);return c.createElement(i,{style:a,ref:f,elevation:\"2\",pi:\"0\",pb:\"0\",display:\"flex\",flexDirection:\"column\",overflow:\"auto\"},c.createElement(u,{flexShrink:1,pb:12},o))});t.exportDefault(s)}","map":"{\"version\":3,\"sources\":[\"client/views/composer/EmojiPicker/EmojiPickerDesktopDropdown.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Tile } from '@rocket.chat/fuselage';\\nimport { useMergedRefs, usePosition } from '@rocket.chat/fuselage-hooks';\\nimport type { ReactNode, Ref, RefObject } from 'react';\\nimport React, { useMemo, useRef, forwardRef } from 'react';\\n\\nconst getDropdownContainer = (descendant: HTMLElement | null) => {\\n\\tfor (let element = descendant ?? document.body; element !== document.body; element = element.parentElement ?? document.body) {\\n\\t\\tif (\\n\\t\\t\\tgetComputedStyle(element).transform !== 'none' ||\\n\\t\\t\\tgetComputedStyle(element).position === 'fixed' ||\\n\\t\\t\\tgetComputedStyle(element).willChange === 'transform'\\n\\t\\t) {\\n\\t\\t\\treturn element;\\n\\t\\t}\\n\\t}\\n\\n\\treturn document.body;\\n};\\n\\nconst useDropdownPosition = (reference: RefObject<HTMLElement>, target: RefObject<HTMLElement>) => {\\n\\tconst innerContainer = getDropdownContainer(reference.current);\\n\\tconst viewHeight = document.body.getBoundingClientRect().height;\\n\\tconst refTop = reference.current?.getBoundingClientRect().top ?? 0;\\n\\tconst targetHeight = target.current?.getBoundingClientRect().height || 0;\\n\\n\\tconst placement = useMemo(() => {\\n\\t\\tif (refTop >= viewHeight / 2) {\\n\\t\\t\\treturn 'top-start';\\n\\t\\t}\\n\\t\\treturn 'bottom-end';\\n\\t}, [targetHeight, refTop]);\\n\\n\\tconst maxHeight = useMemo(() => (placement === 'bottom-end' ? '482px' : `${refTop - 12}px`), [placement, refTop]);\\n\\n\\tconst { style } = usePosition(reference, target, {\\n\\t\\tplacement,\\n\\t\\tcontainer: innerContainer,\\n\\t});\\n\\n\\treturn useMemo(() => {\\n\\t\\treturn { ...style, maxHeight };\\n\\t}, [style]);\\n};\\n\\ntype EmojiPickerDesktopDropdownProps = {\\n\\tchildren: ReactNode;\\n\\treference: RefObject<HTMLElement>;\\n};\\n\\n/**\\n * @reference is the trigger element target\\n * @ref is the dropdown element target\\n *  */\\nconst EmojiPickerDesktopDropdown = forwardRef(function ToolboxDropdownDesktop(\\n\\t{ reference, children }: EmojiPickerDesktopDropdownProps,\\n\\tref: Ref<HTMLElement>,\\n) {\\n\\tconst targetRef = useRef<HTMLElement>(null);\\n\\tconst mergedRef = useMergedRefs(ref, targetRef);\\n\\n\\tconst style = useDropdownPosition(reference, targetRef);\\n\\n\\treturn (\\n\\t\\t<Tile style={style} ref={mergedRef} elevation='2' pi='0' pb='0' display='flex' flexDirection='column' overflow='auto'>\\n\\t\\t\\t<Box flexShrink={1} pb={12}>\\n\\t\\t\\t\\t{children}\\n\\t\\t\\t</Box>\\n\\t\\t</Tile>\\n\\t);\\n});\\n\\nexport default EmojiPickerDesktopDropdown;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"Box\",\"Tile\",\"useMergedRefs\",\"usePosition\",\"React\",\"useMemo\",\"useRef\",\"forwardRef\",\"getDropdownContainer\",\"descendant\",\"_element$parentElemen\",\"element\",\"document\",\"body\",\"parentElement\",\"getComputedStyle\",\"transform\",\"position\",\"willChange\",\"useDropdownPosition\",\"reference\",\"target\",\"_reference$current$ge\",\"_reference$current\",\"_target$current\",\"innerContainer\",\"current\",\"viewHeight\",\"getBoundingClientRect\",\"height\",\"refTop\",\"top\",\"targetHeight\",\"placement\",\"maxHeight\",\"style\",\"_usePosition\",\"container\",\"EmojiPickerDesktopDropdown\",\"_ref\",\"ref\",\"children\",\"targetRef\",\"mergedRef\",\"createElement\",\"elevation\",\"pi\",\"pb\",\"display\",\"flexDirection\",\"overflow\",\"flexShrink\",\"exportDefault\"],\"mappings\":\"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\"}"}