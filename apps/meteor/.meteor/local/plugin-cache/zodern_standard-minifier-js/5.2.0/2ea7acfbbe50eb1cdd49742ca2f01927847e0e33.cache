{"code":"function module(e,t,n){let a,r,l,o,s,c,u,i,m,d,_,p,k,T,f,y,h,E;n.link(\"@babel/runtime/helpers/extends\",{default(e){a=e}},0),n.link(\"@rocket.chat/fuselage\",{Box(e){r=e},TextInput(e){l=e},Button(e){o=e},Margins(e){s=e},Select(e){c=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useSetModal(e){u=e},useToastMessageDispatch(e){i=e},useUserId(e){m=e},useMethod(e){d=e},useTranslation(e){_=e}},1),n.link(\"react\",{default(e){p=e},useCallback(e){k=e},useMemo(e){T=e},useEffect(e){f=e}},2),n.link(\"react-hook-form\",{Controller(e){y=e},useForm(e){h=e}},3),n.link(\"../../../../components/GenericModal\",{default(e){E=e}},4),n.exportDefault(e=>{let{reload:t}=e,n=_(),b=m(),A=u(),x=d(\"personalAccessTokens:generateToken\"),I=i(),g=T(()=>({name:\"\",bypassTwoFactor:\"require\"}),[]),{register:w,resetField:F,handleSubmit:M,control:P,formState:{isSubmitted:S,submitCount:q}}=h({defaultValues:g}),C=T(()=>[[\"require\",n(\"Require_Two_Factor_Authentication\")],[\"bypass\",n(\"Ignore_Two_Factor_Authentication\")]],[n]),G=k(async e=>{let{name:t,bypassTwoFactor:a}=e;try{let e=await x({tokenName:t,bypassTwoFactor:\"bypass\"===a});A(p.createElement(E,{title:n(\"API_Personal_Access_Token_Generated\"),onConfirm:()=>A(null),onClose:()=>A(null)},p.createElement(r,{dangerouslySetInnerHTML:{__html:n(\"API_Personal_Access_Token_Generated_Text_Token_s_UserId_s\",{token:e,userId:b})}})))}catch(e){I({type:\"error\",message:e})}},[x,I,A,n,b]);return f(()=>{F(\"name\"),t()},[S,q,t,F]),p.createElement(r,{display:\"flex\",is:\"form\",onSubmit:M(G),mb:8},p.createElement(r,{display:\"flex\",width:\"100%\"},p.createElement(s,{inlineEnd:4},p.createElement(l,a({\"data-qa\":\"PersonalTokenField\"},w(\"name\"),{placeholder:n(\"API_Add_Personal_Access_Token\")})),p.createElement(r,null,p.createElement(y,{name:\"bypassTwoFactor\",control:P,render:e=>{let{field:t}=e;return p.createElement(c,a({},t,{options:C}))}})))),p.createElement(o,{primary:!0,type:\"submit\"},n(\"Add\")))})}","map":"{\"version\":3,\"sources\":[\"client/views/account/tokens/AccountTokensTable/AddToken.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { SelectOption } from '@rocket.chat/fuselage';\\nimport { Box, TextInput, Button, Margins, Select } from '@rocket.chat/fuselage';\\nimport { useSetModal, useToastMessageDispatch, useUserId, useMethod, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback, useMemo, useEffect } from 'react';\\nimport { Controller, useForm } from 'react-hook-form';\\n\\nimport GenericModal from '../../../../components/GenericModal';\\n\\nconst AddToken = ({ reload }: { reload: () => void }): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst userId = useUserId();\\n\\tconst setModal = useSetModal();\\n\\tconst createTokenFn = useMethod('personalAccessTokens:generateToken');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst initialValues = useMemo(() => ({ name: '', bypassTwoFactor: 'require' }), []);\\n\\n\\tconst {\\n\\t\\tregister,\\n\\t\\tresetField,\\n\\t\\thandleSubmit,\\n\\t\\tcontrol,\\n\\t\\tformState: { isSubmitted, submitCount },\\n\\t} = useForm({ defaultValues: initialValues });\\n\\n\\tconst twoFactorAuthOptions: SelectOption[] = useMemo(\\n\\t\\t() => [\\n\\t\\t\\t['require', t('Require_Two_Factor_Authentication')],\\n\\t\\t\\t['bypass', t('Ignore_Two_Factor_Authentication')],\\n\\t\\t],\\n\\t\\t[t],\\n\\t);\\n\\n\\tconst handleAddToken = useCallback(\\n\\t\\tasync ({ name: tokenName, bypassTwoFactor }) => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst token = await createTokenFn({ tokenName, bypassTwoFactor: bypassTwoFactor === 'bypass' });\\n\\n\\t\\t\\t\\tsetModal(\\n\\t\\t\\t\\t\\t<GenericModal title={t('API_Personal_Access_Token_Generated')} onConfirm={() => setModal(null)} onClose={() => setModal(null)}>\\n\\t\\t\\t\\t\\t\\t<Box\\n\\t\\t\\t\\t\\t\\t\\tdangerouslySetInnerHTML={{\\n\\t\\t\\t\\t\\t\\t\\t\\t__html: t('API_Personal_Access_Token_Generated_Text_Token_s_UserId_s', {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttoken,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tuserId,\\n\\t\\t\\t\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</GenericModal>,\\n\\t\\t\\t\\t);\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[createTokenFn, dispatchToastMessage, setModal, t, userId],\\n\\t);\\n\\n\\tuseEffect(() => {\\n\\t\\tresetField('name');\\n\\t\\treload();\\n\\t}, [isSubmitted, submitCount, reload, resetField]);\\n\\n\\treturn (\\n\\t\\t<Box display='flex' is='form' onSubmit={handleSubmit(handleAddToken)} mb={8}>\\n\\t\\t\\t<Box display='flex' width='100%'>\\n\\t\\t\\t\\t<Margins inlineEnd={4}>\\n\\t\\t\\t\\t\\t<TextInput data-qa='PersonalTokenField' {...register('name')} placeholder={t('API_Add_Personal_Access_Token')} />\\n\\t\\t\\t\\t\\t<Box>\\n\\t\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\t\\tname='bypassTwoFactor'\\n\\t\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\t\\trender={({ field }) => <Select {...field} options={twoFactorAuthOptions} />}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t</Margins>\\n\\t\\t\\t</Box>\\n\\t\\t\\t<Button primary type='submit'>\\n\\t\\t\\t\\t{t('Add')}\\n\\t\\t\\t</Button>\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default AddToken;\\n\",null],\"names\":[\"_extends\",\"Box\",\"TextInput\",\"Button\",\"Margins\",\"Select\",\"useSetModal\",\"useToastMessageDispatch\",\"useUserId\",\"useMethod\",\"useTranslation\",\"React\",\"useCallback\",\"useMemo\",\"useEffect\",\"Controller\",\"useForm\",\"GenericModal\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"reload\",\"t\",\"userId\",\"setModal\",\"createTokenFn\",\"dispatchToastMessage\",\"initialValues\",\"name\",\"bypassTwoFactor\",\"register\",\"resetField\",\"handleSubmit\",\"control\",\"formState\",\"isSubmitted\",\"submitCount\",\"defaultValues\",\"twoFactorAuthOptions\",\"handleAddToken\",\"_ref2\",\"tokenName\",\"token\",\"createElement\",\"title\",\"onConfirm\",\"onClose\",\"dangerouslySetInnerHTML\",\"__html\",\"error\",\"type\",\"message\",\"display\",\"is\",\"onSubmit\",\"mb\",\"width\",\"inlineEnd\",\"placeholder\",\"render\",\"_ref3\",\"field\",\"options\",\"primary\"],\"mappings\":\"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\"}"}