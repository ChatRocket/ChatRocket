{"code":"function module(e,t,a){let r,u,n,i,s,c;a.export({useStepRouting:()=>l}),a.link(\"@rocket.chat/ui-contexts\",{useRouteParameter(e){r=e},useRouter(e){u=e},useRole(e){n=e},useSetting(e){i=e}},0),a.link(\"react\",{useState(e){s=e},useEffect(e){c=e}},1);let l=()=>{let e=r(\"step\"),t=u(),a=n(\"admin\"),l=!!i(\"Organization_Name\"),[o,d]=s(()=>{let t=(()=>{switch(!0){case l:return 3;case a:return 2;default:return 1}})();if(!e)return t;let r=parseInt(e,10);return r&&Number.isFinite(r)&&r>=1?r:t});return c(()=>{switch(!0){case(1===o||2===o)&&l:d(3),t.navigate(\"/setup-wizard/3\");break;case 1===o&&a:d(2),t.navigate(\"/setup-wizard/2\");break;default:t.navigate(\"/setup-wizard/\".concat(o))}},[t,o,a,l]),[o,d]}}","map":"{\"version\":3,\"sources\":[\"client/views/setupWizard/hooks/useStepRouting.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useRouteParameter, useRouter, useRole, useSetting } from '@rocket.chat/ui-contexts';\\nimport type { Dispatch, SetStateAction } from 'react';\\nimport { useState, useEffect } from 'react';\\n\\nexport const useStepRouting = (): [number, Dispatch<SetStateAction<number>>] => {\\n\\tconst param = useRouteParameter('step');\\n\\tconst router = useRouter();\\n\\tconst hasAdminRole = useRole('admin');\\n\\tconst hasOrganizationData = !!useSetting('Organization_Name');\\n\\n\\tconst [currentStep, setCurrentStep] = useState<number>(() => {\\n\\t\\tconst initialStep = (() => {\\n\\t\\t\\tswitch (true) {\\n\\t\\t\\t\\tcase hasOrganizationData: {\\n\\t\\t\\t\\t\\treturn 3;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tcase hasAdminRole: {\\n\\t\\t\\t\\t\\treturn 2;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tdefault: {\\n\\t\\t\\t\\t\\treturn 1;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t})();\\n\\n\\t\\tif (!param) {\\n\\t\\t\\treturn initialStep;\\n\\t\\t}\\n\\n\\t\\tconst step = parseInt(param, 10);\\n\\t\\tif (step && Number.isFinite(step) && step >= 1) {\\n\\t\\t\\treturn step;\\n\\t\\t}\\n\\n\\t\\treturn initialStep;\\n\\t});\\n\\n\\tuseEffect(() => {\\n\\t\\tswitch (true) {\\n\\t\\t\\tcase (currentStep === 1 || currentStep === 2) && hasOrganizationData: {\\n\\t\\t\\t\\tsetCurrentStep(3);\\n\\t\\t\\t\\trouter.navigate(`/setup-wizard/3`);\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\n\\t\\t\\tcase currentStep === 1 && hasAdminRole: {\\n\\t\\t\\t\\tsetCurrentStep(2);\\n\\t\\t\\t\\trouter.navigate(`/setup-wizard/2`);\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\n\\t\\t\\tdefault: {\\n\\t\\t\\t\\trouter.navigate(`/setup-wizard/${currentStep}`);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}, [router, currentStep, hasAdminRole, hasOrganizationData]);\\n\\n\\treturn [currentStep, setCurrentStep];\\n};\\n\",null],\"names\":[\"useRouteParameter\",\"useRouter\",\"useRole\",\"useSetting\",\"useState\",\"useEffect\",\"module\",\"export\",\"useStepRouting\",\"link\",\"v\",\"param\",\"router\",\"hasAdminRole\",\"hasOrganizationData\",\"currentStep\",\"setCurrentStep\",\"initialStep\",\"step\",\"parseInt\",\"Number\",\"isFinite\",\"navigate\",\"concat\"],\"mappings\":\"2BAAgDA,EAAkBC,EAAAC,EAAAC,EAA2BC,EAAAC,EAA7FC,EAAOC,MAAE,CAAA,CAAAC,eAAmBA,IAAAA,CAAoB,GAA6CF,EAAAG,IAAA,CAAA,2BAAA,CAAAT,kBAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,UAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,QAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,WAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAL,SAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,UAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAItF,IAAMF,EAAiBA,KAC7B,IAAMG,EAAQX,EAAkB,QAC1BY,EAASX,IACTY,EAAeX,EAAQ,SACvBY,EAAsB,CAAC,CAACX,EAAW,qBAEnC,CAACY,EAAaC,EAAe,CAAGZ,EAAiB,KACtD,IAAMa,EAAc,AAAC,CAAA,KACpB,OAAQ,CAAA,GACP,KAAKH,EACJ,OAAO,CAER,MAAKD,EACJ,OAAO,CAER,SACC,OAAO,CAET,CACD,CAAA,IAEA,GAAI,CAACF,EACJ,OAAOM,EAGR,IAAMC,EAAOC,SAASR,EAAO,WAC7B,AAAIO,GAAQE,OAAOC,QAAQ,CAACH,IAASA,GAAQ,EACrCA,EAGDD,CACR,GAsBA,OApBAZ,EAAU,KACT,OAAQ,CAAA,GACP,IAAK,AAACU,CAAAA,AAAgB,IAAhBA,GAAqBA,AAAgB,IAAhBA,CAAgB,GAAMD,EAChDE,EAAe,GACfJ,EAAOU,QAAQ,CAAA,mBACf,KAGD,MAAKP,AAAgB,IAAhBA,GAAqBF,EACzBG,EAAe,GACfJ,EAAOU,QAAQ,CAAA,mBACf,KAGD,SACCV,EAAOU,QAAQ,CAAA,iBAAAC,MAAA,CAAkBR,GAEnC,CACD,EAAG,CAACH,EAAQG,EAAaF,EAAcC,EAAoB,EAEpD,CAACC,EAAaC,EAAe,AACrC\"}"}