{"code":"function module(e,t,l){let i,o,a,n,c,r,d,s;l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){i=e}},0),l.export({useWebRTCVideoRoomAction:()=>u}),l.link(\"@rocket.chat/core-typings\",{isRoomFederated(e){o=e}},0),l.link(\"@rocket.chat/ui-contexts\",{useSetting(e){a=e}},1),l.link(\"react\",{useCallback(e){n=e},useMemo(e){c=e}},2),l.link(\"react-i18next\",{useTranslation(e){r=e}},3),l.link(\"../../../app/utils/client/lib/SDKClient\",{sdk(e){d=e}},4),l.link(\"../../views/room/contexts/RoomContext\",{useRoom(e){s=e}},5);let u=()=>{let e=a(\"WebRTC_Enabled\",!1),t=s(),l=o(t),u=a(\"Omnichannel_call_provider\",\"default-provider\"),b=e&&\"WebRTC\"===u&&t.servedBy,{t:p}=r(),k=n(async()=>{t.callStatus&&\"declined\"!==t.callStatus&&\"ended\"!==t.callStatus||await d.rest.get(\"/v1/livechat/webrtc.call\",{rid:t._id}),window.open(\"/meet/\".concat(t._id),t._id)},[t._id,t.callStatus]);return c(()=>{if(b)return i(i({id:\"webRTCVideo\",groups:[\"live\"],title:\"WebRTC_Call\",icon:\"phone\"},l&&{tooltip:p(\"core.Call_unavailable_for_federation\"),disabled:!0}),{},{action:()=>void k(),full:!0,order:4})},[b,l,k,p])}}","map":"{\"version\":3,\"sources\":[\"client/hooks/roomActions/useWebRTCVideoRoomAction.ts\",\"<anon>\"],\"sourcesContent\":[\"import { isRoomFederated } from '@rocket.chat/core-typings';\\nimport { useSetting } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\\nimport { useRoom } from '../../views/room/contexts/RoomContext';\\nimport type { RoomToolboxActionConfig } from '../../views/room/contexts/RoomToolboxContext';\\n\\nexport const useWebRTCVideoRoomAction = () => {\\n\\tconst enabled = useSetting('WebRTC_Enabled', false);\\n\\tconst room = useRoom();\\n\\tconst federated = isRoomFederated(room);\\n\\tconst callProvider = useSetting<string>('Omnichannel_call_provider', 'default-provider');\\n\\n\\tconst allowed = enabled && callProvider === 'WebRTC' && room.servedBy;\\n\\n\\tconst { t } = useTranslation();\\n\\n\\tconst handleClick = useCallback(async () => {\\n\\t\\tif (!room.callStatus || room.callStatus === 'declined' || room.callStatus === 'ended') {\\n\\t\\t\\tawait sdk.rest.get('/v1/livechat/webrtc.call', { rid: room._id });\\n\\t\\t}\\n\\t\\twindow.open(`/meet/${room._id}`, room._id);\\n\\t}, [room._id, room.callStatus]);\\n\\n\\treturn useMemo((): RoomToolboxActionConfig | undefined => {\\n\\t\\tif (!allowed) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\treturn {\\n\\t\\t\\tid: 'webRTCVideo',\\n\\t\\t\\tgroups: ['live'],\\n\\t\\t\\ttitle: 'WebRTC_Call',\\n\\t\\t\\ticon: 'phone',\\n\\t\\t\\t...(federated && {\\n\\t\\t\\t\\ttooltip: t('core.Call_unavailable_for_federation'),\\n\\t\\t\\t\\tdisabled: true,\\n\\t\\t\\t}),\\n\\t\\t\\taction: () => void handleClick(),\\n\\t\\t\\tfull: true,\\n\\t\\t\\torder: 4,\\n\\t\\t};\\n\\t}, [allowed, federated, handleClick, t]);\\n};\\n\",null],\"names\":[\"_objectSpread\",\"isRoomFederated\",\"useSetting\",\"useCallback\",\"useMemo\",\"useTranslation\",\"sdk\",\"useRoom\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useWebRTCVideoRoomAction\",\"enabled\",\"room\",\"federated\",\"callProvider\",\"allowed\",\"servedBy\",\"t\",\"handleClick\",\"callStatus\",\"rest\",\"get\",\"rid\",\"_id\",\"window\",\"open\",\"concat\",\"id\",\"groups\",\"title\",\"icon\",\"tooltip\",\"disabled\",\"action\",\"full\",\"order\"],\"mappings\":\"2BAAAA,EAA4DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAnDC,EAAeC,IAAE,CAAA,uCAAkC,CAAAC,QAAAC,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAA5DH,EAAOI,MAAE,CAAA,CAAAC,yBAAuBA,IAAAA,CAA4B,GAAAL,EAAAC,IAAA,CAAA,4BAAA,CAAAR,gBAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAP,WAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAN,YAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,QAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAJ,eAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0CAAA,CAAAH,IAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wCAAA,CAAAF,QAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GASrD,IAAME,EAA2BA,KACvC,IAAMC,EAAUZ,EAAW,iBAAkB,CAAA,GACvCa,EAAOR,IACPS,EAAYf,EAAgBc,GAC5BE,EAAef,EAAmB,4BAA6B,oBAE/DgB,EAAUJ,GAAWG,AAAiB,WAAjBA,GAA6BF,EAAKI,QAAQ,CAE/D,CAAEC,EAAAA,CAAAA,CAAG,CAAGf,IAERgB,EAAclB,EAAY,UAC1BY,EAAKO,UAAU,EAAIP,AAAoB,aAApBA,EAAKO,UAAU,EAAmBP,AAAoB,UAApBA,EAAKO,UAAU,EACxE,MAAMhB,EAAIiB,IAAI,CAACC,GAAG,CAAC,2BAA4B,CAAEC,IAAKV,EAAKW,GAAAA,AAAG,GAE/DC,OAAOC,IAAI,CAAA,SAAAC,MAAA,CAAUd,EAAKW,GAAG,EAAIX,EAAKW,GAAG,CAC1C,EAAG,CAACX,EAAKW,GAAG,CAAEX,EAAKO,UAAU,CAAC,EAE9B,OAAOlB,EAAQ,KACd,GAAKc,EAIL,OAAAlB,EAAAA,EAAA,CACC8B,GAAI,cACJC,OAAQ,CAAC,OAAO,CAChBC,MAAO,cACPC,KAAM,OAAO,EACTjB,GAAa,CAChBkB,QAASd,EAAE,wCACXe,SAAU,CAAA,IACV,CAAA,EAAA,CACDC,OAAQA,IAAM,KAAKf,IACnBgB,KAAM,CAAA,EACNC,MAAO,CAAC,EAEV,EAAG,CAACpB,EAASF,EAAWK,EAAaD,EAAE,CACxC\"}"}