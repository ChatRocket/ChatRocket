{"code":"function module(e,t,n){let a,i,o,l,s,u,c,r,d,m,_,h,k,v;n.link(\"@babel/runtime/helpers/extends\",{default(e){a=e}},0),n.export({ComposerOmnichannelInquiry:()=>f}),n.link(\"@rocket.chat/ui-composer\",{MessageFooterCallout(e){i=e},MessageFooterCalloutAction(e){o=e},MessageFooterCalloutContent(e){l=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){s=e},useMethod(e){u=e},useToastMessageDispatch(e){c=e},useTranslation(e){r=e},useUser(e){d=e}},1),n.link(\"@tanstack/react-query\",{useQuery(e){m=e}},2),n.link(\"react\",{default(e){_=e},useMemo(e){h=e}},3),n.link(\"../../../../hooks/omnichannel/useOmnichannelAgentAvailable\",{useOmnichannelAgentAvailable(e){k=e}},4),n.link(\"../../contexts/RoomContext\",{useOmnichannelRoom(e){v=e}},5);let f=()=>{let e=r(),t=c(),n=d(),f=k(),g=v(),y=s(\"GET\",\"/v1/livechat/inquiries.getOne\"),p=m([\"inquire\",g._id],()=>y({roomId:g._id})),b=u(\"livechat:takeInquiry\"),q=async()=>{if(p.isSuccess&&p.data.inquiry)try{await b(p.data.inquiry._id,{clientAction:!0})}catch(e){t({type:\"error\",message:e})}},C=h(()=>(null==n?void 0:n.status)===\"offline\"?e(\"You_cant_take_chats_offline\"):f?void 0:e(\"You_cant_take_chats_unavailable\"),[f,e,null==n?void 0:n.status]);return _.createElement(i,{\"aria-busy\":p.isLoading},_.createElement(l,null,e(\"you_are_in_preview_mode_of_incoming_livechat\")),_.createElement(o,a({},C&&{title:C},{disabled:p.isLoading||(null==n?void 0:n.status)===\"offline\"||!f,onClick:q}),e(\"Take_it\")))}}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/ComposerOmnichannel/ComposerOmnichannelInquiry.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { MessageFooterCallout, MessageFooterCalloutAction, MessageFooterCalloutContent } from '@rocket.chat/ui-composer';\\nimport { useEndpoint, useMethod, useToastMessageDispatch, useTranslation, useUser } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React, { useMemo } from 'react';\\n\\nimport { useOmnichannelAgentAvailable } from '../../../../hooks/omnichannel/useOmnichannelAgentAvailable';\\nimport { useOmnichannelRoom } from '../../contexts/RoomContext';\\n\\nexport const ComposerOmnichannelInquiry = (): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst user = useUser();\\n\\tconst agentAvailable = useOmnichannelAgentAvailable();\\n\\tconst room = useOmnichannelRoom();\\n\\tconst getInquire = useEndpoint('GET', `/v1/livechat/inquiries.getOne`);\\n\\tconst result = useQuery(['inquire', room._id], () =>\\n\\t\\tgetInquire({\\n\\t\\t\\troomId: room._id,\\n\\t\\t}),\\n\\t);\\n\\n\\tconst takeInquiry = useMethod('livechat:takeInquiry');\\n\\n\\tconst handleTakeInquiry = async (): Promise<void> => {\\n\\t\\tif (!result.isSuccess) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tif (!result.data.inquiry) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\ttry {\\n\\t\\t\\tawait takeInquiry(result.data.inquiry._id, { clientAction: true });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t};\\n\\n\\tconst title = useMemo(() => {\\n\\t\\tif (user?.status === 'offline') {\\n\\t\\t\\treturn t('You_cant_take_chats_offline');\\n\\t\\t}\\n\\n\\t\\tif (!agentAvailable) {\\n\\t\\t\\treturn t('You_cant_take_chats_unavailable');\\n\\t\\t}\\n\\t}, [agentAvailable, t, user?.status]);\\n\\n\\treturn (\\n\\t\\t<MessageFooterCallout aria-busy={result.isLoading}>\\n\\t\\t\\t<MessageFooterCalloutContent>{t('you_are_in_preview_mode_of_incoming_livechat')}</MessageFooterCalloutContent>\\n\\t\\t\\t<MessageFooterCalloutAction\\n\\t\\t\\t\\t{...(title && { title })}\\n\\t\\t\\t\\tdisabled={result.isLoading || user?.status === 'offline' || !agentAvailable}\\n\\t\\t\\t\\tonClick={handleTakeInquiry}\\n\\t\\t\\t>\\n\\t\\t\\t\\t{t('Take_it')}\\n\\t\\t\\t</MessageFooterCalloutAction>\\n\\t\\t</MessageFooterCallout>\\n\\t);\\n};\\n\",null],\"names\":[\"_extends\",\"MessageFooterCallout\",\"MessageFooterCalloutAction\",\"MessageFooterCalloutContent\",\"useEndpoint\",\"useMethod\",\"useToastMessageDispatch\",\"useTranslation\",\"useUser\",\"useQuery\",\"React\",\"useMemo\",\"useOmnichannelAgentAvailable\",\"useOmnichannelRoom\",\"module\",\"link\",\"default\",\"v\",\"export\",\"ComposerOmnichannelInquiry\",\"t\",\"dispatchToastMessage\",\"user\",\"agentAvailable\",\"room\",\"getInquire\",\"result\",\"_id\",\"roomId\",\"takeInquiry\",\"handleTakeInquiry\",\"isSuccess\",\"data\",\"inquiry\",\"clientAction\",\"error\",\"type\",\"message\",\"title\",\"status\",\"createElement\",\"isLoading\",\"disabled\",\"onClick\"],\"mappings\":\"2BAAAA,EAA2DC,EAAmCC,EAA2BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAhHC,EAAAC,IAAA,CAAA,iCAAgD,CAAEC,QAAAC,CAAA,EAAAjB,EAAAiB,CAAA,CAAA,EAAA,GAA3DH,EAAOI,MAAE,CAAA,CAAAC,2BAAsBA,IAAAA,CAA4B,GAA8DL,EAAAC,IAAA,CAAA,2BAAA,CAAAd,qBAAAgB,CAAA,EAAAhB,EAAAgB,CAAA,EAAAf,2BAAAe,CAAA,EAAAf,EAAAe,CAAA,EAAAd,4BAAAc,CAAA,EAAAd,EAAAc,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAX,YAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,UAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,wBAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,eAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,QAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAN,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAP,EAAAO,CAAA,EAAAN,QAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6DAAA,CAAAH,6BAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAAF,mBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GASlH,IAAME,EAA6BA,KACzC,IAAMC,EAAIb,IACJc,EAAuBf,IACvBgB,EAAOd,IACPe,EAAiBX,IACjBY,EAAOX,IACPY,EAAarB,EAAY,MAAK,iCAC9BsB,EAASjB,EAAS,CAAC,UAAWe,EAAKG,GAAG,CAAC,CAAE,IAC9CF,EAAW,CACVG,OAAQJ,EAAKG,GAAAA,IAITE,EAAcxB,EAAU,wBAExByB,EAAoB,UACzB,GAAKJ,EAAOK,SAAS,EAGhBL,EAAOM,IAAI,CAACC,OAAO,CAGxB,GAAI,CACH,MAAMJ,EAAYH,EAAOM,IAAI,CAACC,OAAO,CAACN,GAAG,CAAE,CAAEO,aAAc,CAAA,CAAI,EAChE,CAAE,MAAOC,EAAO,CACfd,EAAqB,CAAEe,KAAM,QAASC,QAASF,CAAK,EACrD,CACD,EAEMG,EAAQ3B,EAAQ,IACrB,AAAI,AAAAW,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMiB,MAAM,AAANA,IAAW,UACbnB,EAAE,+BAGLG,SACGH,EAAE,mCAER,CAACG,EAAgBH,EAAGE,MAAAA,EAAI,KAAA,EAAJA,EAAMiB,MAAM,CAAC,EAEpC,OACC7B,EAAA8B,aAAA,CAACvC,EAAoB,CAAC,YAAWyB,EAAOe,SAAAA,AAAU,EACjD/B,EAAA8B,aAAA,CAACrC,EAA2B,KAAEiB,EAAE,iDAChCV,EAAA8B,aAAA,CAACtC,EAA0BF,EAAA,CAAA,EACrBsC,GAAS,CAAEA,MAAAA,CAAK,EAAE,CACvBI,SAAUhB,EAAOe,SAAS,EAAI,AAAAnB,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMiB,MAAM,AAANA,IAAW,WAAa,CAAChB,EAC7DoB,QAASb,CAAkB,GAE1BV,EAAE,YAIP\"}"}