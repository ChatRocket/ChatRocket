{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){a=e}},0),t.link(\"@babel/runtime/helpers/extends\",{default:function(e){r=e}},1),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){l=e}},2),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){o=e}},3),t.link(\"@rocket.chat/fuselage\",{Field:function(e){i=e},FieldLabel:function(e){u=e},FieldRow:function(e){c=e},FieldError:function(e){s=e},TextInput:function(e){m=e},ButtonGroup:function(e){d=e},Button:function(e){f=e},ContextualbarContent:function(e){p=e}},0),t.link(\"@rocket.chat/ui-client\",{CustomFieldsForm:function(e){v=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){h=e},useEndpoint:function(e){k=e}},2),t.link(\"@tanstack/react-query\",{useQueryClient:function(e){E=e}},3),t.link(\"react\",{default:function(e){b=e},useState:function(e){x=e},useEffect:function(e){g=e}},4),t.link(\"react-hook-form\",{useForm:function(e){F=e}},5),t.link(\"react-i18next\",{useTranslation:function(e){w=e}},6),t.link(\"../../../../../../app/authorization/client\",{hasAtLeastOnePermission:function(e){y=e}},7),t.link(\"../../../../../../lib/emailValidator\",{validateEmail:function(e){C=e}},8),t.link(\"../../../../../components/Contextualbar\",{ContextualbarScrollableContent:function(e){S=e},ContextualbarFooter:function(e){T=e}},9),t.link(\"../../../../../lib/utils/createToken\",{createToken:function(e){G=e}},10),t.link(\"../../../additionalForms\",{ContactManager:function(e){P=e}},11),t.link(\"../../components/FormSkeleton\",{FormSkeleton:function(e){_=e}},12),t.link(\"../../hooks/useCustomFieldsMetadata\",{useCustomFieldsMetadata:function(e){M=e}},13);var a,r,l,o,i,u,c,s,m,d,f,p,v,h,k,E,b,x,g,F,w,y,C,S,T,G,P,_,M,D={token:\"\",name:\"\",email:\"\",phone:\"\",username:\"\",customFields:{}},V=function(e){if(!e)return D;var n,t,a=null!==(n=e.contact)&&void 0!==n?n:{},r=a.name,l=a.token,o=a.phone,i=a.visitorEmails,u=a.livechatData,c=a.contactManager;return{token:null!=l?l:\"\",name:null!=r?r:\"\",email:i?i[0].address:\"\",phone:o?o[0].phoneNumber:\"\",customFields:null!=u?u:{},username:null!==(t=null==c?void 0:c.username)&&void 0!==t?t:\"\"}};t.exportDefault(function(e){var n,t,D,N,q,I,L=e.id,A=e.data,B=e.close,O=w().t,Q=h(),R=E(),j=function(){return y([\"view-livechat-room-customfields\",\"edit-livechat-room-customfields\"])},z=x(\"no-agent-selected\"),K=o(z,2),H=K[0],J=K[1],U=k(\"POST\",\"/v1/omnichannel/contact\"),W=k(\"GET\",\"/v1/omnichannel/contact.search\"),X=k(\"GET\",\"/v1/users.info\"),Y=M({scope:\"visitor\",enabled:j()}),Z=Y.data,$=Y.isInitialLoading,ee=V(A),en=ee.username,et=F({mode:\"onChange\",reValidateMode:\"onChange\",defaultValues:ee}),ea=et.register,er=et.formState,el=er.errors,eo=er.isValid,ei=er.isDirty,eu=er.isSubmitting,ec=et.control,es=et.setValue,em=et.handleSubmit,ed=et.setError;g(function(){en&&X({username:en}).then(function(e){J(e.user._id)})},[X,en]);var ef=function(e,n){var t,r,l,o=arguments;return a.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(!((!(o.length>2)||void 0===o[2]||o[2])&&!n||n===ee[e])){i.next=3;break}return i.abrupt(\"return\",!0);case 3:return(t={})[e]=n,r=t,i.next=6,a.awrap(W(r));case 6:return l=i.sent.contact,i.abrupt(\"return\",!l||l._id===L);case 9:case\"end\":return i.stop()}},null,null,null,Promise)},ep=function(){var e,n,t,r,l,o,i,u=arguments;return a.async(function(c){for(;;)switch(c.prev=c.next){case 0:return t=void 0===(n=(e=u.length>0&&void 0!==u[0]?u[0]:{}).phone)?\"\":n,l=void 0===(r=e.email)?\"\":r,c.next=3,a.awrap(ef(\"email\",l));case 3:return o=c.sent,c.next=6,a.awrap(ef(\"phone\",t));case 6:return i=c.sent,o||ed(\"email\",{message:O(\"Email_already_exists\")}),i||ed(\"phone\",{message:O(\"Phone_already_exists\")}),c.abrupt(\"return\",o&&i);case 10:case\"end\":return c.stop()}},null,null,null,Promise)},ev=function(e){var n,t,r,o,i,u,c;return a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a.awrap(ep(e));case 2:if(s.sent){s.next=4;break}return s.abrupt(\"return\");case 4:return n=e.name,t=e.phone,r=e.email,o=e.customFields,i=e.username,u=e.token,c=l(l({name:n,phone:t,email:r,customFields:o,token:u||G()},i&&{contactManager:{username:i}}),L&&{_id:L}),s.prev=6,s.next=9,a.awrap(U(c));case 9:return Q({type:\"success\",message:O(\"Saved\")}),s.next=12,a.awrap(R.invalidateQueries({queryKey:[\"current-contacts\"]}));case 12:B(),s.next=18;break;case 15:s.prev=15,s.t0=s.catch(6),Q({type:\"error\",message:s.t0});case 18:case\"end\":return s.stop()}},null,null,[[6,15]],Promise)};return $?b.createElement(p,null,b.createElement(_,null)):b.createElement(b.Fragment,null,b.createElement(S,{is:\"form\",onSubmit:em(ev)},b.createElement(i,null,b.createElement(u,null,O(\"Name\"),\"*\"),b.createElement(c,null,b.createElement(m,r({},ea(\"name\",{validate:function(e){return!!e.trim()||O(\"Required_field\",{field:O(\"Name\")})}}),{error:null===(n=el.name)||void 0===n?void 0:n.message,flexGrow:1}))),b.createElement(s,null,null===(t=el.name)||void 0===t?void 0:t.message)),b.createElement(i,null,b.createElement(u,null,O(\"Email\")),b.createElement(c,null,b.createElement(m,r({},ea(\"email\",{validate:function(e){return!e||e===ee.email||!!C(e)||O(\"error-invalid-email-address\")}}),{error:null===(D=el.email)||void 0===D?void 0:D.message,flexGrow:1}))),b.createElement(s,null,null===(N=el.email)||void 0===N?void 0:N.message)),b.createElement(i,null,b.createElement(u,null,O(\"Phone\")),b.createElement(c,null,b.createElement(m,r({},ea(\"phone\"),{error:null===(q=el.phone)||void 0===q?void 0:q.message,flexGrow:1}))),b.createElement(s,null,null===(I=el.phone)||void 0===I?void 0:I.message)),j()&&b.createElement(v,{formName:\"customFields\",formControl:ec,metadata:void 0===Z?[]:Z}),b.createElement(P,{value:H,handler:function(e){return a.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(J(e),\"no-agent-selected\"!==e){n.next=4;break}return es(\"username\",\"\",{shouldDirty:!0}),n.abrupt(\"return\");case 4:return n.next=6,a.awrap(X({userId:e}));case 6:es(\"username\",n.sent.user.username||\"\",{shouldDirty:!0});case 9:case\"end\":return n.stop()}},null,null,null,Promise)}})),b.createElement(T,null,b.createElement(d,{stretch:!0},b.createElement(f,{flexGrow:1,onClick:B},O(\"Cancel\")),b.createElement(f,{mie:\"none\",type:\"submit\",onClick:em(ev),flexGrow:1,loading:eu,disabled:!eo||!ei,primary:!0},O(\"Save\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/directory/contacts/contextualBar/ContactNewEdit.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatVisitor, Serialized } from '@rocket.chat/core-typings';\\nimport { Field, FieldLabel, FieldRow, FieldError, TextInput, ButtonGroup, Button, ContextualbarContent } from '@rocket.chat/fuselage';\\nimport { CustomFieldsForm } from '@rocket.chat/ui-client';\\nimport { useToastMessageDispatch, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQueryClient } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React, { useState, useEffect } from 'react';\\nimport { useForm } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { hasAtLeastOnePermission } from '../../../../../../app/authorization/client';\\nimport { validateEmail } from '../../../../../../lib/emailValidator';\\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../../../components/Contextualbar';\\nimport { createToken } from '../../../../../lib/utils/createToken';\\nimport { ContactManager as ContactManagerForm } from '../../../additionalForms';\\nimport { FormSkeleton } from '../../components/FormSkeleton';\\nimport { useCustomFieldsMetadata } from '../../hooks/useCustomFieldsMetadata';\\n\\ntype ContactNewEditProps = {\\n\\tid: string;\\n\\tdata?: { contact: Serialized<ILivechatVisitor> | null };\\n\\tclose(): void;\\n};\\n\\ntype ContactFormData = {\\n\\ttoken: string;\\n\\tname: string;\\n\\temail: string;\\n\\tphone: string;\\n\\tusername: string;\\n\\tcustomFields: Record<any, any>;\\n};\\n\\nconst DEFAULT_VALUES = {\\n\\ttoken: '',\\n\\tname: '',\\n\\temail: '',\\n\\tphone: '',\\n\\tusername: '',\\n\\tcustomFields: {},\\n};\\n\\nconst getInitialValues = (data: ContactNewEditProps['data']): ContactFormData => {\\n\\tif (!data) {\\n\\t\\treturn DEFAULT_VALUES;\\n\\t}\\n\\n\\tconst { name, token, phone, visitorEmails, livechatData, contactManager } = data.contact ?? {};\\n\\n\\treturn {\\n\\t\\ttoken: token ?? '',\\n\\t\\tname: name ?? '',\\n\\t\\temail: visitorEmails ? visitorEmails[0].address : '',\\n\\t\\tphone: phone ? phone[0].phoneNumber : '',\\n\\t\\tcustomFields: livechatData ?? {},\\n\\t\\tusername: contactManager?.username ?? '',\\n\\t};\\n};\\n\\nconst ContactNewEdit = ({ id, data, close }: ContactNewEditProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst queryClient = useQueryClient();\\n\\n\\tconst canViewCustomFields = (): boolean =>\\n\\t\\thasAtLeastOnePermission(['view-livechat-room-customfields', 'edit-livechat-room-customfields']);\\n\\n\\tconst [userId, setUserId] = useState('no-agent-selected');\\n\\tconst saveContact = useEndpoint('POST', '/v1/omnichannel/contact');\\n\\tconst getContactBy = useEndpoint('GET', '/v1/omnichannel/contact.search');\\n\\tconst getUserData = useEndpoint('GET', '/v1/users.info');\\n\\n\\tconst { data: customFieldsMetadata = [], isInitialLoading: isLoadingCustomFields } = useCustomFieldsMetadata({\\n\\t\\tscope: 'visitor',\\n\\t\\tenabled: canViewCustomFields(),\\n\\t});\\n\\n\\tconst initialValue = getInitialValues(data);\\n\\tconst { username: initialUsername } = initialValue;\\n\\n\\tconst {\\n\\t\\tregister,\\n\\t\\tformState: { errors, isValid, isDirty, isSubmitting },\\n\\t\\tcontrol,\\n\\t\\tsetValue,\\n\\t\\thandleSubmit,\\n\\t\\tsetError,\\n\\t} = useForm<ContactFormData>({\\n\\t\\tmode: 'onChange',\\n\\t\\treValidateMode: 'onChange',\\n\\t\\tdefaultValues: initialValue,\\n\\t});\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!initialUsername) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tgetUserData({ username: initialUsername }).then(({ user }) => {\\n\\t\\t\\tsetUserId(user._id);\\n\\t\\t});\\n\\t}, [getUserData, initialUsername]);\\n\\n\\tconst validateEmailFormat = (email: string): boolean | string => {\\n\\t\\tif (!email || email === initialValue.email) {\\n\\t\\t\\treturn true;\\n\\t\\t}\\n\\n\\t\\tif (!validateEmail(email)) {\\n\\t\\t\\treturn t('error-invalid-email-address');\\n\\t\\t}\\n\\n\\t\\treturn true;\\n\\t};\\n\\n\\tconst validateContactField = async (name: 'phone' | 'email', value: string, optional = true) => {\\n\\t\\tif ((optional && !value) || value === initialValue[name]) {\\n\\t\\t\\treturn true;\\n\\t\\t}\\n\\n\\t\\tconst query = { [name]: value } as Record<'phone' | 'email', string>;\\n\\t\\tconst { contact } = await getContactBy(query);\\n\\t\\treturn !contact || contact._id === id;\\n\\t};\\n\\n\\tconst validateName = (v: string): string | boolean => (!v.trim() ? t('Required_field', { field: t('Name') }) : true);\\n\\n\\tconst handleContactManagerChange = async (userId: string): Promise<void> => {\\n\\t\\tsetUserId(userId);\\n\\n\\t\\tif (userId === 'no-agent-selected') {\\n\\t\\t\\tsetValue('username', '', { shouldDirty: true });\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst { user } = await getUserData({ userId });\\n\\t\\tsetValue('username', user.username || '', { shouldDirty: true });\\n\\t};\\n\\n\\tconst validateAsync = async ({ phone = '', email = '' } = {}) => {\\n\\t\\tconst isEmailValid = await validateContactField('email', email);\\n\\t\\tconst isPhoneValid = await validateContactField('phone', phone);\\n\\n\\t\\t!isEmailValid && setError('email', { message: t('Email_already_exists') });\\n\\t\\t!isPhoneValid && setError('phone', { message: t('Phone_already_exists') });\\n\\n\\t\\treturn isEmailValid && isPhoneValid;\\n\\t};\\n\\n\\tconst handleSave = async (data: ContactFormData): Promise<void> => {\\n\\t\\tif (!(await validateAsync(data))) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst { name, phone, email, customFields, username, token } = data;\\n\\n\\t\\tconst payload = {\\n\\t\\t\\tname,\\n\\t\\t\\tphone,\\n\\t\\t\\temail,\\n\\t\\t\\tcustomFields,\\n\\t\\t\\ttoken: token || createToken(),\\n\\t\\t\\t...(username && { contactManager: { username } }),\\n\\t\\t\\t...(id && { _id: id }),\\n\\t\\t};\\n\\n\\t\\ttry {\\n\\t\\t\\tawait saveContact(payload);\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Saved') });\\n\\t\\t\\tawait queryClient.invalidateQueries({ queryKey: ['current-contacts'] });\\n\\t\\t\\tclose();\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t};\\n\\n\\tif (isLoadingCustomFields) {\\n\\t\\treturn (\\n\\t\\t\\t<ContextualbarContent>\\n\\t\\t\\t\\t<FormSkeleton />\\n\\t\\t\\t</ContextualbarContent>\\n\\t\\t);\\n\\t}\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<ContextualbarScrollableContent is='form' onSubmit={handleSubmit(handleSave)}>\\n\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t<FieldLabel>{t('Name')}*</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<TextInput {...register('name', { validate: validateName })} error={errors.name?.message} flexGrow={1} />\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t<FieldError>{errors.name?.message}</FieldError>\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t<FieldLabel>{t('Email')}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<TextInput {...register('email', { validate: validateEmailFormat })} error={errors.email?.message} flexGrow={1} />\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t<FieldError>{errors.email?.message}</FieldError>\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t<FieldLabel>{t('Phone')}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<TextInput {...register('phone')} error={errors.phone?.message} flexGrow={1} />\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t<FieldError>{errors.phone?.message}</FieldError>\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t{canViewCustomFields() && <CustomFieldsForm formName='customFields' formControl={control} metadata={customFieldsMetadata} />}\\n\\t\\t\\t\\t<ContactManagerForm value={userId} handler={handleContactManagerChange} />\\n\\t\\t\\t</ContextualbarScrollableContent>\\n\\t\\t\\t<ContextualbarFooter>\\n\\t\\t\\t\\t<ButtonGroup stretch>\\n\\t\\t\\t\\t\\t<Button flexGrow={1} onClick={close}>\\n\\t\\t\\t\\t\\t\\t{t('Cancel')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t<Button\\n\\t\\t\\t\\t\\t\\tmie='none'\\n\\t\\t\\t\\t\\t\\ttype='submit'\\n\\t\\t\\t\\t\\t\\tonClick={handleSubmit(handleSave)}\\n\\t\\t\\t\\t\\t\\tflexGrow={1}\\n\\t\\t\\t\\t\\t\\tloading={isSubmitting}\\n\\t\\t\\t\\t\\t\\tdisabled={!isValid || !isDirty}\\n\\t\\t\\t\\t\\t\\tprimary\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t{t('Save')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</ContextualbarFooter>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default ContactNewEdit;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_extends\",\"_objectSpread\",\"_slicedToArray\",\"Field\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"TextInput\",\"ButtonGroup\",\"Button\",\"ContextualbarContent\",\"CustomFieldsForm\",\"useToastMessageDispatch\",\"useEndpoint\",\"useQueryClient\",\"React\",\"useState\",\"useEffect\",\"useForm\",\"useTranslation\",\"hasAtLeastOnePermission\",\"validateEmail\",\"ContextualbarScrollableContent\",\"ContextualbarFooter\",\"createToken\",\"ContactManager\",\"ContactManagerForm\",\"FormSkeleton\",\"useCustomFieldsMetadata\",\"DEFAULT_VALUES\",\"token\",\"name\",\"email\",\"phone\",\"username\",\"customFields\",\"getInitialValues\",\"data\",\"_data$contact\",\"_contactManager$usern\",\"_ref\",\"contact\",\"visitorEmails\",\"livechatData\",\"contactManager\",\"address\",\"phoneNumber\",\"exportDefault\",\"_ref2\",\"_errors$name\",\"_errors$name2\",\"_errors$email\",\"_errors$email2\",\"_errors$phone\",\"_errors$phone2\",\"id\",\"close\",\"t\",\"_useTranslation\",\"dispatchToastMessage\",\"queryClient\",\"canViewCustomFields\",\"_useState\",\"_useState2\",\"userId\",\"setUserId\",\"saveContact\",\"getContactBy\",\"getUserData\",\"_useCustomFieldsMetad\",\"scope\",\"enabled\",\"_useCustomFieldsMetad2\",\"isLoadingCustomFields\",\"isInitialLoading\",\"initialValue\",\"initialUsername\",\"_useForm\",\"mode\",\"reValidateMode\",\"defaultValues\",\"register\",\"_useForm$formState\",\"formState\",\"errors\",\"isValid\",\"isDirty\",\"isSubmitting\",\"control\",\"setValue\",\"handleSubmit\",\"setError\",\"then\",\"_ref3\",\"user\",\"_id\",\"validateContactField\",\"value\",\"_query\",\"query\",\"_args\",\"arguments\",\"async\",\"_context\",\"prev\",\"next\",\"optional\",\"length\",\"undefined\",\"abrupt\",\"awrap\",\"_await$getContactBy\",\"sent\",\"stop\",\"Promise\",\"validateAsync\",\"_ref4\",\"_ref4$phone\",\"_ref4$email\",\"isEmailValid\",\"isPhoneValid\",\"_args3\",\"_context3\",\"message\",\"handleSave\",\"payload\",\"_context4\",\"type\",\"invalidateQueries\",\"queryKey\",\"t0\",\"createElement\",\"Fragment\",\"is\",\"onSubmit\",\"validate\",\"trim\",\"field\",\"error\",\"flexGrow\",\"formName\",\"formControl\",\"metadata\",\"handler\",\"_context2\",\"shouldDirty\",\"_await$getUserData\",\"stretch\",\"onClick\",\"mie\",\"loading\",\"disabled\",\"primary\"],\"mappings\":\"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\"}"}