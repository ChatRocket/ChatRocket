{"code":"function module(e,n,t){t.export({useSingleFileInput:function(){return c}}),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){u=e}},0),t.link(\"react\",{useRef:function(e){r=e},useEffect:function(e){i=e}},1);var u,r,i,c=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"image/*\",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"image\",c=r();return i(function(){var e=document.createElement(\"input\");return e.setAttribute(\"type\",\"file\"),e.setAttribute(\"style\",\"display: none\"),document.body.appendChild(e),c.current=e,function(){c.current=void 0,e.remove()}},[]),i(function(){var e=c.current;e&&e.setAttribute(\"accept\",n)},[n]),i(function(){var n=c.current;if(n){var u=function(){if(null!=n&&null!==(u=n.files)&&void 0!==u&&u.length){var u,r=new FormData;r.append(t,n.files[0]),e(n.files[0],r)}};return n.addEventListener(\"change\",u,!1),function(){n.removeEventListener(\"change\",u,!1)}}},[t,n,e]),[u(function(){var e;return null==c?void 0:null===(e=c.current)||void 0===e?void 0:e.click()}),u(function(){c.current&&(c.current.value=\"\")})]}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useSingleFileInput.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useRef, useEffect } from 'react';\\n\\nexport const useSingleFileInput = (\\n\\tonSetFile: (file: FileList[number], formData: FormData) => void,\\n\\tfileType = 'image/*',\\n\\tfileField = 'image',\\n): [onClick: () => void, reset: () => void] => {\\n\\tconst ref = useRef<HTMLInputElement>();\\n\\n\\tuseEffect(() => {\\n\\t\\tconst fileInput = document.createElement('input');\\n\\t\\tfileInput.setAttribute('type', 'file');\\n\\t\\tfileInput.setAttribute('style', 'display: none');\\n\\t\\tdocument.body.appendChild(fileInput);\\n\\t\\tref.current = fileInput;\\n\\n\\t\\treturn (): void => {\\n\\t\\t\\tref.current = undefined;\\n\\t\\t\\tfileInput.remove();\\n\\t\\t};\\n\\t}, []);\\n\\n\\tuseEffect(() => {\\n\\t\\tconst fileInput = ref.current;\\n\\t\\tif (!fileInput) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tfileInput.setAttribute('accept', fileType);\\n\\t}, [fileType]);\\n\\n\\tuseEffect(() => {\\n\\t\\tconst fileInput = ref.current;\\n\\t\\tif (!fileInput) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst handleFiles = (): void => {\\n\\t\\t\\tif (!fileInput?.files?.length) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tconst formData = new FormData();\\n\\t\\t\\tformData.append(fileField, fileInput.files[0]);\\n\\t\\t\\tonSetFile(fileInput.files[0], formData);\\n\\t\\t};\\n\\n\\t\\tfileInput.addEventListener('change', handleFiles, false);\\n\\n\\t\\treturn (): void => {\\n\\t\\t\\tfileInput.removeEventListener('change', handleFiles, false);\\n\\t\\t};\\n\\t}, [fileField, fileType, onSetFile]);\\n\\n\\tconst onClick = useMutableCallback(() => ref?.current?.click());\\n\\tconst reset = useMutableCallback(() => {\\n\\t\\tif (ref.current) {\\n\\t\\t\\tref.current.value = '';\\n\\t\\t}\\n\\t});\\n\\treturn [onClick, reset];\\n};\\n\",null],\"names\":[\"module\",\"export\",\"useSingleFileInput\",\"link\",\"useMutableCallback\",\"v\",\"useRef\",\"useEffect\",\"onSetFile\",\"fileType\",\"arguments\",\"length\",\"undefined\",\"fileField\",\"ref\",\"fileInput\",\"document\",\"createElement\",\"setAttribute\",\"body\",\"appendChild\",\"current\",\"remove\",\"handleFiles\",\"_fileInput$files\",\"files\",\"formData\",\"FormData\",\"append\",\"addEventListener\",\"removeEventListener\",\"_ref$current\",\"click\",\"value\"],\"mappings\":\"uBAAAA,EAAOC,MAAE,CAAA,CAAAC,mBAAoB,WAAM,OAAAA,CAA8B,CAAA,GAAAF,EAAAG,IAAA,CAAA,8BAAA,CAAAC,mBAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,QAAA,CAAAG,OAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,EAAAE,UAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAG1D,IAH0DD,EAAAE,EAAAC,EAGpDL,EAAqB,SACjCM,CAA+D,EAGlB,IAF7CC,EAAQC,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,UACXG,EAASH,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,QAENI,EAAMR,IAoDZ,OAlDAC,EAAU,WACT,IAAMQ,EAAYC,SAASC,aAAa,CAAC,SAMzC,OALAF,EAAUG,YAAY,CAAC,OAAQ,QAC/BH,EAAUG,YAAY,CAAC,QAAS,iBAChCF,SAASG,IAAI,CAACC,WAAW,CAACL,GAC1BD,EAAIO,OAAO,CAAGN,EAEP,WACND,EAAIO,OAAO,CAAGT,KAAAA,EACdG,EAAUO,MAAM,EACjB,CACD,EAAG,EAAE,EAELf,EAAU,WACT,IAAMQ,EAAYD,EAAIO,OAAO,CACxBN,GAILA,EAAUG,YAAY,CAAC,SAAUT,EAClC,EAAG,CAACA,EAAS,EAEbF,EAAU,WACT,IAAMQ,EAAYD,EAAIO,OAAO,CAC7B,GAAKN,GAIL,IAAMQ,EAAc,WACnB,GAAKR,MAAAA,GAAS,AAAO,OAAPS,CAAAA,EAATT,EAAWU,KAAK,AAALA,GAAKD,AAAA,KAAA,IAAAA,GAAhBA,EAAkBb,MAAM,EAG7B,IAJ8Ba,EAIxBE,EAAW,IAAIC,SACrBD,EAASE,MAAM,CAACf,EAAWE,EAAUU,KAAK,CAAC,EAAE,EAC7CjB,EAAUO,EAAUU,KAAK,CAAC,EAAE,CAAEC,GAC/B,EAIA,OAFAX,EAAUc,gBAAgB,CAAC,SAAUN,EAAa,CAAA,GAE3C,WACNR,EAAUe,mBAAmB,CAAC,SAAUP,EAAa,CAAA,EACtD,EACD,EAAG,CAACV,EAAWJ,EAAUD,EAAU,EAQ5B,CANSJ,EAAmB,WAAA,IAAA2B,EAAA,OAAMjB,MAAAA,EAAG,KAAA,EAAA,AAAS,OAATiB,CAAAA,EAAHjB,EAAKO,OAAO,AAAPA,GAAOU,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAZA,EAAcC,KAAK,EAAE,GAChD5B,EAAmB,WAC5BU,EAAIO,OAAO,EACdP,CAAAA,EAAIO,OAAO,CAACY,KAAK,CAAG,EAAA,CAEtB,GACuB,AACxB\"}"}