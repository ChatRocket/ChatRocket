{"code":"function module(e,t,n){var a,l,u,c,r,o,s,i,f,m,d,E,g,S,p,h,k,b,C,_,T,x,v,M;n.link(\"@babel/runtime/regenerator\",{default:function(e){a=e}},0),n.link(\"@babel/runtime/helpers/extends\",{default:function(e){l=e}},1),n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){u=e}},2),n.link(\"@rocket.chat/fuselage\",{Field:function(e){c=e},TextInput:function(e){r=e},FieldGroup:function(e){o=e},Modal:function(e){s=e},Button:function(e){i=e},Box:function(e){f=e},FieldLabel:function(e){m=e},FieldRow:function(e){d=e},FieldError:function(e){E=e},FieldHint:function(e){g=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useLocalStorage:function(e){S=e},useMutableCallback:function(e){p=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){h=e},useSetting:function(e){k=e},useTranslation:function(e){b=e},useEndpoint:function(e){C=e}},2),n.link(\"react\",{default:function(e){_=e},useState:function(e){T=e},useCallback:function(e){x=e}},3),n.link(\"../../components/UserStatusMenu\",{default:function(e){v=e}},4),n.link(\"../../lib/constants\",{USER_STATUS_TEXT_MAX_LENGTH:function(e){M=e}},5),n.exportDefault(function(e){var t=e.onClose,n=e.userStatus,F=e.userStatusText,y=k(\"Accounts_AllowUserStatusMessageChange\"),w=h(),A=S(\"Local_Custom_Status\",\"\"),D=u(A,2),L=D[0],U=D[1],G=b(),H=T(L||F),P=u(H,2),B=P[0],I=P[1],R=T(n),X=u(R,2),N=X[0],O=X[1],j=T(),q=u(j,2),z=q[0],J=q[1],K=C(\"POST\",\"/v1/users.setStatus\"),Q=p(function(e){return(I(e.currentTarget.value),B&&B.length>M)?J(G(\"Max_length_is\",M)):J(void 0)}),V=x(function(){return a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.awrap(K({message:B,status:N}));case 3:U(B),w({type:\"success\",message:G(\"StatusMessage_Changed_Successfully\")}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),w({type:\"error\",message:e.t0});case 10:t();case 11:case\"end\":return e.stop()}},null,null,[[0,7]],Promise)},[w,K,B,N,t,G]);return _.createElement(s,{wrapperFunction:function(e){return _.createElement(f,l({is:\"form\",onSubmit:function(e){e.preventDefault(),V()}},e))}},_.createElement(s.Header,null,_.createElement(s.Icon,{name:\"info\"}),_.createElement(s.Title,null,G(\"Edit_Status\")),_.createElement(s.Close,{onClick:t})),_.createElement(s.Content,{fontScale:\"p2\"},_.createElement(o,null,_.createElement(c,null,_.createElement(m,null,G(\"StatusMessage\")),_.createElement(d,null,_.createElement(r,{error:z,disabled:!y,flexGrow:1,value:B,onChange:Q,placeholder:G(\"StatusMessage_Placeholder\"),addon:_.createElement(v,{margin:\"neg-x2\",onChange:function(e){return O(e)},initialStatus:N})})),!y&&_.createElement(g,null,G(\"StatusMessage_Change_Disabled\")),_.createElement(E,null,z)))),_.createElement(s.Footer,null,_.createElement(s.FooterControllers,null,_.createElement(i,{secondary:!0,onClick:t},G(\"Cancel\")),_.createElement(i,{primary:!0,type:\"submit\",disabled:!!z},G(\"Save\")))))})}","map":"{\"version\":3,\"sources\":[\"client/sidebar/header/EditStatusModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { Field, TextInput, FieldGroup, Modal, Button, Box, FieldLabel, FieldRow, FieldError, FieldHint } from '@rocket.chat/fuselage';\\nimport { useLocalStorage, useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useSetting, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ChangeEvent, ComponentProps, FormEvent } from 'react';\\nimport React, { useState, useCallback } from 'react';\\n\\nimport UserStatusMenu from '../../components/UserStatusMenu';\\nimport { USER_STATUS_TEXT_MAX_LENGTH } from '../../lib/constants';\\n\\ntype EditStatusModalProps = {\\n\\tonClose: () => void;\\n\\tuserStatus: IUser['status'];\\n\\tuserStatusText: IUser['statusText'];\\n};\\n\\nconst EditStatusModal = ({ onClose, userStatus, userStatusText }: EditStatusModalProps): ReactElement => {\\n\\tconst allowUserStatusMessageChange = useSetting('Accounts_AllowUserStatusMessageChange');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst [customStatus, setCustomStatus] = useLocalStorage<string | undefined>('Local_Custom_Status', '');\\n\\tconst initialStatusText = customStatus || userStatusText;\\n\\n\\tconst t = useTranslation();\\n\\tconst [statusText, setStatusText] = useState(initialStatusText);\\n\\tconst [statusType, setStatusType] = useState(userStatus);\\n\\tconst [statusTextError, setStatusTextError] = useState<string | undefined>();\\n\\n\\tconst setUserStatus = useEndpoint('POST', '/v1/users.setStatus');\\n\\n\\tconst handleStatusText = useMutableCallback((e: ChangeEvent<HTMLInputElement>): void => {\\n\\t\\tsetStatusText(e.currentTarget.value);\\n\\n\\t\\tif (statusText && statusText.length > USER_STATUS_TEXT_MAX_LENGTH) {\\n\\t\\t\\treturn setStatusTextError(t('Max_length_is', USER_STATUS_TEXT_MAX_LENGTH));\\n\\t\\t}\\n\\n\\t\\treturn setStatusTextError(undefined);\\n\\t});\\n\\n\\tconst handleStatusType = (type: IUser['status']): void => setStatusType(type);\\n\\n\\tconst handleSaveStatus = useCallback(async () => {\\n\\t\\ttry {\\n\\t\\t\\tawait setUserStatus({ message: statusText, status: statusType });\\n\\t\\t\\tsetCustomStatus(statusText);\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('StatusMessage_Changed_Successfully') });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\n\\t\\tonClose();\\n\\t}, [dispatchToastMessage, setUserStatus, statusText, statusType, onClose, t]);\\n\\n\\treturn (\\n\\t\\t<Modal\\n\\t\\t\\twrapperFunction={(props: ComponentProps<typeof Box>) => (\\n\\t\\t\\t\\t<Box\\n\\t\\t\\t\\t\\tis='form'\\n\\t\\t\\t\\t\\tonSubmit={(e: FormEvent) => {\\n\\t\\t\\t\\t\\t\\te.preventDefault();\\n\\t\\t\\t\\t\\t\\thandleSaveStatus();\\n\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t{...props}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\t\\t>\\n\\t\\t\\t<Modal.Header>\\n\\t\\t\\t\\t<Modal.Icon name='info' />\\n\\t\\t\\t\\t<Modal.Title>{t('Edit_Status')}</Modal.Title>\\n\\t\\t\\t\\t<Modal.Close onClick={onClose} />\\n\\t\\t\\t</Modal.Header>\\n\\t\\t\\t<Modal.Content fontScale='p2'>\\n\\t\\t\\t\\t<FieldGroup>\\n\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t<FieldLabel>{t('StatusMessage')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t<TextInput\\n\\t\\t\\t\\t\\t\\t\\t\\terror={statusTextError}\\n\\t\\t\\t\\t\\t\\t\\t\\tdisabled={!allowUserStatusMessageChange}\\n\\t\\t\\t\\t\\t\\t\\t\\tflexGrow={1}\\n\\t\\t\\t\\t\\t\\t\\t\\tvalue={statusText}\\n\\t\\t\\t\\t\\t\\t\\t\\tonChange={handleStatusText}\\n\\t\\t\\t\\t\\t\\t\\t\\tplaceholder={t('StatusMessage_Placeholder')}\\n\\t\\t\\t\\t\\t\\t\\t\\taddon={<UserStatusMenu margin='neg-x2' onChange={handleStatusType} initialStatus={statusType} />}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t{!allowUserStatusMessageChange && <FieldHint>{t('StatusMessage_Change_Disabled')}</FieldHint>}\\n\\t\\t\\t\\t\\t\\t<FieldError>{statusTextError}</FieldError>\\n\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t</FieldGroup>\\n\\t\\t\\t</Modal.Content>\\n\\t\\t\\t<Modal.Footer>\\n\\t\\t\\t\\t<Modal.FooterControllers>\\n\\t\\t\\t\\t\\t<Button secondary onClick={onClose}>\\n\\t\\t\\t\\t\\t\\t{t('Cancel')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t<Button primary type='submit' disabled={!!statusTextError}>\\n\\t\\t\\t\\t\\t\\t{t('Save')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</Modal.FooterControllers>\\n\\t\\t\\t</Modal.Footer>\\n\\t\\t</Modal>\\n\\t);\\n};\\n\\nexport default EditStatusModal;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_extends\",\"_slicedToArray\",\"Field\",\"TextInput\",\"FieldGroup\",\"Modal\",\"Button\",\"Box\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"FieldHint\",\"useLocalStorage\",\"useMutableCallback\",\"useToastMessageDispatch\",\"useSetting\",\"useTranslation\",\"useEndpoint\",\"React\",\"useState\",\"useCallback\",\"UserStatusMenu\",\"USER_STATUS_TEXT_MAX_LENGTH\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"onClose\",\"userStatus\",\"userStatusText\",\"allowUserStatusMessageChange\",\"dispatchToastMessage\",\"_useLocalStorage\",\"_useLocalStorage2\",\"customStatus\",\"setCustomStatus\",\"t\",\"_useState\",\"_useState2\",\"statusText\",\"setStatusText\",\"_useState3\",\"_useState4\",\"statusType\",\"setStatusType\",\"_useState5\",\"_useState6\",\"statusTextError\",\"setStatusTextError\",\"setUserStatus\",\"handleStatusText\",\"e\",\"currentTarget\",\"value\",\"length\",\"undefined\",\"handleSaveStatus\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"message\",\"status\",\"type\",\"t0\",\"stop\",\"Promise\",\"createElement\",\"wrapperFunction\",\"props\",\"is\",\"onSubmit\",\"preventDefault\",\"Header\",\"Icon\",\"name\",\"Title\",\"Close\",\"onClick\",\"Content\",\"fontScale\",\"error\",\"disabled\",\"flexGrow\",\"onChange\",\"placeholder\",\"addon\",\"margin\",\"initialStatus\",\"Footer\",\"FooterControllers\",\"secondary\",\"primary\"],\"mappings\":\"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\"}"}