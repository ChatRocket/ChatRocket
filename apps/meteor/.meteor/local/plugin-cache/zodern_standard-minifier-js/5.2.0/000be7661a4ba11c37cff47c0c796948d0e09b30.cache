{"code":"function module(n,e,t){var r,o,i,u;function c(n,e){var t=function(t,c){var l,a;return r.async(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,r.awrap(u.loadLoginService(n));case 2:if(l=f.sent){f.next=6;break}return null==c||c(new o.ConfigError),f.abrupt(\"return\");case 6:a=i._loginStyle(n,l,t),e({config:l,loginStyle:a,options:t,credentialRequestCompleteCallback:c});case 8:case\"end\":return f.stop()}},null,null,null,Promise)};return function(n,e){if(!e&&\"function\"==typeof n){t({},n);return}t(n,e)}}t.link(\"@babel/runtime/regenerator\",{default:function(n){r=n}},0),t.export({wrapRequestCredentialFn:function(){return c}}),t.link(\"meteor/accounts-base\",{Accounts:function(n){o=n}},0),t.link(\"meteor/oauth\",{OAuth:function(n){i=n}},1),t.link(\"./loginServices\",{loginServices:function(n){u=n}},2)}","map":"{\"version\":3,\"sources\":[\"client/lib/wrapRequestCredentialFn.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { OAuthConfiguration } from '@rocket.chat/core-typings';\\nimport { Accounts } from 'meteor/accounts-base';\\nimport type { Meteor } from 'meteor/meteor';\\nimport { OAuth } from 'meteor/oauth';\\n\\nimport { loginServices } from './loginServices';\\n\\ntype RequestCredentialOptions = Meteor.LoginWithExternalServiceOptions;\\ntype RequestCredentialCallback = (credentialTokenOrError?: string | Error) => void;\\n\\ntype RequestCredentialConfig<T extends Partial<OAuthConfiguration>> = {\\n\\tconfig: T;\\n\\tloginStyle: string;\\n\\toptions: RequestCredentialOptions;\\n\\tcredentialRequestCompleteCallback?: RequestCredentialCallback;\\n};\\n\\nexport function wrapRequestCredentialFn<T extends Partial<OAuthConfiguration>>(\\n\\tserviceName: string,\\n\\tfn: (params: RequestCredentialConfig<T>) => void,\\n) {\\n\\tconst wrapped = async (\\n\\t\\toptions: RequestCredentialOptions,\\n\\t\\tcredentialRequestCompleteCallback?: RequestCredentialCallback,\\n\\t): Promise<void> => {\\n\\t\\tconst config = await loginServices.loadLoginService<T>(serviceName);\\n\\t\\tif (!config) {\\n\\t\\t\\tcredentialRequestCompleteCallback?.(new Accounts.ConfigError());\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst loginStyle = OAuth._loginStyle(serviceName, config, options);\\n\\t\\tfn({\\n\\t\\t\\tconfig,\\n\\t\\t\\tloginStyle,\\n\\t\\t\\toptions,\\n\\t\\t\\tcredentialRequestCompleteCallback,\\n\\t\\t});\\n\\t};\\n\\n\\treturn (\\n\\t\\toptions?: RequestCredentialOptions | RequestCredentialCallback,\\n\\t\\tcredentialRequestCompleteCallback?: RequestCredentialCallback,\\n\\t) => {\\n\\t\\tif (!credentialRequestCompleteCallback && typeof options === 'function') {\\n\\t\\t\\tvoid wrapped({}, options);\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tvoid wrapped(options as RequestCredentialOptions, credentialRequestCompleteCallback);\\n\\t};\\n}\\n\",null],\"names\":[\"_regeneratorRuntime\",\"Accounts\",\"OAuth\",\"loginServices\",\"wrapRequestCredentialFn\",\"serviceName\",\"fn\",\"wrapped\",\"options\",\"credentialRequestCompleteCallback\",\"config\",\"loginStyle\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"loadLoginService\",\"sent\",\"ConfigError\",\"abrupt\",\"_loginStyle\",\"stop\",\"Promise\",\"module\",\"link\",\"default\",\"v\",\"export\"],\"mappings\":\"2BACAA,EAAgDC,EAAAC,EAAAC,EAgB1C,SAAUC,EACfC,CAAmB,CACnBC,CAAgD,EAEhD,IAAMC,EAAU,SACfC,CAAiC,CACjCC,CAA6D,EAAA,IAAAC,EAAAC,EAAA,OAAAX,EAAAY,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAE,IAAA,CAAA,EAAAf,EAAAgB,KAAA,CAExCb,EAAcc,gBAAgB,CAAIZ,GAAY,MAAA,EAAvD,GAANK,EAAMG,EAAAK,IAAA,CACD,CAAAL,EAAAE,IAAA,CAAA,EAAA,KAAA,CACsD,OAAhEN,MAAAA,GAAAA,EAAoC,IAAIR,EAASkB,WAAW,EAAIN,EAAAO,MAAA,CAAA,SAAA,MAAA,EAI3DT,EAAaT,EAAMmB,WAAW,CAAChB,EAAaK,EAAQF,GAC1DF,EAAG,CACFI,OAAAA,EACAC,WAAAA,EACAH,QAAAA,EACAC,kCAAAA,GACE,MAAA,EAAA,IAAA,MAAA,OAAAI,EAAAS,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAGJ,OAAO,SACNf,CAA8D,CAC9DC,CAA6D,EAE7D,GAAI,CAACA,GAAqC,AAAmB,YAAnB,OAAOD,EAAwB,CACnED,EAAQ,CAAA,EAAIC,GACjB,MACD,CAEKD,EAAQC,EAAqCC,EACnD,CACD,CAlDmBe,EAAMC,IAAA,CAAA,6BAAuB,CAAAC,QAAA,SAAAC,CAAA,EAAA3B,EAAA2B,CAAA,CAAA,EAAA,GAAhDH,EAAOI,MAAE,CAAA,CAAAxB,wBAAgB,WAAuB,OAAAA,CAAA,CAAA,GAAAoB,EAAAC,IAAA,CAAA,uBAAA,CAAAxB,SAAA,SAAA0B,CAAA,EAAA1B,EAAA0B,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,eAAA,CAAAvB,MAAA,SAAAyB,CAAA,EAAAzB,EAAAyB,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kBAAA,CAAAtB,cAAA,SAAAwB,CAAA,EAAAxB,EAAAwB,CAAA,CAAA,EAAA\"}"}