{"code":"function module(e,s,o){let n,r,t,i,a,c,u,g,l;o.export({useIgnoreUserAction:()=>d}),o.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){n=e}},0),o.link(\"@rocket.chat/ui-contexts\",{useTranslation(e){r=e},useUserSubscription(e){t=e},useUserRoom(e){i=e},useUserId(e){a=e},useToastMessageDispatch(e){c=e},useEndpoint(e){u=e}},1),o.link(\"react\",{useMemo(e){g=e}},2),o.link(\"../../../lib/getRoomDirectives\",{getRoomDirectives(e){l=e}},3);let d=(e,s)=>{let o=r(),d=i(s),{_id:m}=e,h=a(),p=c(),k=t(s),U=u(\"GET\",\"/v1/chat.ignoreUser\"),b=(null==k?void 0:k.ignored)&&k.ignored.indexOf(m)>-1;if(!d)throw Error(\"Room not provided\");let{roomCanIgnore:_}=l({room:d,showingUserId:m,userSubscription:k}),v=n(async()=>{try{await U({rid:s,userId:m,ignore:String(!b)}),b?p({type:\"success\",message:o(\"User_has_been_unignored\")}):p({type:\"success\",message:o(\"User_has_been_ignored\")})}catch(e){p({type:\"error\",message:e})}}),y=g(()=>_&&m!==h?{content:o(b?\"Unignore\":\"Ignore\"),icon:\"ban\",onClick:v,type:\"management\"}:void 0,[v,b,h,_,o,m]);return y}}","map":"{\"version\":3,\"sources\":[\"client/views/room/hooks/useUserInfoActions/actions/useIgnoreUserAction.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, IUser } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport {\\n\\tuseTranslation,\\n\\tuseUserSubscription,\\n\\tuseUserRoom,\\n\\tuseUserId,\\n\\tuseToastMessageDispatch,\\n\\tuseEndpoint,\\n} from '@rocket.chat/ui-contexts';\\nimport { useMemo } from 'react';\\n\\nimport { getRoomDirectives } from '../../../lib/getRoomDirectives';\\nimport type { UserInfoAction, UserInfoActionType } from '../useUserInfoActions';\\n\\nexport const useIgnoreUserAction = (user: Pick<IUser, '_id' | 'username'>, rid: IRoom['_id']): UserInfoAction | undefined => {\\n\\tconst t = useTranslation();\\n\\tconst room = useUserRoom(rid);\\n\\tconst { _id: uid } = user;\\n\\tconst ownUserId = useUserId();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst currentSubscription = useUserSubscription(rid);\\n\\tconst ignoreUser = useEndpoint('GET', '/v1/chat.ignoreUser');\\n\\n\\tconst isIgnored = currentSubscription?.ignored && currentSubscription.ignored.indexOf(uid) > -1;\\n\\n\\tif (!room) {\\n\\t\\tthrow Error('Room not provided');\\n\\t}\\n\\n\\tconst { roomCanIgnore } = getRoomDirectives({ room, showingUserId: uid, userSubscription: currentSubscription });\\n\\n\\tconst ignoreUserAction = useMutableCallback(async () => {\\n\\t\\ttry {\\n\\t\\t\\tawait ignoreUser({ rid, userId: uid, ignore: String(!isIgnored) });\\n\\t\\t\\tif (isIgnored) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('User_has_been_unignored') });\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('User_has_been_ignored') });\\n\\t\\t\\t}\\n\\t\\t} catch (error: unknown) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t});\\n\\n\\tconst ignoreUserOption = useMemo(\\n\\t\\t() =>\\n\\t\\t\\troomCanIgnore && uid !== ownUserId\\n\\t\\t\\t\\t? {\\n\\t\\t\\t\\t\\t\\tcontent: t(isIgnored ? 'Unignore' : 'Ignore'),\\n\\t\\t\\t\\t\\t\\ticon: 'ban' as const,\\n\\t\\t\\t\\t\\t\\tonClick: ignoreUserAction,\\n\\t\\t\\t\\t\\t\\ttype: 'management' as UserInfoActionType,\\n\\t\\t\\t\\t  }\\n\\t\\t\\t\\t: undefined,\\n\\t\\t[ignoreUserAction, isIgnored, ownUserId, roomCanIgnore, t, uid],\\n\\t);\\n\\n\\treturn ignoreUserOption;\\n};\\n\",null],\"names\":[\"useMutableCallback\",\"useTranslation\",\"useUserSubscription\",\"useUserRoom\",\"useUserId\",\"useToastMessageDispatch\",\"useEndpoint\",\"useMemo\",\"getRoomDirectives\",\"module\",\"export\",\"useIgnoreUserAction\",\"link\",\"v\",\"user\",\"rid\",\"t\",\"room\",\"_id\",\"uid\",\"ownUserId\",\"dispatchToastMessage\",\"currentSubscription\",\"ignoreUser\",\"isIgnored\",\"ignored\",\"indexOf\",\"Error\",\"roomCanIgnore\",\"showingUserId\",\"userSubscription\",\"ignoreUserAction\",\"userId\",\"ignore\",\"String\",\"type\",\"message\",\"error\",\"ignoreUserOption\",\"content\",\"icon\",\"onClick\",\"undefined\"],\"mappings\":\"2BACiEA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAjEC,EAAOC,MAAE,CAAA,CAAAC,oBAA0BA,IAAAA,CAAA,GAA8BF,EAAAG,IAAA,CAAA,8BAAA,CAAAZ,mBAAAa,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,2BAAA,CAAAX,eAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,oBAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,YAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,UAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,wBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,YAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAL,QAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,iCAAA,CAAAJ,kBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAc1D,IAAMF,EAAsBA,CAACG,EAAuCC,KAC1E,IAAMC,EAAIf,IACJgB,EAAOd,EAAYY,GACnB,CAAEG,IAAKC,CAAAA,CAAK,CAAGL,EACfM,EAAYhB,IACZiB,EAAuBhB,IACvBiB,EAAsBpB,EAAoBa,GAC1CQ,EAAajB,EAAY,MAAO,uBAEhCkB,EAAY,AAAAF,CAAAA,MAAAA,EAAmB,KAAA,EAAnBA,EAAqBG,OAAO,AAAPA,GAAWH,EAAoBG,OAAO,CAACC,OAAO,CAACP,GAAO,GAE7F,GAAI,CAACF,EACJ,MAAMU,MAAM,qBAGb,GAAM,CAAEC,cAAAA,CAAAA,CAAe,CAAGpB,EAAkB,CAAES,KAAAA,EAAMY,cAAeV,EAAKW,iBAAkBR,CAAmB,GAEvGS,EAAmB/B,EAAmB,UAC3C,GAAI,CACH,MAAMuB,EAAW,CAAER,IAAAA,EAAKiB,OAAQb,EAAKc,OAAQC,OAAO,CAACV,EAAU,GAC3DA,EACHH,EAAqB,CAAEc,KAAM,UAAWC,QAASpB,EAAE,0BAA0B,GAE7EK,EAAqB,CAAEc,KAAM,UAAWC,QAASpB,EAAE,wBAAwB,EAE7E,CAAE,MAAOqB,EAAgB,CACxBhB,EAAqB,CAAEc,KAAM,QAASC,QAASC,CAAK,EACrD,CACD,GAEMC,EAAmB/B,EACxB,IACCqB,GAAiBT,IAAQC,EACtB,CACAmB,QAASvB,EAAEQ,EAAY,WAAa,UACpCgB,KAAM,MACNC,QAASV,EACTI,KAAM,cAENO,KAAAA,EACJ,CAACX,EAAkBP,EAAWJ,EAAWQ,EAAeZ,EAAGG,EAAI,EAGhE,OAAOmB,CACR\"}"}