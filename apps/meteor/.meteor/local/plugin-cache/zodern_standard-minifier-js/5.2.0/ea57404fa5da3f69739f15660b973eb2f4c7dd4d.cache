{"code":"function module(e,n,t){t.link(\"@babel/runtime/helpers/extends\",{default:function(e){a=e}},0),t.link(\"@babel/runtime/regenerator\",{default:function(e){c=e}},1),t.export({OmnichannelLivechatToggle:function(){return h}}),t.link(\"@rocket.chat/fuselage\",{Sidebar:function(e){i=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){s=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){o=e},useToastMessageDispatch:function(e){u=e},useTranslation:function(e){r=e}},2),t.link(\"react\",{default:function(e){l=e}},3),t.link(\"../../../hooks/omnichannel/useOmnichannelAgentAvailable\",{useOmnichannelAgentAvailable:function(e){f=e}},4);var a,c,i,s,o,u,r,l,f,h=function(e){var n=r(),t=f(),h=o(\"POST\",\"/v1/livechat/agent.status\"),k=u(),g=s(function(){return c.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.awrap(h({}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),k({type:\"error\",message:e.t0});case 8:case\"end\":return e.stop()}},null,null,[[0,5]],Promise)});return l.createElement(i.TopBar.Action,a({},e,{id:\"omnichannel-status-toggle\",title:n(t?\"Turn_off_answer_chats\":\"Turn_on_answer_chats\"),success:t,icon:t?\"message\":\"message-disabled\",onClick:g}))}}","map":"{\"version\":3,\"sources\":[\"client/sidebar/sections/actions/OmnichannelLivechatToggle.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Sidebar } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useEndpoint, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ComponentProps } from 'react';\\nimport React from 'react';\\n\\nimport { useOmnichannelAgentAvailable } from '../../../hooks/omnichannel/useOmnichannelAgentAvailable';\\n\\nexport const OmnichannelLivechatToggle = (props: Omit<ComponentProps<typeof Sidebar.TopBar.Action>, 'icon'>): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst agentAvailable = useOmnichannelAgentAvailable();\\n\\tconst changeAgentStatus = useEndpoint('POST', '/v1/livechat/agent.status');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst handleAvailableStatusChange = useMutableCallback(async () => {\\n\\t\\ttry {\\n\\t\\t\\tawait changeAgentStatus({});\\n\\t\\t} catch (error: unknown) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t});\\n\\n\\treturn (\\n\\t\\t<Sidebar.TopBar.Action\\n\\t\\t\\t{...props}\\n\\t\\t\\tid='omnichannel-status-toggle'\\n\\t\\t\\ttitle={agentAvailable ? t('Turn_off_answer_chats') : t('Turn_on_answer_chats')}\\n\\t\\t\\tsuccess={agentAvailable}\\n\\t\\t\\ticon={agentAvailable ? 'message' : 'message-disabled'}\\n\\t\\t\\tonClick={handleAvailableStatusChange}\\n\\t\\t/>\\n\\t);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_extends\",\"_regeneratorRuntime\",\"export\",\"OmnichannelLivechatToggle\",\"Sidebar\",\"useMutableCallback\",\"useEndpoint\",\"useToastMessageDispatch\",\"useTranslation\",\"React\",\"useOmnichannelAgentAvailable\",\"props\",\"t\",\"agentAvailable\",\"changeAgentStatus\",\"dispatchToastMessage\",\"handleAvailableStatusChange\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"t0\",\"type\",\"message\",\"stop\",\"Promise\",\"createElement\",\"TopBar\",\"Action\",\"id\",\"title\",\"success\",\"icon\",\"onClick\"],\"mappings\":\"uBAASA,EAASC,IAAM,CAAA,iCAAwB,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAhDH,EAAOM,MAAE,CAAA,CAAAC,0BAAe,WAAwB,OAAAA,CAAA,CAAA,GAAAP,EAAAC,IAAA,CAAA,wBAAA,CAAAO,QAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAQ,mBAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAS,YAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,EAAAQ,wBAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,EAAAS,eAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAU,EAAAV,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0DAAA,CAAAa,6BAAA,SAAAX,CAAA,EAAAW,EAAAX,CAAA,CAAA,EAAA,GAQzC,IARPC,EAAgDC,EAAAG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAQnCP,EAA4B,SAACQ,CAAiE,EAC1G,IAAMC,EAAIJ,IACJK,EAAiBH,IACjBI,EAAoBR,EAAY,OAAQ,6BACxCS,EAAuBR,IAEvBS,EAA8BX,EAAmB,WAAA,OAAAJ,EAAAgB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAAnB,EAAAoB,KAAA,CAE/CP,EAAkB,CAAA,GAAG,MAAA,EAAAI,EAAAE,IAAA,CAAA,EAAA,KAAA,MAAA,EAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAI,EAAA,CAAAJ,EAAA,KAAA,CAAA,GAE3BH,EAAqB,CAAEQ,KAAM,QAASC,QAAON,EAAAI,EAAAA,AAAO,EAAI,MAAA,EAAA,IAAA,MAAA,OAAAJ,EAAAO,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAAAC,QAAA,GAI1D,OACCjB,EAAAkB,aAAA,CAACvB,EAAQwB,MAAM,CAACC,MAAM,CAAA7B,EAAA,CAAA,EACjBW,EAAK,CACTmB,GAAG,4BACHC,KAAK,CAAmBnB,EAAE,AAAnBC,EAAmB,wBAA6B,wBACvDmB,QAASnB,EACToB,KAAMpB,EAAiB,UAAY,mBACnCqB,QAASlB,CAA4B,GAGxC\"}"}