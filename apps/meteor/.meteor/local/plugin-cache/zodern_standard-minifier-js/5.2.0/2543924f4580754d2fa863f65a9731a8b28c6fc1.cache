{"code":"function module(e,n,t){t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){o=e}},0),t.export({RoomTopic:function(){return _}}),t.link(\"@rocket.chat/core-typings\",{isTeamRoom:function(e){i=e}},0),t.link(\"@rocket.chat/fuselage\",{Box:function(e){u=e}},1),t.link(\"@rocket.chat/ui-client\",{RoomBanner:function(e){a=e},RoomBannerContent:function(e){l=e}},2),t.link(\"@rocket.chat/ui-contexts\",{useSetting:function(e){c=e},useUserId:function(e){r=e},useTranslation:function(e){s=e},useRouter:function(e){d=e}},3),t.link(\"react\",{default:function(e){f=e}},4),t.link(\"../../../../app/models/client\",{RoomRoles:function(e){m=e}},5),t.link(\"../../../components/MarkdownText\",{default:function(e){k=e}},6),t.link(\"../../../hooks/usePresence\",{usePresence:function(e){h=e}},7),t.link(\"../../../hooks/useReactiveQuery\",{useReactiveQuery:function(e){v=e}},8),t.link(\"../HeaderV2/RoomLeader\",{default:function(e){R=e}},9),t.link(\"../contextualBar/Info/hooks/useCanEditRoom\",{useCanEditRoom:function(e){p=e}},10);var o,i,u,a,l,c,r,s,d,f,m,k,h,v,R,p,_=function(e){var n,t,_,x=e.room,E=e.user,T=s(),g=p(x),B=r(),b=null===(n=x.uids)||void 0===n?void 0:n.filter(function(e){return e!==B}).shift(),y=h(b),C=c(\"UI_Use_Real_Name\"),I=d().getLocationPathname(),P=i(x)?I+\"/team-info\":I+\"/channel-settings\",U=v([\"rooms\",x._id,\"leader\",{not:null==E?void 0:E._id}],function(){var e=m.findOne({rid:x._id,roles:\"leader\",\"u._id\":{$ne:null==E?void 0:E._id}});return e?o(o({},e.u),{},{name:C&&e.u.name||e.u.username}):null}).data,j=\"d\"===x.t&&(null!==(t=null===(_=x.uids)||void 0===_?void 0:_.length)&&void 0!==t?t:0)<3?null==y?void 0:y.statusText:x.topic;return j||U?f.createElement(a,{className:\"rcx-header-section\",role:\"note\"},f.createElement(l,null,U&&!j&&g?f.createElement(u,{is:\"a\",href:P},T(\"Add_topic\")):f.createElement(k,{parseEmoji:!0,variant:\"inlineWithoutBreaks\",withTruncatedText:!0,content:j})),U&&f.createElement(R,U)):null}}","map":"{\"version\":3,\"sources\":[\"client/views/room/body/RoomTopic.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, IUser } from '@rocket.chat/core-typings';\\nimport { isTeamRoom } from '@rocket.chat/core-typings';\\nimport { Box } from '@rocket.chat/fuselage';\\nimport { RoomBanner, RoomBannerContent } from '@rocket.chat/ui-client';\\nimport { useSetting, useUserId, useTranslation, useRouter } from '@rocket.chat/ui-contexts';\\nimport React from 'react';\\n\\nimport { RoomRoles } from '../../../../app/models/client';\\nimport MarkdownText from '../../../components/MarkdownText';\\nimport { usePresence } from '../../../hooks/usePresence';\\nimport { useReactiveQuery } from '../../../hooks/useReactiveQuery';\\nimport RoomLeader from '../HeaderV2/RoomLeader';\\nimport { useCanEditRoom } from '../contextualBar/Info/hooks/useCanEditRoom';\\n\\ntype RoomTopicProps = {\\n\\troom: IRoom;\\n\\tuser: IUser | null;\\n};\\n\\nexport const RoomTopic = ({ room, user }: RoomTopicProps) => {\\n\\tconst t = useTranslation();\\n\\tconst canEdit = useCanEditRoom(room);\\n\\tconst userId = useUserId();\\n\\tconst directUserId = room.uids?.filter((uid) => uid !== userId).shift();\\n\\tconst directUserData = usePresence(directUserId);\\n\\tconst useRealName = useSetting('UI_Use_Real_Name') as boolean;\\n\\tconst router = useRouter();\\n\\n\\tconst currentRoute = router.getLocationPathname();\\n\\tconst href = isTeamRoom(room) ? `${currentRoute}/team-info` : `${currentRoute}/channel-settings`;\\n\\n\\tconst { data: roomLeader } = useReactiveQuery(['rooms', room._id, 'leader', { not: user?._id }], () => {\\n\\t\\tconst leaderRoomRole = RoomRoles.findOne({\\n\\t\\t\\t'rid': room._id,\\n\\t\\t\\t'roles': 'leader',\\n\\t\\t\\t'u._id': { $ne: user?._id },\\n\\t\\t});\\n\\n\\t\\tif (!leaderRoomRole) {\\n\\t\\t\\treturn null;\\n\\t\\t}\\n\\n\\t\\treturn {\\n\\t\\t\\t...leaderRoomRole.u,\\n\\t\\t\\tname: useRealName ? leaderRoomRole.u.name || leaderRoomRole.u.username : leaderRoomRole.u.username,\\n\\t\\t};\\n\\t});\\n\\n\\tconst topic = room.t === 'd' && (room.uids?.length ?? 0) < 3 ? directUserData?.statusText : room.topic;\\n\\n\\tif (!topic && !roomLeader) return null;\\n\\n\\treturn (\\n\\t\\t<RoomBanner className='rcx-header-section' role='note'>\\n\\t\\t\\t<RoomBannerContent>\\n\\t\\t\\t\\t{roomLeader && !topic && canEdit ? (\\n\\t\\t\\t\\t\\t<Box is='a' href={href}>\\n\\t\\t\\t\\t\\t\\t{t('Add_topic')}\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t) : (\\n\\t\\t\\t\\t\\t<MarkdownText parseEmoji={true} variant='inlineWithoutBreaks' withTruncatedText content={topic} />\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</RoomBannerContent>\\n\\t\\t\\t{roomLeader && <RoomLeader {...roomLeader} />}\\n\\t\\t</RoomBanner>\\n\\t);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"export\",\"RoomTopic\",\"isTeamRoom\",\"Box\",\"RoomBanner\",\"RoomBannerContent\",\"useSetting\",\"useUserId\",\"useTranslation\",\"useRouter\",\"React\",\"RoomRoles\",\"MarkdownText\",\"usePresence\",\"useReactiveQuery\",\"RoomLeader\",\"useCanEditRoom\",\"_ref\",\"_room$uids\",\"_room$uids$length\",\"_room$uids2\",\"room\",\"user\",\"t\",\"canEdit\",\"userId\",\"directUserId\",\"uids\",\"filter\",\"uid\",\"shift\",\"directUserData\",\"useRealName\",\"currentRoute\",\"router\",\"getLocationPathname\",\"href\",\"roomLeader\",\"_useReactiveQuery\",\"_id\",\"not\",\"leaderRoomRole\",\"findOne\",\"$ne\",\"u\",\"name\",\"username\",\"data\",\"topic\",\"length\",\"statusText\",\"createElement\",\"className\",\"role\",\"is\",\"parseEmoji\",\"variant\",\"withTruncatedText\",\"content\"],\"mappings\":\"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\"}"}