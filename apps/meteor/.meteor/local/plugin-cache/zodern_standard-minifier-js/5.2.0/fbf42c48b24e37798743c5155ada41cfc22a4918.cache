{"code":"function module(e,n,t){var r,a,u,i,c,l,o,s;t.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),t.link(\"@rocket.chat/fuselage\",{Box:function(e){a=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){u=e}},1),t.link(\"@tanstack/react-query\",{useQuery:function(e){i=e}},2),t.link(\"react\",{default:function(e){c=e}},3),t.link(\"react-i18next\",{useTranslation:function(e){l=e}},4),t.link(\"../../../components/Skeleton\",{FormSkeleton:function(e){o=e}},5),t.link(\"./AgentEdit\",{default:function(e){s=e}},6),t.exportDefault(function(e){var n=e.uid,t=l().t,d=u(\"GET\",\"/v1/livechat/department\"),f=u(\"GET\",\"/v1/livechat/users/agent/:_id\",{_id:n}),p=u(\"GET\",\"/v1/livechat/agents/:agentId/departments\",{agentId:n}),m=i([\"livechat-getAgentById\",n],function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",f());case 1:case\"end\":return e.stop()}},null,null,null,Promise)},{refetchOnWindowFocus:!1}),v=m.data,g=m.isLoading,h=m.error,k=i([\"livechat-getAgentDepartments\",n],function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",p());case 1:case\"end\":return e.stop()}},null,null,null,Promise)},{refetchOnWindowFocus:!1}),E=k.data,b=k.isLoading,x=k.error,w=i([\"livechat-getAvailableDepartments\"],function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",d({showArchived:\"true\"}));case 1:case\"end\":return e.stop()}},null,null,null,Promise)}),y=w.data,D=w.isLoading,A=w.error;return g||D||b||!E||!y?c.createElement(o,null):h||x||A||!(null!=v&&v.user)?c.createElement(a,{p:16},t(\"User_not_found\")):c.createElement(s,{agentData:v.user,userDepartments:E.departments,availableDepartments:y.departments})})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/agents/AgentEditWithData.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatAgent } from '@rocket.chat/core-typings';\\nimport { Box } from '@rocket.chat/fuselage';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { FormSkeleton } from '../../../components/Skeleton';\\nimport AgentEdit from './AgentEdit';\\n\\nconst AgentEditWithData = ({ uid }: { uid: ILivechatAgent['_id'] }): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst getAvailableDepartments = useEndpoint('GET', '/v1/livechat/department');\\n\\tconst getAgentById = useEndpoint('GET', '/v1/livechat/users/agent/:_id', { _id: uid });\\n\\tconst getAgentDepartments = useEndpoint('GET', '/v1/livechat/agents/:agentId/departments', { agentId: uid });\\n\\n\\tconst { data, isLoading, error } = useQuery(['livechat-getAgentById', uid], async () => getAgentById(), { refetchOnWindowFocus: false });\\n\\n\\tconst {\\n\\t\\tdata: agentDepartments,\\n\\t\\tisLoading: agentDepartmentsLoading,\\n\\t\\terror: agentsDepartmentsError,\\n\\t} = useQuery(['livechat-getAgentDepartments', uid], async () => getAgentDepartments(), { refetchOnWindowFocus: false });\\n\\n\\tconst {\\n\\t\\tdata: availableDepartments,\\n\\t\\tisLoading: availableDepartmentsLoading,\\n\\t\\terror: availableDepartmentsError,\\n\\t} = useQuery(['livechat-getAvailableDepartments'], async () => getAvailableDepartments({ showArchived: 'true' }));\\n\\n\\tif (isLoading || availableDepartmentsLoading || agentDepartmentsLoading || !agentDepartments || !availableDepartments) {\\n\\t\\treturn <FormSkeleton />;\\n\\t}\\n\\n\\tif (error || agentsDepartmentsError || availableDepartmentsError || !data?.user) {\\n\\t\\treturn <Box p={16}>{t('User_not_found')}</Box>;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<AgentEdit\\n\\t\\t\\tagentData={data.user}\\n\\t\\t\\tuserDepartments={agentDepartments.departments}\\n\\t\\t\\tavailableDepartments={availableDepartments.departments}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default AgentEditWithData;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"Box\",\"useEndpoint\",\"useQuery\",\"React\",\"useTranslation\",\"FormSkeleton\",\"AgentEdit\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"uid\",\"t\",\"_useTranslation\",\"getAvailableDepartments\",\"getAgentById\",\"_id\",\"getAgentDepartments\",\"agentId\",\"_useQuery\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"stop\",\"Promise\",\"refetchOnWindowFocus\",\"data\",\"isLoading\",\"error\",\"_useQuery2\",\"_context2\",\"agentDepartments\",\"agentDepartmentsLoading\",\"agentsDepartmentsError\",\"_useQuery3\",\"_context3\",\"showArchived\",\"availableDepartments\",\"availableDepartmentsLoading\",\"availableDepartmentsError\",\"createElement\",\"user\",\"p\",\"agentData\",\"userDepartments\",\"departments\"],\"mappings\":\"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\"}"}