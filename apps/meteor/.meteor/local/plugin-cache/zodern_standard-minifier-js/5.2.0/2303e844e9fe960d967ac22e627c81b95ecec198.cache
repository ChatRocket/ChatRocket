{"code":"function module(e,r,i){let a,o,n,s,t,l,d,m,c,u,p,f,g,h,v,y,w,b,q,_,k,x,C,F,A,P,O,j,T,$;i.export({RegisterForm:()=>S},!0),i.link(\"react/jsx-runtime\",{jsx(e){a=e},jsxs(e){o=e}},0),i.link(\"@rocket.chat/fuselage\",{FieldGroup(e){n=e},TextInput(e){s=e},Field(e){t=e},FieldLabel(e){l=e},FieldRow(e){d=e},FieldError(e){m=e},PasswordInput(e){c=e},ButtonGroup(e){u=e},Button(e){p=e},TextAreaInput(e){f=e},Callout(e){g=e}},1),i.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){h=e}},2),i.link(\"@rocket.chat/layout\",{Form(e){v=e},ActionLink(e){y=e}},3),i.link(\"@rocket.chat/ui-client\",{CustomFieldsForm(e){w=e},PasswordVerifier(e){b=e},useValidatePassword(e){q=e}},4),i.link(\"@rocket.chat/ui-contexts\",{useAccountsCustomFields(e){_=e},useSetting(e){k=e},useToastMessageDispatch(e){x=e}},5),i.link(\"react\",{useEffect(e){C=e},useRef(e){F=e},useState(e){A=e}},6),i.link(\"react-hook-form\",{useForm(e){P=e}},7),i.link(\"react-i18next\",{Trans(e){O=e},useTranslation(e){j=e}},8),i.link(\"./EmailConfirmationForm\",{default(e){T=e}},9),i.link(\"./hooks/useRegisterMethod\",{useRegisterMethod(e){$=e}},10);var R=this&&this.__awaiter||function(e,r,i,a){return new(i||(i=Promise))(function(o,n){function s(e){try{l(a.next(e))}catch(e){n(e)}}function t(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var r;e.done?o(e.value):((r=e.value)instanceof i?r:new i(function(e){e(r)})).then(s,t)}l((a=a.apply(e,r||[])).next())})},E=this&&this.__rest||function(e,r){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>r.indexOf(a)&&(i[a]=e[a]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(i[a[o]]=e[a[o]]);return i};let S=({setLoginRoute:e})=>{var r,i,S,I,B,L,N;let{t:U}=j(),M=!!k(\"Accounts_RequireNameForSignUp\"),Z=k(\"Accounts_RequirePasswordConfirmation\"),D=k(\"Accounts_ManuallyApproveNewUsers\"),G=String(k(\"Accounts_EmailOrUsernamePlaceholder\")),J=String(k(\"Accounts_PasswordPlaceholder\")),V=String(k(\"Accounts_ConfirmPasswordPlaceholder\")),H=h(),K=h(),W=h(),Y=h(),z=h(),Q=h(),X=h(),ee=h(),er=$(),ei=_(),[ea,eo]=A(void 0),en=x(),{register:es,handleSubmit:et,setError:el,watch:ed,getValues:em,clearErrors:ec,control:eu,formState:{errors:ep}}=P({mode:\"onBlur\"}),{password:ef}=ed(),eg=q(ef),eh=F(null);return(C(()=>{eh.current&&eh.current.focus()},[]),(null===(r=ep.email)||void 0===r?void 0:r.type)===\"invalid-email\")?a(T,{onBackToLogin:()=>ec(\"email\"),email:em(\"email\")}):o(v,{tabIndex:-1,ref:eh,\"aria-labelledby\":H,\"aria-describedby\":\"welcomeTitle\",onSubmit:et(r=>R(void 0,void 0,void 0,function*(){var{password:i,passwordConfirmation:a}=r,o=E(r,[\"password\",\"passwordConfirmation\"]);er.mutate(Object.assign({pass:i},o),{onError:r=>{[r.error,r.errorType].includes(\"error-invalid-email\")&&el(\"email\",{type:\"invalid-email\",message:U(\"registration.component.form.invalidEmail\")}),\"error-user-already-exists\"===r.errorType&&el(\"username\",{type:\"user-already-exists\",message:U(\"registration.component.form.usernameAlreadyExists\")}),/Email already exists/.test(r.error)&&el(\"email\",{type:\"email-already-exists\",message:U(\"registration.component.form.emailAlreadyExists\")}),/Username is already in use/.test(r.error)&&el(\"username\",{type:\"username-already-exists\",message:U(\"registration.component.form.userAlreadyExist\")}),/The username provided is not valid/.test(r.error)&&el(\"username\",{type:\"username-contains-invalid-chars\",message:U(\"registration.component.form.usernameContainsInvalidChars\")}),/Name contains invalid characters/.test(r.error)&&el(\"name\",{type:\"name-contains-invalid-chars\",message:U(\"registration.component.form.nameContainsInvalidChars\")}),/error-too-many-requests/.test(r.error)&&en({type:\"error\",message:r.error}),/error-user-is-not-activated/.test(r.error)&&(en({type:\"info\",message:U(\"registration.page.registration.waitActivationWarning\")}),e(\"login\")),\"error-user-registration-custom-field\"===r.error&&eo(r.message)}})})),children:[a(v.Header,{children:a(v.Title,{id:H,children:U(\"registration.component.form.createAnAccount\")})}),a(v.Container,{children:o(n,{children:[o(t,{children:[a(l,{required:M,htmlFor:W,children:U(\"registration.component.form.name\")}),a(d,{children:a(s,Object.assign({},es(\"name\",{required:!!M&&U(\"Required_field\",{field:U(\"registration.component.form.name\")})}),{error:null===(i=null==ep?void 0:ep.name)||void 0===i?void 0:i.message,\"aria-required\":M,\"aria-invalid\":ep.name?\"true\":\"false\",placeholder:U(\"onboarding.form.adminInfoForm.fields.fullName.placeholder\"),\"aria-describedby\":`${W}-error`,id:W}))}),ep.name&&a(m,{\"aria-live\":\"assertive\",id:`${W}-error`,children:ep.name.message})]}),o(t,{children:[a(l,{required:!0,htmlFor:Y,children:U(\"registration.component.form.email\")}),a(d,{children:a(s,Object.assign({},es(\"email\",{required:U(\"Required_field\",{field:U(\"registration.component.form.email\")}),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,message:U(\"registration.component.form.invalidEmail\")}}),{placeholder:G||U(\"registration.component.form.emailPlaceholder\"),error:null===(S=null==ep?void 0:ep.email)||void 0===S?void 0:S.message,\"aria-required\":\"true\",\"aria-invalid\":ep.email?\"true\":\"false\",\"aria-describedby\":`${Y}-error`,id:Y}))}),ep.email&&a(m,{\"aria-live\":\"assertive\",id:`${Y}-error`,children:ep.email.message})]}),o(t,{children:[a(l,{required:!0,htmlFor:z,children:U(\"registration.component.form.username\")}),a(d,{children:a(s,Object.assign({},es(\"username\",{required:U(\"Required_field\",{field:U(\"registration.component.form.username\")})}),{error:null===(I=null==ep?void 0:ep.username)||void 0===I?void 0:I.message,\"aria-required\":\"true\",\"aria-invalid\":ep.username?\"true\":\"false\",\"aria-describedby\":`${z}-error`,id:z,placeholder:\"jon.doe\"}))}),ep.username&&a(m,{\"aria-live\":\"assertive\",id:`${z}-error`,children:ep.username.message})]}),o(t,{children:[a(l,{required:!0,htmlFor:Q,children:U(\"registration.component.form.password\")}),a(d,{children:a(c,Object.assign({},es(\"password\",{required:U(\"Required_field\",{field:U(\"registration.component.form.password\")}),validate:()=>!!eg||U(\"Password_must_meet_the_complexity_requirements\")}),{error:null===(B=ep.password)||void 0===B?void 0:B.message,\"aria-required\":\"true\",\"aria-invalid\":ep.password?\"true\":void 0,id:Q,placeholder:J||U(\"Create_a_password\"),\"aria-describedby\":`${K} ${Q}-error`}))}),(null==ep?void 0:ep.password)&&a(m,{\"aria-live\":\"assertive\",id:`${Q}-error`,children:ep.password.message}),a(b,{password:ef,id:K})]}),Z&&o(t,{children:[a(l,{required:!0,htmlFor:X,children:U(\"registration.component.form.confirmPassword\")}),a(d,{children:a(c,Object.assign({},es(\"passwordConfirmation\",{required:U(\"Required_field\",{field:U(\"registration.component.form.confirmPassword\")}),deps:[\"password\"],validate:e=>ed(\"password\")===e||U(\"registration.component.form.invalidConfirmPass\")}),{error:null===(L=ep.passwordConfirmation)||void 0===L?void 0:L.message,\"aria-required\":\"true\",\"aria-invalid\":ep.passwordConfirmation?\"true\":\"false\",id:X,\"aria-describedby\":`${X}-error`,placeholder:V||U(\"Confirm_password\"),disabled:!eg}))}),ep.passwordConfirmation&&a(m,{\"aria-live\":\"assertive\",id:`${X}-error`,children:ep.passwordConfirmation.message})]}),D&&o(t,{children:[a(l,{required:!0,htmlFor:ee,children:U(\"registration.component.form.reasonToJoin\")}),a(d,{children:a(f,Object.assign({},es(\"reason\",{required:U(\"Required_field\",{field:U(\"registration.component.form.reasonToJoin\")})}),{error:null===(N=null==ep?void 0:ep.reason)||void 0===N?void 0:N.message,\"aria-required\":\"true\",\"aria-invalid\":ep.reason?\"true\":\"false\",\"aria-describedby\":`${ee}-error`,id:ee}))}),ep.reason&&a(m,{\"aria-live\":\"assertive\",id:`${ee}-error`,children:ep.reason.message})]}),a(w,{formName:\"customFields\",formControl:eu,metadata:ei}),ea&&a(g,{type:\"danger\",children:ea})]})}),o(v.Footer,{children:[a(u,{children:a(p,{type:\"submit\",loading:er.isLoading,primary:!0,children:U(\"registration.component.form.joinYourTeam\")})}),a(y,{onClick:()=>{e(\"login\")},children:a(O,{i18nKey:\"registration.page.register.back\",children:\"Back to Login\"})})]})]})};i.exportDefault(S)}","map":"{\"version\":3,\"sources\":[\"<anon>\"],\"names\":[],\"mappings\":\"\"}"}