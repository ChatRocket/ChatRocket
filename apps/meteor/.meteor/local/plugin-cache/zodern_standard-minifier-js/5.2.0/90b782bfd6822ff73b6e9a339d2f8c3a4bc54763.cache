{"code":"function module(e,n,t){var r,l,o,u,c,a,i,s,f,m,d,k,g,E,b,h,p,P,S,T,C,v,y,G,w,x,F,I,_,A=[\"current\",\"itemsPerPage\",\"setItemsPerPage\",\"setCurrent\"];t.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),t.link(\"@babel/runtime/helpers/extends\",{default:function(e){l=e}},1),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){o=e}},2),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){u=e}},3),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){c=e}},4),t.link(\"@rocket.chat/fuselage\",{Pagination:function(e){a=e},States:function(e){i=e},StatesIcon:function(e){s=e},StatesActions:function(e){f=e},StatesAction:function(e){m=e},StatesTitle:function(e){d=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue:function(e){k=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useTranslation:function(e){g=e},useEndpoint:function(e){E=e}},2),t.link(\"@tanstack/react-query\",{useQuery:function(e){b=e}},3),t.link(\"react\",{default:function(e){h=e},useState:function(e){p=e},useMemo:function(e){P=e},useEffect:function(e){S=e}},4),t.link(\"../../../../components/FilterByText\",{default:function(e){T=e}},5),t.link(\"../../../../components/GenericNoResults\",{default:function(e){C=e}},6),t.link(\"../../../../components/GenericTable\",{GenericTable:function(e){v=e},GenericTableBody:function(e){y=e},GenericTableHeader:function(e){G=e},GenericTableHeaderCell:function(e){w=e},GenericTableLoadingTable:function(e){x=e}},7),t.link(\"../../../../components/GenericTable/hooks/usePagination\",{usePagination:function(e){F=e}},8),t.link(\"../../../../components/GenericTable/hooks/useSort\",{useSort:function(e){I=e}},9),t.link(\"./CustomSoundRow\",{default:function(e){_=e}},10),t.exportDefault(function(e){var n=e.reload,t=e.onClick,B=g(),D=I(\"name\"),R=D.sortBy,j=D.sortDirection,H=D.setSort,L=F(),M=L.current,N=L.itemsPerPage,q=L.setItemsPerPage,O=L.setCurrent,Q=c(L,A),V=p(\"\"),W=u(V,2),z=W[0],J=W[1],K=k(P(function(){return o(o({name:z,sort:'{ \"'+R+'\": '+(\"asc\"===j?1:-1)+\" }\"},N&&{count:N}),M&&{offset:M})},[z,N,M,R,j]),500),U=E(\"GET\",\"/v1/custom-sounds.list\"),X=b([\"custom-sounds\",K],function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",U(K));case 1:case\"end\":return e.stop()}},null,null,null,Promise)},{refetchOnMount:!1}),Y=X.data,Z=X.refetch,$=X.isLoading,ee=X.isError,en=X.isSuccess;S(function(){n.current=Z},[n,Z]);var et=h.createElement(h.Fragment,null,h.createElement(w,{key:\"name\",direction:j,active:\"name\"===R,onClick:H,sort:\"name\"},B(\"Name\")),h.createElement(w,{w:\"x40\",key:\"action\"}));return h.createElement(h.Fragment,null,h.createElement(T,{onChange:J}),$&&h.createElement(v,null,h.createElement(G,null,et),h.createElement(y,null,h.createElement(x,{headerCells:2}))),en&&(null==Y?void 0:Y.sounds.length)>0&&h.createElement(h.Fragment,null,h.createElement(v,null,h.createElement(G,null,et),h.createElement(y,null,Y.sounds.map(function(e){return h.createElement(_,{key:e._id,sound:e,onClick:t})}))),h.createElement(a,l({divider:!0,current:M,itemsPerPage:N,count:Y.sounds.length||0,onSetItemsPerPage:q,onSetCurrent:O},Q))),en&&(null==Y?void 0:Y.sounds.length)===0&&h.createElement(C,null),ee&&h.createElement(i,null,h.createElement(s,{name:\"warning\",variation:\"danger\"}),h.createElement(d,null,B(\"Something_went_wrong\")),h.createElement(f,null,h.createElement(m,{onClick:function(){return Z()}},B(\"Reload_page\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/customSounds/CustomSoundsTable/CustomSoundsTable.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Pagination, States, StatesIcon, StatesActions, StatesAction, StatesTitle } from '@rocket.chat/fuselage';\\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\\nimport { useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { MutableRefObject } from 'react';\\nimport React, { useState, useMemo, useEffect } from 'react';\\n\\nimport FilterByText from '../../../../components/FilterByText';\\nimport GenericNoResults from '../../../../components/GenericNoResults';\\nimport {\\n\\tGenericTable,\\n\\tGenericTableBody,\\n\\tGenericTableHeader,\\n\\tGenericTableHeaderCell,\\n\\tGenericTableLoadingTable,\\n} from '../../../../components/GenericTable';\\nimport { usePagination } from '../../../../components/GenericTable/hooks/usePagination';\\nimport { useSort } from '../../../../components/GenericTable/hooks/useSort';\\nimport CustomSoundRow from './CustomSoundRow';\\n\\ntype CustomSoundsTableProps = {\\n\\tonClick: (soundId: string) => () => void;\\n\\treload: MutableRefObject<() => void>;\\n};\\n\\nconst CustomSoundsTable = ({ reload, onClick }: CustomSoundsTableProps) => {\\n\\tconst t = useTranslation();\\n\\tconst { sortBy, sortDirection, setSort } = useSort<'name'>('name');\\n\\tconst { current, itemsPerPage, setItemsPerPage: onSetItemsPerPage, setCurrent: onSetCurrent, ...paginationProps } = usePagination();\\n\\n\\tconst [text, setParams] = useState('');\\n\\n\\tconst query = useDebouncedValue(\\n\\t\\tuseMemo(\\n\\t\\t\\t() => ({\\n\\t\\t\\t\\tname: text,\\n\\t\\t\\t\\tsort: `{ \\\"${sortBy}\\\": ${sortDirection === 'asc' ? 1 : -1} }`,\\n\\t\\t\\t\\t...(itemsPerPage && { count: itemsPerPage }),\\n\\t\\t\\t\\t...(current && { offset: current }),\\n\\t\\t\\t}),\\n\\t\\t\\t[text, itemsPerPage, current, sortBy, sortDirection],\\n\\t\\t),\\n\\t\\t500,\\n\\t);\\n\\n\\tconst getSounds = useEndpoint('GET', '/v1/custom-sounds.list');\\n\\tconst { data, refetch, isLoading, isError, isSuccess } = useQuery(['custom-sounds', query], async () => getSounds(query), {\\n\\t\\trefetchOnMount: false,\\n\\t});\\n\\n\\tuseEffect(() => {\\n\\t\\treload.current = refetch;\\n\\t}, [reload, refetch]);\\n\\n\\tconst headers = (\\n\\t\\t<>\\n\\t\\t\\t<GenericTableHeaderCell key='name' direction={sortDirection} active={sortBy === 'name'} onClick={setSort} sort='name'>\\n\\t\\t\\t\\t{t('Name')}\\n\\t\\t\\t</GenericTableHeaderCell>\\n\\t\\t\\t<GenericTableHeaderCell w='x40' key='action' />\\n\\t\\t</>\\n\\t);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<FilterByText onChange={setParams} />\\n\\t\\t\\t{isLoading && (\\n\\t\\t\\t\\t<GenericTable>\\n\\t\\t\\t\\t\\t<GenericTableHeader>{headers}</GenericTableHeader>\\n\\t\\t\\t\\t\\t<GenericTableBody>\\n\\t\\t\\t\\t\\t\\t<GenericTableLoadingTable headerCells={2} />\\n\\t\\t\\t\\t\\t</GenericTableBody>\\n\\t\\t\\t\\t</GenericTable>\\n\\t\\t\\t)}\\n\\t\\t\\t{isSuccess && data?.sounds.length > 0 && (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<GenericTable>\\n\\t\\t\\t\\t\\t\\t<GenericTableHeader>{headers}</GenericTableHeader>\\n\\t\\t\\t\\t\\t\\t<GenericTableBody>\\n\\t\\t\\t\\t\\t\\t\\t{data.sounds.map((sound) => (\\n\\t\\t\\t\\t\\t\\t\\t\\t<CustomSoundRow key={sound._id} sound={sound} onClick={onClick} />\\n\\t\\t\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t\\t\\t</GenericTableBody>\\n\\t\\t\\t\\t\\t</GenericTable>\\n\\t\\t\\t\\t\\t<Pagination\\n\\t\\t\\t\\t\\t\\tdivider\\n\\t\\t\\t\\t\\t\\tcurrent={current}\\n\\t\\t\\t\\t\\t\\titemsPerPage={itemsPerPage}\\n\\t\\t\\t\\t\\t\\tcount={data.sounds.length || 0}\\n\\t\\t\\t\\t\\t\\tonSetItemsPerPage={onSetItemsPerPage}\\n\\t\\t\\t\\t\\t\\tonSetCurrent={onSetCurrent}\\n\\t\\t\\t\\t\\t\\t{...paginationProps}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</>\\n\\t\\t\\t)}\\n\\t\\t\\t{isSuccess && data?.sounds.length === 0 && <GenericNoResults />}\\n\\t\\t\\t{isError && (\\n\\t\\t\\t\\t<States>\\n\\t\\t\\t\\t\\t<StatesIcon name='warning' variation='danger' />\\n\\t\\t\\t\\t\\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\\n\\t\\t\\t\\t\\t<StatesActions>\\n\\t\\t\\t\\t\\t\\t<StatesAction onClick={() => refetch()}>{t('Reload_page')}</StatesAction>\\n\\t\\t\\t\\t\\t</StatesActions>\\n\\t\\t\\t\\t</States>\\n\\t\\t\\t)}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default CustomSoundsTable;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_extends\",\"_objectSpread\",\"_slicedToArray\",\"_objectWithoutProperties\",\"Pagination\",\"States\",\"StatesIcon\",\"StatesActions\",\"StatesAction\",\"StatesTitle\",\"useDebouncedValue\",\"useTranslation\",\"useEndpoint\",\"useQuery\",\"React\",\"useState\",\"useMemo\",\"useEffect\",\"FilterByText\",\"GenericNoResults\",\"GenericTable\",\"GenericTableBody\",\"GenericTableHeader\",\"GenericTableHeaderCell\",\"GenericTableLoadingTable\",\"usePagination\",\"useSort\",\"CustomSoundRow\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"reload\",\"onClick\",\"t\",\"_useSort\",\"sortBy\",\"sortDirection\",\"setSort\",\"_usePagination\",\"current\",\"itemsPerPage\",\"onSetItemsPerPage\",\"setItemsPerPage\",\"onSetCurrent\",\"setCurrent\",\"paginationProps\",\"_excluded\",\"_useState\",\"_useState2\",\"text\",\"setParams\",\"query\",\"name\",\"sort\",\"count\",\"offset\",\"getSounds\",\"_useQuery\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"stop\",\"Promise\",\"refetchOnMount\",\"data\",\"refetch\",\"isLoading\",\"isError\",\"isSuccess\",\"headers\",\"createElement\",\"Fragment\",\"key\",\"direction\",\"active\",\"w\",\"onChange\",\"headerCells\",\"sounds\",\"length\",\"map\",\"sound\",\"_id\",\"divider\",\"variation\"],\"mappings\":\"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\"}"}