{"code":"function module(e,t,a){let n,l,c,i,r,o,s;a.link(\"@rocket.chat/fuselage\",{Box(e){n=e}},0),a.link(\"react\",{default(e){l=e},useCallback(e){c=e},Fragment(e){i=e}},1),a.link(\"react-i18next\",{useTranslation(e){r=e}},2),a.link(\"../../../../../app/ui/client/lib/UserAction\",{UserAction(e){o=e}},3),a.link(\"../../../../hooks/useReactiveValue\",{useReactiveValue(e){s=e}},4),a.exportDefault(e=>{let{rid:t,tmid:a}=e,{t:u}=r(),k=s(c(()=>{let e=o.get(a||t)||{},n=Object.entries(e);return n.map(e=>{let[t,a]=e,n=t.split(\"-\")[1],l=Object.keys(a);if(0!==l.length)return{action:n,users:l}}).filter(Boolean)},[t,a]));return l.createElement(n,{h:\"x20\",className:\"rc-message-box__activity-wrapper\",fontScale:\"c1\",color:\"annotation\",\"aria-live\":\"polite\",display:\"flex\",alignItems:\"center\"},k.map((e,t)=>{let{action:a,users:n}=e;return l.createElement(i,{key:a},t>0&&\", \",n.length<5?n.join(\", \"):\"\".concat(n.slice(0,4).join(\", \"),\" \").concat(u(\"and\"),\" \").concat(u(\"others\")),\" \",n.length>1?u(\"are_\".concat(a)):u(\"is_\".concat(a)))}))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/ComposerUserActionIndicator/ComposerUserActionIndicator.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box } from '@rocket.chat/fuselage';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback, Fragment } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { UserAction } from '../../../../../app/ui/client/lib/UserAction';\\nimport { useReactiveValue } from '../../../../hooks/useReactiveValue';\\n\\nconst maxUsernames = 5;\\n\\nconst ComposerUserActionIndicator = ({ rid, tmid }: { rid: string; tmid?: string }): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst actions = useReactiveValue(\\n\\t\\tuseCallback(() => {\\n\\t\\t\\tconst roomAction = UserAction.get(tmid || rid) || {};\\n\\n\\t\\t\\tconst activities = Object.entries(roomAction);\\n\\n\\t\\t\\treturn activities\\n\\t\\t\\t\\t.map(([key, _users]) => {\\n\\t\\t\\t\\t\\tconst action = key.split('-')[1];\\n\\n\\t\\t\\t\\t\\tconst users = Object.keys(_users);\\n\\t\\t\\t\\t\\tif (users.length === 0) {\\n\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\taction,\\n\\t\\t\\t\\t\\t\\tusers,\\n\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\t.filter(Boolean) as {\\n\\t\\t\\t\\taction: 'typing' | 'recording' | 'uploading' | 'playing';\\n\\t\\t\\t\\tusers: string[];\\n\\t\\t\\t}[];\\n\\t\\t}, [rid, tmid]),\\n\\t);\\n\\treturn (\\n\\t\\t<Box\\n\\t\\t\\th='x20'\\n\\t\\t\\tclassName='rc-message-box__activity-wrapper'\\n\\t\\t\\tfontScale='c1'\\n\\t\\t\\tcolor='annotation'\\n\\t\\t\\taria-live='polite'\\n\\t\\t\\tdisplay='flex'\\n\\t\\t\\talignItems='center'\\n\\t\\t>\\n\\t\\t\\t{actions.map(({ action, users }, index) => (\\n\\t\\t\\t\\t<Fragment key={action}>\\n\\t\\t\\t\\t\\t{index > 0 && ', '}\\n\\t\\t\\t\\t\\t{users.length < maxUsernames\\n\\t\\t\\t\\t\\t\\t? users.join(', ')\\n\\t\\t\\t\\t\\t\\t: `${users.slice(0, maxUsernames - 1).join(', ')} ${t('and')} ${t('others')}`}{' '}\\n\\t\\t\\t\\t\\t{users.length > 1 ? t(`are_${action}`) : t(`is_${action}`)}\\n\\t\\t\\t\\t</Fragment>\\n\\t\\t\\t))}\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default ComposerUserActionIndicator;\\n\",null],\"names\":[\"Box\",\"React\",\"useCallback\",\"Fragment\",\"useTranslation\",\"UserAction\",\"useReactiveValue\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"rid\",\"tmid\",\"t\",\"actions\",\"roomAction\",\"get\",\"activities\",\"Object\",\"entries\",\"map\",\"_ref2\",\"key\",\"_users\",\"action\",\"split\",\"users\",\"keys\",\"length\",\"filter\",\"Boolean\",\"createElement\",\"h\",\"className\",\"fontScale\",\"color\",\"display\",\"alignItems\",\"_ref3\",\"index\",\"join\",\"concat\",\"slice\",\"maxUsernames\"],\"mappings\":\"2BAAAA,EAA4CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAArCC,EAAOC,IAAA,CAAM,wBAAwB,CAAAR,IAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,YAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gBAAA,CAAAJ,eAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,8CAAA,CAAAH,WAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,qCAAA,CAAAF,iBAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAA5CF,EAAOI,aAAa,CAUgBC,IAAgE,GAA/D,CAAEC,IAAAA,CAAG,CAAEC,KAAAA,CAAAA,CAAsC,CAAAF,EAC3E,CAAEG,EAAAA,CAAAA,CAAG,CAAGX,IACRY,EAAUV,EACfJ,EAAY,KACX,IAAMe,EAAaZ,EAAWa,GAAG,CAACJ,GAAQD,IAAQ,CAAA,EAE5CM,EAAaC,OAAOC,OAAO,CAACJ,GAElC,OAAOE,EACLG,GAAG,CAACC,IAAkB,GAAjB,CAACC,EAAKC,EAAO,CAAAF,EACZG,EAASF,EAAIG,KAAK,CAAC,IAAI,CAAC,EAAE,CAE1BC,EAAQR,OAAOS,IAAI,CAACJ,GAC1B,GAAIG,AAAiB,IAAjBA,EAAME,MAAM,CAIhB,MAAO,CACNJ,OAAAA,EACAE,MAAAA,EAEF,GACCG,MAAM,CAACC,QAIV,EAAG,CAACnB,EAAKC,EAAK,GAEf,OACCb,EAAAgC,aAAA,CAACjC,EAAG,CACHkC,EAAE,MACFC,UAAU,mCACVC,UAAU,KACVC,MAAM,aACN,YAAU,SACVC,QAAQ,OACRC,WAAW,QAAQ,EAElBvB,EAAQM,GAAG,CAAC,CAAAkB,EAAoBC,KAAK,GAAxB,CAAEf,OAAAA,CAAM,CAAEE,MAAAA,CAAAA,CAAO,CAAAY,EAAA,OAC9BvC,EAAAgC,aAAA,CAAC9B,EAAQ,CAACqB,IAAKE,CAAO,EACpBe,EAAQ,GAAK,KACbb,EAAME,MAAM,CA3CG,EA4CbF,EAAMc,IAAI,CAAC,MAAK,GAAAC,MAAA,CACbf,EAAMgB,KAAK,CAAC,EAAGC,GAAkBH,IAAI,CAAC,MAAK,KAAAC,MAAA,CAAI5B,EAAE,OAAM,KAAA4B,MAAA,CAAI5B,EAAE,WAAa,IAC/Ea,EAAME,MAAM,CAAG,EAAIf,EAAC,OAAA4B,MAAA,CAAQjB,IAAYX,EAAC,MAAA4B,MAAA,CAAOjB,IACvC,GAIf\"}"}