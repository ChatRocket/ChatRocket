{"code":"function module(e,n,t){var a,r,o,s,l,i,c,u,m,f,g,d,p,E,h,k,w,_,x;t.link(\"@babel/runtime/regenerator\",{default:function(e){a=e}},0),t.link(\"@rocket.chat/fuselage\",{Box:function(e){r=e},Callout:function(e){o=e},Message:function(e){s=e},StatesAction:function(e){l=e},StatesActions:function(e){i=e},StatesIcon:function(e){c=e},StatesTitle:function(e){u=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){m=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){f=e},useToastMessageDispatch:function(e){g=e},useTranslation:function(e){d=e}},2),t.link(\"@tanstack/react-query\",{useQuery:function(e){p=e}},3),t.link(\"react\",{default:function(e){E=e},Fragment:function(e){h=e}},4),t.link(\"../../../components/Contextualbar\",{ContextualbarFooter:function(e){k=e}},5),t.link(\"../../../components/GenericNoResults\",{default:function(e){w=e}},6),t.link(\"./MessageContextFooter\",{default:function(e){_=e}},7),t.link(\"./helpers/ContextMessage\",{default:function(e){x=e}},8),t.exportDefault(function(e){var n=e.userId,t=e.onRedirect,b=d(),y=g(),M=f(\"GET\",\"/v1/moderation.user.reportedMessages\"),v=p([\"moderation\",\"msgReports\",\"fetchDetails\",{userId:n}],function(){var e;return a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.awrap(M({userId:n}));case 2:return e=t.sent,t.abrupt(\"return\",e);case 4:case\"end\":return t.stop()}},null,null,null,Promise)},{onError:function(e){y({type:\"error\",message:e})}}),C=v.data,D=v.refetch,I=v.isLoading,S=v.isSuccess,R=v.isError,F=m(function(){D()});return E.createElement(E.Fragment,null,E.createElement(r,{display:\"flex\",flexDirection:\"column\",width:\"full\",height:\"full\",overflowY:\"auto\",overflowX:\"hidden\"},I&&E.createElement(s,null,b(\"Loading\")),S&&E.createElement(r,{padding:24},C.messages.length>0&&E.createElement(o,{title:b(\"Moderation_Duplicate_messages\"),type:\"warning\",icon:\"warning\"},b(\"Moderation_Duplicate_messages_warning\")),!C.user&&E.createElement(o,{mbs:8,type:\"warning\",icon:\"warning\"},b(\"Moderation_User_deleted_warning\"))),S&&C.messages.length>0&&C.messages.map(function(e){return E.createElement(h,{key:e._id},E.createElement(x,{message:e.message,room:e.room,onRedirect:t,onChange:F,deleted:!C.user}))}),S&&0===C.messages.length&&E.createElement(w,{title:b(\"No_message_reports\"),icon:\"message\"}),R&&E.createElement(r,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",pb:20,color:\"default\"},E.createElement(c,{name:\"warning\",variation:\"danger\"}),E.createElement(u,null,b(\"Something_went_wrong\")),E.createElement(i,null,E.createElement(l,{onClick:F},b(\"Reload_page\"))))),S&&C.messages.length>0&&E.createElement(k,null,E.createElement(_,{userId:n,deleted:!C.user})))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/moderation/UserMessages.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Callout, Message, StatesAction, StatesActions, StatesIcon, StatesTitle } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useEndpoint, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport React, { Fragment } from 'react';\\n\\nimport { ContextualbarFooter } from '../../../components/Contextualbar';\\nimport GenericNoResults from '../../../components/GenericNoResults';\\nimport MessageContextFooter from './MessageContextFooter';\\nimport ContextMessage from './helpers/ContextMessage';\\n\\nconst UserMessages = ({ userId, onRedirect }: { userId: string; onRedirect: (mid: string) => void }) => {\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst getUserMessages = useEndpoint('GET', '/v1/moderation.user.reportedMessages');\\n\\n\\tconst {\\n\\t\\tdata: report,\\n\\t\\trefetch: reloadUserMessages,\\n\\t\\tisLoading,\\n\\t\\tisSuccess,\\n\\t\\tisError,\\n\\t} = useQuery(\\n\\t\\t['moderation', 'msgReports', 'fetchDetails', { userId }],\\n\\t\\tasync () => {\\n\\t\\t\\tconst messages = await getUserMessages({ userId });\\n\\t\\t\\treturn messages;\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tonError: (error) => {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n\\n\\tconst handleChange = useMutableCallback(() => {\\n\\t\\treloadUserMessages();\\n\\t});\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<Box display='flex' flexDirection='column' width='full' height='full' overflowY='auto' overflowX='hidden'>\\n\\t\\t\\t\\t{isLoading && <Message>{t('Loading')}</Message>}\\n\\t\\t\\t\\t{isSuccess && (\\n\\t\\t\\t\\t\\t<Box padding={24}>\\n\\t\\t\\t\\t\\t\\t{report.messages.length > 0 && (\\n\\t\\t\\t\\t\\t\\t\\t<Callout title={t('Moderation_Duplicate_messages')} type='warning' icon='warning'>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Moderation_Duplicate_messages_warning')}\\n\\t\\t\\t\\t\\t\\t\\t</Callout>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t\\t{!report.user && (\\n\\t\\t\\t\\t\\t\\t\\t<Callout mbs={8} type='warning' icon='warning'>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Moderation_User_deleted_warning')}\\n\\t\\t\\t\\t\\t\\t\\t</Callout>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t{isSuccess &&\\n\\t\\t\\t\\t\\treport.messages.length > 0 &&\\n\\t\\t\\t\\t\\treport.messages.map((message) => (\\n\\t\\t\\t\\t\\t\\t<Fragment key={message._id}>\\n\\t\\t\\t\\t\\t\\t\\t<ContextMessage\\n\\t\\t\\t\\t\\t\\t\\t\\tmessage={message.message}\\n\\t\\t\\t\\t\\t\\t\\t\\troom={message.room}\\n\\t\\t\\t\\t\\t\\t\\t\\tonRedirect={onRedirect}\\n\\t\\t\\t\\t\\t\\t\\t\\tonChange={handleChange}\\n\\t\\t\\t\\t\\t\\t\\t\\tdeleted={!report.user}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t</Fragment>\\n\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t{isSuccess && report.messages.length === 0 && <GenericNoResults title={t('No_message_reports')} icon='message' />}\\n\\t\\t\\t\\t{isError && (\\n\\t\\t\\t\\t\\t<Box display='flex' flexDirection='column' alignItems='center' pb={20} color='default'>\\n\\t\\t\\t\\t\\t\\t<StatesIcon name='warning' variation='danger' />\\n\\t\\t\\t\\t\\t\\t<StatesTitle>{t('Something_went_wrong')}</StatesTitle>\\n\\t\\t\\t\\t\\t\\t<StatesActions>\\n\\t\\t\\t\\t\\t\\t\\t<StatesAction onClick={handleChange}>{t('Reload_page')}</StatesAction>\\n\\t\\t\\t\\t\\t\\t</StatesActions>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</Box>\\n\\t\\t\\t{isSuccess && report.messages.length > 0 && (\\n\\t\\t\\t\\t<ContextualbarFooter>\\n\\t\\t\\t\\t\\t<MessageContextFooter userId={userId} deleted={!report.user} />\\n\\t\\t\\t\\t</ContextualbarFooter>\\n\\t\\t\\t)}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default UserMessages;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"Box\",\"Callout\",\"Message\",\"StatesAction\",\"StatesActions\",\"StatesIcon\",\"StatesTitle\",\"useMutableCallback\",\"useEndpoint\",\"useToastMessageDispatch\",\"useTranslation\",\"useQuery\",\"React\",\"Fragment\",\"ContextualbarFooter\",\"GenericNoResults\",\"MessageContextFooter\",\"ContextMessage\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"userId\",\"onRedirect\",\"t\",\"dispatchToastMessage\",\"getUserMessages\",\"_useQuery\",\"messages\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"sent\",\"abrupt\",\"stop\",\"Promise\",\"onError\",\"error\",\"type\",\"message\",\"report\",\"data\",\"reloadUserMessages\",\"refetch\",\"isLoading\",\"isSuccess\",\"isError\",\"handleChange\",\"createElement\",\"display\",\"flexDirection\",\"width\",\"height\",\"overflowY\",\"overflowX\",\"padding\",\"length\",\"title\",\"icon\",\"user\",\"mbs\",\"map\",\"key\",\"_id\",\"room\",\"onChange\",\"deleted\",\"alignItems\",\"pb\",\"color\",\"name\",\"variation\",\"onClick\"],\"mappings\":\"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\"}"}