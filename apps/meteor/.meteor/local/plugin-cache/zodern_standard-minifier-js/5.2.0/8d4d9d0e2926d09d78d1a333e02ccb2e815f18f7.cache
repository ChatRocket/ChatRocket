{"code":"function module(e,t,n){var a,i,o,l,r,u,c,f,s,h,d,m,y,b,k,x=[\"onChange\"];n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){a=e}},0),n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){i=e}},1),n.link(\"@rocket.chat/fuselage\",{Box:function(e){o=e},InputBox:function(e){l=e},Menu:function(e){r=e},Field:function(e){u=e},FieldLabel:function(e){c=e},FieldRow:function(e){f=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){s=e}},1),n.link(\"moment\",{default:function(e){h=e}},2),n.link(\"react\",{default:function(e){d=e},useState:function(e){m=e},useMemo:function(e){y=e},useEffect:function(e){b=e}},3),n.link(\"react-i18next\",{useTranslation:function(e){k=e}},4),h.locale(\"en\");var E=function(e){return e.format(\"YYYY-MM-DD\")},v=E(h()),g=function(e){return{start:E(h().subtract(e,\"month\").date(1)),end:E(0===e?h():h().subtract(e).date(0))}},p=function(e,t){return{start:E(h().subtract(e,\"day\")),end:E(h().subtract(t,\"day\"))}};n.exportDefault(function(e){var t=e.onChange,n=void 0===t?function(){}:t,h=i(e,x),E=k().t,w=m({start:\"\",end:\"\"}),M=a(w,2),T=M[0],C=M[1],Y=T.start,D=T.end,S=s(function(e){var t={start:e.currentTarget.value,end:T.end};C(t),n(t)}),_=s(function(e){var t={end:e.currentTarget.value,start:T.start};C(t),n(t)}),F=s(function(e){C(e),n(e)});b(function(){F({start:v,end:v})},[F]);var P=y(function(){return{today:{icon:\"history\",label:E(\"Today\"),action:function(){F(p(0,0))}},yesterday:{icon:\"history\",label:E(\"Yesterday\"),action:function(){F(p(1,1))}},thisWeek:{icon:\"history\",label:E(\"This_week\"),action:function(){F(p(7,0))}},previousWeek:{icon:\"history\",label:E(\"Previous_week\"),action:function(){F(p(14,7))}},thisMonth:{icon:\"history\",label:E(\"This_month\"),action:function(){F(g(0))}},lastMonth:{icon:\"history\",label:E(\"Previous_month\"),action:function(){F(g(1))}}}},[F,E]);return d.createElement(o,h,d.createElement(o,{mi:\"neg-x4\",height:\"full\",display:\"flex\",flexDirection:\"row\"},d.createElement(u,{mi:4,flexShrink:1,flexGrow:1},d.createElement(c,null,E(\"Start\")),d.createElement(f,null,d.createElement(o,{height:\"x40\",display:\"flex\",width:\"full\"},d.createElement(l,{type:\"date\",onChange:S,max:v,value:Y})))),d.createElement(u,{mi:4,flexShrink:1,flexGrow:1},d.createElement(c,null,E(\"End\")),d.createElement(f,null,d.createElement(o,{height:\"x40\",display:\"flex\",width:\"full\"},d.createElement(l,{type:\"date\",onChange:_,min:Y,max:v,value:D})),d.createElement(r,{mis:8,options:P})))))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/analytics/DateRangePicker.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, InputBox, Menu, Field, FieldLabel, FieldRow } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport type { Moment } from 'moment';\\nimport moment from 'moment';\\nimport type { ComponentProps } from 'react';\\nimport React, { useState, useMemo, useEffect } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nmoment.locale('en');\\n\\ntype DateRangePickerProps = Omit<ComponentProps<typeof Box>, 'onChange'> & {\\n\\tonChange(range: { start: string; end: string }): void;\\n};\\n\\nconst formatToDateInput = (date: Moment) => date.format('YYYY-MM-DD');\\n\\nconst todayDate = formatToDateInput(moment());\\n\\nconst getMonthRange = (monthsToSubtractFromToday: number) => ({\\n\\tstart: formatToDateInput(moment().subtract(monthsToSubtractFromToday, 'month').date(1)),\\n\\tend: formatToDateInput(monthsToSubtractFromToday === 0 ? moment() : moment().subtract(monthsToSubtractFromToday).date(0)),\\n});\\n\\nconst getWeekRange = (daysToSubtractFromStart: number, daysToSubtractFromEnd: number) => ({\\n\\tstart: formatToDateInput(moment().subtract(daysToSubtractFromStart, 'day')),\\n\\tend: formatToDateInput(moment().subtract(daysToSubtractFromEnd, 'day')),\\n});\\n\\nconst DateRangePicker = ({ onChange = () => undefined, ...props }: DateRangePickerProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst [range, setRange] = useState({ start: '', end: '' });\\n\\n\\tconst { start, end } = range;\\n\\n\\tconst handleStart = useMutableCallback(({ currentTarget }) => {\\n\\t\\tconst rangeObj = {\\n\\t\\t\\tstart: currentTarget.value,\\n\\t\\t\\tend: range.end,\\n\\t\\t};\\n\\t\\tsetRange(rangeObj);\\n\\t\\tonChange(rangeObj);\\n\\t});\\n\\n\\tconst handleEnd = useMutableCallback(({ currentTarget }) => {\\n\\t\\tconst rangeObj = {\\n\\t\\t\\tend: currentTarget.value,\\n\\t\\t\\tstart: range.start,\\n\\t\\t};\\n\\t\\tsetRange(rangeObj);\\n\\t\\tonChange(rangeObj);\\n\\t});\\n\\n\\tconst handleRange = useMutableCallback((range) => {\\n\\t\\tsetRange(range);\\n\\t\\tonChange(range);\\n\\t});\\n\\n\\tuseEffect(() => {\\n\\t\\thandleRange({\\n\\t\\t\\tstart: todayDate,\\n\\t\\t\\tend: todayDate,\\n\\t\\t});\\n\\t}, [handleRange]);\\n\\n\\tconst options = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\ttoday: {\\n\\t\\t\\t\\ticon: 'history',\\n\\t\\t\\t\\tlabel: t('Today'),\\n\\t\\t\\t\\taction: () => {\\n\\t\\t\\t\\t\\thandleRange(getWeekRange(0, 0));\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t\\tyesterday: {\\n\\t\\t\\t\\ticon: 'history',\\n\\t\\t\\t\\tlabel: t('Yesterday'),\\n\\t\\t\\t\\taction: () => {\\n\\t\\t\\t\\t\\thandleRange(getWeekRange(1, 1));\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t\\tthisWeek: {\\n\\t\\t\\t\\ticon: 'history',\\n\\t\\t\\t\\tlabel: t('This_week'),\\n\\t\\t\\t\\taction: () => {\\n\\t\\t\\t\\t\\thandleRange(getWeekRange(7, 0));\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t\\tpreviousWeek: {\\n\\t\\t\\t\\ticon: 'history',\\n\\t\\t\\t\\tlabel: t('Previous_week'),\\n\\t\\t\\t\\taction: () => {\\n\\t\\t\\t\\t\\thandleRange(getWeekRange(14, 7));\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t\\tthisMonth: {\\n\\t\\t\\t\\ticon: 'history',\\n\\t\\t\\t\\tlabel: t('This_month'),\\n\\t\\t\\t\\taction: () => {\\n\\t\\t\\t\\t\\thandleRange(getMonthRange(0));\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t\\tlastMonth: {\\n\\t\\t\\t\\ticon: 'history',\\n\\t\\t\\t\\tlabel: t('Previous_month'),\\n\\t\\t\\t\\taction: () => {\\n\\t\\t\\t\\t\\thandleRange(getMonthRange(1));\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t}),\\n\\t\\t[handleRange, t],\\n\\t);\\n\\n\\treturn (\\n\\t\\t<Box {...props}>\\n\\t\\t\\t<Box mi='neg-x4' height='full' display='flex' flexDirection='row'>\\n\\t\\t\\t\\t<Field mi={4} flexShrink={1} flexGrow={1}>\\n\\t\\t\\t\\t\\t<FieldLabel>{t('Start')}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<Box height='x40' display='flex' width='full'>\\n\\t\\t\\t\\t\\t\\t\\t<InputBox type='date' onChange={handleStart} max={todayDate} value={start} />\\n\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t<Field mi={4} flexShrink={1} flexGrow={1}>\\n\\t\\t\\t\\t\\t<FieldLabel>{t('End')}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<Box height='x40' display='flex' width='full'>\\n\\t\\t\\t\\t\\t\\t\\t<InputBox type='date' onChange={handleEnd} min={start} max={todayDate} value={end} />\\n\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t<Menu mis={8} options={options} />\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t</Box>\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default DateRangePicker;\\n\",null],\"names\":[\"_slicedToArray\",\"_objectWithoutProperties\",\"Box\",\"InputBox\",\"Menu\",\"Field\",\"FieldLabel\",\"FieldRow\",\"useMutableCallback\",\"moment\",\"React\",\"useState\",\"useMemo\",\"useEffect\",\"useTranslation\",\"module\",\"link\",\"default\",\"v\",\"locale\",\"formatToDateInput\",\"date\",\"format\",\"todayDate\",\"getMonthRange\",\"monthsToSubtractFromToday\",\"start\",\"subtract\",\"end\",\"getWeekRange\",\"daysToSubtractFromStart\",\"daysToSubtractFromEnd\",\"exportDefault\",\"_ref\",\"_ref$onChange\",\"onChange\",\"props\",\"_excluded\",\"t\",\"_useTranslation\",\"_useState\",\"_useState2\",\"range\",\"setRange\",\"handleStart\",\"_ref2\",\"rangeObj\",\"currentTarget\",\"value\",\"handleEnd\",\"_ref3\",\"handleRange\",\"options\",\"today\",\"icon\",\"label\",\"action\",\"yesterday\",\"thisWeek\",\"previousWeek\",\"thisMonth\",\"lastMonth\",\"createElement\",\"mi\",\"height\",\"display\",\"flexDirection\",\"flexShrink\",\"flexGrow\",\"width\",\"type\",\"max\",\"min\",\"mis\"],\"mappings\":\"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\"}"}