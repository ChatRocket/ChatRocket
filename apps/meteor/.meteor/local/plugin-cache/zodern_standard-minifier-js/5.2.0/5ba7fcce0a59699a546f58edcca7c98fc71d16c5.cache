{"code":"function module(e,t,i){let n,s,r,a,l,d,o,u,c,f,g,y;i.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),i.export({createDataAPI:()=>p}),i.link(\"@rocket.chat/random\",{Random(e){s=e}},0),i.link(\"moment\",{default(e){r=e}},1),i.link(\"../../../app/authorization/client\",{hasAtLeastOnePermission(e){a=e},hasPermission(e){l=e}},2),i.link(\"../../../app/models/client\",{Messages(e){d=e},ChatRoom(e){o=e},ChatSubscription(e){u=e}},3),i.link(\"../../../app/settings/client\",{settings(e){c=e}},4),i.link(\"../../../app/ui-utils/client\",{MessageTypes(e){f=e}},5),i.link(\"../../../app/utils/client/lib/SDKClient\",{sdk(e){g=e}},6),i.link(\"../utils/prependReplies\",{prependReplies(e){y=e}},7);let p=e=>{let{rid:t,tmid:i}=e,p=async(e,r)=>{var a,l;let{sendToChannel:d,quotedMessages:o,originalMessage:u}=r,c=await y(e,o),f=null!==(a=null==u?void 0:u.rid)&&void 0!==a?a:t,g=u?u.tmid:i;return n(n({_id:null!==(l=null==u?void 0:u._id)&&void 0!==l?l:s.id(),rid:f},g&&n({tmid:g},d&&{tshow:d})),{},{msg:c})},m=async e=>{var t;return null!==(t=d.findOne({_id:e,_hidden:{$ne:!0}},{reactive:!1}))&&void 0!==t?t:g.call(\"getSingleMessage\",e)},w=async e=>{let t=await m(e);if(!t)throw Error(\"Message not found\");return t},M=async()=>d.findOne({rid:t,tmid:null!=i?i:{$exists:!1},_hidden:{$ne:!0}},{sort:{ts:-1},reactive:!1}),v=async()=>{let e=await M();if(!e)throw Error(\"Message not found\");return e},_=async()=>{let e=Meteor.userId();if(e)return d.findOne({rid:t,tmid:null!=i?i:{$exists:!1},\"u._id\":e,_hidden:{$ne:!0}},{sort:{ts:-1},reactive:!1})},h=async()=>{let e=await _();if(!e)throw Error(\"Message not found\");return e},k=async e=>{var t;if(f.isSystemMessage(e))return!1;let i=a(\"edit-message\",e.rid),n=null!==(t=c.get(\"Message_AllowEditing\"))&&void 0!==t&&t,s=(null==e?void 0:e.u)&&e.u._id===Meteor.userId();if(!i&&(!n||!s))return!1;let d=c.get(\"Message_AllowEditing_BlockEditInMinutes\"),o=l(\"bypass-time-limit-edit-and-delete\",e.rid),u=r().diff(e.ts,\"minutes\");return!!o||!u||!d||!(u>d)},$=async e=>{let n=Meteor.userId();if(!n)return;let s=d.findOne({rid:t,tmid:null!=i?i:{$exists:!1},\"u._id\":n,_hidden:{$ne:!0},ts:{$lt:e.ts}},{sort:{ts:-1},reactive:!1});return s?await k(s)?s:$(s):void 0},E=async e=>{let t=await $(e);if(!t)throw Error(\"Message not found\");return t},O=async e=>{let n=Meteor.userId();if(!n)return;let s=d.findOne({rid:t,tmid:null!=i?i:{$exists:!1},\"u._id\":n,_hidden:{$ne:!0},ts:{$gt:e.ts}},{sort:{ts:1},reactive:!1});return s?await k(s)?s:O(s):void 0},b=async e=>{let t=await O(e);if(!t)throw Error(\"Message not found\");return t},I=async e=>{d.upsert({_id:e._id},{$set:n(n({},e),{},{rid:t},i&&{tmid:i})})},S=async(e,t)=>g.call(\"updateMessage\",e,t),x=async e=>{let i=Meteor.userId();if(!i||f.isSystemMessage(e))return!1;let n=l(\"force-delete-message\",e.rid);if(n)return!0;let s=c.get(\"Message_AllowDeleting\");if(!s)return!1;let a=l(\"delete-message\",t),d=l(\"delete-own-message\"),o=a||d&&(null==e?void 0:e.u)&&e.u._id===Meteor.userId();if(!o)return!1;let u=c.get(\"Message_AllowDeleting_BlockDeleteInMinutes\"),g=l(\"bypass-time-limit-edit-and-delete\",e.rid),y=r().diff(e.ts,\"minutes\");return o&&(g||!u||!y||y<=u)},A=async e=>{let t,i;if(\"string\"==typeof e){t=e;let n=await m(t);if(!n)throw Error(\"Message not found\");i=n.rid}else t=e._id,i=e.rid;await g.rest.post(\"/v1/chat.delete\",{msgId:t,roomId:i})},D=new Map,R=async e=>D.get(e),C=async e=>{D.delete(e)},P=async(e,t)=>{D.set(e,t)},j=async()=>o.findOne({_id:t},{reactive:!1}),B=async()=>{let e=await j();if(!e)throw Error(\"Room not found\");return e},z=async()=>!!u.findOne({rid:t},{reactive:!1}),K=async()=>{await g.call(\"joinRoom\",t)},L=async e=>o.findOne({_id:e,prid:{$exists:!0}},{reactive:!1}),T=async e=>{let t=await L(e);if(!t)throw Error(\"Discussion not found\");return t},q=(e,t)=>async function(){let i=await e(...arguments);if(!i)throw Error(t);return i},F=async()=>u.findOne({rid:t},{reactive:!1}),G=q(F,\"Subscription not found\"),H=async e=>u.findOne({rid:e.rid},{reactive:!1}),J=q(H,\"Subscription not found\");return{composeMessage:p,findMessageByID:m,getMessageByID:w,findLastMessage:M,getLastMessage:v,findLastOwnMessage:_,getLastOwnMessage:h,findPreviousOwnMessage:$,getPreviousOwnMessage:E,findNextOwnMessage:O,getNextOwnMessage:b,pushEphemeralMessage:I,canUpdateMessage:k,updateMessage:S,canDeleteMessage:x,deleteMessage:A,getDraft:R,saveDraft:P,discardDraft:C,findRoom:j,getRoom:B,isSubscribedToRoom:z,joinRoom:K,findDiscussionByID:L,getDiscussionByID:T,findSubscription:F,getSubscription:G,findSubscriptionFromMessage:H,getSubscriptionFromMessage:J}}}","map":"{\"version\":3,\"sources\":[\"client/lib/chats/data.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IEditedMessage, IMessage, IRoom, ISubscription } from '@rocket.chat/core-typings';\\nimport { Random } from '@rocket.chat/random';\\nimport moment from 'moment';\\n\\nimport { hasAtLeastOnePermission, hasPermission } from '../../../app/authorization/client';\\nimport { Messages, ChatRoom, ChatSubscription } from '../../../app/models/client';\\nimport { settings } from '../../../app/settings/client';\\nimport { MessageTypes } from '../../../app/ui-utils/client';\\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\\nimport { prependReplies } from '../utils/prependReplies';\\nimport type { DataAPI } from './ChatAPI';\\n\\nexport const createDataAPI = ({ rid, tmid }: { rid: IRoom['_id']; tmid: IMessage['_id'] | undefined }): DataAPI => {\\n\\tconst composeMessage = async (\\n\\t\\ttext: string,\\n\\t\\t{ sendToChannel, quotedMessages, originalMessage }: { sendToChannel?: boolean; quotedMessages: IMessage[]; originalMessage?: IMessage },\\n\\t): Promise<IMessage> => {\\n\\t\\tconst msg = await prependReplies(text, quotedMessages);\\n\\n\\t\\tconst effectiveRID = originalMessage?.rid ?? rid;\\n\\t\\tconst effectiveTMID = originalMessage ? originalMessage.tmid : tmid;\\n\\n\\t\\treturn {\\n\\t\\t\\t_id: originalMessage?._id ?? Random.id(),\\n\\t\\t\\trid: effectiveRID,\\n\\t\\t\\t...(effectiveTMID && {\\n\\t\\t\\t\\ttmid: effectiveTMID,\\n\\t\\t\\t\\t...(sendToChannel && { tshow: sendToChannel }),\\n\\t\\t\\t}),\\n\\t\\t\\tmsg,\\n\\t\\t} as IMessage;\\n\\t};\\n\\n\\tconst findMessageByID = async (mid: IMessage['_id']): Promise<IMessage | null> =>\\n\\t\\tMessages.findOne({ _id: mid, _hidden: { $ne: true } }, { reactive: false }) ?? sdk.call('getSingleMessage', mid);\\n\\n\\tconst getMessageByID = async (mid: IMessage['_id']): Promise<IMessage> => {\\n\\t\\tconst message = await findMessageByID(mid);\\n\\n\\t\\tif (!message) {\\n\\t\\t\\tthrow new Error('Message not found');\\n\\t\\t}\\n\\n\\t\\treturn message;\\n\\t};\\n\\n\\tconst findLastMessage = async (): Promise<IMessage | undefined> =>\\n\\t\\tMessages.findOne({ rid, tmid: tmid ?? { $exists: false }, _hidden: { $ne: true } }, { sort: { ts: -1 }, reactive: false });\\n\\n\\tconst getLastMessage = async (): Promise<IMessage> => {\\n\\t\\tconst message = await findLastMessage();\\n\\n\\t\\tif (!message) {\\n\\t\\t\\tthrow new Error('Message not found');\\n\\t\\t}\\n\\n\\t\\treturn message;\\n\\t};\\n\\n\\tconst findLastOwnMessage = async (): Promise<IMessage | undefined> => {\\n\\t\\tconst uid = Meteor.userId();\\n\\n\\t\\tif (!uid) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\treturn Messages.findOne(\\n\\t\\t\\t{ rid, 'tmid': tmid ?? { $exists: false }, 'u._id': uid, '_hidden': { $ne: true } },\\n\\t\\t\\t{ sort: { ts: -1 }, reactive: false },\\n\\t\\t);\\n\\t};\\n\\n\\tconst getLastOwnMessage = async (): Promise<IMessage> => {\\n\\t\\tconst message = await findLastOwnMessage();\\n\\n\\t\\tif (!message) {\\n\\t\\t\\tthrow new Error('Message not found');\\n\\t\\t}\\n\\n\\t\\treturn message;\\n\\t};\\n\\n\\tconst canUpdateMessage = async (message: IMessage): Promise<boolean> => {\\n\\t\\tif (MessageTypes.isSystemMessage(message)) {\\n\\t\\t\\treturn false;\\n\\t\\t}\\n\\n\\t\\tconst canEditMessage = hasAtLeastOnePermission('edit-message', message.rid);\\n\\t\\tconst editAllowed = (settings.get('Message_AllowEditing') as boolean | undefined) ?? false;\\n\\t\\tconst editOwn = message?.u && message.u._id === Meteor.userId();\\n\\n\\t\\tif (!canEditMessage && (!editAllowed || !editOwn)) {\\n\\t\\t\\treturn false;\\n\\t\\t}\\n\\n\\t\\tconst blockEditInMinutes = settings.get('Message_AllowEditing_BlockEditInMinutes') as number | undefined;\\n\\t\\tconst bypassBlockTimeLimit = hasPermission('bypass-time-limit-edit-and-delete', message.rid);\\n\\n\\t\\tconst elapsedMinutes = moment().diff(message.ts, 'minutes');\\n\\t\\tif (!bypassBlockTimeLimit && elapsedMinutes && blockEditInMinutes && elapsedMinutes > blockEditInMinutes) {\\n\\t\\t\\treturn false;\\n\\t\\t}\\n\\n\\t\\treturn true;\\n\\t};\\n\\n\\tconst findPreviousOwnMessage = async (message: IMessage): Promise<IMessage | undefined> => {\\n\\t\\tconst uid = Meteor.userId();\\n\\n\\t\\tif (!uid) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\tconst msg = Messages.findOne(\\n\\t\\t\\t{ rid, 'tmid': tmid ?? { $exists: false }, 'u._id': uid, '_hidden': { $ne: true }, 'ts': { $lt: message.ts } },\\n\\t\\t\\t{ sort: { ts: -1 }, reactive: false },\\n\\t\\t);\\n\\n\\t\\tif (!msg) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\tif (await canUpdateMessage(msg)) {\\n\\t\\t\\treturn msg;\\n\\t\\t}\\n\\n\\t\\treturn findPreviousOwnMessage(msg);\\n\\t};\\n\\n\\tconst getPreviousOwnMessage = async (message: IMessage): Promise<IMessage> => {\\n\\t\\tconst previousMessage = await findPreviousOwnMessage(message);\\n\\n\\t\\tif (!previousMessage) {\\n\\t\\t\\tthrow new Error('Message not found');\\n\\t\\t}\\n\\n\\t\\treturn previousMessage;\\n\\t};\\n\\n\\tconst findNextOwnMessage = async (message: IMessage): Promise<IMessage | undefined> => {\\n\\t\\tconst uid = Meteor.userId();\\n\\n\\t\\tif (!uid) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\tconst msg = Messages.findOne(\\n\\t\\t\\t{ rid, 'tmid': tmid ?? { $exists: false }, 'u._id': uid, '_hidden': { $ne: true }, 'ts': { $gt: message.ts } },\\n\\t\\t\\t{ sort: { ts: 1 }, reactive: false },\\n\\t\\t);\\n\\n\\t\\tif (!msg) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\tif (await canUpdateMessage(msg)) {\\n\\t\\t\\treturn msg;\\n\\t\\t}\\n\\n\\t\\treturn findNextOwnMessage(msg);\\n\\t};\\n\\n\\tconst getNextOwnMessage = async (message: IMessage): Promise<IMessage> => {\\n\\t\\tconst nextMessage = await findNextOwnMessage(message);\\n\\n\\t\\tif (!nextMessage) {\\n\\t\\t\\tthrow new Error('Message not found');\\n\\t\\t}\\n\\n\\t\\treturn nextMessage;\\n\\t};\\n\\n\\tconst pushEphemeralMessage = async (message: Omit<IMessage, 'rid' | 'tmid'>): Promise<void> => {\\n\\t\\tMessages.upsert({ _id: message._id }, { $set: { ...message, rid, ...(tmid && { tmid }) } });\\n\\t};\\n\\n\\tconst updateMessage = async (message: IEditedMessage, previewUrls?: string[]): Promise<void> =>\\n\\t\\tsdk.call('updateMessage', message, previewUrls);\\n\\n\\tconst canDeleteMessage = async (message: IMessage): Promise<boolean> => {\\n\\t\\tconst uid = Meteor.userId();\\n\\n\\t\\tif (!uid) {\\n\\t\\t\\treturn false;\\n\\t\\t}\\n\\n\\t\\tif (MessageTypes.isSystemMessage(message)) {\\n\\t\\t\\treturn false;\\n\\t\\t}\\n\\n\\t\\tconst forceDeleteAllowed = hasPermission('force-delete-message', message.rid);\\n\\t\\tif (forceDeleteAllowed) {\\n\\t\\t\\treturn true;\\n\\t\\t}\\n\\n\\t\\tconst deletionEnabled = settings.get('Message_AllowDeleting') as boolean | undefined;\\n\\t\\tif (!deletionEnabled) {\\n\\t\\t\\treturn false;\\n\\t\\t}\\n\\n\\t\\tconst deleteAnyAllowed = hasPermission('delete-message', rid);\\n\\t\\tconst deleteOwnAllowed = hasPermission('delete-own-message');\\n\\t\\tconst deleteAllowed = deleteAnyAllowed || (deleteOwnAllowed && message?.u && message.u._id === Meteor.userId());\\n\\n\\t\\tif (!deleteAllowed) {\\n\\t\\t\\treturn false;\\n\\t\\t}\\n\\n\\t\\tconst blockDeleteInMinutes = settings.get('Message_AllowDeleting_BlockDeleteInMinutes') as number | undefined;\\n\\t\\tconst bypassBlockTimeLimit = hasPermission('bypass-time-limit-edit-and-delete', message.rid);\\n\\t\\tconst elapsedMinutes = moment().diff(message.ts, 'minutes');\\n\\t\\tconst onTimeForDelete = bypassBlockTimeLimit || !blockDeleteInMinutes || !elapsedMinutes || elapsedMinutes <= blockDeleteInMinutes;\\n\\n\\t\\treturn deleteAllowed && onTimeForDelete;\\n\\t};\\n\\n\\tconst deleteMessage = async (msgIdOrMsg: IMessage | IMessage['_id']): Promise<void> => {\\n\\t\\tlet msgId: string;\\n\\t\\tlet roomId: string;\\n\\t\\tif (typeof msgIdOrMsg === 'string') {\\n\\t\\t\\tmsgId = msgIdOrMsg;\\n\\t\\t\\tconst msg = await findMessageByID(msgId);\\n\\t\\t\\tif (!msg) {\\n\\t\\t\\t\\tthrow new Error('Message not found');\\n\\t\\t\\t}\\n\\t\\t\\troomId = msg.rid;\\n\\t\\t} else {\\n\\t\\t\\tmsgId = msgIdOrMsg._id;\\n\\t\\t\\troomId = msgIdOrMsg.rid;\\n\\t\\t}\\n\\n\\t\\tawait sdk.rest.post('/v1/chat.delete', { msgId, roomId });\\n\\t};\\n\\n\\tconst drafts = new Map<IMessage['_id'] | undefined, string>();\\n\\n\\tconst getDraft = async (mid: IMessage['_id'] | undefined): Promise<string | undefined> => drafts.get(mid);\\n\\n\\tconst discardDraft = async (mid: IMessage['_id'] | undefined): Promise<void> => {\\n\\t\\tdrafts.delete(mid);\\n\\t};\\n\\n\\tconst saveDraft = async (mid: IMessage['_id'] | undefined, draft: string): Promise<void> => {\\n\\t\\tdrafts.set(mid, draft);\\n\\t};\\n\\n\\tconst findRoom = async (): Promise<IRoom | undefined> => ChatRoom.findOne({ _id: rid }, { reactive: false });\\n\\n\\tconst getRoom = async (): Promise<IRoom> => {\\n\\t\\tconst room = await findRoom();\\n\\n\\t\\tif (!room) {\\n\\t\\t\\tthrow new Error('Room not found');\\n\\t\\t}\\n\\n\\t\\treturn room;\\n\\t};\\n\\n\\tconst isSubscribedToRoom = async (): Promise<boolean> => !!ChatSubscription.findOne({ rid }, { reactive: false });\\n\\n\\tconst joinRoom = async (): Promise<void> => {\\n\\t\\tawait sdk.call('joinRoom', rid);\\n\\t};\\n\\n\\tconst findDiscussionByID = async (drid: IRoom['_id']): Promise<IRoom | undefined> =>\\n\\t\\tChatRoom.findOne({ _id: drid, prid: { $exists: true } }, { reactive: false });\\n\\n\\tconst getDiscussionByID = async (drid: IRoom['_id']): Promise<IRoom> => {\\n\\t\\tconst discussion = await findDiscussionByID(drid);\\n\\n\\t\\tif (!discussion) {\\n\\t\\t\\tthrow new Error('Discussion not found');\\n\\t\\t}\\n\\n\\t\\treturn discussion;\\n\\t};\\n\\n\\tconst createStrictGetter = <TFind extends (...args: any[]) => Promise<any>>(\\n\\t\\tfind: TFind,\\n\\t\\terrorMessage: string,\\n\\t): ((...args: Parameters<TFind>) => Promise<Exclude<Awaited<ReturnType<TFind>>, undefined>>) => {\\n\\t\\treturn async (...args) => {\\n\\t\\t\\tconst result = await find(...args);\\n\\n\\t\\t\\tif (!result) {\\n\\t\\t\\t\\tthrow new Error(errorMessage);\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn result;\\n\\t\\t};\\n\\t};\\n\\n\\tconst findSubscription = async (): Promise<ISubscription | undefined> => {\\n\\t\\treturn ChatSubscription.findOne({ rid }, { reactive: false });\\n\\t};\\n\\n\\tconst getSubscription = createStrictGetter(findSubscription, 'Subscription not found');\\n\\n\\tconst findSubscriptionFromMessage = async (message: IMessage): Promise<ISubscription | undefined> => {\\n\\t\\treturn ChatSubscription.findOne({ rid: message.rid }, { reactive: false });\\n\\t};\\n\\n\\tconst getSubscriptionFromMessage = createStrictGetter(findSubscriptionFromMessage, 'Subscription not found');\\n\\n\\treturn {\\n\\t\\tcomposeMessage,\\n\\t\\tfindMessageByID,\\n\\t\\tgetMessageByID,\\n\\t\\tfindLastMessage,\\n\\t\\tgetLastMessage,\\n\\t\\tfindLastOwnMessage,\\n\\t\\tgetLastOwnMessage,\\n\\t\\tfindPreviousOwnMessage,\\n\\t\\tgetPreviousOwnMessage,\\n\\t\\tfindNextOwnMessage,\\n\\t\\tgetNextOwnMessage,\\n\\t\\tpushEphemeralMessage,\\n\\t\\tcanUpdateMessage,\\n\\t\\tupdateMessage,\\n\\t\\tcanDeleteMessage,\\n\\t\\tdeleteMessage,\\n\\t\\tgetDraft,\\n\\t\\tsaveDraft,\\n\\t\\tdiscardDraft,\\n\\t\\tfindRoom,\\n\\t\\tgetRoom,\\n\\t\\tisSubscribedToRoom,\\n\\t\\tjoinRoom,\\n\\t\\tfindDiscussionByID,\\n\\t\\tgetDiscussionByID,\\n\\t\\tfindSubscription,\\n\\t\\tgetSubscription,\\n\\t\\tfindSubscriptionFromMessage,\\n\\t\\tgetSubscriptionFromMessage,\\n\\t};\\n};\\n\",null],\"names\":[\"_objectSpread\",\"Random\",\"moment\",\"hasAtLeastOnePermission\",\"hasPermission\",\"Messages\",\"ChatRoom\",\"ChatSubscription\",\"settings\",\"MessageTypes\",\"sdk\",\"prependReplies\",\"module\",\"link\",\"default\",\"v\",\"export\",\"createDataAPI\",\"_ref\",\"rid\",\"tmid\",\"composeMessage\",\"text\",\"_ref2\",\"_originalMessage$rid\",\"_originalMessage$_id\",\"sendToChannel\",\"quotedMessages\",\"originalMessage\",\"msg\",\"effectiveRID\",\"effectiveTMID\",\"_id\",\"id\",\"tshow\",\"findMessageByID\",\"mid\",\"_Messages$findOne\",\"findOne\",\"_hidden\",\"$ne\",\"reactive\",\"call\",\"getMessageByID\",\"message\",\"Error\",\"findLastMessage\",\"$exists\",\"sort\",\"ts\",\"getLastMessage\",\"findLastOwnMessage\",\"uid\",\"Meteor\",\"userId\",\"getLastOwnMessage\",\"canUpdateMessage\",\"_settings$get\",\"isSystemMessage\",\"canEditMessage\",\"editAllowed\",\"get\",\"editOwn\",\"u\",\"blockEditInMinutes\",\"bypassBlockTimeLimit\",\"elapsedMinutes\",\"diff\",\"findPreviousOwnMessage\",\"$lt\",\"getPreviousOwnMessage\",\"previousMessage\",\"findNextOwnMessage\",\"$gt\",\"getNextOwnMessage\",\"nextMessage\",\"pushEphemeralMessage\",\"upsert\",\"$set\",\"updateMessage\",\"previewUrls\",\"canDeleteMessage\",\"forceDeleteAllowed\",\"deletionEnabled\",\"deleteAnyAllowed\",\"deleteOwnAllowed\",\"deleteAllowed\",\"blockDeleteInMinutes\",\"deleteMessage\",\"msgIdOrMsg\",\"msgId\",\"roomId\",\"rest\",\"post\",\"drafts\",\"Map\",\"getDraft\",\"discardDraft\",\"delete\",\"saveDraft\",\"draft\",\"set\",\"findRoom\",\"getRoom\",\"room\",\"isSubscribedToRoom\",\"joinRoom\",\"findDiscussionByID\",\"drid\",\"prid\",\"getDiscussionByID\",\"discussion\",\"createStrictGetter\",\"find\",\"errorMessage\",\"result\",\"arguments\",\"findSubscription\",\"getSubscription\",\"findSubscriptionFromMessage\",\"getSubscriptionFromMessage\"],\"mappings\":\"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\"}"}