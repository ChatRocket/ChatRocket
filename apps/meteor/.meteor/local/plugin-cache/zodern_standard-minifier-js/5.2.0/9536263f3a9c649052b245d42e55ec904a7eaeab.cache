{"code":"function module(t,n,e){e.link(\"@babel/runtime/regenerator\",{default:function(t){a=t}},0),e.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(t){i=t}},1),e.link(\"@babel/runtime/helpers/createForOfIteratorHelperLoose\",{default:function(t){r=t}},2),e.export({AutoTranslate:function(){return b},createAutoTranslateMessageStreamHandler:function(){return k}}),e.link(\"@rocket.chat/core-typings\",{isTranslatedMessageAttachment:function(t){s=t}},0),e.link(\"mem\",{default:function(t){o=t}},1),e.link(\"meteor/meteor\",{Meteor:function(t){u=t}},2),e.link(\"meteor/tracker\",{Tracker:function(t){l=t}},3),e.link(\"../../../../client/views/room/MessageList/lib/autoTranslate\",{hasTranslationLanguageInAttachments:function(t){c=t},hasTranslationLanguageInMessage:function(t){d=t}},4),e.link(\"../../../authorization/client\",{hasPermission:function(t){g=t}},5),e.link(\"../../../models/client\",{Subscriptions:function(t){f=t},Messages:function(t){p=t}},6),e.link(\"../../../settings/client\",{settings:function(t){h=t}},7),e.link(\"../../../utils/client/lib/SDKClient\",{sdk:function(t){m=t}},8);var a,i,r,s,o,u,l,c,d,g,f,p,h,m,v=\"en\",T=\"\";u.startup(function(){l.autorun(function(){var t=u.user();t&&(v=t.language||\"en\",T=t.username||\"\")})});var b={initialized:!1,providersMetadata:{},messageIdsToWait:{},supportedLanguages:[],findSubscriptionByRid:o(function(t){return f.findOne({rid:t})}),getLanguage:function(t){t&&(i=this.findSubscriptionByRid(t));var n,e,a,i,r=(null===(n=i)||void 0===n?void 0:n.autoTranslateLanguage)||v||(null===(e=(a=window).defaultUserLanguage)||void 0===e?void 0:e.call(a));return -1===r.indexOf(\"-\")||(this.supportedLanguages||[]).some(function(t){return t.language===r})?r:r.slice(0,2)},translateAttachments:function(t,n,e){if(!s(t))return t;for(var a,i=r(t);!(a=i()).done;){var o=a.value;o.author_name!==T&&(o.text&&o.translations&&o.translations[n]&&(o.translations.original=o.text,e?o.text=o.translations.original:o.text=o.translations[n]),o.description&&o.translations&&o.translations[n]&&(o.translations.original=o.description,e?o.description=o.translations.original:o.description=o.translations[n]),o.attachments&&o.attachments.length>0&&(o.attachments=this.translateAttachments(o.attachments,n)))}return t},init:function(){var t=this;this.initialized||(l.autorun(function(n){var e,r,s;return a.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(e=u.userId(),!(!h.get(\"AutoTranslate_Enabled\")||!e||!g(\"auto-translate\"))){o.next=3;break}return o.abrupt(\"return\");case 3:return n.stop(),o.prev=4,o.next=7,a.awrap(Promise.all([m.call(\"autoTranslate.getProviderUiMetadata\"),m.call(\"autoTranslate.getSupportedLanguages\",\"en\")]));case 7:r=o.sent,s=i(r,2),t.providersMetadata=s[0],t.supportedLanguages=s[1],o.next=16;break;case 13:o.prev=13,o.t0=o.catch(4),console.error(o.t0.message);case 16:case\"end\":return o.stop()}},null,null,[[4,13]],Promise)}),f.find().observeChanges({changed:function(n,e){(e.hasOwnProperty(\"autoTranslate\")||e.hasOwnProperty(\"autoTranslateLanguage\"))&&o.clear(t.findSubscriptionByRid)}}),this.initialized=!0)}},k=function(){return b.init(),function(t){if(t.u&&t.u._id!==u.userId()){var n=b.findSubscriptionByRid(t.rid),e=b.getLanguage(t.rid);!n||!0!==n.autoTranslate||!t.msg||t.translations&&(d(t,e)||c(t.attachments,e))?void 0!==b.messageIdsToWait[t._id]&&n&&!0!==n.autoTranslate?(p.update({_id:t._id},{$set:{autoTranslateShowInverse:!0},$unset:{autoTranslateFetching:!0}}),delete b.messageIdsToWait[t._id]):!0===t.autoTranslateFetching&&p.update({_id:t._id},{$unset:{autoTranslateFetching:!0}}):p.update({_id:t._id},{$set:{autoTranslateFetching:!0}})}}}}","map":"{\"version\":3,\"sources\":[\"app/autotranslate/client/lib/autotranslate.ts\",\"<anon>\"],\"sourcesContent\":[\"import type {\\n\\tIRoom,\\n\\tISubscription,\\n\\tISupportedLanguage,\\n\\tITranslatedMessage,\\n\\tIUser,\\n\\tMessageAttachmentDefault,\\n} from '@rocket.chat/core-typings';\\nimport { isTranslatedMessageAttachment } from '@rocket.chat/core-typings';\\nimport mem from 'mem';\\nimport { Meteor } from 'meteor/meteor';\\nimport { Tracker } from 'meteor/tracker';\\n\\nimport {\\n\\thasTranslationLanguageInAttachments,\\n\\thasTranslationLanguageInMessage,\\n} from '../../../../client/views/room/MessageList/lib/autoTranslate';\\nimport { hasPermission } from '../../../authorization/client';\\nimport { Subscriptions, Messages } from '../../../models/client';\\nimport { settings } from '../../../settings/client';\\nimport { sdk } from '../../../utils/client/lib/SDKClient';\\n\\nlet userLanguage = 'en';\\nlet username = '';\\n\\nMeteor.startup(() => {\\n\\tTracker.autorun(() => {\\n\\t\\tconst user: Pick<IUser, 'language' | 'username'> | null = Meteor.user();\\n\\t\\tif (!user) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tuserLanguage = user.language || 'en';\\n\\t\\tusername = user.username || '';\\n\\t});\\n});\\n\\nexport const AutoTranslate = {\\n\\tinitialized: false,\\n\\tprovidersMetadata: {} as { [providerNamer: string]: { name: string; displayName: string } },\\n\\tmessageIdsToWait: {} as { [messageId: string]: string },\\n\\tsupportedLanguages: [] as ISupportedLanguage[] | undefined,\\n\\n\\tfindSubscriptionByRid: mem((rid) => Subscriptions.findOne({ rid })),\\n\\n\\tgetLanguage(rid: IRoom['_id']): string {\\n\\t\\tlet subscription: ISubscription | undefined;\\n\\t\\tif (rid) {\\n\\t\\t\\tsubscription = this.findSubscriptionByRid(rid);\\n\\t\\t}\\n\\t\\tconst language = (subscription?.autoTranslateLanguage || userLanguage || window.defaultUserLanguage?.()) as string;\\n\\t\\tif (language.indexOf('-') !== -1) {\\n\\t\\t\\tif (!(this.supportedLanguages || []).some((supportedLanguage) => supportedLanguage.language === language)) {\\n\\t\\t\\t\\treturn language.slice(0, 2);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\treturn language;\\n\\t},\\n\\n\\ttranslateAttachments(\\n\\t\\tattachments: MessageAttachmentDefault[],\\n\\t\\tlanguage: string,\\n\\t\\tautoTranslateShowInverse: boolean,\\n\\t): MessageAttachmentDefault[] {\\n\\t\\tif (!isTranslatedMessageAttachment(attachments)) {\\n\\t\\t\\treturn attachments;\\n\\t\\t}\\n\\t\\tfor (const attachment of attachments) {\\n\\t\\t\\tif (attachment.author_name !== username) {\\n\\t\\t\\t\\tif (attachment.text && attachment.translations && attachment.translations[language]) {\\n\\t\\t\\t\\t\\tattachment.translations.original = attachment.text;\\n\\n\\t\\t\\t\\t\\tif (autoTranslateShowInverse) {\\n\\t\\t\\t\\t\\t\\tattachment.text = attachment.translations.original;\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tattachment.text = attachment.translations[language];\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (attachment.description && attachment.translations && attachment.translations[language]) {\\n\\t\\t\\t\\t\\tattachment.translations.original = attachment.description;\\n\\n\\t\\t\\t\\t\\tif (autoTranslateShowInverse) {\\n\\t\\t\\t\\t\\t\\tattachment.description = attachment.translations.original;\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tattachment.description = attachment.translations[language];\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t// @ts-expect-error - not sure what to do with this\\n\\t\\t\\t\\tif (attachment.attachments && attachment.attachments.length > 0) {\\n\\t\\t\\t\\t\\t// @ts-expect-error - not sure what to do with this\\n\\t\\t\\t\\t\\tattachment.attachments = this.translateAttachments(attachment.attachments, language);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\treturn attachments;\\n\\t},\\n\\n\\tinit(): void {\\n\\t\\tif (this.initialized) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tTracker.autorun(async (c) => {\\n\\t\\t\\tconst uid = Meteor.userId();\\n\\t\\t\\tif (!settings.get('AutoTranslate_Enabled') || !uid || !hasPermission('auto-translate')) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tc.stop();\\n\\n\\t\\t\\ttry {\\n\\t\\t\\t\\t[this.providersMetadata, this.supportedLanguages] = await Promise.all([\\n\\t\\t\\t\\t\\tsdk.call('autoTranslate.getProviderUiMetadata'),\\n\\t\\t\\t\\t\\tsdk.call('autoTranslate.getSupportedLanguages', 'en'),\\n\\t\\t\\t\\t]);\\n\\t\\t\\t} catch (e: unknown) {\\n\\t\\t\\t\\t// Avoid unwanted error message on UI when autotranslate is disabled while fetching data\\n\\t\\t\\t\\tconsole.error((e as Error).message);\\n\\t\\t\\t}\\n\\t\\t});\\n\\n\\t\\tSubscriptions.find().observeChanges({\\n\\t\\t\\tchanged: (_id: string, fields: ISubscription) => {\\n\\t\\t\\t\\tif (fields.hasOwnProperty('autoTranslate') || fields.hasOwnProperty('autoTranslateLanguage')) {\\n\\t\\t\\t\\t\\tmem.clear(this.findSubscriptionByRid);\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t});\\n\\n\\t\\tthis.initialized = true;\\n\\t},\\n};\\n\\nexport const createAutoTranslateMessageStreamHandler = (): ((message: ITranslatedMessage) => void) => {\\n\\tAutoTranslate.init();\\n\\n\\treturn (message: ITranslatedMessage): void => {\\n\\t\\tif (message.u && message.u._id !== Meteor.userId()) {\\n\\t\\t\\tconst subscription = AutoTranslate.findSubscriptionByRid(message.rid);\\n\\t\\t\\tconst language = AutoTranslate.getLanguage(message.rid);\\n\\t\\t\\tif (\\n\\t\\t\\t\\tsubscription &&\\n\\t\\t\\t\\tsubscription.autoTranslate === true &&\\n\\t\\t\\t\\tmessage.msg &&\\n\\t\\t\\t\\t(!message.translations ||\\n\\t\\t\\t\\t\\t(!hasTranslationLanguageInMessage(message, language) && !hasTranslationLanguageInAttachments(message.attachments, language)))\\n\\t\\t\\t) {\\n\\t\\t\\t\\t// || (message.attachments && !_.find(message.attachments, attachment => { return attachment.translations && attachment.translations[language]; }))\\n\\t\\t\\t\\tMessages.update({ _id: message._id }, { $set: { autoTranslateFetching: true } });\\n\\t\\t\\t} else if (AutoTranslate.messageIdsToWait[message._id] !== undefined && subscription && subscription.autoTranslate !== true) {\\n\\t\\t\\t\\tMessages.update({ _id: message._id }, { $set: { autoTranslateShowInverse: true }, $unset: { autoTranslateFetching: true } });\\n\\t\\t\\t\\tdelete AutoTranslate.messageIdsToWait[message._id];\\n\\t\\t\\t} else if (message.autoTranslateFetching === true) {\\n\\t\\t\\t\\tMessages.update({ _id: message._id }, { $unset: { autoTranslateFetching: true } });\\n\\t\\t\\t}\\n\\t\\t}\\n\\t};\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_slicedToArray\",\"_createForOfIteratorHelperLoose\",\"export\",\"AutoTranslate\",\"createAutoTranslateMessageStreamHandler\",\"isTranslatedMessageAttachment\",\"mem\",\"Meteor\",\"Tracker\",\"hasTranslationLanguageInAttachments\",\"hasTranslationLanguageInMessage\",\"hasPermission\",\"Subscriptions\",\"Messages\",\"settings\",\"sdk\",\"userLanguage\",\"username\",\"startup\",\"autorun\",\"user\",\"language\",\"initialized\",\"providersMetadata\",\"messageIdsToWait\",\"supportedLanguages\",\"findSubscriptionByRid\",\"rid\",\"findOne\",\"getLanguage\",\"subscription\",\"_subscription\",\"_window$defaultUserLa\",\"_window\",\"autoTranslateLanguage\",\"window\",\"defaultUserLanguage\",\"call\",\"indexOf\",\"some\",\"supportedLanguage\",\"slice\",\"translateAttachments\",\"attachments\",\"autoTranslateShowInverse\",\"_step\",\"_iterator\",\"done\",\"attachment\",\"value\",\"author_name\",\"text\",\"translations\",\"original\",\"description\",\"length\",\"init\",\"_this\",\"c\",\"uid\",\"_await$Promise$all\",\"_await$Promise$all2\",\"async\",\"_context\",\"prev\",\"next\",\"userId\",\"get\",\"abrupt\",\"stop\",\"awrap\",\"Promise\",\"all\",\"sent\",\"t0\",\"console\",\"error\",\"message\",\"find\",\"observeChanges\",\"changed\",\"_id\",\"fields\",\"hasOwnProperty\",\"clear\",\"u\",\"autoTranslate\",\"msg\",\"undefined\",\"update\",\"$set\",\"$unset\",\"autoTranslateFetching\"],\"mappings\":\"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\"}"}