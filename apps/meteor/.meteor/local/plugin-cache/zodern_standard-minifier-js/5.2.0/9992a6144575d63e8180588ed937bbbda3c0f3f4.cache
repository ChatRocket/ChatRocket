{"code":"function module(n,e,i){i.export({usePermissionsAndRoles:function(){return a}}),i.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(n){t=n}},0),i.link(\"@rocket.chat/string-helpers\",{escapeRegExp:function(n){o=n}},1),i.link(\"react\",{useCallback:function(n){s=n}},2),i.link(\"../../../../../app/authorization/lib\",{CONSTANTS:function(n){u=n}},3),i.link(\"../../../../../app/models/client\",{ChatPermissions:function(n){l=n},Roles:function(n){r=n}},4),i.link(\"../../../../hooks/useReactiveValue\",{useReactiveValue:function(n){c=n}},5);var t,o,s,u,l,r,c,a=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"permissions\",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,f=s(function(){var i=RegExp(o(e),\"i\");return{level:\"permissions\"===n?{$ne:u.SETTINGS_LEVEL}:u.SETTINGS_LEVEL,_id:i}},[n,e]),d=s(function(){return l.find(f(),{sort:{_id:1},skip:a,limit:i})},[i,a,f]),h=s(function(){return l.find(f()).count()},[f]),k=c(d),p=c(h),v=t(function(){return r.find().fetch()}),g=c(v);return{permissions:k.fetch(),total:p,roleList:g,reload:v}}}","map":"{\"version\":3,\"sources\":[\"client/views/admin/permissions/hooks/usePermissionsAndRoles.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRole, IPermission } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\\nimport type { Mongo } from 'meteor/mongo';\\nimport { useCallback } from 'react';\\n\\nimport { CONSTANTS } from '../../../../../app/authorization/lib';\\nimport { ChatPermissions, Roles } from '../../../../../app/models/client';\\nimport { useReactiveValue } from '../../../../hooks/useReactiveValue';\\n\\nexport const usePermissionsAndRoles = (\\n\\ttype = 'permissions',\\n\\tfilter = '',\\n\\tlimit = 25,\\n\\tskip = 0,\\n): { permissions: IPermission[]; total: number; roleList: IRole[]; reload: () => void } => {\\n\\tconst getFilter = useCallback((): Mongo.Selector<IPermission> => {\\n\\t\\tconst filterRegExp = new RegExp(escapeRegExp(filter), 'i');\\n\\n\\t\\treturn {\\n\\t\\t\\tlevel: type === 'permissions' ? { $ne: CONSTANTS.SETTINGS_LEVEL } : CONSTANTS.SETTINGS_LEVEL,\\n\\t\\t\\t_id: filterRegExp,\\n\\t\\t};\\n\\t}, [type, filter]);\\n\\n\\tconst getPermissions = useCallback(\\n\\t\\t() =>\\n\\t\\t\\tChatPermissions.find(getFilter(), {\\n\\t\\t\\t\\tsort: {\\n\\t\\t\\t\\t\\t_id: 1,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tskip,\\n\\t\\t\\t\\tlimit,\\n\\t\\t\\t}),\\n\\t\\t[limit, skip, getFilter],\\n\\t);\\n\\tconst getTotalPermissions = useCallback(() => ChatPermissions.find(getFilter()).count(), [getFilter]);\\n\\n\\tconst permissions = useReactiveValue(getPermissions);\\n\\tconst permissionsTotal = useReactiveValue(getTotalPermissions);\\n\\tconst getRoles = useMutableCallback(() => Roles.find().fetch());\\n\\tconst roles = useReactiveValue(getRoles);\\n\\n\\treturn { permissions: permissions.fetch(), total: permissionsTotal, roleList: roles, reload: getRoles };\\n};\\n\",null],\"names\":[\"module\",\"export\",\"usePermissionsAndRoles\",\"link\",\"useMutableCallback\",\"v\",\"escapeRegExp\",\"useCallback\",\"CONSTANTS\",\"ChatPermissions\",\"Roles\",\"useReactiveValue\",\"type\",\"arguments\",\"length\",\"undefined\",\"filter\",\"limit\",\"skip\",\"getFilter\",\"filterRegExp\",\"RegExp\",\"level\",\"$ne\",\"SETTINGS_LEVEL\",\"_id\",\"getPermissions\",\"find\",\"sort\",\"getTotalPermissions\",\"count\",\"permissions\",\"permissionsTotal\",\"getRoles\",\"fetch\",\"roles\",\"total\",\"roleList\",\"reload\"],\"mappings\":\"uBACAA,EAAOC,MAAE,CAAA,CAAAC,uBAA0B,WAAA,OAAAA,CAA8B,CAAA,GAAAF,EAAAG,IAAA,CAAA,8BAAA,CAAAC,mBAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,8BAAA,CAAAG,aAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,QAAA,CAAAI,YAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,uCAAA,CAAAK,UAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,mCAAA,CAAAM,gBAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,EAAAK,MAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,qCAAA,CAAAQ,iBAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAS1D,IAT0DD,EAAAE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EASpDT,EAAyB,WAKoD,IAJzFU,EAAIC,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,cACPG,EAAMH,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,GACTI,EAAKJ,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,GACRK,EAAIL,UAAAC,MAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,CAAAA,SAAA,CAAA,EAAA,CAAG,EAEDM,EAAYZ,EAAY,WAC7B,IAAMa,EAAe,AAAIC,OAAOf,EAAaU,GAAS,KAEtD,MAAO,CACNM,MAAOV,AAAS,gBAATA,EAAyB,CAAEW,IAAKf,EAAUgB,cAAAA,AAAc,EAAKhB,EAAUgB,cAAc,CAC5FC,IAAKL,EAEP,EAAG,CAACR,EAAMI,EAAO,EAEXU,EAAiBnB,EACtB,WAAA,OACCE,EAAgBkB,IAAI,CAACR,IAAa,CACjCS,KAAM,CACLH,IAAK,GAENP,KAAAA,EACAD,MAAAA,GACC,EACH,CAACA,EAAOC,EAAMC,EAAU,EAEnBU,EAAsBtB,EAAY,WAAA,OAAME,EAAgBkB,IAAI,CAACR,KAAaW,KAAK,EAAE,EAAE,CAACX,EAAU,EAE9FY,EAAcpB,EAAiBe,GAC/BM,EAAmBrB,EAAiBkB,GACpCI,EAAW7B,EAAmB,WAAA,OAAMM,EAAMiB,IAAI,GAAGO,KAAK,EAAE,GACxDC,EAAQxB,EAAiBsB,GAE/B,MAAO,CAAEF,YAAaA,EAAYG,KAAK,GAAIE,MAAOJ,EAAkBK,SAAUF,EAAOG,OAAQL,CAAQ,CACtG\"}"}