{"code":"function module(e,n,t){var r,a,c,i,l,o,u,s,f,m,d,h,p,P,v,E,g,k,T;t.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),t.link(\"@rocket.chat/fuselage\",{ButtonGroup:function(e){a=e},Button:function(e){c=e},Box:function(e){i=e},Accordion:function(e){l=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){o=e},useTranslation:function(e){u=e},useEndpoint:function(e){s=e},useUserPreference:function(e){f=e},useSetting:function(e){m=e}},1),t.link(\"react\",{default:function(e){d=e}},2),t.link(\"react-hook-form\",{useForm:function(e){h=e},FormProvider:function(e){p=e}},3),t.link(\"../../../components/Page\",{Page:function(e){P=e},PageHeader:function(e){v=e},PageScrollableContentWithShadow:function(e){E=e},PageFooter:function(e){g=e}},4),t.link(\"./PreferencesConversationTranscript\",{default:function(e){k=e}},5),t.link(\"./PreferencesGeneral\",{PreferencesGeneral:function(e){T=e}},6),t.exportDefault(function(){var e,n,t,C=u(),S=o(),x=m(\"Livechat_transcript_send_always\"),b=null!==(e=f(\"omnichannelTranscriptPDF\"))&&void 0!==e&&e,y=null!==(n=f(\"omnichannelTranscriptEmail\"))&&void 0!==n&&n,D=null===(t=f(\"omnichannelHideConversationAfterClosing\"))||void 0===t||t,F=h({defaultValues:{omnichannelTranscriptPDF:b,omnichannelTranscriptEmail:x||y,omnichannelHideConversationAfterClosing:D}}),w=F.handleSubmit,_=F.formState.isDirty,A=F.reset,B=s(\"POST\",\"/v1/users.setPreferences\"),G=function(e){return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.awrap(B({data:e}));case 3:A(e),S({type:\"success\",message:C(\"Preferences_saved\")}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),S({type:\"error\",message:n.t0});case 10:case\"end\":return n.stop()}},null,null,[[0,7]],Promise)};return d.createElement(P,null,d.createElement(v,{title:C(\"Omnichannel\")}),d.createElement(E,{is:\"form\",onSubmit:w(G)},d.createElement(i,{maxWidth:\"x600\",w:\"full\",alignSelf:\"center\"},d.createElement(l,null,d.createElement(p,F,d.createElement(T,null),d.createElement(k,null))))),d.createElement(g,{isDirty:_},d.createElement(a,null,d.createElement(c,{onClick:function(){return A({omnichannelTranscriptPDF:b,omnichannelTranscriptEmail:y})}},C(\"Cancel\")),d.createElement(c,{primary:!0,disabled:!_,onClick:w(G)},C(\"Save_changes\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/account/omnichannel/OmnichannelPreferencesPage.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { ButtonGroup, Button, Box, Accordion } from '@rocket.chat/fuselage';\\nimport { useToastMessageDispatch, useTranslation, useEndpoint, useUserPreference, useSetting } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React from 'react';\\nimport { useForm, FormProvider } from 'react-hook-form';\\n\\nimport { Page, PageHeader, PageScrollableContentWithShadow, PageFooter } from '../../../components/Page';\\nimport PreferencesConversationTranscript from './PreferencesConversationTranscript';\\nimport { PreferencesGeneral } from './PreferencesGeneral';\\n\\ntype FormData = {\\n\\tomnichannelTranscriptPDF: boolean;\\n\\tomnichannelTranscriptEmail: boolean;\\n};\\n\\nconst OmnichannelPreferencesPage = (): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst alwaysSendEmailTranscript = useSetting<boolean>('Livechat_transcript_send_always');\\n\\tconst omnichannelTranscriptPDF = useUserPreference<boolean>('omnichannelTranscriptPDF') ?? false;\\n\\tconst omnichannelTranscriptEmail = useUserPreference<boolean>('omnichannelTranscriptEmail') ?? false;\\n\\tconst omnichannelHideConversationAfterClosing = useUserPreference<boolean>('omnichannelHideConversationAfterClosing') ?? true;\\n\\n\\tconst methods = useForm({\\n\\t\\tdefaultValues: {\\n\\t\\t\\tomnichannelTranscriptPDF,\\n\\t\\t\\tomnichannelTranscriptEmail: alwaysSendEmailTranscript || omnichannelTranscriptEmail,\\n\\t\\t\\tomnichannelHideConversationAfterClosing,\\n\\t\\t},\\n\\t});\\n\\n\\tconst {\\n\\t\\thandleSubmit,\\n\\t\\tformState: { isDirty },\\n\\t\\treset,\\n\\t} = methods;\\n\\n\\tconst saveFn = useEndpoint('POST', '/v1/users.setPreferences');\\n\\n\\tconst handleSave = async (data: FormData) => {\\n\\t\\ttry {\\n\\t\\t\\tawait saveFn({ data });\\n\\t\\t\\treset(data);\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Preferences_saved') });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t};\\n\\n\\treturn (\\n\\t\\t<Page>\\n\\t\\t\\t<PageHeader title={t('Omnichannel')} />\\n\\t\\t\\t<PageScrollableContentWithShadow is='form' onSubmit={handleSubmit(handleSave)}>\\n\\t\\t\\t\\t<Box maxWidth='x600' w='full' alignSelf='center'>\\n\\t\\t\\t\\t\\t<Accordion>\\n\\t\\t\\t\\t\\t\\t<FormProvider {...methods}>\\n\\t\\t\\t\\t\\t\\t\\t<PreferencesGeneral />\\n\\t\\t\\t\\t\\t\\t\\t<PreferencesConversationTranscript />\\n\\t\\t\\t\\t\\t\\t</FormProvider>\\n\\t\\t\\t\\t\\t</Accordion>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</PageScrollableContentWithShadow>\\n\\t\\t\\t<PageFooter isDirty={isDirty}>\\n\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t<Button onClick={() => reset({ omnichannelTranscriptPDF, omnichannelTranscriptEmail })}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button primary disabled={!isDirty} onClick={handleSubmit(handleSave)}>\\n\\t\\t\\t\\t\\t\\t{t('Save_changes')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</PageFooter>\\n\\t\\t</Page>\\n\\t);\\n};\\n\\nexport default OmnichannelPreferencesPage;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"ButtonGroup\",\"Button\",\"Box\",\"Accordion\",\"useToastMessageDispatch\",\"useTranslation\",\"useEndpoint\",\"useUserPreference\",\"useSetting\",\"React\",\"useForm\",\"FormProvider\",\"Page\",\"PageHeader\",\"PageScrollableContentWithShadow\",\"PageFooter\",\"PreferencesConversationTranscript\",\"PreferencesGeneral\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_useUserPreference\",\"_useUserPreference2\",\"_useUserPreference3\",\"t\",\"dispatchToastMessage\",\"alwaysSendEmailTranscript\",\"omnichannelTranscriptPDF\",\"omnichannelTranscriptEmail\",\"omnichannelHideConversationAfterClosing\",\"methods\",\"defaultValues\",\"handleSubmit\",\"isDirty\",\"formState\",\"reset\",\"saveFn\",\"handleSave\",\"data\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"type\",\"message\",\"t0\",\"stop\",\"Promise\",\"createElement\",\"title\",\"is\",\"onSubmit\",\"maxWidth\",\"w\",\"alignSelf\",\"onClick\",\"primary\",\"disabled\"],\"mappings\":\"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\"}"}