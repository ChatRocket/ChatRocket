{"code":"function module(e,o,t){let n,l,i,r,d,a,u,c;t.export({useThreadRoomAction:()=>v}),t.link(\"@rocket.chat/ui-contexts\",{useSetting(e){n=e}},0),t.link(\"react\",{default(e){l=e},lazy(e){i=e},useMemo(e){r=e}},1),t.link(\"react-i18next\",{useTranslation(e){d=e}},2),t.link(\"../../components/Header\",{HeaderToolbarAction(e){a=e},HeaderToolbarActionBadge(e){u=e}},3),t.link(\"../../views/room/contexts/RoomContext\",{useRoomSubscription(e){c=e}},4);let s=(e,o)=>e>0?\"danger\":o>0?\"warning\":\"primary\",m=i(()=>t.dynamicImport(\"../../views/room/contextualBar/Threads\")),v=()=>{var e,o,t,i,v,p;let h=n(\"Threads_enabled\",!1),g=c(),x=null!==(e=null==g?void 0:null===(o=g.tunread)||void 0===o?void 0:o.length)&&void 0!==e?e:0,b=null!==(t=null==g?void 0:null===(i=g.tunreadUser)||void 0===i?void 0:i.length)&&void 0!==t?t:0,T=null!==(v=null==g?void 0:null===(p=g.tunreadGroup)||void 0===p?void 0:p.length)&&void 0!==v?v:0,k=x>99?\"99+\":x,f=s(b,T),{t:y}=d();return r(()=>{if(h)return{id:\"thread\",groups:[\"channel\",\"group\",\"direct\",\"direct_multiple\",\"team\"],full:!0,title:\"Threads\",icon:\"thread\",tabComponent:m,order:2,renderToolboxItem:e=>{let{id:o,className:t,index:n,icon:i,title:r,toolbox:{tab:d},action:c,disabled:s,tooltip:m}=e;return l.createElement(a,{key:o,className:t,index:n,id:o,icon:i,title:y(r),pressed:o===(null==d?void 0:d.id),action:c,disabled:s,tooltip:m},!!k&&l.createElement(u,{variant:f},k))}}},[h,y,k,f])}}","map":"{\"version\":3,\"sources\":[\"client/hooks/roomActions/useThreadRoomAction.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { BadgeProps } from '@rocket.chat/fuselage';\\nimport { useSetting } from '@rocket.chat/ui-contexts';\\nimport React, { lazy, useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { HeaderToolbarAction, HeaderToolbarActionBadge } from '../../components/Header';\\nimport { useRoomSubscription } from '../../views/room/contexts/RoomContext';\\nimport type { RoomToolboxActionConfig } from '../../views/room/contexts/RoomToolboxContext';\\n\\nconst getVariant = (tunreadUser: number, tunreadGroup: number): BadgeProps['variant'] => {\\n\\tif (tunreadUser > 0) {\\n\\t\\treturn 'danger';\\n\\t}\\n\\n\\tif (tunreadGroup > 0) {\\n\\t\\treturn 'warning';\\n\\t}\\n\\n\\treturn 'primary';\\n};\\n\\nconst Threads = lazy(() => import('../../views/room/contextualBar/Threads'));\\n\\nexport const useThreadRoomAction = () => {\\n\\tconst enabled = useSetting('Threads_enabled', false);\\n\\tconst subscription = useRoomSubscription();\\n\\n\\tconst tunread = subscription?.tunread?.length ?? 0;\\n\\tconst tunreadUser = subscription?.tunreadUser?.length ?? 0;\\n\\tconst tunreadGroup = subscription?.tunreadGroup?.length ?? 0;\\n\\tconst unread = tunread > 99 ? '99+' : tunread;\\n\\tconst variant = getVariant(tunreadUser, tunreadGroup);\\n\\tconst { t } = useTranslation();\\n\\n\\treturn useMemo((): RoomToolboxActionConfig | undefined => {\\n\\t\\tif (!enabled) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\treturn {\\n\\t\\t\\tid: 'thread',\\n\\t\\t\\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\\n\\t\\t\\tfull: true,\\n\\t\\t\\ttitle: 'Threads',\\n\\t\\t\\ticon: 'thread',\\n\\t\\t\\ttabComponent: Threads,\\n\\t\\t\\torder: 2,\\n\\t\\t\\trenderToolboxItem: ({ id, className, index, icon, title, toolbox: { tab }, action, disabled, tooltip }) => (\\n\\t\\t\\t\\t<HeaderToolbarAction\\n\\t\\t\\t\\t\\tkey={id}\\n\\t\\t\\t\\t\\tclassName={className}\\n\\t\\t\\t\\t\\tindex={index}\\n\\t\\t\\t\\t\\tid={id}\\n\\t\\t\\t\\t\\ticon={icon}\\n\\t\\t\\t\\t\\ttitle={t(title)}\\n\\t\\t\\t\\t\\tpressed={id === tab?.id}\\n\\t\\t\\t\\t\\taction={action}\\n\\t\\t\\t\\t\\tdisabled={disabled}\\n\\t\\t\\t\\t\\ttooltip={tooltip}\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t{!!unread && <HeaderToolbarActionBadge variant={variant}>{unread}</HeaderToolbarActionBadge>}\\n\\t\\t\\t\\t</HeaderToolbarAction>\\n\\t\\t\\t),\\n\\t\\t};\\n\\t}, [enabled, t, unread, variant]);\\n};\\n\",null],\"names\":[\"useSetting\",\"React\",\"lazy\",\"useMemo\",\"useTranslation\",\"HeaderToolbarAction\",\"HeaderToolbarActionBadge\",\"useRoomSubscription\",\"module\",\"export\",\"useThreadRoomAction\",\"link\",\"v\",\"default\",\"getVariant\",\"tunreadUser\",\"tunreadGroup\",\"Threads\",\"dynamicImport\",\"_subscription$tunread\",\"_subscription$tunread2\",\"_subscription$tunread3\",\"_subscription$tunread4\",\"_subscription$tunread5\",\"_subscription$tunread6\",\"enabled\",\"subscription\",\"tunread\",\"length\",\"unread\",\"variant\",\"t\",\"id\",\"groups\",\"full\",\"title\",\"icon\",\"tabComponent\",\"order\",\"renderToolboxItem\",\"_ref\",\"className\",\"index\",\"toolbox\",\"tab\",\"action\",\"disabled\",\"tooltip\",\"createElement\",\"key\",\"pressed\"],\"mappings\":\"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\"}"}