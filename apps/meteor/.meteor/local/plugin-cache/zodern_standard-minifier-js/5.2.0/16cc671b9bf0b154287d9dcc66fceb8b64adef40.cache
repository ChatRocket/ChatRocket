{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){a=e}},1),t.export({legacyJumpToMessage:function(){return l}}),t.link(\"@rocket.chat/core-typings\",{isThreadMessage:function(e){o=e}},0),t.link(\"../../../app/models/client\",{ChatRoom:function(e){i=e}},1),t.link(\"../../../app/ui-utils/client\",{RoomHistoryManager:function(e){u=e}},2),t.link(\"../../providers/RouterProvider\",{router:function(e){c=e}},3),t.link(\"../RoomManager\",{RoomManager:function(e){s=e}},4),t.link(\"./goToRoomById\",{goToRoomById:function(e){d=e}},5);var r,a,o,i,u,c,s,d,l=function(e){var n,t,l,m,g;return r.async(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(o(e)||e.tcount)){f.next=6;break}if(m=(l=c.getRouteParameters()).tab,g=l.context,!(\"thread\"===m&&(g===e.tmid||g===e._id))){f.next=4;break}return f.abrupt(\"return\");case 4:return c.navigate({name:c.getRouteName(),params:{tab:\"thread\",context:e.tmid||e._id,rid:e.rid,name:null!==(n=null===(t=i.findOne({_id:e.rid}))||void 0===t?void 0:t.name)&&void 0!==n?n:\"\"},search:a(a({},c.getSearchParameters()),{},{msg:e._id})},{replace:!1}),f.abrupt(\"return\");case 6:if(s.opened!==e.rid){f.next=9;break}return u.getSurroundingMessages(e),f.abrupt(\"return\");case 9:return f.next=11,r.awrap(d(e.rid));case 11:setTimeout(function(){u.getSurroundingMessages(e)},400);case 12:case\"end\":return f.stop()}},null,null,null,Promise)}}","map":"{\"version\":3,\"sources\":[\"client/lib/utils/legacyJumpToMessage.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { isThreadMessage } from '@rocket.chat/core-typings';\\n\\nimport { ChatRoom } from '../../../app/models/client';\\nimport { RoomHistoryManager } from '../../../app/ui-utils/client';\\nimport { router } from '../../providers/RouterProvider';\\nimport { RoomManager } from '../RoomManager';\\nimport { goToRoomById } from './goToRoomById';\\n\\n/** @deprecated */\\nexport const legacyJumpToMessage = async (message: IMessage) => {\\n\\tif (isThreadMessage(message) || message.tcount) {\\n\\t\\tconst { tab, context } = router.getRouteParameters();\\n\\n\\t\\tif (tab === 'thread' && (context === message.tmid || context === message._id)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\trouter.navigate(\\n\\t\\t\\t{\\n\\t\\t\\t\\tname: router.getRouteName()!,\\n\\t\\t\\t\\tparams: {\\n\\t\\t\\t\\t\\ttab: 'thread',\\n\\t\\t\\t\\t\\tcontext: message.tmid || message._id,\\n\\t\\t\\t\\t\\trid: message.rid,\\n\\t\\t\\t\\t\\tname: ChatRoom.findOne({ _id: message.rid })?.name ?? '',\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tsearch: {\\n\\t\\t\\t\\t\\t...router.getSearchParameters(),\\n\\t\\t\\t\\t\\tmsg: message._id,\\n\\t\\t\\t\\t},\\n\\t\\t\\t},\\n\\t\\t\\t{ replace: false },\\n\\t\\t);\\n\\t\\treturn;\\n\\t}\\n\\n\\tif (RoomManager.opened === message.rid) {\\n\\t\\tRoomHistoryManager.getSurroundingMessages(message);\\n\\t\\treturn;\\n\\t}\\n\\n\\tawait goToRoomById(message.rid);\\n\\n\\tsetTimeout(() => {\\n\\t\\tRoomHistoryManager.getSurroundingMessages(message);\\n\\t}, 400);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_objectSpread\",\"export\",\"legacyJumpToMessage\",\"isThreadMessage\",\"ChatRoom\",\"RoomHistoryManager\",\"router\",\"RoomManager\",\"goToRoomById\",\"message\",\"_ChatRoom$findOne$nam\",\"_ChatRoom$findOne\",\"_router$getRouteParam\",\"tab\",\"context\",\"async\",\"_context\",\"prev\",\"next\",\"tcount\",\"getRouteParameters\",\"tmid\",\"_id\",\"abrupt\",\"navigate\",\"name\",\"getRouteName\",\"params\",\"rid\",\"findOne\",\"search\",\"getSearchParameters\",\"msg\",\"replace\",\"opened\",\"getSurroundingMessages\",\"awrap\",\"setTimeout\",\"stop\",\"Promise\"],\"mappings\":\"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\"}"}