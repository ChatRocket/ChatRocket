{"code":"function module(n,e,o){var i,t,u,a,c,r,s,m;function f(n,e){var o=t(),f=r(),l=a(),d=u(\"notify-user\"),v=c(),h=m().navigateHome;s(function(){if(e)return d(e+\"/subscriptions-changed\",function(e,t){if(\"removed\"===e&&t.rid===n._id){if(f.invalidateQueries([\"rooms\",n._id]),i({t:n.t})){h();return}l({type:\"info\",message:v(\"You_have_been_removed_from__roomName_\",{roomName:(null==n?void 0:n.fname)||(null==n?void 0:n.name)||\"\"})}),o.navigate(\"/home\")}})},[e,o,d,n._id,n.t,null==n?void 0:n.fname,null==n?void 0:n.name,v,l,f,h])}o.export({useGoToHomeOnRemoved:function(){return f}}),o.link(\"@rocket.chat/core-typings\",{isOmnichannelRoom:function(n){i=n}},0),o.link(\"@rocket.chat/ui-contexts\",{useRouter:function(n){t=n},useStream:function(n){u=n},useToastMessageDispatch:function(n){a=n},useTranslation:function(n){c=n}},1),o.link(\"@tanstack/react-query\",{useQueryClient:function(n){r=n}},2),o.link(\"react\",{useEffect:function(n){s=n}},3),o.link(\"../../../../hooks/omnichannel/useOmnichannelCloseRoute\",{useOmnichannelCloseRoute:function(n){m=n}},4)}","map":"{\"version\":3,\"sources\":[\"client/views/room/body/hooks/useGoToHomeOnRemoved.ts\",\"<anon>\"],\"sourcesContent\":[\"import { isOmnichannelRoom, type IRoom } from '@rocket.chat/core-typings';\\nimport { useRouter, useStream, useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\\nimport { useQueryClient } from '@tanstack/react-query';\\nimport { useEffect } from 'react';\\n\\nimport { useOmnichannelCloseRoute } from '../../../../hooks/omnichannel/useOmnichannelCloseRoute';\\n\\nexport function useGoToHomeOnRemoved(room: IRoom, userId?: string): void {\\n\\tconst router = useRouter();\\n\\tconst queryClient = useQueryClient();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst subscribeToNotifyUser = useStream('notify-user');\\n\\tconst t = useTranslation();\\n\\tconst { navigateHome } = useOmnichannelCloseRoute();\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!userId) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\treturn subscribeToNotifyUser(`${userId}/subscriptions-changed`, (event, subscription) => {\\n\\t\\t\\tif (event === 'removed' && subscription.rid === room._id) {\\n\\t\\t\\t\\tqueryClient.invalidateQueries(['rooms', room._id]);\\n\\n\\t\\t\\t\\tif (isOmnichannelRoom({ t: room.t })) {\\n\\t\\t\\t\\t\\tnavigateHome();\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\ttype: 'info',\\n\\t\\t\\t\\t\\tmessage: t('You_have_been_removed_from__roomName_', {\\n\\t\\t\\t\\t\\t\\troomName: room?.fname || room?.name || '',\\n\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\trouter.navigate('/home');\\n\\t\\t\\t}\\n\\t\\t});\\n\\t}, [\\n\\t\\tuserId,\\n\\t\\trouter,\\n\\t\\tsubscribeToNotifyUser,\\n\\t\\troom._id,\\n\\t\\troom.t,\\n\\t\\troom?.fname,\\n\\t\\troom?.name,\\n\\t\\tt,\\n\\t\\tdispatchToastMessage,\\n\\t\\tqueryClient,\\n\\t\\tnavigateHome,\\n\\t]);\\n}\\n\",null],\"names\":[\"isOmnichannelRoom\",\"useRouter\",\"useStream\",\"useToastMessageDispatch\",\"useTranslation\",\"useQueryClient\",\"useEffect\",\"useOmnichannelCloseRoute\",\"useGoToHomeOnRemoved\",\"room\",\"userId\",\"router\",\"queryClient\",\"dispatchToastMessage\",\"subscribeToNotifyUser\",\"t\",\"navigateHome\",\"_useOmnichannelCloseR\",\"event\",\"subscription\",\"rid\",\"_id\",\"invalidateQueries\",\"type\",\"message\",\"roomName\",\"fname\",\"name\",\"navigate\",\"module\",\"export\",\"link\",\"v\"],\"mappings\":\"2BAA0EA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAOpE,SAAUC,EAAqBC,CAAW,CAAEC,CAAe,EAChE,IAAMC,EAASV,IACTW,EAAcP,IACdQ,EAAuBV,IACvBW,EAAwBZ,EAAU,eAClCa,EAAIX,IACFY,EAAYC,AAAKV,IAAjBS,YAAY,CAEpBV,EAAU,WACT,GAAKI,EAIL,OAAOI,EAAyBJ,EAAM,yBAA0B,SAACQ,CAAK,CAAEC,CAAY,EACnF,GAAID,AAAU,YAAVA,GAAuBC,EAAaC,GAAG,GAAKX,EAAKY,GAAG,CAAE,CAGzD,GAFAT,EAAYU,iBAAiB,CAAC,CAAC,QAASb,EAAKY,GAAG,CAAC,EAE7CrB,EAAkB,CAAEe,EAAGN,EAAKM,CAAAA,AAAC,GAAK,CACrCC,IACA,MACD,CAEAH,EAAqB,CACpBU,KAAM,OACNC,QAAST,EAAE,wCAAyC,CACnDU,SAAU,AAAAhB,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMiB,KAAK,AAALA,GAASjB,CAAAA,MAAAA,EAAI,KAAA,EAAJA,EAAMkB,IAAI,AAAJA,GAAQ,OAIzChB,EAAOiB,QAAQ,CAAC,QACjB,CACD,EACD,EAAG,CACFlB,EACAC,EACAG,EACAL,EAAKY,GAAG,CACRZ,EAAKM,CAAC,CACNN,MAAAA,EAAI,KAAA,EAAJA,EAAMiB,KAAK,CACXjB,MAAAA,EAAI,KAAA,EAAJA,EAAMkB,IAAI,CACVZ,EACAF,EACAD,EACAI,EACA,CACF,CApDAa,EAAOC,MAAE,CAAA,CAAAtB,qBAAqC,WAAA,OAAAA,CAA4B,CAAA,GAAAqB,EAAAE,IAAA,CAAA,4BAAA,CAAA/B,kBAAA,SAAAgC,CAAA,EAAAhC,EAAAgC,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,2BAAA,CAAA9B,UAAA,SAAA+B,CAAA,EAAA/B,EAAA+B,CAAA,EAAA9B,UAAA,SAAA8B,CAAA,EAAA9B,EAAA8B,CAAA,EAAA7B,wBAAA,SAAA6B,CAAA,EAAA7B,EAAA6B,CAAA,EAAA5B,eAAA,SAAA4B,CAAA,EAAA5B,EAAA4B,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,wBAAA,CAAA1B,eAAA,SAAA2B,CAAA,EAAA3B,EAAA2B,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,QAAA,CAAAzB,UAAA,SAAA0B,CAAA,EAAA1B,EAAA0B,CAAA,CAAA,EAAA,GAAAH,EAAAE,IAAA,CAAA,yDAAA,CAAAxB,yBAAA,SAAAyB,CAAA,EAAAzB,EAAAyB,CAAA,CAAA,EAAA\"}"}