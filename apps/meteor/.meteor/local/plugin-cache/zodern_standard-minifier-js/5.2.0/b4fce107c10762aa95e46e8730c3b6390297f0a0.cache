{"code":"function module(e,n,t){var l,a,r,u,c,i,o,s,f,d,m,E,k,g,p,b,h,y,T,G,D;t.link(\"@babel/runtime/regenerator\",{default:function(e){l=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){a=e}},1),t.link(\"@rocket.chat/fuselage\",{Field:function(e){r=e},FieldLabel:function(e){u=e},FieldRow:function(e){c=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useTranslation:function(e){i=e},useMethod:function(e){o=e},useToastMessageDispatch:function(e){s=e}},1),t.link(\"@tanstack/react-query\",{useQuery:function(e){f=e}},2),t.link(\"react\",{default:function(e){d=e},useState:function(e){m=e}},3),t.link(\"../../../components/GenericNoResults\",{default:function(e){E=e}},4),t.link(\"../../../components/GenericTable\",{GenericTable:function(e){k=e},GenericTableHeaderCell:function(e){g=e},GenericTableBody:function(e){p=e},GenericTableLoadingRow:function(e){b=e},GenericTableHeader:function(e){h=e}},5),t.link(\"../utils/dateRange\",{createEndOfToday:function(e){y=e},createStartOfToday:function(e){T=e}},6),t.link(\"./AuditLogEntry\",{default:function(e){G=e}},7),t.link(\"./forms/DateRangePicker\",{default:function(e){D=e}},8),t.exportDefault(function(){var e=i(),n=m(function(){return{start:T(),end:y()}}),t=a(n,2),w=t[0],v=t[1],F=s(),R=o(\"auditGetAuditions\"),x=f([\"audits\",w],function(){var e,n;return l.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=w.start,n=w.end,t.abrupt(\"return\",R({startDate:null!=e?e:new Date(0),endDate:null!=n?n:new Date}));case 2:case\"end\":return t.stop()}},null,null,null,Promise)},{onError:function(e){F({type:\"error\",message:e})}}),L=x.data,S=x.isLoading,A=x.isSuccess,_=d.createElement(d.Fragment,null,d.createElement(g,null,e(\"User\")),d.createElement(g,null,e(\"Looked_for\")),d.createElement(g,null,e(\"When\")),d.createElement(g,{width:80},e(\"Results\")),d.createElement(g,null,e(\"Filters_applied\")));return d.createElement(d.Fragment,null,d.createElement(r,{alignSelf:\"stretch\"},d.createElement(u,null,e(\"Date\")),d.createElement(c,null,d.createElement(D,{display:\"flex\",flexGrow:1,value:w,onChange:v}))),S&&d.createElement(k,null,d.createElement(h,null,_),d.createElement(p,null,d.createElement(b,{cols:4}))),A&&0===L.length&&d.createElement(E,null),A&&L.length>0&&d.createElement(k,null,d.createElement(h,null,_),d.createElement(p,null,L.map(function(e){return d.createElement(G,{key:e._id,value:e})}))))})}","map":"{\"version\":3,\"sources\":[\"client/views/audit/components/AuditLogTable.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Field, FieldLabel, FieldRow } from '@rocket.chat/fuselage';\\nimport { useTranslation, useMethod, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React, { useState } from 'react';\\n\\nimport GenericNoResults from '../../../components/GenericNoResults';\\nimport {\\n\\tGenericTable,\\n\\tGenericTableHeaderCell,\\n\\tGenericTableBody,\\n\\tGenericTableLoadingRow,\\n\\tGenericTableHeader,\\n} from '../../../components/GenericTable';\\nimport { createEndOfToday, createStartOfToday } from '../utils/dateRange';\\nimport type { DateRange } from '../utils/dateRange';\\nimport AuditLogEntry from './AuditLogEntry';\\nimport DateRangePicker from './forms/DateRangePicker';\\n\\nconst AuditLogTable = (): ReactElement => {\\n\\tconst t = useTranslation();\\n\\n\\tconst [dateRange, setDateRange] = useState<DateRange>(() => ({\\n\\t\\tstart: createStartOfToday(),\\n\\t\\tend: createEndOfToday(),\\n\\t}));\\n\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst getAudits = useMethod('auditGetAuditions');\\n\\n\\tconst { data, isLoading, isSuccess } = useQuery(\\n\\t\\t['audits', dateRange],\\n\\t\\tasync () => {\\n\\t\\t\\tconst { start, end } = dateRange;\\n\\t\\t\\treturn getAudits({ startDate: start ?? new Date(0), endDate: end ?? new Date() });\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tonError: (error) => {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n\\n\\tconst headers = (\\n\\t\\t<>\\n\\t\\t\\t<GenericTableHeaderCell>{t('User')}</GenericTableHeaderCell>\\n\\t\\t\\t<GenericTableHeaderCell>{t('Looked_for')}</GenericTableHeaderCell>\\n\\t\\t\\t<GenericTableHeaderCell>{t('When')}</GenericTableHeaderCell>\\n\\t\\t\\t<GenericTableHeaderCell width={80}>{t('Results')}</GenericTableHeaderCell>\\n\\t\\t\\t<GenericTableHeaderCell>{t('Filters_applied')}</GenericTableHeaderCell>\\n\\t\\t</>\\n\\t);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<Field alignSelf='stretch'>\\n\\t\\t\\t\\t<FieldLabel>{t('Date')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<DateRangePicker display='flex' flexGrow={1} value={dateRange} onChange={setDateRange} />\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t</Field>\\n\\t\\t\\t{isLoading && (\\n\\t\\t\\t\\t<GenericTable>\\n\\t\\t\\t\\t\\t<GenericTableHeader>{headers}</GenericTableHeader>\\n\\t\\t\\t\\t\\t<GenericTableBody>\\n\\t\\t\\t\\t\\t\\t<GenericTableLoadingRow cols={4} />\\n\\t\\t\\t\\t\\t</GenericTableBody>\\n\\t\\t\\t\\t</GenericTable>\\n\\t\\t\\t)}\\n\\t\\t\\t{isSuccess && data.length === 0 && <GenericNoResults />}\\n\\t\\t\\t{isSuccess && data.length > 0 && (\\n\\t\\t\\t\\t<GenericTable>\\n\\t\\t\\t\\t\\t<GenericTableHeader>{headers}</GenericTableHeader>\\n\\t\\t\\t\\t\\t<GenericTableBody>\\n\\t\\t\\t\\t\\t\\t{data.map((auditLog) => (\\n\\t\\t\\t\\t\\t\\t\\t<AuditLogEntry key={auditLog._id} value={auditLog} />\\n\\t\\t\\t\\t\\t\\t))}\\n\\t\\t\\t\\t\\t</GenericTableBody>\\n\\t\\t\\t\\t</GenericTable>\\n\\t\\t\\t)}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default AuditLogTable;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_slicedToArray\",\"Field\",\"FieldLabel\",\"FieldRow\",\"useTranslation\",\"useMethod\",\"useToastMessageDispatch\",\"useQuery\",\"React\",\"useState\",\"GenericNoResults\",\"GenericTable\",\"GenericTableHeaderCell\",\"GenericTableBody\",\"GenericTableLoadingRow\",\"GenericTableHeader\",\"createEndOfToday\",\"createStartOfToday\",\"AuditLogEntry\",\"DateRangePicker\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"t\",\"_useState\",\"start\",\"end\",\"_useState2\",\"dateRange\",\"setDateRange\",\"dispatchToastMessage\",\"getAudits\",\"_useQuery\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"startDate\",\"Date\",\"endDate\",\"stop\",\"Promise\",\"onError\",\"error\",\"type\",\"message\",\"data\",\"isLoading\",\"isSuccess\",\"headers\",\"createElement\",\"Fragment\",\"width\",\"alignSelf\",\"display\",\"flexGrow\",\"value\",\"onChange\",\"cols\",\"length\",\"map\",\"auditLog\",\"key\",\"_id\"],\"mappings\":\"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\"}"}