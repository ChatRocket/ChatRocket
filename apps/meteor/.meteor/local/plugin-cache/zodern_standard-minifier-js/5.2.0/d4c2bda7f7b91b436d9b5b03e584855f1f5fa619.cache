{"code":"function module(e,t,a){let l,n,i,r,o,c,s,u,d,m,g,p,h,f,E,v,k,_;a.link(\"@rocket.chat/fuselage\",{Accordion(e){l=e},Box(e){n=e},Button(e){i=e},ButtonGroup(e){r=e}},0),a.link(\"@rocket.chat/fuselage-hooks\",{useEffectEvent(e){o=e}},1),a.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){c=e},useSettingsDispatch(e){s=e},useSettings(e){u=e},useTranslation(e){d=e}},2),a.link(\"react\",{default(e){m=e},useMemo(e){g=e},memo(e){p=e}},3),a.link(\"../../../../components/Page\",{Page(e){h=e},PageHeader(e){f=e},PageScrollableContentWithShadow(e){E=e},PageFooter(e){v=e}},4),a.link(\"../../EditableSettingsContext\",{useEditableSettingsDispatch(e){k=e},useEditableSettings(e){_=e}},5),a.exportDefault(p(e=>{let{children:t,headerButtons:a,onClickBack:p,_id:S,i18nLabel:y,i18nDescription:D,tabs:b,isCustom:x=!1}=e,B=d(),C=s(),P=c(),w=_(g(()=>({group:S,changed:!0}),[S])),M=u(g(()=>({_id:w.map(e=>{let{_id:t}=e;return t})}),[w])),N=e=>\"color\"===e.type,T=o(async()=>{let e=w.map(e=>N(e)?{_id:e._id,value:e.value,editor:e.editor}:{_id:e._id,value:e.value});if(0!==e.length)try{await C(e),P({type:\"success\",message:B(\"Settings_updated\")})}catch(e){P({type:\"error\",message:e})}}),W=k(),A=o(()=>{let e=w.map(e=>{let{_id:t}=e;return M.find(e=>e._id===t)}).map(e=>e?N(e)?{_id:e._id,value:e.value,editor:e.editor,changed:!1}:{_id:e._id,value:e.value,changed:!1}:void 0).filter(Boolean);W(e)});if(!S)return m.createElement(h,null,t);let F=e=>void 0!==e;return m.createElement(h,{is:\"form\",action:\"#\",method:\"post\",onSubmit:e=>{e.preventDefault(),T()}},m.createElement(f,{onClickBack:p,title:y&&F(y)&&B(y)},m.createElement(r,null,a)),b,x?t:m.createElement(E,null,m.createElement(n,{marginBlock:\"none\",marginInline:\"auto\",width:\"full\",maxWidth:\"x580\"},D&&F(D)&&B.has(D)&&m.createElement(n,{is:\"p\",color:\"hint\",fontScale:\"p2\"},B(D)),m.createElement(l,{className:\"page-settings\"},t))),m.createElement(v,{isDirty:0!==w.length},m.createElement(r,null,w.length>0&&m.createElement(i,{type:\"reset\",onClick:e=>{e.preventDefault(),A()}},B(\"Cancel\")),m.createElement(i,{children:B(\"Save_changes\"),className:\"save\",disabled:0===w.length,primary:!0,type:\"submit\",onClick:e=>{e.preventDefault(),T()}}))))}))}","map":"{\"version\":3,\"sources\":[\"client/views/admin/settings/SettingsGroupPage/SettingsGroupPage.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ISetting, ISettingColor } from '@rocket.chat/core-typings';\\nimport { Accordion, Box, Button, ButtonGroup } from '@rocket.chat/fuselage';\\nimport { useEffectEvent } from '@rocket.chat/fuselage-hooks';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useToastMessageDispatch, useSettingsDispatch, useSettings, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactNode, FormEvent, MouseEvent } from 'react';\\nimport React, { useMemo, memo } from 'react';\\n\\nimport { Page, PageHeader, PageScrollableContentWithShadow, PageFooter } from '../../../../components/Page';\\nimport type { EditableSetting } from '../../EditableSettingsContext';\\nimport { useEditableSettingsDispatch, useEditableSettings } from '../../EditableSettingsContext';\\n\\ntype SettingsGroupPageProps = {\\n\\tchildren: ReactNode;\\n\\theaderButtons?: ReactNode;\\n\\tonClickBack?: () => void;\\n\\t_id: string;\\n\\ti18nLabel: string;\\n\\ti18nDescription?: string;\\n\\ttabs?: ReactNode;\\n\\tisCustom?: boolean;\\n};\\n\\nconst SettingsGroupPage = ({\\n\\tchildren = undefined,\\n\\theaderButtons = undefined,\\n\\tonClickBack,\\n\\t_id,\\n\\ti18nLabel,\\n\\ti18nDescription = undefined,\\n\\ttabs = undefined,\\n\\tisCustom = false,\\n}: SettingsGroupPageProps) => {\\n\\tconst t = useTranslation();\\n\\tconst dispatch = useSettingsDispatch();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst changedEditableSettings = useEditableSettings(\\n\\t\\tuseMemo(\\n\\t\\t\\t() => ({\\n\\t\\t\\t\\tgroup: _id,\\n\\t\\t\\t\\tchanged: true,\\n\\t\\t\\t}),\\n\\t\\t\\t[_id],\\n\\t\\t),\\n\\t);\\n\\n\\tconst originalSettings = useSettings(\\n\\t\\tuseMemo(\\n\\t\\t\\t() => ({\\n\\t\\t\\t\\t_id: changedEditableSettings.map(({ _id }) => _id),\\n\\t\\t\\t}),\\n\\t\\t\\t[changedEditableSettings],\\n\\t\\t),\\n\\t);\\n\\n\\tconst isColorSetting = (setting: ISetting): setting is ISettingColor => setting.type === 'color';\\n\\n\\tconst save = useEffectEvent(async () => {\\n\\t\\tconst changes = changedEditableSettings.map((setting) => {\\n\\t\\t\\tif (isColorSetting(setting)) {\\n\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t_id: setting._id,\\n\\t\\t\\t\\t\\tvalue: setting.value,\\n\\t\\t\\t\\t\\teditor: setting.editor,\\n\\t\\t\\t\\t};\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\t_id: setting._id,\\n\\t\\t\\t\\tvalue: setting.value,\\n\\t\\t\\t};\\n\\t\\t});\\n\\n\\t\\tif (changes.length === 0) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\ttry {\\n\\t\\t\\tawait dispatch(changes);\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Settings_updated') });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t});\\n\\n\\tconst dispatchToEditing = useEditableSettingsDispatch();\\n\\n\\tconst cancel = useEffectEvent(() => {\\n\\t\\tconst settingsToDispatch = changedEditableSettings\\n\\t\\t\\t.map(({ _id }) => originalSettings.find((setting) => setting._id === _id))\\n\\t\\t\\t.map((setting) => {\\n\\t\\t\\t\\tif (!setting) {\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (isColorSetting(setting)) {\\n\\t\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t\\t_id: setting._id,\\n\\t\\t\\t\\t\\t\\tvalue: setting.value,\\n\\t\\t\\t\\t\\t\\teditor: setting.editor,\\n\\t\\t\\t\\t\\t\\tchanged: false,\\n\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn {\\n\\t\\t\\t\\t\\t_id: setting._id,\\n\\t\\t\\t\\t\\tvalue: setting.value,\\n\\t\\t\\t\\t\\tchanged: false,\\n\\t\\t\\t\\t};\\n\\t\\t\\t})\\n\\t\\t\\t.filter(Boolean);\\n\\t\\tdispatchToEditing(settingsToDispatch as Partial<EditableSetting>[]);\\n\\t});\\n\\n\\tconst handleSubmit = (event: FormEvent<HTMLFormElement>): void => {\\n\\t\\tevent.preventDefault();\\n\\t\\tsave();\\n\\t};\\n\\n\\tconst handleCancelClick = (event: MouseEvent<HTMLOrSVGElement>): void => {\\n\\t\\tevent.preventDefault();\\n\\t\\tcancel();\\n\\t};\\n\\n\\tconst handleSaveClick = (event: MouseEvent<HTMLOrSVGElement>): void => {\\n\\t\\tevent.preventDefault();\\n\\t\\tsave();\\n\\t};\\n\\n\\tif (!_id) {\\n\\t\\treturn <Page>{children}</Page>;\\n\\t}\\n\\n\\tconst isTranslationKey = (key: string): key is TranslationKey => (key as TranslationKey) !== undefined;\\n\\n\\treturn (\\n\\t\\t<Page is='form' action='#' method='post' onSubmit={handleSubmit}>\\n\\t\\t\\t<PageHeader onClickBack={onClickBack} title={i18nLabel && isTranslationKey(i18nLabel) && t(i18nLabel)}>\\n\\t\\t\\t\\t<ButtonGroup>{headerButtons}</ButtonGroup>\\n\\t\\t\\t</PageHeader>\\n\\t\\t\\t{tabs}\\n\\t\\t\\t{isCustom ? (\\n\\t\\t\\t\\tchildren\\n\\t\\t\\t) : (\\n\\t\\t\\t\\t<PageScrollableContentWithShadow>\\n\\t\\t\\t\\t\\t<Box marginBlock='none' marginInline='auto' width='full' maxWidth='x580'>\\n\\t\\t\\t\\t\\t\\t{i18nDescription && isTranslationKey(i18nDescription) && t.has(i18nDescription) && (\\n\\t\\t\\t\\t\\t\\t\\t<Box is='p' color='hint' fontScale='p2'>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t(i18nDescription)}\\n\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t)}\\n\\n\\t\\t\\t\\t\\t\\t<Accordion className='page-settings'>{children}</Accordion>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t</PageScrollableContentWithShadow>\\n\\t\\t\\t)}\\n\\t\\t\\t<PageFooter isDirty={!(changedEditableSettings.length === 0)}>\\n\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t{changedEditableSettings.length > 0 && (\\n\\t\\t\\t\\t\\t\\t<Button type='reset' onClick={handleCancelClick}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Cancel')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t<Button\\n\\t\\t\\t\\t\\t\\tchildren={t('Save_changes')}\\n\\t\\t\\t\\t\\t\\tclassName='save'\\n\\t\\t\\t\\t\\t\\tdisabled={changedEditableSettings.length === 0}\\n\\t\\t\\t\\t\\t\\tprimary\\n\\t\\t\\t\\t\\t\\ttype='submit'\\n\\t\\t\\t\\t\\t\\tonClick={handleSaveClick}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</PageFooter>\\n\\t\\t</Page>\\n\\t);\\n};\\n\\nexport default memo(SettingsGroupPage);\\n\",null],\"names\":[\"Accordion\",\"Box\",\"Button\",\"ButtonGroup\",\"useEffectEvent\",\"useToastMessageDispatch\",\"useSettingsDispatch\",\"useSettings\",\"useTranslation\",\"React\",\"useMemo\",\"memo\",\"Page\",\"PageHeader\",\"PageScrollableContentWithShadow\",\"PageFooter\",\"useEditableSettingsDispatch\",\"useEditableSettings\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"children\",\"headerButtons\",\"onClickBack\",\"_id\",\"i18nLabel\",\"i18nDescription\",\"tabs\",\"isCustom\",\"t\",\"dispatch\",\"dispatchToastMessage\",\"changedEditableSettings\",\"group\",\"changed\",\"originalSettings\",\"map\",\"_ref2\",\"isColorSetting\",\"setting\",\"type\",\"save\",\"changes\",\"value\",\"editor\",\"length\",\"message\",\"error\",\"dispatchToEditing\",\"cancel\",\"settingsToDispatch\",\"_ref3\",\"find\",\"filter\",\"Boolean\",\"createElement\",\"isTranslationKey\",\"key\",\"undefined\",\"is\",\"action\",\"method\",\"onSubmit\",\"event\",\"preventDefault\",\"title\",\"marginBlock\",\"marginInline\",\"width\",\"maxWidth\",\"has\",\"color\",\"fontScale\",\"className\",\"isDirty\",\"onClick\",\"disabled\",\"primary\"],\"mappings\":\"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\"}"}