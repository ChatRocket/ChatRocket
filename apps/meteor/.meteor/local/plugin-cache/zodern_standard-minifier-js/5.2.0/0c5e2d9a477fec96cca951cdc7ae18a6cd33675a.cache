{"code":"function module(e,o,t){let a,l,n,s,d,r,i,u,c;t.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){a=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useBreakpoints(e){l=e}},0),t.link(\"@rocket.chat/ui-contexts\",{LayoutContext(e){n=e},useRouter(e){s=e},useSetting(e){d=e}},1),t.link(\"react\",{default(e){r=e},useMemo(e){i=e},useState(e){u=e},useEffect(e){c=e}},2);let m={roomToolbox:[],messageToolbox:[],composerToolbox:[],userToolbox:[]};t.exportDefault(e=>{let{children:o}=e,t=!!d(\"UI_Show_top_navbar_embedded_layout\"),[x,b]=u(!1),v=l(),[p,g]=u(m),h=s(),[f]=u(()=>\"embedded\"===h.getSearchParameters().layout),k=!v.includes(\"md\");return c(()=>{b(k)},[k]),c(()=>{let e=e=>{var o;(null===(o=e.data)||void 0===o?void 0:o.event)===\"overrideUi\"&&g(a(a({},m),e.data.hideActions))};return window.addEventListener(\"message\",e),()=>window.removeEventListener(\"message\",e)},[]),r.createElement(n.Provider,{children:o,value:i(()=>({isMobile:k,isEmbedded:f,showTopNavbarEmbeddedLayout:t,sidebar:{isCollapsed:x,toggle:()=>b(e=>!e),collapse:()=>b(!0),expand:()=>b(!1),close:()=>f?b(!0):h.navigate(\"/home\")},size:{sidebar:\"240px\",contextualBar:v.includes(\"sm\")?v.includes(\"xl\")?\"38%\":\"380px\":\"100%\"},roomToolboxExpanded:v.includes(\"lg\"),contextualBarExpanded:v.includes(\"sm\"),contextualBarPosition:v.includes(\"sm\")?v.includes(\"lg\")?\"relative\":\"absolute\":\"fixed\",hiddenActions:p}),[k,f,t,x,v,h,p])})})}","map":"{\"version\":3,\"sources\":[\"client/providers/LayoutProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useBreakpoints } from '@rocket.chat/fuselage-hooks';\\nimport { LayoutContext, useRouter, useSetting } from '@rocket.chat/ui-contexts';\\nimport type { ReactNode } from 'react';\\nimport React, { useMemo, useState, useEffect } from 'react';\\n\\nconst hiddenActionsDefaultValue = {\\n\\troomToolbox: [],\\n\\tmessageToolbox: [],\\n\\tcomposerToolbox: [],\\n\\tuserToolbox: [],\\n};\\n\\ntype LayoutProviderProps = {\\n\\tchildren?: ReactNode;\\n};\\n\\nconst LayoutProvider = ({ children }: LayoutProviderProps) => {\\n\\tconst showTopNavbarEmbeddedLayout = Boolean(useSetting('UI_Show_top_navbar_embedded_layout'));\\n\\tconst [isCollapsed, setIsCollapsed] = useState(false);\\n\\tconst breakpoints = useBreakpoints(); // [\\\"xs\\\", \\\"sm\\\", \\\"md\\\", \\\"lg\\\", \\\"xl\\\", xxl\\\"]\\n\\tconst [hiddenActions, setHiddenActions] = useState(hiddenActionsDefaultValue);\\n\\n\\tconst router = useRouter();\\n\\t// Once the layout is embedded, it can't be changed\\n\\tconst [isEmbedded] = useState(() => router.getSearchParameters().layout === 'embedded');\\n\\n\\tconst isMobile = !breakpoints.includes('md');\\n\\n\\tuseEffect(() => {\\n\\t\\tsetIsCollapsed(isMobile);\\n\\t}, [isMobile]);\\n\\n\\tuseEffect(() => {\\n\\t\\tconst eventHandler = (event: MessageEvent<any>) => {\\n\\t\\t\\tif (event.data?.event !== 'overrideUi') {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tsetHiddenActions({ ...hiddenActionsDefaultValue, ...event.data.hideActions });\\n\\t\\t};\\n\\t\\twindow.addEventListener('message', eventHandler);\\n\\t\\treturn () => window.removeEventListener('message', eventHandler);\\n\\t}, []);\\n\\n\\treturn (\\n\\t\\t<LayoutContext.Provider\\n\\t\\t\\tchildren={children}\\n\\t\\t\\tvalue={useMemo(\\n\\t\\t\\t\\t() => ({\\n\\t\\t\\t\\t\\tisMobile,\\n\\t\\t\\t\\t\\tisEmbedded,\\n\\t\\t\\t\\t\\tshowTopNavbarEmbeddedLayout,\\n\\t\\t\\t\\t\\tsidebar: {\\n\\t\\t\\t\\t\\t\\tisCollapsed,\\n\\t\\t\\t\\t\\t\\ttoggle: () => setIsCollapsed((isCollapsed) => !isCollapsed),\\n\\t\\t\\t\\t\\t\\tcollapse: () => setIsCollapsed(true),\\n\\t\\t\\t\\t\\t\\texpand: () => setIsCollapsed(false),\\n\\t\\t\\t\\t\\t\\tclose: () => (isEmbedded ? setIsCollapsed(true) : router.navigate('/home')),\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tsize: {\\n\\t\\t\\t\\t\\t\\tsidebar: '240px',\\n\\t\\t\\t\\t\\t\\t// eslint-disable-next-line no-nested-ternary\\n\\t\\t\\t\\t\\t\\tcontextualBar: breakpoints.includes('sm') ? (breakpoints.includes('xl') ? '38%' : '380px') : '100%',\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\troomToolboxExpanded: breakpoints.includes('lg'),\\n\\t\\t\\t\\t\\tcontextualBarExpanded: breakpoints.includes('sm'),\\n\\t\\t\\t\\t\\t// eslint-disable-next-line no-nested-ternary\\n\\t\\t\\t\\t\\tcontextualBarPosition: breakpoints.includes('sm') ? (breakpoints.includes('lg') ? 'relative' : 'absolute') : 'fixed',\\n\\t\\t\\t\\t\\thiddenActions,\\n\\t\\t\\t\\t}),\\n\\t\\t\\t\\t[isMobile, isEmbedded, showTopNavbarEmbeddedLayout, isCollapsed, breakpoints, router, hiddenActions],\\n\\t\\t\\t)}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default LayoutProvider;\\n\",null],\"names\":[\"_objectSpread\",\"useBreakpoints\",\"LayoutContext\",\"useRouter\",\"useSetting\",\"React\",\"useMemo\",\"useState\",\"useEffect\",\"module\",\"link\",\"default\",\"v\",\"hiddenActionsDefaultValue\",\"roomToolbox\",\"messageToolbox\",\"composerToolbox\",\"userToolbox\",\"exportDefault\",\"_ref\",\"children\",\"showTopNavbarEmbeddedLayout\",\"Boolean\",\"isCollapsed\",\"setIsCollapsed\",\"breakpoints\",\"hiddenActions\",\"setHiddenActions\",\"router\",\"isEmbedded\",\"getSearchParameters\",\"layout\",\"isMobile\",\"includes\",\"eventHandler\",\"event\",\"_event$data\",\"data\",\"hideActions\",\"window\",\"addEventListener\",\"removeEventListener\",\"createElement\",\"Provider\",\"value\",\"sidebar\",\"toggle\",\"collapse\",\"expand\",\"close\",\"navigate\",\"size\",\"contextualBar\",\"roomToolboxExpanded\",\"contextualBarExpanded\",\"contextualBarPosition\"],\"mappings\":\"2BAAAA,EAAAC,EAA6DC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAApDC,EAAgBC,IAAA,CAAA,uCAAoC,CAAAC,QAAAC,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAApDH,EAAgBC,IAAA,CAAM,8BAA8B,CAAAT,eAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAR,cAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,UAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,WAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAP,EAAAO,CAAA,EAAAN,QAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,SAAAK,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,UAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAK7D,IAAMC,EAA4B,CACjCC,YAAa,EAAE,CACfC,eAAgB,EAAE,CAClBC,gBAAiB,EAAE,CACnBC,YAAa,EAAA,EATdR,EAAOS,aAAE,CAgBcC,IAAsC,GAArC,CAAEC,SAAAA,CAAAA,CAA+B,CAAAD,EAClDE,EAA8BC,CAAAA,CAAQlB,EAAW,sCACjD,CAACmB,EAAaC,EAAe,CAAGjB,EAAS,CAAA,GACzCkB,EAAcxB,IACd,CAACyB,EAAeC,EAAiB,CAAGpB,EAASM,GAE7Ce,EAASzB,IAET,CAAC0B,EAAW,CAAGtB,EAAS,IAAMqB,AAAwC,aAAxCA,EAAOE,mBAAmB,GAAGC,MAAM,EAEjEC,EAAW,CAACP,EAAYQ,QAAQ,CAAC,MAkBvC,OAhBAzB,EAAU,KACTgB,EAAeQ,EAChB,EAAG,CAACA,EAAS,EAEbxB,EAAU,KACT,IAAM0B,EAAgBC,IAA4B,IAAAC,EAC7C,CAAA,AAAU,OAAVA,CAAAA,EAAAD,EAAME,IAAI,AAAJA,GAAID,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAVA,EAAYD,KAAK,AAALA,IAAU,cAI1BR,EAAgB3B,EAAAA,EAAA,CAAA,EAAMa,GAA8BsB,EAAME,IAAI,CAACC,WAAW,EAC3E,EAEA,OADAC,OAAOC,gBAAgB,CAAC,UAAWN,GAC5B,IAAMK,OAAOE,mBAAmB,CAAC,UAAWP,EACpD,EAAG,EAAE,EAGJ7B,EAAAqC,aAAA,CAACxC,EAAcyC,QAAQ,CAAA,CACtBvB,SAAUA,EACVwB,MAAOtC,EACN,IAAO,CAAA,CACN0B,SAAAA,EACAH,WAAAA,EACAR,4BAAAA,EACAwB,QAAS,CACRtB,YAAAA,EACAuB,OAAQA,IAAMtB,EAAgBD,GAAgB,CAACA,GAC/CwB,SAAUA,IAAMvB,EAAe,CAAA,GAC/BwB,OAAQA,IAAMxB,EAAe,CAAA,GAC7ByB,MAAOA,IAAOpB,EAAaL,EAAe,CAAA,GAAQI,EAAOsB,QAAQ,CAAC,UAEnEC,KAAM,CACLN,QAAS,QAETO,cAAe3B,EAAYQ,QAAQ,CAAC,MAASR,EAAYQ,QAAQ,CAAC,MAAQ,MAAQ,QAAW,QAE9FoB,oBAAqB5B,EAAYQ,QAAQ,CAAC,MAC1CqB,sBAAuB7B,EAAYQ,QAAQ,CAAC,MAE5CsB,sBAAuB9B,EAAYQ,QAAQ,CAAC,MAASR,EAAYQ,QAAQ,CAAC,MAAQ,WAAa,WAAc,QAC7GP,cAAAA,IAED,CAACM,EAAUH,EAAYR,EAA6BE,EAAaE,EAAaG,EAAQF,EAAc,CACnG,EAGL\"}"}