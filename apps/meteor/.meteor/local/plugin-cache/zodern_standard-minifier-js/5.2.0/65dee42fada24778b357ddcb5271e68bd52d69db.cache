{"code":"function module(n,e,t){var o,a,i,r,u,l,c,f,s,m,k,p,d;t.link(\"@rocket.chat/fuselage\",{Box:function(n){o=n}},0),t.link(\"@rocket.chat/ui-contexts\",{useRoute:function(n){a=n},useRouteParameter:function(n){i=n},useSearchParameter:function(n){r=n}},1),t.link(\"react\",{default:function(n){u=n},useMemo:function(n){l=n}},2),t.link(\"react-i18next\",{useTranslation:function(n){c=n}},3),t.link(\"../../../components/Contextualbar\",{Contextualbar:function(n){f=n}},4),t.link(\"../../../hooks/useAsyncState\",{AsyncStatePhase:function(n){s=n}},5),t.link(\"../../../hooks/useEndpointData\",{useEndpointData:function(n){m=n}},6),t.link(\"./calls/Call\",{default:function(n){k=n}},7),t.link(\"./calls/contextualBar/VoipInfo\",{VoipInfo:function(n){p=n}},8),t.link(\"./components/FormSkeleton\",{FormSkeleton:function(n){d=n}},9),t.exportDefault(function(){var n=a(\"omnichannel-directory\"),e=i(\"bar\")||\"info\",t=i(\"id\"),h=r(\"token\"),E=c().t,v=l(function(){return{rid:t||\"\",token:h||\"\"}},[t,h]),x=m(\"/v1/voip/room\",{params:v}),C=x.value,S=x.phase,b=x.error;if(\"view\"===e&&t)return u.createElement(k,{rid:t});if(S===s.LOADING)return u.createElement(o,{pi:24},u.createElement(d,null));if(b||!C||!C.room)return u.createElement(o,{mbs:16},E(\"Room_not_found\"));var D=C.room;return u.createElement(f,null,\"info\"===e&&u.createElement(p,{room:D,onClickClose:function(){n.push({page:\"calls\"})}}))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/directory/CallsContextualBarDirectory.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IVoipRoom } from '@rocket.chat/core-typings';\\nimport { Box } from '@rocket.chat/fuselage';\\nimport { useRoute, useRouteParameter, useSearchParameter } from '@rocket.chat/ui-contexts';\\nimport React, { useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { Contextualbar } from '../../../components/Contextualbar';\\nimport { AsyncStatePhase } from '../../../hooks/useAsyncState';\\nimport { useEndpointData } from '../../../hooks/useEndpointData';\\nimport Call from './calls/Call';\\nimport { VoipInfo } from './calls/contextualBar/VoipInfo';\\nimport { FormSkeleton } from './components/FormSkeleton';\\n\\nconst CallsContextualBarDirectory = () => {\\n\\tconst directoryRoute = useRoute('omnichannel-directory');\\n\\n\\tconst bar = useRouteParameter('bar') || 'info';\\n\\tconst id = useRouteParameter('id');\\n\\tconst token = useSearchParameter('token');\\n\\n\\tconst { t } = useTranslation();\\n\\n\\tconst handleClose = (): void => {\\n\\t\\tdirectoryRoute.push({ page: 'calls' });\\n\\t};\\n\\n\\tconst query = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\trid: id || '',\\n\\t\\t\\ttoken: token || '',\\n\\t\\t}),\\n\\t\\t[id, token],\\n\\t);\\n\\n\\tconst { value: data, phase: state, error } = useEndpointData(`/v1/voip/room`, { params: query });\\n\\n\\tif (bar === 'view' && id) {\\n\\t\\treturn <Call rid={id} />;\\n\\t}\\n\\n\\tif (state === AsyncStatePhase.LOADING) {\\n\\t\\treturn (\\n\\t\\t\\t<Box pi={24}>\\n\\t\\t\\t\\t<FormSkeleton />\\n\\t\\t\\t</Box>\\n\\t\\t);\\n\\t}\\n\\n\\tif (error || !data || !data.room) {\\n\\t\\treturn <Box mbs={16}>{t('Room_not_found')}</Box>;\\n\\t}\\n\\n\\tconst room = data.room as unknown as IVoipRoom; // TODO Check why types are incompatible even though the endpoint returns an IVoipRooms\\n\\n\\treturn <Contextualbar>{bar === 'info' && <VoipInfo room={room} onClickClose={handleClose} />}</Contextualbar>;\\n};\\n\\nexport default CallsContextualBarDirectory;\\n\",null],\"names\":[\"Box\",\"useRoute\",\"useRouteParameter\",\"useSearchParameter\",\"React\",\"useMemo\",\"useTranslation\",\"Contextualbar\",\"AsyncStatePhase\",\"useEndpointData\",\"Call\",\"VoipInfo\",\"FormSkeleton\",\"module\",\"link\",\"v\",\"exportDefault\",\"directoryRoute\",\"bar\",\"id\",\"token\",\"t\",\"_useTranslation\",\"query\",\"rid\",\"_useEndpointData\",\"params\",\"data\",\"value\",\"state\",\"phase\",\"error\",\"createElement\",\"LOADING\",\"pi\",\"room\",\"mbs\",\"onClickClose\",\"push\",\"page\"],\"mappings\":\"uBAaA,IAZAA,EAA4CC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAArCC,EAAOC,IAAA,CAAM,wBAAwB,CAAAd,IAAA,SAAAe,CAAA,EAAAf,EAAAe,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2BAAA,CAAAb,SAAA,SAAAc,CAAA,EAAAd,EAAAc,CAAA,EAAAb,kBAAA,SAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,mBAAA,SAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAC,CAAA,EAAAX,EAAAW,CAAA,EAAAV,QAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gBAAA,CAAAR,eAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,oCAAA,CAAAP,cAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,+BAAA,CAAAN,gBAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iCAAA,CAAAL,gBAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,eAAA,CAAA,QAAA,SAAAC,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iCAAA,CAAAH,SAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,4BAAA,CAAAF,aAAA,SAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAA5CF,EAAOG,aAAa,CAYgB,WACnC,IAAMC,EAAiBhB,EAAS,yBAE1BiB,EAAMhB,EAAkB,QAAU,OAClCiB,EAAKjB,EAAkB,MACvBkB,EAAQjB,EAAmB,SAEzBkB,EAACC,AAAKhB,IAANe,CAAC,CAMHE,EAAQlB,EACb,WAAA,MAAO,CACNmB,IAAKL,GAAM,GACXC,MAAOA,GAAS,GAChB,EACD,CAACD,EAAIC,EAAM,EAGZK,EAA6ChB,EAAe,gBAAkB,CAAEiB,OAAQH,CAAK,GAA9EI,EAAIF,EAAXG,KAAK,CAAeC,EAAKJ,EAAZK,KAAK,CAASC,EAAKN,EAALM,KAAK,CAExC,GAAIb,AAAQ,SAARA,GAAkBC,EACrB,OAAOf,EAAA4B,aAAA,CAACtB,EAAI,CAACc,IAAKL,CAAG,GAGtB,GAAIU,IAAUrB,EAAgByB,OAAO,CACpC,OACC7B,EAAA4B,aAAA,CAAChC,EAAG,CAACkC,GAAI,EAAG,EACX9B,EAAA4B,aAAA,CAACpB,EAAY,OAKhB,GAAImB,GAAS,CAACJ,GAAQ,CAACA,EAAKQ,IAAI,CAC/B,OAAO/B,EAAA4B,aAAA,CAAChC,EAAG,CAACoC,IAAK,EAAG,EAAEf,EAAE,mBAGzB,IAAMc,EAAOR,EAAKQ,IAA4B,CAE9C,OAAO/B,EAAA4B,aAAA,CAACzB,EAAa,KAAEW,AAAQ,SAARA,GAAkBd,EAAA4B,aAAA,CAACrB,EAAQ,CAACwB,KAAMA,EAAME,aAhC3C,WACnBpB,EAAeqB,IAAI,CAAC,CAAEC,KAAM,OAAO,EACpC,CA8ByF,GAC1F\"}"}