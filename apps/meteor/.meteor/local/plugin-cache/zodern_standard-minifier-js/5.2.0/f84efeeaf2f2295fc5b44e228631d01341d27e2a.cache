{"code":"function module(e,n,t){t.link(\"@babel/runtime/regenerator\",{default:function(e){i=e}},0),t.link(\"@rocket.chat/onboarding-ui\",{AdminInfoPage:function(e){r=e}},0),t.link(\"@rocket.chat/string-helpers\",{escapeRegExp:function(e){a=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useSetting:function(e){u=e},useTranslation:function(e){o=e}},2),t.link(\"react\",{default:function(e){c=e}},3),t.link(\"../contexts/SetupWizardContext\",{useSetupWizardContext:function(e){l=e}},4);var i,r,a,u,o,c,l,s=[\"all\",\"here\",\"admin\"].map(function(e){return RegExp(\"^\"+a(e).trim()+\"$\",\"i\")});t.exportDefault(function(){var e=o(),n=RegExp(\"^\"+u(\"UTF8_User_Names_Validation\")+\"$\"),t=l(),f=t.currentStep,d=t.validateEmail,m=t.registerAdminUser,p=t.maxSteps;return c.createElement(r,{validatePassword:function(e){return e.length>0},passwordRulesHint:\"\",validateUsername:function(t){return!(!n.test(t)||s.length&&s.some(function(e){return e.test(a(t).trim())}))||e(\"Invalid_username\")},validateEmail:d,currentStep:f,stepCount:p,onSubmit:function(e){return i.async(function(n){for(;;)switch(n.prev=n.next){case 0:m(e);case 1:case\"end\":return n.stop()}},null,null,null,Promise)}})})}","map":"{\"version\":3,\"sources\":[\"client/views/setupWizard/steps/AdminInfoStep.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { AdminInfoPage } from '@rocket.chat/onboarding-ui';\\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\\nimport { useSetting, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ComponentProps } from 'react';\\nimport React from 'react';\\n\\nimport { useSetupWizardContext } from '../contexts/SetupWizardContext';\\n\\nconst toRegExp = (username: string): RegExp => new RegExp(`^${escapeRegExp(username).trim()}$`, 'i');\\nconst usernameBlackList = ['all', 'here', 'admin'].map(toRegExp);\\nconst hasBlockedName = (username: string): boolean =>\\n\\t!!usernameBlackList.length && usernameBlackList.some((restrictedUsername) => restrictedUsername.test(escapeRegExp(username).trim()));\\n\\nconst AdminInfoStep = (): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst regexpForUsernameValidation = useSetting('UTF8_User_Names_Validation');\\n\\tconst usernameRegExp = new RegExp(`^${regexpForUsernameValidation}$`);\\n\\n\\tconst { currentStep, validateEmail, registerAdminUser, maxSteps } = useSetupWizardContext();\\n\\n\\t// TODO: check if username exists\\n\\tconst validateUsername = (username: string): boolean | string => {\\n\\t\\tif (!usernameRegExp.test(username) || hasBlockedName(username)) {\\n\\t\\t\\treturn t('Invalid_username');\\n\\t\\t}\\n\\n\\t\\treturn true;\\n\\t};\\n\\n\\tconst handleSubmit: ComponentProps<typeof AdminInfoPage>['onSubmit'] = async (data) => {\\n\\t\\tregisterAdminUser(data);\\n\\t};\\n\\n\\treturn (\\n\\t\\t<AdminInfoPage\\n\\t\\t\\tvalidatePassword={(password): boolean => password.length > 0}\\n\\t\\t\\tpasswordRulesHint=''\\n\\t\\t\\tvalidateUsername={validateUsername}\\n\\t\\t\\tvalidateEmail={validateEmail}\\n\\t\\t\\tcurrentStep={currentStep}\\n\\t\\t\\tstepCount={maxSteps}\\n\\t\\t\\tonSubmit={handleSubmit}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default AdminInfoStep;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"AdminInfoPage\",\"escapeRegExp\",\"useSetting\",\"useTranslation\",\"React\",\"useSetupWizardContext\",\"usernameBlackList\",\"map\",\"username\",\"RegExp\",\"trim\",\"exportDefault\",\"t\",\"usernameRegExp\",\"_useSetupWizardContex\",\"currentStep\",\"validateEmail\",\"registerAdminUser\",\"maxSteps\",\"createElement\",\"validatePassword\",\"password\",\"length\",\"passwordRulesHint\",\"validateUsername\",\"test\",\"some\",\"restrictedUsername\",\"stepCount\",\"onSubmit\",\"data\",\"async\",\"_context\",\"prev\",\"next\",\"stop\",\"Promise\"],\"mappings\":\"uBAAwBA,EAAMC,IAAA,CAAA,6BAA6B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAlDH,EAAeC,IAAA,CAAM,6BAA6B,CAAAI,cAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAK,aAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAM,WAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,EAAAK,eAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iCAAA,CAAAS,sBAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAS3D,IATAC,EAAAC,EAA2DC,EAAAC,EAAAC,EAAAC,EAAAC,EASrDC,EAAoB,CAAC,MAAO,OAAQ,QAAQ,CAACC,GAAG,CADrC,SAACC,CAAgB,EAAA,OAAa,AAAIC,OAAM,IAAKR,EAAaO,GAAUE,IAAI,GAAE,IAAK,IAAI,GARpGf,EAAOgB,aAAE,CAaa,WACrB,IAAMC,EAAIT,IAEJU,EAAiB,AAAIJ,OAAM,IADGP,EAAW,8BACkB,KAEjEY,EAAoET,IAA5DU,EAAWD,EAAXC,WAAW,CAAEC,EAAaF,EAAbE,aAAa,CAAEC,EAAiBH,EAAjBG,iBAAiB,CAAEC,EAAQJ,EAARI,QAAQ,CAe/D,OACCd,EAAAe,aAAA,CAACnB,EAAa,CACboB,iBAAkB,SAACC,CAAQ,EAAA,OAAcA,EAASC,MAAM,CAAG,CAAC,EAC5DC,kBAAkB,GAClBC,iBAhBuB,SAAChB,CAAgB,QACzC,CAAI,CAAA,CAACK,EAAeY,IAAI,CAACjB,IAX1B,AAAEF,EAAkBgB,MAAM,EAAIhB,EAAkBoB,IAAI,CAAC,SAACC,CAAkB,EAAA,OAAKA,EAAmBF,IAAI,CAACxB,EAW/CO,GAXsEE,IAAI,GAAG,EAWrE,GACrDE,EAAE,mBAIX,EAWEI,cAAeA,EACfD,YAAaA,EACba,UAAWV,EACXW,SAZqE,SAAOC,CAAI,EAAA,OAAA/B,EAAAgC,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EACjFjB,EAAkBa,EAAM,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAG,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,CAWA,EAG1B\"}"}