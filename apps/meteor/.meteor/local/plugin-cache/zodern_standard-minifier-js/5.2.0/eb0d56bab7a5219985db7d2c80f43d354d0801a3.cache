{"code":"function module(e,t,a){let l,n,r,i,o,s,u,c,d,m,f,k,g;a.link(\"@rocket.chat/fuselage\",{Field(e){l=e},FieldError(e){n=e},Button(e){r=e},Box(e){i=e},ButtonGroup(e){o=e}},0),a.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){s=e}},1),a.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){u=e},useTranslation(e){c=e}},2),a.link(\"react\",{default(e){d=e},useState(e){m=e}},3),a.link(\"react-hook-form\",{Controller(e){f=e},useForm(e){k=e}},4),a.link(\"../../views/admin/settings/Setting/inputs/StringSettingInput\",{default(e){g=e}},5),a.exportDefault(e=>{var t;let{data:a,onSave:h,onCancel:p}=e,v=u(),C=c(),[E,b]=m(!1),{name:y,i18n:S,dirty:x}=a,B=C(S),{control:w,getValues:D,setValue:N,formState:{errors:R,isValid:V,isDirty:q},setError:F,handleSubmit:_}=k({mode:\"onChange\",defaultValues:a?{name:x?y:B}:{}}),G=s(async()=>{let{name:e}=D();if(!V)return v({type:\"error\",message:C(\"Required_field\",{field:C(\"Name\")})});try{b(!0),await h({name:e,reset:e===B})}catch(t){let{error:e}=t;e&&F(\"name\",{message:C(e)})}finally{b(!1)}}),M=()=>{N(\"name\",B,{shouldDirty:!0,shouldValidate:!0})};return d.createElement(i,{is:\"form\",onSubmit:_(G),display:\"flex\",flexDirection:\"column\",justifyContent:\"space-between\",flexGrow:1},d.createElement(l,null,d.createElement(f,{name:\"name\",control:w,rules:{required:C(\"Required_field\",{field:C(\"Name\")}),validate:e=>(null==e?void 0:e.trim())!==\"\"},render:e=>{var t;let{field:{value:a,onChange:l}}=e;return d.createElement(g,{_id:\"\",packageValue:B,disabled:E,error:null===(t=R.name)||void 0===t?void 0:t.message,label:\"\".concat(C(\"Name\"),\"*\"),placeholder:C(\"Name\"),value:a,name:\"name\",hasResetButton:a!==C(S),onResetButtonClick:M,onChangeValue:l})}}),d.createElement(n,null,null===(t=R.name)||void 0===t?void 0:t.message)),d.createElement(o,{stretch:!0},d.createElement(r,{onClick:()=>p(),disabled:E},C(\"Cancel\")),d.createElement(r,{primary:!0,disabled:!q||!V,loading:E,onClick:G},C(\"Save\"))))})}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/priorities/PriorityEditForm.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatPriority, Serialized } from '@rocket.chat/core-typings';\\nimport { Field, FieldError, Button, Box, ButtonGroup } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useToastMessageDispatch, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useState } from 'react';\\nimport { Controller, useForm } from 'react-hook-form';\\n\\nimport StringSettingInput from '../../views/admin/settings/Setting/inputs/StringSettingInput';\\n\\nexport type PriorityFormData = { name: string; reset: boolean };\\n\\ntype ILivechatClientPriority = Serialized<ILivechatPriority> & {\\n\\ti18n: TranslationKey;\\n};\\n\\nexport type PriorityEditFormProps = {\\n\\tdata: ILivechatClientPriority;\\n\\tonCancel: () => void;\\n\\tonSave: (values: PriorityFormData) => Promise<void>;\\n};\\n\\ntype PrioritySaveException = { success: false; error: TranslationKey | undefined };\\n\\nconst PriorityEditForm = ({ data, onSave, onCancel }: PriorityEditFormProps): ReactElement => {\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst t = useTranslation();\\n\\tconst [isSaving, setSaving] = useState(false);\\n\\n\\tconst { name, i18n, dirty } = data;\\n\\tconst defaultName = t(i18n);\\n\\n\\tconst {\\n\\t\\tcontrol,\\n\\t\\tgetValues,\\n\\t\\tsetValue,\\n\\t\\tformState: { errors, isValid, isDirty },\\n\\t\\tsetError,\\n\\t\\thandleSubmit,\\n\\t} = useForm<PriorityFormData>({\\n\\t\\tmode: 'onChange',\\n\\t\\tdefaultValues: data ? { name: dirty ? name : defaultName } : {},\\n\\t});\\n\\n\\tconst handleSave = useMutableCallback(async () => {\\n\\t\\tconst { name } = getValues();\\n\\n\\t\\tif (!isValid) {\\n\\t\\t\\treturn dispatchToastMessage({ type: 'error', message: t('Required_field', { field: t('Name') }) });\\n\\t\\t}\\n\\n\\t\\ttry {\\n\\t\\t\\tsetSaving(true);\\n\\t\\t\\tawait onSave({ name, reset: name === defaultName });\\n\\t\\t} catch (e) {\\n\\t\\t\\tconst { error } = e as PrioritySaveException;\\n\\n\\t\\t\\tif (error) {\\n\\t\\t\\t\\tsetError('name', { message: t(error) });\\n\\t\\t\\t}\\n\\t\\t} finally {\\n\\t\\t\\tsetSaving(false);\\n\\t\\t}\\n\\t});\\n\\n\\tconst onReset = (): void => {\\n\\t\\tsetValue('name', defaultName, {\\n\\t\\t\\tshouldDirty: true,\\n\\t\\t\\tshouldValidate: true,\\n\\t\\t});\\n\\t};\\n\\n\\treturn (\\n\\t\\t<Box is='form' onSubmit={handleSubmit(handleSave)} display='flex' flexDirection='column' justifyContent='space-between' flexGrow={1}>\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\tname='name'\\n\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\trules={{ required: t('Required_field', { field: t('Name') }), validate: (v) => v?.trim() !== '' }}\\n\\t\\t\\t\\t\\trender={({ field: { value, onChange } }): ReactElement => (\\n\\t\\t\\t\\t\\t\\t<StringSettingInput\\n\\t\\t\\t\\t\\t\\t\\t_id=''\\n\\t\\t\\t\\t\\t\\t\\tpackageValue={defaultName}\\n\\t\\t\\t\\t\\t\\t\\tdisabled={isSaving}\\n\\t\\t\\t\\t\\t\\t\\terror={errors.name?.message}\\n\\t\\t\\t\\t\\t\\t\\tlabel={`${t('Name')}*`}\\n\\t\\t\\t\\t\\t\\t\\tplaceholder={t('Name')}\\n\\t\\t\\t\\t\\t\\t\\tvalue={value}\\n\\t\\t\\t\\t\\t\\t\\tname='name'\\n\\t\\t\\t\\t\\t\\t\\thasResetButton={value !== t(i18n)}\\n\\t\\t\\t\\t\\t\\t\\tonResetButtonClick={onReset}\\n\\t\\t\\t\\t\\t\\t\\tonChangeValue={onChange}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t\\t<FieldError>{errors.name?.message}</FieldError>\\n\\t\\t\\t</Field>\\n\\n\\t\\t\\t<ButtonGroup stretch>\\n\\t\\t\\t\\t<Button onClick={(): void => onCancel()} disabled={isSaving}>\\n\\t\\t\\t\\t\\t{t('Cancel')}\\n\\t\\t\\t\\t</Button>\\n\\n\\t\\t\\t\\t<Button primary disabled={!isDirty || !isValid} loading={isSaving} onClick={handleSave}>\\n\\t\\t\\t\\t\\t{t('Save')}\\n\\t\\t\\t\\t</Button>\\n\\t\\t\\t</ButtonGroup>\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default PriorityEditForm;\\n\",null],\"names\":[\"Field\",\"FieldError\",\"Button\",\"Box\",\"ButtonGroup\",\"useMutableCallback\",\"useToastMessageDispatch\",\"useTranslation\",\"React\",\"useState\",\"Controller\",\"useForm\",\"StringSettingInput\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"_errors$name2\",\"data\",\"onSave\",\"onCancel\",\"dispatchToastMessage\",\"t\",\"isSaving\",\"setSaving\",\"name\",\"i18n\",\"dirty\",\"defaultName\",\"control\",\"getValues\",\"setValue\",\"formState\",\"errors\",\"isValid\",\"isDirty\",\"setError\",\"handleSubmit\",\"mode\",\"defaultValues\",\"handleSave\",\"type\",\"message\",\"field\",\"reset\",\"e\",\"error\",\"onReset\",\"shouldDirty\",\"shouldValidate\",\"createElement\",\"is\",\"onSubmit\",\"display\",\"flexDirection\",\"justifyContent\",\"flexGrow\",\"rules\",\"required\",\"validate\",\"trim\",\"render\",\"_ref2\",\"_errors$name\",\"value\",\"onChange\",\"_id\",\"packageValue\",\"disabled\",\"label\",\"concat\",\"placeholder\",\"hasResetButton\",\"onResetButtonClick\",\"onChangeValue\",\"stretch\",\"onClick\",\"primary\",\"loading\"],\"mappings\":\"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\"}"}