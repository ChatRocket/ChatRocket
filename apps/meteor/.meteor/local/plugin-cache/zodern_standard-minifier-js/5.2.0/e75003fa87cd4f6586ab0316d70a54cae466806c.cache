{"code":"function module(e,t,l){let r,n,i,a,o,u,c,s,d,m,p,h,k,f,E,b,g,x;let v=[\"label\",\"value\"];l.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){r=e}},0),l.link(\"@babel/runtime/helpers/extends\",{default(e){n=e}},1),l.export({PrioritiesSelect:()=>P}),l.link(\"@rocket.chat/core-typings\",{LivechatPriorityWeight(e){i=e}},0),l.link(\"@rocket.chat/fuselage\",{Options(e){a=e},Box(e){o=e},Option(e){u=e},Field(e){c=e},FieldLabel(e){s=e},FieldRow(e){d=e},SelectLegacy(e){m=e}},1),l.link(\"react\",{default(e){p=e},useCallback(e){h=e},forwardRef(e){k=e},useMemo(e){f=e},useState(e){E=e}},2),l.link(\"react-i18next\",{useTranslation(e){b=e}},3),l.link(\"../../hooks/useHasLicenseModule\",{useHasLicenseModule(e){g=e}},4),l.link(\"../priorities/PriorityIcon\",{PriorityIcon(e){x=e}},5);let P=e=>{let{value:t=\"\",label:l,options:P,onChange:y}=e,{t:F}=b(),I=g(\"livechat-enterprise\"),[L]=E({}),S=f(()=>{let e=null==P?void 0:P.map(e=>{let{dirty:t,name:l,i18n:r,_id:n,sortItem:i}=e,a=t&&l?l:F(r);return L[n]=i,[n,a]});return[[\"\",F(\"Unprioritized\")],...e]},[P,L,F]),w=h((e,t)=>p.createElement(p.Fragment,null,p.createElement(x,{level:L[t]||i.NOT_SPECIFIED,showUnprioritized:!0}),\" \",e),[L]),O=k(function e(e,t){return p.createElement(a,n({ref:t},e,{maxHeight:200}))});return I?p.createElement(c,null,p.createElement(s,null,l),p.createElement(d,null,p.createElement(m,{value:t,onChange:y,options:S,renderOptions:O,renderSelected:e=>{let{label:t,value:l}=e;return p.createElement(o,{flexGrow:\"1\"},w(t,l))},renderItem:e=>{let{label:t,value:l}=e,i=r(e,v);return p.createElement(u,n({},i,{label:w(t,l)}))}}))):null};l.exportDefault(P)}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/additionalForms/PrioritiesSelect.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatPriority, Serialized } from '@rocket.chat/core-typings';\\nimport { LivechatPriorityWeight } from '@rocket.chat/core-typings';\\nimport type { SelectOption } from '@rocket.chat/fuselage';\\nimport { Options, Box, Option, Field, FieldLabel, FieldRow, SelectLegacy } from '@rocket.chat/fuselage';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport type { ComponentProps } from 'react';\\nimport React, { useCallback, forwardRef, useMemo, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useHasLicenseModule } from '../../hooks/useHasLicenseModule';\\nimport { PriorityIcon } from '../priorities/PriorityIcon';\\n\\ntype PrioritiesSelectProps = {\\n\\tvalue: string;\\n\\tlabel: string;\\n\\toptions: Serialized<ILivechatPriority[]>;\\n\\tonChange: (value: string) => void;\\n};\\n\\nexport const PrioritiesSelect = ({ value = '', label, options, onChange }: PrioritiesSelectProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\\n\\tconst [sorting] = useState<Record<string, LivechatPriorityWeight>>({});\\n\\n\\tconst formattedOptions = useMemo<SelectOption[]>(() => {\\n\\t\\tconst opts: SelectOption[] = options?.map(({ dirty, name, i18n, _id, sortItem }) => {\\n\\t\\t\\tconst label = dirty && name ? name : t(i18n as TranslationKey);\\n\\t\\t\\tsorting[_id] = sortItem;\\n\\t\\t\\treturn [_id, label];\\n\\t\\t});\\n\\t\\treturn [['', t('Unprioritized')], ...opts];\\n\\t}, [options, sorting, t]);\\n\\n\\tconst renderOption = useCallback(\\n\\t\\t(label: string, value: string) => {\\n\\t\\t\\treturn (\\n\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t<PriorityIcon level={sorting[value] || LivechatPriorityWeight.NOT_SPECIFIED} showUnprioritized /> {label}\\n\\t\\t\\t\\t</>\\n\\t\\t\\t);\\n\\t\\t},\\n\\t\\t[sorting],\\n\\t);\\n\\n\\t// eslint-disable-next-line react/no-multi-comp\\n\\tconst renderOptions = forwardRef<HTMLElement, ComponentProps<typeof Options>>(function OptionsWrapper(props, ref) {\\n\\t\\treturn <Options ref={ref} {...props} maxHeight={200} />;\\n\\t});\\n\\n\\tif (!hasLicense) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<Field>\\n\\t\\t\\t<FieldLabel>{label}</FieldLabel>\\n\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t<SelectLegacy\\n\\t\\t\\t\\t\\tvalue={value}\\n\\t\\t\\t\\t\\tonChange={onChange}\\n\\t\\t\\t\\t\\toptions={formattedOptions}\\n\\t\\t\\t\\t\\trenderOptions={renderOptions}\\n\\t\\t\\t\\t\\trenderSelected={({ label, value }) => <Box flexGrow='1'>{renderOption(label, value)}</Box>}\\n\\t\\t\\t\\t\\trenderItem={({ label, value, ...props }) => <Option {...props} label={renderOption(label, value)} />}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t</FieldRow>\\n\\t\\t</Field>\\n\\t);\\n};\\n\\nexport default PrioritiesSelect;\\n\",null],\"names\":[\"_objectWithoutProperties\",\"_extends\",\"LivechatPriorityWeight\",\"Options\",\"Box\",\"Option\",\"Field\",\"FieldLabel\",\"FieldRow\",\"SelectLegacy\",\"React\",\"useCallback\",\"forwardRef\",\"useMemo\",\"useState\",\"useTranslation\",\"useHasLicenseModule\",\"PriorityIcon\",\"module\",\"link\",\"default\",\"v\",\"export\",\"PrioritiesSelect\",\"_ref\",\"value\",\"label\",\"options\",\"onChange\",\"t\",\"hasLicense\",\"sorting\",\"formattedOptions\",\"opts\",\"map\",\"_ref2\",\"dirty\",\"name\",\"i18n\",\"_id\",\"sortItem\",\"renderOption\",\"createElement\",\"Fragment\",\"level\",\"NOT_SPECIFIED\",\"showUnprioritized\",\"renderOptions\",\"OptionsWrapper\",\"props\",\"ref\",\"maxHeight\",\"renderSelected\",\"_ref3\",\"flexGrow\",\"renderItem\",\"_ref4\",\"_excluded\",\"exportDefault\"],\"mappings\":\"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\"}"}