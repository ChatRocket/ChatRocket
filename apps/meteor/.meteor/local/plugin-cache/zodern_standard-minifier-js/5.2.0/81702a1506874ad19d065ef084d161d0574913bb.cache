{"code":"function module(e,t,o){let i,n,a,l,r,c;o.export({useShareLocationAction:()=>d}),o.link(\"@rocket.chat/core-typings\",{isRoomFederated(e){i=e}},0),o.link(\"@rocket.chat/ui-contexts\",{useSetting(e){n=e},useSetModal(e){a=e}},1),o.link(\"react\",{default(e){l=e}},2),o.link(\"react-i18next\",{useTranslation(e){r=e}},3),o.link(\"../../../../ShareLocation/ShareLocationModal\",{default(e){c=e}},4);let d=(e,t)=>{var o;if(!e)throw Error(\"Invalid room\");let{t:d}=r(),s=a(),u=!0===n(\"MapView_Enabled\"),h=!!(null===(o=navigator.geolocation)||void 0===o?void 0:o.getCurrentPosition),k=n(\"MapView_GMapsAPIKey\"),p=u&&h&&k&&k.length,g=e&&p&&!i(e);return{id:\"share-location\",content:d(\"Location\"),icon:\"map-pin\",onClick:()=>s(l.createElement(c,{rid:e._id,tmid:t,onClose:()=>s(null)})),disabled:!g}}}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/messageBox/MessageBoxActionsToolbar/hooks/useShareLocationAction.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage, IRoom } from '@rocket.chat/core-typings';\\nimport { isRoomFederated } from '@rocket.chat/core-typings';\\nimport type { GenericMenuItemProps } from '@rocket.chat/ui-client';\\nimport { useSetting, useSetModal } from '@rocket.chat/ui-contexts';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport ShareLocationModal from '../../../../ShareLocation/ShareLocationModal';\\n\\nexport const useShareLocationAction = (room?: IRoom, tmid?: IMessage['tmid']): GenericMenuItemProps => {\\n\\tif (!room) {\\n\\t\\tthrow new Error('Invalid room');\\n\\t}\\n\\n\\tconst { t } = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\n\\tconst isMapViewEnabled = useSetting('MapView_Enabled') === true;\\n\\tconst isGeolocationCurrentPositionSupported = Boolean(navigator.geolocation?.getCurrentPosition);\\n\\tconst googleMapsApiKey = useSetting('MapView_GMapsAPIKey') as string;\\n\\tconst canGetGeolocation = isMapViewEnabled && isGeolocationCurrentPositionSupported && googleMapsApiKey && googleMapsApiKey.length;\\n\\n\\tconst handleShareLocation = () => setModal(<ShareLocationModal rid={room._id} tmid={tmid} onClose={() => setModal(null)} />);\\n\\n\\tconst allowGeolocation = room && canGetGeolocation && !isRoomFederated(room);\\n\\n\\treturn {\\n\\t\\tid: 'share-location',\\n\\t\\tcontent: t('Location'),\\n\\t\\ticon: 'map-pin',\\n\\t\\tonClick: handleShareLocation,\\n\\t\\tdisabled: !allowGeolocation,\\n\\t};\\n};\\n\",null],\"names\":[\"isRoomFederated\",\"useSetting\",\"useSetModal\",\"React\",\"useTranslation\",\"ShareLocationModal\",\"module\",\"export\",\"useShareLocationAction\",\"link\",\"v\",\"default\",\"room\",\"tmid\",\"_navigator$geolocatio\",\"Error\",\"t\",\"setModal\",\"isMapViewEnabled\",\"isGeolocationCurrentPositionSupported\",\"Boolean\",\"navigator\",\"geolocation\",\"getCurrentPosition\",\"googleMapsApiKey\",\"canGetGeolocation\",\"length\",\"allowGeolocation\",\"id\",\"content\",\"icon\",\"onClick\",\"handleShareLocation\",\"createElement\",\"rid\",\"_id\",\"onClose\",\"disabled\"],\"mappings\":\"2BAC4DA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA5DC,EAAOC,MAAE,CAAA,CAAAC,uBAAuBA,IAAAA,CAA4B,GAAAF,EAAAG,IAAA,CAAA,4BAAA,CAAAT,gBAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,2BAAA,CAAAR,WAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,YAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,gBAAA,CAAAL,eAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,+CAAA,CAAAE,QAAAD,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAQrD,IAAMF,EAAyBA,CAACI,EAAcC,KAAiD,IAAAC,EACrG,GAAI,CAACF,EACJ,MAAM,AAAIG,MAAM,gBAGjB,GAAM,CAAEC,EAAAA,CAAAA,CAAG,CAAGZ,IACRa,EAAWf,IAEXgB,EAAmBjB,AAAkC,CAAA,IAAlCA,EAAW,mBAC9BkB,EAAwCC,CAAAA,CAAO,CAAA,AAAsB,OAAtBN,CAAAA,EAACO,UAAUC,WAAW,AAAXA,GAAWR,AAAA,KAAA,IAAAA,EAAA,KAAA,EAArBA,EAAuBS,kBAAkB,AAAlBA,EACvEC,EAAmBvB,EAAW,uBAC9BwB,EAAoBP,GAAoBC,GAAyCK,GAAoBA,EAAiBE,MAAM,CAI5HC,EAAmBf,GAAQa,GAAqB,CAACzB,EAAgBY,GAEvE,MAAO,CACNgB,GAAI,iBACJC,QAASb,EAAE,YACXc,KAAM,UACNC,QAR2BC,IAAMf,EAASd,EAAA8B,aAAA,CAAC5B,EAAkB,CAAC6B,IAAKtB,EAAKuB,GAAI,CAACtB,KAAMA,EAAMuB,QAASA,IAAMnB,EAAS,KAAM,IASvHoB,SAAU,CAACV,EAEb\"}"}