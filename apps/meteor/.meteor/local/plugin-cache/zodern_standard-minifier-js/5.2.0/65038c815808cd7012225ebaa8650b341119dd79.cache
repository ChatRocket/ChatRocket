{"code":"function module(e,l,t){let n,a,r,i,o,c,u,s,m,d,p,f,E,_,F,y,g,k,h,x;t.link(\"@babel/runtime/helpers/extends\",{default(e){n=e}},0),t.link(\"@rocket.chat/fuselage\",{Modal(e){a=e},Box(e){r=e},Field(e){i=e},FieldGroup(e){o=e},FieldLabel(e){c=e},FieldRow(e){u=e},FieldError(e){s=e},TextInput(e){m=e},Button(e){d=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useAutoFocus(e){p=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){f=e},useTranslation(e){E=e},useSetting(e){_=e}},2),t.link(\"filesize\",{default(e){F=e}},3),t.link(\"react\",{default(e){y=e},memo(e){g=e},useState(e){k=e},useEffect(e){h=e}},4),t.link(\"./FilePreview\",{default(e){x=e}},5),t.exportDefault(g(e=>{let{onClose:l,file:t,fileName:g,fileDescription:C,onSubmit:U,invalidContentType:b,showDescription:v=!0}=e,[T,z]=k(g),[w,D]=k(C||\"\"),S=E(),M=f(),R=_(\"FileUpload_MaxFileSize\"),q=p(),A=e=>(e.preventDefault(),T)?R>-1&&(t.size||0)>R?(l(),M({type:\"error\",message:S(\"File_exceeds_allowed_size_of_bytes\",{size:F(R)})})):void U(T,w):M({type:\"error\",message:S(\"Required_field\",{field:S(\"Upload_file_name\")})});return h(()=>{if(b){M({type:\"error\",message:S(\"FileUpload_MediaType_NotAccepted__type__\",{type:t.type})}),l();return}0===t.size&&(M({type:\"error\",message:S(\"FileUpload_File_Empty\")}),l())},[t,M,b,S,l]),y.createElement(a,{wrapperFunction:e=>y.createElement(r,n({is:\"form\",onSubmit:A},e))},y.createElement(r,{display:\"flex\",flexDirection:\"column\",height:\"100%\"},y.createElement(a.Header,null,y.createElement(a.Title,null,S(\"FileUpload\")),y.createElement(a.Close,{onClick:l})),y.createElement(a.Content,null,y.createElement(r,{display:\"flex\",maxHeight:\"x360\",w:\"full\",justifyContent:\"center\",alignContent:\"center\",mbe:16},y.createElement(x,{file:t})),y.createElement(o,null,y.createElement(i,null,y.createElement(c,null,S(\"Upload_file_name\")),y.createElement(u,null,y.createElement(m,{value:T,onChange:e=>{z(e.currentTarget.value)}})),!T&&y.createElement(s,null,S(\"Required_field\",{field:S(\"Upload_file_name\")}))),v&&y.createElement(i,null,y.createElement(c,null,S(\"Upload_file_description\")),y.createElement(u,null,y.createElement(m,{value:w,onChange:e=>{D(e.currentTarget.value)},placeholder:S(\"Description\"),ref:q}))))),y.createElement(a.Footer,null,y.createElement(a.FooterControllers,null,y.createElement(d,{secondary:!0,onClick:l},S(\"Cancel\")),y.createElement(d,{primary:!0,type:\"submit\"},S(\"Send\"))))))}))}","map":"{\"version\":3,\"sources\":[\"client/views/room/modals/FileUploadModal/FileUploadModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Modal, Box, Field, FieldGroup, FieldLabel, FieldRow, FieldError, TextInput, Button } from '@rocket.chat/fuselage';\\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useTranslation, useSetting } from '@rocket.chat/ui-contexts';\\nimport fileSize from 'filesize';\\nimport type { ReactElement, ChangeEvent, FormEventHandler, ComponentProps } from 'react';\\nimport React, { memo, useState, useEffect } from 'react';\\n\\nimport FilePreview from './FilePreview';\\n\\ntype FileUploadModalProps = {\\n\\tonClose: () => void;\\n\\tonSubmit: (name: string, description?: string) => void;\\n\\tfile: File;\\n\\tfileName: string;\\n\\tfileDescription?: string;\\n\\tinvalidContentType: boolean;\\n\\tshowDescription?: boolean;\\n};\\n\\nconst FileUploadModal = ({\\n\\tonClose,\\n\\tfile,\\n\\tfileName,\\n\\tfileDescription,\\n\\tonSubmit,\\n\\tinvalidContentType,\\n\\tshowDescription = true,\\n}: FileUploadModalProps): ReactElement => {\\n\\tconst [name, setName] = useState<string>(fileName);\\n\\tconst [description, setDescription] = useState<string>(fileDescription || '');\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst maxFileSize = useSetting('FileUpload_MaxFileSize') as number;\\n\\n\\tconst ref = useAutoFocus<HTMLInputElement>();\\n\\n\\tconst handleName = (e: ChangeEvent<HTMLInputElement>): void => {\\n\\t\\tsetName(e.currentTarget.value);\\n\\t};\\n\\n\\tconst handleDescription = (e: ChangeEvent<HTMLInputElement>): void => {\\n\\t\\tsetDescription(e.currentTarget.value);\\n\\t};\\n\\n\\tconst handleSubmit: FormEventHandler<HTMLFormElement> = (e): void => {\\n\\t\\te.preventDefault();\\n\\t\\tif (!name) {\\n\\t\\t\\treturn dispatchToastMessage({\\n\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\tmessage: t('Required_field', { field: t('Upload_file_name') }),\\n\\t\\t\\t});\\n\\t\\t}\\n\\n\\t\\t// -1 maxFileSize means there is no limit\\n\\t\\tif (maxFileSize > -1 && (file.size || 0) > maxFileSize) {\\n\\t\\t\\tonClose();\\n\\t\\t\\treturn dispatchToastMessage({\\n\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\tmessage: t('File_exceeds_allowed_size_of_bytes', { size: fileSize(maxFileSize) }),\\n\\t\\t\\t});\\n\\t\\t}\\n\\n\\t\\tonSubmit(name, description);\\n\\t};\\n\\n\\tuseEffect(() => {\\n\\t\\tif (invalidContentType) {\\n\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\tmessage: t('FileUpload_MediaType_NotAccepted__type__', { type: file.type }),\\n\\t\\t\\t});\\n\\t\\t\\tonClose();\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (file.size === 0) {\\n\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\ttype: 'error',\\n\\t\\t\\t\\tmessage: t('FileUpload_File_Empty'),\\n\\t\\t\\t});\\n\\t\\t\\tonClose();\\n\\t\\t}\\n\\t}, [file, dispatchToastMessage, invalidContentType, t, onClose]);\\n\\n\\treturn (\\n\\t\\t<Modal wrapperFunction={(props: ComponentProps<typeof Box>) => <Box is='form' onSubmit={handleSubmit} {...props} />}>\\n\\t\\t\\t<Box display='flex' flexDirection='column' height='100%'>\\n\\t\\t\\t\\t<Modal.Header>\\n\\t\\t\\t\\t\\t<Modal.Title>{t('FileUpload')}</Modal.Title>\\n\\t\\t\\t\\t\\t<Modal.Close onClick={onClose} />\\n\\t\\t\\t\\t</Modal.Header>\\n\\t\\t\\t\\t<Modal.Content>\\n\\t\\t\\t\\t\\t<Box display='flex' maxHeight='x360' w='full' justifyContent='center' alignContent='center' mbe={16}>\\n\\t\\t\\t\\t\\t\\t<FilePreview file={file} />\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t<FieldGroup>\\n\\t\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t\\t<FieldLabel>{t('Upload_file_name')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t<TextInput value={name} onChange={handleName} />\\n\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t{!name && <FieldError>{t('Required_field', { field: t('Upload_file_name') })}</FieldError>}\\n\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t{showDescription && (\\n\\t\\t\\t\\t\\t\\t\\t<Field>\\n\\t\\t\\t\\t\\t\\t\\t\\t<FieldLabel>{t('Upload_file_description')}</FieldLabel>\\n\\t\\t\\t\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<TextInput value={description} onChange={handleDescription} placeholder={t('Description')} ref={ref} />\\n\\t\\t\\t\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t\\t\\t</Field>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</FieldGroup>\\n\\t\\t\\t\\t</Modal.Content>\\n\\t\\t\\t\\t<Modal.Footer>\\n\\t\\t\\t\\t\\t<Modal.FooterControllers>\\n\\t\\t\\t\\t\\t\\t<Button secondary onClick={onClose}>\\n\\t\\t\\t\\t\\t\\t\\t{t('Cancel')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t\\t<Button primary type='submit'>\\n\\t\\t\\t\\t\\t\\t\\t{t('Send')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t</Modal.FooterControllers>\\n\\t\\t\\t\\t</Modal.Footer>\\n\\t\\t\\t</Box>\\n\\t\\t</Modal>\\n\\t);\\n};\\n\\nexport default memo(FileUploadModal);\\n\",null],\"names\":[\"_extends\",\"Modal\",\"Box\",\"Field\",\"FieldGroup\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"TextInput\",\"Button\",\"useAutoFocus\",\"useToastMessageDispatch\",\"useTranslation\",\"useSetting\",\"fileSize\",\"React\",\"memo\",\"useState\",\"useEffect\",\"FilePreview\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"onClose\",\"file\",\"fileName\",\"fileDescription\",\"onSubmit\",\"invalidContentType\",\"showDescription\",\"name\",\"setName\",\"description\",\"setDescription\",\"t\",\"dispatchToastMessage\",\"maxFileSize\",\"ref\",\"handleSubmit\",\"e\",\"preventDefault\",\"size\",\"type\",\"message\",\"field\",\"createElement\",\"wrapperFunction\",\"props\",\"is\",\"display\",\"flexDirection\",\"height\",\"Header\",\"Title\",\"Close\",\"onClick\",\"Content\",\"maxHeight\",\"w\",\"justifyContent\",\"alignContent\",\"mbe\",\"value\",\"onChange\",\"currentTarget\",\"placeholder\",\"Footer\",\"FooterControllers\",\"secondary\",\"primary\"],\"mappings\":\"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\"}"}