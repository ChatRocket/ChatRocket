{"code":"function module(e,t,l){let i,s,o,n,r,a,u;l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){i=e}},0),l.export({useMonitorsList:()=>c}),l.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){s=e}},0),l.link(\"react\",{useCallback(e){o=e},useState(e){n=e}},1),l.link(\"../../hooks/lists/useScrollableRecordList\",{useScrollableRecordList(e){r=e}},2),l.link(\"../../hooks/useComponentDidUpdate\",{useComponentDidUpdate(e){a=e}},3),l.link(\"../../lib/lists/RecordList\",{RecordList(e){u=e}},4);let c=e=>{let[t,l]=n(()=>new u),c=o(()=>l(new u),[]),d=s(\"GET\",\"/v1/livechat/monitors\");a(()=>{e&&c()},[e,c]);let k=o(async(t,l)=>{let{monitors:s,total:o}=await d({text:e.filter,offset:t,count:l+t,sort:JSON.stringify({username:1})});return{items:s.map(e=>i(i({},e),{},{label:e.username,value:e._id})),itemCount:o}},[d,e.filter]),{loadMoreItems:m,initialItemCount:p}=r(t,k,25);return{reload:c,itemsList:t,loadMoreItems:m,initialItemCount:p}}}","map":"{\"version\":3,\"sources\":[\"client/views/hooks/useMonitorsList.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatMonitorRecord } from '@rocket.chat/core-typings';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useState } from 'react';\\n\\nimport { useScrollableRecordList } from '../../hooks/lists/useScrollableRecordList';\\nimport { useComponentDidUpdate } from '../../hooks/useComponentDidUpdate';\\nimport { RecordList } from '../../lib/lists/RecordList';\\n\\ntype MonitorsListOptions = {\\n\\tfilter: string;\\n};\\n\\nexport const useMonitorsList = (\\n\\toptions: MonitorsListOptions,\\n): {\\n\\titemsList: RecordList<ILivechatMonitorRecord>;\\n\\tinitialItemCount: number;\\n\\treload: () => void;\\n\\tloadMoreItems: (start: number, end: number) => void;\\n} => {\\n\\tconst [itemsList, setItemsList] = useState(() => new RecordList<ILivechatMonitorRecord>());\\n\\tconst reload = useCallback(() => setItemsList(new RecordList<ILivechatMonitorRecord>()), []);\\n\\n\\tconst getMonitors = useEndpoint('GET', '/v1/livechat/monitors');\\n\\n\\tuseComponentDidUpdate(() => {\\n\\t\\toptions && reload();\\n\\t}, [options, reload]);\\n\\n\\tconst fetchData = useCallback(\\n\\t\\tasync (start, end) => {\\n\\t\\t\\tconst { monitors, total } = await getMonitors({\\n\\t\\t\\t\\ttext: options.filter,\\n\\t\\t\\t\\toffset: start,\\n\\t\\t\\t\\tcount: end + start,\\n\\t\\t\\t\\tsort: JSON.stringify({ username: 1 }),\\n\\t\\t\\t});\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\titems: monitors.map((members: any) => ({\\n\\t\\t\\t\\t\\t...members,\\n\\t\\t\\t\\t\\tlabel: members.username,\\n\\t\\t\\t\\t\\tvalue: members._id,\\n\\t\\t\\t\\t})),\\n\\t\\t\\t\\titemCount: total,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t[getMonitors, options.filter],\\n\\t);\\n\\n\\tconst { loadMoreItems, initialItemCount } = useScrollableRecordList(itemsList, fetchData, 25);\\n\\treturn {\\n\\t\\treload,\\n\\t\\titemsList,\\n\\t\\tloadMoreItems,\\n\\t\\tinitialItemCount,\\n\\t};\\n};\\n\",null],\"names\":[\"_objectSpread\",\"useEndpoint\",\"useCallback\",\"useState\",\"useScrollableRecordList\",\"useComponentDidUpdate\",\"RecordList\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useMonitorsList\",\"options\",\"itemsList\",\"setItemsList\",\"reload\",\"getMonitors\",\"fetchData\",\"start\",\"end\",\"monitors\",\"total\",\"text\",\"filter\",\"offset\",\"count\",\"sort\",\"JSON\",\"stringify\",\"username\",\"items\",\"map\",\"members\",\"label\",\"value\",\"_id\",\"itemCount\",\"loadMoreItems\",\"initialItemCount\"],\"mappings\":\"2BACAA,EAAuDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9CC,EAAaC,IAAM,CAAA,uCAA2B,CAAAC,QAAAC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAvDH,EAAOI,MAAE,CAAA,CAAAC,gBAAmBA,IAAAA,CAAA,GAA2BL,EAAAC,IAAA,CAAA,2BAAA,CAAAP,YAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAN,YAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,4CAAA,CAAAJ,wBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,oCAAA,CAAAH,sBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAAF,WAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAWhD,IAAME,EACZC,IAOA,GAAM,CAACC,EAAWC,EAAa,CAAGZ,EAAS,IAAM,IAAIG,GAC/CU,EAASd,EAAY,IAAMa,EAAa,IAAIT,GAAuC,EAAE,EAErFW,EAAchB,EAAY,MAAO,yBAEvCI,EAAsB,KACrBQ,GAAWG,GACZ,EAAG,CAACH,EAASG,EAAO,EAEpB,IAAME,EAAYhB,EACjB,MAAOiB,EAAOC,KACb,GAAM,CAAEC,SAAAA,CAAQ,CAAEC,MAAAA,CAAAA,CAAO,CAAG,MAAML,EAAY,CAC7CM,KAAMV,EAAQW,MAAM,CACpBC,OAAQN,EACRO,MAAON,EAAMD,EACbQ,KAAMC,KAAKC,SAAS,CAAC,CAAEC,SAAU,CAAC,KAGnC,MAAO,CACNC,MAAOV,EAASW,GAAG,CAAEC,GAAYjC,EAAAA,EAAA,CAAA,EAC7BiC,GAAO,CAAA,EAAA,CACVC,MAAOD,EAAQH,QAAQ,CACvBK,MAAOF,EAAQG,GAAAA,AAAG,IAEnBC,UAAWf,EAEb,EACA,CAACL,EAAaJ,EAAQW,MAAM,CAAC,EAGxB,CAAEc,cAAAA,CAAa,CAAEC,iBAAAA,CAAAA,CAAkB,CAAGnC,EAAwBU,EAAWI,EAAW,IAC1F,MAAO,CACNF,OAAAA,EACAF,UAAAA,EACAwB,cAAAA,EACAC,iBAAAA,EAEF\"}"}