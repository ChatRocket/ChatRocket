{"code":"function module(e,n,o){let t,i,s,r,u,l;o.link(\"meteor/meteor\",{Meteor(e){t=e}},0),o.link(\"meteor/session\",{Session(e){i=e}},1),o.link(\"meteor/tracker\",{Tracker(e){s=e}},2),o.link(\"../../../app/custom-sounds/client/lib/CustomSounds\",{CustomSounds(e){r=e}},3),o.link(\"../../../app/models/client\",{Users(e){u=e}},4),o.link(\"../../../app/utils/client\",{getUserPreference(e){l=e}},5),t.startup(()=>{s.autorun(()=>{let e=t.userId();if(!e)return;let n=u.findOne(e,{fields:{\"settings.preferences.newRoomNotification\":1,\"settings.preferences.notificationsSoundVolume\":1}}),o=l(n,\"newRoomNotification\"),s=l(n,\"notificationsSoundVolume\",100);o&&((i.get(\"newRoomSound\")||[]).length>0?setTimeout(()=>{\"none\"!==o&&r.play(o,{volume:Number((s/100).toPrecision(2))})},0):r.pause(o))})})}","map":"{\"version\":3,\"sources\":[\"client/startup/notifications/notification.ts\",\"<anon>\"],\"sourcesContent\":[\"import { Meteor } from 'meteor/meteor';\\nimport { Session } from 'meteor/session';\\nimport { Tracker } from 'meteor/tracker';\\n\\nimport { CustomSounds } from '../../../app/custom-sounds/client/lib/CustomSounds';\\nimport { Users } from '../../../app/models/client';\\nimport { getUserPreference } from '../../../app/utils/client';\\n\\nMeteor.startup(() => {\\n\\tTracker.autorun(() => {\\n\\t\\tconst uid = Meteor.userId();\\n\\n\\t\\tif (!uid) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst user = Users.findOne(uid, {\\n\\t\\t\\tfields: {\\n\\t\\t\\t\\t'settings.preferences.newRoomNotification': 1,\\n\\t\\t\\t\\t'settings.preferences.notificationsSoundVolume': 1,\\n\\t\\t\\t},\\n\\t\\t});\\n\\t\\tconst newRoomNotification = getUserPreference<string>(user, 'newRoomNotification');\\n\\t\\tconst audioVolume = getUserPreference(user, 'notificationsSoundVolume', 100);\\n\\n\\t\\tif (!newRoomNotification) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif ((Session.get('newRoomSound') || []).length > 0) {\\n\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\tif (newRoomNotification !== 'none') {\\n\\t\\t\\t\\t\\tCustomSounds.play(newRoomNotification, {\\n\\t\\t\\t\\t\\t\\tvolume: Number((audioVolume / 100).toPrecision(2)),\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t}\\n\\t\\t\\t}, 0);\\n\\t\\t} else {\\n\\t\\t\\tCustomSounds.pause(newRoomNotification);\\n\\t\\t}\\n\\t});\\n});\\n\",null],\"names\":[\"Meteor\",\"Session\",\"Tracker\",\"CustomSounds\",\"Users\",\"getUserPreference\",\"module\",\"link\",\"v\",\"startup\",\"autorun\",\"uid\",\"userId\",\"user\",\"findOne\",\"fields\",\"newRoomNotification\",\"audioVolume\",\"get\",\"length\",\"setTimeout\",\"play\",\"volume\",\"Number\",\"toPrecision\",\"pause\"],\"mappings\":\"2BAAAA,EAAuCC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9BC,EAAQC,IAAA,CAAM,gBAAgB,CAAAP,OAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iBAAA,CAAAN,QAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iBAAA,CAAAL,QAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,qDAAA,CAAAJ,aAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,6BAAA,CAAAH,MAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,4BAAA,CAAAF,kBAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAQvCR,EAAOS,OAAO,CAAC,KACdP,EAAQQ,OAAO,CAAC,KACf,IAAMC,EAAMX,EAAOY,MAAM,GAEzB,GAAI,CAACD,EACJ,OAGD,IAAME,EAAOT,EAAMU,OAAO,CAACH,EAAK,CAC/BI,OAAQ,CACP,2CAA4C,EAC5C,gDAAiD,KAG7CC,EAAsBX,EAA0BQ,EAAM,uBACtDI,EAAcZ,EAAkBQ,EAAM,2BAA4B,KAEnEG,IAID,AAACf,CAAAA,EAAQiB,GAAG,CAAC,iBAAmB,EAAE,AAAF,EAAIC,MAAM,CAAG,EAChDC,WAAW,KACkB,SAAxBJ,GACHb,EAAakB,IAAI,CAACL,EAAqB,CACtCM,OAAQC,OAAO,AAACN,CAAAA,EAAc,GAAA,EAAKO,WAAW,CAAC,KAGlD,EAAG,GAEHrB,EAAasB,KAAK,CAACT,GAErB,EACD\"}"}