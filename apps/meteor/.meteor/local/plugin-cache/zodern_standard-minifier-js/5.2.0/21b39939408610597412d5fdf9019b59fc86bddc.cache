{"code":"function module(e,n,t){var a,o,l,i,u,r,c,s,m,f,v,d,p,k,h,b,g,y=[\"value\",\"onChange\"],E=[\"selected\",\"onRemove\"],S=[\"value\",\"label\"];t.link(\"@babel/runtime/helpers/extends\",{default:function(e){a=e}},0),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){o=e}},1),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){l=e}},2),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){i=e}},3),t.link(\"@rocket.chat/fuselage\",{AutoComplete:function(e){u=e},Option:function(e){r=e},Chip:function(e){c=e},Box:function(e){s=e},Skeleton:function(e){m=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue:function(e){f=e}},1),t.link(\"@rocket.chat/ui-avatar\",{RoomAvatar:function(e){v=e}},2),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){d=e}},3),t.link(\"@tanstack/react-query\",{useQuery:function(e){p=e}},4),t.link(\"react\",{default:function(e){k=e},memo:function(e){h=e},useMemo:function(e){b=e},useState:function(e){g=e}},5);var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\";return{selector:JSON.stringify({name:e})}};t.exportDefault(h(function(e){var n,t=e.value,h=e.onChange,C=i(e,y),A=g(\"\"),P=l(A,2),T=P[0],D=P[1],R=f(T,300),_=d(\"GET\",\"/v1/rooms.autocomplete.channelAndPrivate\"),j=p([\"rooms.autocomplete.channelAndPrivate\",R],function(){return _(x(R))},{keepPreviousData:!0}),z=b(function(){return j.isSuccess?j.data.items.map(function(e){var n=e.fname,t=e.name;return{value:e._id,label:{name:n||t,avatarETag:e.avatarETag,type:e.t}}}):[]},[null===(n=j.data)||void 0===n?void 0:n.items,j.isSuccess]);return j.isLoading?k.createElement(m,null):k.createElement(u,a({},C,{value:t,onChange:h,filter:T,setFilter:D,multiple:!0,renderSelected:function(e){var n=e.selected,t=n.value,l=n.label,u=e.onRemove,r=i(e,E);return k.createElement(c,a({},r,{key:t,value:t,onClick:u}),k.createElement(v,{size:\"x20\",room:o({type:(null==l?void 0:l.type)||\"c\",_id:t},l)}),k.createElement(s,{is:\"span\",margin:\"none\",mis:4},null==l?void 0:l.name))},renderItem:function(e){var n=e.value,t=e.label,l=i(e,S);return k.createElement(r,a({key:n},l,{label:t.name,avatar:k.createElement(v,{size:\"x20\",room:o({type:(null==t?void 0:t.type)||\"c\",_id:n},t)})}))},options:z}))}))}","map":"{\"version\":3,\"sources\":[\"client/components/RoomAutoCompleteMultiple/RoomAutoCompleteMultiple.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { AutoComplete, Option, Chip, Box, Skeleton } from '@rocket.chat/fuselage';\\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\\nimport { RoomAvatar } from '@rocket.chat/ui-avatar';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ReactElement, ComponentProps } from 'react';\\nimport React, { memo, useMemo, useState } from 'react';\\n\\nconst generateQuery = (\\n\\tterm = '',\\n): {\\n\\tselector: string;\\n} => ({ selector: JSON.stringify({ name: term }) });\\n\\ntype RoomAutoCompleteProps = Omit<ComponentProps<typeof AutoComplete>, 'filter'> & {\\n\\treadOnly?: boolean;\\n};\\n\\nconst RoomAutoCompleteMultiple = ({ value, onChange, ...props }: RoomAutoCompleteProps): ReactElement => {\\n\\tconst [filter, setFilter] = useState('');\\n\\tconst filterDebounced = useDebouncedValue(filter, 300);\\n\\tconst autocomplete = useEndpoint('GET', '/v1/rooms.autocomplete.channelAndPrivate');\\n\\n\\tconst result = useQuery(['rooms.autocomplete.channelAndPrivate', filterDebounced], () => autocomplete(generateQuery(filterDebounced)), {\\n\\t\\tkeepPreviousData: true,\\n\\t});\\n\\n\\tconst options = useMemo(\\n\\t\\t() =>\\n\\t\\t\\tresult.isSuccess\\n\\t\\t\\t\\t? result.data.items.map(({ fname, name, _id, avatarETag, t }) => ({\\n\\t\\t\\t\\t\\t\\tvalue: _id,\\n\\t\\t\\t\\t\\t\\tlabel: { name: fname || name, avatarETag, type: t },\\n\\t\\t\\t\\t  }))\\n\\t\\t\\t\\t: [],\\n\\t\\t[result.data?.items, result.isSuccess],\\n\\t);\\n\\n\\tif (result.isLoading) {\\n\\t\\treturn <Skeleton />;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<AutoComplete\\n\\t\\t\\t{...props}\\n\\t\\t\\tvalue={value}\\n\\t\\t\\tonChange={onChange}\\n\\t\\t\\tfilter={filter}\\n\\t\\t\\tsetFilter={setFilter}\\n\\t\\t\\tmultiple\\n\\t\\t\\trenderSelected={({ selected: { value, label }, onRemove, ...props }): ReactElement => (\\n\\t\\t\\t\\t<Chip {...props} key={value} value={value} onClick={onRemove}>\\n\\t\\t\\t\\t\\t<RoomAvatar size='x20' room={{ type: label?.type || 'c', _id: value, ...label }} />\\n\\t\\t\\t\\t\\t<Box is='span' margin='none' mis={4}>\\n\\t\\t\\t\\t\\t\\t{label?.name}\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t</Chip>\\n\\t\\t\\t)}\\n\\t\\t\\trenderItem={({ value, label, ...props }): ReactElement => (\\n\\t\\t\\t\\t<Option\\n\\t\\t\\t\\t\\tkey={value}\\n\\t\\t\\t\\t\\t{...props}\\n\\t\\t\\t\\t\\tlabel={label.name}\\n\\t\\t\\t\\t\\tavatar={<RoomAvatar size='x20' room={{ type: label?.type || 'c', _id: value, ...label }} />}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t)}\\n\\t\\t\\toptions={options}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default memo(RoomAutoCompleteMultiple);\\n\",null],\"names\":[\"_extends\",\"_objectSpread\",\"_slicedToArray\",\"_objectWithoutProperties\",\"AutoComplete\",\"Option\",\"Chip\",\"Box\",\"Skeleton\",\"useDebouncedValue\",\"RoomAvatar\",\"useEndpoint\",\"useQuery\",\"React\",\"memo\",\"useMemo\",\"useState\",\"module\",\"link\",\"default\",\"v\",\"generateQuery\",\"term\",\"arguments\",\"length\",\"undefined\",\"selector\",\"JSON\",\"stringify\",\"name\",\"exportDefault\",\"_ref\",\"_result$data\",\"value\",\"onChange\",\"props\",\"_excluded\",\"_useState\",\"_useState2\",\"filter\",\"setFilter\",\"filterDebounced\",\"autocomplete\",\"result\",\"keepPreviousData\",\"options\",\"isSuccess\",\"data\",\"items\",\"map\",\"_ref2\",\"fname\",\"_id\",\"label\",\"avatarETag\",\"type\",\"t\",\"isLoading\",\"createElement\",\"multiple\",\"renderSelected\",\"_ref3\",\"_ref3$selected\",\"selected\",\"onRemove\",\"_excluded2\",\"key\",\"onClick\",\"size\",\"room\",\"is\",\"margin\",\"mis\",\"renderItem\",\"_ref4\",\"_excluded3\",\"avatar\"],\"mappings\":\"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\"}"}