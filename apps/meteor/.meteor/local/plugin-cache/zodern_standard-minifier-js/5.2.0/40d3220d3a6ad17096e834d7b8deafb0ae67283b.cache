{"code":"function module(n,e,t){var r,o,u,i,a,l,c,d,s,f;t.link(\"@babel/runtime/regenerator\",{default:function(n){r=n}},0),t.link(\"@rocket.chat/core-typings\",{TEAM_TYPE:function(n){o=n}},0),t.link(\"@rocket.chat/ui-contexts\",{useUserId:function(n){u=n},useEndpoint:function(n){i=n}},1),t.link(\"@tanstack/react-query\",{useQuery:function(n){a=n}},2),t.link(\"react\",{default:function(n){l=n}},3),t.link(\"../../../components/Header\",{HeaderTag:function(n){c=n},HeaderTagIcon:function(n){d=n},HeaderTagSkeleton:function(n){s=n}},4),t.link(\"../../../lib/utils/goToRoomById\",{goToRoomById:function(n){f=n}},5),t.exportDefault(function(n){var e,t=n.room.teamId,m=u();if(!t)throw Error(\"invalid rid\");if(!m)throw Error(\"invalid uid\");var v=i(\"GET\",\"/v1/teams.info\"),I=i(\"GET\",\"/v1/users.listTeams\"),k=a([\"teamId\",t],function(){return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt(\"return\",v({teamId:t}));case 1:case\"end\":return n.stop()}},null,null,null,Promise)},{keepPreviousData:!0,retry:function(n,e){return(null==e?void 0:e.error)===\"unauthorized\"&&!1}}),p=k.data,E=k.isLoading,y=k.isError,T=a([\"userId\",m],function(){return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt(\"return\",I({userId:m}));case 1:case\"end\":return n.stop()}},null,null,null,Promise)}),g=T.data,b=T.isLoading,h=(null==g?void 0:null===(e=g.teams)||void 0===e?void 0:e.find(function(n){return n._id===t}))||!1,w=(null==p?void 0:p.teamInfo.type)===o.PUBLIC,x=function(){var n=null==p?void 0:p.teamInfo.roomId;n&&(w||h)&&f(n)};return E||b?l.createElement(s,null):y?null:l.createElement(c,{role:\"button\",tabIndex:0,onKeyDown:function(n){return(\"Space\"===n.code||\"Enter\"===n.code)&&x()},onClick:x},l.createElement(d,{icon:{name:w?\"team\":\"team-lock\"}}),null==p?void 0:p.teamInfo.name)})}","map":"{\"version\":3,\"sources\":[\"client/views/room/Header/ParentTeam.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { TEAM_TYPE } from '@rocket.chat/core-typings';\\nimport { useUserId, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React from 'react';\\n\\nimport { HeaderTag, HeaderTagIcon, HeaderTagSkeleton } from '../../../components/Header';\\nimport { goToRoomById } from '../../../lib/utils/goToRoomById';\\n\\ntype APIErrorResult = { success: boolean; error: string };\\n\\nconst ParentTeam = ({ room }: { room: IRoom }): ReactElement | null => {\\n\\tconst { teamId } = room;\\n\\tconst userId = useUserId();\\n\\n\\tif (!teamId) {\\n\\t\\tthrow new Error('invalid rid');\\n\\t}\\n\\n\\tif (!userId) {\\n\\t\\tthrow new Error('invalid uid');\\n\\t}\\n\\n\\tconst teamsInfoEndpoint = useEndpoint('GET', '/v1/teams.info');\\n\\tconst userTeamsListEndpoint = useEndpoint('GET', '/v1/users.listTeams');\\n\\n\\tconst {\\n\\t\\tdata: teamInfoData,\\n\\t\\tisLoading: teamInfoLoading,\\n\\t\\tisError: teamInfoError,\\n\\t} = useQuery(['teamId', teamId], async () => teamsInfoEndpoint({ teamId }), {\\n\\t\\tkeepPreviousData: true,\\n\\t\\tretry: (_, error) => (error as APIErrorResult)?.error === 'unauthorized' && false,\\n\\t});\\n\\n\\tconst { data: userTeams, isLoading: userTeamsLoading } = useQuery(['userId', userId], async () => userTeamsListEndpoint({ userId }));\\n\\n\\tconst userBelongsToTeam = userTeams?.teams?.find((team) => team._id === teamId) || false;\\n\\tconst isTeamPublic = teamInfoData?.teamInfo.type === TEAM_TYPE.PUBLIC;\\n\\n\\tconst redirectToMainRoom = (): void => {\\n\\t\\tconst rid = teamInfoData?.teamInfo.roomId;\\n\\t\\tif (!rid) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (!(isTeamPublic || userBelongsToTeam)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tgoToRoomById(rid);\\n\\t};\\n\\n\\tif (teamInfoLoading || userTeamsLoading) {\\n\\t\\treturn <HeaderTagSkeleton />;\\n\\t}\\n\\n\\tif (teamInfoError) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<HeaderTag\\n\\t\\t\\trole='button'\\n\\t\\t\\ttabIndex={0}\\n\\t\\t\\tonKeyDown={(e) => (e.code === 'Space' || e.code === 'Enter') && redirectToMainRoom()}\\n\\t\\t\\tonClick={redirectToMainRoom}\\n\\t\\t>\\n\\t\\t\\t<HeaderTagIcon icon={{ name: isTeamPublic ? 'team' : 'team-lock' }} />\\n\\t\\t\\t{teamInfoData?.teamInfo.name}\\n\\t\\t</HeaderTag>\\n\\t);\\n};\\n\\nexport default ParentTeam;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"TEAM_TYPE\",\"useUserId\",\"useEndpoint\",\"useQuery\",\"React\",\"HeaderTag\",\"HeaderTagIcon\",\"HeaderTagSkeleton\",\"goToRoomById\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_userTeams$teams\",\"teamId\",\"room\",\"userId\",\"Error\",\"teamsInfoEndpoint\",\"userTeamsListEndpoint\",\"_useQuery\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"stop\",\"Promise\",\"keepPreviousData\",\"retry\",\"_\",\"error\",\"teamInfoData\",\"data\",\"teamInfoLoading\",\"isLoading\",\"teamInfoError\",\"isError\",\"_useQuery2\",\"_context2\",\"userTeams\",\"userTeamsLoading\",\"userBelongsToTeam\",\"teams\",\"find\",\"team\",\"_id\",\"isTeamPublic\",\"teamInfo\",\"type\",\"PUBLIC\",\"redirectToMainRoom\",\"rid\",\"roomId\",\"createElement\",\"role\",\"tabIndex\",\"onKeyDown\",\"e\",\"code\",\"onClick\",\"icon\",\"name\"],\"mappings\":\"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\"}"}