{"code":"function module(e,i,n){n.link(\"@babel/runtime/regenerator\",{default:function(e){t=e}},0),n.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){a=e}},1),n.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){o=e}},2),n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){r=e}},3),n.link(\"@rocket.chat/core-typings\",{LivechatInquiryStatus:function(e){u=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useSafely:function(e){l=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useUser:function(e){c=e},useSetting:function(e){s=e},usePermission:function(e){f=e},useMethod:function(e){v=e},useEndpoint:function(e){h=e},useStream:function(e){d=e}},2),n.link(\"@tanstack/react-query\",{useQuery:function(e){m=e},useQueryClient:function(e){p=e}},3),n.link(\"react\",{default:function(e){b=e},useState:function(e){g=e},useEffect:function(e){k=e},useMemo:function(e){_=e},useCallback:function(e){L=e},memo:function(e){y=e},useRef:function(e){C=e}},4),n.link(\"../../app/livechat/client/collections/LivechatInquiry\",{LivechatInquiry:function(e){S=e}},5),n.link(\"../../app/livechat/client/lib/stream/queueManager\",{initializeLivechatInquiryStream:function(e){A=e}},6),n.link(\"../../app/livechat/lib/inquiries\",{getOmniChatSortQuery:function(e){q=e}},7),n.link(\"../../app/ui/client/lib/KonchatNotification\",{KonchatNotification:function(e){w=e}},8),n.link(\"../../lib/ClientLogger\",{ClientLogger:function(e){E=e}},9),n.link(\"../contexts/OmnichannelContext\",{OmnichannelContext:function(e){O=e}},10),n.link(\"../hooks/useHasLicenseModule\",{useHasLicenseModule:function(e){x=e}},11),n.link(\"../hooks/useReactiveValue\",{useReactiveValue:function(e){M=e}},12),n.link(\"../hooks/useShouldPreventAction\",{useShouldPreventAction:function(e){P=e}},13);var t,a,o,r,u,l,c,s,f,v,h,d,m,p,b,g,k,_,L,y,C,S,A,q,w,E,O,x,M,P,Q={inquiries:{enabled:!1},enabled:!1,isEnterprise:!1,agentAvailable:!1,showOmnichannelQueueLink:!1,isOverMacLimit:!1,livechatPriorities:{enabled:!1,data:[],isLoading:!1,isError:!1}};n.exportDefault(y(function(e){var i,n=e.children,y=s(\"Livechat_enabled\"),R=s(\"Livechat_Routing_Method\"),I=s(\"Livechat_show_queue_list_link\"),T=null!==(i=s(\"Livechat_guest_pool_max_number_incoming_livechats_displayed\"))&&void 0!==i?i:0,D=s(\"Omnichannel_sorting_mechanism\"),N=C(new E(\"OmnichannelProvider\")),U=f(\"view-l-room\"),H=f(\"view-livechat-queue\"),K=c(),V=(null==K?void 0:K.statusLivechat)===\"available\",j=v(\"livechat:getRoutingConfig\"),z=l(g(void 0)),G=r(z,2),J=G[0],W=G[1],B=g(new Set),F=r(B,2),X=F[0],Y=F[1],Z=U&&y,$=s(\"WebRTC_Servers\"),ee=!0===x(\"livechat-enterprise\"),ei=h(\"GET\",\"/v1/livechat/priorities\"),en=d(\"notify-logged\"),et=p(),ea=ee&&Z,eo=Z&&!!K&&!!J,er=m([\"/v1/livechat/priorities\"],function(){return ei({sort:JSON.stringify({sortItem:1})})},{staleTime:1/0,enabled:ea}),eu=er.data,el=(eu=void 0===eu?{}:eu).priorities,ec=void 0===el?[]:el,es=er.isInitialLoading,ef=er.isError,ev=P(\"monthlyActiveContacts\");k(function(){if(ea)return en(\"omnichannel.priority-changed\",function(){et.invalidateQueries([\"/v1/livechat/priorities\"])})},[ea,et,en]),k(function(){Z&&(!R&&R||t.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.awrap(j());case 3:W(e.sent),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N.current.error(\"update() error in routeConfig \"+e.t0);case 10:case\"end\":return e.stop()}},null,null,[[0,7]],Promise))},[Z,j,$,R,W,!0]);var eh=eo&&H&&!!J&&J.showQueue&&!J.autoAssignAgent&&V,ed=d(\"notify-user\");k(function(){if(eh&&(A(null==K?void 0:K._id),null!=K&&K._id))return ed(K._id+\"/departmentAgentData\",function(){A(null==K?void 0:K._id)})},[eh,ed,null==K?void 0:K._id]);var em=M(L(function(){if(eh)return S.find({status:u.QUEUED},{sort:q(D),limit:T}).fetch()},[eh,T,D]));null==em||em.map(function(e){var i=e.rid;if(!X.has(i))return Y(function(e){return new Set([].concat(o(e),[i]))}),w.newRoom(i)});var ep=_(function(){if(!eo)return Q;var e={enabled:ea,data:ec,isLoading:es,isError:ef};return eh?a(a({},Q),{},{enabled:!0,isEnterprise:ee,agentAvailable:V,voipCallAvailable:!0,routeConfig:J,inquiries:em?{enabled:!0,queue:em}:{enabled:!1},showOmnichannelQueueLink:I&&!!V,livechatPriorities:e,isOverMacLimit:ev}):a(a({},Q),{},{enabled:!0,isEnterprise:ee,agentAvailable:V,voipCallAvailable:!0,routeConfig:J,livechatPriorities:e,isOverMacLimit:ev})},[eo,ea,ec,es,ef,eh,ee,V,!0,J,em,I,ev]);return b.createElement(O.Provider,{children:n,value:ep})}))}","map":"{\"version\":3,\"sources\":[\"client/providers/OmnichannelProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import {\\n\\ttype IOmnichannelAgent,\\n\\ttype OmichannelRoutingConfig,\\n\\ttype OmnichannelSortingMechanismSettingType,\\n\\ttype ILivechatInquiryRecord,\\n\\tLivechatInquiryStatus,\\n} from '@rocket.chat/core-typings';\\nimport { useSafely } from '@rocket.chat/fuselage-hooks';\\nimport { useUser, useSetting, usePermission, useMethod, useEndpoint, useStream } from '@rocket.chat/ui-contexts';\\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\\nimport type { ReactNode } from 'react';\\nimport React, { useState, useEffect, useMemo, useCallback, memo, useRef } from 'react';\\n\\nimport { LivechatInquiry } from '../../app/livechat/client/collections/LivechatInquiry';\\nimport { initializeLivechatInquiryStream } from '../../app/livechat/client/lib/stream/queueManager';\\nimport { getOmniChatSortQuery } from '../../app/livechat/lib/inquiries';\\nimport { KonchatNotification } from '../../app/ui/client/lib/KonchatNotification';\\nimport { ClientLogger } from '../../lib/ClientLogger';\\nimport type { OmnichannelContextValue } from '../contexts/OmnichannelContext';\\nimport { OmnichannelContext } from '../contexts/OmnichannelContext';\\nimport { useHasLicenseModule } from '../hooks/useHasLicenseModule';\\nimport { useReactiveValue } from '../hooks/useReactiveValue';\\nimport { useShouldPreventAction } from '../hooks/useShouldPreventAction';\\n\\nconst emptyContextValue: OmnichannelContextValue = {\\n\\tinquiries: { enabled: false },\\n\\tenabled: false,\\n\\tisEnterprise: false,\\n\\tagentAvailable: false,\\n\\tshowOmnichannelQueueLink: false,\\n\\tisOverMacLimit: false,\\n\\tlivechatPriorities: {\\n\\t\\tenabled: false,\\n\\t\\tdata: [],\\n\\t\\tisLoading: false,\\n\\t\\tisError: false,\\n\\t},\\n};\\n\\ntype OmnichannelProviderProps = {\\n\\tchildren?: ReactNode;\\n};\\n\\nconst OmnichannelProvider = ({ children }: OmnichannelProviderProps) => {\\n\\tconst omniChannelEnabled = useSetting('Livechat_enabled') as boolean;\\n\\tconst omnichannelRouting = useSetting('Livechat_Routing_Method');\\n\\tconst showOmnichannelQueueLink = useSetting('Livechat_show_queue_list_link') as boolean;\\n\\tconst omnichannelPoolMaxIncoming = useSetting<number>('Livechat_guest_pool_max_number_incoming_livechats_displayed') ?? 0;\\n\\tconst omnichannelSortingMechanism = useSetting('Omnichannel_sorting_mechanism') as OmnichannelSortingMechanismSettingType;\\n\\n\\tconst loggerRef = useRef(new ClientLogger('OmnichannelProvider'));\\n\\tconst hasAccess = usePermission('view-l-room');\\n\\tconst canViewOmnichannelQueue = usePermission('view-livechat-queue');\\n\\tconst user = useUser() as IOmnichannelAgent;\\n\\n\\tconst agentAvailable = user?.statusLivechat === 'available';\\n\\tconst voipCallAvailable = true; // TODO: use backend check;\\n\\n\\tconst getRoutingConfig = useMethod('livechat:getRoutingConfig');\\n\\n\\tconst [routeConfig, setRouteConfig] = useSafely(useState<OmichannelRoutingConfig | undefined>(undefined));\\n\\tconst [queueNotification, setQueueNotification] = useState(new Set());\\n\\n\\tconst accessible = hasAccess && omniChannelEnabled;\\n\\tconst iceServersSetting: any = useSetting('WebRTC_Servers');\\n\\tconst isEnterprise = useHasLicenseModule('livechat-enterprise') === true;\\n\\n\\tconst getPriorities = useEndpoint('GET', '/v1/livechat/priorities');\\n\\tconst subscribe = useStream('notify-logged');\\n\\tconst queryClient = useQueryClient();\\n\\tconst isPrioritiesEnabled = isEnterprise && accessible;\\n\\tconst enabled = accessible && !!user && !!routeConfig;\\n\\n\\tconst {\\n\\t\\tdata: { priorities = [] } = {},\\n\\t\\tisInitialLoading: isLoadingPriorities,\\n\\t\\tisError: isErrorPriorities,\\n\\t} = useQuery(['/v1/livechat/priorities'], () => getPriorities({ sort: JSON.stringify({ sortItem: 1 }) }), {\\n\\t\\tstaleTime: Infinity,\\n\\t\\tenabled: isPrioritiesEnabled,\\n\\t});\\n\\n\\tconst isOverMacLimit = useShouldPreventAction('monthlyActiveContacts');\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!isPrioritiesEnabled) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\treturn subscribe('omnichannel.priority-changed', () => {\\n\\t\\t\\tqueryClient.invalidateQueries(['/v1/livechat/priorities']);\\n\\t\\t});\\n\\t}, [isPrioritiesEnabled, queryClient, subscribe]);\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!accessible) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst update = async (): Promise<void> => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst routeConfig = await getRoutingConfig();\\n\\t\\t\\t\\tsetRouteConfig(routeConfig);\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tloggerRef.current.error(`update() error in routeConfig ${error}`);\\n\\t\\t\\t}\\n\\t\\t};\\n\\n\\t\\tif (omnichannelRouting || !omnichannelRouting) {\\n\\t\\t\\tupdate();\\n\\t\\t}\\n\\t}, [accessible, getRoutingConfig, iceServersSetting, omnichannelRouting, setRouteConfig, voipCallAvailable]);\\n\\n\\tconst manuallySelected =\\n\\t\\tenabled && canViewOmnichannelQueue && !!routeConfig && routeConfig.showQueue && !routeConfig.autoAssignAgent && agentAvailable;\\n\\n\\tconst streamNotifyUser = useStream('notify-user');\\n\\tuseEffect(() => {\\n\\t\\tif (!manuallySelected) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst handleDepartmentAgentData = (): void => {\\n\\t\\t\\tinitializeLivechatInquiryStream(user?._id);\\n\\t\\t};\\n\\n\\t\\tinitializeLivechatInquiryStream(user?._id);\\n\\t\\tif (!user?._id) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\treturn streamNotifyUser(`${user._id}/departmentAgentData`, handleDepartmentAgentData);\\n\\t}, [manuallySelected, streamNotifyUser, user?._id]);\\n\\n\\tconst queue = useReactiveValue<ILivechatInquiryRecord[] | undefined>(\\n\\t\\tuseCallback(() => {\\n\\t\\t\\tif (!manuallySelected) {\\n\\t\\t\\t\\treturn undefined;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn LivechatInquiry.find(\\n\\t\\t\\t\\t{ status: LivechatInquiryStatus.QUEUED },\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\tsort: getOmniChatSortQuery(omnichannelSortingMechanism),\\n\\t\\t\\t\\t\\tlimit: omnichannelPoolMaxIncoming,\\n\\t\\t\\t\\t},\\n\\t\\t\\t).fetch();\\n\\t\\t}, [manuallySelected, omnichannelPoolMaxIncoming, omnichannelSortingMechanism]),\\n\\t);\\n\\n\\tqueue?.map(({ rid }) => {\\n\\t\\tif (queueNotification.has(rid)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tsetQueueNotification((prev) => new Set([...prev, rid]));\\n\\t\\treturn KonchatNotification.newRoom(rid);\\n\\t});\\n\\n\\tconst contextValue = useMemo<OmnichannelContextValue>(() => {\\n\\t\\tif (!enabled) {\\n\\t\\t\\treturn emptyContextValue;\\n\\t\\t}\\n\\n\\t\\tconst livechatPriorities = {\\n\\t\\t\\tenabled: isPrioritiesEnabled,\\n\\t\\t\\tdata: priorities,\\n\\t\\t\\tisLoading: isLoadingPriorities,\\n\\t\\t\\tisError: isErrorPriorities,\\n\\t\\t};\\n\\n\\t\\tif (!manuallySelected) {\\n\\t\\t\\treturn {\\n\\t\\t\\t\\t...emptyContextValue,\\n\\t\\t\\t\\tenabled: true,\\n\\t\\t\\t\\tisEnterprise,\\n\\t\\t\\t\\tagentAvailable,\\n\\t\\t\\t\\tvoipCallAvailable,\\n\\t\\t\\t\\trouteConfig,\\n\\t\\t\\t\\tlivechatPriorities,\\n\\t\\t\\t\\tisOverMacLimit,\\n\\t\\t\\t};\\n\\t\\t}\\n\\n\\t\\treturn {\\n\\t\\t\\t...emptyContextValue,\\n\\t\\t\\tenabled: true,\\n\\t\\t\\tisEnterprise,\\n\\t\\t\\tagentAvailable,\\n\\t\\t\\tvoipCallAvailable,\\n\\t\\t\\trouteConfig,\\n\\t\\t\\tinquiries: queue\\n\\t\\t\\t\\t? {\\n\\t\\t\\t\\t\\t\\tenabled: true,\\n\\t\\t\\t\\t\\t\\tqueue,\\n\\t\\t\\t\\t  }\\n\\t\\t\\t\\t: { enabled: false },\\n\\t\\t\\tshowOmnichannelQueueLink: showOmnichannelQueueLink && !!agentAvailable,\\n\\t\\t\\tlivechatPriorities,\\n\\t\\t\\tisOverMacLimit,\\n\\t\\t};\\n\\t}, [\\n\\t\\tenabled,\\n\\t\\tisPrioritiesEnabled,\\n\\t\\tpriorities,\\n\\t\\tisLoadingPriorities,\\n\\t\\tisErrorPriorities,\\n\\t\\tmanuallySelected,\\n\\t\\tisEnterprise,\\n\\t\\tagentAvailable,\\n\\t\\tvoipCallAvailable,\\n\\t\\trouteConfig,\\n\\t\\tqueue,\\n\\t\\tshowOmnichannelQueueLink,\\n\\t\\tisOverMacLimit,\\n\\t]);\\n\\n\\treturn <OmnichannelContext.Provider children={children} value={contextValue} />;\\n};\\n\\nexport default memo<typeof OmnichannelProvider>(OmnichannelProvider);\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_objectSpread\",\"_toConsumableArray\",\"_slicedToArray\",\"LivechatInquiryStatus\",\"useSafely\",\"useUser\",\"useSetting\",\"usePermission\",\"useMethod\",\"useEndpoint\",\"useStream\",\"useQuery\",\"useQueryClient\",\"React\",\"useState\",\"useEffect\",\"useMemo\",\"useCallback\",\"memo\",\"useRef\",\"LivechatInquiry\",\"initializeLivechatInquiryStream\",\"getOmniChatSortQuery\",\"KonchatNotification\",\"ClientLogger\",\"OmnichannelContext\",\"useHasLicenseModule\",\"useReactiveValue\",\"useShouldPreventAction\",\"emptyContextValue\",\"inquiries\",\"enabled\",\"isEnterprise\",\"agentAvailable\",\"showOmnichannelQueueLink\",\"isOverMacLimit\",\"livechatPriorities\",\"data\",\"isLoading\",\"isError\",\"exportDefault\",\"_ref\",\"_useSetting\",\"children\",\"omniChannelEnabled\",\"omnichannelRouting\",\"omnichannelPoolMaxIncoming\",\"omnichannelSortingMechanism\",\"loggerRef\",\"hasAccess\",\"canViewOmnichannelQueue\",\"user\",\"statusLivechat\",\"getRoutingConfig\",\"_useSafely\",\"undefined\",\"_useSafely2\",\"routeConfig\",\"setRouteConfig\",\"_useState\",\"Set\",\"_useState2\",\"queueNotification\",\"setQueueNotification\",\"accessible\",\"iceServersSetting\",\"getPriorities\",\"subscribe\",\"queryClient\",\"isPrioritiesEnabled\",\"_useQuery\",\"sort\",\"JSON\",\"stringify\",\"sortItem\",\"staleTime\",\"Infinity\",\"_useQuery$data\",\"_useQuery$data$priori\",\"priorities\",\"isLoadingPriorities\",\"isInitialLoading\",\"isErrorPriorities\",\"invalidateQueries\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"sent\",\"t0\",\"current\",\"error\",\"stop\",\"Promise\",\"manuallySelected\",\"showQueue\",\"autoAssignAgent\",\"streamNotifyUser\",\"_id\",\"queue\",\"find\",\"status\",\"QUEUED\",\"limit\",\"fetch\",\"map\",\"_ref2\",\"rid\",\"has\",\"concat\",\"newRoom\",\"contextValue\",\"voipCallAvailable\",\"createElement\",\"Provider\",\"value\"],\"mappings\":\"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\"}"}