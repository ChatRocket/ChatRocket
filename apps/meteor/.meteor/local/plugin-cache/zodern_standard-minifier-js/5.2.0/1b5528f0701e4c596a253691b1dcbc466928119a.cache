{"code":"function module(e,t,a){let l,n,r,u;function i(e){return[\"private\",\"explore\",\"installed\",\"premium\",\"requested\"].includes(e)}a.export({isMarketplaceRouteContext:()=>i,useAppsCountQuery:()=>p,useInvalidateAppsCountQueryCallback:()=>s}),a.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){l=e}},0),a.link(\"@tanstack/react-query\",{useQueryClient(e){n=e},useQuery(e){r=e}},1),a.link(\"react\",{useCallback(e){u=e}},2);let p=e=>{let t=l(\"GET\",\"/apps/count\");return r([\"apps/count\",e],async()=>{let a=await t(),l=\"private\"===e?a.totalPrivateEnabled:a.totalMarketplaceEnabled,n=\"private\"===e?a.maxPrivateApps:a.maxMarketplaceApps;return{hasUnlimitedApps:-1===n,enabled:l,limit:n}},{staleTime:1e4})},s=()=>{let e=n();return u(()=>{e.invalidateQueries([\"apps/count\"])},[e])}}","map":"{\"version\":3,\"sources\":[\"client/views/marketplace/hooks/useAppsCountQuery.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQueryClient, useQuery } from '@tanstack/react-query';\\nimport { useCallback } from 'react';\\n\\nexport type MarketplaceRouteContext = 'private' | 'explore' | 'installed' | 'premium' | 'requested' | 'details';\\n\\nexport function isMarketplaceRouteContext(context: string): context is MarketplaceRouteContext {\\n\\treturn ['private', 'explore', 'installed', 'premium', 'requested'].includes(context);\\n}\\n\\nexport const useAppsCountQuery = (context: MarketplaceRouteContext) => {\\n\\tconst getAppsCount = useEndpoint('GET', '/apps/count');\\n\\n\\treturn useQuery(\\n\\t\\t['apps/count', context],\\n\\t\\tasync () => {\\n\\t\\t\\tconst data = await getAppsCount();\\n\\n\\t\\t\\tconst numberOfEnabledApps = context === 'private' ? data.totalPrivateEnabled : data.totalMarketplaceEnabled;\\n\\t\\t\\tconst enabledAppsLimit = context === 'private' ? data.maxPrivateApps : data.maxMarketplaceApps;\\n\\t\\t\\tconst hasUnlimitedApps = enabledAppsLimit === -1;\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\thasUnlimitedApps,\\n\\t\\t\\t\\tenabled: numberOfEnabledApps,\\n\\t\\t\\t\\tlimit: enabledAppsLimit,\\n\\t\\t\\t\\t// tooltip,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t{ staleTime: 10_000 },\\n\\t);\\n};\\n\\nexport const useInvalidateAppsCountQueryCallback = () => {\\n\\tconst queryClient = useQueryClient();\\n\\treturn useCallback(() => {\\n\\t\\tqueryClient.invalidateQueries(['apps/count']);\\n\\t}, [queryClient]);\\n};\\n\",null],\"names\":[\"useEndpoint\",\"useQueryClient\",\"useQuery\",\"useCallback\",\"isMarketplaceRouteContext\",\"context\",\"includes\",\"module\",\"export\",\"useAppsCountQuery\",\"useInvalidateAppsCountQueryCallback\",\"link\",\"v\",\"getAppsCount\",\"data\",\"numberOfEnabledApps\",\"totalPrivateEnabled\",\"totalMarketplaceEnabled\",\"enabledAppsLimit\",\"maxPrivateApps\",\"maxMarketplaceApps\",\"hasUnlimitedApps\",\"enabled\",\"limit\",\"staleTime\",\"queryClient\",\"invalidateQueries\"],\"mappings\":\"2BAAuDA,EAAAC,EAAAC,EAAAC,EAMjD,SAAUC,EAA0BC,CAAe,EACxD,MAAO,CAAC,UAAW,UAAW,YAAa,UAAW,YAAY,CAACC,QAAQ,CAACD,EAC7E,CARAE,EAAOC,MAAE,CAAA,CAAAJ,0BAAmBA,IAAAA,EAA2BK,kBAAAA,IAAAA,EAAAC,oCAAAA,IAAAA,CAAA,GAAAH,EAAAI,IAAA,CAAA,2BAAA,CAAAX,YAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAL,EAAAI,IAAA,CAAA,wBAAA,CAAAV,eAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,SAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAL,EAAAI,IAAA,CAAA,QAAA,CAAAR,YAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAUhD,IAAMH,EAAqBJ,IACjC,IAAMQ,EAAeb,EAAY,MAAO,eAExC,OAAOE,EACN,CAAC,aAAcG,EAAQ,CACvB,UACC,IAAMS,EAAO,MAAMD,IAEbE,EAAsBV,AAAY,YAAZA,EAAwBS,EAAKE,mBAAmB,CAAGF,EAAKG,uBAAuB,CACrGC,EAAmBb,AAAY,YAAZA,EAAwBS,EAAKK,cAAc,CAAGL,EAAKM,kBAAkB,CAG9F,MAAO,CACNC,iBAHwBH,AAAqB,KAArBA,EAIxBI,QAASP,EACTQ,MAAOL,EAGT,EACA,CAAEM,UAAW,GAAM,EAErB,EAEad,EAAsCA,KAClD,IAAMe,EAAcxB,IACpB,OAAOE,EAAY,KAClBsB,EAAYC,iBAAiB,CAAC,CAAC,aAAa,CAC7C,EAAG,CAACD,EAAY,CACjB\"}"}