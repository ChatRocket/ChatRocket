{"code":"function module(e,t,n){var r,a,o,i,s,c,u,l,p,m,d,f,g,k,v,E,_,y,h,x,b,S;n.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),n.link(\"@rocket.chat/fuselage\",{Box:function(e){a=e},Margins:function(e){o=e},ProgressBar:function(e){i=e},Throbber:function(e){s=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){c=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){u=e},useEndpoint:function(e){l=e},useStream:function(e){p=e},useRouter:function(e){m=e}},2),n.link(\"@tanstack/react-query\",{useQuery:function(e){d=e},useMutation:function(e){f=e},useQueryClient:function(e){g=e}},3),n.link(\"react\",{default:function(e){k=e},useEffect:function(e){v=e}},4),n.link(\"react-i18next\",{useTranslation:function(e){E=e}},5),n.link(\"../../../../app/importer/lib/ImporterProgressStep\",{ImportingStartedStates:function(e){_=e}},6),n.link(\"../../../../lib/utils/stringUtils\",{numberFormat:function(e){y=e}},7),n.link(\"../../../components/Page\",{Page:function(e){h=e},PageHeader:function(e){x=e},PageScrollableContentWithShadow:function(e){b=e}},8),n.link(\"./useErrorHandler\",{useErrorHandler:function(e){S=e}},9),n.exportDefault(function(){var e=g(),t=p(\"importers\"),n=E(),I=n.t,P=n.i18n,w=u(),C=S(),T=m(),D=l(\"GET\",\"/v1/getCurrentImportOperation\"),L=l(\"GET\",\"/v1/getImportProgress\"),F=f({mutationFn:function(t){return r.async(function(n){for(;;)switch(n.prev=n.next){case 0:e.setQueryData([\"importers\",\"progress\"],t);case 1:case\"end\":return n.stop()}},null,null,null,Promise)}}),M=d([\"ImportProgressPage\",\"currentOperation\"],function(){var e;return r.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.awrap(D());case 2:return e=t.sent.operation,t.abrupt(\"return\",e);case 5:case\"end\":return t.stop()}},null,null,null,Promise)},{refetchInterval:1e3,onSuccess:function(e){var t=e.valid,n=e.status;if(!t){T.navigate(\"/admin/import\");return}if(\"importer_done\"===n){w({type:\"success\",message:I(\"Importer_done\")}),T.navigate(\"/admin/import\");return}_.includes(n)||T.navigate(\"/admin/import/prepare\")},onError:function(e){C(e,I(\"Failed_To_Load_Import_Data\")),T.navigate(\"/admin/import\")}}),j=c(function(e){var t=e.key,n=e.step,r=e.completed,a=e.total;if(M.isSuccess&&t.toLowerCase()===M.data.importerKey.toLowerCase()){var o=n[0].toUpperCase()+n.slice(1);switch(n){case\"importer_done\":P.exists(o)&&w({type:\"success\",message:I(o)}),T.navigate(\"/admin/import\");return;case\"importer_import_failed\":case\"importer_import_cancelled\":P.exists(o)&&C(o),T.navigate(\"/admin/import\");return;default:F.mutate({step:n,completed:r,total:a})}}}),B=d([\"importers\",\"progress\"],function(){var e,t,n,a,o,i,s,c;return r.async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,r.awrap(L());case 2:return t=(e=u.sent).key,n=e.step,i=void 0===(o=(a=void 0===(a=e.count)?{}:a).completed)?0:o,c=void 0===(s=a.total)?0:s,u.abrupt(\"return\",{key:t,step:n,completed:i,total:c});case 9:case\"end\":return u.stop()}},null,null,null,Promise)},{enabled:!!M.isSuccess,onSuccess:function(e){if(!e){w({type:\"warning\",message:I(\"Importer_not_in_progress\")}),T.navigate(\"/admin/import/prepare\");return}_.includes(e.step)||j({key:e.key,step:e.step,total:e.total,completed:e.completed})},onError:function(e){C(e,I(\"Failed_To_Load_Import_Data\")),T.navigate(\"/admin/import\")}});return v(function(){return t(\"progress\",function(e){\"rate\"in e||j({key:e.key,step:e.step,completed:e.count.completed,total:e.count.total})})},[j,t]),k.createElement(h,null,k.createElement(x,{title:I(\"Importing_Data\")}),k.createElement(b,null,k.createElement(a,{marginInline:\"auto\",marginBlock:\"neg-x24\",width:\"full\",maxWidth:\"x580\"},k.createElement(o,{block:24},M.isLoading&&k.createElement(s,{justifyContent:\"center\"}),\"idle\"!==B.fetchStatus&&B.isLoading&&k.createElement(s,{justifyContent:\"center\"}),(M.isError||B.isError)&&k.createElement(a,{is:\"p\"},I(\"Failed_To_Load_Import_Data\")),B.isSuccess&&k.createElement(k.Fragment,null,k.createElement(a,{is:\"p\",fontScale:\"p2\"},I(B.data.step[0].toUpperCase()+B.data.step.slice(1))),k.createElement(a,{display:\"flex\",justifyContent:\"center\"},k.createElement(i,{percentage:B.data.completed/B.data.total*100}),k.createElement(a,{is:\"span\",fontScale:\"p2\",mis:24},y(B.data.completed/B.data.total*100,0),\"%\")))))))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/import/ImportProgressPage.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ProgressStep } from '@rocket.chat/core-typings';\\nimport { Box, Margins, ProgressBar, Throbber } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useEndpoint, useStream, useRouter } from '@rocket.chat/ui-contexts';\\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\\nimport React, { useEffect } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { ImportingStartedStates } from '../../../../app/importer/lib/ImporterProgressStep';\\nimport { numberFormat } from '../../../../lib/utils/stringUtils';\\nimport { Page, PageHeader, PageScrollableContentWithShadow } from '../../../components/Page';\\nimport { useErrorHandler } from './useErrorHandler';\\n\\n// TODO: review inner logic\\nconst ImportProgressPage = function ImportProgressPage() {\\n\\tconst queryClient = useQueryClient();\\n\\tconst streamer = useStream('importers');\\n\\tconst { t, i18n } = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst handleError = useErrorHandler();\\n\\n\\tconst router = useRouter();\\n\\n\\tconst getCurrentImportOperation = useEndpoint('GET', '/v1/getCurrentImportOperation');\\n\\tconst getImportProgress = useEndpoint('GET', '/v1/getImportProgress');\\n\\n\\tconst mutation = useMutation({\\n\\t\\tmutationFn: async (props: { step: ProgressStep; completed: number; total: number }) => {\\n\\t\\t\\tqueryClient.setQueryData<{\\n\\t\\t\\t\\tstep: ProgressStep;\\n\\t\\t\\t\\tcompleted: number;\\n\\t\\t\\t\\ttotal: number;\\n\\t\\t\\t}>(['importers', 'progress'], props);\\n\\t\\t},\\n\\t});\\n\\n\\tconst currentOperation = useQuery(\\n\\t\\t['ImportProgressPage', 'currentOperation'],\\n\\t\\tasync () => {\\n\\t\\t\\tconst { operation } = await getCurrentImportOperation();\\n\\t\\t\\treturn operation;\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\trefetchInterval: 1000,\\n\\t\\t\\tonSuccess: ({ valid, status }) => {\\n\\t\\t\\t\\tif (!valid) {\\n\\t\\t\\t\\t\\trouter.navigate('/admin/import');\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (status === 'importer_done') {\\n\\t\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Importer_done') });\\n\\t\\t\\t\\t\\trouter.navigate('/admin/import');\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (!(ImportingStartedStates as string[]).includes(status)) {\\n\\t\\t\\t\\t\\trouter.navigate('/admin/import/prepare');\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\tonError: (error) => {\\n\\t\\t\\t\\thandleError(error, t('Failed_To_Load_Import_Data'));\\n\\t\\t\\t\\trouter.navigate('/admin/import');\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n\\n\\tconst handleProgressUpdated = useMutableCallback(\\n\\t\\t({ key, step, completed, total }: { key: string; step: ProgressStep; completed: number; total: number }) => {\\n\\t\\t\\tif (!currentOperation.isSuccess) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\tif (key.toLowerCase() !== currentOperation.data.importerKey.toLowerCase()) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst message = step[0].toUpperCase() + step.slice(1);\\n\\n\\t\\t\\tswitch (step) {\\n\\t\\t\\t\\tcase 'importer_done':\\n\\t\\t\\t\\t\\ti18n.exists(message) &&\\n\\t\\t\\t\\t\\t\\tdispatchToastMessage({\\n\\t\\t\\t\\t\\t\\t\\ttype: 'success',\\n\\t\\t\\t\\t\\t\\t\\tmessage: t(message),\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\trouter.navigate('/admin/import');\\n\\t\\t\\t\\t\\treturn;\\n\\n\\t\\t\\t\\tcase 'importer_import_failed':\\n\\t\\t\\t\\tcase 'importer_import_cancelled':\\n\\t\\t\\t\\t\\ti18n.exists(message) && handleError(message);\\n\\t\\t\\t\\t\\trouter.navigate('/admin/import');\\n\\t\\t\\t\\t\\treturn;\\n\\n\\t\\t\\t\\tdefault:\\n\\t\\t\\t\\t\\tmutation.mutate({ step, completed, total });\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t},\\n\\t);\\n\\n\\tconst progress = useQuery(\\n\\t\\t['importers', 'progress'],\\n\\t\\tasync () => {\\n\\t\\t\\tconst { key, step, count: { completed = 0, total = 0 } = {} } = await getImportProgress();\\n\\t\\t\\treturn {\\n\\t\\t\\t\\tkey,\\n\\t\\t\\t\\tstep,\\n\\t\\t\\t\\tcompleted,\\n\\t\\t\\t\\ttotal,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tenabled: !!currentOperation.isSuccess,\\n\\t\\t\\tonSuccess: (progress) => {\\n\\t\\t\\t\\tif (!progress) {\\n\\t\\t\\t\\t\\tdispatchToastMessage({ type: 'warning', message: t('Importer_not_in_progress') });\\n\\t\\t\\t\\t\\trouter.navigate('/admin/import/prepare');\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t// do not use the endpoint data to update the completed progress, leave it to the streamer\\n\\t\\t\\t\\tif (!(ImportingStartedStates as string[]).includes(progress.step)) {\\n\\t\\t\\t\\t\\thandleProgressUpdated({\\n\\t\\t\\t\\t\\t\\tkey: progress.key,\\n\\t\\t\\t\\t\\t\\tstep: progress.step,\\n\\t\\t\\t\\t\\t\\ttotal: progress.total,\\n\\t\\t\\t\\t\\t\\tcompleted: progress.completed,\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\tonError: (error) => {\\n\\t\\t\\t\\thandleError(error, t('Failed_To_Load_Import_Data'));\\n\\t\\t\\t\\trouter.navigate('/admin/import');\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n\\n\\tuseEffect(() => {\\n\\t\\treturn streamer('progress', (progress) => {\\n\\t\\t\\t// There shouldn't be any progress update sending only the rate at this point of the process\\n\\t\\t\\tif (!('rate' in progress)) {\\n\\t\\t\\t\\thandleProgressUpdated({\\n\\t\\t\\t\\t\\tkey: progress.key,\\n\\t\\t\\t\\t\\tstep: progress.step,\\n\\t\\t\\t\\t\\tcompleted: progress.count.completed,\\n\\t\\t\\t\\t\\ttotal: progress.count.total,\\n\\t\\t\\t\\t});\\n\\t\\t\\t}\\n\\t\\t});\\n\\t}, [handleProgressUpdated, streamer]);\\n\\n\\treturn (\\n\\t\\t<Page>\\n\\t\\t\\t<PageHeader title={t('Importing_Data')} />\\n\\t\\t\\t<PageScrollableContentWithShadow>\\n\\t\\t\\t\\t<Box marginInline='auto' marginBlock='neg-x24' width='full' maxWidth='x580'>\\n\\t\\t\\t\\t\\t<Margins block={24}>\\n\\t\\t\\t\\t\\t\\t{currentOperation.isLoading && <Throbber justifyContent='center' />}\\n\\t\\t\\t\\t\\t\\t{progress.fetchStatus !== 'idle' && progress.isLoading && <Throbber justifyContent='center' />}\\n\\n\\t\\t\\t\\t\\t\\t{(currentOperation.isError || progress.isError) && <Box is='p'>{t('Failed_To_Load_Import_Data')}</Box>}\\n\\t\\t\\t\\t\\t\\t{progress.isSuccess && (\\n\\t\\t\\t\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t\\t\\t\\t<Box is='p' fontScale='p2'>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{t((progress.data.step[0].toUpperCase() + progress.data.step.slice(1)) as any)}\\n\\t\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t\\t\\t<Box display='flex' justifyContent='center'>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ProgressBar percentage={(progress.data.completed / progress.data.total) * 100} />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Box is='span' fontScale='p2' mis={24}>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{numberFormat((progress.data.completed / progress.data.total) * 100, 0)}%\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t\\t</>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t</Margins>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</PageScrollableContentWithShadow>\\n\\t\\t</Page>\\n\\t);\\n};\\n\\nexport default ImportProgressPage;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"Box\",\"Margins\",\"ProgressBar\",\"Throbber\",\"useMutableCallback\",\"useToastMessageDispatch\",\"useEndpoint\",\"useStream\",\"useRouter\",\"useQuery\",\"useMutation\",\"useQueryClient\",\"React\",\"useEffect\",\"useTranslation\",\"ImportingStartedStates\",\"numberFormat\",\"Page\",\"PageHeader\",\"PageScrollableContentWithShadow\",\"useErrorHandler\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"queryClient\",\"streamer\",\"_useTranslation\",\"t\",\"i18n\",\"dispatchToastMessage\",\"handleError\",\"router\",\"getCurrentImportOperation\",\"getImportProgress\",\"mutation\",\"mutationFn\",\"props\",\"async\",\"_context\",\"prev\",\"next\",\"setQueryData\",\"stop\",\"Promise\",\"currentOperation\",\"operation\",\"_context2\",\"awrap\",\"_await$getCurrentImpo\",\"sent\",\"abrupt\",\"refetchInterval\",\"onSuccess\",\"_ref\",\"valid\",\"status\",\"navigate\",\"type\",\"message\",\"includes\",\"onError\",\"error\",\"handleProgressUpdated\",\"_ref2\",\"key\",\"step\",\"completed\",\"total\",\"isSuccess\",\"toLowerCase\",\"data\",\"importerKey\",\"toUpperCase\",\"slice\",\"exists\",\"mutate\",\"progress\",\"_await$getImportProgr\",\"_await$getImportProgr2\",\"_await$getImportProgr3\",\"_await$getImportProgr4\",\"_context3\",\"count\",\"enabled\",\"createElement\",\"title\",\"marginInline\",\"marginBlock\",\"width\",\"maxWidth\",\"block\",\"isLoading\",\"justifyContent\",\"fetchStatus\",\"isError\",\"is\",\"Fragment\",\"fontScale\",\"display\",\"percentage\",\"mis\"],\"mappings\":\"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\"}"}