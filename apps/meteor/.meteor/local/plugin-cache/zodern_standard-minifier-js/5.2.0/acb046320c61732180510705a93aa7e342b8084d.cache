{"code":"function module(e,n,t){var i,o,u,a,l,c,r,s,d,f,k,m,b,h,A,p,E,g,U,S,v,y=[\"label\"];t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){i=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){o=e}},1),t.link(\"@babel/runtime/helpers/extends\",{default:function(e){u=e}},2),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){a=e}},3),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){l=e}},4),t.link(\"@rocket.chat/fuselage\",{ButtonGroup:function(e){c=e},Menu:function(e){r=e},Option:function(e){s=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useRoute:function(e){d=e},usePermission:function(e){f=e}},1),t.link(\"react\",{default:function(e){k=e},useCallback:function(e){m=e},useMemo:function(e){b=e}},2),t.link(\"react-i18next\",{useTranslation:function(e){h=e}},3),t.link(\"../../../components/UserInfo\",{UserInfoAction:function(e){A=e}},4),t.link(\"../../hooks/useActionSpread\",{useActionSpread:function(e){p=e}},5),t.link(\"./hooks/useChangeAdminStatusAction\",{useChangeAdminStatusAction:function(e){E=e}},6),t.link(\"./hooks/useChangeUserStatusAction\",{useChangeUserStatusAction:function(e){g=e}},7),t.link(\"./hooks/useDeleteUserAction\",{useDeleteUserAction:function(e){U=e}},8),t.link(\"./hooks/useResetE2EEKeyAction\",{useResetE2EEKeyAction:function(e){S=e}},9),t.link(\"./hooks/useResetTOTPAction\",{useResetTOTPAction:function(e){v=e}},10),t.exportDefault(function(e){var n=e.username,t=e.userId,C=e.isFederatedUser,T=e.isActive,x=e.isAdmin,D=e.tab,R=e.onChange,_=e.onReload,I=h().t,M=d(\"direct\"),P=d(\"admin-users\"),O=f(\"create-d\"),K=f(\"edit-other-user-info\"),j=E(t,x,R),B=g(t,T,R),F=U(t,R,_),q=v(t),w=S(t),G=m(function(){return n&&M.push({rid:n})},[M,n]),N=m(function(){return P.push({context:\"edit\",id:t})},[t,P]),W=\"pending\"!==D&&\"deactivated\"!==D&&!C,z=b(function(){return l(l(l(l(l(l(l({},O&&{directMessage:{icon:\"balloon\",label:I(\"Direct_Message\"),title:I(\"Direct_Message\"),action:G}}),K&&{editUser:{icon:\"edit\",label:I(\"Edit\"),title:C?I(\"Edit_Federated_User_Not_Allowed\"):I(\"Edit\"),action:N,disabled:C}}),W&&j&&{makeAdmin:j}),W&&w&&{resetE2EKey:w}),W&&q&&{resetTOTP:q}),B&&!C&&{changeActiveStatus:B}),F&&{delete:F})},[O,K,j,B,F,G,N,C,W,w,q,I]),H=p(z),J=H.actions,L=H.menu,Q=b(function(){return L?k.createElement(r,{mi:4,placement:\"bottom-start\",small:!1,secondary:!0,flexShrink:0,key:\"menu\",renderItem:function(e){var n=e.label,t=n.label,i=n.icon,o=a(e,y);return k.createElement(s,u({label:t,title:t,icon:i,variant:\"Delete\"===t?\"danger\":\"\"},o))},options:L}):null},[L]),V=b(function(){return[].concat(i(J.map(function(e){var n=o(e,2),t=n[0],i=n[1],u=i.label,a=i.icon,l=i.action,c=i.disabled,r=i.title;return k.createElement(A,{key:t,title:r,label:u,onClick:l,disabled:c,icon:a})})),[Q]).filter(Boolean)},[J,Q]);return k.createElement(c,{align:\"center\",\"data-qa-id\":\"UserInfoActions\"},V)})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/users/AdminUserInfoActions.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IUser } from '@rocket.chat/core-typings';\\nimport { ButtonGroup, Menu, Option } from '@rocket.chat/fuselage';\\nimport { useRoute, usePermission } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useCallback, useMemo } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { UserInfoAction } from '../../../components/UserInfo';\\nimport { useActionSpread } from '../../hooks/useActionSpread';\\nimport type { AdminUsersTab } from './AdminUsersPage';\\nimport { useChangeAdminStatusAction } from './hooks/useChangeAdminStatusAction';\\nimport { useChangeUserStatusAction } from './hooks/useChangeUserStatusAction';\\nimport { useDeleteUserAction } from './hooks/useDeleteUserAction';\\nimport { useResetE2EEKeyAction } from './hooks/useResetE2EEKeyAction';\\nimport { useResetTOTPAction } from './hooks/useResetTOTPAction';\\n\\ntype AdminUserInfoActionsProps = {\\n\\tusername: IUser['username'];\\n\\tuserId: IUser['_id'];\\n\\tisFederatedUser: IUser['federated'];\\n\\tisActive: boolean;\\n\\tisAdmin: boolean;\\n\\ttab: AdminUsersTab;\\n\\tonChange: () => void;\\n\\tonReload: () => void;\\n};\\n\\n// TODO: Replace menu\\nconst AdminUserInfoActions = ({\\n\\tusername,\\n\\tuserId,\\n\\tisFederatedUser,\\n\\tisActive,\\n\\tisAdmin,\\n\\ttab,\\n\\tonChange,\\n\\tonReload,\\n}: AdminUserInfoActionsProps): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst directRoute = useRoute('direct');\\n\\tconst userRoute = useRoute('admin-users');\\n\\tconst canDirectMessage = usePermission('create-d');\\n\\tconst canEditOtherUserInfo = usePermission('edit-other-user-info');\\n\\n\\tconst changeAdminStatusAction = useChangeAdminStatusAction(userId, isAdmin, onChange);\\n\\tconst changeUserStatusAction = useChangeUserStatusAction(userId, isActive, onChange);\\n\\tconst deleteUserAction = useDeleteUserAction(userId, onChange, onReload);\\n\\tconst resetTOTPAction = useResetTOTPAction(userId);\\n\\tconst resetE2EKeyAction = useResetE2EEKeyAction(userId);\\n\\n\\tconst directMessageClick = useCallback(\\n\\t\\t() =>\\n\\t\\t\\tusername &&\\n\\t\\t\\tdirectRoute.push({\\n\\t\\t\\t\\trid: username,\\n\\t\\t\\t}),\\n\\t\\t[directRoute, username],\\n\\t);\\n\\n\\tconst editUserClick = useCallback(\\n\\t\\t() =>\\n\\t\\t\\tuserRoute.push({\\n\\t\\t\\t\\tcontext: 'edit',\\n\\t\\t\\t\\tid: userId,\\n\\t\\t\\t}),\\n\\t\\t[userId, userRoute],\\n\\t);\\n\\n\\tconst isNotPendingDeactivatedNorFederated = tab !== 'pending' && tab !== 'deactivated' && !isFederatedUser;\\n\\tconst options = useMemo(\\n\\t\\t() => ({\\n\\t\\t\\t...(canDirectMessage && {\\n\\t\\t\\t\\tdirectMessage: {\\n\\t\\t\\t\\t\\ticon: 'balloon' as const,\\n\\t\\t\\t\\t\\tlabel: t('Direct_Message'),\\n\\t\\t\\t\\t\\ttitle: t('Direct_Message'),\\n\\t\\t\\t\\t\\taction: directMessageClick,\\n\\t\\t\\t\\t},\\n\\t\\t\\t}),\\n\\t\\t\\t...(canEditOtherUserInfo && {\\n\\t\\t\\t\\teditUser: {\\n\\t\\t\\t\\t\\ticon: 'edit' as const,\\n\\t\\t\\t\\t\\tlabel: t('Edit'),\\n\\t\\t\\t\\t\\ttitle: isFederatedUser ? t('Edit_Federated_User_Not_Allowed') : t('Edit'),\\n\\t\\t\\t\\t\\taction: editUserClick,\\n\\t\\t\\t\\t\\tdisabled: isFederatedUser,\\n\\t\\t\\t\\t},\\n\\t\\t\\t}),\\n\\t\\t\\t...(isNotPendingDeactivatedNorFederated && changeAdminStatusAction && { makeAdmin: changeAdminStatusAction }),\\n\\t\\t\\t...(isNotPendingDeactivatedNorFederated && resetE2EKeyAction && { resetE2EKey: resetE2EKeyAction }),\\n\\t\\t\\t...(isNotPendingDeactivatedNorFederated && resetTOTPAction && { resetTOTP: resetTOTPAction }),\\n\\t\\t\\t...(changeUserStatusAction && !isFederatedUser && { changeActiveStatus: changeUserStatusAction }),\\n\\t\\t\\t...(deleteUserAction && { delete: deleteUserAction }),\\n\\t\\t}),\\n\\t\\t[\\n\\t\\t\\tcanDirectMessage,\\n\\t\\t\\tcanEditOtherUserInfo,\\n\\t\\t\\tchangeAdminStatusAction,\\n\\t\\t\\tchangeUserStatusAction,\\n\\t\\t\\tdeleteUserAction,\\n\\t\\t\\tdirectMessageClick,\\n\\t\\t\\teditUserClick,\\n\\t\\t\\tisFederatedUser,\\n\\t\\t\\tisNotPendingDeactivatedNorFederated,\\n\\t\\t\\tresetE2EKeyAction,\\n\\t\\t\\tresetTOTPAction,\\n\\t\\t\\tt,\\n\\t\\t],\\n\\t);\\n\\n\\tconst { actions: actionsDefinition, menu: menuOptions } = useActionSpread(options);\\n\\n\\tconst menu = useMemo(() => {\\n\\t\\tif (!menuOptions) {\\n\\t\\t\\treturn null;\\n\\t\\t}\\n\\n\\t\\treturn (\\n\\t\\t\\t<Menu\\n\\t\\t\\t\\tmi={4}\\n\\t\\t\\t\\tplacement='bottom-start'\\n\\t\\t\\t\\tsmall={false}\\n\\t\\t\\t\\tsecondary\\n\\t\\t\\t\\tflexShrink={0}\\n\\t\\t\\t\\tkey='menu'\\n\\t\\t\\t\\trenderItem={({ label: { label, icon }, ...props }): ReactElement => (\\n\\t\\t\\t\\t\\t<Option label={label} title={label} icon={icon} variant={label === 'Delete' ? 'danger' : ''} {...props} />\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\toptions={menuOptions}\\n\\t\\t\\t/>\\n\\t\\t);\\n\\t}, [menuOptions]);\\n\\n\\t// TODO: sanitize Action type to avoid any\\n\\tconst actions = useMemo(() => {\\n\\t\\tconst mapAction = ([key, { label, icon, action, disabled, title }]: any): ReactElement => (\\n\\t\\t\\t<UserInfoAction key={key} title={title} label={label} onClick={action} disabled={disabled} icon={icon} />\\n\\t\\t);\\n\\t\\treturn [...actionsDefinition.map(mapAction), menu].filter(Boolean);\\n\\t}, [actionsDefinition, menu]);\\n\\n\\treturn (\\n\\t\\t<ButtonGroup align='center' data-qa-id='UserInfoActions'>\\n\\t\\t\\t{actions}\\n\\t\\t</ButtonGroup>\\n\\t);\\n};\\n\\nexport default AdminUserInfoActions;\\n\",null],\"names\":[\"_toConsumableArray\",\"_slicedToArray\",\"_extends\",\"_objectWithoutProperties\",\"_objectSpread\",\"ButtonGroup\",\"Menu\",\"Option\",\"useRoute\",\"usePermission\",\"React\",\"useCallback\",\"useMemo\",\"useTranslation\",\"UserInfoAction\",\"useActionSpread\",\"useChangeAdminStatusAction\",\"useChangeUserStatusAction\",\"useDeleteUserAction\",\"useResetE2EEKeyAction\",\"useResetTOTPAction\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"username\",\"userId\",\"isFederatedUser\",\"isActive\",\"isAdmin\",\"tab\",\"onChange\",\"onReload\",\"t\",\"_useTranslation\",\"directRoute\",\"userRoute\",\"canDirectMessage\",\"canEditOtherUserInfo\",\"changeAdminStatusAction\",\"changeUserStatusAction\",\"deleteUserAction\",\"resetTOTPAction\",\"resetE2EKeyAction\",\"directMessageClick\",\"push\",\"rid\",\"editUserClick\",\"context\",\"id\",\"isNotPendingDeactivatedNorFederated\",\"options\",\"directMessage\",\"icon\",\"label\",\"title\",\"action\",\"editUser\",\"disabled\",\"makeAdmin\",\"resetE2EKey\",\"resetTOTP\",\"changeActiveStatus\",\"_useActionSpread\",\"actionsDefinition\",\"actions\",\"menuOptions\",\"menu\",\"createElement\",\"mi\",\"placement\",\"small\",\"secondary\",\"flexShrink\",\"key\",\"renderItem\",\"_ref2\",\"_ref2$label\",\"props\",\"_excluded\",\"variant\",\"concat\",\"map\",\"_ref3\",\"_ref4\",\"_ref4$\",\"onClick\",\"filter\",\"Boolean\",\"align\"],\"mappings\":\"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\"}"}