{"code":"function module(e,n,t){var a,r,i,l,o,u,c,s,f,d,m,k,h,p,v;t.link(\"@babel/runtime/regenerator\",{default:function(e){a=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){r=e}},1),t.link(\"@rocket.chat/fuselage\",{Field:function(e){i=e},FieldError:function(e){l=e},Button:function(e){o=e},Box:function(e){u=e},ButtonGroup:function(e){c=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){s=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){f=e}},2),t.link(\"react\",{default:function(e){d=e},useState:function(e){m=e}},3),t.link(\"react-hook-form\",{Controller:function(e){k=e},useForm:function(e){h=e}},4),t.link(\"react-i18next\",{useTranslation:function(e){p=e}},5),t.link(\"../../views/admin/settings/Setting/inputs/StringSettingInput\",{default:function(e){v=e}},6),t.exportDefault(function(e){var n,t=e.data,g=e.onSave,b=e.onCancel,x=f(),C=p().t,E=m(!1),y=r(E,2),S=y[0],V=y[1],w=t.name,B=t.i18n,D=t.dirty,N=C(B),R=h({mode:\"onChange\",defaultValues:t?{name:D?w:N}:{}}),q=R.control,F=R.getValues,T=R.setValue,_=R.formState,G=_.errors,M=_.isValid,j=_.isDirty,A=R.setError,I=R.handleSubmit,P=s(function(){var e,n;return a.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=F().name,M){t.next=3;break}return t.abrupt(\"return\",x({type:\"error\",message:C(\"Required_field\",{field:C(\"Name\")})}));case 3:return t.prev=3,V(!0),t.next=7,a.awrap(g({name:e,reset:e===N}));case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),(n=t.t0.error)&&A(\"name\",{message:C(n)});case 13:return t.prev=13,V(!1),t.finish(13);case 16:case\"end\":return t.stop()}},null,null,[[3,9,13,16]],Promise)}),z=function(){T(\"name\",N,{shouldDirty:!0,shouldValidate:!0})};return d.createElement(u,{is:\"form\",onSubmit:I(P),display:\"flex\",flexDirection:\"column\",justifyContent:\"space-between\",flexGrow:1},d.createElement(i,null,d.createElement(k,{name:\"name\",control:q,rules:{required:C(\"Required_field\",{field:C(\"Name\")}),validate:function(e){return(null==e?void 0:e.trim())!==\"\"}},render:function(e){var n,t=e.field,a=t.value,r=t.onChange;return d.createElement(v,{_id:\"\",packageValue:N,disabled:S,error:null===(n=G.name)||void 0===n?void 0:n.message,label:C(\"Name\")+\"*\",placeholder:C(\"Name\"),value:a,name:\"name\",hasResetButton:a!==C(B),onResetButtonClick:z,onChangeValue:r})}}),d.createElement(l,null,null===(n=G.name)||void 0===n?void 0:n.message)),d.createElement(c,{stretch:!0},d.createElement(o,{onClick:function(){return b()},disabled:S},C(\"Cancel\")),d.createElement(o,{primary:!0,disabled:!j||!M,loading:S,onClick:P},C(\"Save\"))))})}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/priorities/PriorityEditForm.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ILivechatPriority, Serialized } from '@rocket.chat/core-typings';\\nimport { Field, FieldError, Button, Box, ButtonGroup } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement } from 'react';\\nimport React, { useState } from 'react';\\nimport { Controller, useForm } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport StringSettingInput from '../../views/admin/settings/Setting/inputs/StringSettingInput';\\n\\nexport type PriorityFormData = { name: string; reset: boolean };\\n\\ntype ILivechatClientPriority = Serialized<ILivechatPriority> & {\\n\\ti18n: TranslationKey;\\n};\\n\\nexport type PriorityEditFormProps = {\\n\\tdata: ILivechatClientPriority;\\n\\tonCancel: () => void;\\n\\tonSave: (values: PriorityFormData) => Promise<void>;\\n};\\n\\ntype PrioritySaveException = { success: false; error: TranslationKey | undefined };\\n\\nconst PriorityEditForm = ({ data, onSave, onCancel }: PriorityEditFormProps): ReactElement => {\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst { t } = useTranslation();\\n\\tconst [isSaving, setSaving] = useState(false);\\n\\n\\tconst { name, i18n, dirty } = data;\\n\\tconst defaultName = t(i18n);\\n\\n\\tconst {\\n\\t\\tcontrol,\\n\\t\\tgetValues,\\n\\t\\tsetValue,\\n\\t\\tformState: { errors, isValid, isDirty },\\n\\t\\tsetError,\\n\\t\\thandleSubmit,\\n\\t} = useForm<PriorityFormData>({\\n\\t\\tmode: 'onChange',\\n\\t\\tdefaultValues: data ? { name: dirty ? name : defaultName } : {},\\n\\t});\\n\\n\\tconst handleSave = useMutableCallback(async () => {\\n\\t\\tconst { name } = getValues();\\n\\n\\t\\tif (!isValid) {\\n\\t\\t\\treturn dispatchToastMessage({ type: 'error', message: t('Required_field', { field: t('Name') }) });\\n\\t\\t}\\n\\n\\t\\ttry {\\n\\t\\t\\tsetSaving(true);\\n\\t\\t\\tawait onSave({ name, reset: name === defaultName });\\n\\t\\t} catch (e) {\\n\\t\\t\\tconst { error } = e as PrioritySaveException;\\n\\n\\t\\t\\tif (error) {\\n\\t\\t\\t\\tsetError('name', { message: t(error) });\\n\\t\\t\\t}\\n\\t\\t} finally {\\n\\t\\t\\tsetSaving(false);\\n\\t\\t}\\n\\t});\\n\\n\\tconst onReset = (): void => {\\n\\t\\tsetValue('name', defaultName, {\\n\\t\\t\\tshouldDirty: true,\\n\\t\\t\\tshouldValidate: true,\\n\\t\\t});\\n\\t};\\n\\n\\treturn (\\n\\t\\t<Box is='form' onSubmit={handleSubmit(handleSave)} display='flex' flexDirection='column' justifyContent='space-between' flexGrow={1}>\\n\\t\\t\\t<Field>\\n\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\tname='name'\\n\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\trules={{ required: t('Required_field', { field: t('Name') }), validate: (v) => v?.trim() !== '' }}\\n\\t\\t\\t\\t\\trender={({ field: { value, onChange } }): ReactElement => (\\n\\t\\t\\t\\t\\t\\t<StringSettingInput\\n\\t\\t\\t\\t\\t\\t\\t_id=''\\n\\t\\t\\t\\t\\t\\t\\tpackageValue={defaultName}\\n\\t\\t\\t\\t\\t\\t\\tdisabled={isSaving}\\n\\t\\t\\t\\t\\t\\t\\terror={errors.name?.message}\\n\\t\\t\\t\\t\\t\\t\\tlabel={`${t('Name')}*`}\\n\\t\\t\\t\\t\\t\\t\\tplaceholder={t('Name')}\\n\\t\\t\\t\\t\\t\\t\\tvalue={value}\\n\\t\\t\\t\\t\\t\\t\\tname='name'\\n\\t\\t\\t\\t\\t\\t\\thasResetButton={value !== t(i18n)}\\n\\t\\t\\t\\t\\t\\t\\tonResetButtonClick={onReset}\\n\\t\\t\\t\\t\\t\\t\\tonChangeValue={onChange}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t\\t<FieldError>{errors.name?.message}</FieldError>\\n\\t\\t\\t</Field>\\n\\n\\t\\t\\t<ButtonGroup stretch>\\n\\t\\t\\t\\t<Button onClick={(): void => onCancel()} disabled={isSaving}>\\n\\t\\t\\t\\t\\t{t('Cancel')}\\n\\t\\t\\t\\t</Button>\\n\\n\\t\\t\\t\\t<Button primary disabled={!isDirty || !isValid} loading={isSaving} onClick={handleSave}>\\n\\t\\t\\t\\t\\t{t('Save')}\\n\\t\\t\\t\\t</Button>\\n\\t\\t\\t</ButtonGroup>\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default PriorityEditForm;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_slicedToArray\",\"Field\",\"FieldError\",\"Button\",\"Box\",\"ButtonGroup\",\"useMutableCallback\",\"useToastMessageDispatch\",\"React\",\"useState\",\"Controller\",\"useForm\",\"useTranslation\",\"StringSettingInput\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"_errors$name2\",\"data\",\"onSave\",\"onCancel\",\"dispatchToastMessage\",\"t\",\"_useTranslation\",\"_useState\",\"_useState2\",\"isSaving\",\"setSaving\",\"name\",\"i18n\",\"dirty\",\"defaultName\",\"_useForm\",\"mode\",\"defaultValues\",\"control\",\"getValues\",\"setValue\",\"_useForm$formState\",\"formState\",\"errors\",\"isValid\",\"isDirty\",\"setError\",\"handleSubmit\",\"handleSave\",\"error\",\"async\",\"_context\",\"prev\",\"next\",\"_getValues\",\"abrupt\",\"type\",\"message\",\"field\",\"awrap\",\"reset\",\"t0\",\"finish\",\"stop\",\"Promise\",\"onReset\",\"shouldDirty\",\"shouldValidate\",\"createElement\",\"is\",\"onSubmit\",\"display\",\"flexDirection\",\"justifyContent\",\"flexGrow\",\"rules\",\"required\",\"validate\",\"trim\",\"render\",\"_ref2\",\"_errors$name\",\"_ref2$field\",\"value\",\"onChange\",\"_id\",\"packageValue\",\"disabled\",\"label\",\"placeholder\",\"hasResetButton\",\"onResetButtonClick\",\"onChangeValue\",\"stretch\",\"onClick\",\"primary\",\"loading\"],\"mappings\":\"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\"}"}