{"code":"function module(e,n,t){var a,r,u,i,o,c,l,s,f,d,k;t.link(\"@babel/runtime/regenerator\",{default:function(e){a=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){r=e}},1),t.link(\"@rocket.chat/fuselage\",{Box:function(e){u=e},Button:function(e){i=e}},0),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){o=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch:function(e){c=e}},2),t.link(\"react\",{default:function(e){l=e},useState:function(e){s=e}},3),t.link(\"react-i18next\",{useTranslation:function(e){f=e}},4),t.link(\"../../../../components/AutoCompleteAgent\",{default:function(e){d=e}},5),t.link(\"../../../../hooks/useEndpointAction\",{useEndpointAction:function(e){k=e}},6),t.exportDefault(function(e){var n=e.agentList,t=e.onAdd,m=f().t,p=s(\"\"),g=r(p,2),h=g[0],b=g[1],x=k(\"GET\",\"/v1/livechat/users/agent/:_id\",{keys:{_id:h}}),v=c(),y=o(function(e){return b(e)}),A=o(function(){var e,r,u,i;return a.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(h){o.next=2;break}return o.abrupt(\"return\");case 2:return o.next=4,a.awrap(x());case 4:r=(e=o.sent.user)._id,u=e.username,i=e.name,n.some(function(e){return e.agentId===r})?v({type:\"error\",message:m(\"This_agent_was_already_selected\")}):(b(\"\"),t({agentId:r,username:null!=u?u:\"\",name:i,count:0,order:0}));case 10:case\"end\":return o.stop()}},null,null,null,Promise)});return l.createElement(u,{display:\"flex\",alignItems:\"center\"},l.createElement(d,{value:h,onChange:y}),l.createElement(i,{disabled:!h,onClick:A,mis:8,primary:!0},m(\"Add\")))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/departments/DepartmentAgentsTable/AddAgent.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Button } from '@rocket.chat/fuselage';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport React, { useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport AutoCompleteAgent from '../../../../components/AutoCompleteAgent';\\nimport { useEndpointAction } from '../../../../hooks/useEndpointAction';\\nimport type { IDepartmentAgent } from '../EditDepartment';\\n\\nfunction AddAgent({ agentList, onAdd }: { agentList: IDepartmentAgent[]; onAdd: (agent: IDepartmentAgent) => void }) {\\n\\tconst { t } = useTranslation();\\n\\n\\tconst [userId, setUserId] = useState('');\\n\\n\\tconst getAgent = useEndpointAction('GET', '/v1/livechat/users/agent/:_id', { keys: { _id: userId } });\\n\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst handleAgent = useMutableCallback((e) => setUserId(e));\\n\\n\\tconst handleSave = useMutableCallback(async () => {\\n\\t\\tif (!userId) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst {\\n\\t\\t\\tuser: { _id, username, name },\\n\\t\\t} = await getAgent();\\n\\n\\t\\tif (!agentList.some(({ agentId }) => agentId === _id)) {\\n\\t\\t\\tsetUserId('');\\n\\t\\t\\tonAdd({ agentId: _id, username: username ?? '', name, count: 0, order: 0 });\\n\\t\\t} else {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: t('This_agent_was_already_selected') });\\n\\t\\t}\\n\\t});\\n\\n\\treturn (\\n\\t\\t<Box display='flex' alignItems='center'>\\n\\t\\t\\t<AutoCompleteAgent value={userId} onChange={handleAgent} />\\n\\t\\t\\t<Button disabled={!userId} onClick={handleSave} mis={8} primary>\\n\\t\\t\\t\\t{t('Add')}\\n\\t\\t\\t</Button>\\n\\t\\t</Box>\\n\\t);\\n}\\n\\nexport default AddAgent;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_slicedToArray\",\"Box\",\"Button\",\"useMutableCallback\",\"useToastMessageDispatch\",\"React\",\"useState\",\"useTranslation\",\"AutoCompleteAgent\",\"useEndpointAction\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"agentList\",\"onAdd\",\"t\",\"_useTranslation\",\"_useState\",\"_useState2\",\"userId\",\"setUserId\",\"getAgent\",\"keys\",\"_id\",\"dispatchToastMessage\",\"handleAgent\",\"e\",\"handleSave\",\"_await$getAgent$user\",\"username\",\"name\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"awrap\",\"_await$getAgent\",\"sent\",\"user\",\"some\",\"_ref2\",\"agentId\",\"type\",\"message\",\"count\",\"order\",\"stop\",\"Promise\",\"createElement\",\"display\",\"alignItems\",\"value\",\"onChange\",\"disabled\",\"onClick\",\"mis\",\"primary\"],\"mappings\":\"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\"}"}