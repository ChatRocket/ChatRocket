{"code":"function module(t,n,e){var o,i,a,r,l,c,u,s,f,m,d,k,v;e.link(\"@rocket.chat/fuselage\",{Avatar:function(t){o=t},Box:function(t){i=t}},0),e.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(t){a=t}},1),e.link(\"@tanstack/react-query\",{useQuery:function(t){r=t}},2),e.link(\"react\",{default:function(t){l=t}},3),e.link(\"react-i18next\",{useTranslation:function(t){c=t}},4),e.link(\"../../../../components/UserStatus\",{UserStatus:function(t){u=t}},5),e.link(\"../../../../lib/rooms/roomCoordinator\",{roomCoordinator:function(t){s=t}},6),e.link(\"../../components/AgentInfoDetails\",{default:function(t){f=t}},7),e.link(\"../../components/Field\",{default:function(t){m=t}},8),e.link(\"../../components/Info\",{default:function(t){d=t}},9),e.link(\"../../components/Label\",{default:function(t){k=t}},10),e.link(\"./FormSkeleton\",{FormSkeleton:function(t){v=t}},11),e.exportDefault(function(t){var n=t.contact,e=t.room,E=c().t,p=n.status,h=e.fname,x=e.t,g=s.getRoomDirectives(x).getAvatarPath(e)||\"\",y=a(\"GET\",\"/v1/livechat/visitors.info\"),C=r([\"/v1/livechat/visitors.info\",n._id],function(){return y({visitorId:n._id})}),I=C.data,S=C.isLoading,_=C.isError;if(S)return l.createElement(v,null);if(_||!(null!=I&&I.visitor))return l.createElement(i,{mbs:16},E(\"Contact_not_found\"));var b=I.visitor,A=b.username,D=b.name;return l.createElement(m,null,l.createElement(k,null,E(\"Contact\")),l.createElement(d,{style:{display:\"flex\"}},l.createElement(o,{size:\"x40\",title:h,url:g}),l.createElement(f,{\"data-qa-id\":\"contactInfo-name\",mis:10,name:D||A,shortName:A,status:l.createElement(u,{status:p})})))})}","map":"{\"version\":3,\"sources\":[\"client/views/omnichannel/directory/components/ContactField.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IOmnichannelGenericRoom, IVisitor } from '@rocket.chat/core-typings';\\nimport { Avatar, Box } from '@rocket.chat/fuselage';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { UserStatus } from '../../../../components/UserStatus';\\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\\nimport AgentInfoDetails from '../../components/AgentInfoDetails';\\nimport Field from '../../components/Field';\\nimport Info from '../../components/Info';\\nimport Label from '../../components/Label';\\nimport { FormSkeleton } from './FormSkeleton';\\n\\ntype ContactFieldProps = {\\n\\tcontact: IVisitor;\\n\\troom: IOmnichannelGenericRoom;\\n};\\n\\nconst ContactField = ({ contact, room }: ContactFieldProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst { status } = contact;\\n\\tconst { fname, t: type } = room;\\n\\tconst avatarUrl = roomCoordinator.getRoomDirectives(type).getAvatarPath(room) || '';\\n\\n\\tconst getVisitorInfo = useEndpoint('GET', '/v1/livechat/visitors.info');\\n\\tconst { data, isLoading, isError } = useQuery(['/v1/livechat/visitors.info', contact._id], () =>\\n\\t\\tgetVisitorInfo({ visitorId: contact._id }),\\n\\t);\\n\\n\\tif (isLoading) {\\n\\t\\treturn <FormSkeleton />;\\n\\t}\\n\\n\\tif (isError || !data?.visitor) {\\n\\t\\treturn <Box mbs={16}>{t('Contact_not_found')}</Box>;\\n\\t}\\n\\n\\tconst {\\n\\t\\tvisitor: { username, name },\\n\\t} = data;\\n\\n\\tconst displayName = name || username;\\n\\n\\treturn (\\n\\t\\t<Field>\\n\\t\\t\\t<Label>{t('Contact')}</Label>\\n\\t\\t\\t<Info style={{ display: 'flex' }}>\\n\\t\\t\\t\\t<Avatar size='x40' title={fname} url={avatarUrl} />\\n\\t\\t\\t\\t<AgentInfoDetails\\n\\t\\t\\t\\t\\tdata-qa-id='contactInfo-name'\\n\\t\\t\\t\\t\\tmis={10}\\n\\t\\t\\t\\t\\tname={displayName}\\n\\t\\t\\t\\t\\tshortName={username}\\n\\t\\t\\t\\t\\tstatus={<UserStatus status={status} />}\\n\\t\\t\\t\\t/>\\n\\t\\t\\t</Info>\\n\\t\\t</Field>\\n\\t);\\n};\\n\\nexport default ContactField;\\n\",null],\"names\":[\"Avatar\",\"Box\",\"useEndpoint\",\"useQuery\",\"React\",\"useTranslation\",\"UserStatus\",\"roomCoordinator\",\"AgentInfoDetails\",\"Field\",\"Info\",\"Label\",\"FormSkeleton\",\"module\",\"link\",\"v\",\"exportDefault\",\"_ref\",\"contact\",\"room\",\"t\",\"_useTranslation\",\"status\",\"fname\",\"type\",\"avatarUrl\",\"getRoomDirectives\",\"getAvatarPath\",\"getVisitorInfo\",\"_useQuery\",\"_id\",\"visitorId\",\"data\",\"isLoading\",\"isError\",\"createElement\",\"visitor\",\"mbs\",\"_data$visitor\",\"username\",\"name\",\"style\",\"display\",\"size\",\"title\",\"url\",\"mis\",\"shortName\"],\"mappings\":\"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\"}"}