{"code":"function module(e,t,l){let i,n,s,a,o,r,u;l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){i=e}},0),l.export({useTagsList:()=>c}),l.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){n=e}},0),l.link(\"react\",{useCallback(e){s=e},useState(e){a=e}},1),l.link(\"../lib/lists/RecordList\",{RecordList(e){o=e}},2),l.link(\"./lists/useScrollableRecordList\",{useScrollableRecordList(e){r=e}},3),l.link(\"./useComponentDidUpdate\",{useComponentDidUpdate(e){u=e}},4);let c=e=>{let{viewAll:t,department:l,filter:c}=e,[d,m]=a(()=>new o),p=s(()=>m(new o),[]),b=n(\"GET\",\"/v1/livechat/tags\");u(()=>{e&&p()},[e,p]);let k=s(async(e,n)=>{let{tags:s,total:a}=await b(i(i(i({text:c,offset:e,count:n+e},t&&{viewAll:\"true\"}),l&&{department:l}),{},{sort:JSON.stringify({name:1})}));return{items:s.map(e=>({_id:e._id,label:e.name,value:e.name})),itemCount:a}},[b,c,t,l]),{loadMoreItems:f,initialItemCount:L}=r(d,k,25);return{reload:p,itemsList:d,loadMoreItems:f,initialItemCount:L}}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useTagsList.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useState } from 'react';\\n\\nimport { RecordList } from '../lib/lists/RecordList';\\nimport { useScrollableRecordList } from './lists/useScrollableRecordList';\\nimport { useComponentDidUpdate } from './useComponentDidUpdate';\\n\\ntype TagsListOptions = {\\n\\tfilter: string;\\n\\tdepartment?: string;\\n\\tviewAll?: boolean;\\n};\\n\\ntype TagListItem = { _id: string; label: string; value: string; _updatedAt: Date };\\n\\ntype UseTagsListResult = {\\n\\titemsList: RecordList<TagListItem>;\\n\\tinitialItemCount: number;\\n\\treload: () => void;\\n\\tloadMoreItems: (start: number, end: number) => void;\\n};\\n\\nexport const useTagsList = (options: TagsListOptions): UseTagsListResult => {\\n\\tconst { viewAll, department, filter } = options;\\n\\tconst [itemsList, setItemsList] = useState(() => new RecordList<TagListItem>());\\n\\tconst reload = useCallback(() => setItemsList(new RecordList<TagListItem>()), []);\\n\\n\\tconst getTags = useEndpoint('GET', '/v1/livechat/tags');\\n\\n\\tuseComponentDidUpdate(() => {\\n\\t\\toptions && reload();\\n\\t}, [options, reload]);\\n\\n\\tconst fetchData = useCallback(\\n\\t\\tasync (start, end) => {\\n\\t\\t\\tconst { tags, total } = await getTags({\\n\\t\\t\\t\\ttext: filter,\\n\\t\\t\\t\\toffset: start,\\n\\t\\t\\t\\tcount: end + start,\\n\\t\\t\\t\\t...(viewAll && { viewAll: 'true' }),\\n\\t\\t\\t\\t...(department && { department }),\\n\\t\\t\\t\\tsort: JSON.stringify({ name: 1 }),\\n\\t\\t\\t});\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\titems: tags.map<any>((tag: any) => ({\\n\\t\\t\\t\\t\\t_id: tag._id,\\n\\t\\t\\t\\t\\tlabel: tag.name,\\n\\t\\t\\t\\t\\tvalue: tag.name,\\n\\t\\t\\t\\t})),\\n\\t\\t\\t\\titemCount: total,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t[getTags, filter, viewAll, department],\\n\\t);\\n\\n\\tconst { loadMoreItems, initialItemCount } = useScrollableRecordList(itemsList, fetchData, 25);\\n\\n\\treturn {\\n\\t\\treload,\\n\\t\\titemsList,\\n\\t\\tloadMoreItems,\\n\\t\\tinitialItemCount,\\n\\t};\\n};\\n\",null],\"names\":[\"_objectSpread\",\"useEndpoint\",\"useCallback\",\"useState\",\"RecordList\",\"useScrollableRecordList\",\"useComponentDidUpdate\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useTagsList\",\"options\",\"viewAll\",\"department\",\"filter\",\"itemsList\",\"setItemsList\",\"reload\",\"getTags\",\"fetchData\",\"start\",\"end\",\"tags\",\"total\",\"text\",\"offset\",\"count\",\"sort\",\"JSON\",\"stringify\",\"name\",\"items\",\"map\",\"tag\",\"_id\",\"label\",\"value\",\"itemCount\",\"loadMoreItems\",\"initialItemCount\"],\"mappings\":\"2BAAAA,EAA4BC,EAA2BC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9CC,EAAaC,IAAM,CAAA,uCAA2B,CAAAC,QAAAC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAvDH,EAAOI,MAAE,CAAA,CAAAC,YAAaA,IAAMA,CAAA,GAA2BL,EAAAC,IAAA,CAAA,2BAAA,CAAAP,YAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAN,YAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0BAAA,CAAAJ,WAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kCAAA,CAAAH,wBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0BAAA,CAAAF,sBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAsBhD,IAAME,EAAeC,IAC3B,GAAM,CAAEC,QAAAA,CAAO,CAAEC,WAAAA,CAAU,CAAEC,OAAAA,CAAAA,CAAQ,CAAGH,EAClC,CAACI,EAAWC,EAAa,CAAGf,EAAS,IAAM,IAAIC,GAC/Ce,EAASjB,EAAY,IAAMgB,EAAa,IAAId,GAA4B,EAAE,EAE1EgB,EAAUnB,EAAY,MAAO,qBAEnCK,EAAsB,KACrBO,GAAWM,GACZ,EAAG,CAACN,EAASM,EAAO,EAEpB,IAAME,EAAYnB,EACjB,MAAOoB,EAAOC,KACb,GAAM,CAAEC,KAAAA,CAAI,CAAEC,MAAAA,CAAAA,CAAO,CAAG,MAAML,EAAOpB,EAAAA,EAAAA,EAAA,CACpC0B,KAAMV,EACNW,OAAQL,EACRM,MAAOL,EAAMD,CAAK,EACdR,GAAW,CAAEA,QAAS,MAAM,GAC5BC,GAAc,CAAEA,WAAAA,CAAU,GAAE,CAAA,EAAA,CAChCc,KAAMC,KAAKC,SAAS,CAAC,CAAEC,KAAM,CAAC,EAAG,IAGlC,MAAO,CACNC,MAAOT,EAAKU,GAAG,CAAOC,GAAc,CAAA,CACnCC,IAAKD,EAAIC,GAAG,CACZC,MAAOF,EAAIH,IAAI,CACfM,MAAOH,EAAIH,IAAAA,IAEZO,UAAWd,EAEb,EACA,CAACL,EAASJ,EAAQF,EAASC,EAAW,EAGjC,CAAEyB,cAAAA,CAAa,CAAEC,iBAAAA,CAAAA,CAAkB,CAAGpC,EAAwBY,EAAWI,EAAW,IAE1F,MAAO,CACNF,OAAAA,EACAF,UAAAA,EACAuB,cAAAA,EACAC,iBAAAA,EAEF\"}"}