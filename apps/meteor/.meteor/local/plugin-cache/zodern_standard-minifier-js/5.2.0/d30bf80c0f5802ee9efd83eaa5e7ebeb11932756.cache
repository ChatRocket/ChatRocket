{"code":"function module(e,t,n){let l,r,a,i,s,c,o,u,f,m,d,g,k,P,h,E,S,p,y,b,A,D,F,x,v,B,M,j;let w=[\"highlights\",\"dontAskAgainList\"];n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){l=e}},0),n.link(\"@rocket.chat/fuselage\",{ButtonGroup(e){r=e},Button(e){a=e},Box(e){i=e},Accordion(e){s=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){c=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){o=e},useSetting(e){u=e},useTranslation(e){f=e},useEndpoint(e){m=e}},2),n.link(\"@tanstack/react-query\",{useMutation(e){d=e}},3),n.link(\"react\",{default(e){g=e}},4),n.link(\"react-hook-form\",{FormProvider(e){k=e},useForm(e){P=e}},5),n.link(\"../../../components/Page\",{Page(e){h=e},PageHeader(e){E=e},PageScrollableContentWithShadow(e){S=e},PageFooter(e){p=e}},6),n.link(\"../../../lib/getDirtyFields\",{getDirtyFields(e){y=e}},7),n.link(\"./PreferencesGlobalSection\",{default(e){b=e}},8),n.link(\"./PreferencesHighlightsSection\",{default(e){A=e}},9),n.link(\"./PreferencesLocalizationSection\",{default(e){D=e}},10),n.link(\"./PreferencesMessagesSection\",{default(e){F=e}},11),n.link(\"./PreferencesMyDataSection\",{default(e){x=e}},12),n.link(\"./PreferencesNotificationsSection\",{default(e){v=e}},13),n.link(\"./PreferencesSoundSection\",{default(e){B=e}},14),n.link(\"./PreferencesUserPresenceSection\",{default(e){M=e}},15),n.link(\"./useAccountPreferencesValues\",{useAccountPreferencesValues(e){j=e}},16),n.exportDefault(()=>{let e=f(),t=o(),n=u(\"UserData_EnableDownload\"),C=j(),L=P({defaultValues:C}),{handleSubmit:O,reset:T,watch:U,formState:{isDirty:V,dirtyFields:W}}=L,_=U(),q=m(\"POST\",\"/v1/users.setPreferences\"),G=d({mutationFn:q,onSuccess:()=>{t({type:\"success\",message:e(\"Preferences_saved\")})},onError:e=>{t({type:\"error\",message:e})},onSettled:()=>T(_)}),H=async e=>{let t=y(e,W),{highlights:n,dontAskAgainList:r}=t,a=l(t,w);if((n||\"\"===n)&&Object.assign(a,{highlights:\"string\"==typeof n&&n.split(/,|\\n/).map(e=>e.trim()).filter(Boolean)}),r){let e=Array.isArray(r)&&r.length>0?r.map(e=>{let[t,n]=e;return{action:t,label:n}}):[];Object.assign(a,{dontAskAgainList:e})}G.mutateAsync({data:a})},z=c();return g.createElement(h,null,g.createElement(E,{title:e(\"Preferences\")}),g.createElement(S,null,g.createElement(k,L,g.createElement(i,{id:z,is:\"form\",maxWidth:\"x600\",w:\"full\",alignSelf:\"center\",onSubmit:O(H)},g.createElement(s,null,g.createElement(D,null),g.createElement(b,null),g.createElement(M,null),g.createElement(v,null),g.createElement(F,null),g.createElement(A,null),g.createElement(B,null),n&&g.createElement(x,null))))),g.createElement(p,{isDirty:V},g.createElement(r,null,g.createElement(a,{onClick:()=>T(C)},e(\"Cancel\")),g.createElement(a,{form:z,primary:!0,type:\"submit\"},e(\"Save_changes\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/account/preferences/AccountPreferencesPage.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { ButtonGroup, Button, Box, Accordion } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch, useSetting, useTranslation, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useMutation } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React from 'react';\\nimport { FormProvider, useForm } from 'react-hook-form';\\n\\nimport { Page, PageHeader, PageScrollableContentWithShadow, PageFooter } from '../../../components/Page';\\nimport { getDirtyFields } from '../../../lib/getDirtyFields';\\nimport PreferencesGlobalSection from './PreferencesGlobalSection';\\nimport PreferencesHighlightsSection from './PreferencesHighlightsSection';\\nimport PreferencesLocalizationSection from './PreferencesLocalizationSection';\\nimport PreferencesMessagesSection from './PreferencesMessagesSection';\\nimport PreferencesMyDataSection from './PreferencesMyDataSection';\\nimport PreferencesNotificationsSection from './PreferencesNotificationsSection';\\nimport PreferencesSoundSection from './PreferencesSoundSection';\\nimport PreferencesUserPresenceSection from './PreferencesUserPresenceSection';\\nimport type { AccountPreferencesData } from './useAccountPreferencesValues';\\nimport { useAccountPreferencesValues } from './useAccountPreferencesValues';\\n\\nconst AccountPreferencesPage = (): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst dataDownloadEnabled = useSetting('UserData_EnableDownload');\\n\\tconst preferencesValues = useAccountPreferencesValues();\\n\\n\\tconst methods = useForm({ defaultValues: preferencesValues });\\n\\tconst {\\n\\t\\thandleSubmit,\\n\\t\\treset,\\n\\t\\twatch,\\n\\t\\tformState: { isDirty, dirtyFields },\\n\\t} = methods;\\n\\n\\tconst currentData = watch();\\n\\n\\tconst setPreferencesEndpoint = useEndpoint('POST', '/v1/users.setPreferences');\\n\\tconst setPreferencesAction = useMutation({\\n\\t\\tmutationFn: setPreferencesEndpoint,\\n\\t\\tonSuccess: () => {\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Preferences_saved') });\\n\\t\\t},\\n\\t\\tonError: (error) => {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t},\\n\\t\\tonSettled: () => reset(currentData),\\n\\t});\\n\\n\\tconst handleSaveData = async (formData: AccountPreferencesData) => {\\n\\t\\tconst { highlights, dontAskAgainList, ...data } = getDirtyFields(formData, dirtyFields);\\n\\t\\tif (highlights || highlights === '') {\\n\\t\\t\\tObject.assign(data, {\\n\\t\\t\\t\\thighlights:\\n\\t\\t\\t\\t\\ttypeof highlights === 'string' &&\\n\\t\\t\\t\\t\\thighlights\\n\\t\\t\\t\\t\\t\\t.split(/,|\\\\n/)\\n\\t\\t\\t\\t\\t\\t.map((val) => val.trim())\\n\\t\\t\\t\\t\\t\\t.filter(Boolean),\\n\\t\\t\\t});\\n\\t\\t}\\n\\n\\t\\tif (dontAskAgainList) {\\n\\t\\t\\tconst list =\\n\\t\\t\\t\\tArray.isArray(dontAskAgainList) && dontAskAgainList.length > 0\\n\\t\\t\\t\\t\\t? dontAskAgainList.map(([action, label]) => ({ action, label }))\\n\\t\\t\\t\\t\\t: [];\\n\\t\\t\\tObject.assign(data, { dontAskAgainList: list });\\n\\t\\t}\\n\\n\\t\\tsetPreferencesAction.mutateAsync({ data });\\n\\t};\\n\\n\\tconst preferencesFormId = useUniqueId();\\n\\n\\treturn (\\n\\t\\t<Page>\\n\\t\\t\\t<PageHeader title={t('Preferences')} />\\n\\t\\t\\t<PageScrollableContentWithShadow>\\n\\t\\t\\t\\t<FormProvider {...methods}>\\n\\t\\t\\t\\t\\t<Box id={preferencesFormId} is='form' maxWidth='x600' w='full' alignSelf='center' onSubmit={handleSubmit(handleSaveData)}>\\n\\t\\t\\t\\t\\t\\t<Accordion>\\n\\t\\t\\t\\t\\t\\t\\t<PreferencesLocalizationSection />\\n\\t\\t\\t\\t\\t\\t\\t<PreferencesGlobalSection />\\n\\t\\t\\t\\t\\t\\t\\t<PreferencesUserPresenceSection />\\n\\t\\t\\t\\t\\t\\t\\t<PreferencesNotificationsSection />\\n\\t\\t\\t\\t\\t\\t\\t<PreferencesMessagesSection />\\n\\t\\t\\t\\t\\t\\t\\t<PreferencesHighlightsSection />\\n\\t\\t\\t\\t\\t\\t\\t<PreferencesSoundSection />\\n\\t\\t\\t\\t\\t\\t\\t{dataDownloadEnabled && <PreferencesMyDataSection />}\\n\\t\\t\\t\\t\\t\\t</Accordion>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t</FormProvider>\\n\\t\\t\\t</PageScrollableContentWithShadow>\\n\\t\\t\\t<PageFooter isDirty={isDirty}>\\n\\t\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t\\t<Button onClick={() => reset(preferencesValues)}>{t('Cancel')}</Button>\\n\\t\\t\\t\\t\\t<Button form={preferencesFormId} primary type='submit'>\\n\\t\\t\\t\\t\\t\\t{t('Save_changes')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</PageFooter>\\n\\t\\t</Page>\\n\\t);\\n};\\n\\nexport default AccountPreferencesPage;\\n\",null],\"names\":[\"_objectWithoutProperties\",\"ButtonGroup\",\"Button\",\"Box\",\"Accordion\",\"useUniqueId\",\"useToastMessageDispatch\",\"useSetting\",\"useTranslation\",\"useEndpoint\",\"useMutation\",\"React\",\"FormProvider\",\"useForm\",\"Page\",\"PageHeader\",\"PageScrollableContentWithShadow\",\"PageFooter\",\"getDirtyFields\",\"PreferencesGlobalSection\",\"PreferencesHighlightsSection\",\"PreferencesLocalizationSection\",\"PreferencesMessagesSection\",\"PreferencesMyDataSection\",\"PreferencesNotificationsSection\",\"PreferencesSoundSection\",\"PreferencesUserPresenceSection\",\"useAccountPreferencesValues\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"AccountPreferencesPage\",\"t\",\"dispatchToastMessage\",\"dataDownloadEnabled\",\"preferencesValues\",\"methods\",\"defaultValues\",\"handleSubmit\",\"reset\",\"watch\",\"formState\",\"isDirty\",\"dirtyFields\",\"currentData\",\"setPreferencesEndpoint\",\"setPreferencesAction\",\"mutationFn\",\"onSuccess\",\"type\",\"message\",\"onError\",\"error\",\"onSettled\",\"handleSaveData\",\"formData\",\"_getDirtyFields\",\"highlights\",\"dontAskAgainList\",\"data\",\"_excluded\",\"Object\",\"assign\",\"split\",\"map\",\"val\",\"trim\",\"filter\",\"Boolean\",\"list\",\"Array\",\"isArray\",\"length\",\"_ref\",\"action\",\"label\",\"mutateAsync\",\"preferencesFormId\",\"createElement\",\"title\",\"id\",\"is\",\"maxWidth\",\"w\",\"alignSelf\",\"onSubmit\",\"onClick\",\"form\",\"primary\"],\"mappings\":\"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\"}"}