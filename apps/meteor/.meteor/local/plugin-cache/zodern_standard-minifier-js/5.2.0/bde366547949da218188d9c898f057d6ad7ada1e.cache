{"code":"function module(n,e,o){var t,i,s,u,r,c;o.link(\"meteor/meteor\",{Meteor:function(n){t=n}},0),o.link(\"meteor/session\",{Session:function(n){i=n}},1),o.link(\"meteor/tracker\",{Tracker:function(n){s=n}},2),o.link(\"../../../app/custom-sounds/client/lib/CustomSounds\",{CustomSounds:function(n){u=n}},3),o.link(\"../../../app/models/client\",{Users:function(n){r=n}},4),o.link(\"../../../app/utils/client\",{getUserPreference:function(n){c=n}},5),t.startup(function(){s.autorun(function(){var n=t.userId();if(n){var e=r.findOne(n,{fields:{\"settings.preferences.newRoomNotification\":1,\"settings.preferences.notificationsSoundVolume\":1}}),o=c(e,\"newRoomNotification\"),s=c(e,\"notificationsSoundVolume\",100);o&&((i.get(\"newRoomSound\")||[]).length>0?setTimeout(function(){\"none\"!==o&&u.play(o,{volume:Number((s/100).toPrecision(2))})},0):u.pause(o))}})})}","map":"{\"version\":3,\"sources\":[\"client/startup/notifications/notification.ts\",\"<anon>\"],\"sourcesContent\":[\"import { Meteor } from 'meteor/meteor';\\nimport { Session } from 'meteor/session';\\nimport { Tracker } from 'meteor/tracker';\\n\\nimport { CustomSounds } from '../../../app/custom-sounds/client/lib/CustomSounds';\\nimport { Users } from '../../../app/models/client';\\nimport { getUserPreference } from '../../../app/utils/client';\\n\\nMeteor.startup(() => {\\n\\tTracker.autorun(() => {\\n\\t\\tconst uid = Meteor.userId();\\n\\n\\t\\tif (!uid) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst user = Users.findOne(uid, {\\n\\t\\t\\tfields: {\\n\\t\\t\\t\\t'settings.preferences.newRoomNotification': 1,\\n\\t\\t\\t\\t'settings.preferences.notificationsSoundVolume': 1,\\n\\t\\t\\t},\\n\\t\\t});\\n\\t\\tconst newRoomNotification = getUserPreference<string>(user, 'newRoomNotification');\\n\\t\\tconst audioVolume = getUserPreference(user, 'notificationsSoundVolume', 100);\\n\\n\\t\\tif (!newRoomNotification) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif ((Session.get('newRoomSound') || []).length > 0) {\\n\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\tif (newRoomNotification !== 'none') {\\n\\t\\t\\t\\t\\tCustomSounds.play(newRoomNotification, {\\n\\t\\t\\t\\t\\t\\tvolume: Number((audioVolume / 100).toPrecision(2)),\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t}\\n\\t\\t\\t}, 0);\\n\\t\\t} else {\\n\\t\\t\\tCustomSounds.pause(newRoomNotification);\\n\\t\\t}\\n\\t});\\n});\\n\",null],\"names\":[\"Meteor\",\"Session\",\"Tracker\",\"CustomSounds\",\"Users\",\"getUserPreference\",\"module\",\"link\",\"v\",\"startup\",\"autorun\",\"uid\",\"userId\",\"user\",\"findOne\",\"fields\",\"newRoomNotification\",\"audioVolume\",\"get\",\"length\",\"setTimeout\",\"play\",\"volume\",\"Number\",\"toPrecision\",\"pause\"],\"mappings\":\"2BAAAA,EAAuCC,EAAAC,EAAAC,EAAAC,EAAAC,EAA9BC,EAAQC,IAAA,CAAM,gBAAgB,CAAAP,OAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iBAAA,CAAAN,QAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,iBAAA,CAAAL,QAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,qDAAA,CAAAJ,aAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,6BAAA,CAAAH,MAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,4BAAA,CAAAF,kBAAA,SAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAQvCR,EAAOS,OAAO,CAAC,WACdP,EAAQQ,OAAO,CAAC,WACf,IAAMC,EAAMX,EAAOY,MAAM,GAEzB,GAAKD,GAIL,IAAME,EAAOT,EAAMU,OAAO,CAACH,EAAK,CAC/BI,OAAQ,CACP,2CAA4C,EAC5C,gDAAiD,KAG7CC,EAAsBX,EAA0BQ,EAAM,uBACtDI,EAAcZ,EAAkBQ,EAAM,2BAA4B,KAEnEG,IAID,AAACf,CAAAA,EAAQiB,GAAG,CAAC,iBAAmB,EAAE,AAAF,EAAIC,MAAM,CAAG,EAChDC,WAAW,WACkB,SAAxBJ,GACHb,EAAakB,IAAI,CAACL,EAAqB,CACtCM,OAAQC,OAAO,AAACN,CAAAA,EAAc,GAAA,EAAKO,WAAW,CAAC,KAGlD,EAAG,GAEHrB,EAAasB,KAAK,CAACT,IAErB,EACD\"}"}