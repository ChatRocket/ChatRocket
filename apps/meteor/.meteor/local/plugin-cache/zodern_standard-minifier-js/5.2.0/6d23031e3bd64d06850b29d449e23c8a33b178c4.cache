{"code":"function module(e,t,a){let n,l,i,o;a.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){n=e}},0),a.export({useModalContextValue:()=>c}),a.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedCallback(e){l=e}},0),a.link(\"react\",{useMemo(e){i=e}},1),a.link(\"./useUiKitActionManager\",{useUiKitActionManager(e){o=e}},2);let c=e=>{let{view:t,errors:a,values:c,updateValues:u}=e,r=o(),d=i(()=>r.emitInteraction.bind(r),[r]),s=l(d,700);return n(n({action:async e=>{let{actionId:t,viewId:a,appId:n,dispatchActionConfig:l,blockId:i,value:o}=e;if(!n||!a)return;let c=null!=l&&l.includes(\"on_character_entered\")?s:d;await c(n,{type:\"blockAction\",actionId:t,container:{type:\"view\",id:a},payload:{blockId:i,value:o}})},updateState:e=>{let{actionId:t,value:a,blockId:n=\"default\"}=e;u({actionId:t,payload:{blockId:n,value:a}})}},t),{},{errors:a,values:c,viewId:t.id})}}","map":"{\"version\":3,\"sources\":[\"client/uikit/hooks/useModalContextValue.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\\nimport type { UiKitContext } from '@rocket.chat/fuselage-ui-kit';\\nimport type * as UiKit from '@rocket.chat/ui-kit';\\nimport type { Dispatch } from 'react';\\nimport { useMemo, type ContextType } from 'react';\\n\\nimport { useUiKitActionManager } from './useUiKitActionManager';\\n\\ntype UseModalContextValueParams = {\\n\\tview: UiKit.ModalView;\\n\\tvalues: {\\n\\t\\t[actionId: string]: {\\n\\t\\t\\tvalue: unknown;\\n\\t\\t\\tblockId?: string | undefined;\\n\\t\\t};\\n\\t};\\n\\terrors?: { [field: string]: string }[] | { [field: string]: string };\\n\\tupdateValues: Dispatch<{\\n\\t\\tactionId: string;\\n\\t\\tpayload: {\\n\\t\\t\\tvalue: unknown;\\n\\t\\t\\tblockId?: string;\\n\\t\\t};\\n\\t}>;\\n};\\n\\ntype UseModalContextValueReturn = ContextType<typeof UiKitContext>;\\n\\nexport const useModalContextValue = ({ view, errors, values, updateValues }: UseModalContextValueParams): UseModalContextValueReturn => {\\n\\tconst actionManager = useUiKitActionManager();\\n\\n\\tconst emitInteraction = useMemo(() => actionManager.emitInteraction.bind(actionManager), [actionManager]);\\n\\tconst debouncedEmitInteraction = useDebouncedCallback(emitInteraction, 700);\\n\\n\\treturn {\\n\\t\\taction: async ({ actionId, viewId, appId, dispatchActionConfig, blockId, value }) => {\\n\\t\\t\\tif (!appId || !viewId) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst emit = dispatchActionConfig?.includes('on_character_entered') ? debouncedEmitInteraction : emitInteraction;\\n\\n\\t\\t\\tawait emit(appId, {\\n\\t\\t\\t\\ttype: 'blockAction',\\n\\t\\t\\t\\tactionId,\\n\\t\\t\\t\\tcontainer: {\\n\\t\\t\\t\\t\\ttype: 'view',\\n\\t\\t\\t\\t\\tid: viewId,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tpayload: {\\n\\t\\t\\t\\t\\tblockId,\\n\\t\\t\\t\\t\\tvalue,\\n\\t\\t\\t\\t},\\n\\t\\t\\t});\\n\\t\\t},\\n\\t\\tupdateState: ({ actionId, value, /* ,appId, */ blockId = 'default' }) => {\\n\\t\\t\\tupdateValues({\\n\\t\\t\\t\\tactionId,\\n\\t\\t\\t\\tpayload: {\\n\\t\\t\\t\\t\\tblockId,\\n\\t\\t\\t\\t\\tvalue,\\n\\t\\t\\t\\t},\\n\\t\\t\\t});\\n\\t\\t},\\n\\t\\t...view,\\n\\t\\terrors,\\n\\t\\tvalues,\\n\\t\\tviewId: view.id,\\n\\t};\\n};\\n\",null],\"names\":[\"_objectSpread\",\"useDebouncedCallback\",\"useMemo\",\"useUiKitActionManager\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useModalContextValue\",\"_ref\",\"view\",\"errors\",\"values\",\"updateValues\",\"actionManager\",\"emitInteraction\",\"bind\",\"debouncedEmitInteraction\",\"action\",\"_ref2\",\"actionId\",\"viewId\",\"appId\",\"dispatchActionConfig\",\"blockId\",\"value\",\"emit\",\"includes\",\"type\",\"container\",\"id\",\"payload\",\"updateState\",\"_ref3\"],\"mappings\":\"2BAAAA,EAAmEC,EAAAC,EAAAC,EAA1DC,EAAAC,IAAoB,CAAA,uCAAsC,CAAAC,QAAAC,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAnEH,EAAOI,MAAE,CAAA,CAAAC,qBAAsBA,IAAMA,CAAA,GAA8BL,EAAAC,IAAA,CAAA,8BAAA,CAAAJ,qBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAH,QAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0BAAA,CAAAF,sBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GA4B5D,IAAME,EAAuBC,IAAmG,GAAlG,CAAEC,KAAAA,CAAI,CAAEC,OAAAA,CAAM,CAAEC,OAAAA,CAAM,CAAEC,aAAAA,CAAAA,CAA0C,CAAAJ,EAChGK,EAAgBZ,IAEhBa,EAAkBd,EAAQ,IAAMa,EAAcC,eAAe,CAACC,IAAI,CAACF,GAAgB,CAACA,EAAc,EAClGG,EAA2BjB,EAAqBe,EAAiB,KAEvE,OAAAhB,EAAAA,EAAA,CACCmB,OAAQ,MAAAC,IAA4E,GAArE,CAAEC,SAAAA,CAAQ,CAAEC,OAAAA,CAAM,CAAEC,MAAAA,CAAK,CAAEC,qBAAAA,CAAoB,CAAEC,QAAAA,CAAO,CAAEC,MAAAA,CAAAA,CAAO,CAAAN,EAC/E,GAAI,CAACG,GAAS,CAACD,EACd,OAGD,IAAMK,EAAOH,MAAAA,GAAAA,EAAsBI,QAAQ,CAAC,wBAA0BV,EAA2BF,CAEjG,OAAMW,EAAKJ,EAAO,CACjBM,KAAM,cACNR,SAAAA,EACAS,UAAW,CACVD,KAAM,OACNE,GAAIT,GAELU,QAAS,CACRP,QAAAA,EACAC,MAAAA,IAGH,EACAO,YAAaC,IAA2D,GAA1D,CAAEb,SAAAA,CAAQ,CAAEK,MAAAA,CAAK,CAAgBD,QAAAA,EAAU,SAAA,CAAW,CAAAS,EACnEpB,EAAa,CACZO,SAAAA,EACAW,QAAS,CACRP,QAAAA,EACAC,MAAAA,IAGH,CAAC,EACEf,GAAI,CAAA,EAAA,CACPC,OAAAA,EACAC,OAAAA,EACAS,OAAQX,EAAKoB,EAAAA,AAAE,EAEjB\"}"}