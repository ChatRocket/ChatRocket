{"code":"function module(i,o,a){let l,s,t,n,e,c;a.link(\"../../../client/lib/toast\",{dispatchToastMessage(i){l=i}},0),a.link(\"../../../lib/callbacks\",{callbacks(i){s=i}},1),a.link(\"../../authorization/client\",{hasPermission(i){t=i}},2),a.link(\"../../models/client/models/ChatRoom\",{ChatRoom(i){n=i}},3),a.link(\"../../utils/client/lib/SDKClient\",{sdk(i){e=i}},4),a.link(\"../../utils/client/slashCommand\",{slashCommands(i){c=i}},5),c.add({command:\"topic\",callback:async function i(i){let{params:o,message:a}=i;if(t(\"edit-room\",a.rid))try{await e.call(\"saveRoomSettings\",a.rid,\"roomTopic\",o),await s.run(\"roomTopicChanged\",n.findOne(a.rid))}catch(i){throw l({type:\"error\",message:i}),i}},options:{description:\"Slash_Topic_Description\",params:\"Slash_Topic_Params\",permission:\"edit-room\"}})}","map":"{\"version\":3,\"sources\":[\"app/slashcommands-topic/client/topic.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { SlashCommandCallbackParams } from '@rocket.chat/core-typings';\\n\\nimport { dispatchToastMessage } from '../../../client/lib/toast';\\nimport { callbacks } from '../../../lib/callbacks';\\nimport { hasPermission } from '../../authorization/client';\\nimport { ChatRoom } from '../../models/client/models/ChatRoom';\\nimport { sdk } from '../../utils/client/lib/SDKClient';\\nimport { slashCommands } from '../../utils/client/slashCommand';\\n\\nslashCommands.add({\\n\\tcommand: 'topic',\\n\\tcallback: async function Topic({ params, message }: SlashCommandCallbackParams<'topic'>): Promise<void> {\\n\\t\\tif (hasPermission('edit-room', message.rid)) {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tawait sdk.call('saveRoomSettings', message.rid, 'roomTopic', params);\\n\\t\\t\\t\\tawait callbacks.run('roomTopicChanged', ChatRoom.findOne(message.rid));\\n\\t\\t\\t} catch (error: unknown) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t\\tthrow error;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t},\\n\\toptions: {\\n\\t\\tdescription: 'Slash_Topic_Description',\\n\\t\\tparams: 'Slash_Topic_Params',\\n\\t\\tpermission: 'edit-room',\\n\\t},\\n});\\n\",null],\"names\":[\"dispatchToastMessage\",\"callbacks\",\"hasPermission\",\"ChatRoom\",\"sdk\",\"slashCommands\",\"module\",\"link\",\"v\",\"add\",\"command\",\"callback\",\"Topic\",\"_ref\",\"params\",\"message\",\"rid\",\"call\",\"run\",\"findOne\",\"error\",\"type\",\"options\",\"description\",\"permission\"],\"mappings\":\"2BAEAA,EAAiEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAxDC,EAAsBC,IAAA,CAAM,4BAA4B,CAAAP,qBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,yBAAA,CAAAN,UAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,6BAAA,CAAAL,cAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,sCAAA,CAAAJ,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,mCAAA,CAAAH,IAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kCAAA,CAAAF,cAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAOjEH,EAAcI,GAAG,CAAC,CACjBC,QAAS,QACTC,SAAU,eAAeC,EAAKC,CAAA,EAAyD,GAAxD,CAAEC,OAAAA,CAAM,CAAEC,QAAAA,CAAAA,CAA8C,CAAAF,EACtF,GAAIX,EAAc,YAAaa,EAAQC,GAAG,EACzC,GAAI,CACH,MAAMZ,EAAIa,IAAI,CAAC,mBAAoBF,EAAQC,GAAG,CAAE,YAAaF,GAC7D,MAAMb,EAAUiB,GAAG,CAAC,mBAAoBf,EAASgB,OAAO,CAACJ,EAAQC,GAAG,EACrE,CAAE,MAAOI,EAAgB,CAExB,MADApB,EAAqB,CAAEqB,KAAM,QAASN,QAASK,CAAK,GAC9CA,CACP,CAEF,EACAE,QAAS,CACRC,YAAa,0BACbT,OAAQ,qBACRU,WAAY\"}"}