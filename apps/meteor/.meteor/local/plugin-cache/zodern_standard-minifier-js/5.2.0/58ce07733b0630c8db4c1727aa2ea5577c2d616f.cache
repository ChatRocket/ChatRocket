{"code":"function module(n,i,e){var t,a,o,s,r,c,l;e.link(\"@babel/runtime/regenerator\",{default:function(n){t=n}},0),e.link(\"../../../client/lib/toast\",{dispatchToastMessage:function(n){a=n}},0),e.link(\"../../../lib/callbacks\",{callbacks:function(n){o=n}},1),e.link(\"../../authorization/client\",{hasPermission:function(n){s=n}},2),e.link(\"../../models/client/models/ChatRoom\",{ChatRoom:function(n){r=n}},3),e.link(\"../../utils/client/lib/SDKClient\",{sdk:function(n){c=n}},4),e.link(\"../../utils/client/slashCommand\",{slashCommands:function(n){l=n}},5),l.add({command:\"topic\",callback:function(n){var i,e;return t.async(function(l){for(;;)switch(l.prev=l.next){case 0:if(i=n.params,e=n.message,!s(\"edit-room\",e.rid)){l.next=13;break}return l.prev=2,l.next=5,t.awrap(c.call(\"saveRoomSettings\",e.rid,\"roomTopic\",i));case 5:return l.next=7,t.awrap(o.run(\"roomTopicChanged\",r.findOne(e.rid)));case 7:l.next=13;break;case 9:throw l.prev=9,l.t0=l.catch(2),a({type:\"error\",message:l.t0}),l.t0;case 13:case\"end\":return l.stop()}},null,null,[[2,9]],Promise)},options:{description:\"Slash_Topic_Description\",params:\"Slash_Topic_Params\",permission:\"edit-room\"}})}","map":"{\"version\":3,\"sources\":[\"app/slashcommands-topic/client/topic.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { SlashCommandCallbackParams } from '@rocket.chat/core-typings';\\n\\nimport { dispatchToastMessage } from '../../../client/lib/toast';\\nimport { callbacks } from '../../../lib/callbacks';\\nimport { hasPermission } from '../../authorization/client';\\nimport { ChatRoom } from '../../models/client/models/ChatRoom';\\nimport { sdk } from '../../utils/client/lib/SDKClient';\\nimport { slashCommands } from '../../utils/client/slashCommand';\\n\\nslashCommands.add({\\n\\tcommand: 'topic',\\n\\tcallback: async function Topic({ params, message }: SlashCommandCallbackParams<'topic'>): Promise<void> {\\n\\t\\tif (hasPermission('edit-room', message.rid)) {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tawait sdk.call('saveRoomSettings', message.rid, 'roomTopic', params);\\n\\t\\t\\t\\tawait callbacks.run('roomTopicChanged', ChatRoom.findOne(message.rid));\\n\\t\\t\\t} catch (error: unknown) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t\\tthrow error;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t},\\n\\toptions: {\\n\\t\\tdescription: 'Slash_Topic_Description',\\n\\t\\tparams: 'Slash_Topic_Params',\\n\\t\\tpermission: 'edit-room',\\n\\t},\\n});\\n\",null],\"names\":[\"_regeneratorRuntime\",\"dispatchToastMessage\",\"callbacks\",\"hasPermission\",\"ChatRoom\",\"sdk\",\"slashCommands\",\"module\",\"link\",\"default\",\"v\",\"add\",\"command\",\"callback\",\"_ref\",\"params\",\"message\",\"async\",\"_context\",\"prev\",\"next\",\"rid\",\"awrap\",\"call\",\"run\",\"findOne\",\"t0\",\"type\",\"stop\",\"Promise\",\"options\",\"description\",\"permission\"],\"mappings\":\"2BAEAA,EAAAC,EAAiEC,EAAAC,EAAAC,EAAAC,EAAAC,EAAxDC,EAAsBC,IAAA,CAAA,6BAAkC,CAAAC,QAAA,SAAAC,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAxDH,EAAsBC,IAAA,CAAM,4BAA4B,CAAAP,qBAAA,SAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,yBAAA,CAAAN,UAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,6BAAA,CAAAL,cAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sCAAA,CAAAJ,SAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,mCAAA,CAAAH,IAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,kCAAA,CAAAF,cAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAOjEJ,EAAcK,GAAG,CAAC,CACjBC,QAAS,QACTC,SAAU,SAAoBC,CAAA,EAAA,IAAAC,EAAAC,EAAA,OAAAhB,EAAAiB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAkB,GAAfL,EAAMD,EAANC,MAAM,CAAEC,EAAOF,EAAPE,OAAO,CAAA,CAC3Cb,EAAc,YAAaa,EAAQK,GAAG,EAAC,CAAAH,EAAAE,IAAA,CAAA,GAAA,KAAA,CAAA,OAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAApB,EAAAsB,KAAA,CAEnCjB,EAAIkB,IAAI,CAAC,mBAAoBP,EAAQK,GAAG,CAAE,YAAaN,GAAO,MAAA,EAAA,OAAAG,EAAAE,IAAA,CAAA,EAAApB,EAAAsB,KAAA,CAC9DpB,EAAUsB,GAAG,CAAC,mBAAoBpB,EAASqB,OAAO,CAACT,EAAQK,GAAG,GAAE,MAAA,EAAAH,EAAAE,IAAA,CAAA,GAAA,KAAA,MAAA,EAEd,MAFcF,EAAAC,IAAA,CAAA,EAAAD,EAAAQ,EAAA,CAAAR,EAAA,KAAA,CAAA,GAEtEjB,EAAqB,CAAE0B,KAAM,QAASX,QAAOE,EAAAQ,EAAAA,AAAO,GAAIR,EAAAQ,EAAA,MAAA,GAAA,IAAA,MAAA,OAAAR,EAAAU,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAAAC,QAAA,EAK3DC,QAAS,CACRC,YAAa,0BACbhB,OAAQ,qBACRiB,WAAY\"}"}