{"code":"function module(n,e,o){o.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(n){t=n}},0),o.export({PublicRoomType:function(){return A}}),o.link(\"@rocket.chat/core-typings\",{isRoomFederated:function(n){i=n}},0),o.link(\"meteor/meteor\",{Meteor:function(n){r=n}},1),o.link(\"../../../../app/authorization/client\",{hasAtLeastOnePermission:function(n){a=n}},2),o.link(\"../../../../app/models/client\",{ChatRoom:function(n){c=n}},3),o.link(\"../../../../app/settings/client\",{settings:function(n){u=n}},4),o.link(\"../../../../app/utils/client\",{getUserPreference:function(n){l=n}},5),o.link(\"../../../../app/utils/client/getRoomAvatarURL\",{getRoomAvatarURL:function(n){s=n}},6),o.link(\"../../../../definition/IRoomTypeConfig\",{RoomSettingsEnum:function(n){m=n},RoomMemberActions:function(n){f=n},UiTextContext:function(n){d=n}},7),o.link(\"../../../../lib/rooms/roomTypes/public\",{getPublicRoomType:function(n){p=n}},8),o.link(\"../../federation/Federation\",{\"*\":function(n){R=n}},9),o.link(\"../roomCoordinator\",{roomCoordinator:function(n){g=n}},10);var t,i,r,a,c,u,l,s,m,f,d,p,R,g,A=p(g);g.add(t(t({},A),{},{label:\"Channels\"}),{allowRoomSettingChange:function(n,e){if(i(n))return R.isRoomSettingAllowed(n,e);switch(e){case m.BROADCAST:return!!n.broadcast;case m.READ_ONLY:return!n.broadcast;case m.REACT_WHEN_READ_ONLY:return!!(!n.broadcast&&n.ro);case m.E2E:return!1;case m.SYSTEM_MESSAGES:default:return!0}},allowMemberAction:function(n,e,o,t){return i(n)?R.actionAllowed(n,e,o,t):e!==f.BLOCK},roomName:function(n){return n.prid||i(n)?n.fname:u.get(\"UI_Allow_room_names_with_special_chars\")&&n.fname||n.name},isGroupChat:function(n){return!0},getUiText:function(n){switch(n){case d.HIDE_WARNING:return\"Hide_Room_Warning\";case d.LEAVE_WARNING:return\"Leave_Room_Warning\";default:return\"\"}},condition:function(){return l(r.userId(),\"sidebarGroupByType\")&&(a([\"view-c-room\",\"view-joined-room\"])||!0===u.get(\"Accounts_AllowAnonymousRead\"))},getAvatarPath:function(n){return s({roomId:n._id,cache:n.avatarETag})},getIcon:function(n){return n.prid?\"discussion\":n.teamMain?\"team\":i(n)?\"globe\":\"hashtag\"},extractOpenRoomParams:function(n){return{type:\"c\",reference:n.name}},findRoom:function(n){return c.findOne({t:\"c\",name:n})},showJoinLink:function(n){return!!c.findOne({_id:n,t:\"c\"})}})}","map":"{\"version\":3,\"sources\":[\"client/lib/rooms/roomTypes/public.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { AtLeast, IRoom } from '@rocket.chat/core-typings';\\nimport { isRoomFederated } from '@rocket.chat/core-typings';\\nimport { Meteor } from 'meteor/meteor';\\nimport type { Mongo } from 'meteor/mongo';\\n\\nimport { hasAtLeastOnePermission } from '../../../../app/authorization/client';\\nimport { ChatRoom } from '../../../../app/models/client';\\nimport { settings } from '../../../../app/settings/client';\\nimport { getUserPreference } from '../../../../app/utils/client';\\nimport { getRoomAvatarURL } from '../../../../app/utils/client/getRoomAvatarURL';\\nimport type { IRoomTypeClientDirectives } from '../../../../definition/IRoomTypeConfig';\\nimport { RoomSettingsEnum, RoomMemberActions, UiTextContext } from '../../../../definition/IRoomTypeConfig';\\nimport { getPublicRoomType } from '../../../../lib/rooms/roomTypes/public';\\nimport * as Federation from '../../federation/Federation';\\nimport { roomCoordinator } from '../roomCoordinator';\\n\\nexport const PublicRoomType = getPublicRoomType(roomCoordinator);\\n\\nroomCoordinator.add(\\n\\t{\\n\\t\\t...PublicRoomType,\\n\\t\\tlabel: 'Channels',\\n\\t},\\n\\t{\\n\\t\\tallowRoomSettingChange(room, setting) {\\n\\t\\t\\tif (isRoomFederated(room as IRoom)) {\\n\\t\\t\\t\\treturn Federation.isRoomSettingAllowed(room, setting);\\n\\t\\t\\t}\\n\\t\\t\\tswitch (setting) {\\n\\t\\t\\t\\tcase RoomSettingsEnum.BROADCAST:\\n\\t\\t\\t\\t\\treturn Boolean(room.broadcast);\\n\\t\\t\\t\\tcase RoomSettingsEnum.READ_ONLY:\\n\\t\\t\\t\\t\\treturn Boolean(!room.broadcast);\\n\\t\\t\\t\\tcase RoomSettingsEnum.REACT_WHEN_READ_ONLY:\\n\\t\\t\\t\\t\\treturn Boolean(!room.broadcast && room.ro);\\n\\t\\t\\t\\tcase RoomSettingsEnum.E2E:\\n\\t\\t\\t\\t\\treturn false;\\n\\t\\t\\t\\tcase RoomSettingsEnum.SYSTEM_MESSAGES:\\n\\t\\t\\t\\tdefault:\\n\\t\\t\\t\\t\\treturn true;\\n\\t\\t\\t}\\n\\t\\t},\\n\\n\\t\\tallowMemberAction(_room, action, showingUserId, userSubscription) {\\n\\t\\t\\tif (isRoomFederated(_room as IRoom)) {\\n\\t\\t\\t\\treturn Federation.actionAllowed(_room, action, showingUserId, userSubscription);\\n\\t\\t\\t}\\n\\t\\t\\tswitch (action) {\\n\\t\\t\\t\\tcase RoomMemberActions.BLOCK:\\n\\t\\t\\t\\t\\treturn false;\\n\\t\\t\\t\\tdefault:\\n\\t\\t\\t\\t\\treturn true;\\n\\t\\t\\t}\\n\\t\\t},\\n\\n\\t\\troomName(roomData) {\\n\\t\\t\\tif (roomData.prid || isRoomFederated(roomData)) {\\n\\t\\t\\t\\treturn roomData.fname;\\n\\t\\t\\t}\\n\\t\\t\\tif (settings.get('UI_Allow_room_names_with_special_chars')) {\\n\\t\\t\\t\\treturn roomData.fname || roomData.name;\\n\\t\\t\\t}\\n\\t\\t\\treturn roomData.name;\\n\\t\\t},\\n\\n\\t\\tisGroupChat(_room) {\\n\\t\\t\\treturn true;\\n\\t\\t},\\n\\n\\t\\tgetUiText(context) {\\n\\t\\t\\tswitch (context) {\\n\\t\\t\\t\\tcase UiTextContext.HIDE_WARNING:\\n\\t\\t\\t\\t\\treturn 'Hide_Room_Warning';\\n\\t\\t\\t\\tcase UiTextContext.LEAVE_WARNING:\\n\\t\\t\\t\\t\\treturn 'Leave_Room_Warning';\\n\\t\\t\\t\\tdefault:\\n\\t\\t\\t\\t\\treturn '';\\n\\t\\t\\t}\\n\\t\\t},\\n\\n\\t\\tcondition() {\\n\\t\\t\\tconst groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\\n\\t\\t\\treturn (\\n\\t\\t\\t\\tgroupByType &&\\n\\t\\t\\t\\t(hasAtLeastOnePermission(['view-c-room', 'view-joined-room']) || settings.get('Accounts_AllowAnonymousRead') === true)\\n\\t\\t\\t);\\n\\t\\t},\\n\\n\\t\\tgetAvatarPath(room) {\\n\\t\\t\\treturn getRoomAvatarURL({ roomId: room._id, cache: room.avatarETag });\\n\\t\\t},\\n\\n\\t\\tgetIcon(room) {\\n\\t\\t\\tif (room.prid) {\\n\\t\\t\\t\\treturn 'discussion';\\n\\t\\t\\t}\\n\\t\\t\\tif (room.teamMain) {\\n\\t\\t\\t\\treturn 'team';\\n\\t\\t\\t}\\n\\t\\t\\tif (isRoomFederated(room)) {\\n\\t\\t\\t\\treturn 'globe';\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn 'hashtag';\\n\\t\\t},\\n\\n\\t\\textractOpenRoomParams({ name }) {\\n\\t\\t\\treturn { type: 'c', reference: name };\\n\\t\\t},\\n\\n\\t\\tfindRoom(identifier) {\\n\\t\\t\\tconst query: Mongo.Selector<IRoom> = {\\n\\t\\t\\t\\tt: 'c',\\n\\t\\t\\t\\tname: identifier,\\n\\t\\t\\t};\\n\\n\\t\\t\\treturn ChatRoom.findOne(query);\\n\\t\\t},\\n\\n\\t\\tshowJoinLink(roomId) {\\n\\t\\t\\treturn !!ChatRoom.findOne({ _id: roomId, t: 'c' });\\n\\t\\t},\\n\\t} as AtLeast<IRoomTypeClientDirectives, 'isGroupChat' | 'roomName'>,\\n);\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_objectSpread\",\"export\",\"PublicRoomType\",\"isRoomFederated\",\"Meteor\",\"hasAtLeastOnePermission\",\"ChatRoom\",\"settings\",\"getUserPreference\",\"getRoomAvatarURL\",\"RoomSettingsEnum\",\"RoomMemberActions\",\"UiTextContext\",\"getPublicRoomType\",\"Federation\",\"roomCoordinator\",\"add\",\"label\",\"allowRoomSettingChange\",\"room\",\"setting\",\"isRoomSettingAllowed\",\"BROADCAST\",\"Boolean\",\"broadcast\",\"READ_ONLY\",\"REACT_WHEN_READ_ONLY\",\"ro\",\"E2E\",\"SYSTEM_MESSAGES\",\"allowMemberAction\",\"_room\",\"action\",\"showingUserId\",\"userSubscription\",\"actionAllowed\",\"BLOCK\",\"roomName\",\"roomData\",\"prid\",\"fname\",\"get\",\"name\",\"isGroupChat\",\"getUiText\",\"context\",\"HIDE_WARNING\",\"LEAVE_WARNING\",\"condition\",\"groupByType\",\"userId\",\"getAvatarPath\",\"roomId\",\"_id\",\"cache\",\"avatarETag\",\"getIcon\",\"teamMain\",\"extractOpenRoomParams\",\"_ref\",\"type\",\"reference\",\"findRoom\",\"identifier\",\"findOne\",\"t\",\"showJoinLink\"],\"mappings\":\"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\"}"}