{"code":"function module(e,t,n){let a,o,r,s,l,i,u,c,k,m,g;n.link(\"@rocket.chat/fuselage\",{Button(e){a=e},ButtonGroup(e){o=e},Box(e){r=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useSessionDispatch(e){s=e},useSetting(e){l=e},useTranslation(e){i=e},useLoginWithToken(e){u=e},useToastMessageDispatch(e){c=e},useMethod(e){k=e}},1),n.link(\"@tanstack/react-query\",{useMutation(e){m=e}},2),n.link(\"react\",{default(e){g=e}},3),n.exportDefault(()=>{let e=i(),t=c(),n=l(\"Accounts_AllowAnonymousWrite\"),y=u(),_=k(\"registerUser\"),f=s(\"forceLogin\"),p=m(async function(){let e=await _(...arguments);return\"string\"!=typeof e&&e.token&&await y(e.token),e},{onError:e=>{t({type:\"error\",message:e})}}),h=()=>{p.mutate({email:null})};return g.createElement(r,{mb:16},g.createElement(o,null,g.createElement(a,{small:!0,primary:!0,onClick:()=>f(!0)},e(\"Sign_in_to_start_talking\")),n&&g.createElement(a,{small:!0,secondary:!0,onClick:()=>h()},e(\"Or_talk_as_anonymous\"))))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/composer/ComposerAnonymous.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Button, ButtonGroup, Box } from '@rocket.chat/fuselage';\\nimport {\\n\\tuseSessionDispatch,\\n\\tuseSetting,\\n\\tuseTranslation,\\n\\tuseLoginWithToken,\\n\\tuseToastMessageDispatch,\\n\\tuseMethod,\\n} from '@rocket.chat/ui-contexts';\\nimport { useMutation } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React from 'react';\\n\\nconst ComposerAnonymous = (): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst dispatch = useToastMessageDispatch();\\n\\tconst isAnonymousWriteEnabled = useSetting('Accounts_AllowAnonymousWrite');\\n\\n\\tconst loginWithToken = useLoginWithToken();\\n\\tconst anonymousUser = useMethod('registerUser');\\n\\tconst setForceLogin = useSessionDispatch('forceLogin');\\n\\n\\tconst registerAnonymous = useMutation(\\n\\t\\tasync (...params: Parameters<typeof anonymousUser>) => {\\n\\t\\t\\tconst result = await anonymousUser(...params);\\n\\t\\t\\tif (typeof result !== 'string' && result.token) {\\n\\t\\t\\t\\tawait loginWithToken(result.token);\\n\\t\\t\\t}\\n\\t\\t\\treturn result;\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tonError: (error) => {\\n\\t\\t\\t\\tdispatch({ type: 'error', message: error });\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n\\n\\tconst joinAnonymous = () => {\\n\\t\\tregisterAnonymous.mutate({ email: null });\\n\\t};\\n\\n\\treturn (\\n\\t\\t<Box mb={16}>\\n\\t\\t\\t<ButtonGroup>\\n\\t\\t\\t\\t<Button small primary onClick={() => setForceLogin(true)}>\\n\\t\\t\\t\\t\\t{t('Sign_in_to_start_talking')}\\n\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t{isAnonymousWriteEnabled && (\\n\\t\\t\\t\\t\\t<Button small secondary onClick={() => joinAnonymous()}>\\n\\t\\t\\t\\t\\t\\t{t('Or_talk_as_anonymous')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</ButtonGroup>\\n\\t\\t</Box>\\n\\t);\\n};\\n\\nexport default ComposerAnonymous;\\n\",null],\"names\":[\"Button\",\"ButtonGroup\",\"Box\",\"useSessionDispatch\",\"useSetting\",\"useTranslation\",\"useLoginWithToken\",\"useToastMessageDispatch\",\"useMethod\",\"useMutation\",\"React\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"ComposerAnonymous\",\"t\",\"dispatch\",\"isAnonymousWriteEnabled\",\"loginWithToken\",\"anonymousUser\",\"setForceLogin\",\"registerAnonymous\",\"result\",\"arguments\",\"token\",\"onError\",\"error\",\"type\",\"message\",\"joinAnonymous\",\"mutate\",\"email\",\"createElement\",\"mb\",\"small\",\"primary\",\"onClick\",\"secondary\"],\"mappings\":\"2BAAAA,EAASC,EAAQC,EAAgDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAhDC,EAAgBC,IAAE,CAAA,wBAAM,CAAuBZ,OAACa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,YAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,IAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2BAAA,CAAAT,mBAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,WAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,eAAAQ,CAAA,EAAAR,EAAAQ,CAAA,EAAAP,kBAAAO,CAAA,EAAAP,EAAAO,CAAA,EAAAN,wBAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,UAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wBAAA,CAAAH,YAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAAjEF,EAAOI,aAAU,CAaSC,KACzB,IAAMC,EAAIZ,IACJa,EAAWX,IACXY,EAA0Bf,EAAW,gCAErCgB,EAAiBd,IACjBe,EAAgBb,EAAU,gBAC1Bc,EAAgBnB,EAAmB,cAEnCoB,EAAoBd,EACzB,iBACC,IAAMe,EAAS,MAAMH,KAAcI,WAInC,MAHsB,UAAlB,OAAOD,GAAuBA,EAAOE,KAAK,EAC7C,MAAMN,EAAeI,EAAOE,KAAK,EAE3BF,CACR,EACA,CACCG,QAAUC,IACTV,EAAS,CAAEW,KAAM,QAASC,QAASF,CAAK,EACzC,IAIIG,EAAgBA,KACrBR,EAAkBS,MAAM,CAAC,CAAEC,MAAO,IAAI,EACvC,EAEA,OACCvB,EAAAwB,aAAA,CAAChC,EAAG,CAACiC,GAAI,EAAG,EACXzB,EAAAwB,aAAA,CAACjC,EAAW,KACXS,EAAAwB,aAAA,CAAClC,EAAM,CAACoC,MAAK,CAAA,EAACC,QAAO,CAAA,EAACC,QAASA,IAAMhB,EAAc,CAAA,EAAM,EACvDL,EAAE,6BAEHE,GACAT,EAAAwB,aAAA,CAAClC,EAAM,CAACoC,MAAK,CAAA,EAACG,UAAS,CAAA,EAACD,QAASA,IAAMP,GAAgB,EACrDd,EAAE,0BAMT\"}"}