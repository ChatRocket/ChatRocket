{"code":"function module(t,c,e){let n,i,o;e.link(\"@rocket.chat/emitter\",{Emitter(t){n=t}},0),e.link(\"dompurify\",{default(t){i=t}},1),e.link(\"../../../../../app/utils/client/lib/SDKClient\",{sdk(t){o=t}},2);let s=new class extends n{constructor(){super(),this.icons=new Map}get(t,c){if(t&&c){if(this.icons.has(\"\".concat(t,\"-\").concat(c)))return\"\".concat(t,\"-\").concat(c);o.rest.send(\"/apps/public/\".concat(t,\"/get-sidebar-icon?icon=\").concat(c),\"GET\").then(e=>{e.text().then(e=>{this.icons.set(\"\".concat(t,\"-\").concat(c),i.sanitize(e,{FORBID_ATTR:[\"id\"],NAMESPACE:\"http://www.w3.org/2000/svg\",USE_PROFILES:{svg:!0,svgFilters:!0}}).replace(\"<svg\",'<symbol id=\"'.concat(t,\"-\").concat(c,'\"')).replace(\"</svg>\",\"</symbol>\")),this.emit(\"change\"),this.emit(\"\".concat(t,\"-\").concat(c))})}).catch(t=>{console.error(\"error from get-sidebar-icon\",t)})}}};e.exportDefault(s)}","map":"{\"version\":3,\"sources\":[\"client/components/RoomIcon/OmnichannelRoomIcon/lib/OmnichannelRoomIconManager.ts\",\"<anon>\"],\"sourcesContent\":[\"import { Emitter } from '@rocket.chat/emitter';\\nimport DOMPurify from 'dompurify';\\n\\nimport { sdk } from '../../../../../app/utils/client/lib/SDKClient';\\n\\nconst OmnichannelRoomIconManager = new (class extends Emitter {\\n\\ticons = new Map<string, string>();\\n\\n\\tconstructor() {\\n\\t\\tsuper();\\n\\t}\\n\\n\\tpublic get(appId: string, icon: string): string | undefined {\\n\\t\\tif (!appId || !icon) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (this.icons.has(`${appId}-${icon}`)) {\\n\\t\\t\\treturn `${appId}-${icon}`;\\n\\t\\t}\\n\\t\\t// TODO: update the apps icons to send JSON instead of a string. This will allow us to use APIClient.get()\\n\\n\\t\\tsdk.rest\\n\\t\\t\\t.send(`/apps/public/${appId}/get-sidebar-icon?icon=${icon}`, 'GET')\\n\\t\\t\\t.then((response: any) => {\\n\\t\\t\\t\\tresponse.text().then((text: string) => {\\n\\t\\t\\t\\t\\tthis.icons.set(\\n\\t\\t\\t\\t\\t\\t`${appId}-${icon}`,\\n\\t\\t\\t\\t\\t\\tDOMPurify.sanitize(text, {\\n\\t\\t\\t\\t\\t\\t\\tFORBID_ATTR: ['id'],\\n\\t\\t\\t\\t\\t\\t\\tNAMESPACE: 'http://www.w3.org/2000/svg',\\n\\t\\t\\t\\t\\t\\t\\tUSE_PROFILES: { svg: true, svgFilters: true },\\n\\t\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t\\t\\t\\t.replace(`<svg`, `<symbol id=\\\"${appId}-${icon}\\\"`)\\n\\t\\t\\t\\t\\t\\t\\t.replace(`</svg>`, '</symbol>'),\\n\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\tthis.emit('change');\\n\\t\\t\\t\\t\\tthis.emit(`${appId}-${icon}`);\\n\\t\\t\\t\\t});\\n\\t\\t\\t})\\n\\t\\t\\t.catch((error: any) => {\\n\\t\\t\\t\\tconsole.error('error from get-sidebar-icon', error);\\n\\t\\t\\t});\\n\\t}\\n})();\\n\\nexport default OmnichannelRoomIconManager;\\n\",null],\"names\":[\"Emitter\",\"DOMPurify\",\"sdk\",\"module\",\"link\",\"v\",\"default\",\"OmnichannelRoomIconManager\",\"constructor\",\"icons\",\"Map\",\"get\",\"appId\",\"icon\",\"has\",\"concat\",\"rest\",\"send\",\"then\",\"response\",\"text\",\"set\",\"sanitize\",\"FORBID_ATTR\",\"NAMESPACE\",\"USE_PROFILES\",\"svg\",\"svgFilters\",\"replace\",\"emit\",\"catch\",\"error\",\"console\",\"exportDefault\"],\"mappings\":\"2BAAAA,EAA+CC,EAAAC,EAAtCC,EAASC,IAAA,CAAM,uBAAuB,CAAAJ,QAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,YAAA,CAAAE,QAAAD,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gDAAA,CAAAF,IAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAK/C,IAAME,EAA6B,IAAK,cAAcP,EAGrDQ,aAAA,CACC,KAAK,GAAG,IAAA,CAHTC,KAAK,CAAG,IAAIC,GAIZ,CAEOC,IAAIC,CAAa,CAAEC,CAAY,CAAA,CACrC,GAAI,AAACD,GAAUC,GAIf,GAAI,IAAI,CAACJ,KAAK,CAACK,GAAG,CAAA,GAAAC,MAAA,CAAIH,EAAK,KAAAG,MAAA,CAAIF,IAC9B,MAAA,GAAAE,MAAA,CAAUH,EAAK,KAAAG,MAAA,CAAIF,GAIpBX,EAAIc,IAAI,CACNC,IAAI,CAAA,gBAAAF,MAAA,CAAiBH,EAAK,2BAAAG,MAAA,CAA0BF,GAAQ,OAC5DK,IAAI,CAAEC,IACNA,EAASC,IAAI,GAAGF,IAAI,CAAEE,IACrB,IAAI,CAACX,KAAK,CAACY,GAAG,CAAA,GAAAN,MAAA,CACVH,EAAK,KAAAG,MAAA,CAAIF,GACZZ,EAAUqB,QAAQ,CAACF,EAAM,CACxBG,YAAa,CAAC,KAAK,CACnBC,UAAW,6BACXC,aAAc,CAAEC,IAAK,CAAA,EAAMC,WAAY,CAAA,CAAI,IAE1CC,OAAO,CAAA,OAAA,eAAAb,MAAA,CAAwBH,EAAK,KAAAG,MAAA,CAAIF,EAAI,MAC5Ce,OAAO,CAAA,SAAW,cAErB,IAAI,CAACC,IAAI,CAAC,UACV,IAAI,CAACA,IAAI,CAAA,GAAAd,MAAA,CAAIH,EAAK,KAAAG,MAAA,CAAIF,GACvB,EACD,GACCiB,KAAK,CAAEC,IACPC,QAAQD,KAAK,CAAC,8BAA+BA,EAC9C,GACF,GA3CD5B,EAAO8B,aAAW,CA8CH1B\"}"}