{"code":"function module(e,t,n){n.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),n.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){u=e}},1),n.export({useMembersList:function(){return i}}),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){o=e}},0),n.link(\"@tanstack/react-query\",{useInfiniteQuery:function(e){a=e}},1);var r,u,o,a,c={d:\"/v1/im.members\",p:\"/v1/groups.members\",c:\"/v1/channels.members\"},i=function(e){var t=o(\"GET\",c[e.roomType]);return a([e.roomType,\"members\",e.rid,e.type,e.debouncedText],function(n){var o,a;return r.async(function(r){for(;;)switch(r.prev=r.next){case 0:return a=null!=(o=n.pageParam)?o:0,r.abrupt(\"return\",t(u(u({roomId:e.rid,offset:a,count:20},e.debouncedText&&{filter:e.debouncedText}),\"all\"!==e.type&&{status:[e.type]})));case 3:case\"end\":return r.stop()}},null,null,null,Promise)},{getNextPageParam:function(e){var t=e.offset+e.count;return t>=e.total?void 0:t}})}}","map":"{\"version\":3,\"sources\":[\"client/views/hooks/useMembersList.ts\",\"<anon>\"],\"sourcesContent\":[\"import { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useInfiniteQuery } from '@tanstack/react-query';\\n\\ntype MembersListOptions = {\\n\\trid: string;\\n\\ttype: 'all' | 'online';\\n\\tlimit: number;\\n\\tdebouncedText: string;\\n\\troomType: 'd' | 'p' | 'c';\\n};\\n\\nconst endpointsByRoomType = {\\n\\td: '/v1/im.members',\\n\\tp: '/v1/groups.members',\\n\\tc: '/v1/channels.members',\\n} as const;\\n\\nexport const useMembersList = (options: MembersListOptions) => {\\n\\tconst getMembers = useEndpoint('GET', endpointsByRoomType[options.roomType]);\\n\\n\\treturn useInfiniteQuery(\\n\\t\\t[options.roomType, 'members', options.rid, options.type, options.debouncedText],\\n\\t\\tasync ({ pageParam }) => {\\n\\t\\t\\tconst start = pageParam ?? 0;\\n\\n\\t\\t\\treturn getMembers({\\n\\t\\t\\t\\troomId: options.rid,\\n\\t\\t\\t\\toffset: start,\\n\\t\\t\\t\\tcount: 20,\\n\\t\\t\\t\\t...(options.debouncedText && { filter: options.debouncedText }),\\n\\t\\t\\t\\t...(options.type !== 'all' && { status: [options.type] }),\\n\\t\\t\\t});\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\tgetNextPageParam: (lastPage) => {\\n\\t\\t\\t\\tconst offset = lastPage.offset + lastPage.count;\\n\\t\\t\\t\\t// if the offset is greater than the total, return undefined to stop the query from trying to fetch another page\\n\\t\\t\\t\\treturn offset >= lastPage.total ? undefined : offset;\\n\\t\\t\\t},\\n\\t\\t},\\n\\t);\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"_objectSpread\",\"export\",\"useMembersList\",\"useEndpoint\",\"useInfiniteQuery\",\"endpointsByRoomType\",\"d\",\"p\",\"c\",\"options\",\"getMembers\",\"roomType\",\"rid\",\"type\",\"debouncedText\",\"_ref\",\"pageParam\",\"start\",\"async\",\"_context\",\"prev\",\"next\",\"abrupt\",\"roomId\",\"offset\",\"count\",\"filter\",\"status\",\"stop\",\"Promise\",\"getNextPageParam\",\"lastPage\",\"total\",\"undefined\"],\"mappings\":\"uBAAsBA,EAAMC,IAAA,CAAA,6BAA2B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAvDH,EAAOM,MAAE,CAAA,CAAAC,eAAmB,WAAA,OAAAA,CAA2B,CAAA,GAAAP,EAAAC,IAAA,CAAA,2BAAA,CAAAO,YAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAQ,iBAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAWvD,IAXAC,EAAuDC,EAAAG,EAAAC,EAWjDC,EAAsB,CAC3BC,EAAG,iBACHC,EAAG,qBACHC,EAAG,wBAGSN,EAAiB,SAACO,CAA2B,EACzD,IAAMC,EAAaP,EAAY,MAAOE,CAAmB,CAACI,EAAQE,QAAQ,CAAC,EAE3E,OAAOP,EACN,CAACK,EAAQE,QAAQ,CAAE,UAAWF,EAAQG,GAAG,CAAEH,EAAQI,IAAI,CAAEJ,EAAQK,aAAa,CAAC,CAC/E,SAAAC,CAAA,EAAA,IAAAC,EAAAC,EAAA,OAAAlB,EAAAmB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAC6B,OAAtBJ,EAAQD,MADNA,CAAAA,EAASD,EAATC,SAAS,AAATA,EACMA,EAAa,EAACG,EAAAG,MAAA,CAAA,SAErBZ,EAAUV,EAAAA,EAAA,CAChBuB,OAAQd,EAAQG,GAAG,CACnBY,OAAQP,EACRQ,MAAO,EAAE,EACLhB,EAAQK,aAAa,EAAI,CAAEY,OAAQjB,EAAQK,aAAAA,AAAa,GACxDL,AAAiB,QAAjBA,EAAQI,IAAI,EAAc,CAAEc,OAAQ,CAAClB,EAAQI,IAAI,CAAA,AAAC,IACrD,MAAA,EAAA,IAAA,MAAA,OAAAM,EAAAS,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EAEH,CACCC,iBAAkB,SAACC,CAAQ,EAC1B,IAAMP,EAASO,EAASP,MAAM,CAAGO,EAASN,KAAK,CAE/C,OAAOD,GAAUO,EAASC,KAAK,CAAGC,KAAAA,EAAYT,CAC/C,GAGH\"}"}