{"code":"function module(e,n,t){var r,u,c,i,o,s;t.link(\"@rocket.chat/ui-contexts\",{useSetting:function(e){r=e}},0),t.link(\"react\",{default:function(e){u=e},useMemo:function(e){c=e},useEffect:function(e){i=e}},1),t.link(\"../contexts/UserPresenceContext\",{UserPresenceContext:function(e){o=e}},2),t.link(\"../lib/presence\",{Presence:function(e){s=e}},3),t.exportDefault(function(e){var n=e.children,t=r(\"Presence_broadcast_disabled\");return i(function(){s.setStatus(t?\"disabled\":\"enabled\")},[t]),u.createElement(o.Provider,{value:c(function(){return{queryUserData:function(e){return{subscribe:function(n){return s.listen(e,n),function(){s.stop(e,n)}},get:function(){return s.store.get(e)}}}}},[])},n)})}","map":"{\"version\":3,\"sources\":[\"client/providers/UserPresenceProvider.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { useSetting } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ReactNode } from 'react';\\nimport React, { useMemo, useEffect } from 'react';\\n\\nimport { UserPresenceContext } from '../contexts/UserPresenceContext';\\nimport { Presence } from '../lib/presence';\\n\\ntype UserPresenceProviderProps = {\\n\\tchildren?: ReactNode;\\n};\\n\\nconst UserPresenceProvider = ({ children }: UserPresenceProviderProps): ReactElement => {\\n\\tconst usePresenceDisabled = useSetting<boolean>('Presence_broadcast_disabled');\\n\\n\\tuseEffect(() => {\\n\\t\\tPresence.setStatus(usePresenceDisabled ? 'disabled' : 'enabled');\\n\\t}, [usePresenceDisabled]);\\n\\n\\treturn (\\n\\t\\t<UserPresenceContext.Provider\\n\\t\\t\\tvalue={useMemo(\\n\\t\\t\\t\\t() => ({\\n\\t\\t\\t\\t\\tqueryUserData: (uid) => {\\n\\t\\t\\t\\t\\t\\tconst subscribe = (callback: () => void) => {\\n\\t\\t\\t\\t\\t\\t\\tPresence.listen(uid, callback);\\n\\n\\t\\t\\t\\t\\t\\t\\treturn () => {\\n\\t\\t\\t\\t\\t\\t\\t\\tPresence.stop(uid, callback);\\n\\t\\t\\t\\t\\t\\t\\t};\\n\\t\\t\\t\\t\\t\\t};\\n\\n\\t\\t\\t\\t\\t\\tconst get = () => Presence.store.get(uid);\\n\\n\\t\\t\\t\\t\\t\\treturn { subscribe, get };\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t}),\\n\\t\\t\\t\\t[],\\n\\t\\t\\t)}\\n\\t\\t>\\n\\t\\t\\t{children}\\n\\t\\t</UserPresenceContext.Provider>\\n\\t);\\n};\\n\\nexport default UserPresenceProvider;\\n\",null],\"names\":[\"useSetting\",\"React\",\"useMemo\",\"useEffect\",\"UserPresenceContext\",\"Presence\",\"module\",\"link\",\"v\",\"exportDefault\",\"_ref\",\"children\",\"usePresenceDisabled\",\"setStatus\",\"createElement\",\"Provider\",\"value\",\"queryUserData\",\"uid\",\"subscribe\",\"callback\",\"listen\",\"stop\",\"get\",\"store\"],\"mappings\":\"uBAWA,IAXAA,EAAsDC,EAAAC,EAAAC,EAAAC,EAAAC,EAA7CC,EAAYC,IAAA,CAAM,2BAA2B,CAAAP,WAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAC,CAAA,EAAAP,EAAAO,CAAA,EAAAN,QAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,UAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kCAAA,CAAAH,oBAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kBAAA,CAAAF,SAAA,SAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAAtDF,EAAOG,aAAY,CAWU,SAAAC,CAAA,EAA0D,IAAvDC,EAAQD,EAARC,QAAQ,CACjCC,EAAsBZ,EAAoB,+BAMhD,OAJAG,EAAU,WACTE,EAASQ,SAAS,CAACD,EAAsB,WAAa,UACvD,EAAG,CAACA,EAAoB,EAGvBX,EAAAa,aAAA,CAACV,EAAoBW,QAAQ,CAAA,CAC5BC,MAAOd,EACN,WAAA,MAAO,CACNe,cAAe,SAACC,CAAG,EAWlB,MAAO,CAAEC,UAVS,SAACC,CAAoB,EAGtC,OAFAf,EAASgB,MAAM,CAACH,EAAKE,GAEd,WACNf,EAASiB,IAAI,CAACJ,EAAKE,EACpB,CACD,EAIoBG,IAFR,WAAA,OAAMlB,EAASmB,KAAK,CAACD,GAAG,CAACL,EAAI,CAElB,CACxB,EACA,EACD,EAAE,CACD,EAEDP,EAGJ\"}"}