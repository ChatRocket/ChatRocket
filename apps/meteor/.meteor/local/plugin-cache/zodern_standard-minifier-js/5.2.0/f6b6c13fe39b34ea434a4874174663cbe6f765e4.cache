{"code":"function module(e,t,n){var c,a,l,i,o,u,r,s,m,d,f,k,E,g,b,_,S,p,h,y,A;n.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){c=e}},0),n.link(\"@rocket.chat/fuselage\",{Box:function(e){a=e},Callout:function(e){l=e},Margins:function(e){i=e},States:function(e){o=e},StatesIcon:function(e){u=e},StatesSubtitle:function(e){r=e},StatesTitle:function(e){s=e},Tabs:function(e){m=e}},0),n.link(\"react\",{default:function(e){d=e},useState:function(e){f=e}},1),n.link(\"react-i18next\",{useTranslation:function(e){k=e}},2),n.link(\"../../components/Page\",{Page:function(e){E=e},PageHeader:function(e){g=e},PageScrollableContentWithShadow:function(e){b=e}},3),n.link(\"../../components/message/list/MessageListSkeleton\",{default:function(e){_=e}},4),n.link(\"../../lib/errorHandling\",{getErrorMessage:function(e){S=e}},5),n.link(\"./components/AuditForm\",{default:function(e){p=e}},6),n.link(\"./components/AuditResult\",{default:function(e){h=e}},7),n.link(\"./hooks/useAuditMutation\",{useAuditMutation:function(e){y=e}},8),n.link(\"./hooks/useAuditTab\",{useAuditTab:function(e){A=e}},9),n.exportDefault(function(){var e=A(),t=c(e,2),n=t[0],C=t[1],M=f(),x=c(M,2),T=x[0],I=x[1],P=y(n),v=k().t;return d.createElement(E,{background:\"room\"},d.createElement(g,{title:v(\"Message_auditing\")}),d.createElement(m,null,d.createElement(m.Item,{selected:\"\"===n,onClick:function(){return C(\"\")}},v(\"Rooms\")),d.createElement(m.Item,{selected:\"u\"===n,onClick:function(){return C(\"u\")}},v(\"Users\")),d.createElement(m.Item,{selected:\"d\"===n,onClick:function(){return C(\"d\")}},v(\"Direct_Messages\")),d.createElement(m.Item,{selected:\"l\"===n,onClick:function(){return C(\"l\")}},v(\"Omnichannel\"))),d.createElement(b,{mb:-4},d.createElement(i,{block:4},d.createElement(p,{key:n,type:n,setSelectedRoom:I,onSubmit:P.mutate}),null!=T&&T.encrypted&&\"\"===n?d.createElement(l,{type:\"warning\",icon:\"circle-exclamation\",marginBlock:\"x16\"},d.createElement(a,{fontScale:\"p2b\"},v(\"Encrypted_content_cannot_be_searched_and_audited\")),v(\"Encrypted_content_cannot_be_searched_and_audited_subtitle\")):null,P.isLoading&&d.createElement(_,{messageCount:5}),P.isError&&d.createElement(o,null,d.createElement(u,{name:\"circle-exclamation\",variation:\"danger\"}),d.createElement(s,null,v(\"Error\")),d.createElement(r,null,S(P.error))),P.isSuccess&&d.createElement(h,{messages:P.data}))))})}","map":"{\"version\":3,\"sources\":[\"client/views/audit/AuditPage.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { Box, Callout, Margins, States, StatesIcon, StatesSubtitle, StatesTitle, Tabs } from '@rocket.chat/fuselage';\\nimport React, { useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { Page, PageHeader, PageScrollableContentWithShadow } from '../../components/Page';\\nimport MessageListSkeleton from '../../components/message/list/MessageListSkeleton';\\nimport { getErrorMessage } from '../../lib/errorHandling';\\nimport AuditForm from './components/AuditForm';\\nimport AuditResult from './components/AuditResult';\\nimport { useAuditMutation } from './hooks/useAuditMutation';\\nimport { useAuditTab } from './hooks/useAuditTab';\\n\\nconst AuditPage = () => {\\n\\tconst [type, setType] = useAuditTab();\\n\\tconst [selectedRoom, setSelectedRoom] = useState<IRoom | undefined>();\\n\\tconst auditMutation = useAuditMutation(type);\\n\\tconst { t } = useTranslation();\\n\\n\\treturn (\\n\\t\\t<Page background='room'>\\n\\t\\t\\t<PageHeader title={t('Message_auditing')} />\\n\\t\\t\\t<Tabs>\\n\\t\\t\\t\\t<Tabs.Item selected={type === ''} onClick={() => setType('')}>\\n\\t\\t\\t\\t\\t{t('Rooms')}\\n\\t\\t\\t\\t</Tabs.Item>\\n\\t\\t\\t\\t<Tabs.Item selected={type === 'u'} onClick={() => setType('u')}>\\n\\t\\t\\t\\t\\t{t('Users')}\\n\\t\\t\\t\\t</Tabs.Item>\\n\\t\\t\\t\\t<Tabs.Item selected={type === 'd'} onClick={() => setType('d')}>\\n\\t\\t\\t\\t\\t{t('Direct_Messages')}\\n\\t\\t\\t\\t</Tabs.Item>\\n\\t\\t\\t\\t<Tabs.Item selected={type === 'l'} onClick={() => setType('l')}>\\n\\t\\t\\t\\t\\t{t('Omnichannel')}\\n\\t\\t\\t\\t</Tabs.Item>\\n\\t\\t\\t</Tabs>\\n\\t\\t\\t<PageScrollableContentWithShadow mb={-4}>\\n\\t\\t\\t\\t<Margins block={4}>\\n\\t\\t\\t\\t\\t<AuditForm key={type} type={type} setSelectedRoom={setSelectedRoom} onSubmit={auditMutation.mutate} />\\n\\t\\t\\t\\t\\t{selectedRoom?.encrypted && type === '' ? (\\n\\t\\t\\t\\t\\t\\t<Callout type='warning' icon='circle-exclamation' marginBlock='x16'>\\n\\t\\t\\t\\t\\t\\t\\t<Box fontScale='p2b'>{t('Encrypted_content_cannot_be_searched_and_audited')}</Box>\\n\\t\\t\\t\\t\\t\\t\\t{t('Encrypted_content_cannot_be_searched_and_audited_subtitle')}\\n\\t\\t\\t\\t\\t\\t</Callout>\\n\\t\\t\\t\\t\\t) : null}\\n\\t\\t\\t\\t\\t{auditMutation.isLoading && <MessageListSkeleton messageCount={5} />}\\n\\t\\t\\t\\t\\t{auditMutation.isError && (\\n\\t\\t\\t\\t\\t\\t<States>\\n\\t\\t\\t\\t\\t\\t\\t<StatesIcon name='circle-exclamation' variation='danger' />\\n\\t\\t\\t\\t\\t\\t\\t<StatesTitle>{t('Error')}</StatesTitle>\\n\\t\\t\\t\\t\\t\\t\\t<StatesSubtitle>{getErrorMessage(auditMutation.error)}</StatesSubtitle>\\n\\t\\t\\t\\t\\t\\t</States>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t{auditMutation.isSuccess && <AuditResult messages={auditMutation.data} />}\\n\\t\\t\\t\\t</Margins>\\n\\t\\t\\t</PageScrollableContentWithShadow>\\n\\t\\t</Page>\\n\\t);\\n};\\n\\nexport default AuditPage;\\n\",null],\"names\":[\"_slicedToArray\",\"Box\",\"Callout\",\"Margins\",\"States\",\"StatesIcon\",\"StatesSubtitle\",\"StatesTitle\",\"Tabs\",\"React\",\"useState\",\"useTranslation\",\"Page\",\"PageHeader\",\"PageScrollableContentWithShadow\",\"MessageListSkeleton\",\"getErrorMessage\",\"AuditForm\",\"AuditResult\",\"useAuditMutation\",\"useAuditTab\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_useAuditTab\",\"_useAuditTab2\",\"type\",\"setType\",\"_useState\",\"_useState2\",\"selectedRoom\",\"setSelectedRoom\",\"auditMutation\",\"t\",\"_useTranslation\",\"createElement\",\"background\",\"title\",\"Item\",\"selected\",\"onClick\",\"mb\",\"block\",\"key\",\"onSubmit\",\"mutate\",\"encrypted\",\"icon\",\"marginBlock\",\"fontScale\",\"isLoading\",\"messageCount\",\"isError\",\"name\",\"variation\",\"error\",\"isSuccess\",\"messages\",\"data\"],\"mappings\":\"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\"}"}