{"code":"function module(e,n,t){var o,r,a,l,c,i,u,s,f,p,k,m,d,E,g,h,T,C,_,b,x=[\"onClose\",\"onStatusChange\"];t.link(\"@babel/runtime/regenerator\",{default:function(e){o=e}},0),t.link(\"@babel/runtime/helpers/slicedToArray\",{default:function(e){r=e}},1),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){a=e}},2),t.link(\"@rocket.chat/fuselage\",{Box:function(e){l=e},Button:function(e){c=e},ButtonGroup:function(e){i=e},Field:function(e){u=e},FieldLabel:function(e){s=e},FieldRow:function(e){f=e},FieldError:function(e){p=e},Modal:function(e){k=e},TextInput:function(e){m=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useMethod:function(e){d=e},useSetModal:function(e){E=e},useToastMessageDispatch:function(e){g=e}},1),t.link(\"react\",{default:function(e){h=e},useState:function(e){T=e}},2),t.link(\"react-i18next\",{useTranslation:function(e){C=e},Trans:function(e){_=e}},3),t.link(\"./RegisterWorkspaceModal\",{default:function(e){b=e}},4),t.exportDefault(function(e){var n=e.onClose,t=e.onStatusChange,W=a(e,x),v=E(),R=C().t,S=g(),w=d(\"cloud:connectWorkspace\"),y=T(\"\"),F=r(y,2),M=F[0],B=F[1],z=T(!1),D=r(z,2),G=D[0],H=D[1],N=T(!1),P=r(N,2),j=P[0],A=P[1],I=M.length>0;return h.createElement(k,W,h.createElement(k.Header,null,h.createElement(k.HeaderText,null,h.createElement(k.Title,null,R(\"RegisterWorkspace_Token_Title\"))),h.createElement(k.Close,{onClick:n})),h.createElement(k.Content,null,h.createElement(l,{is:\"p\"},h.createElement(_,{i18nKey:\"RegisterWorkspace_Token_Step_One\"},\"1. Go to:\",\" \",h.createElement(l,{is:\"span\",fontWeight:600},\"cloud.rocket.chat \",\">\",\" Workspaces\"),\" \",\"and click\",\" \",h.createElement(l,{is:\"span\",fontWeight:600},'\"Register self-managed\"'),\".\")),h.createElement(l,{is:\"p\",fontSize:\"p2\"},\"2. \"+R(\"RegisterWorkspace_Token_Step_Two\")),h.createElement(u,{pbs:10},h.createElement(s,null,R(\"Registration_Token\")),h.createElement(f,null,h.createElement(m,{onChange:function(e){B(e.target.value)},value:M})),j&&h.createElement(p,null,R(\"Token_Not_Recognized\")))),h.createElement(k.Footer,null,h.createElement(i,{align:\"end\"},h.createElement(c,{onClick:function(){v(h.createElement(b,{onClose:function(){return v(null)}}))}},R(\"Back\")),h.createElement(c,{primary:!0,disabled:!I,loading:G,onClick:function(){return o.async(function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),A(!1),e.prev=2,e.next=5,o.awrap(w(M));case 5:if(e.sent){e.next=8;break}throw Error(R(\"RegisterWorkspace_Connection_Error\"));case 8:v(null),S({type:\"success\",message:R(\"Connected\")}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),S({type:\"error\",message:e.t0}),A(!0);case 16:return e.prev=16,e.next=19,o.awrap(null==t?void 0:t());case 19:return H(!1),e.finish(16);case 21:case\"end\":return e.stop()}},null,null,[[2,12,16,21]],Promise)}},R(\"Next\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/workspace/VersionCard/modals/RegisterWorkspaceTokenModal.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Button, ButtonGroup, Field, FieldLabel, FieldRow, FieldError, Modal, TextInput } from '@rocket.chat/fuselage';\\nimport { useMethod, useSetModal, useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\nimport type { ChangeEvent } from 'react';\\nimport React, { useState } from 'react';\\nimport { useTranslation, Trans } from 'react-i18next';\\n\\nimport WorkspaceRegistrationModal from './RegisterWorkspaceModal';\\n\\ntype RegisterWorkspaceTokenModalProps = {\\n\\tonClose: () => void;\\n\\tonStatusChange?: () => void;\\n};\\n\\nconst RegisterWorkspaceTokenModal = ({ onClose, onStatusChange, ...props }: RegisterWorkspaceTokenModalProps) => {\\n\\tconst setModal = useSetModal();\\n\\tconst { t } = useTranslation();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst connectWorkspace = useMethod('cloud:connectWorkspace');\\n\\n\\tconst [token, setToken] = useState('');\\n\\tconst [processing, setProcessing] = useState(false);\\n\\tconst [error, setError] = useState(false);\\n\\n\\tconst handleBackAction = (): void => {\\n\\t\\tconst handleModalClose = (): void => setModal(null);\\n\\t\\tsetModal(<WorkspaceRegistrationModal onClose={handleModalClose} />);\\n\\t};\\n\\n\\tconst handleTokenChange = (event: ChangeEvent<HTMLInputElement>) => {\\n\\t\\tsetToken(event.target.value);\\n\\t};\\n\\n\\tconst isToken = token.length > 0;\\n\\n\\tconst handleConnectButtonClick = async (): Promise<void> => {\\n\\t\\tsetProcessing(true);\\n\\t\\tsetError(false);\\n\\n\\t\\ttry {\\n\\t\\t\\tconst isConnected = await connectWorkspace(token);\\n\\n\\t\\t\\tif (!isConnected) {\\n\\t\\t\\t\\tthrow Error(t('RegisterWorkspace_Connection_Error'));\\n\\t\\t\\t}\\n\\n\\t\\t\\tsetModal(null);\\n\\n\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('Connected') });\\n\\t\\t} catch (error) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\tsetError(true);\\n\\t\\t} finally {\\n\\t\\t\\tawait onStatusChange?.();\\n\\t\\t\\tsetProcessing(false);\\n\\t\\t}\\n\\t};\\n\\n\\treturn (\\n\\t\\t<Modal {...props}>\\n\\t\\t\\t<Modal.Header>\\n\\t\\t\\t\\t<Modal.HeaderText>\\n\\t\\t\\t\\t\\t<Modal.Title>{t('RegisterWorkspace_Token_Title')}</Modal.Title>\\n\\t\\t\\t\\t</Modal.HeaderText>\\n\\t\\t\\t\\t<Modal.Close onClick={onClose} />\\n\\t\\t\\t</Modal.Header>\\n\\t\\t\\t<Modal.Content>\\n\\t\\t\\t\\t<Box is='p'>\\n\\t\\t\\t\\t\\t<Trans i18nKey='RegisterWorkspace_Token_Step_One'>\\n\\t\\t\\t\\t\\t\\t1. Go to:{' '}\\n\\t\\t\\t\\t\\t\\t<Box is='span' fontWeight={600}>\\n\\t\\t\\t\\t\\t\\t\\tcloud.rocket.chat {'>'} Workspaces\\n\\t\\t\\t\\t\\t\\t</Box>{' '}\\n\\t\\t\\t\\t\\t\\tand click{' '}\\n\\t\\t\\t\\t\\t\\t<Box is='span' fontWeight={600}>\\n\\t\\t\\t\\t\\t\\t\\t\\\"Register self-managed\\\"\\n\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t.\\n\\t\\t\\t\\t\\t</Trans>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t<Box is='p' fontSize='p2'>{`2. ${t('RegisterWorkspace_Token_Step_Two')}`}</Box>\\n\\t\\t\\t\\t<Field pbs={10}>\\n\\t\\t\\t\\t\\t<FieldLabel>{t('Registration_Token')}</FieldLabel>\\n\\t\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t\\t<TextInput onChange={handleTokenChange} value={token} />\\n\\t\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t\\t{error && <FieldError>{t('Token_Not_Recognized')}</FieldError>}\\n\\t\\t\\t\\t</Field>\\n\\t\\t\\t</Modal.Content>\\n\\t\\t\\t<Modal.Footer>\\n\\t\\t\\t\\t<ButtonGroup align='end'>\\n\\t\\t\\t\\t\\t<Button onClick={handleBackAction}>{t('Back')}</Button>\\n\\t\\t\\t\\t\\t<Button primary disabled={!isToken} loading={processing} onClick={handleConnectButtonClick}>\\n\\t\\t\\t\\t\\t\\t{t('Next')}\\n\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t</Modal.Footer>\\n\\t\\t</Modal>\\n\\t);\\n};\\n\\nexport default RegisterWorkspaceTokenModal;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_slicedToArray\",\"_objectWithoutProperties\",\"Box\",\"Button\",\"ButtonGroup\",\"Field\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"Modal\",\"TextInput\",\"useMethod\",\"useSetModal\",\"useToastMessageDispatch\",\"React\",\"useState\",\"useTranslation\",\"Trans\",\"WorkspaceRegistrationModal\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"onClose\",\"onStatusChange\",\"props\",\"_excluded\",\"setModal\",\"t\",\"_useTranslation\",\"dispatchToastMessage\",\"connectWorkspace\",\"_useState\",\"_useState2\",\"token\",\"setToken\",\"_useState3\",\"_useState4\",\"processing\",\"setProcessing\",\"_useState5\",\"_useState6\",\"error\",\"setError\",\"isToken\",\"length\",\"createElement\",\"Header\",\"HeaderText\",\"Title\",\"Close\",\"onClick\",\"Content\",\"is\",\"i18nKey\",\"fontWeight\",\"fontSize\",\"pbs\",\"onChange\",\"event\",\"target\",\"value\",\"Footer\",\"align\",\"primary\",\"disabled\",\"loading\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"sent\",\"Error\",\"type\",\"message\",\"t0\",\"finish\",\"stop\",\"Promise\"],\"mappings\":\"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\"}"}