{"code":"function module(e,o,t){let n,a,r,l,i,d,u,c,s;t.link(\"@rocket.chat/core-typings\",{TEAM_TYPE(e){n=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useUserId(e){a=e},useEndpoint(e){r=e}},1),t.link(\"@tanstack/react-query\",{useQuery(e){l=e}},2),t.link(\"react\",{default(e){i=e}},3),t.link(\"../../../components/Header\",{HeaderTag(e){d=e},HeaderTagIcon(e){u=e},HeaderTagSkeleton(e){c=e}},4),t.link(\"../../../lib/utils/goToRoomById\",{goToRoomById(e){s=e}},5),t.exportDefault(e=>{var o;let{room:t}=e,{teamId:m}=t,k=a();if(!m)throw Error(\"invalid rid\");if(!k)throw Error(\"invalid uid\");let v=r(\"GET\",\"/v1/teams.info\"),E=r(\"GET\",\"/v1/users.listTeams\"),{data:I,isLoading:f,isError:y}=l([\"teamId\",m],async()=>v({teamId:m}),{keepPreviousData:!0,retry:(e,o)=>(null==o?void 0:o.error)===\"unauthorized\"&&!1}),{data:T,isLoading:g}=l([\"userId\",k],async()=>E({userId:k})),p=(null==T?void 0:null===(o=T.teams)||void 0===o?void 0:o.find(e=>e._id===m))||!1,h=(null==I?void 0:I.teamInfo.type)===n.PUBLIC,H=()=>{let e=null==I?void 0:I.teamInfo.roomId;e&&(h||p)&&s(e)};return f||g?i.createElement(c,null):y?null:i.createElement(d,{role:\"button\",tabIndex:0,onKeyDown:e=>(\"Space\"===e.code||\"Enter\"===e.code)&&H(),onClick:H},i.createElement(u,{icon:{name:h?\"team\":\"team-lock\"}}),null==I?void 0:I.teamInfo.name)})}","map":"{\"version\":3,\"sources\":[\"client/views/room/HeaderV2/ParentTeam.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { TEAM_TYPE } from '@rocket.chat/core-typings';\\nimport { useUserId, useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport React from 'react';\\n\\nimport { HeaderTag, HeaderTagIcon, HeaderTagSkeleton } from '../../../components/Header';\\nimport { goToRoomById } from '../../../lib/utils/goToRoomById';\\n\\ntype APIErrorResult = { success: boolean; error: string };\\n\\ntype ParentTeamProps = {\\n\\troom: IRoom;\\n};\\n\\nconst ParentTeam = ({ room }: ParentTeamProps) => {\\n\\tconst { teamId } = room;\\n\\tconst userId = useUserId();\\n\\n\\tif (!teamId) {\\n\\t\\tthrow new Error('invalid rid');\\n\\t}\\n\\n\\tif (!userId) {\\n\\t\\tthrow new Error('invalid uid');\\n\\t}\\n\\n\\tconst teamsInfoEndpoint = useEndpoint('GET', '/v1/teams.info');\\n\\tconst userTeamsListEndpoint = useEndpoint('GET', '/v1/users.listTeams');\\n\\n\\tconst {\\n\\t\\tdata: teamInfoData,\\n\\t\\tisLoading: teamInfoLoading,\\n\\t\\tisError: teamInfoError,\\n\\t} = useQuery(['teamId', teamId], async () => teamsInfoEndpoint({ teamId }), {\\n\\t\\tkeepPreviousData: true,\\n\\t\\tretry: (_, error) => (error as APIErrorResult)?.error === 'unauthorized' && false,\\n\\t});\\n\\n\\tconst { data: userTeams, isLoading: userTeamsLoading } = useQuery(['userId', userId], async () => userTeamsListEndpoint({ userId }));\\n\\n\\tconst userBelongsToTeam = userTeams?.teams?.find((team) => team._id === teamId) || false;\\n\\tconst isTeamPublic = teamInfoData?.teamInfo.type === TEAM_TYPE.PUBLIC;\\n\\n\\tconst redirectToMainRoom = (): void => {\\n\\t\\tconst rid = teamInfoData?.teamInfo.roomId;\\n\\t\\tif (!rid) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (!(isTeamPublic || userBelongsToTeam)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tgoToRoomById(rid);\\n\\t};\\n\\n\\tif (teamInfoLoading || userTeamsLoading) {\\n\\t\\treturn <HeaderTagSkeleton />;\\n\\t}\\n\\n\\tif (teamInfoError) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<HeaderTag\\n\\t\\t\\trole='button'\\n\\t\\t\\ttabIndex={0}\\n\\t\\t\\tonKeyDown={(e) => (e.code === 'Space' || e.code === 'Enter') && redirectToMainRoom()}\\n\\t\\t\\tonClick={redirectToMainRoom}\\n\\t\\t>\\n\\t\\t\\t<HeaderTagIcon icon={{ name: isTeamPublic ? 'team' : 'team-lock' }} />\\n\\t\\t\\t{teamInfoData?.teamInfo.name}\\n\\t\\t</HeaderTag>\\n\\t);\\n};\\n\\nexport default ParentTeam;\\n\",null],\"names\":[\"TEAM_TYPE\",\"useUserId\",\"useEndpoint\",\"useQuery\",\"React\",\"HeaderTag\",\"HeaderTagIcon\",\"HeaderTagSkeleton\",\"goToRoomById\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"_userTeams$teams\",\"room\",\"teamId\",\"userId\",\"Error\",\"teamsInfoEndpoint\",\"userTeamsListEndpoint\",\"data\",\"teamInfoData\",\"isLoading\",\"teamInfoLoading\",\"isError\",\"teamInfoError\",\"keepPreviousData\",\"retry\",\"_\",\"error\",\"userTeams\",\"userTeamsLoading\",\"userBelongsToTeam\",\"teams\",\"find\",\"team\",\"_id\",\"isTeamPublic\",\"teamInfo\",\"type\",\"PUBLIC\",\"redirectToMainRoom\",\"rid\",\"roomId\",\"createElement\",\"role\",\"tabIndex\",\"onKeyDown\",\"e\",\"code\",\"onClick\",\"icon\",\"name\"],\"mappings\":\"2BACAA,EAAsDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAA7CC,EAAWC,IAAA,CAAM,4BAA4B,CAAAV,UAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2BAAA,CAAAT,UAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,YAAAS,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,wBAAA,CAAAP,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,6BAAA,CAAAL,UAAAM,CAAA,EAAAN,EAAAM,CAAA,EAAAL,cAAAK,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,kBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,kCAAA,CAAAF,aAAAG,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAAtDF,EAAOI,aAAa,CAcDC,IAA8B,IAAAC,EAAA,GAA7B,CAAEC,KAAAA,CAAAA,CAAuB,CAAAF,EACtC,CAAEG,OAAAA,CAAAA,CAAQ,CAAGD,EACbE,EAASjB,IAEf,GAAI,CAACgB,EACJ,MAAM,AAAIE,MAAM,eAGjB,GAAI,CAACD,EACJ,MAAM,AAAIC,MAAM,eAGjB,IAAMC,EAAoBlB,EAAY,MAAO,kBACvCmB,EAAwBnB,EAAY,MAAO,uBAE3C,CACLoB,KAAMC,CAAY,CAClBC,UAAWC,CAAe,CAC1BC,QAASC,CAAAA,CACT,CAAGxB,EAAS,CAAC,SAAUc,EAAO,CAAE,SAAYG,EAAkB,CAAEH,OAAAA,CAAM,GAAK,CAC3EW,iBAAkB,CAAA,EAClBC,MAAOA,CAACC,EAAGC,IAAW,AAAAA,CAAAA,MAAAA,EAAwB,KAAA,EAAxBA,EAA0BA,KAAK,AAALA,IAAU,gBAAkB,CAAA,IAGvE,CAAET,KAAMU,CAAS,CAAER,UAAWS,CAAAA,CAAkB,CAAG9B,EAAS,CAAC,SAAUe,EAAO,CAAE,SAAYG,EAAsB,CAAEH,OAAAA,CAAM,IAE1HgB,EAAoB,AAAAF,CAAAA,MAAAA,EAAS,KAAA,EAAA,AAAO,OAAPjB,CAAAA,EAATiB,EAAWG,KAAK,AAALA,GAAKpB,AAAA,KAAA,IAAAA,EAAA,KAAA,EAAhBA,EAAkBqB,IAAI,CAAEC,GAASA,EAAKC,GAAG,GAAKrB,EAAM,GAAK,CAAA,EAC7EsB,EAAe,AAAAhB,CAAAA,MAAAA,EAAY,KAAA,EAAZA,EAAciB,QAAQ,CAACC,IAAI,AAAJA,IAASzC,EAAU0C,MAAM,CAE/DC,EAAqBA,KAC1B,IAAMC,EAAMrB,MAAAA,EAAY,KAAA,EAAZA,EAAciB,QAAQ,CAACK,MAAM,CACpCD,GAICL,CAAAA,GAAgBL,CAAAA,GAItB1B,EAAaoC,EACd,SAEA,AAAInB,GAAmBQ,EACf7B,EAAA0C,aAAA,CAACvC,EAAiB,MAGtBoB,EACI,KAIPvB,EAAA0C,aAAA,CAACzC,EAAS,CACT0C,KAAK,SACLC,SAAU,EACVC,UAAYC,GAAM,AAACA,CAAAA,AAAW,UAAXA,EAAEC,IAAI,EAAgBD,AAAW,UAAXA,EAAEC,IAAI,AAAK,GAAYR,IAChES,QAAST,CAAmB,EAE5BvC,EAAA0C,aAAA,CAACxC,EAAa,CAAC+C,KAAM,CAAEC,KAAMf,EAAe,OAAS,WAAW,CAAG,GAClEhB,MAAAA,EAAY,KAAA,EAAZA,EAAciB,QAAQ,CAACc,IACd,CAEb\"}"}