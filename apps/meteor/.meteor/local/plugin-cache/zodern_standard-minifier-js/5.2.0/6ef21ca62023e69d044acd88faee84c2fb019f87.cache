{"code":"function module(e,n,t){var i,r,l,o,c,u,s=[\"_id\"];t.link(\"@babel/runtime/regenerator\",{default:function(e){i=e}},0),t.link(\"@babel/runtime/helpers/objectSpread2\",{default:function(e){r=e}},1),t.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){l=e}},2),t.link(\"@babel/runtime/helpers/inheritsLoose\",{default:function(e){o=e}},3),t.export({PrivateSettingsCachedCollection:function(){return a}}),t.link(\"../../../app/ui-cached-collection/client\",{CachedCollection:function(e){c=e}},0),t.link(\"../../../app/utils/client/lib/SDKClient\",{sdk:function(e){u=e}},1);var a=new(function(e){function n(){return e.call(this,{name:\"private-settings\",eventType:\"notify-logged\"})||this}return o(n,e),n.prototype.setupListener=function(){var e=this;return i.async(function(n){for(;;)switch(n.prev=n.next){case 0:u.stream(\"notify-logged\",[this.eventName],function n(n,t){var o,c;return i.async(function i(i){for(;;)switch(i.prev=i.next){case 0:o=t._id,c=l(t,s),e.log(\"record received\",n,r({_id:o},c)),e.collection.update({_id:o},{$set:c},{upsert:!0}),e.sync();case 4:case\"end\":return i.stop()}},null,null,null,Promise)});case 1:case\"end\":return n.stop()}},null,this,null,Promise)},n}(c))}","map":"{\"version\":3,\"sources\":[\"client/lib/settings/PrivateSettingsCachedCollection.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { ISetting } from '@rocket.chat/core-typings';\\n\\nimport { CachedCollection } from '../../../app/ui-cached-collection/client';\\nimport { sdk } from '../../../app/utils/client/lib/SDKClient';\\n\\nclass PrivateSettingsCachedCollection extends CachedCollection<ISetting> {\\n\\tconstructor() {\\n\\t\\tsuper({\\n\\t\\t\\tname: 'private-settings',\\n\\t\\t\\teventType: 'notify-logged',\\n\\t\\t});\\n\\t}\\n\\n\\tasync setupListener(): Promise<void> {\\n\\t\\tsdk.stream('notify-logged', [this.eventName as 'private-settings-changed'], async (t: string, { _id, ...record }: { _id: string }) => {\\n\\t\\t\\tthis.log('record received', t, { _id, ...record });\\n\\t\\t\\tthis.collection.update({ _id }, { $set: record }, { upsert: true });\\n\\t\\t\\tthis.sync();\\n\\t\\t});\\n\\t}\\n}\\n\\nconst instance = new PrivateSettingsCachedCollection();\\n\\nexport {\\n\\t/** @deprecated */\\n\\tinstance as PrivateSettingsCachedCollection,\\n};\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_objectSpread\",\"_objectWithoutProperties\",\"_inheritsLoose\",\"CachedCollection\",\"sdk\",\"module\",\"link\",\"default\",\"v\",\"export\",\"PrivateSettingsCachedCollection\",\"instance\",\"_CachedCollection\",\"call\",\"name\",\"eventType\",\"_proto\",\"prototype\",\"setupListener\",\"_this\",\"async\",\"_context2\",\"prev\",\"next\",\"stream\",\"eventName\",\"_callee\",\"t\",\"_ref\",\"_id\",\"record\",\"_callee$\",\"_context\",\"_excluded\",\"log\",\"collection\",\"update\",\"$set\",\"upsert\",\"sync\",\"stop\",\"Promise\"],\"mappings\":\"2BAEAA,EAA4EC,EAAAC,EAAAC,EAAAC,EAAAC,YAAnEC,EAAkBC,IAAM,CAAA,6BAAA,CAAAC,QAAA,SAA2CC,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iDAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAA5EH,EAAOI,MAAE,CAAA,CAAAC,gCAAwB,WAAA,OAAAC,CAAA,CAAA,GAA2CN,EAAAC,IAAA,CAAA,2CAAA,CAAAH,iBAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0CAAA,CAAAF,IAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAoB5E,IAAMG,EAAW,GAjBqB,CAAA,SAAAC,CAAA,EACrC,SAAAF,IAAA,OACCE,EAAAC,IAAA,CAAA,IAAA,CAAM,CACLC,KAAM,mBACNC,UAAW,mBACV,IAAA,AACH,CAQC,OARAb,EAAAQ,EAAAE,GAAAI,AAAAN,EAAAO,SAAA,CAEKC,aAAa,CAAnB,WAAA,IAAAC,EAAA,IAAA,CAAA,OAAApB,EAAAqB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EACCnB,EAAIoB,MAAM,CAAC,gBAAiB,CAAC,IAAI,CAACC,SAAuC,CAAC,CAAE,SAAAC,EAAOC,CAAS,CAAAC,CAAA,EAAA,IAAAC,EAAAC,EAAA,OAAA/B,EAAAqB,KAAA,CAAA,SAAAW,EAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAV,IAAA,CAAAU,EAAAT,IAAA,EAAA,KAAA,EAAIM,EAAGD,EAAHC,GAAG,CAAKC,EAAM7B,EAAA2B,EAAAK,GAC7Gd,EAAKe,GAAG,CAAC,kBAAmBP,EAAC3B,EAAA,CAAI6B,IAAAA,CAAG,EAAKC,IACzCX,EAAKgB,UAAU,CAACC,MAAM,CAAC,CAAEP,IAAAA,CAAG,EAAI,CAAEQ,KAAMP,CAAM,EAAI,CAAEQ,OAAQ,CAAA,CAAI,GAChEnB,EAAKoB,IAAI,EAAG,MAAA,EAAA,IAAA,MAAA,OAAAP,EAAAQ,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,EACV,MAAA,EAAA,IAAA,MAAA,OAAApB,EAAAmB,IAAA,EAAA,CAAA,EAAA,KAAA,IAAA,CAAA,KAAAC,QAAA,EACH/B,CAAA,EAd4CP,EAA0B\"}"}