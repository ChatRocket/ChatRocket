{"code":"function module(e,n,o){o.link(\"@babel/runtime/regenerator\",{default:function(e){r=e}},0),o.export({useIgnoreUserAction:function(){return d}}),o.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback:function(e){t=e}},0),o.link(\"@rocket.chat/ui-contexts\",{useTranslation:function(e){i=e},useUserSubscription:function(e){s=e},useUserRoom:function(e){u=e},useUserId:function(e){c=e},useToastMessageDispatch:function(e){a=e},useEndpoint:function(e){f=e}},1),o.link(\"react\",{useMemo:function(e){g=e}},2),o.link(\"../../../lib/getRoomDirectives\",{getRoomDirectives:function(e){l=e}},3);var r,t,i,s,u,c,a,f,g,l,d=function(e,n){var o=i(),d=u(n),m=e._id,p=c(),v=a(),b=s(n),h=f(\"GET\",\"/v1/chat.ignoreUser\"),k=(null==b?void 0:b.ignored)&&b.ignored.indexOf(m)>-1;if(!d)throw Error(\"Room not provided\");var U=l({room:d,showingUserId:m,userSubscription:b}).roomCanIgnore,_=t(function(){return r.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.awrap(h({rid:n,userId:m,ignore:String(!k)}));case 3:k?v({type:\"success\",message:o(\"User_has_been_unignored\")}):v({type:\"success\",message:o(\"User_has_been_ignored\")}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),v({type:\"error\",message:e.t0});case 9:case\"end\":return e.stop()}},null,null,[[0,6]],Promise)});return g(function(){return U&&m!==p?{content:o(k?\"Unignore\":\"Ignore\"),icon:\"ban\",onClick:_,type:\"management\"}:void 0},[_,k,p,U,o,m])}}","map":"{\"version\":3,\"sources\":[\"client/views/room/hooks/useUserInfoActions/actions/useIgnoreUserAction.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, IUser } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport {\\n\\tuseTranslation,\\n\\tuseUserSubscription,\\n\\tuseUserRoom,\\n\\tuseUserId,\\n\\tuseToastMessageDispatch,\\n\\tuseEndpoint,\\n} from '@rocket.chat/ui-contexts';\\nimport { useMemo } from 'react';\\n\\nimport { getRoomDirectives } from '../../../lib/getRoomDirectives';\\nimport type { UserInfoAction, UserInfoActionType } from '../useUserInfoActions';\\n\\nexport const useIgnoreUserAction = (user: Pick<IUser, '_id' | 'username'>, rid: IRoom['_id']): UserInfoAction | undefined => {\\n\\tconst t = useTranslation();\\n\\tconst room = useUserRoom(rid);\\n\\tconst { _id: uid } = user;\\n\\tconst ownUserId = useUserId();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst currentSubscription = useUserSubscription(rid);\\n\\tconst ignoreUser = useEndpoint('GET', '/v1/chat.ignoreUser');\\n\\n\\tconst isIgnored = currentSubscription?.ignored && currentSubscription.ignored.indexOf(uid) > -1;\\n\\n\\tif (!room) {\\n\\t\\tthrow Error('Room not provided');\\n\\t}\\n\\n\\tconst { roomCanIgnore } = getRoomDirectives({ room, showingUserId: uid, userSubscription: currentSubscription });\\n\\n\\tconst ignoreUserAction = useMutableCallback(async () => {\\n\\t\\ttry {\\n\\t\\t\\tawait ignoreUser({ rid, userId: uid, ignore: String(!isIgnored) });\\n\\t\\t\\tif (isIgnored) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('User_has_been_unignored') });\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'success', message: t('User_has_been_ignored') });\\n\\t\\t\\t}\\n\\t\\t} catch (error: unknown) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t});\\n\\n\\tconst ignoreUserOption = useMemo(\\n\\t\\t() =>\\n\\t\\t\\troomCanIgnore && uid !== ownUserId\\n\\t\\t\\t\\t? {\\n\\t\\t\\t\\t\\t\\tcontent: t(isIgnored ? 'Unignore' : 'Ignore'),\\n\\t\\t\\t\\t\\t\\ticon: 'ban' as const,\\n\\t\\t\\t\\t\\t\\tonClick: ignoreUserAction,\\n\\t\\t\\t\\t\\t\\ttype: 'management' as UserInfoActionType,\\n\\t\\t\\t\\t  }\\n\\t\\t\\t\\t: undefined,\\n\\t\\t[ignoreUserAction, isIgnored, ownUserId, roomCanIgnore, t, uid],\\n\\t);\\n\\n\\treturn ignoreUserOption;\\n};\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"export\",\"useIgnoreUserAction\",\"useMutableCallback\",\"useTranslation\",\"useUserSubscription\",\"useUserRoom\",\"useUserId\",\"useToastMessageDispatch\",\"useEndpoint\",\"useMemo\",\"getRoomDirectives\",\"user\",\"rid\",\"t\",\"room\",\"uid\",\"_id\",\"ownUserId\",\"dispatchToastMessage\",\"currentSubscription\",\"ignoreUser\",\"isIgnored\",\"ignored\",\"indexOf\",\"Error\",\"roomCanIgnore\",\"_getRoomDirectives\",\"showingUserId\",\"userSubscription\",\"ignoreUserAction\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"userId\",\"ignore\",\"String\",\"type\",\"message\",\"t0\",\"stop\",\"Promise\",\"content\",\"icon\",\"onClick\",\"undefined\"],\"mappings\":\"uBACSA,EAAoBC,IAAM,CAAA,6BAA8B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAjEH,EAAOK,MAAE,CAAA,CAAAC,oBAA0B,WAAA,OAAAA,CAA8B,CAAA,GAAAN,EAAAC,IAAA,CAAA,8BAAA,CAAAM,mBAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAO,eAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,EAAAM,oBAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,EAAAO,YAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,EAAAQ,UAAA,SAAAR,CAAA,EAAAQ,EAAAR,CAAA,EAAAS,wBAAA,SAAAT,CAAA,EAAAS,EAAAT,CAAA,EAAAU,YAAA,SAAAV,CAAA,EAAAU,EAAAV,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAa,QAAA,SAAAX,CAAA,EAAAW,EAAAX,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iCAAA,CAAAc,kBAAA,SAAAZ,CAAA,EAAAY,EAAAZ,CAAA,CAAA,EAAA,GAc1D,IAdPC,EAAiEG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAcpDT,EAAsB,SAACU,CAAqC,CAAEC,CAAiB,EAC3F,IAAMC,EAAIV,IACJW,EAAOT,EAAYO,GACZG,EAAQJ,EAAbK,GAAG,CACLC,EAAYX,IACZY,EAAuBX,IACvBY,EAAsBf,EAAoBQ,GAC1CQ,EAAaZ,EAAY,MAAO,uBAEhCa,EAAY,AAAAF,CAAAA,MAAAA,EAAmB,KAAA,EAAnBA,EAAqBG,OAAO,AAAPA,GAAWH,EAAoBG,OAAO,CAACC,OAAO,CAACR,GAAO,GAE7F,GAAI,CAACD,EACJ,MAAMU,MAAM,qBAGb,IAAQC,EAAaC,AAAKhB,EAAkB,CAAEI,KAAAA,EAAMa,cAAeZ,EAAKa,iBAAkBT,CAAmB,GAArGM,aAAa,CAEfI,EAAmB3B,EAAmB,WAAA,OAAAH,EAAA+B,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAAA,OAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAE,IAAA,CAAA,EAAAlC,EAAAmC,KAAA,CAEpCd,EAAW,CAAER,IAAAA,EAAKuB,OAAQpB,EAAKqB,OAAQC,OAAO,CAAChB,EAAU,GAAG,MAAA,EAC9DA,EACHH,EAAqB,CAAEoB,KAAM,UAAWC,QAAS1B,EAAE,0BAA0B,GAE7EK,EAAqB,CAAEoB,KAAM,UAAWC,QAAS1B,EAAE,wBAAwB,GAC3EkB,EAAAE,IAAA,CAAA,EAAA,KAAA,MAAA,EAAAF,EAAAC,IAAA,CAAA,EAAAD,EAAAS,EAAA,CAAAT,EAAA,KAAA,CAAA,GAEDb,EAAqB,CAAEoB,KAAM,QAASC,QAAOR,EAAAS,EAAAA,AAAO,EAAI,MAAA,EAAA,IAAA,MAAA,OAAAT,EAAAU,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAAAC,QAAA,GAiB1D,OAbyBjC,EACxB,WAAA,OACCgB,GAAiBV,IAAQE,EACtB,CACA0B,QAAS9B,EAAEQ,EAAY,WAAa,UACpCuB,KAAM,MACNC,QAAShB,EACTS,KAAM,cAENQ,KAAAA,CAAS,EACb,CAACjB,EAAkBR,EAAWJ,EAAWQ,EAAeZ,EAAGE,EAAI,CAIjE\"}"}