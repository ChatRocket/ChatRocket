{"code":"function module(t,e,n){n.link(\"@babel/runtime/regenerator\",{default:function(t){i=t}},0),n.link(\"@rocket.chat/onboarding-ui\",{AdminInfoPage:function(t){r=t}},0),n.link(\"@rocket.chat/string-helpers\",{escapeRegExp:function(t){a=t}},1),n.link(\"@rocket.chat/ui-contexts\",{useSetting:function(t){u=t}},2),n.link(\"react\",{default:function(t){o=t}},3),n.link(\"react-i18next\",{useTranslation:function(t){c=t}},4),n.link(\"../contexts/SetupWizardContext\",{useSetupWizardContext:function(t){l=t}},5);var i,r,a,u,o,c,l,s=[\"all\",\"here\",\"admin\"].map(function(t){return RegExp(\"^\"+a(t).trim()+\"$\",\"i\")});n.exportDefault(function(){var t=c().t,e=RegExp(\"^\"+u(\"UTF8_User_Names_Validation\")+\"$\"),n=l(),f=n.currentStep,d=n.validateEmail,m=n.registerAdminUser,p=n.maxSteps;return o.createElement(r,{validatePassword:function(t){return t.length>0},passwordRulesHint:\"\",validateUsername:function(n){return!(!e.test(n)||s.length&&s.some(function(t){return t.test(a(n).trim())}))||t(\"Invalid_username\")},validateEmail:d,currentStep:f,stepCount:p,onSubmit:function(t){return i.async(function(e){for(;;)switch(e.prev=e.next){case 0:m(t);case 1:case\"end\":return e.stop()}},null,null,null,Promise)}})})}","map":"{\"version\":3,\"sources\":[\"client/views/setupWizard/steps/AdminInfoStep.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { AdminInfoPage } from '@rocket.chat/onboarding-ui';\\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\\nimport { useSetting } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ComponentProps } from 'react';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useSetupWizardContext } from '../contexts/SetupWizardContext';\\n\\nconst toRegExp = (username: string): RegExp => new RegExp(`^${escapeRegExp(username).trim()}$`, 'i');\\nconst usernameBlackList = ['all', 'here', 'admin'].map(toRegExp);\\nconst hasBlockedName = (username: string): boolean =>\\n\\t!!usernameBlackList.length && usernameBlackList.some((restrictedUsername) => restrictedUsername.test(escapeRegExp(username).trim()));\\n\\nconst AdminInfoStep = (): ReactElement => {\\n\\tconst { t } = useTranslation();\\n\\tconst regexpForUsernameValidation = useSetting('UTF8_User_Names_Validation');\\n\\tconst usernameRegExp = new RegExp(`^${regexpForUsernameValidation}$`);\\n\\n\\tconst { currentStep, validateEmail, registerAdminUser, maxSteps } = useSetupWizardContext();\\n\\n\\t// TODO: check if username exists\\n\\tconst validateUsername = (username: string): boolean | string => {\\n\\t\\tif (!usernameRegExp.test(username) || hasBlockedName(username)) {\\n\\t\\t\\treturn t('Invalid_username');\\n\\t\\t}\\n\\n\\t\\treturn true;\\n\\t};\\n\\n\\tconst handleSubmit: ComponentProps<typeof AdminInfoPage>['onSubmit'] = async (data) => {\\n\\t\\tregisterAdminUser(data);\\n\\t};\\n\\n\\treturn (\\n\\t\\t<AdminInfoPage\\n\\t\\t\\tvalidatePassword={(password): boolean => password.length > 0}\\n\\t\\t\\tpasswordRulesHint=''\\n\\t\\t\\tvalidateUsername={validateUsername}\\n\\t\\t\\tvalidateEmail={validateEmail}\\n\\t\\t\\tcurrentStep={currentStep}\\n\\t\\t\\tstepCount={maxSteps}\\n\\t\\t\\tonSubmit={handleSubmit}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default AdminInfoStep;\\n\",null],\"names\":[\"module\",\"link\",\"default\",\"v\",\"_regeneratorRuntime\",\"AdminInfoPage\",\"escapeRegExp\",\"useSetting\",\"React\",\"useTranslation\",\"useSetupWizardContext\",\"usernameBlackList\",\"map\",\"username\",\"RegExp\",\"trim\",\"exportDefault\",\"t\",\"_useTranslation\",\"usernameRegExp\",\"_useSetupWizardContex\",\"currentStep\",\"validateEmail\",\"registerAdminUser\",\"maxSteps\",\"createElement\",\"validatePassword\",\"password\",\"length\",\"passwordRulesHint\",\"validateUsername\",\"test\",\"some\",\"restrictedUsername\",\"stepCount\",\"onSubmit\",\"data\",\"async\",\"_context\",\"prev\",\"next\",\"stop\",\"Promise\"],\"mappings\":\"uBAAwBA,EAAMC,IAAA,CAAA,6BAA6B,CAAAC,QAAA,SAAAC,CAAA,EAAAC,EAAAD,CAAA,CAAA,EAAA,GAAlDH,EAAeC,IAAA,CAAM,6BAA6B,CAAAI,cAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,8BAAA,CAAAK,aAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAM,WAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAK,EAAAL,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAQ,eAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,iCAAA,CAAAS,sBAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAU3D,IAVAC,EAAAC,EAA2DC,EAAAC,EAAAC,EAAAC,EAAAC,EAUrDC,EAAoB,CAAC,MAAO,OAAQ,QAAQ,CAACC,GAAG,CADrC,SAACC,CAAgB,EAAA,OAAa,AAAIC,OAAM,IAAKR,EAAaO,GAAUE,IAAI,GAAE,IAAK,IAAI,GATpGf,EAAOgB,aAAE,CAca,WACrB,IAAQC,EAACC,AAAKT,IAANQ,CAAC,CAEHE,EAAiB,AAAIL,OAAM,IADGP,EAAW,8BACkB,KAEjEa,EAAoEV,IAA5DW,EAAWD,EAAXC,WAAW,CAAEC,EAAaF,EAAbE,aAAa,CAAEC,EAAiBH,EAAjBG,iBAAiB,CAAEC,EAAQJ,EAARI,QAAQ,CAe/D,OACChB,EAAAiB,aAAA,CAACpB,EAAa,CACbqB,iBAAkB,SAACC,CAAQ,EAAA,OAAcA,EAASC,MAAM,CAAG,CAAC,EAC5DC,kBAAkB,GAClBC,iBAhBuB,SAACjB,CAAgB,QACzC,CAAI,CAAA,CAACM,EAAeY,IAAI,CAAClB,IAX1B,AAAEF,EAAkBiB,MAAM,EAAIjB,EAAkBqB,IAAI,CAAC,SAACC,CAAkB,EAAA,OAAKA,EAAmBF,IAAI,CAACzB,EAW/CO,GAXsEE,IAAI,GAAG,EAWrE,GACrDE,EAAE,mBAIX,EAWEK,cAAeA,EACfD,YAAaA,EACba,UAAWV,EACXW,SAZqE,SAAOC,CAAI,EAAA,OAAAhC,EAAAiC,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EACjFjB,EAAkBa,EAAM,MAAA,EAAA,IAAA,MAAA,OAAAE,EAAAG,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAC,QAAA,CAWA,EAG1B\"}"}