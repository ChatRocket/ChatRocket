{"code":"function module(e,n,t){var s,a,i,o,r,u,c,l,f,m;t.link(\"@babel/runtime/regenerator\",{default:function(e){s=e}},0),t.link(\"@babel/runtime/helpers/toConsumableArray\",{default:function(e){a=e}},1),t.link(\"@rocket.chat/ui-contexts\",{useEndpoint:function(e){i=e}},0),t.link(\"@tanstack/react-query\",{useQuery:function(e){o=e}},1),t.link(\"react\",{default:function(e){r=e}},2),t.link(\"react-i18next\",{useTranslation:function(e){u=e}},3),t.link(\"../../../lib/onClientMessageReceived\",{onClientMessageReceived:function(e){c=e}},4),t.link(\"../../../lib/utils/mapMessageFromApi\",{mapMessageFromApi:function(e){l=e}},5),t.link(\"../contexts/RoomContext\",{useRoom:function(e){f=e}},6),t.link(\"./MessageListTab\",{default:function(e){m=e}},7),t.exportDefault(function(){var e=i(\"GET\",\"/v1/chat.getPinnedMessages\"),n=f(),t=o([\"rooms\",n._id,\"pinned-messages\"],function(){var t,i,o;return s.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t=[],i=0,r.next=4,s.awrap(e({roomId:n._id,offset:0}));case 4:o=r.sent;case 5:if(!(o.count>0)){r.next=13;break}t.push.apply(t,a(o.messages.map(l)));case 7:return i+=o.count,r.next=10,s.awrap(e({roomId:n._id,offset:i}));case 10:o=r.sent,r.next=5;break;case 13:return r.abrupt(\"return\",Promise.all(t.map(c)));case 14:case\"end\":return r.stop()}},null,null,null,Promise)}),p=u().t;return r.createElement(m,{iconName:\"pin\",title:p(\"Pinned_Messages\"),emptyResultMessage:p(\"No_pinned_messages\"),context:\"pinned\",queryResult:t})})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/PinnedMessagesTab.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage } from '@rocket.chat/core-typings';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useQuery } from '@tanstack/react-query';\\nimport type { ReactElement } from 'react';\\nimport React from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { onClientMessageReceived } from '../../../lib/onClientMessageReceived';\\nimport { mapMessageFromApi } from '../../../lib/utils/mapMessageFromApi';\\nimport { useRoom } from '../contexts/RoomContext';\\nimport MessageListTab from './MessageListTab';\\n\\nconst PinnedMessagesTab = (): ReactElement => {\\n\\tconst getPinnedMessages = useEndpoint('GET', '/v1/chat.getPinnedMessages');\\n\\n\\tconst room = useRoom();\\n\\n\\tconst pinnedMessagesQueryResult = useQuery(['rooms', room._id, 'pinned-messages'] as const, async () => {\\n\\t\\tconst messages: IMessage[] = [];\\n\\n\\t\\tfor (\\n\\t\\t\\tlet offset = 0, result = await getPinnedMessages({ roomId: room._id, offset: 0 });\\n\\t\\t\\tresult.count > 0;\\n\\t\\t\\t// eslint-disable-next-line no-await-in-loop\\n\\t\\t\\toffset += result.count, result = await getPinnedMessages({ roomId: room._id, offset })\\n\\t\\t) {\\n\\t\\t\\tmessages.push(...result.messages.map(mapMessageFromApi));\\n\\t\\t}\\n\\n\\t\\treturn Promise.all(messages.map(onClientMessageReceived));\\n\\t});\\n\\n\\tconst { t } = useTranslation();\\n\\n\\treturn (\\n\\t\\t<MessageListTab\\n\\t\\t\\ticonName='pin'\\n\\t\\t\\ttitle={t('Pinned_Messages')}\\n\\t\\t\\temptyResultMessage={t('No_pinned_messages')}\\n\\t\\t\\tcontext='pinned'\\n\\t\\t\\tqueryResult={pinnedMessagesQueryResult}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default PinnedMessagesTab;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"_toConsumableArray\",\"useEndpoint\",\"useQuery\",\"React\",\"useTranslation\",\"onClientMessageReceived\",\"mapMessageFromApi\",\"useRoom\",\"MessageListTab\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"getPinnedMessages\",\"room\",\"pinnedMessagesQueryResult\",\"_id\",\"messages\",\"offset\",\"result\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"roomId\",\"sent\",\"count\",\"push\",\"apply\",\"map\",\"abrupt\",\"Promise\",\"all\",\"stop\",\"t\",\"_useTranslation\",\"createElement\",\"iconName\",\"title\",\"emptyResultMessage\",\"context\",\"queryResult\"],\"mappings\":\"uBAYA,IAXAA,EAAuDC,EAAvDC,EAAuDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAjCC,EAAMC,IAAA,CAAA,6BAA2B,CAAAC,QAAA,SAAAC,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2CAAA,CAAAC,QAAA,SAAAC,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAA9CH,EAAaC,IAAA,CAAM,2BAA2B,CAAAT,YAAA,SAAAW,CAAA,EAAAX,EAAAW,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wBAAA,CAAAR,SAAA,SAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAE,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,gBAAA,CAAAN,eAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAL,wBAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,uCAAA,CAAAJ,kBAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,0BAAA,CAAAH,QAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,mBAAA,CAAA,QAAA,SAAAE,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAvDH,EAAOI,aAAa,CAWM,WACzB,IAAMC,EAAoBb,EAAY,MAAO,8BAEvCc,EAAOR,IAEPS,EAA4Bd,EAAS,CAAC,QAASa,EAAKE,GAAG,CAAE,kBAA2B,CAAE,WAAA,IAAAC,EAAAC,EAAAC,EAAA,OAAArB,EAAAsB,KAAA,CAAA,SAAAC,CAAA,EAAA,OAAA,OAAAA,EAAAC,IAAA,CAAAD,EAAAE,IAAA,EAAA,KAAA,EAI5E,OAHTN,EAAuB,EAAE,CAG1BC,EAAS,EAACG,EAAAE,IAAA,CAAA,EAAAzB,EAAA0B,KAAA,CAAiBX,EAAkB,CAAEY,OAAQX,EAAKE,GAAG,CAAEE,OAAQ,CAAC,GAAG,MAAA,EAAjEC,EAAME,EAAAK,IAAA,MAAA,EAAA,GAAA,CACtBP,CAAAA,EAAOQ,KAAK,CAAG,CAAA,EAAC,CAAAN,EAAAE,IAAA,CAAA,GAAA,KAAA,CAIhBN,EAASW,IAAI,CAAAC,KAAA,CAAbZ,EAAQlB,EAASoB,EAAOF,QAAQ,CAACa,GAAG,CAACzB,IAAoB,MAAA,EAFnC,OAAtBa,GAAUC,EAAOQ,KAAK,CAAAN,EAAAE,IAAA,CAAA,GAAAzB,EAAA0B,KAAA,CAAiBX,EAAkB,CAAEY,OAAQX,EAAKE,GAAG,CAAEE,OAAAA,CAAM,GAAG,MAAA,GAA9DC,EAAME,EAAAK,IAAA,CAAAL,EAAAE,IAAA,CAAA,EAAA,KAAA,MAAA,GAAA,OAAAF,EAAAU,MAAA,CAAA,SAKxBC,QAAQC,GAAG,CAAChB,EAASa,GAAG,CAAC1B,IAAyB,MAAA,GAAA,IAAA,MAAA,OAAAiB,EAAAa,IAAA,EAAA,CAAA,EAAA,KAAA,KAAA,KAAAF,QAAA,GAGlDG,EAACC,AAAKjC,IAANgC,CAAC,CAET,OACCjC,EAAAmC,aAAA,CAAC9B,EAAc,CACd+B,SAAS,MACTC,MAAOJ,EAAE,mBACTK,mBAAoBL,EAAE,sBACtBM,QAAQ,SACRC,YAAa3B,CAA0B,EAG1C\"}"}