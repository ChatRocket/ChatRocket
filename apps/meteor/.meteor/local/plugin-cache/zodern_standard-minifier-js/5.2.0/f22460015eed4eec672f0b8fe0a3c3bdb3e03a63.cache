{"code":"function module(n,t,a){a.export({useAutoTranslate:function(){return g}}),a.link(\"@rocket.chat/ui-contexts\",{useSetting:function(n){o=n}},0),a.link(\"react\",{useCallback:function(n){e=n},useMemo:function(n){u=n}},1),a.link(\"../../../../../app/autotranslate/client\",{AutoTranslate:function(n){i=n}},2),a.link(\"../../../../lib/rooms/roomCoordinator\",{roomCoordinator:function(n){r=n}},3),a.link(\"../lib/autoTranslate\",{hasTranslationLanguageInAttachments:function(n){s=n},hasTranslationLanguageInMessage:function(n){l=n}},4),a.link(\"../lib/isOwnUserMessage\",{isOwnUserMessage:function(n){c=n}},5);var o,e,u,i,r,s,l,c,g=function(n){var t=!!o(\"AutoTranslate_Enabled\")&&(null==n?void 0:n.autoTranslateLanguage)&&(null==n?void 0:n.autoTranslate),a=u(function(){return n&&r.isLivechatRoom(null==n?void 0:n.t)},[n]),g=!!(t||a),f=g&&n?i.getLanguage(n.rid):void 0,T=e(function(t){return!!g&&!!f&&!c(t,n)&&!t.autoTranslateShowInverse&&(l(t,f)||s(t.attachments,f))},[n,g,f]);return u(function(){return{autoTranslateEnabled:g,autoTranslateLanguage:f,showAutoTranslate:T}},[g,f,T])}}","map":"{\"version\":3,\"sources\":[\"client/views/room/MessageList/hooks/useAutoTranslate.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage, ISubscription, ITranslatedMessage } from '@rocket.chat/core-typings';\\nimport { useSetting } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useMemo } from 'react';\\n\\nimport { AutoTranslate } from '../../../../../app/autotranslate/client';\\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\\nimport { hasTranslationLanguageInAttachments, hasTranslationLanguageInMessage } from '../lib/autoTranslate';\\nimport { isOwnUserMessage } from '../lib/isOwnUserMessage';\\n\\nexport type AutoTranslateOptions = {\\n\\tautoTranslateEnabled: boolean;\\n\\tautoTranslateLanguage?: string;\\n\\tshowAutoTranslate: (message: IMessage & Partial<ITranslatedMessage>) => boolean;\\n};\\n\\nexport const useAutoTranslate = (subscription?: ISubscription): AutoTranslateOptions => {\\n\\tconst autoTranslateSettingEnabled = Boolean(useSetting('AutoTranslate_Enabled'));\\n\\tconst isSubscriptionEnabled = autoTranslateSettingEnabled && subscription?.autoTranslateLanguage && subscription?.autoTranslate;\\n\\tconst isLivechatRoom = useMemo(() => subscription && roomCoordinator.isLivechatRoom(subscription?.t), [subscription]);\\n\\tconst autoTranslateEnabled = Boolean(isSubscriptionEnabled || isLivechatRoom);\\n\\tconst autoTranslateLanguage = autoTranslateEnabled && subscription ? AutoTranslate.getLanguage(subscription.rid) : undefined;\\n\\n\\tconst showAutoTranslate = useCallback(\\n\\t\\t(message: IMessage): boolean => {\\n\\t\\t\\tif (!autoTranslateEnabled || !autoTranslateLanguage) {\\n\\t\\t\\t\\treturn false;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn (\\n\\t\\t\\t\\t!isOwnUserMessage(message, subscription) &&\\n\\t\\t\\t\\t!(message as { autoTranslateShowInverse?: boolean }).autoTranslateShowInverse &&\\n\\t\\t\\t\\t(hasTranslationLanguageInMessage(message, autoTranslateLanguage) ||\\n\\t\\t\\t\\t\\thasTranslationLanguageInAttachments(message.attachments, autoTranslateLanguage))\\n\\t\\t\\t);\\n\\t\\t},\\n\\t\\t[subscription, autoTranslateEnabled, autoTranslateLanguage],\\n\\t);\\n\\n\\treturn useMemo(() => {\\n\\t\\treturn { autoTranslateEnabled, autoTranslateLanguage, showAutoTranslate };\\n\\t}, [autoTranslateEnabled, autoTranslateLanguage, showAutoTranslate]);\\n};\\n\",null],\"names\":[\"module\",\"export\",\"useAutoTranslate\",\"link\",\"useSetting\",\"v\",\"useCallback\",\"useMemo\",\"AutoTranslate\",\"roomCoordinator\",\"hasTranslationLanguageInAttachments\",\"hasTranslationLanguageInMessage\",\"isOwnUserMessage\",\"subscription\",\"isSubscriptionEnabled\",\"autoTranslateSettingEnabled\",\"Boolean\",\"autoTranslateLanguage\",\"autoTranslate\",\"isLivechatRoom\",\"t\",\"autoTranslateEnabled\",\"getLanguage\",\"rid\",\"undefined\",\"showAutoTranslate\",\"message\",\"autoTranslateShowInverse\",\"attachments\"],\"mappings\":\"uBACAA,EAAOC,MAAE,CAAA,CAAAC,iBAAkB,WAAA,OAAAA,CAA2B,CAAA,GAAAF,EAAAG,IAAA,CAAA,2BAAA,CAAAC,WAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,QAAA,CAAAG,YAAA,SAAAD,CAAA,EAAAC,EAAAD,CAAA,EAAAE,QAAA,SAAAF,CAAA,EAAAE,EAAAF,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,0CAAA,CAAAK,cAAA,SAAAH,CAAA,EAAAG,EAAAH,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,wCAAA,CAAAM,gBAAA,SAAAJ,CAAA,EAAAI,EAAAJ,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,uBAAA,CAAAO,oCAAA,SAAAL,CAAA,EAAAK,EAAAL,CAAA,EAAAM,gCAAA,SAAAN,CAAA,EAAAM,EAAAN,CAAA,CAAA,EAAA,GAAAL,EAAAG,IAAA,CAAA,0BAAA,CAAAS,iBAAA,SAAAP,CAAA,EAAAO,EAAAP,CAAA,CAAA,EAAA,GAc/C,IAd+CD,EAAAE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAczCV,EAAmB,SAACW,CAA4B,EAE5D,IAAMC,EAAwBC,AADMC,CAAAA,CAAQZ,EAAW,0BACMS,CAAAA,MAAAA,EAAY,KAAA,EAAZA,EAAcI,qBAAqB,AAArBA,GAAyBJ,CAAAA,MAAAA,EAAY,KAAA,EAAZA,EAAcK,aAAa,AAAbA,EAC5GC,EAAiBZ,EAAQ,WAAA,OAAMM,GAAgBJ,EAAgBU,cAAc,CAACN,MAAAA,EAAY,KAAA,EAAZA,EAAcO,CAAC,CAAC,EAAE,CAACP,EAAa,EAC9GQ,EAAuBL,CAAAA,CAAQF,CAAAA,GAAyBK,CAAAA,EACxDF,EAAwBI,GAAwBR,EAAeL,EAAcc,WAAW,CAACT,EAAaU,GAAG,EAAIC,KAAAA,EAE7GC,EAAoBnB,EACzB,SAACoB,CAAiB,QACjB,EAAKL,KAAyBJ,GAK7B,CAACL,EAAiBc,EAASb,IAC3B,CAAEa,EAAmDC,wBAAwB,EAC5EhB,CAAAA,EAAgCe,EAAST,IACzCP,EAAoCgB,EAAQE,WAAW,CAAEX,EAAqB,CAEjF,EACA,CAACJ,EAAcQ,EAAsBJ,EAAsB,EAG5D,OAAOV,EAAQ,WACd,MAAO,CAAEc,qBAAAA,EAAsBJ,sBAAAA,EAAuBQ,kBAAAA,CAAiB,CACxE,EAAG,CAACJ,EAAsBJ,EAAuBQ,EAAkB,CACpE\"}"}