{"code":"function module(e,t,n){var a,r,o,u,l,c,i,s,d,f,p,D;n.link(\"@babel/runtime/regenerator\",{default:function(e){a=e}},0),n.link(\"@rocket.chat/fuselage\",{Accordion:function(e){r=e},ButtonGroup:function(e){o=e},Button:function(e){u=e},Box:function(e){l=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useSetModal:function(e){c=e},useToastMessageDispatch:function(e){i=e},useMethod:function(e){s=e}},1),n.link(\"react\",{default:function(e){d=e},useCallback:function(e){f=e}},2),n.link(\"react-i18next\",{useTranslation:function(e){p=e}},3),n.link(\"./MyDataModal\",{default:function(e){D=e}},4),n.exportDefault(function(){var e=p().t,t=c(),n=i(),_=s(\"requestDataDownload\"),x=f(function(r){var o,u,c,i;return a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,a.awrap(_({fullExport:r}));case 3:if(!(o=s.sent).requested){s.next=8;break}return u=e(\"UserDataDownload_Requested_Text\",{pending_operations:o.pendingOperationsBeforeMyRequest}),t(d.createElement(D,{title:e(\"UserDataDownload_Requested\"),text:d.createElement(l,{dangerouslySetInnerHTML:{__html:u}}),onCancel:function(){return t(null)}})),s.abrupt(\"return\");case 8:if(!o.exportOperation){s.next=16;break}if(\"completed\"!==o.exportOperation.status){s.next=13;break}return c=o.url?e(\"UserDataDownload_CompletedRequestExistedWithLink_Text\",{download_link:o.url}):e(\"UserDataDownload_CompletedRequestExisted_Text\"),t(d.createElement(D,{title:e(\"UserDataDownload_Requested\"),text:d.createElement(l,{dangerouslySetInnerHTML:{__html:c}}),onCancel:function(){return t(null)}})),s.abrupt(\"return\");case 13:return i=e(\"UserDataDownload_RequestExisted_Text\",{pending_operations:o.pendingOperationsBeforeMyRequest}),t(d.createElement(D,{title:e(\"UserDataDownload_Requested\"),text:d.createElement(l,{dangerouslySetInnerHTML:{__html:i}}),onCancel:function(){return t(null)}})),s.abrupt(\"return\");case 16:t(d.createElement(D,{title:e(\"UserDataDownload_Requested\"),onCancel:function(){return t(null)}})),s.next=22;break;case 19:s.prev=19,s.t0=s.catch(0),n({type:\"error\",message:s.t0});case 22:case\"end\":return s.stop()}},null,null,[[0,19]],Promise)},[n,_,t,e]),m=f(function(){return x(!1)},[x]),k=f(function(){return x(!0)},[x]);return d.createElement(r.Item,{title:e(\"My Data\")},d.createElement(o,{stretch:!0},d.createElement(u,{icon:\"download\",onClick:m},e(\"Download_My_Data\")),d.createElement(u,{icon:\"download\",onClick:k},e(\"Export_My_Data\"))))})}","map":"{\"version\":3,\"sources\":[\"client/views/account/preferences/PreferencesMyDataSection.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Accordion, ButtonGroup, Button, Box } from '@rocket.chat/fuselage';\\nimport { useSetModal, useToastMessageDispatch, useMethod } from '@rocket.chat/ui-contexts';\\nimport React, { useCallback } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport MyDataModal from './MyDataModal';\\n\\nconst PreferencesMyDataSection = () => {\\n\\tconst { t } = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tconst requestDataDownload = useMethod('requestDataDownload');\\n\\n\\tconst downloadData = useCallback(\\n\\t\\tasync (fullExport) => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tconst result = await requestDataDownload({ fullExport });\\n\\t\\t\\t\\tif (result.requested) {\\n\\t\\t\\t\\t\\tconst text = t('UserDataDownload_Requested_Text', {\\n\\t\\t\\t\\t\\t\\tpending_operations: result.pendingOperationsBeforeMyRequest,\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\tsetModal(\\n\\t\\t\\t\\t\\t\\t<MyDataModal\\n\\t\\t\\t\\t\\t\\t\\ttitle={t('UserDataDownload_Requested')}\\n\\t\\t\\t\\t\\t\\t\\ttext={<Box dangerouslySetInnerHTML={{ __html: text }} />}\\n\\t\\t\\t\\t\\t\\t\\tonCancel={() => setModal(null)}\\n\\t\\t\\t\\t\\t\\t/>,\\n\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (result.exportOperation) {\\n\\t\\t\\t\\t\\tif (result.exportOperation.status === 'completed') {\\n\\t\\t\\t\\t\\t\\tconst text = result.url\\n\\t\\t\\t\\t\\t\\t\\t? t('UserDataDownload_CompletedRequestExistedWithLink_Text', {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tdownload_link: result.url,\\n\\t\\t\\t\\t\\t\\t\\t  })\\n\\t\\t\\t\\t\\t\\t\\t: t('UserDataDownload_CompletedRequestExisted_Text');\\n\\n\\t\\t\\t\\t\\t\\tsetModal(\\n\\t\\t\\t\\t\\t\\t\\t<MyDataModal\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle={t('UserDataDownload_Requested')}\\n\\t\\t\\t\\t\\t\\t\\t\\ttext={<Box dangerouslySetInnerHTML={{ __html: text }} />}\\n\\t\\t\\t\\t\\t\\t\\t\\tonCancel={() => setModal(null)}\\n\\t\\t\\t\\t\\t\\t\\t/>,\\n\\t\\t\\t\\t\\t\\t);\\n\\n\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tconst text = t('UserDataDownload_RequestExisted_Text', {\\n\\t\\t\\t\\t\\t\\tpending_operations: result.pendingOperationsBeforeMyRequest,\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\tsetModal(\\n\\t\\t\\t\\t\\t\\t<MyDataModal\\n\\t\\t\\t\\t\\t\\t\\ttitle={t('UserDataDownload_Requested')}\\n\\t\\t\\t\\t\\t\\t\\ttext={<Box dangerouslySetInnerHTML={{ __html: text }} />}\\n\\t\\t\\t\\t\\t\\t\\tonCancel={() => setModal(null)}\\n\\t\\t\\t\\t\\t\\t/>,\\n\\t\\t\\t\\t\\t);\\n\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tsetModal(<MyDataModal title={t('UserDataDownload_Requested')} onCancel={() => setModal(null)} />);\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t[dispatchToastMessage, requestDataDownload, setModal, t],\\n\\t);\\n\\n\\tconst handleClickDownload = useCallback(() => downloadData(false), [downloadData]);\\n\\tconst handleClickExport = useCallback(() => downloadData(true), [downloadData]);\\n\\n\\treturn (\\n\\t\\t<Accordion.Item title={t('My Data')}>\\n\\t\\t\\t<ButtonGroup stretch>\\n\\t\\t\\t\\t<Button icon='download' onClick={handleClickDownload}>\\n\\t\\t\\t\\t\\t{t('Download_My_Data')}\\n\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t<Button icon='download' onClick={handleClickExport}>\\n\\t\\t\\t\\t\\t{t('Export_My_Data')}\\n\\t\\t\\t\\t</Button>\\n\\t\\t\\t</ButtonGroup>\\n\\t\\t</Accordion.Item>\\n\\t);\\n};\\n\\nexport default PreferencesMyDataSection;\\n\",null],\"names\":[\"_regeneratorRuntime\",\"Accordion\",\"ButtonGroup\",\"Button\",\"Box\",\"useSetModal\",\"useToastMessageDispatch\",\"useMethod\",\"React\",\"useCallback\",\"useTranslation\",\"MyDataModal\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"t\",\"_useTranslation\",\"setModal\",\"dispatchToastMessage\",\"requestDataDownload\",\"downloadData\",\"fullExport\",\"result\",\"text\",\"_text\",\"_text2\",\"async\",\"_context\",\"prev\",\"next\",\"awrap\",\"sent\",\"requested\",\"pending_operations\",\"pendingOperationsBeforeMyRequest\",\"createElement\",\"title\",\"dangerouslySetInnerHTML\",\"__html\",\"onCancel\",\"abrupt\",\"exportOperation\",\"status\",\"url\",\"download_link\",\"t0\",\"type\",\"message\",\"stop\",\"Promise\",\"handleClickDownload\",\"handleClickExport\",\"Item\",\"stretch\",\"icon\",\"onClick\"],\"mappings\":\"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\"}"}