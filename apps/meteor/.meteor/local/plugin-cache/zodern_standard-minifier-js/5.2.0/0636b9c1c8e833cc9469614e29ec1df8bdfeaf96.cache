{"code":"function module(e,t,l){let r,i,s,p,n,a,o,d,u,f,A,h;l.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){r=e}},0),l.export({useFilteredApps:()=>v}),l.link(\"react\",{useMemo(e){i=e}},0),l.link(\"../../../lib/asyncState\",{AsyncStatePhase(e){s=e}},1),l.link(\"../helpers/filterAppsByCategories\",{filterAppsByCategories(e){p=e}},2),l.link(\"../helpers/filterAppsByDisabled\",{filterAppsByDisabled(e){n=e}},3),l.link(\"../helpers/filterAppsByEnabled\",{filterAppsByEnabled(e){a=e}},4),l.link(\"../helpers/filterAppsByEnterprise\",{filterAppsByEnterprise(e){o=e}},5),l.link(\"../helpers/filterAppsByFree\",{filterAppsByFree(e){d=e}},6),l.link(\"../helpers/filterAppsByPaid\",{filterAppsByPaid(e){u=e}},7),l.link(\"../helpers/filterAppsByText\",{filterAppsByText(e){f=e}},8),l.link(\"../helpers/sortAppsByAlphabeticalOrInverseOrder\",{sortAppsByAlphabeticalOrInverseOrder(e){A=e}},9),l.link(\"../helpers/sortAppsByClosestOrFarthestModificationDate\",{sortAppsByClosestOrFarthestModificationDate(e){h=e}},10);let v=e=>{let{appsData:t,text:l,current:v,itemsPerPage:y,categories:m=[],purchaseType:B,sortingMethod:c,status:b,context:k}=e,g=i(()=>{if(void 0===t.value)return;let{apps:e}=t.value,r=e=>e,i=(function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return e=>t.reduce((e,t)=>t(e),e)})(k?({explore:r,installed:r,private:r,premium:e=>e.filter(e=>{let{categories:t}=e;return t.includes(\"Premium\")}),requested:e=>e.filter(e=>{let{appRequestStats:t,installed:l}=e;return!!t&&!l})})[k]:r,{all:r,paid:e=>e.filter(u),premium:e=>e.filter(o),free:e=>e.filter(d)}[B],{all:r,enabled:e=>e.filter(a),disabled:e=>e.filter(n)}[b],m.length?e=>e.filter(e=>p(e,m)):r,l?e=>e.filter(e=>{let{name:t}=e;return f(t,l)}):r,{urf:e=>e.sort((e,t)=>{var l,r;return((null==t?void 0:null===(l=t.appRequestStats)||void 0===l?void 0:l.totalUnseen)||0)-((null==e?void 0:null===(r=e.appRequestStats)||void 0===r?void 0:r.totalUnseen)||0)}),url:e=>e.sort((e,t)=>{var l,r;return((null==e?void 0:null===(l=e.appRequestStats)||void 0===l?void 0:l.totalUnseen)||0)-((null==t?void 0:null===(r=t.appRequestStats)||void 0===r?void 0:r.totalUnseen)||0)}),az:e=>e.sort((e,t)=>A(e.name,t.name)),za:e=>e.sort((e,t)=>A(t.name,e.name)),mru:e=>e.sort((e,t)=>h(e.modifiedAt,t.modifiedAt)),lru:e=>e.sort((e,t)=>h(t.modifiedAt,e.modifiedAt))}[c])(e),s=!!l,g=i.length,E=v>g?0:v,S=v+y,F=i.slice(E,S);return{items:F,offset:E,total:i.length,totalAppsLength:e.length,count:F.length,shouldShowSearchText:s,allApps:i}},[t.value,c,B,b,m,l,k,v,y]);if(t.phase===s.RESOLVED){if(!g)throw Error(\"useFilteredApps - Unexpected state\");return r(r({},t),{},{value:g})}if(t.phase===s.UPDATING)throw Error(\"useFilteredApps - Unexpected state\");return r(r({},t),{},{value:void 0})}}","map":"{\"version\":3,\"sources\":[\"client/views/marketplace/hooks/useFilteredApps.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { PaginatedResult } from '@rocket.chat/rest-typings';\\nimport type { ContextType } from 'react';\\nimport { useMemo } from 'react';\\n\\nimport type { AppsContext } from '../../../contexts/AppsContext';\\nimport type { AsyncState } from '../../../lib/asyncState';\\nimport { AsyncStatePhase } from '../../../lib/asyncState';\\nimport { filterAppsByCategories } from '../helpers/filterAppsByCategories';\\nimport { filterAppsByDisabled } from '../helpers/filterAppsByDisabled';\\nimport { filterAppsByEnabled } from '../helpers/filterAppsByEnabled';\\nimport { filterAppsByEnterprise } from '../helpers/filterAppsByEnterprise';\\nimport { filterAppsByFree } from '../helpers/filterAppsByFree';\\nimport { filterAppsByPaid } from '../helpers/filterAppsByPaid';\\nimport { filterAppsByText } from '../helpers/filterAppsByText';\\nimport { sortAppsByAlphabeticalOrInverseOrder } from '../helpers/sortAppsByAlphabeticalOrInverseOrder';\\nimport { sortAppsByClosestOrFarthestModificationDate } from '../helpers/sortAppsByClosestOrFarthestModificationDate';\\nimport type { App } from '../types';\\n\\nexport type appsDataType = ContextType<typeof AppsContext>['installedApps'] | ContextType<typeof AppsContext>['marketplaceApps'];\\n\\nexport const useFilteredApps = ({\\n\\tappsData,\\n\\ttext,\\n\\tcurrent,\\n\\titemsPerPage,\\n\\tcategories = [],\\n\\tpurchaseType,\\n\\tsortingMethod,\\n\\tstatus,\\n\\tcontext,\\n}: {\\n\\tappsData: appsDataType;\\n\\ttext: string;\\n\\tcurrent: number;\\n\\titemsPerPage: number;\\n\\tcategories: string[];\\n\\tpurchaseType: string;\\n\\tisEnterpriseOnly?: boolean;\\n\\tsortingMethod: string;\\n\\tstatus: string;\\n\\tcontext?: string;\\n}): AsyncState<\\n\\tPaginatedResult<{\\n\\t\\titems: App[];\\n\\t\\tshouldShowSearchText: boolean;\\n\\t\\tallApps: App[];\\n\\t\\ttotalAppsLength: number;\\n\\t}>\\n> => {\\n\\tconst value = useMemo(() => {\\n\\t\\tif (appsData.value === undefined) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\tconst { apps } = appsData.value;\\n\\t\\tconst fallback = (apps: App[]) => apps;\\n\\n\\t\\tconst sortingMethods: Record<string, (apps: App[]) => App[]> = {\\n\\t\\t\\turf: (apps: App[]) =>\\n\\t\\t\\t\\tapps.sort((firstApp, secondApp) => (secondApp?.appRequestStats?.totalUnseen || 0) - (firstApp?.appRequestStats?.totalUnseen || 0)),\\n\\t\\t\\turl: (apps: App[]) =>\\n\\t\\t\\t\\tapps.sort((firstApp, secondApp) => (firstApp?.appRequestStats?.totalUnseen || 0) - (secondApp?.appRequestStats?.totalUnseen || 0)),\\n\\t\\t\\taz: (apps: App[]) => apps.sort((firstApp, secondApp) => sortAppsByAlphabeticalOrInverseOrder(firstApp.name, secondApp.name)),\\n\\t\\t\\tza: (apps: App[]) => apps.sort((firstApp, secondApp) => sortAppsByAlphabeticalOrInverseOrder(secondApp.name, firstApp.name)),\\n\\t\\t\\tmru: (apps: App[]) =>\\n\\t\\t\\t\\tapps.sort((firstApp, secondApp) => sortAppsByClosestOrFarthestModificationDate(firstApp.modifiedAt, secondApp.modifiedAt)),\\n\\t\\t\\tlru: (apps: App[]) =>\\n\\t\\t\\t\\tapps.sort((firstApp, secondApp) => sortAppsByClosestOrFarthestModificationDate(secondApp.modifiedAt, firstApp.modifiedAt)),\\n\\t\\t};\\n\\n\\t\\tconst filterByPurchaseType: Record<string, (apps: App[]) => App[]> = {\\n\\t\\t\\tall: fallback,\\n\\t\\t\\tpaid: (apps: App[]) => apps.filter(filterAppsByPaid),\\n\\t\\t\\tpremium: (apps: App[]) => apps.filter(filterAppsByEnterprise),\\n\\t\\t\\tfree: (apps: App[]) => apps.filter(filterAppsByFree),\\n\\t\\t};\\n\\n\\t\\tconst filterByStatus: Record<string, (apps: App[]) => App[]> = {\\n\\t\\t\\tall: fallback,\\n\\t\\t\\tenabled: (apps: App[]) => apps.filter(filterAppsByEnabled),\\n\\t\\t\\tdisabled: (apps: App[]) => apps.filter(filterAppsByDisabled),\\n\\t\\t};\\n\\n\\t\\tconst filterByContext: Record<string, (apps: App[]) => App[]> = {\\n\\t\\t\\texplore: fallback,\\n\\t\\t\\tinstalled: fallback,\\n\\t\\t\\tprivate: fallback,\\n\\t\\t\\tpremium: (apps: App[]) => apps.filter(({ categories }) => categories.includes('Premium')),\\n\\t\\t\\trequested: (apps: App[]) => apps.filter(({ appRequestStats, installed }) => Boolean(appRequestStats) && !installed),\\n\\t\\t};\\n\\n\\t\\ttype appsFilterFunction = (apps: App[]) => App[];\\n\\t\\tconst pipeAppsFilter =\\n\\t\\t\\t(...functions: appsFilterFunction[]) =>\\n\\t\\t\\t(initialValue: App[]) =>\\n\\t\\t\\t\\tfunctions.reduce((currentAppsList, currentFilterFunction) => currentFilterFunction(currentAppsList), initialValue);\\n\\n\\t\\tconst filtered = pipeAppsFilter(\\n\\t\\t\\tcontext ? filterByContext[context] : fallback,\\n\\t\\t\\tfilterByPurchaseType[purchaseType],\\n\\t\\t\\tfilterByStatus[status],\\n\\t\\t\\tcategories.length ? (apps: App[]) => apps.filter((app) => filterAppsByCategories(app, categories)) : fallback,\\n\\t\\t\\ttext ? (apps: App[]) => apps.filter(({ name }) => filterAppsByText(name, text)) : fallback,\\n\\t\\t\\tsortingMethods[sortingMethod],\\n\\t\\t)(apps);\\n\\n\\t\\tconst shouldShowSearchText = !!text;\\n\\t\\tconst total = filtered.length;\\n\\t\\tconst offset = current > total ? 0 : current;\\n\\t\\tconst end = current + itemsPerPage;\\n\\t\\tconst slice = filtered.slice(offset, end);\\n\\n\\t\\treturn {\\n\\t\\t\\titems: slice,\\n\\t\\t\\toffset,\\n\\t\\t\\ttotal: filtered.length,\\n\\t\\t\\ttotalAppsLength: apps.length,\\n\\t\\t\\tcount: slice.length,\\n\\t\\t\\tshouldShowSearchText,\\n\\t\\t\\tallApps: filtered,\\n\\t\\t};\\n\\t}, [appsData.value, sortingMethod, purchaseType, status, categories, text, context, current, itemsPerPage]);\\n\\n\\tif (appsData.phase === AsyncStatePhase.RESOLVED) {\\n\\t\\tif (!value) {\\n\\t\\t\\tthrow new Error('useFilteredApps - Unexpected state');\\n\\t\\t}\\n\\t\\treturn {\\n\\t\\t\\t...appsData,\\n\\t\\t\\tvalue,\\n\\t\\t};\\n\\t}\\n\\n\\tif (appsData.phase === AsyncStatePhase.UPDATING) {\\n\\t\\tthrow new Error('useFilteredApps - Unexpected state');\\n\\t}\\n\\n\\treturn {\\n\\t\\t...appsData,\\n\\t\\tvalue: undefined,\\n\\t};\\n};\\n\",null],\"names\":[\"_objectSpread\",\"useMemo\",\"AsyncStatePhase\",\"filterAppsByCategories\",\"filterAppsByDisabled\",\"filterAppsByEnabled\",\"filterAppsByEnterprise\",\"filterAppsByFree\",\"filterAppsByPaid\",\"filterAppsByText\",\"sortAppsByAlphabeticalOrInverseOrder\",\"sortAppsByClosestOrFarthestModificationDate\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useFilteredApps\",\"_ref\",\"appsData\",\"text\",\"current\",\"itemsPerPage\",\"categories\",\"purchaseType\",\"sortingMethod\",\"status\",\"context\",\"value\",\"undefined\",\"apps\",\"fallback\",\"filtered\",\"pipeAppsFilter\",\"_len\",\"arguments\",\"length\",\"functions\",\"Array\",\"_key\",\"initialValue\",\"reduce\",\"currentAppsList\",\"currentFilterFunction\",\"filterByContext\",\"explore\",\"installed\",\"private\",\"premium\",\"filter\",\"_ref2\",\"includes\",\"requested\",\"_ref3\",\"appRequestStats\",\"Boolean\",\"filterByPurchaseType\",\"all\",\"paid\",\"free\",\"filterByStatus\",\"enabled\",\"disabled\",\"app\",\"_ref4\",\"name\",\"sortingMethods\",\"urf\",\"sort\",\"firstApp\",\"secondApp\",\"_secondApp$appRequest\",\"_firstApp$appRequestS\",\"totalUnseen\",\"url\",\"_firstApp$appRequestS2\",\"_secondApp$appRequest2\",\"az\",\"za\",\"mru\",\"modifiedAt\",\"lru\",\"shouldShowSearchText\",\"total\",\"offset\",\"end\",\"slice\",\"items\",\"totalAppsLength\",\"count\",\"allApps\",\"phase\",\"RESOLVED\",\"Error\",\"UPDATING\"],\"mappings\":\"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\"}"}