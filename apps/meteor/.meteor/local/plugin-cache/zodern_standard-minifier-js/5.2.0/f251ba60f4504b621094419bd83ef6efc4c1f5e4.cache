{"code":"function module(e,t,n){var l,r,i,a,c,o,u,s,m,d,f,E,h,v,p,b,k,F=[\"value\"],_=[\"value\"];n.link(\"@babel/runtime/helpers/extends\",{default:function(e){l=e}},0),n.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default:function(e){r=e}},1),n.link(\"@rocket.chat/fuselage\",{Field:function(e){i=e},FieldLabel:function(e){a=e},FieldRow:function(e){c=e},FieldError:function(e){o=e},FieldHint:function(e){u=e},ToggleSwitch:function(e){s=e},TextInput:function(e){m=e},Select:function(e){d=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId:function(e){f=e}},1),n.link(\"react\",{default:function(e){E=e},useMemo:function(e){h=e}},2),n.link(\"react-hook-form\",{useFormContext:function(e){v=e},Controller:function(e){p=e}},3),n.link(\"react-i18next\",{useTranslation:function(e){b=e}},4),n.link(\"../../hooks/useHasLicenseModule\",{useHasLicenseModule:function(e){k=e}},5),n.exportDefault(function(e){var t=e.className,n=b().t,y=v(),g=y.control,N=y.watch,x=y.formState.errors,L=k(\"livechat-enterprise\"),S=N(),T=S.visibility,q=S.type,w=h(function(){return[[\"input\",n(\"Input\")],[\"select\",n(\"Select\")]]},[n]),H=f(),I=f(),M=f(),C=f(),D=f();return L?E.createElement(E.Fragment,null,E.createElement(i,{className:t},E.createElement(c,null,E.createElement(a,{htmlFor:H},n(\"Required\")),E.createElement(p,{name:\"required\",control:g,render:function(e){var t=e.field,n=t.value,i=r(t,F);return E.createElement(s,l({id:H},i,{checked:n}))}}))),E.createElement(i,{className:t},E.createElement(a,{htmlFor:I},n(\"Type\")),E.createElement(c,null,E.createElement(p,{name:\"type\",control:g,render:function(e){var t=e.field;return E.createElement(d,l({id:I,options:w},t))}}))),E.createElement(i,{className:t},E.createElement(a,{htmlFor:M},n(\"Default_value\")),E.createElement(c,null,E.createElement(p,{name:\"defaultValue\",control:g,render:function(e){var t=e.field;return E.createElement(m,l({id:M},t))}}))),E.createElement(i,{className:t},E.createElement(a,{htmlFor:C},n(\"Options\")),E.createElement(c,null,E.createElement(p,{name:\"options\",control:g,rules:{validate:function(e){return\"select\"!==q||e&&\"\"!==e.trim()&&e.split(\",\").every(function(e){return/^[a-zA-Z0-9-_ ]+$/.test(e)})?void 0:n(\"error-invalid-value\")}},render:function(e){var t=e.field;return E.createElement(m,l({id:C},t,{disabled:\"input\"===q,\"aria-invalid\":!!(null==x?void 0:x.options),\"aria-describedby\":C+\"-hint \"+C+\"-error\"}))}})),E.createElement(u,{id:C+\"-hint\"},n(\"Livechat_custom_fields_options_placeholder\")),x.options&&E.createElement(o,{\"aria-live\":\"assertive\",id:C+\"-error\"},x.options.message)),E.createElement(i,{className:t},E.createElement(c,null,E.createElement(a,{htmlFor:D},n(\"Public\")),E.createElement(p,{name:\"public\",control:g,render:function(e){var t=e.field,n=t.value,i=r(t,_);return E.createElement(s,l({id:D},i,{disabled:!T,checked:n,\"aria-describedby\":D+\"-hint\"}))}})),E.createElement(u,{id:D+\"-hint\"},n(\"Livechat_custom_fields_public_description\")))):null})}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/additionalForms/CustomFieldsAdditionalForm.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { SelectOption } from '@rocket.chat/fuselage';\\nimport { Field, FieldLabel, FieldRow, FieldError, FieldHint, ToggleSwitch, TextInput, Select } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport type { ComponentProps } from 'react';\\nimport React, { useMemo } from 'react';\\nimport { useFormContext, Controller } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useHasLicenseModule } from '../../hooks/useHasLicenseModule';\\n\\nconst checkIsOptionsValid = (value: string) => {\\n\\tif (!value || value.trim() === '') {\\n\\t\\treturn false;\\n\\t}\\n\\n\\treturn value.split(',').every((v) => /^[a-zA-Z0-9-_ ]+$/.test(v));\\n};\\n\\nconst CustomFieldsAdditionalForm = ({ className }: { className?: ComponentProps<typeof Field>['className'] }) => {\\n\\tconst { t } = useTranslation();\\n\\tconst {\\n\\t\\tcontrol,\\n\\t\\twatch,\\n\\t\\tformState: { errors },\\n\\t} = useFormContext();\\n\\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\\n\\n\\tconst { visibility, type } = watch();\\n\\n\\tconst typeOptions: SelectOption[] = useMemo(\\n\\t\\t() => [\\n\\t\\t\\t['input', t('Input')],\\n\\t\\t\\t['select', t('Select')],\\n\\t\\t],\\n\\t\\t[t],\\n\\t);\\n\\n\\tconst requiredField = useUniqueId();\\n\\tconst typeField = useUniqueId();\\n\\tconst defaultValueField = useUniqueId();\\n\\tconst optionsField = useUniqueId();\\n\\tconst publicField = useUniqueId();\\n\\n\\tif (!hasLicense) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<Field className={className}>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<FieldLabel htmlFor={requiredField}>{t('Required')}</FieldLabel>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tname='required'\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\trender={({ field: { value, ...field } }) => <ToggleSwitch id={requiredField} {...field} checked={value} />}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t</Field>\\n\\t\\t\\t<Field className={className}>\\n\\t\\t\\t\\t<FieldLabel htmlFor={typeField}>{t('Type')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller name='type' control={control} render={({ field }) => <Select id={typeField} options={typeOptions} {...field} />} />\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t</Field>\\n\\t\\t\\t<Field className={className}>\\n\\t\\t\\t\\t<FieldLabel htmlFor={defaultValueField}>{t('Default_value')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller name='defaultValue' control={control} render={({ field }) => <TextInput id={defaultValueField} {...field} />} />\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t</Field>\\n\\t\\t\\t<Field className={className}>\\n\\t\\t\\t\\t<FieldLabel htmlFor={optionsField}>{t('Options')}</FieldLabel>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tname='options'\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\trules={{\\n\\t\\t\\t\\t\\t\\t\\tvalidate: (optionsValue) => (type === 'select' && !checkIsOptionsValid(optionsValue) ? t('error-invalid-value') : undefined),\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\trender={({ field }) => (\\n\\t\\t\\t\\t\\t\\t\\t<TextInput\\n\\t\\t\\t\\t\\t\\t\\t\\tid={optionsField}\\n\\t\\t\\t\\t\\t\\t\\t\\t{...field}\\n\\t\\t\\t\\t\\t\\t\\t\\tdisabled={type === 'input'}\\n\\t\\t\\t\\t\\t\\t\\t\\taria-invalid={Boolean(errors?.options)}\\n\\t\\t\\t\\t\\t\\t\\t\\taria-describedby={`${optionsField}-hint ${optionsField}-error`}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t<FieldHint id={`${optionsField}-hint`}>{t('Livechat_custom_fields_options_placeholder')}</FieldHint>\\n\\t\\t\\t\\t{errors.options && (\\n\\t\\t\\t\\t\\t<FieldError aria-live='assertive' id={`${optionsField}-error`}>\\n\\t\\t\\t\\t\\t\\t{errors.options.message}\\n\\t\\t\\t\\t\\t</FieldError>\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</Field>\\n\\t\\t\\t<Field className={className}>\\n\\t\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t\\t<FieldLabel htmlFor={publicField}>{t('Public')}</FieldLabel>\\n\\t\\t\\t\\t\\t<Controller\\n\\t\\t\\t\\t\\t\\tname='public'\\n\\t\\t\\t\\t\\t\\tcontrol={control}\\n\\t\\t\\t\\t\\t\\trender={({ field: { value, ...field } }) => (\\n\\t\\t\\t\\t\\t\\t\\t<ToggleSwitch id={publicField} {...field} disabled={!visibility} checked={value} aria-describedby={`${publicField}-hint`} />\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</FieldRow>\\n\\t\\t\\t\\t<FieldHint id={`${publicField}-hint`}>{t('Livechat_custom_fields_public_description')}</FieldHint>\\n\\t\\t\\t</Field>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default CustomFieldsAdditionalForm;\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"Field\",\"FieldLabel\",\"FieldRow\",\"FieldError\",\"FieldHint\",\"ToggleSwitch\",\"TextInput\",\"Select\",\"useUniqueId\",\"React\",\"useMemo\",\"useFormContext\",\"Controller\",\"useTranslation\",\"useHasLicenseModule\",\"module\",\"link\",\"default\",\"v\",\"exportDefault\",\"_ref\",\"className\",\"t\",\"_useTranslation\",\"_useFormContext\",\"control\",\"watch\",\"errors\",\"formState\",\"hasLicense\",\"_watch\",\"visibility\",\"type\",\"typeOptions\",\"requiredField\",\"typeField\",\"defaultValueField\",\"optionsField\",\"publicField\",\"createElement\",\"Fragment\",\"htmlFor\",\"name\",\"render\",\"_ref2\",\"_ref2$field\",\"field\",\"value\",\"_excluded\",\"id\",\"checked\",\"_ref3\",\"options\",\"_ref4\",\"rules\",\"validate\",\"optionsValue\",\"trim\",\"split\",\"every\",\"test\",\"undefined\",\"_ref5\",\"disabled\",\"Boolean\",\"message\",\"_ref6\",\"_ref6$field\",\"_excluded2\"],\"mappings\":\"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\"}"}