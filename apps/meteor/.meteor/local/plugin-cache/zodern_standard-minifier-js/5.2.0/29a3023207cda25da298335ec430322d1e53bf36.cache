{"code":"function module(e,t,i){let l,n,s,a,o,p,d,r,u;i.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){l=e}},0),i.export({uploadFiles:()=>c}),i.link(\"@rocket.chat/core-typings\",{isRoomFederated(e){n=e}},0),i.link(\"../../../../app/e2e/client\",{e2e(e){s=e}},1),i.link(\"../../../../app/settings/client\",{settings(e){a=e}},2),i.link(\"../../../../app/utils/client\",{fileUploadIsValidContentType(e){o=e}},3),i.link(\"../../../../lib/utils/getFileExtension\",{getFileExtension(e){p=e}},4),i.link(\"../../../views/room/modals/FileUploadModal\",{default(e){d=e}},5),i.link(\"../../imperativeModal\",{imperativeModal(e){r=e}},6),i.link(\"../../utils/prependReplies\",{prependReplies(e){u=e}},7);let y=e=>new Promise(t=>{let i=new Image;i.onload=()=>{t({height:i.height,width:i.width})},i.src=e}),c=async(e,t,i)=>{var c,m;let v=null!==(c=null===(m=e.composer)||void 0===m?void 0:m.quotedMessages.get())&&void 0!==c?c:[],h=await u(\"\",v),g=await e.data.getRoom(),w=[...t],_=(t,i,n,s)=>{var a;e.uploads.send(t,l({msg:h},i),n,s),null===(a=e.composer)||void 0===a||a.clear(),r.close(),f()},f=()=>{var t,i,u;let c=w.pop();if(!c){null===(u=e.composer)||void 0===u||u.dismissAllQuotedMessages();return}r.open({component:d,props:{file:c,fileName:c.name,fileDescription:null!==(t=null===(i=e.composer)||void 0===i?void 0:i.text)&&void 0!==t?t:\"\",showDescription:g&&!n(g),onClose:()=>{r.close(),f()},onSubmit:async(e,t)=>{Object.defineProperty(c,\"name\",{writable:!0,value:e});let i=await s.getInstanceByRoomId(g._id);if(!i||!a.get(\"E2E_Enable_Encrypt_Files\")){_(c,{description:t});return}let n=await i.shouldConvertSentMessages({msg:h});if(!n){_(c,{description:t});return}let o=await i.encryptFile(c);if(o){let n=async(e,n)=>{let s=[],a={title:c.name,type:\"file\",description:t,title_link:n,title_link_download:!0,encryption:{key:o.key,iv:o.iv},hashes:{sha256:o.hash}};if(/^image\\/.+/.test(c.type)){let e=await y(window.URL.createObjectURL(c));s.push(l(l({},a),{},{image_url:n,image_type:c.type,image_size:c.size},e&&{image_dimensions:e}))}else/^audio\\/.+/.test(c.type)?s.push(l(l({},a),{},{audio_url:n,audio_type:c.type,audio_size:c.size})):/^video\\/.+/.test(c.type)?s.push(l(l({},a),{},{video_url:n,video_type:c.type,video_size:c.size})):s.push(l(l({},a),{},{size:c.size,format:p(c.name)}));let d=[{_id:e,name:c.name,type:c.type,size:c.size}];return i.encryptMessageContent({attachments:s,files:d,file:d[0]})},s={type:c.type,typeGroup:c.type.split(\"/\")[0],name:e,encryption:{key:o.key,iv:o.iv},hashes:{sha256:o.hash}},a={raw:s,encrypted:await i.encryptMessageContent(s)};_(o.file,{t:\"e2e\"},n,a)}},invalidContentType:!o(null==c?void 0:c.type)}})};f(),null==i||i()}}","map":"{\"version\":3,\"sources\":[\"client/lib/chats/flows/uploadFiles.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IMessage, FileAttachmentProps, IE2EEMessage, IUpload } from '@rocket.chat/core-typings';\\nimport { isRoomFederated } from '@rocket.chat/core-typings';\\n\\nimport { e2e } from '../../../../app/e2e/client';\\nimport { settings } from '../../../../app/settings/client';\\nimport { fileUploadIsValidContentType } from '../../../../app/utils/client';\\nimport { getFileExtension } from '../../../../lib/utils/getFileExtension';\\nimport FileUploadModal from '../../../views/room/modals/FileUploadModal';\\nimport { imperativeModal } from '../../imperativeModal';\\nimport { prependReplies } from '../../utils/prependReplies';\\nimport type { ChatAPI } from '../ChatAPI';\\n\\nconst getHeightAndWidthFromDataUrl = (dataURL: string): Promise<{ height: number; width: number }> => {\\n\\treturn new Promise((resolve) => {\\n\\t\\tconst img = new Image();\\n\\t\\timg.onload = () => {\\n\\t\\t\\tresolve({\\n\\t\\t\\t\\theight: img.height,\\n\\t\\t\\t\\twidth: img.width,\\n\\t\\t\\t});\\n\\t\\t};\\n\\t\\timg.src = dataURL;\\n\\t});\\n};\\n\\nexport const uploadFiles = async (chat: ChatAPI, files: readonly File[], resetFileInput?: () => void): Promise<void> => {\\n\\tconst replies = chat.composer?.quotedMessages.get() ?? [];\\n\\n\\tconst msg = await prependReplies('', replies);\\n\\n\\tconst room = await chat.data.getRoom();\\n\\n\\tconst queue = [...files];\\n\\n\\tconst uploadFile = (\\n\\t\\tfile: File,\\n\\t\\textraData?: Pick<IMessage, 't' | 'e2e'> & { description?: string },\\n\\t\\tgetContent?: (fileId: string, fileUrl: string) => Promise<IE2EEMessage['content']>,\\n\\t\\tfileContent?: { raw: Partial<IUpload>; encrypted: IE2EEMessage['content'] },\\n\\t) => {\\n\\t\\tchat.uploads.send(\\n\\t\\t\\tfile,\\n\\t\\t\\t{\\n\\t\\t\\t\\tmsg,\\n\\t\\t\\t\\t...extraData,\\n\\t\\t\\t},\\n\\t\\t\\tgetContent,\\n\\t\\t\\tfileContent,\\n\\t\\t);\\n\\t\\tchat.composer?.clear();\\n\\t\\timperativeModal.close();\\n\\t\\tuploadNextFile();\\n\\t};\\n\\n\\tconst uploadNextFile = (): void => {\\n\\t\\tconst file = queue.pop();\\n\\t\\tif (!file) {\\n\\t\\t\\tchat.composer?.dismissAllQuotedMessages();\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\timperativeModal.open({\\n\\t\\t\\tcomponent: FileUploadModal,\\n\\t\\t\\tprops: {\\n\\t\\t\\t\\tfile,\\n\\t\\t\\t\\tfileName: file.name,\\n\\t\\t\\t\\tfileDescription: chat.composer?.text ?? '',\\n\\t\\t\\t\\tshowDescription: room && !isRoomFederated(room),\\n\\t\\t\\t\\tonClose: (): void => {\\n\\t\\t\\t\\t\\timperativeModal.close();\\n\\t\\t\\t\\t\\tuploadNextFile();\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tonSubmit: async (fileName: string, description?: string): Promise<void> => {\\n\\t\\t\\t\\t\\tObject.defineProperty(file, 'name', {\\n\\t\\t\\t\\t\\t\\twritable: true,\\n\\t\\t\\t\\t\\t\\tvalue: fileName,\\n\\t\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\t\\t// encrypt attachment description\\n\\t\\t\\t\\t\\tconst e2eRoom = await e2e.getInstanceByRoomId(room._id);\\n\\n\\t\\t\\t\\t\\tif (!e2eRoom) {\\n\\t\\t\\t\\t\\t\\tuploadFile(file, { description });\\n\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tif (!settings.get('E2E_Enable_Encrypt_Files')) {\\n\\t\\t\\t\\t\\t\\tuploadFile(file, { description });\\n\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tconst shouldConvertSentMessages = await e2eRoom.shouldConvertSentMessages({ msg });\\n\\n\\t\\t\\t\\t\\tif (!shouldConvertSentMessages) {\\n\\t\\t\\t\\t\\t\\tuploadFile(file, { description });\\n\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tconst encryptedFile = await e2eRoom.encryptFile(file);\\n\\n\\t\\t\\t\\t\\tif (encryptedFile) {\\n\\t\\t\\t\\t\\t\\tconst getContent = async (_id: string, fileUrl: string): Promise<IE2EEMessage['content']> => {\\n\\t\\t\\t\\t\\t\\t\\tconst attachments = [];\\n\\n\\t\\t\\t\\t\\t\\t\\tconst attachment: FileAttachmentProps = {\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle: file.name,\\n\\t\\t\\t\\t\\t\\t\\t\\ttype: 'file',\\n\\t\\t\\t\\t\\t\\t\\t\\tdescription,\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle_link: fileUrl,\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle_link_download: true,\\n\\t\\t\\t\\t\\t\\t\\t\\tencryption: {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tkey: encryptedFile.key,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tiv: encryptedFile.iv,\\n\\t\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t\\thashes: {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsha256: encryptedFile.hash,\\n\\t\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t};\\n\\n\\t\\t\\t\\t\\t\\t\\tif (/^image\\\\/.+/.test(file.type)) {\\n\\t\\t\\t\\t\\t\\t\\t\\tconst dimensions = await getHeightAndWidthFromDataUrl(window.URL.createObjectURL(file));\\n\\n\\t\\t\\t\\t\\t\\t\\t\\tattachments.push({\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t...attachment,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\timage_url: fileUrl,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\timage_type: file.type,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\timage_size: file.size,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t...(dimensions && {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\timage_dimensions: dimensions,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}),\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t} else if (/^audio\\\\/.+/.test(file.type)) {\\n\\t\\t\\t\\t\\t\\t\\t\\tattachments.push({\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t...attachment,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taudio_url: fileUrl,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taudio_type: file.type,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\taudio_size: file.size,\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t} else if (/^video\\\\/.+/.test(file.type)) {\\n\\t\\t\\t\\t\\t\\t\\t\\tattachments.push({\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t...attachment,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tvideo_url: fileUrl,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tvideo_type: file.type,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tvideo_size: file.size,\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\tattachments.push({\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t...attachment,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsize: file.size,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tformat: getFileExtension(file.name),\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t\\tconst files = [\\n\\t\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t_id,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tname: file.name,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttype: file.type,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsize: file.size,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t// \\\"format\\\": \\\"png\\\"\\n\\t\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t];\\n\\n\\t\\t\\t\\t\\t\\t\\treturn e2eRoom.encryptMessageContent({\\n\\t\\t\\t\\t\\t\\t\\t\\tattachments,\\n\\t\\t\\t\\t\\t\\t\\t\\tfiles,\\n\\t\\t\\t\\t\\t\\t\\t\\tfile: files[0],\\n\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t};\\n\\n\\t\\t\\t\\t\\t\\tconst fileContentData = {\\n\\t\\t\\t\\t\\t\\t\\ttype: file.type,\\n\\t\\t\\t\\t\\t\\t\\ttypeGroup: file.type.split('/')[0],\\n\\t\\t\\t\\t\\t\\t\\tname: fileName,\\n\\t\\t\\t\\t\\t\\t\\tencryption: {\\n\\t\\t\\t\\t\\t\\t\\t\\tkey: encryptedFile.key,\\n\\t\\t\\t\\t\\t\\t\\t\\tiv: encryptedFile.iv,\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\thashes: {\\n\\t\\t\\t\\t\\t\\t\\t\\tsha256: encryptedFile.hash,\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t};\\n\\n\\t\\t\\t\\t\\t\\tconst fileContent = {\\n\\t\\t\\t\\t\\t\\t\\traw: fileContentData,\\n\\t\\t\\t\\t\\t\\t\\tencrypted: await e2eRoom.encryptMessageContent(fileContentData),\\n\\t\\t\\t\\t\\t\\t};\\n\\n\\t\\t\\t\\t\\t\\tuploadFile(\\n\\t\\t\\t\\t\\t\\t\\tencryptedFile.file,\\n\\t\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\tt: 'e2e',\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\tgetContent,\\n\\t\\t\\t\\t\\t\\t\\tfileContent,\\n\\t\\t\\t\\t\\t\\t);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tinvalidContentType: !fileUploadIsValidContentType(file?.type),\\n\\t\\t\\t},\\n\\t\\t});\\n\\t};\\n\\n\\tuploadNextFile();\\n\\tresetFileInput?.();\\n};\\n\",null],\"names\":[\"_objectSpread\",\"isRoomFederated\",\"e2e\",\"settings\",\"fileUploadIsValidContentType\",\"getFileExtension\",\"FileUploadModal\",\"imperativeModal\",\"prependReplies\",\"module\",\"link\",\"default\",\"v\",\"export\",\"uploadFiles\",\"getHeightAndWidthFromDataUrl\",\"dataURL\",\"Promise\",\"resolve\",\"img\",\"Image\",\"onload\",\"height\",\"width\",\"src\",\"chat\",\"files\",\"resetFileInput\",\"_chat$composer$quoted\",\"_chat$composer\",\"replies\",\"composer\",\"quotedMessages\",\"get\",\"msg\",\"room\",\"data\",\"getRoom\",\"queue\",\"uploadFile\",\"file\",\"extraData\",\"getContent\",\"fileContent\",\"_chat$composer2\",\"uploads\",\"send\",\"clear\",\"close\",\"uploadNextFile\",\"_chat$composer$text\",\"_chat$composer4\",\"_chat$composer3\",\"pop\",\"dismissAllQuotedMessages\",\"open\",\"component\",\"props\",\"fileName\",\"name\",\"fileDescription\",\"text\",\"showDescription\",\"onClose\",\"onSubmit\",\"description\",\"Object\",\"defineProperty\",\"writable\",\"value\",\"e2eRoom\",\"getInstanceByRoomId\",\"_id\",\"shouldConvertSentMessages\",\"encryptedFile\",\"encryptFile\",\"fileUrl\",\"attachments\",\"attachment\",\"title\",\"type\",\"title_link\",\"title_link_download\",\"encryption\",\"key\",\"iv\",\"hashes\",\"sha256\",\"hash\",\"test\",\"dimensions\",\"window\",\"URL\",\"createObjectURL\",\"push\",\"image_url\",\"image_type\",\"image_size\",\"size\",\"image_dimensions\",\"audio_url\",\"audio_type\",\"audio_size\",\"video_url\",\"video_type\",\"video_size\",\"format\",\"encryptMessageContent\",\"fileContentData\",\"typeGroup\",\"split\",\"raw\",\"encrypted\",\"t\",\"invalidContentType\"],\"mappings\":\"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\"}"}