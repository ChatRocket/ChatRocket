{"code":"function module(e,t,n){let o,l,r,u,i,d,c,a,f;n.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){o=e}},0),n.link(\"@rocket.chat/fuselage\",{Box(e){l=e},Tile(e){r=e}},0),n.link(\"@rocket.chat/fuselage-hooks\",{useMergedRefs(e){u=e},usePosition(e){i=e}},1),n.link(\"react\",{default(e){d=e},useMemo(e){c=e},useRef(e){a=e},forwardRef(e){f=e}},2);let m=e=>{for(let n=null!=e?e:document.body;n!==document.body;n=null!==(t=n.parentElement)&&void 0!==t?t:document.body){var t;if(\"none\"!==getComputedStyle(n).transform||\"fixed\"===getComputedStyle(n).position||\"transform\"===getComputedStyle(n).willChange)return n}return document.body},p=(e,t)=>{var n,l,r;let u=m(e.current),d=document.body.getBoundingClientRect().height,a=null!==(n=null===(l=e.current)||void 0===l?void 0:l.getBoundingClientRect().top)&&void 0!==n?n:0,f=(null===(r=t.current)||void 0===r?void 0:r.getBoundingClientRect().height)||0,p=c(()=>a>=d/2?\"top-start\":\"bottom-end\",[f,a]),s=c(()=>\"bottom-end\"===p?\"482px\":\"\".concat(a-12,\"px\"),[p,a]),{style:g}=i(e,t,{placement:p,container:u});return c(()=>o(o({},g),{},{maxHeight:s}),[g])},s=f(function e(e,t){let{reference:n,children:o}=e,i=a(null),c=u(t,i),f=p(n,i);return d.createElement(r,{style:f,ref:c,elevation:\"2\",pi:\"0\",pb:\"0\",display:\"flex\",flexDirection:\"column\",overflow:\"auto\"},d.createElement(l,{flexShrink:1,pb:12},o))});n.exportDefault(s)}","map":"{\"version\":3,\"sources\":[\"client/views/composer/EmojiPicker/EmojiPickerDesktopDropdown.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Tile } from '@rocket.chat/fuselage';\\nimport { useMergedRefs, usePosition } from '@rocket.chat/fuselage-hooks';\\nimport type { ReactNode, Ref, RefObject } from 'react';\\nimport React, { useMemo, useRef, forwardRef } from 'react';\\n\\nconst getDropdownContainer = (descendant: HTMLElement | null) => {\\n\\tfor (let element = descendant ?? document.body; element !== document.body; element = element.parentElement ?? document.body) {\\n\\t\\tif (\\n\\t\\t\\tgetComputedStyle(element).transform !== 'none' ||\\n\\t\\t\\tgetComputedStyle(element).position === 'fixed' ||\\n\\t\\t\\tgetComputedStyle(element).willChange === 'transform'\\n\\t\\t) {\\n\\t\\t\\treturn element;\\n\\t\\t}\\n\\t}\\n\\n\\treturn document.body;\\n};\\n\\nconst useDropdownPosition = (reference: RefObject<HTMLElement>, target: RefObject<HTMLElement>) => {\\n\\tconst innerContainer = getDropdownContainer(reference.current);\\n\\tconst viewHeight = document.body.getBoundingClientRect().height;\\n\\tconst refTop = reference.current?.getBoundingClientRect().top ?? 0;\\n\\tconst targetHeight = target.current?.getBoundingClientRect().height || 0;\\n\\n\\tconst placement = useMemo(() => {\\n\\t\\tif (refTop >= viewHeight / 2) {\\n\\t\\t\\treturn 'top-start';\\n\\t\\t}\\n\\t\\treturn 'bottom-end';\\n\\t}, [targetHeight, refTop]);\\n\\n\\tconst maxHeight = useMemo(() => (placement === 'bottom-end' ? '482px' : `${refTop - 12}px`), [placement, refTop]);\\n\\n\\tconst { style } = usePosition(reference, target, {\\n\\t\\tplacement,\\n\\t\\tcontainer: innerContainer,\\n\\t});\\n\\n\\treturn useMemo(() => {\\n\\t\\treturn { ...style, maxHeight };\\n\\t}, [style]);\\n};\\n\\ntype EmojiPickerDesktopDropdownProps = {\\n\\tchildren: ReactNode;\\n\\treference: RefObject<HTMLElement>;\\n};\\n\\n/**\\n * @reference is the trigger element target\\n * @ref is the dropdown element target\\n *  */\\nconst EmojiPickerDesktopDropdown = forwardRef(function ToolboxDropdownDesktop(\\n\\t{ reference, children }: EmojiPickerDesktopDropdownProps,\\n\\tref: Ref<HTMLElement>,\\n) {\\n\\tconst targetRef = useRef<HTMLElement>(null);\\n\\tconst mergedRef = useMergedRefs(ref, targetRef);\\n\\n\\tconst style = useDropdownPosition(reference, targetRef);\\n\\n\\treturn (\\n\\t\\t<Tile style={style} ref={mergedRef} elevation='2' pi='0' pb='0' display='flex' flexDirection='column' overflow='auto'>\\n\\t\\t\\t<Box flexShrink={1} pb={12}>\\n\\t\\t\\t\\t{children}\\n\\t\\t\\t</Box>\\n\\t\\t</Tile>\\n\\t);\\n});\\n\\nexport default EmojiPickerDesktopDropdown;\\n\",null],\"names\":[\"_objectSpread\",\"Box\",\"Tile\",\"useMergedRefs\",\"usePosition\",\"React\",\"useMemo\",\"useRef\",\"forwardRef\",\"module\",\"link\",\"default\",\"v\",\"getDropdownContainer\",\"descendant\",\"element\",\"document\",\"body\",\"_element$parentElemen\",\"parentElement\",\"getComputedStyle\",\"transform\",\"position\",\"willChange\",\"useDropdownPosition\",\"reference\",\"target\",\"_reference$current$ge\",\"_reference$current\",\"_target$current\",\"innerContainer\",\"current\",\"viewHeight\",\"getBoundingClientRect\",\"height\",\"refTop\",\"top\",\"targetHeight\",\"placement\",\"maxHeight\",\"concat\",\"style\",\"container\",\"EmojiPickerDesktopDropdown\",\"ToolboxDropdownDesktop\",\"_ref\",\"ref\",\"children\",\"targetRef\",\"mergedRef\",\"createElement\",\"elevation\",\"pi\",\"pb\",\"display\",\"flexDirection\",\"overflow\",\"flexShrink\",\"exportDefault\"],\"mappings\":\"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\"}"}