{"code":"function module(n,e,t){var o,l,u,i,c,r,a;t.link(\"react\",{default:function(n){o=n},useEffect:function(n){l=n}},0),t.link(\"../../../../../app/otr/lib/OtrRoomState\",{OtrRoomState:function(n){u=n}},1),t.link(\"../../../../hooks/useOTR\",{useOTR:function(n){i=n}},2),t.link(\"../../../../hooks/usePresence\",{usePresence:function(n){c=n}},3),t.link(\"../../contexts/RoomToolboxContext\",{useRoomToolbox:function(n){r=n}},4),t.link(\"./OTR\",{default:function(n){a=n}},5),t.exportDefault(function(){var n=i(),e=n.otr,t=n.otrState,s=r().closeTab,f=c(null==e?void 0:e.getPeerId()),k=null==f?void 0:f.status,d=null==f?void 0:f.username,T=![\"offline\",\"loading\"].includes(k||\"\");return l(function(){if(t===u.ESTABLISHING){var n=setTimeout(function(){null==e||e.setState(u.TIMEOUT)},1e4);return function(){clearTimeout(n)}}},[e,t]),o.createElement(a,{isOnline:T,onClickClose:s,onClickStart:function(){null==e||e.handshake()},onClickEnd:function(){null==e||e.end()},onClickRefresh:function(){null==e||e.reset(),null==e||e.handshake(!0)},otrState:t,peerUsername:d})})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/OTR/OTRWithData.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { ReactElement } from 'react';\\nimport React, { useEffect } from 'react';\\n\\nimport { OtrRoomState } from '../../../../../app/otr/lib/OtrRoomState';\\nimport { useOTR } from '../../../../hooks/useOTR';\\nimport { usePresence } from '../../../../hooks/usePresence';\\nimport { useRoomToolbox } from '../../contexts/RoomToolboxContext';\\nimport OTRComponent from './OTR';\\n\\nconst OTRWithData = (): ReactElement => {\\n\\tconst { otr, otrState } = useOTR();\\n\\tconst { closeTab } = useRoomToolbox();\\n\\n\\tconst peerUserPresence = usePresence(otr?.getPeerId());\\n\\tconst userStatus = peerUserPresence?.status;\\n\\tconst peerUsername = peerUserPresence?.username;\\n\\tconst isOnline = !['offline', 'loading'].includes(userStatus || '');\\n\\n\\tconst handleStart = (): void => {\\n\\t\\totr?.handshake();\\n\\t};\\n\\n\\tconst handleEnd = (): void => {\\n\\t\\totr?.end();\\n\\t};\\n\\n\\tconst handleReset = (): void => {\\n\\t\\totr?.reset();\\n\\t\\totr?.handshake(true);\\n\\t};\\n\\n\\tuseEffect(() => {\\n\\t\\tif (otrState !== OtrRoomState.ESTABLISHING) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tconst timeout = setTimeout(() => {\\n\\t\\t\\totr?.setState(OtrRoomState.TIMEOUT);\\n\\t\\t}, 10000);\\n\\n\\t\\treturn (): void => {\\n\\t\\t\\tclearTimeout(timeout);\\n\\t\\t};\\n\\t}, [otr, otrState]);\\n\\n\\treturn (\\n\\t\\t<OTRComponent\\n\\t\\t\\tisOnline={isOnline}\\n\\t\\t\\tonClickClose={closeTab}\\n\\t\\t\\tonClickStart={handleStart}\\n\\t\\t\\tonClickEnd={handleEnd}\\n\\t\\t\\tonClickRefresh={handleReset}\\n\\t\\t\\totrState={otrState}\\n\\t\\t\\tpeerUsername={peerUsername}\\n\\t\\t/>\\n\\t);\\n};\\n\\nexport default OTRWithData;\\n\",null],\"names\":[\"React\",\"useEffect\",\"OtrRoomState\",\"useOTR\",\"usePresence\",\"useRoomToolbox\",\"OTRComponent\",\"module\",\"link\",\"v\",\"exportDefault\",\"_useOTR\",\"otr\",\"otrState\",\"closeTab\",\"_useRoomToolbox\",\"peerUserPresence\",\"getPeerId\",\"userStatus\",\"status\",\"peerUsername\",\"username\",\"isOnline\",\"includes\",\"ESTABLISHING\",\"timeout\",\"setTimeout\",\"setState\",\"TIMEOUT\",\"clearTimeout\",\"createElement\",\"onClickClose\",\"onClickStart\",\"handshake\",\"onClickEnd\",\"end\",\"onClickRefresh\",\"reset\"],\"mappings\":\"uBASA,IARAA,EAAOC,EAAkCC,EAAAC,EAAAC,EAAAC,EAAAC,EAAzBC,EAAWC,IAAA,CAAA,QAAa,CAAC,QAAA,SAAAC,CAAA,EAAAT,EAAAS,CAAA,EAAAR,UAAA,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,0CAAA,CAAAN,aAAA,SAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,2BAAA,CAAAL,OAAA,SAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,gCAAA,CAAAJ,YAAA,SAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,oCAAA,CAAAH,eAAA,SAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAAAF,EAAAC,IAAA,CAAA,QAAA,CAAA,QAAA,SAAAC,CAAA,EAAAH,EAAAG,CAAA,CAAA,EAAA,GAAzCF,EAAOG,aAAS,CAQI,WACnB,IAAAC,EAA0BR,IAAlBS,EAAGD,EAAHC,GAAG,CAAEC,EAAQF,EAARE,QAAQ,CACbC,EAAQC,AAAKV,IAAbS,QAAQ,CAEVE,EAAmBZ,EAAYQ,MAAAA,EAAG,KAAA,EAAHA,EAAKK,SAAS,IAC7CC,EAAaF,MAAAA,EAAgB,KAAA,EAAhBA,EAAkBG,MAAM,CACrCC,EAAeJ,MAAAA,EAAgB,KAAA,EAAhBA,EAAkBK,QAAQ,CACzCC,EAAW,CAAC,CAAC,UAAW,UAAU,CAACC,QAAQ,CAACL,GAAc,IA6BhE,OAdAjB,EAAU,WACT,GAAIY,IAAaX,EAAasB,YAAY,EAI1C,IAAMC,EAAUC,WAAW,WAC1Bd,MAAAA,GAAAA,EAAKe,QAAQ,CAACzB,EAAa0B,OAAO,CACnC,EAAG,KAEH,OAAO,WACNC,aAAaJ,EACd,EACD,EAAG,CAACb,EAAKC,EAAS,EAGjBb,EAAA8B,aAAA,CAACxB,EAAY,CACZgB,SAAUA,EACVS,aAAcjB,EACdkB,aA/BkB,WACnBpB,MAAAA,GAAAA,EAAKqB,SAAS,EACf,EA8BEC,WA5BgB,WACjBtB,MAAAA,GAAAA,EAAKuB,GAAG,EACT,EA2BEC,eAzBkB,WACnBxB,MAAAA,GAAAA,EAAKyB,KAAK,GACVzB,MAAAA,GAAAA,EAAKqB,SAAS,CAAC,CAAA,EAChB,EAuBEpB,SAAUA,EACVO,aAAcA,CAAa,EAG9B\"}"}