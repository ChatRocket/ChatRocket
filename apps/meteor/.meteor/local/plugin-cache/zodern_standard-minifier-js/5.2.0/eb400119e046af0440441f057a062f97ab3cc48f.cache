{"code":"function module(e,t,l){let n,i,a,r,s,o,u,c,d,m,h,p,k,f,L,b,w,v;let E=[\"label\"];l.link(\"@babel/runtime/helpers/extends\",{default(e){n=e}},0),l.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){i=e}},1),l.export({DepartmentForwarding:()=>x}),l.link(\"@rocket.chat/fuselage\",{Field(e){a=e},FieldLabel(e){r=e},FieldRow(e){s=e},FieldHint(e){o=e},Box(e){u=e},PaginatedMultiSelectFiltered(e){c=e},CheckOption(e){d=e}},0),l.link(\"@rocket.chat/fuselage-hooks\",{useDebouncedValue(e){m=e}},1),l.link(\"react\",{default(e){h=e},useMemo(e){p=e},useState(e){k=e}},2),l.link(\"react-i18next\",{useTranslation(e){f=e}},3),l.link(\"../../components/Omnichannel/hooks/useDepartmentsList\",{useDepartmentsList(e){L=e}},4),l.link(\"../../hooks/lists/useRecordList\",{useRecordList(e){b=e}},5),l.link(\"../../hooks/useAsyncState\",{AsyncStatePhase(e){w=e}},6),l.link(\"../../hooks/useHasLicenseModule\",{useHasLicenseModule(e){v=e}},7);let x=e=>{let{departmentId:t,value:l=[],handler:x,label:F}=e,{t:_}=f(),[D,M]=k(\"\"),S=v(\"livechat-enterprise\"),g=m(D,500),{itemsList:A,loadMoreItems:R}=L(p(()=>({filter:D,departmentId:t,showArchived:!0}),[t,D])),{phase:y,items:C,itemCount:H}=b(A),I=p(()=>{let e=l.filter(e=>{let{value:t}=e;return!C.find(e=>e.value===t)});return[...C,...e]},[C,l]);return S?h.createElement(a,null,h.createElement(r,null,_(F)),h.createElement(s,null,h.createElement(u,{w:\"100%\"},h.createElement(c,{withTitle:!0,maxWidth:\"100%\",w:\"100%\",flexGrow:1,filter:g,setFilter:M,onChange:x,options:I,value:l,placeholder:_(\"Select_an_option\"),endReached:y===w.LOADING?()=>void 0:e=>{void 0!==e&&R(e,Math.min(50,H))},renderItem:e=>{let{label:t}=e,a=i(e,E);return h.createElement(d,n({},a,{label:h.createElement(\"span\",{style:{whiteSpace:\"normal\"}},t),selected:l.some(e=>e.value===a.value)}))}}))),h.createElement(o,null,_(\"List_of_departments_for_forward_description\"))):null};l.exportDefault(x)}","map":"{\"version\":3,\"sources\":[\"client/omnichannel/additionalForms/DepartmentForwarding.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Field, FieldLabel, FieldRow, FieldHint, Box, PaginatedMultiSelectFiltered, CheckOption } from '@rocket.chat/fuselage';\\nimport type { PaginatedMultiSelectOption } from '@rocket.chat/fuselage';\\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport React, { useMemo, useState } from 'react';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { useDepartmentsList } from '../../components/Omnichannel/hooks/useDepartmentsList';\\nimport { useRecordList } from '../../hooks/lists/useRecordList';\\nimport { AsyncStatePhase } from '../../hooks/useAsyncState';\\nimport { useHasLicenseModule } from '../../hooks/useHasLicenseModule';\\n\\ntype DepartmentForwardingProps = {\\n\\tdepartmentId: string;\\n\\tvalue?: PaginatedMultiSelectOption[];\\n\\thandler: (value: PaginatedMultiSelectOption[]) => void;\\n\\tlabel: TranslationKey;\\n};\\n\\nexport const DepartmentForwarding = ({ departmentId, value = [], handler, label }: DepartmentForwardingProps) => {\\n\\tconst { t } = useTranslation();\\n\\tconst [departmentsFilter, setDepartmentsFilter] = useState('');\\n\\tconst hasLicense = useHasLicenseModule('livechat-enterprise');\\n\\n\\tconst debouncedDepartmentsFilter = useDebouncedValue(departmentsFilter, 500);\\n\\n\\tconst { itemsList: departmentsList, loadMoreItems: loadMoreDepartments } = useDepartmentsList(\\n\\t\\tuseMemo(() => ({ filter: departmentsFilter, departmentId, showArchived: true }), [departmentId, departmentsFilter]),\\n\\t);\\n\\n\\tconst { phase: departmentsPhase, items: departmentsItems, itemCount: departmentsTotal } = useRecordList(departmentsList);\\n\\n\\tconst options = useMemo(() => {\\n\\t\\tconst pending = value.filter(({ value }) => !departmentsItems.find((dep) => dep.value === value));\\n\\t\\treturn [...departmentsItems, ...pending];\\n\\t}, [departmentsItems, value]);\\n\\n\\tif (!hasLicense) {\\n\\t\\treturn null;\\n\\t}\\n\\n\\treturn (\\n\\t\\t<Field>\\n\\t\\t\\t<FieldLabel>{t(label)}</FieldLabel>\\n\\t\\t\\t<FieldRow>\\n\\t\\t\\t\\t<Box w='100%'>\\n\\t\\t\\t\\t\\t<PaginatedMultiSelectFiltered\\n\\t\\t\\t\\t\\t\\twithTitle\\n\\t\\t\\t\\t\\t\\tmaxWidth='100%'\\n\\t\\t\\t\\t\\t\\tw='100%'\\n\\t\\t\\t\\t\\t\\tflexGrow={1}\\n\\t\\t\\t\\t\\t\\tfilter={debouncedDepartmentsFilter}\\n\\t\\t\\t\\t\\t\\tsetFilter={setDepartmentsFilter}\\n\\t\\t\\t\\t\\t\\tonChange={handler}\\n\\t\\t\\t\\t\\t\\toptions={options}\\n\\t\\t\\t\\t\\t\\tvalue={value}\\n\\t\\t\\t\\t\\t\\tplaceholder={t('Select_an_option')}\\n\\t\\t\\t\\t\\t\\tendReached={\\n\\t\\t\\t\\t\\t\\t\\tdepartmentsPhase === AsyncStatePhase.LOADING\\n\\t\\t\\t\\t\\t\\t\\t\\t? () => undefined\\n\\t\\t\\t\\t\\t\\t\\t\\t: (start?: number) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif (start === undefined) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tloadMoreDepartments(start, Math.min(50, departmentsTotal));\\n\\t\\t\\t\\t\\t\\t\\t\\t  }\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\trenderItem={({ label, ...props }) => (\\n\\t\\t\\t\\t\\t\\t\\t<CheckOption\\n\\t\\t\\t\\t\\t\\t\\t\\t{...props}\\n\\t\\t\\t\\t\\t\\t\\t\\tlabel={<span style={{ whiteSpace: 'normal' }}>{label}</span>}\\n\\t\\t\\t\\t\\t\\t\\t\\tselected={value.some((item) => item.value === props.value)}\\n\\t\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</FieldRow>\\n\\t\\t\\t<FieldHint>{t('List_of_departments_for_forward_description')}</FieldHint>\\n\\t\\t</Field>\\n\\t);\\n};\\n\\nexport default DepartmentForwarding;\\n\",null],\"names\":[\"_extends\",\"_objectWithoutProperties\",\"Field\",\"FieldLabel\",\"FieldRow\",\"FieldHint\",\"Box\",\"PaginatedMultiSelectFiltered\",\"CheckOption\",\"useDebouncedValue\",\"React\",\"useMemo\",\"useState\",\"useTranslation\",\"useDepartmentsList\",\"useRecordList\",\"AsyncStatePhase\",\"useHasLicenseModule\",\"module\",\"link\",\"default\",\"v\",\"export\",\"DepartmentForwarding\",\"_ref\",\"departmentId\",\"value\",\"handler\",\"label\",\"t\",\"departmentsFilter\",\"setDepartmentsFilter\",\"hasLicense\",\"debouncedDepartmentsFilter\",\"itemsList\",\"departmentsList\",\"loadMoreItems\",\"loadMoreDepartments\",\"filter\",\"showArchived\",\"phase\",\"departmentsPhase\",\"items\",\"departmentsItems\",\"itemCount\",\"departmentsTotal\",\"options\",\"pending\",\"_ref2\",\"find\",\"dep\",\"createElement\",\"w\",\"withTitle\",\"maxWidth\",\"flexGrow\",\"setFilter\",\"onChange\",\"placeholder\",\"endReached\",\"LOADING\",\"undefined\",\"start\",\"Math\",\"min\",\"renderItem\",\"_ref3\",\"props\",\"_excluded\",\"style\",\"whiteSpace\",\"selected\",\"some\",\"item\",\"exportDefault\"],\"mappings\":\"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\"}"}