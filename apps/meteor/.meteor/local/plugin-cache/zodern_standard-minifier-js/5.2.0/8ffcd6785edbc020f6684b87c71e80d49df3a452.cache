{"code":"function module(e,t,a){let r,l,s,n,c,u,o,i,m,E,d,h,k;let y=[\"resolve\",\"reject\"];a.link(\"@babel/runtime/helpers/objectWithoutProperties\",{default(e){r=e}},0),a.link(\"@rocket.chat/fuselage\",{Box(e){l=e},Callout(e){s=e},Throbber(e){n=e}},0),a.link(\"@rocket.chat/layout\",{HeroLayout(e){c=e}},1),a.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){u=e},useRouteParameter(e){o=e},useEndpoint(e){i=e},useTranslation(e){m=e}},2),a.link(\"react\",{default(e){E=e},useEffect(e){d=e}},3),a.link(\"../../hooks/useAsyncState\",{AsyncStatePhase(e){h=e},useAsyncState(e){k=e}},4);let b=()=>{let e=k(),{resolve:t,reject:a}=e,l=r(e,y),s=i(\"POST\",\"/v1/mailer.unsubscribe\"),n=o(\"_id\"),c=o(\"createdAt\"),m=u();return d(()=>{let e=async(e,r)=>{try{await s({_id:e,createdAt:r}),t(!0)}catch(e){m({type:\"error\",message:e}),a(e instanceof Error?e:Error(String(e)))}};n&&c&&e(n,c)},[t,a,s,n,c,m]),l};a.exportDefault(()=>{let{phase:e,error:t}=b(),a=m();return E.createElement(c,null,E.createElement(l,{color:\"default\",marginInline:\"auto\",marginBlock:16,maxWidth:800},e===h.LOADING&&E.createElement(n,{disabled:!0})||e===h.REJECTED&&E.createElement(s,{type:\"danger\",title:null==t?void 0:t.message})||e===h.RESOLVED&&E.createElement(s,{type:\"success\",title:a(\"You_have_successfully_unsubscribed\")})))})}","map":"{\"version\":3,\"sources\":[\"client/views/mailer/MailerUnsubscriptionPage.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { Box, Callout, Throbber } from '@rocket.chat/fuselage';\\nimport { HeroLayout } from '@rocket.chat/layout';\\nimport { useToastMessageDispatch, useRouteParameter, useEndpoint, useTranslation } from '@rocket.chat/ui-contexts';\\nimport React, { useEffect } from 'react';\\n\\nimport type { AsyncState } from '../../hooks/useAsyncState';\\nimport { AsyncStatePhase, useAsyncState } from '../../hooks/useAsyncState';\\n\\nconst useMailerUnsubscriptionState = (): AsyncState<boolean> => {\\n\\tconst { resolve, reject, ...unsubscribedState } = useAsyncState<boolean>();\\n\\n\\tconst unsubscribe = useEndpoint('POST', '/v1/mailer.unsubscribe');\\n\\tconst _id = useRouteParameter('_id');\\n\\tconst createdAt = useRouteParameter('createdAt');\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\tuseEffect(() => {\\n\\t\\tconst doUnsubscribe = async (_id: string, createdAt: string): Promise<void> => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tawait unsubscribe({ _id, createdAt });\\n\\t\\t\\t\\tresolve(true);\\n\\t\\t\\t} catch (error: unknown) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t\\treject(error instanceof Error ? error : new Error(String(error)));\\n\\t\\t\\t}\\n\\t\\t};\\n\\n\\t\\tif (!_id || !createdAt) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tdoUnsubscribe(_id, createdAt);\\n\\t}, [resolve, reject, unsubscribe, _id, createdAt, dispatchToastMessage]);\\n\\n\\treturn unsubscribedState;\\n};\\n\\nconst MailerUnsubscriptionPage = () => {\\n\\tconst { phase, error } = useMailerUnsubscriptionState();\\n\\n\\tconst t = useTranslation();\\n\\n\\treturn (\\n\\t\\t<HeroLayout>\\n\\t\\t\\t<Box color='default' marginInline='auto' marginBlock={16} maxWidth={800}>\\n\\t\\t\\t\\t{(phase === AsyncStatePhase.LOADING && <Throbber disabled />) ||\\n\\t\\t\\t\\t\\t(phase === AsyncStatePhase.REJECTED && <Callout type='danger' title={error?.message} />) ||\\n\\t\\t\\t\\t\\t(phase === AsyncStatePhase.RESOLVED && <Callout type='success' title={t('You_have_successfully_unsubscribed')} />)}\\n\\t\\t\\t</Box>\\n\\t\\t</HeroLayout>\\n\\t);\\n};\\n\\nexport default MailerUnsubscriptionPage;\\n\",null],\"names\":[\"_objectWithoutProperties\",\"Box\",\"Callout\",\"Throbber\",\"HeroLayout\",\"useToastMessageDispatch\",\"useRouteParameter\",\"useEndpoint\",\"useTranslation\",\"React\",\"useEffect\",\"AsyncStatePhase\",\"useAsyncState\",\"module\",\"link\",\"default\",\"v\",\"useMailerUnsubscriptionState\",\"_useAsyncState\",\"resolve\",\"reject\",\"unsubscribedState\",\"_excluded\",\"unsubscribe\",\"_id\",\"createdAt\",\"dispatchToastMessage\",\"doUnsubscribe\",\"error\",\"type\",\"message\",\"Error\",\"String\",\"exportDefault\",\"MailerUnsubscriptionPage\",\"phase\",\"t\",\"createElement\",\"color\",\"marginInline\",\"marginBlock\",\"maxWidth\",\"LOADING\",\"disabled\",\"REJECTED\",\"title\",\"RESOLVED\"],\"mappings\":\"2BAAAA,EAAAC,EAAOC,EAAOC,EAAiDC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,6BAAxCC,EAAUC,IAAM,CAAA,iDAAwB,CAAAC,QAAAC,CAAA,EAAAhB,EAAAgB,CAAA,CAAA,EAAA,GAAxCH,EAAQC,IAAE,CAAA,wBAAM,CAAuBb,IAACe,CAAA,EAAAf,EAAAe,CAAA,EAAAd,QAAAc,CAAA,EAAAd,EAAAc,CAAA,EAAAb,SAAAa,CAAA,EAAAb,EAAAa,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,sBAAA,CAAAV,WAAAY,CAAA,EAAAZ,EAAAY,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,2BAAA,CAAAT,wBAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,kBAAAU,CAAA,EAAAV,EAAAU,CAAA,EAAAT,YAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,eAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAC,QAAAC,CAAA,EAAAP,EAAAO,CAAA,EAAAN,UAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,4BAAA,CAAAH,gBAAAK,CAAA,EAAAL,EAAAK,CAAA,EAAAJ,cAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAQ/D,IAAMC,EAA+BA,KACpC,IAAAC,EAAkDN,IAA5C,CAAEO,QAAAA,CAAO,CAAEC,OAAAA,CAAAA,CAA8B,CAAAF,EAAnBG,EAAiBrB,EAAAkB,EAAAI,GAEvCC,EAAchB,EAAY,OAAQ,0BAClCiB,EAAMlB,EAAkB,OACxBmB,EAAYnB,EAAkB,aAC9BoB,EAAuBrB,IAoB7B,OAlBAK,EAAU,KACT,IAAMiB,EAAgB,MAAOH,EAAaC,KACzC,GAAI,CACH,MAAMF,EAAY,CAAEC,IAAAA,EAAKC,UAAAA,CAAS,GAClCN,EAAQ,CAAA,EACT,CAAE,MAAOS,EAAgB,CACxBF,EAAqB,CAAEG,KAAM,QAASC,QAASF,CAAK,GACpDR,EAAOQ,aAAiBG,MAAQH,EAAQ,AAAIG,MAAMC,OAAOJ,IAC1D,CACD,EAEKJ,GAAQC,GAIbE,EAAcH,EAAKC,EACpB,EAAG,CAACN,EAASC,EAAQG,EAAaC,EAAKC,EAAWC,EAAqB,EAEhEL,CACR,EAnCAR,EAAOoB,aAAO,CAqCmBC,KAChC,GAAM,CAAEC,MAAAA,CAAK,CAAEP,MAAAA,CAAAA,CAAO,CAAGX,IAEnBmB,EAAI5B,IAEV,OACCC,EAAA4B,aAAA,CAACjC,EAAU,KACVK,EAAA4B,aAAA,CAACpC,EAAG,CAACqC,MAAM,UAAUC,aAAa,OAAOC,YAAa,GAAIC,SAAU,GAAI,EACrEN,IAAUxB,EAAgB+B,OAAO,EAAIjC,EAAA4B,aAAA,CAAClC,EAAQ,CAACwC,SAAQ,CAAA,CAAA,IACvDR,IAAUxB,EAAgBiC,QAAQ,EAAInC,EAAA4B,aAAA,CAACnC,EAAO,CAAC2B,KAAK,SAASgB,MAAOjB,MAAAA,EAAK,KAAA,EAALA,EAAOE,OAAAA,AAAQ,IACnFK,IAAUxB,EAAgBmC,QAAQ,EAAIrC,EAAA4B,aAAA,CAACnC,EAAO,CAAC2B,KAAK,UAAUgB,MAAOT,EAAE,qCAAsC,IAInH\"}"}