{"code":"function module(e,t,a){let r,n,o,l,i;a.link(\"@babel/runtime/helpers/objectSpread2\",{default(e){r=e}},0),a.export({useRedirectOnSettingsChanged:()=>c}),a.link(\"@rocket.chat/ui-contexts\",{useRouter(e){n=e}},0),a.link(\"react\",{useEffect(e){o=e}},1),a.link(\"../../../../../app/ui-utils/client\",{LegacyRoomManager(e){l=e}},2),a.link(\"../../../../lib/rooms/roomCoordinator\",{roomCoordinator(e){i=e}},3);let u={channel:\"c\",group:\"p\",direct:\"d\",live:\"l\"},c=e=>{let t=n(),a=!!e;o(()=>{if(!a)return;let n=async()=>{let a=i.getRoomDirectives(e.t).config.route,n=t.getRouteParameters().name,o=t.getRouteName();if(!(null!=a&&a.path)||!o||!n||a.name===o&&n===e.name)return;let c=u[o];c&&await l.close(c+o),t.navigate({pattern:a.path,params:r(r({},t.getRouteParameters()),{},{name:e.name}),search:t.getSearchParameters()})};n()},[null==e?void 0:e.t,null==e?void 0:e.name,t,a])}}","map":"{\"version\":3,\"sources\":[\"client/views/room/providers/hooks/useRedirectOnSettingsChanged.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { ISubscription } from '@rocket.chat/core-typings';\\nimport { useRouter } from '@rocket.chat/ui-contexts';\\nimport { useEffect } from 'react';\\n\\nimport { LegacyRoomManager } from '../../../../../app/ui-utils/client';\\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\\n\\nconst routeNameToRoomTypeMap: Record<string, string> = {\\n\\tchannel: 'c',\\n\\tgroup: 'p',\\n\\tdirect: 'd',\\n\\tlive: 'l',\\n};\\n\\nexport const useRedirectOnSettingsChanged = (subscription?: ISubscription | null) => {\\n\\tconst router = useRouter();\\n\\n\\tconst subExists = !!subscription;\\n\\n\\tuseEffect(() => {\\n\\t\\tif (!subExists) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tconst redirect = async () => {\\n\\t\\t\\tconst routeConfig = roomCoordinator.getRoomDirectives(subscription.t).config.route;\\n\\n\\t\\t\\tconst channelName = router.getRouteParameters().name;\\n\\t\\t\\tconst routeName = router.getRouteName() as string;\\n\\n\\t\\t\\tif (!routeConfig?.path || !routeName || !channelName) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tif (routeConfig.name === routeName && channelName === subscription.name) {\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tconst routeRoomType = routeNameToRoomTypeMap[routeName];\\n\\n\\t\\t\\tif (routeRoomType) {\\n\\t\\t\\t\\tawait LegacyRoomManager.close(routeRoomType + routeName);\\n\\t\\t\\t}\\n\\n\\t\\t\\trouter.navigate({\\n\\t\\t\\t\\tpattern: routeConfig.path,\\n\\t\\t\\t\\tparams: { ...router.getRouteParameters(), name: subscription.name },\\n\\t\\t\\t\\tsearch: router.getSearchParameters(),\\n\\t\\t\\t});\\n\\t\\t};\\n\\t\\tredirect();\\n\\t}, [subscription?.t, subscription?.name, router, subExists]);\\n};\\n\",null],\"names\":[\"_objectSpread\",\"useRouter\",\"useEffect\",\"LegacyRoomManager\",\"roomCoordinator\",\"module\",\"link\",\"default\",\"v\",\"export\",\"useRedirectOnSettingsChanged\",\"routeNameToRoomTypeMap\",\"channel\",\"group\",\"direct\",\"live\",\"subscription\",\"router\",\"subExists\",\"redirect\",\"routeConfig\",\"getRoomDirectives\",\"t\",\"config\",\"route\",\"channelName\",\"getRouteParameters\",\"name\",\"routeName\",\"getRouteName\",\"path\",\"routeRoomType\",\"close\",\"navigate\",\"pattern\",\"params\",\"search\",\"getSearchParameters\"],\"mappings\":\"2BACAA,EAAqDC,EAAAC,EAAAC,EAAAC,EAAnCC,EAAEC,IAAM,CAAA,uCAA2B,CAAAC,QAAAC,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAArDH,EAAOI,MAAE,CAAA,CAAAC,6BAAiBA,IAAAA,CAA2B,GAAAL,EAAAC,IAAA,CAAA,2BAAA,CAAAL,UAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,QAAA,CAAAJ,UAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,qCAAA,CAAAH,kBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAAAH,EAAAC,IAAA,CAAA,wCAAA,CAAAF,gBAAAI,CAAA,EAAAJ,EAAAI,CAAA,CAAA,EAAA,GAMrD,IAAMG,EAAiD,CACtDC,QAAS,IACTC,MAAO,IACPC,OAAQ,IACRC,KAAM,KAGML,EAAgCM,IAC5C,IAAMC,EAAShB,IAETiB,EAAY,CAAC,CAACF,EAEpBd,EAAU,KACT,GAAI,CAACgB,EACJ,OAED,IAAMC,EAAW,UAChB,IAAMC,EAAchB,EAAgBiB,iBAAiB,CAACL,EAAaM,CAAC,EAAEC,MAAM,CAACC,KAAK,CAE5EC,EAAcR,EAAOS,kBAAkB,GAAGC,IAAI,CAC9CC,EAAYX,EAAOY,YAAY,GAErC,GAAI,CAACT,CAAAA,MAAAA,GAAAA,EAAaU,IAAI,AAAJA,GAAQ,CAACF,GAAa,CAACH,GAIrCL,EAAYO,IAAI,GAAKC,GAAaH,IAAgBT,EAAaW,IAAI,CAHtE,OAOD,IAAMI,EAAgBpB,CAAsB,CAACiB,EAAU,CAEnDG,GACH,MAAM5B,EAAkB6B,KAAK,CAACD,EAAgBH,GAG/CX,EAAOgB,QAAQ,CAAC,CACfC,QAASd,EAAYU,IAAI,CACzBK,OAAMnC,EAAAA,EAAA,CAAA,EAAOiB,EAAOS,kBAAkB,IAAE,CAAA,EAAA,CAAEC,KAAMX,EAAaW,IAAAA,AAAI,GACjES,OAAQnB,EAAOoB,mBAAmB,IAEpC,EACAlB,GACD,EAAG,CAACH,MAAAA,EAAY,KAAA,EAAZA,EAAcM,CAAC,CAAEN,MAAAA,EAAY,KAAA,EAAZA,EAAcW,IAAI,CAAEV,EAAQC,EAAU,CAC5D\"}"}