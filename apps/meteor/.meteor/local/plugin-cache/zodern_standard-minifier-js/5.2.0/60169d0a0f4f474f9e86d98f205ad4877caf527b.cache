{"code":"function module(e,t,n){let l,a,r,c,o,i,s,u,m,d,p,E,f,b,_,g,k,h,S,x,y;n.link(\"@rocket.chat/fuselage\",{Box(e){l=e},Button(e){a=e},ButtonGroup(e){r=e},Callout(e){c=e},Margins(e){o=e},ProgressBar(e){i=e},Skeleton(e){s=e},StatesAction(e){u=e},StatesIcon(e){m=e},StatesSubtitle(e){d=e},ToggleSwitch(e){p=e}},0),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){E=e},useSetting(e){f=e}},1),n.link(\"@tanstack/react-query\",{useMutation(e){b=e}},2),n.link(\"react\",{default(e){_=e}},3),n.link(\"react-i18next\",{Trans(e){g=e},useTranslation(e){k=e}},4),n.link(\"../../../components/Contextualbar\",{ContextualbarContent(e){h=e},ContextualbarFooter(e){S=e}},5),n.link(\"../../../hooks/useIsEnterprise\",{useIsEnterprise(e){x=e}},6),n.link(\"../../hooks/useActiveConnections\",{useActiveConnections(e){y=e}},7),n.exportDefault(()=>{let{t:e}=k(),t=y(),n=f(\"Presence_broadcast_disabled\"),C=E(\"POST\",\"/v1/presence.enableBroadcast\"),v=b(()=>C()),{data:w,isLoading:B}=x();if(t.isLoading||v.isLoading||B)return _.createElement(l,{pi:16,pb:8},_.createElement(s,null),_.createElement(s,null),_.createElement(s,null),_.createElement(s,null),_.createElement(s,null));if(t.isError||v.isError)return _.createElement(l,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",pb:20,color:\"default\"},_.createElement(m,{name:\"circle-exclamation\"}),_.createElement(d,null,e(\"Unable_to_load_active_connections\")),_.createElement(u,{icon:\"reload\",onClick:()=>t.refetch()},e(\"Retry\")));let{current:P,max:F,percentage:L}=t.data;return _.createElement(_.Fragment,null,_.createElement(h,{display:\"flex\",flexDirection:\"column\",justifyContent:\"space-between\",color:\"default\"},_.createElement(\"div\",null,_.createElement(l,{display:\"flex\",justifyContent:\"space-between\",mb:16},_.createElement(l,{fontScale:\"p1\"},e(\"Service_status\")),_.createElement(p,{disabled:v.isLoading||!n||100===L,checked:!n,onChange:()=>v.mutate()})),_.createElement(l,{display:\"flex\",fontScale:\"c1\",justifyContent:\"space-between\",mb:16},_.createElement(l,null,e(\"Active_connections\")),_.createElement(l,null,null!=w&&w.isEnterprise?P:\"\".concat(P,\"/\").concat(F))),!(null!=w&&w.isEnterprise)&&_.createElement(i,{percentage:L,variant:L>80?\"danger\":\"success\"}),n&&_.createElement(o,{block:16},_.createElement(c,{type:\"danger\",title:e(\"Service_disabled\")},e(\"Service_disabled_description\")))),_.createElement(l,{display:\"flex\",flexDirection:\"column\",mb:16},null!=w&&w.isEnterprise?_.createElement(_.Fragment,null,_.createElement(l,{fontScale:\"p2\",mb:8},e(\"Premium_cap_description\")),_.createElement(l,{fontScale:\"p2\",mb:8},_.createElement(g,{i18nKey:\"Larger_amounts_of_active_connections\"},\"For larger amounts of active connections you can consider our\",_.createElement(l,{is:\"a\",href:\"https://docs.rocket.chat/deploy/scaling-rocket.chat\",target:\"_blank\",color:\"info\"},\"multiple instance solutions\"),\".\"))):_.createElement(_.Fragment,null,_.createElement(l,{fontScale:\"p2\",mb:8},e(\"Community_cap_description\")),_.createElement(l,{fontScale:\"p2\",mb:8},e(\"Premium_cap_description\"))))),!(null!=w&&w.isEnterprise)&&_.createElement(S,{borderBlockStartWidth:\"default\",borderBlockColor:\"extra-light\"},_.createElement(r,{stretch:!0,vertical:!0},_.createElement(a,{primary:!0,width:\"100%\",is:\"a\",href:\"https://www.rocket.chat/enterprise\",target:\"_blank\"},e(\"More_about_Premium_plans\")))))})}","map":"{\"version\":3,\"sources\":[\"client/views/admin/customUserStatus/CustomUserStatusService.tsx\",\"<anon>\"],\"sourcesContent\":[\"import {\\n\\tBox,\\n\\tButton,\\n\\tButtonGroup,\\n\\tCallout,\\n\\tMargins,\\n\\tProgressBar,\\n\\tSkeleton,\\n\\tStatesAction,\\n\\tStatesIcon,\\n\\tStatesSubtitle,\\n\\tToggleSwitch,\\n} from '@rocket.chat/fuselage';\\nimport { useEndpoint, useSetting } from '@rocket.chat/ui-contexts';\\nimport { useMutation } from '@tanstack/react-query';\\nimport React from 'react';\\nimport { Trans, useTranslation } from 'react-i18next';\\n\\nimport { ContextualbarContent, ContextualbarFooter } from '../../../components/Contextualbar';\\nimport { useIsEnterprise } from '../../../hooks/useIsEnterprise';\\nimport { useActiveConnections } from '../../hooks/useActiveConnections';\\n\\nconst CustomUserStatusService = () => {\\n\\tconst { t } = useTranslation();\\n\\tconst result = useActiveConnections();\\n\\tconst presenceDisabled = useSetting<boolean>('Presence_broadcast_disabled');\\n\\tconst togglePresenceServiceEndpoint = useEndpoint('POST', '/v1/presence.enableBroadcast');\\n\\tconst disablePresenceService = useMutation(() => togglePresenceServiceEndpoint());\\n\\tconst { data: license, isLoading: licenseIsLoading } = useIsEnterprise();\\n\\n\\tif (result.isLoading || disablePresenceService.isLoading || licenseIsLoading) {\\n\\t\\treturn (\\n\\t\\t\\t<Box pi={16} pb={8}>\\n\\t\\t\\t\\t<Skeleton />\\n\\t\\t\\t\\t<Skeleton />\\n\\t\\t\\t\\t<Skeleton />\\n\\t\\t\\t\\t<Skeleton />\\n\\t\\t\\t\\t<Skeleton />\\n\\t\\t\\t</Box>\\n\\t\\t);\\n\\t}\\n\\tif (result.isError || disablePresenceService.isError) {\\n\\t\\treturn (\\n\\t\\t\\t<Box display='flex' flexDirection='column' alignItems='center' pb={20} color='default'>\\n\\t\\t\\t\\t<StatesIcon name='circle-exclamation' />\\n\\t\\t\\t\\t<StatesSubtitle>{t('Unable_to_load_active_connections')}</StatesSubtitle>\\n\\t\\t\\t\\t<StatesAction icon='reload' onClick={() => result.refetch()}>\\n\\t\\t\\t\\t\\t{t('Retry')}\\n\\t\\t\\t\\t</StatesAction>\\n\\t\\t\\t</Box>\\n\\t\\t);\\n\\t}\\n\\n\\tconst { current, max, percentage } = result.data;\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<ContextualbarContent display='flex' flexDirection='column' justifyContent='space-between' color='default'>\\n\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t<Box display='flex' justifyContent='space-between' mb={16}>\\n\\t\\t\\t\\t\\t\\t<Box fontScale='p1'>{t('Service_status')}</Box>\\n\\t\\t\\t\\t\\t\\t<ToggleSwitch\\n\\t\\t\\t\\t\\t\\t\\tdisabled={disablePresenceService.isLoading || !presenceDisabled || percentage === 100}\\n\\t\\t\\t\\t\\t\\t\\tchecked={!presenceDisabled}\\n\\t\\t\\t\\t\\t\\t\\tonChange={() => disablePresenceService.mutate()}\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t<Box display='flex' fontScale='c1' justifyContent='space-between' mb={16}>\\n\\t\\t\\t\\t\\t\\t<Box>{t('Active_connections')}</Box>\\n\\t\\t\\t\\t\\t\\t<Box>{license?.isEnterprise ? current : `${current}/${max}`}</Box>\\n\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t{!license?.isEnterprise && <ProgressBar percentage={percentage} variant={percentage > 80 ? 'danger' : 'success'} />}\\n\\t\\t\\t\\t\\t{presenceDisabled && (\\n\\t\\t\\t\\t\\t\\t<Margins block={16}>\\n\\t\\t\\t\\t\\t\\t\\t<Callout type='danger' title={t('Service_disabled')}>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Service_disabled_description')}\\n\\t\\t\\t\\t\\t\\t\\t</Callout>\\n\\t\\t\\t\\t\\t\\t</Margins>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<Box display='flex' flexDirection='column' mb={16}>\\n\\t\\t\\t\\t\\t{license?.isEnterprise ? (\\n\\t\\t\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t\\t\\t<Box fontScale='p2' mb={8}>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Premium_cap_description')}\\n\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t\\t<Box fontScale='p2' mb={8}>\\n\\t\\t\\t\\t\\t\\t\\t\\t<Trans i18nKey='Larger_amounts_of_active_connections'>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tFor larger amounts of active connections you can consider our\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<Box is='a' href='https://docs.rocket.chat/deploy/scaling-rocket.chat' target='_blank' color='info'>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmultiple instance solutions\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t.\\n\\t\\t\\t\\t\\t\\t\\t\\t</Trans>\\n\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t</>\\n\\t\\t\\t\\t\\t) : (\\n\\t\\t\\t\\t\\t\\t<>\\n\\t\\t\\t\\t\\t\\t\\t<Box fontScale='p2' mb={8}>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Community_cap_description')}\\n\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t\\t<Box fontScale='p2' mb={8}>\\n\\t\\t\\t\\t\\t\\t\\t\\t{t('Premium_cap_description')}\\n\\t\\t\\t\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t\\t\\t</>\\n\\t\\t\\t\\t\\t)}\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t</ContextualbarContent>\\n\\t\\t\\t{!license?.isEnterprise && (\\n\\t\\t\\t\\t<ContextualbarFooter borderBlockStartWidth='default' borderBlockColor='extra-light'>\\n\\t\\t\\t\\t\\t<ButtonGroup stretch vertical>\\n\\t\\t\\t\\t\\t\\t<Button primary width='100%' is='a' href='https://www.rocket.chat/enterprise' target='_blank'>\\n\\t\\t\\t\\t\\t\\t\\t{t('More_about_Premium_plans')}\\n\\t\\t\\t\\t\\t\\t</Button>\\n\\t\\t\\t\\t\\t</ButtonGroup>\\n\\t\\t\\t\\t</ContextualbarFooter>\\n\\t\\t\\t)}\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default CustomUserStatusService;\\n\",null],\"names\":[\"Box\",\"Button\",\"ButtonGroup\",\"Callout\",\"Margins\",\"ProgressBar\",\"Skeleton\",\"StatesAction\",\"StatesIcon\",\"StatesSubtitle\",\"ToggleSwitch\",\"useEndpoint\",\"useSetting\",\"useMutation\",\"React\",\"Trans\",\"useTranslation\",\"ContextualbarContent\",\"ContextualbarFooter\",\"useIsEnterprise\",\"useActiveConnections\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"CustomUserStatusService\",\"t\",\"result\",\"presenceDisabled\",\"togglePresenceServiceEndpoint\",\"disablePresenceService\",\"data\",\"license\",\"isLoading\",\"licenseIsLoading\",\"createElement\",\"pi\",\"pb\",\"isError\",\"display\",\"flexDirection\",\"alignItems\",\"color\",\"name\",\"icon\",\"onClick\",\"refetch\",\"current\",\"max\",\"percentage\",\"Fragment\",\"justifyContent\",\"mb\",\"fontScale\",\"disabled\",\"checked\",\"onChange\",\"mutate\",\"isEnterprise\",\"concat\",\"variant\",\"block\",\"type\",\"title\",\"i18nKey\",\"is\",\"href\",\"target\",\"borderBlockStartWidth\",\"borderBlockColor\",\"stretch\",\"vertical\",\"primary\",\"width\"],\"mappings\":\"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\"}"}