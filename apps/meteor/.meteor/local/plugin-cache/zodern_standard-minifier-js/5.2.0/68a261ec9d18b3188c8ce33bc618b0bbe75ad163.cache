{"code":"function module(e,t,n){let i,l,o,a,s,r;n.export({useRoomsList:()=>u}),n.link(\"@rocket.chat/ui-contexts\",{useEndpoint(e){i=e}},0),n.link(\"react\",{useCallback(e){l=e},useState(e){o=e}},1),n.link(\"../lib/lists/RecordList\",{RecordList(e){a=e}},2),n.link(\"./lists/useScrollableRecordList\",{useScrollableRecordList(e){s=e}},3),n.link(\"./useComponentDidUpdate\",{useComponentDidUpdate(e){r=e}},4);let u=e=>{let[t,n]=o(()=>new a),u=l(()=>n(new a),[]),d=i(\"GET\",\"/v1/rooms.autocomplete.channelAndPrivate.withPagination\");r(()=>{e&&u()},[e,u]);let c=l(async(t,n)=>{let{items:i,total:l}=await d({selector:JSON.stringify({name:e.text||\"\"}),offset:t,count:t+n,sort:JSON.stringify({name:1})}),o=i.map(e=>{var t,n;return{_id:e._id,_updatedAt:new Date(e._updatedAt),label:null!==(t=e.name)&&void 0!==t?t:\"\",value:null!==(n=e.name)&&void 0!==n?n:\"\"}});return{items:o,itemCount:l}},[d,e.text]),{loadMoreItems:m,initialItemCount:p}=s(t,c,25);return{reload:u,itemsList:t,loadMoreItems:m,initialItemCount:p}}}","map":"{\"version\":3,\"sources\":[\"client/hooks/useRoomsList.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { useEndpoint } from '@rocket.chat/ui-contexts';\\nimport { useCallback, useState } from 'react';\\n\\nimport { RecordList } from '../lib/lists/RecordList';\\nimport { useScrollableRecordList } from './lists/useScrollableRecordList';\\nimport { useComponentDidUpdate } from './useComponentDidUpdate';\\n\\ntype RoomListOptions = {\\n\\ttext: string;\\n};\\n\\ntype IRoomClient = Pick<IRoom, '_updatedAt' | '_id'> & {\\n\\tlabel: string;\\n\\tvalue: string;\\n};\\n\\nexport const useRoomsList = (\\n\\toptions: RoomListOptions,\\n): {\\n\\titemsList: RecordList<IRoomClient>;\\n\\tinitialItemCount: number;\\n\\treload: () => void;\\n\\tloadMoreItems: (start: number, end: number) => void;\\n} => {\\n\\tconst [itemsList, setItemsList] = useState(() => new RecordList<IRoomClient>());\\n\\tconst reload = useCallback(() => setItemsList(new RecordList<IRoomClient>()), []);\\n\\n\\tconst getRooms = useEndpoint('GET', '/v1/rooms.autocomplete.channelAndPrivate.withPagination');\\n\\n\\tuseComponentDidUpdate(() => {\\n\\t\\toptions && reload();\\n\\t}, [options, reload]);\\n\\n\\tconst fetchData = useCallback(\\n\\t\\tasync (start, end) => {\\n\\t\\t\\tconst { items: rooms, total } = await getRooms({\\n\\t\\t\\t\\tselector: JSON.stringify({ name: options.text || '' }),\\n\\t\\t\\t\\toffset: start,\\n\\t\\t\\t\\tcount: start + end,\\n\\t\\t\\t\\tsort: JSON.stringify({ name: 1 }),\\n\\t\\t\\t});\\n\\n\\t\\t\\tconst items = rooms.map((room: any) => ({\\n\\t\\t\\t\\t_id: room._id,\\n\\t\\t\\t\\t_updatedAt: new Date(room._updatedAt),\\n\\t\\t\\t\\tlabel: room.name ?? '',\\n\\t\\t\\t\\tvalue: room.name ?? '',\\n\\t\\t\\t}));\\n\\n\\t\\t\\treturn {\\n\\t\\t\\t\\titems,\\n\\t\\t\\t\\titemCount: total,\\n\\t\\t\\t};\\n\\t\\t},\\n\\t\\t[getRooms, options.text],\\n\\t);\\n\\n\\tconst { loadMoreItems, initialItemCount } = useScrollableRecordList(itemsList, fetchData, 25);\\n\\n\\treturn {\\n\\t\\treload,\\n\\t\\titemsList,\\n\\t\\tloadMoreItems,\\n\\t\\tinitialItemCount,\\n\\t};\\n};\\n\",null],\"names\":[\"useEndpoint\",\"useCallback\",\"useState\",\"RecordList\",\"useScrollableRecordList\",\"useComponentDidUpdate\",\"module\",\"export\",\"useRoomsList\",\"link\",\"v\",\"options\",\"itemsList\",\"setItemsList\",\"reload\",\"getRooms\",\"fetchData\",\"start\",\"end\",\"items\",\"rooms\",\"total\",\"selector\",\"JSON\",\"stringify\",\"name\",\"text\",\"offset\",\"count\",\"sort\",\"map\",\"room\",\"_room$name\",\"_room$name2\",\"_id\",\"_updatedAt\",\"Date\",\"label\",\"value\",\"itemCount\",\"loadMoreItems\",\"initialItemCount\"],\"mappings\":\"2BAC4BA,EAA2BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAvDC,EAAOC,MAAE,CAAA,CAAAC,aAAmBA,IAAAA,CAAA,GAA2BF,EAAAG,IAAA,CAAA,2BAAA,CAAAT,YAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAR,YAAAS,CAAA,EAAAT,EAAAS,CAAA,EAAAR,SAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,0BAAA,CAAAN,WAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,kCAAA,CAAAL,wBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,0BAAA,CAAAJ,sBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAgBhD,IAAMF,EACZG,IAOA,GAAM,CAACC,EAAWC,EAAa,CAAGX,EAAS,IAAM,IAAIC,GAC/CW,EAASb,EAAY,IAAMY,EAAa,IAAIV,GAA4B,EAAE,EAE1EY,EAAWf,EAAY,MAAO,2DAEpCK,EAAsB,KACrBM,GAAWG,GACZ,EAAG,CAACH,EAASG,EAAO,EAEpB,IAAME,EAAYf,EACjB,MAAOgB,EAAOC,KACb,GAAM,CAAEC,MAAOC,CAAK,CAAEC,MAAAA,CAAAA,CAAO,CAAG,MAAMN,EAAS,CAC9CO,SAAUC,KAAKC,SAAS,CAAC,CAAEC,KAAMd,EAAQe,IAAI,EAAI,EAAE,GACnDC,OAAQV,EACRW,MAAOX,EAAQC,EACfW,KAAMN,KAAKC,SAAS,CAAC,CAAEC,KAAM,CAAC,KAGzBN,EAAQC,EAAMU,GAAG,CAAEC,IAAS,IAAAC,EAAAC,EAAA,MAAM,CACvCC,IAAKH,EAAKG,GAAG,CACbC,WAAY,IAAIC,KAAKL,EAAKI,UAAU,EACpCE,MAAK,AAAW,OAAXL,CAAAA,EAAED,EAAKN,IAAI,AAAJA,GAAIO,AAAA,KAAA,IAAAA,EAAAA,EAAI,GACpBM,MAAK,AAAW,OAAXL,CAAAA,EAAEF,EAAKN,IAAI,AAAJA,GAAIQ,AAAA,KAAA,IAAAA,EAAAA,EAAI,GACpB,GAED,MAAO,CACNd,MAAAA,EACAoB,UAAWlB,EAEb,EACA,CAACN,EAAUJ,EAAQe,IAAI,CAAC,EAGnB,CAAEc,cAAAA,CAAa,CAAEC,iBAAAA,CAAAA,CAAkB,CAAGrC,EAAwBQ,EAAWI,EAAW,IAE1F,MAAO,CACNF,OAAAA,EACAF,UAAAA,EACA4B,cAAAA,EACAC,iBAAAA,EAEF\"}"}