{"code":"function module(e,r,i){i.export({RegisterForm:function(){return S}},!0),i.link(\"react/jsx-runtime\",{jsx:function(e){n=e},jsxs:function(e){o=e}},0),i.link(\"@rocket.chat/fuselage\",{FieldGroup:function(e){a=e},TextInput:function(e){t=e},Field:function(e){s=e},FieldLabel:function(e){l=e},FieldRow:function(e){d=e},FieldError:function(e){c=e},PasswordInput:function(e){m=e},ButtonGroup:function(e){u=e},Button:function(e){f=e},TextAreaInput:function(e){p=e},Callout:function(e){g=e}},1),i.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId:function(e){h=e}},2),i.link(\"@rocket.chat/layout\",{Form:function(e){v=e},ActionLink:function(e){y=e}},3),i.link(\"@rocket.chat/ui-client\",{CustomFieldsForm:function(e){w=e},PasswordVerifier:function(e){b=e},useValidatePassword:function(e){q=e}},4),i.link(\"@rocket.chat/ui-contexts\",{useAccountsCustomFields:function(e){_=e},useSetting:function(e){k=e},useToastMessageDispatch:function(e){x=e}},5),i.link(\"react\",{useEffect:function(e){C=e},useRef:function(e){F=e},useState:function(e){A=e}},6),i.link(\"react-hook-form\",{useForm:function(e){P=e}},7),i.link(\"react-i18next\",{Trans:function(e){O=e},useTranslation:function(e){j=e}},8),i.link(\"./EmailConfirmationForm\",{default:function(e){T=e}},9),i.link(\"./hooks/useRegisterMethod\",{useRegisterMethod:function(e){$=e}},10);var n,o,a,t,s,l,d,c,m,u,f,p,g,h,v,y,w,b,q,_,k,x,C,F,A,P,O,j,T,$,R=this&&this.__awaiter||function(e,r,i,n){return new(i||(i=Promise))(function(o,a){function t(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var r;e.done?o(e.value):((r=e.value)instanceof i?r:new i(function(e){e(r)})).then(t,s)}l((n=n.apply(e,r||[])).next())})},E=this&&this.__rest||function(e,r){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>r.indexOf(n)&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)0>r.indexOf(n[o])&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]]);return i};let S=({setLoginRoute:e})=>{var r,i,S,I,B,L,N;let{t:U}=j(),M=!!k(\"Accounts_RequireNameForSignUp\"),Z=k(\"Accounts_RequirePasswordConfirmation\"),D=k(\"Accounts_ManuallyApproveNewUsers\"),G=String(k(\"Accounts_EmailOrUsernamePlaceholder\")),J=String(k(\"Accounts_PasswordPlaceholder\")),V=String(k(\"Accounts_ConfirmPasswordPlaceholder\")),H=h(),K=h(),W=h(),Y=h(),z=h(),Q=h(),X=h(),ee=h(),er=$(),ei=_(),[en,eo]=A(void 0),ea=x(),{register:et,handleSubmit:es,setError:el,watch:ed,getValues:ec,clearErrors:em,control:eu,formState:{errors:ef}}=P({mode:\"onBlur\"}),{password:ep}=ed(),eg=q(ep),eh=F(null);return(C(()=>{eh.current&&eh.current.focus()},[]),(null===(r=ef.email)||void 0===r?void 0:r.type)===\"invalid-email\")?n(T,{onBackToLogin:()=>em(\"email\"),email:ec(\"email\")}):o(v,{tabIndex:-1,ref:eh,\"aria-labelledby\":H,\"aria-describedby\":\"welcomeTitle\",onSubmit:es(r=>R(void 0,void 0,void 0,function*(){var{password:i,passwordConfirmation:n}=r,o=E(r,[\"password\",\"passwordConfirmation\"]);er.mutate(Object.assign({pass:i},o),{onError:r=>{[r.error,r.errorType].includes(\"error-invalid-email\")&&el(\"email\",{type:\"invalid-email\",message:U(\"registration.component.form.invalidEmail\")}),\"error-user-already-exists\"===r.errorType&&el(\"username\",{type:\"user-already-exists\",message:U(\"registration.component.form.usernameAlreadyExists\")}),/Email already exists/.test(r.error)&&el(\"email\",{type:\"email-already-exists\",message:U(\"registration.component.form.emailAlreadyExists\")}),/Username is already in use/.test(r.error)&&el(\"username\",{type:\"username-already-exists\",message:U(\"registration.component.form.userAlreadyExist\")}),/The username provided is not valid/.test(r.error)&&el(\"username\",{type:\"username-contains-invalid-chars\",message:U(\"registration.component.form.usernameContainsInvalidChars\")}),/Name contains invalid characters/.test(r.error)&&el(\"name\",{type:\"name-contains-invalid-chars\",message:U(\"registration.component.form.nameContainsInvalidChars\")}),/error-too-many-requests/.test(r.error)&&ea({type:\"error\",message:r.error}),/error-user-is-not-activated/.test(r.error)&&(ea({type:\"info\",message:U(\"registration.page.registration.waitActivationWarning\")}),e(\"login\")),\"error-user-registration-custom-field\"===r.error&&eo(r.message)}})})),children:[n(v.Header,{children:n(v.Title,{id:H,children:U(\"registration.component.form.createAnAccount\")})}),n(v.Container,{children:o(a,{children:[o(s,{children:[n(l,{required:M,htmlFor:W,children:U(\"registration.component.form.name\")}),n(d,{children:n(t,Object.assign({},et(\"name\",{required:!!M&&U(\"Required_field\",{field:U(\"registration.component.form.name\")})}),{error:null===(i=null==ef?void 0:ef.name)||void 0===i?void 0:i.message,\"aria-required\":M,\"aria-invalid\":ef.name?\"true\":\"false\",placeholder:U(\"onboarding.form.adminInfoForm.fields.fullName.placeholder\"),\"aria-describedby\":`${W}-error`,id:W}))}),ef.name&&n(c,{\"aria-live\":\"assertive\",id:`${W}-error`,children:ef.name.message})]}),o(s,{children:[n(l,{required:!0,htmlFor:Y,children:U(\"registration.component.form.email\")}),n(d,{children:n(t,Object.assign({},et(\"email\",{required:U(\"Required_field\",{field:U(\"registration.component.form.email\")}),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,message:U(\"registration.component.form.invalidEmail\")}}),{placeholder:G||U(\"registration.component.form.emailPlaceholder\"),error:null===(S=null==ef?void 0:ef.email)||void 0===S?void 0:S.message,\"aria-required\":\"true\",\"aria-invalid\":ef.email?\"true\":\"false\",\"aria-describedby\":`${Y}-error`,id:Y}))}),ef.email&&n(c,{\"aria-live\":\"assertive\",id:`${Y}-error`,children:ef.email.message})]}),o(s,{children:[n(l,{required:!0,htmlFor:z,children:U(\"registration.component.form.username\")}),n(d,{children:n(t,Object.assign({},et(\"username\",{required:U(\"Required_field\",{field:U(\"registration.component.form.username\")})}),{error:null===(I=null==ef?void 0:ef.username)||void 0===I?void 0:I.message,\"aria-required\":\"true\",\"aria-invalid\":ef.username?\"true\":\"false\",\"aria-describedby\":`${z}-error`,id:z,placeholder:\"jon.doe\"}))}),ef.username&&n(c,{\"aria-live\":\"assertive\",id:`${z}-error`,children:ef.username.message})]}),o(s,{children:[n(l,{required:!0,htmlFor:Q,children:U(\"registration.component.form.password\")}),n(d,{children:n(m,Object.assign({},et(\"password\",{required:U(\"Required_field\",{field:U(\"registration.component.form.password\")}),validate:()=>!!eg||U(\"Password_must_meet_the_complexity_requirements\")}),{error:null===(B=ef.password)||void 0===B?void 0:B.message,\"aria-required\":\"true\",\"aria-invalid\":ef.password?\"true\":void 0,id:Q,placeholder:J||U(\"Create_a_password\"),\"aria-describedby\":`${K} ${Q}-error`}))}),(null==ef?void 0:ef.password)&&n(c,{\"aria-live\":\"assertive\",id:`${Q}-error`,children:ef.password.message}),n(b,{password:ep,id:K})]}),Z&&o(s,{children:[n(l,{required:!0,htmlFor:X,children:U(\"registration.component.form.confirmPassword\")}),n(d,{children:n(m,Object.assign({},et(\"passwordConfirmation\",{required:U(\"Required_field\",{field:U(\"registration.component.form.confirmPassword\")}),deps:[\"password\"],validate:e=>ed(\"password\")===e||U(\"registration.component.form.invalidConfirmPass\")}),{error:null===(L=ef.passwordConfirmation)||void 0===L?void 0:L.message,\"aria-required\":\"true\",\"aria-invalid\":ef.passwordConfirmation?\"true\":\"false\",id:X,\"aria-describedby\":`${X}-error`,placeholder:V||U(\"Confirm_password\"),disabled:!eg}))}),ef.passwordConfirmation&&n(c,{\"aria-live\":\"assertive\",id:`${X}-error`,children:ef.passwordConfirmation.message})]}),D&&o(s,{children:[n(l,{required:!0,htmlFor:ee,children:U(\"registration.component.form.reasonToJoin\")}),n(d,{children:n(p,Object.assign({},et(\"reason\",{required:U(\"Required_field\",{field:U(\"registration.component.form.reasonToJoin\")})}),{error:null===(N=null==ef?void 0:ef.reason)||void 0===N?void 0:N.message,\"aria-required\":\"true\",\"aria-invalid\":ef.reason?\"true\":\"false\",\"aria-describedby\":`${ee}-error`,id:ee}))}),ef.reason&&n(c,{\"aria-live\":\"assertive\",id:`${ee}-error`,children:ef.reason.message})]}),n(w,{formName:\"customFields\",formControl:eu,metadata:ei}),en&&n(g,{type:\"danger\",children:en})]})}),o(v.Footer,{children:[n(u,{children:n(f,{type:\"submit\",loading:er.isLoading,primary:!0,children:U(\"registration.component.form.joinYourTeam\")})}),n(y,{onClick:()=>{e(\"login\")},children:n(O,{i18nKey:\"registration.page.register.back\",children:\"Back to Login\"})})]})]})};i.exportDefault(S)}","map":"{\"version\":3,\"sources\":[\"<anon>\"],\"names\":[],\"mappings\":\"\"}"}