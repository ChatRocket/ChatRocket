{"code":"function module(e,t,a){let r,s;a.export({useChangeRole:()=>c}),a.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){r=e}},0),a.link(\"@rocket.chat/ui-contexts\",{useToastMessageDispatch(e){s=e}},1);let c=e=>{let{onGrant:t,onRemove:a,permissionId:c}=e,l=s();return r(async(e,r)=>{try{return r?await a(c,e):await t(c,e),!r}catch(e){l({type:\"error\",message:e})}return r})}}","map":"{\"version\":3,\"sources\":[\"client/views/admin/permissions/hooks/useChangeRole.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRole, IPermission } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport { useToastMessageDispatch } from '@rocket.chat/ui-contexts';\\n\\nexport const useChangeRole = ({\\n\\tonGrant,\\n\\tonRemove,\\n\\tpermissionId,\\n}: {\\n\\tonGrant: (permissionId: IPermission['_id'], roleId: IRole['_id']) => Promise<void>;\\n\\tonRemove: (permissionId: IPermission['_id'], roleId: IRole['_id']) => Promise<void>;\\n\\tpermissionId: IPermission['_id'];\\n}): ((roleId: IRole['_id'], granted: boolean) => Promise<boolean>) => {\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\n\\treturn useMutableCallback(async (roleId, granted) => {\\n\\t\\ttry {\\n\\t\\t\\tif (granted) {\\n\\t\\t\\t\\tawait onRemove(permissionId, roleId);\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tawait onGrant(permissionId, roleId);\\n\\t\\t\\t}\\n\\t\\t\\treturn !granted;\\n\\t\\t} catch (error: unknown) {\\n\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t}\\n\\t\\treturn granted;\\n\\t});\\n};\\n\",null],\"names\":[\"useMutableCallback\",\"useToastMessageDispatch\",\"module\",\"export\",\"useChangeRole\",\"link\",\"v\",\"_ref\",\"onGrant\",\"onRemove\",\"permissionId\",\"dispatchToastMessage\",\"roleId\",\"granted\",\"error\",\"type\",\"message\"],\"mappings\":\"2BACmCA,EAA8BC,EAAjEC,EAAOC,MAAE,CAAA,CAAAC,cAAoBA,IAAAA,CAAM,GAA8BF,EAAAG,IAAA,CAAA,8BAAA,CAAAL,mBAAAM,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,2BAAA,CAAAJ,wBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAG1D,IAAMF,EAAgBG,IAQwC,GARvC,CAC7BC,QAAAA,CAAO,CACPC,SAAAA,CAAQ,CACRC,aAAAA,CAAAA,CAKA,CAAAH,EACMI,EAAuBV,IAE7B,OAAOD,EAAmB,MAAOY,EAAQC,KACxC,GAAI,CAMH,OALIA,EACH,MAAMJ,EAASC,EAAcE,GAE7B,MAAMJ,EAAQE,EAAcE,GAEtB,CAACC,CACT,CAAE,MAAOC,EAAgB,CACxBH,EAAqB,CAAEI,KAAM,QAASC,QAASF,CAAK,EACrD,CACA,OAAOD,CACR,EACD\"}"}