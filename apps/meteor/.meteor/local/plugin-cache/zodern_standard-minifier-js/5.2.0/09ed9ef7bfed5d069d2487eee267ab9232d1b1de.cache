{"code":"function module(e,t,n){let l,s,a,r,u,o,c,i,m,E,f,d,k,p,O;n.link(\"@rocket.chat/core-typings\",{UserStatus(e){l=e}},0),n.link(\"@rocket.chat/fuselage\",{Button(e){s=e},PositionAnimated(e){a=e},Options(e){r=e},useCursor(e){u=e},Box(e){o=e}},1),n.link(\"@rocket.chat/ui-contexts\",{useSetting(e){c=e},useTranslation(e){i=e}},2),n.link(\"react\",{default(e){m=e},useRef(e){E=e},useCallback(e){f=e},useState(e){d=e},useMemo(e){k=e},useEffect(e){p=e}},3),n.link(\"./UserStatus\",{UserStatus(e){O=e}},4),n.exportDefault(e=>{let{margin:t,onChange:n,initialStatus:S=l.OFFLINE,optionWidth:A,placement:I=\"bottom-end\"}=e,g=i(),[h,y]=d(S),F=c(\"Accounts_AllowInvisibleStatusOption\"),N=k(()=>{let e=(e,t)=>m.createElement(o,{display:\"flex\",flexDirection:\"row\",alignItems:\"center\"},m.createElement(o,{marginInlineEnd:8},m.createElement(O,{status:e})),t),t=[[l.ONLINE,e(l.ONLINE,g(\"Online\"))],[l.AWAY,e(l.AWAY,g(\"Away\"))],[l.BUSY,e(l.BUSY,g(\"Busy\"))]];return F&&t.push([l.OFFLINE,e(l.OFFLINE,g(\"Offline\"))]),t},[g,F]),[U,b,w,B,[L,x,Y]]=u(-1,N,(e,t)=>{let[n]=e,[,l]=t;y(n),B(),l()}),v=E(null),C=f(()=>{null!=v&&v.current&&(v.current.focus(),Y(),v.current.classList.add(\"focus-visible\"))},[Y]),D=f(e=>{let[t]=e;y(t),B(),x()},[x,B]);return p(()=>n(h),[h,n]),m.createElement(m.Fragment,null,m.createElement(s,{ref:v,small:!0,square:!0,secondary:!0,onClick:C,onBlur:x,onKeyUp:w,onKeyDown:b,margin:t,\"aria-label\":g(\"User_status_menu\")},m.createElement(O,{status:h})),m.createElement(a,{width:\"auto\",visible:L,anchor:v,placement:I},m.createElement(r,{width:A,onSelect:D,options:N,cursor:U})))})}","map":"{\"version\":3,\"sources\":[\"client/components/UserStatusMenu.tsx\",\"<anon>\"],\"sourcesContent\":[\"import { UserStatus as UserStatusType } from '@rocket.chat/core-typings';\\nimport { Button, PositionAnimated, Options, useCursor, Box } from '@rocket.chat/fuselage';\\nimport { useSetting, useTranslation } from '@rocket.chat/ui-contexts';\\nimport type { ReactElement, ComponentProps } from 'react';\\nimport React, { useRef, useCallback, useState, useMemo, useEffect } from 'react';\\n\\nimport { UserStatus } from './UserStatus';\\n\\ntype UserStatusMenuProps = {\\n\\tmargin: ComponentProps<typeof Box>['margin'];\\n\\tonChange: (type: UserStatusType) => void;\\n\\tinitialStatus?: UserStatusType;\\n\\toptionWidth?: ComponentProps<typeof Box>['width'];\\n\\tplacement?: ComponentProps<typeof PositionAnimated>['placement'];\\n};\\n\\nconst UserStatusMenu = ({\\n\\tmargin,\\n\\tonChange,\\n\\tinitialStatus = UserStatusType.OFFLINE,\\n\\toptionWidth = undefined,\\n\\tplacement = 'bottom-end',\\n}: UserStatusMenuProps): ReactElement => {\\n\\tconst t = useTranslation();\\n\\tconst [status, setStatus] = useState(initialStatus);\\n\\tconst allowInvisibleStatus = useSetting('Accounts_AllowInvisibleStatusOption') as boolean;\\n\\n\\tconst options = useMemo(() => {\\n\\t\\tconst renderOption = (status: UserStatusType, label: string): ReactElement => (\\n\\t\\t\\t<Box display='flex' flexDirection='row' alignItems='center'>\\n\\t\\t\\t\\t<Box marginInlineEnd={8}>\\n\\t\\t\\t\\t\\t<UserStatus status={status} />\\n\\t\\t\\t\\t</Box>\\n\\t\\t\\t\\t{label}\\n\\t\\t\\t</Box>\\n\\t\\t);\\n\\n\\t\\tconst statuses: Array<[value: UserStatusType, label: ReactElement]> = [\\n\\t\\t\\t[UserStatusType.ONLINE, renderOption(UserStatusType.ONLINE, t('Online'))],\\n\\t\\t\\t[UserStatusType.AWAY, renderOption(UserStatusType.AWAY, t('Away'))],\\n\\t\\t\\t[UserStatusType.BUSY, renderOption(UserStatusType.BUSY, t('Busy'))],\\n\\t\\t];\\n\\n\\t\\tif (allowInvisibleStatus) {\\n\\t\\t\\tstatuses.push([UserStatusType.OFFLINE, renderOption(UserStatusType.OFFLINE, t('Offline'))]);\\n\\t\\t}\\n\\n\\t\\treturn statuses;\\n\\t}, [t, allowInvisibleStatus]);\\n\\n\\tconst [cursor, handleKeyDown, handleKeyUp, reset, [visible, hide, show]] = useCursor(-1, options, ([selected], [, hide]) => {\\n\\t\\tsetStatus(selected);\\n\\t\\treset();\\n\\t\\thide();\\n\\t});\\n\\n\\tconst ref = useRef<HTMLButtonElement>(null);\\n\\tconst onClick = useCallback(() => {\\n\\t\\tif (!ref?.current) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t\\tref.current.focus();\\n\\t\\tshow();\\n\\t\\tref.current.classList.add('focus-visible');\\n\\t}, [show]);\\n\\n\\tconst handleSelection = useCallback(\\n\\t\\t([selected]) => {\\n\\t\\t\\tsetStatus(selected);\\n\\t\\t\\treset();\\n\\t\\t\\thide();\\n\\t\\t},\\n\\t\\t[hide, reset],\\n\\t);\\n\\n\\tuseEffect(() => onChange(status), [status, onChange]);\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<Button\\n\\t\\t\\t\\tref={ref}\\n\\t\\t\\t\\tsmall\\n\\t\\t\\t\\tsquare\\n\\t\\t\\t\\tsecondary\\n\\t\\t\\t\\tonClick={onClick}\\n\\t\\t\\t\\tonBlur={hide}\\n\\t\\t\\t\\tonKeyUp={handleKeyUp}\\n\\t\\t\\t\\tonKeyDown={handleKeyDown}\\n\\t\\t\\t\\tmargin={margin}\\n\\t\\t\\t\\taria-label={t('User_status_menu')}\\n\\t\\t\\t>\\n\\t\\t\\t\\t<UserStatus status={status} />\\n\\t\\t\\t</Button>\\n\\t\\t\\t<PositionAnimated width='auto' visible={visible} anchor={ref} placement={placement}>\\n\\t\\t\\t\\t<Options width={optionWidth} onSelect={handleSelection} options={options} cursor={cursor} />\\n\\t\\t\\t</PositionAnimated>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default UserStatusMenu;\\n\",null],\"names\":[\"UserStatusType\",\"Button\",\"PositionAnimated\",\"Options\",\"useCursor\",\"Box\",\"useSetting\",\"useTranslation\",\"React\",\"useRef\",\"useCallback\",\"useState\",\"useMemo\",\"useEffect\",\"UserStatus\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"_ref\",\"margin\",\"onChange\",\"initialStatus\",\"OFFLINE\",\"optionWidth\",\"placement\",\"t\",\"status\",\"setStatus\",\"allowInvisibleStatus\",\"options\",\"renderOption\",\"label\",\"createElement\",\"display\",\"flexDirection\",\"alignItems\",\"marginInlineEnd\",\"statuses\",\"ONLINE\",\"AWAY\",\"BUSY\",\"push\",\"cursor\",\"handleKeyDown\",\"handleKeyUp\",\"reset\",\"visible\",\"hide\",\"show\",\"_ref2\",\"_ref3\",\"selected\",\"ref\",\"onClick\",\"current\",\"focus\",\"classList\",\"add\",\"handleSelection\",\"_ref4\",\"Fragment\",\"small\",\"square\",\"secondary\",\"onBlur\",\"onKeyUp\",\"onKeyDown\",\"width\",\"anchor\",\"onSelect\"],\"mappings\":\"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\"}"}