{"code":"function module(e,o,t){let n,a,l,i,c,r,s,u,m,d,g,k;t.export({useRoomLeave:()=>f}),t.link(\"@rocket.chat/fuselage-hooks\",{useMutableCallback(e){n=e}},0),t.link(\"@rocket.chat/ui-contexts\",{useRouter(e){a=e},useSetModal(e){l=e},useToastMessageDispatch(e){i=e},useMethod(e){c=e},useTranslation(e){r=e},usePermission(e){s=e}},1),t.link(\"react\",{default(e){u=e}},2),t.link(\"../../../../../../../app/ui-utils/client\",{LegacyRoomManager(e){m=e}},3),t.link(\"../../../../../../../definition/IRoomTypeConfig\",{UiTextContext(e){d=e}},4),t.link(\"../../../../../../components/WarningModal\",{default(e){g=e}},5),t.link(\"../../../../../../lib/rooms/roomCoordinator\",{roomCoordinator(e){k=e}},6);let f=function(e){let o=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=r(),f=l(),h=i(),p=c(\"leaveRoom\"),v=a(),x=s(\"c\"===e.t?\"leave-c\":\"leave-p\")&&!1!==e.cl&&o,R=n(()=>{let o=async()=>{try{await p(e._id),v.navigate(\"/home\"),m.close(e._id)}catch(e){h({type:\"error\",message:e})}f(null)},n=k.getRoomDirectives(e.t).getUiText(d.LEAVE_WARNING);f(u.createElement(g,{text:t(n,e.fname||e.name),confirmText:t(\"Leave_room\"),close:()=>f(null),cancelText:t(\"Cancel\"),confirm:o}))});return x?R:null}}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/Info/hooks/actions/useRoomLeave.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom } from '@rocket.chat/core-typings';\\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\\nimport type { TranslationKey } from '@rocket.chat/ui-contexts';\\nimport { useRouter, useSetModal, useToastMessageDispatch, useMethod, useTranslation, usePermission } from '@rocket.chat/ui-contexts';\\nimport React from 'react';\\n\\nimport { LegacyRoomManager } from '../../../../../../../app/ui-utils/client';\\nimport { UiTextContext } from '../../../../../../../definition/IRoomTypeConfig';\\nimport WarningModal from '../../../../../../components/WarningModal';\\nimport { roomCoordinator } from '../../../../../../lib/rooms/roomCoordinator';\\n\\n// TODO implement joined\\nexport const useRoomLeave = (room: IRoom, joined = true) => {\\n\\tconst t = useTranslation();\\n\\tconst setModal = useSetModal();\\n\\tconst dispatchToastMessage = useToastMessageDispatch();\\n\\tconst leaveRoom = useMethod('leaveRoom');\\n\\tconst router = useRouter();\\n\\n\\tconst canLeave = usePermission(room.t === 'c' ? 'leave-c' : 'leave-p') && room.cl !== false && joined;\\n\\n\\tconst handleLeave = useMutableCallback(() => {\\n\\t\\tconst leaveAction = async () => {\\n\\t\\t\\ttry {\\n\\t\\t\\t\\tawait leaveRoom(room._id);\\n\\t\\t\\t\\trouter.navigate('/home');\\n\\t\\t\\t\\tLegacyRoomManager.close(room._id);\\n\\t\\t\\t} catch (error) {\\n\\t\\t\\t\\tdispatchToastMessage({ type: 'error', message: error });\\n\\t\\t\\t}\\n\\t\\t\\tsetModal(null);\\n\\t\\t};\\n\\n\\t\\tconst warnText = roomCoordinator.getRoomDirectives(room.t).getUiText(UiTextContext.LEAVE_WARNING);\\n\\n\\t\\tsetModal(\\n\\t\\t\\t<WarningModal\\n\\t\\t\\t\\ttext={t(warnText as TranslationKey, room.fname || room.name)}\\n\\t\\t\\t\\tconfirmText={t('Leave_room')}\\n\\t\\t\\t\\tclose={() => setModal(null)}\\n\\t\\t\\t\\tcancelText={t('Cancel')}\\n\\t\\t\\t\\tconfirm={leaveAction}\\n\\t\\t\\t/>,\\n\\t\\t);\\n\\t});\\n\\n\\treturn canLeave ? handleLeave : null;\\n};\\n\",null],\"names\":[\"useMutableCallback\",\"useRouter\",\"useSetModal\",\"useToastMessageDispatch\",\"useMethod\",\"useTranslation\",\"usePermission\",\"React\",\"LegacyRoomManager\",\"UiTextContext\",\"WarningModal\",\"roomCoordinator\",\"module\",\"export\",\"useRoomLeave\",\"link\",\"v\",\"default\",\"room\",\"joined\",\"arguments\",\"length\",\"undefined\",\"t\",\"setModal\",\"dispatchToastMessage\",\"leaveRoom\",\"router\",\"canLeave\",\"cl\",\"handleLeave\",\"leaveAction\",\"_id\",\"navigate\",\"close\",\"error\",\"type\",\"message\",\"warnText\",\"getRoomDirectives\",\"getUiText\",\"LEAVE_WARNING\",\"createElement\",\"text\",\"fname\",\"name\",\"confirmText\",\"cancelText\",\"confirm\"],\"mappings\":\"2BACmCA,EAA8BC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAjEC,EAAOC,MAAE,CAAA,CAAAC,aAAkBA,IAAEA,CAAM,GAA8BF,EAAAG,IAAA,CAAA,8BAAA,CAAAf,mBAAAgB,CAAA,EAAAhB,EAAAgB,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,2BAAA,CAAAd,UAAAe,CAAA,EAAAf,EAAAe,CAAA,EAAAd,YAAAc,CAAA,EAAAd,EAAAc,CAAA,EAAAb,wBAAAa,CAAA,EAAAb,EAAAa,CAAA,EAAAZ,UAAAY,CAAA,EAAAZ,EAAAY,CAAA,EAAAX,eAAAW,CAAA,EAAAX,EAAAW,CAAA,EAAAV,cAAAU,CAAA,EAAAV,EAAAU,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,QAAA,CAAAE,QAAAD,CAAA,EAAAT,EAAAS,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,2CAAA,CAAAP,kBAAAQ,CAAA,EAAAR,EAAAQ,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,kDAAA,CAAAN,cAAAO,CAAA,EAAAP,EAAAO,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,4CAAA,CAAAE,QAAAD,CAAA,EAAAN,EAAAM,CAAA,CAAA,EAAA,GAAAJ,EAAAG,IAAA,CAAA,8CAAA,CAAAJ,gBAAAK,CAAA,EAAAL,EAAAK,CAAA,CAAA,EAAA,GAW1D,IAAMF,EAAe,SAACI,CAAW,EAAmB,IAAjBC,EAAMC,CAAAA,CAAAA,UAAAC,MAAA,CAAA,CAAA,GAAAD,AAAAE,KAAAA,IAAAF,SAAA,CAAA,EAAA,EAAAA,SAAA,CAAA,EAAA,CACzCG,EAAIlB,IACJmB,EAAWtB,IACXuB,EAAuBtB,IACvBuB,EAAYtB,EAAU,aACtBuB,EAAS1B,IAET2B,EAAWtB,EAAcY,AAAW,MAAXA,EAAKK,CAAC,CAAW,UAAY,YAAcL,AAAY,CAAA,IAAZA,EAAKW,EAAE,EAAcV,EAEzFW,EAAc9B,EAAmB,KACtC,IAAM+B,EAAc,UACnB,GAAI,CACH,MAAML,EAAUR,EAAKc,GAAG,EACxBL,EAAOM,QAAQ,CAAC,SAChBzB,EAAkB0B,KAAK,CAAChB,EAAKc,GAAG,CACjC,CAAE,MAAOG,EAAO,CACfV,EAAqB,CAAEW,KAAM,QAASC,QAASF,CAAK,EACrD,CACAX,EAAS,KACV,EAEMc,EAAW3B,EAAgB4B,iBAAiB,CAACrB,EAAKK,CAAC,EAAEiB,SAAS,CAAC/B,EAAcgC,aAAa,EAEhGjB,EACCjB,EAAAmC,aAAA,CAAChC,EAAY,CACZiC,KAAMpB,EAAEe,EAA4BpB,EAAK0B,KAAK,EAAI1B,EAAK2B,IAAI,EAC3DC,YAAavB,EAAE,cACfW,MAAOA,IAAMV,EAAS,MACtBuB,WAAYxB,EAAE,UACdyB,QAASjB,CAAY,GAGxB,GAEA,OAAOH,EAAWE,EAAc,IACjC\"}"}