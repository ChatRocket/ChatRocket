{"code":"function module(e,t,o){let l,a,n,r,i,m,s,u,c,d,x,f,p,k,C;o.link(\"@rocket.chat/fuselage-hooks\",{useUniqueId(e){l=e}},0),o.link(\"react\",{default(e){a=e},useMemo(e){n=e}},1),o.link(\"react-hook-form\",{FormProvider(e){r=e},useForm(e){i=e}},2),o.link(\"react-i18next\",{useTranslation(e){m=e}},3),o.link(\"../../../../components/Contextualbar\",{ContextualbarHeader(e){s=e},ContextualbarIcon(e){u=e},ContextualbarTitle(e){c=e},ContextualbarClose(e){d=e}},4),o.link(\"../../../../lib/rooms/roomCoordinator\",{roomCoordinator(e){x=e}},5),o.link(\"../../contexts/RoomContext\",{useRoom(e){f=e}},6),o.link(\"../../contexts/RoomToolboxContext\",{useRoomToolbox(e){p=e}},7),o.link(\"./FileExport\",{default(e){k=e}},8),o.link(\"./MailExportForm\",{default(e){C=e}},9),o.exportDefault(()=>{let{t:e}=m(),t=f(),{closeTab:o}=p(),E=(null==t?void 0:t.t)&&x.getRoomName(t.t,t),b=i({mode:\"onBlur\",defaultValues:{type:\"email\",dateFrom:\"\",dateTo:\"\",toUsers:[],additionalEmails:\"\",messagesCount:0,subject:e(\"Mail_Messages_Subject\",{postProcess:\"sprintf\",sprintf:[E]}),format:\"html\"}}),_=n(()=>[[\"email\",e(\"Send_via_email\")],[\"file\",e(\"Export_as_file\")]],[e]),g=l();return a.createElement(a.Fragment,null,a.createElement(s,null,a.createElement(u,{name:\"mail\"}),a.createElement(c,{id:\"\".concat(g,\"-title\")},e(\"Export_Messages\")),a.createElement(d,{onClick:o})),a.createElement(r,b,\"email\"===b.watch(\"type\")&&a.createElement(C,{formId:g,rid:t._id,exportOptions:_,onCancel:o}),\"file\"===b.watch(\"type\")&&a.createElement(k,{formId:g,rid:t._id,exportOptions:_,onCancel:o})))})}","map":"{\"version\":3,\"sources\":[\"client/views/room/contextualBar/ExportMessages/ExportMessages.tsx\",\"<anon>\"],\"sourcesContent\":[\"import type { SelectOption } from '@rocket.chat/fuselage';\\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\\nimport React, { useMemo } from 'react';\\nimport { FormProvider, useForm } from 'react-hook-form';\\nimport { useTranslation } from 'react-i18next';\\n\\nimport { ContextualbarHeader, ContextualbarIcon, ContextualbarTitle, ContextualbarClose } from '../../../../components/Contextualbar';\\nimport { roomCoordinator } from '../../../../lib/rooms/roomCoordinator';\\nimport { useRoom } from '../../contexts/RoomContext';\\nimport { useRoomToolbox } from '../../contexts/RoomToolboxContext';\\nimport FileExport from './FileExport';\\nimport MailExportForm from './MailExportForm';\\n\\nexport type MailExportFormValues = {\\n\\ttype: 'email' | 'file';\\n\\tdateFrom: string;\\n\\tdateTo: string;\\n\\tformat: 'html' | 'json';\\n\\ttoUsers: string[];\\n\\tadditionalEmails: string;\\n\\tmessagesCount: number;\\n\\tsubject: string;\\n};\\n\\nconst ExportMessages = () => {\\n\\tconst { t } = useTranslation();\\n\\tconst room = useRoom();\\n\\n\\tconst { closeTab } = useRoomToolbox();\\n\\n\\tconst roomName = room?.t && roomCoordinator.getRoomName(room.t, room);\\n\\n\\tconst methods = useForm<MailExportFormValues>({\\n\\t\\tmode: 'onBlur',\\n\\t\\tdefaultValues: {\\n\\t\\t\\ttype: 'email',\\n\\t\\t\\tdateFrom: '',\\n\\t\\t\\tdateTo: '',\\n\\t\\t\\ttoUsers: [],\\n\\t\\t\\tadditionalEmails: '',\\n\\t\\t\\tmessagesCount: 0,\\n\\t\\t\\tsubject: t('Mail_Messages_Subject', {\\n\\t\\t\\t\\tpostProcess: 'sprintf',\\n\\t\\t\\t\\tsprintf: [roomName],\\n\\t\\t\\t}),\\n\\t\\t\\tformat: 'html',\\n\\t\\t},\\n\\t});\\n\\tconst exportOptions = useMemo<SelectOption[]>(\\n\\t\\t() => [\\n\\t\\t\\t['email', t('Send_via_email')],\\n\\t\\t\\t['file', t('Export_as_file')],\\n\\t\\t],\\n\\t\\t[t],\\n\\t);\\n\\n\\tconst formId = useUniqueId();\\n\\n\\treturn (\\n\\t\\t<>\\n\\t\\t\\t<ContextualbarHeader>\\n\\t\\t\\t\\t<ContextualbarIcon name='mail' />\\n\\t\\t\\t\\t<ContextualbarTitle id={`${formId}-title`}>{t('Export_Messages')}</ContextualbarTitle>\\n\\t\\t\\t\\t<ContextualbarClose onClick={closeTab} />\\n\\t\\t\\t</ContextualbarHeader>\\n\\t\\t\\t<FormProvider {...methods}>\\n\\t\\t\\t\\t{methods.watch('type') === 'email' && (\\n\\t\\t\\t\\t\\t<MailExportForm formId={formId} rid={room._id} exportOptions={exportOptions} onCancel={closeTab} />\\n\\t\\t\\t\\t)}\\n\\t\\t\\t\\t{methods.watch('type') === 'file' && (\\n\\t\\t\\t\\t\\t<FileExport formId={formId} rid={room._id} exportOptions={exportOptions} onCancel={closeTab} />\\n\\t\\t\\t\\t)}\\n\\t\\t\\t</FormProvider>\\n\\t\\t</>\\n\\t);\\n};\\n\\nexport default ExportMessages;\\n\",null],\"names\":[\"useUniqueId\",\"React\",\"useMemo\",\"FormProvider\",\"useForm\",\"useTranslation\",\"ContextualbarHeader\",\"ContextualbarIcon\",\"ContextualbarTitle\",\"ContextualbarClose\",\"roomCoordinator\",\"useRoom\",\"useRoomToolbox\",\"FileExport\",\"MailExportForm\",\"module\",\"link\",\"v\",\"default\",\"exportDefault\",\"ExportMessages\",\"t\",\"room\",\"closeTab\",\"roomName\",\"getRoomName\",\"methods\",\"mode\",\"defaultValues\",\"type\",\"dateFrom\",\"dateTo\",\"toUsers\",\"additionalEmails\",\"messagesCount\",\"subject\",\"postProcess\",\"sprintf\",\"format\",\"exportOptions\",\"formId\",\"createElement\",\"Fragment\",\"name\",\"id\",\"concat\",\"onClick\",\"watch\",\"rid\",\"_id\",\"onCancel\"],\"mappings\":\"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\"}"}