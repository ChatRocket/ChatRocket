{"code":"function module(n,o,t){t.link(\"./OTRRoom\",{OTRRoom:function(n){s=n}},0);var s,i=function(){function n(){this.instancesByRoomId=void 0,this.instancesByRoomId={}}var o=n.prototype;return o.getInstanceByRoomId=function(n,o){if(this.instancesByRoomId[o])return this.instancesByRoomId[o];var t=s.create(n,o);if(t)return this.instancesByRoomId[o]=t,this.instancesByRoomId[o]},o.closeAllInstances=function(){Object.values(this.instancesByRoomId).forEach(function(n){n.softReset()}),this.instancesByRoomId={}},n}();t.exportDefault(new i)}","map":"{\"version\":3,\"sources\":[\"app/otr/client/OTR.ts\",\"<anon>\"],\"sourcesContent\":[\"import type { IRoom, IUser } from '@rocket.chat/core-typings';\\n\\nimport type { IOTR } from '../lib/IOTR';\\nimport { OTRRoom } from './OTRRoom';\\n\\nclass OTR implements IOTR {\\n\\tprivate instancesByRoomId: { [rid: string]: OTRRoom };\\n\\n\\tconstructor() {\\n\\t\\tthis.instancesByRoomId = {};\\n\\t}\\n\\n\\tgetInstanceByRoomId(uid: IUser['_id'], rid: IRoom['_id']): OTRRoom | undefined {\\n\\t\\tif (this.instancesByRoomId[rid]) {\\n\\t\\t\\treturn this.instancesByRoomId[rid];\\n\\t\\t}\\n\\n\\t\\tconst otrRoom = OTRRoom.create(uid, rid);\\n\\n\\t\\tif (!otrRoom) {\\n\\t\\t\\treturn undefined;\\n\\t\\t}\\n\\n\\t\\tthis.instancesByRoomId[rid] = otrRoom;\\n\\t\\treturn this.instancesByRoomId[rid];\\n\\t}\\n\\n\\tcloseAllInstances(): void {\\n\\t\\t// Resets state, but doesnt emit events\\n\\t\\t// Other party should receive event and fire events\\n\\t\\tObject.values(this.instancesByRoomId).forEach((instance) => {\\n\\t\\t\\tinstance.softReset();\\n\\t\\t});\\n\\n\\t\\tthis.instancesByRoomId = {};\\n\\t}\\n}\\n\\nexport default new OTR();\\n\",null],\"names\":[\"module\",\"link\",\"OTRRoom\",\"v\",\"OTR\",\"instancesByRoomId\",\"_proto\",\"prototype\",\"getInstanceByRoomId\",\"uid\",\"rid\",\"otrRoom\",\"create\",\"closeAllInstances\",\"Object\",\"values\",\"forEach\",\"instance\",\"softReset\",\"exportDefault\"],\"mappings\":\"uBAGSA,EAASC,IAAA,CAAM,YAAY,CAAAC,QAAA,SAAAC,CAAA,EAAAD,EAAAC,CAAA,CAAA,EAAA,GAAA,IAApCD,EAEME,EAAG,WAGR,SAAAA,IAAA,IAAA,CAFQC,iBAAiB,CAAA,KAAA,EAGxB,IAAI,CAACA,iBAAiB,CAAG,CAAA,CAC1B,CAAC,IAAAC,EAAAF,EAAAG,SAAA,CAyBA,OAzBAD,EAEDE,mBAAmB,CAAnB,SAAoBC,CAAiB,CAAEC,CAAiB,EACvD,GAAI,IAAI,CAACL,iBAAiB,CAACK,EAAI,CAC9B,OAAO,IAAI,CAACL,iBAAiB,CAACK,EAAI,CAGnC,IAAMC,EAAUT,EAAQU,MAAM,CAACH,EAAKC,GAEpC,GAAKC,EAKL,OADA,IAAI,CAACN,iBAAiB,CAACK,EAAI,CAAGC,EACvB,IAAI,CAACN,iBAAiB,CAACK,EAAI,AACnC,EAACJ,EAEDO,iBAAiB,CAAjB,WAGCC,OAAOC,MAAM,CAAC,IAAI,CAACV,iBAAiB,EAAEW,OAAO,CAAC,SAACC,CAAQ,EACtDA,EAASC,SAAS,EACnB,GAEA,IAAI,CAACb,iBAAiB,CAAG,CAAA,CAC1B,EAACD,CAAA,IAhCFJ,EAAOmB,aAAW,CAmCH,IAAIf\"}"}