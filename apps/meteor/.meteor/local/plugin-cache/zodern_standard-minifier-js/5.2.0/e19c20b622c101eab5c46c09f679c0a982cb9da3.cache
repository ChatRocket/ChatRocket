{"code":"function module(e,t,r){var i=e(\"../base\").Reporter,n=e(\"../base\").EncoderBuffer,o=e(\"../base\").DecoderBuffer,s=e(\"minimalistic-assert\"),c=[\"seq\",\"seqof\",\"set\",\"setof\",\"objid\",\"bool\",\"gentime\",\"utctime\",\"null_\",\"enum\",\"int\",\"objDesc\",\"bitstr\",\"bmpstr\",\"charstr\",\"genstr\",\"graphstr\",\"ia5str\",\"iso646str\",\"numstr\",\"octstr\",\"printstr\",\"t61str\",\"unistr\",\"utf8str\",\"videostr\"],a=[\"key\",\"obj\",\"use\",\"optional\",\"explicit\",\"implicit\",\"def\",\"choice\",\"any\",\"contains\"].concat(c);function l(e,t){var r={};this._baseState=r,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}r.exports=l;var u=[\"enc\",\"parent\",\"children\",\"tag\",\"args\",\"reverseArgs\",\"choice\",\"optional\",\"any\",\"obj\",\"use\",\"alteredUse\",\"key\",\"default\",\"explicit\",\"implicit\",\"contains\"];l.prototype.clone=function e(){var e=this._baseState,t={};u.forEach(function(r){t[r]=e[r]});var r=new this.constructor(t.parent);return r._baseState=t,r},l.prototype._wrap=function e(){var e=this._baseState;a.forEach(function(t){this[t]=function r(){var r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}},this)},l.prototype._init=function e(e){var t=this._baseState;s(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),s.equal(t.children.length,1,\"Root node can have only one child\")},l.prototype._useArgs=function e(e){var t=this._baseState,r=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==r.length&&(s(null===t.children),t.children=r,r.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(s(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if(\"object\"!=typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach(function(r){r==(0|r)&&(r|=0),t[e[r]]=r}),t}))},[\"_peekTag\",\"_decodeTag\",\"_use\",\"_decodeStr\",\"_decodeObjid\",\"_decodeTime\",\"_decodeNull\",\"_decodeInt\",\"_decodeBool\",\"_decodeList\",\"_encodeComposite\",\"_encodeStr\",\"_encodeObjid\",\"_encodeTime\",\"_encodeNull\",\"_encodeInt\",\"_encodeBool\"].forEach(function(e){l.prototype[e]=function t(){throw Error(e+\" not implemented for encoding: \"+this._baseState.enc)}}),c.forEach(function(e){l.prototype[e]=function t(){var t=this._baseState,r=Array.prototype.slice.call(arguments);return s(null===t.tag),t.tag=e,this._useArgs(r),this}}),l.prototype.use=function e(e){s(e);var t=this._baseState;return s(null===t.use),t.use=e,this},l.prototype.optional=function e(){return this._baseState.optional=!0,this},l.prototype.def=function e(e){var t=this._baseState;return s(null===t.default),t.default=e,t.optional=!0,this},l.prototype.explicit=function e(e){var t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.explicit=e,this},l.prototype.implicit=function e(e){var t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.implicit=e,this},l.prototype.obj=function e(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},l.prototype.key=function e(e){var t=this._baseState;return s(null===t.key),t.key=e,this},l.prototype.any=function e(){return this._baseState.any=!0,this},l.prototype.choice=function e(e){var t=this._baseState;return s(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},l.prototype.contains=function e(e){var t=this._baseState;return s(null===t.use),t.contains=e,this},l.prototype._decode=function e(e,t){var r,i=this._baseState;if(null===i.parent)return e.wrapResult(i.children[0]._decode(e,t));var n=i.default,s=!0,c=null;if(null!==i.key&&(c=e.enterKey(i.key)),i.optional){var a=null;if(null!==i.explicit?a=i.explicit:null!==i.implicit?a=i.implicit:null!==i.tag&&(a=i.tag),null!==a||i.any){if(s=this._peekTag(e,a,i.any),e.isError(s))return s}else{var l=e.save();try{null===i.choice?this._decodeGeneric(i.tag,e,t):this._decodeChoice(e,t),s=!0}catch(e){s=!1}e.restore(l)}}if(i.obj&&s&&(r=e.enterObject()),s){if(null!==i.explicit){var u=this._decodeTag(e,i.explicit);if(e.isError(u))return u;e=u}var d=e.offset;if(null===i.use&&null===i.choice){if(i.any)var l=e.save();var h=this._decodeTag(e,null!==i.implicit?i.implicit:i.tag,i.any);if(e.isError(h))return h;i.any?n=e.raw(l):e=h}if(t&&t.track&&null!==i.tag&&t.track(e.path(),d,e.length,\"tagged\"),t&&t.track&&null!==i.tag&&t.track(e.path(),e.offset,e.length,\"content\"),i.any||(n=null===i.choice?this._decodeGeneric(i.tag,e,t):this._decodeChoice(e,t)),e.isError(n))return n;if(i.any||null!==i.choice||null===i.children||i.children.forEach(function r(r){r._decode(e,t)}),i.contains&&(\"octstr\"===i.tag||\"bitstr\"===i.tag)){var f=new o(n);n=this._getUse(i.contains,e._reporterState.obj)._decode(f,t)}}return i.obj&&s&&(n=e.leaveObject(r)),null!==i.key&&(null!==n||!0===s)?e.leaveKey(c,i.key,n):null!==c&&e.exitKey(c),n},l.prototype._decodeGeneric=function e(e,t,r){var i=this._baseState;if(\"seq\"===e||\"set\"===e)return null;if(\"seqof\"===e||\"setof\"===e)return this._decodeList(t,e,i.args[0],r);if(/str$/.test(e))return this._decodeStr(t,e,r);if(\"objid\"===e&&i.args)return this._decodeObjid(t,i.args[0],i.args[1],r);if(\"objid\"===e)return this._decodeObjid(t,null,null,r);if(\"gentime\"===e||\"utctime\"===e)return this._decodeTime(t,e,r);if(\"null_\"===e)return this._decodeNull(t,r);if(\"bool\"===e)return this._decodeBool(t,r);else if(\"objDesc\"===e)return this._decodeStr(t,e,r);else if(\"int\"===e||\"enum\"===e)return this._decodeInt(t,i.args&&i.args[0],r);return null!==i.use?this._getUse(i.use,t._reporterState.obj)._decode(t,r):t.error(\"unknown tag: \"+e)},l.prototype._getUse=function e(e,t){var r=this._baseState;return r.useDecoder=this._use(e,t),s(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},l.prototype._decodeChoice=function e(e,t){var r=this._baseState,i=null,n=!1;return(Object.keys(r.choice).some(function(o){var s=e.save(),c=r.choice[o];try{var a=c._decode(e,t);if(e.isError(a))return!1;i={type:o,value:a},n=!0}catch(t){return e.restore(s),!1}return!0},this),n)?i:e.error(\"Choice not matched\")},l.prototype._createEncoderBuffer=function e(e){return new n(e,this.reporter)},l.prototype._encode=function e(e,t,r){var i=this._baseState;if(null===i.default||i.default!==e){var n=this._encodeValue(e,t,r);if(void 0!==n&&!this._skipDefault(n,t,r))return n}},l.prototype._encodeValue=function e(e,t,r){var n,o=this._baseState;if(null===o.parent)return o.children[0]._encode(e,t||new i);var n=null;if(this.reporter=t,o.optional&&void 0===e){if(null===o.default)return;e=o.default}var s=null,c=!1;if(o.any)n=this._createEncoderBuffer(e);else if(o.choice)n=this._encodeChoice(e,t);else if(o.contains)s=this._getUse(o.contains,r)._encode(e,t),c=!0;else if(o.children)s=o.children.map(function(r){if(\"null_\"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error(\"Child should have a key\");var i=t.enterKey(r._baseState.key);if(\"object\"!=typeof e)return t.error(\"Child expected, but input is not object\");var n=r._encode(e[r._baseState.key],t,e);return t.leaveKey(i),n},this).filter(function(e){return e}),s=this._createEncoderBuffer(s);else if(\"seqof\"===o.tag||\"setof\"===o.tag){if(!(o.args&&1===o.args.length))return t.error(\"Too many args for : \"+o.tag);if(!Array.isArray(e))return t.error(\"seqof/setof, but data is not Array\");var a=this.clone();a._baseState.implicit=null,s=this._createEncoderBuffer(e.map(function(r){var i=this._baseState;return this._getUse(i.args[0],e)._encode(r,t)},a))}else null!==o.use?n=this._getUse(o.use,r)._encode(e,t):(s=this._encodePrimitive(o.tag,e),c=!0);if(!o.any&&null===o.choice){var l=null!==o.implicit?o.implicit:o.tag,u=null===o.implicit?\"universal\":\"context\";null===l?null===o.use&&t.error(\"Tag could be omitted only for .use()\"):null===o.use&&(n=this._encodeComposite(l,c,u,s))}return null!==o.explicit&&(n=this._encodeComposite(o.explicit,!1,\"context\",n)),n},l.prototype._encodeChoice=function e(e,t){var r=this._baseState,i=r.choice[e.type];return i||s(!1,e.type+\" not found in \"+JSON.stringify(Object.keys(r.choice))),i._encode(e.value,t)},l.prototype._encodePrimitive=function e(e,t){var r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if(\"objid\"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if(\"objid\"===e)return this._encodeObjid(t,null,null);if(\"gentime\"===e||\"utctime\"===e)return this._encodeTime(t,e);if(\"null_\"===e)return this._encodeNull();if(\"int\"===e||\"enum\"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if(\"bool\"===e)return this._encodeBool(t);else if(\"objDesc\"===e)return this._encodeStr(t,e);else throw Error(\"Unsupported tag: \"+e)},l.prototype._isNumstr=function e(e){return/^[0-9 ]*$/.test(e)},l.prototype._isPrintstr=function e(e){return/^[A-Za-z0-9 '\\(\\)\\+,\\-\\.\\/:=\\?]*$/.test(e)}}","map":"{\"version\":3,\"sources\":[\"<anon>\"],\"names\":[],\"mappings\":\"\"}"}