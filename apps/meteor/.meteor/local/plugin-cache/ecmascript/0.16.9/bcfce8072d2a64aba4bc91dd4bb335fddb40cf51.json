{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/realTimeMonitoring/charts/ChatsPerDepartmentChart.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/views/omnichannel/realTimeMonitoring/charts/ChatsPerDepartmentChart.js","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/realTimeMonitoring/charts/ChatsPerDepartmentChart.js","targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/realTimeMonitoring/charts/ChatsPerDepartmentChart.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/omnichannel/realTimeMonitoring/charts/ChatsPerDepartmentChart.js"}},"code":"const _excluded = [\"params\", \"reloadRef\"];\nlet _extends;\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n}, 0);\nlet _objectWithoutProperties;\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n}, 1);\nlet useTranslation;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useTranslation(v) {\n    useTranslation = v;\n  }\n}, 0);\nlet React, useRef, useEffect;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n  useRef(v) {\n    useRef = v;\n  },\n  useEffect(v) {\n    useEffect = v;\n  }\n}, 1);\nlet drawLineChart;\nmodule.link(\"../../../../../app/livechat/client/lib/chartHandler\", {\n  drawLineChart(v) {\n    drawLineChart = v;\n  }\n}, 2);\nlet AsyncStatePhase;\nmodule.link(\"../../../../hooks/useAsyncState\", {\n  AsyncStatePhase(v) {\n    AsyncStatePhase = v;\n  }\n}, 3);\nlet useEndpointData;\nmodule.link(\"../../../../hooks/useEndpointData\", {\n  useEndpointData(v) {\n    useEndpointData = v;\n  }\n}, 4);\nlet Chart;\nmodule.link(\"./Chart\", {\n  default(v) {\n    Chart = v;\n  }\n}, 5);\nlet useUpdateChartData;\nmodule.link(\"./useUpdateChartData\", {\n  useUpdateChartData(v) {\n    useUpdateChartData = v;\n  }\n}, 6);\nconst initialData = {\n  departments: {}\n};\nconst init = (canvas, context, t) => drawLineChart(canvas, context, [t('Open'), t('Closed')], [], [[], []], {\n  legends: true,\n  anim: true,\n  smallTicks: true\n});\nconst ChatsPerDepartmentChart = _ref => {\n  let {\n      params,\n      reloadRef\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  const t = useTranslation();\n  const canvas = useRef();\n  const context = useRef();\n  const updateChartData = useUpdateChartData({\n    context,\n    canvas,\n    t,\n    init\n  });\n  const {\n    value: data,\n    phase: state,\n    reload\n  } = useEndpointData('/v1/livechat/analytics/dashboards/charts/chats-per-department', {\n    params\n  });\n  reloadRef.current.chatsPerDepartmentChart = reload;\n  const chartData = data !== null && data !== void 0 ? data : initialData;\n  useEffect(() => {\n    const initChart = async () => {\n      context.current = await init(canvas.current, context.current, t);\n    };\n    initChart();\n  }, [t]);\n  useEffect(() => {\n    if (state === AsyncStatePhase.RESOLVED) {\n      if (chartData && chartData.success) {\n        delete chartData.success;\n        Object.entries(chartData).forEach(_ref2 => {\n          let [name, value] = _ref2;\n          updateChartData(name, [value.open, value.closed]);\n        });\n      }\n    }\n  }, [chartData, state, t, updateChartData]);\n  return /*#__PURE__*/React.createElement(Chart, _extends({\n    canvasRef: canvas\n  }, props));\n};\nmodule.exportDefault(ChatsPerDepartmentChart);","map":{"version":3,"names":["_extends","module","link","default","v","_objectWithoutProperties","useTranslation","React","useRef","useEffect","drawLineChart","AsyncStatePhase","useEndpointData","Chart","useUpdateChartData","initialData","departments","init","canvas","context","t","legends","anim","smallTicks","ChatsPerDepartmentChart","_ref","params","reloadRef","props","_excluded","updateChartData","value","data","phase","state","reload","current","chatsPerDepartmentChart","chartData","initChart","RESOLVED","success","Object","entries","forEach","_ref2","name","open","closed","createElement","canvasRef","exportDefault"],"sources":["client/views/omnichannel/realTimeMonitoring/charts/ChatsPerDepartmentChart.js"],"sourcesContent":["import { useTranslation } from '@rocket.chat/ui-contexts';\nimport React, { useRef, useEffect } from 'react';\n\nimport { drawLineChart } from '../../../../../app/livechat/client/lib/chartHandler';\nimport { AsyncStatePhase } from '../../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../../hooks/useEndpointData';\nimport Chart from './Chart';\nimport { useUpdateChartData } from './useUpdateChartData';\n\nconst initialData = {\n\tdepartments: {},\n};\n\nconst init = (canvas, context, t) =>\n\tdrawLineChart(canvas, context, [t('Open'), t('Closed')], [], [[], []], {\n\t\tlegends: true,\n\t\tanim: true,\n\t\tsmallTicks: true,\n\t});\n\nconst ChatsPerDepartmentChart = ({ params, reloadRef, ...props }) => {\n\tconst t = useTranslation();\n\n\tconst canvas = useRef();\n\tconst context = useRef();\n\n\tconst updateChartData = useUpdateChartData({\n\t\tcontext,\n\t\tcanvas,\n\t\tt,\n\t\tinit,\n\t});\n\n\tconst {\n\t\tvalue: data,\n\t\tphase: state,\n\t\treload,\n\t} = useEndpointData('/v1/livechat/analytics/dashboards/charts/chats-per-department', { params });\n\n\treloadRef.current.chatsPerDepartmentChart = reload;\n\n\tconst chartData = data ?? initialData;\n\n\tuseEffect(() => {\n\t\tconst initChart = async () => {\n\t\t\tcontext.current = await init(canvas.current, context.current, t);\n\t\t};\n\t\tinitChart();\n\t}, [t]);\n\n\tuseEffect(() => {\n\t\tif (state === AsyncStatePhase.RESOLVED) {\n\t\t\tif (chartData && chartData.success) {\n\t\t\t\tdelete chartData.success;\n\t\t\t\tObject.entries(chartData).forEach(([name, value]) => {\n\t\t\t\t\tupdateChartData(name, [value.open, value.closed]);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, [chartData, state, t, updateChartData]);\n\n\treturn <Chart canvasRef={canvas} {...props} />;\n};\n\nexport default ChatsPerDepartmentChart;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"bcfce8072d2a64aba4bc91dd4bb335fddb40cf51"}
