{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/github-oauth/github_client.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"packages/github-oauth/github_client.js","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/github-oauth/github_client.js","targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/github-oauth/github_client.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/github-oauth/github_client.js"}},"code":"Github = {};\n\n// Request Github credentials for the user\n// @param options {optional}\n// @param credentialRequestCompleteCallback {Function} Callback function to call on\n//   completion. Takes one argument, credentialToken on success, or Error on\n//   error.\nGithub.requestCredential = (options, credentialRequestCompleteCallback) => {\n  var _Accounts$_options;\n  // support both (options, callback) and (callback).\n  if (!credentialRequestCompleteCallback && typeof options === 'function') {\n    credentialRequestCompleteCallback = options;\n    options = {};\n  }\n  const config = ServiceConfiguration.configurations.findOne({\n    service: 'github'\n  });\n  if (!config) {\n    credentialRequestCompleteCallback && credentialRequestCompleteCallback(new ServiceConfiguration.ConfigError());\n    return;\n  }\n  const credentialToken = Random.secret();\n  const scope = options && options.requestPermissions || ['user:email'];\n  const flatScope = scope.map(encodeURIComponent).join('+');\n  const loginStyle = OAuth._loginStyle('github', config, options);\n  let allowSignup = '';\n  if ((_Accounts$_options = Accounts._options) !== null && _Accounts$_options !== void 0 && _Accounts$_options.forbidClientAccountCreation) {\n    allowSignup = '&allow_signup=false'; // https://docs.github.com/en/developers/apps/building-oauth-apps/authorizing-oauth-apps#parameters\n  }\n  const loginUrl = 'https://github.com/login/oauth/authorize' + \"?client_id=\".concat(config.clientId) + \"&scope=\".concat(flatScope) + \"&redirect_uri=\".concat(OAuth._redirectUri('github', config)) + \"&state=\".concat(OAuth._stateParam(loginStyle, credentialToken, options && options.redirectUrl)) + allowSignup;\n  OAuth.launchLogin({\n    loginService: \"github\",\n    loginStyle,\n    loginUrl,\n    credentialRequestCompleteCallback,\n    credentialToken,\n    popupOptions: {\n      width: 900,\n      height: 450\n    }\n  });\n};","map":{"version":3,"names":["Github","requestCredential","options","credentialRequestCompleteCallback","_Accounts$_options","config","ServiceConfiguration","configurations","findOne","service","ConfigError","credentialToken","Random","secret","scope","requestPermissions","flatScope","map","encodeURIComponent","join","loginStyle","OAuth","_loginStyle","allowSignup","Accounts","_options","forbidClientAccountCreation","loginUrl","concat","clientId","_redirectUri","_stateParam","redirectUrl","launchLogin","loginService","popupOptions","width","height"],"sources":["packages/github-oauth/github_client.js"],"sourcesContent":["Github = {};\n\n// Request Github credentials for the user\n// @param options {optional}\n// @param credentialRequestCompleteCallback {Function} Callback function to call on\n//   completion. Takes one argument, credentialToken on success, or Error on\n//   error.\nGithub.requestCredential = (options, credentialRequestCompleteCallback) => {\n  // support both (options, callback) and (callback).\n  if (!credentialRequestCompleteCallback && typeof options === 'function') {\n    credentialRequestCompleteCallback = options;\n    options = {};\n  }\n\n  const config = ServiceConfiguration.configurations.findOne({service: 'github'});\n  if (!config) {\n    credentialRequestCompleteCallback && credentialRequestCompleteCallback(\n      new ServiceConfiguration.ConfigError());\n    return;\n  }\n  const credentialToken = Random.secret();\n\n  const scope = (options && options.requestPermissions) || ['user:email'];\n  const flatScope = scope.map(encodeURIComponent).join('+');\n\n  const loginStyle = OAuth._loginStyle('github', config, options);\n\n  let allowSignup = '';\n  if (Accounts._options?.forbidClientAccountCreation) {\n    allowSignup = '&allow_signup=false'; // https://docs.github.com/en/developers/apps/building-oauth-apps/authorizing-oauth-apps#parameters\n  }\n\n  const loginUrl =\n    'https://github.com/login/oauth/authorize' +\n    `?client_id=${config.clientId}` +\n    `&scope=${flatScope}` +\n    `&redirect_uri=${OAuth._redirectUri('github', config)}` +\n    `&state=${OAuth._stateParam(loginStyle, credentialToken, options && options.redirectUrl)}` +\n    allowSignup;\n\n  OAuth.launchLogin({\n    loginService: \"github\",\n    loginStyle,\n    loginUrl,\n    credentialRequestCompleteCallback,\n    credentialToken,\n    popupOptions: {width: 900, height: 450}\n  });\n};\n"],"mappings":"AAAAA,MAAM,GAAG,CAAC,CAAC;;AAEX;AACA;AACA;AACA;AACA;AACAA,MAAM,CAACC,iBAAiB,GAAG,CAACC,OAAO,EAAEC,iCAAiC,KAAK;EAAA,IAAAC,kBAAA;EACzE;EACA,IAAI,CAACD,iCAAiC,IAAI,OAAOD,OAAO,KAAK,UAAU,EAAE;IACvEC,iCAAiC,GAAGD,OAAO;IAC3CA,OAAO,GAAG,CAAC,CAAC;EACd;EAEA,MAAMG,MAAM,GAAGC,oBAAoB,CAACC,cAAc,CAACC,OAAO,CAAC;IAACC,OAAO,EAAE;EAAQ,CAAC,CAAC;EAC/E,IAAI,CAACJ,MAAM,EAAE;IACXF,iCAAiC,IAAIA,iCAAiC,CACpE,IAAIG,oBAAoB,CAACI,WAAW,CAAC,CAAC,CAAC;IACzC;EACF;EACA,MAAMC,eAAe,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC;EAEvC,MAAMC,KAAK,GAAIZ,OAAO,IAAIA,OAAO,CAACa,kBAAkB,IAAK,CAAC,YAAY,CAAC;EACvE,MAAMC,SAAS,GAAGF,KAAK,CAACG,GAAG,CAACC,kBAAkB,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;EAEzD,MAAMC,UAAU,GAAGC,KAAK,CAACC,WAAW,CAAC,QAAQ,EAAEjB,MAAM,EAAEH,OAAO,CAAC;EAE/D,IAAIqB,WAAW,GAAG,EAAE;EACpB,KAAAnB,kBAAA,GAAIoB,QAAQ,CAACC,QAAQ,cAAArB,kBAAA,eAAjBA,kBAAA,CAAmBsB,2BAA2B,EAAE;IAClDH,WAAW,GAAG,qBAAqB,CAAC,CAAC;EACvC;EAEA,MAAMI,QAAQ,GACZ,0CAA0C,iBAAAC,MAAA,CAC5BvB,MAAM,CAACwB,QAAQ,CAAE,aAAAD,MAAA,CACrBZ,SAAS,CAAE,oBAAAY,MAAA,CACJP,KAAK,CAACS,YAAY,CAAC,QAAQ,EAAEzB,MAAM,CAAC,CAAE,aAAAuB,MAAA,CAC7CP,KAAK,CAACU,WAAW,CAACX,UAAU,EAAET,eAAe,EAAET,OAAO,IAAIA,OAAO,CAAC8B,WAAW,CAAC,CAAE,GAC1FT,WAAW;EAEbF,KAAK,CAACY,WAAW,CAAC;IAChBC,YAAY,EAAE,QAAQ;IACtBd,UAAU;IACVO,QAAQ;IACRxB,iCAAiC;IACjCQ,eAAe;IACfwB,YAAY,EAAE;MAACC,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE;IAAG;EACxC,CAAC,CAAC;AACJ,CAAC","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"b1be8fdfec926da4c8440fdb322475d27e2ccf95"}
