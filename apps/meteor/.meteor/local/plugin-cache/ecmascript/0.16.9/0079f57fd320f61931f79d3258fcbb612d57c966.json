{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/bundle-visualizer/sunburst.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/bundle-visualizer/sunburst.js","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/bundle-visualizer/sunburst.js","targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"production","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/bundle-visualizer/sunburst.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/bundle-visualizer/sunburst.js"}},"code":"var _require, _require2, _require3, _require4, _DEFAULT_COLORS;\nvar _typeof;\nmodule.link(\"@babel/runtime/helpers/typeof\", {\n  default: function (v) {\n    _typeof = v;\n  }\n}, 0);\nmodule.export({\n  Sunburst: function () {\n    return Sunburst;\n  }\n});\nvar assert;\nmodule.link(\"assert\", {\n  \"default\": function (v) {\n    assert = v;\n  }\n}, 0);\nvar prettyBytes;\nmodule.link(\"pretty-bytes\", {\n  \"default\": function (v) {\n    prettyBytes = v;\n  }\n}, 1);\nmodule.link(\"d3-transition\");\nvar typeBundle, typePackage, typeNodeModules, prefixedClass;\nmodule.link(\"./common.js\", {\n  typeBundle: function (v) {\n    typeBundle = v;\n  },\n  typePackage: function (v) {\n    typePackage = v;\n  },\n  typeNodeModules: function (v) {\n    typeNodeModules = v;\n  },\n  prefixedClass: function (v) {\n    prefixedClass = v;\n  }\n}, 2);\nvar classes;\nmodule.link(\"./classNames.js\", {\n  \"*\": function (v) {\n    classes = v;\n  }\n}, 3);\n// Make a custom \"d3\" object containing exactly what we need from the\n// modularized d3 bundles.\nvar d3 = Object.assign({}, (_require = require(\"d3-selection\"), selectAll = _require.selectAll, select = _require.select, mouse = _require.mouse, _require), (_require2 = require(\"d3-shape\"), arc = _require2.arc, _require2), (_require3 = require(\"d3-hierarchy\"), hierarchy = _require3.hierarchy, partition = _require3.partition, _require3), (_require4 = require(\"d3-collection\"), keys = _require4.keys, entries = _require4.entries, _require4));\n\n// This is imported only for its side effects, which affect the d3 namespace.\n\n// Dimensions of sunburst.\nvar width = 950;\nvar height = 600;\nvar radius = Math.min(width, height) / 2;\n\n// Mapping of step names to colors.\nvar DEFAULT_COLORS = (_DEFAULT_COLORS = {\n  \"_default_\": \"#ababab\"\n}, _DEFAULT_COLORS[typeBundle] = \"#de4f4f\", _DEFAULT_COLORS[typePackage] = \"#de783b\", _DEFAULT_COLORS[typeNodeModules] = \"#7b615c\", _DEFAULT_COLORS[\"meteor\"] = \"#6ab975\", _DEFAULT_COLORS[\"javascript\"] = \"#a173d1\", _DEFAULT_COLORS);\nvar Sunburst = /*#__PURE__*/function () {\n  function Sunburst() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      container = _ref.container,\n      _ref$colors = _ref.colors,\n      colors = _ref$colors === void 0 ? DEFAULT_COLORS : _ref$colors;\n    this.elements = {};\n    this.colors = colors;\n    this.totalSize = 0;\n    assert.strictEqual(_typeof(container), \"object\", \"Must pass a 'container' element\");\n    this.elements.container = d3.select(container);\n    this.elements.main = this.elements.container.append(\"div\").attr(\"class\", prefixedClass(\"main\"));\n    this.elements.pillContainer = this.elements.container.append(\"div\").attr(\"class\", prefixedClass(\"pills\"));\n    this.elements.sequence = this.elements.main.append(\"div\").attr(\"class\", prefixedClass(\"sequence\"));\n    this.elements.chart = this.elements.main.append(\"div\").attr(\"class\", prefixedClass(\"chart\"));\n    this.elements.explanation = this.elements.chart.append(\"div\").attr(\"class\", prefixedClass(\"explanation\"));\n    this.elements.percentage = this.elements.explanation.append(\"span\").attr(\"class\", prefixedClass(\"percentage\"));\n\n    // BR between percentage and bytes.\n    this.elements.explanation.append(\"br\");\n    this.elements.bytes = this.elements.explanation.append(\"span\").attr(\"class\", prefixedClass(\"bytes\"));\n    this.partition = d3.partition().size([2 * Math.PI, radius * radius]);\n    this.arc = d3.arc().startAngle(function (d) {\n      return d.x0;\n    }).endAngle(function (d) {\n      return d.x1;\n    }).innerRadius(function (d) {\n      return Math.sqrt(d.y0);\n    }).outerRadius(function (d) {\n      return Math.sqrt(d.y1);\n    });\n    this.svg = [];\n    this.vis = [];\n    this.totalSizes = [];\n  }\n  var _proto = Sunburst.prototype;\n  _proto.getColor = function () {\n    function getColor(data) {\n      if (data.type === typePackage) {\n        return this.colors[typePackage];\n      }\n      if (data.name.endsWith(\".js\")) {\n        return this.colors.javascript;\n      }\n      if (this.colors[data.name]) {\n        return this.colors[data.name];\n      }\n      return this.colors._default_;\n    }\n    return getColor;\n  }();\n  _proto.initializeBreadcrumbTrail = function () {\n    function initializeBreadcrumbTrail() {\n      // Add the svg area.\n      this.elements.trail = this.elements.container.append(\"div\").attr(\"class\", prefixedClass(\"trail\"));\n    }\n    return initializeBreadcrumbTrail;\n  }();\n  _proto.createPills = function () {\n    function createPills(json) {\n      var _this = this;\n      this.elements.pills = [];\n      json.children.forEach(function (child, i) {\n        var className = prefixedClass(\"pill\") + (i ? '' : \" \" + prefixedClass(\"active\"));\n        _this.elements.pills.push(_this.elements.pillContainer.append(\"div\").attr(\"class\", className).attr(\"name\", child.name).text(child.name).on(\"click\", function () {\n          return _this.handlePillClick(child.name);\n        }));\n      });\n    }\n    return createPills;\n  }();\n  _proto.handlePillClick = function () {\n    function handlePillClick(name) {\n      var _this2 = this;\n      this.elements.pills.forEach(function (pill, i) {\n        var className = pill.attr(\"name\") === name ? prefixedClass(\"pill\") + \" \" + prefixedClass(\"active\") : prefixedClass(\"pill\");\n        pill.attr(\"class\", className);\n        if (pill.attr(\"name\") === name) {\n          _this2.svg[i].style(\"display\", null);\n          _this2.totalSize = _this2.totalSizes[i];\n          _this2.activeBundle = i;\n        } else {\n          _this2.svg[i].style(\"display\", \"none\");\n        }\n      });\n    }\n    return handlePillClick;\n  }();\n  _proto.draw = function () {\n    function draw(json, i) {\n      var _this3 = this;\n      var svg = this.elements.chart.append(\"svg:svg\").attr(\"width\", width).attr(\"height\", height).style(\"display\", \"none\");\n      var vis = svg.append(\"svg:g\").attr(\"class\", prefixedClass(\"top\")).attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\n\n      // Bounding circle underneath the sunburst, to make it easier to detect\n      // when the mouse leaves the parent g.\n      vis.append(\"svg:circle\").attr(\"r\", radius).style(\"opacity\", 0);\n\n      // Add the mouseleave handler to the bounding circle.\n      vis.on(\"mouseleave\", this.mouseleaveEvent());\n\n      // Turn the data into a d3 hierarchy and calculate the sums.\n      this.root = d3.hierarchy(json).sum(function (d) {\n        return d.size;\n      }).sort(function (a, b) {\n        return b.value - a.value;\n      });\n\n      // For efficiency, filter nodes to keep only those large enough to see.\n      this.nodes = this.partition(this.root).descendants().filter(function (d) {\n        return d.x1 - d.x0 > 0.005;\n      }); // 0.005 radians = 0.29 degrees\n\n      this.path = vis.data([json]).selectAll(\"path\").data(this.nodes).enter().append(\"svg:path\").attr(\"display\", function (d) {\n        return d.depth ? null : \"none\";\n      }).attr(\"d\", this.arc).attr(\"fill-rule\", \"evenodd\").style(\"fill\", function (d) {\n        return _this3.getColor(d.data);\n      }).style(\"opacity\", 1).on(\"mouseover\", this.mouseoverEvent());\n\n      // // Get total size of the tree = value of root node from partition.\n      var totalSize = this.path.datum().value;\n      this.svg.push(svg);\n      this.vis.push(vis);\n      this.totalSizes.push(totalSize);\n    }\n    return draw;\n  }();\n  _proto.loadJson = function () {\n    function loadJson(json) {\n      var _this4 = this;\n      // Draw the starburst for the each bundle\n      json.children.forEach(function (bundle) {\n        return _this4.draw({\n          name: 'main',\n          children: [bundle]\n        });\n      });\n\n      // Basic setup of page elements.\n      this.json = json;\n      this.createPills(json);\n      this.initializeBreadcrumbTrail();\n      this.svg[0].style(\"display\", null);\n      this.activeBundle = 0;\n    }\n    return loadJson;\n  }();\n  _proto.mouseoverEvent = function () {\n    function mouseoverEvent() {\n      var _this5 = this;\n      return this.mouseover || (this.mouseover = function (d) {\n        var percentage = (100 * d.value / _this5.totalSizes[_this5.activeBundle]).toPrecision(3);\n        var percentageString = percentage + \"%\";\n        if (percentage < 0.1) {\n          percentageString = \"< 0.1%\";\n        }\n        _this5.elements.percentage.text(percentageString);\n        _this5.elements.bytes.text(prettyBytes(d.value || 0));\n        _this5.elements.explanation.style(\"display\", null);\n        var sequenceArray = d.ancestors().reverse();\n        sequenceArray.shift(); // remove root node from the array\n        _this5.updateBreadcrumbs(sequenceArray, percentageString);\n\n        // Fade all the segments.\n        d3.selectAll(\"path\").style(\"opacity\", 0.3);\n\n        // Then highlight only those that are an ancestor of the current segment.\n        _this5.vis[_this5.activeBundle].selectAll(\"path\").filter(function (node) {\n          return sequenceArray.indexOf(node) >= 0;\n        }).style(\"opacity\", 1);\n      });\n    }\n    return mouseoverEvent;\n  }() // Restore everything to full opacity when moving off the visualization.\n  ;\n  _proto.mouseleaveEvent = function () {\n    function mouseleaveEvent() {\n      var self = this;\n      return self.mouseleave || (self.mouseleave = function (d) {\n        // Hide the breadcrumb trail\n        self.elements.trail.style(\"visibility\", \"hidden\");\n\n        // Deactivate all segments during transition.\n        d3.selectAll(\"path\").on(\"mouseover\", null);\n\n        // Transition each segment to full opacity and then reactivate it.\n        d3.selectAll(\"path\").transition().duration(1000).style(\"opacity\", 1).on(\"end\", function () {\n          d3.select(this).on(\"mouseover\", self.mouseoverEvent());\n        });\n        self.elements.explanation.style(\"display\", \"none\");\n      });\n    }\n    return mouseleaveEvent;\n  }() // Update the breadcrumb trail to show the current sequence and percentage.\n  ;\n  _proto.updateBreadcrumbs = function () {\n    function updateBreadcrumbs(nodeArray, percentageString) {\n      var _this6 = this;\n      // Data join; key function combines name and depth (= position in sequence).\n      var trail = this.elements.trail.selectAll(\"div\").data(nodeArray, function (d) {\n        return d.data.name + d.depth;\n      });\n\n      // Remove exiting nodes.\n      trail.exit().remove();\n\n      // Add breadcrumb and label for entering nodes.\n      var entering = trail.enter().append(\"div\").attr(\"class\", prefixedClass(\"trailSegment\")).style(\"background-color\", function (d) {\n        return _this6.getColor(d.data);\n      }).text(function (d) {\n        return d.data.name;\n      });\n\n      // Merge enter and update selections; set position for all nodes.\n      entering.merge(trail);\n\n      // Make the breadcrumb trail visible, if it's hidden.\n      this.elements.trail.style(\"visibility\", \"\");\n    }\n    return updateBreadcrumbs;\n  }();\n  return Sunburst;\n}();","map":{"version":3,"names":["_typeof","module","link","default","v","export","Sunburst","assert","prettyBytes","typeBundle","typePackage","typeNodeModules","prefixedClass","classes","*","d3","Object","assign","_require","require","selectAll","select","mouse","_require2","arc","_require3","hierarchy","partition","_require4","keys","entries","width","height","radius","Math","min","DEFAULT_COLORS","_DEFAULT_COLORS","_ref","arguments","length","undefined","container","_ref$colors","colors","elements","totalSize","strictEqual","main","append","attr","pillContainer","sequence","chart","explanation","percentage","bytes","size","PI","startAngle","d","x0","endAngle","x1","innerRadius","sqrt","y0","outerRadius","y1","svg","vis","totalSizes","_proto","prototype","getColor","data","type","name","endsWith","javascript","_default_","initializeBreadcrumbTrail","trail","createPills","json","_this","pills","children","forEach","child","i","className","push","text","on","handlePillClick","_this2","pill","style","activeBundle","draw","_this3","mouseleaveEvent","root","sum","sort","a","b","value","nodes","descendants","filter","path","enter","depth","mouseoverEvent","datum","loadJson","_this4","bundle","_this5","mouseover","toPrecision","percentageString","sequenceArray","ancestors","reverse","shift","updateBreadcrumbs","node","indexOf","self","mouseleave","transition","duration","nodeArray","_this6","exit","remove","entering","merge"],"sources":["packages/bundle-visualizer/sunburst.js"],"sourcesContent":["/**\n  Inspired-by, borrowed-from and improved-upon another sundial provided under\n  the Apache License:\n\n    https://bl.ocks.org/kerryrodden/766f8f6d31f645c39f488a0befa1e3c8\n\n  Copyright 2013 Google Inc. All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n*/\n\nimport assert from \"assert\";\nimport prettyBytes from \"pretty-bytes\";\n\n// Make a custom \"d3\" object containing exactly what we need from the\n// modularized d3 bundles.\nconst d3 = Object.assign({},\n  { selectAll, select, mouse } = require(\"d3-selection\"),\n  { arc } = require(\"d3-shape\"),\n  { hierarchy, partition } = require(\"d3-hierarchy\"),\n  { keys, entries } = require(\"d3-collection\"),\n);\n\n// This is imported only for its side effects, which affect the d3 namespace.\nimport \"d3-transition\";\n\nimport {\n  typeBundle,\n  typePackage,\n  typeNodeModules,\n  prefixedClass,\n} from \"./common.js\";\n\nimport * as classes from \"./classNames.js\";\n\n// Dimensions of sunburst.\nconst width = 950;\nconst height = 600;\nconst radius = Math.min(width, height) / 2;\n\n// Mapping of step names to colors.\nconst DEFAULT_COLORS = {\n  \"_default_\": \"#ababab\",\n  [typeBundle]: \"#de4f4f\",\n  [typePackage]: \"#de783b\",\n  [typeNodeModules]: \"#7b615c\",\n  \"meteor\": \"#6ab975\",\n  \"javascript\": \"#a173d1\",\n};\n\nexport class Sunburst {\n  constructor({\n    container,\n    colors = DEFAULT_COLORS,\n  } = {}) {\n    this.elements = {};\n    this.colors = colors;\n    this.totalSize = 0;\n\n    assert.strictEqual(typeof container, \"object\",\n      \"Must pass a 'container' element\");\n\n    this.elements.container = d3.select(container);\n\n    this.elements.main =\n      this.elements.container\n        .append(\"div\")\n          .attr(\"class\", prefixedClass(\"main\"));\n\n    this.elements.pillContainer =\n      this.elements.container\n        .append(\"div\")\n          .attr(\"class\", prefixedClass(\"pills\"));\n\n    this.elements.sequence =\n      this.elements.main\n        .append(\"div\")\n          .attr(\"class\", prefixedClass(\"sequence\"));\n\n    this.elements.chart =\n      this.elements.main\n        .append(\"div\")\n          .attr(\"class\", prefixedClass(\"chart\"));\n\n    this.elements.explanation =\n      this.elements.chart\n        .append(\"div\")\n          .attr(\"class\", prefixedClass(\"explanation\"));\n\n    this.elements.percentage =\n      this.elements.explanation\n        .append(\"span\")\n          .attr(\"class\", prefixedClass(\"percentage\"));\n\n    // BR between percentage and bytes.\n    this.elements.explanation.append(\"br\");\n\n    this.elements.bytes =\n      this.elements.explanation\n        .append(\"span\")\n          .attr(\"class\", prefixedClass(\"bytes\"));\n\n    this.partition = d3.partition()\n      .size([2 * Math.PI, radius * radius]);\n\n    this.arc = d3.arc()\n      .startAngle(d => d.x0)\n      .endAngle(d => d.x1)\n      .innerRadius(d => Math.sqrt(d.y0))\n      .outerRadius(d => Math.sqrt(d.y1));\n\n    this.svg = [];\n    this.vis = [];\n    this.totalSizes = [];\n  }\n\n  getColor(data) {\n    if (data.type === typePackage) {\n      return this.colors[typePackage];\n    }\n\n    if (data.name.endsWith(\".js\")) {\n      return this.colors.javascript;\n    }\n\n    if (this.colors[data.name]) {\n      return this.colors[data.name];\n    }\n\n    return this.colors._default_;\n  }\n\n  initializeBreadcrumbTrail() {\n    // Add the svg area.\n    this.elements.trail =\n      this.elements.container\n        .append(\"div\")\n        .attr(\"class\", prefixedClass(\"trail\"));\n  }\n\n  createPills(json) {\n    this.elements.pills = [];\n    json.children.forEach((child, i) => {\n      const className =\n        prefixedClass(\"pill\") + (i ? '' : ` ${prefixedClass(\"active\")}`);\n      this.elements.pills.push(\n        this.elements.pillContainer\n          .append(\"div\")\n          .attr(\"class\", className)\n          .attr(\"name\", child.name)\n          .text(child.name)\n          .on(\"click\", () => this.handlePillClick(child.name))\n      );\n    })\n  }\n\n  handlePillClick(name) {\n    this.elements.pills.forEach((pill, i) => {\n      const className =\n        pill.attr(\"name\") === name\n          ? `${prefixedClass(\"pill\")} ${prefixedClass(\"active\")}`\n          : prefixedClass(\"pill\");\n\n      pill.attr(\"class\", className);\n      if (pill.attr(\"name\") === name) {\n        this.svg[i].style(\"display\", null);\n        this.totalSize = this.totalSizes[i];\n        this.activeBundle = i;\n      } else {\n        this.svg[i].style(\"display\", \"none\");\n      }\n    });\n  }\n\n  draw(json, i) {\n    const svg = this.elements.chart\n      .append(\"svg:svg\")\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .style(\"display\", \"none\");\n\n    const vis = svg\n      .append(\"svg:g\")\n        .attr(\"class\", prefixedClass(\"top\"))\n        .attr(\"transform\", `translate(${width / 2},${height / 2})`)\n\n    // Bounding circle underneath the sunburst, to make it easier to detect\n    // when the mouse leaves the parent g.\n    vis\n      .append(\"svg:circle\")\n        .attr(\"r\", radius)\n        .style(\"opacity\", 0);\n\n    // Add the mouseleave handler to the bounding circle.\n    vis.on(\"mouseleave\", this.mouseleaveEvent());\n\n    // Turn the data into a d3 hierarchy and calculate the sums.\n    this.root = d3.hierarchy(json)\n      .sum(d => d.size)\n      .sort((a, b) => b.value - a.value);\n\n    // For efficiency, filter nodes to keep only those large enough to see.\n    this.nodes = this\n      .partition(this.root)\n      .descendants()\n      .filter(d => d.x1 - d.x0 > 0.005); // 0.005 radians = 0.29 degrees\n\n    this.path = vis.data([json]).selectAll(\"path\")\n      .data(this.nodes)\n      .enter()\n      .append(\"svg:path\")\n        .attr(\"display\", d => d.depth ? null : \"none\")\n        .attr(\"d\", this.arc)\n        .attr(\"fill-rule\", \"evenodd\")\n        .style(\"fill\", d => this.getColor(d.data))\n        .style(\"opacity\", 1)\n        .on(\"mouseover\", this.mouseoverEvent());\n\n    // // Get total size of the tree = value of root node from partition.\n    const totalSize = this.path.datum().value;\n\n    this.svg.push(svg);\n    this.vis.push(vis);\n    this.totalSizes.push(totalSize);\n  }\n\n  loadJson(json) {\n    // Draw the starburst for the each bundle\n    json.children\n      .forEach(bundle => this.draw({ name: 'main', children: [bundle] }));\n\n    // Basic setup of page elements.\n    this.json = json;\n    this.createPills(json);\n    this.initializeBreadcrumbTrail();\n\n    this.svg[0].style(\"display\", null);\n    this.activeBundle = 0;\n  }\n\n  mouseoverEvent() {\n    return this.mouseover || (this.mouseover = d => {\n      const percentage =\n        (100 * d.value / this.totalSizes[this.activeBundle]).toPrecision(3);\n      let percentageString = `${percentage}%`;\n      if (percentage < 0.1) {\n        percentageString = \"< 0.1%\";\n      }\n\n      this.elements.percentage\n        .text(percentageString);\n\n      this.elements.bytes\n        .text(prettyBytes(d.value || 0));\n\n      this.elements.explanation\n        .style(\"display\", null);\n\n      const sequenceArray = d.ancestors().reverse();\n      sequenceArray.shift(); // remove root node from the array\n      this.updateBreadcrumbs(sequenceArray, percentageString);\n\n      // Fade all the segments.\n      d3.selectAll(\"path\")\n        .style(\"opacity\", 0.3);\n\n      // Then highlight only those that are an ancestor of the current segment.\n      this.vis[this.activeBundle].selectAll(\"path\")\n        .filter((node) => sequenceArray.indexOf(node) >= 0)\n        .style(\"opacity\", 1);\n    });\n  }\n\n  // Restore everything to full opacity when moving off the visualization.\n  mouseleaveEvent() {\n    const self = this;\n    return self.mouseleave || (self.mouseleave = function (d) {\n      // Hide the breadcrumb trail\n      self.elements.trail\n        .style(\"visibility\", \"hidden\");\n\n      // Deactivate all segments during transition.\n      d3.selectAll(\"path\").on(\"mouseover\", null);\n\n      // Transition each segment to full opacity and then reactivate it.\n      d3.selectAll(\"path\")\n        .transition()\n        .duration(1000)\n        .style(\"opacity\", 1)\n        .on(\"end\", function() {\n          d3.select(this).on(\"mouseover\", self.mouseoverEvent());\n        });\n\n      self.elements.explanation\n        .style(\"display\", \"none\");\n    });\n  }\n\n  // Update the breadcrumb trail to show the current sequence and percentage.\n  updateBreadcrumbs(nodeArray, percentageString) {\n    // Data join; key function combines name and depth (= position in sequence).\n    const trail = this.elements.trail\n      .selectAll(\"div\")\n      .data(nodeArray, d => d.data.name + d.depth);\n\n    // Remove exiting nodes.\n    trail.exit().remove();\n\n    // Add breadcrumb and label for entering nodes.\n    const entering = trail.enter()\n      .append(\"div\")\n        .attr(\"class\", prefixedClass(\"trailSegment\"))\n        .style(\"background-color\", d => this.getColor(d.data))\n        .text(d => d.data.name);\n\n    // Merge enter and update selections; set position for all nodes.\n    entering\n      .merge(trail);\n\n    // Make the breadcrumb trail visible, if it's hidden.\n    this.elements.trail\n      .style(\"visibility\", \"\");\n  }\n}\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"0079f57fd320f61931f79d3258fcbb612d57c966"}
