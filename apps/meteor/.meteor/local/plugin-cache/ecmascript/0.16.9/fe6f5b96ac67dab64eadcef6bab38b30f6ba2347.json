{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/irc/server/servers/RFC2813/index.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"app/irc/server/servers/RFC2813/index.js","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/irc/server/servers/RFC2813/index.js","targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true,"topLevelAwait":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/irc/server/servers/RFC2813/index.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/irc/server/servers/RFC2813/index.js"}},"code":"!module.wrapAsync(async function (module, __reifyWaitForDeps__, __reify_async_result__) {\n  \"use strict\";\n  try {\n    let EventEmitter;\n    module.link(\"events\", {\n      EventEmitter(v) {\n        EventEmitter = v;\n      }\n    }, 0);\n    let net;\n    module.link(\"net\", {\n      default(v) {\n        net = v;\n      }\n    }, 1);\n    let util;\n    module.link(\"util\", {\n      default(v) {\n        util = v;\n      }\n    }, 2);\n    let Logger;\n    module.link(\"@rocket.chat/logger\", {\n      Logger(v) {\n        Logger = v;\n      }\n    }, 3);\n    let localCommandHandlers;\n    module.link(\"./localCommandHandlers\", {\n      default(v) {\n        localCommandHandlers = v;\n      }\n    }, 4);\n    let parseMessage;\n    module.link(\"./parseMessage\", {\n      default(v) {\n        parseMessage = v;\n      }\n    }, 5);\n    let peerCommandHandlers;\n    module.link(\"./peerCommandHandlers\", {\n      default(v) {\n        peerCommandHandlers = v;\n      }\n    }, 6);\n    if (__reifyWaitForDeps__()) (await __reifyWaitForDeps__())();\n    const logger = new Logger('IRC Server');\n    class RFC2813 {\n      constructor(config) {\n        this.config = config;\n\n        // Hold registered state\n        this.registerSteps = [];\n        this.isRegistered = false;\n\n        // Hold peer server information\n        this.serverPrefix = null;\n\n        // Hold the buffer while receiving\n        this.receiveBuffer = Buffer.from('');\n      }\n\n      /**\n       * Setup socket\n       */\n      setupSocket() {\n        // Setup socket\n        this.socket = new net.Socket();\n        this.socket.setNoDelay();\n        this.socket.setEncoding('utf-8');\n        this.socket.setKeepAlive(true);\n        this.socket.setTimeout(90000);\n        this.socket.on('data', this.onReceiveFromPeer.bind(this));\n        this.socket.on('connect', this.onConnect.bind(this));\n        this.socket.on('error', err => logger.error(err));\n        this.socket.on('timeout', () => this.log('Timeout'));\n        this.socket.on('close', () => this.log('Connection Closed'));\n        // Setup local\n        this.on('onReceiveFromLocal', this.onReceiveFromLocal.bind(this));\n      }\n\n      /**\n       * Log helper\n       */\n      log(message) {\n        // TODO logger: debug?\n        logger.info(message);\n      }\n\n      /**\n       * Connect\n       */\n      register() {\n        this.log(\"Connecting to @\".concat(this.config.server.host, \":\").concat(this.config.server.port));\n        if (!this.socket) {\n          this.setupSocket();\n        }\n        this.socket.connect(this.config.server.port, this.config.server.host);\n      }\n\n      /**\n       * Disconnect\n       */\n      disconnect() {\n        this.log('Disconnecting from server.');\n        if (this.socket) {\n          this.socket.destroy();\n          this.socket = undefined;\n        }\n        this.isRegistered = false;\n        this.registerSteps = [];\n      }\n\n      /**\n       * Setup the server connection\n       */\n      onConnect() {\n        this.log('Connected! Registering as server...');\n        this.write({\n          command: 'PASS',\n          parameters: [this.config.passwords.local, '0210', 'ngircd']\n        });\n        this.write({\n          command: 'SERVER',\n          parameters: [this.config.server.name],\n          trailer: this.config.server.description\n        });\n      }\n\n      /**\n       * Sends a command message through the socket\n       */\n      write(command) {\n        let buffer = command.prefix ? \":\".concat(command.prefix, \" \") : '';\n        buffer += command.command;\n        if (command.parameters && command.parameters.length > 0) {\n          buffer += \" \".concat(command.parameters.join(' '));\n        }\n        if (command.trailer) {\n          buffer += \" :\".concat(command.trailer);\n        }\n        this.log(\"Sending Command: \".concat(buffer));\n        return this.socket.write(\"\".concat(buffer, \"\\r\\n\"));\n      }\n\n      /**\n       *\n       *\n       * Peer message handling\n       *\n       *\n       */\n      onReceiveFromPeer(chunk) {\n        if (typeof chunk === 'string') {\n          this.receiveBuffer += chunk;\n        } else {\n          this.receiveBuffer = Buffer.concat([this.receiveBuffer, chunk]);\n        }\n        const lines = this.receiveBuffer.toString().split(/\\r\\n|\\r|\\n|\\u0007/); // eslint-disable-line no-control-regex\n\n        // If the buffer does not end with \\r\\n, more chunks are coming\n        if (lines.pop()) {\n          return;\n        }\n\n        // Reset the buffer\n        this.receiveBuffer = Buffer.from('');\n        lines.forEach(line => {\n          if (line.length && !line.startsWith('a')) {\n            const parsedMessage = parseMessage(line);\n            if (peerCommandHandlers[parsedMessage.command]) {\n              this.log(\"Handling peer message: \".concat(line));\n              const command = peerCommandHandlers[parsedMessage.command].call(this, parsedMessage);\n              if (command) {\n                this.log({\n                  msg: 'Emitting peer command to local',\n                  command\n                });\n                this.emit('peerCommand', command);\n              }\n            } else {\n              this.log({\n                msg: 'Unhandled peer message',\n                parsedMessage\n              });\n            }\n          }\n        });\n      }\n\n      /**\n       *\n       *\n       * Local message handling\n       *\n       *\n       */\n      onReceiveFromLocal(command, parameters) {\n        if (localCommandHandlers[command]) {\n          this.log(\"Handling local command: \".concat(command));\n          localCommandHandlers[command].call(this, parameters, this);\n        } else {\n          this.log({\n            msg: 'Unhandled local command',\n            command\n          });\n        }\n      }\n    }\n    util.inherits(RFC2813, EventEmitter);\n    module.exportDefault(RFC2813);\n    __reify_async_result__();\n  } catch (_reifyError) {\n    return __reify_async_result__(_reifyError);\n  }\n  __reify_async_result__()\n}, {\n  self: this,\n  async: false\n});","map":{"version":3,"names":["EventEmitter","module","link","v","net","default","util","Logger","localCommandHandlers","parseMessage","peerCommandHandlers","__reifyWaitForDeps__","logger","RFC2813","constructor","config","registerSteps","isRegistered","serverPrefix","receiveBuffer","Buffer","from","setupSocket","socket","Socket","setNoDelay","setEncoding","setKeepAlive","setTimeout","on","onReceiveFromPeer","bind","onConnect","err","error","log","onReceiveFromLocal","message","info","register","concat","server","host","port","connect","disconnect","destroy","undefined","write","command","parameters","passwords","local","name","trailer","description","buffer","prefix","length","join","chunk","lines","toString","split","pop","forEach","line","startsWith","parsedMessage","call","msg","emit","inherits","exportDefault","__reify_async_result__","_reifyError","self","async"],"sources":["app/irc/server/servers/RFC2813/index.js"],"sourcesContent":["import { EventEmitter } from 'events';\nimport net from 'net';\nimport util from 'util';\n\nimport { Logger } from '@rocket.chat/logger';\n\nimport localCommandHandlers from './localCommandHandlers';\nimport parseMessage from './parseMessage';\nimport peerCommandHandlers from './peerCommandHandlers';\n\nconst logger = new Logger('IRC Server');\n\nclass RFC2813 {\n\tconstructor(config) {\n\t\tthis.config = config;\n\n\t\t// Hold registered state\n\t\tthis.registerSteps = [];\n\t\tthis.isRegistered = false;\n\n\t\t// Hold peer server information\n\t\tthis.serverPrefix = null;\n\n\t\t// Hold the buffer while receiving\n\t\tthis.receiveBuffer = Buffer.from('');\n\t}\n\n\t/**\n\t * Setup socket\n\t */\n\tsetupSocket() {\n\t\t// Setup socket\n\t\tthis.socket = new net.Socket();\n\t\tthis.socket.setNoDelay();\n\t\tthis.socket.setEncoding('utf-8');\n\t\tthis.socket.setKeepAlive(true);\n\t\tthis.socket.setTimeout(90000);\n\n\t\tthis.socket.on('data', this.onReceiveFromPeer.bind(this));\n\n\t\tthis.socket.on('connect', this.onConnect.bind(this));\n\t\tthis.socket.on('error', (err) => logger.error(err));\n\t\tthis.socket.on('timeout', () => this.log('Timeout'));\n\t\tthis.socket.on('close', () => this.log('Connection Closed'));\n\t\t// Setup local\n\t\tthis.on('onReceiveFromLocal', this.onReceiveFromLocal.bind(this));\n\t}\n\n\t/**\n\t * Log helper\n\t */\n\tlog(message) {\n\t\t// TODO logger: debug?\n\t\tlogger.info(message);\n\t}\n\n\t/**\n\t * Connect\n\t */\n\tregister() {\n\t\tthis.log(`Connecting to @${this.config.server.host}:${this.config.server.port}`);\n\n\t\tif (!this.socket) {\n\t\t\tthis.setupSocket();\n\t\t}\n\n\t\tthis.socket.connect(this.config.server.port, this.config.server.host);\n\t}\n\n\t/**\n\t * Disconnect\n\t */\n\tdisconnect() {\n\t\tthis.log('Disconnecting from server.');\n\n\t\tif (this.socket) {\n\t\t\tthis.socket.destroy();\n\t\t\tthis.socket = undefined;\n\t\t}\n\t\tthis.isRegistered = false;\n\t\tthis.registerSteps = [];\n\t}\n\n\t/**\n\t * Setup the server connection\n\t */\n\tonConnect() {\n\t\tthis.log('Connected! Registering as server...');\n\n\t\tthis.write({\n\t\t\tcommand: 'PASS',\n\t\t\tparameters: [this.config.passwords.local, '0210', 'ngircd'],\n\t\t});\n\n\t\tthis.write({\n\t\t\tcommand: 'SERVER',\n\t\t\tparameters: [this.config.server.name],\n\t\t\ttrailer: this.config.server.description,\n\t\t});\n\t}\n\n\t/**\n\t * Sends a command message through the socket\n\t */\n\twrite(command) {\n\t\tlet buffer = command.prefix ? `:${command.prefix} ` : '';\n\t\tbuffer += command.command;\n\n\t\tif (command.parameters && command.parameters.length > 0) {\n\t\t\tbuffer += ` ${command.parameters.join(' ')}`;\n\t\t}\n\n\t\tif (command.trailer) {\n\t\t\tbuffer += ` :${command.trailer}`;\n\t\t}\n\n\t\tthis.log(`Sending Command: ${buffer}`);\n\n\t\treturn this.socket.write(`${buffer}\\r\\n`);\n\t}\n\n\t/**\n\t *\n\t *\n\t * Peer message handling\n\t *\n\t *\n\t */\n\tonReceiveFromPeer(chunk) {\n\t\tif (typeof chunk === 'string') {\n\t\t\tthis.receiveBuffer += chunk;\n\t\t} else {\n\t\t\tthis.receiveBuffer = Buffer.concat([this.receiveBuffer, chunk]);\n\t\t}\n\n\t\tconst lines = this.receiveBuffer.toString().split(/\\r\\n|\\r|\\n|\\u0007/); // eslint-disable-line no-control-regex\n\n\t\t// If the buffer does not end with \\r\\n, more chunks are coming\n\t\tif (lines.pop()) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Reset the buffer\n\t\tthis.receiveBuffer = Buffer.from('');\n\n\t\tlines.forEach((line) => {\n\t\t\tif (line.length && !line.startsWith('a')) {\n\t\t\t\tconst parsedMessage = parseMessage(line);\n\n\t\t\t\tif (peerCommandHandlers[parsedMessage.command]) {\n\t\t\t\t\tthis.log(`Handling peer message: ${line}`);\n\n\t\t\t\t\tconst command = peerCommandHandlers[parsedMessage.command].call(this, parsedMessage);\n\n\t\t\t\t\tif (command) {\n\t\t\t\t\t\tthis.log({ msg: 'Emitting peer command to local', command });\n\t\t\t\t\t\tthis.emit('peerCommand', command);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.log({ msg: 'Unhandled peer message', parsedMessage });\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t *\n\t *\n\t * Local message handling\n\t *\n\t *\n\t */\n\tonReceiveFromLocal(command, parameters) {\n\t\tif (localCommandHandlers[command]) {\n\t\t\tthis.log(`Handling local command: ${command}`);\n\n\t\t\tlocalCommandHandlers[command].call(this, parameters, this);\n\t\t} else {\n\t\t\tthis.log({ msg: 'Unhandled local command', command });\n\t\t}\n\t}\n}\n\nutil.inherits(RFC2813, EventEmitter);\n\nexport default RFC2813;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"fe6f5b96ac67dab64eadcef6bab38b30f6ba2347"}
