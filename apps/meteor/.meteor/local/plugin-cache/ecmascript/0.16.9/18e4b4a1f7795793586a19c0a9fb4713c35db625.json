{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/oauth/oauth_browser.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"packages/oauth/oauth_browser.js","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/oauth/oauth_browser.js","targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/oauth/oauth_browser.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/oauth/oauth_browser.js"}},"code":"// Browser specific code for the OAuth package.\n\n// Open a popup window, centered on the screen, and call a callback when it\n// closes.\n//\n// @param url {String} url to show\n// @param callback {Function} Callback function to call on completion. Takes no\n//   arguments.\n// @param dimensions {optional Object(width, height)} The dimensions of\n//   the popup. If not passed defaults to something sane.\nOAuth.showPopup = (url, callback, dimensions) => {\n  // default dimensions that worked well for facebook and google\n  const popup = openCenteredPopup(url, dimensions && dimensions.width || 650, dimensions && dimensions.height || 331);\n  const checkPopupOpen = setInterval(() => {\n    let popupClosed;\n    try {\n      // Fix for #328 - added a second test criteria (popup.closed === undefined)\n      // to humour this Android quirk:\n      // http://code.google.com/p/android/issues/detail?id=21061\n      popupClosed = popup.closed || popup.closed === undefined;\n    } catch (e) {\n      // For some unknown reason, IE9 (and others?) sometimes (when\n      // the popup closes too quickly?) throws \"SCRIPT16386: No such\n      // interface supported\" when trying to read 'popup.closed'. Try\n      // again in 100ms.\n      return;\n    }\n    if (popupClosed) {\n      clearInterval(checkPopupOpen);\n      callback();\n    }\n  }, 100);\n};\nconst openCenteredPopup = function (url, width, height) {\n  const screenX = typeof window.screenX !== 'undefined' ? window.screenX : window.screenLeft;\n  const screenY = typeof window.screenY !== 'undefined' ? window.screenY : window.screenTop;\n  const outerWidth = typeof window.outerWidth !== 'undefined' ? window.outerWidth : document.body.clientWidth;\n  const outerHeight = typeof window.outerHeight !== 'undefined' ? window.outerHeight : document.body.clientHeight - 22;\n  // XXX what is the 22?\n\n  // Use `outerWidth - width` and `outerHeight - height` for help in\n  // positioning the popup centered relative to the current window\n  const left = screenX + (outerWidth - width) / 2;\n  const top = screenY + (outerHeight - height) / 2;\n  const features = \"width=\".concat(width, \",height=\").concat(height) + \",left=\".concat(left, \",top=\").concat(top, \",scrollbars=yes\");\n  const newwindow = window.open(url, 'Login', features);\n  if (!newwindow || newwindow.closed) {\n    // blocked by a popup blocker maybe?\n    const err = new Error(\"The login popup was blocked by the browser\");\n    err.attemptedUrl = url;\n    throw err;\n  }\n  if (newwindow.focus) newwindow.focus();\n  return newwindow;\n};","map":{"version":3,"names":["OAuth","showPopup","url","callback","dimensions","popup","openCenteredPopup","width","height","checkPopupOpen","setInterval","popupClosed","closed","undefined","e","clearInterval","screenX","window","screenLeft","screenY","screenTop","outerWidth","document","body","clientWidth","outerHeight","clientHeight","left","top","features","concat","newwindow","open","err","Error","attemptedUrl","focus"],"sources":["packages/oauth/oauth_browser.js"],"sourcesContent":["// Browser specific code for the OAuth package.\n\n// Open a popup window, centered on the screen, and call a callback when it\n// closes.\n//\n// @param url {String} url to show\n// @param callback {Function} Callback function to call on completion. Takes no\n//   arguments.\n// @param dimensions {optional Object(width, height)} The dimensions of\n//   the popup. If not passed defaults to something sane.\nOAuth.showPopup = (url, callback, dimensions) => {\n  // default dimensions that worked well for facebook and google\n  const popup = openCenteredPopup(\n    url,\n    (dimensions && dimensions.width) || 650,\n    (dimensions && dimensions.height) || 331\n  );\n\n  const checkPopupOpen = setInterval(() => {\n    let popupClosed;\n    try {\n      // Fix for #328 - added a second test criteria (popup.closed === undefined)\n      // to humour this Android quirk:\n      // http://code.google.com/p/android/issues/detail?id=21061\n      popupClosed = popup.closed || popup.closed === undefined;\n    } catch (e) {\n      // For some unknown reason, IE9 (and others?) sometimes (when\n      // the popup closes too quickly?) throws \"SCRIPT16386: No such\n      // interface supported\" when trying to read 'popup.closed'. Try\n      // again in 100ms.\n      return;\n    }\n\n    if (popupClosed) {\n      clearInterval(checkPopupOpen);\n      callback();\n    }\n  }, 100);\n};\n\nconst openCenteredPopup = function(url, width, height) {\n  const screenX = typeof window.screenX !== 'undefined'\n        ? window.screenX : window.screenLeft;\n  const screenY = typeof window.screenY !== 'undefined'\n        ? window.screenY : window.screenTop;\n  const outerWidth = typeof window.outerWidth !== 'undefined'\n        ? window.outerWidth : document.body.clientWidth;\n  const outerHeight = typeof window.outerHeight !== 'undefined'\n        ? window.outerHeight : (document.body.clientHeight - 22);\n  // XXX what is the 22?\n\n  // Use `outerWidth - width` and `outerHeight - height` for help in\n  // positioning the popup centered relative to the current window\n  const left = screenX + (outerWidth - width) / 2;\n  const top = screenY + (outerHeight - height) / 2;\n  const features = (`width=${width},height=${height}` +\n                  `,left=${left},top=${top},scrollbars=yes`);\n\n\n  const newwindow = window.open(url, 'Login', features);\n\n  if (!newwindow || newwindow.closed) {\n    // blocked by a popup blocker maybe?\n    const err = new Error(\"The login popup was blocked by the browser\");\n    err.attemptedUrl = url;\n    throw err;\n  }\n\n  if (newwindow.focus)\n    newwindow.focus();\n  \n  return newwindow;\n};\n"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,KAAK,CAACC,SAAS,GAAG,CAACC,GAAG,EAAEC,QAAQ,EAAEC,UAAU,KAAK;EAC/C;EACA,MAAMC,KAAK,GAAGC,iBAAiB,CAC7BJ,GAAG,EACFE,UAAU,IAAIA,UAAU,CAACG,KAAK,IAAK,GAAG,EACtCH,UAAU,IAAIA,UAAU,CAACI,MAAM,IAAK,GACvC,CAAC;EAED,MAAMC,cAAc,GAAGC,WAAW,CAAC,MAAM;IACvC,IAAIC,WAAW;IACf,IAAI;MACF;MACA;MACA;MACAA,WAAW,GAAGN,KAAK,CAACO,MAAM,IAAIP,KAAK,CAACO,MAAM,KAAKC,SAAS;IAC1D,CAAC,CAAC,OAAOC,CAAC,EAAE;MACV;MACA;MACA;MACA;MACA;IACF;IAEA,IAAIH,WAAW,EAAE;MACfI,aAAa,CAACN,cAAc,CAAC;MAC7BN,QAAQ,CAAC,CAAC;IACZ;EACF,CAAC,EAAE,GAAG,CAAC;AACT,CAAC;AAED,MAAMG,iBAAiB,GAAG,SAAAA,CAASJ,GAAG,EAAEK,KAAK,EAAEC,MAAM,EAAE;EACrD,MAAMQ,OAAO,GAAG,OAAOC,MAAM,CAACD,OAAO,KAAK,WAAW,GAC7CC,MAAM,CAACD,OAAO,GAAGC,MAAM,CAACC,UAAU;EAC1C,MAAMC,OAAO,GAAG,OAAOF,MAAM,CAACE,OAAO,KAAK,WAAW,GAC7CF,MAAM,CAACE,OAAO,GAAGF,MAAM,CAACG,SAAS;EACzC,MAAMC,UAAU,GAAG,OAAOJ,MAAM,CAACI,UAAU,KAAK,WAAW,GACnDJ,MAAM,CAACI,UAAU,GAAGC,QAAQ,CAACC,IAAI,CAACC,WAAW;EACrD,MAAMC,WAAW,GAAG,OAAOR,MAAM,CAACQ,WAAW,KAAK,WAAW,GACrDR,MAAM,CAACQ,WAAW,GAAIH,QAAQ,CAACC,IAAI,CAACG,YAAY,GAAG,EAAG;EAC9D;;EAEA;EACA;EACA,MAAMC,IAAI,GAAGX,OAAO,GAAG,CAACK,UAAU,GAAGd,KAAK,IAAI,CAAC;EAC/C,MAAMqB,GAAG,GAAGT,OAAO,GAAG,CAACM,WAAW,GAAGjB,MAAM,IAAI,CAAC;EAChD,MAAMqB,QAAQ,GAAI,SAAAC,MAAA,CAASvB,KAAK,cAAAuB,MAAA,CAAWtB,MAAM,aAAAsB,MAAA,CACxBH,IAAI,WAAAG,MAAA,CAAQF,GAAG,oBAAkB;EAG1D,MAAMG,SAAS,GAAGd,MAAM,CAACe,IAAI,CAAC9B,GAAG,EAAE,OAAO,EAAE2B,QAAQ,CAAC;EAErD,IAAI,CAACE,SAAS,IAAIA,SAAS,CAACnB,MAAM,EAAE;IAClC;IACA,MAAMqB,GAAG,GAAG,IAAIC,KAAK,CAAC,4CAA4C,CAAC;IACnED,GAAG,CAACE,YAAY,GAAGjC,GAAG;IACtB,MAAM+B,GAAG;EACX;EAEA,IAAIF,SAAS,CAACK,KAAK,EACjBL,SAAS,CAACK,KAAK,CAAC,CAAC;EAEnB,OAAOL,SAAS;AAClB,CAAC","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"18e4b4a1f7795793586a19c0a9fb4713c35db625"}
