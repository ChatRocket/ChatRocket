{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/facebook-oauth/facebook_client.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"packages/facebook-oauth/facebook_client.js","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/facebook-oauth/facebook_client.js","targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/facebook-oauth/facebook_client.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/facebook-oauth/facebook_client.js"}},"code":"Facebook = {};\n\n// Request Facebook credentials for the user\n//\n// @param options {optional}\n// @param credentialRequestCompleteCallback {Function} Callback function to call on\n//   completion. Takes one argument, credentialToken on success, or Error on\n//   error.\nFacebook.requestCredential = (options, credentialRequestCompleteCallback) => {\n  var _Meteor$settings, _Meteor$settings$publ, _Meteor$settings$publ2, _Meteor$settings$publ3;\n  // support both (options, callback) and (callback).\n  if (!credentialRequestCompleteCallback && typeof options === 'function') {\n    credentialRequestCompleteCallback = options;\n    options = {};\n  }\n  const config = ServiceConfiguration.configurations.findOne({\n    service: 'facebook'\n  });\n  if (!config) {\n    credentialRequestCompleteCallback && credentialRequestCompleteCallback(new ServiceConfiguration.ConfigError());\n    return;\n  }\n  const credentialToken = Random.secret();\n  const mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent);\n  const display = mobile ? 'touch' : 'popup';\n  let scope = \"email\";\n  if (options && options.requestPermissions) scope = options.requestPermissions.join(',');\n  const loginStyle = OAuth._loginStyle('facebook', config, options);\n  const API_VERSION = ((_Meteor$settings = Meteor.settings) === null || _Meteor$settings === void 0 ? void 0 : (_Meteor$settings$publ = _Meteor$settings.public) === null || _Meteor$settings$publ === void 0 ? void 0 : (_Meteor$settings$publ2 = _Meteor$settings$publ.packages) === null || _Meteor$settings$publ2 === void 0 ? void 0 : (_Meteor$settings$publ3 = _Meteor$settings$publ2['facebook-oauth']) === null || _Meteor$settings$publ3 === void 0 ? void 0 : _Meteor$settings$publ3.apiVersion) || '17.0';\n  let loginUrl = \"https://www.facebook.com/v\".concat(API_VERSION, \"/dialog/oauth?client_id=\").concat(config.appId) + \"&redirect_uri=\".concat(OAuth._redirectUri('facebook', config, options.params, options.absoluteUrlOptions)) + \"&display=\".concat(display, \"&scope=\").concat(scope) + \"&state=\".concat(OAuth._stateParam(loginStyle, credentialToken, options && options.redirectUrl));\n\n  // Handle authentication type (e.g. for force login you need auth_type: \"reauthenticate\")\n  if (options && options.auth_type) {\n    loginUrl += \"&auth_type=\".concat(encodeURIComponent(options.auth_type));\n  }\n  OAuth.launchLogin({\n    loginService: \"facebook\",\n    loginStyle,\n    loginUrl,\n    credentialRequestCompleteCallback,\n    credentialToken\n  });\n};","map":{"version":3,"names":["Facebook","requestCredential","options","credentialRequestCompleteCallback","_Meteor$settings","_Meteor$settings$publ","_Meteor$settings$publ2","_Meteor$settings$publ3","config","ServiceConfiguration","configurations","findOne","service","ConfigError","credentialToken","Random","secret","mobile","test","navigator","userAgent","display","scope","requestPermissions","join","loginStyle","OAuth","_loginStyle","API_VERSION","Meteor","settings","public","packages","apiVersion","loginUrl","concat","appId","_redirectUri","params","absoluteUrlOptions","_stateParam","redirectUrl","auth_type","encodeURIComponent","launchLogin","loginService"],"sources":["packages/facebook-oauth/facebook_client.js"],"sourcesContent":["Facebook = {};\n\n// Request Facebook credentials for the user\n//\n// @param options {optional}\n// @param credentialRequestCompleteCallback {Function} Callback function to call on\n//   completion. Takes one argument, credentialToken on success, or Error on\n//   error.\nFacebook.requestCredential = (options, credentialRequestCompleteCallback) => {\n  // support both (options, callback) and (callback).\n  if (!credentialRequestCompleteCallback && typeof options === 'function') {\n    credentialRequestCompleteCallback = options;\n    options = {};\n  }\n\n  const config = ServiceConfiguration.configurations.findOne({service: 'facebook'});\n  if (!config) {\n    credentialRequestCompleteCallback && credentialRequestCompleteCallback(\n      new ServiceConfiguration.ConfigError());\n    return;\n  }\n\n  const credentialToken = Random.secret();\n  const mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent);\n  const display = mobile ? 'touch' : 'popup';\n\n  let scope = \"email\";\n  if (options && options.requestPermissions)\n    scope = options.requestPermissions.join(',');\n\n  const loginStyle = OAuth._loginStyle('facebook', config, options);\n\n  const API_VERSION = Meteor.settings?.public?.packages?.['facebook-oauth']?.apiVersion || '17.0';\n\n  let loginUrl =\n      `https://www.facebook.com/v${API_VERSION}/dialog/oauth?client_id=${config.appId}` +\n      `&redirect_uri=${OAuth._redirectUri('facebook', config, options.params, options.absoluteUrlOptions)}` +\n      `&display=${display}&scope=${scope}` +\n      `&state=${OAuth._stateParam(loginStyle, credentialToken, options && options.redirectUrl)}`;\n\n  // Handle authentication type (e.g. for force login you need auth_type: \"reauthenticate\")\n  if (options && options.auth_type) {\n    loginUrl += `&auth_type=${encodeURIComponent(options.auth_type)}`;\n  }\n\n  OAuth.launchLogin({\n    loginService: \"facebook\",\n    loginStyle,\n    loginUrl,\n    credentialRequestCompleteCallback,\n    credentialToken,\n  });\n};\n"],"mappings":"AAAAA,QAAQ,GAAG,CAAC,CAAC;;AAEb;AACA;AACA;AACA;AACA;AACA;AACAA,QAAQ,CAACC,iBAAiB,GAAG,CAACC,OAAO,EAAEC,iCAAiC,KAAK;EAAA,IAAAC,gBAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA;EAC3E;EACA,IAAI,CAACJ,iCAAiC,IAAI,OAAOD,OAAO,KAAK,UAAU,EAAE;IACvEC,iCAAiC,GAAGD,OAAO;IAC3CA,OAAO,GAAG,CAAC,CAAC;EACd;EAEA,MAAMM,MAAM,GAAGC,oBAAoB,CAACC,cAAc,CAACC,OAAO,CAAC;IAACC,OAAO,EAAE;EAAU,CAAC,CAAC;EACjF,IAAI,CAACJ,MAAM,EAAE;IACXL,iCAAiC,IAAIA,iCAAiC,CACpE,IAAIM,oBAAoB,CAACI,WAAW,CAAC,CAAC,CAAC;IACzC;EACF;EAEA,MAAMC,eAAe,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC;EACvC,MAAMC,MAAM,GAAG,0DAA0D,CAACC,IAAI,CAACC,SAAS,CAACC,SAAS,CAAC;EACnG,MAAMC,OAAO,GAAGJ,MAAM,GAAG,OAAO,GAAG,OAAO;EAE1C,IAAIK,KAAK,GAAG,OAAO;EACnB,IAAIpB,OAAO,IAAIA,OAAO,CAACqB,kBAAkB,EACvCD,KAAK,GAAGpB,OAAO,CAACqB,kBAAkB,CAACC,IAAI,CAAC,GAAG,CAAC;EAE9C,MAAMC,UAAU,GAAGC,KAAK,CAACC,WAAW,CAAC,UAAU,EAAEnB,MAAM,EAAEN,OAAO,CAAC;EAEjE,MAAM0B,WAAW,GAAG,EAAAxB,gBAAA,GAAAyB,MAAM,CAACC,QAAQ,cAAA1B,gBAAA,wBAAAC,qBAAA,GAAfD,gBAAA,CAAiB2B,MAAM,cAAA1B,qBAAA,wBAAAC,sBAAA,GAAvBD,qBAAA,CAAyB2B,QAAQ,cAAA1B,sBAAA,wBAAAC,sBAAA,GAAjCD,sBAAA,CAAoC,gBAAgB,CAAC,cAAAC,sBAAA,uBAArDA,sBAAA,CAAuD0B,UAAU,KAAI,MAAM;EAE/F,IAAIC,QAAQ,GACR,6BAAAC,MAAA,CAA6BP,WAAW,8BAAAO,MAAA,CAA2B3B,MAAM,CAAC4B,KAAK,qBAAAD,MAAA,CAC9DT,KAAK,CAACW,YAAY,CAAC,UAAU,EAAE7B,MAAM,EAAEN,OAAO,CAACoC,MAAM,EAAEpC,OAAO,CAACqC,kBAAkB,CAAC,CAAE,eAAAJ,MAAA,CACzFd,OAAO,aAAAc,MAAA,CAAUb,KAAK,CAAE,aAAAa,MAAA,CAC1BT,KAAK,CAACc,WAAW,CAACf,UAAU,EAAEX,eAAe,EAAEZ,OAAO,IAAIA,OAAO,CAACuC,WAAW,CAAC,CAAE;;EAE9F;EACA,IAAIvC,OAAO,IAAIA,OAAO,CAACwC,SAAS,EAAE;IAChCR,QAAQ,kBAAAC,MAAA,CAAkBQ,kBAAkB,CAACzC,OAAO,CAACwC,SAAS,CAAC,CAAE;EACnE;EAEAhB,KAAK,CAACkB,WAAW,CAAC;IAChBC,YAAY,EAAE,UAAU;IACxBpB,UAAU;IACVS,QAAQ;IACR/B,iCAAiC;IACjCW;EACF,CAAC,CAAC;AACJ,CAAC","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"924ae6ef0865b6cb9883f4673151d6e66e15eac8"}
