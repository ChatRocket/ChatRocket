{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/lib/server/lib/interceptDirectReplyEmails.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"app/lib/server/lib/interceptDirectReplyEmails.js","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/lib/server/lib/interceptDirectReplyEmails.js","targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true,"topLevelAwait":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/lib/server/lib/interceptDirectReplyEmails.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/lib/server/lib/interceptDirectReplyEmails.js"}},"code":"!module.wrapAsync(async function (module, __reifyWaitForDeps__, __reify_async_result__) {\n  \"use strict\";\n  try {\n    let _objectSpread;\n    module.link(\"@babel/runtime/helpers/objectSpread2\", {\n      default(v) {\n        _objectSpread = v;\n      }\n    }, 0);\n    module.export({\n      DirectReplyIMAPInterceptor: () => DirectReplyIMAPInterceptor,\n      POP3Helper: () => POP3Helper\n    });\n    let POP3Lib;\n    module.link(\"@rocket.chat/poplib\", {\n      default(v) {\n        POP3Lib = v;\n      }\n    }, 0);\n    let simpleParser;\n    module.link(\"mailparser\", {\n      simpleParser(v) {\n        simpleParser = v;\n      }\n    }, 1);\n    let processDirectEmail;\n    module.link(\"./processDirectEmail\", {\n      processDirectEmail(v) {\n        processDirectEmail = v;\n      }\n    }, 2);\n    let IMAPInterceptor;\n    module.link(\"../../../../server/email/IMAPInterceptor\", {\n      IMAPInterceptor(v) {\n        IMAPInterceptor = v;\n      }\n    }, 3);\n    let settings;\n    module.link(\"../../../settings/server\", {\n      settings(v) {\n        settings = v;\n      }\n    }, 4);\n    if (__reifyWaitForDeps__()) (await __reifyWaitForDeps__())();\n    class DirectReplyIMAPInterceptor extends IMAPInterceptor {\n      constructor(imapConfig) {\n        let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        imapConfig = _objectSpread({\n          user: settings.get('Direct_Reply_Username'),\n          password: settings.get('Direct_Reply_Password'),\n          host: settings.get('Direct_Reply_Host'),\n          port: settings.get('Direct_Reply_Port'),\n          debug: settings.get('Direct_Reply_Debug') ? console.log : false,\n          tls: !settings.get('Direct_Reply_IgnoreTLS')\n        }, imapConfig);\n        options.deleteAfterRead = settings.get('Direct_Reply_Delete');\n        super(imapConfig, options);\n        this.on('email', email => processDirectEmail(email));\n      }\n    }\n    class POP3Intercepter {\n      constructor() {\n        this.pop3 = new POP3Lib(settings.get('Direct_Reply_Port'), settings.get('Direct_Reply_Host'), {\n          enabletls: !settings.get('Direct_Reply_IgnoreTLS'),\n          // debug: settings.get('Direct_Reply_Debug') ? console.log : false,\n          debug: console.log\n        });\n        this.totalMsgCount = 0;\n        this.currentMsgCount = 0;\n        this.pop3.on('connect', () => {\n          console.log('Pop connect');\n          this.pop3.login(settings.get('Direct_Reply_Username'), settings.get('Direct_Reply_Password'));\n        });\n        this.pop3.on('login', status => {\n          if (!status) {\n            return console.log('Unable to Log-in ....');\n          }\n          console.log('Pop logged');\n          // run on start\n          this.pop3.list();\n        });\n\n        // on getting list of all emails\n        this.pop3.on('list', (status, msgcount) => {\n          if (!status) {\n            console.log('Cannot Get Emails ....');\n          }\n          if (msgcount === 0) {\n            return this.pop3.quit();\n          }\n          this.totalMsgCount = msgcount;\n          this.currentMsgCount = 1;\n          // Retrieve email\n          this.pop3.retr(this.currentMsgCount);\n        });\n\n        // on retrieved email\n        this.pop3.on('retr', async (status, msgnumber, data) => {\n          if (!status) {\n            return console.log('Cannot Retrieve Message ....');\n          }\n\n          // parse raw email data to  JSON object\n          simpleParser(data, (err, mail) => {\n            processDirectEmail(mail);\n          });\n          this.currentMsgCount += 1;\n\n          // delete email\n          this.pop3.dele(msgnumber);\n        });\n\n        // on email deleted\n        this.pop3.on('dele', status => {\n          if (!status) {\n            return console.log('Cannot Delete Message....');\n          }\n\n          // get next email\n          if (this.currentMsgCount <= this.totalMsgCount) {\n            return this.pop3.retr(this.currentMsgCount);\n          }\n\n          // parsed all messages.. so quitting\n          this.pop3.quit();\n        });\n\n        // invalid server state\n        this.pop3.on('invalid-state', cmd => {\n          console.log(\"Invalid state. You tried calling \".concat(cmd));\n        });\n        this.pop3.on('error', cmd => {\n          console.log(\"error state. You tried calling \".concat(cmd));\n        });\n\n        // locked => command already running, not finished yet\n        this.pop3.on('locked', cmd => {\n          console.log(\"Current command has not finished yet. You tried calling \".concat(cmd));\n        });\n      }\n    }\n    class POP3Helper {\n      constructor(frequency) {\n        this.frequency = frequency;\n        this.running = false;\n        this.POP3 = new POP3Intercepter();\n      }\n      isActive() {\n        return this.running;\n      }\n      start() {\n        this.log('POP3 started');\n        this.running = setInterval(() => {\n          // get new emails and process\n          this.POP3 = new POP3Intercepter();\n        }, Math.max(this.frequency * 60 * 1000, 2 * 60 * 1000));\n      }\n      log() {\n        console.log(...arguments);\n      }\n      stop() {\n        let callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Function();\n        this.log('POP3 stop called');\n        if (this.isActive()) {\n          clearInterval(this.running);\n        }\n        callback();\n        this.log('POP3 stopped');\n      }\n    }\n    __reify_async_result__();\n  } catch (_reifyError) {\n    return __reify_async_result__(_reifyError);\n  }\n  __reify_async_result__()\n}, {\n  self: this,\n  async: false\n});","map":{"version":3,"names":["_objectSpread","module","link","default","v","export","DirectReplyIMAPInterceptor","POP3Helper","POP3Lib","simpleParser","processDirectEmail","IMAPInterceptor","settings","__reifyWaitForDeps__","constructor","imapConfig","options","arguments","length","undefined","user","get","password","host","port","debug","console","log","tls","deleteAfterRead","on","email","POP3Intercepter","pop3","enabletls","totalMsgCount","currentMsgCount","login","status","list","msgcount","quit","retr","msgnumber","data","err","mail","dele","cmd","concat","frequency","running","POP3","isActive","start","setInterval","Math","max","stop","callback","Function","clearInterval","__reify_async_result__","_reifyError","self","async"],"sources":["app/lib/server/lib/interceptDirectReplyEmails.js"],"sourcesContent":["import POP3Lib from '@rocket.chat/poplib';\nimport { simpleParser } from 'mailparser';\n\nimport { processDirectEmail } from './processDirectEmail';\nimport { IMAPInterceptor } from '../../../../server/email/IMAPInterceptor';\nimport { settings } from '../../../settings/server';\n\nexport class DirectReplyIMAPInterceptor extends IMAPInterceptor {\n\tconstructor(imapConfig, options = {}) {\n\t\timapConfig = {\n\t\t\tuser: settings.get('Direct_Reply_Username'),\n\t\t\tpassword: settings.get('Direct_Reply_Password'),\n\t\t\thost: settings.get('Direct_Reply_Host'),\n\t\t\tport: settings.get('Direct_Reply_Port'),\n\t\t\tdebug: settings.get('Direct_Reply_Debug') ? console.log : false,\n\t\t\ttls: !settings.get('Direct_Reply_IgnoreTLS'),\n\t\t\t...imapConfig,\n\t\t};\n\n\t\toptions.deleteAfterRead = settings.get('Direct_Reply_Delete');\n\n\t\tsuper(imapConfig, options);\n\n\t\tthis.on('email', (email) => processDirectEmail(email));\n\t}\n}\n\nclass POP3Intercepter {\n\tconstructor() {\n\t\tthis.pop3 = new POP3Lib(settings.get('Direct_Reply_Port'), settings.get('Direct_Reply_Host'), {\n\t\t\tenabletls: !settings.get('Direct_Reply_IgnoreTLS'),\n\t\t\t// debug: settings.get('Direct_Reply_Debug') ? console.log : false,\n\t\t\tdebug: console.log,\n\t\t});\n\n\t\tthis.totalMsgCount = 0;\n\t\tthis.currentMsgCount = 0;\n\n\t\tthis.pop3.on('connect', () => {\n\t\t\tconsole.log('Pop connect');\n\t\t\tthis.pop3.login(settings.get('Direct_Reply_Username'), settings.get('Direct_Reply_Password'));\n\t\t});\n\n\t\tthis.pop3.on('login', (status) => {\n\t\t\tif (!status) {\n\t\t\t\treturn console.log('Unable to Log-in ....');\n\t\t\t}\n\t\t\tconsole.log('Pop logged');\n\t\t\t// run on start\n\t\t\tthis.pop3.list();\n\t\t});\n\n\t\t// on getting list of all emails\n\t\tthis.pop3.on('list', (status, msgcount) => {\n\t\t\tif (!status) {\n\t\t\t\tconsole.log('Cannot Get Emails ....');\n\t\t\t}\n\t\t\tif (msgcount === 0) {\n\t\t\t\treturn this.pop3.quit();\n\t\t\t}\n\n\t\t\tthis.totalMsgCount = msgcount;\n\t\t\tthis.currentMsgCount = 1;\n\t\t\t// Retrieve email\n\t\t\tthis.pop3.retr(this.currentMsgCount);\n\t\t});\n\n\t\t// on retrieved email\n\t\tthis.pop3.on('retr', async (status, msgnumber, data) => {\n\t\t\tif (!status) {\n\t\t\t\treturn console.log('Cannot Retrieve Message ....');\n\t\t\t}\n\n\t\t\t// parse raw email data to  JSON object\n\t\t\tsimpleParser(data, (err, mail) => {\n\t\t\t\tprocessDirectEmail(mail);\n\t\t\t});\n\n\t\t\tthis.currentMsgCount += 1;\n\n\t\t\t// delete email\n\t\t\tthis.pop3.dele(msgnumber);\n\t\t});\n\n\t\t// on email deleted\n\t\tthis.pop3.on('dele', (status) => {\n\t\t\tif (!status) {\n\t\t\t\treturn console.log('Cannot Delete Message....');\n\t\t\t}\n\n\t\t\t// get next email\n\t\t\tif (this.currentMsgCount <= this.totalMsgCount) {\n\t\t\t\treturn this.pop3.retr(this.currentMsgCount);\n\t\t\t}\n\n\t\t\t// parsed all messages.. so quitting\n\t\t\tthis.pop3.quit();\n\t\t});\n\n\t\t// invalid server state\n\t\tthis.pop3.on('invalid-state', (cmd) => {\n\t\t\tconsole.log(`Invalid state. You tried calling ${cmd}`);\n\t\t});\n\n\t\tthis.pop3.on('error', (cmd) => {\n\t\t\tconsole.log(`error state. You tried calling ${cmd}`);\n\t\t});\n\n\t\t// locked => command already running, not finished yet\n\t\tthis.pop3.on('locked', (cmd) => {\n\t\t\tconsole.log(`Current command has not finished yet. You tried calling ${cmd}`);\n\t\t});\n\t}\n}\n\nexport class POP3Helper {\n\tconstructor(frequency) {\n\t\tthis.frequency = frequency;\n\t\tthis.running = false;\n\n\t\tthis.POP3 = new POP3Intercepter();\n\t}\n\n\tisActive() {\n\t\treturn this.running;\n\t}\n\n\tstart() {\n\t\tthis.log('POP3 started');\n\t\tthis.running = setInterval(\n\t\t\t() => {\n\t\t\t\t// get new emails and process\n\t\t\t\tthis.POP3 = new POP3Intercepter();\n\t\t\t},\n\t\t\tMath.max(this.frequency * 60 * 1000, 2 * 60 * 1000),\n\t\t);\n\t}\n\n\tlog(...args) {\n\t\tconsole.log(...args);\n\t}\n\n\tstop(callback = new Function()) {\n\t\tthis.log('POP3 stop called');\n\t\tif (this.isActive()) {\n\t\t\tclearInterval(this.running);\n\t\t}\n\t\tcallback();\n\t\tthis.log('POP3 stopped');\n\t}\n}\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"74b25b1efbde67268af3f94b1ec74481917359de"}
