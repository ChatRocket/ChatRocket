{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/ostrio:cookies/cookies.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/ostrio:cookies/cookies.js","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/ostrio:cookies/cookies.js","targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/packages/ostrio:cookies/cookies.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/ostrio:cookies/cookies.js"}},"code":"var _assertThisInitialized;\nmodule.link(\"@babel/runtime/helpers/assertThisInitialized\", {\n  default: function (v) {\n    _assertThisInitialized = v;\n  }\n}, 0);\nvar _inheritsLoose;\nmodule.link(\"@babel/runtime/helpers/inheritsLoose\", {\n  default: function (v) {\n    _inheritsLoose = v;\n  }\n}, 1);\nvar _typeof;\nmodule.link(\"@babel/runtime/helpers/typeof\", {\n  default: function (v) {\n    _typeof = v;\n  }\n}, 2);\nmodule.export({\n  Cookies: function () {\n    return Cookies;\n  }\n});\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar fetch;\nvar WebApp;\nif (Meteor.isServer) {\n  WebApp = require('meteor/webapp').WebApp;\n} else {\n  fetch = require('meteor/fetch').fetch;\n}\nvar NoOp = function () {};\nvar urlRE = /\\/___cookie___\\/set/;\nvar rootUrl = Meteor.isServer ? process.env.ROOT_URL : window.__meteor_runtime_config__.ROOT_URL || window.__meteor_runtime_config__.meteorEnv.ROOT_URL || false;\nvar mobileRootUrl = Meteor.isServer ? process.env.MOBILE_ROOT_URL : window.__meteor_runtime_config__.MOBILE_ROOT_URL || window.__meteor_runtime_config__.meteorEnv.MOBILE_ROOT_URL || false;\nvar helpers = {\n  isUndefined: function (obj) {\n    return obj === void 0;\n  },\n  isArray: function (obj) {\n    return Array.isArray(obj);\n  },\n  clone: function (obj) {\n    if (!this.isObject(obj)) return obj;\n    return this.isArray(obj) ? obj.slice() : Object.assign({}, obj);\n  }\n};\nvar _helpers = ['Number', 'Object', 'Function'];\nvar _loop = function (i) {\n  helpers['is' + _helpers[i]] = function (obj) {\n    return Object.prototype.toString.call(obj) === '[object ' + _helpers[i] + ']';\n  };\n};\nfor (var i = 0; i < _helpers.length; i++) {\n  _loop(i);\n}\n\n/**\n * @url https://github.com/jshttp/cookie/blob/master/index.js\n * @name cookie\n * @author jshttp\n * @license\n * (The MIT License)\n *\n * Copyright (c) 2012-2014 Roman Shtylman <shtylman@gmail.com>\n * Copyright (c) 2015 Douglas Christopher Wilson <doug@somethingdoug.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * 'Software'), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\nvar decode = decodeURIComponent;\nvar encode = encodeURIComponent;\nvar pairSplitRegExp = /; */;\n\n/**\n * RegExp to match field-content in RFC 7230 sec 3.2\n *\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n * field-vchar   = VCHAR / obs-text\n * obs-text      = %x80-FF\n */\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n\n/**\n * @function\n * @name tryDecode\n * @param {String} str\n * @param {Function} d\n * @summary Try decoding a string using a decoding function.\n * @private\n */\nvar tryDecode = function (str, d) {\n  try {\n    return d(str);\n  } catch (e) {\n    return str;\n  }\n};\n\n/**\n * @function\n * @name parse\n * @param {String} str\n * @param {Object} [options]\n * @return {Object}\n * @summary\n * Parse a cookie header.\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n * @private\n */\nvar parse = function (str, options) {\n  if (typeof str !== 'string') {\n    throw new Meteor.Error(404, 'argument str must be a string');\n  }\n  var obj = {};\n  var opt = options || {};\n  var val;\n  var key;\n  var eqIndx;\n  str.split(pairSplitRegExp).forEach(function (pair) {\n    eqIndx = pair.indexOf('=');\n    if (eqIndx < 0) {\n      return;\n    }\n    key = pair.substr(0, eqIndx).trim();\n    key = tryDecode(unescape(key), opt.decode || decode);\n    val = pair.substr(++eqIndx, pair.length).trim();\n    if (val[0] === '\"') {\n      val = val.slice(1, -1);\n    }\n    if (void 0 === obj[key]) {\n      obj[key] = tryDecode(val, opt.decode || decode);\n    }\n  });\n  return obj;\n};\n\n/**\n * @function\n * @name antiCircular\n * @param data {Object} - Circular or any other object which needs to be non-circular\n * @private\n */\nvar antiCircular = function (_obj) {\n  var object = helpers.clone(_obj);\n  var cache = new Map();\n  return JSON.stringify(object, function (key, value) {\n    if (_typeof(value) === 'object' && value !== null) {\n      if (cache.get(value)) {\n        return void 0;\n      }\n      cache.set(value, true);\n    }\n    return value;\n  });\n};\n\n/**\n * @function\n * @name serialize\n * @param {String} name\n * @param {String} val\n * @param {Object} [options]\n * @return { cookieString: String, sanitizedValue: Mixed }\n * @summary\n * Serialize data into a cookie header.\n * Serialize the a name value pair into a cookie string suitable for\n * http headers. An optional options object specified cookie parameters.\n * serialize('foo', 'bar', { httpOnly: true }) => \"foo=bar; httpOnly\"\n * @private\n */\nvar serialize = function (key, val) {\n  var opt = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var name;\n  if (!fieldContentRegExp.test(key)) {\n    name = escape(key);\n  } else {\n    name = key;\n  }\n  var sanitizedValue = val;\n  var value = val;\n  if (!helpers.isUndefined(value)) {\n    if (helpers.isObject(value) || helpers.isArray(value)) {\n      var stringified = antiCircular(value);\n      value = encode(\"JSON.parse(\" + stringified + \")\");\n      sanitizedValue = JSON.parse(stringified);\n    } else {\n      value = encode(value);\n      if (value && !fieldContentRegExp.test(value)) {\n        value = escape(value);\n      }\n    }\n  } else {\n    value = '';\n  }\n  var pairs = [name + \"=\" + value];\n  if (helpers.isNumber(opt.maxAge)) {\n    pairs.push(\"Max-Age=\" + opt.maxAge);\n  }\n  if (opt.domain && typeof opt.domain === 'string') {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new Meteor.Error(404, 'option domain is invalid');\n    }\n    pairs.push(\"Domain=\" + opt.domain);\n  }\n  if (opt.path && typeof opt.path === 'string') {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new Meteor.Error(404, 'option path is invalid');\n    }\n    pairs.push(\"Path=\" + opt.path);\n  } else {\n    pairs.push('Path=/');\n  }\n  opt.expires = opt.expires || opt.expire || false;\n  if (opt.expires === Infinity) {\n    pairs.push('Expires=Fri, 31 Dec 9999 23:59:59 GMT');\n  } else if (opt.expires instanceof Date) {\n    pairs.push(\"Expires=\" + opt.expires.toUTCString());\n  } else if (opt.expires === 0) {\n    pairs.push('Expires=0');\n  } else if (helpers.isNumber(opt.expires)) {\n    pairs.push(\"Expires=\" + new Date(opt.expires).toUTCString());\n  }\n  if (opt.httpOnly) {\n    pairs.push('HttpOnly');\n  }\n  if (opt.secure) {\n    pairs.push('Secure');\n  }\n  if (opt.firstPartyOnly) {\n    pairs.push('First-Party-Only');\n  }\n  if (opt.sameSite) {\n    pairs.push(opt.sameSite === true ? 'SameSite' : \"SameSite=\" + opt.sameSite);\n  }\n  return {\n    cookieString: pairs.join('; '),\n    sanitizedValue: sanitizedValue\n  };\n};\nvar isStringifiedRegEx = /JSON\\.parse\\((.*)\\)/;\nvar isTypedRegEx = /false|true|null/;\nvar deserialize = function (string) {\n  if (typeof string !== 'string') {\n    return string;\n  }\n  if (isStringifiedRegEx.test(string)) {\n    var obj = string.match(isStringifiedRegEx)[1];\n    if (obj) {\n      try {\n        return JSON.parse(decode(obj));\n      } catch (e) {\n        console.error('[ostrio:cookies] [.get()] [deserialize()] Exception:', e, string, obj);\n        return string;\n      }\n    }\n    return string;\n  } else if (isTypedRegEx.test(string)) {\n    try {\n      return JSON.parse(string);\n    } catch (e) {\n      return string;\n    }\n  }\n  return string;\n};\n\n/**\n * @locus Anywhere\n * @class __cookies\n * @param opts {Object} - Options (configuration) object\n * @param opts._cookies {Object|String} - Current cookies as String or Object\n * @param opts.TTL {Number|Boolean} - Default cookies expiration time (max-age) in milliseconds, by default - session (false)\n * @param opts.runOnServer {Boolean} - Expose Cookies class to Server\n * @param opts.response {http.ServerResponse|Object} - This object is created internally by a HTTP server\n * @param opts.allowQueryStringCookies {Boolean} - Allow passing Cookies in a query string (in URL). Primary should be used only in Cordova environment\n * @param opts.allowedCordovaOrigins {Regex|Boolean} - [Server] Allow setting Cookies from that specific origin which in Meteor/Cordova is localhost:12XXX (^http://localhost:12[0-9]{3}$)\n * @summary Internal Class\n */\nvar __cookies = /*#__PURE__*/function () {\n  function __cookies(opts) {\n    this.__pendingCookies = [];\n    this.TTL = opts.TTL || false;\n    this.response = opts.response || false;\n    this.runOnServer = opts.runOnServer || false;\n    this.allowQueryStringCookies = opts.allowQueryStringCookies || false;\n    this.allowedCordovaOrigins = opts.allowedCordovaOrigins || false;\n    if (this.allowedCordovaOrigins === true) {\n      this.allowedCordovaOrigins = /^http:\\/\\/localhost:12[0-9]{3}$/;\n    }\n    this.originRE = new RegExp(\"^https?://(\" + (rootUrl ? rootUrl : '') + (mobileRootUrl ? '|' + mobileRootUrl : '') + \")$\");\n    if (helpers.isObject(opts._cookies)) {\n      this.cookies = opts._cookies;\n    } else {\n      this.cookies = parse(opts._cookies);\n    }\n  }\n\n  /**\n   * @locus Anywhere\n   * @memberOf __cookies\n   * @name get\n   * @param {String} key  - The name of the cookie to read\n   * @param {String} _tmp - Unparsed string instead of user's cookies\n   * @summary Read a cookie. If the cookie doesn't exist a null value will be returned.\n   * @returns {String|void}\n   */\n  var _proto = __cookies.prototype;\n  _proto.get = function () {\n    function get(key, _tmp) {\n      var cookieString = _tmp ? parse(_tmp) : this.cookies;\n      if (!key || !cookieString) {\n        return void 0;\n      }\n      if (cookieString.hasOwnProperty(key)) {\n        return deserialize(cookieString[key]);\n      }\n      return void 0;\n    }\n    return get;\n  }()\n  /**\n   * @locus Anywhere\n   * @memberOf __cookies\n   * @name set\n   * @param {String} key   - The name of the cookie to create/overwrite\n   * @param {String} value - The value of the cookie\n   * @param {Object} opts  - [Optional] Cookie options (see readme docs)\n   * @summary Create/overwrite a cookie.\n   * @returns {Boolean}\n   */\n  ;\n  _proto.set = function () {\n    function set(key, value) {\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (key && !helpers.isUndefined(value)) {\n        if (helpers.isNumber(this.TTL) && opts.expires === undefined) {\n          opts.expires = new Date(+new Date() + this.TTL);\n        }\n        var _serialize = serialize(key, value, opts),\n          cookieString = _serialize.cookieString,\n          sanitizedValue = _serialize.sanitizedValue;\n        this.cookies[key] = sanitizedValue;\n        if (Meteor.isClient) {\n          document.cookie = cookieString;\n        } else if (this.response) {\n          this.__pendingCookies.push(cookieString);\n          this.response.setHeader('Set-Cookie', this.__pendingCookies);\n        }\n        return true;\n      }\n      return false;\n    }\n    return set;\n  }()\n  /**\n   * @locus Anywhere\n   * @memberOf __cookies\n   * @name remove\n   * @param {String} key    - The name of the cookie to create/overwrite\n   * @param {String} path   - [Optional] The path from where the cookie will be\n   * readable. E.g., \"/\", \"/mydir\"; if not specified, defaults to the current\n   * path of the current document location (string or null). The path must be\n   * absolute (see RFC 2965). For more information on how to use relative paths\n   * in this argument, see: https://developer.mozilla.org/en-US/docs/Web/API/document.cookie#Using_relative_URLs_in_the_path_parameter\n   * @param {String} domain - [Optional] The domain from where the cookie will\n   * be readable. E.g., \"example.com\", \".example.com\" (includes all subdomains)\n   * or \"subdomain.example.com\"; if not specified, defaults to the host portion\n   * of the current document location (string or null).\n   * @summary Remove a cookie(s).\n   * @returns {Boolean}\n   */\n  ;\n  _proto.remove = function () {\n    function remove(key) {\n      var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '/';\n      var domain = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n      if (key && this.cookies.hasOwnProperty(key)) {\n        var _serialize2 = serialize(key, '', {\n            domain: domain,\n            path: path,\n            expires: new Date(0)\n          }),\n          cookieString = _serialize2.cookieString;\n        delete this.cookies[key];\n        if (Meteor.isClient) {\n          document.cookie = cookieString;\n        } else if (this.response) {\n          this.response.setHeader('Set-Cookie', cookieString);\n        }\n        return true;\n      } else if (!key && this.keys().length > 0 && this.keys()[0] !== '') {\n        var keys = Object.keys(this.cookies);\n        for (var _i = 0; _i < keys.length; _i++) {\n          this.remove(keys[_i]);\n        }\n        return true;\n      }\n      return false;\n    }\n    return remove;\n  }()\n  /**\n   * @locus Anywhere\n   * @memberOf __cookies\n   * @name has\n   * @param {String} key  - The name of the cookie to create/overwrite\n   * @param {String} _tmp - Unparsed string instead of user's cookies\n   * @summary Check whether a cookie exists in the current position.\n   * @returns {Boolean}\n   */\n  ;\n  _proto.has = function () {\n    function has(key, _tmp) {\n      var cookieString = _tmp ? parse(_tmp) : this.cookies;\n      if (!key || !cookieString) {\n        return false;\n      }\n      return cookieString.hasOwnProperty(key);\n    }\n    return has;\n  }()\n  /**\n   * @locus Anywhere\n   * @memberOf __cookies\n   * @name keys\n   * @summary Returns an array of all readable cookies from this location.\n   * @returns {[String]}\n   */\n  ;\n  _proto.keys = function () {\n    function keys() {\n      if (this.cookies) {\n        return Object.keys(this.cookies);\n      }\n      return [];\n    }\n    return keys;\n  }()\n  /**\n   * @locus Client\n   * @memberOf __cookies\n   * @name send\n   * @param cb {Function} - Callback\n   * @summary Send all cookies over XHR to server.\n   * @returns {void}\n   */\n  ;\n  _proto.send = function () {\n    function send() {\n      var cb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : NoOp;\n      if (Meteor.isServer) {\n        cb(new Meteor.Error(400, \"Can't run `.send()` on server, it's Client only method!\"));\n      }\n      if (this.runOnServer) {\n        var path = (window.__meteor_runtime_config__.ROOT_URL_PATH_PREFIX || window.__meteor_runtime_config__.meteorEnv.ROOT_URL_PATH_PREFIX || '') + \"/___cookie___/set\";\n        var query = '';\n        if (Meteor.isCordova && this.allowQueryStringCookies) {\n          var cookiesKeys = this.keys();\n          var cookiesArray = [];\n          for (var _i2 = 0; _i2 < cookiesKeys.length; _i2++) {\n            var _serialize3 = serialize(cookiesKeys[_i2], this.get(cookiesKeys[_i2])),\n              sanitizedValue = _serialize3.sanitizedValue;\n            var pair = cookiesKeys[_i2] + \"=\" + sanitizedValue;\n            if (!cookiesArray.includes(pair)) {\n              cookiesArray.push(pair);\n            }\n          }\n          if (cookiesArray.length) {\n            path = Meteor.absoluteUrl('___cookie___/set');\n            query = \"?___cookies___=\" + encodeURIComponent(cookiesArray.join('; '));\n          }\n        }\n        fetch(\"\" + path + query, {\n          credentials: 'include',\n          type: 'cors'\n        }).then(function (response) {\n          cb(void 0, response);\n        }).catch(cb);\n      } else {\n        cb(new Meteor.Error(400, \"Can't send cookies on server when `runOnServer` is false.\"));\n      }\n      return void 0;\n    }\n    return send;\n  }();\n  return __cookies;\n}();\n/**\n * @function\n * @locus Server\n * @summary Middleware handler\n * @private\n */\nvar __middlewareHandler = function (request, response, opts) {\n  var _cookies = {};\n  if (opts.runOnServer) {\n    if (request.headers && request.headers.cookie) {\n      _cookies = parse(request.headers.cookie);\n    }\n    return new __cookies({\n      _cookies: _cookies,\n      TTL: opts.TTL,\n      runOnServer: opts.runOnServer,\n      response: response,\n      allowQueryStringCookies: opts.allowQueryStringCookies\n    });\n  }\n  throw new Meteor.Error(400, \"Can't use middleware when `runOnServer` is false.\");\n};\n\n/**\n * @locus Anywhere\n * @class Cookies\n * @param opts {Object}\n * @param opts.TTL {Number} - Default cookies expiration time (max-age) in milliseconds, by default - session (false)\n * @param opts.auto {Boolean} - [Server] Auto-bind in middleware as `req.Cookies`, by default `true`\n * @param opts.handler {Function} - [Server] Middleware handler\n * @param opts.runOnServer {Boolean} - Expose Cookies class to Server\n * @param opts.allowQueryStringCookies {Boolean} - Allow passing Cookies in a query string (in URL). Primary should be used only in Cordova environment\n * @param opts.allowedCordovaOrigins {Regex|Boolean} - [Server] Allow setting Cookies from that specific origin which in Meteor/Cordova is localhost:12XXX (^http://localhost:12[0-9]{3}$)\n * @summary Main Cookie class\n */\nvar Cookies = /*#__PURE__*/function (_cookies2) {\n  function Cookies() {\n    var _this;\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    opts.TTL = helpers.isNumber(opts.TTL) ? opts.TTL : false;\n    opts.runOnServer = opts.runOnServer !== false ? true : false;\n    opts.allowQueryStringCookies = opts.allowQueryStringCookies !== true ? false : true;\n    if (Meteor.isClient) {\n      opts._cookies = document.cookie;\n      _this = _cookies2.call(this, opts) || this;\n    } else {\n      opts._cookies = {};\n      _this = _cookies2.call(this, opts) || this;\n      opts.auto = opts.auto !== false ? true : false;\n      _this.opts = opts;\n      _this.handler = helpers.isFunction(opts.handler) ? opts.handler : false;\n      _this.onCookies = helpers.isFunction(opts.onCookies) ? opts.onCookies : false;\n      if (opts.runOnServer && !Cookies.isLoadedOnServer) {\n        Cookies.isLoadedOnServer = true;\n        if (opts.auto) {\n          WebApp.connectHandlers.use(function (req, res, next) {\n            if (urlRE.test(req._parsedUrl.path)) {\n              var matchedCordovaOrigin = !!req.headers.origin && _this.allowedCordovaOrigins && _this.allowedCordovaOrigins.test(req.headers.origin);\n              var matchedOrigin = matchedCordovaOrigin || !!req.headers.origin && _this.originRE.test(req.headers.origin);\n              if (matchedOrigin) {\n                res.setHeader('Access-Control-Allow-Credentials', 'true');\n                res.setHeader('Access-Control-Allow-Origin', req.headers.origin);\n              }\n              var cookiesArray = [];\n              var cookiesObject = {};\n              if (matchedCordovaOrigin && opts.allowQueryStringCookies && req.query.___cookies___) {\n                cookiesObject = parse(decodeURIComponent(req.query.___cookies___));\n              } else if (req.headers.cookie) {\n                cookiesObject = parse(req.headers.cookie);\n              }\n              var cookiesKeys = Object.keys(cookiesObject);\n              if (cookiesKeys.length) {\n                for (var _i3 = 0; _i3 < cookiesKeys.length; _i3++) {\n                  var _serialize4 = serialize(cookiesKeys[_i3], cookiesObject[cookiesKeys[_i3]]),\n                    cookieString = _serialize4.cookieString;\n                  if (!cookiesArray.includes(cookieString)) {\n                    cookiesArray.push(cookieString);\n                  }\n                }\n                if (cookiesArray.length) {\n                  res.setHeader('Set-Cookie', cookiesArray);\n                }\n              }\n              helpers.isFunction(_this.onCookies) && _this.onCookies(__middlewareHandler(req, res, opts));\n              res.writeHead(200);\n              res.end('');\n            } else {\n              req.Cookies = __middlewareHandler(req, res, opts);\n              helpers.isFunction(_this.handler) && _this.handler(req.Cookies);\n              next();\n            }\n          });\n        }\n      }\n    }\n    return _assertThisInitialized(_this);\n  }\n\n  /**\n   * @locus Server\n   * @memberOf Cookies\n   * @name middleware\n   * @summary Get Cookies instance into callback\n   * @returns {void}\n   */\n  _inheritsLoose(Cookies, _cookies2);\n  var _proto2 = Cookies.prototype;\n  _proto2.middleware = function () {\n    function middleware() {\n      var _this2 = this;\n      if (!Meteor.isServer) {\n        throw new Meteor.Error(500, \"[ostrio:cookies] Can't use `.middleware()` on Client, it's Server only!\");\n      }\n      return function (req, res, next) {\n        helpers.isFunction(_this2.handler) && _this2.handler(__middlewareHandler(req, res, _this2.opts));\n        next();\n      };\n    }\n    return middleware;\n  }();\n  return Cookies;\n}(__cookies);\nif (Meteor.isServer) {\n  Cookies.isLoadedOnServer = false;\n}\n\n/* Export the Cookies class */","map":{"version":3,"names":["_assertThisInitialized","module","link","default","v","_inheritsLoose","_typeof","export","Cookies","Meteor","fetch","WebApp","isServer","require","NoOp","urlRE","rootUrl","process","env","ROOT_URL","window","__meteor_runtime_config__","meteorEnv","mobileRootUrl","MOBILE_ROOT_URL","helpers","isUndefined","obj","isArray","Array","clone","isObject","slice","Object","assign","_helpers","_loop","i","prototype","toString","call","length","decode","decodeURIComponent","encode","encodeURIComponent","pairSplitRegExp","fieldContentRegExp","tryDecode","str","d","e","parse","options","Error","opt","val","key","eqIndx","split","forEach","pair","indexOf","substr","trim","unescape","antiCircular","_obj","object","cache","Map","JSON","stringify","value","get","set","serialize","arguments","undefined","name","test","escape","sanitizedValue","stringified","pairs","isNumber","maxAge","push","domain","path","expires","expire","Infinity","Date","toUTCString","httpOnly","secure","firstPartyOnly","sameSite","cookieString","join","isStringifiedRegEx","isTypedRegEx","deserialize","string","match","console","error","__cookies","opts","__pendingCookies","TTL","response","runOnServer","allowQueryStringCookies","allowedCordovaOrigins","originRE","RegExp","_cookies","cookies","_proto","_tmp","hasOwnProperty","_serialize","isClient","document","cookie","setHeader","remove","_serialize2","keys","has","send","cb","ROOT_URL_PATH_PREFIX","query","isCordova","cookiesKeys","cookiesArray","_serialize3","includes","absoluteUrl","credentials","type","then","catch","__middlewareHandler","request","headers","_cookies2","_this","auto","handler","isFunction","onCookies","isLoadedOnServer","connectHandlers","use","req","res","next","_parsedUrl","matchedCordovaOrigin","origin","matchedOrigin","cookiesObject","___cookies___","_serialize4","writeHead","end","_proto2","middleware","_this2"],"sources":["packages/ostrio:cookies/cookies.js"],"sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nlet fetch;\nlet WebApp;\n\nif (Meteor.isServer) {\n\tWebApp = require('meteor/webapp').WebApp;\n} else {\n\tfetch = require('meteor/fetch').fetch;\n}\n\nconst NoOp = () => {};\nconst urlRE = /\\/___cookie___\\/set/;\nconst rootUrl = Meteor.isServer\n\t? process.env.ROOT_URL\n\t: window.__meteor_runtime_config__.ROOT_URL || window.__meteor_runtime_config__.meteorEnv.ROOT_URL || false;\nconst mobileRootUrl = Meteor.isServer\n\t? process.env.MOBILE_ROOT_URL\n\t: window.__meteor_runtime_config__.MOBILE_ROOT_URL || window.__meteor_runtime_config__.meteorEnv.MOBILE_ROOT_URL || false;\n\nconst helpers = {\n\tisUndefined(obj) {\n\t\treturn obj === void 0;\n\t},\n\tisArray(obj) {\n\t\treturn Array.isArray(obj);\n\t},\n\tclone(obj) {\n\t\tif (!this.isObject(obj)) return obj;\n\t\treturn this.isArray(obj) ? obj.slice() : Object.assign({}, obj);\n\t},\n};\nconst _helpers = ['Number', 'Object', 'Function'];\nfor (let i = 0; i < _helpers.length; i++) {\n\thelpers['is' + _helpers[i]] = function (obj) {\n\t\treturn Object.prototype.toString.call(obj) === '[object ' + _helpers[i] + ']';\n\t};\n}\n\n/**\n * @url https://github.com/jshttp/cookie/blob/master/index.js\n * @name cookie\n * @author jshttp\n * @license\n * (The MIT License)\n *\n * Copyright (c) 2012-2014 Roman Shtylman <shtylman@gmail.com>\n * Copyright (c) 2015 Douglas Christopher Wilson <doug@somethingdoug.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * 'Software'), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\nconst decode = decodeURIComponent;\nconst encode = encodeURIComponent;\nconst pairSplitRegExp = /; */;\n\n/**\n * RegExp to match field-content in RFC 7230 sec 3.2\n *\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n * field-vchar   = VCHAR / obs-text\n * obs-text      = %x80-FF\n */\nconst fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n\n/**\n * @function\n * @name tryDecode\n * @param {String} str\n * @param {Function} d\n * @summary Try decoding a string using a decoding function.\n * @private\n */\nconst tryDecode = (str, d) => {\n\ttry {\n\t\treturn d(str);\n\t} catch (e) {\n\t\treturn str;\n\t}\n};\n\n/**\n * @function\n * @name parse\n * @param {String} str\n * @param {Object} [options]\n * @return {Object}\n * @summary\n * Parse a cookie header.\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n * @private\n */\nconst parse = (str, options) => {\n\tif (typeof str !== 'string') {\n\t\tthrow new Meteor.Error(404, 'argument str must be a string');\n\t}\n\tconst obj = {};\n\tconst opt = options || {};\n\tlet val;\n\tlet key;\n\tlet eqIndx;\n\n\tstr.split(pairSplitRegExp).forEach((pair) => {\n\t\teqIndx = pair.indexOf('=');\n\t\tif (eqIndx < 0) {\n\t\t\treturn;\n\t\t}\n\t\tkey = pair.substr(0, eqIndx).trim();\n\t\tkey = tryDecode(unescape(key), opt.decode || decode);\n\t\tval = pair.substr(++eqIndx, pair.length).trim();\n\t\tif (val[0] === '\"') {\n\t\t\tval = val.slice(1, -1);\n\t\t}\n\t\tif (void 0 === obj[key]) {\n\t\t\tobj[key] = tryDecode(val, opt.decode || decode);\n\t\t}\n\t});\n\treturn obj;\n};\n\n/**\n * @function\n * @name antiCircular\n * @param data {Object} - Circular or any other object which needs to be non-circular\n * @private\n */\nconst antiCircular = (_obj) => {\n\tconst object = helpers.clone(_obj);\n\tconst cache = new Map();\n\treturn JSON.stringify(object, (key, value) => {\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tif (cache.get(value)) {\n\t\t\t\treturn void 0;\n\t\t\t}\n\t\t\tcache.set(value, true);\n\t\t}\n\t\treturn value;\n\t});\n};\n\n/**\n * @function\n * @name serialize\n * @param {String} name\n * @param {String} val\n * @param {Object} [options]\n * @return { cookieString: String, sanitizedValue: Mixed }\n * @summary\n * Serialize data into a cookie header.\n * Serialize the a name value pair into a cookie string suitable for\n * http headers. An optional options object specified cookie parameters.\n * serialize('foo', 'bar', { httpOnly: true }) => \"foo=bar; httpOnly\"\n * @private\n */\nconst serialize = (key, val, opt = {}) => {\n\tlet name;\n\n\tif (!fieldContentRegExp.test(key)) {\n\t\tname = escape(key);\n\t} else {\n\t\tname = key;\n\t}\n\n\tlet sanitizedValue = val;\n\tlet value = val;\n\tif (!helpers.isUndefined(value)) {\n\t\tif (helpers.isObject(value) || helpers.isArray(value)) {\n\t\t\tconst stringified = antiCircular(value);\n\t\t\tvalue = encode(`JSON.parse(${stringified})`);\n\t\t\tsanitizedValue = JSON.parse(stringified);\n\t\t} else {\n\t\t\tvalue = encode(value);\n\t\t\tif (value && !fieldContentRegExp.test(value)) {\n\t\t\t\tvalue = escape(value);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tvalue = '';\n\t}\n\n\tconst pairs = [`${name}=${value}`];\n\n\tif (helpers.isNumber(opt.maxAge)) {\n\t\tpairs.push(`Max-Age=${opt.maxAge}`);\n\t}\n\n\tif (opt.domain && typeof opt.domain === 'string') {\n\t\tif (!fieldContentRegExp.test(opt.domain)) {\n\t\t\tthrow new Meteor.Error(404, 'option domain is invalid');\n\t\t}\n\t\tpairs.push(`Domain=${opt.domain}`);\n\t}\n\n\tif (opt.path && typeof opt.path === 'string') {\n\t\tif (!fieldContentRegExp.test(opt.path)) {\n\t\t\tthrow new Meteor.Error(404, 'option path is invalid');\n\t\t}\n\t\tpairs.push(`Path=${opt.path}`);\n\t} else {\n\t\tpairs.push('Path=/');\n\t}\n\n\topt.expires = opt.expires || opt.expire || false;\n\tif (opt.expires === Infinity) {\n\t\tpairs.push('Expires=Fri, 31 Dec 9999 23:59:59 GMT');\n\t} else if (opt.expires instanceof Date) {\n\t\tpairs.push(`Expires=${opt.expires.toUTCString()}`);\n\t} else if (opt.expires === 0) {\n\t\tpairs.push('Expires=0');\n\t} else if (helpers.isNumber(opt.expires)) {\n\t\tpairs.push(`Expires=${new Date(opt.expires).toUTCString()}`);\n\t}\n\n\tif (opt.httpOnly) {\n\t\tpairs.push('HttpOnly');\n\t}\n\n\tif (opt.secure) {\n\t\tpairs.push('Secure');\n\t}\n\n\tif (opt.firstPartyOnly) {\n\t\tpairs.push('First-Party-Only');\n\t}\n\n\tif (opt.sameSite) {\n\t\tpairs.push(opt.sameSite === true ? 'SameSite' : `SameSite=${opt.sameSite}`);\n\t}\n\n\treturn { cookieString: pairs.join('; '), sanitizedValue };\n};\n\nconst isStringifiedRegEx = /JSON\\.parse\\((.*)\\)/;\nconst isTypedRegEx = /false|true|null/;\nconst deserialize = (string) => {\n\tif (typeof string !== 'string') {\n\t\treturn string;\n\t}\n\n\tif (isStringifiedRegEx.test(string)) {\n\t\tlet obj = string.match(isStringifiedRegEx)[1];\n\t\tif (obj) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(decode(obj));\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('[ostrio:cookies] [.get()] [deserialize()] Exception:', e, string, obj);\n\t\t\t\treturn string;\n\t\t\t}\n\t\t}\n\t\treturn string;\n\t} else if (isTypedRegEx.test(string)) {\n\t\ttry {\n\t\t\treturn JSON.parse(string);\n\t\t} catch (e) {\n\t\t\treturn string;\n\t\t}\n\t}\n\treturn string;\n};\n\n/**\n * @locus Anywhere\n * @class __cookies\n * @param opts {Object} - Options (configuration) object\n * @param opts._cookies {Object|String} - Current cookies as String or Object\n * @param opts.TTL {Number|Boolean} - Default cookies expiration time (max-age) in milliseconds, by default - session (false)\n * @param opts.runOnServer {Boolean} - Expose Cookies class to Server\n * @param opts.response {http.ServerResponse|Object} - This object is created internally by a HTTP server\n * @param opts.allowQueryStringCookies {Boolean} - Allow passing Cookies in a query string (in URL). Primary should be used only in Cordova environment\n * @param opts.allowedCordovaOrigins {Regex|Boolean} - [Server] Allow setting Cookies from that specific origin which in Meteor/Cordova is localhost:12XXX (^http://localhost:12[0-9]{3}$)\n * @summary Internal Class\n */\nclass __cookies {\n\tconstructor(opts) {\n\t\tthis.__pendingCookies = [];\n\t\tthis.TTL = opts.TTL || false;\n\t\tthis.response = opts.response || false;\n\t\tthis.runOnServer = opts.runOnServer || false;\n\t\tthis.allowQueryStringCookies = opts.allowQueryStringCookies || false;\n\t\tthis.allowedCordovaOrigins = opts.allowedCordovaOrigins || false;\n\n\t\tif (this.allowedCordovaOrigins === true) {\n\t\t\tthis.allowedCordovaOrigins = /^http:\\/\\/localhost:12[0-9]{3}$/;\n\t\t}\n\n\t\tthis.originRE = new RegExp(`^https?:\\/\\/(${rootUrl ? rootUrl : ''}${mobileRootUrl ? '|' + mobileRootUrl : ''})$`);\n\n\t\tif (helpers.isObject(opts._cookies)) {\n\t\t\tthis.cookies = opts._cookies;\n\t\t} else {\n\t\t\tthis.cookies = parse(opts._cookies);\n\t\t}\n\t}\n\n\t/**\n\t * @locus Anywhere\n\t * @memberOf __cookies\n\t * @name get\n\t * @param {String} key  - The name of the cookie to read\n\t * @param {String} _tmp - Unparsed string instead of user's cookies\n\t * @summary Read a cookie. If the cookie doesn't exist a null value will be returned.\n\t * @returns {String|void}\n\t */\n\tget(key, _tmp) {\n\t\tconst cookieString = _tmp ? parse(_tmp) : this.cookies;\n\t\tif (!key || !cookieString) {\n\t\t\treturn void 0;\n\t\t}\n\n\t\tif (cookieString.hasOwnProperty(key)) {\n\t\t\treturn deserialize(cookieString[key]);\n\t\t}\n\n\t\treturn void 0;\n\t}\n\n\t/**\n\t * @locus Anywhere\n\t * @memberOf __cookies\n\t * @name set\n\t * @param {String} key   - The name of the cookie to create/overwrite\n\t * @param {String} value - The value of the cookie\n\t * @param {Object} opts  - [Optional] Cookie options (see readme docs)\n\t * @summary Create/overwrite a cookie.\n\t * @returns {Boolean}\n\t */\n\tset(key, value, opts = {}) {\n\t\tif (key && !helpers.isUndefined(value)) {\n\t\t\tif (helpers.isNumber(this.TTL) && opts.expires === undefined) {\n\t\t\t\topts.expires = new Date(+new Date() + this.TTL);\n\t\t\t}\n\t\t\tconst { cookieString, sanitizedValue } = serialize(key, value, opts);\n\n\t\t\tthis.cookies[key] = sanitizedValue;\n\t\t\tif (Meteor.isClient) {\n\t\t\t\tdocument.cookie = cookieString;\n\t\t\t} else if (this.response) {\n\t\t\t\tthis.__pendingCookies.push(cookieString);\n\t\t\t\tthis.response.setHeader('Set-Cookie', this.__pendingCookies);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * @locus Anywhere\n\t * @memberOf __cookies\n\t * @name remove\n\t * @param {String} key    - The name of the cookie to create/overwrite\n\t * @param {String} path   - [Optional] The path from where the cookie will be\n\t * readable. E.g., \"/\", \"/mydir\"; if not specified, defaults to the current\n\t * path of the current document location (string or null). The path must be\n\t * absolute (see RFC 2965). For more information on how to use relative paths\n\t * in this argument, see: https://developer.mozilla.org/en-US/docs/Web/API/document.cookie#Using_relative_URLs_in_the_path_parameter\n\t * @param {String} domain - [Optional] The domain from where the cookie will\n\t * be readable. E.g., \"example.com\", \".example.com\" (includes all subdomains)\n\t * or \"subdomain.example.com\"; if not specified, defaults to the host portion\n\t * of the current document location (string or null).\n\t * @summary Remove a cookie(s).\n\t * @returns {Boolean}\n\t */\n\tremove(key, path = '/', domain = '') {\n\t\tif (key && this.cookies.hasOwnProperty(key)) {\n\t\t\tconst { cookieString } = serialize(key, '', {\n\t\t\t\tdomain,\n\t\t\t\tpath,\n\t\t\t\texpires: new Date(0),\n\t\t\t});\n\n\t\t\tdelete this.cookies[key];\n\t\t\tif (Meteor.isClient) {\n\t\t\t\tdocument.cookie = cookieString;\n\t\t\t} else if (this.response) {\n\t\t\t\tthis.response.setHeader('Set-Cookie', cookieString);\n\t\t\t}\n\t\t\treturn true;\n\t\t} else if (!key && this.keys().length > 0 && this.keys()[0] !== '') {\n\t\t\tconst keys = Object.keys(this.cookies);\n\t\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\t\tthis.remove(keys[i]);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * @locus Anywhere\n\t * @memberOf __cookies\n\t * @name has\n\t * @param {String} key  - The name of the cookie to create/overwrite\n\t * @param {String} _tmp - Unparsed string instead of user's cookies\n\t * @summary Check whether a cookie exists in the current position.\n\t * @returns {Boolean}\n\t */\n\thas(key, _tmp) {\n\t\tconst cookieString = _tmp ? parse(_tmp) : this.cookies;\n\t\tif (!key || !cookieString) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn cookieString.hasOwnProperty(key);\n\t}\n\n\t/**\n\t * @locus Anywhere\n\t * @memberOf __cookies\n\t * @name keys\n\t * @summary Returns an array of all readable cookies from this location.\n\t * @returns {[String]}\n\t */\n\tkeys() {\n\t\tif (this.cookies) {\n\t\t\treturn Object.keys(this.cookies);\n\t\t}\n\t\treturn [];\n\t}\n\n\t/**\n\t * @locus Client\n\t * @memberOf __cookies\n\t * @name send\n\t * @param cb {Function} - Callback\n\t * @summary Send all cookies over XHR to server.\n\t * @returns {void}\n\t */\n\tsend(cb = NoOp) {\n\t\tif (Meteor.isServer) {\n\t\t\tcb(new Meteor.Error(400, \"Can't run `.send()` on server, it's Client only method!\"));\n\t\t}\n\n\t\tif (this.runOnServer) {\n\t\t\tlet path = `${\n\t\t\t\twindow.__meteor_runtime_config__.ROOT_URL_PATH_PREFIX || window.__meteor_runtime_config__.meteorEnv.ROOT_URL_PATH_PREFIX || ''\n\t\t\t}/___cookie___/set`;\n\t\t\tlet query = '';\n\n\t\t\tif (Meteor.isCordova && this.allowQueryStringCookies) {\n\t\t\t\tconst cookiesKeys = this.keys();\n\t\t\t\tconst cookiesArray = [];\n\t\t\t\tfor (let i = 0; i < cookiesKeys.length; i++) {\n\t\t\t\t\tconst { sanitizedValue } = serialize(cookiesKeys[i], this.get(cookiesKeys[i]));\n\t\t\t\t\tconst pair = `${cookiesKeys[i]}=${sanitizedValue}`;\n\t\t\t\t\tif (!cookiesArray.includes(pair)) {\n\t\t\t\t\t\tcookiesArray.push(pair);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (cookiesArray.length) {\n\t\t\t\t\tpath = Meteor.absoluteUrl('___cookie___/set');\n\t\t\t\t\tquery = `?___cookies___=${encodeURIComponent(cookiesArray.join('; '))}`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfetch(`${path}${query}`, {\n\t\t\t\tcredentials: 'include',\n\t\t\t\ttype: 'cors',\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tcb(void 0, response);\n\t\t\t\t})\n\t\t\t\t.catch(cb);\n\t\t} else {\n\t\t\tcb(new Meteor.Error(400, \"Can't send cookies on server when `runOnServer` is false.\"));\n\t\t}\n\t\treturn void 0;\n\t}\n}\n\n/**\n * @function\n * @locus Server\n * @summary Middleware handler\n * @private\n */\nconst __middlewareHandler = (request, response, opts) => {\n\tlet _cookies = {};\n\tif (opts.runOnServer) {\n\t\tif (request.headers && request.headers.cookie) {\n\t\t\t_cookies = parse(request.headers.cookie);\n\t\t}\n\n\t\treturn new __cookies({\n\t\t\t_cookies,\n\t\t\tTTL: opts.TTL,\n\t\t\trunOnServer: opts.runOnServer,\n\t\t\tresponse,\n\t\t\tallowQueryStringCookies: opts.allowQueryStringCookies,\n\t\t});\n\t}\n\n\tthrow new Meteor.Error(400, \"Can't use middleware when `runOnServer` is false.\");\n};\n\n/**\n * @locus Anywhere\n * @class Cookies\n * @param opts {Object}\n * @param opts.TTL {Number} - Default cookies expiration time (max-age) in milliseconds, by default - session (false)\n * @param opts.auto {Boolean} - [Server] Auto-bind in middleware as `req.Cookies`, by default `true`\n * @param opts.handler {Function} - [Server] Middleware handler\n * @param opts.runOnServer {Boolean} - Expose Cookies class to Server\n * @param opts.allowQueryStringCookies {Boolean} - Allow passing Cookies in a query string (in URL). Primary should be used only in Cordova environment\n * @param opts.allowedCordovaOrigins {Regex|Boolean} - [Server] Allow setting Cookies from that specific origin which in Meteor/Cordova is localhost:12XXX (^http://localhost:12[0-9]{3}$)\n * @summary Main Cookie class\n */\nclass Cookies extends __cookies {\n\tconstructor(opts = {}) {\n\t\topts.TTL = helpers.isNumber(opts.TTL) ? opts.TTL : false;\n\t\topts.runOnServer = opts.runOnServer !== false ? true : false;\n\t\topts.allowQueryStringCookies = opts.allowQueryStringCookies !== true ? false : true;\n\n\t\tif (Meteor.isClient) {\n\t\t\topts._cookies = document.cookie;\n\t\t\tsuper(opts);\n\t\t} else {\n\t\t\topts._cookies = {};\n\t\t\tsuper(opts);\n\t\t\topts.auto = opts.auto !== false ? true : false;\n\t\t\tthis.opts = opts;\n\t\t\tthis.handler = helpers.isFunction(opts.handler) ? opts.handler : false;\n\t\t\tthis.onCookies = helpers.isFunction(opts.onCookies) ? opts.onCookies : false;\n\n\t\t\tif (opts.runOnServer && !Cookies.isLoadedOnServer) {\n\t\t\t\tCookies.isLoadedOnServer = true;\n\t\t\t\tif (opts.auto) {\n\t\t\t\t\tWebApp.connectHandlers.use((req, res, next) => {\n\t\t\t\t\t\tif (urlRE.test(req._parsedUrl.path)) {\n\t\t\t\t\t\t\tconst matchedCordovaOrigin =\n\t\t\t\t\t\t\t\t!!req.headers.origin && this.allowedCordovaOrigins && this.allowedCordovaOrigins.test(req.headers.origin);\n\t\t\t\t\t\t\tconst matchedOrigin = matchedCordovaOrigin || (!!req.headers.origin && this.originRE.test(req.headers.origin));\n\n\t\t\t\t\t\t\tif (matchedOrigin) {\n\t\t\t\t\t\t\t\tres.setHeader('Access-Control-Allow-Credentials', 'true');\n\t\t\t\t\t\t\t\tres.setHeader('Access-Control-Allow-Origin', req.headers.origin);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst cookiesArray = [];\n\t\t\t\t\t\t\tlet cookiesObject = {};\n\t\t\t\t\t\t\tif (matchedCordovaOrigin && opts.allowQueryStringCookies && req.query.___cookies___) {\n\t\t\t\t\t\t\t\tcookiesObject = parse(decodeURIComponent(req.query.___cookies___));\n\t\t\t\t\t\t\t} else if (req.headers.cookie) {\n\t\t\t\t\t\t\t\tcookiesObject = parse(req.headers.cookie);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst cookiesKeys = Object.keys(cookiesObject);\n\t\t\t\t\t\t\tif (cookiesKeys.length) {\n\t\t\t\t\t\t\t\tfor (let i = 0; i < cookiesKeys.length; i++) {\n\t\t\t\t\t\t\t\t\tconst { cookieString } = serialize(cookiesKeys[i], cookiesObject[cookiesKeys[i]]);\n\t\t\t\t\t\t\t\t\tif (!cookiesArray.includes(cookieString)) {\n\t\t\t\t\t\t\t\t\t\tcookiesArray.push(cookieString);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (cookiesArray.length) {\n\t\t\t\t\t\t\t\t\tres.setHeader('Set-Cookie', cookiesArray);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\thelpers.isFunction(this.onCookies) && this.onCookies(__middlewareHandler(req, res, opts));\n\n\t\t\t\t\t\t\tres.writeHead(200);\n\t\t\t\t\t\t\tres.end('');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treq.Cookies = __middlewareHandler(req, res, opts);\n\t\t\t\t\t\t\thelpers.isFunction(this.handler) && this.handler(req.Cookies);\n\t\t\t\t\t\t\tnext();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @locus Server\n\t * @memberOf Cookies\n\t * @name middleware\n\t * @summary Get Cookies instance into callback\n\t * @returns {void}\n\t */\n\tmiddleware() {\n\t\tif (!Meteor.isServer) {\n\t\t\tthrow new Meteor.Error(500, \"[ostrio:cookies] Can't use `.middleware()` on Client, it's Server only!\");\n\t\t}\n\n\t\treturn (req, res, next) => {\n\t\t\thelpers.isFunction(this.handler) && this.handler(__middlewareHandler(req, res, this.opts));\n\t\t\tnext();\n\t\t};\n\t}\n}\n\nif (Meteor.isServer) {\n\tCookies.isLoadedOnServer = false;\n}\n\n/* Export the Cookies class */\nexport { Cookies };\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"3035a52d478ad4bd449f4c27000e661917a5afad"}
