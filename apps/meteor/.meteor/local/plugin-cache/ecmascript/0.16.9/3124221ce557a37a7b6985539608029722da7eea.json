{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/chats/contextualBar/ChatInfo.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/views/omnichannel/directory/chats/contextualBar/ChatInfo.js","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/chats/contextualBar/ChatInfo.js","targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/client/views/omnichannel/directory/chats/contextualBar/ChatInfo.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/views/omnichannel/directory/chats/contextualBar/ChatInfo.js"}},"code":"var _slicedToArray;\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 0);\nvar Box, Margins, Tag, Button, ButtonGroup;\nmodule.link(\"@rocket.chat/fuselage\", {\n  Box: function (v) {\n    Box = v;\n  },\n  Margins: function (v) {\n    Margins = v;\n  },\n  Tag: function (v) {\n    Tag = v;\n  },\n  Button: function (v) {\n    Button = v;\n  },\n  ButtonGroup: function (v) {\n    ButtonGroup = v;\n  }\n}, 0);\nvar useMutableCallback;\nmodule.link(\"@rocket.chat/fuselage-hooks\", {\n  useMutableCallback: function (v) {\n    useMutableCallback = v;\n  }\n}, 1);\nvar useToastMessageDispatch, useRoute, useUserSubscription, useTranslation, usePermission;\nmodule.link(\"@rocket.chat/ui-contexts\", {\n  useToastMessageDispatch: function (v) {\n    useToastMessageDispatch = v;\n  },\n  useRoute: function (v) {\n    useRoute = v;\n  },\n  useUserSubscription: function (v) {\n    useUserSubscription = v;\n  },\n  useTranslation: function (v) {\n    useTranslation = v;\n  },\n  usePermission: function (v) {\n    usePermission = v;\n  }\n}, 2);\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 3);\nvar moment;\nmodule.link(\"moment\", {\n  \"default\": function (v) {\n    moment = v;\n  }\n}, 4);\nvar React, useEffect, useMemo, useState;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useEffect: function (v) {\n    useEffect = v;\n  },\n  useMemo: function (v) {\n    useMemo = v;\n  },\n  useState: function (v) {\n    useState = v;\n  }\n}, 5);\nvar ContextualbarScrollableContent, ContextualbarFooter;\nmodule.link(\"../../../../../components/Contextualbar\", {\n  ContextualbarScrollableContent: function (v) {\n    ContextualbarScrollableContent = v;\n  },\n  ContextualbarFooter: function (v) {\n    ContextualbarFooter = v;\n  }\n}, 6);\nvar InfoPanelField, InfoPanelLabel, InfoPanelText;\nmodule.link(\"../../../../../components/InfoPanel\", {\n  InfoPanelField: function (v) {\n    InfoPanelField = v;\n  },\n  InfoPanelLabel: function (v) {\n    InfoPanelLabel = v;\n  },\n  InfoPanelText: function (v) {\n    InfoPanelText = v;\n  }\n}, 7);\nvar MarkdownText;\nmodule.link(\"../../../../../components/MarkdownText\", {\n  \"default\": function (v) {\n    MarkdownText = v;\n  }\n}, 8);\nvar useEndpointData;\nmodule.link(\"../../../../../hooks/useEndpointData\", {\n  useEndpointData: function (v) {\n    useEndpointData = v;\n  }\n}, 9);\nvar useFormatDateAndTime;\nmodule.link(\"../../../../../hooks/useFormatDateAndTime\", {\n  useFormatDateAndTime: function (v) {\n    useFormatDateAndTime = v;\n  }\n}, 10);\nvar useFormatDuration;\nmodule.link(\"../../../../../hooks/useFormatDuration\", {\n  useFormatDuration: function (v) {\n    useFormatDuration = v;\n  }\n}, 11);\nvar CustomField;\nmodule.link(\"../../../components/CustomField\", {\n  \"default\": function (v) {\n    CustomField = v;\n  }\n}, 12);\nvar AgentField, SlaField, ContactField, SourceField;\nmodule.link(\"../../components\", {\n  AgentField: function (v) {\n    AgentField = v;\n  },\n  SlaField: function (v) {\n    SlaField = v;\n  },\n  ContactField: function (v) {\n    ContactField = v;\n  },\n  SourceField: function (v) {\n    SourceField = v;\n  }\n}, 13);\nvar PriorityField;\nmodule.link(\"../../components/PriorityField\", {\n  \"default\": function (v) {\n    PriorityField = v;\n  }\n}, 14);\nvar useOmnichannelRoomInfo;\nmodule.link(\"../../hooks/useOmnichannelRoomInfo\", {\n  useOmnichannelRoomInfo: function (v) {\n    useOmnichannelRoomInfo = v;\n  }\n}, 15);\nvar formatQueuedAt;\nmodule.link(\"../../utils/formatQueuedAt\", {\n  formatQueuedAt: function (v) {\n    formatQueuedAt = v;\n  }\n}, 16);\nvar DepartmentField;\nmodule.link(\"./DepartmentField\", {\n  \"default\": function (v) {\n    DepartmentField = v;\n  }\n}, 17);\nvar VisitorClientInfo;\nmodule.link(\"./VisitorClientInfo\", {\n  \"default\": function (v) {\n    VisitorClientInfo = v;\n  }\n}, 18);\n// TODO: Remove moment we are mixing moment and our own formatters :sadface:\nfunction ChatInfo(_ref) {\n  var _metrics$response;\n  var id = _ref.id,\n    route = _ref.route;\n  var t = useTranslation();\n  var dispatchToastMessage = useToastMessageDispatch();\n  var formatDateAndTime = useFormatDateAndTime();\n  var _useEndpointData = useEndpointData('/v1/livechat/custom-fields'),\n    allCustomFields = _useEndpointData.value,\n    stateCustomFields = _useEndpointData.phase;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    customFields = _useState2[0],\n    setCustomFields = _useState2[1];\n  var formatDuration = useFormatDuration();\n  var _useOmnichannelRoomIn = useOmnichannelRoomInfo(id),\n    room = _useOmnichannelRoomIn.data;\n  var _ref2 = room || {\n      room: {\n        v: {}\n      }\n    },\n    ts = _ref2.ts,\n    tags = _ref2.tags,\n    closedAt = _ref2.closedAt,\n    departmentId = _ref2.departmentId,\n    v = _ref2.v,\n    servedBy = _ref2.servedBy,\n    metrics = _ref2.metrics,\n    topic = _ref2.topic,\n    waitingResponse = _ref2.waitingResponse,\n    responseBy = _ref2.responseBy,\n    slaId = _ref2.slaId,\n    priorityId = _ref2.priorityId,\n    livechatData = _ref2.livechatData,\n    source = _ref2.source,\n    queuedAt = _ref2.queuedAt;\n  var routePath = useRoute(route || 'omnichannel-directory');\n  var canViewCustomFields = usePermission('view-livechat-room-customfields');\n  var subscription = useUserSubscription(id);\n  var hasGlobalEditRoomPermission = usePermission('save-others-livechat-room-info');\n  var hasLocalEditRoomPermission = (servedBy === null || servedBy === void 0 ? void 0 : servedBy._id) === Meteor.userId();\n  var visitorId = v === null || v === void 0 ? void 0 : v._id;\n  var queueStartedAt = queuedAt || ts;\n  var queueTime = useMemo(function () {\n    return formatQueuedAt(room);\n  }, [room]);\n  useEffect(function () {\n    if (allCustomFields) {\n      var customFieldsAPI = allCustomFields.customFields;\n      setCustomFields(customFieldsAPI);\n    }\n  }, [allCustomFields, stateCustomFields]);\n  var checkIsVisibleAndScopeRoom = function (key) {\n    var field = customFields.find(function (_ref3) {\n      var _id = _ref3._id;\n      return _id === key;\n    });\n    return (field === null || field === void 0 ? void 0 : field.visibility) === 'visible' && (field === null || field === void 0 ? void 0 : field.scope) === 'room';\n  };\n  var onEditClick = useMutableCallback(function () {\n    var hasEditAccess = !!subscription || hasLocalEditRoomPermission || hasGlobalEditRoomPermission;\n    if (!hasEditAccess) {\n      return dispatchToastMessage({\n        type: 'error',\n        message: t('Not_authorized')\n      });\n    }\n    routePath.push(route ? {\n      tab: 'room-info',\n      context: 'edit',\n      id: id\n    } : {\n      page: 'chats',\n      id: id,\n      bar: 'edit'\n    });\n  });\n  var customFieldEntries = Object.entries(livechatData || {}).filter(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 1),\n      key = _ref5[0];\n    return checkIsVisibleAndScopeRoom(key) && livechatData[key];\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ContextualbarScrollableContent, {\n    p: 24\n  }, /*#__PURE__*/React.createElement(Margins, {\n    block: \"x4\"\n  }, source && /*#__PURE__*/React.createElement(SourceField, {\n    room: room\n  }), room && v && /*#__PURE__*/React.createElement(ContactField, {\n    contact: v,\n    room: room\n  }), visitorId && /*#__PURE__*/React.createElement(VisitorClientInfo, {\n    uid: visitorId\n  }), servedBy && /*#__PURE__*/React.createElement(AgentField, {\n    agent: servedBy\n  }), departmentId && /*#__PURE__*/React.createElement(DepartmentField, {\n    departmentId: departmentId\n  }), tags && tags.length > 0 && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Tags')), /*#__PURE__*/React.createElement(InfoPanelText, null, tags.map(function (tag) {\n    return /*#__PURE__*/React.createElement(Box, {\n      key: tag,\n      mie: 4,\n      display: \"inline\"\n    }, /*#__PURE__*/React.createElement(Tag, {\n      style: {\n        display: 'inline'\n      },\n      disabled: true\n    }, tag));\n  }))), topic && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Topic')), /*#__PURE__*/React.createElement(InfoPanelText, {\n    withTruncatedText: false\n  }, /*#__PURE__*/React.createElement(MarkdownText, {\n    variant: \"inline\",\n    content: topic\n  }))), queueStartedAt && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Queue_Time')), /*#__PURE__*/React.createElement(InfoPanelText, null, queueTime)), closedAt && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Chat_Duration')), /*#__PURE__*/React.createElement(InfoPanelText, null, moment(closedAt).from(moment(ts), true))), ts && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Created_at')), /*#__PURE__*/React.createElement(InfoPanelText, null, formatDateAndTime(ts))), closedAt && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Closed_At')), /*#__PURE__*/React.createElement(InfoPanelText, null, formatDateAndTime(closedAt))), (servedBy === null || servedBy === void 0 ? void 0 : servedBy.ts) && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Taken_at')), /*#__PURE__*/React.createElement(InfoPanelText, null, formatDateAndTime(servedBy.ts))), (metrics === null || metrics === void 0 ? void 0 : (_metrics$response = metrics.response) === null || _metrics$response === void 0 ? void 0 : _metrics$response.avg) && formatDuration(metrics.response.avg) && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Avg_response_time')), /*#__PURE__*/React.createElement(InfoPanelText, null, formatDuration(metrics.response.avg))), !waitingResponse && (responseBy === null || responseBy === void 0 ? void 0 : responseBy.lastMessageTs) && /*#__PURE__*/React.createElement(InfoPanelField, null, /*#__PURE__*/React.createElement(InfoPanelLabel, null, t('Inactivity_Time')), /*#__PURE__*/React.createElement(InfoPanelText, null, moment(responseBy.lastMessageTs).fromNow(true))), canViewCustomFields && customFieldEntries.map(function (_ref6) {\n    var _ref7 = _slicedToArray(_ref6, 2),\n      key = _ref7[0],\n      value = _ref7[1];\n    return /*#__PURE__*/React.createElement(CustomField, {\n      key: key,\n      id: key,\n      value: value\n    });\n  }), slaId && /*#__PURE__*/React.createElement(SlaField, {\n    id: slaId\n  }), priorityId && /*#__PURE__*/React.createElement(PriorityField, {\n    id: priorityId\n  }))), /*#__PURE__*/React.createElement(ContextualbarFooter, null, /*#__PURE__*/React.createElement(ButtonGroup, {\n    stretch: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    icon: \"pencil\",\n    onClick: onEditClick,\n    \"data-qa-id\": \"room-info-edit\"\n  }, t('Edit')))));\n}\nmodule.exportDefault(ChatInfo);","map":{"version":3,"names":["_slicedToArray","module","link","default","v","Box","Margins","Tag","Button","ButtonGroup","useMutableCallback","useToastMessageDispatch","useRoute","useUserSubscription","useTranslation","usePermission","Meteor","moment","React","useEffect","useMemo","useState","ContextualbarScrollableContent","ContextualbarFooter","InfoPanelField","InfoPanelLabel","InfoPanelText","MarkdownText","useEndpointData","useFormatDateAndTime","useFormatDuration","CustomField","AgentField","SlaField","ContactField","SourceField","PriorityField","useOmnichannelRoomInfo","formatQueuedAt","DepartmentField","VisitorClientInfo","ChatInfo","_ref","_metrics$response","id","route","t","dispatchToastMessage","formatDateAndTime","_useEndpointData","allCustomFields","value","stateCustomFields","phase","_useState","_useState2","customFields","setCustomFields","formatDuration","_useOmnichannelRoomIn","room","data","_ref2","ts","tags","closedAt","departmentId","servedBy","metrics","topic","waitingResponse","responseBy","slaId","priorityId","livechatData","source","queuedAt","routePath","canViewCustomFields","subscription","hasGlobalEditRoomPermission","hasLocalEditRoomPermission","_id","userId","visitorId","queueStartedAt","queueTime","customFieldsAPI","checkIsVisibleAndScopeRoom","key","field","find","_ref3","visibility","scope","onEditClick","hasEditAccess","type","message","push","tab","context","page","bar","customFieldEntries","Object","entries","filter","_ref4","_ref5","createElement","Fragment","p","block","contact","uid","agent","length","map","tag","mie","display","style","disabled","withTruncatedText","variant","content","from","response","avg","lastMessageTs","fromNow","_ref6","_ref7","stretch","icon","onClick","exportDefault"],"sources":["client/views/omnichannel/directory/chats/contextualBar/ChatInfo.js"],"sourcesContent":["import { Box, Margins, Tag, Button, ButtonGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useToastMessageDispatch, useRoute, useUserSubscription, useTranslation, usePermission } from '@rocket.chat/ui-contexts';\nimport { Meteor } from 'meteor/meteor';\nimport moment from 'moment';\nimport React, { useEffect, useMemo, useState } from 'react';\n\nimport { ContextualbarScrollableContent, ContextualbarFooter } from '../../../../../components/Contextualbar';\nimport { InfoPanelField, InfoPanelLabel, InfoPanelText } from '../../../../../components/InfoPanel';\nimport MarkdownText from '../../../../../components/MarkdownText';\nimport { useEndpointData } from '../../../../../hooks/useEndpointData';\nimport { useFormatDateAndTime } from '../../../../../hooks/useFormatDateAndTime';\nimport { useFormatDuration } from '../../../../../hooks/useFormatDuration';\nimport CustomField from '../../../components/CustomField';\nimport { AgentField, SlaField, ContactField, SourceField } from '../../components';\nimport PriorityField from '../../components/PriorityField';\nimport { useOmnichannelRoomInfo } from '../../hooks/useOmnichannelRoomInfo';\nimport { formatQueuedAt } from '../../utils/formatQueuedAt';\nimport DepartmentField from './DepartmentField';\nimport VisitorClientInfo from './VisitorClientInfo';\n\n// TODO: Remove moment we are mixing moment and our own formatters :sadface:\nfunction ChatInfo({ id, route }) {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst { value: allCustomFields, phase: stateCustomFields } = useEndpointData('/v1/livechat/custom-fields');\n\tconst [customFields, setCustomFields] = useState([]);\n\tconst formatDuration = useFormatDuration();\n\n\tconst { data: room } = useOmnichannelRoomInfo(id);\n\n\tconst {\n\t\tts,\n\t\ttags,\n\t\tclosedAt,\n\t\tdepartmentId,\n\t\tv,\n\t\tservedBy,\n\t\tmetrics,\n\t\ttopic,\n\t\twaitingResponse,\n\t\tresponseBy,\n\t\tslaId,\n\t\tpriorityId,\n\t\tlivechatData,\n\t\tsource,\n\t\tqueuedAt,\n\t} = room || { room: { v: {} } };\n\n\tconst routePath = useRoute(route || 'omnichannel-directory');\n\tconst canViewCustomFields = usePermission('view-livechat-room-customfields');\n\tconst subscription = useUserSubscription(id);\n\tconst hasGlobalEditRoomPermission = usePermission('save-others-livechat-room-info');\n\tconst hasLocalEditRoomPermission = servedBy?._id === Meteor.userId();\n\tconst visitorId = v?._id;\n\tconst queueStartedAt = queuedAt || ts;\n\n\tconst queueTime = useMemo(() => formatQueuedAt(room), [room]);\n\n\tuseEffect(() => {\n\t\tif (allCustomFields) {\n\t\t\tconst { customFields: customFieldsAPI } = allCustomFields;\n\t\t\tsetCustomFields(customFieldsAPI);\n\t\t}\n\t}, [allCustomFields, stateCustomFields]);\n\n\tconst checkIsVisibleAndScopeRoom = (key) => {\n\t\tconst field = customFields.find(({ _id }) => _id === key);\n\t\treturn field?.visibility === 'visible' && field?.scope === 'room';\n\t};\n\n\tconst onEditClick = useMutableCallback(() => {\n\t\tconst hasEditAccess = !!subscription || hasLocalEditRoomPermission || hasGlobalEditRoomPermission;\n\t\tif (!hasEditAccess) {\n\t\t\treturn dispatchToastMessage({ type: 'error', message: t('Not_authorized') });\n\t\t}\n\n\t\troutePath.push(\n\t\t\troute\n\t\t\t\t? {\n\t\t\t\t\t\ttab: 'room-info',\n\t\t\t\t\t\tcontext: 'edit',\n\t\t\t\t\t\tid,\n\t\t\t\t  }\n\t\t\t\t: {\n\t\t\t\t\t\tpage: 'chats',\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tbar: 'edit',\n\t\t\t\t  },\n\t\t);\n\t});\n\n\tconst customFieldEntries = Object.entries(livechatData || {}).filter(([key]) => checkIsVisibleAndScopeRoom(key) && livechatData[key]);\n\n\treturn (\n\t\t<>\n\t\t\t<ContextualbarScrollableContent p={24}>\n\t\t\t\t<Margins block='x4'>\n\t\t\t\t\t{source && <SourceField room={room} />}\n\t\t\t\t\t{room && v && <ContactField contact={v} room={room} />}\n\t\t\t\t\t{visitorId && <VisitorClientInfo uid={visitorId} />}\n\t\t\t\t\t{servedBy && <AgentField agent={servedBy} />}\n\t\t\t\t\t{departmentId && <DepartmentField departmentId={departmentId} />}\n\t\t\t\t\t{tags && tags.length > 0 && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Tags')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>\n\t\t\t\t\t\t\t\t{tags.map((tag) => (\n\t\t\t\t\t\t\t\t\t<Box key={tag} mie={4} display='inline'>\n\t\t\t\t\t\t\t\t\t\t<Tag style={{ display: 'inline' }} disabled>\n\t\t\t\t\t\t\t\t\t\t\t{tag}\n\t\t\t\t\t\t\t\t\t\t</Tag>\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{topic && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Topic')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText withTruncatedText={false}>\n\t\t\t\t\t\t\t\t<MarkdownText variant='inline' content={topic} />\n\t\t\t\t\t\t\t</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{queueStartedAt && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Queue_Time')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{queueTime}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{closedAt && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Chat_Duration')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{moment(closedAt).from(moment(ts), true)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{ts && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Created_at')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDateAndTime(ts)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{closedAt && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Closed_At')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDateAndTime(closedAt)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{servedBy?.ts && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Taken_at')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDateAndTime(servedBy.ts)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{metrics?.response?.avg && formatDuration(metrics.response.avg) && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Avg_response_time')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{formatDuration(metrics.response.avg)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{!waitingResponse && responseBy?.lastMessageTs && (\n\t\t\t\t\t\t<InfoPanelField>\n\t\t\t\t\t\t\t<InfoPanelLabel>{t('Inactivity_Time')}</InfoPanelLabel>\n\t\t\t\t\t\t\t<InfoPanelText>{moment(responseBy.lastMessageTs).fromNow(true)}</InfoPanelText>\n\t\t\t\t\t\t</InfoPanelField>\n\t\t\t\t\t)}\n\t\t\t\t\t{canViewCustomFields && customFieldEntries.map(([key, value]) => <CustomField key={key} id={key} value={value} />)}\n\t\t\t\t\t{slaId && <SlaField id={slaId} />}\n\t\t\t\t\t{priorityId && <PriorityField id={priorityId} />}\n\t\t\t\t</Margins>\n\t\t\t</ContextualbarScrollableContent>\n\t\t\t<ContextualbarFooter>\n\t\t\t\t<ButtonGroup stretch>\n\t\t\t\t\t<Button icon='pencil' onClick={onEditClick} data-qa-id='room-info-edit'>\n\t\t\t\t\t\t{t('Edit')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</ContextualbarFooter>\n\t\t</>\n\t);\n}\n\nexport default ChatInfo;\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"3124221ce557a37a7b6985539608029722da7eea"}
