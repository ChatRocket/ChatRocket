{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/irc/server/servers/RFC2813/localCommandHandlers.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"app/irc/server/servers/RFC2813/localCommandHandlers.js","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/irc/server/servers/RFC2813/localCommandHandlers.js","targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true,"topLevelAwait":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/irc/server/servers/RFC2813/localCommandHandlers.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/irc/server/servers/RFC2813/localCommandHandlers.js"}},"code":"function registerUser(parameters) {\n  const {\n    name,\n    profile: {\n      irc: {\n        nick,\n        username\n      }\n    }\n  } = parameters;\n  this.write({\n    prefix: this.config.server.name,\n    command: 'NICK',\n    parameters: [nick, 1, username, 'irc.rocket.chat', 1, '+i'],\n    trailer: name\n  });\n}\nfunction joinChannel(parameters) {\n  const {\n    room: {\n      name: roomName\n    },\n    user: {\n      profile: {\n        irc: {\n          nick\n        }\n      }\n    }\n  } = parameters;\n  this.write({\n    prefix: this.config.server.name,\n    command: 'NJOIN',\n    parameters: [\"#\".concat(roomName)],\n    trailer: nick\n  });\n}\nfunction joinedChannel(parameters, handler) {\n  var _parameters$room, _parameters$user, _parameters$user$prof, _parameters$user$prof2;\n  const roomName = (_parameters$room = parameters.room) === null || _parameters$room === void 0 ? void 0 : _parameters$room.name;\n  const nick = (_parameters$user = parameters.user) === null || _parameters$user === void 0 ? void 0 : (_parameters$user$prof = _parameters$user.profile) === null || _parameters$user$prof === void 0 ? void 0 : (_parameters$user$prof2 = _parameters$user$prof.irc) === null || _parameters$user$prof2 === void 0 ? void 0 : _parameters$user$prof2.nick;\n  if (!roomName) {\n    handler.log('Skipping room with no name.');\n    return;\n  }\n  if (!nick) {\n    handler.log('Skipping user with no irc nick.');\n    return;\n  }\n  this.write({\n    prefix: nick,\n    command: 'JOIN',\n    parameters: [\"#\".concat(roomName)]\n  });\n}\nfunction leftChannel(parameters) {\n  const {\n    room: {\n      name: roomName\n    },\n    user: {\n      profile: {\n        irc: {\n          nick\n        }\n      }\n    }\n  } = parameters;\n  this.write({\n    prefix: nick,\n    command: 'PART',\n    parameters: [\"#\".concat(roomName)]\n  });\n}\nfunction sentMessage(parameters) {\n  const {\n    user: {\n      profile: {\n        irc: {\n          nick\n        }\n      }\n    },\n    to,\n    message\n  } = parameters;\n\n  // eslint-disable-next-line no-control-regex\n  const lines = message.toString().split(/\\r\\n|\\r|\\n|\\u0007/);\n  for (const line of lines) {\n    this.write({\n      prefix: nick,\n      command: 'PRIVMSG',\n      parameters: [to],\n      trailer: line\n    });\n  }\n}\nfunction disconnected(parameters) {\n  const {\n    user: {\n      profile: {\n        irc: {\n          nick\n        }\n      }\n    }\n  } = parameters;\n  this.write({\n    prefix: nick,\n    command: 'QUIT'\n  });\n}\nmodule.exportDefault({\n  registerUser,\n  joinChannel,\n  joinedChannel,\n  leftChannel,\n  sentMessage,\n  disconnected\n});","map":{"version":3,"names":["registerUser","parameters","name","profile","irc","nick","username","write","prefix","config","server","command","trailer","joinChannel","room","roomName","user","concat","joinedChannel","handler","_parameters$room","_parameters$user","_parameters$user$prof","_parameters$user$prof2","log","leftChannel","sentMessage","to","message","lines","toString","split","line","disconnected","module","exportDefault"],"sources":["app/irc/server/servers/RFC2813/localCommandHandlers.js"],"sourcesContent":["function registerUser(parameters) {\n\tconst {\n\t\tname,\n\t\tprofile: {\n\t\t\tirc: { nick, username },\n\t\t},\n\t} = parameters;\n\n\tthis.write({\n\t\tprefix: this.config.server.name,\n\t\tcommand: 'NICK',\n\t\tparameters: [nick, 1, username, 'irc.rocket.chat', 1, '+i'],\n\t\ttrailer: name,\n\t});\n}\n\nfunction joinChannel(parameters) {\n\tconst {\n\t\troom: { name: roomName },\n\t\tuser: {\n\t\t\tprofile: {\n\t\t\t\tirc: { nick },\n\t\t\t},\n\t\t},\n\t} = parameters;\n\n\tthis.write({\n\t\tprefix: this.config.server.name,\n\t\tcommand: 'NJOIN',\n\t\tparameters: [`#${roomName}`],\n\t\ttrailer: nick,\n\t});\n}\n\nfunction joinedChannel(parameters, handler) {\n\tconst roomName = parameters.room?.name;\n\tconst nick = parameters.user?.profile?.irc?.nick;\n\n\tif (!roomName) {\n\t\thandler.log('Skipping room with no name.');\n\t\treturn;\n\t}\n\n\tif (!nick) {\n\t\thandler.log('Skipping user with no irc nick.');\n\t\treturn;\n\t}\n\n\tthis.write({\n\t\tprefix: nick,\n\t\tcommand: 'JOIN',\n\t\tparameters: [`#${roomName}`],\n\t});\n}\n\nfunction leftChannel(parameters) {\n\tconst {\n\t\troom: { name: roomName },\n\t\tuser: {\n\t\t\tprofile: {\n\t\t\t\tirc: { nick },\n\t\t\t},\n\t\t},\n\t} = parameters;\n\n\tthis.write({\n\t\tprefix: nick,\n\t\tcommand: 'PART',\n\t\tparameters: [`#${roomName}`],\n\t});\n}\n\nfunction sentMessage(parameters) {\n\tconst {\n\t\tuser: {\n\t\t\tprofile: {\n\t\t\t\tirc: { nick },\n\t\t\t},\n\t\t},\n\t\tto,\n\t\tmessage,\n\t} = parameters;\n\n\t// eslint-disable-next-line no-control-regex\n\tconst lines = message.toString().split(/\\r\\n|\\r|\\n|\\u0007/);\n\tfor (const line of lines) {\n\t\tthis.write({\n\t\t\tprefix: nick,\n\t\t\tcommand: 'PRIVMSG',\n\t\t\tparameters: [to],\n\t\t\ttrailer: line,\n\t\t});\n\t}\n}\n\nfunction disconnected(parameters) {\n\tconst {\n\t\tuser: {\n\t\t\tprofile: {\n\t\t\t\tirc: { nick },\n\t\t\t},\n\t\t},\n\t} = parameters;\n\n\tthis.write({\n\t\tprefix: nick,\n\t\tcommand: 'QUIT',\n\t});\n}\n\nexport default { registerUser, joinChannel, joinedChannel, leftChannel, sentMessage, disconnected };\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"14ebbc667fc2386810c77a07d4c54b6f923beade"}
