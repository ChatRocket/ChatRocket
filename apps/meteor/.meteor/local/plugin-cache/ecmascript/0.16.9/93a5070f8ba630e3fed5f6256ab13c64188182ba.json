{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/custom-oauth/server/transform_helpers.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"app/custom-oauth/server/transform_helpers.js","filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/custom-oauth/server/transform_helpers.js","targets":{"android":"125.0.0","chrome":"125.0.0","edge":"125.0.0","firefox":"115.0.0","ie":"10.0.0","ios":"17.4.0","opera":"110.0.0","opera_mobile":"80.0.0","safari":"17.4.0","samsung":"24.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","root":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true,"topLevelAwait":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/guilhermegazzo/dev/Rocket.Chat/apps/meteor/app/custom-oauth/server/transform_helpers.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/custom-oauth/server/transform_helpers.js"}},"code":"!module.wrapAsync(async function (module, __reifyWaitForDeps__, __reify_async_result__) {\n  \"use strict\";\n  try {\n    let _objectSpread;\n    module.link(\"@babel/runtime/helpers/objectSpread2\", {\n      default(v) {\n        _objectSpread = v;\n      }\n    }, 0);\n    module.export({\n      normalizers: () => normalizers,\n      renameInvalidProperties: () => renameInvalidProperties,\n      getNestedValue: () => getNestedValue,\n      getRegexpMatch: () => getRegexpMatch,\n      fromTemplate: () => fromTemplate\n    });\n    let isObject;\n    module.link(\"../../../lib/utils/isObject\", {\n      isObject(v) {\n        isObject = v;\n      }\n    }, 0);\n    if (__reifyWaitForDeps__()) (await __reifyWaitForDeps__())();\n    const normalizers = {\n      // Set 'id' to '_id' for any sources that provide it\n      _id(identity) {\n        if (identity._id && !identity.id) {\n          identity.id = identity._id;\n        }\n      },\n      // Fix for Reddit\n      redit(identity) {\n        if (identity.result) {\n          return identity.result;\n        }\n      },\n      // Fix WordPress-like identities having 'ID' instead of 'id'\n      wordpress(identity) {\n        if (identity.ID && !identity.id) {\n          identity.id = identity.ID;\n        }\n      },\n      // Fix Auth0-like identities having 'user_id' instead of 'id'\n      user_id(identity) {\n        if (identity.user_id && !identity.id) {\n          identity.id = identity.user_id;\n        }\n      },\n      characterid(identity) {\n        if (identity.CharacterID && !identity.id) {\n          identity.id = identity.CharacterID;\n        }\n      },\n      // Fix Dataporten having 'user.userid' instead of 'id'\n      dataporten(identity) {\n        if (identity.user && identity.user.userid && !identity.id) {\n          if (identity.user.userid_sec && identity.user.userid_sec[0]) {\n            identity.id = identity.user.userid_sec[0];\n          } else {\n            identity.id = identity.user.userid;\n          }\n          identity.email = identity.user.email;\n        }\n      },\n      // Fix for Xenforo [BD]API plugin for 'user.user_id; instead of 'id'\n      xenforo(identity) {\n        if (identity.user && identity.user.user_id && !identity.id) {\n          identity.id = identity.user.user_id;\n          identity.email = identity.user.user_email;\n        }\n      },\n      // Fix general 'phid' instead of 'id' from phabricator\n      phabricator(identity) {\n        if (identity.phid && !identity.id) {\n          identity.id = identity.phid;\n        }\n      },\n      // Fix Keycloak-like identities having 'sub' instead of 'id'\n      kaycloak(identity) {\n        if (identity.sub && !identity.id) {\n          identity.id = identity.sub;\n        }\n      },\n      // Fix OpenShift identities where id is in 'metadata' object\n      openshift(identity) {\n        if (!identity.id && identity.metadata && identity.metadata.uid) {\n          identity.id = identity.metadata.uid;\n          identity.name = identity.fullName;\n        }\n      },\n      // Fix general 'userid' instead of 'id' from provider\n      userid(identity) {\n        if (identity.userid && !identity.id) {\n          identity.id = identity.userid;\n        }\n      },\n      // Fix Nextcloud provider\n      nextcloud(identity) {\n        if (!identity.id && identity.ocs && identity.ocs.data && identity.ocs.data.id) {\n          identity.id = identity.ocs.data.id;\n          identity.name = identity.ocs.data.displayname;\n          identity.email = identity.ocs.data.email;\n        }\n      },\n      // Fix when authenticating from a meteor app with 'emails' field\n      meteor(identity) {\n        if (!identity.email && identity.emails && Array.isArray(identity.emails) && identity.emails.length >= 1) {\n          identity.email = identity.emails[0].address ? identity.emails[0].address : undefined;\n        }\n      }\n    };\n    const IDENTITY_PROPNAME_FILTER = /(\\.)/g;\n    const renameInvalidProperties = input => {\n      if (Array.isArray(input)) {\n        return input.map(renameInvalidProperties);\n      }\n      if (!isObject(input)) {\n        return input;\n      }\n      return Object.entries(input).reduce((result, _ref) => {\n        let [name, value] = _ref;\n        return _objectSpread(_objectSpread({}, result), {}, {\n          [name.replace(IDENTITY_PROPNAME_FILTER, '_')]: renameInvalidProperties(value)\n        });\n      }, {});\n    };\n    const getNestedValue = (propertyPath, source) => propertyPath.split('.').reduce((prev, curr) => prev ? prev[curr] : undefined, source);\n    // /^(.+)@/::email\n    const REGEXP_FROM_FORMULA = /^\\/((?!\\/::).*)\\/::(.+)/;\n    const getRegexpMatch = (formula, data) => {\n      const regexAndPath = REGEXP_FROM_FORMULA.exec(formula);\n      if (!regexAndPath) {\n        return getNestedValue(formula, data);\n      }\n      if (regexAndPath.length !== 3) {\n        throw new Error(\"expected array of length 3, got \".concat(regexAndPath.length));\n      }\n      const [, regexString, path] = regexAndPath;\n      const nestedValue = getNestedValue(path, data);\n      const regex = new RegExp(regexString);\n      const matches = regex.exec(nestedValue);\n\n      // regexp does not match nested value\n      if (!matches) {\n        return undefined;\n      }\n\n      // we only support regular expressions with a single capture group\n      const [, value] = matches;\n\n      // this could mean we return `undefined` (e.g. when capture group is empty)\n      return value;\n    };\n    const templateStringRegex = /{{((?:(?!}}).)+)}}/g;\n    const fromTemplate = (template, data) => {\n      if (!templateStringRegex.test(template)) {\n        return getNestedValue(template, data);\n      }\n      return template.replace(templateStringRegex, (fullMatch, match) => getRegexpMatch(match, data));\n    };\n    __reify_async_result__();\n  } catch (_reifyError) {\n    return __reify_async_result__(_reifyError);\n  }\n  __reify_async_result__()\n}, {\n  self: this,\n  async: false\n});","map":{"version":3,"names":["_objectSpread","module","link","default","v","export","normalizers","renameInvalidProperties","getNestedValue","getRegexpMatch","fromTemplate","isObject","__reifyWaitForDeps__","_id","identity","id","redit","result","wordpress","ID","user_id","characterid","CharacterID","dataporten","user","userid","userid_sec","email","xenforo","user_email","phabricator","phid","kaycloak","sub","openshift","metadata","uid","name","fullName","nextcloud","ocs","data","displayname","meteor","emails","Array","isArray","length","address","undefined","IDENTITY_PROPNAME_FILTER","input","map","Object","entries","reduce","_ref","value","replace","propertyPath","source","split","prev","curr","REGEXP_FROM_FORMULA","formula","regexAndPath","exec","Error","concat","regexString","path","nestedValue","regex","RegExp","matches","templateStringRegex","template","test","fullMatch","match","__reify_async_result__","_reifyError","self","async"],"sources":["app/custom-oauth/server/transform_helpers.js"],"sourcesContent":["import { isObject } from '../../../lib/utils/isObject';\n\nexport const normalizers = {\n\t// Set 'id' to '_id' for any sources that provide it\n\t_id(identity) {\n\t\tif (identity._id && !identity.id) {\n\t\t\tidentity.id = identity._id;\n\t\t}\n\t},\n\n\t// Fix for Reddit\n\tredit(identity) {\n\t\tif (identity.result) {\n\t\t\treturn identity.result;\n\t\t}\n\t},\n\n\t// Fix WordPress-like identities having 'ID' instead of 'id'\n\twordpress(identity) {\n\t\tif (identity.ID && !identity.id) {\n\t\t\tidentity.id = identity.ID;\n\t\t}\n\t},\n\n\t// Fix Auth0-like identities having 'user_id' instead of 'id'\n\tuser_id(identity) {\n\t\tif (identity.user_id && !identity.id) {\n\t\t\tidentity.id = identity.user_id;\n\t\t}\n\t},\n\n\tcharacterid(identity) {\n\t\tif (identity.CharacterID && !identity.id) {\n\t\t\tidentity.id = identity.CharacterID;\n\t\t}\n\t},\n\n\t// Fix Dataporten having 'user.userid' instead of 'id'\n\tdataporten(identity) {\n\t\tif (identity.user && identity.user.userid && !identity.id) {\n\t\t\tif (identity.user.userid_sec && identity.user.userid_sec[0]) {\n\t\t\t\tidentity.id = identity.user.userid_sec[0];\n\t\t\t} else {\n\t\t\t\tidentity.id = identity.user.userid;\n\t\t\t}\n\t\t\tidentity.email = identity.user.email;\n\t\t}\n\t},\n\n\t// Fix for Xenforo [BD]API plugin for 'user.user_id; instead of 'id'\n\txenforo(identity) {\n\t\tif (identity.user && identity.user.user_id && !identity.id) {\n\t\t\tidentity.id = identity.user.user_id;\n\t\t\tidentity.email = identity.user.user_email;\n\t\t}\n\t},\n\n\t// Fix general 'phid' instead of 'id' from phabricator\n\tphabricator(identity) {\n\t\tif (identity.phid && !identity.id) {\n\t\t\tidentity.id = identity.phid;\n\t\t}\n\t},\n\n\t// Fix Keycloak-like identities having 'sub' instead of 'id'\n\tkaycloak(identity) {\n\t\tif (identity.sub && !identity.id) {\n\t\t\tidentity.id = identity.sub;\n\t\t}\n\t},\n\n\t// Fix OpenShift identities where id is in 'metadata' object\n\topenshift(identity) {\n\t\tif (!identity.id && identity.metadata && identity.metadata.uid) {\n\t\t\tidentity.id = identity.metadata.uid;\n\t\t\tidentity.name = identity.fullName;\n\t\t}\n\t},\n\n\t// Fix general 'userid' instead of 'id' from provider\n\tuserid(identity) {\n\t\tif (identity.userid && !identity.id) {\n\t\t\tidentity.id = identity.userid;\n\t\t}\n\t},\n\n\t// Fix Nextcloud provider\n\tnextcloud(identity) {\n\t\tif (!identity.id && identity.ocs && identity.ocs.data && identity.ocs.data.id) {\n\t\t\tidentity.id = identity.ocs.data.id;\n\t\t\tidentity.name = identity.ocs.data.displayname;\n\t\t\tidentity.email = identity.ocs.data.email;\n\t\t}\n\t},\n\n\t// Fix when authenticating from a meteor app with 'emails' field\n\tmeteor(identity) {\n\t\tif (!identity.email && identity.emails && Array.isArray(identity.emails) && identity.emails.length >= 1) {\n\t\t\tidentity.email = identity.emails[0].address ? identity.emails[0].address : undefined;\n\t\t}\n\t},\n};\n\nconst IDENTITY_PROPNAME_FILTER = /(\\.)/g;\nexport const renameInvalidProperties = (input) => {\n\tif (Array.isArray(input)) {\n\t\treturn input.map(renameInvalidProperties);\n\t}\n\tif (!isObject(input)) {\n\t\treturn input;\n\t}\n\n\treturn Object.entries(input).reduce(\n\t\t(result, [name, value]) => ({\n\t\t\t...result,\n\t\t\t[name.replace(IDENTITY_PROPNAME_FILTER, '_')]: renameInvalidProperties(value),\n\t\t}),\n\t\t{},\n\t);\n};\n\nexport const getNestedValue = (propertyPath, source) =>\n\tpropertyPath.split('.').reduce((prev, curr) => (prev ? prev[curr] : undefined), source);\n\n// /^(.+)@/::email\nconst REGEXP_FROM_FORMULA = /^\\/((?!\\/::).*)\\/::(.+)/;\nexport const getRegexpMatch = (formula, data) => {\n\tconst regexAndPath = REGEXP_FROM_FORMULA.exec(formula);\n\tif (!regexAndPath) {\n\t\treturn getNestedValue(formula, data);\n\t}\n\tif (regexAndPath.length !== 3) {\n\t\tthrow new Error(`expected array of length 3, got ${regexAndPath.length}`);\n\t}\n\n\tconst [, regexString, path] = regexAndPath;\n\tconst nestedValue = getNestedValue(path, data);\n\tconst regex = new RegExp(regexString);\n\tconst matches = regex.exec(nestedValue);\n\n\t// regexp does not match nested value\n\tif (!matches) {\n\t\treturn undefined;\n\t}\n\n\t// we only support regular expressions with a single capture group\n\tconst [, value] = matches;\n\n\t// this could mean we return `undefined` (e.g. when capture group is empty)\n\treturn value;\n};\n\nconst templateStringRegex = /{{((?:(?!}}).)+)}}/g;\nexport const fromTemplate = (template, data) => {\n\tif (!templateStringRegex.test(template)) {\n\t\treturn getNestedValue(template, data);\n\t}\n\n\treturn template.replace(templateStringRegex, (fullMatch, match) => getRegexpMatch(match, data));\n};\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"93a5070f8ba630e3fed5f6256ab13c64188182ba"}
