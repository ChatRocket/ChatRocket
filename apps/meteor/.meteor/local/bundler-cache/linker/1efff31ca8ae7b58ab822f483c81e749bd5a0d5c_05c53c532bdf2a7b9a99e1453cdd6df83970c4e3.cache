[{"type":"js","data":"Package[\"core-runtime\"].queue(\"twitter-oauth\",function () {/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar EmitterPromise = Package.meteor.EmitterPromise;\nvar OAuth1Binding = Package.oauth1.OAuth1Binding;\nvar OAuth = Package.oauth.OAuth;\nvar ServiceConfiguration = Package['service-configuration'].ServiceConfiguration;\n\n/* Package-scope variables */\nvar Twitter;\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// packages/twitter-oauth/twitter_common.js                                                                         //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nTwitter = {};\n\nTwitter.validParamsAuthenticate = [\n  'force_login',\n  'screen_name'\n];\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// packages/twitter-oauth/twitter_server.js                                                                         //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nvar urls = {\n  requestToken: \"https://api.twitter.com/oauth/request_token\",\n  authorize: \"https://api.twitter.com/oauth/authorize\",\n  accessToken: \"https://api.twitter.com/oauth/access_token\",\n  authenticate: function (oauthBinding, params) {\n    return OAuth._queryParamsWithAuthTokenUrl(\n      \"https://api.twitter.com/oauth/authenticate\",\n      oauthBinding,\n      params,\n      Twitter.validParamsAuthenticate\n    );\n  }\n};\n\n// https://dev.twitter.com/docs/api/1.1/get/account/verify_credentials\nTwitter.whitelistedFields = ['profile_image_url', 'profile_image_url_https', 'lang', 'email',\"name\"];\n\nOAuth.registerService('twitter', 1, urls, async function(oauthBinding) {\n  const response = await oauthBinding.getAsync('https://api.twitter.com/1.1/account/verify_credentials.json?include_email=true');\n  const  { data: identity } = response;\n  var serviceData = {\n    id: identity.id_str,\n    screenName: identity.screen_name,\n    accessToken: OAuth.sealSecret(oauthBinding.accessToken),\n    accessTokenSecret: OAuth.sealSecret(oauthBinding.accessTokenSecret)\n  };\n\n  // include helpful fields from twitter\n  const fields = Twitter.whitelistedFields.reduce((o, k) => { if ( identity[k]) o[k] = identity[k]; return o}, {});\n  Object.assign(serviceData, fields);\n\n  return {\n    serviceData: serviceData,\n    options: {\n      profile: {\n        name: identity.name\n      }\n    }\n  };\n});\n\n\nTwitter.retrieveCredential = function(credentialToken, credentialSecret) {\n  return OAuth.retrieveCredential(credentialToken, credentialSecret);\n};\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nreturn {\n  export: function () { return {\n      Twitter: Twitter\n    };}\n}});\n","servePath":"/packages/twitter-oauth.js"}]